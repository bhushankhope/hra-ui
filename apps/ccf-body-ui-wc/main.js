(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[792],{7772:je=>{"use strict";je.exports=S,je.exports.default=S;var me=1e20;function S(X,_,E,F,W,N){this.fontSize=X||24,this.buffer=void 0===_?3:_,this.cutoff=F||.25,this.fontFamily=W||"sans-serif",this.fontWeight=N||"normal",this.radius=E||8;var D=this.size=this.fontSize+2*this.buffer,se=D+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=D,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(se*se),this.gridInner=new Float64Array(se*se),this.f=new Float64Array(se),this.z=new Float64Array(se+1),this.v=new Uint16Array(se),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(D/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Y(X,_,E,F,W,N){for(var D=0;D<_;D++)z(X,D,_,E,F,W,N);for(var se=0;se<E;se++)z(X,se*_,1,_,F,W,N)}function z(X,_,E,F,W,N,D){var se,x,B,oe;for(N[0]=0,D[0]=-me,D[1]=me,se=0;se<F;se++)W[se]=X[_+se*E];for(se=1,x=0,B=0;se<F;se++){do{B=(W[se]-W[oe=N[x]]+se*se-oe*oe)/(se-oe)/2}while(B<=D[x]&&--x>-1);N[++x]=se,D[x]=B,D[x+1]=me}for(se=0,x=0;se<F;se++){for(;D[x+1]<se;)x++;X[_+se*E]=W[oe=N[x]]+(se-oe)*(se-oe)}}S.prototype._draw=function(X,_){var N,D,se,x,B,oe,$,G,ee,E=this.ctx.measureText(X),F=E.width,W=2*this.buffer;_&&this.useMetrics?(B=Math.floor(E.actualBoundingBoxAscent),G=this.buffer+Math.ceil(E.actualBoundingBoxAscent),oe=this.buffer,$=this.buffer,N=(D=Math.min(this.size,Math.ceil(E.actualBoundingBoxRight-E.actualBoundingBoxLeft)))+W,se=(x=Math.min(this.size-oe,Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent)))+W,this.ctx.textBaseline="alphabetic"):(N=D=this.size,se=x=this.size,B=19*this.fontSize/24,oe=$=0,G=this.middle,this.ctx.textBaseline="middle"),D&&x&&(this.ctx.clearRect($,oe,D,x),this.ctx.fillText(X,this.buffer,G),ee=this.ctx.getImageData($,oe,D,x));var q=new Uint8ClampedArray(N*se);return function Q(X,_,E,F,W,N,D){N.fill(me,0,_*E),D.fill(0,0,_*E);for(var se=(_-F)/2,x=0;x<W;x++)for(var B=0;B<F;B++){var oe=(x+se)*_+B+se,$=X.data[4*(x*F+B)+3]/255;if(1===$)N[oe]=0,D[oe]=me;else if(0===$)N[oe]=me,D[oe]=0;else{var G=Math.max(0,.5-$),ee=Math.max(0,$-.5);N[oe]=G*G,D[oe]=ee*ee}}}(ee,N,se,D,x,this.gridOuter,this.gridInner),Y(this.gridOuter,N,se,this.f,this.v,this.z),Y(this.gridInner,N,se,this.f,this.v,this.z),function C(X,_,E,F,W,N,D){for(var se=0;se<_*E;se++){var x=Math.sqrt(F[se])-Math.sqrt(W[se]);X[se]=Math.round(255-255*(x/N+D))}}(q,N,se,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:q,metrics:{width:D,height:x,sdfWidth:N,sdfHeight:se,top:B,left:0,advance:F}}},S.prototype.draw=function(X){return this._draw(X,!1).data},S.prototype.drawWithMetrics=function(X){return this._draw(X,!0)}},8707:(je,me,S)=>{"use strict";var Q={};S.r(Q),S.d(Q,{decode:()=>Pve,name:()=>Nve});var C={};S.r(C),S.d(C,{name:()=>Uve,preprocess:()=>Vve});var Y={};S.r(Y),S.d(Y,{name:()=>Hve,preprocess:()=>Gve});var z={};S.r(z),S.d(z,{decode:()=>Tbe,encode:()=>Mbe,name:()=>Sbe,preprocess:()=>Cbe});var X={};S.r(X),S.d(X,{decode:()=>Nbe,encode:()=>Pbe,name:()=>Obe});var _={};S.r(_),S.d(_,{decode:()=>Fbe,encode:()=>Bbe,name:()=>Lbe});var E={};S.r(E),S.d(E,{decode:()=>jbe,encode:()=>Ube,name:()=>kbe});var F={};S.r(F),S.d(F,{delMany:()=>CNe,get:()=>ANe,setMany:()=>SNe});var W={};function N(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){N(s,i,r,o,a,"next",l)}function a(l){N(s,i,r,o,a,"throw",l)}o(void 0)})}}S.r(W),S.d(W,{inDefaultGraph:()=>WNe,isBlankNode:()=>HNe,isDefaultGraph:()=>ob,isLiteral:()=>GNe,isNamedNode:()=>VNe,isVariable:()=>zNe,prefix:()=>$Ne,prefixes:()=>ML});let x=null,B=!1,oe=1;const $=Symbol("SIGNAL");function G(t){const e=x;return x=t,e}const b={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ce(t){if((!ke(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==oe)){if(!t.producerMustRecompute(t)&&!Ve(t))return t.dirty=!1,void(t.lastCleanEpoch=oe);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=oe}}function ae(t){t.dirty=!0,function j(t){if(void 0===t.liveConsumerNode)return;const e=B;B=!0;try{for(const n of t.liveConsumerNode)n.dirty||ae(n)}finally{B=e}}(t),t.consumerMarkedDirty?.(t)}function xe(t){return t&&(t.nextProducerIndex=0),G(t)}function Oe(t,e){if(G(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ke(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ce(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ve(t){Ae(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(ce(n),i!==n.version))return!0}return!1}function Ze(t){if(Ae(t),ke(t))for(let e=0;e<t.producerNode.length;e++)Ce(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ce(t,e){if(function Be(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ae(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)Ce(t.producerNode[i],t.producerIndexOfThis[i]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ae(r),r.producerIndexOfThis[i]=e}}function ke(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ae(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let R=null;const We=()=>{},Ee={...b,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:We};function Qe(t){return"function"==typeof t}function vt(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Rt=vt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function wt(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Lt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Qe(i))try{i()}catch(s){e=s instanceof Rt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ne(s)}catch(o){e=e??[],o instanceof Rt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Rt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ne(e);else{if(e instanceof Lt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&wt(n,e)}remove(e){const{_finalizers:n}=this;n&&wt(n,e),e instanceof Lt&&e._removeParent(this)}}Lt.EMPTY=(()=>{const t=new Lt;return t.closed=!0,t})();const pe=Lt.EMPTY;function H(t){return t instanceof Lt||t&&"closed"in t&&Qe(t.remove)&&Qe(t.add)&&Qe(t.unsubscribe)}function ne(t){Qe(t)?t():t.unsubscribe()}const Le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},tt={setTimeout(t,e,...n){const{delegate:i}=tt;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=tt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lt(t){tt.setTimeout(()=>{const{onUnhandledError:e}=Le;if(!e)throw t;e(t)})}function xt(){}const nn=An("C",void 0,void 0);function An(t,e,n){return{kind:t,value:e,error:n}}let vn=null;function Ni(t){if(Le.useDeprecatedSynchronousErrorHandling){const e=!vn;if(e&&(vn={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=vn;if(vn=null,n)throw i}}else t()}class lr extends Lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,H(e)&&e.add(this)):this.destination=Sl}static create(e,n,i){return new Lr(e,n,i)}next(e){this.isStopped?Ka(function Hn(t){return An("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ka(function Fn(t){return An("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ka(nn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fs=Function.prototype.bind;function ao(t,e){return Fs.call(t,e)}class Gi{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){lo(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){lo(i)}else lo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){lo(n)}}}class Lr extends lr{constructor(e,n,i){let r;if(super(),Qe(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Le.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ao(e.next,s),error:e.error&&ao(e.error,s),complete:e.complete&&ao(e.complete,s)}):r=e}this.destination=new Gi(r)}}function lo(t){Le.useDeprecatedSynchronousErrorHandling?function ta(t){Le.useDeprecatedSynchronousErrorHandling&&vn&&(vn.errorThrown=!0,vn.error=t)}(t):lt(t)}function Ka(t,e){const{onStoppedNotification:n}=Le;n&&tt.setTimeout(()=>n(t,e))}const Sl={closed:!0,next:xt,error:function rc(t){throw t},complete:xt},Ja="function"==typeof Symbol&&Symbol.observable||"@@observable";function ze(t){return t}let At=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function as(t){return t&&t instanceof lr||function cr(t){return t&&Qe(t.next)&&Qe(t.error)&&Qe(t.complete)}(t)&&H(t)}(n)?n:new Lr(n,i,r);return Ni(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=rn(i))((r,s)=>{const o=new Lr({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Ja](){return this}pipe(...n){return function zt(t){return 0===t.length?ze:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=rn(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function rn(t){var e;return null!==(e=t??Le.Promise)&&void 0!==e?e:Promise}const Za=vt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Jt=(()=>{class t extends At{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Ca(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Za}next(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?pe:(this.currentObservers=null,s.push(n),new Lt(()=>{this.currentObservers=null,wt(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new At;return n.source=this,n}}return t.create=(e,n)=>new Ca(e,n),t})();class Ca extends Jt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:pe}}class Ji extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Ta(t){return Qe(t?.lift)}function dn(t){return e=>{if(Ta(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zn(t,e,n,i,r){return new Bs(t,e,n,i,r)}class Bs extends lr{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Xt(t,e){return dn((n,i)=>{let r=0;n.subscribe(Zn(i,s=>{i.next(t.call(e,s,r++))}))})}const ls="https://g.co/ng/security#xss";class St extends Error{constructor(e,n){super(function _e(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Pe(t){return{toString:t}.toString()}const at="__parameters__";function Qt(t,e,n){return Pe(()=>{const i=function Gt(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(at)?l[at]:Object.defineProperty(l,at,{value:[]})[at];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const On=globalThis;function oi(t){for(let e in t)if(t[e]===oi)return e;throw Error("Could not find renamed property on target object.")}function Ma(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ei(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ei).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Es(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const eu=oi({__forward_ref__:oi});function Qn(t){return t.__forward_ref__=Qn,t.toString=function(){return ei(this())},t}function fn(t){return tu(t)?t():t}function tu(t){return"function"==typeof t&&t.hasOwnProperty(eu)&&t.__forward_ref__===Qn}function Ot(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Uo(t){return{providers:t.providers||[],imports:t.imports||[]}}function gp(t){return ji(t,_p)||ji(t,xb)}function ji(t,e){return t.hasOwnProperty(e)?t[e]:null}function mp(t){return t&&(t.hasOwnProperty(c_)||t.hasOwnProperty(zS))?t[c_]:null}const _p=oi({\u0275prov:oi}),c_=oi({\u0275inj:oi}),xb=oi({ngInjectableDef:oi}),zS=oi({ngInjectorDef:oi});class Et{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ot({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yp(t){return t&&!!t.\u0275providers}const id=oi({\u0275cmp:oi}),vp=oi({\u0275dir:oi}),qs=oi({\u0275pipe:oi}),Ab=oi({\u0275mod:oi}),kr=oi({\u0275fac:oi}),xh=oi({__NG_ELEMENT_ID__:oi}),h_=oi({__NG_ENV_ID__:oi});function Sn(t){return"string"==typeof t?t:null==t?"":String(t)}function Eh(t,e){throw new St(-201,!1)}var ai=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ai||{});let f_;function Tb(){return f_}function Ys(t){const e=f_;return f_=t,e}function Ah(t,e,n){const i=gp(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ai.Optional?null:void 0!==e?e:void Eh()}const rd={},bp="__NG_DI_FLAG__",sd="ngTempTokenPath",Mb=/\n/gm,wp="__source";let oc;function Cl(t){const e=oc;return oc=t,e}function Vo(t,e=ai.Default){if(void 0===oc)throw new St(-203,!1);return null===oc?Ah(t,void 0,e):oc.get(t,e&ai.Optional?null:void 0,e)}function ct(t,e=ai.Default){return(Tb()||Vo)(fn(t),e)}function jt(t,e=ai.Default){return ct(t,Ch(e))}function Ch(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function g_(t){const e=[];for(let n=0;n<t.length;n++){const i=fn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new St(900,!1);let r,s=ai.Default;for(let o=0;o<i.length;o++){const a=i[o],l=JS(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ct(r,s))}else e.push(ct(i))}return e}function Th(t,e){return t[bp]=e,t.prototype[bp]=e,t}function JS(t){return t[bp]}const ld=Th(Qt("Optional"),8),cd=Th(Qt("SkipSelf"),4);function ho(t,e){return t.hasOwnProperty(kr)?t[kr]:null}function ud(t,e){t.forEach(n=>Array.isArray(n)?ud(n,e):e(n))}function Db(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Tl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ho(t,e,n){let i=Ml(t,e);return i>=0?t[1|i]=n:(i=~i,function Rb(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function m_(t,e){const n=Ml(t,e);if(n>=0)return t[1|n]}function Ml(t,e){return function It(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const bt={},Ht=[],Dn=new Et(""),hi=new Et("",-1),Ir=new Et("");class Si{get(e,n=rd){if(n===rd){const i=new Error(`NullInjectorError: No provider for ${ei(e)}!`);throw i.name="NullInjectorError",i}return n}}var dd=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(dd||{}),Da=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Da||{}),qt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(qt||{});function Ap(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function __(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Mh(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function iu(t){return 3===t||4===t||6===t}function Mh(t){return 64===t.charCodeAt(0)}function ac(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ci(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ci(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const Ob="ng-template";function Nb(t,e,n,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==Ap(e[r+1].toLowerCase(),n,0))return!0}else if(hd(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===n)return!0}return!1}function hd(t){return 4===t.type&&t.value!==Ob}function tC(t,e,n){return e===(4!==t.type||n?t.value:Ob)}function nC(t,e,n){let i=4;const r=t.attrs,s=null!==r?function Pb(t){for(let e=0;e<t.length;e++)if(iu(t[e]))return e;return t.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!tC(t,l,n)||""===l&&1===e.length){if(Ra(i))return!1;o=!0}}else if(8&i){if(null===r||!Nb(t,r,l,n)){if(Ra(i))return!1;o=!0}}else{const c=e[++a],u=Sp(l,r,hd(t),n);if(-1===u){if(Ra(i))return!1;o=!0;continue}if(""!==c){let h;if(h=u>s?"":r[u+1].toLowerCase(),2&i&&c!==h){if(Ra(i))return!1;o=!0}}}}else{if(!o&&!Ra(i)&&!Ra(l))return!1;if(o&&Ra(l))continue;o=!1,i=l|1&i}}return Ra(i)||o}function Ra(t){return!(1&t)}function Sp(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Tp(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Il(t,e,n=!1){for(let i=0;i<e.length;i++)if(nC(t,e[i],n))return!0;return!1}function Lb(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function y_(t,e){return t?":not("+e.trim()+")":e}function Mp(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ra(o)&&(e+=y_(s,r),r=""),i=o,s=s||!Ra(i);n++}return""!==r&&(e+=y_(s,r)),e}function mi(t){return Pe(()=>{const e=jr(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Da.Emulated,styles:t.styles||Ht,_:null,schemas:t.schemas||null,tView:null,id:""};Ss(n);const i=t.dependencies;return n.directiveDefs=Dp(i,!1),n.pipeDefs=Dp(i,!0),n.id=function kb(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function Ip(t){return zn(t)||qr(t)}function iC(t){return null!==t}function ia(t){return Pe(()=>({type:t.type,bootstrap:t.bootstrap||Ht,declarations:t.declarations||Ht,imports:t.imports||Ht,exports:t.exports||Ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Bb(t,e){if(null==t)return bt;const n={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];let s,o,a=qt.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==qt.None?[i,a]:i,e[s]=o):n[s]=i}return n}function $t(t){return Pe(()=>{const e=jr(t);return Ss(e),e})}function $r(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function zn(t){return t[id]||null}function qr(t){return t[vp]||null}function cs(t){return t[qs]||null}function jr(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ht,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bb(t.inputs,e),outputs:Bb(t.outputs),debugInfo:null}}function Ss(t){t.features?.forEach(e=>e(t))}function Dp(t,e){if(!t)return null;const n=e?cs:Ip;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(iC)}function v_(...t){return{\u0275providers:ru(0,t),\u0275fromNgModule:!0}}function ru(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return ud(e,o=>{const a=o;Dl(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Op(r,s),n}function Op(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];su(r,s=>{e(s,i)})}}function Dl(t,e,n,i){if(!(t=fn(t)))return!1;let r=null,s=mp(t);const o=!s&&zn(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const l=t.ngModule;if(s=mp(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Dl(c,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{ud(s.imports,u=>{Dl(u,e,n,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&Op(c,e)}if(!a){const c=ho(r)||(()=>new r);e({provide:r,useFactory:c,deps:Ht},r),e({provide:Ir,useValue:r,multi:!0},r),e({provide:Dn,useValue:()=>ct(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=t;su(l,u=>{e(u,c)})}}}return r!==t&&void 0!==t.providers}function su(t,e){for(let n of t)yp(n)&&(n=n.\u0275providers),Array.isArray(n)?su(n,e):e(n)}const Pp=oi({provide:String,useValue:oi});function cc(t){return null!==t&&"object"==typeof t&&Pp in t}function ou(t){return"function"==typeof t}const b_=new Et(""),au={},Dh={};let Lp;function Re(){return void 0===Lp&&(Lp=new Si),Lp}class Cs{}class Rl extends Cs{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,w_(e,o=>this.processProvider(o)),this.records.set(hi,fd(void 0,this)),r.has("environment")&&this.records.set(Cs,fd(void 0,this));const s=this.records.get(b_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ir,Ht,ai.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=G(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Cl(this),i=Ys(void 0);try{return e()}finally{Cl(n),Ys(i)}}get(e,n=rd,i=ai.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(h_))return e[h_](this);i=Ch(i);const s=Cl(this),o=Ys(void 0);try{if(!(i&ai.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function lC(t){return"function"==typeof t||"object"==typeof t&&t instanceof Et}(e)&&gp(e);l=c&&this.injectableDefInScope(c)?fd(go(e),au):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&ai.Self?Re():this.parent).get(e,n=i&ai.Optional&&n===rd?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[sd]=a[sd]||[]).unshift(ei(e)),s)throw a;return function ZS(t,e,n,i){const r=t[sd];throw e[wp]&&r.unshift(e[wp]),t.message=function QS(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ei(e);if(Array.isArray(e))r=e.map(ei).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ei(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Mb,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[sd]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ys(o),Cl(s)}}resolveInjectorInitializers(){const e=G(null),n=Cl(this),i=Ys(void 0);try{const s=this.get(Dn,Ht,ai.Self);for(const o of s)o()}finally{Cl(n),Ys(i),G(e)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(ei(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new St(205,!1)}processProvider(e){let n=ou(e=fn(e))?e:fn(e&&e.provide);const i=function oC(t){return cc(t)?fd(void 0,t.useValue):fd(Vb(t),au)}(e);if(!ou(e)&&!0===e.multi){let r=this.records.get(n);r||(r=fd(void 0,au,!0),r.factory=()=>g_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){const i=G(null);try{return n.value===au&&(n.value=Dh,n.value=n.factory()),"object"==typeof n.value&&n.value&&function aC(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=fn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function go(t){const e=gp(t),n=null!==e?e.factory:ho(t);if(null!==n)return n;if(t instanceof Et)throw new St(204,!1);if(t instanceof Function)return function li(t){if(t.length>0)throw new St(204,!1);const n=function GS(t){return t&&(t[_p]||t[xb])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new St(204,!1)}function Vb(t,e,n){let i;if(ou(t)){const r=fn(t);return ho(r)||go(r)}if(cc(t))i=()=>fn(t.useValue);else if(function Ub(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...g_(t.deps||[]));else if(function jb(t){return!(!t||!t.useExisting)}(t))i=()=>ct(fn(t.useExisting));else{const r=fn(t&&(t.useClass||t.provide));if(!function lu(t){return!!t.deps}(t))return ho(r)||go(r);i=()=>new r(...g_(t.deps))}return i}function fd(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function w_(t,e){for(const n of t)Array.isArray(n)?w_(n,e):n&&yp(n)?w_(n.\u0275providers,e):e(n)}function Hb(){return void 0!==Tb()||null!=function KS(){return oc}()}const dr=0,Wt=1,mn=2,Dr=3,Oa=4,Ts=5,_o=6,gd=7,zi=8,Xr=9,Xs=10,Tn=11,Oh=12,E_=13,md=14,bi=15,uu=16,sa=17,Ur=18,Nh=19,A_=20,Nl=21,dc=22,yo=23,kn=25,S_=1,Qa=7,Sr=9,vr=10;var Fp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Fp||{});function Qi(t){return Array.isArray(t)&&"object"==typeof t[S_]}function us(t){return Array.isArray(t)&&!0===t[S_]}function _d(t){return!!(4&t.flags)}function Go(t){return t.componentOffset>-1}function Lh(t){return!(1&~t.flags)}function er(t){return!!t.template}function Fh(t){return!!(512&t[mn])}class Bh{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function qb(t,e,n,i){null!==e?e.applyValueToInputSignal(e,i):t[n]=i}function Rr(){return T_}function T_(t){return t.type.prototype.ngOnChanges&&(t.setInput=Yb),SC}function SC(){const t=Up(this),e=t?.current;if(e){const n=t.previous;if(n===bt)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Yb(t,e,n,i,r){const s=this.declaredInputs[i],o=Up(t)||function Kb(t,e){return t[Xb]=e}(t,{previous:bt,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Bh(c&&c.currentValue,n,l===bt),qb(t,e,r,n)}Rr.ngInherit=!0;const Xb="__ngSimpleChanges__";function Up(t){return t[Xb]||null}const oa=function(t,e,n){},Wn="svg";let Zb=!1;function Bi(t){for(;Array.isArray(t);)t=t[dr];return t}function Us(t,e){return Bi(e[t])}function Ks(t,e){return Bi(e[t.index])}function hu(t,e){return t.data[e]}function fu(t,e){return t[e]}function vo(t,e){const n=e[t];return Qi(n)?n:n[dr]}function el(t){return!(128&~t[mn])}function Na(t,e){return null==e?null:t[e]}function Uh(t){t[sa]=0}function Qb(t){1024&t[mn]||(t[mn]|=1024,el(t)&&pu(t))}function Gp(t){return!!(9216&t[mn]||t[yo]?.dirty)}function Vh(t){t[Xs].changeDetectionScheduler?.notify(1),Gp(t)?pu(t):64&t[mn]&&(function jh(){return Zb}()?(t[mn]|=1024,pu(t)):t[Xs].changeDetectionScheduler?.notify())}function pu(t){t[Xs].changeDetectionScheduler?.notify();let e=bo(t);for(;null!==e&&!(8192&e[mn])&&(e[mn]|=8192,el(e));)e=bo(e)}function Pa(t,e){if(!(256&~t[mn]))throw new St(911,!1);null===t[Nl]&&(t[Nl]=[]),t[Nl].push(e)}function bo(t){const e=t[Dr];return us(e)?e[Dr]:e}const Nn={lFrame:sw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function O_(){return Nn.bindingsEnabled}function gu(){return null!==Nn.skipHydrationRootTNode}function Mt(){return Nn.lFrame.lView}function ti(){return Nn.lFrame.tView}function Vs(t){return Nn.lFrame.contextLView=t,t[zi]}function ds(t){return Nn.lFrame.contextLView=null,t}function Ti(){let t=N_();for(;null!==t&&64===t.type;)t=t.parent;return t}function N_(){return Nn.lFrame.currentTNode}function La(t,e){const n=Nn.lFrame;n.currentTNode=t,n.isParent=e}function fc(){return Nn.lFrame.isParent}function mu(){Nn.lFrame.isParent=!1}function hs(){const t=Nn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Wo(){return Nn.lFrame.bindingIndex++}function aa(t){const e=Nn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function zp(t,e){const n=Nn.lFrame;n.bindingIndex=n.bindingRootIndex=t,zh(e)}function zh(t){Nn.lFrame.currentDirectiveIndex=t}function Wp(){return Nn.lFrame.currentQueryIndex}function la(t){Nn.lFrame.currentQueryIndex=t}function rw(t){const e=t[Wt];return 2===e.type?e.declTNode:1===e.type?t[Ts]:null}function B_(t,e,n){if(n&ai.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&ai.Host||(r=rw(s),null===r||(s=s[md],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Nn.lFrame=j_();return i.currentTNode=e,i.lView=t,!0}function k_(t){const e=j_(),n=t[Wt];Nn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function j_(){const t=Nn.lFrame,e=null===t?null:t.child;return null===e?sw(t):e}function sw(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ow(){const t=Nn.lFrame;return Nn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const il=ow;function Wh(){const t=ow();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fs(){return Nn.lFrame.selectedIndex}function rl(t){Nn.lFrame.selectedIndex=t}function wi(){const t=Nn.lFrame;return hu(t.tView,t.selectedIndex)}function wn(){Nn.lFrame.currentNamespace=Wn}let qp=!0;function yd(){return qp}function tr(t){qp=t}function Yp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function $h(t,e,n){lw(t,e,3,n)}function Xp(t,e,n,i){(3&t[mn])===n&&lw(t,e,n,i)}function Kp(t,e){let n=t[mn];(3&n)===e&&(n&=16383,n+=1,t[mn]=n)}function lw(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&t[sa]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(t[sa]+=65536),(a<s||-1==s)&&(FC(t,n,e,l),t[sa]=(4294901760&t[sa])+l+2),l++}function cw(t,e){oa(4,t,e);const n=G(null);try{e.call(t)}finally{G(n),oa(5,t,e)}}function FC(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[mn]>>14<t[sa]>>16&&(3&t[mn])===e&&(t[mn]+=16384,cw(a,s)):cw(a,s)}const xo=-1;class Kr{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Zp(t){return t!==xo}function qh(t){return 32767&t}function Yh(t,e){let n=function UC(t){return t>>16}(t),i=e;for(;n>0;)i=i[md],n--;return i}let W_=!0;function Xh(t){const e=W_;return W_=t,e}const uw=255,Qp=5;let dw=0;const Eo={};function Kh(t,e){const n=Jh(t,e);if(-1!==n)return n;const i=e[Wt];i.firstCreatePass&&(t.injectorIndex=e.length,eg(i.data,t),eg(e,null),eg(i.blueprint,null));const r=Zh(t,e),s=t.injectorIndex;if(Zp(r)){const o=qh(r),a=Yh(r,e),l=a[Wt].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Jh(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Zh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=yw(r),null===i)return xo;if(n++,r=r[md],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return xo}function ca(t,e,n){!function $_(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(xh)&&(i=n[xh]),null==i&&(i=n[xh]=dw++);const r=i&uw;e.data[t+(r>>Qp)]|=1<<r}(t,e,n)}function hw(t,e,n){if(n&ai.Optional||void 0!==t)return t;Eh()}function q_(t,e,n,i){if(n&ai.Optional&&void 0===i&&(i=null),!(n&(ai.Self|ai.Host))){const r=t[Xr],s=Ys(void 0);try{return r?r.get(e,i,n&ai.Optional):Ah(e,i,n&ai.Optional)}finally{Ys(s)}}return hw(i,0,n)}function fw(t,e,n,i=ai.Default,r){if(null!==t){if(2048&e[mn]&&!(i&ai.Self)){const o=function zC(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[mn]&&!(512&o[mn]);){const a=pw(s,o,n,i|ai.Self,Eo);if(a!==Eo)return a;let l=s.parent;if(!l){const c=o[A_];if(c){const u=c.get(n,Eo,i);if(u!==Eo)return u}l=yw(o),o=o[md]}s=l}return r}(t,e,n,i,Eo);if(o!==Eo)return o}const s=pw(t,e,n,i,Eo);if(s!==Eo)return s}return q_(e,n,i,r)}function pw(t,e,n,i,r){const s=function GC(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(xh)?t[xh]:void 0;return"number"==typeof e?e>=0?e&uw:_w:e}(n);if("function"==typeof s){if(!B_(e,t,i))return i&ai.Host?hw(r,0,i):q_(e,n,i,r);try{let o;if(o=s(i),null!=o||i&ai.Optional)return o;Eh()}finally{il()}}else if("number"==typeof s){let o=null,a=Jh(t,e),l=xo,c=i&ai.Host?e[bi][Ts]:null;for((-1===a||i&ai.SkipSelf)&&(l=-1===a?Zh(t,e):e[a+8],l!==xo&&mw(i,!1)?(o=e[Wt],a=qh(l),e=Yh(l,e)):a=-1);-1!==a;){const u=e[Wt];if(gw(s,a,u.data)){const h=HC(a,e,n,o,i,c);if(h!==Eo)return h}l=e[a+8],l!==xo&&mw(i,e[Wt].data[a+8]===c)&&gw(s,a,e)?(o=u,a=qh(l),e=Yh(l,e)):a=-1}}return r}function HC(t,e,n,i,r,s){const o=e[Wt],a=o.data[t+8],u=tg(a,o,n,null==i?Go(a)&&W_:i!=o&&!!(3&a.type),r&ai.Host&&s===a);return null!==u?vu(e,o,u,a):Eo}function tg(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,u=s>>20,f=r?a+u:t.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<l&&n===m||g>=l&&m.type===n)return g}if(r){const g=o[l];if(g&&er(g)&&g.type===n)return l}return null}function vu(t,e,n,i){let r=t[n];const s=e.data;if(function H_(t){return t instanceof Kr}(r)){const o=r;o.resolving&&function sc(t,e){throw e&&e.join(" > "),new St(-200,t)}(function di(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Sn(t)}(s[n]));const a=Xh(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ys(o.injectImpl):null;B_(t,i,ai.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function LC(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=T_(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&Ys(c),Xh(a),o.resolving=!1,il()}}return r}function gw(t,e,n){return!!(n[e+(t>>Qp)]&1<<t)}function mw(t,e){return!(t&ai.Self||t&ai.Host&&e)}class Jr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return fw(this._tNode,this._lView,e,Ch(i),n)}}function _w(){return new Jr(Ti(),Mt())}function Wi(t){return Pe(()=>{const e=t.prototype.constructor,n=e[kr]||ng(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[kr]||ng(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function ng(t){return tu(t)?()=>{const e=ng(fn(t));return e&&e()}:ho(t)}function yw(t){const e=t[Wt],n=e.type;return 2===n?e.declTNode:1===n?t[Ts]:null}function bu(t){return function yu(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(iu(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Ti(),t)}function Sw(t,e=null,n=null,i){const r=Cw(t,e,n,i);return r.resolveInjectorInitializers(),r}function Cw(t,e=null,n=null,i,r=new Set){const s=[n||Ht,v_(t)];return i=i||("object"==typeof t?void 0:ei(t)),new Rl(s,e||Re(),i||null,r)}let Ui=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=rd;static#t=this.NULL=new Si;static create(n,i){if(Array.isArray(n))return Sw({name:""},i,n,"");{const r=n.name??"";return Sw({name:r},n.parent,n.providers,r)}}static#n=this.\u0275prov=Ot({token:t,providedIn:"any",factory:()=>ct(hi)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function X_(t){return t.ngOriginalError}class Ao{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&X_(e);for(;n&&X_(n);)n=X_(n);return n||null}}const Mw=new Et("",{providedIn:"root",factory:()=>jt(Ao).handleError.bind(void 0)});let wd=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=KC;static#t=this.__NG_ENV_ID__=n=>n}return t})();class XC extends wd{constructor(e){super(),this._lView=e}onDestroy(e){return Pa(this._lView,e),()=>function D_(t,e){if(null===t[Nl])return;const n=t[Nl].indexOf(e);-1!==n&&t[Nl].splice(n,1)}(this._lView,e)}}function KC(){return new XC(Mt())}function JC(){return xd(Ti(),Mt())}function xd(t,e){return new fi(Ks(t,e))}let fi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=JC}return t})();function Dw(t){return t instanceof fi?t.nativeElement:t}function Qh(t){return e=>{setTimeout(t,void 0,e)}}const _n=class ZC extends Jt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Hb()&&(this.destroyRef=jt(wd,{optional:!0})??void 0)}emit(e){const n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Qh(s),r&&(r=Qh(r)),o&&(o=Qh(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Lt&&e.add(a),a}};function QC(){return this._results[Symbol.iterator]()}class ef{static#e=Symbol.iterator;get changes(){return this._changes??=new _n}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=ef.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=QC)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const i=function fo(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function xp(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function rg(t){return!(128&~t.flags)}const og=new Map;let tT=0;const J_="__ngContext__";function Hs(t,e){Qi(e)?(t[J_]=e[Nh],function nT(t){og.set(t[Nh],t)}(e)):t[J_]=e}function rf(t){return Vw(t[Oh])}function Uw(t){return Vw(t[Oa])}function Vw(t){for(;null!==t&&!us(t);)t=t[Oa];return t}let cg;const ug=new Et("",{providedIn:"root",factory:()=>dg}),dg="ng",af=new Et(""),sl=new Et("",{providedIn:"platform",factory:()=>"unknown"}),ol=new Et(""),hg=new Et("",{providedIn:"root",factory:()=>function pc(){if(void 0!==cg)return cg;if(typeof document<"u")return document;throw new St(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ll=()=>null;function ay(t,e,n=!1){return Ll(t,e,n)}const Kw=new Et("",{providedIn:"root",factory:()=>!1});let wu;function Fa(t){return function Js(){if(void 0===wu&&(wu=null,On.trustedTypes))try{wu=On.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wu}()?.createHTML(t)||t}class mc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ls})`}}class da extends mc{getTypeName(){return"HTML"}}class Jw extends mc{getTypeName(){return"Style"}}class MT extends mc{getTypeName(){return"Script"}}class Mi extends mc{getTypeName(){return"URL"}}class IT extends mc{getTypeName(){return"ResourceURL"}}function To(t){return t instanceof mc?t.changingThisBreaksApplicationSecurity:t}function $o(t,e){const n=function DT(t){return t instanceof mc&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ls})`)}return n===e}class FT{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Fa(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class BT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Fa(e),n}}const jT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vg(t){return(t=String(t)).match(jT)?t:"unsafe:"+t}function Fl(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function xu(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Qw=Fl("area,br,col,hr,img,wbr"),bg=Fl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ex=Fl("rp,rt"),zs=xu(Qw,xu(bg,Fl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xu(ex,Fl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xu(ex,bg)),py=Fl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gy=xu(py,Fl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),UT=Fl("script,style,template");class VT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)r.push(n),n=GT(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=tx(n);if(s){n=s;break}n=r.pop()}return this.buf.join("")}startElement(e){const n=nx(e).toLowerCase();if(!zs.hasOwnProperty(n))return this.sanitizedSomething=!0,!UT.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!gy.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;py[a]&&(l=vg(l)),this.buf.push(" ",o,'="',ox(l),'"')}return this.buf.push(">"),!0}endElement(e){const n=nx(e).toLowerCase();zs.hasOwnProperty(n)&&!Qw.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(ox(e))}}function tx(t){const e=t.nextSibling;if(e&&t!==e.previousSibling)throw ix(e);return e}function GT(t){const e=t.firstChild;if(e&&function HT(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,e))throw ix(e);return e}function nx(t){const e=t.nodeName;return"string"==typeof e?e:"FORM"}function ix(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const rx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sx=/([^\#-~ |!])/g;function ox(t){return t.replace(/&/g,"&amp;").replace(rx,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(sx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wg;function ax(t,e){let n=null;try{wg=wg||function Zw(t){const e=new BT(t);return function kT(){try{return!!(new window.DOMParser).parseFromString(Fa(""),"text/html")}catch{return!1}}()?new FT(e):e}(t);let i=e?String(e):"";n=wg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=wg.getInertBodyElement(i)}while(i!==s);return Fa((new VT).sanitizeChildren(my(n)||n))}finally{if(n){const i=my(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function my(t){return"content"in t&&function Cd(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Is=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Is||{});function _y(t){const e=function df(){const t=Mt();return t&&t[Xs].sanitizer}();return e?e.sanitize(Is.URL,t)||"":$o(t,"URL")?To(t):vg(Sn(t))}const XT=/^>|^->|<!--|-->|--!>|<!-$/g,KT=/(<|>)/g,JT="\u200b$1\u200b";var _c=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_c||{});let Ey;function Ay(t,e){return Ey(t,e)}function Md(t,e,n,i,r){if(null!=i){let s,o=!1;us(i)?s=i:Qi(i)&&(o=!0,i=i[dr]);const a=Bi(i);0===t&&null!==n?null==r?Ax(e,n,a):Eu(e,n,a,r||null,!0):1===t&&null!==n?Eu(e,n,a,r||null,!0):2===t?function Dt(t,e,n){const i=Ag(t,e);i&&function fM(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function $n(t,e,n,i,r){const s=n[Qa];s!==Bi(n)&&Md(e,t,i,s,r);for(let a=vr;a<n.length;a++){const l=n[a];Yt(l[Wt],l,t,e,i,s)}}(e,t,s,n,r)}}function pf(t,e){return t.createComment(function hx(t){return t.replace(XT,e=>e.replace(KT,JT))}(e))}function Id(t,e,n){return t.createElement(e,n)}function wx(t,e){e[Xs].changeDetectionScheduler?.notify(1),Yt(t,e,e[Tn],2,null,null)}function xx(t,e){const n=t[Sr],i=n.indexOf(e);n.splice(i,1)}function gf(t,e){if(t.length<=vr)return;const n=vr+e,i=t[n];if(i){const r=i[uu];null!==r&&r!==t&&xx(r,i),e>0&&(t[n-1][Oa]=i[Oa]);const s=Tl(t,vr+e);!function oM(t,e){wx(t,e),e[dr]=null,e[Ts]=null}(i[Wt],i);const o=s[Ur];null!==o&&o.detachView(s[Wt]),i[Dr]=null,i[Oa]=null,i[mn]&=-129}return i}function Eg(t,e){if(!(256&e[mn])){const n=e[Tn];n.destroyNode&&Yt(t,e,n,3,null,null),function lM(t){let e=t[Oh];if(!e)return Cy(t[Wt],t);for(;e;){let n=null;if(Qi(e))n=e[Oh];else{const i=e[vr];i&&(n=i)}if(!n){for(;e&&!e[Oa]&&e!==t;)Qi(e)&&Cy(e[Wt],e),e=e[Dr];null===e&&(e=t),Qi(e)&&Cy(e[Wt],e),n=e&&e[Oa]}e=n}}(e)}}function Cy(t,e){if(256&e[mn])return;const n=G(null);try{e[mn]&=-129,e[mn]|=256,e[yo]&&Ze(e[yo]),function hM(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof Kr)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];oa(4,a,l);try{l.call(a)}finally{oa(5,a,l)}}else{oa(4,r,s);try{s.call(r)}finally{oa(5,r,s)}}}}}(t,e),function dM(t,e){const n=t.cleanup,i=e[gd];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[gd]=null);const r=e[Nl];if(null!==r){e[Nl]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[Wt].type&&e[Tn].destroy();const i=e[uu];if(null!==i&&us(e[Dr])){i!==e[Dr]&&xx(i,e);const r=e[Ur];null!==r&&r.detachView(t)}!function iT(t){og.delete(t[Nh])}(e)}finally{G(n)}}function Ty(t,e,n){return function Ex(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[dr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===Da.None||s===Da.Emulated)return null}return Ks(i,n)}}(t,e.parent,n)}function Eu(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Ax(t,e,n){t.appendChild(e,n)}function Sx(t,e,n,i,r){null!==i?Eu(t,e,n,i,r):Ax(t,e,n)}function Ag(t,e){return t.parentNode(e)}function d(t,e,n){return y(t,e,n)}let K,y=function p(t,e,n){return 40&t.type?Ks(t,n):null};function Fe(t,e,n,i){const r=Ty(t,i,e),s=e[Tn],a=d(i.parent||e[Ts],i,e);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)Sx(s,r,n[l],a,!1);else Sx(s,r,n,a,!1);void 0!==K&&K(s,i,e,n,r)}function et(t,e){if(null!==e){const n=e.type;if(3&n)return Ks(e,t);if(4&n)return pt(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return et(t,i);{const r=t[e.index];return us(r)?pt(-1,r):Bi(r)}}if(32&n)return Ay(e,t)()||Bi(t[e.index]);{const i=ot(t,e);return null!==i?Array.isArray(i)?i[0]:et(bo(t[bi]),i):et(t,e.next)}}return null}function ot(t,e){return null!==e?t[bi][Ts].projection[e.projection]:null}function pt(t,e){const n=vr+t+1;if(n<e.length){const i=e[n],r=i[Wt].firstChild;if(null!==r)return et(i,r)}return e[Qa]}function Ut(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&Hs(Bi(a),i),n.flags|=2),32&~n.flags)if(8&l)Ut(t,e,n.child,i,r,s,!1),Md(e,t,r,a,s);else if(32&l){const c=Ay(n,i);let u;for(;u=c();)Md(e,t,r,u,s);Md(e,t,r,a,s)}else 16&l?Mn(t,e,i,n,r,s):Md(e,t,r,a,s);n=o?n.projectionNext:n.next}}function Yt(t,e,n,i,r,s){Ut(n,i,t.firstChild,e,r,s,!1)}function Mn(t,e,n,i,r,s){const o=n[bi],l=o[Ts].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Md(e,t,r,l[c],s);else{let c=l;const u=o[Dr];rg(i)&&(c.flags|=128),Ut(t,e,c,u,r,s,!0)}}function ci(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Mo(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&__(t,e,i),null!==r&&ci(t,e,r),null!==s&&function ni(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const hn={};function xn(t=1){Tr(ti(),Mt(),fs()+t,!1)}function Tr(t,e,n,i){if(!i)if(3&~e[mn]){const s=t.preOrderHooks;null!==s&&Xp(e,s,0,n)}else{const s=t.preOrderCheckHooks;null!==s&&$h(e,s,n)}rl(n)}function st(t,e=ai.Default){const n=Mt();return null===n?ct(t,e):fw(Ti(),n,fn(t),e)}function My(t,e,n,i,r,s){const o=G(null);try{let a=null;r&qt.SignalBased&&(a=e[i][$]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&qt.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),null!==t.setInput?t.setInput(e,a,s,n,i):qb(e,a,i,s)}finally{G(o)}}function Cx(t,e,n,i,r,s,o,a,l,c,u){const h=e.blueprint.slice();return h[dr]=r,h[mn]=204|i,(null!==c||t&&2048&t[mn])&&(h[mn]|=2048),Uh(h),h[Dr]=h[md]=t,h[zi]=n,h[Xs]=o||t&&t[Xs],h[Tn]=a||t&&t[Tn],h[Xr]=l||t&&t[Xr]||null,h[Ts]=s,h[Nh]=function ag(){return tT++}(),h[_o]=u,h[A_]=c,h[bi]=2==e.type?t[bi]:h,h}function Sg(t,e,n,i,r){let s=t.data[e];if(null===s)s=function gM(t,e,n,i,r){const s=N_(),o=fc(),l=t.data[e]=function HX(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return gu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(t,e,n,i,r),function PC(){return Nn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function Hh(){const t=Nn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return La(s,!0),s}function Iy(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function uB(t,e,n,i,r){const s=fs(),o=2&i;try{rl(-1),o&&e.length>kn&&Tr(t,e,kn,!1),oa(o?2:0,r),n(i,r)}finally{rl(s),oa(o?3:1,r)}}function mM(t,e,n){if(_d(e)){const i=G(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{G(i)}}}function _M(t,e,n){O_()&&(function XX(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;Go(n)&&function nK(t,e,n){const i=Ks(e,t),r=dB(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Tx(t,Cx(t,r,null,o,i,e,null,t[Xs].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Kh(n,e),Hs(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const l=t.data[a],c=vu(e,t,a,n);Hs(c,e),null!==o&&iK(0,a-r,c,l,0,o),er(l)&&(vo(n.index,e)[zi]=vu(e,t,a,n))}}(t,e,n,Ks(n,e)),!(64&~n.flags)&&mB(t,e,n))}function yM(t,e,n=Ks){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function dB(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vM(t,e,n,i,r,s,o,a,l,c,u){const h=kn+i,f=h+r,g=function FX(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:hn);return n}(h,f),m="function"==typeof c?c():c;return g[Wt]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}let hB=()=>null;function fB(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,l=qt.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==r){if(!r.hasOwnProperty(s))continue;c=r[s]}0===t?pB(i,n,c,a,l):pB(i,n,c,a)}return i}function pB(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],void 0!==r&&s.push(r)}function ha(t,e,n,i,r,s,o,a){const l=Ks(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(AM(t,n,u,i,r),Go(e)&&function WX(t,e){const n=vo(e,t);16&n[mn]||(n[mn]|=64)}(n,e.index)):3&e.type&&(i=function zX(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function bM(t,e,n,i){if(O_()){const r=null===i?null:{"":-1},s=function JX(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Il(e,o.selectors,!1))if(i||(i=[]),er(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),wM(t,e,a.length)}else i.unshift(o),wM(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&gB(t,e,n,o,r,a),r&&function ZX(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new St(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=ac(n.mergedAttrs,n.attrs)}function gB(t,e,n,i,r,s){for(let c=0;c<i.length;c++)ca(Kh(n,e),t,i[c].type);!function eK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Iy(t,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];n.mergedAttrs=ac(n.mergedAttrs,u.hostAttrs),tK(t,n,e,l,u),QX(l,u,r),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function GX(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],f=n?n.get(h):null,m=f?f.outputs:null;l=fB(0,h.inputs,u,l,f?f.inputs:null),c=fB(1,h.outputs,u,c,m);const v=null===l||null===o||hd(e)?null:rK(l,u,o);a.push(v)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,s)}function mB(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function iw(){return Nn.lFrame.currentDirectiveIndex}();try{rl(s);for(let a=i;a<r;a++){const l=t.data[a],c=e[a];zh(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&KX(l,c)}}finally{rl(-1),zh(o)}}function KX(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function wM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function QX(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;er(e)&&(n[""]=t)}}function tK(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=ho(r.type)),o=new Kr(s,er(r),st);t.blueprint[i]=o,n[i]=o,function qX(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function YX(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,Iy(t,n,r.hostVars,hn),r)}function yc(t,e,n,i,r,s){const o=Ks(t,e);!function xM(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?Sn(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[Tn],o,s,t.value,n,i,r)}function iK(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)My(i,n,o[a++],o[a++],o[a++],o[a++])}function rK(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function _B(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function yB(t,e){const n=t.contentQueries;if(null!==n){const i=G(null);try{for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const a=t.data[o];la(n[r]),a.contentQueries(2,e[o],o)}}}finally{G(i)}}}function Tx(t,e){return t[Oh]?t[E_][Oa]=e:t[Oh]=e,t[E_]=e,e}function EM(t,e,n){la(0);const i=G(null);try{e(t,n)}finally{G(i)}}function vB(t){return t[gd]||(t[gd]=[])}function bB(t){return t.cleanup||(t.cleanup=[])}function Mx(t,e){const n=t[Xr],i=n?n.get(Ao,null):null;i&&i.handleError(e)}function AM(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=n[s++];My(t.data[o],e[o],i,a,l,r)}}function sK(t,e){const n=vo(e,t),i=n[Wt];!function oK(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[dr];null!==r&&null===n[_o]&&(n[_o]=ay(r,n[Xr])),SM(i,n,n[zi])}function SM(t,e,n){k_(e);try{const i=t.viewQuery;null!==i&&EM(1,i,n);const r=t.template;null!==r&&uB(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ur]?.finishViewCreation(t),t.staticContentQueries&&yB(t,e),t.staticViewQueries&&EM(2,t.viewQuery,n);const s=t.components;null!==s&&function aK(t,e){for(let n=0;n<e.length;n++)sK(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[mn]&=-5,Wh()}}function Dy(t,e,n,i){const r=G(null);try{const s=e.tView,l=Cx(t,s,n,4096&t[mn]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[uu]=t[e.index];const u=t[Ur];return null!==u&&(l[Ur]=u.createEmbeddedView(s)),SM(s,l,n),l}finally{G(r)}}function Cg(t,e){return!e||null===e.firstChild||rg(t)}function Ry(t,e,n,i=!0){const r=e[Wt];if(function cM(t,e,n,i){const r=vr+i,s=n.length;i>0&&(n[r-1][Oa]=e),i<s-vr?(e[Oa]=n[r],Db(n,vr+i,e)):(n.push(e),e[Oa]=null),e[Dr]=n;const o=e[uu];null!==o&&n!==o&&function uM(t,e){const n=t[Sr];e[bi]!==e[Dr][Dr][bi]&&(t[mn]|=Fp.HasTransplantedViews),null===n?t[Sr]=[e]:n.push(e)}(o,e);const a=e[Ur];null!==a&&a.insertView(t),Vh(e),e[mn]|=128}(r,e,t,n),i){const o=pt(n,t),a=e[Tn],l=Ag(a,t[Qa]);null!==l&&function aM(t,e,n,i,r,s){i[dr]=r,i[Ts]=e,Yt(t,i,n,1,r,s)}(r,t[Ts],a,e,l,o)}const s=e[_o];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Oy(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];null!==s&&i.push(Bi(s)),us(s)&&EB(s,i);const o=n.type;if(8&o)Oy(t,e,n.child,i);else if(32&o){const a=Ay(n,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=ot(e,n);if(Array.isArray(a))i.push(...a);else{const l=bo(e[bi]);Oy(l[Wt],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function EB(t,e){for(let n=vr;n<t.length;n++){const i=t[n],r=i[Wt].firstChild;null!==r&&Oy(i[Wt],i,r,e)}t[Qa]!==t[dr]&&e.push(t[Qa])}let AB=[];const dK={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{pu(t.lView)},consumerOnSignalRead(){this.lView[yo]=this}},SB=100;function Ix(t,e=!0,n=0){const i=t[Xs],r=i.rendererFactory;r.begin?.();try{!function hK(t,e){TM(t,e);let n=0;for(;Gp(t);){if(n===SB)throw new St(103,!1);n++,TM(t,1)}}(t,n)}catch(o){throw e&&Mx(t,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function fK(t,e,n,i){const r=e[mn];if(!(256&~r))return;e[Xs].inlineEffectRunner?.flush(),k_(e);let o=null,a=null;(function pK(t){return 2!==t.type})(t)&&(a=function lK(t){return t[yo]??function cK(t){const e=AB.pop()??Object.create(dK);return e.lView=t,e}(t)}(e),o=xe(a));try{Uh(e),function Gh(t){return Nn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&uB(t,e,n,2,i);const l=!(3&~r);if(l){const h=t.preOrderCheckHooks;null!==h&&$h(e,h,null)}else{const h=t.preOrderHooks;null!==h&&Xp(e,h,0,null),Kp(e,0)}if(function gK(t){for(let e=rf(t);null!==e;e=Uw(e)){if(!(e[mn]&Fp.HasTransplantedViews))continue;const n=e[Sr];for(let i=0;i<n.length;i++){Qb(n[i])}}}(e),CB(e,0),null!==t.contentQueries&&yB(t,e),l){const h=t.contentCheckHooks;null!==h&&$h(e,h)}else{const h=t.contentHooks;null!==h&&Xp(e,h,1),Kp(e,1)}!function LX(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)rl(~r);else{const s=r,o=n[++i],a=n[++i];zp(o,s),a(2,e[s])}}}finally{rl(-1)}}(t,e);const c=t.components;null!==c&&MB(e,c,0);const u=t.viewQuery;if(null!==u&&EM(2,u,i),l){const h=t.viewCheckHooks;null!==h&&$h(e,h)}else{const h=t.viewHooks;null!==h&&Xp(e,h,2),Kp(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[dc]){for(const h of e[dc])h();e[dc]=null}e[mn]&=-73}catch(l){throw pu(e),l}finally{null!==a&&(Oe(a,o),function uK(t){t.lView[yo]!==t&&(t.lView=null,AB.push(t))}(a)),Wh()}}function CB(t,e){for(let n=rf(t);null!==n;n=Uw(n))for(let i=vr;i<n.length;i++)TB(n[i],e)}function mK(t,e,n){TB(vo(e,t),n)}function TB(t,e){el(t)&&TM(t,e)}function TM(t,e){const i=t[Wt],r=t[mn],s=t[yo];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!Ve(s)),s&&(s.dirty=!1),t[mn]&=-9217,o)fK(i,t,i.template,t[zi]);else if(8192&r){CB(t,1);const a=i.components;null!==a&&MB(t,a,1)}}function MB(t,e,n){for(let i=0;i<e.length;i++)mK(t,e[i],n)}function Ny(t){for(t[Xs].changeDetectionScheduler?.notify();t;){t[mn]|=64;const e=bo(t);if(Fh(t)&&!e)return t;t=e}return null}class Py{get rootNodes(){const e=this._lView,n=e[Wt];return Oy(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zi]}set context(e){this._lView[zi]=e}get destroyed(){return!(256&~this._lView[mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Dr];if(us(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(gf(e,i),Tl(n,i))}this._attachedToViewContainer=!1}Eg(this._lView[Wt],this._lView)}onDestroy(e){Pa(this._lView,e)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[mn]&=-129}reattach(){Vh(this._lView),this._lView[mn]|=128}detectChanges(){this._lView[mn]|=1024,Ix(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new St(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,wx(this._lView[Wt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new St(902,!1);this._appRef=e,Vh(this._lView)}}let dl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=vK}return t})();const _K=dl,yK=class extends _K{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=Dy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Py(r)}};function vK(){return Dx(Ti(),Mt())}function Dx(t,e){return 4&t.type?new yK(e,t,xd(t,e)):null}let PB=()=>null;function Tg(t,e){return PB(t,e)}class NM{}class GK{}class LB{}class WK{resolveComponentFactory(e){throw function zK(t){const e=Error(`No component factory found for ${ei(t)}.`);return e.ngComponent=t,e}(e)}}let Dd=(()=>{class t{static#e=this.NULL=new WK}return t})();class BB{}let Su=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function $K(){const t=Mt(),n=vo(Ti().index,t);return(Qi(n)?n:t)[Tn]}()}return t})(),qK=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>null})}return t})();const PM={},kB=new Set;function vc(t){kB.has(t)||(kB.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function jB(...t){}class yn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new St(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function YK(){const t="function"==typeof On.requestAnimationFrame;let e=On[t?"requestAnimationFrame":"setTimeout"],n=On[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function JK(t){const e=()=>{!function KK(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(On,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,FM(t),t.isCheckStableRunning=!0,LM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),FM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(function ZK(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(r,s,o,a);try{return UB(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),VB(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return UB(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),VB(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,FM(t),LM(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yn.isInAngularZone())throw new St(909,!1)}static assertNotInAngularZone(){if(yn.isInAngularZone())throw new St(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,XK,jB,jB);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const XK={};function LM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function FM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function UB(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function VB(t){t._nesting--,LM(t)}class HB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}let jy=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of n)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function Fx(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Es(r,a):2==s&&(i=Es(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}class YB extends Dd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=zn(e);return new Hy(n,this.ngModule)}}function XB(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];void 0!==i&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}class KB{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Ch(i);const r=this.injector.get(e,PM,i);return r!==PM||n===PM?r:this.parentInjector.get(e,n,i)}}class Hy extends LB{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=XB(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return XB(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Fb(t){return t.map(Mp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){const s=G(null);try{let o=(r=r||this.ngModule)instanceof Cs?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new KB(e,o):e,l=a.get(BB,null);if(null===l)throw new St(407,!1);const c=a.get(qK,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(jy,null),changeDetectionScheduler:a.get(NM,null)},g=l.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?function BX(t,e,n,i){const s=i.get(Kw,!1)||n===Da.ShadowDom,o=t.selectRootElement(e,s);return function kX(t){hB(t)}(o),o}(g,i,this.componentDef.encapsulation,a):Id(g,m,function rJ(t){const e=t.toLowerCase();return"svg"===e?Wn:"math"===e?"math":null}(m));let w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let P=null;null!==v&&(P=ay(v,a,!0));const V=vM(0,null,null,1,0,null,null,null,null,null,null),le=Cx(null,V,null,w,null,null,f,g,a,null,P);let re,Ie;k_(le);try{const Ne=this.componentDef;let it,ut=null;Ne.findHostDirectiveDefs?(it=[],ut=new Map,Ne.findHostDirectiveDefs(Ne,it,ut),it.push(Ne)):it=[Ne];const qe=function oJ(t,e){const n=t[Wt],i=kn;return t[i]=e,Sg(n,i,2,"#host",null)}(le,v),dt=function aJ(t,e,n,i,r,s,o){const a=r[Wt];!function lJ(t,e,n,i){for(const r of t)e.mergedAttrs=ac(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Fx(e,e.mergedAttrs,!0),null!==n&&Mo(i,n,e))}(i,t,e,o);let l=null;null!==e&&(l=ay(e,r[Xr]));const c=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const h=Cx(r,dB(n),null,u,r[t.index],t,s,c,null,null,l);return a.firstCreatePass&&wM(a,t,i.length-1),Tx(r,h),r[t.index]=h}(qe,v,Ne,it,le,f,g);Ie=hu(V,kn),v&&function uJ(t,e,n,i){if(i)__(t,n,["ng-version","17.3.2"]);else{const{attrs:r,classes:s}=function Ih(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!Ra(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&__(t,n,r),s&&s.length>0&&ci(t,n,s.join(" "))}}(g,Ne,v,i),void 0!==n&&function dJ(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(Ie,this.ngContentSelectors,n),re=function cJ(t,e,n,i,r,s){const o=Ti(),a=r[Wt],l=Ks(o,r);gB(a,r,o,n,null,i);for(let u=0;u<n.length;u++)Hs(vu(r,a,o.directiveStart+u,o),r);mB(a,r,o),l&&Hs(l,r);const c=vu(r,a,o.directiveStart+o.componentOffset,o);if(t[zi]=r[zi]=c,null!==s)for(const u of s)u(c,e);return mM(a,o,r),c}(dt,Ne,it,ut,le,[hJ]),SM(V,le,null)}finally{Wh()}return new sJ(this.componentType,re,xd(Ie,le),le,Ie)}finally{G(s)}}}class sJ extends GK{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Py(r,void 0,!1),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;AM(s[Wt],s,r,e,n),this.previousInputValues.set(e,n),Ny(vo(this._tNode.index,s))}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function hJ(){const t=Ti();Yp(Mt()[Wt],t)}let Io=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=fJ}return t})();function fJ(){return QB(Ti(),Mt())}const pJ=Io,JB=class extends pJ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return xd(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zh(this._hostTNode,this._hostLView);if(Zp(e)){const n=Yh(e,this._hostLView),i=qh(e);return new Jr(n[Wt].data[i+8],n)}return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=ZB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-vr}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Tg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Cg(this._hostTNode,o)),a}createComponent(e,n,i,r,s){const o=e&&!function Rh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const l=o?e:new Hy(zn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const v=(o?c:this.parentInjector).get(Cs,null);v&&(s=v)}const u=zn(l.componentType??{}),h=Tg(this._lContainer,u?.id??null),g=l.create(c,r,h?.firstChild??null,s);return this.insertImpl(g.hostView,a,Cg(this._hostTNode,h)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){const r=e._lView;if(function I_(t){return us(t[Dr])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=r[Dr],c=new JB(l,l[Ts],l[Dr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;return Ry(o,r,s,i),e.attachToViewContainerRef(),Db(UM(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=ZB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=gf(this._lContainer,n);i&&(Tl(UM(this._lContainer),n),Eg(i[Wt],i))}detach(e){const n=this._adjustIndex(e,-1),i=gf(this._lContainer,n);return i&&null!=Tl(UM(this._lContainer),n)?new Py(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function ZB(t){return t[8]}function UM(t){return t[8]||(t[8]=[])}function QB(t,e){let n;const i=e[t.index];return us(i)?n=i:(n=_B(i,e,null,t),e[t.index]=n,Tx(e,n)),ek(n,e,t,i),new JB(n,t,e)}let ek=function nk(t,e,n,i){if(t[Qa])return;let r;r=8&n.type?Bi(i):function gJ(t,e){const n=t[Tn],i=n.createComment(""),r=Ks(e,t);return Eu(n,Ag(n,r),i,function pM(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Qa]=r},VM=()=>!1;class HM{constructor(e){this.queryList=e,this.matches=null}clone(){return new HM(this.queryList)}setDirty(){this.queryList.setDirty()}}class GM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new GM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==YM(e,n).matches&&this.queries[n].setDirty()}}class ik{constructor(e,n,i=null){this.flags=n,this.read=i,this.predicate="string"==typeof e?function EJ(t){return t.split(",").map(e=>e.trim())}(e):e}}class zM{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new zM(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class WM{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new WM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,vJ(n,s)),this.matchTNodeWithReadOption(e,n,tg(n,e,s,!1,!1))}else i===dl?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,tg(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===fi||r===Io||r===dl&&4&n.type)this.addMatch(n.index,-2);else{const s=tg(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function vJ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function wJ(t,e,n,i){return-1===n?function bJ(t,e){return 11&t.type?xd(t,e):4&t.type?Dx(t,e):null}(e,t):-2===n?function xJ(t,e,n){return n===fi?xd(e,t):n===dl?Dx(e,t):n===Io?QB(e,t):void 0}(t,e,i):vu(t,t[Wt],n,e)}function rk(t,e,n,i){const r=e[Ur].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:wJ(e,s[c],o[l+1],n.metadata.read))}r.matches=a}return r.matches}function $M(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=rk(t,e,r,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=vr;h<u.length;h++){const f=u[h];f[uu]===f[Dr]&&$M(f[Wt],f,c,i)}if(null!==u[Sr]){const h=u[Sr];for(let f=0;f<h.length;f++){const g=h[f];$M(g[Wt],g,c,i)}}}}}return i}function sk(t,e,n){const i=new ef(!(4&~n));return function VX(t,e,n,i){const r=vB(e);r.push(n),t.firstCreatePass&&bB(t).push(i,r.length-1)}(t,e,i,i.destroy),(e[Ur]??=new GM).queries.push(new HM(i))-1}function lk(t,e,n){null===t.queries&&(t.queries=new zM),t.queries.track(new WM(e,n))}function YM(t,e){return t.queries.getByIndex(e)}function ck(t,e){const n=t[Wt],i=YM(n,e);return i.crossesNgTemplate?$M(n,t,e,[]):rk(n,t,i,e)}function Bx(t){return"function"==typeof t&&void 0!==t[$]}function pi(t){let e=function xk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(er(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new St(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=jx(t.inputs),o.inputTransforms=jx(t.inputTransforms),o.declaredInputs=jx(t.declaredInputs),o.outputs=jx(t.outputs);const a=r.hostBindings;a&&jJ(t,a);const l=r.viewQuery,c=r.contentQueries;if(l&&BJ(t,l),c&&kJ(t,c),LJ(t,r),Ma(t.outputs,r.outputs),er(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===pi&&(n=!1)}}e=Object.getPrototypeOf(e)}!function FJ(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ac(r.hostAttrs,n=ac(n,r.hostAttrs))}}(i)}function LJ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const i=e.inputs[n];if(void 0!==i&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function jx(t){return t===bt?{}:t===Ht?[]:t}function BJ(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function kJ(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function jJ(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function bc(t){const e=t.inputConfig,n={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}class _f{}class Ck{}class KM extends _f{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new YB(this);const r=function js(t,e){const n=t[Ab]||null;if(!n&&!0===e)throw new Error(`Type ${ei(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function $i(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=Cw(e,n,[{provide:_f,useValue:this},{provide:Dd,useValue:this.componentFactoryResolver},...i],ei(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class JM extends Ck{constructor(e){super(),this.moduleType=e}create(e){return new KM(this.moduleType,e,[])}}class Tk extends _f{constructor(e){super(),this.componentFactoryResolver=new YB(this),this.instance=null;const n=new Rl([...e.providers,{provide:_f,useValue:this},{provide:Dd,useValue:this.componentFactoryResolver}],e.parent||Re(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let Ig=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ji(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vx(t){return!!function QM(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function wc(t,e,n){return t[e]=n}function Zr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ii(t,e,n,i,r,s,o,a){const l=Mt(),c=ti(),u=t+kn,h=c.firstCreatePass?function ZJ(t,e,n,i,r,s,o,a,l){const c=e.consts,u=Sg(e,t,4,o||null,Na(c,a));bM(e,n,u,Na(c,l)),Yp(e,u);const h=u.tView=vM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,i,r,s,o):c.data[u];La(h,!1);const f=Mk(c,l,h,t);yd()&&Fe(c,l,f,h),Hs(f,l);const g=_B(f,l,f,h);return l[u]=g,Tx(l,g),function tk(t,e,n){return VM(t,e,n)}(g,h,l),Lh(h)&&_M(c,l,h),null!=o&&yM(l,h,a),Ii}let Mk=function Ik(t,e,n,i){return tr(!0),e[Tn].createComment("")};function Nr(t,e,n,i){const r=Mt();return Zr(r,Wo(),e)&&(ti(),yc(wi(),r,t,e,n,i)),Nr}function Bg(t,e,n,i){return Zr(t,Wo(),n)?e+Sn(n)+i:hn}function Yx(t,e){return t<<17|e<<2}function Pd(t){return t>>17&32767}function cI(t){return 2|t}function bf(t){return(131068&t)>>2}function uI(t,e){return-131069&t|e<<2}function dI(t){return 1|t}function a3(t,e,n,i){const r=t[n+1],s=null===e;let o=i?Pd(r):bf(r),a=!1;for(;0!==o&&(!1===a||s);){const c=t[o+1];BZ(t[o],e)&&(a=!0,t[o+1]=i?dI(c):cI(c)),o=i?Pd(c):bf(c)}a&&(t[n+1]=i?cI(r):dI(r))}function BZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ml(t,e)>=0}const Ds={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function l3(t){return t.substring(Ds.key,Ds.keyEnd)}function kZ(t){return t.substring(Ds.value,Ds.valueEnd)}function c3(t,e){const n=Ds.textEnd;return n===e?-1:(e=Ds.keyEnd=function VZ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ds.key=e,n),Wg(t,e,n))}function u3(t,e){const n=Ds.textEnd;let i=Ds.key=Wg(t,e,n);return n===i?-1:(i=Ds.keyEnd=function HZ(t,e,n){let i;for(;e<n&&(45===(i=t.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(t,i,n),i=h3(t,i,n),i=Ds.value=Wg(t,i,n),i=Ds.valueEnd=function GZ(t,e,n){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<n;){const l=t.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=f3(t,l,o,n):e===o-4&&85===s&&82===r&&76===i&&40===l?a=o=f3(t,41,o,n):l>32&&(a=o),s=r,r=i,i=-33&l}return a}(t,i,n),h3(t,i,n))}function d3(t){Ds.key=0,Ds.keyEnd=0,Ds.value=0,Ds.valueEnd=0,Ds.textEnd=t.length}function Wg(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function h3(t,e,n,i){return(e=Wg(t,e,n))<n&&e++,e}function f3(t,e,n,i){let r=-1,s=n;for(;s<i;){const o=t.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Di(t,e,n){const i=Mt();return Zr(i,Wo(),e)&&ha(ti(),wi(),i,t,e,i[Tn],n,!1),Di}function hI(t,e,n,i,r){const o=r?"class":"style";AM(t,n,e.inputs[o],o,i)}function Xy(t,e,n){return kl(t,e,n,!1),Xy}function br(t,e){return kl(t,e,null,!0),br}function zZ(t,e){for(let n=function UZ(t){return d3(t),u3(t,Wg(t,0,Ds.textEnd))}(e);n>=0;n=u3(e,n))m3(t,l3(e),kZ(e))}function wf(t){jl(KZ,xc,t,!0)}function xc(t,e){for(let n=function jZ(t){return d3(t),c3(t,Wg(t,0,Ds.textEnd))}(e);n>=0;n=c3(e,n))Ho(t,l3(e),!0)}function kl(t,e,n,i){const r=Mt(),s=ti(),o=aa(2);s.firstUpdatePass&&g3(s,t,o,i),e!==hn&&Zr(r,o,e)&&_3(s,s.data[fs()],r,r[Tn],t,r[o+1]=function ZZ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ei(To(t)))),t}(e,n),i,o)}function jl(t,e,n,i){const r=ti(),s=aa(2);r.firstUpdatePass&&g3(r,null,s,i);const o=Mt();if(n!==hn&&Zr(o,s,n)){const a=r.data[fs()];if(v3(a,i)&&!p3(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Es(l,n||"")),hI(r,a,o,n,i)}else!function JZ(t,e,n,i,r,s,o,a){r===hn&&(r=Ht);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let v,m=null;u===h?(l+=2,c+=2,f!==g&&(m=h,v=g)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,v=g),null!==m&&_3(t,e,n,i,m,v,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[Tn],o[s+1],o[s+1]=function XZ(t,e,n){if(null==n||""===n)return Ht;const i=[],r=To(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function p3(t,e){return e>=t.expandoStartIndex}function g3(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[fs()],o=p3(t,n);v3(s,i)&&null===e&&!o&&(e=!1),e=function WZ(t,e,n,i){const r=function F_(t){const e=Nn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Ky(n=fI(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=fI(r,t,e,n,i),null===s){let l=function $Z(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==bf(i))return t[Pd(i)]}(t,e,i);void 0!==l&&Array.isArray(l)&&(l=fI(null,t,e,l[1],i),l=Ky(l,e.attrs,i),function qZ(t,e,n,i){t[Pd(n?e.classBindings:e.styleBindings)]=i}(t,e,i,l))}else s=function YZ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Ky(i,t[s].hostAttrs,n);return Ky(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function LZ(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Pd(o),l=bf(o);t[i]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Ml(n,u)>0)&&(c=!0)):u=n,r)if(0!==l){const f=Pd(t[a+1]);t[i+1]=Yx(f,a),0!==f&&(t[f+1]=uI(t[f+1],i)),t[a+1]=function NZ(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=Yx(a,0),0!==a&&(t[a+1]=uI(t[a+1],i)),a=i;else t[i+1]=Yx(l,0),0===a?a=i:t[l+1]=uI(t[l+1],i),l=i;c&&(t[i+1]=cI(t[i+1])),a3(t,u,i,!0),a3(t,u,i,!1),function FZ(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Ml(s,e)>=0&&(n[i+1]=dI(n[i+1]))}(e,u,t,i,s),o=Yx(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function fI(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=Ky(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Ky(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ho(t,o,!!n||e[++s]))}return void 0===t?null:t}function m3(t,e,n){Ho(t,e,To(n))}function KZ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&Ho(t,i,n)}function _3(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function PZ(t){return!(1&~t)}(c)?y3(l,e,n,r,bf(c),o):void 0;Xx(u)||(Xx(s)||function OZ(t){return!(2&~t)}(c)&&(s=y3(l,null,n,r,a,o)),function Rn(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:_c.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=_c.Important),t.setStyle(n,i,r,s))}}(i,o,Us(fs(),n),r,s))}function y3(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let f=n[r+1];f===hn&&(f=h?Ht:void 0);let g=h?m_(f,i):u===i?f:void 0;if(c&&!Xx(g)&&(g=m_(l,i)),Xx(g)&&(a=g,o))return a;const m=t[r+1];r=o?Pd(m):bf(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=m_(l,i))}return a}function Xx(t){return void 0!==t}function v3(t,e){return!!(t.flags&(e?8:16))}function Rs(t,e,n){vc("NgControlFlow");const i=Mt(),r=Wo(),s=function mI(t,e){return t[e]}(i,kn+t);if(Zr(i,r,e)){const a=G(null);try{if(function CM(t,e){const n=gf(t,e);return void 0!==n&&Eg(n[Wt],n),n}(s,0),-1!==e){const l=function _I(t,e){return hu(t,e)}(i[Wt],kn+e),c=Tg(s,l.tView.ssrId);Ry(s,Dy(i,l,n,{dehydratedView:c}),0,Cg(l,c))}}finally{G(a)}}else{const a=function xB(t,e){const n=vr+e;if(n<t.length)return t[n]}(s,0);void 0!==a&&(a[zi]=n)}}function Pn(t,e,n,i){const r=Mt(),s=ti(),o=kn+t,a=r[Tn],l=s.firstCreatePass?function bQ(t,e,n,i,r,s){const o=e.consts,l=Sg(e,t,2,i,Na(o,r));return bM(e,n,l,Na(o,s)),null!==l.attrs&&Fx(l,l.attrs,!1),null!==l.mergedAttrs&&Fx(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,n,i):s.data[o],c=E3(s,r,l,a,e,t);r[o]=c;const u=Lh(l);return La(l,!0),Mo(a,c,l),!function Wy(t){return!(32&~t.flags)}(l)&&yd()&&Fe(s,r,c,l),0===function MC(){return Nn.lFrame.elementDepthCount}()&&Hs(c,r),function IC(){Nn.lFrame.elementDepthCount++}(),u&&(_M(s,r,l),mM(s,l,r)),null!==i&&yM(r,l),Pn}function Bn(){let t=Ti();fc()?mu():(t=t.parent,La(t,!1));const e=t;(function RC(t){return Nn.skipHydrationRootTNode===t})(e)&&function tl(){Nn.skipHydrationRootTNode=null}(),function DC(){Nn.lFrame.elementDepthCount--}();const n=ti();return n.firstCreatePass&&(Yp(n,t),_d(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function BC(t){return!!(8&t.flags)}(e)&&hI(n,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function kC(t){return!!(16&t.flags)}(e)&&hI(n,e,Mt(),e.stylesWithoutHost,!1),Bn}function ts(t,e,n,i){return Pn(t,e,n,i),Bn(),ts}let E3=(t,e,n,i,r,s)=>(tr(!0),Id(i,r,function aw(){return Nn.lFrame.currentNamespace}()));function Jy(t,e,n){const i=Mt(),r=ti(),s=t+kn,o=r.firstCreatePass?function EQ(t,e,n,i,r){const s=e.consts,o=Na(s,i),a=Sg(e,t,8,"ng-container",o);return null!==o&&Fx(a,o,!0),bM(e,n,a,Na(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];La(o,!0);const a=S3(r,i,o,t);return i[s]=a,yd()&&Fe(r,i,a,o),Hs(a,i),Lh(o)&&(_M(r,i,o),mM(r,o,i)),null!=n&&yM(i,o),Jy}function Zy(){let t=Ti();const e=ti();return fc()?mu():(t=t.parent,La(t,!1)),e.firstCreatePass&&(Yp(e,t),_d(t)&&e.queries.elementEnd(t)),Zy}let S3=(t,e,n,i)=>(tr(!0),pf(e[Tn],""));function Ld(){return Mt()}function xf(t,e,n){const i=Mt();return Zr(i,Wo(),e)&&ha(ti(),wi(),i,t,e,i[Tn],n,!0),xf}const qg="en-US";let I3=qg;function Vi(t,e,n,i){const r=Mt(),s=ti(),o=Ti();return function bI(t,e,n,i,r,s,o){const a=Lh(i),c=t.firstCreatePass&&bB(t),u=e[zi],h=vB(e);let f=!0;if(3&i.type||o){const v=Ks(i,e),w=o?o(v):v,P=h.length,V=o?re=>o(Bi(re[i.index])):i.index;let le=null;if(!o&&a&&(le=function Aee(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[gd],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==le)(le.__ngLastListenerFn__||le).__ngNextListenerFn__=s,le.__ngLastListenerFn__=s,f=!1;else{s=ij(i,e,u,s,!1);const re=n.listen(w,r,s);h.push(s,re),c&&c.push(r,V,P,P+1)}}else s=ij(i,e,u,s,!1);const g=i.outputs;let m;if(f&&null!==g&&(m=g[r])){const v=m.length;if(v)for(let w=0;w<v;w+=2){const Ie=e[m[w]][m[w+1]].subscribe(s),Ne=h.length;h.push(s,Ie),c&&c.push(r,i.index,Ne,-(Ne+1))}}}(s,r,r[Tn],o,t,e,i),Vi}function nj(t,e,n,i){const r=G(null);try{return oa(6,e,n),!1!==n(i)}catch(s){return Mx(t,s),!1}finally{oa(7,e,n),G(r)}}function ij(t,e,n,i,r){return function s(o){if(o===Function)return i;Ny(t.componentOffset>-1?vo(t.index,e):e);let l=nj(e,n,i,o),c=s.__ngNextListenerFn__;for(;c;)l=nj(e,n,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Vr(t=1){return function U_(t){return(Nn.lFrame.contextLView=function Hp(t,e){for(;t>0;)e=e[md],t--;return e}(t,Nn.lFrame.contextLView))[zi]}(t)}function See(t,e){let n=null;const i=function Cp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Il(t,s,!0):Lb(i,s))return r}else n=r}return n}function ka(t){const e=Mt()[bi][Ts];if(!e.projection){const i=e.projection=function po(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?See(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Pi(t,e=0,n){const i=Mt(),r=ti(),s=Sg(r,kn+t,16,null,n||null);null===s.projection&&(s.projection=e),mu(),(!i[_o]||gu())&&32&~s.flags&&function cn(t,e,n){Mn(e[Tn],0,e,n,Ty(t,n,e),d(n.parent||e[Ts],n,e))}(r,i,s)}function wI(t,e,n){return xI(t,"",e,"",n),wI}function xI(t,e,n,i,r){const s=Mt(),o=Bg(s,e,n,i);return o!==hn&&ha(ti(),wi(),s,t,o,s[Tn],r,!1),xI}function fl(t,e,n,i){!function ak(t,e,n,i){const r=ti();if(r.firstCreatePass){const s=Ti();lk(r,new ik(e,n,i),s.index),function AJ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),!(2&~n)&&(r.staticContentQueries=!0)}return sk(r,Mt(),n)}(t,e,n,i)}function Do(t,e,n){!function ok(t,e,n){const i=ti();return i.firstCreatePass&&(lk(i,new ik(t,e,n),-1),!(2&~e)&&(i.staticViewQueries=!0)),sk(i,Mt(),e)}(t,e,n)}function ir(t){const e=Mt(),n=ti(),i=Wp();la(i+1);const r=YM(n,i);if(t.dirty&&function zo(t){return!(4&~t[mn])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)t.reset([]);else{const s=ck(e,i);t.reset(s,Dw),t.notifyOnChanges()}return!0}return!1}function rr(){return function qM(t,e){return t[Ur].queries[e].queryList}(Mt(),Wp())}function eE(t){return fu(function OC(){return Nn.lFrame.contextLView}(),kn+t)}function Ul(t,e=""){const n=Mt(),i=ti(),r=t+kn,s=i.firstCreatePass?Sg(i,r,1,e,null):i.data[r],o=wj(i,n,s,e,t);n[r]=o,yd()&&Fe(i,n,o,s),La(s,!1)}let wj=(t,e,n,i,r)=>(tr(!0),function Sy(t,e){return t.createText(e)}(e[Tn],i));function Fd(t){return o0("",t,""),Fd}function o0(t,e,n){const i=Mt(),r=Bg(i,t,e,n);return r!==hn&&function Au(t,e,n){const i=Us(e,t);!function bx(t,e,n){t.setValue(e,n)}(t[Tn],i,n)}(i,fs(),r),o0}function EI(t,e,n,i,r){if(t=fn(t),Array.isArray(t))for(let s=0;s<t.length;s++)EI(t[s],e,n,i,r);else{const s=ti(),o=Mt(),a=Ti();let l=ou(t)?t:fn(t.provide);const c=Vb(t),u=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(ou(t)||!t.multi){const g=new Kr(c,r,st),m=SI(l,e,r?u:u+f,h);-1===m?(ca(Kh(a,o),s,l),AI(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[m]=g,o[m]=g)}else{const g=SI(l,e,u+f,h),m=SI(l,e,u,u+f),w=m>=0&&n[m];if(r&&!w||!r&&!(g>=0&&n[g])){ca(Kh(a,o),s,l);const P=function Wee(t,e,n,i,r){const s=new Kr(t,n,st);return s.multi=[],s.index=e,s.componentProviders=0,Oj(s,r,i&&!n),s}(r?zee:Gee,n.length,r,i,c);!r&&w&&(n[m].providerFactory=P),AI(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else AI(s,t,g>-1?g:m,Oj(n[r?m:g],c,!r&&i));!r&&i&&w&&n[m].componentProviders++}}}function AI(t,e,n,i){const r=ou(e),s=function sC(t){return!!t.useClass}(e);if(r||s){const l=(s?fn(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function Oj(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function SI(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Gee(t,e,n,i){return CI(this.multi,[])}function zee(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=vu(n,n[Wt],this.providerFactory.index,i);s=a.slice(0,o),CI(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],CI(r,s);return s}function CI(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ri(t,e=[]){return n=>{n.providersResolver=(i,r)=>function Hee(t,e,n){const i=ti();if(i.firstCreatePass){const r=er(t);EI(n,i.data,i.blueprint,r,!0),EI(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}let $ee=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const i=ru(0,n.type),r=i.length>0?function ZM(t,e,n=null){return new Tk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ot({token:t,providedIn:"environment",factory:()=>new t(ct(Cs))})}return t})();function Os(t){vc("NgStandalone"),t.getStandaloneInjector=e=>e.get($ee).getOrCreateStandaloneInjector(t)}function Lj(t,e,n,i,r,s){const o=e+n;return Zr(t,o,r)?wc(t,o+1,s?i.call(s,r):i(r)):function a0(t,e){const n=t[e];return n===hn?void 0:n}(t,o+1)}function Cu(t,e){const n=ti();let i;const r=t+kn;n.firstCreatePass?(i=function rte(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=ho(i.type)),a=Ys(st);try{const l=Xh(!1),c=s();return Xh(l),function Iee(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Mt(),r,c),c}finally{Ys(a)}}function Tu(t,e,n){const i=t+kn,r=Mt(),s=fu(r,i);return function l0(t,e){return t[Wt].data[e].pure}(r,i)?Lj(r,hs(),e,s.transform,n,s):s.transform(n)}function Uj(t,e){return Dx(t,e)}const aU=new Et(""),rE=new Et("");let PI,OI=(()=>{class t{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,PI||(function tne(t){PI=t}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n()},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(ct(yn),ct(NI),ct(rE))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),NI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return PI?.findTestabilityInTree(this,n,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Kg(t){return!!t&&"function"==typeof t.then}function lU(t){return!!t&&"function"==typeof t.subscribe}const cU=new Et("");let LI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=jt(cU,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const r of this.appInits){const s=r();if(Kg(s))n.push(s);else if(lU(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const sE=new Et("");function hU(t,e){return Array.isArray(e)?e.reduce(hU,t):{...t,...e}}let Mu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=jt(Mw),this.afterRenderEffectManager=jt(jy),this.externalTestViews=new Set,this.beforeRender=new Jt,this.afterTick=new Jt,this.componentTypes=[],this.components=[],this.isStable=jt(Ig).hasPendingTasks.pipe(Xt(n=>!n)),this._injector=jt(Cs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof LB;if(!this._injector.get(LI).done)throw!r&&function lc(t){const e=zn(t)||qr(t)||cs(t);return null!==e&&e.standalone}(n),new St(405,!1);let o;o=r?n:this._injector.get(Dd).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function nne(t){return t.isBoundToModule}(o)?void 0:this._injector.get(_f),c=o.create(Ui.NULL,[],i||o.selector,a),u=c.location.nativeElement,h=c.injector.get(aU,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),oE(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new St(101,!1);const i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(n){let i=0;const r=this.afterRenderEffectManager;for(;;){if(i===SB)throw new St(103,!1);if(n){const s=0===i;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)rne(o,s,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>FI(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>FI(s))))break}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;oE(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(sE,[]);[...this._bootstrapListeners,...i].forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>oE(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new St(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function rne(t,e,n){!e&&!FI(t)||function sne(t,e,n){let i;n?(i=0,t[mn]|=1024):i=64&t[mn]?0:1,Ix(t,e,i)}(t,n,e)}function FI(t){return Gp(t)}let une=(()=>{class t{constructor(){this.zone=jt(yn),this.applicationRef=jt(Mu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dne(){const t=jt(yn),e=jt(Ao);return n=>t.runOutsideAngular(()=>e.handleError(n))}let fne=(()=>{class t{constructor(){this.subscription=new Lt,this.initialized=!1,this.zone=jt(yn),this.pendingTasks=jt(Ig)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yn.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yn.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Ec=new Et("",{providedIn:"root",factory:()=>jt(Ec,ai.Optional|ai.SkipSelf)||function pne(){return typeof $localize<"u"&&$localize.locale||qg}()}),BI=new Et("");let mU=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function QK(t="zone.js",e){return"noop"===t?new HB:"zone.js"===t?new yn(e):t}(i?.ngZone,function gU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function $J(t,e,n){return new KM(t,e,n)}(n.moduleType,this.injector,function pU(t){return[{provide:yn,useFactory:t},{provide:Dn,multi:!0,useFactory:()=>{const e=jt(une,{optional:!0});return()=>e.initialize()}},{provide:Dn,multi:!0,useFactory:()=>{const e=jt(fne);return()=>{e.initialize()}}},{provide:Mw,useFactory:dne}]}(()=>r)),o=s.injector.get(Ao,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{oE(this._modules,s),a.unsubscribe()})}),function dU(t,e,n){try{const i=n();return Kg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(LI);return a.runInitializers(),a.donePromise.then(()=>(function D3(t){"string"==typeof t&&(I3=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ec,qg)||qg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,i=[]){const r=hU({},i);return function cne(t,e,n){const i=new JM(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Mu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new St(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new St(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(BI,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Ui))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Bd=null;const _U=new Et("");function yU(t,e,n=[]){const i=`Platform: ${e}`,r=new Et(i);return(s=[])=>{let o=kI();if(!o||o.injector.get(_U,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function _ne(t){if(Bd&&!Bd.get(_U,!1))throw new St(400,!1);(function uU(){!function ie(t){R=t}(()=>{throw new St(600,!1)})})(),Bd=t;const e=t.get(mU);(function bU(t){t.get(af,null)?.forEach(n=>n())})(t)}(function vU(t=[],e){return Ui.create({name:e,providers:[{provide:b_,useValue:"platform"},{provide:BI,useValue:new Set([()=>Bd=null])},...t]})}(a,i))}return function yne(t){const e=kI();if(!e)throw new St(401,!1);return e}()}}function kI(){return Bd?.get(mU)??null}let Zs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=bne}return t})();function bne(t){return function wne(t,e,n){if(Go(t)&&!n){const i=vo(t.index,e);return new Py(i,i)}return 47&t.type?new Py(e[bi],e):null}(Ti(),Mt(),!(16&~t))}class SU{constructor(){}supports(e){return Vx(e)}create(e){return new Cne(e)}}const Sne=(t,e)=>e;class Cne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Sne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<TU(i,r,s)?n:i,a=TU(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<c&&(s[f]=g+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Vx(e))throw new St(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function KJ(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new Tne(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new CU),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Tne{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class CU{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new Mne,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TU(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function IU(){return new GI([new SU])}let GI=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:IU});constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||IU()),deps:[[t,new cd,new ld]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new St(901,!1)}}return t})();const Nne=yU(null,"core",[]);let Pne=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Mu))};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({})}return t})();function ns(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function mE(t,e=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function ZU(t){const e=G(null);try{return t()}finally{G(e)}}const uie=new Et("",{providedIn:"root",factory:()=>jt(die)});let die=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new hie})}return t})();class hie{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=jt(Ig),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){const n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);const i=this.queues.get(n);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,n]of this.queues)null===e?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(const n of e)e.delete(n),this.queuedEffectCount--,n.run()}}class fie{constructor(e,n,i,r,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=i,this.injector=s,this.watcher=function he(t,e,n){const i=Object.create(Ee);n&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;const r=l=>{i.cleanupFn=l};return i.ref={notify:()=>ae(i),run:()=>{if(null===i.fn)return;if(function q(){return B}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!Ve(i))return;i.hasRun=!0;const l=xe(i);try{i.cleanupFn(),i.cleanupFn=We,i.fn(r)}finally{Oe(i,l)}},cleanup:()=>i.cleanupFn(),destroy:()=>function o(l){(function s(l){return null===l.fn&&null===l.schedule})(l)||(Ze(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=We)}(i),[$]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Ao,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function QU(t,e){vc("NgSignals"),!e?.injector&&function ra(t){if(!Hb())throw new St(-203,!1)}();const n=e?.injector??jt(Ui),i=!0!==e?.manualCleanup?n.get(wd):null,r=new fie(n.get(uie),t,typeof Zone>"u"?null:Zone.current,i,n,e?.allowSignalWrites??!1),s=n.get(Zs,null,{optional:!0});return s&&8&s._lView[mn]?(s._lView[dc]??=[]).push(r.watcher.notify):r.watcher.notify(),r}let eV=null;function kd(){return eV}class gie{}const gi=new Et("");let tV=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:()=>jt(mie),providedIn:"platform"})}return t})(),mie=(()=>{class t extends tV{constructor(){super(),this._doc=jt(gi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kd().getBaseHref(this._doc)}onPopState(n){const i=kd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=kd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function nV(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function iV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Tf(t){return t&&"?"!==t[0]?"?"+t:t}let _E=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:()=>jt(yie),providedIn:"root"})}return t})();const _ie=new Et("");let yie=(()=>{class t extends _E{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??jt(gi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return nV(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Tf(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+Tf(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+Tf(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(tV),ct(_ie,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mf=(()=>{class t{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function wie(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(iV(rV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Tf(i))}normalize(n){return t.stripTrailingSlash(function bie(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,rV(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Tf(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Tf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}static#e=this.normalizeQueryParams=Tf;static#t=this.joinWithSlash=nV;static#n=this.stripTrailingSlash=iV;static#i=this.\u0275fac=function(i){return new(i||t)(ct(_E))};static#r=this.\u0275prov=Ot({token:t,factory:()=>function vie(){return new Mf(ct(_E))}(),providedIn:"root"})}return t})();function rV(t){return t.replace(/\/index.html$/,"")}const tD=/\s+/,fV=[];let pV=(()=>{class t{constructor(n,i){this._ngEl=n,this._renderer=i,this.initialClasses=fV,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(tD):fV}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(tD):n}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const i of n)this._updateState(i,!0);else if(null!=n)for(const i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){const r=this.stateMap.get(n);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){(n=n.trim()).length>0&&n.split(tD).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(Su))};static#t=this.\u0275dir=$t({type:t,selectors:[["","ngClass",""]],inputs:{klass:[qt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class are{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let IE=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new are(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),mV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{mV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io),st(dl),st(GI))};static#t=this.\u0275dir=$t({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function mV(t,e){t.context.$implicit=e.item}let nD=(()=>{class t{constructor(n,i){this._viewContainer=n,this._context=new lre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){_V("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){_V("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io),st(dl))};static#t=this.\u0275dir=$t({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class lre{constructor(){this.$implicit=null,this.ngIf=null}}function _V(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ei(e)}'.`)}let vV=(()=>{class t{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,r),get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io))};static#t=this.\u0275dir=$t({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Rr]})}return t})();class pre{createSubscription(e,n){return ZU(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){ZU(()=>e.unsubscribe())}}class gre{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const mre=new gre,_re=new pre;let p0=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(Kg(n))return mre;if(lU(n))return _re;throw function Hl(t,e){return new St(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(st(Zs,16))};static#t=this.\u0275pipe=$r({name:"async",type:t,pure:!1,standalone:!0})}return t})(),wV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({})}return t})();const xV="browser";function jd(t){return t===xV}function aD(t){return"server"===t}class fse extends gie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cD extends fse{static makeCurrent(){!function pie(t){eV??=t}(new cD)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function pse(){return _0=_0||document.querySelector("base"),_0?_0.getAttribute("href"):null}();return null==n?null:function gse(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){_0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sre(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let _0=null,_se=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const uD=new Et("");let RV=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(s=>s.supports(n)),!i)throw new St(5101,!1);return this._eventNameToPlugin.set(n,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(ct(uD),ct(yn))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class OV{constructor(e){this._doc=e}}const dD="ng-app-id";let NV=(()=>{class t{constructor(n,i,r,s={}){this.doc=n,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=aD(s),this.resetHostNodes()}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.elements?.forEach(r=>r.remove()),i.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${dD}="${this.appId}"]`);if(n?.length){const i=new Map;return n.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(n,i){const r=this.styleRef;if(r.has(n)){const s=r.get(n);return s.usage+=i,s.usage}return r.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===n)return r.delete(i),s.removeAttribute(dD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(dD,this.appId),n.appendChild(o),o}}addStyleToHost(n,i){const r=this.getStyleElement(n,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi),ct(ug),ct(hg,8),ct(sl))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const hD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fD=/%COMP%/g,wse=new Et("",{providedIn:"root",factory:()=>!0});function LV(t,e){return e.map(n=>n.replace(fD,t))}let FV=(()=>{class t{constructor(n,i,r,s,o,a,l,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=aD(a),this.defaultRenderer=new pD(n,o,l,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Da.ShadowDom&&(i={...i,encapsulation:Da.Emulated});const r=this.getOrCreateRenderer(n,i);return r instanceof kV?r.applyToHost(n):r instanceof gD&&r.applyStyles(),r}getOrCreateRenderer(n,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Da.Emulated:s=new kV(l,c,i,this.appId,u,o,a,h);break;case Da.ShadowDom:return new Sse(l,c,n,i,o,a,this.nonce,h);default:s=new gD(l,c,i,u,o,a,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(ct(RV),ct(NV),ct(ug),ct(wse),ct(gi),ct(sl),ct(yn),ct(hg))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class pD{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(hD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(BV(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(BV(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new St(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=hD[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=hD[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(_c.DashCase|_c.Important)?e.style.setProperty(n,i,r&_c.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&_c.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){null!=e&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=kd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function BV(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Sse extends pD{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=LV(r.id,r.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gD extends pD{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?LV(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class kV extends gD{constructor(e,n,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=function xse(t){return"_ngcontent-%COMP%".replace(fD,t)}(c),this.hostAttr=function Ese(t){return"_nghost-%COMP%".replace(fD,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Cse=(()=>{class t extends OV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const jV=["alt","control","meta","shift"],Tse={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mse={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ise=(()=>{class t extends OV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),o=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kd().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),jV.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(n,i){let r=Tse[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),jV.forEach(o=>{o!==r&&(0,Mse[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const VV=[{provide:sl,useValue:xV},{provide:af,useValue:function Dse(){cD.makeCurrent()},multi:!0},{provide:gi,useFactory:function Ose(){return function mT(t){cg=t}(document),document},deps:[]}],Nse=yU(Nne,"browser",VV),Pse=new Et(""),HV=[{provide:rE,useClass:class mse{addToWindow(e){On.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new St(5103,!1);return s},On.getAllAngularTestabilities=()=>e.getAllTestabilities(),On.getAllAngularRootElements=()=>e.getAllRootElements(),On.frameworkStabilizers||(On.frameworkStabilizers=[]),On.frameworkStabilizers.push(i=>{const r=On.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&i()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?kd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:aU,useClass:OI,deps:[yn,NI,rE]},{provide:OI,useClass:OI,deps:[yn,NI,rE]}],GV=[{provide:b_,useValue:"root"},{provide:Ao,useFactory:function Rse(){return new Ao},deps:[]},{provide:uD,useClass:Cse,multi:!0,deps:[gi,yn,sl]},{provide:uD,useClass:Ise,multi:!0,deps:[gi]},FV,NV,RV,{provide:BB,useExisting:FV},{provide:class jre{},useClass:_se,deps:[]},[]];let Lse=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:ug,useValue:n.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Pse,12))};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({providers:[...GV,...HV],imports:[wV,Pne]})}return t})(),y0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(i){let r=null;return r=i?new(i||t):ct(Use),r},providedIn:"root"})}return t})(),Use=(()=>{class t extends y0{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case Is.NONE:return i;case Is.HTML:return $o(i,"HTML")?To(i):ax(this._doc,String(i)).toString();case Is.STYLE:return $o(i,"Style")?To(i):i;case Is.SCRIPT:if($o(i,"Script"))return To(i);throw new St(5200,!1);case Is.URL:return $o(i,"URL")?To(i):vg(String(i));case Is.RESOURCE_URL:if($o(i,"ResourceURL"))return To(i);throw new St(5201,!1);default:throw new St(5202,!1)}}bypassSecurityTrustHtml(n){return function RT(t){return new da(t)}(n)}bypassSecurityTrustStyle(n){return function OT(t){return new Jw(t)}(n)}bypassSecurityTrustScript(n){return function NT(t){return new MT(t)}(n)}bypassSecurityTrustUrl(n){return function PT(t){return new Mi(t)}(n)}bypassSecurityTrustResourceUrl(n){return function LT(t){return new IT(t)}(n)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const mD={now:()=>(mD.delegate||Date).now(),delegate:void 0};class If extends Jt{constructor(e=1/0,n=1/0,i=mD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function Vn(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function vD(t,e){return function(n,i){e(n,i,t)}}function kt(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Ud(t){return this instanceof Ud?(this.v=t,this):new Ud(t)}function KV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function wD(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const xD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function JV(t){return Qe(t?.then)}function ZV(t){return Qe(t[Ja])}function QV(t){return Symbol.asyncIterator&&Qe(t?.[Symbol.asyncIterator])}function eH(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const tH=function soe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function nH(t){return Qe(t?.[tH])}function iH(t){return function XV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(g){return new Promise(function(m,v){s.push([f,g,m,v])>1||a(f,g)})})}function a(f,g){try{!function l(f){f.value instanceof Ud?Promise.resolve(f.value.v).then(c,u):h(s[0][2],f)}(i[f](g))}catch(m){h(s[0][3],m)}}function c(f){a("next",f)}function u(f){a("throw",f)}function h(f,g){f(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Ud(n.read());if(r)return yield Ud(void 0);yield yield Ud(i)}}finally{n.releaseLock()}})}function rH(t){return Qe(t?.getReader)}function ms(t){if(t instanceof At)return t;if(null!=t){if(ZV(t))return function ooe(t){return new At(e=>{const n=t[Ja]();if(Qe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(xD(t))return function aoe(t){return new At(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(JV(t))return function loe(t){return new At(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lt)})}(t);if(QV(t))return sH(t);if(nH(t))return function coe(t){return new At(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(rH(t))return function uoe(t){return sH(iH(t))}(t)}throw eH(t)}function sH(t){return new At(e=>{(function doe(t,e){var n,i,r,s;return function qV(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=KV(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ru(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function _s(t,e,n=1/0){return Qe(e)?_s((i,r)=>Xt((s,o)=>e(i,s,r,o))(ms(t(i,r))),n):("number"==typeof e&&(n=e),dn((i,r)=>function hoe(t,e,n,i,r,s,o,a){const l=[];let c=0,u=0,h=!1;const f=()=>{h&&!l.length&&!c&&e.complete()},g=v=>c<i?m(v):l.push(v),m=v=>{s&&e.next(v),c++;let w=!1;ms(n(v,u++)).subscribe(Zn(e,P=>{r?.(P),s?g(P):e.next(P)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<i;){const P=l.shift();o?Ru(e,o,()=>m(P)):m(P)}f()}catch(P){e.error(P)}}))};return t.subscribe(Zn(e,g,()=>{h=!0,f()})),()=>{a?.()}}(i,r,t,n)))}function NE(t=1/0){return _s(ze,t)}const Ro=new At(t=>t.complete());function oH(t){return t&&Qe(t.schedule)}function ED(t){return t[t.length-1]}function aH(t){return Qe(ED(t))?t.pop():void 0}function b0(t){return oH(ED(t))?t.pop():void 0}function lH(t,e=0){return dn((n,i)=>{n.subscribe(Zn(i,r=>Ru(i,t,()=>i.next(r),e),()=>Ru(i,t,()=>i.complete(),e),r=>Ru(i,t,()=>i.error(r),e)))})}function cH(t,e=0){return dn((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function uH(t,e){if(!t)throw new Error("Iterable cannot be null");return new At(n=>{Ru(n,e,()=>{const i=t[Symbol.asyncIterator]();Ru(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ys(t,e){return e?function woe(t,e){if(null!=t){if(ZV(t))return function moe(t,e){return ms(t).pipe(cH(e),lH(e))}(t,e);if(xD(t))return function yoe(t,e){return new At(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(JV(t))return function _oe(t,e){return ms(t).pipe(cH(e),lH(e))}(t,e);if(QV(t))return uH(t,e);if(nH(t))return function voe(t,e){return new At(n=>{let i;return Ru(n,e,()=>{i=t[tH](),Ru(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>Qe(i?.return)&&i.return()})}(t,e);if(rH(t))return function boe(t,e){return uH(iH(t),e)}(t,e)}throw eH(t)}(t,e):ms(t)}function Gl(...t){const e=b0(t),n=function goe(t,e){return"number"==typeof ED(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?ms(i[0]):NE(n)(ys(i,e)):Ro}function qi(t,e){return dn((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(Zn(i,l=>{r?.unsubscribe();let c=0;const u=s++;ms(t(l,u)).subscribe(r=Zn(i,h=>i.next(e?e(l,h,u,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const PE={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return PE.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return PE.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let AD;function Doe(t,e,n){let i=n;return function Eoe(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function Soe(t,e){if(!AD){const n=Element.prototype;AD=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&AD.call(t,e)}(t,r)||(i=s,0))),i}class Ooe{constructor(e,n){this.componentFactory=n.get(Dd).resolveComponentFactory(e)}create(e){return new Noe(this.componentFactory,e)}}class Noe{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new If(1),this.events=this.eventEmitters.pipe(qi(i=>Gl(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(yn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=PE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function Coe(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=Ui.create({providers:[],parent:this.injector}),i=function Ioe(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Doe(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Zs),this.implementsOnChanges=function Aoe(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Mu).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Xt(o=>({name:r,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=PE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Bh(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Poe extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let Foe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({imports:[wV]})}return t})();function w0(t){return(w0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function be(t,e,n){return(e=function koe(t){var e=function Boe(t,e){if("object"!=w0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=w0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w0(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dH(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Ac(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||dH()}const hH=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ac();class Uoe{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";be(this,"storage",void 0),be(this,"id",void 0),be(this,"config",void 0),this.storage=function joe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function SD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let LE;var t;function fH(t){return"string"==typeof t?LE[t.toUpperCase()]||LE.WHITE:t}function FE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=LE||(LE={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Vd={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},BE=Vd.window||Vd.self||Vd.global,x0=Vd.process||{};function Qg(){let t;var e,n;if(Ac&&"performance"in BE)t=null==BE||null===(e=BE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in x0){var i;const r=null==x0||null===(i=x0.hrtime)||void 0===i?void 0:i.call(x0);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const em={debug:Ac&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},qoe={enabled:!0,level:0};function ml(){}const pH={},gH={once:!0};class E0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};be(this,"id",void 0),be(this,"VERSION",hH),be(this,"_startTs",Qg()),be(this,"_deltaTs",Qg()),be(this,"_storage",void 0),be(this,"userData",{}),be(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Uoe("__probe-".concat(this.id,"__"),qoe),this.timeStamp("".concat(this.id," started")),function $oe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(s=>r===s)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Qg()-this._startTs).toPrecision(10))}getDelta(){return Number((Qg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){FE(e,n)}warn(e){return this._getLogFunction(0,e,em.warn,arguments,gH)}error(e){return this._getLogFunction(0,e,em.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,em.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,em.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,n,em.debug||em.info,arguments,gH)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||ml,i&&[i],{tag:Joe(n)}):ml}image(e){let{logLevel:n,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(n||i)?Ac?function Koe(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=SD(s,n,i);console.log(...o)},s.src=e,ml}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...SD(e,n,i)),ml;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...SD(s,n,i)),s.src=e.toDataURL(),ml}return ml}({image:r,message:s,scale:o}):function Xoe(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),ml}({image:r,message:s,scale:o}):ml}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ml)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=_H({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ml)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=mH(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=_H({logLevel:e,message:n,args:r,opts:s}),FE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Qg();const o=s.tag||s.message;if(s.once){if(pH[o])return ml;pH[o]=Qg()}return n=function Yoe(t,e,n){if("string"==typeof e){const i=n.time?function Hoe(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Voe(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Woe(t,e,n){return!Ac&&"string"==typeof t&&(e&&(e=fH(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=fH(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),i.bind(console,n,...s.args)}return ml}}function mH(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return FE(Number.isFinite(e)&&e>=0),e}function _H(t){const{logLevel:e,message:n}=t;t.logLevel=mH(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return FE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Joe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}be(E0,"VERSION",hH);const ui=new E0({id:"deck"}),A0=new class Zoe{constructor(e={}){be(this,"_pool",[]),be(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,u=n*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h=1/0;l&&(h=l*i+s);const f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(o=>o.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}},Qoe=1/Math.PI*180,eae=1/180*Math.PI,is={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function tae(t,{precision:e=is.precision}={}){return t=function oae(t){return Math.round(t/is.EPSILON)*is.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Ou(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function yH(t){return function iae(t,e){return Nu(t,n=>n*eae,e)}(t)}function nae(t){return function rae(t,e){return Nu(t,n=>n*Qoe,e)}(t)}function Pr(t,e,n){return Nu(t,i=>Math.max(e,Math.min(n,i)))}function kE(t,e,n){return Ou(t)?t.map((i,r)=>kE(i,e[r],n)):n*e+(1-n)*t}function tm(t,e,n){const i=is.EPSILON;n&&(is.EPSILON=n);try{if(t===e)return!0;if(Ou(t)&&Ou(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!tm(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=is.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{is.EPSILON=i}}function Nu(t,e,n){if(Ou(t)){const i=t;n=n||function aae(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class jE extends(function lae(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Ou(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(is)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+tae(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!tm(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(is.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function ii(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function UE(t,e,n=""){if(is.debug&&!function cae(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function bH(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class wH extends jE{get x(){return this[0]}set x(e){this[0]=ii(e)}get y(){return this[1]}set y(e){this[1]=ii(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return ii(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return ii(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return bH(e>=0&&e<this.ELEMENTS,"index is out of range"),ii(this[e])}setComponent(e,n){return bH(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Sc=1e-6,pa=typeof Float32Array<"u"?Float32Array:Array;function xH(){var t=new pa(3);return pa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function EH(t,e,n){var i=new pa(3);return i[0]=t,i[1]=e,i[2]=n,i}function AH(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function VE(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function CD(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function SH(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],l=e[1],c=e[2],u=r*c-s*l,h=s*a-i*c,f=i*l-r*a,g=r*f-s*h,m=s*u-i*f,v=i*h-r*u,w=2*n[3];return h*=w,f*=w,m*=2,v*=2,t[0]=a+(u*=w)+(g*=2),t[1]=l+h+m,t[2]=c+f+v,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function CH(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}xH();const TD=[0,0,0];let HE;class Oo extends wH{static get ZERO(){return HE||(HE=new Oo(0,0,0),Object.freeze(HE)),HE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&Ou(e)?this.copy(e):(is.debug&&(ii(e),ii(n),ii(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return is.debug&&(ii(e.x),ii(e.y),ii(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ii(e)}angle(e){return function vae(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&AH(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return VE(this,this,e),this.check()}rotateX({radians:e,origin:n=TD}){return function mae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=TD}){return function _ae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=TD}){return function yae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return CD(this,this,e),this.check()}transformAsVector(e){return CH(this,this,e),this.check()}transformByMatrix3(e){return function gae(t,e,n){var i=e[0],r=e[1],s=e[2];t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Eae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return SH(this,this,e),this.check()}}const TH=new Oo;function nm(t,e,n,i){TH.set(t,e,n);const r=TH.len();return{distance:i/r,normal:new Oo(-t/r,-e/r,-n/r)}}function Iae(t){return t-Math.fround(t)}let C0;function MD(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-i)/n;C0=A0.allocate(C0,s,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<r;){for(let l=0;l<n;l++){const c=t[o++];C0[a+l]=c,C0[a+l+n]=Iae(c)}a+=2*n}return C0.subarray(0,s*n*2)}class Dae extends jE{toString(){let e="[";if(is.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=ii(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function ID(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],v=e[13],w=e[14],P=e[15],V=n*a-i*o,le=n*l-r*o,re=n*c-s*o,Ie=i*l-r*a,Ne=i*c-s*a,it=r*c-s*l,ut=u*v-h*m,qe=u*w-f*m,dt=u*P-g*m,yt=h*w-f*v,Ct=h*P-g*v,ft=f*P-g*w,gt=V*ft-le*Ct+re*yt+Ie*dt-Ne*qe+it*ut;return gt?(t[0]=(a*ft-l*Ct+c*yt)*(gt=1/gt),t[1]=(r*Ct-i*ft-s*yt)*gt,t[2]=(v*it-w*Ne+P*Ie)*gt,t[3]=(f*Ne-h*it-g*Ie)*gt,t[4]=(l*dt-o*ft-c*qe)*gt,t[5]=(n*ft-r*dt+s*qe)*gt,t[6]=(w*re-m*it-P*le)*gt,t[7]=(u*it-f*re+g*le)*gt,t[8]=(o*Ct-a*dt+c*ut)*gt,t[9]=(i*dt-n*Ct-s*ut)*gt,t[10]=(m*Ne-v*re+P*V)*gt,t[11]=(h*re-u*Ne-g*V)*gt,t[12]=(a*qe-o*yt-l*ut)*gt,t[13]=(n*yt-i*qe+r*ut)*gt,t[14]=(v*le-m*Ie-w*V)*gt,t[15]=(u*Ie-h*le+f*V)*gt,t):null}function Df(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],v=e[12],w=e[13],P=e[14],V=e[15],le=n[0],re=n[1],Ie=n[2],Ne=n[3];return t[0]=le*i+re*a+Ie*h+Ne*v,t[1]=le*r+re*l+Ie*f+Ne*w,t[2]=le*s+re*c+Ie*g+Ne*P,t[3]=le*o+re*u+Ie*m+Ne*V,t[4]=(le=n[4])*i+(re=n[5])*a+(Ie=n[6])*h+(Ne=n[7])*v,t[5]=le*r+re*l+Ie*f+Ne*w,t[6]=le*s+re*c+Ie*g+Ne*P,t[7]=le*o+re*u+Ie*m+Ne*V,t[8]=(le=n[8])*i+(re=n[9])*a+(Ie=n[10])*h+(Ne=n[11])*v,t[9]=le*r+re*l+Ie*f+Ne*w,t[10]=le*s+re*c+Ie*g+Ne*P,t[11]=le*o+re*u+Ie*m+Ne*V,t[12]=(le=n[12])*i+(re=n[13])*a+(Ie=n[14])*h+(Ne=n[15])*v,t[13]=le*r+re*l+Ie*f+Ne*w,t[14]=le*s+re*c+Ie*g+Ne*P,t[15]=le*o+re*u+Ie*m+Ne*V,t}function GE(t,e,n){var o,a,l,c,u,h,f,g,m,v,w,P,i=n[0],r=n[1],s=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],v=e[9],w=e[10],P=e[11],t[0]=o=e[0],t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=m,t[9]=v,t[10]=w,t[11]=P,t[12]=o*i+u*r+m*s+e[12],t[13]=a*i+h*r+v*s+e[13],t[14]=l*i+f*r+w*s+e[14],t[15]=c*i+g*r+P*s+e[15]),t}function DD(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function MH(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=o*r+u*i,t[6]=a*r+h*i,t[7]=l*r+f*i,t[8]=c*r-s*i,t[9]=u*r-o*i,t[10]=h*r-a*i,t[11]=f*r-l*i,t}function IH(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=o*r+u*i,t[2]=a*r+h*i,t[3]=l*r+f*i,t[4]=c*r-s*i,t[5]=u*r-o*i,t[6]=h*r-a*i,t[7]=f*r-l*i,t}function zE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function DH(t,e){return t[0]=-e[0],t[1]=-e[1],t}function RH(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function OH(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function T0(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}!function Wae(){var t=new pa(2);pa!=Float32Array&&(t[0]=0,t[1]=0)}(),function qae(){var t=new pa(4);pa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var NH=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(NH||{});const ale=45*Math.PI/180,lle=1,RD=.1,OD=500,cle=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Un extends Dae{static get IDENTITY(){return function dle(){return $E||($E=new Un,Object.freeze($E)),$E}()}static get ZERO(){return function ule(){return WE||(WE=new Un([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(WE)),WE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return NH}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,o,a,l,c,u,h,f,g,m,v,w){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=v,this[15]=w,this.check()}setRowMajor(e,n,i,r,s,o,a,l,c,u,h,f,g,m,v,w){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=n,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=v,this[12]=r,this[13]=l,this[14]=f,this[15]=w,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(cle)}fromObject(e){return this.check()}fromQuaternion(e){return function kae(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*l,v=s*o,w=s*a,P=s*l;t[0]=1-h-m,t[1]=u+P,t[2]=f-w,t[3]=0,t[4]=u-P,t[5]=1-c-m,t[6]=g+v,t[7]=0,t[8]=f+w,t[9]=g-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:o=RD,far:a=OD}=e;return a===1/0?function hle(t,e,n,i,r,s){const a=2*s/(r-i),l=(n+e)/(n-e),c=(r+i)/(r-i),f=-2*s;t[0]=2*s/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,n,i,r,s,o):function jae(t,e,n,i,r,s,o){var a=1/(n-e),l=1/(r-i),c=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0}(this,n,i,r,s,o,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function zae(t,e,n,i){var r,s,o,a,l,c,u,h,f,g,m=e[0],v=e[1],w=e[2],P=i[0],V=i[1],le=i[2],re=n[0],Ie=n[1],Ne=n[2];Math.abs(m-re)<Sc&&Math.abs(v-Ie)<Sc&&Math.abs(w-Ne)<Sc?function Rae(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=m-re,h=v-Ie,f=w-Ne,r=V*(f*=g=1/Math.hypot(u,h,f))-le*(h*=g),s=le*(u*=g)-P*f,o=P*h-V*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,l=f*r-u*o,c=u*s-h*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(r*m+s*v+o*w),t[13]=-(a*m+l*v+c*w),t[14]=-(u*m+h*v+f*w),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:o=RD,far:a=OD}=e;return function Hae(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*c,t[15]=1}(this,n,i,r,s,o,a),this.check()}orthographic(e){const{fovy:n=ale,aspect:i=lle,focalDistance:r=1,near:s=RD,far:o=OD}=e;PH(n);const l=r*Math.tan(n/2),c=l*i;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return PH(n),function Uae(t,e,n,i,r){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,s),this.check()}determinant(){return function Nae(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],m=t[13],v=t[14],w=t[15];return(e*o-n*s)*(h*w-f*v)-(e*a-i*s)*(u*w-f*m)+(e*l-r*s)*(u*v-h*m)+(n*a-i*o)*(c*w-f*g)-(n*l-r*o)*(c*v-h*g)+(i*l-r*a)*(c*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Oae(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return ID(this,this),this.check()}multiplyLeft(e){return Df(this,e,this),this.check()}multiplyRight(e){return Df(this,this,e),this.check()}rotateX(e){return MH(this,this,e),this.check()}rotateY(e){return function Lae(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=o*r-u*i,t[2]=a*r-h*i,t[3]=l*r-f*i,t[8]=s*i+c*r,t[9]=o*i+u*r,t[10]=a*i+h*r,t[11]=l*i+f*r}(this,this,e),this.check()}rotateZ(e){return IH(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function Pae(t,e,n,i){var l,c,u,h,f,g,m,v,w,P,V,le,re,Ie,Ne,it,ut,qe,dt,yt,Ct,ft,gt,Pt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Sc||(r*=a=1/a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),f=e[1],g=e[2],m=e[3],w=e[5],P=e[6],V=e[7],re=e[9],Ie=e[10],Ne=e[11],dt=r*s*(u=1-c)-o*l,yt=s*s*u+c,Ct=o*s*u+r*l,ft=r*o*u+s*l,gt=s*o*u-r*l,Pt=o*o*u+c,t[0]=(h=e[0])*(it=r*r*u+c)+(v=e[4])*(ut=s*r*u+o*l)+(le=e[8])*(qe=o*r*u-s*l),t[1]=f*it+w*ut+re*qe,t[2]=g*it+P*ut+Ie*qe,t[3]=m*it+V*ut+Ne*qe,t[4]=h*dt+v*yt+le*Ct,t[5]=f*dt+w*yt+re*Ct,t[6]=g*dt+P*yt+Ie*Ct,t[7]=m*dt+V*yt+Ne*Ct,t[8]=h*ft+v*gt+le*Pt,t[9]=f*ft+w*gt+re*Pt,t[10]=g*ft+P*gt+Ie*Pt,t[11]=m*ft+V*gt+Ne*Pt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return DD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return GE(this,this,e),this.check()}transform(e,n){return 4===e.length?(UE(n=T0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function $ae(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=CD(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return UE(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function xae(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}(n||[-0,-0],e,this);break;case 3:i=CH(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return UE(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let WE,$E;function PH(t){if(t>2*Math.PI)throw Error("expected radians")}function im(t,e){const n=T0([],e,t);return OH(n,n,1/n[3]),n}function LH(t,e){const n=t%e;return n<0?e+n:n}function ND(t,e,n){return t<e?e:t>n?n:t}const PD=Math.log2||function ple(t){return Math.log(t)*Math.LOG2E};function Pu(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const zl=Math.PI,FH=zl/4,_l=zl/180,LD=180/zl,rm=512,qE=4003e4,YE=85.051129,gle=1.5;function XE(t){const[e,n]=t;return Pu(Number.isFinite(e)),Pu(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[rm*(e*_l+zl)/(2*zl),rm*(zl+Math.log(Math.tan(FH+n*_l*.5)))/(2*zl)]}function sm(t){const[e,n]=t,i=e/rm*(2*zl)-zl,r=2*(Math.atan(Math.exp(n/rm*(2*zl)-zl))-FH);return[i*LD,r*LD]}function FD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Pu(Number.isFinite(e)&&Number.isFinite(n));const r=rm,s=Math.cos(e*_l),o=r/360,a=o/s,l=r/qE/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(i){const u=_l*Math.tan(e*_l)/s,f=r/qE*u,g=f/a*l;c.unitsPerDegree2=[0,o*u/2,f],c.unitsPerMeter2=[g,0,g]}return c}function BH(t,e){const[n,i,r]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=FD({longitude:n,latitude:i,highPrecision:!0}),u=XE(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=sm(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function KE(t){return 2*Math.atan(.5/t)*LD}function BD(t){return.5/Math.tan(.5*t*_l)}function jH(t,e){const[n,i,r=0]=t;return Pu(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),im(e,[n,i,r,1])}function M0(t,e,n=0){const[i,r,s]=t;if(Pu(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return im(e,[i,r,s,1]);const o=im(e,[i,r,0,1]),a=im(e,[i,r,1,1]),l=o[2],c=a[2];return RH([],o,a,l===c?0:((n||0)-l)/(c-l))}function UH(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=i,h=function vle(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(Pu(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),f=XE([a,ND(u,-YE,YE)]),g=XE([c,ND(l,-YE,YE)]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],v=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];Pu(v[0]>0&&v[1]>0);const w=v[0]/m[0],P=v[1]/m[1],Ie=sm([(g[0]+f[0])/2+(h.right-h.left)/2/w,(g[1]+f[1])/2+(h.top-h.bottom)/2/P]),Ne=Math.min(s,PD(Math.abs(Math.min(w,P))));return Pu(Number.isFinite(Ne)),{longitude:Ie[0],latitude:Ie[1],zoom:Ne}}const VH=Math.PI/180;function HH(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=im(i,[e,0,1,1]),s=im(i,[e,t.height,1,1]),c=sm(RH([],r,s,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c.push(n),c}const yi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(yi,"IDENTITY",{get:()=>(ui.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Cc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},JE={common:0,meters:1,pixels:2},qH={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Ele=Math.PI/180,Ale=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],YH=[0,0,0],Sle={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Hd{constructor(e={}){be(this,"id",void 0),be(this,"x",void 0),be(this,"y",void 0),be(this,"width",void 0),be(this,"height",void 0),be(this,"padding",void 0),be(this,"isGeospatial",void 0),be(this,"zoom",void 0),be(this,"focalDistance",void 0),be(this,"position",void 0),be(this,"modelMatrix",void 0),be(this,"distanceScales",void 0),be(this,"scale",void 0),be(this,"center",void 0),be(this,"cameraPosition",void 0),be(this,"projectionMatrix",void 0),be(this,"viewMatrix",void 0),be(this,"viewMatrixUncentered",void 0),be(this,"viewMatrixInverse",void 0),be(this,"viewProjectionMatrix",void 0),be(this,"pixelProjectionMatrix",void 0),be(this,"pixelUnprojectionMatrix",void 0),be(this,"resolution",void 0),be(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Sle,this.focalDistance=e.focalDistance||1,this.position=e.position||YH,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Cc.WEB_MERCATOR:Cc.WEB_MERCATOR_AUTO_OFFSET:Cc.IDENTITY}equals(e){return e instanceof Hd&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&tm(e.projectionMatrix,this.projectionMatrix)&&tm(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=jH(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=n?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,o]=e,c=M0([r,n?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=XE(e);return n[1]=Pr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?sm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?FD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Mae(t){return{left:nm(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:nm(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:nm(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:nm(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:nm(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:nm(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function _le(t){const{latitude:e}=t;Pu(Number.isFinite(e));const n=Math.cos(e*_l);return function mle(t){return PD(t)}(qE*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||FD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=YH;if(s&&(a=o?new Un(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,i,0]);this.center=new Oo(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Ale,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Un).multiplyRight(n).translate(new Oo(this.center).negate()),this.projectionMatrix=i||function Cle({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const l=t/e,c=n?(new Un).orthographic({fovy:i,aspect:l,focalDistance:r,near:o,far:a}):(new Un).perspective({fovy:i,aspect:l,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Pr((u+t-h)/2,0,t)-t/2,v=Pr((f+e-g)/2,0,e)-e/2;c[8]-=2*m/t,c[9]+=2*v/e}return c}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Ele,focalDistance:u,padding:c,near:a,far:l});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Df(h,h,this.projectionMatrix),Df(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=ID([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Tae(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];DD(f,f,[this.width/2,-this.height/2,1]),GE(f,f,[1,-1,0]),Df(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=ID([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ui.warn("Pixel project matrix not invertible")()}}be(Hd,"displayName","Viewport");const Tle=/([0-9]+\.?[0-9]*)(%|px)/;function Gd(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Tle.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function zd(t,e){return t.relative?Math.round(t.position*e):t.position}function om(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const i=t[n],r=e[n];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&om(i,r)))return!1}return!0}function Qs(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class jD{constructor(e){be(this,"id",void 0),be(this,"viewportInstance",void 0),be(this,"_x",void 0),be(this,"_y",void 0),be(this,"_width",void 0),be(this,"_height",void 0),be(this,"_padding",void 0),be(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Qs(!l||l instanceof Hd),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Gd(i),this._y=Gd(r),this._width=Gd(s),this._height=Gd(o),this._padding=a&&{left:Gd(a.left||0),right:Gd(a.right||0),top:Gd(a.top||0),bottom:Gd(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&om(this.props,e.props))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:zd(this._x,e),y:zd(this._y,n),width:zd(this._width,e),height:zd(this._height,n)};return this._padding&&(i.padding={left:zd(this._padding.left,e),top:zd(this._padding.top,n),right:zd(this._padding.right,e),bottom:zd(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Mle=(new Un).lookAt({eye:[0,0,1]});function Ile({width:t,height:e,near:n,far:i,padding:r}){let s=-t/2,o=t/2,a=-e/2,l=e/2;if(r){const{left:c=0,right:u=0,top:h=0,bottom:f=0}=r,g=Pr((c+t-u)/2,0,t)-t/2,m=Pr((h+e-f)/2,0,e)-e/2;s-=g,o-=g,a+=m,l+=m}return(new Un).ortho({left:s,right:o,bottom:a,top:l,near:n,far:i})}class Dle extends Hd{constructor(e){const{width:n,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:l=null,flipY:c=!0}=e,u=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(u,h),g=Math.pow(2,f);let m;if(u!==h){const v=Math.pow(2,u),w=Math.pow(2,h);m={unitsPerMeter:[v/g,w/g,1],metersPerUnit:[g/v,g/w,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Mle.clone().scale([g,g*(c?-1:1),g]),projectionMatrix:Ile({width:n||1,height:i||1,padding:l,near:r,far:s}),zoom:f,distanceScales:m})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=M0(n,this.pixelUnprojectionMatrix),s=zE([],this.projectFlat(e),DH([],i)),o=zE([],this.center,s);return{target:this.unprojectFlat(o)}}}class D0{constructor(e){be(this,"_inProgress",void 0),be(this,"_handle",void 0),be(this,"_timeline",void 0),be(this,"time",void 0),be(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const XH=()=>{},Rle=t=>t;class Nle{constructor(e){be(this,"getControllerState",void 0),be(this,"props",void 0),be(this,"propsInTransition",void 0),be(this,"transition",void 0),be(this,"onViewStateChange",void 0),be(this,"onStateChange",void 0),be(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(i/a),u=r.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new D0(e.timeline),this.onViewStateChange=e.onViewStateChange||XH,this.onStateChange=e.onStateChange||XH}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||Rle,interpolator:s,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Ple{constructor(e){be(this,"_propsToCompare",void 0),be(this,"_propsToExtract",void 0),be(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!tm(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];Qs(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const Lle=["longitude","latitude","zoom","bearing","pitch"],Fle=["longitude","latitude","zoom"];class ZE extends Ple{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:Lle,required:Fle},super(i.transitionProps),be(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(n),l=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=kE(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,kE(e.around,n.around,i)))}return r}}const Wd={transitionDuration:0},QE=t=>1-(1-t)*(1-t),am_WHEEL=["wheel"],am_PAN=["panstart","panmove","panend"],am_PINCH=["pinchstart","pinchmove","pinchend"],am_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],am_DOUBLE_TAP=["doubletap"],am_KEYBOARD=["keydown"],Rf={};class VD{constructor(e){be(this,"props",void 0),be(this,"state",{}),be(this,"transitionManager",void 0),be(this,"eventManager",void 0),be(this,"onViewStateChange",void 0),be(this,"onStateChange",void 0),be(this,"makeViewport",void 0),be(this,"_controllerState",void 0),be(this,"_events",{}),be(this,"_interactionState",{isDragging:!1}),be(this,"_customEvents",[]),be(this,"_eventStartBlocked",null),be(this,"_panMove",!1),be(this,"invertPan",!1),be(this,"dragMode","rotate"),be(this,"inertia",0),be(this,"scrollZoom",!0),be(this,"dragPan",!0),be(this,"dragRotate",!0),be(this,"doubleClickZoom",!0),be(this,"touchZoom",!0),be(this,"touchRotate",!1),be(this,"keyboard",!0),this.transitionManager=new Nle({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(am_WHEEL,u&&i),this.toggleEvents(am_PAN,u&&(r||s)),this.toggleEvents(am_PINCH,u&&(a||l)),this.toggleEvents(am_TRIPLE_PAN,u&&l),this.toggleEvents(am_DOUBLE_TAP,u&&o),this.toggleEvents(am_KEYBOARD,u&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Wd,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Wd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:QE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Wd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:QE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Wd,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Wd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:QE},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Rf._startPinchRotation=e.rotation,Rf._lastPinchEvent=e,this.updateViewport(i,Wd,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Rf._startPinchRotation-i})}return this.updateViewport(n,Wd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Rf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Rf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:QE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Rf._startPinchRotation=null,Rf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(r),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(r),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new ZE({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Wd}}class KH{constructor(e,n){be(this,"_viewportProps",void 0),be(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class JH extends KH{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:v,startZoomPosition:w,startZoom:P}=e;super({width:n,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:h},{startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:v,startZoomPosition:w,startZoom:P}),be(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let c;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),c={rotationX:s+(e[1]-r[1])/l*180,rotationOrbit:o+180*u}}else c={rotationX:s+i,rotationOrbit:o+n};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),Pr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Pr(r[0],i,n),Pr(r[1],i,n)]:Pr(r,i,n),e.rotationX=Pr(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Cae(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class kle extends VD{constructor(...e){super(...e),be(this,"ControllerState",JH),be(this,"transition",{transitionDuration:300,transitionInterpolator:new ZE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class jle extends JH{constructor(e){super(e),be(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Pr(o+s,r,i);break;case"Y":a=Pr(a+s,r,i);break;default:let l=Math.min(o+s,a+s);l<r&&(s+=r-l),l=Math.max(o+s,a+s),l>i&&(s+=i-l),o+=s,a+=s}return[o,a]}return Pr(n+s,r,i)}}class Ule extends VD{constructor(...e){super(...e),be(this,"ControllerState",jle),be(this,"transition",{transitionDuration:300,transitionInterpolator:new ZE(["target","zoom"])}),be(this,"dragMode","pan")}_onPanRotate(){return!1}}class HD extends jD{get ViewportType(){return Dle}get ControllerType(){return Ule}}be(HD,"displayName","OrthographicView");const GD=Math.PI/180;function Vle({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],l=(new Un).lookAt({eye:a,up:o});l.rotateX(i*GD),"Z"===n?l.rotateZ(r*GD):l.rotateY(r*GD);const c=Math.pow(2,s)/t;return l.scale(c),l}class Hle extends Hd{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:l=0,zoom:c=0}=e,u=i?i[5]/2:BD(r);super({...e,longitude:void 0,viewMatrix:Vle({height:n||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:l,zoom:c}),fovy:r,focalDistance:u,position:o,zoom:c}),be(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=n?r:this.height-r,[a,l,c]=M0([i,o,s],this.pixelUnprojectionMatrix);return[a,l,c]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class ZH extends jD{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Hle}get ControllerType(){return kle}}be(ZH,"displayName","OrbitView");const R0="vs";function Ua(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const WD={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function zle(t){let e=QH(t);return"object"===e?t?"type"in t?Object.assign({},t,WD[t.type]):"value"in t?(e=QH(t.value),Object.assign({type:e},t,WD[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},WD[e])}function QH(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class $D{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:h,fragmentShader:f}=e;Ua("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=function qle(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(u),o&&(this.uniforms=function Gle(t){const e={};for(const n in t){const r=zle(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ua(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ua(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function Yle(t){return function e4(t){const e={},n={};return qD({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(t4(t))}function qD(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&qD({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function t4(t,e){return t.map(n=>(n instanceof $D||(Ua("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ua(n.name,"shader module has no name"),(n=new $D(n)).dependencies=t4(n.dependencies)),n))}const Kle=7936,Jle=7937,Zle=7938,Qle=35724,YD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Of={};function nce(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(YD).forEach(t=>{Of[t]=t});const XD={};function n4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=YD[e];if(Ua(i,e),!function Xle(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in XD)return XD[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),XD[e]=l,l}function eA(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function ice(t,e){const n=YD[e];Ua(n,e);const i=function ece(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ua(!1===r||!0===r),r}(t,n))}const lce={[R0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},tA="__LUMA_INJECT_DECLARATIONS__",i4=/void\s+main\s*\([^)]*\)\s*\{\n?/,r4=/}\n?[^{}]*$/,KD=[];function s4(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===R0;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),KD.length=o.length;for(let l=0,c=o.length;l<c;++l)KD[l]=o[l].injection;const a="".concat(KD.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(tA,a));break;case"vs:#main-start":r&&(t=t.replace(i4,l=>l+a));break;case"vs:#main-end":r&&(t=t.replace(r4,l=>a+l));break;case"fs:#decl":r||(t=t.replace(tA,a));break;case"fs:#main-start":r||(t=t.replace(i4,l=>l+a));break;case"fs:#main-end":r||(t=t.replace(r4,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(tA,""),i&&(t=t.replace(/\}\s*$/,s=>s+lce[e])),t}function JD(t){const e={};return Ua(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}function lm(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const o4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],cce=[...o4,[lm("attribute"),"in $1"],[lm("varying"),"out $1"]],uce=[...o4,[lm("varying"),"in $1"]],a4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],dce=[...a4,[lm("in"),"attribute $1"],[lm("out"),"varying $1"]],hce=[...a4,[lm("in"),"varying $1"]],ZD="gl_FragColor",QD=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,fce=/void\s+main\s*\([^)]*\)\s*\{\n?/;function nA(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const _ce="\n\n".concat(tA,"\n\n"),l4={[R0]:"vertex",fs:"fragment"};function c4(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=e;Ua("string"==typeof i,"shader source must be a string");const f=r===R0,g=i.split("\n");let m=100,v="",w=i;0===g[0].indexOf("#version ")?(m=300,v=g[0],w=g.slice(1).join("\n")):v="#version ".concat(m);const P={};s.forEach(it=>{Object.assign(P,it.getDefines())}),Object.assign(P,o);let V=u?"".concat(v,"\n").concat(function xce(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(l4[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function wce(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(l4[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function rce(t){switch(function tce(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Kle),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Jle);return{gpuVendor:nce(n,i),vendor:n,renderer:i,version:t.getParameter(Zle),shadingLanguageVersion:t.getParameter(Qle)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function sce(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return eA(t,Of.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),eA(t,Of.GLSL_DERIVATIVES)&&n4(t,Of.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),eA(t,Of.GLSL_FRAG_DATA)&&n4(t,Of.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),eA(t,Of.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function Ece(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(P),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(v,"\n");const le=function Sce(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),re={},Ie={},Ne={};for(const it in l){const ut="string"==typeof l[it]?{injection:l[it],order:0}:l[it],qe=it.match(/^(v|f)s:(#)?([\w-]+)$/);qe?qe[2]?"decl"===qe[3]?Ie[it]=[ut]:Ne[it]=[ut]:re[it]=[ut]:Ne[it]=[ut]}for(const it of s){h&&it.checkDeprecations(w,h),V+=it.getModuleSource(r,m);const qe=it.injections[r];for(const dt in qe){const yt=dt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?Ie:Ne;ft[dt]=ft[dt]||[],ft[dt].push(qe[dt])}else re[dt]=re[dt]||[],re[dt].push(qe[dt])}}return V+=_ce,V=s4(V,r,Ie),V+=function Ace(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(le[r],re),V+=w,V=s4(V,r,Ne),V=function pce(t,e,n){switch(e){case 300:return n?nA(t,cce):function gce(t){const e=(t=nA(t,uce)).match(QD);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(ZD,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(fce,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(ZD,"\\b"),"g"),n)}return t}(t);case 100:return n?nA(t,dce):function mce(t){const e=(t=nA(t,hce)).match(QD);if(e){const n=e[1];t=t.replace(QD,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ZD)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(V,c?100:m,f),V}function bce(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const an=new E0({id:"luma.gl"});function Ko(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Tce="Requires WebGL2";function iA(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function ri(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function rA(t){return Ko(iA(t),"Invalid WebGLRenderingContext"),t}function No(t){return Ko(ri(t),Tce),t}const O0={};const N0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(N0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Nf=function(e){const n=this;this.gl=e,function Oce(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(O0[i]=!0)}while(0!==i);for(i in O0)if(O0[i])return delete O0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Dce(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Nf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Nf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new N0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Nf.prototype.createVertexArrayOES=function(){const e=new N0(this);return this.vertexArrayObjects.push(e),e},Nf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Nf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof N0&&e.hasBeenBound&&e.ext===this)},Nf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function Rce(t,e){O0[t]=!0,void 0!==e&&function Ice(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=r?r.attribs[l]:null;if((!r||c.enabled!==u.enabled)&&(c.enabled?i.enableVertexAttribArray.call(n,l):i.disableVertexAttribArray.call(n,l)),c.enabled){let h=!1;(!r||c.buffer!==u.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(n,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&i.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const u4="OES_element_index",d4="WEBGL_draw_buffers",h4="WEBGL_debug_renderer_info",gr=t=>ri(t)?void 0:0,Gce={3074:t=>ri(t)?void 0:36064,35723:t=>ri(t)?void 0:4352,35977:gr,32937:gr,36795:(t,e)=>{const n=ri(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(h4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(h4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:gr,35071:gr,37447:gr,36063:(t,e)=>{if(!ri(t)){const n=t.getExtension(d4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:gr,35374:gr,35377:gr,34852:t=>{if(!ri(t)){const e=t.getExtension(d4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(u4)?2147483647:65535,33001:t=>t.getExtension(u4)?16777216:65535,33e3:t=>16777216,37157:gr,35373:gr,35657:gr,36183:gr,37137:gr,34045:gr,35978:gr,35979:gr,35968:gr,35376:gr,35375:gr,35659:gr,37154:gr,35371:gr,35658:gr,35076:gr,35077:gr,35380:gr},f4="ANGLE_instanced_arrays",p4={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ko(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[f4]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ko(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ko(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ko(!1)},deleteQuery:()=>{Ko(!1)},beginQuery:()=>{Ko(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},eR={readBuffer:(t,e,n)=>{ri(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function Kce(t,e){return{webgl2:ri(t),ext:t.getExtension(e)}}(t,f4);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!ri(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>ri(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function zce(t,e,n){const i=Gce[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function tue(t,e){let{extension:n,target:i,target2:r}=e;const s=p4[n];Ko(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let h=null;"meta"===c||"function"==typeof t[c]||(l&&"function"==typeof l[u]?h=function(){return l[u](...arguments)}:"function"==typeof s[c]&&(h=s[c].bind(i))),h&&(i[c]=h,r[c]=h)}}globalThis.polyfillContext=function Jce(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Nce(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Nf(this)),this.__OESVertexArrayObject))}}(t),function Zce(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function eue(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&tue(t,{extension:n,target:t.luma,target2:t})}(t,p4),function Qce(t,e){let{target:n,target2:i}=e;Object.keys(eR).forEach(r=>{if("function"==typeof eR[r]){const s=t[r]?t[r].bind(t):()=>{},o=eR[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const tR={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},$d=(t,e,n)=>e?t.enable(n):t.disable(n),g4=(t,e,n)=>t.hint(n,e),Va=(t,e,n)=>t.pixelStorei(n,e);function P0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const rue={3042:$d,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:$d,2885:(t,e)=>t.cullFace(e),2929:$d,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:$d,35723:g4,36006:(t,e)=>{const n=ri(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:g4,2849:(t,e)=>t.lineWidth(e),32823:$d,32824:"polygonOffset",10752:"polygonOffset",35977:$d,32938:"sampleCoverage",32939:"sampleCoverage",3089:$d,3088:(t,e)=>t.scissor(...e),2960:$d,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Va,3317:Va,37440:Va,37441:Va,37443:Va,3330:Va,3332:Va,3331:Va,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Va,32878:Va,3316:Va,3315:Va,32877:Va,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=P0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=P0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=P0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=P0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=P0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Hr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const sue={blendEquation:(t,e,n)=>t.blendEquationSeparate(Hr(32777,e,n),Hr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Hr(32969,e,n),Hr(32968,e,n),Hr(32971,e,n),Hr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Hr(32824,e,n),Hr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Hr(32938,e,n),Hr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Hr(2962,e,n),Hr(2967,e,n),Hr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Hr(34816,e,n),Hr(36003,e,n),Hr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Hr(2964,e,n),Hr(2965,e,n),Hr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Hr(34817,e,n),Hr(34818,e,n),Hr(34819,e,n))},m4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Tc=(t,e)=>t.isEnabled(e),_4={3042:Tc,2884:Tc,2929:Tc,3024:Tc,32823:Tc,32926:Tc,32928:Tc,3089:Tc,2960:Tc,35977:Tc};function y4(t){for(const e in t)return!1;return!0}function oue(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function v4(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function aue(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&i(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class cue{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function due(t,e){if("number"==typeof(e=e||tR)){const r=e,s=_4[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=_4[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},tR),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ko(this.stateStack.length>0),Lu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Ko(void 0!==s);const o=e[s],a=this.cache[s];oue(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function b4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Ko(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new cue(t,{copyState:i}),function lue(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in m4)aue(t,s,m4[s]);v4(t,"getParameter"),v4(t,"isEnabled")}return t.state.enable=n,t}function w4(t){Ko(t.state),t.state.pop()}function Lu(t,e){if(Ko(iA(t),"setParameters requires a WebGL context"),y4(e))return;const n={};for(const r in e){const s=Number(r),o=rue[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,sue[r])(t,e,i)}function yl(t,e,n){if(y4(e))return n(t);const{nocatch:i=!0}=e;let r;if(function uue(t){t.state||b4(t,{copyState:!1}),t.state.push()}(t),Lu(t,e),i)r=n(t),w4(t);else try{r=n(t)}finally{w4(t)}return r}function cm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function nR(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function pue(t,e,n,i,r){const s=x4(t[0],e,n);let o=E4(t[1],e,i,r),a=x4(t[0]+1,e,n);const l=a===n-1?a:a-1;let c;return a=E4(t[1]+1,e,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(e,cm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function x4(t,e,n){return Math.min(Math.round(t*e),n-1)}function E4(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const iR=Ac(),gue=iR&&typeof document<"u",A4={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function S4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ko(iR,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},A4,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:s}=t,o=function vue(t){let s,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(gue&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:n,onError:i});return r=function yue(t,e){const{onError:n}=e;let i=null;const r=l=>i=l.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,t),r?(r=rR(r,t),function bue(t){const e=ri(t)?"WebGL2":"WebGL1",n=function mue(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";an.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function rR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function wue(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},A4,e);const{manageState:n,debug:i}=e;return n&&b4(t,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return an.log(1,...s)()}}),iR&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),an.level=Math.max(an.level,1)):an.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function C4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class T4{constructor(e,n){be(this,"name",void 0),be(this,"type",void 0),be(this,"sampleSize",1),be(this,"time",void 0),be(this,"count",void 0),be(this,"samples",void 0),be(this,"lastTiming",void 0),be(this,"lastSampleTime",void 0),be(this,"lastSampleCount",void 0),be(this,"_count",0),be(this,"_time",0),be(this,"_samples",0),be(this,"_startTime",0),be(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=C4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(C4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class sR{constructor(e){be(this,"id",void 0),be(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof T4?e:new T4(n,i)),this.stats[n]}}const L0="8.5.21",Pf=new class Aue{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new sR({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==L0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(L0));function Kt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function oR(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Kt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function qd(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(Ac()&&an.log(1,"luma.gl ".concat(L0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:L0,version:L0,log:an,stats:Pf,globals:{modules:{},nodeIO:{}}}),globalThis;const aR={};function ga(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";aR[t]=aR[t]||1;const e=aR[t]++;return"".concat(t,"-").concat(e)}function M4(t){return Kt("number"==typeof t,"Input must be a number"),t&&!(t&t-1)}function um(t){let e=!0;for(const n in t){e=!1;break}return e}function I4(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw an.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const dm="Resource subclass must define virtual methods";class Fu{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rA(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||ga(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Kt(e=oR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ri(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=ri(this.gl),o={},a=n||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=i?qd(this.gl,l):l;o[h]=this.getParameter(l,e),i&&"GLenum"===c.type&&(o[h]=qd(this.gl,o[h]))}}return o}setParameter(e,n){Kt(e=oR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ri(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=oR(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return I4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(dm)}_deleteHandle(){throw new Error(dm)}_bindHandle(e){throw new Error(dm)}_getOptsFromHandle(){throw new Error(dm)}_getParameter(e,n){throw new Error(dm)}_setParameter(e,n){throw new Error(dm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Pf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Pf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Pf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Pf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Sue="Failed to deduce GL constant from typed array";function lR(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Sue)}}function F0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Tue(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let l=0;l<r;l++)for(let c=0;c<4;c++)o[4*(a*r+l)+c]=e[4*(2*a*n+2*l)+c];return{data:o,width:r,height:s}}function cR(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const c=i[a]?"".concat(t,".").concat(i[a]):"N/A";an.removed("".concat(t,".").concat(a),c)()}for(const a in r)if(a in e){const l=r[a];an.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];an.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const Mue={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Iue={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ma{static getBytesPerElement(e){return F0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Kt(e.size),F0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new ma(Mue,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ma.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ma.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=cR("Accessor",e,Iue),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const R4={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Due={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:R4},Rue={removedProps:R4};class Yi extends Fu{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ma.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ma.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=cR("Buffer",e,Due),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=cR("Buffer",e,Rue))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ma(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;Kt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(No(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return No(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};No(this.gl);const s=F0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const u=Math.min(o,l);return r=r||u,Kt(r<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Kt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Kt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=lR(e);return Kt(s),this.setAccessor(new ma(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Kt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/F0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ma(this.accessor,{type:lR(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return an.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return an.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return an.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return an.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ma(this.accessor,e),this}}const uR={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},O4={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},N4={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Pue=[9729,9728],P4=globalThis.WebGLBuffer||function(){};class Lf extends Fu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function Oue(t,e){const n=uR[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=ri(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function Nue(t,e){const n=uR[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=ga("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(V=>this.initialize(Object.assign({},e,{pixels:V,data:V}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u}=e;n||(n=r);let{width:h,height:f,dataFormat:g,type:m,compressed:v=!1,mipmaps:w=!0}=e;const{depth:P=0}=e;return({width:h,height:f,compressed:v,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:v,data:n,width:h,height:f})),this.width=h,this.height=f,this.depth=P,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),w&&this._isNPOT()&&(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(l)),this.mipmaps=w,this.setImageData({data:n,width:h,height:f,depth:P,format:s,type:m,dataFormat:g,border:o,mipmaps:w,parameters:c,compressed:v}),w&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),i&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),yl(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;c||(c=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:f}));const{gl:v}=this;v.bindTexture(this.target,this.handle);let w=null;({data:c,dataType:w}=this._getDataType({data:c,compressed:m}));let P,V=0;return yl(this.gl,l,()=>{switch(w){case"null":v.texImage2D(n,r,s,h,f,o,g,u,c);break;case"typed-array":v.texImage2D(n,r,s,h,f,o,g,u,c,a);break;case"buffer":P=No(v),P.bindBuffer(35052,c.handle||c),P.texImage2D(n,r,s,h,f,o,g,u,a),P.bindBuffer(35052,null);break;case"browser-object":ri(v)?v.texImage2D(n,r,s,h,f,o,g,u,c):v.texImage2D(n,r,s,g,u,c);break;case"compressed":for(const[le,re]of c.entries())v.compressedTexImage2D(n,le,re.format,re.width,re.height,o,re.data),V+=re.levelSize;break;default:Kt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===w?V:c&&c.byteLength?c.byteLength:this.width*this.height*(O4[this.dataFormat]||4)*(N4[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:v=this.border,parameters:w={}}=e;if(({type:h,dataFormat:f,compressed:g,width:a,height:l}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:r,width:a,height:l})),Kt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const P=r;r=P.data,a=P.shape[0],l=P.shape[1]}r instanceof Yi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),yl(this.gl,w,()=>{if(g)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,r);else if(null===r)this.gl.texSubImage2D(n,c,s,o,a,l,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,c,s,o,a,l,f,h,r,m);else if(r instanceof P4){const P=No(this.gl);P.bindBuffer(35052,r),P.texSubImage2D(n,c,s,o,a,l,f,h,m),P.bindBuffer(35052,null)}else ri(this.gl)?No(this.gl).texSubImage2D(n,c,s,o,a,l,f,h,r):this.gl.texSubImage2D(n,c,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return an.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Yi?{data:n.handle,dataType:"buffer"}:n instanceof P4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=e;const c=uR[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Kt(r,"Could not deduced texture size"),Kt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Kt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Kt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ri(this.gl)||!this.width||!this.height||M4(this.width)&&M4(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Pue.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Lue(t,e){return Kt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class eo extends Lf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Lf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rA(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Lue(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Ff="EXT_color_buffer_float",L4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ff,bpp:2},33327:{gl2:Ff,bpp:4},34842:{gl2:Ff,bpp:8},33326:{gl2:Ff,bpp:4},33328:{gl2:Ff,bpp:8},34836:{gl2:Ff,bpp:16},35898:{gl2:Ff,bpp:4}};class hm extends Fu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Fue(t,e,n){const i=n[e];if(!i)return!1;const r=ri(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,L4)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return Kt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&ri(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*L4[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const F4=6144,U4="clear: bad arguments";function hR(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),Kt(0!==o,U4),yl(t,s,()=>{t.clear(o)})}const fR=[34069,34070,34071,34072,34073,34074];let Hue=(()=>{class t extends Lf{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rA(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return D(function*(){let{width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:u=5121}=n;const{gl:h}=i,f=o||a,g=yield Promise.all(fR.map(m=>{const v=f[m];return Promise.all(Array.isArray(v)?v:[v])}));i.bind(),fR.forEach((m,v)=>{g[v].length>1&&!1!==i.opts.mipmaps&&an.warn("".concat(i.id," has mipmap and multiple LODs."))(),g[v].forEach((w,P)=>{r&&s?h.texImage2D(m,P,c,r,s,l,c,u,w):h.texImage2D(m,P,c,c,u,w)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:u=5121}=n,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},n,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,c,r,s,l,c,u,f):h.texImage2D(i,0,c,c,u,f),this}}return t.FACES=fR,t})();class Gue extends Lf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return ri(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),yl(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,s,o,a,l,c,h),h instanceof Yi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,s,o,a,l,c,u))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(O4[this.dataFormat]||4)*(N4[this.type]||1),"Texture"),this.loaded=!0,this}}function Wue(t,e){const{gl:n,width:i,height:r,id:s}=t;return new vs(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function sA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=B0(t);Kt(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,36064===s&&null===g&&(s=1028),Kt(m[s]),c=c||m[s].type,o=function que(t,e,n,i,r){if(t)return t;const s=F0(e=e||5121,{clamped:!1}),o=function Vue(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Kt(!1),0}}(n);return new s(i*r*o)}(o,c,r,a,l),c=c||lR(o);const v=f.bindFramebuffer(36160,g);return f.readPixels(n,i,a,l,r,c,o),f.bindFramebuffer(36160,v||null),h&&u.delete(),o}function pR(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=sA(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=Tue({data:i,width:r,height:s}));!function Cue(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const l=a*o,c=(i-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}function B0(t){return t instanceof vs?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Wue(t),deleteFramebuffer:!0}}const V4={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Yue(t){const e=new eo(t,{format:6408,type:5126,dataFormat:6408}),n=new vs(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Xue=2;function gR(t,e){return H4(t,e)}function H4(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>G4(t,n))}function G4(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function Jue(t,e){const n=V4[e];let i;Kt(n,e);const r=ri(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Kt(!1);return i}(t,e)),t.luma.caps[e]||an.log(Xue,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const z4="Multiple render targets not supported";class vs extends Fu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new vs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=No(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=No(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c,drawBuffers:u}=e;if(Kt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:c,drawBuffers:u}),r&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Kt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&an.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Kt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof hm)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function Que(t){return(vs.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&hR(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,l)=>{!function Uue(t){let{framebuffer:e=null,buffer:n=F4,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(t),yl(t,{framebuffer:e},()=>{switch(n){case F4:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:Kt(!1,U4)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return an.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return an.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return an.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return an.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return an.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return an.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=No(this.gl),l=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=qd(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?qd(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?qd(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(pR(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>an.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=pR(this,{targetMaxHeight:100});return an.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new eo(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new hm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new hm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&Kt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof hm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:No(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const l=function Zue(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,l,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:Kt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Mce(t){return ri(t)?t:null}(this.gl);n?n.readBuffer(e):Kt(36064===e||1029===e,z4),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=No(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Kt(1===e.length&&(36064===e[0]||1029===e[0]),z4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function Kue(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in V4)void 0===t.luma.caps[e]&&(t.luma.caps[e]=G4(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}vs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const tde={5126:wr.bind(null,"uniform1fv",Ha,1,Po),35664:wr.bind(null,"uniform2fv",Ha,2,Po),35665:wr.bind(null,"uniform3fv",Ha,3,Po),35666:wr.bind(null,"uniform4fv",Ha,4,Po),5124:wr.bind(null,"uniform1iv",Yd,1,Po),35667:wr.bind(null,"uniform2iv",Yd,2,Po),35668:wr.bind(null,"uniform3iv",Yd,3,Po),35669:wr.bind(null,"uniform4iv",Yd,4,Po),35670:wr.bind(null,"uniform1iv",Yd,1,Po),35671:wr.bind(null,"uniform2iv",Yd,2,Po),35672:wr.bind(null,"uniform3iv",Yd,3,Po),35673:wr.bind(null,"uniform4iv",Yd,4,Po),35674:wr.bind(null,"uniformMatrix2fv",Ha,4,Bu),35675:wr.bind(null,"uniformMatrix3fv",Ha,9,Bu),35676:wr.bind(null,"uniformMatrix4fv",Ha,16,Bu),35678:to,35680:to,5125:wr.bind(null,"uniform1uiv",oA,1,Po),36294:wr.bind(null,"uniform2uiv",oA,2,Po),36295:wr.bind(null,"uniform3uiv",oA,3,Po),36296:wr.bind(null,"uniform4uiv",oA,4,Po),35685:wr.bind(null,"uniformMatrix2x3fv",Ha,6,Bu),35686:wr.bind(null,"uniformMatrix2x4fv",Ha,8,Bu),35687:wr.bind(null,"uniformMatrix3x2fv",Ha,6,Bu),35688:wr.bind(null,"uniformMatrix3x4fv",Ha,12,Bu),35689:wr.bind(null,"uniformMatrix4x2fv",Ha,8,Bu),35690:wr.bind(null,"uniformMatrix4x3fv",Ha,12,Bu),35678:to,35680:to,35679:to,35682:to,36289:to,36292:to,36293:to,36298:to,36299:to,36300:to,36303:to,36306:to,36307:to,36308:to,36311:to},nde={},ide={},rde={},W4=[0];function mR(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(W4[0]=t,t=W4);const r=t.length;if(r%e&&an.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Ha(t,e){return mR(t,e,Float32Array,nde)}function Yd(t,e){return mR(t,e,Int32Array,ide)}function oA(t,e){return mR(t,e,Uint32Array,rde)}function $4(t,e,n){const i=tde[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function sde(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function ade(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function cde(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Lf||t instanceof hm)||t instanceof vs&&!!t.texture}function lde(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function to(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function wr(t,e,n,i){let r=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{Kt(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==r[f]){h=!0;break}}return h&&(i(o,t,a,c),r.set(c)),h}}function Po(t,e,n,i){t[e](n,i)}function Bu(t,e,n,i){t[e](n,!1,i)}function aA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function Y4(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=X4("^^^ ".concat(a,": ").concat(c,"\n\n"),l)}return n}function X4(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class k0 extends Fu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Kt(!1),"unknown"}}constructor(e,n){rA(e),Kt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:aA(n.source,null)||n.id||ga("unnamed ".concat(k0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=aA(n,null);i&&(this.id=ga(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(k0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return aA(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function q4(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||aA(e)||"(unnamed)",l="".concat(function hde(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==g?s[m]=h:o[m]=h}const c=function fde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return X4(a,r-a.length)+n+s})}(e);return{shaderName:l,errors:Y4(s,c),warnings:Y4(o,c)}}(i,this.source,this.shaderType,this.id);throw an.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),an.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class _R extends k0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class yR extends k0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const gde=5120,mde=5121,_de=5122,yde=5123,Ps=5126,j0=5124,U0=5125,vR={[Ps]:[Ps,1,"float"],35664:[Ps,2,"vec2"],35665:[Ps,3,"vec3"],35666:[Ps,4,"vec4"],[j0]:[j0,1,"int"],35667:[j0,2,"ivec2"],35668:[j0,3,"ivec3"],35669:[j0,4,"ivec4"],[U0]:[U0,1,"uint"],36294:[U0,2,"uvec2"],36295:[U0,3,"uvec3"],36296:[U0,4,"uvec4"],35670:[Ps,1,"bool"],35671:[Ps,2,"bvec2"],35672:[Ps,3,"bvec3"],35673:[Ps,4,"bvec4"],35674:[Ps,8,"mat2"],35685:[Ps,8,"mat2x3"],35686:[Ps,8,"mat2x4"],35675:[Ps,12,"mat3"],35687:[Ps,12,"mat3x2"],35688:[Ps,12,"mat3x4"],35676:[Ps,16,"mat4"],35689:[Ps,16,"mat4x2"],35690:[Ps,16,"mat4x3"]};function t8(t){const e=vR[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function n8(t,e){switch(t){case gde:case mde:case _de:case yde:t=Ps}for(const n in vR){const[i,r,s]=vR[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class Hde{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!ri(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=t8(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new ma(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=t8(i),l={location:e,name:n,accessor:new ma({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Gde=35981,zde=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class r8 extends Fu{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",zde),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=Gde}=e;return this.hash=n||"",this.vs="string"==typeof i?new _R(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new yR(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Kt(this.vs instanceof _R),Kt(this.fs instanceof yR),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(No(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Hde(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:v={},uniforms:w,samplers:P}=e;if((w||P)&&(an.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(w||{})),an.priority>=n){const V=m?m.id:"default",le="mode=".concat(qd(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(qd(this.gl,c)," ")+"isInstanced=".concat(h," isIndexed=").concat(l," ")+"Framebuffer=".concat(V);an.log(n,le)()}return Kt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===u||(f.bindForDraw(r,u,()=>{if(void 0!==m&&(v=Object.assign({},v,{framebuffer:m})),g){const V=function e8(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Kt(!1),0}}(i);g.begin(V)}this._bindTextures(),yl(this.gl,v,()=>{l&&h?this.gl2.drawElementsInstanced(i,r,c,s,u):l&&ri(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,c,s):l?this.gl.drawElements(i,r,c,s):h?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),g&&g.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};an.priority>=2&&function ode(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!ade(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof vs&&(s=s.texture),s instanceof Lf)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&lde(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new _R({handle:r});break;case 35632:i.fs=new yR({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ga(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),an.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),an.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||an.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=sde(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=$4(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=$4(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class V0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new V0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),h=this._getHash(i),f=c.map(le=>this._getHash(le.name)).sort(),g=o.map(le=>this._getHash(le)),m=Object.keys(r).sort(),v=Object.keys(s).sort(),w=[],P=[];for(const le of m)w.push(this._getHash(le)),w.push(this._getHash(r[le]));for(const le of v)P.push(this._getHash(le)),P.push(this._getHash(s[le]));const V="".concat(u,"/").concat(h,"D").concat(w.join("/"),"M").concat(f.join("/"),"I").concat(P.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[V]){const le=function vce(t,e){const{vs:n,fs:i}=e,r=Yle(e.modules||[]);return{gl:t,vs:c4(t,Object.assign({},e,{source:n,type:R0,modules:r})),fs:c4(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:bce(r)}}(this.gl,{vs:n,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[V]=new r8(this.gl,{hash:V,vs:le.vs,fs:le.fs,varyings:o,bufferMode:a}),this._getUniforms[V]=le.getUniforms||(re=>{}),this._useCounts[V]=0}return this._useCounts[V]++,this._programCache[V]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[r++]=a,i[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;i[l]||(n[r++]=a,i[l]=!0)}return n.length=r,n}}const Wde=[255,255,255],$de=1;let qde=0;class s8{constructor(e={}){be(this,"id",void 0),be(this,"color",void 0),be(this,"intensity",void 0),be(this,"type","ambient");const{color:n=Wde}=e,{intensity:i=$de}=e;this.id=e.id||"ambient-".concat(qde++),this.color=n,this.intensity=i}}const Yde=[255,255,255],Xde=1,Kde=[0,0,-1];let Jde=0;class o8{constructor(e={}){be(this,"id",void 0),be(this,"color",void 0),be(this,"intensity",void 0),be(this,"type","directional"),be(this,"direction",void 0),be(this,"shadow",void 0);const{color:n=Yde}=e,{intensity:i=Xde}=e,{direction:r=Kde}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(Jde++),this.color=n,this.intensity=i,this.type="directional",this.direction=new Oo(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class Zde{constructor(e,n={id:"pass"}){be(this,"id",void 0),be(this,"gl",void 0),be(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class cA extends Zde{constructor(...e){super(...e),be(this,"_lastRenderIndex",-1)}render(e){return Lu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&function ehe(t){Lu(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(c),a&&(this._lastRenderIndex=-1);const u=[];for(const h of r){const f=s&&s[h.id];o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const v of m){const w=this._drawLayersInViewport(c,{target:n,moduleParameters:i,viewport:v,view:f,pass:e.pass,layers:e.layers},g);u.push(w)}}return u}_getDrawLayerParams(e,{layers:n,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const l=[],c=a8(this._lastRenderIndex+1),u={layer:n[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<n.length;f++){const g=n[f],m=this._shouldDrawLayer(g,u,r,h),v={shouldDrawLayer:m};m&&(v.layerRenderIndex=c(g,m),v.moduleParameters=this._getModuleParameters(g,o,i,a),v.layerParameters=this.getLayerParameters(g,f,e)),l[f]=v}return l}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:s,viewport:o,view:a},l){const c=function Qde(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||cm(t);return[i.x*s,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;yl(e,{scissorTest:!0,scissor:c},()=>hR(e,h))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Lu(e,{viewport:c});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:v,layerParameters:w}=l[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),v.viewport=o;try{f._drawLayer({moduleParameters:v,uniforms:{layerIndex:m},parameters:w})}catch(P){f.raiseError(P,"drawing ".concat(f," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:cm(this.gl)});if(n)for(const l of n){var a;Object.assign(o,null===(a=l.getModuleParameters)||void 0===a?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),r)}}function a8(t=0,e={}){const n={},i=(r,s)=>{const o=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in n){const u=n[l]=n[l]||a8(e[l],e);c=u(r,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return i}class the extends cA{constructor(e,n){super(e,n),be(this,"shadowMap",void 0),be(this,"depthBuffer",void 0),be(this,"fbo",void 0),this.shadowMap=new eo(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new hm(e,{format:33189,width:1,height:1}),this.fbo=new vs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;yl(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=cm(this.gl),s=i.width*r,o=i.height*r;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const l8="#define SMOOTH_EDGE_RADIUS 0.5",she={name:"geometry",vs:"\n".concat(l8,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(l8,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},ohe=Object.keys(yi).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(yi[t],";")).join(""),ahe=Object.keys(Cc).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Cc[t],";")).join(""),lhe=Object.keys(JE).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(JE[t],";")).join(""),che="".concat(ohe,"\n").concat(ahe,"\n").concat(lhe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function uhe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function uA(t){let n,e={};return i=>{for(const r in i)if(!uhe(i[r],e[r])){n=t(i),e=i;break}return n}}const c8=[0,0,0,0],dhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],u8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],hhe=[0,0,0],d8=[0,0,0],fhe=uA(function mhe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=function phe(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=c8,l=c8,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=h8(t,e,n);return f&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=T0([],l,o),s=i||s,o=Df([],r,s),o=Df([],o,dhe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,n,i),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=T0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:hhe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:u8,project_uCameraPosition:a};if(c){const m=t.getDistanceScales(c);switch(n){case yi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case yi.LNGLAT:case yi.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case yi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function h8(t,e,n=d8){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===yi.LNGLAT_OFFSETS||e===yi.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Cc.WEB_MERCATOR:(e===yi.LNGLAT||e===yi.CARTESIAN)&&(r=[0,0,0],s=!1);break;case Cc.WEB_MERCATOR_AUTO_OFFSET:e===yi.LNGLAT?i=r:e===yi.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Cc.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Cc.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const _he={},bR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},she],vs:che,getUniforms:function yhe(t=_he){return"viewport"in t?function ghe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=yi.DEFAULT,coordinateOrigin:r=d8,autoWrapLongitude:s=!1}){i===yi.DEFAULT&&(i=t.isGeospatial?yi.LNGLAT:yi.CARTESIAN);const o=fhe({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||u8,o}(t):{}}},whe=uA(function Che({viewport:t,center:e}){return new Un(t.viewProjectionMatrix).invert().transform(e)}),xhe=uA(function The({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>function She(t,e){const[n,i,r]=t,s=M0([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Oo(t.center).negate()),l=s.map(u=>a.transform(u)),c=(new Un).ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}),Ehe=[0,0,0,1],Ahe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],wR={name:"shadow",dependencies:[bR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Mhe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Ehe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=whe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=xhe({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new Oo(t.viewport.center).negate());e.project_uCoordinateSystem===yi.LNGLAT&&e.project_uProjectionMode===Cc.WEB_MERCATOR?(o[a]=c,s[a]=r):(o[a]=l.clone().multiplyRight(Ahe),s[a]=c.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},Ihe={color:[255,255,255],intensity:1},f8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Dhe=[0,0,0,200/255];class xR{constructor(e={}){be(this,"id","lighting-effect"),be(this,"props",null),be(this,"shadowColor",Dhe),be(this,"shadow",void 0),be(this,"ambientLight",null),be(this,"directionalLights",[]),be(this,"pointLights",[]),be(this,"shadowPasses",[]),be(this,"shadowMaps",[]),be(this,"dummyShadowMap",null),be(this,"programManager",void 0),be(this,"shadowMatrices",void 0);for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=V0.getDefaultProgramManager(e),wR&&this.programManager.addDefaultModule(wR)),this.dummyShadowMap||(this.dummyShadowMap=new eo(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(wR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Un).lookAt({eye:new Oo(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new the(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new s8(Ihe),this.directionalLights.push(new o8(f8[0]),new o8(f8[1])))}}let Rhe=1,Ohe=1;class p8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Rhe++,a={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=Ohe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const dA=Symbol.for("component"),mm=Symbol.for("asyncPropDefaults"),Bf=Symbol.for("asyncPropOriginal"),Xd=Symbol.for("asyncPropResolved");let ER={};function Lo(t,e,n,i){ui.level>0&&ER[t]&&ER[t].call(null,e,n,i)}function AR(t,e=(()=>!0)){return Array.isArray(t)?g8(t,e,[]):e(t)?[t]:[]}function g8(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?g8(r,e,n):e(r)&&n.push(r)}return n}function Phe({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=n;o<r;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const Wl=t=>"function"==typeof t,Kd=t=>null!==t&&"object"==typeof t,_8=t=>Kd(t)&&t.constructor==={}.constructor,Lhe=t=>t&&"function"==typeof t[Symbol.iterator],Fhe=t=>t&&"function"==typeof t[Symbol.asyncIterator],_m=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ym=t=>typeof Blob<"u"&&t instanceof Blob,Bhe=t=>t&&"object"==typeof t&&t.isBuffer,y8=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Kd(t)&&Wl(t.tee)&&Wl(t.cancel)&&Wl(t.getReader))(t)||(t=>Kd(t)&&Wl(t.read)&&Wl(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function v8(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function SR(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function CR(t){var e,n;let i;return v8(t,"null loader"),v8(SR(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let TR="";const MR={},Ghe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,zhe=/^([-\w.]+\/[-\w.+]+)/;function Whe(t){const e=zhe.exec(t);return e?e[1]:t}function b8(t){const e=Ghe.exec(t);return e?e[1]:""}const $he=/\?.*/;function hA(t){if(_m(t)){const e=IR(t.url||"");return{url:e,type:Whe(t.headers.get("content-type")||"")||b8(e)}}return ym(t)?{url:IR(t.name||""),type:t.type||""}:"string"==typeof t?{url:IR(t),type:b8(t)}:{url:"",type:""}}function IR(t){return t.replace($he,"")}function w8(t){return DR.apply(this,arguments)}function DR(){return DR=D(function*(t){if(_m(t))return t;const e={},n=function qhe(t){return _m(t)?t.headers["content-length"]||-1:ym(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:i,type:r}=hA(t);r&&(e["content-type"]=r);const s=yield function Khe(t){return NR.apply(this,arguments)}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),DR.apply(this,arguments)}function RR(){return RR=D(function*(t){if(!t.ok){const e=yield function Xhe(t){return OR.apply(this,arguments)}(t);throw new Error(e)}}),RR.apply(this,arguments)}function OR(){return OR=D(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),OR.apply(this,arguments)}function NR(){return NR=D(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function Jhe(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),NR.apply(this,arguments)}function x8(t,e){return PR.apply(this,arguments)}function PR(){return PR=D(function*(t,e){if("string"==typeof t){t=function Hhe(t){for(const e in MR)t.startsWith(e)&&(t=t.replace(e,MR[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(TR).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield w8(t)}),PR.apply(this,arguments)}const E8=new E0({id:"loaders.gl"});class Zhe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const A8=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),S8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),C8=(S8&&parseFloat(S8[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Qhe{constructor(){be(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:A8,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),efe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function LR(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const FR=()=>{const t=LR();return t.globalOptions=t.globalOptions||{...C8},t.globalOptions};function tfe(t,e,n,i){return n=n||[],function nfe(t,e){M8(t,null,C8,efe,e);for(const n of e)M8(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function I8(t,e,n){const r={...t.options||{}};return function rfe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Zhe),D8(r,FR()),D8(r,e),r}(e,t,i)}function T8(t,e){const n=FR(),i=t||n;return"function"==typeof i.fetch?i.fetch:Kd(i.fetch)?r=>x8(r,i):null!=e&&e.fetch?e?.fetch:x8}function M8(t,e,n,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Kd(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)E8.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!l){const h=ife(a,r);E8.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function ife(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function D8(t,e){for(const n in e)n in e&&(t[n]=_8(e[n])&&_8(t[n])?{...t[n],...e[n]}:e[n])}function Ic(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const sfe="3.2.13",Dc={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},afe=Dc.global||Dc.self||Dc.window||{},Jd="object"!=typeof process||"[object process]"!==String(process)||process.browser,BR="function"==typeof importScripts,lfe=typeof window<"u"&&typeof window.orientation<"u",R8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);R8&&parseFloat(R8[1]);class kR{}const jR=new Map;function O8(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function N8(t,e=!0,n){const i=n||new Set;if(t)if(P8(t))i.add(t);else if(P8(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)N8(t[r],e,i);return void 0===n?Array.from(i):[]}function P8(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const UR=()=>{};class VR{static isSupported(){return typeof Worker<"u"&&Jd||typeof kR<"u"&&!Jd}constructor(e){be(this,"name",void 0),be(this,"source",void 0),be(this,"url",void 0),be(this,"terminated",!1),be(this,"worker",void 0),be(this,"onMessage",void 0),be(this,"onError",void 0),be(this,"_loadableURL","");const{name:n,source:i,url:r}=e;Ic(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=UR,this.onError=s=>console.log(s),this.worker=Jd?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=UR,this.onError=UR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||N8(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function cfe(t){Ic(t.source&&!t.url||!t.source&&t.url);let e=jR.get(t.source||t.url);return e||(t.url&&(e=function ufe(t){if(!t.startsWith("http"))return t;const e=function dfe(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return O8(e)}(t.url),jR.set(t.url,e)),t.source&&(e=O8(t.source),jR.set(t.source,e))),Ic(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new kR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new kR(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class ffe{constructor(e,n){be(this,"name",void 0),be(this,"workerThread",void 0),be(this,"isRunning",!0),be(this,"result",void 0),be(this,"_resolve",()=>{}),be(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Ic(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ic(this.isRunning),this.isRunning=!1,this._reject(e)}}class pfe{static isSupported(){return VR.isSupported()}constructor(e){be(this,"name","unnamed"),be(this,"source",void 0),be(this,"url",void 0),be(this,"maxConcurrency",1),be(this,"maxMobileConcurrency",1),be(this,"onDebug",()=>{}),be(this,"reuseWorkers",!0),be(this,"props",{}),be(this,"jobQueue",[]),be(this,"idleQueue",[]),be(this,"count",0),be(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,n=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return D(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return D(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new ffe(i.name,n);n.onMessage=s=>i.onMessage(r,s.type,s.payload),n.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new VR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return lfe?this.maxMobileConcurrency:this.maxConcurrency}}const gfe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ku{static isSupported(){return VR.isSupported()}static getWorkerFarm(e={}){return ku._workerFarm=ku._workerFarm||new ku({}),ku._workerFarm.setProps(e),ku._workerFarm}constructor(e){be(this,"props",void 0),be(this,"workerPools",new Map),this.props={...gfe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new pfe({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}be(ku,"_workerFarm",void 0);const mfe="latest";function HR(){return HR=D(function*(t,e,n,i,r){const s=t.id,o=function _fe(t,e={}){const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let s=t.version;"latest"===s&&(s=mfe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(i)}return Ic(r),r}(t,n),l=ku.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const c=yield l.startJob("process-on-worker",bfe.bind(null,r));return c.postMessage("process",{input:e,options:n,context:i}),yield(yield c.result).result}),HR.apply(this,arguments)}function bfe(t,e,n,i){return GR.apply(this,arguments)}function GR(){return GR=D(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield t(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),GR.apply(this,arguments)}function zR(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new fA(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function fA(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(fA=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new fA(t)}function F8(t){return t&&"object"==typeof t&&t.isBuffer}function B8(t){if(F8(t))return function wfe(t){return F8(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function $R(){return $R=D(function*(t){const e=[];var r,n=!1,i=!1;try{for(var o,s=zR(t);n=!(o=yield s.next()).done;n=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function Efe(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),$R.apply(this,arguments)}S(1492);const Sfe=262144,Tfe=262144;function k8(t,e){this.v=t,this.k=e}function pA(t){return new k8(t,0)}function H0(t){var e,n;function i(s,o){try{var a=t[s](o),l=a.value,c=l instanceof k8;Promise.resolve(c?l.v:l).then(function(u){if(c){var h="return"===s?"return":"next";if(!l.k||u.done)return i(h,u);u=t[h](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(s,o){return new Promise(function(a,l){var c={key:s,arg:o,resolve:a,reject:l,next:null};n?n=n.next=c:(e=n=c,i(s,o))})},"function"!=typeof t.return&&(this.return=void 0)}function YR(t){return function(){return new H0(t.apply(this,arguments))}}H0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},H0.prototype.next=function(t){return this._invoke("next",t)},H0.prototype.throw=function(t){return this._invoke("throw",t)},H0.prototype.return=function(t){return this._invoke("return",t)};const Ife=1048576;function XR(){return XR=YR(function*(t,e){const n=e?.chunkSize||Ife;let i=0;for(;i<t.size;){const r=i+n,s=yield pA(t.slice(i,r).arrayBuffer());i=r,yield s}}),XR.apply(this,arguments)}function j8(t,e){return A8?function Rfe(t,e){return KR.apply(this,arguments)}(t,e):function Ofe(t,e){return JR.apply(this,arguments)}(t,e)}function KR(){return KR=YR(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:s,value:o}=yield pA(r);if(s)return;yield B8(o)}}catch{n.releaseLock()}}),KR.apply(this,arguments)}function JR(){return JR=YR(function*(t,e){var r,n=!1,i=!1;try{for(var o,s=zR(t);n=!(o=yield pA(s.next())).done;n=!1){const a=o.value;yield B8(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield pA(s.return()))}finally{if(i)throw r}}}),JR.apply(this,arguments)}const ZR="Cannot convert supplied data type";function QR(){return QR=D(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Pfe(t,e,n){if(e.text&&"string"==typeof t)return t;if(Bhe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(ZR)}(t,e);if(ym(t)&&(t=yield w8(t)),_m(t)){const r=t;return yield function Yhe(t){return RR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(y8(t)&&(t=function Nfe(t,e){if("string"==typeof t)return function*Cfe(t,e){const n=e?.chunkSize||Sfe;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),o=t.slice(i,i+s);i+=s,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*Mfe(t,e={}){const{chunkSize:n=Tfe}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),o=new Uint8Array(t,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(t,e);if(ym(t))return function Dfe(t,e){return XR.apply(this,arguments)}(t,e);if(y8(t))return j8(t,e);if(_m(t))return j8(t.body,e);throw new Error("makeIterator")}(t,n)),Lhe(t)||Fhe(t))return function Afe(t){return $R.apply(this,arguments)}(t);throw new Error(ZR)}),QR.apply(this,arguments)}const Ufe=new E0({id:"loaders.gl"}),U8=()=>{const t=LR();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function V8(t){const e=U8();t=Array.isArray(t)?t:[t];for(const n of t){const i=CR(n);e.find(r=>i===r)||e.unshift(i)}}const Hfe=/\.([^.]+)$/;function nO(){return nO=D(function*(t,e=[],n,i){if(!G8(t))return null;let r=H8(t,e,{...n,nothrow:!0},i);if(r)return r;if(ym(t)&&(r=H8(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(z8(t));return r}),nO.apply(this,arguments)}function H8(t,e=[],n,i){if(!G8(t))return null;if(e&&!Array.isArray(e))return CR(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function Vfe(){return U8()}()),function Wfe(t){for(const e of t)CR(e)}(r);const s=function zfe(t,e,n,i){const{url:r,type:s}=hA(t),o=r||i?.url;let a=null,l="";var c;return null!=n&&n.mimeType&&(a=iO(e,n?.mimeType),l="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function $fe(t,e){const n=e&&Hfe.exec(e),i=n&&n[1];return i?function qfe(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,o),l=l||(a?"matched url ".concat(o):""),a=a||iO(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||function Yfe(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(Xfe(e,n))return n}else if(ArrayBuffer.isView(e)){if(W8(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&W8(e,0,n))return n;return null}(e,t),l=l||(a?"matched initial data ".concat($8(t)):""),a=a||iO(e,n?.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l&&Ufe.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,".")),a}(t,r,n,i);if(!(s||null!=n&&n.nothrow))throw new Error(z8(t));return s}function G8(t){return!(t instanceof Response&&204===t.status)}function z8(t){const{url:e,type:n}=hA(t);let i="No valid loader found (";i+=e?"".concat(function jfe(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?$8(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function iO(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Xfe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function W8(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function Kfe(t,e,n,i){if(i instanceof ArrayBuffer)return function xfe(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===rO(t,e,i.length);default:return!1}}(t,e,n,r))}function $8(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?rO(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?rO(t,0,e):""}function rO(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function gA(t,e,n,i){return sO.apply(this,arguments)}function sO(){return sO=D(function*(t,e,n,i){Ic(!i||"object"==typeof i),e&&!Array.isArray(e)&&!SR(e)&&(i=void 0,n=e,e=void 0),t=yield t,n=n||{};const{url:r}=hA(t),o=function kfe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function Gfe(t){return nO.apply(this,arguments)}(t,o,n);return a?(i=function Bfe(t,e,n=null){if(n)return n;const i={fetch:T8(e,t),...t};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:gA,loaders:o},n=tfe(n,a,o,r),i),yield function Jfe(t,e,n,i){return oO.apply(this,arguments)}(a,t,n,i)):null}),sO.apply(this,arguments)}function oO(){return oO=D(function*(t,e,n,i){if(function ofe(t,e=sfe){Ic(t,"no worker provided")}(t),_m(e)){const r=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=yield function Lfe(t,e,n){return QR.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function yfe(t,e){return!(!ku.isSupported()||!(Jd||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function vfe(t,e,n,i,r){return HR.apply(this,arguments)}(t,e,n,i,gA);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw Ic(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),oO.apply(this,arguments)}function G0(t,e,n,i){return aO.apply(this,arguments)}function aO(){return aO=D(function*(t,e,n,i){!Array.isArray(e)&&!SR(e)&&(n=e,e=void 0);const r=T8(n);let s=t;return"string"==typeof t&&(s=yield r(t)),ym(t)&&(s=yield r(t)),yield gA(s,e,n)}),aO.apply(this,arguments)}class Zfe{constructor(e,n,i){be(this,"id",void 0),be(this,"context",void 0),be(this,"isLoaded",void 0),be(this,"persistent",void 0),be(this,"_loadCount",0),be(this,"_subscribers",new Set),be(this,"_data",void 0),be(this,"_loader",void 0),be(this,"_error",void 0),be(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=G0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Qfe{constructor({gl:e,protocol:n}){be(this,"protocol",void 0),be(this,"_context",void 0),be(this,"_resources",void 0),be(this,"_consumers",void 0),be(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new Zfe(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),i&&(o[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const epe=[bR],tpe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function npe(t){const e=V0.getDefaultProgramManager(t);for(const n of epe)e.addDefaultModule(n);for(const n of tpe)e.addShaderHook(n);return e}class spe{constructor(e,{deck:n,stats:i,viewport:r,timeline:s}={}){be(this,"layers",void 0),be(this,"context",void 0),be(this,"resourceManager",void 0),be(this,"_lastRenderedLayers",[]),be(this,"_needsRedraw",!1),be(this,"_needsUpdate",!1),be(this,"_nextLayers",null),be(this,"_debug",!1),be(this,"activateViewport",o=>{Lo("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new Qfe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&npe(e),stats:i||new sR({id:"deck.gl"}),viewport:r||new Hd({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new p8,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Lo("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=AR(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const o of e)i[o.id]?ui.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];null===s&&ui.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class ope{constructor(e){be(this,"width",void 0),be(this,"height",void 0),be(this,"views",void 0),be(this,"viewState",void 0),be(this,"controllers",void 0),be(this,"timeline",void 0),be(this,"_viewports",void 0),be(this,"_viewportMap",void 0),be(this,"_isUpdating",void 0),be(this,"_needsRedraw",void 0),be(this,"_needsUpdate",void 0),be(this,"_eventManager",void 0),be(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=AR(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!om(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ui.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(i=!0),(i||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),this._viewports.unshift(a)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}const cpe=Math.PI/180;function q8(t){return 512/4003e4/Math.cos(t*cpe)}class Zd extends Hd{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:c=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:g=!1}=e;let{width:m,height:v,altitude:w=1.5}=e;const P=Math.pow(2,r);m=m||1,v=v||1;let V,le=null;u?(w=u[5]/2,V=KE(w)):(e.fovy?(V=e.fovy,w=BD(V)):V=KE(w),le=function kH(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=KE(gle)}=t;void 0!==i&&(u=KE(i));const h=u*_l,f=r*_l,g=BD(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/n);const v=h*(.5+(s?s[1]:0)/n),w=Math.sin(v)*m/Math.sin(ND(Math.PI/2-f-v,.01,Math.PI-.01)),P=Math.sin(f)*w+m;return{fov:h,aspect:e/n,focalDistance:g,near:l,far:Math.min(P*c,10*m)}}({width:m,height:v,pitch:s,fovy:V,nearZMultiplier:a,farZMultiplier:l}));let re=function yle(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];GE(a,a,[0,0,-r]),MH(a,a,-n*_l),IH(a,a,i*_l);const l=s/e;return DD(a,a,[l,l,l]),o&&GE(a,a,function fae(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:v,pitch:s,bearing:o,scale:P,altitude:w});f&&(re=(new Un).translate([512*f,0,0]).multiplyLeft(re)),super({...e,width:m,height:v,viewMatrix:re,longitude:i,latitude:n,zoom:r,...le,fovy:V,focalDistance:w}),be(this,"longitude",void 0),be(this,"latitude",void 0),be(this,"pitch",void 0),be(this,"bearing",void 0),be(this,"altitude",void 0),be(this,"fovy",void 0),be(this,"orthographic",void 0),be(this,"_subViewports",void 0),be(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=w,this.fovy=V,this.orthographic=c,this._subViewports=h?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new Zd({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*q8(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/q8(i)]}addMetersToLngLat(e,n){return BH(e,n)}panByPosition(e,n){const i=M0(n,this.pixelUnprojectionMatrix),s=zE([],this.projectFlat(e),DH([],i)),o=zE([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=function ble(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},o=r([0,i],s),a=r([n,i],s);let l,c;return(t.fovy?.5*t.fovy*VH:Math.atan(.5/t.altitude))>(90-t.pitch)*VH-.01?(l=HH(t,0,e),c=HH(t,n,e)):(l=r([0,0],s),c=r([n,0],s)),[o,a,c,l]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=UH({width:i,height:r,bounds:e,...n});return new Zd({width:i,height:r,longitude:s,latitude:o,zoom:a})}}be(Zd,"displayName","WebMercatorViewport");class dpe extends KH{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:v,startZoomLngLat:w,startRotatePos:P,startBearing:V,startPitch:le,startZoom:re,normalize:Ie=!0}=e;Qs(Number.isFinite(s)),Qs(Number.isFinite(r)),Qs(Number.isFinite(o)),super({width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:Ie,position:u},{startPanLngLat:v,startZoomLngLat:w,startRotatePos:P,startBearing:V,startPitch:le,startZoom:re}),be(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+n,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=r+Math.log2(i);l=Pr(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=Pr(r,i,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Pr(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,function wle(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=t;(r<-180||r>180)&&(r=LH(r+180,360)-180),(a<-180||a>180)&&(a=LH(a+180,360)-180);const l=PD(n/512);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=sm([0,c])[1];if(s<u)s=u;else{const h=sm([0,512-c])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),h=s/c;let f=0;o>0?Math.abs(u-l)>5&&(f=o/(l-u)*1.2):o<0&&l>5&&(f=1-a/l),f=Pr(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps();let w=i;return f>0?w=i+f*(m-i):f<0&&(w=i-f*(g-i)),{pitch:w,bearing:r+180*h}}}class hpe extends VD{constructor(...e){super(...e),be(this,"ControllerState",dpe),be(this,"transition",{transitionDuration:300,transitionInterpolator:new ZE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),be(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class X8 extends jD{get ViewportType(){return Zd}get ControllerType(){return hpe}}be(X8,"displayName","MapView");class fpe extends cA{constructor(e,n){super(e,n),be(this,"maskMap",void 0),be(this,"fbo",void 0);const{mapSize:i=2048}=n;this.maskMap=new eo(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new vs(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,yl(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class _pe{constructor(){be(this,"id","mask-effect"),be(this,"props",null),be(this,"useInPicking",!0),be(this,"dummyMaskMap",void 0),be(this,"channels",[]),be(this,"masks",null),be(this,"maskPass",void 0),be(this,"maskMap",void 0),be(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new eo(e,{width:1,height:1}));const a=n.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new fpe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),c=r[0],u=!this.lastViewport||!this.lastViewport.equals(c);for(const h in l)this._renderChannel(l[h],{layerFilter:i,onViewportActive:s,views:o,viewport:c,viewportChanged:u})}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const l=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((c,u)=>c!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(l||o)&&(this.lastViewport=s,e.bounds=function ppe({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!n)return i;const r=function mpe(t){const e_x=t[2]-t[0],e_y=t[3]-t[1],n_x=t[0]+.5*e_x,n_y=t[1]+.5*e_y;return[n_x-e_x,n_y-e_y,n_x+e_x,n_y+e_y]}(i);return n[2]-n[0]<r[2]-r[0]||n[3]-n[1]<r[3]-r[1]||(n[0]=Math.max(n[0],r[0]),n[1]=Math.max(n[1],r[1]),n[2]=Math.min(n[2],r[2]),n[3]=Math.min(n[3],r[3])),n}({layers:e.layers,viewport:s}),l||!tm(e.bounds,a.bounds))){const{maskPass:c,maskMap:u}=this,h=function gpe({bounds:t,viewport:e,width:n,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,i-=2,e instanceof Zd){const{longitude:a,latitude:l,zoom:c}=UH({width:n,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new Zd({longitude:a,latitude:l,zoom:c,x:1,y:1,width:n,height:i})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),i/(t[3]-t[1]));return new HD({x:1,y:1}).makeViewport({width:n,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],c.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let i=0;for(const r of e){const{id:s}=r.root;let o=n[s];if(!o){if(++i>4){ui.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},n[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in n))&&(this.channels[r]=null)}for(const r in n){const s=n[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const ype=new xR;class vpe{constructor(){be(this,"effects",void 0),be(this,"_internalEffects",void 0),be(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!om(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new _pe),e.some(n=>n instanceof xR)||this._internalEffects.push(ype)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class bpe extends cA{shouldDrawLayer(e){return"draw"===e.props.operation}}const K8={blendFunc:[1,0,32771,0],blendEquation:32774};class J8 extends cA{constructor(...e){super(...e),be(this,"pickZ",void 0),be(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m}){const v=this.gl;this.pickZ=m;const w=m?null:{byLayer:new Map,byAlpha:[]};this._colors=w;const P=yl(v,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...K8,blend:!m},()=>super.render({target:o,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(le=>le.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:w&&xpe.bind(null,w),stats:P}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,K8),r.blend=!0,r.blendColor=function wpe(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,o=i.get(e);return o?(o.viewports.push(n),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},i.set(e,o),r[s]=o):(ui.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function xpe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Ape{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new bpe(e),this.pickLayersPass=new J8(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||vs.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=n.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,Lo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let i=null;for(const r of e)r.preRender(this.gl,n),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new vs(this.gl),new vs(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=n.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Spe={pickedColor:null,pickedObjectIndex:-1};function Cpe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=r*r,h=-1,f=0;for(let g=0;g<c;g++){const m=g+a-i,v=m*m;if(v>u)f+=4*l;else for(let w=0;w<l;w++){if(t[f+3]-1>=0){const V=w+o-n,le=V*V+v;le<=u&&(u=le,h=f)}f+=4}}if(h>=0){const g=t.slice(h,h+4),m=e(g);if(m){const v=Math.floor(h/4/l),w=h/4-v*l;return{...m,pickedColor:g,pickedX:o+w,pickedY:a+v}}ui.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Spe}function Z8({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function Ipe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),o){const l=[i-o.x,r-o.y];void 0!==s&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Mpe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===i){const f=n.layerId,g=o?o.props.id:null;if(g!==f||a!==n.index){if(g!==f){const m=r.find(v=>v.props.id===f);m&&l.unshift(m)}n.layerId=g,n.index=a,n.info=null}}const c=Z8(t),u=new Map;return u.set(null,c),l.forEach(h=>{let f={...c};h===o&&(f.color=s,f.index=a,f.picked=!0),f=Q8({layer:h,info:f,mode:i});const g=f.layer;h===o&&"hover"===i&&(n.info=f),u.set(g.id,f),"hover"===i&&g.updateAutoHighlight(f)}),u}function Q8({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class Dpe{constructor(e){be(this,"gl",void 0),be(this,"pickingFBO",void 0),be(this,"depthFBO",void 0),be(this,"pickLayersPass",void 0),be(this,"layerFilter",void 0),be(this,"lastPickedInfo",void 0),be(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new J8(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?i.find(f=>f.id===o):null,c=a&&r.find(f=>f.id===a)||r[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,x:e,y:n,viewport:c,coordinate:u,layer:l}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new vs(i),vs.isSupported(i,{colorBufferFloat:!0}))){const r=new vs(i);r.attach({36064:new eo(i,{format:ri(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>i.isPickable()&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=cm(this.gl);if(!f)return{result:[],emptyInfo:Z8({viewports:i,x:r,y:s,pixelRatio:g})};this._resizeBuffer();const m=nR(this.gl,[r,s],!0),v=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],w=Math.round(o*g),{width:P,height:V}=this.pickingFBO,le=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:w,deviceWidth:P,deviceHeight:V}),re={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Ie;const Ne=[],it=new Set;for(let ut=0;ut<a;ut++){let qe,dt;qe=le?Cpe({...this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:le,cullRect:re,effects:h,pass:"picking:".concat(l)}),deviceX:v[0],deviceY:v[1],deviceRadius:w,deviceRect:le}):{pickedColor:null,pickedObjectIndex:-1},qe.pickedLayer&&c&&this.depthFBO&&(dt=this._drawAndSample({layers:[qe.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:qe.pickedX,y:qe.pickedY,width:1,height:1},cullRect:re,effects:h,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),qe.pickedLayer&&ut+1<a&&(it.add(qe.pickedLayer),qe.pickedLayer.disablePickingIndex(qe.pickedObjectIndex)),Ie=Mpe({pickInfo:qe,lastPickedInfo:this.lastPickedInfo,mode:l,layers:f,viewports:i,x:r,y:s,z:dt,pixelRatio:g});for(const yt of Ie.values())yt.layer&&Ne.push(yt);if(!qe.pickedColor)break}for(const ut of it)ut.restorePickingColors();return{result:Ne,emptyInfo:Ie.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=cm(this.gl),m=nR(this.gl,[r,s],!0),v=m.x,w=m.y+m.height,P=nR(this.gl,[r+o,s+a],!0),le=P.y,Ne=function Tpe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):ui.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:{x:v,y:le,width:P.x+P.width-v,height:w-le},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(l)})),it=new Map,ut=Number.isFinite(c);for(let qe=0;qe<Ne.length&&!(ut&&c&&it.size>=c);qe++){const dt=Ne[qe];let yt={color:dt.pickedColor,layer:null,index:dt.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:g};yt=Q8({layer:dt.pickedLayer,info:yt,mode:l}),it.has(yt.object)||it.set(yt.object,yt)}return Array.from(it.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c}),{x:f,y:g,width:m,height:v}=s,w=new(c?Float32Array:Uint8Array)(m*v*4);return sA(u,{sourceX:f,sourceY:g,sourceWidth:m,sourceHeight:v,target:w}),{pickedColors:w,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,n-i),l=Math.min(r,e+i+1)-o,c=Math.min(s,n+i+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const Rpe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Ope{constructor(e){be(this,"el",null),be(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Rpe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function eG(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Ppe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),tG=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Lpe}=(tG&&parseFloat(tG[1]),globalThis),lO=typeof Image<"u",cO=typeof ImageBitmap<"u",uO=!!Ppe||!!Lpe;function nG(t){const e=function rG(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const kpe=/^data:image\/svg\+xml/,jpe=/\.svg((\?|#).*)?$/;function dO(t){return t&&(kpe.test(t)||jpe.test(t))}function sG(t,e){if(dO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function oG(t,e,n){return hO.apply(this,arguments)}function hO(){return hO=D(function*(t,e,n){const i=function Upe(t,e){if(dO(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return sG(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function Vpe(t,e){return fO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),hO.apply(this,arguments)}function fO(){return fO=D(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),fO.apply(this,arguments)}const Hpe={};let aG=!0;function pO(){return pO=D(function*(t,e,n){let i;i=dO(n)?yield oG(t,e,n):sG(t,n);const r=e&&e.imagebitmap;return yield function zpe(t){return gO.apply(this,arguments)}(i,r)}),pO.apply(this,arguments)}function gO(){return gO=D(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Wpe(t){for(const e in t||Hpe)return!1;return!0}(e)||!aG)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),aG=!1}return yield createImageBitmap(t)}),gO.apply(this,arguments)}const Oc=!1,z0=!0;function lG(t){const e=W0(t);return function Zpe(t){const e=W0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Oc)?{mimeType:"image/png",width:e.getUint32(16,Oc),height:e.getUint32(20,Oc)}:null}(e)||function tge(t){const e=W0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Oc)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function nge(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Oc);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Oc),width:e.getUint16(s+7,Oc)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Oc)}return null}(e)||function Qpe(t){const e=W0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Oc)?{mimeType:"image/gif",width:e.getUint16(6,z0),height:e.getUint16(8,z0)}:null}(e)||function ege(t){const e=W0(t);return e.byteLength>=14&&16973===e.getUint16(0,Oc)&&e.getUint32(2,z0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,z0),height:e.getUint32(22,z0)}:null}(e)||function Jpe(t){const n=function $pe(t){return function Kpe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function Xpe(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function qpe(t){switch(function Ype(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function W0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function mO(){return mO=D(function*(t,e){const{mimeType:n}=lG(t)||{},i=globalThis._parseImageNode;return eG(i),yield i(t,n)}),mO.apply(this,arguments)}function _O(){return _O=D(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function sge(t){switch(t){case"auto":case"data":return function Bpe(){if(cO)return"imagebitmap";if(lO)return"image";if(uO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Fpe(t){switch(t){case"auto":return cO||lO||uO;case"imagebitmap":return cO;case"image":return lO;case"data":return uO;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function Gpe(t,e,n){return pO.apply(this,arguments)}(t,e,s);break;case"image":a=yield oG(t,e,s);break;case"data":a=yield function ige(t,e){return mO.apply(this,arguments)}(t,e);break;default:eG(!1)}return"data"===r&&(a=function iG(t){switch(nG(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),_O.apply(this,arguments)}const cG={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function rge(t,e,n){return _O.apply(this,arguments)},tests:[t=>!!lG(new DataView(t))],options:{image:{type:"auto",decode:!0}}},age={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function oge(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},$0="8.8.27",mA=globalThis.deck&&globalThis.deck.VERSION;if(mA&&mA!==$0)throw new Error("deck.gl - multiple versions detected: ".concat(mA," vs ").concat($0));mA||(ui.log(1,"deck.gl ".concat($0))(),globalThis.deck={...globalThis.deck,VERSION:$0,version:$0,log:ui,_registerLoggers:function Nhe(t){ER=t}},V8([age,[cG,{imagebitmap:{premultiplyAlpha:"none"}}]]));const lge=globalThis.deck,_A=globalThis;function uG(t){if(!t&&!Ac())return"Node";if(dH(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":_A.chrome?"Chrome":_A.safari?"Safari":_A.mozInnerScreenX?"Firefox":"Unknown"}class yA extends Fu{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=ri(e),r=H4(e,"TIMER_QUERY");let s=i||r;for(const o of n)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:Kt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return yA.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const dG=Ac()&&typeof document<"u";let yge=0;class vge{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(w=>S4(w)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=Pf.get("animation-loop-".concat(yge++))}=e;let{useDevicePixels:v=!0}=e;"useDevicePixelRatio"in e&&(an.deprecated("useDevicePixelRatio","useDevicePixels")(),v=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Kt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=yA.isSupported(this.gl,["timers"])?new yA(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return D(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return an.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=dG?new Promise((e,n)=>{dG&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function _ge(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function mge(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?rR(this.props.gl,e):this.onCreateContext(e),!iA(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function hue(t){Lu(t,tR)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function _ue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function fue(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function xue(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(an.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),l=Math.floor(r*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(an.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*o),t.canvas.height=Math.floor(r*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new vs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var vA=S(4511);const bge={mousedown:1,mousemove:2,mouseup:4};(function xge(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function wge(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(vA.PointerEventInput),function Ege(t){t.prototype.handler=function(n){let i=bge[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(vA.MouseInput);const Age=vA.Manager,Nc=vA;class bA{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const Sge=Nc?[[Nc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Nc.Rotate,{enable:!1}],[Nc.Pinch,{enable:!1}],[Nc.Swipe,{enable:!1}],[Nc.Pan,{threshold:0,enable:!1}],[Nc.Press,{enable:!1}],[Nc.Tap,{event:"doubletap",taps:2,enable:!1}],[Nc.Tap,{event:"anytap",enable:!1}],[Nc.Tap,{enable:!1}]]:null,pG={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Cge={doubletap:["tap"]},Tge={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},vO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Mge={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},gG={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Ige=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",vm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let bO=!1;try{vm.addEventListener("test",null,{get passive(){return bO=!0,!0}}),vm.removeEventListener("test",null)}catch{bO=!1}const Dge=-1!==Ige.indexOf("firefox"),{WHEEL_EVENTS:Rge}=vO,_G=4.000244140625;class Pge extends bA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;vm.WheelEvent&&(Dge&&r.deltaMode===vm.WheelEvent.DOM_DELTA_PIXEL&&(s/=vm.devicePixelRatio),r.deltaMode===vm.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%_G==0&&(s=Math.floor(s/_G)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Rge),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!bO&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:Lge}=vO,yG="pointermove",vG="pointerover",bG="pointerout",wG="pointerenter",xG="pointerleave";class Fge extends bA{constructor(e,n,i){super(e,n,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Lge),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===yG&&(this.enableMoveEvent=n),e===vG&&(this.enableOverEvent=n),e===bG&&(this.enableOutEvent=n),e===wG&&(this.enableEnterEvent=n),e===xG&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(vG,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(bG,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(wG,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(xG,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(yG,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Bge}=vO,EG="keydown";class kge extends bA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:EG,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Bge),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===EG&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const SG="contextmenu";class jge extends bA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:SG,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===SG&&(this.options.enable=n)}}const Uge={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Kge(t){const e=Uge[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&n),o=!!(4&n),a=!!(2&n)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function Jge(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const EO={srcElement:"root",priority:0};class Zge{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=EO;"string"==typeof i||i&&i.addEventListener?l={...EO,srcElement:i}:i&&(l={...EO,...i});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=c.length-1;for(;h>=0&&!(c[h].priority>=u.priority);)h--;c.splice(h+1,0,u)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===n){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:u,once:h}=i[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Kge(e),...Jge(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Qge={events:null,recognizers:null,recognizerOptions:{},Manager:Age,touchAction:"none",tabIndex:0};class eme{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:s}=r,o=Tge[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Qge,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||Sge}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(pG).forEach(r=>{const s=this.manager.get(r);s&&pG[r].forEach(o=>{s.recognizeWith(o)})});for(const r in n.recognizerOptions){const s=this.manager.get(r);if(s){const o=n.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new Pge(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Fge(e,this._onOtherEvent,{enable:!1}),this.keyInput=new kge(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new jge(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const s=Cge[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);n?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if("string"!=typeof e){i=n;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,l=gG[e]||e;let c=a.get(l);c||(c=new Zge(this),a.set(l,c),c.recognizerName=Mge[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(gG[e]||e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function kf(){}const CG={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:kf,onResize:kf,onViewStateChange:kf,onInteractionStateChange:kf,onBeforeRender:kf,onAfterRender:kf,onLoad:kf,onError:t=>ui.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class AO{constructor(e){be(this,"props",void 0),be(this,"width",0),be(this,"height",0),be(this,"userData",{}),be(this,"canvas",null),be(this,"viewManager",null),be(this,"layerManager",null),be(this,"effectManager",null),be(this,"deckRenderer",null),be(this,"deckPicker",null),be(this,"eventManager",null),be(this,"tooltip",null),be(this,"metrics",void 0),be(this,"animationLoop",void 0),be(this,"stats",void 0),be(this,"viewState",void 0),be(this,"cursorState",void 0),be(this,"_needsRedraw",void 0),be(this,"_pickRequest",void 0),be(this,"_lastPointerDownInfo",null),be(this,"_metricsCounter",void 0),be(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),be(this,"_onEvent",n=>{const i=qH[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[i.handler]||a.props[i.handler]),c=this.props[i.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),be(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...CG,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&ui.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===uG()&&ui.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new sR({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&A0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,o,a,l;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ui.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ui.removed("onLayerClick","onClick")(),e.initialViewState&&!om(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return Qs(this.viewManager),this.viewManager.views}getViewports(e){return Qs(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,i){Qs(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),Qs(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;n===this.width&&i===this.height||(this.width=n,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:n,height:i}),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new vge({width:n,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:h=>S4({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new X8({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var n;s=a,o=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,rR(e,{enable:!0,copyState:!0})),this.tooltip=new Ope(this.canvas),Lu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new p8;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new eme(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in qH)this.eventManager.on(r,this._onEvent);this.viewManager=new ope({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new spe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new vpe,this.deckRenderer=new Ape(e),this.deckPicker=new Dpe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;Lu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ui.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=Pf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}be(AO,"defaultProps",CG),be(AO,"VERSION",lge.VERSION);var jf=S(6887);function ju(t={}){const{connector:e=(()=>new Jt),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=l=void 0,u=h=!1},m=()=>{const v=o;g(),v?.unsubscribe()};return dn((v,w)=>{c++,!h&&!u&&f();const P=l=l??e();w.add(()=>{c--,0===c&&!h&&!u&&(a=SO(m,r))}),P.subscribe(w),!o&&c>0&&(o=new Lr({next:V=>P.next(V),error:V=>{h=!0,f(),a=SO(g,n,V),P.error(V)},complete:()=>{u=!0,f(),a=SO(g,i),P.complete()}}),ms(v).subscribe(o))})(s)}}function SO(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Lr({next:()=>{i.unsubscribe(),t()}});return ms(e(...n)).subscribe(i)}class CO{constructor(e,n){be(this,"opts",void 0),be(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=n.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function xA(t){return t.stride||t.size*t.bytesPerElement}function TG(t,e){e.offset&&ui.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=xA(t),s=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}class ime{constructor(e,n,i){be(this,"gl",void 0),be(this,"id",void 0),be(this,"size",void 0),be(this,"settings",void 0),be(this,"value",void 0),be(this,"doublePrecision",void 0),be(this,"_buffer",void 0),be(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=5130===r;let a,{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&n.isIndexed?e&&gR(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let l=function tme(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===n.fp64&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Yi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*xA(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),A0.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function nme(t,e){const n=TG(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new CO(this,s.high),i["".concat(e,"64Low")]=r?new CO(this,s.low):new Float32Array(this.size),i}if(n){const i=TG(this.getAccessor(),n);return{[e]:new CO(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<r;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Yi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),n.constant&&this._areValuesEqual(s,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=xA(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=xA(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=MD(s,r));const l=s.byteLength+a+2*r.stride;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?MD(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=A0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&r&&o.subData({data:r instanceof Float64Array?MD(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&ui.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e)return n[i]=r[0],n;switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)n[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}const MG=[],IG=[];function EA(t,e=0,n=1/0){let i=MG;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(IG.length=t.length,i=IG):i=MG,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function DG(t){return t&&t[Symbol.asyncIterator]}const sme=[],AA=[[0,1/0]];function TO(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=e.length,l=(t.end||n.length)-i;if(a>l)return void n.set(e.subarray(0,l),i);if(n.set(e,i),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let h=0;h<r;h++)n[i+c]=u[h]||0,c++}}const lme={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function RG(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...lme[n],...e,...t,type:n}}function OG(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function NG(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function PG(t){t.push(t.shift())}function MO(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,o=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function LG({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=r&&c,h=MO(n,e),f=n.isConstant;if(!u&&i>=h)return;const g=f?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!f){const P=s;s=(V,le)=>n.normalizeConstant(P(V,le))}const m=f?(P,V)=>s(g,V):(P,V)=>s(g.subarray(P,P+a),V),v=t.getData({length:i}),w=new Float32Array(h);(function ame({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return TO({source:t,target:e,size:n,getData:i}),e;let o=0,a=0;const l=i&&((u,h)=>i(u+a,h)),c=Math.min(r.length,s.length);for(let u=1;u<c;u++){const h=r[u]*n,f=s[u]*n;TO({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:l}),o=h,a=f}a<e.length&&TO({source:[],target:e,start:a,size:n,getData:l})})({source:v,target:w,sourceStartIndices:r,targetStartIndices:c,size:a,getData:m}),t.byteLength<w.byteLength+l&&t.reallocate(w.byteLength+l),t.subData({data:w,offset:l})}class IO extends ime{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:AA}),be(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return RG(Array.isArray(n)?e[n.find(s=>e[s])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function ome(t,e){if(t===AA||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const o=t[s];o[1]<e[0]?(n.push(o),r=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=AA}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=sme}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==AA),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(r,this,{data:n,startRow:c,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return Qs(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function rme(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=i?i/a:n,c=r?r/a:0,u=Math.floor((t.length-c)/l);return(h,{index:f,target:g})=>{if(!s){const P=f*l+c;for(let V=0;V<n;V++)g[V]=t[P+V];return g}const m=s[f],v=s[f+1]||u;let w;if(o){w=new Array(v-m);for(let P=m;P<v;P++){const V=P*l+c;g=new Array(n);for(let le=0;le<n;le++)g[le]=t[V+le];w[P-m]=g}}else if(l===n)w=t.subarray(m*n+c,v*n+c);else{w=new t.constructor((v-m)*n);let P=0;for(let V=m;V<v;V++){const le=V*l+c;for(let re=0;re<n;re++)w[P++]=t[le+re]}}return w}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=l.binaryAccessor||("function"==typeof f?f:s[f]);Qs("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let v=e.getVertexOffset(i);const{iterable:w,objectInfo:P}=EA(n,i,r);for(const V of w){P.index++;let le=m(V,P);if(g&&(le=g.call(this,le)),h){const re=(P.index<h.length-1?h[P.index+1]:o)-h[P.index];if(le&&Array.isArray(le[0])){let Ie=v;for(const Ne of le)e._normalizeValue(Ne,c,Ie),Ie+=u}else le&&le.length>u?c.set(le,v):(e._normalizeValue(le,P.target,0),Phe({target:c,source:P.target,start:v,count:re}));v+=re*u}else e._normalizeValue(le,c,v),v+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const FG="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ume="#version 300 es\n".concat(FG);function BG(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,s]=n;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function kG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?ume:e>300?"#version ".concat(e,"\n").concat(FG):"void main() {gl_FragColor = vec4(0);}";const s=function fme(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ua(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class jG extends Fu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return ri(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,um(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,an.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Yi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class pme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Yi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Kt(ri(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new jG(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];n[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],Kt(i[s]instanceof Yi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Yi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function UG(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const gme={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},SA="transform_uSize_",VG="transform_position";const Eme={10241:9728,10240:9728,10242:33071,10243:33071};class Sme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function yme(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let s,o;n&&(({width:s,height:o}=i),r["".concat(SA).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(SA).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=sA(n);if(!e)return i;const r=i.constructor,s=function hme(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ua(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof eo)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Yi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new vs(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(Eme)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function zue(t,e){Kt(t instanceof eo||t instanceof Hue||t instanceof Gue);const n=t.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t;return new n(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function _me(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||i){const h=c.split("\n"),f=h.slice();if(h.forEach((g,m,v)=>{if(o>0){const w=function xme(t,e){const n={},i=function vme(t){return BG(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=function bme(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(SA).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),u=function dme(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ua(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,";\n");return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:n}}return null}(g,n);if(w){const{updatedLine:P,inject:V}=w;f[m]=P,u=JD([u,V]),Object.assign(l,w.samplerTextureMap),o--}}i&&!a&&(a=function wme(t,e){const n=BG(t,["varying","out"]);return n&&n.name===e?n.type:null}(g,i))}),i){Kt(r);const g="".concat(SA).concat(i),m="uniform vec2 ".concat(g,";\n"),v="     vec2 ".concat(VG," = transform_getPos(").concat(g,");\n     gl_Position = vec4(").concat(VG,", 0, 1.);\n");u=JD([u,{"vs:#decl":m,"vs:#main-start":v}])}c=f.join("\n")}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=JD([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:e._fs||kG({version:UG(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[gme].concat(e.modules||[]):e.modules,uniforms:s,inject:c}}}let CA=null;class Ga extends Fu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ri(e)||"Chrome"===uG()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ga(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ga.MAX_ATTRIBUTES=Ga.MAX_ATTRIBUTES||e.getParameter(34921),Ga.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ga._setConstantFloatArray(e,n,i);break;case Int32Array:Ga._setConstantIntArray(e,n,i);break;case Uint32Array:Ga._setConstantUintArray(e,n,i);break;default:Kt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ga.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Kt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),c?(Kt(ri(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Ga.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Yi(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function Tme(t,e){const n=function Cme(t){return(!CA||CA.byteLength<t)&&(CA=new ArrayBuffer(t)),CA}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function Mme(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let l=i;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Kt(!1)}}static _setConstantIntArray(e,n,i){switch(Kt(ri(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Kt(!1)}}static _setConstantUintArray(e,n,i){switch(Kt(ri(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Kt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Kt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Rme=/^(.+)__LOCATION_([0-9]+)$/,Ome=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Nme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ga(e),I4(this,"VertexArray","v6.0",Ome),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Yi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Yi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Yi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,an.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=ma.resolve(l.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return Kt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Rme.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Yi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Yi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Yi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Ga.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ga.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Yi){const a=i;if(o){const l=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return an.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function q0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function Pme(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=q0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function HG(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let c,u,h,s="NOT PROVIDED",o=1,a=0,l=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),e instanceof Yi){const f=e,{data:g,changed:m}=f.getDebugData();let v;return u=m?"*":"",h=g,l=f.byteLength,a=l/g.BYTES_PER_ELEMENT/o,n?v="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(qd(r,s),")"):(c=!0,v="".concat(l," bytes")),{[i]:"".concat(u).concat(q0(h,{size:o,isInteger:c})),"Format ":v}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:"".concat(q0(h,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Fme(t,e){const{type:n,size:i}=e,r=n8(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function GG(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Kt(n);const o=".*Matrix",l={},c=Object.keys(n._uniformSetters).sort();let u=0;for(const g of c)!g.match(".*_.*")&&!g.match(o)&&DO({table:l,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of c)g.match(o)&&DO({table:l,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of c)l[g]||DO({table:l,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;let h=0;const f={};if(!r)for(const g in i){const m=i[g];l[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:q0(m)})}return{table:l,count:u,unusedTable:f,unusedCount:h}}function DO(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function Bme(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?q0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function zG(t){const{type:e,size:n}=t.accessor,i=n8(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const jme={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Vme(t,e){const{attributeMap:n=jme}=e||{};return n&&n[t]||t}function Hme(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Kt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const WG=()=>{},Wme={};class wm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=ga("model")}=n;Kt(iA(e)),this.id=i,this.gl=e,this.id=n.id||ga("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||V0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Kt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Kt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Kt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Ume(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Vme(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c={...o};delete c.value,i[a]=[new Yi(t,l),c],Hme(s,c)}}if(r){const s=r.value||r;Kt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Yi(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(um(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return hR(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let c;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),an.priority>=2&&(c=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&an.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:w}=this,{onBeforeRender:P=WG,onAfterRender:V=WG}=this.props;P(),this.program.setUniforms(this.uniforms);const le=this.program.draw(Object.assign(Wme,e,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:v,instanceCount:w,offset:h?g:0}));return V(),an.priority>=2&&this._logDrawCallEnd(c,l,i),le}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return an.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Kt(n instanceof r8,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Nme(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Yi&&n.delete()}}_setAnimationProps(e){this.animated&&Kt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(um(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new jG(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),an.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:an.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function Lme(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=HG(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(Fme(o.name,l))),i[a]=HG(e,r[s],l,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=GG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:u}=GG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&an.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&an.log("UNUSED UNIFORMS",Object.keys(a))();const h=function kme(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=zG(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=zG(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);an.table(e,s)(),an.table(e,o)(),an.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),an.groupEnd(2)()}}class RO{static isSupported(e){return ri(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Kt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new wm(n,Object.assign({},e,{fs:e.fs||kG({version:UG(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function $me(t){return!(um(t.feedbackBuffers)&&um(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new pme(e,n)),function qme(t){return!(um(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Sme(e,n)),Kt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}const t_e={interpolation:class Yme{constructor({gl:e,attribute:n,timeline:i}){be(this,"gl",void 0),be(this,"type","interpolation"),be(this,"attributeInTransition",void 0),be(this,"settings",void 0),be(this,"attribute",void 0),be(this,"transition",void 0),be(this,"currentStartIndices",void 0),be(this,"currentLength",void 0),be(this,"transform",void 0),be(this,"buffers",void 0),this.gl=e,this.transition=new D0(i),this.attribute=n,this.attributeInTransition=new IO(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function Kme(t,e){const n=NG(e.size);return new RO(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Yi(e,r),new Yi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;PG(r);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)LG({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=MO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:OG(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let s=r/n;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class Jme{constructor({gl:e,attribute:n,timeline:i}){be(this,"gl",void 0),be(this,"type","spring"),be(this,"attributeInTransition",void 0),be(this,"settings",void 0),be(this,"attribute",void 0),be(this,"transition",void 0),be(this,"currentStartIndices",void 0),be(this,"currentLength",void 0),be(this,"texture",void 0),be(this,"framebuffer",void 0),be(this,"transform",void 0),be(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new D0(i),this.attribute=n,this.attributeInTransition=new IO(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function Qme(t){return new eo(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function e_e(t,e){return new vs(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function Zme(t,e,n){const i=NG(e.size);return new RO(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Yi(e,r),new Yi(e,r),new Yi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)LG({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=MO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:OG(0,s)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),PG(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),sA(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class n_e{constructor(e,{id:n,timeline:i}){be(this,"id",void 0),be(this,"isSupported",void 0),be(this,"gl",void 0),be(this,"timeline",void 0),be(this,"transitions",void 0),be(this,"needsRedraw",void 0),be(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=RO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(n);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void ui.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=t_e[i.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(ui.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const $G="attributeManager.invalidate";class l_e{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){be(this,"id",void 0),be(this,"gl",void 0),be(this,"attributes",void 0),be(this,"updateTriggers",void 0),be(this,"needsRedraw",void 0),be(this,"userData",void 0),be(this,"stats",void 0),be(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new n_e(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);Lo($G,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Lo($G,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let l=!1;Lo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],h=u.settings.accessor;u.startIndices=i,u.numInstances=n,s[c]&&ui.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Lo("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new IO(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;Lo("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&Lo("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,Lo("attribute.updateEnd",n,i)))}}function YG(t,e,n,i,r){const s=e-t;return(n-e)*r+-s*i+s+e}function XG(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const h_e={interpolation:class c_e extends D0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=kE(n,i,o)}},spring:class d_e extends D0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function u_e(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=YG(t[o],e[o],n[o],i,r);return s}return YG(t,e,n,i,r)}(s,o,n,i,r);const l=XG(a,n),c=XG(a,o);l<1e-5&&c<1e-5&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}};class f_e{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(!(r=RG(r)))return;const o=h_e[r.type];if(!o)return void ui.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:n,toValue:i}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function m_e(t,e){if(!t.transitions)return!1;const n={},i=NO(t);let r=!1;for(const s in t.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&OO(t[s],e[s],o)&&(n[s]=!0,r=!0)}return!!r&&n}function KG({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=OO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=OO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function OO(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function v_e(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function JG(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},KG({oldProps:r,newProps:i,triggerName:n})}function NO(t){const e=t[dA],n=e&&e.constructor;return n?n._propTypes:{}}function S_e(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function PO(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof Zd){const[r,s,o=0]=t,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function ZG(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=T0([],[o,a,l,1],n)),i){case yi.LNGLAT:return PO([o,a,l],e,s);case yi.LNGLAT_OFFSETS:return PO([o+r[0],a+r[1],l+(r[2]||0)],e,s);case yi.METER_OFFSETS:return PO(BH(r,[o,a,l]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],l+r[2]]:e.projectPosition([o,a,l])}}const M_e={10241:9987,10240:9729,10242:33071,10243:33071},LO={},R_e={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||X0(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>FO(t,e)},accessor:{validate(t,e){const n=TA(t);return"function"===n||n===TA(e.value)},equal:(t,e,n)=>"function"==typeof e||FO(t,e)},array:{validate:(t,e)=>e.optional&&!t||X0(t),equal:(t,e,n)=>n.compare?FO(t,e):t===e},object:{equal:(t,e,n)=>n.compare?om(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>function I_e(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof eo)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new eo(n,{...e,parameters:{...M_e,...i,...t.props.textureParameters}});return LO[r.id]=!0,r}(n,t),release:t=>{!function D_e(t){!t||!(t instanceof eo)||LO[t.id]&&(t.delete(),delete LO[t.id])}(t)}}};function FO(t,e){if(t===e)return!0;if(!X0(t)||!X0(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function N_e(t,e){switch(TA(e)){case"object":return Y0(t,e);case"array":return Y0(t,{type:"array",value:e,compare:!1});case"boolean":return Y0(t,{type:"boolean",value:e});case"number":return Y0(t,{type:"number",value:e});case"function":return Y0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Y0(t,e){return"type"in e?{name:t,...R_e[e.type],...e}:"value"in e?{name:t,type:TA(e.value),...e}:{name:t,type:"object",value:e}}function X0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function TA(t){return X0(t)?"array":null===t?"null":typeof t}function QG(t){return MA(t,"_mergedDefaultProps")||(function L_e(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),i=QG(n),s=function O_e(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=N_e(r,s);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(MA(t,"defaultProps")||{}),o=function F_e(t,e,n){const i=Object.create(null);Object.assign(i,e,t);const r=function U_e(t){const e=MA(t,"layerName")||MA(t,"componentName");return e||ui.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,t),a={...n._propTypes,...s.propTypes};!function k_e(t,e){const n={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(n[o]=a,i[o]=j_e(o))}t[mm]=n,t[Bf]={},Object.defineProperties(t,i)}(o,a);const l={...n._deprecatedProps,...s.deprecatedProps};(function B_e(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const s of e[n])ez(this,s)||(this[s]=i);ui.deprecated(r,e[n].join("/"))()}})})(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}(t),t._mergedDefaultProps)}function j_e(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||DG(e)?this[Bf][t]=e:this[Xd][t]=e},get(){if(this[Xd]){if(t in this[Xd])return this[Xd][t]||this[mm][t];if(t in this[Bf]){const e=this[dA]&&this[dA].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[mm][t]}}return this[mm][t]}}}function ez(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function MA(t,e){return ez(t,e)&&t[e]}let V_e=0;class BO{constructor(...e){be(this,"id",void 0),be(this,"props",void 0),be(this,"count",void 0),this.props=function P_e(t,e){const n=QG(t.constructor),i=Object.create(n);i[dA]=t,i[Bf]={},i[Xd]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=V_e++}clone(e){const{props:n}=this,i={};for(const r in n[mm])r in n[Xd]?i[r]=n[Xd][r]:r in n[Bf]&&(i[r]=n[Bf][r]);return new this.constructor({...n,...i,...e})}}be(BO,"componentName","Component"),be(BO,"defaultProps",{});const H_e=Object.freeze({});class G_e{constructor(e){be(this,"component",void 0),be(this,"onAsyncPropUpdated",void 0),be(this,"asyncProps",void 0),be(this,"oldProps",void 0),be(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||H_e}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[Xd]||{},i=e[Bf]||e,r=e[mm]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(DG(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,n){var i=this;return D(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,l=!1,c=!1;try{for(var f,h=zR(n);l=!(f=yield h.next()).done;l=!1){const g=f.value;{const{dataTransform:m}=i.component.props;o=m?m(g,o):o.concat(g),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(g){c=!0,u=g}finally{try{l&&null!=h.return&&(yield h.return())}finally{if(c)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,n){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class z_e extends G_e{constructor({attributeManager:e,layer:n}){super(n),be(this,"attributeManager",void 0),be(this,"needsRedraw",void 0),be(this,"needsUpdate",void 0),be(this,"subLayers",void 0),be(this,"usesPickingColorCache",void 0),be(this,"changeFlags",void 0),be(this,"viewport",void 0),be(this,"uniformTransitions",void 0),be(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const i=this.component.props.fetch;return i?i(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const i=this.component.props.onDataLoad;"data"===e&&i&&i(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const K_e=Object.freeze([]),J_e=uA(({oldViewport:t,viewport:e})=>t.equals(e));let Pc=new Uint8ClampedArray(0);const Z_e={data:{type:"data",value:K_e,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let l=o.contains(t);return!l&&!r&&(o.add({resourceId:t,data:G0(t,i),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return null===(u=n.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):G0(t,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:yi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Uf extends BO{constructor(...e){super(...e),be(this,"internalState",null),be(this,"lifecycle","Awaiting state"),be(this,"context",void 0),be(this,"state",void 0),be(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Qs(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=ZG(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=jH(i,n.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return Qs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return Qs(this.internalState),function T_e(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function C_e(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===yi.DEFAULT&&(r=e.isGeospatial?yi.LNGLAT:yi.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=h8(n,i,r),h=ZG(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function hae(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(l||c));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===yi.DEFAULT||e===yi.LNGLAT||e===yi.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Qs(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function x_e(t){if(!function A_e(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function E_e(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:i,instancePositions:r}=n.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=S_e(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const l of i)n.invalidateAll(l);else n.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&n){const{pickingColors:l,instancePickingColors:c}=n.attributes,u=l||c;u&&(a&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,o;n&&(e.message="".concat(n,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!J_e({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Pc.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&ui.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Pc=A0.allocate(Pc,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Pc.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Pc[3*o+0]=s[0],Pc[3*o+1]=s[1],Pc[3*o+2]=s[2]}e.value=Pc.subarray(0,3*n)}_setModelAttributes(e,n){const s=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Pc.buffer&&(i.value=Pc.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Qs(!this.internalState),Qs(Number.isFinite(this.props.coordinateSystem)),Lo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new z_e({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ui.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new f_e(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Lo("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Lo("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Lo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];Lu(s.gl,{polygonOffset:l}),yl(s.gl,i,()=>{const c={moduleParameters:e,uniforms:n,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=n[r];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}n[r]||(n[r]=e[r],s=!0),s&&Lo("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function g_e(t,e){const n=KG({newProps:t,oldProps:e,propTypes:NO(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function __e(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function y_e(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&JG(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&JG(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:v_e(t,e),transitionsChanged:m_e(t,e)}}(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,n[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function p_e(t){const e=NO(t);for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new l_e(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=i;if(n||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==r.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return n=n||r,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}be(Uf,"defaultProps",Z_e),be(Uf,"layerName","Layer");class kO extends Uf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:v,extensions:w,fetch:P,operation:V,_subLayerProps:le}=this.props,re={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:v,extensions:w,fetch:P,operation:V},Ie=le&&e.id&&le[e.id],Ne=Ie&&Ie.updateTriggers,it=e.id||"sublayer";if(Ie){const ut=this.constructor._propTypes,qe=e.type?e.type._propTypes:{};for(const dt in Ie){const yt=qe[dt]||ut[dt];yt&&"accessor"===yt.type&&(Ie[dt]=this.getSubLayerAccessor(Ie[dt]))}}Object.assign(re,e,Ie),re.id="".concat(this.props.id,"-").concat(it),re.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Ne};for(const ut of w){const qe=ut.getSubLayerProps.call(this,ut);qe&&Object.assign(re,qe,{updateTriggers:Object.assign(re.updateTriggers,qe.updateTriggers)})}return re}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=AR(this.renderLayers(),Boolean),this.internalState.subLayers=i),Lo("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}be(kO,"layerName","CompositeLayer");const IA={name:"project32",dependencies:[bR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},eye={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},DA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function tye(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eye;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},nz={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Qd{static get DRAW_MODE(){return nz}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("geometry"),drawMode:i=nz.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Kt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Kt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return Kt(Number.isFinite(i)),i}}const iz=()=>{},rz={10241:9987,10240:9729,10242:33071,10243:33071};function oye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function aye(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function K0(t){return t&&(t.id||t.url)}function sz(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];t[K0(r)]={...r,x:s,y:n}}}class dye{constructor(e,{onUpdate:n=iz,onError:i=iz}){be(this,"gl",void 0),be(this,"onUpdate",void 0),be(this,"onError",void 0),be(this,"_loadOptions",null),be(this,"_texture",null),be(this,"_externalTexture",null),be(this,"_mapping",{}),be(this,"_textureParameters",null),be(this,"_pendingCount",0),be(this,"_autoPacking",!1),be(this,"_xOffset",0),be(this,"_yOffset",0),be(this,"_rowHeight",0),be(this,"_buffer",4),be(this,"_canvasWidth",1024),be(this,"_canvasHeight",0),be(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?K0(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function uye(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=EA(t);for(const o of r){s.index++;const a=e(o,s),l=K0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[l]&&(!n[l]||a.url!==n[l].url)&&(i[l]={...a,source:o,sourceIndex:s.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:l}=function cye({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const c=t[l];if(!n[K0(c)]){const{height:h,width:f}=c;i+f+e>o&&(sz(n,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:c,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&sz(n,a,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:oye(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=l,this._texture||(this._texture=new eo(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||rz})),this._texture.height!==this._canvasHeight&&(this._texture=function lye(t,e,n,i){const r=t.width,s=t.height,o=new eo(t.gl,{width:e,height:n,parameters:i});return function $ue(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:h}=n;const{framebuffer:f,deleteFramebuffer:g}=B0(t);Kt(f);const{gl:m,handle:v}=f,w=typeof a<"u"||typeof l<"u"||typeof c<"u";a=a||0,l=l||0,c=c||0;const P=m.bindFramebuffer(36160,v);Kt(e);let V=null;if(e instanceof Lf&&(V=e,u=Number.isFinite(u)?u:V.width,h=Number.isFinite(h)?h:V.height,V.bind(0),e=V.target),w)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,l,i,r,u,h);break;case 35866:case 32879:No(m).copyTexSubImage3D(e,s,a,l,c,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);V&&V.unbind(),m.bindFramebuffer(36160,P||null),g&&f.delete()}(t,o,{targetY:0,width:r,height:s}),t.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||rz)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,G0(i.url,cG,this._loadOptions).then(r=>{const s=K0(i),{x:o,y:a,width:l,height:c}=this._mapping[s],u=aye(n,r,l,c);this._texture.setSubImageData({data:u,x:o,y:a,width:l,height:c}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const oz=[0,0,0,255],hye={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:oz},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class jO extends Uf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[IA,DA]})}initializeState(){this.state={iconManager:new dye(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:oz},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c,textureParameters:u}=n,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:u}),f?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(l,c),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:JE[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new wm(e,{...this.getShaders(),id:this.props.id,geometry:new Qd({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):ui.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}be(jO,"defaultProps",hye),be(jO,"layerName","IconLayer");const lz=[];class UO extends jO{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&ui.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!n,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):lz}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):lz}}be(UO,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),be(UO,"layerName","MultiIconLayer");var gye=S(7772),mye=S.n(gye);const _ye=32,yye=[];function vye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function cz(t,e,n,i){let r=0;for(let o=e;o<n;o++){var s;r+=(null===(s=i[t[o]])||void 0===s?void 0:s.width)||0}return r}function uz(t,e,n,i,r,s){let o=e,a=0;for(let l=e;l<n;l++){const c=cz(t,l,l+1,r);a+c>i&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function xye(t,e,n,i,r=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?uz(t,r,s,n,i,o):function wye(t,e,n,i,r,s){let o=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if((" "===t[u]||" "===t[u+1]||u+1===n)&&(l=u+1),l>a){let h=cz(t,a,l,r);c+h>i&&(o<a&&(s.push(a),o=a,c=0),h>i&&(h=uz(t,a,l,i,r,s),o=s[s.length-1])),a=l,c+=h}}(t,r,s,n,i,o),o}function Eye(t,e,n,i,r,s){let o=0,a=0;for(let l=e;l<n;l++){const c=t[l],u=i[c];u?(a||(a=u.height),r[l]=o+u.width/2,o+=u.width):(ui.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),r[l]=o,o+=_ye)}s[0]=o,s[1]=a}function dz(t,e,n,i,r){const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let g=0,m=0,v=0;for(let w=0;w<=o;w++){const P=s[w];if(("\n"===P||w===o)&&(v=w),v>m){const V=u?xye(s,n,i,r,m,v):yye;for(let le=0;le<=V.length;le++){const re=0===le?m:V[le-1],Ie=le<V.length?V[le]:v;Eye(s,re,Ie,r,a,f);for(let Ne=re;Ne<Ie;Ne++)l[Ne]=g+f[1]/2,c[Ne]=f[0];g+=f[1]*e,h[0]=Math.max(h[0],f[0])}m=v}"\n"===P&&(a[m]=0,l[m]=0,c[m]=0,m++)}return h[1]=g,{x:a,y:l,rowWidth:c,size:h}}class hz{constructor(e=5){be(this,"limit",void 0),be(this,"_cache",{}),be(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const J0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Sye(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let RA=new hz(3);function Mye(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function mz(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Dye{constructor(){be(this,"props",{...J0}),be(this,"_key",void 0),be(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const i=function Tye(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=RA.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),r=RA.get(this._key);if(r&&0===i.size)return void(this._key!==n&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,RA.set(this._key,s)}_generateFontAtlas(e,n,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:c,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");mz(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:v,yOffset:w}=function bye({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o;for(const h of t)if(!s[h]){const f=e(h);c+f+2*i>r&&(c=0,l++),s[h]={x:c+i,y:a+l*(n+2*i)+i,width:f,height:n},c+=f+2*i}const u=n+2*i;return{mapping:s,xOffset:c,yOffset:a+l*u,canvasHeight:vye(a+(l+1)*u)}}({getFontWidth:P=>f.measureText(P).width,fontHeight:1.2*o,buffer:a,characterSet:n,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==m){const P=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(P,0,0)}if(mz(f,r,o,s),l){const P=new(mye())(o,a,c,u,r,s),V=f.getImageData(0,0,P.size,P.size);for(const le of n)Mye(P.draw(le),V),f.putImageData(V,g[le].x-a,g[le].y+a)}else for(const P of n)f.fillText(P,g[P].x,g[P].y+.9*o);return{xOffset:v,yOffset:w,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const Nye={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class VO extends Uf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[IA,DA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:l,sizeUnits:JE[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new wm(e,{...this.getShaders(),id:this.props.id,geometry:new Qd({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}be(VO,"defaultProps",Nye),be(VO,"layerName","TextBackgroundLayer");const _z={start:1,middle:0,end:-1},yz={top:1,center:0,bottom:-1},HO=[0,0,0,255],Pye={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:HO},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:J0.characterSet},fontFamily:J0.fontFamily,fontWeight:J0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:HO},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:HO},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class GO extends kO{constructor(...e){super(...e),be(this,"state",void 0),be(this,"getBoundingRect",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{size:[f,g]}=dz(h,l,o,a,r);return[(_z["function"==typeof c?c(n,i):c]-1)*f/2,(yz["function"==typeof u?u(n,i):u]-1)*g/2,f,g]}),be(this,"getIconOffsets",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{x:f,y:g,rowWidth:m,size:[v,w]}=dz(h,l,o,a,r),P=_z["function"==typeof c?c(n,i):c],V=yz["function"==typeof u?u(n,i):u],le=f.length,re=new Array(2*le);let Ie=0;for(let Ne=0;Ne<le;Ne++)re[Ie++]=(P-1)*v/2+(1-P)*(v-m[Ne])/2+f[Ne],re[Ie++]=(V-1)*w/2+g[Ne];return re})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Dye}}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=n.startIndices;const l="auto"===i&&new Set;if(r&&o){const{texts:c,characterCount:u}=function Aye({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=i?i/o:0,c=r[e]||Math.ceil((t.length-l)/a),u=s&&new Set,h=new Array(e);let f=t;if(a>1||l>0){f=new(0,t.constructor)(c);for(let m=0;m<c;m++)f[m]=t[m*a+l]}for(let g=0;g<e;g++){const w=f.subarray(r[g],r[g+1]||c);h[g]=String.fromCodePoint.apply(null,w),u&&w.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:c}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:o,characterSet:l});a=u,s=(h,{index:f})=>c[f]}else{const{iterable:c,objectInfo:u}=EA(n);o=[0],a=0;for(const h of c){u.index++;const f=Array.from(s(h,u)||"");l&&f.forEach(l.add,l),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||i})}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,getBackgroundColor:v,getBorderColor:w,getBorderWidth:P,backgroundPadding:V,background:le,billboard:re,fontSettings:Ie,outlineWidth:Ne,outlineColor:it,sizeScale:ut,sizeUnits:qe,sizeMinPixels:dt,sizeMaxPixels:yt,transitions:Ct,updateTriggers:ft}=this.props,gt=this.getSubLayerClass("characters",UO),Pt=this.getSubLayerClass("background",VO);return[le&&new Pt({getFillColor:v,getLineColor:w,getLineWidth:P,padding:V,getPosition:u,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:ut/this.state.fontAtlasManager.props.fontSize,sizeUnits:qe,sizeMinPixels:dt,sizeMaxPixels:yt,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new gt({sdf:Ie.sdf,smoothing:Number.isFinite(Ie.smoothing)?Ie.smoothing:J0.smoothing,outlineWidth:Ne,outlineColor:it,iconAtlas:s,iconMapping:o,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:ut*r,sizeUnits:qe,sizeMinPixels:dt*r,sizeMaxPixels:yt*r,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Iye(t){ui.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),RA=new hz(t)}(e)}}be(GO,"defaultProps",Pye),be(GO,"layerName","TextLayer");const vz="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Lye={lightSources:{}};function zO(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const WO={name:"lights",vs:vz,fs:vz,getUniforms:function bz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lye;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Fye(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?zO(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=zO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=zO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return bz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Bye={};const jye={name:"phong-lighting",dependencies:[WO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function xz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bye;if(!("material"in t))return{};const{material:e}=t;return e?function kye(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},$O=Math.PI/180,OA=new Float32Array(16),Ez=new Float32Array(12);function Az(t,e,n){const i=e[0]*$O,r=e[1]*$O,s=e[2]*$O,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=n[0],g=n[1],m=n[2];t[0]=f*h*u,t[1]=f*l*u,t[2]=f*-a,t[3]=g*(-l*c+h*a*o),t[4]=g*(h*c+l*a*o),t[5]=g*u*o,t[6]=m*(l*o+h*a*c),t[7]=m*(-h*o+l*a*c),t[8]=m*u*c}function Sz(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const Cz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=c||!l&&!!a(i[0]);t.constant=g?c:h&&u&&f;const m=t.value;if(t.constant){let v;g?(OA.set(a),v=Sz(OA)):(v=Ez,Az(v,r,s),v.set(o,9)),t.value=new Float32Array(v)}else{let v=e*t.size;const{iterable:w,objectInfo:P}=EA(i,e,n);for(const V of w){let le;P.index++,g?(OA.set(c?a:a(V,P)),le=Sz(OA)):(le=Ez,Az(le,h?r:r(V,P),u?s:s(V,P)),le.set(f?o:o(V,P),9)),m[v++]=le[0],m[v++]=le[1],m[v++]=le[2],m[v++]=le[3],m[v++]=le[4],m[v++]=le[5],m[v++]=le[6],m[v++]=le[7],m[v++]=le[8],m[v++]=le[9],m[v++]=le[10],m[v++]=le[11]}}}};function Tz(t,e){return e===yi.CARTESIAN||e===yi.METER_OFFSETS||e===yi.DEFAULT&&!t.isGeospatial}function Mz(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),ui.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Hye(t,e){if(t.attributes)return Mz(t.attributes,e),t instanceof Qd?t:new Qd(t);if(t.positions||t.POSITION)return Mz(t,e),new Qd({attributes:t});throw Error("Invalid mesh")}class qO extends Uf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){const e=!ri(this.context.gl),n={};return gR(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[IA,jye,DA],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Cz}),this.setState({emptyTexture:new eo(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||Tz(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new wm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Hye(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}be(qO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),be(qO,"layerName","SimpleMeshLayer");const Iz={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[WO]};class xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||ga(this.constructor.name),this.display=!0,this.position=new Oo,this.rotation=new Oo,this.scale=new Oo(1,1,1),this.matrix=new Un,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Kt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Kt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Kt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:s=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Kt(e),n=n||this.matrix;const i=new Un(e).multiplyRight(n),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Z0 extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;an.assert(n.every(i=>i instanceof xm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const s=n.getBounds();if(!s)return;const[o,a]=s,l=new Oo(o).add(a).divide([2,2,2]);r.transformAsPoint(l,l);const c=new Oo(a).subtract(o).divide([2,2,2]);r.transformAsVector(c,c);for(let u=0;u<8;u++){const h=new Oo(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(c).add(l);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Un}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Un(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof Z0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let NA;class YO extends wH{static get ZERO(){return NA||(NA=new YO(0,0,0,0),Object.freeze(NA)),NA}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),Ou(e)&&1===arguments.length?this.copy(e):(is.debug&&(ii(e),ii(n),ii(i),ii(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return is.debug&&(ii(e.x),ii(e.y),ii(e.z),ii(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ii(e)}get w(){return this[3]}set w(e){this[3]=ii(e)}transform(e){return CD(this,this,e),this.check()}transformByMatrix3(e){return function Sae(t,e,n){const i=e[0],r=e[1],s=e[2];t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Aae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return SH(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function Dz(){var t=new pa(4);return pa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Rz(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Oz(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,t}var Pz=OH,r0e=function(){var t=xH(),e=EH(1,0,0),n=EH(0,1,0);return function(i,r,s){var o=AH(r,s);return o<-.999999?(VE(t,e,r),function dae(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&VE(t,n,r),function pae(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),Rz(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(VE(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function tle(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();Dz(),Dz(),function zye(){var t=new pa(9);pa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const s0e=[0,0,0,1];class XO extends jE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function Nz(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return Rz(this,e,n),this.check()}identity(){return function Wye(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ii(e)}get y(){return this[1]}set y(e){this[1]=ii(e)}get z(){return this[2]}set z(e){this[2]=ii(e)}get w(){return this[3]}set w(e){this[3]=ii(e)}len(){return function Qae(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function ele(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function nle(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return r0e(this,e,n),this.check()}add(e){return function Zae(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function Xye(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function Qye(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function Zye(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function ile(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return Oz(this,this,e),this.check()}multiplyLeft(e){return Oz(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function $ye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a}(this,this,e),this.check()}rotateY(e){return function qye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a}(this,this,e),this.check()}rotateZ(e){return function Yye(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a}(this,this,e),this.check()}scale(e){return Pz(this,this,e),this.check()}slerp(e,n,i){let r,s,o;switch(arguments.length){case 1:({start:r=s0e,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=n;break;default:r=e,s=n,o=i}return function PA(t,e,n,i){var f,g,m,v,w,r=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],h=n[3];return(g=r*l+s*c+o*u+a*h)<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>Sc?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(v=1-i,w=i),t[0]=v*r+w*l,t[1]=v*s+w*c,t[2]=v*o+w*u,t[3]=v*a+w*h,t}(this,r,s,o),this.check()}transformVector4(e,n=new YO){return function rle(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,g=-o*i-a*r-l*s;t[0]=u*c+g*-o+h*-l-f*-a,t[1]=h*c+g*-a+f*-o-u*-l,t[2]=f*c+g*-l+u*-a-h*-o,t[3]=e[3]}(n,e,this),UE(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const o0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},a0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Bz(t){if(!t._animation){const e=a0e[t.componentType],n=o0e[t.type],i=n*t.count,{buffer:r,byteOffset:s}=t.bufferView.data,o=new e(r,s+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=n)a.push(Array.from(o.slice(l,l+n)));t._animation=a}}return t._animation}const l0e=new Un,KO=new XO;class p0e{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function f0e(t,e,n,i){let{input:r,interpolation:s,output:o}=e;const l=t%r[r.length-1],c=r.findIndex(g=>g>=l),u=Math.max(0,c-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:an.warn("Bad animation path ".concat(i))()}Kt(n[i].length===o[u].length);const h=r[u],f=r[c];switch(s){case"STEP":!function h0e(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,o[u]);break;case"LINEAR":f>h&&function u0e(t,e,n,i,r){if("rotation"===e){KO.slerp({start:n,target:i,ratio:r});for(let s=0;s<KO.length;s++)t[e][s]=KO[s]}else for(let s=0;s<n.length;s++)t[e][s]=r*i[s]+(1-r)*n[s]}(n,i,o[u],o[c],(l-h)/(f-h));break;case"CUBICSPLINE":f>h&&function d0e(t,e,n){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:l}=n;for(let c=0;c<t[e].length;c++){const u=r[c]*a,h=s[c]*a;t[e][c]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*i[c]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*u+(-2*Math.pow(l,3)+3*Math.pow(l,2))*o[c]+(Math.pow(l,3)-Math.pow(l,2))*h}}(n,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*c+0],p1:o[3*c+1],tDiff:f-h,ratio:(l-h)/(f-h)});break;default:an.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function c0e(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=l0e.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(o,o._node)})}}class g0e{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),s=n.samplers.map(a=>{let{input:l,interpolation:c="LINEAR",output:u}=a;return{input:Bz(e.accessors[l]),interpolation:c,output:Bz(e.accessors[u])}}),o=n.channels.map(a=>{let{sampler:l,target:c}=a;return{sampler:s[l],target:e.nodes[c.node],path:c.path}});return new p0e({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class m0e extends xm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof wm?(this.model=e,this._setModelNodeProps(n)):this.model=new wm(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class _0e{constructor(e,n){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:l}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},gR(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&l,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new eo(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(an.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function kz(t,e){return ri(t)?"#version 300 es\n".concat(e):e}const w0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},x0e={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class E0e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},x0e,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new g0e(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new Z0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new Z0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Un).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new Z0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){an.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function b0e(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new _0e(t,e);an.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(u=>u.buffer));const c=new m0e(t,{id:n,drawMode:i,vertexCount:r,modules:[Iz],parameters:a.parameters,vs:kz(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:kz(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l,...o,defines:{...a.defines,...o.defines}});return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),an.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Yi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new ma({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:w0e[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var Q0=S(2435);const T0e="3.2.13",JO={};function Vf(t){return ZO.apply(this,arguments)}function ZO(){return ZO=D(function*(t,e=null,n={}){return e&&(t=function M0e(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:Jd?n.CDN?(Ic(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(T0e,"/dist/libs/").concat(t)):BR?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),JO[t]=JO[t]||function I0e(t){return QO.apply(this,arguments)}(t),yield JO[t]}),ZO.apply(this,arguments)}function QO(){return QO=D(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!Jd)try{return Q0&&Q0.requireFromFile&&(yield Q0.requireFromFile(t))}catch{return null}return BR?importScripts(t):function D0e(t,e){if(!Jd)return Q0.requireFromString&&Q0.requireFromString(t,e);if(BR)return eval.call(afe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),QO.apply(this,arguments)}const R0e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),O0e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let e2,r2;function Uz(t){return t2.apply(this,arguments)}function t2(){return t2=D(function*(t){const e=t.modules||{};return e.basis?e.basis:(e2=e2||function N0e(t){return n2.apply(this,arguments)}(t),yield e2)}),t2.apply(this,arguments)}function n2(){return n2=D(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield Vf("basis_transcoder.js","textures",t),yield Vf("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function P0e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,n)}),n2.apply(this,arguments)}function Vz(t){return s2.apply(this,arguments)}function s2(){return s2=D(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(r2=r2||function L0e(t){return o2.apply(this,arguments)}(t),yield r2)}),s2.apply(this,arguments)}function o2(){return o2=D(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield Vf(O0e,"textures",t),yield Vf(R0e,"textures",t)]),e=e||globalThis.BASIS,yield function F0e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:l}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:l})})})}(e,n)}),o2.apply(this,arguments)}const B0e=["","WEBKIT_","MOZ_"],Hz={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let LA=null;var a2,FA,l2,BA,zz,c2,Wz,$z;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(a2||(a2={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(FA||(FA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(l2||(l2={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(BA||(BA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(zz||(zz={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(c2||(c2={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(Wz||(Wz={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}($z||($z={}));const za=[171,75,84,88,32,50,48,187,13,10,26,10],G0e={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function d2(){return d2=D(function*(t,e){if("auto"===e.basis.containerFormat){if(function H0e(t){const e=new Uint8Array(t);return!(e.byteLength<za.length||e[0]!==za[0]||e[1]!==za[1]||e[2]!==za[2]||e[3]!==za[3]||e[4]!==za[4]||e[5]!==za[5]||e[6]!==za[6]||e[7]!==za[7]||e[8]!==za[8]||e[9]!==za[9]||e[10]!==za[10]||e[11]!==za[11])}(t))return Xz((yield Vz(e)).KTX2File,t,e);const{BasisFile:n}=yield Uz(e);return h2(n,t,e)}if("encoder"===e.basis.module){const n=yield Vz(e);return"ktx2"===e.basis.containerFormat?Xz(n.KTX2File,t,e):h2(n.BasisFile,t,e)}{const{BasisFile:i}=yield Uz(e);return h2(i,t,e)}}),d2.apply(this,arguments)}function h2(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),l=[];for(let c=0;c<a;c++)l.push(W0e(i,o,c,n));s.push(l)}return s}finally{i.close(),i.delete()}}function W0e(t,e,n,i){const r=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:l,basisFormat:c}=Kz(i,o),u=t.getImageTranscodedSizeInBytes(e,n,c),h=new Uint8Array(u);if(!t.transcodeImage(h,e,n,c,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:l,hasAlpha:o}}function Xz(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push($0e(i,o,n));break}return[s]}finally{i.close(),i.delete()}}function $0e(t,e,n){const{alphaFlag:i,height:r,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:l}=Kz(n,i),c=t.getImageTranscodedSizeInBytes(e,0,0,l),u=new Uint8Array(c);if(!t.transcodeImage(u,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function Kz(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=Jz()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),G0e[n]}function Jz(){const t=function k0e(t){if(!LA){t=t||function j0e(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,LA=new Set;for(const e of B0e)for(const n in Hz)t&&t.getExtension("".concat(e).concat(n))&&LA.add(Hz[n])}return LA}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const q0e={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function z0e(t,e){return d2.apply(this,arguments)}};function Hf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const jA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),Zz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:X0e}=(Zz&&parseFloat(Zz[1]),globalThis),f2=typeof Image<"u",p2=typeof ImageBitmap<"u",g2=!!jA||!!X0e;function Qz(t){const e=function t6(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Z0e=/^data:image\/svg\+xml/,Q0e=/\.svg((\?|#).*)?$/;function m2(t){return t&&(Z0e.test(t)||Q0e.test(t))}function n6(t,e){if(m2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function i6(t,e,n){return _2.apply(this,arguments)}function _2(){return _2=D(function*(t,e,n){const i=function eve(t,e){if(m2(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return n6(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function tve(t,e){return y2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),_2.apply(this,arguments)}function y2(){return y2=D(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),y2.apply(this,arguments)}const nve={};let r6=!0;function v2(){return v2=D(function*(t,e,n){let i;i=m2(n)?yield i6(t,e,n):n6(t,n);const r=e&&e.imagebitmap;return yield function rve(t){return b2.apply(this,arguments)}(i,r)}),v2.apply(this,arguments)}function b2(){return b2=D(function*(t,e=null){if((function sve(t){for(const e in t||nve)return!1;return!0}(e)||!r6)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),r6=!1}return yield createImageBitmap(t)}),b2.apply(this,arguments)}const Fc=!1,tv=!0;function w2(t){const e=nv(t);return function ove(t){const e=nv(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Fc)?{mimeType:"image/png",width:e.getUint32(16,Fc),height:e.getUint32(20,Fc)}:null}(e)||function cve(t){const e=nv(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Fc)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function uve(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Fc);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Fc),width:e.getUint16(s+7,Fc)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Fc)}return null}(e)||function ave(t){const e=nv(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Fc)?{mimeType:"image/gif",width:e.getUint16(6,tv),height:e.getUint16(8,tv)}:null}(e)||function lve(t){const e=nv(t);return e.byteLength>=14&&16973===e.getUint16(0,Fc)&&e.getUint32(2,tv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,tv),height:e.getUint32(22,tv)}:null}(e)}function nv(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function x2(){return x2=D(function*(t,e){const{mimeType:n}=w2(t)||{},i=globalThis._parseImageNode;return Hf(i),yield i(t,n)}),x2.apply(this,arguments)}function E2(){return E2=D(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function fve(t){switch(t){case"auto":case"data":return function J0e(){if(p2)return"imagebitmap";if(f2)return"image";if(g2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function K0e(t){switch(t){case"auto":return p2||f2||g2;case"imagebitmap":return p2;case"image":return f2;case"data":return g2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function ive(t,e,n){return v2.apply(this,arguments)}(t,e,s);break;case"image":a=yield i6(t,e,s);break;case"data":a=yield function dve(t,e){return x2.apply(this,arguments)}(t,e);break;default:Hf(!1)}return"data"===r&&(a=function e6(t){switch(Qz(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),E2.apply(this,arguments)}const pve={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function hve(t,e,n){return E2.apply(this,arguments)},tests:[t=>!!w2(new DataView(t))],options:{image:{type:"auto",decode:!0}}};function s6(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function o6(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function Wa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function a6(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function iv(t,e){return Hf(t>=0),Hf(e>0),t+(e-1)&~(e-1)}function _ve(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+iv(i.byteLength,4)}const c6=["SCALAR","VEC2","VEC3","VEC4"],yve=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],vve=new Map(yve),bve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},xve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function u6(t){return c6[t-1]||c6[0]}function d6(t){const e=vve.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function h6(t,e){const n=xve[t.componentType],i=bve[t.type],s=t.count*i,o=t.count*i*wve[t.componentType];return Wa(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const Eve={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class vl{constructor(e){be(this,"gltf",void 0),be(this,"sourceBuffers",void 0),be(this,"byteLength",void 0),this.gltf=e||{json:{...Eve},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Wa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=h6(e,n);return new s(r,n.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e,n={}){return Wa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return Wa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(i){const l=this._addIndices(i);a.primitives[0].indices=l}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=w2(e),r=n||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Wa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=iv(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:u6(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:d6(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=_ve(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const n={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const s of r)i.min.push(s),i.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Sve="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Cve="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Tve=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Mve=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),f6={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ive={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function T2(){return T2=D(function*(t,e,n,i,r,s="NONE"){const o=yield function UA(){return I2.apply(this,arguments)}();!function VA(t,e,n,i,r,s,o){const a=t.exports.sbrk,l=i+3&-4,c=a(l*r),u=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,u);const f=e(c,i,r,u,s.length);if(0===f&&o&&o(c,l,r),n.set(h.subarray(c,c+i*r)),a(c-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[Ive[r]],t,e,n,i,o.exports[f6[s||"NONE"]])}),T2.apply(this,arguments)}let M2;function I2(){return I2=D(function*(){return M2||(M2=function Rve(){return D2.apply(this,arguments)}()),M2}),I2.apply(this,arguments)}function D2(){return D2=D(function*(){let t=Sve;WebAssembly.validate(Tve)&&(t=Cve,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Ove(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Mve[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),D2.apply(this,arguments)}const R2="EXT_meshopt_compression",Nve=R2;function Pve(t,e){return O2.apply(this,arguments)}function O2(){return O2=D(function*(t,e){var n;const i=new vl(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const s of t.json.bufferViews||[])r.push(Lve(i,s));yield Promise.all(r),i.removeExtension(R2)}),O2.apply(this,arguments)}function Lve(t,e){return N2.apply(this,arguments)}function N2(){return N2=D(function*(t,e){const n=t.getObjectExtension(e,R2);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:l="NONE",buffer:c}=n,u=t.gltf.buffers[c],h=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function Dve(t,e,n,i,r){return T2.apply(this,arguments)}(f,o,s,h,a,l),f}return null}),N2.apply(this,arguments)}const Fve=["image/png","image/jpeg","image/gif"],P2={};const Am="EXT_texture_webp",Uve=Am;function Vve(t,e){const n=new vl(t);if(!function Bve(t){return void 0===P2[t]&&(P2[t]=function kve(t){switch(t){case"image/webp":return function jve(){if(!jA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return jA;default:if(!jA){const{_parseImageNode:e}=globalThis;return!!e&&Fve.includes(t)}return!0}}(t)),P2[t]}("image/webp")){if(n.getRequiredExtensions().includes(Am))throw new Error("gltf: Required extension ".concat(Am," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,Am);s&&(r.source=s.source),n.removeObjectExtension(r,Am)}n.removeExtension(Am)}const HA="KHR_texture_basisu",Hve=HA;function Gve(t,e){const n=new vl(t),{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,HA);s&&(r.source=s.source),n.removeObjectExtension(r,HA)}n.removeExtension(HA)}const g6={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class GA{constructor(e,n,i=!1,r=new Map){be(this,"name",void 0),be(this,"type",void 0),be(this,"nullable",void 0),be(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new GA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let xi,m6,_6,y6,v6,b6,w6,x6,E6;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(xi||(xi={}));class bl{static isNull(e){return e&&e.typeId===xi.Null}static isInt(e){return e&&e.typeId===xi.Int}static isFloat(e){return e&&e.typeId===xi.Float}static isBinary(e){return e&&e.typeId===xi.Binary}static isUtf8(e){return e&&e.typeId===xi.Utf8}static isBool(e){return e&&e.typeId===xi.Bool}static isDecimal(e){return e&&e.typeId===xi.Decimal}static isDate(e){return e&&e.typeId===xi.Date}static isTime(e){return e&&e.typeId===xi.Time}static isTimestamp(e){return e&&e.typeId===xi.Timestamp}static isInterval(e){return e&&e.typeId===xi.Interval}static isList(e){return e&&e.typeId===xi.List}static isStruct(e){return e&&e.typeId===xi.Struct}static isUnion(e){return e&&e.typeId===xi.Union}static isFixedSizeBinary(e){return e&&e.typeId===xi.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===xi.FixedSizeList}static isMap(e){return e&&e.typeId===xi.Map}static isDictionary(e){return e&&e.typeId===xi.Dictionary}get typeId(){return xi.NONE}compareTo(e){return this===e}}Symbol,Symbol,m6=Symbol.toStringTag;class eh extends bl{constructor(e,n){super(),be(this,"isSigned",void 0),be(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return xi.Int}get[m6](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Wve extends eh{constructor(){super(!0,8)}}class $ve extends eh{constructor(){super(!0,16)}}class qve extends eh{constructor(){super(!0,32)}}class Yve extends eh{constructor(){super(!1,8)}}class Xve extends eh{constructor(){super(!1,16)}}class Kve extends eh{constructor(){super(!1,32)}}_6=Symbol.toStringTag;class F2 extends bl{constructor(e){super(),be(this,"precision",void 0),this.precision=e}get typeId(){return xi.Float}get[_6](){return"Float"}toString(){return"Float".concat(this.precision)}}class Jve extends F2{constructor(){super(32)}}class Zve extends F2{constructor(){super(64)}}Symbol,Symbol,y6=Symbol.toStringTag,v6=Symbol.toStringTag,b6=Symbol.toStringTag,w6=Symbol.toStringTag,x6=Symbol.toStringTag;class Qve extends bl{constructor(e,n){super(),be(this,"listSize",void 0),be(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return xi.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[x6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}E6=Symbol.toStringTag;class Sm{constructor(e,n){be(this,"fields",void 0),be(this,"metadata",void 0),function ibe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function rbe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const r of e)n[r]=!0;const i=this.fields.filter(r=>n[r.name]);return new Sm(i,this.metadata)}selectAt(...e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new Sm(n,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof Sm){const o=e;n=o.fields,i=M6(M6(new Map,this.metadata),o.metadata)}else n=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of n)r[o.name]=o;const s=Object.values(r);return new Sm(s,i)}}function M6(t,e){return new Map([...t||new Map,...e||new Map])}function I6(t,e,n){return function T6(t,e,n){const i=function ebe(t){switch(t.constructor){case Int8Array:return new Wve;case Uint8Array:return new Yve;case Int16Array:return new $ve;case Uint16Array:return new Xve;case Int32Array:return new qve;case Uint32Array:return new Kve;case Float32Array:return new Jve;case Float64Array:return new Zve;default:throw new Error("array type not supported")}}(e.value),r=n||function nbe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new GA(t,new Qve(e.size,new GA("value",i)),!1,r)}(t,e,n?D6(n.metadata):void 0)}function D6(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const R6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},abe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class cbe{constructor(e){be(this,"draco",void 0),be(this,"decoder",void 0),be(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,n),l=this._getMeshData(s,a,n),c=function zve(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const u=a[c],h=a[c+1],f=a[c+2];e=u<e?u:e,n=h<n?h:n,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,n,i],[r,s,o]]}(l.attributes),u=function sbe(t,e,n){const i=D6(e.metadata),r=[],s=function obe(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in t){const l=I6(o,t[o],s[o]);r.push(l)}if(n){const o=I6("indices",n);r.push(o)}return new Sm(r,i)}(l.attributes,a,l.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:c},...l,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(i[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,n);l&&(i[s.unique_id()].octahedron_transform=l)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:l}=this._getAttributeValues(n,s);r[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function hbe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=abe[n.data_type],r=n.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,l=function ube(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let c;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,l,a,u),c=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:c,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in R6)if(this.draco[o]===r)return R6[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function dbe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const WA="1.4.1",fbe="https://www.gstatic.com/draco/versioned/decoders/".concat(WA,"/draco_decoder.js"),pbe="https://www.gstatic.com/draco/versioned/decoders/".concat(WA,"/draco_wasm_wrapper.js"),gbe="https://www.gstatic.com/draco/versioned/decoders/".concat(WA,"/draco_decoder.wasm");let rv;function j2(){return j2=D(function*(t){const e=t.modules||{};return rv=e.draco3d?rv||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):rv||function ybe(t){return V2.apply(this,arguments)}(t),yield rv}),j2.apply(this,arguments)}function V2(){return V2=D(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield Vf(fbe,"draco",t):[e,n]=yield Promise.all([yield Vf(pbe,"draco",t),yield Vf(gbe,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function vbe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),V2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(WA,"/javascript/draco_encoder.js");const G2={...g6,parse:function wbe(t,e){return z2.apply(this,arguments)}};function z2(){return z2=D(function*(t,e){const{draco:n}=yield function _be(t){return j2.apply(this,arguments)}(e),i=new cbe(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),z2.apply(this,arguments)}function O6(t){const{buffer:e,size:n,count:i}=function Ebe(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Abe(t,e,n=!1){return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:u6(n),componentType:d6(e)}}const Gf="KHR_draco_mesh_compression",Sbe=Gf;function Cbe(t,e,n){const i=new vl(t);for(const r of N6(i))i.getObjectExtension(r,Gf)}function Tbe(t,e,n){return W2.apply(this,arguments)}function W2(){return W2=D(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new vl(t),s=[];for(const o of N6(r))r.getObjectExtension(o,Gf)&&s.push(Ibe(r,o,e,n));yield Promise.all(s),r.removeExtension(Gf)}),W2.apply(this,arguments)}function Mbe(t,e={}){const n=new vl(t);for(const i of n.json.meshes||[])Dbe(i),n.addRequiredExtension(Gf)}function Ibe(t,e,n,i){return $2.apply(this,arguments)}function $2(){return $2=D(function*(t,e,n,i){const r=t.getObjectExtension(e,Gf);if(!r)return;const s=t.getTypedArrayForBufferView(r.bufferView),o=o6(s.buffer,s.byteOffset),{parse:a}=i,l={...n};delete l["3d-tiles"];const c=yield a(o,G2,l,i),u=function xbe(t){const e={};for(const n in t)if("indices"!==n){const r=O6(t[n]);e[n]=r}return e}(c.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=t.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,c.indices&&(e.indices=O6(c.indices)),function Rbe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),$2.apply(this,arguments)}function Dbe(t,e,n=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:t}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(o);return{primitives:[{attributes:l,mode:n,extensions:{[Gf]:{bufferView:c,attributes:l}}}]}}function*N6(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const zf="KHR_lights_punctual",Obe=zf;function Nbe(t){return q2.apply(this,arguments)}function q2(){return q2=D(function*(t){const e=new vl(t),{json:n}=e,i=e.getExtension(zf);i&&(e.json.lights=i.lights,e.removeExtension(zf));for(const r of n.nodes||[]){const s=e.getObjectExtension(r,zf);s&&(r.light=s.light),e.removeObjectExtension(r,zf)}}),q2.apply(this,arguments)}function Pbe(t){return Y2.apply(this,arguments)}function Y2(){return Y2=D(function*(t){const e=new vl(t),{json:n}=e;if(n.lights){const i=e.addExtension(zf);Wa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,zf,i);delete e.json.lights}}),Y2.apply(this,arguments)}const ov="KHR_materials_unlit",Lbe=ov;function Fbe(t){return X2.apply(this,arguments)}function X2(){return X2=D(function*(t){const e=new vl(t),{json:n}=e;e.removeExtension(ov);for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,ov)}),X2.apply(this,arguments)}function Bbe(t){const e=new vl(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,ov,{}),e.addExtension(ov))}const av="KHR_techniques_webgl",kbe=av;function jbe(t){return K2.apply(this,arguments)}function K2(){return K2=D(function*(t){const e=new vl(t),{json:n}=e,i=e.getExtension(av);if(i){const r=function Vbe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),n.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=n[o.program]}),r}(i,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,av);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=Hbe(s.technique,e)),e.removeObjectExtension(s,av)}e.removeExtension(av)}}),K2.apply(this,arguments)}function Ube(t,e){return J2.apply(this,arguments)}function J2(){return(J2=D(function*(t,e){})).apply(this,arguments)}function Hbe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const P6=[Q,C,Y,z,X,_,E];function Z2(){return Z2=D(function*(t,e={},n){const i=P6.filter(s=>L6(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,t,e,n)}}),Z2.apply(this,arguments)}function L6(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const Q2="KHR_binary_glTF",F6={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},$be={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class qbe{constructor(){be(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),be(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Wbe(t){const e=new vl(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,Q2);r&&Object.assign(i,r),e.removeObjectExtension(i,Q2)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Q2)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in F6)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in F6)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:s}=n;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,n){const i=$be[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const s of e.materials){var n,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(n=s.values)||void 0===n?void 0:n.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(l=>l.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const Xbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kbe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Jbe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},Zbe={10240:9729,10241:9986,10242:10497,10243:10497};class twe{constructor(){be(this,"baseUri",""),be(this,"json",{}),be(this,"buffers",[]),be(this,"images",[])}postProcess(e,n={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Wa(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Qbe(t){return Kbe[t]}(e.componentType),e.components=function ewe(t){return Xbe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=h6(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const l=n+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(l,l+r)),a*r)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):Zbe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Jbe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const B6=1735152710,eN=12,$A=8,iwe=1313821514,rwe=5130562,swe=0,owe=1,awe=0,Cm=!0;function tN(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),iv(i,4)}function nN(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),iv(i,4)}function iN(){return iN=D(function*(t,e,n=0,i,r){var s,o,a,l;(function gwe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function cwe(t,e=0,n={}){const i=new DataView(t),{magic:r=B6}=n,s=i.getUint32(e,!1);return s===r||s===B6}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function mve(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function gve(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?s6(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?s6(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};n=function uwe(t,e,n=0,i={}){const r=new DataView(e),s=function lwe(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),o=r.getUint32(n+4,Cm),a=r.getUint32(n+8,Cm);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=eN,t.version){case 1:return function dwe(t,e,n){Hf(t.header.byteLength>eN+$A);const i=e.getUint32(n+0,Cm),r=e.getUint32(n+4,Cm);return n+=$A,Hf(r===awe),tN(t,e,n,i),(n+=i)+nN(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function hwe(t,e,n,i){return Hf(t.header.byteLength>eN+$A),function fwe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,Cm),s=e.getUint32(n+4,Cm);switch(n+=$A,s){case iwe:tN(t,e,n,r);break;case rwe:nN(t,e,n,r);break;case swe:i.strict||tN(t,e,n,r);break;case owe:i.strict||nN(t,e,n,r)}n+=iv(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(o,e,n,i.glb),Wa("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else Wa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,n,i),function Ybe(t,e={}){(new qbe).normalize(t,e)}(t,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function Gbe(t,e={},n){const i=P6.filter(s=>L6(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,t,e,n)}}(t,i,r);const c=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&t.json.buffers&&(yield function mwe(t,e,n){return rN.apply(this,arguments)}(t,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function _we(t,e,n){return sN.apply(this,arguments)}(t,i,r);c.push(h)}const u=function zbe(t){return Z2.apply(this,arguments)}(t,i,r);return c.push(u),yield Promise.all(c),null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?function nwe(t,e){return(new twe).postProcess(t,e)}(t,i):t}),iN.apply(this,arguments)}function rN(){return rN=D(function*(t,e,n){const i=t.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:l}=n;Wa(l);const c=a6(a.uri,e),u=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,c),h=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);t.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),rN.apply(this,arguments)}function sN(){return sN=D(function*(t,e,n){const i=function ywe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],s=[];for(const o of i)s.push(vwe(t,r[o],o,e,n));return yield Promise.all(s)}),sN.apply(this,arguments)}function vwe(t,e,n,i,r){return oN.apply(this,arguments)}function oN(){return oN=D(function*(t,e,n,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const c=a6(e.uri,i);a=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const c=function l6(t,e,n){const i=t.bufferViews[n];Wa(i);const s=e[i.buffer];return Wa(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=o6(c.buffer,c.byteOffset,c.byteLength)}Wa(a,"glTF image has no data");let l=yield o(a,[pve,q0e],{mimeType:e.mimeType,basis:i.basis||{format:Jz()}},r);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),t.images=t.images||[],t.images[n]=l}),oN.apply(this,arguments)}const Tm={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function bwe(t){return aN.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function aN(){return aN=D(function*(t,e={},n){(e={...Tm.options,...e}).gltf={...Tm.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function pwe(t,e){return iN.apply(this,arguments)}({},t,i,e,n)}),aN.apply(this,arguments)}function lN(){return lN=D(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function xwe(t){return cN.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),lN.apply(this,arguments)}function cN(){return cN=D(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),cN.apply(this,arguments)}const k6=[255,255,255,255],Swe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:k6},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Tm]};class uN extends Uf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){const e=[IA,DA];return"pbr"===this.props._lighting&&e.push(Iz),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:k6,transition:!0},instanceModelMatrix:Cz})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof xm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,l=function A0e(t,e,n){const i=new E0e(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...l},function wwe(t){return lN.apply(this,arguments)}(l).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(ui.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof xm?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&ui.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):ui.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:l})=>l===s);a?Object.assign(a,o):ui.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof xm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!ri(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:l,coordinateSystem:c}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(u),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:s,opacity:l,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:Tz(r,c),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}be(uN,"defaultProps",Swe),be(uN,"layerName","ScenegraphLayer");class Cwe extends Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("sphere-geometry")}=e,{indices:i,attributes:r}=function Twe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const o=Math.PI-0,c=2*Math.PI-0,u=(e+1)*(n+1);if("number"==typeof i){const P=i;i=(V,le,re,Ie,Ne)=>P}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),v=new(u>65535?Uint32Array:Uint16Array)(e*n*6);for(let P=0;P<=e;P++)for(let V=0;V<=n;V++){const le=V/n,re=P/e,Ie=V+P*(n+1),Ne=2*Ie,it=3*Ie,ut=c*le,qe=o*re,dt=Math.sin(ut),yt=Math.cos(ut),Ct=Math.sin(qe),gt=yt*Ct,Pt=Math.cos(qe),Ft=dt*Ct,un=i(gt,Pt,Ft,le,re);h[it+0]=un*gt,h[it+1]=un*Pt,h[it+2]=un*Ft,f[it+0]=gt,f[it+1]=Pt,f[it+2]=Ft,g[Ne+0]=le,g[Ne+1]=1-re}const w=n+1;for(let P=0;P<n;P++)for(let V=0;V<e;V++){const le=6*(P*e+V);v[le+0]=V*w+P,v[le+1]=V*w+P+1,v[le+2]=(V+1)*w+P,v[le+3]=(V+1)*w+P,v[le+4]=V*w+P+1,v[le+5]=(V+1)*w+P+1}return{indices:{size:1,value:v},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Mwe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class j6 extends Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Iwe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:l=!1}=t,c=(a?2:0)+(l?2:0),u=(r+1)*(s+1+c),h=Math.atan2(e-n,i),f=Math.sin,g=Math.cos,m=Math.PI,v=g(h),w=f(h),P=a?-2:0,V=s+(l?2:0),le=r+1,re=new Uint16Array(r*(s+c)*6),Ie=Mwe[o],Ne=new Float32Array(3*u),it=new Float32Array(3*u),ut=new Float32Array(2*u);let qe=0,dt=0;for(let yt=P;yt<=V;yt++){let gt,Ct=yt/s,ft=i*Ct;yt<0?(ft=0,Ct=1,gt=e):yt>s?(ft=i,Ct=1,gt=n):gt=e+yt/s*(n-e),(-2===yt||yt===s+2)&&(gt=0,Ct=0),ft-=i/2;for(let Pt=0;Pt<le;Pt++){const Ft=f(Pt*m*2/r),un=g(Pt*m*2/r);Ne[qe+Ie[0]]=Ft*gt,Ne[qe+Ie[1]]=ft,Ne[qe+Ie[2]]=un*gt,it[qe+Ie[0]]=yt<0||yt>s?0:Ft*v,it[qe+Ie[1]]=yt<0?-1:yt>s?1:w,it[qe+Ie[2]]=yt<0||yt>s?0:un*v,ut[dt+0]=Pt/r,ut[dt+1]=Ct,dt+=2,qe+=3}}for(let yt=0;yt<s+c;yt++)for(let Ct=0;Ct<r;Ct++){const ft=6*(yt*r+Ct);re[ft+0]=le*(yt+0)+0+Ct,re[ft+1]=le*(yt+0)+1+Ct,re[ft+2]=le*(yt+1)+1+Ct,re[ft+3]=le*(yt+0)+0+Ct,re[ft+4]=le*(yt+1)+1+Ct,re[ft+5]=le*(yt+1)+0+Ct}return{indices:re,attributes:{POSITION:{size:3,value:Ne},NORMAL:{size:3,value:it},TEXCOORD_0:{size:2,value:ut}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class Dwe extends j6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Rwe extends j6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const Owe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Nwe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Pwe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Lwe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Fwe={POSITION:{size:3,value:new Float32Array(Nwe)},NORMAL:{size:3,value:new Float32Array(Pwe)},TEXCOORD_0:{size:2,value:new Float32Array(Lwe)}};class Bwe extends Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ga("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(Owe)},attributes:{...Fwe,...e.attributes}})}}function qA(t,e,n){e||(e=new Un(Un.IDENTITY));const i=new Un(Un.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const s=new Un(Un.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}const r=new Un(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const s of t.nodes||t.children||[])if(!1===qA(s,r,n))return!1;return!0}function U6(){V8([g6,Tm])}function V6(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||qA(r,new Un(Un.IDENTITY),(s,o)=>s!==n||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function H6(t,e){return dN.apply(this,arguments)}function dN(){return dN=D(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(s=>s.blob())):fetch(n);const r=yield gA(i,Tm,{DracoLoader:G2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),V6(t.scenegraphNode,r)}),dN.apply(this,arguments)}function kwe(t,e){return hN.apply(this,arguments)}function hN(){return hN=D(function*(t,e){return V6(t,yield e)}),hN.apply(this,arguments)}class $l{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new ye);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new ye);const i=this.elements,r=e.x,s=e.y,o=e.z;return n.x=i[0]*r+i[1]*s+i[2]*o,n.y=i[3]*r+i[4]*s+i[5]*o,n.z=i[6]*r+i[7]*s+i[8]*o,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new $l);const i=this.elements,r=e.elements,s=n.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],v=r[0],w=r[1],P=r[2],V=r[3],le=r[4],re=r[5],Ie=r[6],Ne=r[7],it=r[8];return s[0]=o*v+a*V+l*Ie,s[1]=o*w+a*le+l*Ne,s[2]=o*P+a*re+l*it,s[3]=c*v+u*V+h*Ie,s[4]=c*w+u*le+h*Ne,s[5]=c*P+u*re+h*it,s[6]=f*v+g*V+m*Ie,s[7]=f*w+g*le+m*Ne,s[8]=f*P+g*re+m*it,n}scale(e,n){void 0===n&&(n=new $l);const i=this.elements,r=n.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return n}solve(e,n){void 0===n&&(n=new ye);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const c=l;let u,f;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--l);if(n.z=s[11]/s[10],n.y=(s[7]-s[6]*n.z)/s[5],n.x=(s[3]-s[2]*n.z-s[1]*n.y)/s[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new $l);const r=jwe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,h;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{h=6-c,r[h+6*s]+=r[h+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const f=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--c)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--c)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];c=6;do{h=6-c,r[h+6*s]=r[h+6*s]*f}while(--c)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,s=e.w,o=n+n,a=i+i,l=r+r,c=n*o,u=n*a,h=n*l,f=i*a,g=i*l,m=r*l,v=s*o,w=s*a,P=s*l,V=this.elements;return V[0]=1-(f+m),V[1]=u-P,V[2]=h+w,V[3]=u+P,V[4]=1-(c+m),V[5]=g-v,V[6]=h-w,V[7]=g+v,V[8]=1-(c+f),this}transpose(e){void 0===e&&(e=new $l);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const jwe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ye{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return n.x=a*s-l*r,n.y=l*i-o*s,n.z=o*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new ye(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new ye(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new $l([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ye);const n=this.x,i=this.y,r=this.z;let s=Math.sqrt(n*n+i*i+r*r);return s>0?(s=1/s,e.x=n*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new ye);const r=this.y,s=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*s,n}vmul(e,n){return void 0===n&&(n=new ye),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new ye),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ye),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=Uwe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=Vwe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*n,i.y=s+(e.y-s)*n,i.z=o+(e.z-o)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(G6),G6.almostEquals(e,n)}clone(){return new ye(this.x,this.y,this.z)}}ye.ZERO=new ye(0,0,0),ye.UNIT_X=new ye(1,0,0),ye.UNIT_Y=new ye(0,1,0),ye.UNIT_Z=new ye(0,0,1);const Uwe=new ye,Vwe=new ye,G6=new ye;class or{constructor(e){void 0===e&&(e={}),this.lowerBound=new ye,this.upperBound=new ye,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,z6),c=z6),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return n&&(n.vadd(s,s),n.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new or).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||n.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||n.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||n.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return n.x<=r.x&&i.x>=s.x&&n.y<=r.y&&i.y>=s.y&&n.z<=r.z&&i.z>=s.z}getCorners(e,n,i,r,s,o,a,l){const c=this.lowerBound,u=this.upperBound;e.copy(c),n.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),r.set(c.x,u.y,u.z),s.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(e,n){const i=W6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=W6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,s=1/n.y,o=1/n.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,f));return!(m<0||g>m)}}const z6=new ye,W6=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class q6{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Gr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new ye),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=Hwe;e.tangents(i,Gwe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Gr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,l=e.y,c=e.z,u=e.w;return n.x=i*u+o*a+r*c-s*l,n.y=r*u+o*l+s*a-i*c,n.z=s*u+o*c+i*l-r*a,n.w=o*u-i*a-r*l-s*c,n}inverse(e){void 0===e&&(e=new Gr);const n=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(n*n+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Gr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,g=-o*i-a*r-l*s;return n.x=u*c+g*-o+h*-l-f*-a,n.y=h*c+g*-a+f*-o-u*-l,n.z=f*c+g*-l+u*-a-h*-o,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,s;void 0===n&&(n="YZX");const o=this.x,a=this.y,l=this.z,c=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*c-2*a*l,1-2*h-2*g)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(n/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"YXZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"ZXY"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"ZYX"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"YZX"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a-l*c*u):"XZY"===r&&(this.x=l*o*a-s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a+l*c*u),this}clone(){return new Gr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Gr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,v,w,l=e.x,c=e.y,u=e.z,h=e.w;return g=r*l+s*c+o*u+a*h,g<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-n)*f)/m,w=Math.sin(n*f)/m):(v=1-n,w=n),i.x=v*r+w*l,i.y=v*s+w*c,i.z=v*o+w*u,i.w=v*a+w*h,i}integrate(e,n,i,r){void 0===r&&(r=new Gr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,f=.5*n;return r.x+=f*(s*h+o*u-a*c),r.y+=f*(o*h+a*l-s*u),r.z+=f*(a*h+s*c-o*l),r.w+=f*(-s*l-o*c-a*u),r}}const Hwe=new ye,Gwe=new ye,zwe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let sn=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=zwe,t})();class Ei{constructor(e){void 0===e&&(e={}),this.position=new ye,this.quaternion=new Gr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Ei.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Ei.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),i.vsub(e,r),n.conjugate(Y6),Y6.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new ye),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new ye),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const Y6=new Gr;class nh extends sn{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:sn.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ye;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){n[o[l]].vsub(n[o[(l+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new ye;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];nh.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const s=new ye,o=new ye;n.vsub(e,o),i.vsub(n,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,s,o,a,l,c){const u=new ye;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const v=u.dot(o);v>f&&(f=v,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const v=i.vertices[i.faces[h][m]],w=new ye;w.copy(v),s.vmult(w,w),r.vadd(w,w),g.push(w)}h>=0&&this.clipFaceAgainstHull(o,e,n,g,a,l,c)}findSeparatingAxis(e,n,i,r,s,o,a,l){const c=new ye,u=new ye,h=new ye,f=new ye,g=new ye,m=new ye;let v=Number.MAX_VALUE;const w=this;if(w.uniqueAxes)for(let P=0;P!==w.uniqueAxes.length;P++){i.vmult(w.uniqueAxes[P],c);const V=w.testSepAxis(c,e,n,i,r,s);if(!1===V)return!1;V<v&&(v=V,o.copy(c))}else{const P=a?a.length:w.faces.length;for(let V=0;V<P;V++){c.copy(w.faceNormals[a?a[V]:V]),i.vmult(c,c);const re=w.testSepAxis(c,e,n,i,r,s);if(!1===re)return!1;re<v&&(v=re,o.copy(c))}}if(e.uniqueAxes)for(let P=0;P!==e.uniqueAxes.length;P++){s.vmult(e.uniqueAxes[P],u);const V=w.testSepAxis(u,e,n,i,r,s);if(!1===V)return!1;V<v&&(v=V,o.copy(u))}else{const P=l?l.length:e.faces.length;for(let V=0;V<P;V++){u.copy(e.faceNormals[l?l[V]:V]),s.vmult(u,u);const re=w.testSepAxis(u,e,n,i,r,s);if(!1===re)return!1;re<v&&(v=re,o.copy(u))}}for(let P=0;P!==w.uniqueEdges.length;P++){i.vmult(w.uniqueEdges[P],f);for(let V=0;V!==e.uniqueEdges.length;V++)if(s.vmult(e.uniqueEdges[V],g),f.cross(g,m),!m.almostZero()){m.normalize();const le=w.testSepAxis(m,e,n,i,r,s);if(!1===le)return!1;le<v&&(v=le,o.copy(m))}}return r.vsub(n,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,n,i,r,s,o){nh.project(this,e,i,r,fN),nh.project(n,e,s,o,pN);const l=fN[0],c=fN[1],u=pN[0],h=pN[1];if(l<h||u<c)return!1;const f=l-h,g=u-c;return f<g?f:g}calculateLocalInertia(e,n){const i=new ye,r=new ye;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*o*2*o+2*a*2*a),n.y=1/12*e*(2*s*2*s+2*a*2*a),n.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,s,o,a){const l=new ye,c=new ye,u=new ye,h=new ye,f=new ye,g=new ye,m=new ye,v=new ye,w=this,V=r,le=[];let re=-1,Ie=Number.MAX_VALUE;for(let dt=0;dt<w.faces.length;dt++){l.copy(w.faceNormals[dt]),i.vmult(l,l);const yt=l.dot(e);yt<Ie&&(Ie=yt,re=dt)}if(re<0)return;const Ne=w.faces[re];Ne.connectedFaces=[];for(let dt=0;dt<w.faces.length;dt++)for(let yt=0;yt<w.faces[dt].length;yt++)-1!==Ne.indexOf(w.faces[dt][yt])&&dt!==re&&-1===Ne.connectedFaces.indexOf(dt)&&Ne.connectedFaces.push(dt);const it=Ne.length;for(let dt=0;dt<it;dt++){const yt=w.vertices[Ne[dt]];yt.vsub(w.vertices[Ne[(dt+1)%it]],c),u.copy(c),i.vmult(u,u),n.vadd(u,u),h.copy(this.faceNormals[re]),i.vmult(h,h),n.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(yt),i.vmult(g,g),n.vadd(g,g);const ft=Ne.connectedFaces[dt];m.copy(this.faceNormals[ft]);const gt=this.getPlaneConstantOfFace(ft);v.copy(m),i.vmult(v,v);const Pt=gt-v.dot(n);for(this.clipFaceAgainstPlane(V,le,v,Pt);V.length;)V.shift();for(;le.length;)V.push(le.shift())}m.copy(this.faceNormals[re]);const ut=this.getPlaneConstantOfFace(re);v.copy(m),i.vmult(v,v);const qe=ut-v.dot(n);for(let dt=0;dt<V.length;dt++){let yt=v.dot(V[dt])+qe;yt<=s&&(console.log(`clamped: depth=${yt} to minDist=${s}`),yt=s),yt<=o&&yt<=1e-6&&a.push({point:V[dt],normal:v,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let s,o;const a=e.length;if(a<2)return n;let l=e[e.length-1],c=e[0];s=i.dot(l)+r;for(let u=0;u<a;u++){if(c=e[u],o=i.dot(c)+r,s<0)if(o<0){const h=new ye;h.copy(c),n.push(h)}else{const h=new ye;l.lerp(c,s/(s-o),h),n.push(h)}else if(o<0){const h=new ye;l.lerp(c,s/(s-o),h),n.push(h),n.push(c)}l=c,s=o}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ye);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)n.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>n.x&&(n.x=s.x),s.y<e.y?e.y=s.y:s.y>n.y&&(n.y=s.y),s.z<e.z?e.z=s.z:s.z>n.z&&(n.z=s.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new ye);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==n;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const s=this.vertices;let o,a,l,c,u,h,f=new ye;for(let g=0;g<s.length;g++)f.copy(s[g]),n.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===c||f.x>c)&&(c=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===u||f.y>u)&&(u=f.y),(void 0===l||f.z<l)&&(l=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,l),r.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ye);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let s=0;s<i;s++){const o=r[s];n.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];n.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,o=new ye;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let l=r[a];const c=n[i[a][0]],u=new ye;e.vsub(c,u);const h=l.dot(u),f=new ye;o.vsub(c,f);const g=l.dot(f);if(h<0&&g>0||h>0&&g<0)return!1}return-1}static project(e,n,i,r,s){const o=e.vertices.length,a=$we;let l=0,c=0;const u=qwe,h=e.vertices;u.setZero(),Ei.vectorToLocalFrame(i,r,n,a),Ei.pointToLocalFrame(i,r,u,u);const f=u.dot(a);c=l=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=f,l-=f,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const fN=[],pN=[],$we=(new ye,new ye),qwe=new ye;class YA extends sn{constructor(e){super({type:sn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=ye,s=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new nh({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new ye),YA.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let s=0;s!==i.length;s++)n.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)ih.set(s[o][0],s[o][1],s[o][2]),n.vmult(ih,ih),e.vadd(ih,ih),i(ih.x,ih.y,ih.z)}calculateWorldAABB(e,n,i,r){const s=this.halfExtents;Bc[0].set(s.x,s.y,s.z),Bc[1].set(-s.x,s.y,s.z),Bc[2].set(-s.x,-s.y,s.z),Bc[3].set(-s.x,-s.y,-s.z),Bc[4].set(s.x,-s.y,-s.z),Bc[5].set(s.x,s.y,-s.z),Bc[6].set(-s.x,s.y,-s.z),Bc[7].set(s.x,-s.y,s.z);const o=Bc[0];n.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=Bc[a];n.vmult(l,l),e.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>r.x&&(r.x=c),u>r.y&&(r.y=u),h>r.z&&(r.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const ih=new ye,Bc=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class ln extends q6{constructor(e){void 0===e&&(e={}),super(),this.id=ln.idCounter++,this.index=-1,this.world=null,this.vlambda=new ye,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ye,this.previousPosition=new ye,this.interpolatedPosition=new ye,this.initPosition=new ye,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ye,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ye,this.force=new ye;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?ln.STATIC:ln.DYNAMIC,typeof e.type==typeof ln.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=ln.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ye,this.quaternion=new Gr,this.initQuaternion=new Gr,this.previousQuaternion=new Gr,this.interpolatedQuaternion=new Gr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ye,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ye,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ye,this.invInertia=new ye,this.invInertiaWorld=new $l,this.invMassSolve=0,this.invInertiaSolve=new ye,this.invInertiaWorldSolve=new $l,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ye(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ye(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new or,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ye,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=ln.AWAKE,this.wakeUpAfterNarrowphase=!1,e===ln.SLEEPING&&this.dispatchEvent(ln.wakeupEvent)}sleep(){this.sleepState=ln.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===ln.AWAKE&&i<r?(this.sleepState=ln.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(ln.sleepyEvent)):n===ln.SLEEPY&&i>r?this.wakeUp():n===ln.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ln.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ln.SLEEPING||this.type===ln.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new ye),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new ye,s=new Gr;return n&&r.copy(n),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=n[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=Ywe,o=Xwe,a=this.quaternion,l=this.aabb,c=Kwe;for(let u=0;u!==r;u++){const h=e[u];a.vmult(n[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===u?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=Jwe,r=Zwe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new ye),this.type!==ln.DYNAMIC)return;this.sleepState===ln.SLEEPING&&this.wakeUp();const i=exe;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new ye),this.type!==ln.DYNAMIC)return;const i=txe,r=nxe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===ln.DYNAMIC&&(this.sleepState===ln.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==ln.DYNAMIC)return;this.sleepState===ln.SLEEPING&&this.wakeUp();const i=n,r=ixe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=rxe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==ln.DYNAMIC)return;const i=sxe,r=oxe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=axe;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),YA.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new ye;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==ln.DYNAMIC&&this.type!==ln.KINEMATIC||this.sleepState===ln.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,v=this.angularFactor,w=l.x*v.x,P=l.y*v.y,V=l.z*v.z;s.x+=e*(m[0]*w+m[1]*P+m[2]*V),s.y+=e*(m[3]*w+m[4]*P+m[5]*V),s.z+=e*(m[6]*w+m[7]*P+m[8]*V),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),n&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ln.idCounter=0,ln.COLLIDE_EVENT_NAME="collide",ln.DYNAMIC=1,ln.STATIC=2,ln.KINEMATIC=4,ln.AWAKE=0,ln.SLEEPY=1,ln.SLEEPING=2,ln.wakeupEvent={type:"wakeup"},ln.sleepyEvent={type:"sleepy"},ln.sleepEvent={type:"sleep"};const Ywe=new ye,Xwe=new Gr,Kwe=new or,Jwe=new $l,Zwe=new $l,exe=(new $l,new ye),txe=new ye,nxe=new ye,ixe=new ye,rxe=new ye,sxe=new ye,oxe=new ye,axe=new ye;new ye,new ye,new Gr,new ye,new ye,new ye,new ye;class lv{constructor(){this.rayFromWorld=new ye,this.rayToWorld=new ye,this.hitNormalWorld=new ye,this.hitPointWorld=new ye,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let X6,K6,J6,Z6,Q6,e5,t5;X6=sn.types.SPHERE,K6=sn.types.PLANE,J6=sn.types.BOX,Z6=sn.types.CYLINDER,Q6=sn.types.CONVEXPOLYHEDRON,e5=sn.types.HEIGHTFIELD,t5=sn.types.TRIMESH;class bs{get[X6](){return this._intersectSphere}get[K6](){return this._intersectPlane}get[J6](){return this._intersectBox}get[Z6](){return this._intersectConvex}get[Q6](){return this._intersectConvex}get[e5](){return this._intersectHeightfield}get[t5](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new ye),void 0===n&&(n=new ye),this.from=e.clone(),this.to=n.clone(),this.direction=new ye,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=bs.ANY,this.result=new lv,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||bs.ANY,this.result=n.result||new lv,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(n5),vN.length=0,e.broadphase.aabbQuery(e,n5,vN),this.intersectBodies(vN),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=pxe,s=gxe;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!i||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(l,s,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function Rxe(t,e,n){n.vsub(t,Wf);const i=Wf.dot(e);return e.scale(i,KA),KA.vadd(t,KA),n.distanceTo(KA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,s)}_intersectPlane(e,n,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new ye(0,0,1);n.vmult(c,c);const u=new ye;o.vsub(i,u);const h=u.dot(c);if(a.vsub(i,u),h*u.dot(c)>0||o.distanceTo(a)<h)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const m=new ye,v=new ye,w=new ye;o.vsub(i,m);const P=-c.dot(m)/g;l.scale(P,v),o.vadd(v,w),this.reportIntersection(c,w,s,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,s=this.from;n.x=Math.min(r.x,s.x),n.y=Math.min(r.y,s.y),n.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,n,i,r,s){const o=mxe;o.from.copy(this.from),o.to.copy(this.to),Ei.pointToLocalFrame(i,n,o.from,o.from),Ei.pointToLocalFrame(i,n,o.to,o.to),o.updateDirection();const a=_xe;let l,c,u,h;l=c=0,u=h=e.data.length-1;const f=new or;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=l;g<u;g++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),Ei.pointToWorldFrame(i,n,e.pillarOffset,XA),this._intersectConvex(e.pillarConvex,n,XA,r,s,r5),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),Ei.pointToWorldFrame(i,n,e.pillarOffset,XA),this._intersectConvex(e.pillarConvex,n,XA,r,s,r5)}}}_intersectSphere(e,n,i,r,s){const o=this.from,a=this.to,c=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=u**2-4*c*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),g=yxe,m=vxe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const v=(-u-Math.sqrt(f))/(2*c),w=(-u+Math.sqrt(f))/(2*c);if(v>=0&&v<=1&&(o.lerp(a,v,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(o.lerp(a,w,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,n,i,r,s,o){const a=bxe,l=s5,c=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,w=m.distanceTo(this.to),P=c?c.length:u.length,V=this.result;for(let le=0;!V.shouldStop&&le<P;le++){const re=c?c[le]:le,Ie=u[re],Ne=f[re],it=n,ut=i;l.copy(h[Ie[0]]),it.vmult(l,l),l.vadd(ut,l),l.vsub(m,l),it.vmult(Ne,a);const qe=g.dot(a);if(Math.abs(qe)<this.precision)continue;const dt=a.dot(l)/qe;if(!(dt<0)){g.scale(dt,_a),_a.vadd(m,_a),ql.copy(h[Ie[0]]),it.vmult(ql,ql),ut.vadd(ql,ql);for(let yt=1;!V.shouldStop&&yt<Ie.length-1;yt++){kc.copy(h[Ie[yt]]),jc.copy(h[Ie[yt+1]]),it.vmult(kc,kc),it.vmult(jc,jc),ut.vadd(kc,kc),ut.vadd(jc,jc);const Ct=_a.distanceTo(m);!bs.pointInTriangle(_a,ql,kc,jc)&&!bs.pointInTriangle(_a,kc,ql,jc)||Ct>w||this.reportIntersection(a,_a,s,r,re)}}}}_intersectTrimesh(e,n,i,r,s,o){const a=Exe,l=Ixe,c=Dxe,u=s5,h=Axe,f=Sxe,g=Cxe,m=Mxe,v=Txe,w=e.indices,P=this.from,V=this.to,le=this.direction;c.position.copy(i),c.quaternion.copy(n),Ei.vectorToLocalFrame(i,n,le,h),Ei.pointToLocalFrame(i,n,P,f),Ei.pointToLocalFrame(i,n,V,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const re=f.distanceSquared(g);e.tree.rayQuery(this,c,l);for(let Ie=0,Ne=l.length;!this.result.shouldStop&&Ie!==Ne;Ie++){const it=l[Ie];e.getNormal(it,a),e.getVertex(w[3*it],ql),ql.vsub(f,u);const ut=h.dot(a),qe=a.dot(u)/ut;if(qe<0)continue;h.scale(qe,_a),_a.vadd(f,_a),e.getVertex(w[3*it+1],kc),e.getVertex(w[3*it+2],jc);const dt=_a.distanceSquared(f);!bs.pointInTriangle(_a,kc,ql,jc)&&!bs.pointInTriangle(_a,ql,kc,jc)||dt>re||(Ei.vectorToWorldFrame(n,a,v),Ei.pointToWorldFrame(i,n,_a,m),this.reportIntersection(v,m,s,r,it))}l.length=0}reportIntersection(e,n,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(n),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case bs.ALL:this.hasHit=!0,c.set(o,a,e,n,i,r,l),c.hasHit=!0,this.callback(c);break;case bs.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,n,i,r,l));break;case bs.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,n,i,r,l),c.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,Wf),i.vsub(n,cv),e.vsub(n,bN);const s=Wf.dot(Wf),o=Wf.dot(cv),a=Wf.dot(bN),l=cv.dot(cv),c=cv.dot(bN);let u,h;return(u=l*a-o*c)>=0&&(h=s*c-o*a)>=0&&u+h<s*l-o*o}}bs.CLOSEST=1,bs.ANY=2,bs.ALL=4;const n5=new or,vN=[],cv=new ye,bN=new ye,pxe=new ye,gxe=new Gr,_a=new ye,ql=new ye,kc=new ye,jc=new ye;new ye,new lv;const r5={faceList:[0]},XA=new ye,mxe=new bs,_xe=[],yxe=new ye,vxe=new ye,bxe=new ye,s5=(new ye,new ye,new ye),Exe=new ye,Axe=new ye,Sxe=new ye,Cxe=new ye,Txe=new ye,Mxe=new ye;new or;const Ixe=[],Dxe=new Ei,Wf=new ye,KA=new ye;new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new bs,new ye,new ye,new ye,new ye(1,0,0),new ye(0,1,0),new ye(0,0,1),new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new or,new ye,new or,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new or,new ye,new Ei,new or,new ye,new ye,new ye,new ye,new ye,new Gr,new Gr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new or,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Gr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new or,new bs;const Ls=globalThis.performance||{};if(!Ls.now){let t=Date.now();Ls.timing&&Ls.timing.navigationStart&&(t=Ls.timing.navigationStart),Ls.now=()=>Date.now()-t}function SN(){return SN=D(function*(t){console.log("Starting Collisioning");const e=t.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Un(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new or({lowerBound:new ye(...l.map((u,h)=>Math.min(u,c[h]))),upperBound:new ye(...c.map((u,h)=>Math.max(u,l[h])))})}}),n=[];for(const o of t.filter(a=>!!a.scenegraph)){const a=yield G0(o.scenegraph,Tm,{DracoLoader:G2,decompress:!0,postProcess:!0});for(const l of a.scenes)qA(l,new Un(o.transformMatrix),(c,u)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new or({lowerBound:new ye(...f.map((m,v)=>Math.min(m,g[v]))),upperBound:new ye(...g.map((m,v)=>Math.max(m,f[v])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const l of n)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),SN.apply(this,arguments)}function CN(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new Cwe;break;case"cone":i=new Dwe;break;case"cylinder":i=new Rwe;break;default:i=new Bwe}return new qO({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:yi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function R5(t,e,n){if(e&&0!==e.length)return new GO({id:t,pickable:!0,data:e.map(i=>({...i,position:new Un(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}new ye;let F1e=(()=>{class t extends kO{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:n}=this.props;this.setState({data:n??[],zoomOpacity:.8,doCollisions:!1}),U6()}renderLayers(){const n=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of n.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=H6({scenegraph:o.scenegraph},t.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const l of a)s.push(new uN({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?n.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:yi.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?kwe(l.scenegraphNode,r[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===o?(s.push(R5("text",a.filter(l=>l.unpickable),{pickable:!1})),s.push(R5("textPickable",a.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===o?s.push(CN(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(CN(o,a.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(CN(`${o}Pickable`,a.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return n.doCollisions&&function L1e(t){SN.apply(this,arguments)}(n.data),s.filter(o=>!!o)}getPickingInfo(n){return n.info}}return t})();function O5(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),O5(n,e);return e}function TN(){return TN=D(function*(t,e,n,i){U6();const r=yield H6({scenegraph:t,scenegraphNode:n},i),s={},o=[];e=new Un(e??Un.IDENTITY);for(const a of r.scenes)qA(a,e,(l,c)=>{const u={"@id":l.name||l.id,"@type":"ProcessedNode",transformMatrix:new Un(c),geometry:"wireframe",node:l};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:u["@id"],transformMatrix:new Un(e||Un.IDENTITY),tooltip:l.name||l.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:l}),l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=c.transformAsPoint(h.attributes.POSITION.min,[]),g=c.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new or({lowerBound:new ye(...f.map((m,v)=>Math.min(m,g[v]))),upperBound:new ye(...g.map((m,v)=>Math.max(m,f[v])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(l=>!l.bbox)){for(const l of O5(a.node).map(c=>s[c]).filter(c=>c.bbox))a.bbox?a.bbox.extend(l.bbox):a.bbox=l.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const l=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(l)).clone().vmul(new ye(.5,.5,.5)),f=a.center=l.clone().vadd(h);a.transformMatrix=new Un(Un.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),TN.apply(this,arguments)}class Xf{constructor(e){this.deckProps=e,this.bodyUILayer=new F1e({}),this.nodeClickSubject=new Jt,this.nodeHoverStartSubject=new Jt,this.nodeHoverStopSubject=new Jt,this.sceneRotationSubject=new Ji([0,0]),this.nodeDragStartSubject=new Jt,this.nodeDragSubject=new Jt,this.nodeDragEndSubject=new Jt,this.nodeClick$=this.nodeClickSubject.pipe(ju()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ju()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ju()),this.sceneRotation$=this.sceneRotationSubject.pipe(ju()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ju()),this.nodeDrag$=this.nodeDragSubject.pipe(ju()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ju());const n={...e,views:["orthographic"===e.camera?new HD({flipY:!1,near:-1e3}):new ZH({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(n.effects=[new xR({ambientLight:new s8({color:[255,255,255],intensity:10})})]),this.deck=new AO(n),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return D(function*(){for(;!e.bodyUILayer.state;)yield new Promise(n=>{setTimeout(n,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let n=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);n=i?.05:n,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,n):this.bodyUILayer.setState({data:e,zoomOpacity:n})}}debugSceneNodeProcessing(e,n){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new Un([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function B1e(t,e,n,i){return TN.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:n})})}zoomTo(e){const n=new Un(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:n.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:n}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object?.["@id"]?n!==e.object&&(n&&this.nodeHoverStopSubject.next(n),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):n&&(this.nodeHoverStopSubject.next(n),this.lastHovered=void 0)}_onClick(e,n){e.picked&&e.object?.["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:n?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(e){if(e.interactionState?.isZooming){const n=this.bodyUILayer.state,i=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);n.zoomOpacity!==i&&this.bodyUILayer.setState({data:n.data,zoomOpacity:i})}this.deck.setProps({viewState:{...e.viewState}}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,n){this._dragEvent(e,n,this.nodeDragStartSubject)}_onDrag(e,n){this._dragEvent(e,n,this.nodeDragSubject)}_onDragEnd(e,n){this._dragEvent(e,n,this.nodeDragEndSubject)}_dragEvent(e,n,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:n})}}Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],Xf.prototype,"_onHover",null),Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object,Object]),kt("design:returntype",void 0)],Xf.prototype,"_onClick",null),Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],Xf.prototype,"_onViewStateChange",null),Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object,MouseEvent]),kt("design:returntype",void 0)],Xf.prototype,"_onDragStart",null),Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object,MouseEvent]),kt("design:returntype",void 0)],Xf.prototype,"_onDrag",null),Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[Object,MouseEvent]),kt("design:returntype",void 0)],Xf.prototype,"_onDragEnd",null);const k1e=["bodyCanvas"];let j1e=(()=>{class t{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new _n,this.nodeDrag=new _n,this.nodeClick=new _n,this.nodeHoverStart=new _n,this.nodeHoverStop=new _n,this.initialized=new _n,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(n){this._scene=n,this.bodyUI?.setScene(n)}get rotation(){return this._rotation}set rotation(n){this._rotation=n,this.bodyUI?.setRotation(n)}get rotationX(){return this._rotationX}set rotationX(n){this._rotationX=n,this.bodyUI?.setRotationX(n)}get zoom(){return this._zoom}set zoom(n){this._zoom=n,this.bodyUI?.setZoom(n)}get target(){return this._target}set target(n){this._target=n,this.bodyUI?.setTarget(n)}get bounds(){return this._bounds}set bounds(n){this._bounds=n,this.zoomToBounds(n)}get camera(){return this._camera}set camera(n){this._camera=n}get interactive(){return this._interactive}set interactive(n){this._interactive=n,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(n,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/n.x),Math.log2((s-i.y)/o/n.y));this.zoom=a}}setupBodyUI(){var n=this;return D(function*(){const i=n.bodyCanvas.nativeElement,r=new Xf({id:"body-ui",canvas:i,zoom:n.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:n.interactive,camera:n.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),n.bodyUI=r,window.bodyUI=r,n.scene?.length>0&&n.bodyUI.setScene(n.scene),n.bounds&&n.zoomToBounds(n.bounds),n.target&&n.bodyUI.setTarget(n.target),n.subscriptions=[n.bodyUI.sceneRotation$.subscribe(s=>n.rotationChange.next(s)),n.bodyUI.nodeDrag$.subscribe(s=>n.nodeDrag.emit(s)),n.bodyUI.nodeClick$.subscribe(s=>n.nodeClick.emit(s)),n.bodyUI.nodeHoverStart$.subscribe(s=>n.nodeHoverStart.emit(s)),n.bodyUI.nodeHoverStop$.subscribe(s=>n.nodeHoverStop.emit(s))],n.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(n=>n.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Do(k1e,5,fi),2&i){let s;ir(s=rr())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&wf(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[["bodyCanvas",""],[1,"body-ui"]],template:function(i,r){1&i&&ts(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return t})(),N5=(()=>{class t{constructor(){this.bootstrap$=new If(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function U1e(t,e){return t===e}function MN(t,e=U1e){let n=null,i=null;function r(){return function V1e(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let H1e=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const P5=new Et("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>H1e.pop()}),L5=new Et("\u0275NGXS_STATE_FACTORY"),F5=new Et("\u0275NGXS_STATE_CONTEXT_FACTORY");function on(...t){return ys(t,b0(t))}const{isArray:G1e}=Array,{getPrototypeOf:z1e,prototype:W1e,keys:$1e}=Object;function B5(t){if(1===t.length){const e=t[0];if(G1e(e))return{args:e,keys:null};if(function q1e(t){return t&&"object"==typeof t&&z1e(t)===W1e}(e)){const n=$1e(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:Y1e}=Array;function o1(t){return Xt(e=>function X1e(t,e){return Y1e(e)?t(...e):t(e)}(t,e))}function k5(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function mv(...t){const e=aH(t),{args:n,keys:i}=B5(t),r=new At(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;ms(n[u]).subscribe(Zn(s,f=>{h||(h=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(i?k5(i,a):a),s.complete())}))}});return e?r.pipe(o1(e)):r}function rh(t,e){const n=Qe(t)?t:()=>t,i=r=>r.error(n());return new At(e?r=>e.schedule(i,0,r):i)}function sh(t){return!!t&&(t instanceof At||Qe(t.lift)&&Qe(t.subscribe))}function vi(t,e){return dn((n,i)=>{let r=0;n.subscribe(Zn(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Jo(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,ju({connector:()=>new If(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ai(t){return t<=0?()=>Ro:dn((e,n)=>{let i=0;e.subscribe(Zn(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function j5(t,e){return e?n=>n.pipe(j5((i,r)=>ms(t(i,r)).pipe(Xt((s,o)=>e(i,s,r,o))))):dn((n,i)=>{let r=0,s=null,o=!1;n.subscribe(Zn(i,a=>{s||(s=Zn(i,void 0,()=>{s=null,o&&i.complete()}),ms(t(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function Rm(t){return dn((e,n)=>{let i=!1;e.subscribe(Zn(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Yl(t){return dn((e,n)=>{let s,i=null,r=!1;i=e.subscribe(Zn(n,void 0,void 0,o=>{s=ms(t(o,Yl(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function $a(t){return dn((e,n)=>{ms(t).subscribe(Zn(n,()=>n.complete(),xt)),!n.closed&&e.subscribe(n)})}function Kf(t,e=ze){return t=t??K1e,dn((n,i)=>{let r,s=!0;n.subscribe(Zn(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function K1e(t,e){return t===e}function _r(t,e,n){const i=Qe(t)||e||n?{next:t,error:e,complete:n}:t;return i?dn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Zn(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):ze}function a1(...t){return function J1e(){return NE(1)}()(ys(t,b0(t)))}function Vc(...t){const e=b0(t);return dn((n,i)=>{(e?a1(t,n,e):a1(t,n)).subscribe(i)})}function Jf(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const z5=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?n:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),t),t},DN=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),RN=t=>t&&"object"==typeof t&&!Array.isArray(t),ON=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(RN(t)&&RN(n))for(const i in n)RN(n[i])?(t[i]||Object.assign(t,{[i]:{}}),ON(t[i],n[i])):Object.assign(t,{[i]:n[i]});return ON(t,...e)};let W5=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return aD(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return yn.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return yn.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(ct(yn),ct(sl))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const $5=new Et("ROOT_OPTIONS"),q5=new Et("ROOT_STATE_TOKEN"),Y5=new Et("FEATURE_STATE_TOKEN"),X5=new Et("NGXS_PLUGINS"),Wu="NGXS_META",K5="NGXS_OPTIONS_META",NN="NGXS_SELECTOR_META";let c1=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=W5}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ot({token:t,factory:function(n){let i=null;return n?i=new n:(r=ct($5),i=ON(new t,r)),i;var r},providedIn:"root"}),t})();class aSe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let lSe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const J5=new Et("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),cSe=new Et("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=jt(hi),e=t.get(J5);return t.get(e||(typeof On.Zone<"u"?W5:lSe))}});function PN(t){if(!t.hasOwnProperty(Wu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Wu,{value:e})}return Zf(t)}function Zf(t){return t[Wu]}function u1(t){return t[NN]}function Z5(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function uSe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function dSe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}function _Se(...t){return function Om(t,e,n=bSe){const i=function wSe(t){return t.reduce((e,n)=>(e[Jf(n)]=!0,e),{})}(t),r=e&&function xSe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(s){return s.pipe(function ySe(t,e){return vi(n=>{const i=Jf(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function bSe(){return Xt(t=>t.action)}function d1(t){return e=>new At(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let Q5=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(ct(cSe))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function e9(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const s=e.pop();s&&t(...s)}n=!1}}}class ESe extends Jt{constructor(){super(...arguments),this._orderedNext=e9(e=>super.next(e))}next(e){this._orderedNext(e)}}class ASe extends Ji{constructor(e){super(e),this._orderedNext=e9(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let t9=(()=>{class t extends ESe{ngOnDestroy(){this.complete()}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Wi(t)))(i||t)}})(),t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const n9=t=>(...e)=>t.shift()(...e,(...i)=>n9(t)(...i));let i9=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(Ao));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(ct(Ui))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),FN=(()=>{class t extends ASe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),BN=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(ct(t,12),ct(X5,8))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})(),r9=(()=>{class t extends Jt{}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Wi(t)))(i||t)}})(),t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CSe=(()=>{class t{constructor(n,i,r,s,o,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function SSe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new At(r=>(i=!0,n.pipe(d1(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?on(this._stateStream.getValue()):mv(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return n9([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(l=>this._actions.next(l)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(Jo())}getActionResultStream(n){return this._actionResults.pipe(vi(i=>i.action===n&&"DISPATCHED"!==i.status),Ai(1),Jo())}createDispatchObservable(n){return n.pipe(j5(i=>{switch(i.status){case"SUCCESSFUL":return on(this._stateStream.getValue());case"ERRORED":return rh(i.error);default:return Ro}})).pipe(Jo())}}return t.\u0275fac=function(n){return new(n||t)(ct(t9),ct(r9),ct(BN),ct(FN),ct(Q5),ct(i9))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_v=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(ct(FN),ct(CSe),ct(c1))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kN=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>l9(i.getState(),n.path),patchState(r){const s=i.getState(),o=function TSe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(r);return a9(i,s,o,n.path)},setState(r){const s=i.getState();return function l1(t){return"function"==typeof t}(r)?a9(i,s,r,n.path):o9(i,s,r,n.path)},dispatch:r=>i.dispatch(r)}}}return t.\u0275fac=function(n){return new(n||t)(ct(_v))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o9(t,e,n,i){const r=z5(e,i,n);return t.setState(r),r}function a9(t,e,n,i){return o9(t,e,n(l9(e,i)),i)}function l9(t,e){return DN(t,e)}new RegExp("^[a-zA-Z0-9_]+$");let c9=(()=>{class t{}return t.type="@@INIT",t})(),u9=(()=>{class t{constructor(n){this.addedStates=n}}return t.type="@@UPDATE_STATE",t})();new Et("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Nm=(()=>{class t{constructor(n,i,r,s,o,a,l){this._injector=n,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=MN(()=>{const c=this;function u(f){const g=c.statePaths[f];return g?Z5(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},c._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(n){let i=n;return Array.isArray(n)?i=n.slice():function mSe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?i=Object.assign({},n):void 0===n&&(i={}),i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function hSe(t){const e=n=>t.find(r=>r===n)[Wu].name;return t.reduce((n,i)=>{const{name:r,children:s}=i[Wu];return n[r]=(s||[]).map(e),n},{})}(i),s=function gSe(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(o=>{n[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),o=function pSe(t,e={}){const n=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=n(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function fSe(t){return t.reduce((e,n)=>(e[n[Wu].name]=n,e),{})}(i),l=[];for(const c of s){const u=a[c],h=o[c],f=u[Wu];this.addRuntimeInfoToMeta(f,h);const g={name:c,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:t._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(c,h)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((o,a)=>z5(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Jt;this._actionsSubscription=this._actions.pipe(vi(i=>"DISPATCHED"===i.status),_s(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(Xt(()=>({action:r,status:"SUCCESSFUL"})),Rm({action:r,status:"CANCELED"}),Yl(s=>on({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=Jf(i),s=[];let o=!1;for(const a of this.states){const l=a.actions[r];if(l)for(const c of l){const u=this._stateContextFactory.createStateContext(a);try{let h=a.instance[c.fn](u,i);h instanceof Promise&&(h=ys(h)),sh(h)?(h=h.pipe(_s(f=>f instanceof Promise?ys(f):sh(f)?f:on(f)),Rm({})),c.options.cancelUncompleted&&(h=h.pipe($a(n.pipe(_Se(i)))))):h=on({}).pipe(Jo()),s.push(h)}catch(h){s.push(rh(h))}o=!0}}return s.length||s.push(on({})),mv(s)}addToStatesMap(n){const i=[],r=this.statesByName;for(const s of n){const o=Zf(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==DN(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(ct(Ui),ct(c1),ct(t,12),ct(t9),ct(r9),ct(kN),ct(P5,8))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})();function d9(t){const e=u1(t)||Zf(t);return e&&e.makeRootSelector||(()=>t)}let $u=(()=>{class t{constructor(n,i,r,s,o,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(d1(this._internalExecutionStrategy),Jo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(Xt(i),Yl(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?on(void 0):rh(r)}),Kf(),d1(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(Ai(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(d1(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return d9(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(o)}}}return t.\u0275fac=function(n){return new(n||t)(ct(FN),ct(_v),ct(c1),ct(Q5),ct(Nm),ct(P5,8))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),f1=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(ct($u),ct(c1))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h9=(()=>{class t{constructor(n,i,r,s,o){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new Jt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(vi(()=>!!i),_r(()=>this._invokeInitOnStates(i.states)),_s(()=>this._bootstrapper.appBootstrapped$),vi(r=>!!r),Yl(r=>(this._internalErrorReporter.reportErrorSafely(r),Ro)),$a(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>DN(s,i.path)).pipe(Vc(void 0),dn((t,e)=>{let n,i=!1;t.subscribe(Zn(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))}),$a(this._destroy$)).subscribe(([s,o])=>{const a=new aSe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(ct($u),ct(i9),ct(_v),ct(kN),ct(N5))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),USe=(()=>{class t{constructor(n,i,r,s,o=[],a){const l=n.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),n.connectActionHandlers(),a.ngxsBootstrap(new c9,l)}}return t.\u0275fac=function(n){return new(n||t)(ct(Nm),ct(_v),ct($u),ct(f1),ct(q5,8),ct(h9))},t.\u0275mod=ia({type:t}),t.\u0275inj=Uo({}),t})(),VSe=(()=>{class t{constructor(n,i,r,s=[],o){const a=t.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new u9(l.defaults),l))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(ct($u),ct(_v),ct(Nm),ct(Y5,8),ct(h9))},t.\u0275mod=ia({type:t}),t.\u0275inj=Uo({}),t})(),HSe=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:USe,providers:[Nm,BN,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:VSe,providers:[Nm,BN,...n,{provide:Y5,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:J5,useValue:i.executionStrategy},{provide:q5,useValue:n},{provide:$5,useValue:i},{provide:sE,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[N5]},{provide:F5,useExisting:kN},{provide:L5,useExisting:Nm}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ia({type:t}),t.\u0275inj=Uo({}),t})();function jN(t,e){return(n,i)=>{const r=PN(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function UN(t){return e=>{const n=e,i=PN(n),r=Object.getPrototypeOf(n),s=function GSe(t,e){return Object.assign(Object.assign({},t[K5]||{}),e)}(r,t);(function zSe(t){const{meta:e,inheritedStateClass:n,optionsWithInheritance:i}=t,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;if(n.hasOwnProperty(Wu)){const l=n[Wu]||{};e.actions=Object.assign(Object.assign({},e.actions),l.actions)}e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),n[K5]=s}}const WSe=36;function p1(t,...e){return function(n,i){const r=i.toString(),s=`__${r}__selector`,o=function qSe(t,e,n=[]){return e=e||function YSe(t){const e=t.length-1;return t.charCodeAt(e)===WSe?t.slice(0,e):t}(t),"string"==typeof e?Z5(n.length?[e,...n]:e.split("."),f1.config):e}(r,t,e);Object.defineProperties(n,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function $Se(t){return f1.store||function oSe(){throw new Error("You have forgotten to import the NGXS module!")}(),f1.store.select(t)}(o))}}})}}const f9="NGXS_SELECTOR_OPTIONS_META",g1={getOptions:t=>t&&t[f9]||{},defineOptions:(t,e)=>{t&&(t[f9]=e)}};function XSe(t,e){const n=function LN(t){return t.hasOwnProperty(NN)||Object.defineProperty(t,NN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),u1(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function KSe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},g1.getOptions(t.containerClass)||{}),g1.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function yv(t,e,n){const i=function BSe(t,e){const n=e&&e.containerClass,r=MN(function(...o){const a=t.apply(n,o);return a instanceof Function?MN.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=XSe(e,n);return r.makeRootSelector=function FSe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function kSe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),o=function jSe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&Zf(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>d9(a)(t));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,t,e);return function(a){const l=r.map(c=>c(a));try{return n(...l)}catch(c){if(c instanceof TypeError&&s.suppressErrors)return;throw c}}}}(r,t,i),i}function Pm(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,s=yv(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let p9=(()=>{class t{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(Su),st(fi))};static#t=this.\u0275dir=$t({type:t})}return t})(),Qf=(()=>{class t extends p9{static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Wi(t)))(r||t)}})();static#t=this.\u0275dir=$t({type:t,features:[pi]})}return t})();const Xl=new Et(""),eCe={provide:Xl,useExisting:Qn(()=>_1),multi:!0},nCe=new Et("");let _1=(()=>{class t extends p9{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function tCe(){const t=kd()?kd().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(Su),st(fi),st(nCe,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Vi("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Ri([eCe]),pi]})}return t})();function oh(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function m9(t){return null!=t&&"number"==typeof t.length}const Fo=new Et(""),ah=new Et(""),iCe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class rCe{static min(e){return function _9(t){return e=>{if(oh(e.value)||oh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function y9(t){return e=>{if(oh(e.value)||oh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function v9(t){return oh(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function b9(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function w9(t){return oh(t.value)||iCe.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function x9(t){return e=>oh(e.value)||!m9(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function E9(t){return e=>m9(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function A9(t){if(!t)return y1;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(oh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return D9(e)}static composeAsync(e){return R9(e)}}function y1(t){return null}function S9(t){return null!=t}function C9(t){return Kg(t)?ys(t):t}function T9(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function M9(t,e){return e.map(n=>n(t))}function I9(t){return t.map(e=>function sCe(t){return!t.validate}(e)?e:n=>e.validate(n))}function D9(t){if(!t)return null;const e=t.filter(S9);return 0==e.length?null:function(n){return T9(M9(n,e))}}function VN(t){return null!=t?D9(I9(t)):null}function R9(t){if(!t)return null;const e=t.filter(S9);return 0==e.length?null:function(n){return mv(M9(n,e).map(C9)).pipe(Xt(T9))}}function HN(t){return null!=t?R9(I9(t)):null}function O9(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function N9(t){return t._rawValidators}function P9(t){return t._rawAsyncValidators}function GN(t){return t?Array.isArray(t)?t:[t]:[]}function v1(t,e){return Array.isArray(t)?t.includes(e):t===e}function L9(t,e){const n=GN(e);return GN(t).forEach(r=>{v1(n,r)||n.push(r)}),n}function F9(t,e){return GN(e).filter(n=>!v1(t,n))}class B9{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Zo extends B9{get formDirective(){return null}get path(){return null}}class qu extends B9{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class k9{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let j9=(()=>{class t extends k9{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(qu,2))};static#t=this.\u0275dir=$t({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&br("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[pi]})}return t})(),U9=(()=>{class t extends k9{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(Zo,10))};static#t=this.\u0275dir=$t({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&br("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[pi]})}return t})();const vv="VALID",w1="INVALID",Lm="PENDING",bv="DISABLED";function $N(t){return(x1(t)?t.validators:t)||null}function qN(t,e){return(x1(e)?e.asyncValidators:t)||null}function x1(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class YN{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vv}get invalid(){return this.status===w1}get pending(){return this.status==Lm}get disabled(){return this.status===bv}get enabled(){return this.status!==bv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(L9(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(L9(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F9(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F9(e,this._rawAsyncValidators))}hasValidator(e){return v1(this._rawValidators,e)}hasAsyncValidator(e){return v1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=bv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=vv,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vv||this.status===Lm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bv:vv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lm,this._hasOwnPendingAsyncValidator=!0;const n=C9(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?bv:this.errors?w1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lm)?Lm:this._anyControlsHaveStatus(w1)?w1:vv}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){x1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cCe(t){return Array.isArray(t)?VN(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uCe(t){return Array.isArray(t)?HN(t):t||null}(this._rawAsyncValidators)}}class XN extends YN{constructor(e,n,i){super($N(n),qN(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function G9(t,e,n){t._forEachChild((i,r)=>{if(void 0===n[r])throw new St(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function H9(t,e,n){const i=t.controls;if(!(e?Object.keys(i):i).length)throw new St(1e3,"");if(!i[n])throw new St(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const wv=new Et("CallSetDisabledState",{providedIn:"root",factory:()=>KN}),KN="always";function xv(t,e,n=KN){JN(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function fCe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&z9(t,e)})}(t,e),function gCe(t,e){const n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function pCe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&z9(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function hCe(t,e){if(e.valueAccessor.setDisabledState){const n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function A1(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),C1(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function S1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function JN(t,e){const n=N9(t);null!==e.validator?t.setValidators(O9(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=P9(t);null!==e.asyncValidator?t.setAsyncValidators(O9(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();S1(e._rawValidators,r),S1(e._rawAsyncValidators,r)}function C1(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=N9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const r=P9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}const i=()=>{};return S1(e._rawValidators,i),S1(e._rawAsyncValidators,i),n}function z9(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function W9(t,e){JN(t,e)}function $9(t,e){t._syncPendingControls(),e.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const bCe={provide:Zo,useExisting:Qn(()=>Av)},Ev=Promise.resolve();let Av=(()=>{class t extends Zo{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new XN({},VN(n),HN(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ev.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),xv(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ev.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ev.then(()=>{const i=this._findContainer(n.path),r=new XN({});W9(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ev.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Ev.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,$9(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(st(Fo,10),st(ah,10),st(wv,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Vi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[qt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ri([bCe]),pi]})}return t})();function q9(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Y9(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const tP=class extends YN{constructor(e=null,n,i){super($N(n),qN(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),x1(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Y9(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){q9(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){q9(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Y9(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wCe=tP;Promise.resolve();let Q9=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const iW=new Et(""),ICe={provide:qu,useExisting:Qn(()=>nP)};let nP=(()=>{class t extends qu{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new _n,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=function eP(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===_1?n=s:function yCe(t){return Object.getPrototypeOf(t.constructor)===Qf}(s)?i=s:r=s}),r||i||n||null}(0,r)}ngOnChanges(n){if(this._isControlChanged(n)){const i=n.form.previousValue;i&&A1(i,this,!1),xv(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function QN(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&A1(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||t)(st(Fo,10),st(ah,10),st(Xl,10),st(iW,8),st(wv,8))};static#n=this.\u0275dir=$t({type:t,selectors:[["","formControl",""]],inputs:{form:[qt.None,"formControl","form"],isDisabled:[qt.None,"disabled","isDisabled"],model:[qt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ri([ICe]),pi,Rr]})}return t})();const DCe={provide:Zo,useExisting:Qn(()=>T1)};let T1=(()=>{class t extends Zo{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _n,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(C1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return xv(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){A1(n.control||null,n,!1),function vCe(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,$9(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&(A1(i||null,n),(t=>t instanceof tP)(r)&&(xv(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);W9(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function mCe(t,e){return C1(t,e)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JN(this.form,this),this._oldForm&&C1(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(st(Fo,10),st(ah,10),st(wv,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&Vi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[qt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ri([DCe]),pi,Rr]})}return t})();const Sv=vt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _W(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;t.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):n?i(e.defaultValue):r(new Sv)}})})}let lP;try{lP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lP=!1}let Fm,ya=(()=>{class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?jd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(ct(sl))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yW=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function vW(){if(Fm)return Fm;if("object"!=typeof document||!document)return Fm=new Set(yW),Fm;let t=document.createElement("input");return Fm=new Set(yW.filter(e=>(t.setAttribute("type",e),t.type===e))),Fm}let Cv,tp,cP;function Tv(t){return function XCe(){if(null==Cv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Cv=!0}))}finally{Cv=Cv||!1}return Cv}()?t:!!t.capture}function KCe(){if(null==tp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tp=!1,tp;if("scrollBehavior"in document.documentElement.style)tp=!0;else{const t=Element.prototype.scrollTo;tp=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return tp}function uP(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Yu(t){return t.composedPath?t.composedPath()[0]:t.target}function bW(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function lh(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class pTe extends Lt{constructor(e,n){super()}schedule(e,n=0){return this}}const D1={setInterval(t,e,...n){const{delegate:i}=D1;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=D1;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class fP extends pTe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return D1.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&D1.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,wt(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class Iv{constructor(e,n=Iv.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}Iv.now=mD.now;class pP extends Iv{constructor(e,n=Iv.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const R1=new pP(fP),gTe=R1;function O1(t){return null!=t&&"false"!=`${t}`}function SW(t,e=0){return function _Te(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function CW(t){return Array.isArray(t)?t:[t]}function ws(t){return null==t?"":"string"==typeof t?t:`${t}px`}function ch(t){return t instanceof fi?t.nativeElement:t}function MW(t,e,n){const i=IW(t,e);n=n.trim(),!i.some(r=>r.trim()===n)&&(i.push(n),t.setAttribute(e,i.join(" ")))}function gP(t,e,n){const i=IW(t,e);n=n.trim();const r=i.filter(s=>s!==n);r.length?t.setAttribute(e,r.join(" ")):t.removeAttribute(e)}function IW(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}class DW{constructor(e,n){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Jt,this._typeaheadSubscription=Lt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this._pressedLetters=[],this.tabOut=new Jt,this.change=new Jt,e instanceof ef?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Bx(e)&&(this._effectRef=QU(()=>this._itemsChanged(e()),{injector:n}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(_r(n=>this._pressedLetters.push(n)),function mTe(t,e=R1){return dn((n,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+t,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}n.subscribe(Zn(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(e),vi(()=>this._pressedLetters.length>0),Xt(()=>this._pressedLetters.join(""))).subscribe(n=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(n)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){const n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){const n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||lh(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const n=this._getItemsArray(),i="number"==typeof e?e:n.indexOf(e);this._activeItem=n[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const n=this._getItemsArray();for(let i=1;i<=n.length;i++){const r=(this._activeItemIndex+e*i+n.length)%n.length;if(!this._skipPredicateFn(n[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=n])return;this.setActiveItem(e)}}_getItemsArray(){return Bx(this._items)?this._items():this._items instanceof ef?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const n=e.indexOf(this._activeItem);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n)}}}class wTe extends DW{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let mP=(()=>{class t{constructor(n){this._platform=n}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return function ETe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(n)&&"visible"===getComputedStyle(n).visibility}isTabbable(n){if(!this._platform.isBrowser)return!1;const i=function xTe(t){try{return t.frameElement}catch{return null}}(function RTe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(n));if(i&&(-1===OW(i)||!this.isVisible(i)))return!1;let r=n.nodeName.toLowerCase(),s=OW(n);return n.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function ITe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(n))&&("audio"===r?!!n.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||n.hasAttribute("controls")):n.tabIndex>=0)}isFocusable(n,i){return function DTe(t){return!function STe(t){return function TTe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function ATe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function CTe(t){return function MTe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||RW(t))}(n)&&!this.isDisabled(n)&&(i?.ignoreVisibility||this.isVisible(n))}static#e=this.\u0275fac=function(i){return new(i||t)(ct(ya))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function RW(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function OW(t){if(!RW(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class NW{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ai(1)).subscribe(e)}}let PW=(()=>{class t{constructor(n,i,r){this._checker=n,this._ngZone=i,this._document=r}create(n,i=!1){return new NW(n,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(mP),ct(yn),ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function LW(t){return 0===t.buttons||0===t.detail}function FW(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const OTe=new Et("cdk-input-modality-detector-options"),NTe={ignoreKeys:[18,17,224,91,16]},Bm=Tv({passive:!0,capture:!0});let PTe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(n,i,r,s){this._platform=n,this._mostRecentTarget=null,this._modality=new Ji(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Yu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(LW(o)?"keyboard":"mouse"),this._mostRecentTarget=Yu(o))},this._onTouchstart=o=>{FW(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Yu(o))},this._options={...NTe,...s},this.modalityDetected=this._modality.pipe(function AW(t){return vi((e,n)=>t<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(Kf()),n.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Bm),r.addEventListener("mousedown",this._onMousedown,Bm),r.addEventListener("touchstart",this._onTouchstart,Bm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Bm),document.removeEventListener("mousedown",this._onMousedown,Bm),document.removeEventListener("touchstart",this._onTouchstart,Bm))}static#e=this.\u0275fac=function(i){return new(i||t)(ct(ya),ct(yn),ct(gi),ct(OTe,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var N1=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(N1||{});const FTe=new Et("cdk-focus-monitor-default-options"),P1=Tv({passive:!0,capture:!0});let _P=(()=>{class t{constructor(n,i,r,s,o){this._ngZone=n,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Jt,this._rootNodeFocusAndBlurListener=a=>{for(let c=Yu(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||N1.IMMEDIATE}monitor(n,i=!1){const r=ch(n);if(!this._platform.isBrowser||1!==r.nodeType)return on();const s=function ZCe(t){if(function JCe(){if(null==cP){const t=typeof document<"u"?document.head:null;cP=!(!t||!t.createShadowRoot&&!t.attachShadow)}return cP}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Jt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){const i=ch(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){const s=ch(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===N1.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused","touch"===i),n.classList.toggle("cdk-keyboard-focused","keyboard"===i),n.classList.toggle("cdk-mouse-focused","mouse"===i),n.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,this._detectionMode===N1.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const r=this._elementInfo.get(i),s=Yu(n);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(n,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,P1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,P1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($a(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,P1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,P1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((r,s)=>{(s===n||r.checkChildren&&s.contains(n))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(n){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName||n.disabled)return!1;const s=n.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(ct(yn),ct(ya),ct(PTe),ct(gi,8),ct(FTe,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const kTe=["text"],jTe=[[["mat-icon"]],"*"],UTe=["mat-icon","*"];function VTe(t,e){if(1&t&&ts(0,"mat-pseudo-checkbox",1),2&t){const n=Vr();Di("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function HTe(t,e){1&t&&ts(0,"mat-pseudo-checkbox",3),2&t&&Di("disabled",Vr().disabled)}function GTe(t,e){if(1&t&&(Pn(0,"span",4),Ul(1),Bn()),2&t){const n=Vr();xn(),o0("(",n.group.label,")")}}class jW{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){const e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,n)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}}let KTe=(()=>{class t{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var xl=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(xl||{});class JTe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=xl.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const UW=Tv({passive:!0,capture:!0});class ZTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Yu(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){const s=this._events.get(n);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,UW)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(i),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,UW)))}}const VW={enterDuration:225,exitDuration:150},HW=Tv({passive:!0,capture:!0}),GW=["mousedown","touchstart"],zW=["mouseup","mouseleave","touchend","touchcancel"];class L1{static#e=this._eventManager=new ZTe;constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ch(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...VW,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=i.radius||function eMe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,l=n-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),g=h.transitionDuration,m="none"===h.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,v=new JTe(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",v.state=xl.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let w=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const P=()=>this._finishRippleTransition(v),V=()=>this._destroyRipple(v);u.addEventListener("transitionend",P),u.addEventListener("transitioncancel",V),w={onTransitionEnd:P,onTransitionCancel:V}}),this._activeRipples.set(v,w),(m||!c)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(e.state===xl.FADING_OUT||e.state===xl.HIDDEN)return;const n=e.element,i={...VW,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=xl.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=ch(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,GW.forEach(i=>{L1._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{zW.forEach(n=>{this._triggerElement.addEventListener(n,this,HW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===xl.FADING_IN?this._startFadeOutTransition(e):e.state===xl.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=xl.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=xl.HIDDEN,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=LW(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!FW(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===xl.VISIBLE||e.config.terminateOnPointerUp&&e.state===xl.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(GW.forEach(n=>L1._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&zW.forEach(n=>e.removeEventListener(n,this,HW)))}}const tMe=new Et("mat-ripple-global-options");let nMe=(()=>{class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,i,r,s,o){this._elementRef=n,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new L1(this,i,n,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,r){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...n})}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(yn),st(ya),st(tMe,8),st(ol,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&br("mat-ripple-unbounded",r.unbounded)},inputs:{color:[qt.None,"matRippleColor","color"],unbounded:[qt.None,"matRippleUnbounded","unbounded"],centered:[qt.None,"matRippleCentered","centered"],radius:[qt.None,"matRippleRadius","radius"],animation:[qt.None,"matRippleAnimation","animation"],disabled:[qt.None,"matRippleDisabled","disabled"],trigger:[qt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return t})(),iMe=(()=>{class t{constructor(n){this._animationMode=n,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(st(ol,8))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&br("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Os],decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})();const WW=new Et("MAT_OPTION_PARENT_COMPONENT"),$W=new Et("MatOptgroup");let rMe=0;class qW{constructor(e,n=!1){this.source=e,this.isUserInput=n}}let YW=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(n){this._disabled=n}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(n,i,r,s){this._element=n,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+rMe++,this.onSelectionChange=new _n,this._stateChanges=new Jt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(13===n.keyCode||32===n.keyCode)&&!lh(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new qW(this,n))}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(Zs),st(WW,8),st($W,8))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(1&i&&Do(kTe,7),2&i){let s;ir(s=rr())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&Vi("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(xf("id",r.id),Nr("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),br("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[qt.HasDecoratorInputTransform,"disabled","disabled",ns]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[bc,Os],ngContentSelectors:UTe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){1&i&&(ka(jTe),Ii(0,VTe,1,2,"mat-pseudo-checkbox",1),Pi(1),Pn(2,"span",2,0),Pi(4,1),Bn(),Ii(5,HTe,1,1,"mat-pseudo-checkbox",3)(6,GTe,2,1,"span",4),ts(7,"div",5)),2&i&&(Rs(0,r.multiple?0:-1),xn(5),Rs(5,r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),xn(),Rs(6,r.group&&r.group._inert?6:-1),xn(),Di("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[iMe,nMe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const aMe=["addListener","removeListener"],lMe=["addEventListener","removeEventListener"],cMe=["on","off"];function km(t,e,n,i){if(Qe(n)&&(i=n,n=void 0),i)return km(t,e,n).pipe(o1(i));const[r,s]=function hMe(t){return Qe(t.addEventListener)&&Qe(t.removeEventListener)}(t)?lMe.map(o=>a=>t[o](e,a,n)):function uMe(t){return Qe(t.addListener)&&Qe(t.removeListener)}(t)?aMe.map(XW(t,e)):function dMe(t){return Qe(t.on)&&Qe(t.off)}(t)?cMe.map(XW(t,e)):[];if(!r&&xD(t))return _s(o=>km(o,e,n))(ms(t));if(!r)throw new TypeError("Invalid event target");return new At(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function XW(t,e){return n=>i=>t[n](e,i)}const Rv={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=Rv;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(s=>{n=void 0,t(s)});return new Lt(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=Rv;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=Rv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class pMe extends pP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class fMe extends fP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Rv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(Rv.cancelAnimationFrame(n),e._scheduled=void 0)}});let yP,mMe=1;const F1={};function KW(t){return t in F1&&(delete F1[t],!0)}const _Me={setImmediate(t){const e=mMe++;return F1[e]=!0,yP||(yP=Promise.resolve()),yP.then(()=>KW(e)&&t()),e},clearImmediate(t){KW(t)}},{setImmediate:yMe,clearImmediate:vMe}=_Me,B1={setImmediate(...t){const{delegate:e}=B1;return(e?.setImmediate||yMe)(...t)},clearImmediate(t){const{delegate:e}=B1;return(e?.clearImmediate||vMe)(t)},delegate:void 0};new class wMe extends pP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class bMe extends fP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=B1.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(B1.clearImmediate(n),e._scheduled=void 0)}});function vP(t=0,e,n=gTe){let i=-1;return null!=e&&(oH(e)?n=e:i=e),new At(r=>{let s=function AMe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function JW(t,e=R1){return function EMe(t){return dn((e,n)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,n.next(c)}o&&n.complete()},l=()=>{s=null,o&&n.complete()};e.subscribe(Zn(n,c=>{i=!0,r=c,s||ms(t(c)).subscribe(s=Zn(n,a,l))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}(()=>vP(t,e))}let CMe=(()=>{class t{constructor(n,i,r){this._ngZone=n,this._platform=i,this._scrolled=new Jt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new At(i=>{this._globalSubscription||this._addGlobalListener();const r=n>0?this._scrolled.pipe(JW(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):on()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){const r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(vi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(n){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,n)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,i){let r=ch(i),s=n.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>km(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(yn),ct(ya),ct(gi,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bP=(()=>{class t{constructor(n,i,r){this._platform=n,this._change=new Jt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,i=this._getWindow(),r=n.documentElement,s=r.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(JW(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(ct(ya),ct(yn),ct(gi,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const MMe=new Et("cdk-dir-doc",{providedIn:"root",factory:function IMe(){return jt(gi)}}),DMe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ov=(()=>{class t{constructor(n){this.value="ltr",this.change=new _n,n&&(this.value=function RMe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?DMe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(ct(MMe,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class wP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class xP extends wP{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class k1 extends wP{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class OMe extends wP{constructor(e){super(),this.element=e instanceof fi?e.nativeElement:e}}class EP{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof xP?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof k1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof OMe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class NMe extends EP{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let j1=(()=>{class t extends EP{constructor(n,i,r){super(),this._componentFactoryResolver=n,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new _n,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);const i=null!=n.viewContainerRef?n.viewContainerRef:this._viewContainerRef,s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),o=i.createComponent(s,i.length,n.injector||i.injector,n.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(st(Dd),st(Io),st(gi))};static#t=this.\u0275dir=$t({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[qt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[pi]})}return t})();const ZW=KCe();class PMe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ws(-this._previousScrollPosition.left),e.style.top=ws(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ZW&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ZW&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class LMe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(vi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class QW{enable(){}disable(){}attach(){}}function AP(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function e7(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class FMe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();AP(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let BMe=(()=>{class t{constructor(n,i,r,s){this._scrollDispatcher=n,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new QW,this.close=o=>new LMe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new PMe(this._viewportRuler,this._document),this.reposition=o=>new FMe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||t)(ct(CMe),ct(bP),ct(yn),ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class SP{constructor(e){if(this.scrollStrategy=new QW,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class kMe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let t7=(()=>{class t{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jMe=(()=>{class t extends t7{constructor(n,i){super(n),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi),ct(yn,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),UMe=(()=>{class t extends t7{constructor(n,i,r){super(n),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Yu(s)},this._clickListener=s=>{const o=Yu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(n){if(super.add(n),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi),ct(ya),ct(yn,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),U1=(()=>{class t{constructor(n,i){this._platform=i,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||bW()){const r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(n),bW()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gi),ct(ya))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class V1{constructor(e,n,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Jt,this._attachments=new Jt,this._detachments=new Jt,this._locationChanges=Lt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Jt,this._outsidePointerEvents=new Jt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ai(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ws(this._config.width),e.height=ws(this._config.height),e.minWidth=ws(this._config.minWidth),e.minHeight=ws(this._config.minHeight),e.maxWidth=ws(this._config.maxWidth),e.maxHeight=ws(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=CW(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe($a(Gl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const n7="cdk-overlay-connected-position-bounding-box",VMe=/([A-Za-z%]+)$/;class HMe{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Jt,this._resizeSubscription=Lt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(n7),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&np(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(n7),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return n.left<0&&(r-=n.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r,s;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){const s=r7(n);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),v=this._subtractOverflows(s.height,f,g),w=m*v;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:v===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,s=i.right-n.x,o=i7(this._overlayRef.getConfig().minHeight),a=i7(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=r7(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function GMe(t,e){return t===e||t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,i)){const r=new kMe(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===n.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)f=i.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ws(i.height),r.top=ws(i.top),r.bottom=ws(i.bottom),r.width=ws(i.width),r.left=ws(i.left),r.right=ws(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ws(s)),o&&(r.maxWidth=ws(o))}this._lastBoundingBoxSize=i,np(this._boundingBox.style,r)}_resetBoundingBoxStyles(){np(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){np(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();np(i,this._getExactOverlayY(n,e,u)),np(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ws(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ws(o.maxWidth):s&&(i.maxWidth="")),np(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ws(s.y),r}_getExactOverlayX(e,n,i){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ws(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:e7(e,i),isOriginOutsideView:AP(e,i),isOverlayClipped:e7(n,i),isOverlayOutsideView:AP(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&CW(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof fi)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function np(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i7(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(VMe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function r7(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const s7="cdk-global-overlay-wrapper";class zMe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(s7),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let g="",m="",v="";l?v="flex-start":"center"===u?(v="center",f?m=h:g=h):f?"left"===u||"end"===u?(v="flex-end",g=h):("right"===u||"start"===u)&&(v="flex-start",m=h):"left"===u||"start"===u?(v="flex-start",g=h):("right"===u||"end"===u)&&(v="flex-end",m=h),e.position=this._cssPosition,e.marginLeft=l?"0":g,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,n.justifyContent=v,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(s7),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let WMe=(()=>{class t{constructor(n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new zMe}flexibleConnectedTo(n){return new HMe(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(bP),ct(gi),ct(ya),ct(U1))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$Me=0,Kl=(()=>{class t{constructor(n,i,r,s,o,a,l,c,u,h,f,g){this.scrollStrategies=n,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(n){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new SP(n);return o.direction=o.direction||this._directionality.value,new V1(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(n){const i=this._document.createElement("div");return i.id="cdk-overlay-"+$Me++,i.classList.add("cdk-overlay-pane"),n.appendChild(i),i}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(Mu)),new NMe(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(BMe),ct(U1),ct(Dd),ct(WMe),ct(jMe),ct(Ui),ct(yn),ct(gi),ct(Ov),ct(Mf),ct(UMe),ct(ol,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var va=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(va||{});function Nv(t,e){return{type:va.Trigger,name:t,definitions:e,options:{}}}function uh(t,e=null){return{type:va.Animate,styles:e,timings:t}}function CP(t,e=null){return{type:va.Group,steps:t,options:e}}function ba(t){return{type:va.Style,styles:t,offset:null}}function dh(t,e,n){return{type:va.State,name:t,styles:e,options:n}}function ip(t,e,n=null){return{type:va.Transition,expr:t,animation:e,options:n}}function Pv(t){return new At(e=>{ms(t()).subscribe(e)})}class QMe{constructor(e){this._box=e,this._destroyed=new Jt,this._resizeSubject=new Jt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new At(n=>{const i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(vi(n=>n.some(i=>i.target===e)),Jo({bufferSize:1,refCount:!0}),$a(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let eIe=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=jt(yn)}ngOnDestroy(){for(const[,n]of this._observers)n.destroy();this._observers.clear()}observe(n,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new QMe(r)),this._observers.get(r).observe(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const tIe=["notch"],nIe=["matFormFieldNotchedOutline",""],iIe=["*"],rIe=["textField"],sIe=["iconPrefixContainer"],oIe=["textPrefixContainer"],aIe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],lIe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function cIe(t,e){1&t&&ts(0,"span",17)}function uIe(t,e){if(1&t&&(Pn(0,"label",16),Pi(1,1),Ii(2,cIe,1,0,"span",17),Bn()),2&t){const n=Vr(2);Di("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),Nr("for",n._control.id),xn(2),Rs(2,!n.hideRequiredMarker&&n._control.required?2:-1)}}function dIe(t,e){1&t&&Ii(0,uIe,3,5,"label",16),2&t&&Rs(0,Vr()._hasFloatingLabel()?0:-1)}function hIe(t,e){1&t&&ts(0,"div",5)}function fIe(t,e){}function pIe(t,e){1&t&&Ii(0,fIe,0,0,"ng-template",11),2&t&&(Vr(2),Di("ngTemplateOutlet",eE(1)))}function gIe(t,e){if(1&t&&(Pn(0,"div",7),Ii(1,pIe,1,1,null,11),Bn()),2&t){const n=Vr();Di("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),xn(),Rs(1,n._forceDisplayInfixLabel()?-1:1)}}function mIe(t,e){1&t&&(Pn(0,"div",8,2),Pi(2,2),Bn())}function _Ie(t,e){1&t&&(Pn(0,"div",9,3),Pi(2,3),Bn())}function yIe(t,e){}function vIe(t,e){1&t&&Ii(0,yIe,0,0,"ng-template",11),2&t&&(Vr(),Di("ngTemplateOutlet",eE(1)))}function bIe(t,e){1&t&&(Pn(0,"div",12),Pi(1,4),Bn())}function wIe(t,e){1&t&&(Pn(0,"div",13),Pi(1,5),Bn())}function xIe(t,e){1&t&&ts(0,"div",14)}function EIe(t,e){1&t&&(Pn(0,"div",18),Pi(1,6),Bn()),2&t&&Di("@transitionMessages",Vr()._subscriptAnimationState)}function AIe(t,e){if(1&t&&(Pn(0,"mat-hint",20),Ul(1),Bn()),2&t){const n=Vr(2);Di("id",n._hintLabelId),xn(),Fd(n.hintLabel)}}function SIe(t,e){if(1&t&&(Pn(0,"div",19),Ii(1,AIe,2,2,"mat-hint",20),Pi(2,7),ts(3,"div",21),Pi(4,8),Bn()),2&t){const n=Vr();Di("@transitionMessages",n._subscriptAnimationState),xn(),Rs(1,n.hintLabel?1:-1)}}let l7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["mat-label"]],standalone:!0})}return t})();const CIe=new Et("MatError");let TIe=0,c7=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+TIe++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(xf("id",r.id),Nr("align",null),br("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"},standalone:!0})}return t})();const u7=new Et("MatPrefix");let MIe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[qt.None,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[Ri([{provide:u7,useExisting:t}])]})}return t})();const d7=new Et("MatSuffix");let IIe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[qt.None,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[Ri([{provide:d7,useExisting:t}])]})}return t})();const h7=new Et("FloatingLabelParent");let f7=(()=>{class t{get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(n){this._elementRef=n,this._floating=!1,this._monitorResize=!1,this._resizeObserver=jt(eIe),this._ngZone=jt(yn),this._parent=jt(h7),this._resizeSubscription=new Lt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function DIe(t){if(null!==t.offsetParent)return t.scrollWidth;const n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);const i=n.scrollWidth;return n.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi))};static#t=this.\u0275dir=$t({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&br("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return t})();const p7="mdc-line-ripple--active",H1="mdc-line-ripple--deactivating";let g7=(()=>{class t{constructor(n,i){this._elementRef=n,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(H1);"opacity"===r.propertyName&&o&&s.remove(p7,H1)},i.runOutsideAngular(()=>{n.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const n=this._elementRef.nativeElement.classList;n.remove(H1),n.add(p7)}deactivate(){this._elementRef.nativeElement.classList.add(H1)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(yn))};static#t=this.\u0275dir=$t({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return t})(),m7=(()=>{class t{constructor(n,i){this._elementRef=n,this._ngZone=i,this.open=!1}ngAfterViewInit(){const n=this._elementRef.nativeElement.querySelector(".mdc-floating-label");n?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){this._notch.nativeElement.style.width=this.open&&n?`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(yn))};static#t=this.\u0275cmp=mi({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&Do(tIe,5),2&i){let s;ir(s=rr())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&br("mdc-notched-outline--notched",r.open)},inputs:{open:[qt.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Os],attrs:nIe,ngContentSelectors:iIe,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(ka(),ts(0,"div",1),Pn(1,"div",2,0),Pi(3),Bn(),ts(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const RIe={transitionMessages:Nv("transitionMessages",[dh("enter",ba({opacity:1,transform:"translateY(0%)"})),ip("void => enter",[ba({opacity:0,transform:"translateY(-5px)"}),uh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t})}return t})();const TP=new Et("MatFormField"),OIe=new Et("MAT_FORM_FIELD_DEFAULT_OPTIONS");let y7=0,LIe=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=O1(n)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}constructor(n,i,r,s,o,a,l,c){this._elementRef=n,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+y7++,this._hintLabelId="mat-mdc-hint-"+y7++,this._subscriptAnimationState="",this._destroyed=new Jt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${n.controlType}`),n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe($a(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Gl(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe($a(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe($a(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),r&&n.push(r.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const n=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(n.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;n.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(Zs),st(yn),st(Ov),st(ya),st(OIe,8),st(ol,8),st(gi))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(fl(s,l7,5),fl(s,l7,7),fl(s,_7,5),fl(s,u7,5),fl(s,d7,5),fl(s,CIe,5),fl(s,c7,5)),2&i){let o;ir(o=rr())&&(r._labelChildNonStatic=o.first),ir(o=rr())&&(r._labelChildStatic=o.first),ir(o=rr())&&(r._formFieldControl=o.first),ir(o=rr())&&(r._prefixChildren=o),ir(o=rr())&&(r._suffixChildren=o),ir(o=rr())&&(r._errorChildren=o),ir(o=rr())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(Do(rIe,5),Do(sIe,5),Do(oIe,5),Do(f7,5),Do(m7,5),Do(g7,5)),2&i){let s;ir(s=rr())&&(r._textField=s.first),ir(s=rr())&&(r._iconPrefixContainer=s.first),ir(s=rr())&&(r._textPrefixContainer=s.first),ir(s=rr())&&(r._floatingLabel=s.first),ir(s=rr())&&(r._notchedOutline=s.first),ir(s=rr())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&br("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Ri([{provide:TP,useExisting:t},{provide:h7,useExisting:t}]),Os],ngContentSelectors:lIe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(1&i){const s=Ld();ka(aIe),Ii(0,dIe,1,1,"ng-template",null,0,Uj),Pn(2,"div",4,1),Vi("click",function(a){return Vs(s),ds(r._control.onContainerClick(a))}),Ii(4,hIe,1,0,"div",5),Pn(5,"div",6),Ii(6,gIe,2,2,"div",7)(7,mIe,3,0,"div",8)(8,_Ie,3,0,"div",9),Pn(9,"div",10),Ii(10,vIe,1,1,null,11),Pi(11),Bn(),Ii(12,bIe,2,0,"div",12)(13,wIe,2,0,"div",13),Bn(),Ii(14,xIe,1,0,"div",14),Bn(),Pn(15,"div",15),Ii(16,EIe,2,1)(17,SIe,5,2),Bn()}if(2&i){let s;xn(2),br("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),xn(2),Rs(4,r._hasOutline()||r._control.disabled?-1:4),xn(2),Rs(6,r._hasOutline()?6:-1),xn(),Rs(7,r._hasIconPrefix?7:-1),xn(),Rs(8,r._hasTextPrefix?8:-1),xn(2),Rs(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),xn(2),Rs(12,r._hasTextSuffix?12:-1),xn(),Rs(13,r._hasIconSuffix?13:-1),xn(),Rs(14,r._hasOutline()?-1:14),xn(),br("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),xn(),Rs(16,"error"===(s=r._getDisplayedMessages())?16:"hint"===s?17:-1)}},dependencies:[f7,m7,vV,g7,c7],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[RIe.transitionMessages]},changeDetection:0})}return t})();function MP(t){return Xt(()=>t)}function w7(t,e){return e?n=>a1(e.pipe(Ai(1),function FIe(){return dn((t,e)=>{t.subscribe(Zn(e,xt))})}()),n.pipe(w7(t))):_s((n,i)=>ms(t(n,i)).pipe(Ai(1),MP(n)))}function x7(t,e=R1){const n=vP(t,e);return w7(()=>n)}const BIe=["panel"],kIe=["*"];function jIe(t,e){if(1&t){const n=Ld();Pn(0,"div",1,0),Vi("@panelAnimation.done",function(r){return Vs(n),ds(Vr()._animationDone.next(r))}),Pi(2),Bn()}if(2&t){const n=e.id,i=Vr();Di("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),Nr("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(n))}}const UIe=Nv("panelAnimation",[dh("void, hidden",ba({opacity:0,transform:"scaleY(0.8)"})),ip(":enter, hidden => visible",[CP([uh("0.03s linear",ba({opacity:1})),uh("0.12s cubic-bezier(0, 0, 0.2, 1)",ba({transform:"scaleY(1)"}))])]),ip(":leave, visible => hidden",[uh("0.075s linear",ba({opacity:0}))])]);let VIe=0;class HIe{constructor(e,n){this.source=e,this.option=n}}const E7=new Et("mat-autocomplete-default-options",{providedIn:"root",factory:function GIe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let zIe=(()=>{class t{get isOpen(){return this._isOpen&&this.showPanel}_setColor(n){this._color=n,this._setThemeClasses(this._classList)}set classList(n){this._classList=n&&n.length?function yTe(t,e=/\s+/){const n=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(e);for(const r of i){const s=`${r}`.trim();s&&n.push(s)}}return n}(n).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(n){this._hideSingleSelectionIndicator=n,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const n of this.options)n._changeDetectorRef.markForCheck()}constructor(n,i,r,s){this._changeDetectorRef=n,this._elementRef=i,this._defaults=r,this._activeOptionChanges=Lt.EMPTY,this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new _n,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new _n,this.opened=new _n,this.closed=new _n,this.optionActivated=new _n,this._classList={},this.id="mat-autocomplete-"+VIe++,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!r.autoActiveFirstOption,this.autoSelectActiveOption=!!r.autoSelectActiveOption,this.requireSelection=!!r.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new wTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(n=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[n]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(n){this.panel&&(this.panel.nativeElement.scrollTop=n)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(n){const i=new HIe(this,n);this.optionSelected.emit(i)}_getPanelAriaLabelledby(n){return this.ariaLabel?null:this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_setVisibilityClasses(n){n[this._visibleClass]=this.showPanel,n[this._hiddenClass]=!this.showPanel}_setThemeClasses(n){n["mat-primary"]="primary"===this._color,n["mat-warn"]="warn"===this._color,n["mat-accent"]="accent"===this._color}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||t)(st(Zs),st(fi),st(E7),st(ya))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(fl(s,YW,5),fl(s,$W,5)),2&i){let o;ir(o=rr())&&(r.options=o),ir(o=rr())&&(r.optionGroups=o)}},viewQuery:function(i,r){if(1&i&&(Do(dl,7),Do(BIe,5)),2&i){let s;ir(s=rr())&&(r.template=s.first),ir(s=rr())&&(r.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[qt.None,"aria-label","ariaLabel"],ariaLabelledby:[qt.None,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[qt.HasDecoratorInputTransform,"autoActiveFirstOption","autoActiveFirstOption",ns],autoSelectActiveOption:[qt.HasDecoratorInputTransform,"autoSelectActiveOption","autoSelectActiveOption",ns],requireSelection:[qt.HasDecoratorInputTransform,"requireSelection","requireSelection",ns],panelWidth:"panelWidth",disableRipple:[qt.HasDecoratorInputTransform,"disableRipple","disableRipple",ns],classList:[qt.None,"class","classList"],hideSingleSelectionIndicator:[qt.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ns]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[Ri([{provide:WW,useExisting:t}]),bc,Os],ngContentSelectors:kIe,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"]],template:function(i,r){1&i&&(ka(),Ii(0,jIe,3,5,"ng-template"))},dependencies:[pV],styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[UIe]},changeDetection:0})}return t})();const WIe={provide:Xl,useExisting:Qn(()=>S7),multi:!0},A7=new Et("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const t=jt(Kl);return()=>t.scrollStrategies.reposition()}});let S7=(()=>{class t{constructor(n,i,r,s,o,a,l,c,u,h,f){this._element=n,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=o,this._dir=l,this._formField=c,this._document=u,this._viewportRuler=h,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Lt.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Jt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Pv(()=>{const g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(Vc(g),qi(()=>Gl(...g.map(m=>m.onSelectionChange)))):this._zone.onStable.pipe(Ai(1),qi(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(27===g.keyCode&&!lh(g)||38===g.keyCode&&lh(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){const n=this._getWindow();typeof n<"u"&&this._zone.runOutsideAngular(()=>n.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(n){n.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const n=this._getWindow();typeof n<"u"&&n.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&gP(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Gl(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(vi(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(vi(()=>this._overlayAttached)):on()).pipe(Xt(n=>n instanceof qW?n:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Gl(km(this._document,"click"),km(this._document,"auxclick"),km(this._document,"touchend")).pipe(vi(n=>{const i=Yu(n),r=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(n){Promise.resolve(null).then(()=>this._assignOptionValue(n))}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._element.nativeElement.disabled=n}_handleKeydown(n){const i=n.keyCode,r=lh(n);if(27===i&&!r&&n.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),n.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(n):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(n){let i=n.target,r=i.value;if("number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r){if(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&r!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===n.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(n=!1){this._formField&&"auto"===this._formField.floatLabel&&(n?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return Gl(this._zone.onStable.pipe(Ai(1)),this.autocomplete.options.changes.pipe(_r(()=>this._positionStrategy.reapplyLastPosition()),x7(0))).pipe(qi(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),Ai(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(n){const i=this.autocomplete;return i&&i.displayWith?i.displayWith(n):n}_assignOptionValue(n){const i=this._getDisplayValue(n);null==n&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(n){this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}_setValueAndClose(n){const i=this.autocomplete,r=n?n.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Ai(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(n,i){this.autocomplete?.options?.forEach(r=>{r!==n&&r.selected&&r.deselect(i)})}_openPanelInternal(n=this._element.nativeElement.value){this._attachOverlay(n),this._floatLabel(),this._trackedModal&&MW(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(n){let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new k1(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=n,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const r=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&r!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const n=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=n.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=n.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new SP({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const n=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(n),this._positionStrategy=n,n}_setStrategyPositions(n){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let o;o="above"===this.position?s:"below"===this.position?i:[...i,...s],n.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const n=this.autocomplete;if(n.autoActiveFirstOption){let i=-1;for(let r=0;r<n.options.length;r++)if(!n.options.get(r).disabled){i=r;break}n._keyManager.setActiveItem(i)}else n._keyManager.setActiveItem(-1)}_canOpen(){const n=this._element.nativeElement;return!n.readOnly&&!n.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(n){const i=this.autocomplete,r=function sMe(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),s=0;for(let o=0;o<t+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(n,i.options,i.optionGroups);if(0===n&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[n];if(s){const o=s._getHostElement(),a=function oMe(t,e,n,i){return t<n?t:t+e>n+i?Math.max(0,t-i+e):n}(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const n=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!n)return;const i=this.autocomplete.id;this._trackedModal&&gP(this._trackedModal,"aria-owns",i),MW(n,"aria-owns",i),this._trackedModal=n}_clearFromModal(){this._trackedModal&&(gP(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(Kl),st(Io),st(yn),st(Zs),st(A7),st(Ov,8),st(TP,9),st(gi,8),st(bP),st(E7,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&Vi("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&i&&Nr("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[qt.None,"matAutocomplete","autocomplete"],position:[qt.None,"matAutocompletePosition","position"],connectedTo:[qt.None,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[qt.None,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[qt.HasDecoratorInputTransform,"matAutocompleteDisabled","autocompleteDisabled",ns]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[Ri([WIe]),bc,Rr]})}return t})();const C7=Tv({passive:!0});let qIe=(()=>{class t{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return Ro;const i=ch(n),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Jt,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,C7),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,C7)}}),s}stopMonitoring(n){const i=ch(n),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(ct(ya),ct(yn))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const YIe=new Et("MAT_INPUT_VALUE_ACCESSOR"),XIe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let KIe=0,JIe=(()=>{class t{get disabled(){return this._disabled}set disabled(n){this._disabled=O1(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(rCe.required)??!1}set required(n){this._required=O1(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&vW().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=O1(n)}get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}constructor(n,i,r,s,o,a,l,c,u,h){this._elementRef=n,this._platform=i,this.ngControl=r,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+KIe++,this.focused=!1,this.stateChanges=new Jt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>vW().has(m)),this._iOSKeyupListener=m=>{const v=m.target;!v.value&&0===v.selectionStart&&0===v.selectionEnd&&(v.setSelectionRange(1,1),v.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=l||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new jW(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){const n=this._getPlaceholder();if(n!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=n,n?i.setAttribute("placeholder",n):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){XIe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(ya),st(qu,10),st(Av,8),st(T1,8),st(KTe),st(YIe,10),st(qIe),st(yn),st(TP,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&Vi("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(xf("id",r.id)("disabled",r.disabled)("required",r.required),Nr("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),br("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[qt.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Ri([{provide:_7,useExisting:t}]),Rr]})}return t})();function T7(t,e){return t>=0&&t<e?t:t>=e?e:t+e<0?0:t+e}function QIe(t,e){if(1&t&&(Pn(0,"span"),Ul(1),Bn()),2&t){const n=e.$implicit;(function Bl(t){jl(m3,zZ,t,!1)})(n.styles),wf(n.classes),xn(),o0(" ",n.text,"\n")}}let eDe=(()=>{class t{constructor(){this.clsName="ccf-decorated-text",this.segments=[]}ngOnChanges(n){("text"in n||"decorations"in n)&&(this.segments=this.createSegments())}createSegments(){const{text:n}=this;if(!n)return[this.makeUndecoratedSegment(n)];const i=this.getNormalizedDecorations();if(0===i.length)return[this.makeUndecoratedSegment(n)];const r=this.createStackOps(i),s=[];let o=[],a=0;0===r[0].index&&(o=this.updateStack(o,r.shift()));for(const l of r)s.push(this.makeDecoratedSegment(n.slice(a,l.index),o)),a=l.index,o=this.updateStack(o,l);return a!==n.length&&s.push(this.makeDecoratedSegment(n.slice(a),o)),s}createStackOps(n){const i={},r=s=>i[s]??={index:s,added:[],removed:[]};for(const s of n)r(s.start).added.push(s),r(s.end).removed.push(s);return Object.entries(i).sort((s,o)=>+s[0]-+o[0]).map(s=>s[1])}updateStack(n,i){return n.filter(r=>!i.removed.includes(r)).concat(i.added)}getNormalizedDecorations(){const{decorations:n=[],text:{length:i}}=this;return n.map(r=>function ZIe(t,e){return{start:T7(t.start??0,e),end:T7(t.end??e,e),classes:t.classes??[],styles:t.styles??{}}}(r,i)).filter(r=>r.start<i&&r.start<r.end)}makeUndecoratedSegment(n){return{text:n,classes:[],styles:{}}}makeDecoratedSegment(n,i){return{text:n,classes:i.reduce((o,a)=>o.concat(a.classes),[]),styles:i.reduce((o,a)=>({...o,...a.styles}),{})}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-decorated-text"]],hostVars:2,hostBindings:function(i,r){2&i&&wf(r.clsName)},inputs:{text:"text",decorations:"decorations"},features:[Rr],decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&Ii(0,QIe,2,5,"span",0),2&i&&Di("ngForOf",r.segments)},dependencies:[IE],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})}return t})();const tDe=[[["","matPrefix",""]],[["","matSuffix",""]]],nDe=["[matPrefix]","[matSuffix]"];function iDe(t,e){if(1&t&&(Pn(0,"mat-option"),ts(1,"ccf-decorated-text",8),Bn()),2&t){const n=e.$implicit;xn(),Di("text",n.label)("decorations",n.decorations)}}const rDe=new Et("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});class G1{get value(){return this.controller.value}set value(e){this.controller.setValue(e,{emitEvent:!1})}constructor(e){this.defaultMaxOptions=e,this.clsName="ccf-text-search",this.placeholder="Search...",this.optionSelected=new _n,this.controller=new wCe,this.options=this.controller.valueChanges.pipe(Vc(""),Kf(),qi(this.getOptions)),this.valueChange=this.controller.valueChanges}getOptions(e){var n=this;return D(function*(){const{autoCompleter:i,maxOptions:r=n.defaultMaxOptions}=n;return!i||r<1?[]:_W(ys(i(e,r)).pipe(Ai(1),Xt(o=>o.length<=r?o:o.slice(0,r))))})()}optionDisplay(e){return e?.label??""}optionId(e,n){return n.id}static#e=this.\u0275fac=function(n){return new(n||G1)(st(rDe))};static#t=this.\u0275cmp=mi({type:G1,selectors:[["ccf-text-search"]],hostVars:2,hostBindings:function(n,i){2&n&&wf(i.clsName)},inputs:{placeholder:"placeholder",value:"value",maxOptions:"maxOptions",autoCompleter:"autoCompleter"},outputs:{valueChange:"valueChange",optionSelected:"optionSelected"},ngContentSelectors:nDe,decls:11,vars:8,consts:[["auto","matAutocomplete"],[1,"form"],["appearance","outline",1,"form-field"],["matPrefix",""],["matInput","","type","search",1,"input",3,"placeholder","formControl","matAutocomplete"],[1,"autocomplete",3,"optionSelected","displayWith"],[4,"ngFor","ngForOf","ngForTrackBy"],["matSuffix",""],[3,"text","decorations"]],template:function(n,i){if(1&n){const r=Ld();ka(tDe),Pn(0,"form",1)(1,"mat-form-field",2),Jy(2,3),Pi(3),Zy(),ts(4,"input",4),Pn(5,"mat-autocomplete",5,0),Vi("optionSelected",function(o){return Vs(r),ds(i.optionSelected.emit(o.option.value))}),Ii(7,iDe,2,2,"mat-option",6),Cu(8,"async"),Bn(),Jy(9,7),Pi(10,1),Zy(),Bn()()}if(2&n){const r=eE(6);xn(4),Di("placeholder",i.placeholder)("formControl",i.controller)("matAutocomplete",r),xn(),Di("displayWith",i.optionDisplay),xn(2),Di("ngForOf",Tu(8,6,i.options))("ngForTrackBy",i.optionId)}},dependencies:[IE,Q9,_1,j9,U9,Av,nP,zIe,YW,S7,LIe,MIe,IIe,JIe,eDe,p0],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex{align-items:center}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{height:3rem;border:none}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{top:0;border:none}"],changeDetection:0})}function jm(t){return!0===t}function wa(t){return null===t||typeof t>"u"}function Bo(t){return!wa(t)}function IP(t){return!!t}function O7(t){return wa(t)?t:JSON.parse(JSON.stringify(t))}function N7(t){return Bo(t)&&"object"==typeof t&&function DP(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}Vn([jf.oI,kt("design:type",Function),kt("design:paramtypes",[String]),kt("design:returntype",Promise)],G1.prototype,"getOptions",null),S(1123),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)).filter(t=>!0!==t.disabled);const IDe="NGXS_COMPUTED_OPTION",F7="NGXS_DATA_META",RP="NGXS_META",B7="NGXS_ARGUMENT_REGISTRY_META";function k7(t=RDe){return dn((e,n)=>{let i=!1;e.subscribe(Zn(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function RDe(){return new Sv}let j7=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new Ji(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(ct($u,8))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})();function Fv(t){return t[F7]}let El=(()=>{class t{constructor(n,i,r){t.store=n.get($u),t.ngZone=n.get(yn),t.factory=i,t.context=r,t.computed=n.get(j7),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(ct(Ui),ct(L5),ct(F5))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})();class rs{constructor(){rs.statesCachedMeta.clear()}static createStateContext(e){return El.context.createStateContext(e)}static ensureMappedState(e){if(wa(El.factory)||wa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Bo(e.name)?rs.statesCachedMeta.get(e.name):null)||rs.ensureMeta(e)}static getRepositoryByInstance(e){const i=Fv(rs.getStateClassByInstance(e))??null;if(wa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=rs.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=n?.getPayloadTypeByIndex(s);Bo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=rs.createPayload(n,i),s=function PDe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new s(r)}static ensureMeta(e){const n=Bo(e.name)?El.factory.states?.find(i=>i.name===e.name):null;return Bo(n)&&Bo(e.name)&&rs.statesCachedMeta.set(e.name,n),n}}rs.statesCachedMeta=new Map,rs.\u0275fac=function(e){return new(e||rs)},rs.\u0275prov=Ot({token:rs,factory:rs.\u0275fac}),new class LDe{constructor(){this.subject=new If(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Xu(t,e){const n=arguments.length>=2;return i=>i.pipe(t?vi((r,s)=>t(r,s,i)):ze,Ai(1),n?Rm(e):k7(()=>new Sv))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new If(1)}};class BDe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Bo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function U7(t){return t.NGXS_OPTIONS_META??{name:""}}function V7(t){const e=U7(t),n=e.children??[],r=O7(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(N7(r))return function kDe(t,e){return e.reduce((n,i)=>{const r=U7(i);if(function Lv(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=V7(i),n},t??{})}(r,n);throw new BDe(r)}return r}function H7(){return`__${IDe}__`}function G7(t){return t[H7()]??null}function z7(){return El?.computed?.sequenceValue??0}function VDe(t){let e=!1;return sh(t)&&(e=!0),e}function OP(t){return t[B7]}class HDe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class GDe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(IP(this.argumentMap.has(e))||IP(this.payloadMap.has(e)))throw new HDe(e,n)}}function XDe(t){return{enumerable:!0,configurable:!0,get(){const e=Fv(t),n=rs.ensureMappedState(e.stateMeta);return rs.createStateContext(n)}}}const tRe={dataActionSubscribeRequired:!0},nRe=new Et("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>tRe});let iRe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[rs,El,j7,...n]}}}return t.\u0275fac=function(n){return new(n||t)(ct(rs,2),ct(El,2))},t.\u0275mod=ia({type:t}),t.\u0275inj=Uo({}),t})();function W7(){return(t,e,n)=>{!function NDe(t,e){if(!function xDe(t,e){let n=t,i=!1;if(N7(n))for(;null!==n;){if(jm(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const s=function UDe(t){return wa(G7(t))&&Object.defineProperties(t,{[H7()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),G7(t)}(this),o=s?.get(i);if(jm(o?.isObservable))return o?.value;if(wa(o)||o.sequenceId!==z7()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:z7(),isObservable:VDe(l)}),l}return o?.value},n}}const rRe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function Y1(t={}){const e=function sRe(t){const e=El?.injector?.get(nRe,void 0,ai.Optional),n={...rRe};return Bo(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function ODe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const s=r.value,o=i.toString();return r.value=function(...a){const l=this;let c=null;const u=rs.getRepositoryByInstance(l),h=u.operations;let f=h[o];const g=u.stateMeta,m=OP(s);if(wa(f)){const le=function eRe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),re=function FDe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)Bo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):Bo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:g.path,methodName:o,argumentsNames:le,argumentRegistry:m});f=h[o]={type:re,options:{cancelUncompleted:e.cancelUncompleted??!1}},Bo(f)&&(g.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}rs.ensureMappedState(g).instance[f.type]=()=>(jm(e.insideZone)?El.ngZone?.run(()=>{c=s.apply(l,a)}):c=s.apply(l,a),sh(c)&&jm(e.subscribeRequired)?on(null).pipe(Xt(()=>c)):c);const P=rs.createAction(f,a,m),V=El.store.dispatch(P);return sh(c)?function jDe(t,e){return mv([t,e]).pipe(Xt(n=>n.pop()))}(V,c):c},r}}function $7(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function zDe(t,e){const n=t[e];return wa(OP(n))&&Object.defineProperties(n,{[B7]:{enumerable:!0,configurable:!0,value:new GDe}}),OP(n)})(e,n).createPayloadType(r,n,i)}}function q7(){return t=>{const e=function QDe(t){if(function dDe(t){return!IP(t)}(t.hasOwnProperty(RP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,RP,{value:e})}return function ZDe(t){return t?.[RP]}(t)}(t);if(wa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function qDe(t,e){(function $De(t){const e=Fv(t)??null;return(wa(e)||e?.stateClass!==t)&&function WDe(t){Object.defineProperty(t,F7,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Fv(t)}(t)).stateMeta=e}(t,e),function aRe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>O7(n)},context:XDe(t)})}(t,e,V7(t)),function KDe(t){const n=Fv(t)?.stateMeta?.name??null;if(Bo(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Bo(this[i]))return this[i];if(wa(El.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=El.store.select(t).pipe(Xt(r=>r),Jo({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let lRe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Jt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})(),Y7=(()=>{class t extends lRe{get snapshot(){return this.getState()}get ctx(){return function JDe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Wi(t)))(i||t)}})(),t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),Vn([W7(),kt("design:type",Object),kt("design:paramtypes",[])],t.prototype,"snapshot",null),Vn([Y1(),vD(0,$7("patchValue")),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],t.prototype,"patchState",null),Vn([Y1(),vD(0,$7("stateValue")),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],t.prototype,"setState",null),Vn([Y1(),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",void 0)],t.prototype,"reset",null),t})();function X7(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return Xt(n=>{let i=n;for(let r=0;r<e;r++){const s=i?.[t[r]];if(!(typeof s<"u"))return;i=s}return i})}let Ku=class vb extends Y7{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function cRe(){return vi(t=>null!=t)}(),Jo(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(X7(...e),Kf(),Jo(1))}getOption(...e){const n=this.getPathKey(e);if(this.optionCache.has(n))return this.optionCache.get(n)??on();const i=this.config$.pipe(X7(...e),Kf(),Jo(1));return this.optionCache.set(n,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Wi(vb)))(i||vb)}})();static#t=this.\u0275prov=Ot({token:vb,factory:vb.\u0275fac})};Vn([W7(),kt("design:type",At),kt("design:paramtypes",[])],Ku.prototype,"config$",null),Ku=Vn([q7(),UN({name:"globalConfig",defaults:null})],Ku);const K7="ALLOW_TELEMETRY",dRe=J7();function J7(){const t=localStorage.getItem(K7);return null===t?void 0:"true"===t.toLowerCase()}let NP=class bb extends Y7{setAllowTelemetry(e){const n=J7();localStorage.setItem(K7,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==n||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Wi(bb)))(i||bb)}})();static#t=this.\u0275prov=Ot({token:bb,factory:bb.\u0275fac})};function hh(...t){const e=b0(t),n=aH(t),{args:i,keys:r}=B5(t);if(0===i.length)return ys([],e);const s=new At(function hRe(t,e,n=ze){return i=>{Z7(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)Z7(e,()=>{const c=ys(t[l],e);let u=!1;c.subscribe(Zn(i,h=>{s[l]=h,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>k5(r,o):ze));return n?s.pipe(o1(n)):s}function Z7(t,e,n){t?Ru(n,t,e):e()}function X1(){return dn((t,e)=>{let n=null;t._refCount++;const i=Zn(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}Vn([Y1(),kt("design:type",Function),kt("design:paramtypes",[Boolean]),kt("design:returntype",void 0)],NP.prototype,"setAllowTelemetry",null),NP=Vn([q7(),UN({name:"tracking",defaults:{allowTelemetry:dRe}})],NP);class LP extends At{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ta(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lt;const n=this.getSubject();e.add(this.source.subscribe(Zn(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lt.EMPTY)}return e}refCount(){return X1()(this)}}function kv(t){return dn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}Error;const uL=new Et("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),dL=new Et("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=jt(gi);if(!t)throw new Error("Window is not available");return t}}),M2e=new Et("ngx-data-layer",{providedIn:"root",factory:()=>function T2e(t){return t?t.dataLayer=t.dataLayer||[]:null}(jt(dL))}),Z$=new Et("ngx-gtag-fn",{providedIn:"root",factory:()=>function I2e(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(jt(dL),jt(M2e))});let hL=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,s,o,a){try{const l=new Map;i&&l.set("event_category",i),r&&l.set("event_label",r),s&&l.set("value",s),void 0!==o&&l.set("interaction",o),a&&Object.entries(a).map(([u,h])=>l.set(u,h));const c=this.toKeyValue(l);c?this.gtag("event",n,c):this.gtag("event",n)}catch(l){this.throw(l)}}pageView(n,i,r,s){try{const o=new Map([["page_path",n]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(n,i,r,s,o){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(ct(uL),ct(gi),ct(Z$))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new Et("ngx-google-analytics-routing-settings",{factory:()=>({})}),new Et("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});const k2e={connector:()=>new Jt};function V2e(t,e,n,i){n&&!Qe(n)&&(i=n);const r=Qe(n)?n:void 0;return s=>function U2e(t,e){const n=Qe(t)?t:()=>t;return Qe(e)?function j2e(t,e=k2e){const{connector:n}=e;return dn((i,r)=>{const s=n();ms(t(function B2e(t){return new At(e=>t.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:n}):i=>new LP(i,n)}(new If(t,e,i),r)(s)}class H2e{}const z2e=(t,e)=>JSON.stringify(t)===JSON.stringify(e),W2e=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Zl={storageStrategy:class G2e extends H2e{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},$2e=new Jt;function Ya(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,s=i.value;if(i&&i.value){let o=t.storageStrategy?new t.storageStrategy:new Zl.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),Gl($2e.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function foe(t){return t?function poe(t){return new At(e=>t.schedule(()=>e.complete()))}(t):Ro}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||Zl.cacheResolver||z2e,t.cacheHasher=t.cacheHasher||Zl.cacheHasher||W2e,i.value=function(...u){const h=o.getAll(r,this);let f=t.cacheHasher(u),g=h.find(v=>t.cacheResolver(v.parameters,f));const m=a.find(v=>t.cacheResolver(v.parameters,f));if((t.maxAge||Zl.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(t.maxAge||Zl.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(t.slidingExpiration||Zl.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const v=on(g.response);return t.async?v.pipe(x7(0)):v}if(m)return m.response;{const v=s.call(this,...u).pipe(kv(()=>{const w=a.find(P=>t.cacheResolver(P.parameters,f));a.splice(a.indexOf(w),1)}),_r(w=>{(!t.shouldCacheDecider||t.shouldCacheDecider(w))&&((!(t.maxCacheCount||Zl.maxCacheCount)||1===(t.maxCacheCount||Zl.maxCacheCount)||(t.maxCacheCount||Zl.maxCacheCount)&&(t.maxCacheCount||Zl.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:w,created:t.maxAge||Zl.maxAge?new Date:null},r,this))}),V2e(1),X1());return a.push({parameters:f,response:v,created:new Date}),v}}}return i}}class fL{}class qc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new qc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof qc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class q2e{encodeKey(e){return eq(e)}encodeValue(e){return eq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const X2e=/%(\d[a-f0-9])/gi,K2e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eq(t){return encodeURIComponent(t).replace(X2e,(e,n)=>K2e[n]??e)}function cS(t){return`${t}`}class ar{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new q2e,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Y2e(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(cS):[cS(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new ar({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(cS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(cS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ss{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function tq(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function nq(t){return typeof Blob<"u"&&t instanceof Blob}function iq(t){return typeof FormData<"u"&&t instanceof FormData}class eb{constructor(e,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function J2e(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new qc,this.context??=new ss,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new ar,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||tq(this.body)||nq(this.body)||iq(this.body)||function Z2e(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ar?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||iq(this.body)?null:nq(this.body)?this.body.type||null:tq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ar?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new eb(n,i,o,{params:u,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}}var gL=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(gL||{});class mL{constructor(e,n=sq.Ok,i="OK"){this.headers=e.headers||new qc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class tb extends mL{constructor(e={}){super(e),this.type=gL.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new tb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}var sq=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(sq||{});function _L(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let gh=(()=>{class t{constructor(n){this.handler=n}request(n,i,r={}){let s;if(n instanceof eb)s=n;else{let l,c;l=r.headers instanceof qc?r.headers:new qc(r.headers),r.params&&(c=r.params instanceof ar?r.params:new ar({fromObject:r.params})),s=new eb(n,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=on(s).pipe(function Bv(t,e){return Qe(e)?_s(t,e,1):_s(t,1)}(l=>this.handler.handle(l)));if(n instanceof eb||"events"===r.observe)return o;const a=o.pipe(vi(l=>l instanceof tb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Xt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Xt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Xt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Xt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new ar).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,_L(r,i))}post(n,i,r={}){return this.request("POST",n,_L(r,i))}put(n,i,r={}){return this.request("PUT",n,_L(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(ct(fL))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class bNe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const wNe=new Et("basePath");class bq{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let wq=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new qc,this.configuration=new bq,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new bNe}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>n=this.addToHttpParamsRecursive(n,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>n=this.addToHttpParamsRecursive(n,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,s){const o=n.token;let a=new ar({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(l=l.set("Accept",c));let u=s&&s.context;void 0===u&&(u=new ss);let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,s){const o=n.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(a=a.set("Accept",l));let c=s&&s.context;void 0===c&&(c=new ss);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return l&&(f=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,s){const o=n.cache;let a=new ar({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(l=l.set("Accept",c));let u=s&&s.context;void 0===u&&(u=new ss);let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,s){const o=n.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,l=n.ageRange,c=n.bmi,u=n.bmiRange,h=n.cache,f=n.ontologyTerms,g=n.cellTypeTerms,m=n.biomarkerTerms,v=n.consortiums,w=n.providers,P=n.sex,V=n.spatial,le=n.technologies,re=n.token;let Ie=new ar({encoder:this.encoder});null!=a&&(Ie=this.addToHttpParams(Ie,a,"age")),null!=l&&(Ie=this.addToHttpParams(Ie,l,"age-range")),null!=c&&(Ie=this.addToHttpParams(Ie,c,"bmi")),null!=u&&(Ie=this.addToHttpParams(Ie,u,"bmi-range")),null!=h&&(Ie=this.addToHttpParams(Ie,h,"cache")),f&&f.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"ontology-terms")}),g&&g.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"cell-type-terms")}),m&&m.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"biomarker-terms")}),null!=o&&(Ie=this.addToHttpParams(Ie,o,"organ-iri")),v&&v.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"consortiums")}),w&&w.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"providers")}),null!=P&&(Ie=this.addToHttpParams(Ie,P,"sex")),V&&V.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"spatial")}),le&&le.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"technologies")}),null!=re&&(Ie=this.addToHttpParams(Ie,re,"token"));let Ne=this.defaultHeaders,it=s&&s.httpHeaderAccept;void 0===it&&(it=this.configuration.selectHeaderAccept(["application/json"])),void 0!==it&&(Ne=Ne.set("Accept",it));let ut=s&&s.context;void 0===ut&&(ut=new ss);let qe="json";return it&&(qe=it.startsWith("text")?"text":this.configuration.isJsonMime(it)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:ut,params:Ie,responseType:qe,withCredentials:this.configuration.withCredentials,headers:Ne,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}scene(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}sennetRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,s){const o=n.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,l=n.format;let c=new ar({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"query")),null!=a&&(c=this.addToHttpParams(c,a,"token")),null!=l&&(c=this.addToHttpParams(c,l,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ss);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:c,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,s){const o=n.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,l=n.format;let c=new ar({encoder:this.encoder});null!=a&&(c=this.addToHttpParams(c,a,"token")),null!=l&&(c=this.addToHttpParams(c,l,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ss);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let v="json";return h&&(v=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:c,responseType:v,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let l=new ar({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ss);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,l=n.bmi,c=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,v=n.providers,w=n.sex,P=n.spatial,V=n.technologies,le=n.token;let re=new ar({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=l&&(re=this.addToHttpParams(re,l,"bmi")),null!=c&&(re=this.addToHttpParams(re,c,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),v&&v.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),P&&P.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=le&&(re=this.addToHttpParams(re,le,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new ss);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(ct(gh),ct(wNe,8),ct(bq,8))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const bL=new Jt,Km={cacheBusterObserver:bL},op={cacheBusterObserver:bL,maxCacheCount:4};function xq(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function xNe(t){return{age:xq(t?.ageRange,1,110),bmi:xq(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,biomarkerTerms:t?.biomarkerTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function Eq(t){return t.map(e=>({...e,transformMatrix:new Un(e.transformMatrix??[])}))}class io{constructor(e,n){this.api=e,this.globalConfig=n,n.getOption("hubmapToken").subscribe(bL)}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},t=>t)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},t=>t)}getTissueBlockResults(e){return this.doRequest(n=>this.api.tissueBlocks(n),e,{},t=>t)}getAggregateResults(e){return this.doRequest(n=>this.api.aggregateResults(n),e)}getOntologyTermOccurences(e){return this.doRequest(n=>this.api.ontologyTermOccurences(n),e)}getCellTypeTermOccurences(e){return this.doRequest(n=>this.api.cellTypeTermOccurences(n),e)}getBiomarkerTermOccurences(e){return this.doRequest(n=>this.api.biomarkerTermOccurences(n),e)}getScene(e){return this.doRequest(n=>this.api.scene(n),e,{},Eq)}getReferenceOrganScene(e,n){return this.doRequest(i=>this.api.referenceOrganScene(i),n,{organIri:e},Eq)}doRequest(e,n,i,r){const{api:s,globalConfig:o}=this,a={...xNe(n),...i};return hh([o.getOption("remoteApiEndpoint"),o.getOption("hubmapToken")]).pipe(Ai(1),_r(([l,c])=>{s.configuration.basePath=l,c&&(a.token=c)}),qi(()=>e(a)),Xt(l=>r?r(l):l))}static#e=this.\u0275fac=function(n){return new(n||io)(ct(wq),ct(Ku))};static#t=this.\u0275prov=Ot({token:io,factory:io.\u0275fac,providedIn:"root"})}function xa(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let wL;function Ql(){return wL||(wL=function ENe(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=xa(n);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),wL}function ANe(t,e=Ql()){return e("readonly",n=>xa(n.get(t)))}function SNe(t,e=Ql()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),xa(n.transaction)))}function CNe(t,e=Ql()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),xa(n.transaction)))}Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getProviderNames",null),Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getDatasetTechnologyNames",null),Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getOntologyTreeModel",null),Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getCellTypeTreeModel",null),Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getBiomarkerTreeModel",null),Vn([Ya(Km),kt("design:type",Function),kt("design:paramtypes",[]),kt("design:returntype",At)],io.prototype,"getReferenceOrgans",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getTissueBlockResults",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getAggregateResults",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getOntologyTermOccurences",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getCellTypeTermOccurences",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getBiomarkerTermOccurences",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],io.prototype,"getScene",null),Vn([Ya(op),kt("design:type",Function),kt("design:paramtypes",[String,Object]),kt("design:returntype",At)],io.prototype,"getReferenceOrganScene",null);var TNe=S(7783),MNe=S(4515),INe=S.n(MNe);const ib="http://www.w3.org/1999/02/22-rdf-syntax-ns#",rb="http://www.w3.org/2001/XMLSchema#",EL="http://www.w3.org/2000/10/swap/",ko={xsd:{decimal:`${rb}decimal`,boolean:`${rb}boolean`,double:`${rb}double`,integer:`${rb}integer`,string:`${rb}string`},rdf:{type:`${ib}type`,nil:`${ib}nil`,first:`${ib}first`,rest:`${ib}rest`,langString:`${ib}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${EL}reify#forSome`,forAll:`${EL}reify#forAll`},log:{implies:`${EL}log#implies`}},{xsd:hS}=ko,DNe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Aq={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},RNe=/[\x00-\x20<>\\"\{\}\|\^\`]/,ONe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},NNe=/$0^/;class Sq{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in ONe)&&this[n]instanceof RegExp&&(this[n]=NNe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,l;for(;a=this._newline.exec(i);)this._comments&&(l=this._comment.exec(a[0]))&&s("comment",l[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(l=this._comment.exec(i))&&s("comment",l[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const c=this._line,u=i[0];let h="",f="",g="",m=null,v=0,w=!1;switch(u){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(v=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){w=!0;break}case"<":if(m=this._unescapedIri.exec(i))h="IRI",f=m[1];else if(m=this._iri.exec(i)){if(f=this._unescape(m[1]),null===f||RNe.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",v=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",v=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",v=2);break;case"_":((m=this._blank.exec(i))||n&&(m=this._blank.exec(`${i} `)))&&(h="blank",g="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(i))f=m[1];else if(({value:f,matchLength:v}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==v)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(i))f=m[1];else if(({value:f,matchLength:v}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==v)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(i))&&(h="var",f=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(i))?(h="langcode",f=m[1]):(m=this._keyword.exec(i))&&(h=m[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",v=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(i)||n&&(m=this._number.exec(`${i} `)))&&(h="literal",f=m[0],g="string"==typeof m[1]?hS.double:"string"==typeof m[2]?hS.decimal:hS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(i))?h=m[0].toUpperCase():w=!0;break;case"f":case"t":(m=this._boolean.exec(i))?(h="literal",f=m[0],g=hS.boolean):w=!0;break;case"a":(m=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):w=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(v=1,f="="):(v=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(v=1,h=u);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",v=2):(h=u,v=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",v=2);break;default:w=!0}if(w&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(i))?((m=this._prefixed.exec(i))||n&&(m=this._prefixed.exec(`${i} `)))&&(h="prefixed",g=m[1]||"",f=this._unescape(m[2])):(h="prefix",f=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const P=v||m[0].length,V=s(h,f,g,c,P);this.previousToken=V,this._previousMarker=h,i=i.substr(P,i.length)}function s(a,l,c,u,h){const f=i?r-i.length:r,m={type:a,value:l,prefix:c,line:u,start:f,end:f+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(DNe,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(1023&l))}return a in Aq?Aq[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,l=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}INe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:PNe,xsd:ap}=ko;let sb,LNe=0;const AL={namedNode:function FNe(t){return new SL(t)},blankNode:function BNe(t){return new Tq(t||"n3-"+LNe++)},variable:function jNe(t){return new Mq(t)},literal:function kNe(t,e){if("string"==typeof e)return new lp(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=ap.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?ap.integer:ap.double:(n=ap.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new lp(""===n||n===ap.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function UNe(){return sb},quad:Dq,triple:Dq},yr=AL;class ec{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof ec?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class SL extends ec{get termType(){return"NamedNode"}}class lp extends ec{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new SL(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?ap.string:PNe.langString}equals(e){return e instanceof lp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Tq extends ec{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Mq extends ec{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Jm(t,e,n){if(e=e||AL,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===AL)return new lp(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const i=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,i-1),"@"===t[i+1]?t.substr(i+2):e.namedNode(t.substr(i+3)));case"[":t=JSON.parse(t);break;default:if(!n||!Array.isArray(t))return e.namedNode(t)}return e.quad(Jm(t[0],e,!0),Jm(t[1],e,!0),Jm(t[2],e,!0),t[3]&&Jm(t[3],e,!0))}function Ea(t,e){if("string"==typeof t)return t;if(t instanceof ec&&"Quad"!==t.termType)return t.id;if(!t)return sb.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==ap.string?`^^${t.datatype.value}`:""}`;case"Quad":const n=[Ea(t.subject,!0),Ea(t.predicate,!0),Ea(t.object,!0)];return t.graph&&"DefaultGraph"!==t.graph.termType&&n.push(Ea(t.graph,!0)),e?n:JSON.stringify(n);default:throw new Error(`Unexpected termType: ${t.termType}`)}}sb=new class Iq extends ec{constructor(){return super(""),sb||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class CL extends ec{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||sb}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Dq(t,e,n,i){return new CL(t,e,n,i)}let Rq=0;class fS{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&Oq(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Sq({lineMode:l,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Rq=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=TL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<n;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<n&&"/"!==e[s];)r=s;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Rq++}_`,this._prefixCallback=i||TL,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=n,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=TL):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function TL(){}function Oq(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(ko.rdf.first),t.RDF_REST=n(ko.rdf.rest),t.RDF_NIL=n(ko.rdf.nil),t.N3_FORALL=n(ko.r.forAll),t.N3_FORSOME=n(ko.r.forSome),t.ABBREVIATIONS={a:n(ko.rdf.type),"=":n(ko.owl.sameAs),">":n(ko.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}function VNe(t){return!!t&&"NamedNode"===t.termType}function HNe(t){return!!t&&"BlankNode"===t.termType}function GNe(t){return!!t&&"Literal"===t.termType}function zNe(t){return!!t&&"Variable"===t.termType}function ob(t){return!!t&&"DefaultGraph"===t.termType}function WNe(t){return ob(t.graph)}function $Ne(t,e){return ML({"":t.value||t},e)("")}function ML(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);n[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||yr,i}Oq(fS.prototype,yr),yr.defaultGraph();var cb=S(6947);class pS{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||yr,e&&this.addQuads(e)}_termFromId(e,n){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return Jm(e,n)}_termToNumericId(e){if("Quad"===e.termType){const n=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let s;return n&&i&&r&&(ob(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${n}.${i}.${r}.${s}`:`.${n}.${i}.${r}`]}return this._ids[Ea(e)]}_termToNewNumericId(e){const n=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${ob(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Ea(e);return this._ids[n]||(this._ids[this._entities[++this._id]=n]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const s in n)for(const o in i=n[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const s=e[n]||(e[n]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,n,i,r){const s=e[n],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[n]}*_findInIndex(e,n,i,r,s,o,a,l){let c,u,h;const f=this._entities,g=this._termFromId(l,this._factory),m={subject:null,predicate:null,object:null};n&&((c=e,e={})[n]=c[n]);for(const v in e)if(u=e[v]){m[s]=this._termFromId(f[v],this._factory),i&&((c=u,u={})[i]=c[i]);for(const w in u)if(h=u[w]){m[o]=this._termFromId(f[w],this._factory);const P=r?r in h?[r]:[]:Object.keys(h);for(let V=0;V<P.length;V++)m[a]=this._termFromId(f[P[V]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,g)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,s;if(r=e[n])for(s in r)i(s)}_loopByKey1(e,n,i){let r,s;for(r in e)s=e[r],s[n]&&i(r)}_loopBy2Keys(e,n,i,r){let s,o,a;if((s=e[n])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,n,i,r){let o,a,l,s=0;n&&((o=e,e={})[n]=o[n]);for(const c in e)if(a=e[c]){i&&((o=a,a={})[i]=o[i]);for(const u in a)(l=a[u])&&(r?r in l&&s++:s+=Object.keys(l).length)}return s}_getGraphs(e){if(!function XNe(t){return"string"==typeof t||t instanceof String}(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Ea(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),n=this._termToNewNumericId(n),i=this._termToNewNumericId(i);const o=this._addToIndex(s.subjects,e,n,i);return this._addToIndex(s.predicates,n,i,e),this._addToIndex(s.objects,i,e,n),this._size=null,o}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Ea(r);const s=this._graphs;let o,a,l;if(!((e=e&&this._termToNumericId(e))&&(n=n&&this._termToNumericId(n))&&(i=i&&this._termToNumericId(i))&&(o=s[r])&&(a=o.subjects[e])&&(l=a[n])&&i in l))return!1;for(e in this._removeFromIndex(o.subjects,e,n,i),this._removeFromIndex(o.predicates,n,i,e),this._removeFromIndex(o.objects,i,e,n),null!==this._size&&this._size--,o.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const s=new cb.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){r=r&&Ea(r);const s=this._getGraphs(r);let o,a,l,c;if(!(e&&!(a=this._termToNumericId(e))||n&&!(l=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(const u in s)(o=s[u])&&(a?c?yield*this._findInIndex(o.objects,c,a,l,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,a,l,null,"subject","predicate","object",u):l?yield*this._findInIndex(o.predicates,l,c,null,"predicate","object","subject",u):c?yield*this._findInIndex(o.objects,c,null,null,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",u))}match(e,n,i,r){return new IL(this,e,n,i,r)}countQuads(e,n,i,r){r=r&&Ea(r);const s=this._getGraphs(r);let a,l,c,u,o=0;if(e&&!(l=this._termToNumericId(e))||n&&!(c=this._termToNumericId(n))||i&&!(u=this._termToNumericId(i)))return 0;for(const h in s)(a=s[h])&&(o+=e?i?this._countInIndex(a.objects,u,l,c):this._countInIndex(a.subjects,l,c,u):n?this._countInIndex(a.predicates,c,u,l):this._countInIndex(a.objects,u,l,c));return o}forEach(e,n,i,r,s){this.some(o=>(e(o),!1),n,i,r,s)}every(e,n,i,r,s){let o=!1;const a=!this.some(l=>(o=!0,!e(l)),n,i,r,s);return o&&a}some(e,n,i,r,s){for(const o of this.readQuads(n,i,r,s))if(e(o))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,n,i),r}forSubjects(e,n,i,r){r=r&&Ea(r);const s=this._getGraphs(r);let o,a,l;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(l=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?l?this._loopBy2Keys(o.predicates,a,l,e):this._loopByKey1(o.subjects,a,e):l?this._loopByKey0(o.objects,l,e):this._loop(o.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,n,i),r}forPredicates(e,n,i,r){r=r&&Ea(r);const s=this._getGraphs(r);let o,a,l;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(l=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?l?this._loopBy2Keys(o.objects,l,a,e):this._loopByKey0(o.subjects,a,e):l?this._loopByKey1(o.predicates,l,e):this._loop(o.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(s=>{r.push(s)},e,n,i),r}forObjects(e,n,i,r){r=r&&Ea(r);const s=this._getGraphs(r);let o,a,l;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(l=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?l?this._loopBy2Keys(o.subjects,a,l,e):this._loopByKey1(o.objects,a,e):l?this._loopByKey0(o.predicates,l,e):this._loop(o.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,n,i),r}forGraphs(e,n,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,i,r,s)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,l)=>{throw new Error(`${a.value} ${l}`)},s=this.getQuads(null,ko.rdf.rest,ko.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const l=[];let u,h,c=!1;const f=a.graph;let g=a.subject;for(;g&&!c;){const m=this.getQuads(null,null,g,null),v=this.getQuads(g,null,null,null);let w,P=null,V=null,le=null;for(let re=0;re<v.length&&!c;re++)w=v[re],w.graph.equals(f)?u?c=r(g,"has non-list arcs out"):w.predicate.value===ko.rdf.first?P?c=r(g,"has multiple rdf:first arcs"):o.push(P=w):w.predicate.value===ko.rdf.rest?V?c=r(g,"has multiple rdf:rest arcs"):o.push(V=w):m.length?c=r(g,"can't be subject and object"):(u=w,h="subject"):c=r(g,"not confined to single graph");for(let re=0;re<m.length&&!c;++re)w=m[re],u?c=r(g,"can't have coreferences"):w.predicate.value===ko.rdf.rest?le?c=r(g,"has incoming rdf:rest arcs"):le=w:(u=w,h="object");P?l.unshift(P.object):c=r(g,"has no list head"),g=le&&le.subject}c?e=!1:u&&(i[u[h].value]=l)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}class IL extends cb.Readable{constructor(e,n,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:s}=this,o=this._filtered=new pS({factory:e._factory});for(const a of e.readQuads(s,r,i,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new IL(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var ZNe=S(2130),QNe=S(2756);function Mr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function kq(t){const e=t.length;let n=0;return new cb.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function DL(t,e){return RL.apply(this,arguments)}function RL(){return RL=D(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield(0,ZNe.toRDF)(n);e.import(kq(i))}return e}),RL.apply(this,arguments)}function OL(){return OL=D(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new QNe.RdfXmlParser({dataFactory:yr,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(n),i.end(),r}return e}),OL.apply(this,arguments)}function NL(){return NL=D(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new fS({format:"n3"}).parse(n);e.import(kq(i))}return e}),NL.apply(this,arguments)}function PL(t,e){const n=JSON.parse(t),i=new pS;return Object.assign(i,n,{_factory:e??yr}),i}const gS="Unknown Euler angle order",Qm=.99999;var Ws=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Ws||{});class os extends jE{static get ZYX(){return Ws.ZYX}static get YXZ(){return Ws.YXZ}static get XZY(){return Ws.XZY}static get ZXY(){return Ws.ZXY}static get YZX(){return Ws.YZX}static get XYZ(){return Ws.XYZ}static get RollPitchYaw(){return Ws.ZYX}static get DefaultOrder(){return Ws.ZYX}static get RotationOrders(){return Ws}static rotationOrder(e){return Ws[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=os.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,l=2*(n*i+s*r);let c=-2*(n*r-s*i);c=c>1?1:c,c=c<-1?-1:c;const f=Math.atan2(2*(i*r+s*n),-2*(n*n+o)+1),g=Math.asin(c),m=Math.atan2(l,a);return this.set(f,g,m,os.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function iPe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=ii(e)}get y(){return this[1]}set y(e){this[1]=ii(e)}get z(){return this[2]}set z(e){this[2]=ii(e)}get alpha(){return this[0]}set alpha(e){this[0]=ii(e)}get beta(){return this[1]}set beta(e){this[1]=ii(e)}get gamma(){return this[2]}set gamma(e){this[2]=ii(e)}get phi(){return this[0]}set phi(e){this[0]=ii(e)}get theta(){return this[1]}set theta(e){this[1]=ii(e)}get psi(){return this[2]}set psi(e){this[2]=ii(e)}get roll(){return this[0]}set roll(e){this[0]=ii(e)}get pitch(){return this[1]}set pitch(e){this[1]=ii(e)}get yaw(){return this[2]}set yaw(e){this[2]=ii(e)}get order(){return this[3]}set order(e){this[3]=function rPe(t){if(t<0&&t>=6)throw new Error(gS);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Ws.ZYX)}fromRotationMatrix(e,n=os.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new XO;switch(this[4]){case Ws.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ws.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ws.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ws.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ws.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ws.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(gS)}}_fromRotationMatrix(e,n=os.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],u=e[6],h=e[10];switch(n=n||this[3]){case os.XYZ:this[1]=Math.asin(Pr(s,-1,1)),Math.abs(s)<Qm?(this[0]=Math.atan2(-l,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,a),this[2]=0);break;case os.YXZ:this[0]=Math.asin(-Pr(l,-1,1)),Math.abs(l)<Qm?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case os.ZXY:this[0]=Math.asin(Pr(u,-1,1)),Math.abs(u)<Qm?(this[1]=Math.atan2(-c,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case os.ZYX:this[1]=Math.asin(-Pr(c,-1,1)),Math.abs(c)<Qm?(this[0]=Math.atan2(u,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case os.YZX:this[2]=Math.asin(Pr(o,-1,1)),Math.abs(o)<Qm?(this[0]=Math.atan2(-l,a),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case os.XZY:this[2]=Math.asin(-Pr(r,-1,1)),Math.abs(r)<Qm?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-l,h),this[1]=0);break;default:throw new Error(gS)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),l=Math.cos(s),c=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case os.XYZ:{const f=o*l,g=o*h,m=c*l,v=c*h;n[0]=a*l,n[4]=-a*h,n[8]=u,n[1]=g+m*u,n[5]=f-v*u,n[9]=-c*a,n[2]=v-f*u,n[6]=m+g*u,n[10]=o*a;break}case os.YXZ:{const f=a*l,g=a*h,m=u*l,v=u*h;n[0]=f+v*c,n[4]=m*c-g,n[8]=o*u,n[1]=o*h,n[5]=o*l,n[9]=-c,n[2]=g*c-m,n[6]=v+f*c,n[10]=o*a;break}case os.ZXY:{const f=a*l,g=a*h,m=u*l,v=u*h;n[0]=f-v*c,n[4]=-o*h,n[8]=m+g*c,n[1]=g+m*c,n[5]=o*l,n[9]=v-f*c,n[2]=-o*u,n[6]=c,n[10]=o*a;break}case os.ZYX:{const f=o*l,g=o*h,m=c*l,v=c*h;n[0]=a*l,n[4]=m*u-g,n[8]=f*u+v,n[1]=a*h,n[5]=v*u+f,n[9]=g*u-m,n[2]=-u,n[6]=c*a,n[10]=o*a;break}case os.YZX:{const f=o*a,g=o*u,m=c*a,v=c*u;n[0]=a*l,n[4]=v-f*h,n[8]=m*h+g,n[1]=h,n[5]=o*l,n[9]=-c*l,n[2]=-u*l,n[6]=g*h+m,n[10]=f-v*h;break}case os.XZY:{const f=o*a,g=o*u,m=c*a,v=c*u;n[0]=a*l,n[4]=-h,n[8]=u*l,n[1]=f*h+v,n[5]=o*l,n[9]=g*h-m,n[2]=m*h-g,n[6]=c*l,n[10]=v*h+f;break}default:throw new Error(gS)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new XO(e*r*s-n*i*o,e*i*o+n*r*s,n*i*s-e*r*o,e*i*s+n*r*o)}}var jq=S(2475),sPe=S.n(jq),oPe=S(689),aPe=S.n(oPe),Ki=S(7376);const Uq={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let mS;const lPe=new Uint8Array(16);function cPe(){if(!mS&&(mS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mS(lPe)}const ro=[];for(let t=0;t<256;++t)ro.push((t+256).toString(16).slice(1));const dPe=function uPe(t,e,n){if(Uq.randomUUID&&!e&&!t)return Uq.randomUUID();const i=(t=t||{}).random||(t.rng||cPe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function Vq(t,e=0){return ro[t[e+0]]+ro[t[e+1]]+ro[t[e+2]]+ro[t[e+3]]+"-"+ro[t[e+4]]+ro[t[e+5]]+"-"+ro[t[e+6]]+ro[t[e+7]]+"-"+ro[t[e+8]]+ro[t[e+9]]+"-"+ro[t[e+10]]+ro[t[e+11]]+ro[t[e+12]]+ro[t[e+13]]+ro[t[e+14]]+ro[t[e+15]]}(i)};var _S=S(1994);function*yS(t,e,n){for(const[i,r]of Object.entries(n))for(const s of Mr(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,_S.fromRdf)(s.object):s.object.id;yield[r,o]}}function cp(t,e,n,i){const r={"@id":e,"@type":n};for(const[s,o]of Object.entries(i))for(const a of Mr(t,r["@id"],s,null,null)){const l="Literal"===a.object.termType?(0,_S.fromRdf)(a.object):a.object.id;r[o]=l}return r}const Hi=ML({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},yr),Hq={x:Hi("rdf"),type:Hi("rdf")("type")},hPe_label=(Hi("rdfs"),Hi("rdfs")("label")),Zt=(Hi("rdfs")("comment"),Hi("rdfs")("isDefinedBy"),Hi("rdfs")("seeAlso"),Hi("ccf")),qn={id:Hi("ccf")("has_registration_location"),label:Hi("rdfs")("label"),description:Hi("rdfs")("comment"),link:Zt("url"),sex:Zt("sex"),age:Zt("age"),bmi:Zt("bmi"),Male:yr.literal("Male"),Female:yr.literal("Female"),consortiumName:Zt("consortium_name"),providerName:Zt("tissue_provider_name"),providerUUID:Zt("tissue_provider_uuid"),donor:Zt("comes_from"),sections:Zt("subdivided_into_sections"),datasets:Zt("generates_dataset"),sampleType:Zt("sample_type"),TissueBlock:yr.literal("Tissue Block"),TissueSection:yr.literal("Tissue Section"),NonStandard:yr.literal("Non-standard"),sectionCount:Zt("section_count"),sectionSize:Zt("section_size"),sectionUnits:Zt("section_size_unit"),sectionNumber:Zt("section_number"),spatialEntity:Zt("has_registration_location"),ontologyTerms:Zt("has_ontology_term"),cellTypeTerms:Zt("has_cell_type_term"),biomarkerTerms:Zt("has_biomarker_term"),technology:Zt("technology"),thumbnail:Zt("thumbnail")},si={x:Zt,base:Hi("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:yr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes"),bm_located_in:Zt("ccf_bm_located_in")},spatial:{Female:Hi("base")("VHFemale"),Male:Hi("base")("VHMale"),BothSexes:Hi("base")("VHBothSexes"),FemaleOrgans:Hi("base")("VHFemaleOrgans"),MaleOrgans:Hi("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:Hi("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:Hi("rdfs")("label"),description:Hi("rdfs")("comment"),creator:Hi("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_middle_name:Zt("creator_middle_name"),creator_orcid:Zt("creator_orcid"),creation_date:Hi("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:Hi("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}},Yn={x:Hi("uberon"),body:Hi("uberon")("0013702")},fPe={x:Hi("cl"),cell:Hi("cl")("0000000")},ub={x:Hi("fma")},tc=(Hi("lmha"),{body:Yn.body,cell:fPe.cell,respiratory_system:Yn.x("0001004"),colon:Yn.x("0001155"),left_lung:Yn.x("0002168"),right_lung:Yn.x("0002167"),left_bronchus:Yn.x("0002178"),right_bronchus:Yn.x("0002177"),kidney:Yn.x("0002113"),ureter:Yn.x("0000056"),eye:Yn.x("0000970"),fallopian_tube:Yn.x("0003889"),knee:Yn.x("0001465"),ovary:Yn.x("0000992"),trachea:Yn.x("0003126"),aorta:Yn.x("0000947"),blood:Yn.x("0000178"),bone_marrow:Yn.x("0002371"),male_reproductive_system:Yn.x("0000079"),lymph_node:Yn.x("0000029"),blood_vasculature:Yn.x("0004537"),brain:Yn.x("0000955"),eye_left:Yn.x("0004548"),eye_right:ub.x("54449"),fallopian_tube_left:Yn.x("0001303"),fallopian_tube_right:Yn.x("0001302"),heart:Yn.x("0000948"),kidney_left:Yn.x("0004538"),kidney_right:Yn.x("0004539"),knee_left:ub.x("24978"),knee_right:ub.x("24977"),large_intestine:Yn.x("0000059"),liver:Yn.x("0002107"),lungs:Yn.x("0002048"),mesenteric_lymph_node:Yn.x("0002509"),ovary_left:ub.x("7214"),ovary_right:ub.x("7213"),pancreas:Yn.x("0001264"),pelvis:Yn.x("0001270"),prostate_gland:Yn.x("0002367"),skin:Yn.x("0002097"),small_intestine:Yn.x("0002108"),spleen:Yn.x("0002106"),thymus:Yn.x("0002370"),ureter_left:Yn.x("0001223"),ureter_right:Yn.x("0001222"),urinary_bladder:Yn.x("0001255"),uterus:Yn.x("0000995")});function LL(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const vS={spatialObjectReference:LL(si.spatialObjectReference),spatialEntity:LL(si.spatialEntity),spatialPlacement:LL(si.spatialPlacement)};function Gq(t,e){const n=cp(t,e,"ExtractionSet",vS.spatialEntity);return n.extractionSites=(0,Ki.sortBy)(t.getSubjects(si.spatialEntity.extraction_set,e,null).map(i=>up(t,i.id)),["rui_rank"]),n}function up(t,e){const n=cp(t,e,"SpatialEntity",vS.spatialEntity);return n.object&&(n.object=function pPe(t,e){return cp(t,e,"SpatialObjectReference",vS.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,si.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,qn.spatialEntity,e,null),n}function yPe(t,e){const n=cp(t,e,"SpatialPlacement",vS.spatialPlacement);return n.source&&(n.source=up(t,n.source)),n.target&&(n.target=up(t,n.target)),n}const bPe=(sPe()||jq).DirectedGraph;function zq(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),s=[n.x_rotation,n.y_rotation,n.z_rotation].map(yH),o=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(s).scale(o)}class Wq{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new bPe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},Hq.type,si.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},Hq.type,si.SpatialEntity,null);const n={};for(const i of Mr(e,null,si.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Mr(e,null,si.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Un(Un.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Un(Un.IDENTITY),s=aPe()(this.graph,e,n);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&zq(r,yPe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,Ki.get)(e,"placement[0]",(0,Ki.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,n),s&&(s=zq(s,r))):i&&(s=this.getTransformationMatrix(i,n)),s){const o=(new os).fromRotationMatrix(s,os.XYZ),a=s.getTranslation().map(u=>1e3*u),l=o.toVector3().map(nae),c=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${dPe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:c[0],y_scaling:c[1],z_scaling:c[2],scaling_units:"ratio",x_rotation:l[0],y_rotation:l[1],z_rotation:l[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class $q{constructor(e){this.db=e}getSpatialEntity(e){return up(this.db.store,e)}getExtractionSets(e){return function gPe(t,e){return(0,Ki.sortBy)(t.getSubjects(si.spatialEntity.extraction_set_for,e,null).map(n=>Gq(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return Gq(this.db.store,e)}getAnatomicalStructures(e){return function mPe(t,e){return(0,Ki.sortBy)(t.getSubjects(si.spatialEntity.reference_organ,e,null).map(n=>up(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function _Pe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(up(t,n.subject.id))},null,si.spatialEntity.reference_organ,null,null),(0,Ki.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=si.spatial.Male.id;break;case"Female":n=si.spatial.Female.id;break;default:n=si.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,n,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(si.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(si.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(si.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(si.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(si.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===n?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),l=(this.db.getSpatialEntities(n)??[]).map(c=>this.getSceneNode(c,s,{color:[255,255,255,229.5]}));return[a].concat(l).filter(c=>void 0!==c)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(o){if(r)o=new Un(Un.IDENTITY).rotateX(yH(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const l=[e.x_dimension,e.y_dimension,e.z_dimension].map(c=>c*a/2);o.scale(l)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function db(t,e,n){const i=new Set;for(const r of e)for(const s of Mr(t,r,n,null,null))i.add(s.object.id);return i}const e_=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Er=(Math,Math,{});function TPe(t,{precision:e=Er.precision||4}={}){return t=function CPe(t){return Math.round(t/Er.EPSILON)*Er.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function _h(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hb(t,e,n){const i=Er.EPSILON;n&&(Er.EPSILON=n);try{if(t===e)return!0;if(_h(t)&&_h(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!hb(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=Er.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Er.EPSILON=i}}function nc(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}Er.EPSILON=1e-12,Er.debug=!1,Er.precision=4,Er.printTypes=!1,Er.printDegrees=!1,Er.printRowMajor=!0;class FL extends(function NPe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return nc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}to(e){return e===this?this:_h(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Er)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+TPe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!hb(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){void 0===i&&(i=n,n=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Er.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}}function so(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function qq(t,e,n=""){if(Er.debug&&!function PPe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const Yq={};function BL(t,e){Yq[t]||(Yq[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class LPe extends FL{get ELEMENTS(){return nc(!1),0}copy(e){return nc(!1),this}get x(){return this[0]}set x(e){this[0]=so(e)}get y(){return this[1]}set y(e){this[1]=so(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return so(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return so(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return nc(e>=0&&e<this.ELEMENTS,"index is out of range"),so(this[e])}setComponent(e,n){return nc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Aa=typeof Float32Array<"u"?Float32Array:Array;function Xq(){var t=new Aa(3);return Aa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Kq(t,e,n){var i=new Aa(3);return i[0]=t,i[1]=e,i[2]=n,i}function Jq(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function bS(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function Zq(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});Xq();const kL=[0,0,0],Qq={};class Cn extends LPe{static get ZERO(){return Qq.ZERO=Qq.ZERO||Object.freeze(new Cn(0,0,0,0))}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&_h(e)?this.copy(e):(Er.debug&&(so(e),so(n),so(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Er.debug&&(so(e.x),so(e.y),so(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=so(e)}angle(e){return function zPe(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&Jq(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return bS(this,this,e),this.check()}rotateX({radians:e,origin:n=kL}){return function VPe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=kL}){return function HPe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=kL}){return function GPe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function jPe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o}(this,this,e),this.check()}transformAsVector(e){return function $Pe(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return Zq(this,this,e),this.check()}transformByMatrix2(e){return function qPe(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function UPe(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],l=e[1],c=e[2],u=r*c-s*l,h=s*a-i*c,f=i*l-r*a,g=r*f-s*h,m=s*u-i*f,v=i*h-r*u,w=2*n[3];h*=w,f*=w,m*=2,v*=2,t[0]=a+(u*=w)+(g*=2),t[1]=l+h+m,t[2]=c+f+v}(this,this,e),this.check()}}new Cn,new Cn;const fb=new Cn,iY=new Cn;class jL{constructor(e=[0,0,0],n=0){this.radius=-0,this.center=new Cn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=fb.from(n),this.center=(new Cn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new jL(this.center,this.radius)}union(e){const n=this.center,i=this.radius,s=e.radius,o=fb.copy(e.center).subtract(n),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const l=.5*(i+a+s);return iY.copy(o).scale((-i+l)/a).add(n),this.center.copy(iY),this.radius=l,this}expand(e){const n=(e=fb.from(e)).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);const n=function nY(t,e){var s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}(fb,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const n=(e=fb.from(e)).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?e_.OUTSIDE:s<i?e_.INTERSECTING:e_.INSIDE}}class ZPe extends FL{get ELEMENTS(){return nc(!1),0}get RANK(){return nc(!1),0}toString(){let e="[";if(Er.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=so(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function rY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1],m=n[2],v=n[3],w=n[4],P=n[5],V=n[6],le=n[7],re=n[8];return t[0]=f*i+g*o+m*c,t[1]=f*r+g*a+m*u,t[2]=f*s+g*l+m*h,t[3]=v*i+w*o+P*c,t[4]=v*r+w*a+P*u,t[5]=v*s+w*l+P*h,t[6]=V*i+le*o+re*c,t[7]=V*r+le*a+re*u,t[8]=V*s+le*l+re*h,t}function sY(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}!function oLe(){var t=new Aa(2);Aa!=Float32Array&&(t[0]=0,t[1]=0)}();const oY=Object.freeze([1,0,0,0,1,0,0,0,1]),lLe=Object.freeze([0,0,0,0,0,0,0,0,0]),cLe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),n_={};class Qo extends ZPe{static get IDENTITY(){return n_.IDENTITY=n_.IDENTITY||Object.freeze(new Qo(oY)),n_.IDENTITY}static get ZERO(){return n_.ZERO=n_.ZERO||Object.freeze(new Qo(lLe)),n_.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return cLe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,n,i,r,s,o,a,l,c){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this.check()}setRowMajor(e,n,i,r,s,o,a,l,c){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=s,this[5]=l,this[6]=i,this[7]=o,this[8]=c,this.check()}determinant(){return function nLe(t){var r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return t[0]*(c*s-o*l)+t[1]*(-c*r+o*a)+t[2]*(l*r-s*a)}(this)}identity(){return this.copy(oY)}fromQuaternion(e){return function sLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*l,v=s*o,w=s*a,P=s*l;t[0]=1-h-m,t[3]=u-P,t[6]=f+w,t[1]=u+P,t[4]=1-c-m,t[7]=g-v,t[2]=f-w,t[5]=g+v,t[8]=1-c-h}(this,e),this.check()}transpose(){return function eLe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function tLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,m=n*h+i*f+r*g;m&&(t[0]=h*(m=1/m),t[1]=(-u*i+r*c)*m,t[2]=(a*i-r*o)*m,t[3]=f*m,t[4]=(u*n-r*l)*m,t[5]=(-a*n+r*s)*m,t[6]=g*m,t[7]=(-c*n+i*l)*m,t[8]=(o*n-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return rY(this,e,this),this.check()}multiplyRight(e){return rY(this,this,e),this.check()}rotate(e){return function rLe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);t[0]=g*i+f*o,t[1]=g*r+f*a,t[2]=g*s+f*l,t[3]=g*o-f*i,t[4]=g*a-f*r,t[5]=g*l-f*s,t[6]=c,t[7]=u,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?sY(this,this,e):sY(this,this,[e,e,e]),this.check()}translate(e){return function iLe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1];t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*i+g*o+c,t[7]=f*r+g*a+u,t[8]=f*s+g*l+h}(this,this,e),this.check()}transform(e,n){switch(e.length){case 2:n=function aLe(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:n=Zq(n||[-0,-0,-0],e,this);break;case 4:n=function YPe(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return qq(n,e.length),n}transformVector(e,n){return BL("Matrix3.transformVector"),this.transform(e,n)}transformVector2(e,n){return BL("Matrix3.transformVector"),this.transform(e,n)}transformVector3(e,n){return BL("Matrix3.transformVector"),this.transform(e,n)}}function aY(){var t=new Aa(4);return Aa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function lY(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function cY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,t}!function uLe(){var t=new Aa(4);Aa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var kLe=function(){var t=Xq(),e=Kq(1,0,0),n=Kq(0,1,0);return function(i,r,s){var o=Jq(r,s);return o<-.999999?(bS(t,e,r),function BPe(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&bS(t,n,r),function kPe(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),lY(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(bS(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function vLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();aY(),aY(),function QPe(){var t=new Aa(9);Aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const jLe=[0,0,0,1];class pY extends FL{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function uY(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}identity(){return function SLe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(e,n){return lY(this,e,n),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=so(e)}get y(){return this[1]}set y(e){this[1]=so(e)}get z(){return this[2]}set z(e){this[2]=so(e)}get w(){return this[3]}set w(e){this[3]=so(e)}len(){return function _Le(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function yLe(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e,n){if(void 0!==n)throw new Error("Quaternion.dot only takes one argument");return function bLe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return kLe(this,e,n),this.check()}add(e,n){if(void 0!==n)throw new Error("Quaternion.add only takes one argument");return function gLe(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function ILe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function NLe(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function OLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return function wLe(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check()}multiplyRight(e,n){return nc(!n),cY(this,this,e),this.check()}multiplyLeft(e,n){return nc(!n),cY(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function CLe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a}(this,this,e),this.check()}rotateY(e){return function TLe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a}(this,this,e),this.check()}rotateZ(e){return function MLe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a}(this,this,e),this.check()}scale(e){return function mLe(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(this,this,e),this.check()}slerp(e,n,i){switch(arguments.length){case 1:({start:e=jLe,target:n,ratio:i}=arguments[0]);break;case 2:[n,i]=arguments,e=this}return function wS(t,e,n,i){var f,g,m,v,w,r=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],h=n[3];return(g=r*l+s*c+o*u+a*h)<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(v=1-i,w=i),t[0]=v*r+w*l,t[1]=v*s+w*c,t[2]=v*o+w*u,t[3]=v*a+w*h,t}(this,e,n,i),this.check()}transformVector4(e,n=e){return function xLe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,g=-o*i-a*r-l*s;t[0]=u*c+g*-o+h*-l-f*-a,t[1]=h*c+g*-a+f*-o-u*-l,t[2]=f*c+g*-l+u*-a-h*-o,t[3]=e[3]}(n,e,this),qq(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e,n){return this.multiplyLeft(e,n)}multiply(e,n){return this.multiplyRight(e,n)}}const ULe=new Cn,VLe=new Cn,xS=new Cn,ES=new Cn,AS=new Cn,HLe=new Cn,GLe=new Cn;class UL{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){this.center=(new Cn).from(e),this.halfAxes=new Qo(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Cn(e).len(),new Cn(n).len(),new Cn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Cn(e).normalize(),s=new Cn(n).normalize(),o=new Cn(i).normalize();return(new pY).fromMatrix3(new Qo([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new pY(i),s=(new Qo).fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=(new Cn).from(e),this.halfAxes=s,this}clone(){return new UL(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new jL){const n=this.halfAxes,i=n.getColumn(0,xS),r=n.getColumn(1,ES),s=n.getColumn(2,AS),o=ULe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,l=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),c=i.dot(n)+e.distance;return c<=-l?e_.OUTSIDE:c>=l?e_.INSIDE:e_.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=VLe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,xS),s=i.getColumn(1,ES),o=i.getColumn(2,AS),a=r.magnitude(),l=s.magnitude(),c=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(n.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(u+=h*h),h=Math.abs(n.dot(o))-c,h>0&&(u+=h*h),u}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,xS),c=a.getColumn(1,ES),u=a.getColumn(2,AS),h=HLe.copy(l).add(c).add(u).add(o),f=GLe.copy(h).subtract(e);let g=n.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).add(c).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,xS);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,ES);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,AS);return r.transformAsPoint(e),this.halfAxes=new Qo([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const gY=new Cn,mY=new Cn;class VL{constructor(e=[0,0,1],n=0){this.normal=new Cn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return nc(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=gY.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),nc(hb(this.normal.len(),1)),this.distance=r,this}clone(e){return new VL(this.normal,this.distance)}equals(e){return hb(this.distance,e.distance)&&hb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=mY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=gY.from(e);const i=this.getPointDistance(e),r=mY.copy(this.normal).scale(i);return e.subtract(r).to(n)}}new Cn([1,0,0]),new Cn([0,1,0]),new Cn([0,0,1]),new Cn,new Cn,new VL(new Cn(1,0,0),0),new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,Math,new Qo,new Qo,new Qo,new Qo,new Qo,new Cn,new Cn,new Cn,new Cn,new Cn,new Qo,new Qo,new Qo;const vFe={[si.spatialEntity.x_dimension.id]:"x",[si.spatialEntity.y_dimension.id]:"y",[si.spatialEntity.z_dimension.id]:"z"};function wFe(t,e,n,i){const r=e.getTransformationMatrix(n,i);let s;if(r){const o=r.getTranslation(),a=function bFe(t,e){const n=cp(t,e,"Dimensions",vFe);return[n.x,n.y,n.z]}(t,n).map(c=>c/1e3/2),l=(new os).fromRotationMatrix(r,os.XYZ).toQuaternion().normalize().calculateW();s=(new UL).fromCenterHalfSizeQuaternion(o,a,l)}return s}function xFe(t,e,n,i){const{x:r,y:s,z:o,radius:a,target:l}=i,c=new Set,u=a/1e3*(a/1e3);for(const h of n){const f=wFe(t,e,h,l);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&c.add(h)}return c}function gb(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const l of Mr(t,a,qn.donor,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(a):i.set(l.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const l of i.get(a)??[])o.add(l);return o}function CS(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const l of Mr(t,a,qn.spatialEntity,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(a):i.set(l.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const l of i.get(a)??[])o.add(l);return o}function r_(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function qL(t,e,n){const i=new Set;for(const r of n){const s=yr.namedNode(r);t.forSubjects(r_(e,i),si.spatialEntity.ccf_annotations,s,null)}return i}function YL(t,e){const n=function FFe(t,e){const n=new Map;for(const i of t)for(const r of Mr(e,i,qn.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id)?.add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const s=n.get(r);for(const o of Mr(e,r,si.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s?.forEach(l=>a?.add(l))}else i.set(o.object.id,new Set(s))}return i}function UFe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[si.ontologyNode.label.id]:"label",[n]:"parent",[si.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of yS(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function bY(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of Mr(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=UFe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,l)=>r.nodes[a].label.localeCompare(r.nodes[l].label));return r.nodes[e].children=o,wY(r),r}function wY(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)wY(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const xY=(0,Ki.memoize)(function VFe(t){const e=bY(t,tc.body.id,"body",si.asctb.part_of.id);return e.nodes[tc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function XL(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const TS={[qn.label.id]:"label",[qn.description.id]:"description",[qn.link.id]:"link"},zFe={...TS,[qn.providerName.id]:"providerName"},WFe={...TS,[qn.technology.id]:"technology",[qn.thumbnail.id]:"thumbnail"},$Fe={...TS,[qn.sampleType.id]:"sampleType",[qn.sectionNumber.id]:"sectionNumber",[qn.datasets.id]:"datasets"},qFe={...TS,[qn.sampleType.id]:"sampleType",[qn.sectionCount.id]:"sectionCount",[qn.sectionSize.id]:"sectionSize",[qn.sectionUnits.id]:"sectionUnits",[qn.donor.id]:"donor",[qn.spatialEntity.id]:"spatialEntityId",[qn.sections.id]:"sections",[qn.datasets.id]:"datasets"};function YFe(t,e){return cp(t,e,"Donor",zFe)}function EY(t,e){return cp(t,e,"Dataset",WFe)}function XFe(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of yS(t,e,$Fe))if("datasets"===i){const s=EY(t,r);n[i].push(s)}else n[i]=r;return n}class JFe{constructor(e){this.database=e,this.status="Loading",this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;return D(function*(){e.status="Loading",e.message="Loading database";const n=Date.now();return e.database.connect().then(function(){var i=D(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{e.status="Error",e.message=i?.message??"Unknown error while loading database",e.timestamp=(new Date).toISOString()}).finally(()=>{e.loadTime=Date.now()-n})})()}}function KL(){return KL=D(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),KL.apply(this,arguments)}const JL="http://purl.org/ccf/",nBe={"@context":{"@base":JL,"@vocab":JL,ccf:JL,rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function MS(t,e=nBe){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const AY={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},iBe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},SY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),rBe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},s_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},ZL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class aBe{constructor(e,n){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=iBe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=AY}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const o=this.getRuiLocation(e,this.donor);o?this.rui_location=o:this.bad=!0,s_[e.group_uuid]||(s_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),l=s_[e.group_uuid]||e.group_name,c=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${c}, ${l}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const u={},h=[];this.sections=h;const f=[];this.datasets=f;for(const P of r.filter(V=>"Sample"===V.entity_type)){const V=this.getSection(P,e);u[P.submission_id]=V,h.push(V),V.section_number=V.section_number??h.length}for(const P of r)if("Dataset"===P.entity_type){const V=this.getDataset(P,n),le=(0,Ki.get)(P,["ingest_metadata","metadata","tissue_id"]);u[le]?u[le].datasets?.push(V):f.push(V)}const g=o??{},m=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const v=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=v;const w=g.dimension_units||"millimeter";this.section_units=w,this.description=`${m}, ${v} ${w}, ${this.section_count} Sections`,h.forEach((P,V)=>{P.description=`${g.x_dimension} x ${g.y_dimension} x ${v} ${w}, ${v} ${w}, ${P.description}`,P.section_number=V+1})}getSection(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${s_[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=s_[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,o=e.dataset_type??"",a=o.toLowerCase();let l,c="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(l="10x",c="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(l="AF",c="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(l="CODEX",c="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(l="IMC",c="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(l="LC",c="assets/icons/ico-bulk-lc.svg"):l=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":o.split(/ \[/)[0],c=this.getDatasetThumbnail(e,n)??c,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${s}, ${r}`,description:`Dataset Type: ${o}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:l,thumbnail:c}}getDatasetThumbnail(e,n){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(n?`?token=${n}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,Ki.get)(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>SY.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(n?`?token=${n}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(SY.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=rBe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const n=(e.description||"").toLowerCase();let i;n.includes("female")?i="Female":n.includes("male")&&(i="Male");const r=n.match(/age ([0-9]+)/)??n.match(/ ([0-9]+) years/);let s,o,a;r&&(s=(0,Ki.toNumber)(r[1]));const l=(0,Ki.get)(e,"mapped_metadata",(0,Ki.get)(e,"source_mapped_metadata",{}));!i&&l.sex?.length>0&&(i=l.sex[0]),!a&&l.race?.length>0&&(a=l.race[0]),!s&&l.age_value?.length>0&&(s=l.age_value[0]),!o&&l.body_mass_index_value?.length>0&&(o=l.body_mass_index_value[0]);for(const g of(0,Ki.get)(e,"metadata.organ_donor_data",(0,Ki.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===g.preferred_term||"Female"===g.preferred_term?i="Female":"Masculine gender"===g.preferred_term||"Male"===g.preferred_term?i="Male":"Current chronological age"===g.preferred_term||"Age"===g.preferred_term?s=(0,Ki.toNumber)(g.data_value):"Body mass index"===g.preferred_term?o=(0,Ki.toNumber)(g.data_value):"Race"===g.grouping_concept_preferred_term&&(a=g.preferred_term);let c="";i&&s?(c+=`${i}, Age ${s}`,o&&(c+=`, BMI ${o.toFixed(1)}`)):i&&(c=i);const u=new Date(e.last_modified_timestamp).toLocaleDateString(),h=s_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:c,description:`Entered ${u}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:s,sex:i,bmi:o,race:a,consortium_name:this.portal===AY?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=(0,Ki.get)(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,Ki.set)(i,["placement","target"],s.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&(0,Ki.set)(i,["placement","target"],"Male"===n.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,Ki.omit)({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const lBe=1e4,cBe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],uBe={exists:{field:"rui_location"}};function CY(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??uBe,_source:{includes:cBe}})}function QL(t,e){return eF.apply(this,arguments)}function eF(){return eF=D(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),eF.apply(this,arguments)}function tF(){return tF=D(function*(t,e,n){const i=lBe,r=function dBe(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),s=CY(0,i,n),o=yield QL(t,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const l=[];for(let h=i;h<a;h+=i)l.push(QL(t,{method:"POST",headers:r,body:CY(h,i,n)}));const c=yield Promise.all(l);if(c.some(h=>!h))return;const u=c.map(h=>h?.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...u)}}}),tF.apply(this,arguments)}function nF(){return nF=D(function*(t,e,n,i,r="",s=""){let o;if("static"===e?o=yield QL(t):"search-api"===e&&(o=yield function hBe(t,e,n){return tF.apply(this,arguments)}(t,i,n)),o)return function sBe(t,e,n=!1){const r={},s=(0,Ki.get)(t,"hits.hits",[]).map(a=>(0,Ki.get)(a,"_source",{})).sort((a,l)=>a.uuid.localeCompare(l.uuid)).map(a=>new aBe(a,e).toJsonLd());for(const a of s){const l=a["@id"];r[l]?r[l].samples.push(a.samples[0]):r[l]=a}const o=Object.values(r);return n&&(function oBe(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(c=>c["@id"]===o)&&(r[s].deleteMe=!0,n++)}i.samples=r.filter(s=>!0!==s.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(o),console.log(o.map(a=>({"@context":ZL,...a})))),MS(JSON.stringify({"@context":ZL,"@graph":o}),ZL)}(o,i);console.warn(`Unable to load ${t}`)}),nF.apply(this,arguments)}const{delMany:pBe,get:TY,setMany:gBe}=F,MY={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class mBe{constructor(e=MY){this.options=e,this.store=new pS(void 0,{factory:yr}),this.graph=new Wq(this),this.scene=new $q(this)}connect(e,n=!1){var i=this;return D(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return D(function*(){const n=(new Date).getTime(),i=TNe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield TY(r).catch(()=>{});let a;o&&n-new Date(+o).getTime()>36e5?yield pBe([s,r]).catch(()=>{}):a=yield TY(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),gBe([[s,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return D(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=PL(r,yr);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=PL(s,yr))}else r?.length>0&&i.push(r);i.push(yield function eBe(){return KL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function fBe(t,e,n,i){return nF.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(s=>{if(s)return e.addDataSources([s])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return D(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var s=D(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=MS(o=yield fetch(a).then(l=>l.text()).catch(l=>(console.log(`Error fetching ${a}`,l),"[]"))),yield DL(o,r)}else o.endsWith("n3")?yield function tPe(t,e){return NL.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function ePe(t,e){return OL.apply(this,arguments)}(o,r):(o=MS(o),yield DL(o,r));else o=MS(JSON.stringify(o)),yield DL(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return D(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function tBe(t){const e=xY(t),n=new Map;for(const{subject:i,object:r}of Mr(t,null,si.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;n.set(i.id,[...s].map(a=>yr.namedNode(a)))}for(const{object:i}of Mr(t,null,qn.spatialEntity,null,null))for(const{subject:r}of Mr(t,null,si.spatialPlacement.source,i,null))for(const{object:s}of Mr(t,r,si.spatialPlacement.target,null,null))for(const o of n.get(s.id)??[])t.addQuad(yr.namedNode(i.id),si.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function nPe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return D(function*(){n.store=PL(e,yr),n.graph=new Wq(n),n.scene=new $q(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function AFe(t,e,n){let i=function SFe(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),qn.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function PFe(t,e,n=!0){const i=new Set;if(t.forSubjects(r_(e,i),qn.spatialEntity,null,null),!n){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=gb(t,i,s=>function CFe(t,e,n){const i=new Set;return t.forSubjects(r_(e,i),qn.sex,qn[n],null),i}(t,s,r))}if(i.size>0&&n.consortiums?.length>0&&(i=gb(t,i,r=>function TFe(t,e,n){const i=new Set;for(const r of n){const s=yr.literal(r);t.forSubjects(r_(e,i),qn.consortiumName,s,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=gb(t,i,r=>function MFe(t,e,n){const i=new Set;for(const r of n){const s=yr.literal(r);t.forSubjects(r_(e,i),qn.providerName,s,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function EFe(t,e,n){const i=new Map,r=new Set,s=new Set(e);for(const l of e)for(const c of Mr(t,l,qn.sections,null,null))s.add(c.object.id);for(const l of s)for(const c of Mr(t,l,qn.datasets,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(l):i.set(c.object.id,[l]);const o=n(r),a=new Set;for(const l of o)for(const c of i.get(l)??[])a.add(c);return a}(t,i,r=>function IFe(t,e,n){const i=new Set;for(const r of n){const s=yr.literal(r);t.forSubjects(r_(e,i),qn.technology,s,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=CS(t,i,r=>function LFe(t,e,n,i){const r=new Set;for(const s of i)xFe(t,e,n,s).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(tc.body.id)&&(i=CS(t,i,s=>qL(t,s,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(tc.cell.id)&&(i=CS(t,i,s=>function DFe(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,si.asctb.located_in,null),r===tc.cell.id&&i.add(tc.body.id);return qL(t,e,[...i])}(t,s,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=CS(t,i,s=>function RFe(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,si.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(tc.body.id);return qL(t,e,[...i])}(t,s,r)))}if(i.size>0&&2===n.ageRange?.length&&(0,Ki.isFinite)(n.ageRange[0])&&(0,Ki.isFinite)(n.ageRange[1])){const r=Math.max(...n.ageRange),s=Math.min(...n.ageRange);1===s&&110===r||(i=gb(t,i,o=>function OFe(t,e,n,i){const r=new Set;for(const s of e)for(const o of Mr(t,s,qn.age,null,null)){const a=(0,_S.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}if(i.size>0&&2===n.bmiRange?.length&&(0,Ki.isFinite)(n.bmiRange[0])&&(0,Ki.isFinite)(n.bmiRange[1])){const r=Math.max(...n.bmiRange),s=Math.min(...n.bmiRange);13===s&&83===r||(i=gb(t,i,o=>function NFe(t,e,n,i){const r=new Set;for(const s of e)for(const o of Mr(t,s,qn.bmi,null,null)){const a=(0,_S.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(yr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function vPe(t,e){const n=t.getObjects(yr.namedNode(e),qn.spatialEntity,null);if(n.length>0)return up(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return D(function*(){return e.status||(e.status=new JFe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return D(function*(){return function xPe(t){const e=new Set;for(const n of Mr(t,null,qn.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return D(function*(){return function EPe(t){const e=new Set;for(const n of Mr(t,null,qn.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return D(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function KFe(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of yS(t,e,qFe))if("sections"===i){const s=XFe(t,r);n[i].push(s)}else if("datasets"===i){const s=EY(t,r);n[i].push(s)}else n[i]="donor"===i?YFe(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return D(function*(){return function wPe(t,e){const n=db(e,t,qn.donor.id),i=db(e,n,qn.providerUUID.id),r=new Set;for(const l of t)for(const c of Mr(e,l,qn.spatialEntity,null,null))r.add(c.subject.id);const s=db(e,r,qn.sections.id),o=new Set([...db(e,r,qn.datasets.id),...db(e,s,qn.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([l,c])=>({label:l,count:c}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return D(function*(){return function BFe(t,e){const n={};return YL(t,e).forEach((r,s)=>{n[s]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return D(function*(){return function jFe(t,e){const n=YL(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Mr(e,null,si.asctb.located_in,s,null)){const l=a.subject.id;if(i.has(l)){const c=i.get(l);o?.forEach(u=>c?.add(u))}else i.set(l,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[tc.cell.id]=n.get(tc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return D(function*(){return function kFe(t,e){const n=YL(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Mr(e,null,si.asctb.bm_located_in,s,null)){const l=a.subject.id;if(i.has(l)){const c=i.get(l);o?.forEach(u=>c?.add(u))}else i.set(l,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=n.get(tc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return D(function*(){return xY(e.store)})()}getCellTypeTreeModel(){var e=this;return D(function*(){return function HFe(t){return bY(t,tc.cell.id,"cell",si.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return D(function*(){return function GFe(t){const e=si.x("ccf_biomarker_type"),n={biomarkers:XL("biomarkers","Biomarkers","",[])};for(const i of Mr(t,null,e,null,null)){const r=i.object.value,s=i.subject.id;n[r]||(n[r]=XL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(s);const o=XL(s,"",r,[]),a={[si.ontologyNode.label.id]:"label",[hPe_label.id]:"synonymLabels"};for(const[l,c]of yS(t,s,a))"synonymLabels"===l?c&&c!==o.label&&o.synonymLabels.push(c):o[l]=c;for(const l of Object.values(n))l.children.length>1&&l.children.sort((c,u)=>n[c]?.label.localeCompare(n[u]?.label));n[s]=o}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return D(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return D(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return D(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return D(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class IY extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class xBe{constructor(){this.cancelUncompleted$=new Jt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const iF="\u0275fac",DY=Symbol("InjectorInstance"),RY=Symbol("FactoryHasBeenDecorated");function OY(t,e){const n=t[DY];return n?n.get(e):null}const SBe={cancelUncompleted:!1};function NY(t=SBe){return(e,n,i)=>{let r;const s=function EBe(t){return t?new xBe:null}(t.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=OY(this,$u)||function bBe(){throw new IY}(),l=OY(this,yn)||function wBe(){throw new IY}(),c=r.apply(this,arguments);return l.runOutsideAngular(()=>function vBe(t,e,n){return Kg(e)?function yBe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):sh(e)?function _Be(t,e,n){return null!==n&&(e=e.pipe($a(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,c,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,n,{set:a=>r=a,get:()=>o}),function ABe(t){if(RY in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[iF]&&function rF(t){const e=t[iF];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[DY]=st(hi),r};n&&(n.factory=i),Object.defineProperty(t,iF,{get:()=>i})}(e),t.constructor.prototype[RY]=!0}(e)}}let PY=(()=>{class t{static#e=this.type="[CallToAction] Learn More"}return t})(),LY=(()=>{class t{static#e=this.type="[CallToAction] Open Dialog"}return t})(),FY=(()=>{class t{static#e=this.type="[CallToAction] Close Dialog"}return t})();function CBe(t,e){}class IS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let BY=(()=>{class t extends EP{constructor(n,i,r,s,o,a,l,c){super(),this._elementRef=n,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._platform=jt(ya),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=jt(Zs),this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){const i=this._ariaLabelledByQueue.indexOf(n);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),i}attachTemplatePortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,i){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{n.removeEventListener("blur",r),n.removeEventListener("mousedown",r),n.removeAttribute("tabindex")};n.addEventListener("blur",r),n.addEventListener("mousedown",r)})),n.focus(i)}_focusByCssSelector(n,i){let r=this._elementRef.nativeElement.querySelector(n);r&&this._forceFocus(r,i)}_trapFocus(){const n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const n=this._config.restoreFocus;let i=null;if("string"==typeof n?i=this._document.querySelector(n):"boolean"==typeof n?i=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(i=n),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=uP(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const n=this._elementRef.nativeElement,i=uP();return n===i||n.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=uP()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(PW),st(gi,8),st(IS),st(mP),st(yn),st(V1),st(_P))};static#t=this.\u0275cmp=mi({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Do(j1,7),2&i){let s;ir(s=rr())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Nr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[pi,Os],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Ii(0,CBe,0,0,"ng-template",0)},dependencies:[j1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class sF{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Jt,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!lh(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const kY=new Et("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=jt(Kl);return()=>t.scrollStrategies.block()}}),TBe=new Et("DialogData"),MBe=new Et("DefaultDialogConfig");let DBe=0,RBe=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(n,i,r,s,o,a){this._overlay=n,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt,this._afterOpenedAtThisLevel=new Jt,this._ariaHiddenElements=new Map,this.afterAllClosed=Pv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Vc(void 0))),this._scrollStrategy=a}open(n,i){(i={...this._defaultOptions||new IS,...i}).id=i.id||"cdk-dialog-"+DBe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new sF(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(n,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){oF(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){oF(this._openDialogsAtThisLevel,n=>{!1===n.config.closeOnDestroy&&this._removeOpenDialog(n,!1)}),oF(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){const i=new SP({positionStrategy:n.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation});return n.backdropClass&&(i.backdropClass=n.backdropClass),i}_attachContainer(n,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:IS,useValue:r},{provide:sF,useValue:i},{provide:V1,useValue:n}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=BY;const l=new xP(a,r.viewContainerRef,Ui.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return n.attach(l).instance}_attachDialogContent(n,i,r,s){if(n instanceof dl){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new k1(n,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new xP(n,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(n,i,r,s){const o=n.injector||n.viewContainerRef?.injector,a=[{provide:TBe,useValue:n.data},{provide:sF,useValue:i}];return n.providers&&("function"==typeof n.providers?a.push(...n.providers(i,n,r)):a.push(...n.providers)),n.direction&&(!o||!o.get(Ov,null,{optional:!0}))&&a.push({provide:Ov,useValue:{value:n.direction,change:on()}}),Ui.create({parent:o||s,providers:a})}_removeOpenDialog(n,i){const r=this.openDialogs.indexOf(n);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const n=this._overlayContainer.getContainerElement();if(n.parentElement){const i=n.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==n&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Kl),ct(Ui),ct(MBe,8),ct(t,12),ct(U1),ct(kY))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oF(t,e){let n=t.length;for(;n--;)e(t[n])}function OBe(t,e){}class aF{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const lF="mdc-dialog--open",jY="mdc-dialog--opening",UY="mdc-dialog--closing";let VY=(()=>{class t extends BY{constructor(n,i,r,s,o,a,l,c,u){super(n,i,r,s,o,a,l,u),this._animationMode=c,this._animationStateChanged=new _n,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?GY(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?GY(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(HY,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(jY,lF)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(lF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(lF),this._animationsEnabled?(this._hostElement.style.setProperty(HY,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(UY)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(n){this._actionSectionCount+=n,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(jY,UY)}_waitForAnimationToComplete(n,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,n)}_requestAnimationFrame(n){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(n):n()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(n){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(n){const i=super.attachComponentPortal(n);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(PW),st(gi,8),st(aF),st(mP),st(yn),st(V1),st(ol,8),st(_P))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){2&i&&(xf("id",r._config.id),Nr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),br("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[pi,Os],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Pn(0,"div",0)(1,"div",1),Ii(2,OBe,0,0,"ng-template",2),Bn()())},dependencies:[j1],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return t})();const HY="--mat-dialog-transition-duration";function GY(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?SW(t.substring(0,t.length-2)):t.endsWith("s")?1e3*SW(t.substring(0,t.length-1)):"0"===t?0:null}var DS=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(DS||{});class RS{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Jt,this._beforeClosed=new Jt,this._state=DS.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(vi(r=>"opened"===r.state),Ai(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(vi(r=>"closed"===r.state),Ai(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Gl(this.backdropClick(),this.keydownEvents().pipe(vi(r=>27===r.keyCode&&!this.disableClose&&!lh(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function zY(t,e,n){return t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(vi(n=>"closing"===n.state),Ai(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=DS.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=DS.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const WY=new Et("MatMdcDialogData"),LBe=new Et("mat-mdc-dialog-default-options"),$Y=new Et("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=jt(Kl);return()=>t.scrollStrategies.block()}});let BBe=0,OS=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(n,i,r,s,o,a,l,c){this._overlay=n,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt,this._afterOpenedAtThisLevel=new Jt,this.dialogConfigClass=aF,this.afterAllClosed=Pv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Vc(void 0))),this._dialog=i.get(RBe),this._dialogRefConstructor=RS,this._dialogContainerType=VY,this._dialogDataToken=WY}open(n,i){let r;(i={...this._defaultOptions||new aF,...i}).id=i.id||"mat-mdc-dialog-"+BBe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(n,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:IS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(n){let i=n.length;for(;i--;)n[i].close()}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Kl),ct(Ui),ct(Mf,8),ct(LBe,8),ct($Y),ct(t,12),ct(U1),ct(ol,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kBe=0,qY=(()=>{class t{constructor(n,i,r){this._dialogRef=n,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=function YY(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||t)(st(RS,8),st(fi),st(OS))};static#t=this.\u0275dir=$t({type:t,standalone:!0})}return t})(),cF=(()=>{class t extends qY{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+kBe++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Wi(t)))(r||t)}})();static#t=this.\u0275dir=$t({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&xf("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[pi]})}return t})(),uF=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return t})();let KY=(()=>{class t{constructor(n){this.http=n,this.panelContent=new Ji({content:[],infoTitle:"",videoID:""})}updateData(n,i,r){this.http.get(n,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(n){const i=[],r=n.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gh))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const VBe=["*"];let NS;function _b(t){return function HBe(){if(void 0===NS&&(NS=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(NS=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return NS}()?.createHTML(t)||t}function JY(t){return Error(`Unable to find icon with the name "${t}"`)}function ZY(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function QY(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class dp{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let PS=(()=>{class t{constructor(n,i,r,s){this._httpClient=n,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(n,i,r){return this.addSvgIconInNamespace("",n,i,r)}addSvgIconLiteral(n,i,r){return this.addSvgIconLiteralInNamespace("",n,i,r)}addSvgIconInNamespace(n,i,r,s){return this._addSvgIconConfig(n,i,new dp(r,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,r,s){const o=this._sanitizer.sanitize(Is.HTML,r);if(!o)throw QY(r);const a=_b(o);return this._addSvgIconConfig(n,i,new dp("",a,s))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,r){return this._addSvgIconSetConfig(n,new dp(i,null,r))}addSvgIconSetLiteralInNamespace(n,i,r){const s=this._sanitizer.sanitize(Is.HTML,i);if(!s)throw QY(i);const o=_b(s);return this._addSvgIconSetConfig(n,new dp("",o,r))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){const i=this._sanitizer.sanitize(Is.RESOURCE_URL,n);if(!i)throw ZY(n);const r=this._cachedIconsByUrl.get(i);return r?on(LS(r)):this._loadSvgIconFromConfig(new dp(n,null)).pipe(_r(s=>this._cachedIconsByUrl.set(i,s)),Xt(s=>LS(s)))}getNamedSvgIcon(n,i=""){const r=eX(i,n);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,n),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(n,o):rh(JY(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?on(LS(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(Xt(i=>LS(i)))}_getSvgFromIconSetConfigs(n,i){const r=this._extractIconWithNameFromAnySet(n,i);return r?on(r):mv(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Yl(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Is.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),on(null)})))).pipe(Xt(()=>{const o=this._extractIconWithNameFromAnySet(n,i);if(!o)throw JY(n);return o}))}_extractIconWithNameFromAnySet(n,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,n,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(_r(i=>n.svgText=i),Xt(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?on(null):this._fetchIcon(n).pipe(_r(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,r){const s=n.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(_b("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(n){const i=this._document.createElement("DIV");i.innerHTML=n;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(n){const i=this._svgElementFromString(_b("<svg></svg>")),r=n.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){const{url:i,options:r}=n,s=r?.withCredentials??!1;if(!this._httpClient)throw function GBe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Is.RESOURCE_URL,i);if(!o)throw ZY(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Xt(c=>_b(c)),kv(()=>this._inProgressUrlFetches.delete(o)),ju());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(n,i,r){return this._svgIconConfigs.set(eX(n,i),r),this}_addSvgIconSetConfig(n,i){const r=this._iconSetConfigs.get(n);return r?r.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){const i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,n);if(s)return WBe(s)?new dp(s.url,null,s.options):new dp(s,null)}}static#e=this.\u0275fac=function(i){return new(i||t)(ct(gh,8),ct(y0),ct(gi,8),ct(Ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function LS(t){return t.cloneNode(!0)}function eX(t,e){return t+":"+e}function WBe(t){return!(!t.url||!t.options)}const $Be=new Et("MAT_ICON_DEFAULT_OPTIONS"),qBe=new Et("mat-icon-location",{providedIn:"root",factory:function YBe(){const t=jt(gi),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),tX=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],XBe=tX.map(t=>`[${t}]`).join(", "),KBe=/^url\(['"]?#(.*?)['"]?\)$/;let nX=(()=>{class t{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){const i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){const i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(n,i,r,s,o,a){this._elementRef=n,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Lt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];const i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const n=this._elementsWithExternalReferences;if(n&&n.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){const n=this._elementRef.nativeElement;let i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=n.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return"string"==typeof n?n.trim().split(" ")[0]:n}_prependPathToReferences(n){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${n}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(n){const i=n.querySelectorAll(XBe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)tX.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(KBe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){const[i,r]=this._splitIconName(n);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Ai(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(PS),bu("aria-hidden"),st(qBe),st(Ao),st($Be,8))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){2&i&&(Nr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),wf(r.color?"mat-"+r.color:""),br("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[qt.HasDecoratorInputTransform,"inline","inline",ns],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[bc,Os],ngContentSelectors:VBe,decls:1,vars:0,template:function(i,r){1&i&&(ka(),Pi(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),iX=(()=>{class t{constructor(){this._listeners=[]}notify(n,i){for(let r of this._listeners)r(n,i)}listen(n){return this._listeners.push(n),()=>{this._listeners=this._listeners.filter(i=>n!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const rX=new Et("CdkAccordion");let ZBe=0,QBe=(()=>{class t{get expanded(){return this._expanded}set expanded(n){this._expanded!==n&&(this._expanded=n,this.expandedChange.emit(n),n?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(n,i,r){this.accordion=n,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Lt.EMPTY,this.closed=new _n,this.opened=new _n,this.destroyed=new _n,this.expandedChange=new _n,this.id="cdk-accordion-child-"+ZBe++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(n=>{this.disabled||(this.expanded=n)})}static#e=this.\u0275fac=function(i){return new(i||t)(st(rX,12),st(Zs),st(iX))};static#t=this.\u0275dir=$t({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[qt.HasDecoratorInputTransform,"expanded","expanded",ns],disabled:[qt.HasDecoratorInputTransform,"disabled","disabled",ns]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Ri([{provide:rX,useValue:void 0}]),bc]})}return t})();const eke=["body"],tke=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],nke=["mat-expansion-panel-header","*","mat-action-row"];function ike(t,e){}const rke=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ske=["mat-panel-title","mat-panel-description","*"];function oke(t,e){1&t&&(Pn(0,"span",1),wn(),Pn(1,"svg",2),ts(2,"path",3),Bn()()),2&t&&Di("@indicatorRotate",Vr()._getExpandedState())}const sX=new Et("MAT_ACCORDION"),oX="225ms cubic-bezier(0.4,0.0,0.2,1)",aX={indicatorRotate:Nv("indicatorRotate",[dh("collapsed, void",ba({transform:"rotate(0deg)"})),dh("expanded",ba({transform:"rotate(180deg)"})),ip("expanded <=> collapsed, void => collapsed",uh(oX))]),bodyExpansion:Nv("bodyExpansion",[dh("collapsed, void",ba({height:"0px",visibility:"hidden"})),dh("expanded",ba({height:"*",visibility:""})),ip("expanded <=> collapsed, void => collapsed",uh(oX))])},lX=new Et("MAT_EXPANSION_PANEL");let ake=(()=>{class t{constructor(n,i){this._template=n,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||t)(st(dl),st(lX,8))};static#t=this.\u0275dir=$t({type:t,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}return t})(),lke=0;const cX=new Et("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let uX=(()=>{class t extends QBe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(n){this._hideToggle=n}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(n){this._togglePosition=n}constructor(n,i,r,s,o,a,l){super(n,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new _n,this.afterCollapse=new _n,this._inputChanges=new Jt,this._headerId="mat-expansion-panel-header-"+lke++,this.accordion=n,this._document=o,this._animationsDisabled="NoopAnimations"===a,l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Vc(null),vi(()=>this.expanded&&!this._portal),Ai(1)).subscribe(()=>{this._portal=new k1(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(n){this._inputChanges.next(n)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){const n=this._document.activeElement,i=this._body.nativeElement;return n===i||i.contains(n)}return!1}_animationStarted(n){!dX(n)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(n){dX(n)||("expanded"===n.toState?this.afterExpand.emit():"collapsed"===n.toState&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static#e=this.\u0275fac=function(i){return new(i||t)(st(sX,12),st(Zs),st(iX),st(Io),st(gi),st(ol,8),st(cX,8))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&fl(s,ake,5),2&i){let o;ir(o=rr())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Do(eke,5),2&i){let s;ir(s=rr())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&br("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[qt.HasDecoratorInputTransform,"hideToggle","hideToggle",ns],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Ri([{provide:sX,useValue:void 0},{provide:lX,useExisting:t}]),bc,pi,Rr,Os],ngContentSelectors:nke,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(1&i){const s=Ld();ka(tke),Pi(0),Pn(1,"div",1,0),Vi("@bodyExpansion.start",function(a){return Vs(s),ds(r._animationStarted(a))})("@bodyExpansion.done",function(a){return Vs(s),ds(r._animationDone(a))}),Pn(3,"div",2),Pi(4,1),Ii(5,ike,0,0,"ng-template",3),Bn(),Pi(6,2),Bn()}2&i&&(xn(),Di("@bodyExpansion",r._getExpandedState())("id",r.id),Nr("aria-labelledby",r._headerId),xn(4),Di("cdkPortalOutlet",r._portal))},dependencies:[j1],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[aX.bodyExpansion]},changeDetection:0})}return t})();function dX(t){return"void"===t.fromState}let cke=(()=>{class t{constructor(n,i,r,s,o,a,l){this.panel=n,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Lt.EMPTY,this.tabIndex=0;const c=n.accordion?n.accordion._stateChanges.pipe(vi(u=>!(!u.hideToggle&&!u.togglePosition))):Ro;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Gl(n.opened,n.closed,c,n._inputChanges.pipe(vi(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),n.closed.pipe(vi(()=>n._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const n=this._isExpanded();return n&&this.expandedHeight?this.expandedHeight:!n&&this.collapsedHeight?this.collapsedHeight:null}_keydown(n){switch(n.keyCode){case 32:case 13:lh(n)||(n.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(n))}}focus(n,i){n?this._focusMonitor.focusVia(this._element,n,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(n=>{n&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||t)(st(uX,1),st(fi),st(_P),st(Zs),st(cX,8),st(ol,8),bu("tabindex"))};static#t=this.\u0275cmp=mi({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Vi("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(Nr("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Xy("height",r._getHeaderHeight()),br("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[qt.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>null==n?0:mE(n)]},standalone:!0,features:[bc,Os],ngContentSelectors:ske,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){1&i&&(ka(rke),Pn(0,"span",0),Pi(1),Pi(2,1),Pi(3,2),Bn(),Ii(4,oke,3,1,"span",1)),2&i&&(br("mat-content-hide-toggle",!r._showToggle()),xn(4),Rs(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[aX.indicatorRotate]},changeDetection:0})}return t})();function hX(t,e,n){return n?hX(t,e).pipe(o1(n)):new At(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=t(r);return Qe(e)?()=>e(r,s):void 0})}const uke=["youtubeContainer"];function dke(t,e){if(1&t){const n=Ld();Pn(0,"youtube-player-placeholder",2),Vi("click",function(){return Vs(n),ds(Vr()._load(!0))}),Bn()}if(2&t){const n=Vr();Di("videoId",n.videoId)("width",n.width)("height",n.height)("isLoading",n._isLoading)("buttonLabel",n.placeholderButtonLabel)("quality",n.placeholderImageQuality)}}let hke=(()=>{class t{_getBackgroundImage(){let n;return n="low"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:"high"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${n})`}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=mi({type:t,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(i,r){2&i&&(Xy("background-image",r._getBackgroundImage())("width",r.width,"px")("height",r.height,"px"),br("youtube-player-placeholder-loading",r.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},standalone:!0,features:[Os],decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(i,r){1&i&&(Pn(0,"button",0),wn(),Pn(1,"svg",1),ts(2,"path",2)(3,"path",3),Bn()()),2&i&&Nr("aria-label",r.buttonLabel)},styles:[".youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}"],encapsulation:2,changeDetection:0})}return t})();const fke=new Et("YOUTUBE_PLAYER_CONFIG");function gX(t){return null==t?t:mE(t,0)}let pke=(()=>{class t{get height(){return this._height}set height(n){this._height=null==n||isNaN(n)?390:n}get width(){return this._width}set width(n){this._width=null==n||isNaN(n)?640:n}constructor(n,i){this._ngZone=n,this._destroyed=new Jt,this._playerChanges=new Ji(void 0),this._nonce=jt(hg,{optional:!0}),this._changeDetectorRef=jt(Zs),this._isLoading=!1,this._hasPlaceholder=!0,this._height=390,this._width=640,this.disableCookies=!1,this.disablePlaceholder=!1,this.showBeforeIframeApiLoads=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");const r=jt(fke,{optional:!0});this.loadApi=r?.loadApi??!0,this.disablePlaceholder=!!r?.disablePlaceholder,this.placeholderButtonLabel=r?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=r?.placeholderImageQuality||"standard",this._isBrowser=jd(i)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(n){this._shouldRecreatePlayer(n)?this._conditionallyLoad():this._player&&((n.width||n.height)&&this._setSize(),n.suggestedQuality&&this._setQuality(),(n.startSeconds||n.endSeconds||n.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(n,i){this._player?this._player.seekTo(n,i):this._getPendingState().seek={seconds:n,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(n){this._player?this._player.setVolume(n):this._getPendingState().volume=n}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(n){if(this._player)return this._player.setPlaybackRate(n);this._getPendingState().playbackRate=n}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_load(n){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer(n):(this.loadApi&&(this._isLoading=!0,function gke(t){if(dF)return;const n=document.createElement("script"),i=r=>{n.removeEventListener("load",i),n.removeEventListener("error",i),"error"===r.type&&(dF=!1)};n.addEventListener("load",i),n.addEventListener("error",i),n.src="https://www.youtube.com/iframe_api",n.async=!0,t&&(n.nonce=t),dF=!0,document.body.appendChild(n)}(this._nonce)),this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(n))}))}_conditionallyLoad(){this._shouldShowPlaceholder()?1===this.playerVars?.autoplay&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return!this.disablePlaceholder&&(!this._isBrowser||this._hasPlaceholder&&!!this.videoId&&!this._player)}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(n){const i=n.videoId||n.playerVars||n.disableCookies||n.disablePlaceholder;return!!i&&!i.isFirstChange()}_createPlayer(n){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const i=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:n?{...this.playerVars||{},autoplay:1}:this.playerVars})),r=()=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=i,this._pendingPlayer=void 0,i.removeEventListener("onReady",r),this._playerChanges.next(i),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(i,this._pendingPlayerState),this._pendingPlayerState=void 0);const s=i.getPlayerState();(s===YT.PlayerState.UNSTARTED||s===YT.PlayerState.CUED||null==s)&&this._cuePlayer(),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=i,i.addEventListener("onReady",r)}_applyPendingPlayerState(n,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:l}=i;switch(r){case YT.PlayerState.PLAYING:n.playVideo();break;case YT.PlayerState.PAUSED:n.pauseVideo();break;case YT.PlayerState.CUED:n.stopVideo()}null!=s&&n.setPlaybackRate(s),null!=o&&n.setVolume(o),null!=a&&(a?n.mute():n.unMute()),null!=l&&n.seekTo(l.seconds,l.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(n){return this._playerChanges.pipe(qi(i=>i?hX(r=>{i.addEventListener(n,r)},r=>{try{i?.removeEventListener?.(n,r)}catch{}}):on()),i=>new At(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),$a(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||t)(st(yn),st(sl))};static#t=this.\u0275cmp=mi({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Do(uke,7),2&i){let s;ir(s=rr())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:[qt.HasDecoratorInputTransform,"height","height",mE],width:[qt.HasDecoratorInputTransform,"width","width",mE],startSeconds:[qt.HasDecoratorInputTransform,"startSeconds","startSeconds",gX],endSeconds:[qt.HasDecoratorInputTransform,"endSeconds","endSeconds",gX],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[qt.HasDecoratorInputTransform,"disableCookies","disableCookies",ns],loadApi:[qt.HasDecoratorInputTransform,"loadApi","loadApi",ns],disablePlaceholder:[qt.HasDecoratorInputTransform,"disablePlaceholder","disablePlaceholder",ns],showBeforeIframeApiLoads:[qt.HasDecoratorInputTransform,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",ns],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},standalone:!0,features:[bc,Rr,Os],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(i,r){1&i&&(Ii(0,dke,1,6,"youtube-player-placeholder",1),Pn(1,"div"),ts(2,"div",null,0),Bn()),2&i&&(Rs(0,r._shouldShowPlaceholder()?0:-1),xn(),Xy("display",r._shouldShowPlaceholder()?"none":""))},dependencies:[hke],encapsulation:2,changeDetection:0})}return t})(),dF=!1;let hp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function mX(t){hp=t}const _X=/[&<>"']/,mke=new RegExp(_X.source,"g"),yX=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_ke=new RegExp(yX.source,"g"),yke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vX=t=>yke[t];function Xa(t,e){if(e){if(_X.test(t))return t.replace(mke,vX)}else if(yX.test(t))return t.replace(_ke,vX);return t}const vke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function bke(t){return t.replace(vke,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const wke=/(^|[^\[])\^/g;function ki(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(wke,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}function bX(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const FS={exec:()=>null};function wX(t,e){const i=t.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&"\\"===a[c];)l=!l;return l?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function BS(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.slice(0,i-r)}function xX(t,e,n,i){const r=e.href,s=e.title?Xa(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:Xa(o)}}class kS{options;rules;lexer;constructor(e){this.options=e||hp}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:BS(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function Eke(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=BS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=BS(n[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",l="",c=!1;for(;e;){let u=!1;if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let h=n[2].split("\n",1)[0].replace(/^\t+/,P=>" ".repeat(3*P.length)),f=e.split("\n",1)[0],g=0;this.options.pedantic?(g=2,l=h.trimStart()):(g=n[2].search(/[^ ]/),g=g>4?1:g,l=h.slice(g),g+=n[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),u=!0),!u){const P=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),le=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const Ie=e.split("\n",1)[0];if(f=Ie,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),le.test(f)||re.test(f)||P.test(f)||V.test(e))break;if(f.search(/[^ ]/)>=g||!f.trim())l+="\n"+f.slice(g);else{if(m||h.search(/[^ ]/)>=4||le.test(h)||re.test(h)||V.test(h))break;l+="\n"+f}!m&&!f.trim()&&(m=!0),a+=Ie+"\n",e=e.substring(Ie.length+1),h=f.slice(g)}}s.loose||(c?s.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let w,v=null;this.options.gfm&&(v=/^\[[ xX]\] /.exec(l),v&&(w="[ ] "!==v[0],l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!v,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(g=>"space"===g.type),f=h.length>0&&h.some(g=>/\n.*\n/.test(g.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:"pre"===n[1]||"script"===n[1]||"style"===n[1],text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){if(!/[:|]/.test(n[2]))return;const i={type:"table",raw:n[0],header:wX(n[1]).map(r=>({text:r,tokens:[]})),align:n[2].replace(/^\||\| *$/g,"").split("|"),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let s,o,a,l,r=i.align.length;for(s=0;s<r;s++){const c=i.align[s];c&&(i.align[s]=/^ *-+: *$/.test(c)?"right":/^ *:-+: *$/.test(c)?"center":/^ *:-+ *$/.test(c)?"left":null)}for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=wX(i.rows[s],i.header.length).map(c=>({text:c,tokens:[]}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(l=i.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Xa(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=BS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function xke(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}(n[2],"()");if(o>-1){const l=(0===n[0].indexOf("!")?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),xX(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return xX(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,l,c=o,u=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){c+=l;continue}if((r[5]||r[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+l);if(Math.min(o,l)%2){const v=g.slice(1,-1);return{type:"em",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Xa(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,r;return"@"===n[2]?(i=Xa(n[1]),r="mailto:"+i):(i=Xa(n[1]),r=i),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let i,r;if("@"===n[2])i=Xa(n[0]),r="mailto:"+i;else{let s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(s!==n[0]);i=Xa(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return i=this.lexer.state.inRawBlock?n[0]:Xa(n[0]),{type:"text",raw:n[0],text:i}}}}const En={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:FS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};En.def=ki(En.def).replace("label",En._label).replace("title",En._title).getRegex(),En.bullet=/(?:[*+-]|\d{1,9}[.)])/,En.listItemStart=ki(/^( *)(bull) */).replace("bull",En.bullet).getRegex(),En.list=ki(En.list).replace(/bull/g,En.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+En.def.source+")").getRegex(),En._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",En._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,En.html=ki(En.html,"i").replace("comment",En._comment).replace("tag",En._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),En.lheading=ki(En.lheading).replace(/bull/g,En.bullet).getRegex(),En.paragraph=ki(En._paragraph).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.blockquote=ki(En.blockquote).replace("paragraph",En.paragraph).getRegex(),En.normal={...En},En.gfm={...En.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},En.gfm.table=ki(En.gfm.table).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.gfm.paragraph=ki(En._paragraph).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",En.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.pedantic={...En.normal,html:ki("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",En._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:FS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ki(En.normal._paragraph).replace("hr",En.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",En.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const tn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:FS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:FS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};tn.punctuation=ki(tn.punctuation,"u").replace(/punctuation/g,tn._punctuation).getRegex(),tn.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,tn.anyPunctuation=/\\[punct]/g,tn._escapes=/\\([punct])/g,tn._comment=ki(En._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),tn.emStrong.lDelim=ki(tn.emStrong.lDelim,"u").replace(/punct/g,tn._punctuation).getRegex(),tn.emStrong.rDelimAst=ki(tn.emStrong.rDelimAst,"gu").replace(/punct/g,tn._punctuation).getRegex(),tn.emStrong.rDelimUnd=ki(tn.emStrong.rDelimUnd,"gu").replace(/punct/g,tn._punctuation).getRegex(),tn.anyPunctuation=ki(tn.anyPunctuation,"gu").replace(/punct/g,tn._punctuation).getRegex(),tn._escapes=ki(tn._escapes,"gu").replace(/punct/g,tn._punctuation).getRegex(),tn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,tn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,tn.autolink=ki(tn.autolink).replace("scheme",tn._scheme).replace("email",tn._email).getRegex(),tn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,tn.tag=ki(tn.tag).replace("comment",tn._comment).replace("attribute",tn._attribute).getRegex(),tn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,tn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,tn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,tn.link=ki(tn.link).replace("label",tn._label).replace("href",tn._href).replace("title",tn._title).getRegex(),tn.reflink=ki(tn.reflink).replace("label",tn._label).replace("ref",En._label).getRegex(),tn.nolink=ki(tn.nolink).replace("ref",En._label).getRegex(),tn.reflinkSearch=ki(tn.reflinkSearch,"g").replace("reflink",tn.reflink).replace("nolink",tn.nolink).getRegex(),tn.normal={...tn},tn.pedantic={...tn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ki(/^!?\[(label)\]\((.*?)\)/).replace("label",tn._label).getRegex(),reflink:ki(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tn._label).getRegex()},tn.gfm={...tn.normal,escape:ki(tn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},tn.gfm.url=ki(tn.gfm.url,"i").replace("email",tn.gfm._extended_email).getRegex(),tn.breaks={...tn.gfm,br:ki(tn.br).replace("{2,}","*").getRegex(),text:ki(tn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Xc{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||hp,this.options.tokenizer=this.options.tokenizer||new kS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:En.normal,inline:tn.normal};this.options.pedantic?(n.block=En.pedantic,n.inline=tn.pedantic):this.options.gfm&&(n.block=En.gfm,n.inline=this.options.breaks?tn.breaks:tn.gfm),this.tokenizer.rules=n}static get rules(){return{block:En,inline:tn}}static lex(e,n){return new Xc(n).lex(e)}static lexInline(e,n){return new Xc(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,a,l,c,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,c)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),"number"==typeof f&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(c=i.raw.slice(-1)),l=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return n}}class fp{options;constructor(e){this.options=e||hp}code(e,n,i){const r=(n||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Xa(r)+'">'+(i?e:Xa(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Xa(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,n){return e}heading(e,n,i){return`<h${n}>${e}</h${n}>\n`}hr(){return"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,n,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){const r=bX(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return n&&(s+=' title="'+n+'"'),s+=">"+i+"</a>",s}image(e,n,i){const r=bX(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class fF{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class Kc{options;renderer;textRenderer;constructor(e){this.options=e||hp,this.options.renderer=this.options.renderer||new fp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new fF}static parse(e,n){return new Kc(n).parse(e)}static parseInline(e,n){return new Kc(n).parseInline(e)}parse(e,n=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,bke(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<o.rows.length;u++){const h=o.rows[u];l="";for(let f=0;f<h.length;f++)l+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});c+=this.renderer.tablerow(l)}i+=this.renderer.table(a,c);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,c=o.loose;let u="";for(let h=0;h<o.items.length;h++){const f=o.items[h],g=f.checked,m=f.task;let v="";if(f.task){const w=this.renderer.checkbox(!!g);c?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=w+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=w+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:w+" "}):v+=w+" "}v+=this.parse(f.tokens,c),u+=this.renderer.listitem(v,m,!!g)}i+=this.renderer.list(u,a,l);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=n.text(s.text);break;case"html":i+=n.html(s.text);break;case"link":i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break;case"image":i+=n.image(s.href,s.title,s.text);break;case"strong":i+=n.strong(this.parseInline(s.tokens,n));break;case"em":i+=n.em(this.parseInline(s.tokens,n));break;case"codespan":i+=n.codespan(s.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(s.tokens,n));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class jS{options;constructor(e){this.options=e||hp}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const pp=new class Ake{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Xc.lex,Kc.parse);parseInline=this.#e(Xc.lexInline,Kc.parseInline);Parser=Kc;Renderer=fp;TextRenderer=fF;Lexer=Xc;Tokenizer=kS;Hooks=jS;constructor(...e){this.use(...e)}walkTokens(e,n){let i=[];for(const r of e)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,n));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,n));break}case"list":i=i.concat(this.walkTokens(r.items,n));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{i=i.concat(this.walkTokens(s[o],n))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];n.renderers[s.name]=o?function(...a){let l=s.renderer.apply(this,a);return!1===l&&(l=o.apply(this,a)),l}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&("block"===s.level?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:"inline"===s.level&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),i.renderer){const s=this.defaults.renderer||new fp(this.defaults);for(const o in i.renderer){const a=i.renderer[o],c=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=c.apply(s,u)),h||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new kS(this.defaults);for(const o in i.tokenizer){const a=i.tokenizer[o],c=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=c.apply(s,u)),h}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new jS;for(const o in i.hooks){const a=i.hooks[o],c=s[o];s[o]=jS.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>c.call(s,f));const h=a.call(s,u);return c.call(s,h)}:(...u)=>{let h=a.apply(s,u);return!1===h&&(h=c.apply(s,u)),h}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Xc.lex(e,n??this.defaults)}parser(e,n){return Kc.parse(e,n??this.defaults)}#e(e,n){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>e(l,o)).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));const l=e(i,o);o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=n(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}}#t(e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Xa(i.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(i);throw i}}};function Oi(t,e){return pp.parse(t,e)}Oi.options=Oi.setOptions=function(t){return pp.setOptions(t),mX(Oi.defaults=pp.defaults),Oi},Oi.getDefaults=function hF(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Oi.defaults=hp,Oi.use=function(...t){return pp.use(...t),mX(Oi.defaults=pp.defaults),Oi},Oi.walkTokens=function(t,e){return pp.walkTokens(t,e)},Oi.parseInline=pp.parseInline,Oi.Parser=Kc,Oi.parser=Kc.parse,Oi.Renderer=fp,Oi.TextRenderer=fF,Oi.Lexer=Xc,Oi.lexer=Xc.lex,Oi.Tokenizer=kS,Oi.Hooks=jS,Oi.parse=Oi;const Ske=["*"];let EX=(()=>{class t{constructor(){this._buttonClick$=new Jt,this.copied$=this._buttonClick$.pipe(qi(()=>Gl(on(!0),vP(3e3).pipe(MP(!1)))),Kf(),Jo(1)),this.copiedText$=this.copied$.pipe(Vc(!1),Xt(n=>n?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=mi({type:t,selectors:[["markdown-clipboard"]],standalone:!0,features:[Os],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Pn(0,"button",0),Cu(1,"async"),Vi("click",function(){return r.onCopyToClipboardClick()}),Ul(2),Cu(3,"async"),Bn()),2&i&&(br("copied",Tu(1,3,r.copied$)),xn(2),Fd(Tu(3,5,r.copiedText$)))},dependencies:[p0],encapsulation:2,changeDetection:0})}return t})();const Mke=new Et("CLIPBOARD_OPTIONS");var pF=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(pF||{});const AX=new Et("MARKED_EXTENSIONS"),Dke=new Et("MARKED_OPTIONS"),SX=new Et("SECURITY_CONTEXT");let gF=(()=>{class t{get options(){return this._options}set options(n){this._options={...this.DEFAULT_MARKED_OPTIONS,...n}}get renderer(){return this.options.renderer}set renderer(n){this.options.renderer=n}constructor(n,i,r,s,o,a,l){this.clipboardOptions=n,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new fp},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Jt,this.reload$=this._reload$.asObservable(),this.options=r}parse(n,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:l}=i,c={...this.options,...i.markedOptions},u=c.renderer||this.renderer||new fp;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const h=this.trimIndentation(n),f=r?this.decodeHtml(h):h,g=o?this.parseEmoji(f):f,m=this.parseMarked(g,c,s);return(l?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(n,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:l,mermaid:c,mermaidOptions:u}=i;s&&this.renderClipboard(n,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),a&&this.renderKatex(n,{...this.DEFAULT_KATEX_OPTIONS,...l}),c&&this.renderMermaid(n,{...this.DEFAULT_MERMAID_OPTIONS,...u}),this.highlight(n)}reload(){this._reload$.next()}getSource(n){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(n,{responseType:"text"}).pipe(Xt(i=>this.handleExtension(n,i)))}highlight(n){if(!jd(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;n||(n=document);const i=n.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(n)}decodeHtml(n){if(!jd(this.platform))return n;const i=document.createElement("textarea");return i.innerHTML=n,i.value}extendsRendererForExtensions(n){const i=n;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Oi.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),n}extendsRendererForMermaid(n){const i=n;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return n;const r=n.code;return n.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,n}handleExtension(n,i){const r=n.lastIndexOf("://"),s=r>-1?n.substring(r+4):n,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",l=a.lastIndexOf("."),c=l>-1?a.substring(l+1):"";return c&&"md"!==c?"```"+c+"\n"+i+"\n```":i}parseMarked(n,i,r=!1){if(i.renderer){const s={...i.renderer};delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Oi.use({renderer:s})}return r?Oi.parseInline(n,i):Oi.parse(n,i)}parseEmoji(n){if(!jd(this.platform))return n;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(n)}renderKatex(n,i){if(jd(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(n,i)}}renderClipboard(n,i,r){if(!jd(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=n.querySelectorAll("pre");for(let l=0;l<a.length;l++){const c=a.item(l),u=document.createElement("div");u.style.position="relative",c.parentNode.insertBefore(u,c),u.appendChild(c);const h=document.createElement("div");let f,g;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",u.insertAdjacentElement("beforeend",h),c.onmouseover=()=>h.style.opacity="1",c.onmouseout=()=>h.style.opacity="0",f=s?i.createComponent(s).hostView:o?i.createEmbeddedView(o):i.createComponent(EX).hostView,f.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),g=new ClipboardJS(m,{text:()=>c.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(n,i=this.DEFAULT_MERMAID_OPTIONS){if(!jd(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=n.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(n){if(!n)return"";let i;return n.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Mke,8),ct(AX,8),ct(Dke,8),ct(sl),ct(SX),ct(gh,8),ct(y0))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),CX=(()=>{class t{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(n){this._disableSanitizer=this.coerceBooleanProperty(n)}get inline(){return this._inline}set inline(n){this._inline=this.coerceBooleanProperty(n)}get clipboard(){return this._clipboard}set clipboard(n){this._clipboard=this.coerceBooleanProperty(n)}get emoji(){return this._emoji}set emoji(n){this._emoji=this.coerceBooleanProperty(n)}get katex(){return this._katex}set katex(n){this._katex=this.coerceBooleanProperty(n)}get mermaid(){return this._mermaid}set mermaid(n){this._mermaid=this.coerceBooleanProperty(n)}get lineHighlight(){return this._lineHighlight}set lineHighlight(n){this._lineHighlight=this.coerceBooleanProperty(n)}get lineNumbers(){return this._lineNumbers}set lineNumbers(n){this._lineNumbers=this.coerceBooleanProperty(n)}get commandLine(){return this._commandLine}set commandLine(n){this._commandLine=this.coerceBooleanProperty(n)}constructor(n,i,r){this.element=n,this.markdownService=i,this.viewContainerRef=r,this.error=new _n,this.load=new _n,this.ready=new _n,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Jt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe($a(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(n,i=!1){var r=this;return D(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(n,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(n){return null!=n&&"false"!=`${String(n)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:n=>{this.render(n).then(()=>{this.load.emit(n)})},error:n=>this.error.emit(n)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,pF.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,pF.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);r.item(s).setAttribute(l,a.toString())}})}toLispCase(n){const i=n.match(/([A-Z])/g);if(!i)return n;let r=n.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||t)(st(fi),st(gF),st(Io))};static#t=this.\u0275cmp=mi({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Rr,Os],ngContentSelectors:Ske,decls:1,vars:0,template:function(i,r){1&i&&(ka(),Pi(0))},encapsulation:2})}return t})();var TX;function kke(t,e){if(1&t&&(Pn(0,"div",16),ts(1,"youtube-player",17),Bn()),2&t){const n=Vr(3);xn(),wI("videoId",n.videoID)}}function jke(t,e){if(1&t&&(Pn(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Ul(3),Bn()(),Pn(4,"div",13),ts(5,"markdown",14),Ii(6,kke,2,1,"div",15),Bn()()),2&t){const n=Vr(),i=n.$implicit,r=n.index;Di("expanded",0===r),xn(3),Fd(i.title),xn(2),br("first",0===r),Di("data",i.content),xn(),Di("ngIf",0===r)}}function Uke(t,e){if(1&t&&(Pn(0,"div",9),Ii(1,jke,7,6,"mat-expansion-panel",10),Bn()),2&t){const n=e.$implicit;xn(),Di("ngIf",n)}}!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(TX||(TX={}));let Vke=(()=>{class t{constructor(n,i){this.dialogRef=n,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.body.appendChild(n)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||t)(st(RS),st(WY))};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Pn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Ul(5),Bn(),Pn(6,"div",5)(7,"mat-icon",6),Vi("click",function(){return r.close()}),Ul(8,"clear"),Bn()()(),Pn(9,"mat-dialog-content",7),Ii(10,Uke,2,1,"div",8),Bn()()()()),2&i&&(xn(5),Fd(r.infoTitle),xn(5),Di("ngForOf",r.documentationContents))},dependencies:[IE,nD,cF,uF,nX,uX,cke,pke,CX],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return t})();class Al{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&e&&0!==e.length?e:void 0}})();get length(){return Al.storage?.length??0}key(e){return Al.storage?.key(e)??null}getItem(e,n){return Al.storage?.getItem(e)??n??null}setItem(e,n){try{return Al.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Al.storage?.removeItem(e)}clear(){Al.storage?.clear()}static#t=this.\u0275fac=function(n){return new(n||Al)};static#n=this.\u0275prov=Ot({token:Al,factory:Al.\u0275fac,providedIn:"root"})}var mF;const MX="callToActionPopupShown";let ic=class VS{static#e=mF=this;static ctaDatePassed(e,n=Date.now){return+n()>+new Date(e)}constructor(e,n,i,r,s){this.dialog=e,this.ga=n,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:n,popupShown:i}=e.getState(),r=this.storage.getItem(MX,`${i}`),s=mF.ctaDatePassed(n);"true"!==r&&!s&&e.dispatch(new LY)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Xt(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(Vke,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(_r(n=>this.launchLearnMore(n)))}open(e){this.dialog.open(Zc,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(MX,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(n){return new(n||VS)(ct(OS),ct(hL),ct(Al),ct(KY),ct(gh))};static#n=this.\u0275prov=Ot({token:VS,factory:VS.\u0275fac})};Vn([jN(PY),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",At)],ic.prototype,"learnMore",null),Vn([jN(LY),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],ic.prototype,"open",null),Vn([jN(FY),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",void 0)],ic.prototype,"close",null),ic=mF=Vn([UN({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),kt("design:paramtypes",[OS,hL,Al,KY,gh])],ic);class Jc{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",String)],Jc,"title",null),Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",String)],Jc,"message",null),Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",String)],Jc,"callToAction",null),Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",String)],Jc,"imageUrl",null),Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",String)],Jc,"expirationDate",null),Vn([Pm([ic]),kt("design:type",Function),kt("design:paramtypes",[Object]),kt("design:returntype",Boolean)],Jc,"popupShown",null);let IX=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=$t({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"],standalone:!0})}return t})(),r3e=(()=>{class t{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new _n,this.closeClicked=new _n}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&wf(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"click","text"]],template:function(i,r){1&i&&(Pn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Ul(5),Bn(),Pn(6,"mat-icon",5),Vi("click",function(){return r.close()}),Ul(7,"clear"),Bn()(),ts(8,"img",6),Pn(9,"mat-dialog-content",7)(10,"div",8),Ul(11),Bn(),Pn(12,"a",9),Vi("click",function(){return r.onDialogButtonClick()}),Bn()()()()()),2&i&&(xn(5),Fd(r.infoTitle),xn(3),Di("src",r.imageUrl,_y),xn(3),Fd(r.message),xn(),Di("text",r.callToAction))},dependencies:[nX,cF,uF,IX],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return t})();class Zc{constructor(){this.close=()=>new FY,this.learnMore=()=>new PY}static#e=this.\u0275fac=function(n){return new(n||Zc)};static#t=this.\u0275cmp=mi({type:Zc,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"callToActionClicked","closeClicked","infoTitle","message","callToAction","imageUrl"]],template:function(n,i){if(1&n&&(Pn(0,"ccf-call-to-action",0),Cu(1,"async"),Cu(2,"async"),Cu(3,"async"),Cu(4,"async"),Vi("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Bn()),2&n){let r,s,o,a;Di("infoTitle",null!==(r=Tu(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=Tu(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=Tu(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=Tu(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[r3e,p0],changeDetection:0})}Vn([p1(Jc.title),kt("design:type",At)],Zc.prototype,"title$",void 0),Vn([p1(Jc.message),kt("design:type",At)],Zc.prototype,"message$",void 0),Vn([p1(Jc.callToAction),kt("design:type",At)],Zc.prototype,"callToAction$",void 0),Vn([p1(Jc.imageUrl),kt("design:type",At)],Zc.prototype,"imageUrl$",void 0),Vn([NY(),kt("design:type",Object)],Zc.prototype,"close",void 0),Vn([NY(),kt("design:type",Object)],Zc.prototype,"learnMore",void 0);const s3e={initialConfig:{},parse:{},rename:{}};class o3e{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...s3e,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...n};for(const[a,l]of Object.entries(e))this.processChange(a,l,o);i.setConfig(o)}processChange(e,n,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=n.currentValue,l=r[e]??r[o];if(null==a)delete i[o];else if(l)try{i[o]=l(a)}catch(c){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,c.message)}else i[o]=a}}let a3e=(()=>{class t{constructor(n,i,r={}){this.configState=n,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new o3e(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(n){this.configManager.addChanges(n),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function ul(){throw new Error("invalid")}()};static#t=this.\u0275dir=$t({type:t,features:[Rr]})}return t})();const yb_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""},DX=(window,"http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity"),u3e=[173,255,47,229.5];function m3e(t,e){return t===e}let _3e=(()=>{class t{constructor(n){this.subscriptions=new Lt,this.dataSource=n.getOption("data").pipe(Xt(i=>({...MY,dataSources:i})),vi(i=>Object.keys(i).length>0),Xt(i=>i),Kf(m3e),qi(i=>function g3e(t,e){return new At(n=>{const i=t(),r=e(i);return(r?ms(r):Ro).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),r=>this.connectDataSource(r.source,i))),Jo(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(n){return this.dataSource.pipe(qi(i=>i.getTissueBlockResults(n)),Ai(1))}getAggregateResults(n){return this.dataSource.pipe(qi(i=>i.getAggregateResults(n)),Ai(1))}getOntologyTermOccurences(n){return this.dataSource.pipe(qi(i=>i.getOntologyTermOccurences(n)),Ai(1))}getCellTypeTermOccurences(n){return this.dataSource.pipe(qi(i=>i.getCellTypeTermOccurences(n)),Ai(1))}getOntologyTreeModel(){return this.dataSource.pipe(qi(n=>n.getOntologyTreeModel()),Ai(1))}getCellTypeTreeModel(){return this.dataSource.pipe(qi(n=>n.getCellTypeTreeModel()),Ai(1))}getReferenceOrgans(){return this.dataSource.pipe(qi(n=>n.getReferenceOrgans()),Ai(1))}getScene(n){return this.dataSource.pipe(qi(i=>i.getScene(n)),Ai(1))}getOrganScene(n,i){return this.dataSource.pipe(qi(r=>r.getReferenceOrganScene(n,i)),Ai(1))}createDataSource(){return{source:new mBe,unsubscribe:()=>{}}}connectDataSource(n,i){return D(function*(){(new Date).getTime();return yield n.connect(i,!1),n})()}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Ku))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),y3e=(()=>{class t{constructor(n,i){this.configState=n,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(Xt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(Xt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=hh([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(qi(([r,s,o])=>this.chooseScene(r,s))),this.organs$=this.configState.getOption("data").pipe(Xt(r=>this.selectOrgans(r)),Jo(1)),this.filteredOrgans$=hh([this.organs$,this.referenceOrgans$]).pipe(Xt(([r,s])=>this.getNeededReferenceOrgans(s,r)),Jo(1)),this.filteredScene$=hh([this.scene$,this.organs$,this.referenceOrgans$]).pipe(Xt(([r,s,o])=>this.filterSceneNodes(r,s,o)),function h3e(t,e){const n=t.pipe(Vc(""));return i=>hh([i,n]).pipe(Xt(([r,s])=>r.map(o=>function d3e(t,e,n){return t.entityId!==e?t:{...t,color:n}}(o,s,e))))}(this.highlightID$,u3e),function p3e(t){const e=t.pipe(Vc(""));return n=>hh([n,e]).pipe(Xt(([i,r])=>i.map(s=>function f3e(t,e){return t.entityId!==e?t:{...t,zoomToOnLoad:!0}}(s,r))))}(this.zoomToID$),Jo(1))}chooseScene(n,i){const r=n?.map(o=>o[DX]?.placement.target)??[];if(new Set(r).size>1)return this.source.getScene();if(i){const o=i.find(a=>a["@id"]===r[0]);if(o)return this.source.getOrganScene(o.representation_of??"",{ontologyTerms:[o.reference_organ],sex:o.sex})}return on([])}selectOrgans(n){const r=(n??[]).map(s=>s[DX].placement.target);return new Set(r)}filterSceneNodes(n,i,r){const s=this.getNeededReferenceOrgans(r,i),o=this.getNeededSkins(s),a=new Set([...i,...o]);return n.filter(l=>!l.reference_organ||a.has(l.reference_organ))}getNeededReferenceOrgans(n,i){return n.filter(r=>i.has(r.reference_organ??""))}getNeededSkins(n){if(1===n.length)return[];const i=new Set;return n.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Ku),ct(_3e))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const v3e=["bodyUI"],b3e=()=>[];let w3e=(()=>{class t{constructor(n,i,r){this.configState=n,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new _n,this.onMouseLeave=new _n,this.onClick=new _n,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(_r(s=>this.reset()))}reset(){var n=this;return D(function*(){const{bodyUI:i}=n;yield new Promise(o=>{setTimeout(o,200)});const r=yield _W(n.organs$.pipe(Ai(1))),s=!!i.scene?.find(o=>o.zoomToOnLoad);if(i.rotation=0,i.rotationX=0,!s)if(r&&1===r.length){const{x_dimension:o,y_dimension:a,z_dimension:l}=r[0];i.bounds={x:1.25*o/1e3,y:1.25*a/1e3,z:1.25*l/1e3},i.target=[o/1e3/2,a/1e3/2,l/1e3/2]}else i.bounds={x:2.2,y:2,z:.4},i.target=[0,0,0];n.cdr.detectChanges()})()}static#e=this.\u0275fac=function(i){return new(i||t)(st(Ku),st(y3e),st(Zs))};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Do(v3e,7),2&i){let s;ir(s=rr())&&(r.bodyUI=s.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:5,consts:[["bodyUI",""],["camera","perspective",1,"body-ui",3,"nodeClick","nodeHoverStart","nodeHoverStop","scene","interactive"]],template:function(i,r){if(1&i){const s=Ld();Pn(0,"ccf-body-ui",1,0),Cu(2,"async"),Vi("nodeClick",function(a){return Vs(s),ds(r.onClick.emit(a))})("nodeHoverStart",function(a){return Vs(s),ds(r.onMouseEnter.emit(a))})("nodeHoverStop",function(a){return Vs(s),ds(r.onMouseLeave.emit(a))}),Bn()}if(2&i){let s;Di("scene",null!==(s=Tu(2,2,r.scene$))&&void 0!==s?s:function Pj(t,e,n){const i=hs()+t,r=Mt();return r[i]===hn?wc(r,i,n?e.call(n):e()):function zy(t,e){return t[e]}(r,i)}(4,b3e))("interactive",!0)}},dependencies:[j1e,p0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return t})();function x3e(t,e){if(1&t){const n=Ld();Pn(0,"ccf-root",1),Vi("onMouseEnter",function(r){return Vs(n),ds(Vr().onMouseEnter.emit(r))})("onMouseLeave",function(r){return Vs(n),ds(Vr().onMouseLeave.emit(r))})("onClick",function(r){return Vs(n),ds(Vr().onClick.emit(r))}),Bn()}}function E3e(t){return"string"==typeof t&&(t=JSON.parse(t)),t.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let A3e=(()=>{class t extends a3e{constructor(n,i){super(n,i,{initialDelay:10,initialConfig:{...yb_dbOptions,...globalThis.dbOptions},parse:{data:E3e}}),this.onMouseEnter=new _n,this.onMouseLeave=new _n,this.onClick=new _n}static#e=this.\u0275fac=function(i){return new(i||t)(st(Ku),st(Zs))};static#t=this.\u0275cmp=mi({type:t,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[pi],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&Ii(0,x3e,1,0,"ccf-root",0),2&i&&Di("ngIf",r.initialized)},dependencies:[nD,w3e],encapsulation:2,changeDetection:0})}return t})();const US=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class T3e{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=Jf(this.action),i=function C3e(t){return US(t.getHours(),2)+":"+US(t.getMinutes(),2)+":"+US(t.getSeconds(),2)+"."+US(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class M3e{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const RX=new Et("NGXS_LOGGER_PLUGIN_OPTIONS");let I3e=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new M3e(this._options),this._store=this._store||this._injector.get($u);const s=new T3e(i,this._store,this._logWriter);return s.dispatched(n),r(n,i).pipe(_r(o=>{s.completed(o)}),Yl(o=>{throw s.errored(o),o}))}}return t.\u0275fac=function(n){return new(n||t)(ct(RX),ct(Ui))},t.\u0275prov=Ot({token:t,factory:t.\u0275fac}),t})();const OX=new Et("LOGGER_USER_OPTIONS");function D3e(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let R3e=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:X5,useClass:I3e,multi:!0},{provide:OX,useValue:n},{provide:RX,useFactory:D3e,deps:[OX]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ia({type:t}),t.\u0275inj=Uo({}),t})();const O3e=[Ku];let N3e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({imports:[iRe.forRoot(),HSe.forRoot(O3e,{developmentMode:!1}),R3e.forRoot({disabled:true})]})}return t})(),P3e=(()=>{class t{constructor(n){this.injector=n}ngDoBootstrap(){const n=function Loe(t,e){const n=function Moe(t,e){return e.get(Dd).resolveComponentFactory(t).inputs}(t,e.injector),i=e.strategyFactory||new Ooe(t,e.injector),r=function Toe(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function xoe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(n);class s extends Poe{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);n.forEach(({propName:l,transform:c})=>{if(!this.hasOwnProperty(l))return;const u=this[l];delete this[l],a.setInputValue(l,u,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,l,c,u){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,c,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(l)})}}return n.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(l){this.ngElementStrategy.setInputValue(o,l,a)},configurable:!0,enumerable:!0})}),s}(A3e,{injector:this.injector});customElements.define("ccf-body-ui-wc",n)}static#e=this.\u0275fac=function(i){return new(i||t)(ct(Ui))};static#t=this.\u0275mod=ia({type:t});static#n=this.\u0275inj=Uo({imports:[Lse,N3e,Foe]})}return t})();Nse().bootstrapModule(P3e).catch(t=>console.error(t))},5064:je=>{je.exports=function(S,Q){var C=Q.length;if(0!==C){var Y=S.length;S.length+=C;for(var z=0;z<C;z++)S[Y+z]=Q[z]}}},9465:je=>{"use strict";const{AbortController:me,AbortSignal:S}=typeof self<"u"?self:typeof window<"u"?window:void 0;je.exports=me,je.exports.AbortSignal=S,je.exports.default=me},3981:(je,me)=>{"use strict";me.byteLength=function E(x){var B=_(x),$=B[1];return 3*(B[0]+$)/4-$},me.toByteArray=function W(x){var B,b,oe=_(x),$=oe[0],G=oe[1],ee=new C(function F(x,B,oe){return 3*(B+oe)/4-oe}(0,$,G)),q=0,k=G>0?$-4:$;for(b=0;b<k;b+=4)B=Q[x.charCodeAt(b)]<<18|Q[x.charCodeAt(b+1)]<<12|Q[x.charCodeAt(b+2)]<<6|Q[x.charCodeAt(b+3)],ee[q++]=B>>16&255,ee[q++]=B>>8&255,ee[q++]=255&B;return 2===G&&(B=Q[x.charCodeAt(b)]<<2|Q[x.charCodeAt(b+1)]>>4,ee[q++]=255&B),1===G&&(B=Q[x.charCodeAt(b)]<<10|Q[x.charCodeAt(b+1)]<<4|Q[x.charCodeAt(b+2)]>>2,ee[q++]=B>>8&255,ee[q++]=255&B),ee},me.fromByteArray=function se(x){for(var B,oe=x.length,$=oe%3,G=[],q=0,k=oe-$;q<k;q+=16383)G.push(D(x,q,q+16383>k?k:q+16383));return 1===$?G.push(S[(B=x[oe-1])>>2]+S[B<<4&63]+"=="):2===$&&G.push(S[(B=(x[oe-2]<<8)+x[oe-1])>>10]+S[B>>4&63]+S[B<<2&63]+"="),G.join("")};for(var S=[],Q=[],C=typeof Uint8Array<"u"?Uint8Array:Array,Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=0;z<64;++z)S[z]=Y[z],Q[Y.charCodeAt(z)]=z;function _(x){var B=x.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=x.indexOf("=");return-1===oe&&(oe=B),[oe,oe===B?0:4-oe%4]}function N(x){return S[x>>18&63]+S[x>>12&63]+S[x>>6&63]+S[63&x]}function D(x,B,oe){for(var G=[],ee=B;ee<oe;ee+=3)G.push(N((x[ee]<<16&16711680)+(x[ee+1]<<8&65280)+(255&x[ee+2])));return G.join("")}Q[45]=62,Q[95]=63},6887:(je,me)=>{"use strict";var Q=function(Y){return Y.typeOfFunction="function",Y.boolTrue=!0,Y}(Q||{});me.oI=function C(Y,z,X){if(!X||typeof X.value!==Q.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+z+"> is not a method!");return{configurable:Q.boolTrue,get:function(){var _=X.value.bind(this);return Object.defineProperty(this,z,{value:_,configurable:Q.boolTrue,writable:Q.boolTrue}),_}}}},3838:(je,me,S)=>{"use strict";var Q=S(3981),C=S(2020);me.Buffer=_,me.SlowBuffer=function $(U){return+U!=U&&(U=0),_.alloc(+U)},me.INSPECT_MAX_BYTES=50;var Y=2147483647;function X(U){if(U>Y)throw new RangeError('The value "'+U+'" is invalid for option "size"');var I=new Uint8Array(U);return I.__proto__=_.prototype,I}function _(U,I,O){if("number"==typeof U){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return N(U)}return E(U,I,O)}function E(U,I,O){if("string"==typeof U)return function D(U,I){if(("string"!=typeof I||""===I)&&(I="utf8"),!_.isEncoding(I))throw new TypeError("Unknown encoding: "+I);var O=0|G(U,I),he=X(O),We=he.write(U,I);return We!==O&&(he=he.slice(0,We)),he}(U,I);if(ArrayBuffer.isView(U))return se(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ue(U,ArrayBuffer)||U&&ue(U.buffer,ArrayBuffer))return function x(U,I,O){if(I<0||U.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<I+(O||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===I&&void 0===O?new Uint8Array(U):void 0===O?new Uint8Array(U,I):new Uint8Array(U,I,O)).__proto__=_.prototype,he}(U,I,O);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=U.valueOf&&U.valueOf();if(null!=he&&he!==U)return _.from(he,I,O);var We=function B(U){if(_.isBuffer(U)){var I=0|oe(U.length),O=X(I);return 0===O.length||U.copy(O,0,0,I),O}return void 0!==U.length?"number"!=typeof U.length||te(U.length)?X(0):se(U):"Buffer"===U.type&&Array.isArray(U.data)?se(U.data):void 0}(U);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),I,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function F(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function N(U){return F(U),X(U<0?0:0|oe(U))}function se(U){for(var I=U.length<0?0:0|oe(U.length),O=X(I),he=0;he<I;he+=1)O[he]=255&U[he];return O}function oe(U){if(U>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|U}function G(U,I){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||ue(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var O=U.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===O)return 0;for(var We=!1;;)switch(I){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return A(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return He(U).length;default:if(We)return he?-1:A(U).length;I=(""+I).toLowerCase(),We=!0}}function ee(U,I,O){var he=!1;if((void 0===I||I<0)&&(I=0),I>this.length||((void 0===O||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(I>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return ke(this,I,O);case"utf8":case"utf-8":return Oe(this,I,O);case"ascii":return Je(this,I,O);case"latin1":case"binary":return Ce(this,I,O);case"base64":return xe(this,I,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,I,O);default:if(he)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),he=!0}}function q(U,I,O){var he=U[I];U[I]=U[O],U[O]=he}function k(U,I,O,he,We){if(0===U.length)return-1;if("string"==typeof O?(he=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),te(O=+O)&&(O=We?0:U.length-1),O<0&&(O=U.length+O),O>=U.length){if(We)return-1;O=U.length-1}else if(O<0){if(!We)return-1;O=0}if("string"==typeof I&&(I=_.from(I,he)),_.isBuffer(I))return 0===I.length?-1:b(U,I,O,he,We);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(U,I,O):Uint8Array.prototype.lastIndexOf.call(U,I,O):b(U,[I],O,he,We);throw new TypeError("val must be string, number or Buffer")}function b(U,I,O,he,We){var Rt,Ee=1,Ue=U.length,Qe=I.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(U.length<2||I.length<2)return-1;Ee=2,Ue/=2,Qe/=2,O/=2}function vt(H,ne){return 1===Ee?H[ne]:H.readUInt16BE(ne*Ee)}if(We){var wt=-1;for(Rt=O;Rt<Ue;Rt++)if(vt(U,Rt)===vt(I,-1===wt?0:Rt-wt)){if(-1===wt&&(wt=Rt),Rt-wt+1===Qe)return wt*Ee}else-1!==wt&&(Rt-=Rt-wt),wt=-1}else for(O+Qe>Ue&&(O=Ue-Qe),Rt=O;Rt>=0;Rt--){for(var Lt=!0,pe=0;pe<Qe;pe++)if(vt(U,Rt+pe)!==vt(I,pe)){Lt=!1;break}if(Lt)return Rt}return-1}function M(U,I,O,he){O=Number(O)||0;var We=U.length-O;he?(he=Number(he))>We&&(he=We):he=We;var Ee=I.length;he>Ee/2&&(he=Ee/2);for(var Ue=0;Ue<he;++Ue){var Qe=parseInt(I.substr(2*Ue,2),16);if(te(Qe))return Ue;U[O+Ue]=Qe}return Ue}function T(U,I,O,he){return Xe(A(I,U.length-O),U,O,he)}function ce(U,I,O,he){return Xe(function ie(U){for(var I=[],O=0;O<U.length;++O)I.push(255&U.charCodeAt(O));return I}(I),U,O,he)}function j(U,I,O,he){return ce(U,I,O,he)}function Me(U,I,O,he){return Xe(He(I),U,O,he)}function ae(U,I,O,he){return Xe(function J(U,I){for(var O,he,Ee=[],Ue=0;Ue<U.length&&!((I-=2)<0);++Ue)he=(O=U.charCodeAt(Ue))>>8,Ee.push(O%256),Ee.push(he);return Ee}(I,U.length-O),U,O,he)}function xe(U,I,O){return Q.fromByteArray(0===I&&O===U.length?U:U.slice(I,O))}function Oe(U,I,O){O=Math.min(U.length,O);for(var he=[],We=I;We<O;){var vt,Rt,wt,Lt,Ee=U[We],Ue=null,Qe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(We+Qe<=O)switch(Qe){case 1:Ee<128&&(Ue=Ee);break;case 2:128==(192&(vt=U[We+1]))&&(Lt=(31&Ee)<<6|63&vt)>127&&(Ue=Lt);break;case 3:Rt=U[We+2],128==(192&(vt=U[We+1]))&&128==(192&Rt)&&(Lt=(15&Ee)<<12|(63&vt)<<6|63&Rt)>2047&&(Lt<55296||Lt>57343)&&(Ue=Lt);break;case 4:Rt=U[We+2],wt=U[We+3],128==(192&(vt=U[We+1]))&&128==(192&Rt)&&128==(192&wt)&&(Lt=(15&Ee)<<18|(63&vt)<<12|(63&Rt)<<6|63&wt)>65535&&Lt<1114112&&(Ue=Lt)}null===Ue?(Ue=65533,Qe=1):Ue>65535&&(he.push((Ue-=65536)>>>10&1023|55296),Ue=56320|1023&Ue),he.push(Ue),We+=Qe}return function Ze(U){var I=U.length;if(I<=Ve)return String.fromCharCode.apply(String,U);for(var O="",he=0;he<I;)O+=String.fromCharCode.apply(String,U.slice(he,he+=Ve));return O}(he)}me.kMaxLength=Y,!(_.TYPED_ARRAY_SUPPORT=function z(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(U,I,O){return E(U,I,O)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(U,I,O){return function W(U,I,O){return F(U),U<=0?X(U):void 0!==I?"string"==typeof O?X(U).fill(I,O):X(U).fill(I):X(U)}(U,I,O)},_.allocUnsafe=function(U){return N(U)},_.allocUnsafeSlow=function(U){return N(U)},_.isBuffer=function(I){return null!=I&&!0===I._isBuffer&&I!==_.prototype},_.compare=function(I,O){if(ue(I,Uint8Array)&&(I=_.from(I,I.offset,I.byteLength)),ue(O,Uint8Array)&&(O=_.from(O,O.offset,O.byteLength)),!_.isBuffer(I)||!_.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===O)return 0;for(var he=I.length,We=O.length,Ee=0,Ue=Math.min(he,We);Ee<Ue;++Ee)if(I[Ee]!==O[Ee]){he=I[Ee],We=O[Ee];break}return he<We?-1:We<he?1:0},_.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(I,O){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(0===I.length)return _.alloc(0);var he;if(void 0===O)for(O=0,he=0;he<I.length;++he)O+=I[he].length;var We=_.allocUnsafe(O),Ee=0;for(he=0;he<I.length;++he){var Ue=I[he];if(ue(Ue,Uint8Array)&&(Ue=_.from(Ue)),!_.isBuffer(Ue))throw new TypeError('"list" argument must be an Array of Buffers');Ue.copy(We,Ee),Ee+=Ue.length}return We},_.byteLength=G,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<I;O+=2)q(this,O,O+1);return this},_.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<I;O+=4)q(this,O,O+3),q(this,O+1,O+2);return this},_.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<I;O+=8)q(this,O,O+7),q(this,O+1,O+6),q(this,O+2,O+5),q(this,O+3,O+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var I=this.length;return 0===I?"":0===arguments.length?Oe(this,0,I):ee.apply(this,arguments)},_.prototype.equals=function(I){if(!_.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||0===_.compare(this,I)},_.prototype.inspect=function(){var I="",O=me.INSPECT_MAX_BYTES;return I=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(I+=" ... "),"<Buffer "+I+">"},_.prototype.compare=function(I,O,he,We,Ee){if(ue(I,Uint8Array)&&(I=_.from(I,I.offset,I.byteLength)),!_.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(void 0===O&&(O=0),void 0===he&&(he=I?I.length:0),void 0===We&&(We=0),void 0===Ee&&(Ee=this.length),O<0||he>I.length||We<0||Ee>this.length)throw new RangeError("out of range index");if(We>=Ee&&O>=he)return 0;if(We>=Ee)return-1;if(O>=he)return 1;if(this===I)return 0;for(var Ue=(Ee>>>=0)-(We>>>=0),Qe=(he>>>=0)-(O>>>=0),vt=Math.min(Ue,Qe),Rt=this.slice(We,Ee),wt=I.slice(O,he),Lt=0;Lt<vt;++Lt)if(Rt[Lt]!==wt[Lt]){Ue=Rt[Lt],Qe=wt[Lt];break}return Ue<Qe?-1:Qe<Ue?1:0},_.prototype.includes=function(I,O,he){return-1!==this.indexOf(I,O,he)},_.prototype.indexOf=function(I,O,he){return k(this,I,O,he,!0)},_.prototype.lastIndexOf=function(I,O,he){return k(this,I,O,he,!1)},_.prototype.write=function(I,O,he,We){if(void 0===O)We="utf8",he=this.length,O=0;else if(void 0===he&&"string"==typeof O)We=O,he=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(he)?(he>>>=0,void 0===We&&(We="utf8")):(We=he,he=void 0)}var Ee=this.length-O;if((void 0===he||he>Ee)&&(he=Ee),I.length>0&&(he<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var Ue=!1;;)switch(We){case"hex":return M(this,I,O,he);case"utf8":case"utf-8":return T(this,I,O,he);case"ascii":return ce(this,I,O,he);case"latin1":case"binary":return j(this,I,O,he);case"base64":return Me(this,I,O,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,I,O,he);default:if(Ue)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ue=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ve=4096;function Je(U,I,O){var he="";O=Math.min(U.length,O);for(var We=I;We<O;++We)he+=String.fromCharCode(127&U[We]);return he}function Ce(U,I,O){var he="";O=Math.min(U.length,O);for(var We=I;We<O;++We)he+=String.fromCharCode(U[We]);return he}function ke(U,I,O){var he=U.length;(!I||I<0)&&(I=0),(!O||O<0||O>he)&&(O=he);for(var We="",Ee=I;Ee<O;++Ee)We+=R(U[Ee]);return We}function Ae(U,I,O){for(var he=U.slice(I,O),We="",Ee=0;Ee<he.length;Ee+=2)We+=String.fromCharCode(he[Ee]+256*he[Ee+1]);return We}function Be(U,I,O){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+I>O)throw new RangeError("Trying to access beyond buffer length")}function de(U,I,O,he,We,Ee){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>We||I<Ee)throw new RangeError('"value" argument is out of bounds');if(O+he>U.length)throw new RangeError("Index out of range")}function Se(U,I,O,he,We,Ee){if(O+he>U.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function nt(U,I,O,he,We){return I=+I,O>>>=0,We||Se(U,0,O,4),C.write(U,I,O,he,23,4),O+4}function mt(U,I,O,he,We){return I=+I,O>>>=0,We||Se(U,0,O,8),C.write(U,I,O,he,52,8),O+8}_.prototype.slice=function(I,O){var he=this.length;(I=~~I)<0?(I+=he)<0&&(I=0):I>he&&(I=he),(O=void 0===O?he:~~O)<0?(O+=he)<0&&(O=0):O>he&&(O=he),O<I&&(O=I);var We=this.subarray(I,O);return We.__proto__=_.prototype,We},_.prototype.readUIntLE=function(I,O,he){I>>>=0,O>>>=0,he||Be(I,O,this.length);for(var We=this[I],Ee=1,Ue=0;++Ue<O&&(Ee*=256);)We+=this[I+Ue]*Ee;return We},_.prototype.readUIntBE=function(I,O,he){I>>>=0,O>>>=0,he||Be(I,O,this.length);for(var We=this[I+--O],Ee=1;O>0&&(Ee*=256);)We+=this[I+--O]*Ee;return We},_.prototype.readUInt8=function(I,O){return I>>>=0,O||Be(I,1,this.length),this[I]},_.prototype.readUInt16LE=function(I,O){return I>>>=0,O||Be(I,2,this.length),this[I]|this[I+1]<<8},_.prototype.readUInt16BE=function(I,O){return I>>>=0,O||Be(I,2,this.length),this[I]<<8|this[I+1]},_.prototype.readUInt32LE=function(I,O){return I>>>=0,O||Be(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},_.prototype.readUInt32BE=function(I,O){return I>>>=0,O||Be(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},_.prototype.readIntLE=function(I,O,he){I>>>=0,O>>>=0,he||Be(I,O,this.length);for(var We=this[I],Ee=1,Ue=0;++Ue<O&&(Ee*=256);)We+=this[I+Ue]*Ee;return We>=(Ee*=128)&&(We-=Math.pow(2,8*O)),We},_.prototype.readIntBE=function(I,O,he){I>>>=0,O>>>=0,he||Be(I,O,this.length);for(var We=O,Ee=1,Ue=this[I+--We];We>0&&(Ee*=256);)Ue+=this[I+--We]*Ee;return Ue>=(Ee*=128)&&(Ue-=Math.pow(2,8*O)),Ue},_.prototype.readInt8=function(I,O){return I>>>=0,O||Be(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},_.prototype.readInt16LE=function(I,O){I>>>=0,O||Be(I,2,this.length);var he=this[I]|this[I+1]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt16BE=function(I,O){I>>>=0,O||Be(I,2,this.length);var he=this[I+1]|this[I]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt32LE=function(I,O){return I>>>=0,O||Be(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},_.prototype.readInt32BE=function(I,O){return I>>>=0,O||Be(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},_.prototype.readFloatLE=function(I,O){return I>>>=0,O||Be(I,4,this.length),C.read(this,I,!0,23,4)},_.prototype.readFloatBE=function(I,O){return I>>>=0,O||Be(I,4,this.length),C.read(this,I,!1,23,4)},_.prototype.readDoubleLE=function(I,O){return I>>>=0,O||Be(I,8,this.length),C.read(this,I,!0,52,8)},_.prototype.readDoubleBE=function(I,O){return I>>>=0,O||Be(I,8,this.length),C.read(this,I,!1,52,8)},_.prototype.writeUIntLE=function(I,O,he,We){I=+I,O>>>=0,he>>>=0,We||de(this,I,O,he,Math.pow(2,8*he)-1,0);var Ue=1,Qe=0;for(this[O]=255&I;++Qe<he&&(Ue*=256);)this[O+Qe]=I/Ue&255;return O+he},_.prototype.writeUIntBE=function(I,O,he,We){I=+I,O>>>=0,he>>>=0,We||de(this,I,O,he,Math.pow(2,8*he)-1,0);var Ue=he-1,Qe=1;for(this[O+Ue]=255&I;--Ue>=0&&(Qe*=256);)this[O+Ue]=I/Qe&255;return O+he},_.prototype.writeUInt8=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,1,255,0),this[O]=255&I,O+1},_.prototype.writeUInt16LE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,2,65535,0),this[O]=255&I,this[O+1]=I>>>8,O+2},_.prototype.writeUInt16BE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,2,65535,0),this[O]=I>>>8,this[O+1]=255&I,O+2},_.prototype.writeUInt32LE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,4,4294967295,0),this[O+3]=I>>>24,this[O+2]=I>>>16,this[O+1]=I>>>8,this[O]=255&I,O+4},_.prototype.writeUInt32BE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,4,4294967295,0),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},_.prototype.writeIntLE=function(I,O,he,We){if(I=+I,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,I,O,he,Ee-1,-Ee)}var Ue=0,Qe=1,vt=0;for(this[O]=255&I;++Ue<he&&(Qe*=256);)I<0&&0===vt&&0!==this[O+Ue-1]&&(vt=1),this[O+Ue]=(I/Qe|0)-vt&255;return O+he},_.prototype.writeIntBE=function(I,O,he,We){if(I=+I,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,I,O,he,Ee-1,-Ee)}var Ue=he-1,Qe=1,vt=0;for(this[O+Ue]=255&I;--Ue>=0&&(Qe*=256);)I<0&&0===vt&&0!==this[O+Ue+1]&&(vt=1),this[O+Ue]=(I/Qe|0)-vt&255;return O+he},_.prototype.writeInt8=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,1,127,-128),I<0&&(I=255+I+1),this[O]=255&I,O+1},_.prototype.writeInt16LE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,2,32767,-32768),this[O]=255&I,this[O+1]=I>>>8,O+2},_.prototype.writeInt16BE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,2,32767,-32768),this[O]=I>>>8,this[O+1]=255&I,O+2},_.prototype.writeInt32LE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,4,2147483647,-2147483648),this[O]=255&I,this[O+1]=I>>>8,this[O+2]=I>>>16,this[O+3]=I>>>24,O+4},_.prototype.writeInt32BE=function(I,O,he){return I=+I,O>>>=0,he||de(this,I,O,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=255&I,O+4},_.prototype.writeFloatLE=function(I,O,he){return nt(this,I,O,!0,he)},_.prototype.writeFloatBE=function(I,O,he){return nt(this,I,O,!1,he)},_.prototype.writeDoubleLE=function(I,O,he){return mt(this,I,O,!0,he)},_.prototype.writeDoubleBE=function(I,O,he){return mt(this,I,O,!1,he)},_.prototype.copy=function(I,O,he,We){if(!_.isBuffer(I))throw new TypeError("argument should be a Buffer");if(he||(he=0),!We&&0!==We&&(We=this.length),O>=I.length&&(O=I.length),O||(O=0),We>0&&We<he&&(We=he),We===he||0===I.length||0===this.length)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),I.length-O<We-he&&(We=I.length-O+he);var Ee=We-he;if(this===I&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(O,he,We);else if(this===I&&he<O&&O<We)for(var Ue=Ee-1;Ue>=0;--Ue)I[Ue+O]=this[Ue+he];else Uint8Array.prototype.set.call(I,this.subarray(he,We),O);return Ee},_.prototype.fill=function(I,O,he,We){if("string"==typeof I){if("string"==typeof O?(We=O,O=0,he=this.length):"string"==typeof he&&(We=he,he=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!_.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===I.length){var Ee=I.charCodeAt(0);("utf8"===We&&Ee<128||"latin1"===We)&&(I=Ee)}}else"number"==typeof I&&(I&=255);if(O<0||this.length<O||this.length<he)throw new RangeError("Out of range index");if(he<=O)return this;var Ue;if(O>>>=0,he=void 0===he?this.length:he>>>0,I||(I=0),"number"==typeof I)for(Ue=O;Ue<he;++Ue)this[Ue]=I;else{var Qe=_.isBuffer(I)?I:_.from(I,We),vt=Qe.length;if(0===vt)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(Ue=0;Ue<he-O;++Ue)this[Ue+O]=Qe[Ue%vt]}return this};var Ye=/[^+/0-9A-Za-z-_]/g;function R(U){return U<16?"0"+U.toString(16):U.toString(16)}function A(U,I){I=I||1/0;for(var O,he=U.length,We=null,Ee=[],Ue=0;Ue<he;++Ue){if((O=U.charCodeAt(Ue))>55295&&O<57344){if(!We){if(O>56319){(I-=3)>-1&&Ee.push(239,191,189);continue}if(Ue+1===he){(I-=3)>-1&&Ee.push(239,191,189);continue}We=O;continue}if(O<56320){(I-=3)>-1&&Ee.push(239,191,189),We=O;continue}O=65536+(We-55296<<10|O-56320)}else We&&(I-=3)>-1&&Ee.push(239,191,189);if(We=null,O<128){if((I-=1)<0)break;Ee.push(O)}else if(O<2048){if((I-=2)<0)break;Ee.push(O>>6|192,63&O|128)}else if(O<65536){if((I-=3)<0)break;Ee.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;Ee.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return Ee}function He(U){return Q.toByteArray(function fe(U){if((U=(U=U.split("=")[0]).trim().replace(Ye,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Xe(U,I,O,he){for(var We=0;We<he&&!(We+O>=I.length||We>=U.length);++We)I[We+O]=U[We];return We}function ue(U,I){return U instanceof I||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===I.name}function te(U){return U!=U}},1123:(je,me,S)=>{je.exports={ResizeSensor:S(4718),ElementQueries:S(7240)}},7240:function(je,me,S){"use strict";var Q,C,Y;typeof window<"u"&&window,C=[S(4718)],void 0!==(Y="function"==typeof(Q=function(z){var X=function(){var E,F={},W=[];function N(j){j||(j=document.documentElement);var Me=window.getComputedStyle(j,null).fontSize;return parseFloat(Me)||16}function se(j,Me){var ae=Me.split(/\d/),xe=ae[ae.length-1];switch(Me=parseFloat(Me),xe){case"px":default:return Me;case"em":return Me*N(j);case"rem":return Me*N();case"vw":return Me*document.documentElement.clientWidth/100;case"vh":return Me*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,Ve=document.documentElement.clientHeight/100;return Me*(0,Math["vmin"===xe?"min":"max"])(Oe,Ve)}}function x(j,Me){this.element=j;var ae,xe,Oe,Ve,Ze,Je,Ce,ke,Ae=["min-width","min-height","max-width","max-height"];this.call=function(){for(ae in Oe=function D(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var Me=j.getBoundingClientRect();return{width:Math.round(Me.width),height:Math.round(Me.height)}}(this.element),Je={},F[Me])F[Me].hasOwnProperty(ae)&&(Ve=se(this.element,(xe=F[Me][ae]).value),Ze="width"===xe.property?Oe.width:Oe.height,Ce="","min"===xe.mode&&Ze>=Ve&&(Ce+=xe.value),"max"===xe.mode&&Ze<=Ve&&(Ce+=xe.value),Je[ke=xe.mode+"-"+xe.property]||(Je[ke]=""),Ce&&-1===(" "+Je[ke]+" ").indexOf(" "+Ce+" ")&&(Je[ke]+=" "+Ce));for(var Be in Ae)Ae.hasOwnProperty(Be)&&(Je[Ae[Be]]?this.element.setAttribute(Ae[Be],Je[Ae[Be]].substr(1)):this.element.removeAttribute(Ae[Be]))}}function B(j,Me){j.elementQueriesSetupInformation||(j.elementQueriesSetupInformation=new x(j,Me)),j.elementQueriesSensor||(j.elementQueriesSensor=new z(j,function(){j.elementQueriesSetupInformation.call()}))}function oe(j,Me,ae,xe){if(typeof F[j]>"u"){F[j]=[];var Oe=W.length;E.innerHTML+="\n"+j+" {animation: 0.1s element-queries;}",E.innerHTML+="\n"+j+" > .resize-sensor {min-width: "+Oe+"px;}",W.push(j)}F[j].push({mode:Me,property:ae,value:xe})}function $(j){var Me;if(document.querySelectorAll&&(Me=j?j.querySelectorAll.bind(j):document.querySelectorAll.bind(document)),!Me&&typeof $$<"u"&&(Me=$$),!Me&&typeof jQuery<"u"&&(Me=jQuery),!Me)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Me}function ee(j){var Me=[],ae=[],xe=[],Oe=0,Ve=-1,Ze=[];for(var Je in j.children)if(j.children.hasOwnProperty(Je)&&j.children[Je].tagName&&"img"===j.children[Je].tagName.toLowerCase()){Me.push(j.children[Je]);var Ce=j.children[Je].getAttribute("min-width")||j.children[Je].getAttribute("data-min-width"),ke=j.children[Je].getAttribute("data-src")||j.children[Je].getAttribute("url");xe.push(ke),ae.push({minWidth:Ce}),Ce?j.children[Je].style.display="none":(Oe=Me.length-1,j.children[Je].style.display="block")}function Be(){var Se,de=!1;for(Se in Me)Me.hasOwnProperty(Se)&&ae[Se].minWidth&&j.offsetWidth>ae[Se].minWidth&&(de=Se);if(de||(de=Oe),Ve!==de)if(Ze[de])Me[Ve].style.display="none",Me[de].style.display="block",Ve=de;else{var nt=new Image;nt.onload=function(){Me[de].src=xe[de],Me[Ve].style.display="none",Me[de].style.display="block",Ze[de]=!0,Ve=de},nt.src=xe[de]}else Me[de].src=xe[de]}Ve=Oe,j.resizeSensorInstance=new z(j,Be),Be()}var k=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,b=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function M(j){var Me,ae,xe,Oe;for(j=j.replace(/'/g,'"');null!==(Me=k.exec(j));)for(ae=Me[1]+Me[3],xe=Me[2];null!==(Oe=b.exec(xe));)oe(ae,Oe[1],Oe[2],Oe[3])}function T(j){var Me="";if(j)if("string"==typeof j)(-1!==(j=j.toLowerCase()).indexOf("min-width")||-1!==j.indexOf("max-width"))&&M(j);else for(var ae=0,xe=j.length;ae<xe;ae++)1===j[ae].type?(-1!==(Me=j[ae].selectorText||j[ae].cssText).indexOf("min-height")||-1!==Me.indexOf("max-height")||-1!==Me.indexOf("min-width")||-1!==Me.indexOf("max-width"))&&M(Me):4===j[ae].type?T(j[ae].cssRules||j[ae].rules):3===j[ae].type&&j[ae].styleSheet.hasOwnProperty("cssRules")&&T(j[ae].styleSheet.cssRules)}var ce=!1;this.init=function(){var j="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?j="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?j="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(j="oanimationstart"),document.body.addEventListener(j,function(xe){var Oe=xe.target,Ve=Oe&&window.getComputedStyle(Oe,null),Ze=Ve&&Ve.getPropertyValue("animation-name");if(Ze&&-1!==Ze.indexOf("element-queries")){Oe.elementQueriesSensor=new z(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var ke=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");ke=parseInt(ke.replace("px","")),B(xe.target,W[ke])}}),ce||((E=document.createElement("style")).type="text/css",E.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",E.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(E),ce=!0);for(var Me=0,ae=document.styleSheets.length;Me<ae;Me++)try{document.styleSheets[Me].href&&0===document.styleSheets[Me].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Me].href),T(document.styleSheets[Me].cssRules||document.styleSheets[Me].rules||document.styleSheets[Me].cssText)}catch{}!function q(){for(var Me=$()("[data-responsive-image],[responsive-image]"),ae=0,xe=Me.length;ae<xe;ae++)ee(Me[ae])}()},this.findElementQueriesElements=function(j){!function G(j){var Me=$(j);for(var ae in F)if(F.hasOwnProperty(ae))for(var xe=Me(ae,j),Oe=0,Ve=xe.length;Oe<Ve;Oe++)B(xe[Oe],ae)}(j)},this.update=function(){this.init()}};X.update=function(){X.instance.update()},X.detach=function(E){E.elementQueriesSetupInformation?(E.elementQueriesSensor.detach(),delete E.elementQueriesSetupInformation,delete E.elementQueriesSensor):E.resizeSensorInstance&&(E.resizeSensorInstance.detach(),delete E.resizeSensorInstance)},X.init=function(){X.instance||(X.instance=new X),X.instance.init()};return X.findElementQueriesElements=function(E){X.instance.findElementQueriesElements(E)},X.listen=function(){!function(E){if(document.addEventListener)document.addEventListener("DOMContentLoaded",E,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var F=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(E(),clearInterval(F))},10);else window.onload=E}(X.init)},X})?Q.apply(me,C):Q)&&(je.exports=Y)},4718:function(je,me,S){"use strict";var Q,C;typeof window<"u"&&window,void 0!==(C="function"==typeof(Q=function(){if(typeof window>"u")return null;var Y=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),z=Y.requestAnimationFrame||Y.mozRequestAnimationFrame||Y.webkitRequestAnimationFrame||function(D){return Y.setTimeout(D,20)},X=Y.cancelAnimationFrame||Y.mozCancelAnimationFrame||Y.webkitCancelAnimationFrame||function(D){Y.clearTimeout(D)};function _(D,se){var x=Object.prototype.toString.call(D),B="[object Array]"===x||"[object NodeList]"===x||"[object HTMLCollection]"===x||"[object Object]"===x||typeof jQuery<"u"&&D instanceof jQuery||typeof Elements<"u"&&D instanceof Elements,oe=0,$=D.length;if(B)for(;oe<$;oe++)se(D[oe]);else se(D)}function E(D){if(!D.getBoundingClientRect)return{width:D.offsetWidth,height:D.offsetHeight};var se=D.getBoundingClientRect();return{width:Math.round(se.width),height:Math.round(se.height)}}function F(D,se){Object.keys(se).forEach(function(x){D.style[x]=se[x]})}var W=function(D,se){var x=0;function B(){var G,ee,$=[];this.add=function(q){$.push(q)},this.call=function(q){for(G=0,ee=$.length;G<ee;G++)$[G].call(this,q)},this.remove=function(q){var k=[];for(G=0,ee=$.length;G<ee;G++)$[G]!==q&&k.push($[G]);$=k},this.length=function(){return $.length}}function oe($,G){if($){if($.resizedAttached)return void $.resizedAttached.add(G);$.resizedAttached=new B,$.resizedAttached.add(G),$.resizeSensor=document.createElement("div"),$.resizeSensor.dir="ltr",$.resizeSensor.className="resize-sensor";var ee={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},q={position:"absolute",left:"0px",top:"0px",transition:"0s"};F($.resizeSensor,ee);var k=document.createElement("div");k.className="resize-sensor-expand",F(k,ee);var b=document.createElement("div");F(b,q),k.appendChild(b);var M=document.createElement("div");M.className="resize-sensor-shrink",F(M,ee);var T=document.createElement("div");F(T,q),F(T,{width:"200%",height:"200%"}),M.appendChild(T),$.resizeSensor.appendChild(k),$.resizeSensor.appendChild(M),$.appendChild($.resizeSensor);var ce=window.getComputedStyle($),j=ce?ce.getPropertyValue("position"):null;"absolute"!==j&&"relative"!==j&&"fixed"!==j&&"sticky"!==j&&($.style.position="relative");var Me=!1,ae=0,xe=E($),Oe=0,Ve=0,Ze=!0;x=0;var Ce=function(){if(Ze){if(0===$.offsetWidth&&0===$.offsetHeight)return void(x||(x=z(function(){x=0,Ce()})));Ze=!1}var de,Se;Se=$.offsetHeight,b.style.width=(de=$.offsetWidth)+10+"px",b.style.height=Se+10+"px",k.scrollLeft=de+10,k.scrollTop=Se+10,M.scrollLeft=de+10,M.scrollTop=Se+10};$.resizeSensor.resetSensor=Ce;var ke=function(){ae=0,Me&&(Oe=xe.width,Ve=xe.height,$.resizedAttached&&$.resizedAttached.call(xe))},Ae=function(){xe=E($),(Me=xe.width!==Oe||xe.height!==Ve)&&!ae&&(ae=z(ke)),Ce()},Be=function(de,Se,nt){de.attachEvent?de.attachEvent("on"+Se,nt):de.addEventListener(Se,nt)};Be(k,"scroll",Ae),Be(M,"scroll",Ae),x=z(function(){x=0,Ce()})}}_(D,function($){oe($,se)}),this.detach=function($){x||(X(x),x=0),W.detach(D,$)},this.reset=function(){D.resizeSensor.resetSensor()}};if(W.reset=function(D){_(D,function(se){se.resizeSensor.resetSensor()})},W.detach=function(D,se){_(D,function(x){x&&(x.resizedAttached&&"function"==typeof se&&(x.resizedAttached.remove(se),x.resizedAttached.length())||x.resizeSensor&&(x.contains(x.resizeSensor)&&x.removeChild(x.resizeSensor),delete x.resizeSensor,delete x.resizedAttached))})},typeof MutationObserver<"u"){var N=new MutationObserver(function(D){for(var se in D)if(D.hasOwnProperty(se))for(var x=D[se].addedNodes,B=0;B<x.length;B++)x[B].resizeSensor&&W.reset(x[B])});document.addEventListener("DOMContentLoaded",function(D){N.observe(document.body,{childList:!0,subtree:!0})})}return W})?Q.call(me,S,me,je):Q)&&(je.exports=C)},4356:je=>{"use strict";var Q,me="object"==typeof Reflect?Reflect:null,S=me&&"function"==typeof me.apply?me.apply:function(k,b,M){return Function.prototype.apply.call(k,b,M)};Q=me&&"function"==typeof me.ownKeys?me.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var Y=Number.isNaN||function(k){return k!=k};function z(){z.init.call(this)}je.exports=z,je.exports.once=function $(q,k){return new Promise(function(b,M){function T(j){q.removeListener(k,ce),M(j)}function ce(){"function"==typeof q.removeListener&&q.removeListener("error",T),b([].slice.call(arguments))}ee(q,k,ce,{once:!0}),"error"!==k&&function G(q,k,b){"function"==typeof q.on&&ee(q,"error",k,b)}(q,T,{once:!0})})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var X=10;function _(q){if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}function E(q){return void 0===q._maxListeners?z.defaultMaxListeners:q._maxListeners}function F(q,k,b,M){var T,ce,j;if(_(b),void 0===(ce=q._events)?(ce=q._events=Object.create(null),q._eventsCount=0):(void 0!==ce.newListener&&(q.emit("newListener",k,b.listener?b.listener:b),ce=q._events),j=ce[k]),void 0===j)j=ce[k]=b,++q._eventsCount;else if("function"==typeof j?j=ce[k]=M?[b,j]:[j,b]:M?j.unshift(b):j.push(b),(T=E(q))>0&&j.length>T&&!j.warned){j.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=q,Me.type=k,Me.count=j.length,function C(q){console&&console.warn&&console.warn(q)}(Me)}return q}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(q,k,b){var M={fired:!1,wrapFn:void 0,target:q,type:k,listener:b},T=W.bind(M);return T.listener=b,M.wrapFn=T,T}function D(q,k,b){var M=q._events;if(void 0===M)return[];var T=M[k];return void 0===T?[]:"function"==typeof T?b?[T.listener||T]:[T]:b?function oe(q){for(var k=new Array(q.length),b=0;b<k.length;++b)k[b]=q[b].listener||q[b];return k}(T):x(T,T.length)}function se(q){var k=this._events;if(void 0!==k){var b=k[q];if("function"==typeof b)return 1;if(void 0!==b)return b.length}return 0}function x(q,k){for(var b=new Array(k),M=0;M<k;++M)b[M]=q[M];return b}function ee(q,k,b,M){if("function"==typeof q.on)M.once?q.once(k,b):q.on(k,b);else{if("function"!=typeof q.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q);q.addEventListener(k,function T(ce){M.once&&q.removeEventListener(k,T),b(ce)})}}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(q){if("number"!=typeof q||q<0||Y(q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");X=q}}),z.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(k){if("number"!=typeof k||k<0||Y(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},z.prototype.getMaxListeners=function(){return E(this)},z.prototype.emit=function(k){for(var b=[],M=1;M<arguments.length;M++)b.push(arguments[M]);var T="error"===k,ce=this._events;if(void 0!==ce)T=T&&void 0===ce.error;else if(!T)return!1;if(T){var j;if(b.length>0&&(j=b[0]),j instanceof Error)throw j;var Me=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw Me.context=j,Me}var ae=ce[k];if(void 0===ae)return!1;if("function"==typeof ae)S(ae,this,b);else{var xe=ae.length,Oe=x(ae,xe);for(M=0;M<xe;++M)S(Oe[M],this,b)}return!0},z.prototype.on=z.prototype.addListener=function(k,b){return F(this,k,b,!1)},z.prototype.prependListener=function(k,b){return F(this,k,b,!0)},z.prototype.once=function(k,b){return _(b),this.on(k,N(this,k,b)),this},z.prototype.prependOnceListener=function(k,b){return _(b),this.prependListener(k,N(this,k,b)),this},z.prototype.off=z.prototype.removeListener=function(k,b){var M,T,ce,j,Me;if(_(b),void 0===(T=this._events))return this;if(void 0===(M=T[k]))return this;if(M===b||M.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete T[k],T.removeListener&&this.emit("removeListener",k,M.listener||b));else if("function"!=typeof M){for(ce=-1,j=M.length-1;j>=0;j--)if(M[j]===b||M[j].listener===b){Me=M[j].listener,ce=j;break}if(ce<0)return this;0===ce?M.shift():function B(q,k){for(;k+1<q.length;k++)q[k]=q[k+1];q.pop()}(M,ce),1===M.length&&(T[k]=M[0]),void 0!==T.removeListener&&this.emit("removeListener",k,Me||b)}return this},z.prototype.removeAllListeners=function(k){var b,M,T;if(void 0===(M=this._events))return this;if(void 0===M.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==M[k]&&(0==--this._eventsCount?this._events=Object.create(null):delete M[k]),this;if(0===arguments.length){var j,ce=Object.keys(M);for(T=0;T<ce.length;++T)"removeListener"!==(j=ce[T])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=M[k]))this.removeListener(k,b);else if(void 0!==b)for(T=b.length-1;T>=0;T--)this.removeListener(k,b[T]);return this},z.prototype.listeners=function(k){return D(this,k,!0)},z.prototype.rawListeners=function(k){return D(this,k,!1)},z.listenerCount=function(q,k){return"function"==typeof q.listenerCount?q.listenerCount(k):se.call(q,k)},z.prototype.listenerCount=se,z.prototype.eventNames=function(){return this._eventsCount>0?Q(this._events):[]}},689:(je,me,S)=>{var Q=S(9791),C=S(2963),Y=S(5064);function z(D,se,x){if(!Q(D))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!D.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');if(!D.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" target node does not exist in the given graph.');if((se=""+se)==(x=""+x))return[se];var B=D.inboundNeighbors.bind(D),oe=D.outboundNeighbors.bind(D),$={},G={};$[se]=null,G[x]=null;var k,b,M,T,ce,j,Me,ae,ee=[se],q=[x],xe=!1;e:for(;ee.length&&q.length;)if(ee.length<=q.length){for(k=ee,ee=[],ce=0,Me=k.length;ce<Me;ce++)for(j=0,ae=(M=oe(b=k[ce])).length;j<ae;j++)if((T=M[j])in $||(ee.push(T),$[T]=b),T in G){xe=!0;break e}}else for(k=q,q=[],ce=0,Me=k.length;ce<Me;ce++)for(b=k[ce],M=B(b),j=0,ae=M.length;j<ae;j++)if(T=M[j],T in G||(q.push(T),G[T]=b),T in $){xe=!0;break e}if(!xe)return null;for(var Oe=[];T;)Oe.unshift(T),T=$[T];for(T=G[Oe[Oe.length-1]];T;)Oe.push(T),T=G[T];return Oe.length?Oe:null}function X(D,se){if(!Q(D))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!D.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');var oe,$,G,ee,q,k,x={},B={};for(x[se=""+se]=!0,B[se]=[se];Object.keys(x).length;)for(G in oe=x,x={},oe)for(q=0,k=($=D.outboundNeighbors(G)).length;q<k;q++)B[ee=$[q]]||(B[ee]=B[G].concat(ee),x[ee]=!0);return B}function _(D,se,x){if(!Q(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!se.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" source node does not exist in the given graph.');x=""+x;var B=new Set,oe={},$=0;oe[x]=0;for(var ee,q,k,G=[x];0!==G.length;){var b=[];for(ee=0,q=G.length;ee<q;ee++)!B.has(k=G[ee])&&(B.add(k),Y(b,se[D](k)),oe[k]=$);$++,G=b}return oe}var E=_.bind(null,"outboundNeighbors"),F=_.bind(null,"neighbors");function W(D,se,x){return arguments.length<3?X(D,se):z(D,se,x)}W.bidirectional=z,W.singleSource=X,W.singleSourceLength=E,W.undirectedSingleSourceLength=F,W.brandes=function N(D,se){se=""+se;var G,ee,q,k,b,M,T,ce,j,x=[],B={},oe={},$=D.nodes();for(M=0,ce=$.length;M<ce;M++)B[k=$[M]]=[],oe[k]=0;var Me={};oe[se]=1,Me[se]=0;for(var ae=C.of(se);ae.size;)for(k=ae.dequeue(),x.push(k),G=Me[k],ee=oe[k],T=0,j=(q=D.outboundNeighbors(k)).length;T<j;T++)(b=q[T])in Me||(ae.enqueue(b),Me[b]=G+1),Me[b]===G+1&&(oe[b]+=ee,B[b].push(k));return[x,B,oe]},je.exports=W},9791:je=>{je.exports=function(S){return null!==S&&"object"==typeof S&&"function"==typeof S.addUndirectedEdgeWithKey&&"function"==typeof S.dropNode&&"boolean"==typeof S.multi}},2475:function(je){je.exports=function(){"use strict";function me(_e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(_e)}function S(_e,Te){_e.prototype=Object.create(Te.prototype),_e.prototype.constructor=_e,C(_e,Te)}function Q(_e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(_e)}function C(_e,Te){return(C=Object.setPrototypeOf||function(ve,L){return ve.__proto__=L,ve})(_e,Te)}function z(_e,Te,ve){return(z=function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(L,Z,ge){var Pe=[null];Pe.push.apply(Pe,Z);var $e=new(Function.bind.apply(L,Pe));return ge&&C($e,ge.prototype),$e}).apply(null,arguments)}function X(_e){var Te="function"==typeof Map?new Map:void 0;return(X=function(ve){if(null===ve||-1===Function.toString.call(ve).indexOf("[native code]"))return ve;if("function"!=typeof ve)throw new TypeError("Super expression must either be null or a function");if(void 0!==Te){if(Te.has(ve))return Te.get(ve);Te.set(ve,Z)}function Z(){return z(ve,arguments,Q(this).constructor)}return Z.prototype=Object.create(ve.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),C(Z,ve)})(_e)}function _(_e){if(void 0===_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}var E=function(){for(var _e=arguments[0],Te=1,ve=arguments.length;Te<ve;Te++)if(arguments[Te])for(var L in arguments[Te])_e[L]=arguments[Te][L];return _e};function F(_e,Te,ve,L){var Z=_e._nodes.get(Te),ge=null;return Z?ge="mixed"===L?Z.out&&Z.out[ve]||Z.undirected&&Z.undirected[ve]:"directed"===L?Z.out&&Z.out[ve]:Z.undirected&&Z.undirected[ve]:ge}function N(_e){return"object"===me(_e)&&null!==_e&&_e.constructor===Object}function D(_e){var Te;for(Te in _e)return!1;return!0}function se(_e,Te,ve){Object.defineProperty(_e,Te,{enumerable:!1,configurable:!1,writable:!0,value:ve})}function x(_e,Te,ve){var L={enumerable:!0,configurable:!0};"function"==typeof ve?L.get=ve:(L.value=ve,L.writable=!1),Object.defineProperty(_e,Te,L)}function B(_e){return!(!N(_e)||_e.attributes&&!Array.isArray(_e.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var oe,$={exports:{}},G="object"==typeof Reflect?Reflect:null,ee=G&&"function"==typeof G.apply?G.apply:function(_e,Te,ve){return Function.prototype.apply.call(_e,Te,ve)};oe=G&&"function"==typeof G.ownKeys?G.ownKeys:Object.getOwnPropertySymbols?function(_e){return Object.getOwnPropertyNames(_e).concat(Object.getOwnPropertySymbols(_e))}:function(_e){return Object.getOwnPropertyNames(_e)};var q=Number.isNaN||function(_e){return _e!=_e};function k(){k.init.call(this)}$.exports=k,$.exports.once=function(_e,Te){return new Promise(function(ve,L){function Z(Pe){_e.removeListener(Te,ge),L(Pe)}function ge(){"function"==typeof _e.removeListener&&_e.removeListener("error",Z),ve([].slice.call(arguments))}var Pe;Ve(_e,Te,ge,{once:!0}),"error"!==Te&&("function"==typeof(Pe=_e).on&&Ve(Pe,"error",Z,{once:!0}))})},k.EventEmitter=k,k.prototype._events=void 0,k.prototype._eventsCount=0,k.prototype._maxListeners=void 0;var b=10;function M(_e){if("function"!=typeof _e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _e)}function T(_e){return void 0===_e._maxListeners?k.defaultMaxListeners:_e._maxListeners}function ce(_e,Te,ve,L){var Z,ge,Pe;if(M(ve),void 0===(ge=_e._events)?(ge=_e._events=Object.create(null),_e._eventsCount=0):(void 0!==ge.newListener&&(_e.emit("newListener",Te,ve.listener?ve.listener:ve),ge=_e._events),Pe=ge[Te]),void 0===Pe)Pe=ge[Te]=ve,++_e._eventsCount;else if("function"==typeof Pe?Pe=ge[Te]=L?[ve,Pe]:[Pe,ve]:L?Pe.unshift(ve):Pe.push(ve),(Z=T(_e))>0&&Pe.length>Z&&!Pe.warned){Pe.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+Pe.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");at.name="MaxListenersExceededWarning",at.emitter=_e,at.type=Te,at.count=Pe.length,console&&console.warn&&console.warn(at)}return _e}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Me(_e,Te,ve){var L={fired:!1,wrapFn:void 0,target:_e,type:Te,listener:ve},Z=j.bind(L);return Z.listener=ve,L.wrapFn=Z,Z}function ae(_e,Te,ve){var L=_e._events;if(void 0===L)return[];var Z=L[Te];return void 0===Z?[]:"function"==typeof Z?ve?[Z.listener||Z]:[Z]:ve?function(ge){for(var Pe=new Array(ge.length),$e=0;$e<Pe.length;++$e)Pe[$e]=ge[$e].listener||ge[$e];return Pe}(Z):Oe(Z,Z.length)}function xe(_e){var Te=this._events;if(void 0!==Te){var ve=Te[_e];if("function"==typeof ve)return 1;if(void 0!==ve)return ve.length}return 0}function Oe(_e,Te){for(var ve=new Array(Te),L=0;L<Te;++L)ve[L]=_e[L];return ve}function Ve(_e,Te,ve,L){if("function"==typeof _e.on)L.once?_e.once(Te,ve):_e.on(Te,ve);else{if("function"!=typeof _e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _e);_e.addEventListener(Te,function Z(ge){L.once&&_e.removeEventListener(Te,Z),ve(ge)})}}function Ze(_e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:_e}),this.done=!1}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(_e){if("number"!=typeof _e||_e<0||q(_e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_e+".");b=_e}}),k.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(_e){if("number"!=typeof _e||_e<0||q(_e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_e+".");return this._maxListeners=_e,this},k.prototype.getMaxListeners=function(){return T(this)},k.prototype.emit=function(_e){for(var Te=[],ve=1;ve<arguments.length;ve++)Te.push(arguments[ve]);var L="error"===_e,Z=this._events;if(void 0!==Z)L=L&&void 0===Z.error;else if(!L)return!1;if(L){var ge;if(Te.length>0&&(ge=Te[0]),ge instanceof Error)throw ge;var Pe=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw Pe.context=ge,Pe}var $e=Z[_e];if(void 0===$e)return!1;if("function"==typeof $e)ee($e,this,Te);else{var at=$e.length,Tt=Oe($e,at);for(ve=0;ve<at;++ve)ee(Tt[ve],this,Te)}return!0},k.prototype.addListener=function(_e,Te){return ce(this,_e,Te,!1)},k.prototype.on=k.prototype.addListener,k.prototype.prependListener=function(_e,Te){return ce(this,_e,Te,!0)},k.prototype.once=function(_e,Te){return M(Te),this.on(_e,Me(this,_e,Te)),this},k.prototype.prependOnceListener=function(_e,Te){return M(Te),this.prependListener(_e,Me(this,_e,Te)),this},k.prototype.removeListener=function(_e,Te){var ve,L,Z,ge,Pe;if(M(Te),void 0===(L=this._events))return this;if(void 0===(ve=L[_e]))return this;if(ve===Te||ve.listener===Te)0==--this._eventsCount?this._events=Object.create(null):(delete L[_e],L.removeListener&&this.emit("removeListener",_e,ve.listener||Te));else if("function"!=typeof ve){for(Z=-1,ge=ve.length-1;ge>=0;ge--)if(ve[ge]===Te||ve[ge].listener===Te){Pe=ve[ge].listener,Z=ge;break}if(Z<0)return this;0===Z?ve.shift():function($e,at){for(;at+1<$e.length;at++)$e[at]=$e[at+1];$e.pop()}(ve,Z),1===ve.length&&(L[_e]=ve[0]),void 0!==L.removeListener&&this.emit("removeListener",_e,Pe||Te)}return this},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(_e){var Te,ve,L;if(void 0===(ve=this._events))return this;if(void 0===ve.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ve[_e]&&(0==--this._eventsCount?this._events=Object.create(null):delete ve[_e]),this;if(0===arguments.length){var Z,ge=Object.keys(ve);for(L=0;L<ge.length;++L)"removeListener"!==(Z=ge[L])&&this.removeAllListeners(Z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Te=ve[_e]))this.removeListener(_e,Te);else if(void 0!==Te)for(L=Te.length-1;L>=0;L--)this.removeListener(_e,Te[L]);return this},k.prototype.listeners=function(_e){return ae(this,_e,!0)},k.prototype.rawListeners=function(_e){return ae(this,_e,!1)},k.listenerCount=function(_e,Te){return"function"==typeof _e.listenerCount?_e.listenerCount(Te):xe.call(_e,Te)},k.prototype.listenerCount=xe,k.prototype.eventNames=function(){return this._eventsCount>0?oe(this._events):[]},Ze.prototype.next=function(){if(this.done)return{done:!0};var _e=this._next();return _e.done&&(this.done=!0),_e},typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this}),Ze.of=function(){var _e=arguments,Te=_e.length,ve=0;return new Ze(function(){return ve>=Te?{done:!0}:{done:!1,value:_e[ve++]}})},Ze.empty=function(){var _e=new Ze(null);return _e.done=!0,_e},Ze.is=function(_e){return _e instanceof Ze||"object"==typeof _e&&null!==_e&&"function"==typeof _e.next};var Je=Ze,Ce=function(_e,Te){for(var ve,L=arguments.length>1?Te:1/0,Z=L!==1/0?new Array(L):[],ge=0;;){if(ge===L)return Z;if((ve=_e.next()).done)return ge!==Te?Z.slice(0,ge):Z;Z[ge++]=ve.value}},ke=function(_e){function Te(ve,L){var Z;return(Z=_e.call(this)||this).name="GraphError",Z.message=ve||"",Z.data=L||{},Z}return S(Te,_e),Te}(X(Error)),Ae=function(_e){function Te(ve,L){var Z;return(Z=_e.call(this,ve,L)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Z),Te.prototype.constructor),Z}return S(Te,_e),Te}(ke),Be=function(_e){function Te(ve,L){var Z;return(Z=_e.call(this,ve,L)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Z),Te.prototype.constructor),Z}return S(Te,_e),Te}(ke),de=function(_e){function Te(ve,L){var Z;return(Z=_e.call(this,ve,L)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Z),Te.prototype.constructor),Z}return S(Te,_e),Te}(ke);function Se(_e,Te){this.key=_e,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function nt(_e,Te){this.key=_e,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function mt(_e,Te){this.key=_e,this.attributes=Te,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ye(_e,Te,ve,L,Z,ge){this.key=Te,this.attributes=ge,this.undirected=_e,this.source=L,this.target=Z,this.generatedKey=ve}function fe(_e,Te,ve,L,Z,ge,Pe){var $e,at,Tt="out",Bt="in";if(Te&&(Tt=Bt="undirected"),_e.multi){if(void 0===(at=($e=ge[Tt])[Z])&&($e[Z]=at=new Set),at.add(ve),L===Z&&Te)return;void 0===($e=Pe[Bt])[L]&&($e[L]=at)}else{if(ge[Tt][Z]=ve,L===Z&&Te)return;Pe[Bt][L]=ve}}nt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},mt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var A=[{name:function(_e){return"get".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Z;if(Z=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes[Z]}}},{name:function(_e){return"get".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L){var Z;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ge=""+L,Pe=""+arguments[1];if(!(Z=F(this,ge,Pe,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(ge,'" - "').concat(Pe,'").'))}else if(!(Z=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&Z.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Z.attributes}}},{name:function(_e){return"has".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Z;if(Z=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes.hasOwnProperty(Z)}}},{name:function(_e){return"set".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z,ge){var Pe;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+L,at=""+Z;if(Z=arguments[2],ge=arguments[3],!(Pe=F(this,$e,at,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(at,'").'))}else if(!(Pe=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&Pe.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Pe.attributes[Z]=ge,this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:Z}),this}}},{name:function(_e){return"update".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z,ge){var Pe;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+L,at=""+Z;if(Z=arguments[2],ge=arguments[3],!(Pe=F(this,$e,at,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(at,'").'))}else if(!(Pe=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("function"!=typeof ge)throw new Ae("Graph.".concat(Te,": updater should be a function."));if("mixed"!==ve&&Pe.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Pe.attributes[Z]=ge(Pe.attributes[Z]),this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:Z}),this}}},{name:function(_e){return"remove".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Z;if(Z=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return delete ge.attributes[Z],this.emit("edgeAttributesUpdated",{key:ge.key,type:"remove",attributes:ge.attributes,name:Z}),this}}},{name:function(_e){return"replace".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Z;if(Z=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if(!N(Z))throw new Ae("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes=Z,this.emit("edgeAttributesUpdated",{key:ge.key,type:"replace",attributes:ge.attributes}),this}}},{name:function(_e){return"merge".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Z){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Z;if(Z=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if(!N(Z))throw new Ae("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new Be("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return E(ge.attributes,Z),this.emit("edgeAttributesUpdated",{key:ge.key,type:"merge",attributes:ge.attributes,data:Z}),this}}}],ie=Je,J=function(){var _e,Te=arguments,ve=-1;return new ie(function L(){if(!_e){if(++ve>=Te.length)return{done:!0};_e=Te[ve]}var Z=_e.next();return Z.done?(_e=null,L()):Z})},He=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Xe(_e,Te){for(var ve in Te)_e.push(Te[ve].key)}function ue(_e,Te){for(var ve in Te)Te[ve].forEach(function(L){return _e.push(L.key)})}function te(_e,Te,ve){for(var L in _e)if(L!==ve){var Z=_e[L];Te(Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey)}}function U(_e,Te,ve){for(var L in _e)L!==ve&&_e[L].forEach(function(Z){return Te(Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey)})}function I(_e,Te,ve){for(var L in _e)if(L!==ve){var Z=_e[L];if(Te(Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey))return!0}return!1}function O(_e,Te,ve){var L,Z,ge,Pe,$e;for(var at in _e)if(at!==ve)for(L=_e[at].values();!0!==(Z=L.next()).done;)if(Pe=(ge=Z.value).source,Te(ge.key,ge.attributes,Pe.key,($e=ge.target).key,Pe.attributes,$e.attributes,ge.undirected,ge.generatedKey))return!0;return!1}function he(_e,Te){var ve=Object.keys(_e),L=ve.length,Z=null,ge=0;return new Je(function Pe(){var $e;if(Z){var at=Z.next();if(at.done)return Z=null,ge++,Pe();$e=at.value}else{if(ge>=L)return{done:!0};var Tt=ve[ge];if(Tt===Te)return ge++,Pe();if(($e=_e[Tt])instanceof Set)return Z=$e.values(),Pe();ge++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function We(_e,Te,ve){var L=Te[ve];L&&_e.push(L.key)}function Ee(_e,Te,ve){var L=Te[ve];L&&L.forEach(function(Z){return _e.push(Z.key)})}function Ue(_e,Te,ve){var L=_e[Te];if(L){var Z=L.source,ge=L.target;ve(L.key,L.attributes,Z.key,ge.key,Z.attributes,ge.attributes,L.undirected,L.generatedKey)}}function Qe(_e,Te,ve){var L=_e[Te];L&&L.forEach(function(Z){return ve(Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey)})}function vt(_e,Te,ve){var L=_e[Te];if(L){var Z=L.source,ge=L.target;return ve(L.key,L.attributes,Z.key,ge.key,Z.attributes,ge.attributes,L.undirected,L.generatedKey)}}function Rt(_e,Te,ve){var L=_e[Te];if(L){for(var Z,ge,Pe=L.values();!0!==(Z=Pe.next()).done;)if(ve((ge=Z.value).key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes,ge.undirected,ge.generatedKey))return!0;return!1}}function wt(_e,Te){var ve=_e[Te];if(ve instanceof Set){var L=ve.values();return new Je(function(){var Z=L.next();if(Z.done)return Z;var ge=Z.value;return{done:!1,value:[ge.key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes]}})}return Je.of([ve.key,ve.attributes,ve.source.key,ve.target.key,ve.source.attributes,ve.target.attributes])}var vn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ni(_e,Te){if(void 0!==Te)for(var ve in Te)_e.add(ve)}function lr(_e,Te,ve){for(var L in Te){var Z=Te[L];Z instanceof Set&&(Z=Z.values().next().value);var ge=Z.source,$e=ge===_e?Z.target:ge;ve($e.key,$e.attributes)}}function Fs(_e,Te,ve,L){for(var Z in ve){var ge=ve[Z];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,at=Pe===Te?ge.target:Pe;_e.has(at.key)||(_e.add(at.key),L(at.key,at.attributes))}}function ao(_e,Te,ve){for(var L in Te){var Z=Te[L];Z instanceof Set&&(Z=Z.values().next().value);var ge=Z.source,$e=ge===_e?Z.target:ge;if(ve($e.key,$e.attributes))return!0}return!1}function Gi(_e,Te,ve,L){for(var Z in ve){var ge=ve[Z];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,at=Pe===Te?ge.target:Pe;if(!_e.has(at.key)&&(_e.add(at.key),L(at.key,at.attributes)))return!0}return!1}function Lr(_e,Te){var ve=Object.keys(Te),L=ve.length,Z=0;return new Je(function(){if(Z>=L)return{done:!0};var ge=Te[ve[Z++]];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,at=Pe===_e?ge.target:Pe;return{done:!1,value:[at.key,at.attributes]}})}function lo(_e,Te,ve){var L=Object.keys(ve),Z=L.length,ge=0;return new Je(function Pe(){if(ge>=Z)return{done:!0};var $e=ve[L[ge++]];$e instanceof Set&&($e=$e.values().next().value);var at=$e.source,Bt=at===Te?$e.target:at;return _e.has(Bt.key)?Pe():(_e.add(Bt.key),{done:!1,value:[Bt.key,Bt.attributes]})})}function ze(_e,Te,ve){for(var L,Z,ge,Pe,$e,at,Tt,Bt=Te._nodes.values(),Gt=Te.type;!0!==(L=Bt.next()).done;){if(Z=L.value,"undirected"!==Gt)for(ge in Pe=Z.out)if(at=($e=Pe[ge]).target,Tt=ve(Z.key,at.key,Z.attributes,at.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&Tt)return;if("directed"!==Gt)for(ge in Pe=Z.undirected)if((at=($e=Pe[ge]).target).key!==ge&&(at=$e.source),Tt=ve(Z.key,at.key,Z.attributes,at.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&Tt)return}}function Ke(_e,Te,ve){for(var L,Z,ge,Pe,$e,at,Tt,Bt,Gt,Qt=Te._nodes.values(),bn=Te.type;!0!==(L=Qt.next()).done;){if(Z=L.value,"undirected"!==bn)for(ge in at=Z.out)for(Pe=at[ge].values();!0!==($e=Pe.next()).done;)if(Bt=(Tt=$e.value).target,Gt=ve(Z.key,Bt.key,Z.attributes,Bt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),_e&&Gt)return;if("directed"!==bn)for(ge in at=Z.undirected)for(Pe=at[ge].values();!0!==($e=Pe.next()).done;)if((Bt=(Tt=$e.value).target).key!==ge&&(Bt=Tt.source),Gt=ve(Z.key,Bt.key,Z.attributes,Bt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),_e&&Gt)return}}function zt(_e,Te){var ve={key:_e};return D(Te.attributes)||(ve.attributes=E({},Te.attributes)),ve}function At(_e,Te){var ve={source:Te.source.key,target:Te.target.key};return Te.generatedKey||(ve.key=_e),D(Te.attributes)||(ve.attributes=E({},Te.attributes)),Te.undirected&&(ve.undirected=!0),ve}var as=new Set(["directed","undirected","mixed"]),Za=new Set(["domain","_events","_eventsCount","_maxListeners"]),Jt={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ca(_e,Te,ve){var L=new _e.NodeDataClass(Te,ve);return _e._nodes.set(Te,L),_e.emit("nodeAdded",{key:Te,attributes:ve}),L}function Ji(_e,Te,ve,L,Z,ge,Pe,$e){if(!L&&"undirected"===_e.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(L&&"directed"===_e.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!N($e))throw new Ae("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(ge=""+ge,Pe=""+Pe,$e=$e||{},!_e.allowSelfLoops&&ge===Pe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var at=_e._nodes.get(ge),Tt=_e._nodes.get(Pe);if(!at)throw new Be("Graph.".concat(Te,': source node "').concat(ge,'" not found.'));if(!Tt)throw new Be("Graph.".concat(Te,': target node "').concat(Pe,'" not found.'));var Bt={key:null,undirected:L,source:ge,target:Pe,attributes:$e};if(ve&&(Z=_e._edgeKeyGenerator(Bt)),_e._edges.has(Z=""+Z))throw new de("Graph.".concat(Te,': the "').concat(Z,'" edge already exists in the graph.'));if(!_e.multi&&(L?void 0!==at.undirected[Pe]:void 0!==at.out[Pe]))throw new de("Graph.".concat(Te,': an edge linking "').concat(ge,'" to "').concat(Pe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Gt=new Ye(L,Z,ve,at,Tt,$e);return _e._edges.set(Z,Gt),ge===Pe?L?(at.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(at.directedSelfLoops++,_e._directedSelfLoopCount++):L?(at.undirectedDegree++,Tt.undirectedDegree++):(at.outDegree++,Tt.inDegree++),fe(_e,L,Gt,ge,Pe,at,Tt),L?_e._undirectedSize++:_e._directedSize++,Bt.key=Z,_e.emit("edgeAdded",Bt),Z}function Ta(_e,Te,ve,L,Z,ge,Pe,$e,at){if(!L&&"undirected"===_e.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(L&&"directed"===_e.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(at){if("function"!=typeof $e)throw new Ae("Graph.".concat(Te,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!N($e))throw new Ae("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));var Tt;if(ge=""+ge,Pe=""+Pe,at&&(Tt=$e,$e=void 0),!_e.allowSelfLoops&&ge===Pe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Bt,Gt,Qt=_e._nodes.get(ge),bn=_e._nodes.get(Pe);if(!ve&&(Bt=_e._edges.get(Z))){if(Bt.source.key!==ge||Bt.target.key!==Pe||L&&(Bt.source.key!==Pe||Bt.target.key!==ge))throw new de("Graph.".concat(Te,': inconsistency detected when attempting to merge the "').concat(Z,'" edge with "').concat(ge,'" source & "').concat(Pe,'" target vs. ("').concat(Bt.source.key,'", "').concat(Bt.target.key,'").'));Gt=Bt}if(Gt||_e.multi||!Qt||(Gt=L?Qt.undirected[Pe]:Qt.out[Pe]),Gt)return(at?Tt:$e)?(at?(Gt.attributes=Tt(Gt.attributes),_e.emit("edgeAttributesUpdated",{type:"replace",key:Gt.key,attributes:Gt.attributes})):(E(Gt.attributes,$e),_e.emit("edgeAttributesUpdated",{type:"merge",key:Gt.key,attributes:Gt.attributes,data:$e})),Gt.key):Gt.key;$e=$e||{},at&&Tt&&($e=Tt($e));var zr={key:null,undirected:L,source:ge,target:Pe,attributes:$e};if(ve&&(Z=_e._edgeKeyGenerator(zr)),_e._edges.has(Z=""+Z))throw new de("Graph.".concat(Te,': the "').concat(Z,'" edge already exists in the graph.'));return Qt||(Qt=Ca(_e,ge,{}),ge===Pe&&(bn=Qt)),bn||(bn=Ca(_e,Pe,{})),Bt=new Ye(L,Z,ve,Qt,bn,$e),_e._edges.set(Z,Bt),ge===Pe?L?(Qt.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(Qt.directedSelfLoops++,_e._directedSelfLoopCount++):L?(Qt.undirectedDegree++,bn.undirectedDegree++):(Qt.outDegree++,bn.inDegree++),fe(_e,L,Bt,ge,Pe,Qt,bn),L?_e._undirectedSize++:_e._directedSize++,zr.key=Z,_e.emit("edgeAdded",zr),Z}var _e,dn=function(_e){function Te(L){var Z;if(Z=_e.call(this)||this,(L=E({},Jt,L)).edgeKeyGenerator&&"function"!=typeof L.edgeKeyGenerator)throw new Ae("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(L.edgeKeyGenerator,'".'));if("boolean"!=typeof L.multi)throw new Ae("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(L.multi,'".'));if(!as.has(L.type))throw new Ae('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(L.type,'".'));if("boolean"!=typeof L.allowSelfLoops)throw new Ae("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(L.allowSelfLoops,'".'));var ge,Pe="mixed"===L.type?Se:"directed"===L.type?nt:mt;return se(_(Z),"NodeDataClass",Pe),se(_(Z),"_attributes",{}),se(_(Z),"_nodes",new Map),se(_(Z),"_edges",new Map),se(_(Z),"_directedSize",0),se(_(Z),"_undirectedSize",0),se(_(Z),"_directedSelfLoopCount",0),se(_(Z),"_undirectedSelfLoopCount",0),se(_(Z),"_edgeKeyGenerator",L.edgeKeyGenerator||(ge=0,function(){return ge++})),se(_(Z),"_options",L),Za.forEach(function($e){return se(_(Z),$e,Z[$e])}),x(_(Z),"order",function(){return Z._nodes.size}),x(_(Z),"size",function(){return Z._edges.size}),x(_(Z),"directedSize",function(){return Z._directedSize}),x(_(Z),"undirectedSize",function(){return Z._undirectedSize}),x(_(Z),"selfLoopCount",function(){return Z._directedSelfLoopCount+Z._undirectedSelfLoopCount}),x(_(Z),"directedSelfLoopCount",function(){return Z._directedSelfLoopCount}),x(_(Z),"undirectedSelfLoopCount",function(){return Z._undirectedSelfLoopCount}),x(_(Z),"multi",Z._options.multi),x(_(Z),"type",Z._options.type),x(_(Z),"allowSelfLoops",Z._options.allowSelfLoops),x(_(Z),"implementation",function(){return"graphology"}),Z}S(Te,_e);var ve=Te.prototype;return ve.hasNode=function(L){return this._nodes.has(""+L)},ve.hasDirectedEdge=function(L,Z){if("undirected"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+L);return!!Pe&&!Pe.undirected}if(2===arguments.length){Z=""+Z;var $e=this._nodes.get(L=""+L);if(!$e)return!1;var at=$e.out[Z];return!(!at||this.multi&&!at.size)}throw new Ae("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasUndirectedEdge=function(L,Z){if("directed"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+L);return!!Pe&&Pe.undirected}if(2===arguments.length){Z=""+Z;var $e=this._nodes.get(L=""+L);if(!$e)return!1;var at=$e.undirected[Z];return!(!at||this.multi&&!at.size)}throw new Ae("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasEdge=function(L,Z){if(1===arguments.length)return this._edges.has(""+L);if(2===arguments.length){Z=""+Z;var Pe=this._nodes.get(L=""+L);if(!Pe)return!1;var $e=void 0!==Pe.out&&Pe.out[Z];return $e||($e=void 0!==Pe.undirected&&Pe.undirected[Z]),!(!$e||this.multi&&!$e.size)}throw new Ae("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.directedEdge=function(L,Z){if("undirected"!==this.type){if(L=""+L,Z=""+Z,this.multi)throw new de("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ge=this._nodes.get(L);if(!ge)throw new Be('Graph.directedEdge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Z))throw new Be('Graph.directedEdge: could not find the "'.concat(Z,'" target node in the graph.'));var Pe=ge.out&&ge.out[Z]||void 0;return Pe?Pe.key:void 0}},ve.undirectedEdge=function(L,Z){if("directed"!==this.type){if(L=""+L,Z=""+Z,this.multi)throw new de("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ge=this._nodes.get(L);if(!ge)throw new Be('Graph.undirectedEdge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Z))throw new Be('Graph.undirectedEdge: could not find the "'.concat(Z,'" target node in the graph.'));var Pe=ge.undirected&&ge.undirected[Z]||void 0;return Pe?Pe.key:void 0}},ve.edge=function(L,Z){if(this.multi)throw new de("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Z=""+Z;var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.edge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Z))throw new Be('Graph.edge: could not find the "'.concat(Z,'" target node in the graph.'));var Pe=ge.out&&ge.out[Z]||ge.undirected&&ge.undirected[Z]||void 0;if(Pe)return Pe.key},ve.inDegree=function(L){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Z)throw new Ae('Graph.inDegree: Expecting a boolean but got "'.concat(Z,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.inDegree: could not find the "'.concat(L,'" node in the graph.'));return"undirected"===this.type?0:ge.inDegree+(Z?ge.directedSelfLoops:0)},ve.outDegree=function(L){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Z)throw new Ae('Graph.outDegree: Expecting a boolean but got "'.concat(Z,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.outDegree: could not find the "'.concat(L,'" node in the graph.'));return"undirected"===this.type?0:ge.outDegree+(Z?ge.directedSelfLoops:0)},ve.directedDegree=function(L){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Z)throw new Ae('Graph.directedDegree: Expecting a boolean but got "'.concat(Z,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.directedDegree: could not find the "'.concat(L,'" node in the graph.'));if("undirected"===this.type)return 0;var Pe=Z?ge.directedSelfLoops:0;return ge.inDegree+Pe+(ge.outDegree+Pe)},ve.undirectedDegree=function(L){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Z)throw new Ae('Graph.undirectedDegree: Expecting a boolean but got "'.concat(Z,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.undirectedDegree: could not find the "'.concat(L,'" node in the graph.'));return"directed"===this.type?0:ge.undirectedDegree+2*(Z?ge.undirectedSelfLoops:0)},ve.degree=function(L){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Z)throw new Ae('Graph.degree: Expecting a boolean but got "'.concat(Z,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.degree: could not find the "'.concat(L,'" node in the graph.'));var Pe=0,$e=0;return"directed"!==this.type&&(Z&&($e=ge.undirectedSelfLoops),Pe+=ge.undirectedDegree+2*$e),"undirected"!==this.type&&(Z&&($e=ge.directedSelfLoops),Pe+=ge.inDegree+ge.outDegree+2*$e),Pe},ve.source=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.source: could not find the "'.concat(L,'" edge in the graph.'));return Z.source.key},ve.target=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.target: could not find the "'.concat(L,'" edge in the graph.'));return Z.target.key},ve.extremities=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.extremities: could not find the "'.concat(L,'" edge in the graph.'));return[Z.source.key,Z.target.key]},ve.opposite=function(L,Z){L=""+L;var ge=this._edges.get(Z=""+Z);if(!ge)throw new Be('Graph.opposite: could not find the "'.concat(Z,'" edge in the graph.'));var Pe=ge.source.key,$e=ge.target.key;if(L!==Pe&&L!==$e)throw new Be('Graph.opposite: the "'.concat(L,'" node is not attached to the "').concat(Z,'" edge (').concat(Pe,", ").concat($e,")."));return L===Pe?$e:Pe},ve.hasExtremity=function(L,Z){Z=""+Z;var ge=this._edges.get(L=""+L);if(!ge)throw new Be('Graph.hasExtremity: could not find the "'.concat(L,'" edge in the graph.'));return ge.source.key===Z||ge.target.key===Z},ve.isUndirected=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.isUndirected: could not find the "'.concat(L,'" edge in the graph.'));return Z.undirected},ve.isDirected=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.isDirected: could not find the "'.concat(L,'" edge in the graph.'));return!Z.undirected},ve.isSelfLoop=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.isSelfLoop: could not find the "'.concat(L,'" edge in the graph.'));return Z.source===Z.target},ve.hasGeneratedKey=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.hasGeneratedKey: could not find the "'.concat(L,'" edge in the graph.'));return Z.generatedKey},ve.addNode=function(L,Z){return function(ge,Pe,$e){if($e&&!N($e))throw new Ae('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},ge._nodes.has(Pe=""+Pe))throw new de('Graph.addNode: the "'.concat(Pe,'" node already exist in the graph.'));var at=new ge.NodeDataClass(Pe,$e);return ge._nodes.set(Pe,at),ge.emit("nodeAdded",{key:Pe,attributes:$e}),at}(this,L,Z).key},ve.mergeNode=function(L,Z){if(Z&&!N(Z))throw new Ae('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Z,'"'));Z=Z||{};var ge=this._nodes.get(L=""+L);return ge?(Z&&(E(ge.attributes,Z),this.emit("nodeAttributesUpdated",{type:"merge",key:L,attributes:ge.attributes,data:Z})),L):(ge=new this.NodeDataClass(L,Z),this._nodes.set(L,ge),this.emit("nodeAdded",{key:L,attributes:Z}),L)},ve.updateNode=function(L,Z){if(Z&&"function"!=typeof Z)throw new Ae('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Z,'"'));var ge=this._nodes.get(L=""+L);if(ge)return Z&&(ge.attributes=Z(ge.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:L,attributes:ge.attributes})),L;var $e=Z?Z({}):{};return ge=new this.NodeDataClass(L,$e),this._nodes.set(L,ge),this.emit("nodeAdded",{key:L,attributes:$e}),L},ve.dropNode=function(L){var Z=this,ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.dropNode: could not find the "'.concat(L,'" node in the graph.'));this.forEachEdge(L,function(Pe){Z.dropEdge(Pe)}),this._nodes.delete(L),this.emit("nodeDropped",{key:L,attributes:ge.attributes})},ve.dropEdge=function(L){var Z;if(arguments.length>1){var ge=""+arguments[0],Pe=""+arguments[1];if(!(Z=F(this,ge,Pe,this.type)))throw new Be('Graph.dropEdge: could not find the "'.concat(ge,'" -> "').concat(Pe,'" edge in the graph.'))}else if(!(Z=this._edges.get(L=""+L)))throw new Be('Graph.dropEdge: could not find the "'.concat(L,'" edge in the graph.'));this._edges.delete(Z.key);var at=Z.source,Tt=Z.target,Bt=Z.attributes,Gt=Z.undirected;return at===Tt?Gt?(at.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(at.directedSelfLoops--,this._directedSelfLoopCount--):Gt?(at.undirectedDegree--,Tt.undirectedDegree--):(at.outDegree--,Tt.inDegree--),function R(_e,Te,ve){var L=_e.multi,Z=ve.source,ge=ve.target,Pe=Z.key,$e=ge.key,at=Z[Te?"undirected":"out"],Tt=Te?"undirected":"in";if($e in at)if(L){var Bt=at[$e];1===Bt.size?(delete at[$e],delete ge[Tt][Pe]):Bt.delete(ve)}else delete at[$e];L||delete ge[Tt][Pe]}(this,Gt,Z),Gt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:L,attributes:Bt,source:at.key,target:Tt.key,undirected:Gt}),this},ve.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ve.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ve.getAttribute=function(L){return this._attributes[L]},ve.getAttributes=function(){return this._attributes},ve.hasAttribute=function(L){return this._attributes.hasOwnProperty(L)},ve.setAttribute=function(L,Z){return this._attributes[L]=Z,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:L}),this},ve.updateAttribute=function(L,Z){if("function"!=typeof Z)throw new Ae("Graph.updateAttribute: updater should be a function.");return this._attributes[L]=Z(this._attributes[L]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:L}),this},ve.removeAttribute=function(L){return delete this._attributes[L],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:L}),this},ve.replaceAttributes=function(L){if(!N(L))throw new Ae("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=L,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ve.mergeAttributes=function(L){if(!N(L))throw new Ae("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,L),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:L}),this},ve.getNodeAttribute=function(L,Z){var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.getNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return ge.attributes[Z]},ve.getNodeAttributes=function(L){var Z=this._nodes.get(L=""+L);if(!Z)throw new Be('Graph.getNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));return Z.attributes},ve.hasNodeAttribute=function(L,Z){var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.hasNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return ge.attributes.hasOwnProperty(Z)},ve.setNodeAttribute=function(L,Z,ge){var Pe=this._nodes.get(L=""+L);if(!Pe)throw new Be('Graph.setNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));if(arguments.length<3)throw new Ae("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Pe.attributes[Z]=ge,this.emit("nodeAttributesUpdated",{key:L,type:"set",attributes:Pe.attributes,name:Z}),this},ve.updateNodeAttribute=function(L,Z,ge){var Pe=this._nodes.get(L=""+L);if(!Pe)throw new Be('Graph.updateNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));if(arguments.length<3)throw new Ae("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ge)throw new Ae("Graph.updateAttribute: updater should be a function.");var $e=Pe.attributes,at=ge($e[Z]);return $e[Z]=at,this.emit("nodeAttributesUpdated",{key:L,type:"set",attributes:Pe.attributes,name:Z}),this},ve.removeNodeAttribute=function(L,Z){var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.hasNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return delete ge.attributes[Z],this.emit("nodeAttributesUpdated",{key:L,type:"remove",attributes:ge.attributes,name:Z}),this},ve.replaceNodeAttributes=function(L,Z){var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.replaceNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));if(!N(Z))throw new Ae("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ge.attributes=Z,this.emit("nodeAttributesUpdated",{key:L,type:"replace",attributes:ge.attributes}),this},ve.mergeNodeAttributes=function(L,Z){var ge=this._nodes.get(L=""+L);if(!ge)throw new Be('Graph.mergeNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));if(!N(Z))throw new Ae("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return E(ge.attributes,Z),this.emit("nodeAttributesUpdated",{key:L,type:"merge",attributes:ge.attributes,data:Z}),this},ve.updateEachNodeAttributes=function(L,Z){if("function"!=typeof L)throw new Ae("Graph.updateEachNodeAttributes: expecting an updater function.");if(Z&&!B(Z))throw new Ae("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Pe,$e=this._nodes.values();!0!==(ge=$e.next()).done;)(Pe=ge.value).attributes=L(Pe.key,Pe.attributes);this.emit("eachNodeAttributesUpdated",{hints:Z||null})},ve.updateEachEdgeAttributes=function(L,Z){if("function"!=typeof L)throw new Ae("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Z&&!B(Z))throw new Ae("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Pe,$e=this._edges.values();!0!==(ge=$e.next()).done;)(Pe=ge.value).attributes=L(Pe.key,Pe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:Z||null})},ve.forEach=function(L){if("function"!=typeof L)throw new Ae("Graph.forEach: expecting a callback.");this.multi?Ke(!1,this,L):ze(!1,this,L)},ve.forEachUntil=function(L){if("function"!=typeof L)throw new Ae("Graph.forEach: expecting a callback.");this.multi?Ke(!0,this,L):ze(!0,this,L)},ve.adjacency=function(){return this.multi?(at=(L=this)._nodes.values(),Tt=L.type,Bt="outer",Gt=null,new Je(function Qt(){var bn;if("outer"===Bt)return!0===(bn=at.next()).done?bn:(Z=bn.value,Bt="directed",Qt());if("directed"===Bt)return"undirected"===Tt?(Bt="undirected",Qt()):(Pe=Z.out,ge=Object.keys(Z.out),$e=0,Bt="inner-directed",Qt());if("undirected"===Bt){if("directed"===Tt)return Bt="outer",Qt();Pe=Z.undirected,ge=Object.keys(Z.undirected),$e=0,Bt="inner-undirected"}if(!Gt&&$e>=ge.length)return Bt="inner-undirected"===Bt?"outer":"undirected",Qt();if(!Gt){var On=ge[$e++];return Gt=Pe[On].values(),Qt()}if((bn=Gt.next()).done)return Gt=null,Qt();var zr=bn.value,co=zr.target;return"inner-undirected"===Bt&&co.key===Z.key&&(co=zr.source),{done:!1,value:[Z.key,co.key,Z.attributes,co.attributes,zr.key,zr.attributes]}})):(oi=(Qt=this)._nodes.values(),Ma=Qt.type,ei="outer",new Je(function Es(){var Qc;if("outer"===ei)return!0===(Qc=oi.next()).done?Qc:(bn=Qc.value,ei="directed",Es());if("directed"===ei)return"undirected"===Ma?(ei="undirected",Es()):(zr=bn.out,On=Object.keys(bn.out),co=0,ei="inner-directed",Es());if("undirected"===ei){if("directed"===Ma)return ei="outer",Es();zr=bn.undirected,On=Object.keys(bn.undirected),co=0,ei="inner-undirected"}if(co>=On.length)return ei="inner-undirected"===ei?"outer":"undirected",Es();var eu=On[co++],Qn=zr[eu],fn=Qn.target;return"inner-undirected"===ei&&fn.key===bn.key&&(fn=Qn.source),{done:!1,value:[bn.key,fn.key,bn.attributes,fn.attributes,Qn.key,Qn.attributes]}}));var Qt,bn,On,zr,co,oi,Ma,ei,L,Z,ge,Pe,$e,at,Tt,Bt,Gt},ve.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ce(this._nodes.keys(),this._nodes.size)},ve.forEachNode=function(L){if("function"!=typeof L)throw new Ae("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(Z,ge){L(ge,Z.attributes)})},ve.forEachNodeUntil=function(L){if("function"!=typeof L)throw new Ae("Graph.forEachNode: expecting a callback.");for(var Z,ge,Pe=this._nodes.values();!0!==(Z=Pe.next())&&!L((ge=Z.value).key,ge.attributes););},ve.nodeEntries=function(){var L=this._nodes.values();return new Je(function(){var Z=L.next();if(Z.done)return Z;var ge=Z.value;return{value:[ge.key,ge.attributes],done:!1}})},ve.exportNode=function(L){var Z=this._nodes.get(L=""+L);if(!Z)throw new Be('Graph.exportNode: could not find the "'.concat(L,'" node in the graph.'));return zt(L,Z)},ve.exportEdge=function(L){var Z=this._edges.get(L=""+L);if(!Z)throw new Be('Graph.exportEdge: could not find the "'.concat(L,'" edge in the graph.'));return At(L,Z)},ve.export=function(){var L=new Array(this._nodes.size),Z=0;this._nodes.forEach(function(Pe,$e){L[Z++]=zt($e,Pe)});var ge=new Array(this._edges.size);return Z=0,this._edges.forEach(function(Pe,$e){ge[Z++]=At($e,Pe)}),{attributes:this.getAttributes(),nodes:L,edges:ge,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ve.importNode=function(L){var Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function rn(_e){return N(_e)?"key"in _e?!("attributes"in _e)||N(_e.attributes)&&null!==_e.attributes?null:"invalid-attributes":"no-key":"not-object"}(L);if(ge){if("not-object"===ge)throw new Ae('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ge)throw new Ae("Graph.importNode: no key provided.");if("invalid-attributes"===ge)throw new Ae("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Pe=L.key,$e=L.attributes,at=void 0===$e?{}:$e;return Z?this.mergeNode(Pe,at):this.addNode(Pe,at),this},ve.importEdge=function(L){var Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function cr(_e){return N(_e)?"source"in _e?"target"in _e?!("attributes"in _e)||N(_e.attributes)&&null!==_e.attributes?"undirected"in _e&&"boolean"!=typeof _e.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(L);if(ge){if("not-object"===ge)throw new Ae('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ge)throw new Ae("Graph.importEdge: missing souce.");if("no-target"===ge)throw new Ae("Graph.importEdge: missing target.");if("invalid-attributes"===ge)throw new Ae("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ge)throw new Ae("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Pe=L.source,$e=L.target,at=L.attributes,Tt=void 0===at?{}:at,Bt=L.undirected,Gt=void 0!==Bt&&Bt;return"key"in L?(Z?Gt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Gt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,L.key,Pe,$e,Tt):(Z?Gt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Gt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Pe,$e,Tt),this},ve.import=function(L){var Z,ge,Pe,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function W(_e){return null!==_e&&"object"===me(_e)&&"function"==typeof _e.addUndirectedEdgeWithKey&&"function"==typeof _e.dropNode}(L))return this.import(L.export(),$e),this;if(!N(L))throw new Ae("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(L.attributes){if(!N(L.attributes))throw new Ae("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(L.attributes):this.replaceAttributes(L.attributes)}if(L.nodes){if(Pe=L.nodes,!Array.isArray(Pe))throw new Ae("Graph.import: invalid nodes. Expecting an array.");for(Z=0,ge=Pe.length;Z<ge;Z++)this.importNode(Pe[Z],$e)}if(L.edges){if(Pe=L.edges,!Array.isArray(Pe))throw new Ae("Graph.import: invalid edges. Expecting an array.");for(Z=0,ge=Pe.length;Z<ge;Z++)this.importEdge(Pe[Z],$e)}return this},ve.nullCopy=function(L){return new Te(E({},this._options,L))},ve.emptyCopy=function(L){var Z=this.nullCopy(L);return this._nodes.forEach(function(ge,Pe){var $e=E({},ge.attributes);ge=new Z.NodeDataClass(Pe,$e),Z._nodes.set(Pe,ge)}),Z},ve.copy=function(){var L=new Te(this._options);return L.import(this),L},ve.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(L){return L.upgradeToMixed()}),this._options.type="mixed",x(this,"type",this._options.type),se(this,"NodeDataClass",Se)),this},ve.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,x(this,"multi",!0),(L=this)._nodes.forEach(function(Z,ge){if(Z.out)for(var Pe in Z.out){var $e=new Set;$e.add(Z.out[Pe]),Z.out[Pe]=$e,L._nodes.get(Pe).in[ge]=$e}if(Z.undirected)for(var at in Z.undirected)if(!(at>ge)){var Tt=new Set;Tt.add(Z.undirected[at]),Z.undirected[at]=Tt,L._nodes.get(at).undirected[ge]=Tt}})),this;var L},ve.clearIndex=function(){return this._nodes.forEach(function(L){void 0!==L.in&&(L.in={},L.out={}),void 0!==L.undirected&&(L.undirected={})}),this},ve.toJSON=function(){return this.export()},ve.toString=function(){return"[object Graph]"},ve.inspect=function(){var L=this,Z={};this._nodes.forEach(function(Tt,Bt){Z[Bt]=Tt.attributes});var ge={},Pe={};this._edges.forEach(function(Tt,Bt){var Gt=Tt.undirected?"--":"->",Qt="",bn="(".concat(Tt.source.key,")").concat(Gt,"(").concat(Tt.target.key,")");Tt.generatedKey?L.multi&&(void 0===Pe[bn]?Pe[bn]=0:Pe[bn]++,Qt+="".concat(Pe[bn],". ")):Qt+="[".concat(Bt,"]: "),ge[Qt+=bn]=Tt.attributes});var $e={};for(var at in this)this.hasOwnProperty(at)&&!Za.has(at)&&"function"!=typeof this[at]&&($e[at]=this[at]);return $e.attributes=this._attributes,$e.nodes=Z,$e.edges=ge,se($e,"constructor",this.constructor),$e},Te}($.exports.EventEmitter);typeof Symbol<"u"&&(dn.prototype[Symbol.for("nodejs.util.inspect.custom")]=dn.prototype.inspect),[{name:function(_e){return"".concat(_e,"Edge")},generateKey:!0},{name:function(_e){return"".concat(_e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(_e){return"".concat(_e,"EdgeWithKey")}},{name:function(_e){return"".concat(_e,"DirectedEdgeWithKey")},type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(_e){["add","merge","update"].forEach(function(Te){var ve=_e.name(Te),L="add"===Te?Ji:Ta;dn.prototype[ve]=_e.generateKey?function(Z,ge,Pe){return L(this,ve,!0,"undirected"===(_e.type||this.type),null,Z,ge,Pe,"update"===Te)}:function(Z,ge,Pe,$e){return L(this,ve,!1,"undirected"===(_e.type||this.type),Z,ge,Pe,$e,"update"===Te)}})}),typeof Symbol<"u"&&(dn.prototype[Symbol.iterator]=dn.prototype.adjacency),_e=dn,A.forEach(function(Te){var ve=Te.name,L=Te.attacher;L(_e,ve("Edge"),"mixed"),L(_e,ve("DirectedEdge"),"directed"),L(_e,ve("UndirectedEdge"),"undirected")}),function(_e){He.forEach(function(Te){var L,Z,ge,Pe;ge=(L=Te).type,Pe=L.direction,_e.prototype[Z=L.name]=function($e,at){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(!arguments.length)return function Lt(_e,Te){if(0===_e.size)return[];if("mixed"===Te||Te===_e.type)return"function"==typeof Array.from?Array.from(_e._edges.keys()):Ce(_e._edges.keys(),_e._edges.size);for(var ve,L,ge=new Array("undirected"===Te?_e.undirectedSize:_e.directedSize),Pe="undirected"===Te,$e=_e._edges.values(),at=0;!0!==(ve=$e.next()).done;)(L=ve.value).undirected===Pe&&(ge[at++]=L.key);return ge}(this,ge);if(1===arguments.length){var Tt=this._nodes.get($e=""+$e);if(void 0===Tt)throw new Be("Graph.".concat(Z,': could not find the "').concat($e,'" node in the graph.'));return function Le(_e,Te,ve,L){var Z=[],ge=_e?ue:Xe;return"undirected"!==Te&&("out"!==ve&&ge(Z,L.in),"in"!==ve&&ge(Z,L.out),!ve&&L.directedSelfLoops>0&&Z.splice(Z.lastIndexOf(L.key),1)),"directed"!==Te&&ge(Z,L.undirected),Z}(this.multi,"mixed"===ge?this.type:ge,Pe,Tt)}if(2===arguments.length){at=""+at;var Bt=this._nodes.get($e=""+$e);if(!Bt)throw new Be("Graph.".concat(Z,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(at))throw new Be("Graph.".concat(Z,':  could not find the "').concat(at,'" target node in the graph.'));return function nn(_e,Te,ve,L,Z){var ge=Te?Ee:We,Pe=[];return"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&ge(Pe,L.in,Z),void 0!==L.out&&"in"!==ve&&ge(Pe,L.out,Z),!ve&&L.directedSelfLoops>0&&Pe.splice(Pe.lastIndexOf(L.key),1)),"directed"!==_e&&void 0!==L.undirected&&ge(Pe,L.undirected,Z),Pe}(ge,this.multi,Pe,Bt,at)}throw new Ae("Graph.".concat(Z,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ve,L){var Z=L.name,ge=L.type,Pe=L.direction,$e="forEach"+Z[0].toUpperCase()+Z.slice(1,-1);ve.prototype[$e]=function(at,Tt,Bt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function pe(_e,Te,ve){if(0!==_e.size)for(var L,Z,ge="mixed"!==Te&&Te!==_e.type,Pe="undirected"===Te,$e=_e._edges.values();!0!==(L=$e.next()).done;)if(Z=L.value,!ge||Z.undirected===Pe){var Gt=Z.source,Qt=Z.target;ve(Z.key,Z.attributes,Gt.key,Qt.key,Gt.attributes,Qt.attributes,Z.undirected,Z.generatedKey)}}(this,ge,Bt=at);if(2===arguments.length){Bt=Tt;var Gt=this._nodes.get(at=""+at);if(void 0===Gt)throw new Be("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function tt(_e,Te,ve,L,Z){var ge=_e?U:te;"undirected"!==Te&&("out"!==ve&&ge(L.in,Z),"in"!==ve&&ge(L.out,Z,ve?null:L.key)),"directed"!==Te&&ge(L.undirected,Z)}(this.multi,"mixed"===ge?this.type:ge,Pe,Gt,Bt)}if(3===arguments.length){Tt=""+Tt;var Qt=this._nodes.get(at=""+at);if(!Qt)throw new Be("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Fn(_e,Te,ve,L,Z,ge){var Pe=Te?Qe:Ue;"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&Pe(L.in,Z,ge),L.key!==Z&&void 0!==L.out&&"in"!==ve&&Pe(L.out,Z,ge)),"directed"!==_e&&void 0!==L.undirected&&Pe(L.undirected,Z,ge)}(ge,this.multi,Pe,Qt,Tt,Bt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Te),function(ve,L){var Z=L.name,ge=L.type,Pe=L.direction,$e="forEach"+Z[0].toUpperCase()+Z.slice(1,-1)+"Until";ve.prototype[$e]=function(at,Tt,Bt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function H(_e,Te,ve){if(0!==_e.size)for(var L,Z,ge="mixed"!==Te&&Te!==_e.type,Pe="undirected"===Te,$e=_e._edges.values();!0!==(L=$e.next()).done;)if(Z=L.value,!ge||Z.undirected===Pe){var Gt=Z.source,Qt=Z.target;if(ve(Z.key,Z.attributes,Gt.key,Qt.key,Gt.attributes,Qt.attributes,Z.undirected,Z.generatedKey))break}}(this,ge,Bt=at);if(2===arguments.length){Bt=Tt;var Gt=this._nodes.get(at=""+at);if(void 0===Gt)throw new Be("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function lt(_e,Te,ve,L,Z){var ge=_e?O:I;"undirected"!==Te&&("out"!==ve&&ge(L.in,Z)||"in"!==ve&&ge(L.out,Z,ve?null:L.key))||"directed"===Te||ge(L.undirected,Z)}(this.multi,"mixed"===ge?this.type:ge,Pe,Gt,Bt)}if(3===arguments.length){Tt=""+Tt;var Qt=this._nodes.get(at=""+at);if(!Qt)throw new Be("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Hn(_e,Te,ve,L,Z,ge){var Pe=Te?Rt:vt;"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&Pe(L.in,Z,ge)||L.key!==Z&&void 0!==L.out&&"in"!==ve&&Pe(L.out,Z,ge,ve?null:L.key))||"directed"===_e||void 0===L.undirected||Pe(L.undirected,Z,ge)}(ge,this.multi,Pe,Qt,Tt,Bt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Te),function(ve,L){var ge=L.type,Pe=L.direction,$e=L.name.slice(0,-1)+"Entries";ve.prototype[$e]=function(at,Tt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return Je.empty();if(!arguments.length)return function ne(_e,Te){if(0===_e.size)return Je.empty();var ve="mixed"!==Te&&Te!==_e.type,L="undirected"===Te,Z=_e._edges.values();return new Je(function(){for(var ge,Pe;;){if((ge=Z.next()).done)return ge;if(Pe=ge.value,!ve||Pe.undirected===L)break}return{value:[Pe.key,Pe.attributes,Pe.source.key,Pe.target.key,Pe.source.attributes,Pe.target.attributes],done:!1}})}(this,ge);if(1===arguments.length){var Bt=this._nodes.get(at=""+at);if(!Bt)throw new Be("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function xt(_e,Te,ve){var L=Je.empty();return"undirected"!==_e&&("out"!==Te&&void 0!==ve.in&&(L=J(L,he(ve.in))),"in"!==Te&&void 0!==ve.out&&(L=J(L,he(ve.out,Te?null:ve.key)))),"directed"!==_e&&void 0!==ve.undirected&&(L=J(L,he(ve.undirected))),L}(ge,Pe,Bt)}if(2===arguments.length){Tt=""+Tt;var Gt=this._nodes.get(at=""+at);if(!Gt)throw new Be("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function An(_e,Te,ve,L){var Z=Je.empty();return"undirected"!==_e&&(void 0!==ve.in&&"out"!==Te&&L in ve.in&&(Z=J(Z,wt(ve.in,L))),void 0!==ve.out&&"in"!==Te&&L in ve.out&&(Z=J(Z,wt(ve.out,L)))),"directed"!==_e&&void 0!==ve.undirected&&L in ve.undirected&&(Z=J(Z,wt(ve.undirected,L))),Z}(ge,Pe,Gt,Tt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(_e,Te)})}(dn),function(_e){vn.forEach(function(Te){var L,Z,ge,Pe;ge=(L=Te).type,Pe=L.direction,_e.prototype[Z=L.name]=function($e){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(2===arguments.length){var at=""+arguments[0],Tt=""+arguments[1];if(!this._nodes.has(at))throw new Be("Graph.".concat(Z,': could not find the "').concat(at,'" node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat(Z,': could not find the "').concat(Tt,'" node in the graph.'));return function rc(_e,Te,ve,L,Z){var ge=_e._nodes.get(L);if("undirected"!==Te){if("out"!==ve&&void 0!==ge.in)for(var Pe in ge.in)if(Pe===Z)return!0;if("in"!==ve&&void 0!==ge.out)for(var $e in ge.out)if($e===Z)return!0}if("directed"!==Te&&void 0!==ge.undirected)for(var at in ge.undirected)if(at===Z)return!0;return!1}(this,ge,Pe,at,Tt)}if(1===arguments.length){var Bt=this._nodes.get($e=""+$e);if(void 0===Bt)throw new Be("Graph.".concat(Z,': could not find the "').concat($e,'" node in the graph.'));return function ta(_e,Te,ve){if("mixed"!==_e){if("undirected"===_e)return Object.keys(ve.undirected);if("string"==typeof Te)return Object.keys(ve[Te])}var L=new Set;return"undirected"!==_e&&("out"!==Te&&Ni(L,ve.in),"in"!==Te&&Ni(L,ve.out)),"directed"!==_e&&Ni(L,ve.undirected),Ce(L.values(),L.size)}("mixed"===ge?this.type:ge,Pe,Bt)}throw new Ae("Graph.".concat(Z,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Ka(_e,Te){var ve=Te.name,L=Te.type,Z=Te.direction,ge="forEach"+ve[0].toUpperCase()+ve.slice(1,-1);_e.prototype[ge]=function(Pe,$e){if("mixed"===L||"mixed"===this.type||L===this.type){var at=this._nodes.get(Pe=""+Pe);if(void 0===at)throw new Be("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Bt,Gt,Qt){if("mixed"!==Tt){if("undirected"===Tt)return lr(Gt,Gt.undirected,Qt);if("string"==typeof Bt)return lr(Gt,Gt[Bt],Qt)}var bn=new Set;"undirected"!==Tt&&("out"!==Bt&&Fs(bn,Gt,Gt.in,Qt),"in"!==Bt&&Fs(bn,Gt,Gt.out,Qt)),"directed"!==Tt&&Fs(bn,Gt,Gt.undirected,Qt)}("mixed"===L?this.type:L,Z,at,$e)}}}(_e,Te),function Sl(_e,Te){var ve=Te.name,L=Te.type,Z=Te.direction,ge="forEach"+ve[0].toUpperCase()+ve.slice(1,-1)+"Until";_e.prototype[ge]=function(Pe,$e){if("mixed"===L||"mixed"===this.type||L===this.type){var at=this._nodes.get(Pe=""+Pe);if(void 0===at)throw new Be("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Bt,Gt,Qt){if("mixed"!==Tt){if("undirected"===Tt)return ao(Gt,Gt.undirected,Qt);if("string"==typeof Bt)return ao(Gt,Gt[Bt],Qt)}var bn=new Set;"undirected"!==Tt&&("out"!==Bt&&Gi(bn,Gt,Gt.in,Qt)||"in"!==Bt&&Gi(bn,Gt,Gt.out,Qt))||"directed"===Tt||Gi(bn,Gt,Gt.undirected,Qt)}("mixed"===L?this.type:L,Z,at,$e)}}}(_e,Te),function Ja(_e,Te){var L=Te.type,Z=Te.direction,ge=Te.name.slice(0,-1)+"Entries";_e.prototype[ge]=function(Pe){if("mixed"!==L&&"mixed"!==this.type&&L!==this.type)return Je.empty();var $e=this._nodes.get(Pe=""+Pe);if(void 0===$e)throw new Be("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));return function(at,Tt,Bt){if("mixed"!==at){if("undirected"===at)return Lr(Bt,Bt.undirected);if("string"==typeof Tt)return Lr(Bt,Bt[Tt])}var Gt=Je.empty(),Qt=new Set;return"undirected"!==at&&("out"!==Tt&&(Gt=J(Gt,lo(Qt,Bt,Bt.in))),"in"!==Tt&&(Gt=J(Gt,lo(Qt,Bt,Bt.out)))),"directed"!==at&&(Gt=J(Gt,lo(Qt,Bt,Bt.undirected))),Gt}("mixed"===L?this.type:L,Z,$e)}}(_e,Te)})}(dn);var Zn=function(_e){function Te(ve){var L=E({type:"directed"},ve);if("multi"in L&&!1!==L.multi)throw new Ae("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==L.type)throw new Ae('DirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(dn),Bs=function(_e){function Te(ve){var L=E({type:"undirected"},ve);if("multi"in L&&!1!==L.multi)throw new Ae("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==L.type)throw new Ae('UndirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(dn),Xt=function(_e){function Te(ve){var L=E({multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return _e.call(this,L)||this}return S(Te,_e),Te}(dn),$s=function(_e){function Te(ve){var L=E({type:"directed",multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==L.type)throw new Ae('MultiDirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(dn),ls=function(_e){function Te(ve){var L=E({type:"undirected",multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==L.type)throw new Ae('MultiUndirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(dn);function St(_e){_e.from=function(Te,ve){var L=E({},Te.options,ve),Z=new _e(L);return Z.import(Te),Z}}return St(dn),St(Zn),St(Bs),St(Xt),St($s),St(ls),dn.Graph=dn,dn.DirectedGraph=Zn,dn.UndirectedGraph=Bs,dn.MultiGraph=Xt,dn.MultiDirectedGraph=$s,dn.MultiUndirectedGraph=ls,dn.InvalidArgumentsGraphError=Ae,dn.NotFoundGraphError=Be,dn.UsageGraphError=de,dn}()},4511:(je,me,S)=>{var Q;!function(C,Y,z,X){"use strict";var $,_=["","webkit","Moz","MS","ms","o"],E=Y.createElement("div"),F="function",W=Math.round,N=Math.abs,D=Date.now;function se(De,Ge,rt){return setTimeout(k(De,rt),Ge)}function x(De,Ge,rt){return!!Array.isArray(De)&&(B(De,rt[Ge],rt),!0)}function B(De,Ge,rt){var _t;if(De)if(De.forEach)De.forEach(Ge,rt);else if(De.length!==X)for(_t=0;_t<De.length;)Ge.call(rt,De[_t],_t,De),_t++;else for(_t in De)De.hasOwnProperty(_t)&&Ge.call(rt,De[_t],_t,De)}function oe(De,Ge,rt){var _t="DEPRECATED METHOD: "+Ge+"\n"+rt+" AT \n";return function(){var Vt=new Error("get-stack-trace"),en=Vt&&Vt.stack?Vt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Kn=C.console&&(C.console.warn||C.console.log);return Kn&&Kn.call(C.console,_t,en),De.apply(this,arguments)}}$="function"!=typeof Object.assign?function(Ge){if(Ge===X||null===Ge)throw new TypeError("Cannot convert undefined or null to object");for(var rt=Object(Ge),_t=1;_t<arguments.length;_t++){var Vt=arguments[_t];if(Vt!==X&&null!==Vt)for(var en in Vt)Vt.hasOwnProperty(en)&&(rt[en]=Vt[en])}return rt}:Object.assign;var G=oe(function(Ge,rt,_t){for(var Vt=Object.keys(rt),en=0;en<Vt.length;)(!_t||_t&&Ge[Vt[en]]===X)&&(Ge[Vt[en]]=rt[Vt[en]]),en++;return Ge},"extend","Use `assign`."),ee=oe(function(Ge,rt){return G(Ge,rt,!0)},"merge","Use `assign`.");function q(De,Ge,rt){var Vt,_t=Ge.prototype;(Vt=De.prototype=Object.create(_t)).constructor=De,Vt._super=_t,rt&&$(Vt,rt)}function k(De,Ge){return function(){return De.apply(Ge,arguments)}}function b(De,Ge){return typeof De==F?De.apply(Ge&&Ge[0]||X,Ge):De}function M(De,Ge){return De===X?Ge:De}function T(De,Ge,rt){B(ae(Ge),function(_t){De.addEventListener(_t,rt,!1)})}function ce(De,Ge,rt){B(ae(Ge),function(_t){De.removeEventListener(_t,rt,!1)})}function j(De,Ge){for(;De;){if(De==Ge)return!0;De=De.parentNode}return!1}function Me(De,Ge){return De.indexOf(Ge)>-1}function ae(De){return De.trim().split(/\s+/g)}function xe(De,Ge,rt){if(De.indexOf&&!rt)return De.indexOf(Ge);for(var _t=0;_t<De.length;){if(rt&&De[_t][rt]==Ge||!rt&&De[_t]===Ge)return _t;_t++}return-1}function Oe(De){return Array.prototype.slice.call(De,0)}function Ve(De,Ge,rt){for(var _t=[],Vt=[],en=0;en<De.length;){var Kn=Ge?De[en][Ge]:De[en];xe(Vt,Kn)<0&&_t.push(De[en]),Vt[en]=Kn,en++}return rt&&(_t=Ge?_t.sort(function(Br,ks){return Br[Ge]>ks[Ge]}):_t.sort()),_t}function Ze(De,Ge){for(var rt,_t,Vt=Ge[0].toUpperCase()+Ge.slice(1),en=0;en<_.length;){if((_t=(rt=_[en])?rt+Vt:Ge)in De)return _t;en++}return X}var Je=1;function ke(De){var Ge=De.ownerDocument||De;return Ge.defaultView||Ge.parentWindow||C}var Be="ontouchstart"in C,de=Ze(C,"PointerEvent")!==X,Se=Be&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",Ye="mouse",R=25,A=1,J=4,He=8,Xe=1,ue=2,te=4,U=8,I=16,O=ue|te,he=U|I,We=O|he,Ee=["x","y"],Ue=["clientX","clientY"];function Qe(De,Ge){var rt=this;this.manager=De,this.callback=Ge,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(_t){b(De.options.enable,[De])&&rt.handler(_t)},this.init()}function Rt(De,Ge,rt){var _t=rt.pointers.length,Vt=rt.changedPointers.length,en=Ge&A&&_t-Vt==0,Kn=Ge&(J|He)&&_t-Vt==0;rt.isFirst=!!en,rt.isFinal=!!Kn,en&&(De.session={}),rt.eventType=Ge,function wt(De,Ge){var rt=De.session,_t=Ge.pointers,Vt=_t.length;rt.firstInput||(rt.firstInput=H(Ge)),Vt>1&&!rt.firstMultiple?rt.firstMultiple=H(Ge):1===Vt&&(rt.firstMultiple=!1);var en=rt.firstInput,Kn=rt.firstMultiple,Fr=Kn?Kn.center:en.center,Br=Ge.center=ne(_t);Ge.timeStamp=D(),Ge.deltaTime=Ge.timeStamp-en.timeStamp,Ge.angle=xt(Fr,Br),Ge.distance=lt(Fr,Br),function Lt(De,Ge){var rt=Ge.center,_t=De.offsetDelta||{},Vt=De.prevDelta||{},en=De.prevInput||{};(Ge.eventType===A||en.eventType===J)&&(Vt=De.prevDelta={x:en.deltaX||0,y:en.deltaY||0},_t=De.offsetDelta={x:rt.x,y:rt.y}),Ge.deltaX=Vt.x+(rt.x-_t.x),Ge.deltaY=Vt.y+(rt.y-_t.y)}(rt,Ge),Ge.offsetDirection=tt(Ge.deltaX,Ge.deltaY);var ks=Le(Ge.deltaTime,Ge.deltaX,Ge.deltaY);Ge.overallVelocityX=ks.x,Ge.overallVelocityY=ks.y,Ge.overallVelocity=N(ks.x)>N(ks.y)?ks.x:ks.y,Ge.scale=Kn?function Fn(De,Ge){return lt(Ge[0],Ge[1],Ue)/lt(De[0],De[1],Ue)}(Kn.pointers,_t):1,Ge.rotation=Kn?function nn(De,Ge){return xt(Ge[1],Ge[0],Ue)+xt(De[1],De[0],Ue)}(Kn.pointers,_t):0,Ge.maxPointers=rt.prevInput?Ge.pointers.length>rt.prevInput.maxPointers?Ge.pointers.length:rt.prevInput.maxPointers:Ge.pointers.length,function pe(De,Ge){var Vt,en,Kn,Fr,rt=De.lastInterval||Ge,_t=Ge.timeStamp-rt.timeStamp;if(Ge.eventType!=He&&(_t>R||rt.velocity===X)){var Br=Ge.deltaX-rt.deltaX,ks=Ge.deltaY-rt.deltaY,na=Le(_t,Br,ks);en=na.x,Kn=na.y,Vt=N(na.x)>N(na.y)?na.x:na.y,Fr=tt(Br,ks),De.lastInterval=Ge}else Vt=rt.velocity,en=rt.velocityX,Kn=rt.velocityY,Fr=rt.direction;Ge.velocity=Vt,Ge.velocityX=en,Ge.velocityY=Kn,Ge.direction=Fr}(rt,Ge);var na=De.element;j(Ge.srcEvent.target,na)&&(na=Ge.srcEvent.target),Ge.target=na}(De,rt),De.emit("hammer.input",rt),De.recognize(rt),De.session.prevInput=rt}function H(De){for(var Ge=[],rt=0;rt<De.pointers.length;)Ge[rt]={clientX:W(De.pointers[rt].clientX),clientY:W(De.pointers[rt].clientY)},rt++;return{timeStamp:D(),pointers:Ge,center:ne(Ge),deltaX:De.deltaX,deltaY:De.deltaY}}function ne(De){var Ge=De.length;if(1===Ge)return{x:W(De[0].clientX),y:W(De[0].clientY)};for(var rt=0,_t=0,Vt=0;Vt<Ge;)rt+=De[Vt].clientX,_t+=De[Vt].clientY,Vt++;return{x:W(rt/Ge),y:W(_t/Ge)}}function Le(De,Ge,rt){return{x:Ge/De||0,y:rt/De||0}}function tt(De,Ge){return De===Ge?Xe:N(De)>=N(Ge)?De<0?ue:te:Ge<0?U:I}function lt(De,Ge,rt){rt||(rt=Ee);var _t=Ge[rt[0]]-De[rt[0]],Vt=Ge[rt[1]]-De[rt[1]];return Math.sqrt(_t*_t+Vt*Vt)}function xt(De,Ge,rt){return rt||(rt=Ee),180*Math.atan2(Ge[rt[1]]-De[rt[1]],Ge[rt[0]]-De[rt[0]])/Math.PI}Qe.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(ke(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ce(this.element,this.evEl,this.domHandler),this.evTarget&&ce(this.target,this.evTarget,this.domHandler),this.evWin&&ce(ke(this.element),this.evWin,this.domHandler)}};var Hn={mousedown:A,mousemove:2,mouseup:J},An="mousedown",vn="mousemove mouseup";function Ni(){this.evEl=An,this.evWin=vn,this.pressed=!1,Qe.apply(this,arguments)}q(Ni,Qe,{handler:function(Ge){var rt=Hn[Ge.type];rt&A&&0===Ge.button&&(this.pressed=!0),2&rt&&1!==Ge.which&&(rt=J),this.pressed&&(rt&J&&(this.pressed=!1),this.callback(this.manager,rt,{pointers:[Ge],changedPointers:[Ge],pointerType:Ye,srcEvent:Ge}))}});var ta={pointerdown:A,pointermove:2,pointerup:J,pointercancel:He,pointerout:He},lr={2:nt,3:"pen",4:Ye,5:"kinect"},Fs="pointerdown",ao="pointermove pointerup pointercancel";function Gi(){this.evEl=Fs,this.evWin=ao,Qe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C.MSPointerEvent&&!C.PointerEvent&&(Fs="MSPointerDown",ao="MSPointerMove MSPointerUp MSPointerCancel"),q(Gi,Qe,{handler:function(Ge){var rt=this.store,_t=!1,Vt=Ge.type.toLowerCase().replace("ms",""),en=ta[Vt],Kn=lr[Ge.pointerType]||Ge.pointerType,Fr=Kn==nt,Br=xe(rt,Ge.pointerId,"pointerId");en&A&&(0===Ge.button||Fr)?Br<0&&(rt.push(Ge),Br=rt.length-1):en&(J|He)&&(_t=!0),!(Br<0)&&(rt[Br]=Ge,this.callback(this.manager,en,{pointers:rt,changedPointers:[Ge],pointerType:Kn,srcEvent:Ge}),_t&&rt.splice(Br,1))}});var Lr={touchstart:A,touchmove:2,touchend:J,touchcancel:He};function Ka(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Qe.apply(this,arguments)}function Sl(De,Ge){var rt=Oe(De.touches),_t=Oe(De.changedTouches);return Ge&(J|He)&&(rt=Ve(rt.concat(_t),"identifier",!0)),[rt,_t]}q(Ka,Qe,{handler:function(Ge){var rt=Lr[Ge.type];if(rt===A&&(this.started=!0),this.started){var _t=Sl.call(this,Ge,rt);rt&(J|He)&&_t[0].length-_t[1].length==0&&(this.started=!1),this.callback(this.manager,rt,{pointers:_t[0],changedPointers:_t[1],pointerType:nt,srcEvent:Ge})}}});var Ja={touchstart:A,touchmove:2,touchend:J,touchcancel:He},ze="touchstart touchmove touchend touchcancel";function Ke(){this.evTarget=ze,this.targetIds={},Qe.apply(this,arguments)}function zt(De,Ge){var rt=Oe(De.touches),_t=this.targetIds;if(Ge&(2|A)&&1===rt.length)return _t[rt[0].identifier]=!0,[rt,rt];var Vt,en,Kn=Oe(De.changedTouches),Fr=[],Br=this.target;if(en=rt.filter(function(ks){return j(ks.target,Br)}),Ge===A)for(Vt=0;Vt<en.length;)_t[en[Vt].identifier]=!0,Vt++;for(Vt=0;Vt<Kn.length;)_t[Kn[Vt].identifier]&&Fr.push(Kn[Vt]),Ge&(J|He)&&delete _t[Kn[Vt].identifier],Vt++;return Fr.length?[Ve(en.concat(Fr),"identifier",!0),Fr]:void 0}q(Ke,Qe,{handler:function(Ge){var rt=Ja[Ge.type],_t=zt.call(this,Ge,rt);_t&&this.callback(this.manager,rt,{pointers:_t[0],changedPointers:_t[1],pointerType:nt,srcEvent:Ge})}});var At=2500;function cr(){Qe.apply(this,arguments);var De=k(this.handler,this);this.touch=new Ke(this.manager,De),this.mouse=new Ni(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function as(De,Ge){De&A?(this.primaryTouch=Ge.changedPointers[0].identifier,Za.call(this,Ge)):De&(J|He)&&Za.call(this,Ge)}function Za(De){var Ge=De.changedPointers[0];if(Ge.identifier===this.primaryTouch){var rt={x:Ge.clientX,y:Ge.clientY};this.lastTouches.push(rt);var _t=this.lastTouches;setTimeout(function(){var en=_t.indexOf(rt);en>-1&&_t.splice(en,1)},At)}}function Jt(De){for(var Ge=De.srcEvent.clientX,rt=De.srcEvent.clientY,_t=0;_t<this.lastTouches.length;_t++){var Vt=this.lastTouches[_t],en=Math.abs(Ge-Vt.x),Kn=Math.abs(rt-Vt.y);if(en<=25&&Kn<=25)return!0}return!1}q(cr,Qe,{handler:function(Ge,rt,_t){var en=_t.pointerType==Ye;if(!(en&&_t.sourceCapabilities&&_t.sourceCapabilities.firesTouchEvents)){if(_t.pointerType==nt)as.call(this,rt,_t);else if(en&&Jt.call(this,_t))return;this.callback(Ge,rt,_t)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ca=Ze(E.style,"touchAction"),Ji=Ca!==X,Ta="compute",Zn="manipulation",Bs="none",Xt="pan-x",$s="pan-y",ls=function Te(){if(!Ji)return!1;var De={},Ge=C.CSS&&C.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(rt){De[rt]=!Ge||C.CSS.supports("touch-action",rt)}),De}();function St(De,Ge){this.manager=De,this.set(Ge)}St.prototype={set:function(De){De==Ta&&(De=this.compute()),Ji&&this.manager.element.style&&ls[De]&&(this.manager.element.style[Ca]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return B(this.manager.recognizers,function(Ge){b(Ge.options.enable,[Ge])&&(De=De.concat(Ge.getTouchAction()))}),function _e(De){if(Me(De,Bs))return Bs;var Ge=Me(De,Xt),rt=Me(De,$s);return Ge&&rt?Bs:Ge||rt?Ge?Xt:$s:Me(De,Zn)?Zn:"auto"}(De.join(" "))},preventDefaults:function(De){var Ge=De.srcEvent,rt=De.offsetDirection;if(!this.manager.session.prevented){var _t=this.actions,Vt=Me(_t,Bs)&&!ls[Bs],en=Me(_t,$s)&&!ls[$s],Kn=Me(_t,Xt)&&!ls[Xt];if(Vt&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return Kn&&en||!(Vt||en&&rt&O||Kn&&rt&he)?void 0:this.preventSrc(Ge)}Ge.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}};var ve=1;function Tt(De){this.options=$({},this.defaults,De||{}),this.id=function Ce(){return Je++}(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=ve,this.simultaneous={},this.requireFail=[]}function Bt(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function Gt(De){return De==I?"down":De==U?"up":De==ue?"left":De==te?"right":""}function Qt(De,Ge){var rt=Ge.manager;return rt?rt.get(De):De}function bn(){Tt.apply(this,arguments)}function On(){bn.apply(this,arguments),this.pX=null,this.pY=null}function zr(){bn.apply(this,arguments)}function co(){Tt.apply(this,arguments),this._timer=null,this._input=null}function oi(){bn.apply(this,arguments)}function Ma(){bn.apply(this,arguments)}function ei(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Es(De,Ge){return(Ge=Ge||{}).recognizers=M(Ge.recognizers,Es.defaults.preset),new Qn(De,Ge)}function Qn(De,Ge){this.options=$({},Es.defaults,Ge||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function vt(De){return new(De.options.inputClass||(de?Gi:Se?Ke:Be?cr:Ni))(De,Rt)}(this),this.touchAction=new St(this,this.options.touchAction),fn(this,!0),B(this.options.recognizers,function(rt){var _t=this.add(new rt[0](rt[1]));rt[2]&&_t.recognizeWith(rt[2]),rt[3]&&_t.requireFailure(rt[3])},this)}function fn(De,Ge){var _t,rt=De.element;rt.style&&(B(De.options.cssProps,function(Vt,en){_t=Ze(rt.style,en),Ge?(De.oldCssProps[_t]=rt.style[_t],rt.style[_t]=Vt):rt.style[_t]=De.oldCssProps[_t]||""}),Ge||(De.oldCssProps={}))}Tt.prototype={defaults:{},set:function(De){return $(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(x(De,"recognizeWith",this))return this;var Ge=this.simultaneous;return Ge[(De=Qt(De,this)).id]||(Ge[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return x(De,"dropRecognizeWith",this)||(De=Qt(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(x(De,"requireFailure",this))return this;var Ge=this.requireFail;return-1===xe(Ge,De=Qt(De,this))&&(Ge.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(x(De,"dropRequireFailure",this))return this;De=Qt(De,this);var Ge=xe(this.requireFail,De);return Ge>-1&&this.requireFail.splice(Ge,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var Ge=this,rt=this.state;function _t(Vt){Ge.manager.emit(Vt,De)}rt<8&&_t(Ge.options.event+Bt(rt)),_t(Ge.options.event),De.additionalEvent&&_t(De.additionalEvent),rt>=8&&_t(Ge.options.event+Bt(rt))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(this.requireFail[De].state&(32|ve)))return!1;De++}return!0},recognize:function(De){var Ge=$({},De);if(!b(this.options.enable,[this,Ge]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ve),this.state=this.process(Ge),30&this.state&&this.tryEmit(Ge)},process:function(De){},getTouchAction:function(){},reset:function(){}},q(bn,Tt,{defaults:{pointers:1},attrTest:function(De){var Ge=this.options.pointers;return 0===Ge||De.pointers.length===Ge},process:function(De){var Ge=this.state,rt=De.eventType,_t=6&Ge,Vt=this.attrTest(De);return _t&&(rt&He||!Vt)?16|Ge:_t||Vt?rt&J?8|Ge:2&Ge?4|Ge:2:32}}),q(On,bn,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var De=this.options.direction,Ge=[];return De&O&&Ge.push($s),De&he&&Ge.push(Xt),Ge},directionTest:function(De){var Ge=this.options,rt=!0,_t=De.distance,Vt=De.direction,en=De.deltaX,Kn=De.deltaY;return Vt&Ge.direction||(Ge.direction&O?(Vt=0===en?Xe:en<0?ue:te,rt=en!=this.pX,_t=Math.abs(De.deltaX)):(Vt=0===Kn?Xe:Kn<0?U:I,rt=Kn!=this.pY,_t=Math.abs(De.deltaY))),De.direction=Vt,rt&&_t>Ge.threshold&&Vt&Ge.direction},attrTest:function(De){return bn.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var Ge=Gt(De.direction);Ge&&(De.additionalEvent=this.options.event+Ge),this._super.emit.call(this,De)}}),q(zr,bn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Bs]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),q(co,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var Ge=this.options,rt=De.pointers.length===Ge.pointers,_t=De.distance<Ge.threshold,Vt=De.deltaTime>Ge.time;if(this._input=De,!_t||!rt||De.eventType&(J|He)&&!Vt)this.reset();else if(De.eventType&A)this.reset(),this._timer=se(function(){this.state=8,this.tryEmit()},Ge.time,this);else if(De.eventType&J)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&De.eventType&J?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=D(),this.manager.emit(this.options.event,this._input)))}}),q(oi,bn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Bs]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),q(Ma,bn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|he,pointers:1},getTouchAction:function(){return On.prototype.getTouchAction.call(this)},attrTest:function(De){var rt,Ge=this.options.direction;return Ge&(O|he)?rt=De.overallVelocity:Ge&O?rt=De.overallVelocityX:Ge&he&&(rt=De.overallVelocityY),this._super.attrTest.call(this,De)&&Ge&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&N(rt)>this.options.velocity&&De.eventType&J},emit:function(De){var Ge=Gt(De.offsetDirection);Ge&&this.manager.emit(this.options.event+Ge,De),this.manager.emit(this.options.event,De)}}),q(ei,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zn]},process:function(De){var Ge=this.options,rt=De.pointers.length===Ge.pointers,_t=De.distance<Ge.threshold,Vt=De.deltaTime<Ge.time;if(this.reset(),De.eventType&A&&0===this.count)return this.failTimeout();if(_t&&Vt&&rt){if(De.eventType!=J)return this.failTimeout();var en=!this.pTime||De.timeStamp-this.pTime<Ge.interval,Kn=!this.pCenter||lt(this.pCenter,De.center)<Ge.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,Kn&&en?this.count+=1:this.count=1,this._input=De,0==this.count%Ge.taps)return this.hasRequireFailures()?(this._timer=se(function(){this.state=8,this.tryEmit()},Ge.interval,this),2):8}return 32},failTimeout:function(){return this._timer=se(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Es.VERSION="2.0.7",Es.defaults={domEvents:!1,touchAction:Ta,enable:!0,inputTarget:null,inputClass:null,preset:[[oi,{enable:!1}],[zr,{enable:!1},["rotate"]],[Ma,{direction:O}],[On,{direction:O},["swipe"]],[ei],[ei,{event:"doubletap",taps:2},["tap"]],[co]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Qn.prototype={set:function(De){return $(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var Ge=this.session;if(!Ge.stopped){this.touchAction.preventDefaults(De);var rt,_t=this.recognizers,Vt=Ge.curRecognizer;(!Vt||Vt&&8&Vt.state)&&(Vt=Ge.curRecognizer=null);for(var en=0;en<_t.length;)rt=_t[en],2===Ge.stopped||Vt&&rt!=Vt&&!rt.canRecognizeWith(Vt)?rt.reset():rt.recognize(De),!Vt&&14&rt.state&&(Vt=Ge.curRecognizer=rt),en++}},get:function(De){if(De instanceof Tt)return De;for(var Ge=this.recognizers,rt=0;rt<Ge.length;rt++)if(Ge[rt].options.event==De)return Ge[rt];return null},add:function(De){if(x(De,"add",this))return this;var Ge=this.get(De.options.event);return Ge&&this.remove(Ge),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(x(De,"remove",this))return this;if(De=this.get(De)){var Ge=this.recognizers,rt=xe(Ge,De);-1!==rt&&(Ge.splice(rt,1),this.touchAction.update())}return this},on:function(De,Ge){if(De!==X&&Ge!==X){var rt=this.handlers;return B(ae(De),function(_t){rt[_t]=rt[_t]||[],rt[_t].push(Ge)}),this}},off:function(De,Ge){if(De!==X){var rt=this.handlers;return B(ae(De),function(_t){Ge?rt[_t]&&rt[_t].splice(xe(rt[_t],Ge),1):delete rt[_t]}),this}},emit:function(De,Ge){this.options.domEvents&&function tu(De,Ge){var rt=Y.createEvent("Event");rt.initEvent(De,!0,!0),rt.gesture=Ge,Ge.target.dispatchEvent(rt)}(De,Ge);var rt=this.handlers[De]&&this.handlers[De].slice();if(rt&&rt.length){Ge.type=De,Ge.preventDefault=function(){Ge.srcEvent.preventDefault()};for(var _t=0;_t<rt.length;)rt[_t](Ge),_t++}},destroy:function(){this.element&&fn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},$(Es,{INPUT_START:A,INPUT_MOVE:2,INPUT_END:J,INPUT_CANCEL:He,STATE_POSSIBLE:ve,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Xe,DIRECTION_LEFT:ue,DIRECTION_RIGHT:te,DIRECTION_UP:U,DIRECTION_DOWN:I,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:he,DIRECTION_ALL:We,Manager:Qn,Input:Qe,TouchAction:St,TouchInput:Ke,MouseInput:Ni,PointerEventInput:Gi,TouchMouseInput:cr,SingleTouchInput:Ka,Recognizer:Tt,AttrRecognizer:bn,Tap:ei,Pan:On,Swipe:Ma,Pinch:zr,Rotate:oi,Press:co,on:T,off:ce,each:B,merge:ee,extend:G,assign:$,inherit:q,bindFn:k,prefixed:Ze}),(typeof C<"u"?C:typeof self<"u"?self:{}).Hammer=Es,(Q=function(){return Es}.call(me,S,me,je))!==X&&(je.exports=Q)}(window,document)},2020:(je,me)=>{me.read=function(S,Q,C,Y,z){var X,_,E=8*z-Y-1,F=(1<<E)-1,W=F>>1,N=-7,D=C?z-1:0,se=C?-1:1,x=S[Q+D];for(D+=se,X=x&(1<<-N)-1,x>>=-N,N+=E;N>0;X=256*X+S[Q+D],D+=se,N-=8);for(_=X&(1<<-N)-1,X>>=-N,N+=Y;N>0;_=256*_+S[Q+D],D+=se,N-=8);if(0===X)X=1-W;else{if(X===F)return _?NaN:1/0*(x?-1:1);_+=Math.pow(2,Y),X-=W}return(x?-1:1)*_*Math.pow(2,X-Y)},me.write=function(S,Q,C,Y,z,X){var _,E,F,W=8*X-z-1,N=(1<<W)-1,D=N>>1,se=23===z?Math.pow(2,-24)-Math.pow(2,-77):0,x=Y?0:X-1,B=Y?1:-1,oe=Q<0||0===Q&&1/Q<0?1:0;for(Q=Math.abs(Q),isNaN(Q)||Q===1/0?(E=isNaN(Q)?1:0,_=N):(_=Math.floor(Math.log(Q)/Math.LN2),Q*(F=Math.pow(2,-_))<1&&(_--,F*=2),(Q+=_+D>=1?se/F:se*Math.pow(2,1-D))*F>=2&&(_++,F/=2),_+D>=N?(E=0,_=N):_+D>=1?(E=(Q*F-1)*Math.pow(2,z),_+=D):(E=Q*Math.pow(2,D-1)*Math.pow(2,z),_=0));z>=8;S[C+x]=255&E,x+=B,E/=256,z-=8);for(_=_<<z|E,W+=z;W>0;S[C+x]=255&_,x+=B,_/=256,W-=8);S[C+x-B]|=128*oe}},1993:je=>{je.exports="function"==typeof Object.create?function(S,Q){Q&&(S.super_=Q,S.prototype=Object.create(Q.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,Q){if(Q){S.super_=Q;var C=function(){};C.prototype=Q.prototype,S.prototype=new C,S.prototype.constructor=S}}},7839:(je,me,S)=>{"use strict";var Q=S(9293).default;const{isArray:C,isObject:Y,isString:z}=S(2831),{asArray:X}=S(9420),{prependBase:_}=S(2051),E=S(262),F=S(6181);function N(se){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:se})}function D({context:se,base:x}){if(!se)return;const B=se["@context"];if(z(B))se["@context"]=_(x,B);else if(C(B))for(let oe=0;oe<B.length;++oe){const $=B[oe];z($)?B[oe]=_(x,$):Y($)&&D({context:{"@context":$},base:x})}else if(Y(B))for(const oe in B)D({context:B[oe],base:x})}je.exports=class{constructor({sharedCache:x}){this.perOpCache=new Map,this.sharedCache=x}resolve({activeCtx:x,context:B,documentLoader:oe,base:$,cycles:G=new Set}){var ee=this;return Q(function*(){B&&Y(B)&&B["@context"]&&(B=B["@context"]),B=X(B);const q=[];for(const k of B){if(z(k)){let T=ee._get(k);T||(T=yield ee._resolveRemoteContext({activeCtx:x,url:k,documentLoader:oe,base:$,cycles:G})),C(T)?q.push(...T):q.push(T);continue}if(null===k){q.push(new F({document:null}));continue}Y(k)||N(B);const b=JSON.stringify(k);let M=ee._get(b);M||(M=new F({document:k}),ee._cacheResolvedContext({key:b,resolved:M,tag:"static"})),q.push(M)}return q})()}_get(x){let B=this.perOpCache.get(x);if(!B){const oe=this.sharedCache.get(x);oe&&(B=oe.get("static"),B&&this.perOpCache.set(x,B))}return B}_cacheResolvedContext({key:x,resolved:B,tag:oe}){if(this.perOpCache.set(x,B),void 0!==oe){let $=this.sharedCache.get(x);$||($=new Map,this.sharedCache.set(x,$)),$.set(oe,B)}return B}_resolveRemoteContext({activeCtx:x,url:B,documentLoader:oe,base:$,cycles:G}){var ee=this;return Q(function*(){B=_($,B);const{context:q,remoteDoc:k}=yield ee._fetchContext({activeCtx:x,url:B,documentLoader:oe,cycles:G});D({context:q,base:$=k.documentUrl||B});const b=yield ee.resolve({activeCtx:x,context:q,documentLoader:oe,base:$,cycles:G});return ee._cacheResolvedContext({key:B,resolved:b,tag:k.tag}),b})()}_fetchContext({activeCtx:x,url:B,documentLoader:oe,cycles:$}){return Q(function*(){if($.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"loading remote context failed":"context overflow",max:10});if($.has(B))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"recursive context inclusion":"context overflow",url:B});let G,ee;$.add(B);try{ee=yield oe(B),G=ee.document||null,z(G)&&(G=JSON.parse(G))}catch(q){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:B,cause:q})}if(!Y(G))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:B});return G="@context"in G?{"@context":G["@context"]}:{"@context":{}},ee.contextUrl&&(C(G["@context"])||(G["@context"]=[G["@context"]]),G["@context"].push(ee.contextUrl)),{context:G,remoteDoc:ee}})()}}},262:je=>{"use strict";je.exports=class extends Error{constructor(S="An unspecified JSON-LD error occurred.",Q="jsonld.Error",C={}){super(S),this.name=Q,this.message=S,this.details=C}}},1328:je=>{"use strict";je.exports=me=>{class S{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(S,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(S.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:S}),S.compact=function(Q,C){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):me.compact(Q,C)},S.expand=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):me.expand(Q)},S.flatten=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):me.flatten(Q)},S}},5426:(je,me,S)=>{"use strict";je.exports=S(1224).NQuads},4808:(je,me,S)=>{"use strict";var Q=S(9293).default;je.exports=class{constructor(){this._requests={}}wrapLoader(Y){const z=this;return z._loader=Y,function(){return z.add.apply(z,arguments)}}add(Y){var z=this;return Q(function*(){let X=z._requests[Y];if(X)return Promise.resolve(X);X=z._requests[Y]=z._loader(Y);try{return yield X}finally{delete z._requests[Y]}})()}}},6181:(je,me,S)=>{"use strict";const Q=S(3052);je.exports=class{constructor({document:z}){this.document=z,this.cache=new Q({max:10})}getProcessed(z){return this.cache.get(z)}setProcessed(z,X){this.cache.set(z,X)}}},3763:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(262),{isArray:Y,isObject:z,isString:X,isUndefined:_}=S(2831),{isList:E,isValue:F,isGraph:W,isSimpleGraph:N,isSubjectReference:D}=S(4209),{expandIri:se,getContextValue:x,isKeyword:B,process:oe,processingMode:$}=S(429),{removeBase:G,prependBase:ee}=S(2051),{REGEX_KEYWORD:q,addValue:k,asArray:b,compareShortestLeast:M}=S(9420),T={};function j(Me,ae,xe){if("@nest"!==se(Me,ae,{vocab:!0},xe))throw new C("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}je.exports=T,T.compact=function(){var Me=Q(function*({activeCtx:ae,activeProperty:xe=null,element:Oe,options:Ve={}}){if(Y(Oe)){let Je=[];for(let Ce=0;Ce<Oe.length;++Ce){const ke=yield T.compact({activeCtx:ae,activeProperty:xe,element:Oe[Ce],options:Ve});null!==ke&&Je.push(ke)}return Ve.compactArrays&&1===Je.length&&0===(x(ae,xe,"@container")||[]).length&&(Je=Je[0]),Je}const Ze=x(ae,xe,"@context");if(_(Ze)||(ae=yield oe({activeCtx:ae,localCtx:Ze,propagate:!0,overrideProtected:!0,options:Ve})),z(Oe)){if(Ve.link&&"@id"in Oe&&Ve.link.hasOwnProperty(Oe["@id"])){const nt=Ve.link[Oe["@id"]];for(let mt=0;mt<nt.length;++mt)if(nt[mt].expanded===Oe)return nt[mt].compacted}if(F(Oe)||D(Oe)){const nt=T.compactValue({activeCtx:ae,activeProperty:xe,value:Oe,options:Ve});return Ve.link&&D(Oe)&&(Ve.link.hasOwnProperty(Oe["@id"])||(Ve.link[Oe["@id"]]=[]),Ve.link[Oe["@id"]].push({expanded:Oe,compacted:nt})),nt}if(E(Oe)&&(x(ae,xe,"@container")||[]).includes("@list"))return T.compact({activeCtx:ae,activeProperty:xe,element:Oe["@list"],options:Ve});const Je="@reverse"===xe,Ce={},ke=ae;!F(Oe)&&!D(Oe)&&(ae=ae.revertToPreviousContext());const Ae=x(ke,xe,"@context");_(Ae)||(ae=yield oe({activeCtx:ae,localCtx:Ae,propagate:!0,overrideProtected:!0,options:Ve})),Ve.link&&"@id"in Oe&&(Ve.link.hasOwnProperty(Oe["@id"])||(Ve.link[Oe["@id"]]=[]),Ve.link[Oe["@id"]].push({expanded:Oe,compacted:Ce}));let Be=Oe["@type"]||[];Be.length>1&&(Be=Array.from(Be).sort());const de=ae;for(const nt of Be){const mt=T.compactIri({activeCtx:de,iri:nt,relativeTo:{vocab:!0}}),Ye=x(ke,mt,"@context");_(Ye)||(ae=yield oe({activeCtx:ae,localCtx:Ye,options:Ve,propagate:!1}))}const Se=Object.keys(Oe).sort();for(const nt of Se){const mt=Oe[nt];if("@id"!==nt)if("@type"!==nt)if("@reverse"!==nt)if("@preserve"!==nt)if("@index"!==nt)if("@graph"!==nt&&"@list"!==nt&&"@included"!==nt&&B(nt)){const Ye=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,Ye,mt)}else{if(!Y(mt))throw new C("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===mt.length){const Ye=T.compactIri({activeCtx:ae,iri:nt,value:mt,relativeTo:{vocab:!0},reverse:Je}),fe=ae.mappings.has(Ye)?ae.mappings.get(Ye)["@nest"]:null;let R=Ce;fe&&(j(ae,fe,Ve),z(Ce[fe])||(Ce[fe]={}),R=Ce[fe]),k(R,Ye,mt,{propertyIsArray:!0})}for(const Ye of mt){const fe=T.compactIri({activeCtx:ae,iri:nt,value:Ye,relativeTo:{vocab:!0},reverse:Je}),R=ae.mappings.has(fe)?ae.mappings.get(fe)["@nest"]:null;let A=Ce;R&&(j(ae,R,Ve),z(Ce[R])||(Ce[R]={}),A=Ce[R]);const ie=x(ae,fe,"@container")||[],J=W(Ye),He=E(Ye);let Xe;He?Xe=Ye["@list"]:J&&(Xe=Ye["@graph"]);let ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:He||J?Xe:Ye,options:Ve});if(He){if(Y(ue)||(ue=[ue]),ie.includes("@list")){k(A,fe,ue,{valueIsArray:!0,allowDuplicate:!0});continue}ue={[T.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ue},"@index"in Ye&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"])}if(J)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&N(Ye))){let te;A.hasOwnProperty(fe)?te=A[fe]:A[fe]=te={};const U=(ie.includes("@id")?Ye["@id"]:Ye["@index"])||T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});k(te,U,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&N(Ye)?(Y(ue)&&ue.length>1&&(ue={"@included":ue}),k(A,fe,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")})):(Y(ue)&&1===ue.length&&Ve.compactArrays&&(ue=ue[0]),ue={[T.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ue},"@id"in Ye&&(ue[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ye["@id"]),"@index"in Ye&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"]),k(A,fe,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let te,U;if(A.hasOwnProperty(fe)?te=A[fe]:A[fe]=te={},ie.includes("@language"))F(ue)&&(ue=ue["@value"]),U=Ye["@language"];else if(ie.includes("@index")){const I=x(ae,fe,"@index")||"@index",O=T.compactIri({activeCtx:ae,iri:I,relativeTo:{vocab:!0}});if("@index"===I)U=Ye["@index"],delete ue[O];else{let he;if([U,...he]=b(ue[I]||[]),X(U))switch(he.length){case 0:delete ue[I];break;case 1:ue[I]=he[0];break;default:ue[I]=he}else U=null}}else if(ie.includes("@id")){const I=T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});U=ue[I],delete ue[I]}else if(ie.includes("@type")){const I=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let O;switch([U,...O]=b(ue[I]||[]),O.length){case 0:delete ue[I];break;case 1:ue[I]=O[0];break;default:ue[I]=O}1===Object.keys(ue).length&&"@id"in Ye&&(ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:{"@id":Ye["@id"]},options:Ve}))}U||(U=T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),k(te,U,ue,{propertyIsArray:ie.includes("@set")})}else{const te=!Ve.compactArrays||ie.includes("@set")||ie.includes("@list")||Y(ue)&&0===ue.length||"@list"===nt||"@graph"===nt;k(A,fe,ue,{propertyIsArray:te})}}}else{if((x(ae,xe,"@container")||[]).includes("@index"))continue;const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,fe,mt)}else{const Ye=yield T.compact({activeCtx:ae,activeProperty:xe,element:mt,options:Ve});Y(Ye)&&0===Ye.length||k(Ce,nt,Ye)}else{const Ye=yield T.compact({activeCtx:ae,activeProperty:"@reverse",element:mt,options:Ve});for(const fe in Ye)if(ae.mappings.has(fe)&&ae.mappings.get(fe).reverse){const R=Ye[fe],ie=(x(ae,fe,"@container")||[]).includes("@set")||!Ve.compactArrays;k(Ce,fe,R,{propertyIsArray:ie}),delete Ye[fe]}if(Object.keys(Ye).length>0){const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,fe,Ye)}}else{let Ye=b(mt).map(J=>T.compactIri({activeCtx:ke,iri:J,relativeTo:{vocab:!0}}));1===Ye.length&&(Ye=Ye[0]);const fe=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),ie=(x(ae,fe,"@container")||[]).includes("@set")&&$(ae,1.1)||Y(Ye)&&0===mt.length;k(Ce,fe,Ye,{propertyIsArray:ie})}else{let Ye=b(mt).map(R=>T.compactIri({activeCtx:ae,iri:R,relativeTo:{vocab:!1},base:Ve.base}));1===Ye.length&&(Ye=Ye[0]),Ce[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ye}}return Ce}return Oe});return function(ae){return Me.apply(this,arguments)}}(),T.compactIri=({activeCtx:Me,iri:ae,value:xe=null,relativeTo:Oe={vocab:!1},reverse:Ve=!1,base:Ze=null})=>{if(null===ae)return ae;Me.isPropertyTermScoped&&Me.previousContext&&(Me=Me.previousContext);const Je=Me.getInverse();if(B(ae)&&ae in Je&&"@none"in Je[ae]&&"@type"in Je[ae]["@none"]&&"@none"in Je[ae]["@none"]["@type"])return Je[ae]["@none"]["@type"]["@none"];if(Oe.vocab&&ae in Je){const de=Me["@language"]||"@none",Se=[];z(xe)&&"@index"in xe&&!("@graph"in xe)&&Se.push("@index","@index@set"),z(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),W(xe)?("@index"in xe&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in xe||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Se.push("@graph@id","@graph@id@set")):z(xe)&&!F(xe)&&Se.push("@id","@id@set","@type","@set@type");let nt="@language",mt="@null";if(Ve)nt="@type",mt="@reverse",Se.push("@set");else if(E(xe)){"@index"in xe||Se.push("@list");const fe=xe["@list"];if(0===fe.length)nt="@any",mt="@none";else{let R=0===fe.length?de:null,A=null;for(let ie=0;ie<fe.length;++ie){const J=fe[ie];let He="@none",Xe="@none";if(F(J)?"@direction"in J?He=`${(J["@language"]||"").toLowerCase()}_${J["@direction"]}`:"@language"in J?He=J["@language"].toLowerCase():"@type"in J?Xe=J["@type"]:He="@null":Xe="@id",null===R?R=He:He!==R&&F(J)&&(R="@none"),null===A?A=Xe:Xe!==A&&(A="@none"),"@none"===R&&"@none"===A)break}R=R||"@none",A=A||"@none","@none"!==A?(nt="@type",mt=A):mt=R}}else{if(F(xe))if("@language"in xe&&!("@index"in xe)){Se.push("@language","@language@set"),mt=xe["@language"];const fe=xe["@direction"];fe&&(mt=`${mt}_${fe}`)}else"@direction"in xe&&!("@index"in xe)?mt=`_${xe["@direction"]}`:"@type"in xe&&(nt="@type",mt=xe["@type"]);else nt="@type",mt="@id";Se.push("@set")}Se.push("@none"),z(xe)&&!("@index"in xe)&&Se.push("@index","@index@set"),F(xe)&&1===Object.keys(xe).length&&Se.push("@language","@language@set");const Ye=function ce(Me,ae,xe,Oe,Ve,Ze){null===Ze&&(Ze="@null");const Je=[];if(("@id"===Ze||"@reverse"===Ze)&&z(xe)&&"@id"in xe){"@reverse"===Ze&&Je.push("@reverse");const ke=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:!0}});Me.mappings.has(ke)&&Me.mappings.get(ke)&&Me.mappings.get(ke)["@id"]===xe["@id"]?Je.push.apply(Je,["@vocab","@id"]):Je.push.apply(Je,["@id","@vocab"])}else{Je.push(Ze);const ke=Je.find(Ae=>Ae.includes("_"));ke&&Je.push(ke.replace(/^[^_]+_/,"_"))}Je.push("@none");const Ce=Me.inverse[ae];for(const ke of Oe){if(!(ke in Ce))continue;const Ae=Ce[ke][Ve];for(const Be of Je)if(Be in Ae)return Ae[Be]}return null}(Me,ae,xe,Se,nt,mt);if(null!==Ye)return Ye}if(Oe.vocab&&"@vocab"in Me){const de=Me["@vocab"];if(0===ae.indexOf(de)&&ae!==de){const Se=ae.substr(de.length);if(!Me.mappings.has(Se))return Se}}let Ce=null;const ke=[];let Ae=Me.fastCurieMap;const Be=ae.length-1;for(let de=0;de<Be&&ae[de]in Ae;++de)Ae=Ae[ae[de]],""in Ae&&ke.push(Ae[""][0]);for(let de=ke.length-1;de>=0;--de){const Se=ke[de],nt=Se.terms;for(const mt of nt){const Ye=mt+":"+ae.substr(Se.iri.length);Me.mappings.get(mt)._prefix&&(!Me.mappings.has(Ye)||null===xe&&Me.mappings.get(Ye)["@id"]===ae)&&(null===Ce||M(Ye,Ce)<0)&&(Ce=Ye)}}if(null!==Ce)return Ce;for(const[de,Se]of Me.mappings)if(Se&&Se._prefix&&ae.startsWith(de+":"))throw new C(`Absolute IRI "${ae}" confused with prefix "${de}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Me});if(!Oe.vocab){if("@base"in Me){if(Me["@base"]){const de=G(ee(Ze,Me["@base"]),ae);return q.test(de)?`./${de}`:de}return ae}return G(Ze,ae)}return ae},T.compactValue=({activeCtx:Me,activeProperty:ae,value:xe,options:Oe})=>{if(F(xe)){const Ce=x(Me,ae,"@type"),ke=x(Me,ae,"@language"),Ae=x(Me,ae,"@direction"),Be=x(Me,ae,"@container")||[],de="@index"in xe&&!Be.includes("@index");if(!de&&"@none"!==Ce&&(xe["@type"]===Ce||"@language"in xe&&xe["@language"]===ke&&"@direction"in xe&&xe["@direction"]===Ae||"@language"in xe&&xe["@language"]===ke||"@direction"in xe&&xe["@direction"]===Ae))return xe["@value"];const Se=Object.keys(xe).length,nt=1===Se||2===Se&&"@index"in xe&&!de,mt="@language"in Me,Ye=X(xe["@value"]),fe=Me.mappings.has(ae)&&null===Me.mappings.get(ae)["@language"];if(nt&&"@none"!==Ce&&(!mt||!Ye||fe))return xe["@value"];const R={};return de&&(R[T.compactIri({activeCtx:Me,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?R[T.compactIri({activeCtx:Me,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Me,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),R[T.compactIri({activeCtx:Me,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],R}const Ve=se(Me,ae,{vocab:!0},Oe),Ze=x(Me,ae,"@type"),Je=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:"@vocab"===Ze},base:Oe.base});return"@id"===Ze||"@vocab"===Ze||"@graph"===Ve?Je:{[T.compactIri({activeCtx:Me,iri:"@id",relativeTo:{vocab:!0}})]:Je}}},5315:je=>{"use strict";const me="http://www.w3.org/1999/02/22-rdf-syntax-ns#",S="http://www.w3.org/2001/XMLSchema#";je.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:me,RDF_LIST:me+"List",RDF_FIRST:me+"first",RDF_REST:me+"rest",RDF_NIL:me+"nil",RDF_TYPE:me+"type",RDF_PLAIN_LITERAL:me+"PlainLiteral",RDF_XML_LITERAL:me+"XMLLiteral",RDF_JSON_LITERAL:me+"JSON",RDF_OBJECT:me+"object",RDF_LANGSTRING:me+"langString",XSD:S,XSD_BOOLEAN:S+"boolean",XSD_DOUBLE:S+"double",XSD_INTEGER:S+"integer",XSD_STRING:S+"string"}},429:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(9420),Y=S(262),{isArray:z,isObject:X,isString:_,isUndefined:E}=S(2831),{isAbsolute:F,isRelative:W,prependBase:N}=S(2051),{handleEvent:D}=S(2585),{REGEX_BCP47:se,REGEX_KEYWORD:x,asArray:B,compareShortestLeast:oe}=S(9420),$=new Map,ee={};function q(b,M,T,ce,j,Me){if(null===M||!_(M)||ee.isKeyword(M))return M;if(M.match(x))return null;if(ce&&ce.hasOwnProperty(M)&&!0!==j.get(M)&&ee.createTermDefinition({activeCtx:b,localCtx:ce,term:M,defined:j,options:Me}),(T=T||{}).vocab){const xe=b.mappings.get(M);if(null===xe)return null;if(X(xe)&&"@id"in xe)return xe["@id"]}const ae=M.indexOf(":");if(ae>0){const xe=M.substr(0,ae),Oe=M.substr(ae+1);if("_"===xe||0===Oe.indexOf("//"))return M;ce&&ce.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:b,localCtx:ce,term:xe,defined:j,options:Me});const Ve=b.mappings.get(xe);if(Ve&&Ve._prefix)return Ve["@id"]+Oe;if(F(M))return M}if(T.vocab&&"@vocab"in b)M=b["@vocab"]+M;else if(T.base){let xe,Oe;"@base"in b?b["@base"]?(Oe=N(Me.base,b["@base"]),xe=N(Oe,M)):(Oe=b["@base"],xe=M):(Oe=Me.base,xe=N(Me.base,M)),M=xe}return M}function k(b,M){if(!b||"object"!=typeof b||!M||"object"!=typeof M)return b===M;const T=Array.isArray(b);if(T!==Array.isArray(M))return!1;if(T){if(b.length!==M.length)return!1;for(let Me=0;Me<b.length;++Me)if(!k(b[Me],M[Me]))return!1;return!0}const ce=Object.keys(b),j=Object.keys(M);if(ce.length!==j.length)return!1;for(const Me in b){let ae=b[Me],xe=M[Me];if("@container"===Me&&Array.isArray(ae)&&Array.isArray(xe)&&(ae=ae.slice().sort(),xe=xe.slice().sort()),!k(ae,xe))return!1}return!0}je.exports=ee,ee.process=function(){var b=Q(function*({activeCtx:M,localCtx:T,options:ce,propagate:j=!0,overrideProtected:Me=!1,cycles:ae=new Set}){if(X(T)&&"@context"in T&&z(T["@context"])&&(T=T["@context"]),0===B(T).length)return M;const Oe=[],Ve=[({event:ke,next:Ae})=>{Oe.push(ke),Ae()}];ce.eventHandler&&Ve.push(ce.eventHandler);const Ze=ce;ce={...ce,eventHandler:Ve};const Je=yield ce.contextResolver.resolve({activeCtx:M,context:T,documentLoader:ce.documentLoader,base:ce.base});X(Je[0].document)&&"boolean"==typeof Je[0].document["@propagate"]&&(j=Je[0].document["@propagate"]);let Ce=M;!j&&!Ce.previousContext&&(Ce=Ce.clone(),Ce.previousContext=M);for(const ke of Je){let{document:Ae}=ke;if(M=Ce,null===Ae){if(!Me&&0!==Object.keys(M.protected).length)throw new Y("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ce=M=ee.getInitialContext(ce).clone();continue}const Be=ke.getProcessed(M);if(Be){if(Ze.eventHandler)for(const Se of Be.events)D({event:Se,options:Ze});Ce=M=Be.context;continue}if(X(Ae)&&"@context"in Ae&&(Ae=Ae["@context"]),!X(Ae))throw new Y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ae});Ce=Ce.clone();const de=new Map;if("@version"in Ae){if(1.1!==Ae["@version"])throw new Y("Unsupported JSON-LD version: "+Ae["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ae});if(M.processingMode&&"json-ld-1.0"===M.processingMode)throw new Y("@version: "+Ae["@version"]+" not compatible with "+M.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ae});Ce.processingMode="json-ld-1.1",Ce["@version"]=Ae["@version"],de.set("@version",!0)}if(Ce.processingMode=Ce.processingMode||M.processingMode,"@base"in Ae){let Se=Ae["@base"];if(null!==Se&&!F(Se)){if(!W(Se))throw new Y('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ae});Se=N(Ce["@base"],Se)}Ce["@base"]=Se,de.set("@base",!0)}if("@vocab"in Ae){const Se=Ae["@vocab"];if(null===Se)delete Ce["@vocab"];else{if(!_(Se))throw new Y('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ae});if(!F(Se)&&ee.processingMode(Ce,1))throw new Y('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ae});{const nt=q(Ce,Se,{vocab:!0,base:!0},void 0,void 0,ce);F(nt)||ce.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:nt}},options:ce}),Ce["@vocab"]=nt}}de.set("@vocab",!0)}if("@language"in Ae){const Se=Ae["@language"];if(null===Se)delete Ce["@language"];else{if(!_(Se))throw new Y('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ae});Se.match(se)||ce.eventHandler&&D({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Se}},options:ce}),Ce["@language"]=Se.toLowerCase()}de.set("@language",!0)}if("@direction"in Ae){const Se=Ae["@direction"];if("json-ld-1.0"===M.processingMode)throw new Y("Invalid JSON-LD syntax; @direction not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ae});if(null===Se)delete Ce["@direction"];else{if("ltr"!==Se&&"rtl"!==Se)throw new Y('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ae});Ce["@direction"]=Se}de.set("@direction",!0)}if("@propagate"in Ae){const Se=Ae["@propagate"];if("json-ld-1.0"===M.processingMode)throw new Y("Invalid JSON-LD syntax; @propagate not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ae});if("boolean"!=typeof Se)throw new Y("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});de.set("@propagate",!0)}if("@import"in Ae){const Se=Ae["@import"];if("json-ld-1.0"===M.processingMode)throw new Y("Invalid JSON-LD syntax; @import not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ae});if(!_(Se))throw new Y("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const nt=yield ce.contextResolver.resolve({activeCtx:M,context:Se,documentLoader:ce.documentLoader,base:ce.base});if(1!==nt.length)throw new Y("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const mt=nt[0].getProcessed(M);if(mt)Ae=mt;else{const Ye=nt[0].document;if("@import"in Ye)throw new Y("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const fe in Ye)Ae.hasOwnProperty(fe)||(Ae[fe]=Ye[fe]);nt[0].setProcessed(M,Ae)}de.set("@import",!0)}de.set("@protected",Ae["@protected"]||!1);for(const Se in Ae)if(ee.createTermDefinition({activeCtx:Ce,localCtx:Ae,term:Se,defined:de,options:ce,overrideProtected:Me}),X(Ae[Se])&&"@context"in Ae[Se]){const nt=Ae[Se]["@context"];let mt=!0;if(_(nt)){const Ye=N(ce.base,nt);ae.has(Ye)?mt=!1:ae.add(Ye)}if(mt)try{yield ee.process({activeCtx:Ce.clone(),localCtx:Ae[Se]["@context"],overrideProtected:!0,options:ce,cycles:ae})}catch{throw new Y("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ae[Se]["@context"],term:Se})}}ke.setProcessed(M,{context:Ce,events:Oe})}return Ce});return function(M){return b.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:b,localCtx:M,term:T,defined:ce,options:j,overrideProtected:Me=!1})=>{if(ce.has(T)){if(ce.get(T))return;throw new Y("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:M,term:T})}let ae;if(ce.set(T,!1),M.hasOwnProperty(T)&&(ae=M[T]),"@type"===T&&X(ae)&&"@set"===(ae["@container"]||"@set")&&ee.processingMode(b,1.1)){const ke=["@container","@id","@protected"],Ae=Object.keys(ae);if(0===Ae.length||Ae.some(Be=>!ke.includes(Be)))throw new Y("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:M,term:T})}else{if(ee.isKeyword(T))throw new Y("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:M,term:T});if(T.match(x))return void(j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:j}));if(""===T)throw new Y("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:M})}const xe=b.mappings.get(T);b.mappings.has(T)&&b.mappings.delete(T);let Oe=!1;if((_(ae)||null===ae)&&(Oe=!0,ae={"@id":ae}),!X(ae))throw new Y("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:M});const Ve={};b.mappings.set(T,Ve),Ve.reverse=!1;const Ze=["@container","@id","@language","@reverse","@type"];ee.processingMode(b,1.1)&&Ze.push("@context","@direction","@index","@nest","@prefix","@protected");for(const ke in ae)if(!Ze.includes(ke))throw new Y("Invalid JSON-LD syntax; a term definition must not contain "+ke,"jsonld.SyntaxError",{code:"invalid term definition",context:M});const Je=T.indexOf(":");if(Ve._termHasColon=Je>0,"@reverse"in ae){if("@id"in ae)throw new Y("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});if("@nest"in ae)throw new Y("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});const ke=ae["@reverse"];if(!_(ke))throw new Y("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(ke.match(x))return j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:ke}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));const Ae=q(b,ke,{vocab:!0,base:!1},M,ce,j);if(!F(Ae))throw new Y("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});Ve["@id"]=Ae,Ve.reverse=!0}else if("@id"in ae){let ke=ae["@id"];if(ke&&!_(ke))throw new Y("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(null===ke)Ve["@id"]=null;else{if(!ee.isKeyword(ke)&&ke.match(x))return j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:ke}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));if(ke!==T){if(ke=q(b,ke,{vocab:!0,base:!1},M,ce,j),!F(ke)&&!ee.isKeyword(ke))throw new Y("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(T.match(/(?::[^:])|\//)&&q(b,T,{vocab:!0,base:!1},M,new Map(ce).set(T,!0),j)!==ke)throw new Y("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});Ve["@id"]=ke,Ve._prefix=Oe&&!Ve._termHasColon&&null!==ke.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Ve))if(Ve._termHasColon){const ke=T.substr(0,Je);if(M.hasOwnProperty(ke)&&ee.createTermDefinition({activeCtx:b,localCtx:M,term:ke,defined:ce,options:j}),b.mappings.has(ke)){const Ae=T.substr(Je+1);Ve["@id"]=b.mappings.get(ke)["@id"]+Ae}else Ve["@id"]=T}else if("@type"===T)Ve["@id"]=T;else{if(!("@vocab"in b))throw new Y("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M,term:T});Ve["@id"]=b["@vocab"]+T}if((!0===ae["@protected"]||!0===ce.get("@protected")&&!1!==ae["@protected"])&&(b.protected[T]=!0,Ve.protected=!0),ce.set(T,!0),"@type"in ae){let ke=ae["@type"];if(!_(ke))throw new Y("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:M});if("@json"===ke||"@none"===ke){if(ee.processingMode(b,1))throw new Y(`Invalid JSON-LD syntax; an @context @type value must not be "${ke}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:M})}else if("@id"!==ke&&"@vocab"!==ke){if(ke=q(b,ke,{vocab:!0,base:!1},M,ce,j),!F(ke))throw new Y("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:M});if(0===ke.indexOf("_:"))throw new Y("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:M})}Ve["@type"]=ke}if("@container"in ae){const ke=_(ae["@container"])?[ae["@container"]]:ae["@container"]||[],Ae=["@list","@set","@index","@language"];let Be=!0;const de=ke.includes("@set");if(ee.processingMode(b,1.1)){if(Ae.push("@graph","@id","@type"),ke.includes("@list")){if(1!==ke.length)throw new Y("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:M})}else if(ke.includes("@graph")){if(ke.some(Se=>"@graph"!==Se&&"@id"!==Se&&"@index"!==Se&&"@set"!==Se))throw new Y("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:M})}else Be&=ke.length<=(de?2:1);if(ke.includes("@type")&&(Ve["@type"]=Ve["@type"]||"@id",!["@id","@vocab"].includes(Ve["@type"])))throw new Y("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:M})}else Be&=!z(ae["@container"]),Be&=ke.length<=1;if(Be&=ke.every(Se=>Ae.includes(Se)),Be&=!(de&&ke.includes("@list")),!Be)throw new Y("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ae.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:M});if(Ve.reverse&&!ke.every(Se=>["@index","@set"].includes(Se)))throw new Y("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});Ve["@container"]=ke}if("@index"in ae){if(!("@container"in ae)||!Ve["@container"].includes("@index"))throw new Y(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:M});if(!_(ae["@index"])||0===ae["@index"].indexOf("@"))throw new Y(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:M});Ve["@index"]=ae["@index"]}if("@context"in ae&&(Ve["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let ke=ae["@language"];if(null!==ke&&!_(ke))throw new Y("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:M});null!==ke&&(ke=ke.toLowerCase()),Ve["@language"]=ke}if("@prefix"in ae){if(T.match(/:|\//))throw new Y("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:M});if(ee.isKeyword(Ve["@id"]))throw new Y("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:M});if("boolean"!=typeof ae["@prefix"])throw new Y("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:M});Ve._prefix=!0===ae["@prefix"]}if("@direction"in ae){const ke=ae["@direction"];if(null!==ke&&"ltr"!==ke&&"rtl"!==ke)throw new Y('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:M});Ve["@direction"]=ke}if("@nest"in ae){const ke=ae["@nest"];if(!_(ke)||"@nest"!==ke&&0===ke.indexOf("@"))throw new Y("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:M});Ve["@nest"]=ke}const Ce=Ve["@id"];if("@context"===Ce||"@preserve"===Ce)throw new Y("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:M});if(xe&&xe.protected&&!Me&&(b.protected[T]=!0,Ve.protected=!0,!k(xe,Ve)))throw new Y("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:M,term:T})},ee.expandIri=(b,M,T,ce)=>q(b,M,T,void 0,void 0,ce),ee.getInitialContext=b=>{const M=JSON.stringify({processingMode:b.processingMode}),T=$.get(M);if(T)return T;const ce={processingMode:b.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const Ve=this;if(Ve.inverse)return Ve.inverse;const Ze=Ve.inverse={},Je=Ve.fastCurieMap={},Ce={},ke=(Ve["@language"]||"@none").toLowerCase(),Ae=Ve["@direction"],Be=Ve.mappings,de=[...Be.keys()].sort(oe);for(const Se of de){const nt=Be.get(Se);if(null===nt)continue;let mt=nt["@container"]||"@none";if(mt=[].concat(mt).sort().join(""),null===nt["@id"])continue;const Ye=B(nt["@id"]);for(const fe of Ye){let R=Ze[fe];const A=ee.isKeyword(fe);if(R)!A&&!nt._termHasColon&&Ce[fe].push(Se);else if(Ze[fe]=R={},!A&&!nt._termHasColon){Ce[fe]=[Se];const ie={iri:fe,terms:Ce[fe]};fe[0]in Je?Je[fe[0]].push(ie):Je[fe[0]]=[ie]}if(R[mt]||(R[mt]={"@language":{},"@type":{},"@any":{}}),R=R[mt],ae(Se,R["@any"],"@none"),nt.reverse)ae(Se,R["@type"],"@reverse");else if("@none"===nt["@type"])ae(Se,R["@any"],"@none"),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none");else if("@type"in nt)ae(Se,R["@type"],nt["@type"]);else if("@language"in nt&&"@direction"in nt){const ie=nt["@language"],J=nt["@direction"];ae(Se,R["@language"],ie&&J?`${ie}_${J}`.toLowerCase():ie?ie.toLowerCase():J?`_${J}`:"@null")}else"@language"in nt?ae(Se,R["@language"],(nt["@language"]||"@null").toLowerCase()):"@direction"in nt?ae(Se,R["@language"],nt["@direction"]?`_${nt["@direction"]}`:"@none"):Ae?(ae(Se,R["@language"],`_${Ae}`),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none")):(ae(Se,R["@language"],ke),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none"))}}for(const Se in Je)Me(Je,Se,1);return Ze},clone:function xe(){const Ve={};return Ve.mappings=C.clone(this.mappings),Ve.clone=this.clone,Ve.inverse=null,Ve.getInverse=this.getInverse,Ve.protected=C.clone(this.protected),this.previousContext&&(Ve.previousContext=this.previousContext.clone()),Ve.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ve["@base"]=this["@base"]),"@language"in this&&(Ve["@language"]=this["@language"]),"@vocab"in this&&(Ve["@vocab"]=this["@vocab"]),Ve},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===$.size&&$.clear(),$.set(M,ce),ce;function Me(Ve,Ze,Je){const Ce=Ve[Ze],ke=Ve[Ze]={};let Ae,Be;for(const de of Ce)Ae=de.iri,Be=Je>=Ae.length?"":Ae[Je],Be in ke?ke[Be].push(de):ke[Be]=[de];for(const de in ke)""!==de&&Me(ke,de,Je+1)}function ae(Ve,Ze,Je){Ze.hasOwnProperty(Je)||(Ze[Je]=Ve)}},ee.getContextValue=(b,M,T)=>{if(null===M)return"@context"===T?void 0:null;if(b.mappings.has(M)){const ce=b.mappings.get(M);if(E(T))return ce;if(ce.hasOwnProperty(T))return ce[T]}return"@language"===T&&T in b||"@direction"===T&&T in b?b[T]:"@context"!==T?null:void 0},ee.processingMode=(b,M)=>M.toString()>="1.1"?!b.processingMode||b.processingMode>="json-ld-"+M.toString():"json-ld-1.0"===b.processingMode,ee.isKeyword=b=>{if(!_(b)||"@"!==b[0])return!1;switch(b){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},3120:(je,me,S)=>{"use strict";var Q=S(9293).default;const{parseLinkHeader:C,buildHeaders:Y}=S(9420),{LINK_HEADER_CONTEXT:z}=S(5315),X=S(262),_=S(4808),{prependBase:E}=S(2051),F=/(^|(\r\n))link:/i;je.exports=({secure:N,headers:D={},xhr:se}={headers:{}})=>{return D=Y(D),(new _).wrapLoader(B);function B($){return oe.apply(this,arguments)}function oe(){return oe=Q(function*($){if(0!==$.indexOf("http:")&&0!==$.indexOf("https:"))throw new X('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:$});if(N&&0!==$.indexOf("https"))throw new X('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:$});let G;try{G=yield function W(N,D,se){const x=new(N=N||XMLHttpRequest);return new Promise((B,oe)=>{x.onload=()=>B(x),x.onerror=$=>oe($),x.open("GET",D,!0);for(const $ in se)x.setRequestHeader($,se[$]);x.send()})}(se,$,D)}catch(M){throw new X("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:$,cause:M})}if(G.status>=400)throw new X("URL could not be dereferenced: "+G.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:$,httpStatusCode:G.status});let ee={contextUrl:null,documentUrl:$,document:G.response},q=null;const k=G.getResponseHeader("Content-Type");let b;if(F.test(G.getAllResponseHeaders())&&(b=G.getResponseHeader("Link")),b&&"application/ld+json"!==k){const M=C(b),T=M[z];if(Array.isArray(T))throw new X("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:$});T&&(ee.contextUrl=T.target),q=M.alternate,q&&"application/ld+json"==q.type&&!(k||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield B(E($,q.target)))}return ee}),oe.apply(this,arguments)}}},2585:(je,me,S)=>{"use strict";const Q=S(262),{isArray:C}=S(2831),{asArray:Y}=S(9420),z={};function X({event:E,handlers:F}){let W=!0;for(let N=0;W&&N<F.length;++N){W=!1;const D=F[N];if(C(D))W=X({event:E,handlers:D});else if("function"==typeof D)D({event:E,next:()=>{W=!0}});else{if("object"!=typeof D)throw new Q("Invalid event handler.","jsonld.InvalidEventHandler",{event:E});E.code in D?D[E.code]({event:E,next:()=>{W=!0}}):W=!0}}return W}je.exports=z,z.defaultEventHandler=null,z.setupEventHandler=({options:E={}})=>{const F=[].concat(E.safe?z.safeEventHandler:[],E.eventHandler?Y(E.eventHandler):[],z.defaultEventHandler?z.defaultEventHandler:[]);return 0===F.length?null:F},z.handleEvent=({event:E,options:F})=>{X({event:E,handlers:F.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);z.safeEventHandler=function({event:F,next:W}){if("warning"===F.level&&_.has(F.code))throw new Q("Safe mode validation error.","jsonld.ValidationError",{event:F});W()},z.logEventHandler=function({event:F,next:W}){console.log(`EVENT: ${F.message}`,{event:F}),W()},z.logWarningEventHandler=function({event:F,next:W}){"warning"===F.level&&console.warn(`WARNING: ${F.message}`,{event:F}),W()},z.unhandledEventHandler=function({event:F}){throw new Q("No handler for event.","jsonld.UnhandledEvent",{event:F})},z.setDefaultEventHandler=function({eventHandler:E}={}){z.defaultEventHandler=E?Y(E):null}},7336:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(262),{isArray:Y,isObject:z,isEmptyObject:X,isString:_,isUndefined:E}=S(2831),{isList:F,isValue:W,isGraph:N,isSubject:D}=S(4209),{expandIri:se,getContextValue:x,isKeyword:B,process:oe,processingMode:$}=S(429),{isAbsolute:G}=S(2051),{REGEX_BCP47:ee,REGEX_KEYWORD:q,addValue:k,asArray:b,getValues:M,validateTypeValue:T}=S(9420),{handleEvent:ce}=S(2585),j={};function Me({value:Ce,count:ke,options:Ae}){if(0===ke||"@value"in Ce||"@list"in Ce||1===ke&&"@id"in Ce){if(Ae.eventHandler){let Be,de;0===ke?(Be="empty object",de="Dropping empty object."):"@value"in Ce?(Be="object with only @value",de="Dropping object with only @value."):"@list"in Ce?(Be="object with only @list",de="Dropping object with only @list."):1===ke&&"@id"in Ce&&(Be="object with only @id",de="Dropping object with only @id."),ce({event:{type:["JsonLdEvent"],code:Be,level:"warning",message:de,details:{value:Ce}},options:Ae})}return null}return Ce}function ae(Ce){return xe.apply(this,arguments)}function xe(){return(xe=Q(function*({activeCtx:Ce,activeProperty:ke,expandedActiveProperty:Ae,element:Be,expandedParent:de,options:Se={},insideList:nt,typeKey:mt,typeScopedContext:Ye}){const fe=Object.keys(Be).sort(),R=[];let A;const ie=Be[mt]&&"@json"===se(Ce,Y(Be[mt])?Be[mt][0]:Be[mt],{vocab:!0},{...Se,typeExpansion:!0});for(const J of fe){let Xe,He=Be[J];if("@context"===J)continue;const ue=se(Ce,J,{vocab:!0},Se);if(null===ue||!G(ue)&&!B(ue)){Se.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:J,expandedProperty:ue}},options:Se});continue}if(B(ue)){if("@reverse"===Ae)throw new C("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:He});if(ue in de&&"@included"!==ue&&"@type"!==ue)throw new C("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ue})}if("@id"===ue){if(!_(He)){if(!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(z(He)){if(!X(He))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}else{if(!Y(He))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(!He.every(O=>_(O)))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}}k(de,"@id",b(He).map(O=>{if(_(O)){const he=se(Ce,O,{base:!0},Se);return Se.eventHandler&&(null===he?ce(null===O?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:Se}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:Se}):G(he)||ce({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:he}},options:Se})),he}return O}),{propertyIsArray:Se.isFrame});continue}if("@type"===ue){z(He)&&(He=Object.fromEntries(Object.entries(He).map(([O,he])=>[se(Ye,O,{vocab:!0}),b(he).map(We=>se(Ye,We,{base:!0,vocab:!0},{...Se,typeExpansion:!0}))]))),T(He,Se.isFrame),k(de,"@type",b(He).map(O=>{if(_(O)){const he=se(Ye,O,{base:!0,vocab:!0},{...Se,typeExpansion:!0});return"@json"!==he&&!G(he)&&Se.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:Se}),he}return O}),{propertyIsArray:!!Se.isFrame});continue}if("@included"===ue&&$(Ce,1.1)){const O=b(yield j.expand({activeCtx:Ce,activeProperty:ke,element:He,options:Se}));if(!O.every(he=>D(he)))throw new C("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:He});k(de,"@included",O,{propertyIsArray:!0});continue}if("@graph"===ue&&!z(He)&&!Y(He))throw new C('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:He});if("@value"===ue){A=He,ie&&$(Ce,1.1)?de["@value"]=He:k(de,"@value",He,{propertyIsArray:Se.isFrame});continue}if("@language"===ue){if(null===He)continue;if(!_(He)&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:He});He=b(He).map(O=>_(O)?O.toLowerCase():O);for(const O of He)_(O)&&!O.match(ee)&&Se.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:Se});k(de,"@language",He,{propertyIsArray:Se.isFrame});continue}if("@direction"===ue){if(!_(He)&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:He});He=b(He);for(const O of He)if(_(O)&&"ltr"!==O&&"rtl"!==O)throw new C('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:He});k(de,"@direction",He,{propertyIsArray:Se.isFrame});continue}if("@index"===ue){if(!_(He))throw new C('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:He});k(de,"@index",He);continue}if("@reverse"===ue){if(!z(He))throw new C('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:He});if(Xe=yield j.expand({activeCtx:Ce,activeProperty:"@reverse",element:He,options:Se}),"@reverse"in Xe)for(const he in Xe["@reverse"])k(de,he,Xe["@reverse"][he],{propertyIsArray:!0});let O=de["@reverse"]||null;for(const he in Xe){if("@reverse"===he)continue;null===O&&(O=de["@reverse"]={}),k(O,he,[],{propertyIsArray:!0});const We=Xe[he];for(let Ee=0;Ee<We.length;++Ee){const Ue=We[Ee];if(W(Ue)||F(Ue))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Xe});k(O,he,Ue,{propertyIsArray:!0})}}continue}if("@nest"===ue){R.push(J);continue}let te=Ce;const U=x(Ce,J,"@context");E(U)||(te=yield oe({activeCtx:Ce,localCtx:U,propagate:!0,overrideProtected:!0,options:Se}));const I=x(Ce,J,"@container")||[];if(I.includes("@language")&&z(He))Xe=Ve(te,He,x(te,J,"@direction"),Se);else if(I.includes("@index")&&z(He)){const O=I.includes("@graph"),he=x(te,J,"@index")||"@index",We="@index"!==he&&se(Ce,he,{vocab:!0},Se);Xe=yield Ze({activeCtx:te,options:Se,activeProperty:J,value:He,asGraph:O,indexKey:he,propertyIndex:We})}else if(I.includes("@id")&&z(He)){const O=I.includes("@graph");Xe=yield Ze({activeCtx:te,options:Se,activeProperty:J,value:He,asGraph:O,indexKey:"@id"})}else if(I.includes("@type")&&z(He))Xe=yield Ze({activeCtx:te.revertToPreviousContext(),options:Se,activeProperty:J,value:He,asGraph:!1,indexKey:"@type"});else{const O="@list"===ue;if(O||"@set"===ue){let he=ke;O&&"@graph"===Ae&&(he=null),Xe=yield j.expand({activeCtx:te,activeProperty:he,element:He,options:Se,insideList:O})}else Xe="@json"===x(Ce,J,"@type")?{"@type":"@json","@value":He}:yield j.expand({activeCtx:te,activeProperty:J,element:He,options:Se,insideList:!1})}if(null!==Xe||"@value"===ue){if("@list"!==ue&&!F(Xe)&&I.includes("@list")&&(Xe={"@list":b(Xe)}),I.includes("@graph")&&!I.some(O=>"@id"===O||"@index"===O)){if(Xe=b(Xe),Se.isFrame||(Xe=Xe.filter(O=>null!==Me({value:O,count:Object.keys(O).length,options:Se}))),0===Xe.length)continue;Xe=Xe.map(O=>({"@graph":b(O)}))}if(te.mappings.has(J)&&te.mappings.get(J).reverse){const O=de["@reverse"]=de["@reverse"]||{};Xe=b(Xe);for(let he=0;he<Xe.length;++he){const We=Xe[he];if(W(We)||F(We))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Xe});k(O,ue,We,{propertyIsArray:!0})}continue}k(de,ue,Xe,{propertyIsArray:!0})}}if("@value"in de&&("@json"!==de["@type"]||!$(Ce,1.1))&&(z(A)||Y(A))&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:A});for(const J of R){const He=Y(Be[J])?Be[J]:[Be[J]];for(const Xe of He){if(!z(Xe)||Object.keys(Xe).some(ue=>"@value"===se(Ce,ue,{vocab:!0},Se)))throw new C("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Xe});yield ae({activeCtx:Ce,activeProperty:ke,expandedActiveProperty:Ae,element:Xe,expandedParent:de,options:Se,insideList:nt,typeScopedContext:Ye,typeKey:mt})}}})).apply(this,arguments)}function Oe({activeCtx:Ce,activeProperty:ke,value:Ae,options:Be}){if(null==Ae)return null;const de=se(Ce,ke,{vocab:!0},Be);if("@id"===de)return se(Ce,Ae,{base:!0},Be);if("@type"===de)return se(Ce,Ae,{vocab:!0,base:!0},{...Be,typeExpansion:!0});const Se=x(Ce,ke,"@type");if(("@id"===Se||"@graph"===de)&&_(Ae)){const mt=se(Ce,Ae,{base:!0},Be);return null===mt&&Ae.match(q)&&Be.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:ke}},options:Be}),{"@id":mt}}if("@vocab"===Se&&_(Ae))return{"@id":se(Ce,Ae,{vocab:!0,base:!0},Be)};if(B(de))return Ae;const nt={};if(Se&&!["@id","@vocab","@none"].includes(Se))nt["@type"]=Se;else if(_(Ae)){const mt=x(Ce,ke,"@language");null!==mt&&(nt["@language"]=mt);const Ye=x(Ce,ke,"@direction");null!==Ye&&(nt["@direction"]=Ye)}return["boolean","number","string"].includes(typeof Ae)||(Ae=Ae.toString()),nt["@value"]=Ae,nt}function Ve(Ce,ke,Ae,Be){const de=[],Se=Object.keys(ke).sort();for(const nt of Se){const mt=se(Ce,nt,{vocab:!0},Be);let Ye=ke[nt];Y(Ye)||(Ye=[Ye]);for(const fe of Ye){if(null===fe)continue;if(!_(fe))throw new C("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ke});const R={"@value":fe};"@none"!==mt&&(nt.match(ee)||Be.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt}},options:Be}),R["@language"]=nt.toLowerCase()),Ae&&(R["@direction"]=Ae),de.push(R)}}return de}function Ze(Ce){return Je.apply(this,arguments)}function Je(){return(Je=Q(function*({activeCtx:Ce,options:ke,activeProperty:Ae,value:Be,asGraph:de,indexKey:Se,propertyIndex:nt}){const mt=[],Ye=Object.keys(Be).sort(),fe="@type"===Se;for(let R of Ye){if(fe){const J=x(Ce,R,"@context");E(J)||(Ce=yield oe({activeCtx:Ce,localCtx:J,propagate:!1,options:ke}))}let ie,A=Be[R];Y(A)||(A=[A]),A=yield j.expand({activeCtx:Ce,activeProperty:Ae,element:A,options:ke,insideList:!1,insideIndex:!0}),ie=nt?"@none"===R?"@none":Oe({activeCtx:Ce,activeProperty:Se,value:R,options:ke}):se(Ce,R,{vocab:!0},ke),"@id"===Se?R=se(Ce,R,{base:!0},ke):fe&&(R=ie);for(let J of A){if(de&&!N(J)&&(J={"@graph":[J]}),"@type"===Se)"@none"===ie||(J["@type"]=J["@type"]?[R].concat(J["@type"]):[R]);else{if(W(J)&&!["@language","@type","@index"].includes(Se))throw new C(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Se}".`,"jsonld.SyntaxError",{code:"invalid value object",value:J});nt?"@none"!==ie&&k(J,nt,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Se in J)&&(J[Se]=R)}mt.push(J)}}return mt})).apply(this,arguments)}je.exports=j,j.expand=function(){var Ce=Q(function*({activeCtx:ke,activeProperty:Ae=null,element:Be,options:de={},insideList:Se=!1,insideIndex:nt=!1,typeScopedContext:mt=null}){if(null==Be)return null;if("@default"===Ae&&(de=Object.assign({},de,{isFrame:!1})),!Y(Be)&&!z(Be))return Se||null!==Ae&&"@graph"!==se(ke,Ae,{vocab:!0},de)?Oe({activeCtx:ke,activeProperty:Ae,value:Be,options:de}):(de.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Be}},options:de}),null);if(Y(Be)){let Xe=[];const ue=x(ke,Ae,"@container")||[];Se=Se||ue.includes("@list");for(let te=0;te<Be.length;++te){let U=yield j.expand({activeCtx:ke,activeProperty:Ae,element:Be[te],options:de,insideIndex:nt,typeScopedContext:mt});Se&&Y(U)&&(U={"@list":U}),null!==U&&(Y(U)?Xe=Xe.concat(U):Xe.push(U))}return Xe}const Ye=se(ke,Ae,{vocab:!0},de),fe=x(ke,Ae,"@context");mt=mt||(ke.previousContext?ke:null);let R=Object.keys(Be).sort(),A=!nt;if(A&&mt&&R.length<=2&&!R.includes("@context"))for(const Xe of R){const ue=se(mt,Xe,{vocab:!0},de);if("@value"===ue){A=!1,ke=mt;break}if("@id"===ue&&1===R.length){A=!1;break}}A&&(ke=ke.revertToPreviousContext()),E(fe)||(ke=yield oe({activeCtx:ke,localCtx:fe,propagate:!0,overrideProtected:!0,options:de})),"@context"in Be&&(ke=yield oe({activeCtx:ke,localCtx:Be["@context"],options:de})),mt=ke;let ie=null;for(const Xe of R)if("@type"===se(ke,Xe,{vocab:!0},de)){ie=ie||Xe;const te=Be[Xe],U=Array.isArray(te)?te.length>1?te.slice().sort():te:[te];for(const I of U){const O=x(mt,I,"@context");E(O)||(ke=yield oe({activeCtx:ke,localCtx:O,options:de,propagate:!1}))}}let J={};yield ae({activeCtx:ke,activeProperty:Ae,expandedActiveProperty:Ye,element:Be,expandedParent:J,options:de,insideList:Se,typeKey:ie,typeScopedContext:mt}),R=Object.keys(J);let He=R.length;if("@value"in J){if("@type"in J&&("@language"in J||"@direction"in J))throw new C('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});let Xe=He-1;if("@type"in J&&(Xe-=1),"@index"in J&&(Xe-=1),"@language"in J&&(Xe-=1),"@direction"in J&&(Xe-=1),0!==Xe)throw new C('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});const ue=null===J["@value"]?[]:b(J["@value"]),te=M(J,"@type");if(!$(ke,1.1)||!te.includes("@json")||1!==te.length)if(0===ue.length)de.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:J}},options:de}),J=null;else{if(!ue.every(U=>_(U)||X(U))&&"@language"in J)throw new C("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:J});if(!te.every(U=>G(U)&&!(_(U)&&0===U.indexOf("_:"))||X(U)))throw new C('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:J})}}else if("@type"in J&&!Y(J["@type"]))J["@type"]=[J["@type"]];else if("@set"in J||"@list"in J){if(He>1&&(2!==He||!("@index"in J)))throw new C('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:J});"@set"in J&&(J=J["@set"],R=Object.keys(J),He=R.length)}else 1===He&&"@language"in J&&(de.eventHandler&&ce({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:J}},options:de}),J=null);return z(J)&&!de.keepFreeFloatingNodes&&!Se&&(null===Ae||"@graph"===Ye||(x(ke,Ae,"@container")||[]).includes("@graph"))&&(J=Me({value:J,count:He,options:de})),J});return function(ke){return Ce.apply(this,arguments)}}()},9392:(je,me,S)=>{"use strict";const{isSubjectReference:Q}=S(4209),{createMergedNodeMap:C}=S(5096),Y={};je.exports=Y,Y.flatten=z=>{const X=C(z),_=[],E=Object.keys(X).sort();for(let F=0;F<E.length;++F){const W=X[E[F]];Q(W)||_.push(W)}return _}},7031:(je,me,S)=>{"use strict";const{isKeyword:Q}=S(429),C=S(4209),Y=S(2831),z=S(9420),X=S(2051),_=S(262),{createNodeMap:E,mergeNodeMapGraphs:F}=S(5096),W={};function N(b){const M={};for(const T in b)void 0!==b[T]&&(M["@"+T]=[b[T]]);return[M]}function D(b,M,T){for(let ce=T.length-1;ce>=0;--ce){const j=T[ce];if(j.graph===M&&j.subject["@id"]===b["@id"])return!0}return!1}function se(b,M,T){const ce="@"+T;let j=ce in b?b[ce][0]:M[T];if("embed"===T)if(!0===j)j="@once";else if(!1===j)j="@never";else if("@always"!==j&&"@never"!==j&&"@link"!==j&&"@first"!==j&&"@last"!==j&&"@once"!==j)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:b});return j}function x(b){if(!Y.isArray(b)||1!==b.length||!Y.isObject(b[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:b});if("@id"in b[0])for(const M of z.asArray(b[0]["@id"]))if(!Y.isObject(M)&&!X.isAbsolute(M)||Y.isString(M)&&0===M.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b});if("@type"in b[0])for(const M of z.asArray(b[0]["@type"]))if(!Y.isObject(M)&&!X.isAbsolute(M)&&"@json"!==M||Y.isString(M)&&0===M.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b})}function oe(b,M,T,ce){let j=!0,Me=!1;for(const ae in T){let xe=!1;const Oe=z.getValues(M,ae),Ve=0===z.getValues(T,ae).length;if("@id"===ae){if(Y.isEmptyObject(T["@id"][0]||{})?xe=!0:T["@id"].length>=0&&(xe=T["@id"].includes(Oe[0])),!ce.requireAll)return xe}else if("@type"===ae){if(j=!1,Ve){if(Oe.length>0)return!1;xe=!0}else if(1===T["@type"].length&&Y.isEmptyObject(T["@type"][0]))xe=Oe.length>0;else for(const Ze of T["@type"])xe=!(!Y.isObject(Ze)||!("@default"in Ze))||xe||Oe.some(Je=>Je===Ze);if(!ce.requireAll)return xe}else{if(Q(ae))continue;{const Ze=z.getValues(T,ae)[0];let Je=!1;if(Ze&&(x([Ze]),Je="@default"in Ze),j=!1,0===Oe.length&&Je)continue;if(Oe.length>0&&Ve)return!1;if(void 0===Ze){if(Oe.length>0)return!1;xe=!0}else if(C.isList(Ze)){const Ce=Ze["@list"][0];if(C.isList(Oe[0])){const ke=Oe[0]["@list"];C.isValue(Ce)?xe=ke.some(Ae=>k(Ce,Ae)):(C.isSubject(Ce)||C.isSubjectReference(Ce))&&(xe=ke.some(Ae=>q(b,Ce,Ae,ce)))}}else xe=C.isValue(Ze)?Oe.some(Ce=>k(Ze,Ce)):C.isSubjectReference(Ze)?Oe.some(Ce=>q(b,Ze,Ce,ce)):!!Y.isObject(Ze)&&Oe.length>0}}if(!xe&&ce.requireAll)return!1;Me=Me||xe}return j||Me}function $(b,M){const T=b.uniqueEmbeds[b.graph],ce=T[M],j=ce.parent,Me=ce.property,ae={"@id":M};if(Y.isArray(j)){for(let Oe=0;Oe<j.length;++Oe)if(z.compareValues(j[Oe],ae)){j[Oe]=ae;break}}else{const Oe=Y.isArray(j[Me]);z.removeValue(j,Me,ae,{propertyIsArray:Oe}),z.addValue(j,Me,ae,{propertyIsArray:Oe})}const xe=Oe=>{const Ve=Object.keys(T);for(const Ze of Ve)Ze in T&&Y.isObject(T[Ze].parent)&&T[Ze].parent["@id"]===Oe&&(delete T[Ze],xe(Ze))};xe(M)}function G(b,M){if(Y.isArray(b))return b.map(T=>G(T,M));if(Y.isObject(b)){if("@preserve"in b)return b["@preserve"][0];if(C.isValue(b))return b;if(C.isList(b))return b["@list"]=G(b["@list"],M),b;if("@id"in b){const T=b["@id"];if(M.link.hasOwnProperty(T)){const ce=M.link[T].indexOf(b);if(-1!==ce)return M.link[T][ce];M.link[T].push(b)}else M.link[T]=[b]}for(const T in b)"@id"===T&&M.bnodesToClear.includes(b[T])?delete b["@id"]:b[T]=G(b[T],M)}return b}function ee(b,M,T){Y.isObject(b)?z.addValue(b,M,T,{propertyIsArray:!0}):b.push(T)}function q(b,M,T,ce){if(!("@id"in T))return!1;const j=b.subjects[T["@id"]];return j&&oe(b,j,M,ce)}function k(b,M){const T=M["@value"],ce=M["@type"],j=M["@language"],Me=b["@value"]?Y.isArray(b["@value"])?b["@value"]:[b["@value"]]:[],ae=b["@type"]?Y.isArray(b["@type"])?b["@type"]:[b["@type"]]:[],xe=b["@language"]?Y.isArray(b["@language"])?b["@language"]:[b["@language"]]:[];return 0===Me.length&&0===ae.length&&0===xe.length||!(!Me.includes(T)&&!Y.isEmptyObject(Me[0])||!(!ce&&0===ae.length||ae.includes(ce)||ce&&Y.isEmptyObject(ae[0]))||!(!j&&0===xe.length||xe.includes(j)||j&&Y.isEmptyObject(xe[0])))}je.exports=W,W.frameMergedOrDefault=(b,M,T)=>{const ce={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},j=new z.IdentifierIssuer("_:b");E(b,ce.graphMap,"@default",j),T.merged&&(ce.graphMap["@merged"]=F(ce.graphMap),ce.graph="@merged"),ce.subjects=ce.graphMap[ce.graph];const Me=[];return W.frame(ce,Object.keys(ce.subjects).sort(),M,Me),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(ce.bnodeMap).filter(ae=>1===ce.bnodeMap[ae].length)),T.link={},G(Me,T)},W.frame=(b,M,T,ce,j=null)=>{x(T);const Me=b.options,ae={embed:se(T=T[0],Me,"embed"),explicit:se(T,Me,"explicit"),requireAll:se(T,Me,"requireAll")};b.link.hasOwnProperty(b.graph)||(b.link[b.graph]={});const xe=b.link[b.graph],Oe=function B(b,M,T,ce){const j={};for(const Me of M){const ae=b.graphMap[b.graph][Me];oe(b,ae,T,ce)&&(j[Me]=ae)}return j}(b,M,T,ae),Ve=Object.keys(Oe).sort();for(const Ze of Ve){const Je=Oe[Ze];if(null===j?b.uniqueEmbeds={[b.graph]:{}}:b.uniqueEmbeds[b.graph]=b.uniqueEmbeds[b.graph]||{},"@link"===ae.embed&&Ze in xe){ee(ce,j,xe[Ze]);continue}const Ce={"@id":Ze};if(0===Ze.indexOf("_:")&&z.addValue(b.bnodeMap,Ze,Ce,{propertyIsArray:!0}),xe[Ze]=Ce,("@first"===ae.embed||"@last"===ae.embed)&&b.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(b.embedded||!b.uniqueEmbeds[b.graph].hasOwnProperty(Ze)){if(b.embedded&&("@never"===ae.embed||D(Je,b.graph,b.subjectStack))){ee(ce,j,Ce);continue}if(b.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&b.uniqueEmbeds[b.graph].hasOwnProperty(Ze)){ee(ce,j,Ce);continue}if("@last"===ae.embed&&Ze in b.uniqueEmbeds[b.graph]&&$(b,Ze),b.uniqueEmbeds[b.graph][Ze]={parent:ce,property:j},b.subjectStack.push({subject:Je,graph:b.graph}),Ze in b.graphMap){let ke=!1,Ae=null;"@graph"in T?(Ae=T["@graph"][0],ke=!("@merged"===Ze||"@default"===Ze),Y.isObject(Ae)||(Ae={})):(ke="@merged"!==b.graph,Ae={}),ke&&W.frame({...b,graph:Ze,embedded:!1},Object.keys(b.graphMap[Ze]).sort(),[Ae],Ce,"@graph")}"@included"in T&&W.frame({...b,embedded:!1},M,T["@included"],Ce,"@included");for(const ke of Object.keys(Je).sort())if(Q(ke)){if(Ce[ke]=z.clone(Je[ke]),"@type"===ke)for(const Ae of Je["@type"])0===Ae.indexOf("_:")&&z.addValue(b.bnodeMap,Ae,Ce,{propertyIsArray:!0})}else if(!ae.explicit||ke in T)for(const Ae of Je[ke]){const Be=ke in T?T[ke]:N(ae);if(C.isList(Ae)){const de=T[ke]&&T[ke][0]&&T[ke][0]["@list"]?T[ke][0]["@list"]:N(ae),Se={"@list":[]};ee(Ce,ke,Se);const nt=Ae["@list"];for(const mt of nt)C.isSubjectReference(mt)?W.frame({...b,embedded:!0},[mt["@id"]],de,Se,"@list"):ee(Se,"@list",z.clone(mt))}else C.isSubjectReference(Ae)?W.frame({...b,embedded:!0},[Ae["@id"]],Be,Ce,ke):k(Be[0],Ae)&&ee(Ce,ke,z.clone(Ae))}for(const ke of Object.keys(T).sort()){if("@type"===ke){if(!Y.isObject(T[ke][0])||!("@default"in T[ke][0]))continue}else if(Q(ke))continue;const Ae=T[ke][0]||{};if(!se(Ae,Me,"omitDefault")&&!(ke in Ce)){let de="@null";"@default"in Ae&&(de=z.clone(Ae["@default"])),Y.isArray(de)||(de=[de]),Ce[ke]=[{"@preserve":de}]}}for(const ke of Object.keys(T["@reverse"]||{}).sort()){const Ae=T["@reverse"][ke];for(const Be of Object.keys(b.subjects))z.getValues(b.subjects[Be],ke).some(Se=>Se["@id"]===Ze)&&(Ce["@reverse"]=Ce["@reverse"]||{},z.addValue(Ce["@reverse"],ke,[],{propertyIsArray:!0}),W.frame({...b,embedded:!0},[Be],Ae,Ce["@reverse"][ke],j))}ee(ce,j,Ce),b.subjectStack.pop()}}},W.cleanupNull=(b,M)=>{if(Y.isArray(b))return b.map(ce=>W.cleanupNull(ce,M)).filter(ce=>ce);if("@null"===b)return null;if(Y.isObject(b)){if("@id"in b){const T=b["@id"];if(M.link.hasOwnProperty(T)){const ce=M.link[T].indexOf(b);if(-1!==ce)return M.link[T][ce];M.link[T].push(b)}else M.link[T]=[b]}for(const T in b)b[T]=W.cleanupNull(b[T],M)}return b}},4814:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(262),Y=S(4209),z=S(2831),{REGEX_BCP47:X,addValue:_}=S(9420),{handleEvent:E}=S(2585),{RDF_LIST:F,RDF_FIRST:W,RDF_REST:N,RDF_NIL:D,RDF_TYPE:se,RDF_JSON_LITERAL:x,XSD_BOOLEAN:B,XSD_DOUBLE:oe,XSD_INTEGER:$,XSD_STRING:G}=S(5315),ee={};function q(k,b,M,T){if(k.termType.endsWith("Node"))return{"@id":k.value};const ce={"@value":k.value};if(k.language)k.language.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:k.language}},options:T}),ce["@language"]=k.language;else{let j=k.datatype.value;if(j||(j=G),j===x){j="@json";try{ce["@value"]=JSON.parse(ce["@value"])}catch(Me){throw new C("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ce["@value"],cause:Me})}}if(b){if(j===B)"true"===ce["@value"]?ce["@value"]=!0:"false"===ce["@value"]&&(ce["@value"]=!1);else if(z.isNumeric(ce["@value"]))if(j===$){const Me=parseInt(ce["@value"],10);Me.toFixed(0)===ce["@value"]&&(ce["@value"]=Me)}else j===oe&&(ce["@value"]=parseFloat(ce["@value"]));[B,$,oe,G].includes(j)||(ce["@type"]=j)}else if("i18n-datatype"===M&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,Me,ae]=j.split(/[#_]/);Me.length>0&&(ce["@language"]=Me,Me.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Me}},options:T})),ce["@direction"]=ae}else j!==G&&(ce["@type"]=j)}return ce}je.exports=ee,ee.fromRDF=function(){var k=Q(function*(b,M){const{useRdfType:T=!1,useNativeTypes:ce=!1,rdfDirection:j=null}=M,Me={},ae={"@default":Me},xe={};if(j){if("compound-literal"===j)throw new C("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:j});if("i18n-datatype"!==j)throw new C("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:j})}for(const Ze of b){const Je="DefaultGraph"===Ze.graph.termType?"@default":Ze.graph.value;Je in ae||(ae[Je]={}),"@default"!==Je&&!(Je in Me)&&(Me[Je]={"@id":Je});const Ce=ae[Je],ke=Ze.subject.value,Ae=Ze.predicate.value,Be=Ze.object;ke in Ce||(Ce[ke]={"@id":ke});const de=Ce[ke],Se=Be.termType.endsWith("Node");if(Se&&!(Be.value in Ce)&&(Ce[Be.value]={"@id":Be.value}),Ae===se&&!T&&Se){_(de,"@type",Be.value,{propertyIsArray:!0});continue}const nt=q(Be,ce,j,M);if(_(de,Ae,nt,{propertyIsArray:!0}),Se)if(Be.value===D){const mt=Ce[Be.value];"usages"in mt||(mt.usages=[]),mt.usages.push({node:de,property:Ae,value:nt})}else xe[Be.value]=!(Be.value in xe)&&{node:de,property:Ae,value:nt}}for(const Ze in ae){const Je=ae[Ze];if(!(D in Je))continue;const Ce=Je[D];if(Ce.usages){for(let ke of Ce.usages){let Ae=ke.node,Be=ke.property,de=ke.value;const Se=[],nt=[];let mt=Object.keys(Ae).length;for(;Be===N&&z.isObject(xe[Ae["@id"]])&&z.isArray(Ae[W])&&1===Ae[W].length&&z.isArray(Ae[N])&&1===Ae[N].length&&(3===mt||4===mt&&z.isArray(Ae["@type"])&&1===Ae["@type"].length&&Ae["@type"][0]===F)&&(Se.push(Ae[W][0]),nt.push(Ae["@id"]),ke=xe[Ae["@id"]],Ae=ke.node,Be=ke.property,de=ke.value,mt=Object.keys(Ae).length,Y.isBlankNode(Ae)););delete de["@id"],de["@list"]=Se.reverse();for(const Ye of nt)delete Je[Ye]}delete Ce.usages}}const Oe=[],Ve=Object.keys(Me).sort();for(const Ze of Ve){const Je=Me[Ze];if(Ze in ae){const Ce=Je["@graph"]=[],ke=ae[Ze],Ae=Object.keys(ke).sort();for(const Be of Ae){const de=ke[Be];Y.isSubjectReference(de)||Ce.push(de)}}Y.isSubjectReference(Je)||Oe.push(Je)}return Oe});return function(b,M){return k.apply(this,arguments)}}()},4209:(je,me,S)=>{"use strict";const Q=S(2831),C={};je.exports=C,C.isSubject=Y=>!(!Q.isObject(Y)||"@value"in Y||"@set"in Y||"@list"in Y)&&(Object.keys(Y).length>1||!("@id"in Y)),C.isSubjectReference=Y=>Q.isObject(Y)&&1===Object.keys(Y).length&&"@id"in Y,C.isValue=Y=>Q.isObject(Y)&&"@value"in Y,C.isList=Y=>Q.isObject(Y)&&"@list"in Y,C.isGraph=Y=>Q.isObject(Y)&&"@graph"in Y&&1===Object.keys(Y).filter(z=>"@id"!==z&&"@index"!==z).length,C.isSimpleGraph=Y=>C.isGraph(Y)&&!("@id"in Y),C.isBlankNode=Y=>{if(Q.isObject(Y)){if("@id"in Y){const z=Y["@id"];return!Q.isString(z)||0===z.indexOf("_:")}return 0===Object.keys(Y).length||!("@value"in Y||"@set"in Y||"@list"in Y)}return!1}},2130:(je,me,S)=>{var Q=S(9293).default;const C=S(1224),Y=S(8666),z=S(9420),X=S(7839),_=z.IdentifierIssuer,E=S(262),F=S(3052),W=S(5426),{expand:N}=S(7336),{flatten:D}=S(9392),{fromRDF:se}=S(4814),{toRDF:x}=S(6397),{frameMergedOrDefault:B,cleanupNull:oe}=S(7031),{isArray:$,isObject:G,isString:ee}=S(2831),{isSubjectReference:q}=S(4209),{expandIri:k,getInitialContext:b,process:M,processingMode:T}=S(429),{compact:ce,compactIri:j}=S(3763),{createNodeMap:Me,createMergedNodeMap:ae,mergeNodeMaps:xe}=S(5096),{logEventHandler:Oe,logWarningEventHandler:Ve,safeEventHandler:Ze,setDefaultEventHandler:Je,setupEventHandler:Ce,strictEventHandler:ke,unhandledEventHandler:Ae}=S(2585),Be=function(Se){const nt={},Ye=new F({max:100});function fe(R,{documentLoader:A=Se.documentLoader,...ie}){if(R&&"compactionMap"in R)throw new E('"compactionMap" not supported.',"jsonld.OptionsError");if(R&&"expansionMap"in R)throw new E('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:A},ie,R,{eventHandler:Ce({options:R})})}return Se.compact=function(){var R=Q(function*(A,ie,J){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===A)return null;let He;(J=fe(J,{base:ee(A)?A:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new X({sharedCache:Ye})})).link&&(J.skipExpansion=!0),J.compactToRelative||delete J.base,He=J.skipExpansion?A:yield Se.expand(A,J);const Xe=yield Se.processContext(b(J),ie,J);let ue=yield ce({activeCtx:Xe,element:He,options:J});J.compactArrays&&!J.graph&&$(ue)?1===ue.length?ue=ue[0]:0===ue.length&&(ue={}):J.graph&&G(ue)&&(ue=[ue]),G(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=z.clone(ie),$(ie)||(ie=[ie]);const te=ie;ie=[];for(let I=0;I<te.length;++I)(!G(te[I])||Object.keys(te[I]).length>0)&&ie.push(te[I]);const U=ie.length>0;if(1===ie.length&&(ie=ie[0]),$(ue)){const I=j({activeCtx:Xe,iri:"@graph",relativeTo:{vocab:!0}}),O=ue;ue={},U&&(ue["@context"]=ie),ue[I]=O}else if(G(ue)&&U){const I=ue;ue={"@context":ie};for(const O in I)ue[O]=I[O]}return ue});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.expand=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const J={},He=[];if("expandContext"in(ie=fe(ie,{keepFreeFloatingNodes:!1,contextResolver:new X({sharedCache:Ye})}))){const U=z.clone(ie.expandContext);J.expandContext=G(U)&&"@context"in U?U:{"@context":U},He.push(J.expandContext)}let Xe;if(ee(A)){const U=yield Se.get(A,ie);Xe=U.documentUrl,J.input=U.document,U.contextUrl&&(J.remoteContext={"@context":U.contextUrl},He.push(J.remoteContext))}else J.input=z.clone(A);"base"in ie||(ie.base=Xe||"");let ue=b(ie);for(const U of He)ue=yield M({activeCtx:ue,localCtx:U,options:ie});let te=yield N({activeCtx:ue,element:J.input,options:ie});return G(te)&&"@graph"in te&&1===Object.keys(te).length?te=te["@graph"]:null===te&&(te=[]),$(te)||(te=[te]),te});return function(A,ie){return R.apply(this,arguments)}}(),Se.flatten=function(){var R=Q(function*(A,ie,J){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,J=fe(J,{base:ee(A)?A:"",contextResolver:new X({sharedCache:Ye})});const He=yield Se.expand(A,J),Xe=D(He);return null===ie?Xe:(J.graph=!0,J.skipExpansion=!0,yield Se.compact(Xe,ie,J))});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.frame=function(){var R=Q(function*(A,ie,J){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(J=fe(J,{base:ee(A)?A:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new X({sharedCache:Ye})}),ee(ie)){const We=yield Se.get(ie,J);if(ie=We.document,We.contextUrl){let Ee=ie["@context"];Ee?$(Ee)?Ee.push(We.contextUrl):Ee=[Ee,We.contextUrl]:Ee=We.contextUrl,ie["@context"]=Ee}}const He=ie&&ie["@context"]||{},Xe=yield Se.processContext(b(J),He,J);J.hasOwnProperty("omitGraph")||(J.omitGraph=T(Xe,1.1)),J.hasOwnProperty("pruneBlankNodeIdentifiers")||(J.pruneBlankNodeIdentifiers=T(Xe,1.1));const ue=yield Se.expand(A,J),te={...J};te.isFrame=!0,te.keepFreeFloatingNodes=!0;const U=yield Se.expand(ie,te),I=Object.keys(ie).map(We=>k(Xe,We,{vocab:!0}));te.merged=!I.includes("@graph"),te.is11=T(Xe,1.1);const O=B(ue,U,te);te.graph=!J.omitGraph,te.skipExpansion=!0,te.link={},te.framing=!0;let he=yield Se.compact(O,He,te);return te.link={},he=oe(he,te),he});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.link=function(){var R=Q(function*(A,ie,J){const He={};return ie&&(He["@context"]=ie),He["@embed"]="@link",Se.frame(A,He,J)});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.normalize=Se.canonize=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=fe(ie,{base:ee(A)?A:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new X({sharedCache:Ye})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Xe=W.parse(A);return C.canonize(Xe,ie)}const J={...ie};delete J.format,J.produceGeneralizedRdf=!1;const He=yield Se.toRDF(A,J);return C.canonize(He,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.fromRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=fe(ie,{format:ee(A)?"application/n-quads":void 0});const{format:J}=ie;let{rdfParser:He}=ie;if(J){if(He=He||nt[J],!He)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:J})}else He=()=>A;const Xe=yield He(A);return se(Xe,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.toRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let J;J=(ie=fe(ie,{base:ee(A)?A:"",skipExpansion:!1,contextResolver:new X({sharedCache:Ye})})).skipExpansion?A:yield Se.expand(A,ie);const He=x(J,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return W.serialize(He);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return He});return function(A,ie){return R.apply(this,arguments)}}(),Se.createNodeMap=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=fe(ie,{base:ee(A)?A:"",contextResolver:new X({sharedCache:Ye})});const J=yield Se.expand(A,ie);return ae(J,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.merge=function(){var R=Q(function*(A,ie,J){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!$(A))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,J=fe(J,{contextResolver:new X({sharedCache:Ye})});const He=yield Promise.all(A.map(We=>{const Ee={...J};return Se.expand(We,Ee)}));let Xe=!0;"mergeNodes"in J&&(Xe=J.mergeNodes);const ue=J.issuer||new _("_:b"),te={"@default":{}};for(let We=0;We<He.length;++We){const Ee=z.relabelBlankNodes(He[We],{issuer:new _("_:b"+We+"-")}),Ue=Xe||0===We?te:{"@default":{}};if(Me(Ee,Ue,"@default",ue),Ue!==te)for(const Qe in Ue){const vt=Ue[Qe];if(!(Qe in te)){te[Qe]=vt;continue}const Rt=te[Qe];for(const wt in vt)wt in Rt||(Rt[wt]=vt[wt])}}const U=xe(te),I=[],O=Object.keys(U).sort();for(let We=0;We<O.length;++We){const Ee=U[O[We]];q(Ee)||I.push(Ee)}return null===ie?I:(J.graph=!0,J.skipExpansion=!0,yield Se.compact(I,ie,J))});return function(A,ie,J){return R.apply(this,arguments)}}(),Object.defineProperty(Se,"documentLoader",{get:()=>Se._documentLoader,set:R=>Se._documentLoader=R}),Se.documentLoader=function(){var R=Q(function*(A){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:A})});return function(A){return R.apply(this,arguments)}}(),Se.get=function(){var R=Q(function*(A,ie){let J;J="function"==typeof ie.documentLoader?ie.documentLoader:Se.documentLoader;const He=yield J(A);try{if(!He.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(He.document)&&(He.document=JSON.parse(He.document))}catch(Xe){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Xe,remoteDoc:He})}return He});return function(A,ie){return R.apply(this,arguments)}}(),Se.processContext=function(){var R=Q(function*(A,ie,J){return J=fe(J,{base:"",contextResolver:new X({sharedCache:Ye})}),null===ie?b(J):(ie=z.clone(ie),G(ie)&&"@context"in ie||(ie={"@context":ie}),M({activeCtx:A,localCtx:ie,options:J}))});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.getContextValue=S(429).getContextValue,Se.documentLoaders={},Se.useDocumentLoader=function(R){if(!(R in Se.documentLoaders))throw new E('Unknown document loader type: "'+R+'"',"jsonld.UnknownDocumentLoader",{type:R});Se.documentLoader=Se.documentLoaders[R].apply(Se,Array.prototype.slice.call(arguments,1))},Se.registerRDFParser=function(R,A){nt[R]=A},Se.unregisterRDFParser=function(R){delete nt[R]},Se.registerRDFParser("application/n-quads",W.parse),Se.registerRDFParser("application/nquads",W.parse),Se.url=S(2051),Se.logEventHandler=Oe,Se.logWarningEventHandler=Ve,Se.safeEventHandler=Ze,Se.setDefaultEventHandler=Je,Se.strictEventHandler=ke,Se.unhandledEventHandler=Ae,Se.util=z,Object.assign(Se,z),Se.promises=Se,Se.RequestQueue=S(4808),Se.JsonLdProcessor=S(1328)(Se),Y.setupGlobals(Se),Y.setupDocumentLoaders(Se),Se},de=function(){return Be(function(){return de()})};Be(de),je.exports=de},5096:(je,me,S)=>{"use strict";const{isKeyword:Q}=S(429),C=S(4209),Y=S(2831),z=S(9420),X=S(262),_={};je.exports=_,_.createMergedNodeMap=(E,F)=>{const W=(F=F||{}).issuer||new z.IdentifierIssuer("_:b"),N={"@default":{}};return _.createNodeMap(E,N,"@default",W),_.mergeNodeMaps(N)},_.createNodeMap=(E,F,W,N,D,se)=>{if(Y.isArray(E)){for(const $ of E)_.createNodeMap($,F,W,N,void 0,se);return}if(!Y.isObject(E))return void(se&&se.push(E));if(C.isValue(E)){if("@type"in E){let $=E["@type"];0===$.indexOf("_:")&&(E["@type"]=$=N.getId($))}return void(se&&se.push(E))}if(se&&C.isList(E)){const $=[];return _.createNodeMap(E["@list"],F,W,N,D,$),void se.push({"@list":$})}if("@type"in E){const $=E["@type"];for(const G of $)0===G.indexOf("_:")&&N.getId(G)}Y.isUndefined(D)&&(D=C.isBlankNode(E)?N.getId(E["@id"]):E["@id"]),se&&se.push({"@id":D});const x=F[W],B=x[D]=x[D]||{};B["@id"]=D;const oe=Object.keys(E).sort();for(let $ of oe){if("@id"===$)continue;if("@reverse"===$){const ee={"@id":D},q=E["@reverse"];for(const k in q){const b=q[k];for(const M of b){let T=M["@id"];C.isBlankNode(M)&&(T=N.getId(T)),_.createNodeMap(M,F,W,N,T),z.addValue(x[T],k,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===$){D in F||(F[D]={}),_.createNodeMap(E[$],F,D,N);continue}if("@included"===$){_.createNodeMap(E[$],F,W,N);continue}if("@type"!==$&&Q($)){if("@index"===$&&$ in B&&(E[$]!==B[$]||E[$]["@id"]!==B[$]["@id"]))throw new X("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:B});B[$]=E[$];continue}const G=E[$];if(0===$.indexOf("_:")&&($=N.getId($)),0!==G.length)for(let ee of G)if("@type"===$&&(ee=0===ee.indexOf("_:")?N.getId(ee):ee),C.isSubject(ee)||C.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const q=C.isBlankNode(ee)?N.getId(ee["@id"]):ee["@id"];z.addValue(B,$,{"@id":q},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ee,F,W,N,q)}else if(C.isValue(ee))z.addValue(B,$,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(C.isList(ee)){const q=[];_.createNodeMap(ee["@list"],F,W,N,D,q),ee={"@list":q},z.addValue(B,$,ee,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ee,F,W,N,D),z.addValue(B,$,ee,{propertyIsArray:!0,allowDuplicate:!1});else z.addValue(B,$,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=E=>{const F={};for(const W of Object.keys(E).sort())for(const N of Object.keys(E[W]).sort()){const D=E[W][N];N in F||(F[N]={"@id":N});const se=F[N];for(const x of Object.keys(D).sort())if(Q(x)&&"@type"!==x)se[x]=z.clone(D[x]);else for(const B of D[x])z.addValue(se,x,z.clone(B),{propertyIsArray:!0,allowDuplicate:!1})}return F},_.mergeNodeMaps=E=>{const F=E["@default"],W=Object.keys(E).sort();for(const N of W){if("@default"===N)continue;const D=E[N];let se=F[N];se?"@graph"in se||(se["@graph"]=[]):F[N]=se={"@id":N,"@graph":[]};const x=se["@graph"];for(const B of Object.keys(D).sort()){const oe=D[B];C.isSubjectReference(oe)||x.push(oe)}}return F}},8666:(je,me,S)=>{"use strict";const Q=S(3120),C={};je.exports=C,C.setupDocumentLoaders=function(Y){typeof XMLHttpRequest<"u"&&(Y.documentLoaders.xhr=Q,Y.useDocumentLoader("xhr"))},C.setupGlobals=function(Y){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:Y.JsonLdProcessor})}},6397:(je,me,S)=>{"use strict";const{createNodeMap:Q}=S(5096),{isKeyword:C}=S(429),Y=S(4209),z=S(3988),X=S(262),_=S(2831),E=S(9420),{handleEvent:F}=S(2585),{RDF_FIRST:W,RDF_REST:N,RDF_NIL:D,RDF_TYPE:se,RDF_JSON_LITERAL:x,RDF_LANGSTRING:B,XSD_BOOLEAN:oe,XSD_DOUBLE:$,XSD_INTEGER:G,XSD_STRING:ee}=S(5315),{isAbsolute:q}=S(2051),k={};function b(ce,j,Me,ae,xe){const Oe=Object.keys(j).sort();for(const Ve of Oe){const Ze=j[Ve],Je=Object.keys(Ze).sort();for(let Ce of Je){const ke=Ze[Ce];if("@type"===Ce)Ce=se;else if(C(Ce))continue;for(const Ae of ke){const Be={termType:Ve.startsWith("_:")?"BlankNode":"NamedNode",value:Ve};if(!q(Ve)){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ve}},options:xe});continue}const de={termType:Ce.startsWith("_:")?"BlankNode":"NamedNode",value:Ce};if(!q(Ce)){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ce}},options:xe});continue}if("BlankNode"===de.termType&&!xe.produceGeneralizedRdf){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ae.getOldIds().find(nt=>ae.getId(nt)===Ce)}},options:xe});continue}const Se=T(Ae,ae,ce,Me,xe.rdfDirection,xe);Se&&ce.push({subject:Be,predicate:de,object:Se,graph:Me})}}}}function T(ce,j,Me,ae,xe,Oe){const Ve={};if(Y.isValue(ce)){Ve.termType="Literal",Ve.value=void 0,Ve.datatype={termType:"NamedNode"};let Ze=ce["@value"];const Je=ce["@type"]||null;if("@json"===Je)Ve.value=z(Ze),Ve.datatype.value=x;else if(_.isBoolean(Ze))Ve.value=Ze.toString(),Ve.datatype.value=Je||oe;else if(_.isDouble(Ze)||Je===$)_.isDouble(Ze)||(Ze=parseFloat(Ze)),Ve.value=Ze.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ve.datatype.value=Je||$;else if(_.isNumber(Ze))Ve.value=Ze.toFixed(0),Ve.datatype.value=Je||G;else if("@direction"in ce&&"i18n-datatype"===xe){const Ce=(ce["@language"]||"").toLowerCase();Ve.datatype.value=`https://www.w3.org/ns/i18n#${Ce}_${ce["@direction"]}`,Ve.value=Ze}else{if("@direction"in ce&&"compound-literal"===xe)throw new X("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});if("@direction"in ce&&xe)throw new X("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});"@language"in ce?("@direction"in ce&&!xe&&Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ve.value}},options:Oe}),Ve.value=Ze,Ve.datatype.value=Je||B,Ve.language=ce["@language"]):("@direction"in ce&&!xe&&Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ve.value}},options:Oe}),Ve.value=Ze,Ve.datatype.value=Je||ee)}}else if(Y.isList(ce)){const Ze=function M(ce,j,Me,ae,xe,Oe){const Ve={termType:"NamedNode",value:W},Ze={termType:"NamedNode",value:N},Je={termType:"NamedNode",value:D},Ce=ce.pop(),ke=Ce?{termType:"BlankNode",value:j.getId()}:Je;let Ae=ke;for(const Be of ce){const de=T(Be,j,Me,ae,xe,Oe),Se={termType:"BlankNode",value:j.getId()};Me.push({subject:Ae,predicate:Ve,object:de,graph:ae}),Me.push({subject:Ae,predicate:Ze,object:Se,graph:ae}),Ae=Se}if(Ce){const Be=T(Ce,j,Me,ae,xe,Oe);Me.push({subject:Ae,predicate:Ve,object:Be,graph:ae}),Me.push({subject:Ae,predicate:Ze,object:Je,graph:ae})}return ke}(ce["@list"],j,Me,ae,xe,Oe);Ve.termType=Ze.termType,Ve.value=Ze.value}else{const Ze=_.isObject(ce)?ce["@id"]:ce;Ve.termType=Ze.startsWith("_:")?"BlankNode":"NamedNode",Ve.value=Ze}return"NamedNode"!==Ve.termType||q(Ve.value)?Ve:(Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ve.value}},options:Oe}),null)}je.exports=k,k.toRDF=(ce,j)=>{const Me=new E.IdentifierIssuer("_:b"),ae={"@default":{}};Q(ce,ae,"@default",Me);const xe=[],Oe=Object.keys(ae).sort();for(const Ve of Oe){let Ze;if("@default"===Ve)Ze={termType:"DefaultGraph",value:""};else{if(!q(Ve)){j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ve}},options:j});continue}Ze=Ve.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Ze.value=Ve}b(xe,ae[Ve],Ze,Me,j)}return xe}},2831:je=>{"use strict";const me={};je.exports=me,me.isArray=Array.isArray,me.isBoolean=S=>"boolean"==typeof S||"[object Boolean]"===Object.prototype.toString.call(S),me.isDouble=S=>me.isNumber(S)&&(-1!==String(S).indexOf(".")||Math.abs(S)>=1e21),me.isEmptyObject=S=>me.isObject(S)&&0===Object.keys(S).length,me.isNumber=S=>"number"==typeof S||"[object Number]"===Object.prototype.toString.call(S),me.isNumeric=S=>!isNaN(parseFloat(S))&&isFinite(S),me.isObject=S=>"[object Object]"===Object.prototype.toString.call(S),me.isString=S=>"string"==typeof S||"[object String]"===Object.prototype.toString.call(S),me.isUndefined=S=>typeof S>"u"},2051:(je,me,S)=>{"use strict";const Q=S(2831),C={};je.exports=C,C.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},C.parse=(z,X)=>{const _={},E=C.parsers[X||"full"],F=E.regex.exec(z);let W=E.keys.length;for(;W--;)_[E.keys[W]]=void 0===F[W]?null:F[W];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=C.removeDotSegments(_.path),_},C.prependBase=(z,X)=>{if(null===z||C.isAbsolute(X))return X;(!z||Q.isString(z))&&(z=C.parse(z||""));const _=C.parse(X),E={protocol:z.protocol||""};if(null!==_.authority)E.authority=_.authority,E.path=_.path,E.query=_.query;else if(E.authority=z.authority,""===_.path)E.path=z.path,E.query=null!==_.query?_.query:z.query;else{if(0===_.path.indexOf("/"))E.path=_.path;else{let W=z.path;W=W.substr(0,W.lastIndexOf("/")+1),(W.length>0||z.authority)&&"/"!==W.substr(-1)&&(W+="/"),W+=_.path,E.path=W}E.query=_.query}""!==_.path&&(E.path=C.removeDotSegments(E.path));let F=E.protocol;return null!==E.authority&&(F+="//"+E.authority),F+=E.path,null!==E.query&&(F+="?"+E.query),null!==_.fragment&&(F+="#"+_.fragment),""===F&&(F="./"),F},C.removeBase=(z,X)=>{if(null===z)return X;(!z||Q.isString(z))&&(z=C.parse(z||""));let _="";if(""!==z.href?_+=(z.protocol||"")+"//"+(z.authority||""):X.indexOf("//")&&(_+="//"),0!==X.indexOf(_))return X;const E=C.parse(X.substr(_.length)),F=z.normalizedPath.split("/"),W=E.normalizedPath.split("/"),N=E.fragment||E.query?0:1;for(;F.length>0&&W.length>N&&F[0]===W[0];)F.shift(),W.shift();let D="";if(F.length>0){F.pop();for(let se=0;se<F.length;++se)D+="../"}return D+=W.join("/"),null!==E.query&&(D+="?"+E.query),null!==E.fragment&&(D+="#"+E.fragment),""===D&&(D="./"),D},C.removeDotSegments=z=>{if(0===z.length)return"";const X=z.split("/"),_=[];for(;X.length>0;){const E=X.shift(),F=0===X.length;"."!==E?".."!==E?_.push(E):(_.pop(),F&&_.push("")):F&&_.push("")}return"/"===z[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const Y=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;C.isAbsolute=z=>Q.isString(z)&&Y.test(z),C.isRelative=z=>Q.isString(z)},9420:(je,me,S)=>{"use strict";const Q=S(4209),C=S(2831),Y=S(1224).IdentifierIssuer,z=S(262),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,F=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,N_headers_accept="application/ld+json, application/json",D={};function se(x,B){if(C.isArray(B))for(let oe=0;oe<B.length;++oe)B[oe]=se(x,B[oe]);else if(Q.isList(B))B["@list"]=se(x,B["@list"]);else if(C.isObject(B)){Q.isBlankNode(B)&&(B["@id"]=x.getId(B["@id"]));const oe=Object.keys(B).sort();for(let $=0;$<oe.length;++$){const G=oe[$];"@id"!==G&&(B[G]=se(x,B[G]))}}return B}je.exports=D,D.IdentifierIssuer=Y,D.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,D.REGEX_KEYWORD=/^@[a-zA-Z]+$/,D.clone=function(x){if(x&&"object"==typeof x){let B;if(C.isArray(x)){B=[];for(let oe=0;oe<x.length;++oe)B[oe]=D.clone(x[oe])}else if(x instanceof Map){B=new Map;for(const[oe,$]of x)B.set(oe,D.clone($))}else if(x instanceof Set){B=new Set;for(const oe of x)B.add(D.clone(oe))}else if(C.isObject(x)){B={};for(const oe in x)B[oe]=D.clone(x[oe])}else B=x.toString();return B}return x},D.asArray=function(x){return Array.isArray(x)?x:[x]},D.buildHeaders=(x={})=>{if(Object.keys(x).some(oe=>"accept"===oe.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+N_headers_accept+'" is supported.');return Object.assign({Accept:N_headers_accept},x)},D.parseLinkHeader=x=>{const B={},oe=x.match(_);for(let $=0;$<oe.length;++$){let G=oe[$].match(E);if(!G)continue;const ee={target:G[1]},q=G[2];for(;G=F.exec(q);)ee[G[1]]=void 0===G[2]?G[3]:G[2];const k=ee.rel||"";Array.isArray(B[k])?B[k].push(ee):B[k]=B.hasOwnProperty(k)?[B[k],ee]:ee}return B},D.validateTypeValue=(x,B)=>{if(!(C.isString(x)||C.isArray(x)&&x.every(oe=>C.isString(oe)))){if(B&&C.isObject(x))switch(Object.keys(x).length){case 0:return;case 1:if("@default"in x&&D.asArray(x["@default"]).every(oe=>C.isString(oe)))return}throw new z('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:x})}},D.hasProperty=(x,B)=>{if(x.hasOwnProperty(B)){const oe=x[B];return!C.isArray(oe)||oe.length>0}return!1},D.hasValue=(x,B,oe)=>{if(D.hasProperty(x,B)){let $=x[B];const G=Q.isList($);if(C.isArray($)||G){G&&($=$["@list"]);for(let ee=0;ee<$.length;++ee)if(D.compareValues(oe,$[ee]))return!0}else if(!C.isArray(oe))return D.compareValues(oe,$)}return!1},D.addValue=(x,B,oe,$)=>{if("propertyIsArray"in($=$||{})||($.propertyIsArray=!1),"valueIsArray"in $||($.valueIsArray=!1),"allowDuplicate"in $||($.allowDuplicate=!0),"prependValue"in $||($.prependValue=!1),$.valueIsArray)x[B]=oe;else if(C.isArray(oe)){0===oe.length&&$.propertyIsArray&&!x.hasOwnProperty(B)&&(x[B]=[]),$.prependValue&&(oe=oe.concat(x[B]),x[B]=[]);for(let G=0;G<oe.length;++G)D.addValue(x,B,oe[G],$)}else if(x.hasOwnProperty(B)){const G=!$.allowDuplicate&&D.hasValue(x,B,oe);!C.isArray(x[B])&&(!G||$.propertyIsArray)&&(x[B]=[x[B]]),G||($.prependValue?x[B].unshift(oe):x[B].push(oe))}else x[B]=$.propertyIsArray?[oe]:oe},D.getValues=(x,B)=>[].concat(x[B]||[]),D.removeProperty=(x,B)=>{delete x[B]},D.removeValue=(x,B,oe,$)=>{"propertyIsArray"in($=$||{})||($.propertyIsArray=!1);const G=D.getValues(x,B).filter(ee=>!D.compareValues(ee,oe));0===G.length?D.removeProperty(x,B):x[B]=1!==G.length||$.propertyIsArray?G:G[0]},D.relabelBlankNodes=(x,B)=>se((B=B||{}).issuer||new Y("_:b"),x),D.compareValues=(x,B)=>!!(x===B||Q.isValue(x)&&Q.isValue(B)&&x["@value"]===B["@value"]&&x["@type"]===B["@type"]&&x["@language"]===B["@language"]&&x["@index"]===B["@index"])||!!(C.isObject(x)&&"@id"in x&&C.isObject(B)&&"@id"in B)&&x["@id"]===B["@id"],D.compareShortestLeast=(x,B)=>x.length<B.length?-1:B.length<x.length?1:x===B?0:x<B?-1:1},3988:je=>{"use strict";je.exports=function me(S){return null===S||"object"!=typeof S||null!=S.toJSON?JSON.stringify(S):Array.isArray(S)?"["+S.reduce((Q,C,Y)=>Q+(0===Y?"":",")+me(void 0===C||"symbol"==typeof C?null:C),"")+"]":"{"+Object.keys(S).sort().reduce((Q,C,Y)=>void 0===S[C]||"symbol"==typeof S[C]?Q:Q+(0===Q.length?"":",")+me(C)+":"+me(S[C]),"")+"}"}},3052:(je,me,S)=>{"use strict";const Q=S(3748),C=Symbol("max"),Y=Symbol("length"),z=Symbol("lengthCalculator"),X=Symbol("allowStale"),_=Symbol("maxAge"),E=Symbol("dispose"),F=Symbol("noDisposeOnSet"),W=Symbol("lruList"),N=Symbol("cache"),D=Symbol("updateAgeOnGet"),se=()=>1,B=(k,b,M)=>{const T=k[N].get(b);if(T){const ce=T.value;if(oe(k,ce)){if(G(k,T),!k[X])return}else M&&(k[D]&&(T.value.now=Date.now()),k[W].unshiftNode(T));return ce.value}},oe=(k,b)=>{if(!b||!b.maxAge&&!k[_])return!1;const M=Date.now()-b.now;return b.maxAge?M>b.maxAge:k[_]&&M>k[_]},$=k=>{if(k[Y]>k[C])for(let b=k[W].tail;k[Y]>k[C]&&null!==b;){const M=b.prev;G(k,b),b=M}},G=(k,b)=>{if(b){const M=b.value;k[E]&&k[E](M.key,M.value),k[Y]-=M.length,k[N].delete(M.key),k[W].removeNode(b)}};class ee{constructor(b,M,T,ce,j){this.key=b,this.value=M,this.length=T,this.now=ce,this.maxAge=j||0}}const q=(k,b,M,T)=>{let ce=M.value;oe(k,ce)&&(G(k,M),k[X]||(ce=void 0)),ce&&b.call(T,ce.value,ce.key,k)};je.exports=class x{constructor(b){if("number"==typeof b&&(b={max:b}),b||(b={}),b.max&&("number"!=typeof b.max||b.max<0))throw new TypeError("max must be a non-negative number");this[C]=b.max||1/0;const T=b.length||se;if(this[z]="function"!=typeof T?se:T,this[X]=b.stale||!1,b.maxAge&&"number"!=typeof b.maxAge)throw new TypeError("maxAge must be a number");this[_]=b.maxAge||0,this[E]=b.dispose,this[F]=b.noDisposeOnSet||!1,this[D]=b.updateAgeOnGet||!1,this.reset()}set max(b){if("number"!=typeof b||b<0)throw new TypeError("max must be a non-negative number");this[C]=b||1/0,$(this)}get max(){return this[C]}set allowStale(b){this[X]=!!b}get allowStale(){return this[X]}set maxAge(b){if("number"!=typeof b)throw new TypeError("maxAge must be a non-negative number");this[_]=b,$(this)}get maxAge(){return this[_]}set lengthCalculator(b){"function"!=typeof b&&(b=se),b!==this[z]&&(this[z]=b,this[Y]=0,this[W].forEach(M=>{M.length=this[z](M.value,M.key),this[Y]+=M.length})),$(this)}get lengthCalculator(){return this[z]}get length(){return this[Y]}get itemCount(){return this[W].length}rforEach(b,M){M=M||this;for(let T=this[W].tail;null!==T;){const ce=T.prev;q(this,b,T,M),T=ce}}forEach(b,M){M=M||this;for(let T=this[W].head;null!==T;){const ce=T.next;q(this,b,T,M),T=ce}}keys(){return this[W].toArray().map(b=>b.key)}values(){return this[W].toArray().map(b=>b.value)}reset(){this[E]&&this[W]&&this[W].length&&this[W].forEach(b=>this[E](b.key,b.value)),this[N]=new Map,this[W]=new Q,this[Y]=0}dump(){return this[W].map(b=>!oe(this,b)&&{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[W]}set(b,M,T){if((T=T||this[_])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const ce=T?Date.now():0,j=this[z](M,b);if(this[N].has(b)){if(j>this[C])return G(this,this[N].get(b)),!1;const xe=this[N].get(b).value;return this[E]&&(this[F]||this[E](b,xe.value)),xe.now=ce,xe.maxAge=T,xe.value=M,this[Y]+=j-xe.length,xe.length=j,this.get(b),$(this),!0}const Me=new ee(b,M,j,ce,T);return Me.length>this[C]?(this[E]&&this[E](b,M),!1):(this[Y]+=Me.length,this[W].unshift(Me),this[N].set(b,this[W].head),$(this),!0)}has(b){if(!this[N].has(b))return!1;const M=this[N].get(b).value;return!oe(this,M)}get(b){return B(this,b,!0)}peek(b){return B(this,b,!1)}pop(){const b=this[W].tail;return b?(G(this,b),b.value):null}del(b){G(this,this[N].get(b))}load(b){this.reset();const M=Date.now();for(let T=b.length-1;T>=0;T--){const ce=b[T],j=ce.e||0;if(0===j)this.set(ce.k,ce.v);else{const Me=j-M;Me>0&&this.set(ce.k,ce.v,Me)}}}prune(){this[N].forEach((b,M)=>B(this,M,!1))}}},7376:function(je,me,S){var Q;je=S.nmd(je),function(){var C,_="Expected a function",F="__lodash_hash_undefined__",N="__lodash_placeholder__",b=32,T=128,Ce=1/0,ke=9007199254740991,de=4294967295,mt=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",b],["partialRight",64],["rearg",256]],Ye="[object Arguments]",fe="[object Array]",A="[object Boolean]",ie="[object Date]",He="[object Error]",Xe="[object Function]",ue="[object GeneratorFunction]",te="[object Map]",U="[object Number]",O="[object Object]",he="[object Promise]",Ee="[object RegExp]",Ue="[object Set]",Qe="[object String]",vt="[object Symbol]",wt="[object WeakMap]",pe="[object ArrayBuffer]",H="[object DataView]",ne="[object Float32Array]",Le="[object Float64Array]",tt="[object Int8Array]",lt="[object Int16Array]",xt="[object Int32Array]",nn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",An="[object Uint32Array]",vn=/\b__p \+= '';/g,Ni=/\b(__p \+=) '' \+/g,ta=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lr=/&(?:amp|lt|gt|quot|#39);/g,Fs=/[&<>"']/g,ao=RegExp(lr.source),Gi=RegExp(Fs.source),Lr=/<%-([\s\S]+?)%>/g,lo=/<%([\s\S]+?)%>/g,rc=/<%=([\s\S]+?)%>/g,Ka=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sl=/^\w*$/,Ja=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ze=/[\\^$.*+?()[\]{}|]/g,Ke=RegExp(ze.source),zt=/^\s+/,At=/\s/,rn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cr=/\{\n\/\* \[wrapped with (.+)\] \*/,as=/,? & /,Za=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jt=/[()=,{}\[\]\/\s]/,Ca=/\\(\\)?/g,Ji=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ta=/\w*$/,dn=/^[-+]0x[0-9a-f]+$/i,Zn=/^0b[01]+$/i,Bs=/^\[object .+?Constructor\]$/,Xt=/^0o[0-7]+$/i,$s=/^(?:0|[1-9]\d*)$/,ls=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,St=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",ge="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",Qt="A-Z\\xc0-\\xd6\\xd8-\\xde",bn="\\ufe0e\\ufe0f",On="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",co="["+Te+"]",oi="["+On+"]",Ma="["+ge+"]",ei="\\d+",Es="["+Pe+"]",Qc="["+$e+"]",eu="[^"+Te+On+ei+Pe+$e+Qt+"]",Qn="\\ud83c[\\udffb-\\udfff]",tu="[^"+Te+"]",As="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+Qt+"]",_t="(?:"+Qc+"|"+eu+")",Vt="(?:"+Ge+"|"+eu+")",en="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fr="(?:"+Ma+"|"+Qn+")?",Br="["+bn+"]?",uo=Br+Fr+"(?:\\u200d(?:"+[tu,As,De].join("|")+")"+Br+Fr+")*",In="(?:"+[Es,As,De].join("|")+")"+uo,yF="(?:"+[tu+Ma+"?",Ma,As,De,co].join("|")+")",vF=RegExp("['\u2019]","g"),bF=RegExp(Ma,"g"),wb=RegExp(Qn+"(?="+Qn+")|"+yF+uo,"g"),wF=RegExp([Ge+"?"+Qc+"+"+en+"(?="+[oi,Ge,"$"].join("|")+")",Vt+"+"+Kn+"(?="+[oi,Ge+_t,"$"].join("|")+")",Ge+"?"+_t+"+"+en,Ge+"+"+Kn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ei,In].join("|"),"g"),Ot=RegExp("[\\u200d"+Te+ge+bn+"]"),xF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Uo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gp=-1,Zi={};Zi[ne]=Zi[Le]=Zi[tt]=Zi[lt]=Zi[xt]=Zi[nn]=Zi[Fn]=Zi[Hn]=Zi[An]=!0,Zi[Ye]=Zi[fe]=Zi[pe]=Zi[A]=Zi[H]=Zi[ie]=Zi[He]=Zi[Xe]=Zi[te]=Zi[U]=Zi[O]=Zi[Ee]=Zi[Ue]=Zi[Qe]=Zi[wt]=!1;var ji={};ji[Ye]=ji[fe]=ji[pe]=ji[H]=ji[A]=ji[ie]=ji[ne]=ji[Le]=ji[tt]=ji[lt]=ji[xt]=ji[te]=ji[U]=ji[O]=ji[Ee]=ji[Ue]=ji[Qe]=ji[vt]=ji[nn]=ji[Fn]=ji[Hn]=ji[An]=!0,ji[He]=ji[Xe]=ji[wt]=!1;var c_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xb=parseFloat,zS=parseInt,Et="object"==typeof global&&global&&global.Object===Object&&global,u_="object"==typeof self&&self&&self.Object===Object&&self,Wr=Et||u_||Function("return this")(),d_=me&&!me.nodeType&&me,nu=d_&&je&&!je.nodeType&&je,Eb=nu&&nu.exports===d_,wh=Eb&&Et.process,Ia=function(){try{return nu&&nu.require&&nu.require("util").types||wh&&wh.binding&&wh.binding("util")}catch{}}(),WS=Ia&&Ia.isArrayBuffer,$S=Ia&&Ia.isDate,qS=Ia&&Ia.isMap,yp=Ia&&Ia.isRegExp,id=Ia&&Ia.isSet,vp=Ia&&Ia.isTypedArray;function qs(ht,It,bt){switch(bt.length){case 0:return ht.call(It);case 1:return ht.call(It,bt[0]);case 2:return ht.call(It,bt[0],bt[1]);case 3:return ht.call(It,bt[0],bt[1],bt[2])}return ht.apply(It,bt)}function Ab(ht,It,bt,Ht){for(var Dn=-1,hi=null==ht?0:ht.length;++Dn<hi;){var Ir=ht[Dn];It(Ht,Ir,bt(Ir),ht)}return Ht}function kr(ht,It){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht&&!1!==It(ht[bt],bt,ht););return ht}function xh(ht,It){for(var bt=null==ht?0:ht.length;bt--&&!1!==It(ht[bt],bt,ht););return ht}function h_(ht,It){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht;)if(!It(ht[bt],bt,ht))return!1;return!0}function Sn(ht,It){for(var bt=-1,Ht=null==ht?0:ht.length,Dn=0,hi=[];++bt<Ht;){var Ir=ht[bt];It(Ir,bt,ht)&&(hi[Dn++]=Ir)}return hi}function di(ht,It){return!(null==ht||!ht.length)&&Sh(ht,It,0)>-1}function Sb(ht,It,bt){for(var Ht=-1,Dn=null==ht?0:ht.length;++Ht<Dn;)if(bt(It,ht[Ht]))return!0;return!1}function ur(ht,It){for(var bt=-1,Ht=null==ht?0:ht.length,Dn=Array(Ht);++bt<Ht;)Dn[bt]=It(ht[bt],bt,ht);return Dn}function sc(ht,It){for(var bt=-1,Ht=It.length,Dn=ht.length;++bt<Ht;)ht[Dn+bt]=It[bt];return ht}function Cb(ht,It,bt,Ht){var Dn=-1,hi=null==ht?0:ht.length;for(Ht&&hi&&(bt=ht[++Dn]);++Dn<hi;)bt=It(bt,ht[Dn],Dn,ht);return bt}function YS(ht,It,bt,Ht){var Dn=null==ht?0:ht.length;for(Ht&&Dn&&(bt=ht[--Dn]);Dn--;)bt=It(bt,ht[Dn],Dn,ht);return bt}function Eh(ht,It){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht;)if(It(ht[bt],bt,ht))return!0;return!1}var ai=sd("length");function Ys(ht,It,bt){var Ht;return bt(ht,function(Dn,hi,Ir){if(It(Dn,hi,Ir))return Ht=hi,!1}),Ht}function Ah(ht,It,bt,Ht){for(var Dn=ht.length,hi=bt+(Ht?1:-1);Ht?hi--:++hi<Dn;)if(It(ht[hi],hi,ht))return hi;return-1}function Sh(ht,It,bt){return It==It?function ud(ht,It,bt){for(var Ht=bt-1,Dn=ht.length;++Ht<Dn;)if(ht[Ht]===It)return Ht;return-1}(ht,It,bt):Ah(ht,rd,bt)}function EF(ht,It,bt,Ht){for(var Dn=bt-1,hi=ht.length;++Dn<hi;)if(Ht(ht[Dn],It))return Dn;return-1}function rd(ht){return ht!=ht}function bp(ht,It){var bt=null==ht?0:ht.length;return bt?wp(ht,It)/bt:NaN}function sd(ht){return function(It){return null==It?C:It[ht]}}function p_(ht){return function(It){return null==ht?C:ht[It]}}function Mb(ht,It,bt,Ht,Dn){return Dn(ht,function(hi,Ir,Si){bt=Ht?(Ht=!1,hi):It(bt,hi,Ir,Si)}),bt}function wp(ht,It){for(var bt,Ht=-1,Dn=ht.length;++Ht<Dn;){var hi=It(ht[Ht]);hi!==C&&(bt=bt===C?hi:bt+hi)}return bt}function oc(ht,It){for(var bt=-1,Ht=Array(ht);++bt<ht;)Ht[bt]=It(bt);return Ht}function Cl(ht){return ht&&ht.slice(0,Ep(ht)+1).replace(zt,"")}function Vo(ht){return function(It){return ht(It)}}function ct(ht,It){return ur(It,function(bt){return ht[bt]})}function od(ht,It){return ht.has(It)}function jt(ht,It){for(var bt=-1,Ht=ht.length;++bt<Ht&&Sh(It,ht[bt],0)>-1;);return bt}function Ch(ht,It){for(var bt=ht.length;bt--&&Sh(It,ht[bt],0)>-1;);return bt}var Th=p_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),JS=p_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ZS(ht){return"\\"+c_[ht]}function ad(ht){return Ot.test(ht)}function cd(ht){var It=-1,bt=Array(ht.size);return ht.forEach(function(Ht,Dn){bt[++It]=[Dn,Ht]}),bt}function Ib(ht,It){return function(bt){return ht(It(bt))}}function ho(ht,It){for(var bt=-1,Ht=ht.length,Dn=0,hi=[];++bt<Ht;){var Ir=ht[bt];(Ir===It||Ir===N)&&(ht[bt]=N,hi[Dn++]=bt)}return hi}function xp(ht){var It=-1,bt=Array(ht.size);return ht.forEach(function(Ht){bt[++It]=Ht}),bt}function Tl(ht){return ad(ht)?function Rb(ht){for(var It=wb.lastIndex=0;wb.test(ht);)++It;return It}(ht):ai(ht)}function po(ht){return ad(ht)?function SF(ht){return ht.match(wb)||[]}(ht):function f_(ht){return ht.split("")}(ht)}function Ep(ht){for(var It=ht.length;It--&&At.test(ht.charAt(It)););return It}var AF=p_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ml=function ht(It){var d,bt=(It=null==It?Wr:Ml.defaults(Wr.Object(),It,Ml.pick(Wr,Uo))).Array,Ht=It.Date,Dn=It.Error,hi=It.Function,Ir=It.Math,Si=It.Object,dd=It.RegExp,Da=It.String,qt=It.TypeError,Ap=bt.prototype,iu=Si.prototype,Mh=It["__core-js_shared__"],ac=hi.prototype.toString,Ci=iu.hasOwnProperty,Ob=0,Nb=(d=/[^.]+$/.exec(Mh&&Mh.keys&&Mh.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",hd=iu.toString,tC=ac.call(Si),nC=Wr._,Ra=dd("^"+ac.call(Ci).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sp=Eb?It.Buffer:C,Il=It.Symbol,Cp=It.Uint8Array,Pb=Sp?Sp.allocUnsafe:C,Tp=Ib(Si.getPrototypeOf,Si),Lb=Si.create,y_=iu.propertyIsEnumerable,Mp=Ap.splice,Fb=Il?Il.isConcatSpreadable:C,Ih=Il?Il.iterator:C,mi=Il?Il.toStringTag:C,Ip=function(){try{var d=_u(Si,"defineProperty");return d({},"",{}),d}catch{}}(),iC=It.clearTimeout!==Wr.clearTimeout&&It.clearTimeout,ia=Ht&&Ht.now!==Wr.Date.now&&Ht.now,Bb=It.setTimeout!==Wr.setTimeout&&It.setTimeout,$t=Ir.ceil,$r=Ir.floor,zn=Si.getOwnPropertySymbols,qr=Sp?Sp.isBuffer:C,cs=It.isFinite,lc=Ap.join,js=Ib(Si.keys,Si),jr=Ir.max,Ss=Ir.min,Dp=Ht.now,rC=It.parseInt,kb=Ir.random,Rp=Ap.reverse,v_=_u(It,"DataView"),ru=_u(It,"Map"),Op=_u(It,"Promise"),Dl=_u(It,"Set"),Np=_u(It,"WeakMap"),su=_u(Si,"create"),Pp=Np&&new Np,cc={},jb=yu(v_),Ub=yu(ru),ou=yu(Op),sC=yu(Dl),b_=yu(Np),au=Il?Il.prototype:C,Dh=au?au.valueOf:C,Lp=au?au.toString:C;function Re(d){if(Or(d)&&!jn(d)&&!(d instanceof li)){if(d instanceof go)return d;if(Ci.call(d,"__wrapped__"))return q_(d)}return new go(d)}var Cs=function(){function d(){}return function(p){if(!Cr(p))return{};if(Lb)return Lb(p);d.prototype=p;var y=new d;return d.prototype=C,y}}();function Rl(){}function go(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=C}function li(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function lu(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function ra(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Ol(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function cu(d){var p=-1,y=null==d?0:d.length;for(this.__data__=new Ol;++p<y;)this.add(d[p])}function mo(d){var p=this.__data__=new ra(d);this.size=p.size}function Ts(d,p){var y=jn(d),K=!y&&Pl(d),we=!y&&!K&&Ll(d),Fe=!y&&!K&&!we&&Fa(d),et=y||K||we||Fe,ot=et?oc(d.length,Da):[],pt=ot.length;for(var Dt in d)(p||Ci.call(d,Dt))&&(!et||!("length"==Dt||we&&("offset"==Dt||"parent"==Dt)||Fe&&("buffer"==Dt||"byteLength"==Dt||"byteOffset"==Dt)||xo(Dt,pt)))&&ot.push(Dt);return ot}function _o(d){var p=d.length;return p?d[kh(0,p-1)]:C}function gd(d,p){return Jh(wo(d),sa(p,0,d.length))}function zi(d){return Jh(wo(d))}function Xr(d,p,y){(y!==C&&!Co(d[p],y)||y===C&&!(p in d))&&bi(d,p,y)}function Xs(d,p,y){var K=d[p];(!Ci.call(d,p)||!Co(K,y)||y===C&&!(p in d))&&bi(d,p,y)}function Tn(d,p){for(var y=d.length;y--;)if(Co(d[y][0],p))return y;return-1}function Oh(d,p,y,K){return yo(d,function(we,Fe,et){p(K,we,y(we),et)}),K}function E_(d,p){return d&&tl(p,Ms(p),d)}function bi(d,p,y){"__proto__"==p&&Ip?Ip(d,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):d[p]=y}function uu(d,p){for(var y=-1,K=p.length,we=bt(K),Fe=null==d;++y<K;)we[y]=Fe?C:xu(d,p[y]);return we}function sa(d,p,y){return d==d&&(y!==C&&(d=d<=y?d:y),p!==C&&(d=d>=p?d:p)),d}function Ur(d,p,y,K,we,Fe){var et,ot=1&p,pt=2&p,Dt=4&p;if(y&&(et=we?y(d,K,we,Fe):y(d)),et!==C)return et;if(!Cr(d))return d;var Nt=jn(d);if(Nt){if(et=function Xp(d){var p=d.length,y=new d.constructor(p);return p&&"string"==typeof d[0]&&Ci.call(d,"index")&&(y.index=d.index,y.input=d.input),y}(d),!ot)return wo(d,et)}else{var Ut=tr(d),Yt=Ut==Xe||Ut==ue;if(Ll(d))return R_(d,ot);if(Ut==O||Ut==Ye||Yt&&!we){if(et=pt||Yt?{}:Kp(d),!ot)return pt?function ti(d,p){return tl(d,yd(d),p)}(d,function md(d,p){return d&&tl(p,zs(p),d)}(et,d)):function Mt(d,p){return tl(d,qp(d),p)}(d,E_(et,d))}else{if(!ji[Ut])return we?d:{};et=function lw(d,p,y){var K=d.constructor;switch(p){case pe:return ew(d);case A:case ie:return new K(+d);case H:return function MC(d,p){var y=p?ew(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.byteLength)}(d,y);case ne:case Le:case tt:case lt:case xt:case nn:case Fn:case Hn:case An:return O_(d,y);case te:return new K;case U:case Qe:return new K(d);case Ee:return function IC(d){var p=new d.constructor(d.source,Ta.exec(d));return p.lastIndex=d.lastIndex,p}(d);case Ue:return new K;case vt:return function DC(d){return Dh?Si(Dh.call(d)):{}}(d)}}(d,Ut,ot)}}Fe||(Fe=new mo);var cn=Fe.get(d);if(cn)return cn;Fe.set(d,et),dy(d)?d.forEach(function(Rn){et.add(Ur(Rn,p,y,Rn,d,Fe))}):Sd(d)&&d.forEach(function(Rn,ni){et.set(ni,Ur(Rn,p,y,ni,d,Fe))});var $n=Nt?C:(Dt?pt?U_:Wh:pt?zs:Ms)(d);return kr($n||d,function(Rn,ni){$n&&(Rn=d[ni=Rn]),Xs(et,ni,Ur(Rn,p,y,ni,d,Fe))}),et}function A_(d,p,y){var K=y.length;if(null==d)return!K;for(d=Si(d);K--;){var we=y[K],et=d[we];if(et===C&&!(we in d)||!(0,p[we])(et))return!1}return!0}function Nl(d,p,y){if("function"!=typeof d)throw new qt(_);return Eo(function(){d.apply(C,y)},p)}function dc(d,p,y,K){var we=-1,Fe=di,et=!0,ot=d.length,pt=[],Dt=p.length;if(!ot)return pt;y&&(p=ur(p,Vo(y))),K?(Fe=Sb,et=!1):p.length>=200&&(Fe=od,et=!1,p=new cu(p));e:for(;++we<ot;){var Nt=d[we],Ut=null==y?Nt:y(Nt);if(Nt=K||0!==Nt?Nt:0,et&&Ut==Ut){for(var Yt=Dt;Yt--;)if(p[Yt]===Ut)continue e;pt.push(Nt)}else Fe(p,Ut,K)||pt.push(Nt)}return pt}Re.templateSettings={escape:Lr,evaluate:lo,interpolate:rc,variable:"",imports:{_:Re}},(Re.prototype=Rl.prototype).constructor=Re,(go.prototype=Cs(Rl.prototype)).constructor=go,(li.prototype=Cs(Rl.prototype)).constructor=li,lu.prototype.clear=function aC(){this.__data__=su?su(null):{},this.size=0},lu.prototype.delete=function lC(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},lu.prototype.get=function w_(d){var p=this.__data__;if(su){var y=p[d];return y===F?C:y}return Ci.call(p,d)?p[d]:C},lu.prototype.has=function uc(d){var p=this.__data__;return su?p[d]!==C:Ci.call(p,d)},lu.prototype.set=function Hb(d,p){var y=this.__data__;return this.size+=this.has(d)?0:1,y[d]=su&&p===C?F:p,this},ra.prototype.clear=function pd(){this.__data__=[],this.size=0},ra.prototype.delete=function cC(d){var p=this.__data__,y=Tn(p,d);return!(y<0||(y==p.length-1?p.pop():Mp.call(p,y,1),--this.size,0))},ra.prototype.get=function uC(d){var p=this.__data__,y=Tn(p,d);return y<0?C:p[y][1]},ra.prototype.has=function Yr(d){return Tn(this.__data__,d)>-1},ra.prototype.set=function Gb(d,p){var y=this.__data__,K=Tn(y,d);return K<0?(++this.size,y.push([d,p])):y[K][1]=p,this},Ol.prototype.clear=function Rh(){this.size=0,this.__data__={hash:new lu,map:new(ru||ra),string:new lu}},Ol.prototype.delete=function dC(d){var p=$p(this,d).delete(d);return this.size-=p?1:0,p},Ol.prototype.get=function hC(d){return $p(this,d).get(d)},Ol.prototype.has=function fC(d){return $p(this,d).has(d)},Ol.prototype.set=function pC(d,p){var y=$p(this,d),K=y.size;return y.set(d,p),this.size+=y.size==K?0:1,this},cu.prototype.add=cu.prototype.push=function gC(d){return this.__data__.set(d,F),this},cu.prototype.has=function x_(d){return this.__data__.has(d)},mo.prototype.clear=function dr(){this.__data__=new ra,this.size=0},mo.prototype.delete=function Wt(d){var p=this.__data__,y=p.delete(d);return this.size=p.size,y},mo.prototype.get=function mn(d){return this.__data__.get(d)},mo.prototype.has=function Dr(d){return this.__data__.has(d)},mo.prototype.set=function Oa(d,p){var y=this.__data__;if(y instanceof ra){var K=y.__data__;if(!ru||K.length<199)return K.push([d,p]),this.size=++y.size,this;y=this.__data__=new Ol(K)}return y.set(d,p),this.size=y.size,this};var yo=Ti(Qi),kn=Ti(us,!0);function S_(d,p){var y=!0;return yo(d,function(K,we,Fe){return y=!!p(K,we,Fe)}),y}function hc(d,p,y){for(var K=-1,we=d.length;++K<we;){var Fe=d[K],et=p(Fe);if(null!=et&&(ot===C?et==et&&!Js(et):y(et,ot)))var ot=et,pt=Fe}return pt}function Ph(d,p){var y=[];return yo(d,function(K,we,Fe){p(K,we,Fe)&&y.push(K)}),y}function Sr(d,p,y,K,we){var Fe=-1,et=d.length;for(y||(y=FC),we||(we=[]);++Fe<et;){var ot=d[Fe];p>0&&y(ot)?p>1?Sr(ot,p-1,y,K,we):sc(we,ot):K||(we[we.length]=ot)}return we}var vr=N_(),Fp=N_(!0);function Qi(d,p){return d&&vr(d,p,Ms)}function us(d,p){return d&&Fp(d,p,Ms)}function _d(d,p){return Sn(p,function(y){return al(d[y])})}function Go(d,p){for(var y=0,K=(p=Pa(p,d)).length;null!=d&&y<K;)d=d[ca(p[y++])];return y&&y==K?d:C}function Lh(d,p,y){var K=p(d);return jn(d)?K:sc(K,y(d))}function er(d){return null==d?d===C?"[object Undefined]":"[object Null]":mi&&mi in Si(d)?function aw(d){var p=Ci.call(d,mi),y=d[mi];try{d[mi]=C;var K=!0}catch{}var we=hd.call(d);return K&&(p?d[mi]=y:delete d[mi]),we}(d):function W_(d){return hd.call(d)}(d)}function Fh(d,p){return d>p}function mC(d,p){return null!=d&&Ci.call(d,p)}function _C(d,p){return null!=d&&p in Si(d)}function Bp(d,p,y){for(var K=y?Sb:di,we=d[0].length,Fe=d.length,et=Fe,ot=bt(Fe),pt=1/0,Dt=[];et--;){var Nt=d[et];et&&p&&(Nt=ur(Nt,Vo(p))),pt=Ss(Nt.length,pt),ot[et]=!y&&(p||we>=120&&Nt.length>=120)?new cu(et&&Nt):C}Nt=d[0];var Ut=-1,Yt=ot[0];e:for(;++Ut<we&&Dt.length<pt;){var cn=Nt[Ut],Mn=p?p(cn):cn;if(cn=y||0!==cn?cn:0,!(Yt?od(Yt,Mn):K(Dt,Mn,y))){for(et=Fe;--et;){var $n=ot[et];if(!($n?od($n,Mn):K(d[et],Mn,y)))continue e}Yt&&Yt.push(Mn),Dt.push(cn)}}return Dt}function du(d,p,y){var K=null==(d=VC(d,p=Pa(p,d)))?d:d[ca(ua(p))];return null==K?C:qs(K,d,y)}function vC(d){return Or(d)&&er(d)==Ye}function kp(d,p,y,K,we){return d===p||(null==d||null==p||!Or(d)&&!Or(p)?d!=d&&p!=p:function MF(d,p,y,K,we,Fe){var et=jn(d),ot=jn(p),pt=et?fe:tr(d),Dt=ot?fe:tr(p),Nt=(pt=pt==Ye?O:pt)==O,Ut=(Dt=Dt==Ye?O:Dt)==O,Yt=pt==Dt;if(Yt&&Ll(d)){if(!Ll(p))return!1;et=!0,Nt=!1}if(Yt&&!Nt)return Fe||(Fe=new mo),et||Fa(d)?j_(d,p,y,K,we,Fe):function sw(d,p,y,K,we,Fe,et){switch(y){case H:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case pe:return!(d.byteLength!=p.byteLength||!Fe(new Cp(d),new Cp(p)));case A:case ie:case U:return Co(+d,+p);case He:return d.name==p.name&&d.message==p.message;case Ee:case Qe:return d==p+"";case te:var ot=cd;case Ue:if(ot||(ot=xp),d.size!=p.size&&!(1&K))return!1;var Dt=et.get(d);if(Dt)return Dt==p;K|=2,et.set(d,p);var Nt=j_(ot(d),ot(p),K,we,Fe,et);return et.delete(d),Nt;case vt:if(Dh)return Dh.call(d)==Dh.call(p)}return!1}(d,p,pt,y,K,we,Fe);if(!(1&y)){var cn=Nt&&Ci.call(d,"__wrapped__"),Mn=Ut&&Ci.call(p,"__wrapped__");if(cn||Mn){var $n=cn?d.value():d,Rn=Mn?p.value():p;return Fe||(Fe=new mo),we($n,Rn,y,K,Fe)}}return!!Yt&&(Fe||(Fe=new mo),function ow(d,p,y,K,we,Fe){var et=1&y,ot=Wh(d),pt=ot.length;if(pt!=Wh(p).length&&!et)return!1;for(var Ut=pt;Ut--;){var Yt=ot[Ut];if(!(et?Yt in p:Ci.call(p,Yt)))return!1}var cn=Fe.get(d),Mn=Fe.get(p);if(cn&&Mn)return cn==p&&Mn==d;var $n=!0;Fe.set(d,p),Fe.set(p,d);for(var Rn=et;++Ut<pt;){var ni=d[Yt=ot[Ut]],ci=p[Yt];if(K)var Mo=et?K(ci,ni,Yt,p,d,Fe):K(ni,ci,Yt,d,p,Fe);if(!(Mo===C?ni===ci||we(ni,ci,y,K,Fe):Mo)){$n=!1;break}Rn||(Rn="constructor"==Yt)}if($n&&!Rn){var hn=d.constructor,xn=p.constructor;hn!=xn&&"constructor"in d&&"constructor"in p&&!("function"==typeof hn&&hn instanceof hn&&"function"==typeof xn&&xn instanceof xn)&&($n=!1)}return Fe.delete(d),Fe.delete(p),$n}(d,p,y,K,we,Fe))}(d,p,y,K,kp,we))}function zb(d,p,y,K){var we=y.length,Fe=we,et=!K;if(null==d)return!Fe;for(d=Si(d);we--;){var ot=y[we];if(et&&ot[2]?ot[1]!==d[ot[0]]:!(ot[0]in d))return!1}for(;++we<Fe;){var pt=(ot=y[we])[0],Dt=d[pt],Nt=ot[1];if(et&&ot[2]){if(Dt===C&&!(pt in d))return!1}else{var Ut=new mo;if(K)var Yt=K(Dt,Nt,pt,d,p,Ut);if(!(Yt===C?kp(Nt,Dt,3,K,Ut):Yt))return!1}}return!0}function bC(d){return!(!Cr(d)||function BC(d){return!!Nb&&Nb in d}(d))&&(al(d)?Ra:Bs).test(yu(d))}function wC(d){return"function"==typeof d?d:null==d?$i:"object"==typeof d?jn(d)?AC(d[0],d[1]):EC(d):vx(d)}function jp(d){if(!Jp(d))return js(d);var p=[];for(var y in Si(d))Ci.call(d,y)&&"constructor"!=y&&p.push(y);return p}function $b(d,p){return d<p}function xC(d,p){var y=-1,K=Gs(d)?bt(d.length):[];return yo(d,function(we,Fe,et){K[++y]=p(we,Fe,et)}),K}function EC(d){var p=V_(d);return 1==p.length&&p[0][2]?Zp(p[0][0],p[0][1]):function(y){return y===d||zb(y,d,p)}}function AC(d,p){return H_(d)&&jC(p)?Zp(ca(d),p):function(y){var K=xu(y,d);return K===C&&K===p?bg(y,d):kp(p,K,3)}}function Bh(d,p,y,K,we){d!==p&&vr(p,function(Fe,et){if(we||(we=new mo),Cr(Fe))!function qb(d,p,y,K,we,Fe,et){var ot=Qp(d,y),pt=Qp(p,y),Dt=et.get(pt);if(Dt)Xr(d,y,Dt);else{var Nt=Fe?Fe(ot,pt,y+"",d,p,et):C,Ut=Nt===C;if(Ut){var Yt=jn(pt),cn=!Yt&&Ll(pt),Mn=!Yt&&!cn&&Fa(pt);Nt=pt,Yt||cn||Mn?jn(ot)?Nt=ot:nr(ot)?Nt=wo(ot):cn?(Ut=!1,Nt=R_(pt,!0)):Mn?(Ut=!1,Nt=O_(pt,!0)):Nt=[]:gc(pt)||Pl(pt)?(Nt=ot,Pl(ot)?Nt=Jw(ot):(!Cr(ot)||al(ot))&&(Nt=Kp(pt))):Ut=!1}Ut&&(et.set(pt,Nt),we(Nt,pt,K,Fe,et),et.delete(pt)),Xr(d,y,Nt)}}(d,p,et,y,Bh,K,we);else{var ot=K?K(Qp(d,et),Fe,et+"",d,p,we):C;ot===C&&(ot=Fe),Xr(d,et,ot)}},zs)}function Rr(d,p){var y=d.length;if(y)return xo(p+=p<0?y:0,y)?d[p]:C}function T_(d,p,y){p=p.length?ur(p,function(Fe){return jn(Fe)?function(et){return Go(et,1===Fe.length?Fe[0]:Fe)}:Fe}):[$i];var K=-1;return p=ur(p,Vo(wn())),function XS(ht,It){var bt=ht.length;for(ht.sort(It);bt--;)ht[bt]=ht[bt].value;return ht}(xC(d,function(Fe,et,ot){return{criteria:ur(p,function(Dt){return Dt(Fe)}),index:++K,value:Fe}}),function(Fe,et){return function RC(d,p,y){for(var K=-1,we=d.criteria,Fe=p.criteria,et=we.length,ot=y.length;++K<et;){var pt=gu(we[K],Fe[K]);if(pt)return K>=ot?pt:pt*("desc"==y[K]?-1:1)}return d.index-p.index}(Fe,et,y)})}function Yb(d,p,y){for(var K=-1,we=p.length,Fe={};++K<we;){var et=p[K],ot=Go(d,et);y(ot,et)&&jh(Fe,Pa(et,d),ot)}return Fe}function Up(d,p,y,K){var we=K?EF:Sh,Fe=-1,et=p.length,ot=d;for(d===p&&(p=wo(p)),y&&(ot=ur(d,Vo(y)));++Fe<et;)for(var pt=0,Dt=p[Fe],Nt=y?y(Dt):Dt;(pt=we(ot,Nt,pt,K))>-1;)ot!==d&&Mp.call(ot,pt,1),Mp.call(d,pt,1);return d}function Kb(d,p){for(var y=d?p.length:0,K=y-1;y--;){var we=p[y];if(y==K||we!==Fe){var Fe=we;xo(we)?Mp.call(d,we,1):I_(d,we)}}return d}function kh(d,p){return d+$r(kb()*(p-d+1))}function oa(d,p){var y="";if(!d||p<1||p>ke)return y;do{p%2&&(y+=d),(p=$r(p/2))&&(d+=d)}while(p);return y}function Wn(d,p){return $_(Xh(d,p,$i),d+"")}function Jb(d){return _o(Cd(d))}function Zb(d,p){var y=Cd(d);return Jh(y,sa(p,0,y.length))}function jh(d,p,y,K){if(!Cr(d))return d;for(var we=-1,Fe=(p=Pa(p,d)).length,et=Fe-1,ot=d;null!=ot&&++we<Fe;){var pt=ca(p[we]),Dt=y;if("__proto__"===pt||"constructor"===pt||"prototype"===pt)return d;if(we!=et){var Nt=ot[pt];(Dt=K?K(Nt,pt,ot):C)===C&&(Dt=Cr(Nt)?Nt:xo(p[we+1])?[]:{})}Xs(ot,pt,Dt),ot=ot[pt]}return d}var TC=Pp?function(d,p){return Pp.set(d,p),d}:$i,Bi=Ip?function(d,p){return Ip(d,"toString",{configurable:!0,enumerable:!1,value:xy(p),writable:!0})}:$i;function M_(d){return Jh(Cd(d))}function Us(d,p,y){var K=-1,we=d.length;p<0&&(p=-p>we?0:we+p),(y=y>we?we:y)<0&&(y+=we),we=p>y?0:y-p>>>0,p>>>=0;for(var Fe=bt(we);++K<we;)Fe[K]=d[K+p];return Fe}function Ks(d,p){var y;return yo(d,function(K,we,Fe){return!(y=p(K,we,Fe))}),!!y}function Vp(d,p,y){var K=0,we=null==d?K:d.length;if("number"==typeof p&&p==p&&we<=2147483647){for(;K<we;){var Fe=K+we>>>1,et=d[Fe];null!==et&&!Js(et)&&(y?et<=p:et<p)?K=Fe+1:we=Fe}return we}return hu(d,p,$i,y)}function hu(d,p,y,K){var we=0,Fe=null==d?0:d.length;if(0===Fe)return 0;for(var et=(p=y(p))!=p,ot=null===p,pt=Js(p),Dt=p===C;we<Fe;){var Nt=$r((we+Fe)/2),Ut=y(d[Nt]),Yt=Ut!==C,cn=null===Ut,Mn=Ut==Ut,$n=Js(Ut);if(et)var Rn=K||Mn;else Rn=Dt?Mn&&(K||Yt):ot?Mn&&Yt&&(K||!cn):pt?Mn&&Yt&&!cn&&(K||!$n):!cn&&!$n&&(K?Ut<=p:Ut<p);Rn?we=Nt+1:Fe=Nt}return Ss(Fe,4294967294)}function fu(d,p){for(var y=-1,K=d.length,we=0,Fe=[];++y<K;){var et=d[y],ot=p?p(et):et;if(!y||!Co(ot,pt)){var pt=ot;Fe[we++]=0===et?0:et}}return Fe}function vo(d){return"number"==typeof d?d:Js(d)?NaN:+d}function zo(d){if("string"==typeof d)return d;if(jn(d))return ur(d,zo)+"";if(Js(d))return Lp?Lp.call(d):"";var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function el(d,p,y){var K=-1,we=di,Fe=d.length,et=!0,ot=[],pt=ot;if(y)et=!1,we=Sb;else if(Fe>=200){var Dt=p?null:F_(d);if(Dt)return xp(Dt);et=!1,we=od,pt=new cu}else pt=p?[]:ot;e:for(;++K<Fe;){var Nt=d[K],Ut=p?p(Nt):Nt;if(Nt=y||0!==Nt?Nt:0,et&&Ut==Ut){for(var Yt=pt.length;Yt--;)if(pt[Yt]===Ut)continue e;p&&pt.push(Ut),ot.push(Nt)}else we(pt,Ut,y)||(pt!==ot&&pt.push(Ut),ot.push(Nt))}return ot}function I_(d,p){return null==(d=VC(d,p=Pa(p,d)))||delete d[ca(ua(p))]}function Na(d,p,y,K){return jh(d,p,y(Go(d,p)),K)}function Uh(d,p,y,K){for(var we=d.length,Fe=K?we:-1;(K?Fe--:++Fe<we)&&p(d[Fe],Fe,d););return y?Us(d,K?0:Fe,K?Fe+1:we):Us(d,K?Fe+1:0,K?we:Fe)}function Qb(d,p){var y=d;return y instanceof li&&(y=y.value()),Cb(p,function(K,we){return we.func.apply(we.thisArg,sc([K],we.args))},y)}function Hp(d,p,y){var K=d.length;if(K<2)return K?el(d[0]):[];for(var we=-1,Fe=bt(K);++we<K;)for(var et=d[we],ot=-1;++ot<K;)ot!=we&&(Fe[we]=dc(Fe[we]||et,d[ot],p,y));return el(Sr(Fe,1),p,y)}function Gp(d,p,y){for(var K=-1,we=d.length,Fe=p.length,et={};++K<we;)y(et,d[K],K<Fe?p[K]:C);return et}function Vh(d){return nr(d)?d:[]}function pu(d){return"function"==typeof d?d:$i}function Pa(d,p){return jn(d)?d:H_(d,p)?[d]:Zh(Mi(d))}var D_=Wn;function bo(d,p,y){var K=d.length;return y=y===C?K:y,!p&&y>=K?d:Us(d,p,y)}var Nn=iC||function(d){return Wr.clearTimeout(d)};function R_(d,p){if(p)return d.slice();var y=d.length,K=Pb?Pb(y):new d.constructor(y);return d.copy(K),K}function ew(d){var p=new d.constructor(d.byteLength);return new Cp(p).set(new Cp(d)),p}function O_(d,p){var y=p?ew(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.length)}function gu(d,p){if(d!==p){var y=d!==C,K=null===d,we=d==d,Fe=Js(d),et=p!==C,ot=null===p,pt=p==p,Dt=Js(p);if(!ot&&!Dt&&!Fe&&d>p||Fe&&et&&pt&&!ot&&!Dt||K&&et&&pt||!y&&pt||!we)return 1;if(!K&&!Fe&&!Dt&&d<p||Dt&&y&&we&&!K&&!Fe||ot&&y&&we||!et&&we||!pt)return-1}return 0}function tw(d,p,y,K){for(var we=-1,Fe=d.length,et=y.length,ot=-1,pt=p.length,Dt=jr(Fe-et,0),Nt=bt(pt+Dt),Ut=!K;++ot<pt;)Nt[ot]=p[ot];for(;++we<et;)(Ut||we<Fe)&&(Nt[y[we]]=d[we]);for(;Dt--;)Nt[ot++]=d[we++];return Nt}function nw(d,p,y,K){for(var we=-1,Fe=d.length,et=-1,ot=y.length,pt=-1,Dt=p.length,Nt=jr(Fe-ot,0),Ut=bt(Nt+Dt),Yt=!K;++we<Nt;)Ut[we]=d[we];for(var cn=we;++pt<Dt;)Ut[cn+pt]=p[pt];for(;++et<ot;)(Yt||we<Fe)&&(Ut[cn+y[et]]=d[we++]);return Ut}function wo(d,p){var y=-1,K=d.length;for(p||(p=bt(K));++y<K;)p[y]=d[y];return p}function tl(d,p,y,K){var we=!y;y||(y={});for(var Fe=-1,et=p.length;++Fe<et;){var ot=p[Fe],pt=K?K(y[ot],d[ot],ot,y,d):C;pt===C&&(pt=d[ot]),we?bi(y,ot,pt):Xs(y,ot,pt)}return y}function Vs(d,p){return function(y,K){var we=jn(y)?Ab:Oh,Fe=p?p():{};return we(y,d,wn(K,2),Fe)}}function ds(d){return Wn(function(p,y){var K=-1,we=y.length,Fe=we>1?y[we-1]:C,et=we>2?y[2]:C;for(Fe=d.length>3&&"function"==typeof Fe?(we--,Fe):C,et&&Kr(y[0],y[1],et)&&(Fe=we<3?C:Fe,we=1),p=Si(p);++K<we;){var ot=y[K];ot&&d(p,ot,K,Fe)}return p})}function Ti(d,p){return function(y,K){if(null==y)return y;if(!Gs(y))return d(y,K);for(var we=y.length,Fe=p?we:-1,et=Si(y);(p?Fe--:++Fe<we)&&!1!==K(et[Fe],Fe,et););return y}}function N_(d){return function(p,y,K){for(var we=-1,Fe=Si(p),et=K(p),ot=et.length;ot--;){var pt=et[d?ot:++we];if(!1===y(Fe[pt],pt,Fe))break}return p}}function La(d){return function(p){var y=ad(p=Mi(p))?po(p):C,K=y?y[0]:p.charAt(0),we=y?bo(y,1).join(""):p.slice(1);return K[d]()+we}}function fc(d){return function(p){return Cb(hf(ux(p).replace(vF,"")),d,"")}}function mu(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=Cs(d.prototype),K=d.apply(y,p);return Cr(K)?K:y}}function NC(d){return function(p,y,K){var we=Si(p);if(!Gs(p)){var Fe=wn(y,3);p=Ms(p),y=function(ot){return Fe(we[ot],ot,we)}}var et=d(p,y,K);return et>-1?we[Fe?p[et]:et]:C}}function P_(d){return il(function(p){var y=p.length,K=y,we=go.prototype.thru;for(d&&p.reverse();K--;){var Fe=p[K];if("function"!=typeof Fe)throw new qt(_);if(we&&!et&&"wrapper"==rl(Fe))var et=new go([],!0)}for(K=et?K:y;++K<y;){var ot=rl(Fe=p[K]),pt="wrapper"==ot?fs(Fe):C;et=pt&&z_(pt[0])&&424==pt[1]&&!pt[4].length&&1==pt[9]?et[rl(pt[0])].apply(et,pt[3]):1==Fe.length&&z_(Fe)?et[ot]():et.thru(Fe)}return function(){var Dt=arguments,Nt=Dt[0];if(et&&1==Dt.length&&jn(Nt))return et.plant(Nt).value();for(var Ut=0,Yt=y?p[Ut].apply(this,Dt):Nt;++Ut<y;)Yt=p[Ut].call(this,Yt);return Yt}})}function hs(d,p,y,K,we,Fe,et,ot,pt,Dt){var Nt=p&T,Ut=1&p,Yt=2&p,cn=24&p,Mn=512&p,$n=Yt?C:mu(d);return function Rn(){for(var ni=arguments.length,ci=bt(ni),Mo=ni;Mo--;)ci[Mo]=arguments[Mo];if(cn)var hn=wi(Rn),xn=function g_(ht,It){for(var bt=ht.length,Ht=0;bt--;)ht[bt]===It&&++Ht;return Ht}(ci,hn);if(K&&(ci=tw(ci,K,we,cn)),Fe&&(ci=nw(ci,Fe,et,cn)),ni-=xn,cn&&ni<Dt){var Tr=ho(ci,hn);return iw(d,p,hs,Rn.placeholder,y,ci,Tr,ot,pt,Dt-ni)}var st=Ut?y:this,ul=Yt?st[d]:d;return ni=ci.length,ot?ci=function uw(d,p){for(var y=d.length,K=Ss(p.length,y),we=wo(d);K--;){var Fe=p[K];d[K]=xo(Fe,y)?we[Fe]:C}return d}(ci,ot):Mn&&ni>1&&ci.reverse(),Nt&&pt<ni&&(ci.length=pt),this&&this!==Wr&&this instanceof Rn&&(ul=$n||mu(ul)),ul.apply(st,ci)}}function nl(d,p){return function(y,K){return function yC(d,p,y,K){return Qi(d,function(we,Fe,et){p(K,y(we),Fe,et)}),K}(y,d,p(K),{})}}function Gh(d,p){return function(y,K){var we;if(y===C&&K===C)return p;if(y!==C&&(we=y),K!==C){if(we===C)return K;"string"==typeof y||"string"==typeof K?(y=zo(y),K=zo(K)):(y=vo(y),K=vo(K)),we=d(y,K)}return we}}function Wo(d){return il(function(p){return p=ur(p,Vo(wn())),Wn(function(y){var K=this;return d(p,function(we){return qs(we,K,y)})})})}function aa(d,p){var y=(p=p===C?" ":zo(p)).length;if(y<2)return y?oa(p,d):p;var K=oa(p,$t(d/Tl(p)));return ad(p)?bo(po(K),0,d).join(""):K.slice(0,d)}function L_(d){return function(p,y,K){return K&&"number"!=typeof K&&Kr(p,y,K)&&(y=K=C),p=ll(p),y===C?(y=p,p=0):y=ll(y),function CC(d,p,y,K){for(var we=-1,Fe=jr($t((p-d)/(y||1)),0),et=bt(Fe);Fe--;)et[K?Fe:++we]=d,d+=y;return et}(p,y,K=K===C?p<y?1:-1:ll(K),d)}}function zp(d){return function(p,y){return"string"==typeof p&&"string"==typeof y||(p=da(p),y=da(y)),d(p,y)}}function iw(d,p,y,K,we,Fe,et,ot,pt,Dt){var Nt=8&p;p|=Nt?b:64,4&(p&=~(Nt?64:b))||(p&=-4);var $n=[d,p,we,Nt?Fe:C,Nt?et:C,Nt?C:Fe,Nt?C:et,ot,pt,Dt],Rn=y.apply(C,$n);return z_(d)&&dw(Rn,$n),Rn.placeholder=K,Kh(Rn,d,p)}function zh(d){var p=Ir[d];return function(y,K){if(y=da(y),(K=null==K?0:Ss(Gn(K),292))&&cs(y)){var we=(Mi(y)+"e").split("e");return+((we=(Mi(p(we[0]+"e"+(+we[1]+K)))+"e").split("e"))[0]+"e"+(+we[1]-K))}return p(y)}}var F_=Dl&&1/xp(new Dl([,-0]))[1]==Ce?function(d){return new Dl(d)}:xg;function Wp(d){return function(p){var y=tr(p);return y==te?cd(p):y==Ue?function fo(ht){var It=-1,bt=Array(ht.size);return ht.forEach(function(Ht){bt[++It]=[Ht,Ht]}),bt}(p):function KS(ht,It){return ur(It,function(bt){return[bt,ht[bt]]})}(p,d(p))}}function la(d,p,y,K,we,Fe,et,ot){var pt=2&p;if(!pt&&"function"!=typeof d)throw new qt(_);var Dt=K?K.length:0;if(Dt||(p&=-97,K=we=C),et=et===C?et:jr(Gn(et),0),ot=ot===C?ot:Gn(ot),Dt-=we?we.length:0,64&p){var Nt=K,Ut=we;K=we=C}var Yt=pt?C:fs(d),cn=[d,p,y,K,we,Nt,Ut,Fe,et,ot];if(Yt&&function UC(d,p){var y=d[1],K=p[1],we=y|K;if(!(we<131)&&!(K==T&&8==y||K==T&&256==y&&d[7].length<=p[8]||384==K&&p[7].length<=p[8]&&8==y))return d;1&K&&(d[2]=p[2],we|=1&y?0:4);var ot=p[3];if(ot){var pt=d[3];d[3]=pt?tw(pt,ot,p[4]):ot,d[4]=pt?ho(d[3],N):p[4]}(ot=p[5])&&(d[5]=(pt=d[5])?nw(pt,ot,p[6]):ot,d[6]=pt?ho(d[5],N):p[6]),(ot=p[7])&&(d[7]=ot),K&T&&(d[8]=null==d[8]?p[8]:Ss(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=we}(cn,Yt),d=cn[0],p=cn[1],y=cn[2],K=cn[3],we=cn[4],!(ot=cn[9]=cn[9]===C?pt?0:d.length:jr(cn[9]-Dt,0))&&24&p&&(p&=-25),p&&1!=p)Mn=8==p||16==p?function OC(d,p,y){var K=mu(d);return function we(){for(var Fe=arguments.length,et=bt(Fe),ot=Fe,pt=wi(we);ot--;)et[ot]=arguments[ot];var Dt=Fe<3&&et[0]!==pt&&et[Fe-1]!==pt?[]:ho(et,pt);return(Fe-=Dt.length)<y?iw(d,p,hs,we.placeholder,C,et,Dt,C,C,y-Fe):qs(this&&this!==Wr&&this instanceof we?K:d,this,et)}}(d,p,ot):p!=b&&33!=p||we.length?hs.apply(C,cn):function PC(d,p,y,K){var we=1&p,Fe=mu(d);return function et(){for(var ot=-1,pt=arguments.length,Dt=-1,Nt=K.length,Ut=bt(Nt+pt),Yt=this&&this!==Wr&&this instanceof et?Fe:d;++Dt<Nt;)Ut[Dt]=K[Dt];for(;pt--;)Ut[Dt++]=arguments[++ot];return qs(Yt,we?y:this,Ut)}}(d,p,y,K);else var Mn=function Hh(d,p,y){var K=1&p,we=mu(d);return function Fe(){return(this&&this!==Wr&&this instanceof Fe?we:d).apply(K?y:this,arguments)}}(d,p,y);return Kh((Yt?TC:dw)(Mn,cn),d,p)}function rw(d,p,y,K){return d===C||Co(d,iu[y])&&!Ci.call(K,y)?p:d}function B_(d,p,y,K,we,Fe){return Cr(d)&&Cr(p)&&(Fe.set(p,d),Bh(d,p,C,B_,Fe),Fe.delete(p)),d}function k_(d){return gc(d)?C:d}function j_(d,p,y,K,we,Fe){var et=1&y,ot=d.length,pt=p.length;if(ot!=pt&&!(et&&pt>ot))return!1;var Dt=Fe.get(d),Nt=Fe.get(p);if(Dt&&Nt)return Dt==p&&Nt==d;var Ut=-1,Yt=!0,cn=2&y?new cu:C;for(Fe.set(d,p),Fe.set(p,d);++Ut<ot;){var Mn=d[Ut],$n=p[Ut];if(K)var Rn=et?K($n,Mn,Ut,p,d,Fe):K(Mn,$n,Ut,d,p,Fe);if(Rn!==C){if(Rn)continue;Yt=!1;break}if(cn){if(!Eh(p,function(ni,ci){if(!od(cn,ci)&&(Mn===ni||we(Mn,ni,y,K,Fe)))return cn.push(ci)})){Yt=!1;break}}else if(Mn!==$n&&!we(Mn,$n,y,K,Fe)){Yt=!1;break}}return Fe.delete(d),Fe.delete(p),Yt}function il(d){return $_(Xh(d,C,ng),d+"")}function Wh(d){return Lh(d,Ms,qp)}function U_(d){return Lh(d,zs,yd)}var fs=Pp?function(d){return Pp.get(d)}:xg;function rl(d){for(var p=d.name+"",y=cc[p],K=Ci.call(cc,p)?y.length:0;K--;){var we=y[K],Fe=we.func;if(null==Fe||Fe==d)return we.name}return p}function wi(d){return(Ci.call(Re,"placeholder")?Re:d).placeholder}function wn(){var d=Re.iteratee||cl;return d=d===cl?wC:d,arguments.length?d(arguments[0],arguments[1]):d}function $p(d,p){var y=d.__data__;return function G_(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?y["string"==typeof p?"string":"hash"]:y.map}function V_(d){for(var p=Ms(d),y=p.length;y--;){var K=p[y],we=d[K];p[y]=[K,we,jC(we)]}return p}function _u(d,p){var y=function QS(ht,It){return null==ht?C:ht[It]}(d,p);return bC(y)?y:C}var qp=zn?function(d){return null==d?[]:(d=Si(d),Sn(zn(d),function(p){return y_.call(d,p)}))}:pf,yd=zn?function(d){for(var p=[];d;)sc(p,qp(d)),d=Tp(d);return p}:pf,tr=er;function $h(d,p,y){for(var K=-1,we=(p=Pa(p,d)).length,Fe=!1;++K<we;){var et=ca(p[K]);if(!(Fe=null!=d&&y(d,et)))break;d=d[et]}return Fe||++K!=we?Fe:!!(we=null==d?0:d.length)&&gg(we)&&xo(et,we)&&(jn(d)||Pl(d))}function Kp(d){return"function"!=typeof d.constructor||Jp(d)?{}:Cs(Tp(d))}function FC(d){return jn(d)||Pl(d)||!!(Fb&&d&&d[Fb])}function xo(d,p){var y=typeof d;return!!(p=p??ke)&&("number"==y||"symbol"!=y&&$s.test(d))&&d>-1&&d%1==0&&d<p}function Kr(d,p,y){if(!Cr(y))return!1;var K=typeof p;return!!("number"==K?Gs(y)&&xo(p,y.length):"string"==K&&p in y)&&Co(y[p],d)}function H_(d,p){if(jn(d))return!1;var y=typeof d;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=d&&!Js(d))||Sl.test(d)||!Ka.test(d)||null!=p&&d in Si(p)}function z_(d){var p=rl(d),y=Re[p];if("function"!=typeof y||!(p in li.prototype))return!1;if(d===y)return!0;var K=fs(y);return!!K&&d===K[0]}(v_&&tr(new v_(new ArrayBuffer(1)))!=H||ru&&tr(new ru)!=te||Op&&tr(Op.resolve())!=he||Dl&&tr(new Dl)!=Ue||Np&&tr(new Np)!=wt)&&(tr=function(d){var p=er(d),y=p==O?d.constructor:C,K=y?yu(y):"";if(K)switch(K){case jb:return H;case Ub:return te;case ou:return he;case sC:return Ue;case b_:return wt}return p});var kC=Mh?al:Id;function Jp(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||iu)}function jC(d){return d==d&&!Cr(d)}function Zp(d,p){return function(y){return null!=y&&y[d]===p&&(p!==C||d in Si(y))}}function Xh(d,p,y){return p=jr(p===C?d.length-1:p,0),function(){for(var K=arguments,we=-1,Fe=jr(K.length-p,0),et=bt(Fe);++we<Fe;)et[we]=K[p+we];we=-1;for(var ot=bt(p+1);++we<p;)ot[we]=K[we];return ot[p]=y(et),qs(d,this,ot)}}function VC(d,p){return p.length<2?d:Go(d,Us(p,0,-1))}function Qp(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var dw=eg(TC),Eo=Bb||function(d,p){return Wr.setTimeout(d,p)},$_=eg(Bi);function Kh(d,p,y){var K=p+"";return $_(d,function cw(d,p){var y=p.length;if(!y)return d;var K=y-1;return p[K]=(y>1?"& ":"")+p[K],p=p.join(y>2?", ":" "),d.replace(rn,"{\n/* [wrapped with "+p+"] */\n")}(K,function hw(d,p){return kr(mt,function(y){var K="_."+y[0];p&y[1]&&!di(d,K)&&d.push(K)}),d.sort()}(function Yp(d){var p=d.match(cr);return p?p[1].split(as):[]}(K),y)))}function eg(d){var p=0,y=0;return function(){var K=Dp(),we=16-(K-y);if(y=K,we>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(C,arguments)}}function Jh(d,p){var y=-1,K=d.length,we=K-1;for(p=p===C?K:p;++y<p;){var Fe=kh(y,we),et=d[Fe];d[Fe]=d[y],d[y]=et}return d.length=p,d}var Zh=function qh(d){var p=dg(d,function(K){return 500===y.size&&y.clear(),K}),y=p.cache;return p}(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(Ja,function(y,K,we,Fe){p.push(we?Fe.replace(Ca,"$1"):K||y)}),p});function ca(d){if("string"==typeof d||Js(d))return d;var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function yu(d){if(null!=d){try{return ac.call(d)}catch{}try{return d+""}catch{}}return""}function q_(d){if(d instanceof li)return d.clone();var p=new go(d.__wrapped__,d.__chain__);return p.__actions__=wo(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var tg=Wn(function(d,p){return nr(d)?dc(d,Sr(p,1,nr,!0)):[]}),vu=Wn(function(d,p){var y=ua(p);return nr(y)&&(y=C),nr(d)?dc(d,Sr(p,1,nr,!0),wn(y,2)):[]}),GC=Wn(function(d,p){var y=ua(p);return nr(y)&&(y=C),nr(d)?dc(d,Sr(p,1,nr,!0),C,y):[]});function _w(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var we=null==y?0:Gn(y);return we<0&&(we=jr(K+we,0)),Ah(d,wn(p,3),we)}function Wi(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var we=K-1;return y!==C&&(we=Gn(y),we=y<0?jr(K+we,0):Ss(we,K-1)),Ah(d,wn(p,3),we,!0)}function ng(d){return null!=d&&d.length?Sr(d,1):[]}function vw(d){return d&&d.length?d[0]:C}var ig=Wn(function(d){var p=ur(d,Vh);return p.length&&p[0]===d[0]?Bp(p):[]}),ww=Wn(function(d){var p=ua(d),y=ur(d,Vh);return p===ua(y)?p=C:y.pop(),y.length&&y[0]===d[0]?Bp(y,wn(p,2)):[]}),WC=Wn(function(d){var p=ua(d),y=ur(d,Vh);return(p="function"==typeof p?p:C)&&y.pop(),y.length&&y[0]===d[0]?Bp(y,C,p):[]});function ua(d){var p=null==d?0:d.length;return p?d[p-1]:C}var Ew=Wn(Aw);function Aw(d,p){return d&&d.length&&p&&p.length?Up(d,p):d}var Sw=il(function(d,p){var y=null==d?0:d.length,K=uu(d,p);return Kb(d,ur(p,function(we){return xo(we,y)?+we:we}).sort(gu)),K});function Ui(d){return null==d?d:Rp.call(d)}var UF=Wn(function(d){return el(Sr(d,1,nr,!0))}),JC=Wn(function(d){var p=ua(d);return nr(p)&&(p=C),el(Sr(d,1,nr,!0),wn(p,2))}),xd=Wn(function(d){var p=ua(d);return p="function"==typeof p?p:C,el(Sr(d,1,nr,!0),C,p)});function Qh(d){if(!d||!d.length)return[];var p=0;return d=Sn(d,function(y){if(nr(y))return p=jr(y.length,p),!0}),oc(p,function(y){return ur(d,sd(y))})}function _n(d,p){if(!d||!d.length)return[];var y=Qh(d);return null==p?y:ur(y,function(K){return qs(p,C,K)})}var QC=Wn(function(d,p){return nr(d)?dc(d,p):[]}),ef=Wn(function(d){return Hp(Sn(d,nr))}),tf=Wn(function(d){var p=ua(d);return nr(p)&&(p=C),Hp(Sn(d,nr),wn(p,2))}),eT=Wn(function(d){var p=ua(d);return p="function"==typeof p?p:C,Hp(Sn(d,nr),C,p)}),Rw=Wn(Qh),sg=Wn(function(d){var p=d.length,y=p>1?d[p-1]:C;return y="function"==typeof y?(d.pop(),y):C,_n(d,y)});function og(d){var p=Re(d);return p.__chain__=!0,p}function ag(d,p){return p(d)}var nT=il(function(d){var p=d.length,y=p?d[0]:0,K=this.__wrapped__,we=function(Fe){return uu(Fe,d)};return!(p>1||this.__actions__.length)&&K instanceof li&&xo(y)?((K=K.slice(y,+y+(p?1:0))).__actions__.push({func:ag,args:[we],thisArg:C}),new go(K,this.__chain__).thru(function(Fe){return p&&!Fe.length&&Fe.push(C),Fe})):this.thru(we)}),Hs=Vs(function(d,p,y){Ci.call(d,y)?++d[y]:bi(d,y,1)}),Fw=NC(_w),sT=NC(Wi);function jw(d,p){return(jn(d)?kr:yo)(d,wn(p,3))}function Z_(d,p){return(jn(d)?xh:kn)(d,wn(p,3))}var aT=Vs(function(d,p,y){Ci.call(d,y)?d[y].push(p):bi(d,y,[p])}),cT=Wn(function(d,p,y){var K=-1,we="function"==typeof p,Fe=Gs(d)?bt(d.length):[];return yo(d,function(et){Fe[++K]=we?qs(p,et,y):du(et,p,y)}),Fe}),uT=Vs(function(d,p,y){bi(d,y,p)});function rf(d,p){return(jn(d)?ur:xC)(d,wn(p,3))}var Vw=Vs(function(d,p,y){d[y?0:1].push(p)},function(){return[[],[]]}),pT=Wn(function(d,p){if(null==d)return[];var y=p.length;return y>1&&Kr(d,p[0],p[1])?p=[]:y>2&&Kr(p[0],p[1],p[2])&&(p=[p[0]]),T_(d,Sr(p,1),[])}),sf=ia||function(){return Wr.Date.now()};function Q_(d,p,y){return p=y?C:p,la(d,T,C,C,C,C,p=d&&null==p?d.length:p)}function $w(d,p){var y;if("function"!=typeof p)throw new qt(_);return d=Gn(d),function(){return--d>0&&(y=p.apply(this,arguments)),d<=1&&(p=C),y}}var ey=Wn(function(d,p,y){var K=1;if(y.length){var we=ho(y,wi(ey));K|=b}return la(d,K,p,y,we)}),gT=Wn(function(d,p,y){var K=3;if(y.length){var we=ho(y,wi(gT));K|=b}return la(p,K,d,y,we)});function cg(d,p,y){var K,we,Fe,et,ot,pt,Dt=0,Nt=!1,Ut=!1,Yt=!0;if("function"!=typeof d)throw new qt(_);function cn(Tr){var st=K,ul=we;return K=we=C,Dt=Tr,et=d.apply(ul,st)}function Rn(Tr){var st=Tr-pt;return pt===C||st>=p||st<0||Ut&&Tr-Dt>=Fe}function ni(){var Tr=sf();if(Rn(Tr))return ci(Tr);ot=Eo(ni,function $n(Tr){var My=p-(Tr-pt);return Ut?Ss(My,Fe-(Tr-Dt)):My}(Tr))}function ci(Tr){return ot=C,Yt&&K?cn(Tr):(K=we=C,et)}function xn(){var Tr=sf(),st=Rn(Tr);if(K=arguments,we=this,pt=Tr,st){if(ot===C)return function Mn(Tr){return Dt=Tr,ot=Eo(ni,p),Nt?cn(Tr):et}(pt);if(Ut)return Nn(ot),ot=Eo(ni,p),cn(pt)}return ot===C&&(ot=Eo(ni,p)),et}return p=da(p)||0,Cr(y)&&(Nt=!!y.leading,Fe=(Ut="maxWait"in y)?jr(da(y.maxWait)||0,p):Fe,Yt="trailing"in y?!!y.trailing:Yt),xn.cancel=function Mo(){ot!==C&&Nn(ot),Dt=0,K=pt=we=ot=C},xn.flush=function hn(){return ot===C?et:ci(sf())},xn}var mT=Wn(function(d,p){return Nl(d,1,p)}),pc=Wn(function(d,p,y){return Nl(d,da(p)||0,y)});function dg(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new qt(_);var y=function(){var K=arguments,we=p?p.apply(this,K):K[0],Fe=y.cache;if(Fe.has(we))return Fe.get(we);var et=d.apply(this,K);return y.cache=Fe.set(we,et)||Fe,et};return y.cache=new(dg.Cache||Ol),y}function af(d){if("function"!=typeof d)throw new qt(_);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}dg.Cache=Ol;var HF=D_(function(d,p){var y=(p=1==p.length&&jn(p[0])?ur(p[0],Vo(wn())):ur(Sr(p,1),Vo(wn()))).length;return Wn(function(K){for(var we=-1,Fe=Ss(K.length,y);++we<Fe;)K[we]=p[we].call(this,K[we]);return qs(d,this,K)})}),ol=Wn(function(d,p){var y=ho(p,wi(ol));return la(d,b,C,p,y)}),hg=Wn(function(d,p){var y=ho(p,wi(hg));return la(d,64,C,p,y)}),_T=il(function(d,p){return la(d,256,C,C,C,p)});function Co(d,p){return d===p||d!=d&&p!=p}var Ad=zp(Fh),oy=zp(function(d,p){return d>=p}),Pl=vC(function(){return arguments}())?vC:function(d){return Or(d)&&Ci.call(d,"callee")&&!y_.call(d,"callee")},jn=bt.isArray,WF=WS?Vo(WS):function CF(d){return Or(d)&&er(d)==pe};function Gs(d){return null!=d&&gg(d.length)&&!al(d)}function nr(d){return Or(d)&&Gs(d)}var Ll=qr||Id,wT=$S?Vo($S):function TF(d){return Or(d)&&er(d)==ie};function ly(d){if(!Or(d))return!1;var p=er(d);return p==He||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!gc(d)}function al(d){if(!Cr(d))return!1;var p=er(d);return p==Xe||p==ue||"[object AsyncFunction]"==p||"[object Proxy]"==p}function pg(d){return"number"==typeof d&&d==Gn(d)}function gg(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=ke}function Cr(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Or(d){return null!=d&&"object"==typeof d}var Sd=qS?Vo(qS):function IF(d){return Or(d)&&tr(d)==te};function uf(d){return"number"==typeof d||Or(d)&&er(d)==U}function gc(d){if(!Or(d)||er(d)!=O)return!1;var p=Tp(d);if(null===p)return!0;var y=Ci.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&ac.call(y)==tC}var _g=yp?Vo(yp):function DF(d){return Or(d)&&er(d)==Ee},dy=id?Vo(id):function RF(d){return Or(d)&&tr(d)==Ue};function wu(d){return"string"==typeof d||!jn(d)&&Or(d)&&er(d)==Qe}function Js(d){return"symbol"==typeof d||Or(d)&&er(d)==vt}var Fa=vp?Vo(vp):function OF(d){return Or(d)&&gg(d.length)&&!!Zi[er(d)]},yg=zp($b),hy=zp(function(d,p){return d<=p});function fy(d){if(!d)return[];if(Gs(d))return wu(d)?po(d):wo(d);if(Ih&&d[Ih])return function eC(ht){for(var It,bt=[];!(It=ht.next()).done;)bt.push(It.value);return bt}(d[Ih]());var p=tr(d);return(p==te?cd:p==Ue?xp:Cd)(d)}function ll(d){return d?(d=da(d))===Ce||d===-Ce?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Gn(d){var p=ll(d),y=p%1;return p==p?y?p-y:p:0}function mc(d){return d?sa(Gn(d),0,de):0}function da(d){if("number"==typeof d)return d;if(Js(d))return NaN;if(Cr(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Cr(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=Cl(d);var y=Zn.test(d);return y||Xt.test(d)?zS(d.slice(2),y?2:8):dn.test(d)?NaN:+d}function Jw(d){return tl(d,zs(d))}function Mi(d){return null==d?"":zo(d)}var IT=ds(function(d,p){if(Jp(p)||Gs(p))tl(p,Ms(p),d);else for(var y in p)Ci.call(p,y)&&Xs(d,y,p[y])}),To=ds(function(d,p){tl(p,zs(p),d)}),$o=ds(function(d,p,y,K){tl(p,zs(p),d,K)}),DT=ds(function(d,p,y,K){tl(p,Ms(p),d,K)}),RT=il(uu),NT=Wn(function(d,p){d=Si(d);var y=-1,K=p.length,we=K>2?p[2]:C;for(we&&Kr(p[0],p[1],we)&&(K=1);++y<K;)for(var Fe=p[y],et=zs(Fe),ot=-1,pt=et.length;++ot<pt;){var Dt=et[ot],Nt=d[Dt];(Nt===C||Co(Nt,iu[Dt])&&!Ci.call(d,Dt))&&(d[Dt]=Fe[Dt])}return d}),PT=Wn(function(d){return d.push(C,B_),qs(gy,C,d)});function xu(d,p,y){var K=null==d?C:Go(d,p);return K===C?y:K}function bg(d,p){return null!=d&&$h(d,p,_C)}var ex=nl(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=hd.call(p)),d[p]=y},xy($i)),qF=nl(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=hd.call(p)),Ci.call(d,p)?d[p].push(y):d[p]=[y]},wn),YF=Wn(du);function Ms(d){return Gs(d)?Ts(d):jp(d)}function zs(d){return Gs(d)?Ts(d,!0):function Wb(d){if(!Cr(d))return function Yh(d){var p=[];if(null!=d)for(var y in Si(d))p.push(y);return p}(d);var p=Jp(d),y=[];for(var K in d)"constructor"==K&&(p||!Ci.call(d,K))||y.push(K);return y}(d)}var KF=ds(function(d,p,y){Bh(d,p,y)}),gy=ds(function(d,p,y,K){Bh(d,p,y,K)}),UT=il(function(d,p){var y={};if(null==d)return y;var K=!1;p=ur(p,function(Fe){return Fe=Pa(Fe,d),K||(K=Fe.length>1),Fe}),tl(d,U_(d),y),K&&(y=Ur(y,7,k_));for(var we=p.length;we--;)I_(y,p[we]);return y}),HT=il(function(d,p){return null==d?{}:function SC(d,p){return Yb(d,p,function(y,K){return bg(d,K)})}(d,p)});function tx(d,p){if(null==d)return{};var y=ur(U_(d),function(K){return[K]});return p=wn(p),Yb(d,y,function(K,we){return p(K,we[0])})}var rx=Wp(Ms),sx=Wp(zs);function Cd(d){return null==d?[]:ct(d,Ms(d))}var lx=fc(function(d,p,y){return p=p.toLowerCase(),d+(y?cx(p):p)});function cx(d){return by(Mi(d).toLowerCase())}function ux(d){return(d=Mi(d))&&d.replace(ls,Th).replace(bF,"")}var JF=fc(function(d,p,y){return d+(y?"-":"")+p.toLowerCase()}),ZF=fc(function(d,p,y){return d+(y?" ":"")+p.toLowerCase()}),df=La("toLowerCase"),eM=fc(function(d,p,y){return d+(y?"_":"")+p.toLowerCase()}),nM=fc(function(d,p,y){return d+(y?" ":"")+by(p)}),sB=fc(function(d,p,y){return d+(y?" ":"")+p.toUpperCase()}),by=La("toUpperCase");function hf(d,p,y){return d=Mi(d),(p=y?C:p)===C?function ld(ht){return xF.test(ht)}(d)?function Ho(ht){return ht.match(wF)||[]}(d):function Tb(ht){return ht.match(Za)||[]}(d):d.match(p)||[]}var ff=Wn(function(d,p){try{return qs(d,C,p)}catch(y){return ly(y)?y:new Dn(y)}}),wy=il(function(d,p){return kr(p,function(y){y=ca(y),bi(d,y,ey(d[y],d))}),d});function xy(d){return function(){return d}}var gx=P_(),Td=P_(!0);function $i(d){return d}function cl(d){return wC("function"==typeof d?d:Ur(d,1))}var sM=Wn(function(d,p){return function(y){return du(y,d,p)}}),aB=Wn(function(d,p){return function(y){return du(d,y,p)}});function _x(d,p,y){var K=Ms(p),we=_d(p,K);null==y&&(!Cr(p)||!we.length&&K.length)&&(y=p,p=d,d=this,we=_d(p,Ms(p)));var Fe=!(Cr(y)&&"chain"in y&&!y.chain),et=al(d);return kr(we,function(ot){var pt=p[ot];d[ot]=pt,et&&(d.prototype[ot]=function(){var Dt=this.__chain__;if(Fe||Dt){var Nt=d(this.__wrapped__);return(Nt.__actions__=wo(this.__actions__)).push({func:pt,args:arguments,thisArg:d}),Nt.__chain__=Dt,Nt}return pt.apply(d,sc([this.value()],arguments))})}),d}function xg(){}var _c=Wo(ur),Ey=Wo(h_),Ay=Wo(Eh);function vx(d){return H_(d)?sd(ca(d)):function Xb(d){return function(p){return Go(p,d)}}(d)}var Sy=L_(),bx=L_(!0);function pf(){return[]}function Id(){return!1}var xx=Gh(function(d,p){return d+p},0),gf=zh("ceil"),Eg=Gh(function(d,p){return d/p},1),Cy=zh("floor"),Sx=Gh(function(d,p){return d*p},1),fM=zh("round"),cB=Gh(function(d,p){return d-p},0);return Re.after=function VF(d,p){if("function"!=typeof p)throw new qt(_);return d=Gn(d),function(){if(--d<1)return p.apply(this,arguments)}},Re.ary=Q_,Re.assign=IT,Re.assignIn=To,Re.assignInWith=$o,Re.assignWith=DT,Re.at=RT,Re.before=$w,Re.bind=ey,Re.bindAll=wy,Re.bindKey=gT,Re.castArray=function ny(){if(!arguments.length)return[];var d=arguments[0];return jn(d)?d:[d]},Re.chain=og,Re.chunk=function fw(d,p,y){p=(y?Kr(d,p,y):p===C)?1:jr(Gn(p),0);var K=null==d?0:d.length;if(!K||p<1)return[];for(var we=0,Fe=0,et=bt($t(K/p));we<K;)et[Fe++]=Us(d,we,we+=p);return et},Re.compact=function pw(d){for(var p=-1,y=null==d?0:d.length,K=0,we=[];++p<y;){var Fe=d[p];Fe&&(we[K++]=Fe)}return we},Re.concat=function HC(){var d=arguments.length;if(!d)return[];for(var p=bt(d-1),y=arguments[0],K=d;K--;)p[K-1]=arguments[K];return sc(jn(y)?wo(y):[y],Sr(p,1))},Re.cond=function fx(d){var p=null==d?0:d.length,y=wn();return d=p?ur(d,function(K){if("function"!=typeof K[1])throw new qt(_);return[y(K[0]),K[1]]}):[],Wn(function(K){for(var we=-1;++we<p;){var Fe=d[we];if(qs(Fe[0],this,K))return qs(Fe[1],this,K)}})},Re.conforms=function px(d){return function Nh(d){var p=Ms(d);return function(y){return A_(y,d,p)}}(Ur(d,1))},Re.constant=xy,Re.countBy=Hs,Re.create=function OT(d,p){var y=Cs(d);return null==p?y:E_(y,p)},Re.curry=function qw(d,p,y){var K=la(d,8,C,C,C,C,C,p=y?C:p);return K.placeholder=qw.placeholder,K},Re.curryRight=function ty(d,p,y){var K=la(d,16,C,C,C,C,C,p=y?C:p);return K.placeholder=ty.placeholder,K},Re.debounce=cg,Re.defaults=NT,Re.defaultsDeep=PT,Re.defer=mT,Re.delay=pc,Re.difference=tg,Re.differenceBy=vu,Re.differenceWith=GC,Re.drop=function gw(d,p,y){var K=null==d?0:d.length;return K?Us(d,(p=y||p===C?1:Gn(p))<0?0:p,K):[]},Re.dropRight=function mw(d,p,y){var K=null==d?0:d.length;return K?Us(d,0,(p=K-(p=y||p===C?1:Gn(p)))<0?0:p):[]},Re.dropRightWhile=function vd(d,p){return d&&d.length?Uh(d,wn(p,3),!0,!0):[]},Re.dropWhile=function bd(d,p){return d&&d.length?Uh(d,wn(p,3),!0):[]},Re.fill=function Jr(d,p,y,K){var we=null==d?0:d.length;return we?(y&&"number"!=typeof y&&Kr(d,p,y)&&(y=0,K=we),function Qa(d,p,y,K){var we=d.length;for((y=Gn(y))<0&&(y=-y>we?0:we+y),(K=K===C||K>we?we:Gn(K))<0&&(K+=we),K=y>K?0:mc(K);y<K;)d[y++]=p;return d}(d,p,y,K)):[]},Re.filter=function Lw(d,p){return(jn(d)?Sn:Ph)(d,wn(p,3))},Re.flatMap=function Bw(d,p){return Sr(rf(d,p),1)},Re.flatMapDeep=function oT(d,p){return Sr(rf(d,p),Ce)},Re.flatMapDepth=function kw(d,p,y){return y=y===C?1:Gn(y),Sr(rf(d,p),y)},Re.flatten=ng,Re.flattenDeep=function zC(d){return null!=d&&d.length?Sr(d,Ce):[]},Re.flattenDepth=function yw(d,p){return null!=d&&d.length?Sr(d,p=p===C?1:Gn(p)):[]},Re.flip=function ug(d){return la(d,512)},Re.flow=gx,Re.flowRight=Td,Re.fromPairs=function bu(d){for(var p=-1,y=null==d?0:d.length,K={};++p<y;){var we=d[p];K[we[0]]=we[1]}return K},Re.functions=function vg(d){return null==d?[]:_d(d,Ms(d))},Re.functionsIn=function Fl(d){return null==d?[]:_d(d,zs(d))},Re.groupBy=aT,Re.initial=function Y_(d){return null!=d&&d.length?Us(d,0,-1):[]},Re.intersection=ig,Re.intersectionBy=ww,Re.intersectionWith=WC,Re.invert=ex,Re.invertBy=qF,Re.invokeMap=cT,Re.iteratee=cl,Re.keyBy=uT,Re.keys=Ms,Re.keysIn=zs,Re.map=rf,Re.mapKeys=function py(d,p){var y={};return p=wn(p,3),Qi(d,function(K,we,Fe){bi(y,p(K,we,Fe),K)}),y},Re.mapValues=function XF(d,p){var y={};return p=wn(p,3),Qi(d,function(K,we,Fe){bi(y,we,p(K,we,Fe))}),y},Re.matches=function mx(d){return EC(Ur(d,1))},Re.matchesProperty=function oB(d,p){return AC(d,Ur(p,1))},Re.memoize=dg,Re.merge=KF,Re.mergeWith=gy,Re.method=sM,Re.methodOf=aB,Re.mixin=_x,Re.negate=af,Re.nthArg=function lB(d){return d=Gn(d),Wn(function(p){return Rr(p,d)})},Re.omit=UT,Re.omitBy=function VT(d,p){return tx(d,af(wn(p)))},Re.once=function sl(d){return $w(2,d)},Re.orderBy=function Uw(d,p,y,K){return null==d?[]:(jn(p)||(p=null==p?[]:[p]),jn(y=K?C:y)||(y=null==y?[]:[y]),T_(d,p,y))},Re.over=_c,Re.overArgs=HF,Re.overEvery=Ey,Re.overSome=Ay,Re.partial=ol,Re.partialRight=hg,Re.partition=Vw,Re.pick=HT,Re.pickBy=tx,Re.property=vx,Re.propertyOf=function Md(d){return function(p){return null==d?C:Go(d,p)}},Re.pull=Ew,Re.pullAll=Aw,Re.pullAllBy=function YC(d,p,y){return d&&d.length&&p&&p.length?Up(d,p,wn(y,2)):d},Re.pullAllWith=function NF(d,p,y){return d&&d.length&&p&&p.length?Up(d,p,C,y):d},Re.pullAt=Sw,Re.range=Sy,Re.rangeRight=bx,Re.rearg=_T,Re.reject=function Gw(d,p){return(jn(d)?Sn:Ph)(d,af(wn(p,3)))},Re.remove=function Cw(d,p){var y=[];if(!d||!d.length)return y;var K=-1,we=[],Fe=d.length;for(p=wn(p,3);++K<Fe;){var et=d[K];p(et,K,d)&&(y.push(et),we.push(K))}return Kb(d,we),y},Re.rest=function yT(d,p){if("function"!=typeof d)throw new qt(_);return Wn(d,p=p===C?p:Gn(p))},Re.reverse=Ui,Re.sampleSize=function Ww(d,p,y){return p=(y?Kr(d,p,y):p===C)?1:Gn(p),(jn(d)?gd:Zb)(d,p)},Re.set=function nx(d,p,y){return null==d?d:jh(d,p,y)},Re.setWith=function ix(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:jh(d,p,y,K)},Re.shuffle=function dT(d){return(jn(d)?zi:M_)(d)},Re.slice=function PF(d,p,y){var K=null==d?0:d.length;return K?(y&&"number"!=typeof y&&Kr(d,p,y)?(p=0,y=K):(p=null==p?0:Gn(p),y=y===C?K:Gn(y)),Us(d,p,y)):[]},Re.sortBy=pT,Re.sortedUniq=function XC(d){return d&&d.length?fu(d):[]},Re.sortedUniqBy=function KC(d,p){return d&&d.length?fu(d,wn(p,2)):[]},Re.split=function tM(d,p,y){return y&&"number"!=typeof y&&Kr(d,p,y)&&(p=y=C),(y=y===C?de:y>>>0)?(d=Mi(d))&&("string"==typeof p||null!=p&&!_g(p))&&!(p=zo(p))&&ad(d)?bo(po(d),0,y):d.split(p,y):[]},Re.spread=function GF(d,p){if("function"!=typeof d)throw new qt(_);return p=null==p?0:jr(Gn(p),0),Wn(function(y){var K=y[p],we=bo(y,0,p);return K&&sc(we,K),qs(d,this,we)})},Re.tail=function Iw(d){var p=null==d?0:d.length;return p?Us(d,1,p):[]},Re.take=function FF(d,p,y){return d&&d.length?Us(d,0,(p=y||p===C?1:Gn(p))<0?0:p):[]},Re.takeRight=function BF(d,p,y){var K=null==d?0:d.length;return K?Us(d,(p=K-(p=y||p===C?1:Gn(p)))<0?0:p,K):[]},Re.takeRightWhile=function kF(d,p){return d&&d.length?Uh(d,wn(p,3),!1,!0):[]},Re.takeWhile=function jF(d,p){return d&&d.length?Uh(d,wn(p,3)):[]},Re.tap=function tT(d,p){return p(d),d},Re.throttle=function zF(d,p,y){var K=!0,we=!0;if("function"!=typeof d)throw new qt(_);return Cr(y)&&(K="leading"in y?!!y.leading:K,we="trailing"in y?!!y.trailing:we),cg(d,p,{leading:K,maxWait:p,trailing:we})},Re.thru=ag,Re.toArray=fy,Re.toPairs=rx,Re.toPairsIn=sx,Re.toPath=function cM(d){return jn(d)?ur(d,ca):Js(d)?[d]:wo(Zh(Mi(d)))},Re.toPlainObject=Jw,Re.transform=function ox(d,p,y){var K=jn(d),we=K||Ll(d)||Fa(d);if(p=wn(p,4),null==y){var Fe=d&&d.constructor;y=we?K?new Fe:[]:Cr(d)&&al(Fe)?Cs(Tp(d)):{}}return(we?kr:Qi)(d,function(et,ot,pt){return p(y,et,ot,pt)}),y},Re.unary=function fg(d){return Q_(d,1)},Re.union=UF,Re.unionBy=JC,Re.unionWith=xd,Re.uniq=function fi(d){return d&&d.length?el(d):[]},Re.uniqBy=function Dw(d,p){return d&&d.length?el(d,wn(p,2)):[]},Re.uniqWith=function ZC(d,p){return p="function"==typeof p?p:C,d&&d.length?el(d,C,p):[]},Re.unset=function wg(d,p){return null==d||I_(d,p)},Re.unzip=Qh,Re.unzipWith=_n,Re.update=function ax(d,p,y){return null==d?d:Na(d,p,pu(y))},Re.updateWith=function my(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:Na(d,p,pu(y),K)},Re.values=Cd,Re.valuesIn=function Is(d){return null==d?[]:ct(d,zs(d))},Re.without=QC,Re.words=hf,Re.wrap=function vT(d,p){return ol(pu(p),d)},Re.xor=ef,Re.xorBy=tf,Re.xorWith=eT,Re.zip=Rw,Re.zipObject=function Ow(d,p){return Gp(d||[],p||[],Xs)},Re.zipObjectDeep=function rg(d,p){return Gp(d||[],p||[],jh)},Re.zipWith=sg,Re.entries=rx,Re.entriesIn=sx,Re.extend=To,Re.extendWith=$o,_x(Re,Re),Re.add=xx,Re.attempt=ff,Re.camelCase=lx,Re.capitalize=cx,Re.ceil=gf,Re.clamp=function zT(d,p,y){return y===C&&(y=p,p=C),y!==C&&(y=(y=da(y))==y?y:0),p!==C&&(p=(p=da(p))==p?p:0),sa(da(d),p,y)},Re.clone=function iy(d){return Ur(d,4)},Re.cloneDeep=function ry(d){return Ur(d,5)},Re.cloneDeepWith=function sy(d,p){return Ur(d,5,p="function"==typeof p?p:C)},Re.cloneWith=function Ed(d,p){return Ur(d,4,p="function"==typeof p?p:C)},Re.conformsTo=function lf(d,p){return null==p||A_(d,p,Ms(p))},Re.deburr=ux,Re.defaultTo=function rM(d,p){return null==d||d!=d?p:d},Re.divide=Eg,Re.endsWith=function $T(d,p,y){d=Mi(d),p=zo(p);var K=d.length,we=y=y===C?K:sa(Gn(y),0,K);return(y-=p.length)>=0&&d.slice(y,we)==p},Re.eq=Co,Re.escape=function qT(d){return(d=Mi(d))&&Gi.test(d)?d.replace(Fs,JS):d},Re.escapeRegExp=function dx(d){return(d=Mi(d))&&Ke.test(d)?d.replace(ze,"\\$&"):d},Re.every=function nf(d,p,y){var K=jn(d)?h_:S_;return y&&Kr(d,p,y)&&(p=C),K(d,wn(p,3))},Re.find=Fw,Re.findIndex=_w,Re.findKey=function LT(d,p){return Ys(d,wn(p,3),Qi)},Re.findLast=sT,Re.findLastIndex=Wi,Re.findLastKey=function Zw(d,p){return Ys(d,wn(p,3),us)},Re.floor=Cy,Re.forEach=jw,Re.forEachRight=Z_,Re.forIn=function FT(d,p){return null==d?d:vr(d,wn(p,3),zs)},Re.forInRight=function BT(d,p){return null==d?d:Fp(d,wn(p,3),zs)},Re.forOwn=function kT(d,p){return d&&Qi(d,wn(p,3))},Re.forOwnRight=function jT(d,p){return d&&us(d,wn(p,3))},Re.get=xu,Re.gt=Ad,Re.gte=oy,Re.has=function Qw(d,p){return null!=d&&$h(d,p,mC)},Re.hasIn=bg,Re.head=vw,Re.identity=$i,Re.includes=function lT(d,p,y,K){d=Gs(d)?d:Cd(d),y=y&&!K?Gn(y):0;var we=d.length;return y<0&&(y=jr(we+y,0)),wu(d)?y<=we&&d.indexOf(p,y)>-1:!!we&&Sh(d,p,y)>-1},Re.indexOf=function bw(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var we=null==y?0:Gn(y);return we<0&&(we=jr(K+we,0)),Sh(d,p,we)},Re.inRange=function WT(d,p,y){return p=ll(p),y===C?(y=p,p=0):y=ll(y),function C_(d,p,y){return d>=Ss(p,y)&&d<jr(p,y)}(d=da(d),p,y)},Re.invoke=YF,Re.isArguments=Pl,Re.isArray=jn,Re.isArrayBuffer=WF,Re.isArrayLike=Gs,Re.isArrayLikeObject=nr,Re.isBoolean=function bT(d){return!0===d||!1===d||Or(d)&&er(d)==A},Re.isBuffer=Ll,Re.isDate=wT,Re.isElement=function xT(d){return Or(d)&&1===d.nodeType&&!gc(d)},Re.isEmpty=function ay(d){if(null==d)return!0;if(Gs(d)&&(jn(d)||"string"==typeof d||"function"==typeof d.splice||Ll(d)||Fa(d)||Pl(d)))return!d.length;var p=tr(d);if(p==te||p==Ue)return!d.size;if(Jp(d))return!jp(d).length;for(var y in d)if(Ci.call(d,y))return!1;return!0},Re.isEqual=function Yw(d,p){return kp(d,p)},Re.isEqualWith=function ET(d,p,y){var K=(y="function"==typeof y?y:C)?y(d,p):C;return K===C?kp(d,p,C,y):!!K},Re.isError=ly,Re.isFinite=function cf(d){return"number"==typeof d&&cs(d)},Re.isFunction=al,Re.isInteger=pg,Re.isLength=gg,Re.isMap=Sd,Re.isMatch=function AT(d,p){return d===p||zb(d,p,V_(p))},Re.isMatchWith=function mg(d,p,y){return y="function"==typeof y?y:C,zb(d,p,V_(p),y)},Re.isNaN=function cy(d){return uf(d)&&d!=+d},Re.isNative=function ST(d){if(kC(d))throw new Dn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bC(d)},Re.isNil=function uy(d){return null==d},Re.isNull=function Xw(d){return null===d},Re.isNumber=uf,Re.isObject=Cr,Re.isObjectLike=Or,Re.isPlainObject=gc,Re.isRegExp=_g,Re.isSafeInteger=function Kw(d){return pg(d)&&d>=-ke&&d<=ke},Re.isSet=dy,Re.isString=wu,Re.isSymbol=Js,Re.isTypedArray=Fa,Re.isUndefined=function CT(d){return d===C},Re.isWeakMap=function TT(d){return Or(d)&&tr(d)==wt},Re.isWeakSet=function $F(d){return Or(d)&&"[object WeakSet]"==er(d)},Re.join=function $C(d,p){return null==d?"":lc.call(d,p)},Re.kebabCase=JF,Re.last=ua,Re.lastIndexOf=function xw(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var we=K;return y!==C&&(we=(we=Gn(y))<0?jr(K+we,0):Ss(we,K-1)),p==p?function Db(ht,It,bt){for(var Ht=bt+1;Ht--;)if(ht[Ht]===It)return Ht;return Ht}(d,p,we):Ah(d,rd,we,!0)},Re.lowerCase=ZF,Re.lowerFirst=df,Re.lt=yg,Re.lte=hy,Re.max=function dM(d){return d&&d.length?hc(d,$i,Fh):C},Re.maxBy=function hM(d,p){return d&&d.length?hc(d,wn(p,2),Fh):C},Re.mean=function Ty(d){return bp(d,$i)},Re.meanBy=function Ex(d,p){return bp(d,wn(p,2))},Re.min=function Eu(d){return d&&d.length?hc(d,$i,$b):C},Re.minBy=function Ax(d,p){return d&&d.length?hc(d,wn(p,2),$b):C},Re.stubArray=pf,Re.stubFalse=Id,Re.stubObject=function oM(){return{}},Re.stubString=function aM(){return""},Re.stubTrue=function wx(){return!0},Re.multiply=Sx,Re.nth=function qC(d,p){return d&&d.length?Rr(d,Gn(p)):C},Re.noConflict=function yx(){return Wr._===this&&(Wr._=nC),this},Re.noop=xg,Re.now=sf,Re.pad=function XT(d,p,y){d=Mi(d);var K=(p=Gn(p))?Tl(d):0;if(!p||K>=p)return d;var we=(p-K)/2;return aa($r(we),y)+d+aa($t(we),y)},Re.padEnd=function KT(d,p,y){d=Mi(d);var K=(p=Gn(p))?Tl(d):0;return p&&K<p?d+aa(p-K,y):d},Re.padStart=function JT(d,p,y){d=Mi(d);var K=(p=Gn(p))?Tl(d):0;return p&&K<p?aa(p-K,y)+d:d},Re.parseInt=function hx(d,p,y){return y||null==p?p=0:p&&(p=+p),rC(Mi(d).replace(zt,""),p||0)},Re.random=function _y(d,p,y){if(y&&"boolean"!=typeof y&&Kr(d,p,y)&&(p=y=C),y===C&&("boolean"==typeof p?(y=p,p=C):"boolean"==typeof d&&(y=d,d=C)),d===C&&p===C?(d=0,p=1):(d=ll(d),p===C?(p=d,d=0):p=ll(p)),d>p){var K=d;d=p,p=K}if(y||d%1||p%1){var we=kb();return Ss(d+we*(p-d+xb("1e-"+((we+"").length-1))),p)}return kh(d,p)},Re.reduce=function lg(d,p,y){var K=jn(d)?Cb:Mb,we=arguments.length<3;return K(d,wn(p,4),y,we,yo)},Re.reduceRight=function Hw(d,p,y){var K=jn(d)?YS:Mb,we=arguments.length<3;return K(d,wn(p,4),y,we,kn)},Re.repeat=function ZT(d,p,y){return p=(y?Kr(d,p,y):p===C)?1:Gn(p),oa(Mi(d),p)},Re.replace=function QT(){var d=arguments,p=Mi(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Re.result=function GT(d,p,y){var K=-1,we=(p=Pa(p,d)).length;for(we||(we=1,d=C);++K<we;){var Fe=null==d?C:d[ca(p[K])];Fe===C&&(K=we,Fe=y),d=al(Fe)?Fe.call(d):Fe}return d},Re.round=fM,Re.runInContext=ht,Re.sample=function zw(d){return(jn(d)?_o:Jb)(d)},Re.size=function hT(d){if(null==d)return 0;if(Gs(d))return wu(d)?Tl(d):d.length;var p=tr(d);return p==te||p==Ue?d.size:jp(d).length},Re.snakeCase=eM,Re.some=function fT(d,p,y){var K=jn(d)?Eh:Ks;return y&&Kr(d,p,y)&&(p=C),K(d,wn(p,3))},Re.sortedIndex=function Tw(d,p){return Vp(d,p)},Re.sortedIndexBy=function LF(d,p,y){return hu(d,p,wn(y,2))},Re.sortedIndexOf=function X_(d,p){var y=null==d?0:d.length;if(y){var K=Vp(d,p);if(K<y&&Co(d[K],p))return K}return-1},Re.sortedLastIndex=function Ao(d,p){return Vp(d,p,!0)},Re.sortedLastIndexBy=function Mw(d,p,y){return hu(d,p,wn(y,2),!0)},Re.sortedLastIndexOf=function wd(d,p){if(null!=d&&d.length){var K=Vp(d,p,!0)-1;if(Co(d[K],p))return K}return-1},Re.startCase=nM,Re.startsWith=function iM(d,p,y){return d=Mi(d),y=null==y?0:sa(Gn(y),0,d.length),p=zo(p),d.slice(y,y+p.length)==p},Re.subtract=cB,Re.sum=function Ag(d){return d&&d.length?wp(d,$i):0},Re.sumBy=function pM(d,p){return d&&d.length?wp(d,wn(p,2)):0},Re.template=function yy(d,p,y){var K=Re.templateSettings;y&&Kr(d,p,y)&&(p=C),d=Mi(d),p=$o({},p,K,rw);var ot,pt,we=$o({},p.imports,K.imports,rw),Fe=Ms(we),et=ct(we,Fe),Dt=0,Nt=p.interpolate||St,Ut="__p += '",Yt=dd((p.escape||St).source+"|"+Nt.source+"|"+(Nt===rc?Ji:St).source+"|"+(p.evaluate||St).source+"|$","g"),cn="//# sourceURL="+(Ci.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gp+"]")+"\n";d.replace(Yt,function(Rn,ni,ci,Mo,hn,xn){return ci||(ci=Mo),Ut+=d.slice(Dt,xn).replace(_e,ZS),ni&&(ot=!0,Ut+="' +\n__e("+ni+") +\n'"),hn&&(pt=!0,Ut+="';\n"+hn+";\n__p += '"),ci&&(Ut+="' +\n((__t = ("+ci+")) == null ? '' : __t) +\n'"),Dt=xn+Rn.length,Rn}),Ut+="';\n";var Mn=Ci.call(p,"variable")&&p.variable;if(Mn){if(Jt.test(Mn))throw new Dn("Invalid `variable` option passed into `_.template`")}else Ut="with (obj) {\n"+Ut+"\n}\n";Ut=(pt?Ut.replace(vn,""):Ut).replace(Ni,"$1").replace(ta,"$1;"),Ut="function("+(Mn||"obj")+") {\n"+(Mn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(pt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ut+"return __p\n}";var $n=ff(function(){return hi(Fe,cn+"return "+Ut).apply(C,et)});if($n.source=Ut,ly($n))throw $n;return $n},Re.times=function lM(d,p){if((d=Gn(d))<1||d>ke)return[];var y=de,K=Ss(d,de);p=wn(p),d-=de;for(var we=oc(K,p);++y<d;)p(y);return we},Re.toFinite=ll,Re.toInteger=Gn,Re.toLength=mc,Re.toLower=function QF(d){return Mi(d).toLowerCase()},Re.toNumber=da,Re.toSafeInteger=function MT(d){return d?sa(Gn(d),-ke,ke):0===d?d:0},Re.toString=Mi,Re.toUpper=function eB(d){return Mi(d).toUpperCase()},Re.trim=function vy(d,p,y){if((d=Mi(d))&&(y||p===C))return Cl(d);if(!d||!(p=zo(p)))return d;var K=po(d),we=po(p);return bo(K,jt(K,we),Ch(K,we)+1).join("")},Re.trimEnd=function tB(d,p,y){if((d=Mi(d))&&(y||p===C))return d.slice(0,Ep(d)+1);if(!d||!(p=zo(p)))return d;var K=po(d);return bo(K,0,Ch(K,po(p))+1).join("")},Re.trimStart=function nB(d,p,y){if((d=Mi(d))&&(y||p===C))return d.replace(zt,"");if(!d||!(p=zo(p)))return d;var K=po(d);return bo(K,jt(K,po(p))).join("")},Re.truncate=function iB(d,p){var y=30,K="...";if(Cr(p)){var we="separator"in p?p.separator:we;y="length"in p?Gn(p.length):y,K="omission"in p?zo(p.omission):K}var Fe=(d=Mi(d)).length;if(ad(d)){var et=po(d);Fe=et.length}if(y>=Fe)return d;var ot=y-Tl(K);if(ot<1)return K;var pt=et?bo(et,0,ot).join(""):d.slice(0,ot);if(we===C)return pt+K;if(et&&(ot+=pt.length-ot),_g(we)){if(d.slice(ot).search(we)){var Dt,Nt=pt;for(we.global||(we=dd(we.source,Mi(Ta.exec(we))+"g")),we.lastIndex=0;Dt=we.exec(Nt);)var Ut=Dt.index;pt=pt.slice(0,Ut===C?ot:Ut)}}else if(d.indexOf(zo(we),ot)!=ot){var Yt=pt.lastIndexOf(we);Yt>-1&&(pt=pt.slice(0,Yt))}return pt+K},Re.unescape=function rB(d){return(d=Mi(d))&&ao.test(d)?d.replace(lr,AF):d},Re.uniqueId=function uM(d){var p=++Ob;return Mi(d)+p},Re.upperCase=sB,Re.upperFirst=by,Re.each=jw,Re.eachRight=Z_,Re.first=vw,_x(Re,function(){var d={};return Qi(Re,function(p,y){Ci.call(Re.prototype,y)||(d[y]=p)}),d}(),{chain:!1}),Re.VERSION="4.17.21",kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Re[d].placeholder=Re}),kr(["drop","take"],function(d,p){li.prototype[d]=function(y){y=y===C?1:jr(Gn(y),0);var K=this.__filtered__&&!p?new li(this):this.clone();return K.__filtered__?K.__takeCount__=Ss(y,K.__takeCount__):K.__views__.push({size:Ss(y,de),type:d+(K.__dir__<0?"Right":"")}),K},li.prototype[d+"Right"]=function(y){return this.reverse()[d](y).reverse()}}),kr(["filter","map","takeWhile"],function(d,p){var y=p+1,K=1==y||3==y;li.prototype[d]=function(we){var Fe=this.clone();return Fe.__iteratees__.push({iteratee:wn(we,3),type:y}),Fe.__filtered__=Fe.__filtered__||K,Fe}}),kr(["head","last"],function(d,p){var y="take"+(p?"Right":"");li.prototype[d]=function(){return this[y](1).value()[0]}}),kr(["initial","tail"],function(d,p){var y="drop"+(p?"":"Right");li.prototype[d]=function(){return this.__filtered__?new li(this):this[y](1)}}),li.prototype.compact=function(){return this.filter($i)},li.prototype.find=function(d){return this.filter(d).head()},li.prototype.findLast=function(d){return this.reverse().find(d)},li.prototype.invokeMap=Wn(function(d,p){return"function"==typeof d?new li(this):this.map(function(y){return du(y,d,p)})}),li.prototype.reject=function(d){return this.filter(af(wn(d)))},li.prototype.slice=function(d,p){d=Gn(d);var y=this;return y.__filtered__&&(d>0||p<0)?new li(y):(d<0?y=y.takeRight(-d):d&&(y=y.drop(d)),p!==C&&(y=(p=Gn(p))<0?y.dropRight(-p):y.take(p-d)),y)},li.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},li.prototype.toArray=function(){return this.take(de)},Qi(li.prototype,function(d,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),K=/^(?:head|last)$/.test(p),we=Re[K?"take"+("last"==p?"Right":""):p],Fe=K||/^find/.test(p);we&&(Re.prototype[p]=function(){var et=this.__wrapped__,ot=K?[1]:arguments,pt=et instanceof li,Dt=ot[0],Nt=pt||jn(et),Ut=function(ni){var ci=we.apply(Re,sc([ni],ot));return K&&Yt?ci[0]:ci};Nt&&y&&"function"==typeof Dt&&1!=Dt.length&&(pt=Nt=!1);var Yt=this.__chain__,Mn=Fe&&!Yt,$n=pt&&!this.__actions__.length;if(!Fe&&Nt){et=$n?et:new li(this);var Rn=d.apply(et,ot);return Rn.__actions__.push({func:ag,args:[Ut],thisArg:C}),new go(Rn,Yt)}return Mn&&$n?d.apply(this,ot):(Rn=this.thru(Ut),Mn?K?Rn.value()[0]:Rn.value():Rn)})}),kr(["pop","push","shift","sort","splice","unshift"],function(d){var p=Ap[d],y=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",K=/^(?:pop|shift)$/.test(d);Re.prototype[d]=function(){var we=arguments;if(K&&!this.__chain__){var Fe=this.value();return p.apply(jn(Fe)?Fe:[],we)}return this[y](function(et){return p.apply(jn(et)?et:[],we)})}}),Qi(li.prototype,function(d,p){var y=Re[p];if(y){var K=y.name+"";Ci.call(cc,K)||(cc[K]=[]),cc[K].push({name:p,func:y})}}),cc[hs(C,2).name]=[{name:"wrapper",func:C}],li.prototype.clone=function oC(){var d=new li(this.__wrapped__);return d.__actions__=wo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=wo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=wo(this.__views__),d},li.prototype.reverse=function Vb(){if(this.__filtered__){var d=new li(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},li.prototype.value=function fd(){var d=this.__wrapped__.value(),p=this.__dir__,y=jn(d),K=p<0,we=y?d.length:0,Fe=function LC(d,p,y){for(var K=-1,we=y.length;++K<we;){var Fe=y[K],et=Fe.size;switch(Fe.type){case"drop":d+=et;break;case"dropRight":p-=et;break;case"take":p=Ss(p,d+et);break;case"takeRight":d=jr(d,p-et)}}return{start:d,end:p}}(0,we,this.__views__),et=Fe.start,ot=Fe.end,pt=ot-et,Dt=K?ot:et-1,Nt=this.__iteratees__,Ut=Nt.length,Yt=0,cn=Ss(pt,this.__takeCount__);if(!y||!K&&we==pt&&cn==pt)return Qb(d,this.__actions__);var Mn=[];e:for(;pt--&&Yt<cn;){for(var $n=-1,Rn=d[Dt+=p];++$n<Ut;){var ni=Nt[$n],Mo=ni.type,hn=(0,ni.iteratee)(Rn);if(2==Mo)Rn=hn;else if(!hn){if(1==Mo)continue e;break e}}Mn[Yt++]=Rn}return Mn},Re.prototype.at=nT,Re.prototype.chain=function Nw(){return og(this)},Re.prototype.commit=function iT(){return new go(this.value(),this.__chain__)},Re.prototype.next=function rT(){this.__values__===C&&(this.__values__=fy(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?C:this.__values__[this.__index__++]}},Re.prototype.plant=function K_(d){for(var p,y=this;y instanceof Rl;){var K=q_(y);K.__index__=0,K.__values__=C,p?we.__wrapped__=K:p=K;var we=K;y=y.__wrapped__}return we.__wrapped__=d,p},Re.prototype.reverse=function Pw(){var d=this.__wrapped__;if(d instanceof li){var p=d;return this.__actions__.length&&(p=new li(this)),(p=p.reverse()).__actions__.push({func:ag,args:[Ui],thisArg:C}),new go(p,this.__chain__)}return this.thru(Ui)},Re.prototype.toJSON=Re.prototype.valueOf=Re.prototype.value=function J_(){return Qb(this.__wrapped__,this.__actions__)},Re.prototype.first=Re.prototype.head,Ih&&(Re.prototype[Ih]=function So(){return this}),Re}();Wr._=Ml,(Q=function(){return Ml}.call(me,S,me,je))!==C&&(je.exports=Q)}.call(this)},835:(je,me,S)=>{var Q=S(4298),C=Q.ARRAY_BUFFER_SUPPORT,Y=Q.SYMBOL_SUPPORT;je.exports=function(X,_){var E,F,W,N,D;if(!X)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(X)||C&&ArrayBuffer.isView(X)||"string"==typeof X||"[object Arguments]"===X.toString())for(W=0,N=X.length;W<N;W++)_(X[W],W);else if("function"!=typeof X.forEach)if(Y&&Symbol.iterator in X&&"function"!=typeof X.next&&(X=X[Symbol.iterator]()),"function"!=typeof X.next)for(F in X)X.hasOwnProperty(F)&&_(X[F],F);else for(E=X,W=0;!0!==(D=E.next()).done;)_(D.value,W),W++;else X.forEach(_)}},2135:je=>{function me(S){if("function"!=typeof S)throw new Error("obliterator/iterator: expecting a function!");this.next=S}typeof Symbol<"u"&&(me.prototype[Symbol.iterator]=function(){return this}),me.of=function(){var S=arguments,Q=S.length,C=0;return new me(function(){return C>=Q?{done:!0}:{done:!1,value:S[C++]}})},me.empty=function(){return new me(function(){return{done:!0}})},me.fromSequence=function(S){var Q=0,C=S.length;return new me(function(){return Q>=C?{done:!0}:{done:!1,value:S[Q++]}})},me.is=function(S){return S instanceof me||"object"==typeof S&&null!==S&&"function"==typeof S.next},je.exports=me},4298:(je,me)=>{me.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",me.SYMBOL_SUPPORT=typeof Symbol<"u"},2963:(je,me,S)=>{var Q=S(2135),C=S(835);function Y(){this.clear()}Y.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},Y.prototype.enqueue=function(z){return this.items.push(z),++this.size},Y.prototype.dequeue=function(){if(this.size){var z=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,z}},Y.prototype.peek=function(){if(this.size)return this.items[this.offset]},Y.prototype.forEach=function(z,X){X=arguments.length>1?X:this;for(var _=this.offset,E=0,F=this.items.length;_<F;_++,E++)z.call(X,this.items[_],E,this)},Y.prototype.toArray=function(){return this.items.slice(this.offset)},Y.prototype.values=function(){var z=this.items,X=this.offset;return new Q(function(){if(X>=z.length)return{done:!0};var _=z[X];return X++,{value:_,done:!1}})},Y.prototype.entries=function(){var z=this.items,X=this.offset,_=0;return new Q(function(){if(X>=z.length)return{done:!0};var E=z[X];return X++,{value:[_++,E],done:!1}})},typeof Symbol<"u"&&(Y.prototype[Symbol.iterator]=Y.prototype.values),Y.prototype.toString=function(){return this.toArray().join(",")},Y.prototype.toJSON=function(){return this.toArray()},Y.prototype.inspect=function(){var z=this.toArray();return Object.defineProperty(z,"constructor",{value:Y,enumerable:!1}),z},typeof Symbol<"u"&&(Y.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y.prototype.inspect),Y.from=function(z){var X=new Y;return C(z,function(_){X.enqueue(_)}),X},Y.of=function(){return Y.from(arguments)},je.exports=Y},7783:je=>{je.exports=function me(S,Q,C){function Y(_,E){if(!Q[_]){if(!S[_]){if(z)return z(_,!0);throw new Error("Cannot find module '"+_+"'")}E=Q[_]={exports:{}},S[_][0].call(E.exports,function(W){return Y(S[_][1][W]||W)},E,E.exports,me,S,Q,C)}return Q[_].exports}for(var z=void 0,X=0;X<C.length;X++)Y(C[X]);return Y}({1:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){"use strict";var D=me("crypto");function se(q,k){var b;return void 0===(b="passthrough"!==(k=oe(q,k)).algorithm?D.createHash(k.algorithm):new ee).write&&(b.write=b.update,b.end=b.update),G(k,b).dispatch(q),b.update||b.end(""),b.digest?b.digest("buffer"===k.encoding?void 0:k.encoding):(q=b.read(),"buffer"!==k.encoding?q.toString(k.encoding):q)}(Q=S.exports=se).sha1=function(q){return se(q)},Q.keys=function(q){return se(q,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},Q.MD5=function(q){return se(q,{algorithm:"md5",encoding:"hex"})},Q.keysMD5=function(q){return se(q,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=D.getHashes?D.getHashes().slice():["sha1","md5"],B=(x.push("passthrough"),["buffer","hex","binary","base64"]);function oe(q,k){var b={};if(b.algorithm=(k=k||{}).algorithm||"sha1",b.encoding=k.encoding||"hex",b.excludeValues=!!k.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=!0===k.ignoreUnknown,b.respectType=!1!==k.respectType,b.respectFunctionNames=!1!==k.respectFunctionNames,b.respectFunctionProperties=!1!==k.respectFunctionProperties,b.unorderedArrays=!0===k.unorderedArrays,b.unorderedSets=!1!==k.unorderedSets,b.unorderedObjects=!1!==k.unorderedObjects,b.replacer=k.replacer||void 0,b.excludeKeys=k.excludeKeys||void 0,void 0===q)throw new Error("Object argument required.");for(var M=0;M<x.length;++M)x[M].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=x[M]);if(-1===x.indexOf(b.algorithm))throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+x.join(", "));if(-1===B.indexOf(b.encoding)&&"passthrough"!==b.algorithm)throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+B.join(", "));return b}function $(q){if("function"==typeof q)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(q))}function G(q,k,b){function M(T){return k.update?k.update(T,"utf8"):k.write(T,"utf8")}return b=b||[],{dispatch:function(T){return this["_"+(null===(T=q.replacer?q.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var ce,j=Object.prototype.toString.call(T),Me=/\[object (.*)\]/i.exec(j);if(Me=(Me=Me?Me[1]:"unknown:["+j+"]").toLowerCase(),0<=(j=b.indexOf(T)))return this.dispatch("[CIRCULAR:"+j+"]");if(b.push(T),void 0!==z&&z.isBuffer&&z.isBuffer(T))return M("buffer:"),M(T);if("object"===Me||"function"===Me||"asyncfunction"===Me)return j=Object.keys(T),q.unorderedObjects&&(j=j.sort()),!1===q.respectType||$(T)||j.splice(0,0,"prototype","__proto__","constructor"),q.excludeKeys&&(j=j.filter(function(ae){return!q.excludeKeys(ae)})),M("object:"+j.length+":"),ce=this,j.forEach(function(ae){ce.dispatch(ae),M(":"),q.excludeValues||ce.dispatch(T[ae]),M(",")});if(!this["_"+Me]){if(q.ignoreUnknown)return M("["+Me+"]");throw new Error('Unknown object type "'+Me+'"')}this["_"+Me](T)},_array:function(T,ae){ae=void 0!==ae?ae:!1!==q.unorderedArrays;var j=this;if(M("array:"+T.length+":"),!ae||T.length<=1)return T.forEach(function(xe){return j.dispatch(xe)});var Me=[];return ae=T.map(function(xe){var Oe=new ee,Ve=b.slice();return G(q,Oe,Ve).dispatch(xe),Me=Me.concat(Ve.slice(b.length)),Oe.read().toString()}),b=b.concat(Me),ae.sort(),this._array(ae,!1)},_date:function(T){return M("date:"+T.toJSON())},_symbol:function(T){return M("symbol:"+T.toString())},_error:function(T){return M("error:"+T.toString())},_boolean:function(T){return M("bool:"+T.toString())},_string:function(T){M("string:"+T.length+":"),M(T.toString())},_function:function(T){M("fn:"),$(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==q.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),q.respectFunctionProperties&&this._object(T)},_number:function(T){return M("number:"+T.toString())},_xml:function(T){return M("xml:"+T.toString())},_null:function(){return M("Null")},_undefined:function(){return M("Undefined")},_regexp:function(T){return M("regex:"+T.toString())},_uint8array:function(T){return M("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return M("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return M("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return M("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return M("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return M("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return M("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return M("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return M("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return M("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return M("url:"+T.toString())},_map:function(T){return M("map:"),T=Array.from(T),this._array(T,!1!==q.unorderedSets)},_set:function(T){return M("set:"),T=Array.from(T),this._array(T,!1!==q.unorderedSets)},_file:function(T){return M("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(q.ignoreUnknown)return M("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return M("domwindow")},_bigint:function(T){return M("bigint:"+T.toString())},_process:function(){return M("process")},_timer:function(){return M("timer")},_pipe:function(){return M("pipe")},_tcp:function(){return M("tcp")},_udp:function(){return M("udp")},_tty:function(){return M("tty")},_statwatcher:function(){return M("statwatcher")},_securecontext:function(){return M("securecontext")},_connection:function(){return M("connection")},_zlib:function(){return M("zlib")},_context:function(){return M("context")},_nodescript:function(){return M("nodescript")},_httpparser:function(){return M("httpparser")},_dataview:function(){return M("dataview")},_signal:function(){return M("signal")},_fsevent:function(){return M("fsevent")},_tlswrap:function(){return M("tlswrap")}}}function ee(){return{buf:"",write:function(q){this.buf+=q},end:function(q){this.buf+=q},read:function(){return this.buf}}}Q.writeToStream=function(q,k,b){return void 0===b&&(b=k,k={}),G(k=oe(q,k),b).dispatch(q)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){!function(D){"use strict";var se=typeof Uint8Array<"u"?Uint8Array:Array;function k(b){return 43===(b=b.charCodeAt(0))||45===b?62:47===b||95===b?63:b<48?-1:b<58?b-48+26+26:b<91?b-65:b<123?b-97+26:void 0}D.toByteArray=function(b){var M,T;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ce="="===b.charAt((ce=b.length)-2)?2:"="===b.charAt(ce-1)?1:0,j=new se(3*b.length/4-ce),Me=0<ce?b.length-4:b.length,ae=0;function xe(Oe){j[ae++]=Oe}for(M=0;M<Me;M+=4,0)xe((16711680&(T=k(b.charAt(M))<<18|k(b.charAt(M+1))<<12|k(b.charAt(M+2))<<6|k(b.charAt(M+3))))>>16),xe((65280&T)>>8),xe(255&T);return 2==ce?xe(255&(T=k(b.charAt(M))<<2|k(b.charAt(M+1))>>4)):1==ce&&(xe((T=k(b.charAt(M))<<10|k(b.charAt(M+1))<<4|k(b.charAt(M+2))>>2)>>8&255),xe(255&T)),j},D.fromByteArray=function(b){var M,T,ce,j,Me=b.length%3,ae="";function xe(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(M=0,ce=b.length-Me;M<ce;M+=3)ae+=xe((j=T=(b[M]<<16)+(b[M+1]<<8)+b[M+2])>>18&63)+xe(j>>12&63)+xe(j>>6&63)+xe(63&j);switch(Me){case 1:ae=(ae+=xe((T=b[b.length-1])>>2))+xe(T<<4&63)+"==";break;case 2:ae=(ae=(ae+=xe((T=(b[b.length-2]<<8)+b[b.length-1])>>10))+xe(T>>4&63))+xe(T<<2&63)+"="}return ae}}(void 0===Q?this.base64js={}:Q)}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(me,S,Q){(function(C,Y,x,X,_,E,F,W,N){var D=me("base64-js"),se=me("ieee754");function x(fe,R,A){if(!(this instanceof x))return new x(fe,R,A);var ie,J,He,Xe,ue=typeof fe;if("base64"===R&&"string"==ue)for(fe=(Xe=fe).trim?Xe.trim():Xe.replace(/^\s+|\s+$/g,"");fe.length%4!=0;)fe+="=";if("number"==ue)ie=Ze(fe);else if("string"==ue)ie=x.byteLength(fe,R);else{if("object"!=ue)throw new Error("First argument needs to be a number, array or string.");ie=Ze(fe.length)}if(x._useTypedArrays?J=x._augment(new Uint8Array(ie)):((J=this).length=ie,J._isBuffer=!0),x._useTypedArrays&&"number"==typeof fe.byteLength)J._set(fe);else if(Je(Xe=fe)||x.isBuffer(Xe)||Xe&&"object"==typeof Xe&&"number"==typeof Xe.length)for(He=0;He<ie;He++)J[He]=x.isBuffer(fe)?fe.readUInt8(He):fe[He];else if("string"==ue)J.write(fe,0,R);else if("number"==ue&&!x._useTypedArrays&&!A)for(He=0;He<ie;He++)J[He]=0;return J}function G(fe,R,A,He){var J;if(He||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<fe.length,"Trying to read beyond buffer length")),!((He=fe.length)<=R))return A?(J=fe[R],R+1<He&&(J|=fe[R+1]<<8)):(J=fe[R]<<8,R+1<He&&(J|=fe[R+1])),J}function ee(fe,R,A,He){var J;if(He||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<fe.length,"Trying to read beyond buffer length")),!((He=fe.length)<=R))return A?(R+2<He&&(J=fe[R+2]<<16),R+1<He&&(J|=fe[R+1]<<8),J|=fe[R],R+3<He&&(J+=fe[R+3]<<24>>>0)):(R+1<He&&(J=fe[R+1]<<16),R+2<He&&(J|=fe[R+2]<<8),R+3<He&&(J|=fe[R+3]),J+=fe[R]<<24>>>0),J}function q(fe,R,A,ie){if(ie||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 32768&(ie=G(fe,R,A,!0))?-1*(65535-ie+1):ie}function k(fe,R,A,ie){if(ie||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 2147483648&(ie=ee(fe,R,A,!0))?-1*(4294967295-ie+1):ie}function b(fe,R,A,ie){return ie||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(R+3<fe.length,"Trying to read beyond buffer length")),se.read(fe,R,A,23,4)}function M(fe,R,A,ie){return ie||(Ye("boolean"==typeof A,"missing or invalid endian"),Ye(R+7<fe.length,"Trying to read beyond buffer length")),se.read(fe,R,A,52,8)}function T(fe,R,A,ie,J){if(J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+1<fe.length,"trying to write beyond buffer length"),Se(R,65535)),!((J=fe.length)<=A))for(var He=0,Xe=Math.min(J-A,2);He<Xe;He++)fe[A+He]=(R&255<<8*(ie?He:1-He))>>>8*(ie?He:1-He)}function ce(fe,R,A,ie,J){if(J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+3<fe.length,"trying to write beyond buffer length"),Se(R,4294967295)),!((J=fe.length)<=A))for(var He=0,Xe=Math.min(J-A,4);He<Xe;He++)fe[A+He]=R>>>8*(ie?He:3-He)&255}function j(fe,R,A,ie,J){J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+1<fe.length,"Trying to write beyond buffer length"),nt(R,32767,-32768)),fe.length<=A||T(fe,0<=R?R:65535+R+1,A,ie,J)}function Me(fe,R,A,ie,J){J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+3<fe.length,"Trying to write beyond buffer length"),nt(R,2147483647,-2147483648)),fe.length<=A||ce(fe,0<=R?R:4294967295+R+1,A,ie,J)}function ae(fe,R,A,ie,J){J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+3<fe.length,"Trying to write beyond buffer length"),mt(R,34028234663852886e22,-34028234663852886e22)),fe.length<=A||se.write(fe,R,A,ie,23,4)}function xe(fe,R,A,ie,J){J||(Ye(null!=R,"missing value"),Ye("boolean"==typeof ie,"missing or invalid endian"),Ye(null!=A,"missing offset"),Ye(A+7<fe.length,"Trying to write beyond buffer length"),mt(R,17976931348623157e292,-17976931348623157e292)),fe.length<=A||se.write(fe,R,A,ie,52,8)}Q.Buffer=x,Q.SlowBuffer=x,Q.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var fe=new ArrayBuffer(0),R=new Uint8Array(fe);return R.foo=function(){return 42},42===R.foo()&&"function"==typeof R.subarray}catch{return!1}}(),x.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(fe){return!(null==fe||!fe._isBuffer)},x.byteLength=function(fe,R){var A;switch(fe+="",R||"utf8"){case"hex":A=fe.length/2;break;case"utf8":case"utf-8":A=ke(fe).length;break;case"ascii":case"binary":case"raw":A=fe.length;break;case"base64":A=Ae(fe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=2*fe.length;break;default:throw new Error("Unknown encoding")}return A},x.concat=function(fe,R){if(Ye(Je(fe),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===fe.length)return new x(0);if(1===fe.length)return fe[0];if("number"!=typeof R)for(J=R=0;J<fe.length;J++)R+=fe[J].length;for(var A=new x(R),ie=0,J=0;J<fe.length;J++){var He=fe[J];He.copy(A,ie),ie+=He.length}return A},x.prototype.write=function(fe,R,A,ie){isFinite(R)?isFinite(A)||(ie=A,A=void 0):(te=ie,ie=R,R=A,A=te),R=Number(R)||0;var J,He,Xe,ue,te=this.length-R;switch((!A||te<(A=Number(A)))&&(A=te),ie=String(ie||"utf8").toLowerCase()){case"hex":J=function(U,I,O,he){O=Number(O)||0;var We=U.length-O;(!he||We<(he=Number(he)))&&(he=We),Ye((We=I.length)%2==0,"Invalid hex string"),We/2<he&&(he=We/2);for(var Ee=0;Ee<he;Ee++){var Ue=parseInt(I.substr(2*Ee,2),16);Ye(!isNaN(Ue),"Invalid hex string"),U[O+Ee]=Ue}return x._charsWritten=2*Ee,Ee}(this,fe,R,A);break;case"utf8":case"utf-8":He=this,Xe=R,ue=A,J=x._charsWritten=Be(ke(fe),He,Xe,ue);break;case"ascii":case"binary":J=function B(fe,R,A,ie){return x._charsWritten=Be(function(J){for(var He=[],Xe=0;Xe<J.length;Xe++)He.push(255&J.charCodeAt(Xe));return He}(R),fe,A,ie)}(this,fe,R,A);break;case"base64":He=this,Xe=R,ue=A,J=x._charsWritten=Be(Ae(fe),He,Xe,ue);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":J=function oe(fe,R,A,ie){return x._charsWritten=Be(function(J){for(var He,Xe,ue=[],te=0;te<J.length;te++)He=(Xe=J.charCodeAt(te))>>8,ue.push(Xe%=256),ue.push(He);return ue}(R),fe,A,ie)}(this,fe,R,A);break;default:throw new Error("Unknown encoding")}return J},x.prototype.toString=function(fe,R,A){var ie,J,He,Xe,ue=this;if(fe=String(fe||"utf8").toLowerCase(),R=Number(R)||0,(A=void 0!==A?Number(A):ue.length)===R)return"";switch(fe){case"hex":ie=function(te,U,I){var O=te.length;(!U||U<0)&&(U=0),(!I||I<0||O<I)&&(I=O);for(var he="",We=U;We<I;We++)he+=Ce(te[We]);return he}(ue,R,A);break;case"utf8":case"utf-8":ie=function(te,U,I){var O="",he="";I=Math.min(te.length,I);for(var We=U;We<I;We++)te[We]<=127?(O+=de(he)+String.fromCharCode(te[We]),he=""):he+="%"+te[We].toString(16);return O+de(he)}(ue,R,A);break;case"ascii":case"binary":ie=function $(fe,R,A){var ie="";A=Math.min(fe.length,A);for(var J=R;J<A;J++)ie+=String.fromCharCode(fe[J]);return ie}(ue,R,A);break;case"base64":J=ue,Xe=A,ie=0===(He=R)&&Xe===J.length?D.fromByteArray(J):D.fromByteArray(J.slice(He,Xe));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(te,U,I){for(var O=te.slice(U,I),he="",We=0;We<O.length;We+=2)he+=String.fromCharCode(O[We]+256*O[We+1]);return he}(ue,R,A);break;default:throw new Error("Unknown encoding")}return ie},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(fe,R,A,ie){if(R=R||0,(ie=ie||0===ie?ie:this.length)!==(A=A||0)&&0!==fe.length&&0!==this.length){Ye(A<=ie,"sourceEnd < sourceStart"),Ye(0<=R&&R<fe.length,"targetStart out of bounds"),Ye(0<=A&&A<this.length,"sourceStart out of bounds"),Ye(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var J=(ie=fe.length-R<ie-A?fe.length-R+A:ie)-A;if(J<100||!x._useTypedArrays)for(var He=0;He<J;He++)fe[He+R]=this[He+A];else fe._set(this.subarray(A,A+J),R)}},x.prototype.slice=function(fe,R){var A=this.length;if(fe=Ve(fe,A,0),R=Ve(R,A,A),x._useTypedArrays)return x._augment(this.subarray(fe,R));for(var ie=R-fe,J=new x(ie,void 0,!0),He=0;He<ie;He++)J[He]=this[He+fe];return J},x.prototype.get=function(fe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(fe)},x.prototype.set=function(fe,R){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(fe,R)},x.prototype.readUInt8=function(fe,R){if(R||(Ye(null!=fe,"missing offset"),Ye(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return this[fe]},x.prototype.readUInt16LE=function(fe,R){return G(this,fe,!0,R)},x.prototype.readUInt16BE=function(fe,R){return G(this,fe,!1,R)},x.prototype.readUInt32LE=function(fe,R){return ee(this,fe,!0,R)},x.prototype.readUInt32BE=function(fe,R){return ee(this,fe,!1,R)},x.prototype.readInt8=function(fe,R){if(R||(Ye(null!=fe,"missing offset"),Ye(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return 128&this[fe]?-1*(255-this[fe]+1):this[fe]},x.prototype.readInt16LE=function(fe,R){return q(this,fe,!0,R)},x.prototype.readInt16BE=function(fe,R){return q(this,fe,!1,R)},x.prototype.readInt32LE=function(fe,R){return k(this,fe,!0,R)},x.prototype.readInt32BE=function(fe,R){return k(this,fe,!1,R)},x.prototype.readFloatLE=function(fe,R){return b(this,fe,!0,R)},x.prototype.readFloatBE=function(fe,R){return b(this,fe,!1,R)},x.prototype.readDoubleLE=function(fe,R){return M(this,fe,!0,R)},x.prototype.readDoubleBE=function(fe,R){return M(this,fe,!1,R)},x.prototype.writeUInt8=function(fe,R,A){A||(Ye(null!=fe,"missing value"),Ye(null!=R,"missing offset"),Ye(R<this.length,"trying to write beyond buffer length"),Se(fe,255)),R>=this.length||(this[R]=fe)},x.prototype.writeUInt16LE=function(fe,R,A){T(this,fe,R,!0,A)},x.prototype.writeUInt16BE=function(fe,R,A){T(this,fe,R,!1,A)},x.prototype.writeUInt32LE=function(fe,R,A){ce(this,fe,R,!0,A)},x.prototype.writeUInt32BE=function(fe,R,A){ce(this,fe,R,!1,A)},x.prototype.writeInt8=function(fe,R,A){A||(Ye(null!=fe,"missing value"),Ye(null!=R,"missing offset"),Ye(R<this.length,"Trying to write beyond buffer length"),nt(fe,127,-128)),R>=this.length||this.writeUInt8(0<=fe?fe:255+fe+1,R,A)},x.prototype.writeInt16LE=function(fe,R,A){j(this,fe,R,!0,A)},x.prototype.writeInt16BE=function(fe,R,A){j(this,fe,R,!1,A)},x.prototype.writeInt32LE=function(fe,R,A){Me(this,fe,R,!0,A)},x.prototype.writeInt32BE=function(fe,R,A){Me(this,fe,R,!1,A)},x.prototype.writeFloatLE=function(fe,R,A){ae(this,fe,R,!0,A)},x.prototype.writeFloatBE=function(fe,R,A){ae(this,fe,R,!1,A)},x.prototype.writeDoubleLE=function(fe,R,A){xe(this,fe,R,!0,A)},x.prototype.writeDoubleBE=function(fe,R,A){xe(this,fe,R,!1,A)},x.prototype.fill=function(fe,R,A){if(R=R||0,A=A||this.length,Ye("number"==typeof(fe="string"==typeof(fe=fe||0)?fe.charCodeAt(0):fe)&&!isNaN(fe),"value is not a number"),Ye(R<=A,"end < start"),A!==R&&0!==this.length){Ye(0<=R&&R<this.length,"start out of bounds"),Ye(0<=A&&A<=this.length,"end out of bounds");for(var ie=R;ie<A;ie++)this[ie]=fe}},x.prototype.inspect=function(){for(var fe=[],R=this.length,A=0;A<R;A++)if(fe[A]=Ce(this[A]),A===Q.INSPECT_MAX_BYTES){fe[A+1]="...";break}return"<Buffer "+fe.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var fe=new Uint8Array(this.length),R=0,A=fe.length;R<A;R+=1)fe[R]=this[R];return fe.buffer};var Oe=x.prototype;function Ve(fe,R,A){return"number"!=typeof fe?A:R<=(fe=~~fe)?R:0<=fe||0<=(fe+=R)?fe:0}function Ze(fe){return(fe=~~Math.ceil(+fe))<0?0:fe}function Je(fe){return(Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)})(fe)}function Ce(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function ke(fe){for(var R=[],A=0;A<fe.length;A++){var ie=fe.charCodeAt(A);if(ie<=127)R.push(fe.charCodeAt(A));else for(var J=A,He=(55296<=ie&&ie<=57343&&A++,encodeURIComponent(fe.slice(J,A+1)).substr(1).split("%")),Xe=0;Xe<He.length;Xe++)R.push(parseInt(He[Xe],16))}return R}function Ae(fe){return D.toByteArray(fe)}function Be(fe,R,A,ie){for(var J=0;J<ie&&!(J+A>=R.length||J>=fe.length);J++)R[J+A]=fe[J];return J}function de(fe){try{return decodeURIComponent(fe)}catch{return"\ufffd"}}function Se(fe,R){Ye("number"==typeof fe,"cannot write a non-number as a number"),Ye(0<=fe,"specified a negative value for writing an unsigned value"),Ye(fe<=R,"value is larger than maximum value for type"),Ye(Math.floor(fe)===fe,"value has a fractional component")}function nt(fe,R,A){Ye("number"==typeof fe,"cannot write a non-number as a number"),Ye(fe<=R,"value larger than maximum allowed value"),Ye(A<=fe,"value smaller than minimum allowed value"),Ye(Math.floor(fe)===fe,"value has a fractional component")}function mt(fe,R,A){Ye("number"==typeof fe,"cannot write a non-number as a number"),Ye(fe<=R,"value larger than maximum allowed value"),Ye(A<=fe,"value smaller than minimum allowed value")}function Ye(fe,R){if(!fe)throw new Error(R||"Failed assertion")}x._augment=function(fe){return fe._isBuffer=!0,fe._get=fe.get,fe._set=fe.set,fe.get=Oe.get,fe.set=Oe.set,fe.write=Oe.write,fe.toString=Oe.toString,fe.toLocaleString=Oe.toString,fe.toJSON=Oe.toJSON,fe.copy=Oe.copy,fe.slice=Oe.slice,fe.readUInt8=Oe.readUInt8,fe.readUInt16LE=Oe.readUInt16LE,fe.readUInt16BE=Oe.readUInt16BE,fe.readUInt32LE=Oe.readUInt32LE,fe.readUInt32BE=Oe.readUInt32BE,fe.readInt8=Oe.readInt8,fe.readInt16LE=Oe.readInt16LE,fe.readInt16BE=Oe.readInt16BE,fe.readInt32LE=Oe.readInt32LE,fe.readInt32BE=Oe.readInt32BE,fe.readFloatLE=Oe.readFloatLE,fe.readFloatBE=Oe.readFloatBE,fe.readDoubleLE=Oe.readDoubleLE,fe.readDoubleBE=Oe.readDoubleBE,fe.writeUInt8=Oe.writeUInt8,fe.writeUInt16LE=Oe.writeUInt16LE,fe.writeUInt16BE=Oe.writeUInt16BE,fe.writeUInt32LE=Oe.writeUInt32LE,fe.writeUInt32BE=Oe.writeUInt32BE,fe.writeInt8=Oe.writeInt8,fe.writeInt16LE=Oe.writeInt16LE,fe.writeInt16BE=Oe.writeInt16BE,fe.writeInt32LE=Oe.writeInt32LE,fe.writeInt32BE=Oe.writeInt32BE,fe.writeFloatLE=Oe.writeFloatLE,fe.writeFloatBE=Oe.writeFloatBE,fe.writeDoubleLE=Oe.writeDoubleLE,fe.writeDoubleBE=Oe.writeDoubleBE,fe.fill=Oe.fill,fe.inspect=Oe.inspect,fe.toArrayBuffer=Oe.toArrayBuffer,fe}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(me,S,Q){(function(C,Y,D,X,_,E,F,W,N){D=me("buffer").Buffer;var x=new D(4);x.fill(0),S.exports={hash:function(B,oe,$,G){for(var ee=oe(function(T,ce){T.length%4!=0&&(T=D.concat([T,x],T.length+(4-T.length%4)));for(var Me=[],ae=ce?T.readInt32BE:T.readInt32LE,xe=0;xe<T.length;xe+=4)Me.push(ae.call(T,xe));return Me}(B=D.isBuffer(B)?B:new D(B),G),8*B.length),q=(oe=G,new D($)),k=oe?q.writeInt32BE:q.writeInt32LE,b=0;b<ee.length;b++)k.call(q,ee[b],4*b,!0);return q}}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(me,S,Q){(function(C,Y,D,X,_,E,F,W,N){D=me("buffer").Buffer;var se=me("./sha"),x=me("./sha256"),B=me("./rng"),oe={sha1:se,sha256:x,md5:me("./md5")},$=64,G=new D($);function ee(T,ce){var j=oe[T=T||"sha1"],Me=[];return j||q("algorithm:",T,"is not yet supported"),{update:function(ae){return D.isBuffer(ae)||(ae=new D(ae)),Me.push(ae),this},digest:function(ae){var xe=D.concat(Me);return xe=ce?function(Oe,Ve,Ze){D.isBuffer(Ve)||(Ve=new D(Ve)),D.isBuffer(Ze)||(Ze=new D(Ze)),Ve.length>$?Ve=Oe(Ve):Ve.length<$&&(Ve=D.concat([Ve,G],$));for(var Je=new D($),Ce=new D($),ke=0;ke<$;ke++)Je[ke]=54^Ve[ke],Ce[ke]=92^Ve[ke];return Ze=Oe(D.concat([Je,Ze])),Oe(D.concat([Ce,Ze]))}(j,ce,xe):j(xe),Me=null,ae?xe.toString(ae):xe}}}function q(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}G.fill(0),Q.createHash=function(T){return ee(T)},Q.createHmac=ee,Q.randomBytes=function(T,ce){if(!ce||!ce.call)return new D(B(T));try{ce.call(this,void 0,new D(B(T)))}catch(j){ce(j)}};var k,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],M=function(T){Q[T]=function(){q("sorry,",T,"is not implemented yet")}};for(k in b)M(b[k])}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){var D=me("./helpers");function se(q,k){q[k>>5]|=128<<k%32,q[14+(k+64>>>9<<4)]=k;for(var b=1732584193,M=-271733879,T=-1732584194,ce=271733878,j=0;j<q.length;j+=16){var Me=b,ae=M,xe=T,Oe=ce;b=B(b,M,T,ce,q[j+0],7,-680876936),ce=B(ce,b,M,T,q[j+1],12,-389564586),T=B(T,ce,b,M,q[j+2],17,606105819),M=B(M,T,ce,b,q[j+3],22,-1044525330),b=B(b,M,T,ce,q[j+4],7,-176418897),ce=B(ce,b,M,T,q[j+5],12,1200080426),T=B(T,ce,b,M,q[j+6],17,-1473231341),M=B(M,T,ce,b,q[j+7],22,-45705983),b=B(b,M,T,ce,q[j+8],7,1770035416),ce=B(ce,b,M,T,q[j+9],12,-1958414417),T=B(T,ce,b,M,q[j+10],17,-42063),M=B(M,T,ce,b,q[j+11],22,-1990404162),b=B(b,M,T,ce,q[j+12],7,1804603682),ce=B(ce,b,M,T,q[j+13],12,-40341101),T=B(T,ce,b,M,q[j+14],17,-1502002290),b=oe(b,M=B(M,T,ce,b,q[j+15],22,1236535329),T,ce,q[j+1],5,-165796510),ce=oe(ce,b,M,T,q[j+6],9,-1069501632),T=oe(T,ce,b,M,q[j+11],14,643717713),M=oe(M,T,ce,b,q[j+0],20,-373897302),b=oe(b,M,T,ce,q[j+5],5,-701558691),ce=oe(ce,b,M,T,q[j+10],9,38016083),T=oe(T,ce,b,M,q[j+15],14,-660478335),M=oe(M,T,ce,b,q[j+4],20,-405537848),b=oe(b,M,T,ce,q[j+9],5,568446438),ce=oe(ce,b,M,T,q[j+14],9,-1019803690),T=oe(T,ce,b,M,q[j+3],14,-187363961),M=oe(M,T,ce,b,q[j+8],20,1163531501),b=oe(b,M,T,ce,q[j+13],5,-1444681467),ce=oe(ce,b,M,T,q[j+2],9,-51403784),T=oe(T,ce,b,M,q[j+7],14,1735328473),b=$(b,M=oe(M,T,ce,b,q[j+12],20,-1926607734),T,ce,q[j+5],4,-378558),ce=$(ce,b,M,T,q[j+8],11,-2022574463),T=$(T,ce,b,M,q[j+11],16,1839030562),M=$(M,T,ce,b,q[j+14],23,-35309556),b=$(b,M,T,ce,q[j+1],4,-1530992060),ce=$(ce,b,M,T,q[j+4],11,1272893353),T=$(T,ce,b,M,q[j+7],16,-155497632),M=$(M,T,ce,b,q[j+10],23,-1094730640),b=$(b,M,T,ce,q[j+13],4,681279174),ce=$(ce,b,M,T,q[j+0],11,-358537222),T=$(T,ce,b,M,q[j+3],16,-722521979),M=$(M,T,ce,b,q[j+6],23,76029189),b=$(b,M,T,ce,q[j+9],4,-640364487),ce=$(ce,b,M,T,q[j+12],11,-421815835),T=$(T,ce,b,M,q[j+15],16,530742520),b=G(b,M=$(M,T,ce,b,q[j+2],23,-995338651),T,ce,q[j+0],6,-198630844),ce=G(ce,b,M,T,q[j+7],10,1126891415),T=G(T,ce,b,M,q[j+14],15,-1416354905),M=G(M,T,ce,b,q[j+5],21,-57434055),b=G(b,M,T,ce,q[j+12],6,1700485571),ce=G(ce,b,M,T,q[j+3],10,-1894986606),T=G(T,ce,b,M,q[j+10],15,-1051523),M=G(M,T,ce,b,q[j+1],21,-2054922799),b=G(b,M,T,ce,q[j+8],6,1873313359),ce=G(ce,b,M,T,q[j+15],10,-30611744),T=G(T,ce,b,M,q[j+6],15,-1560198380),M=G(M,T,ce,b,q[j+13],21,1309151649),b=G(b,M,T,ce,q[j+4],6,-145523070),ce=G(ce,b,M,T,q[j+11],10,-1120210379),T=G(T,ce,b,M,q[j+2],15,718787259),M=G(M,T,ce,b,q[j+9],21,-343485551),b=ee(b,Me),M=ee(M,ae),T=ee(T,xe),ce=ee(ce,Oe)}return Array(b,M,T,ce)}function x(q,k,b,M,T,ce){return ee((k=ee(ee(k,q),ee(M,ce)))<<T|k>>>32-T,b)}function B(q,k,b,M,T,ce,j){return x(k&b|~k&M,q,k,T,ce,j)}function oe(q,k,b,M,T,ce,j){return x(k&M|b&~M,q,k,T,ce,j)}function $(q,k,b,M,T,ce,j){return x(k^b^M,q,k,T,ce,j)}function G(q,k,b,M,T,ce,j){return x(b^(k|~M),q,k,T,ce,j)}function ee(q,k){var b=(65535&q)+(65535&k);return(q>>16)+(k>>16)+(b>>16)<<16|65535&b}S.exports=function(q){return D.hash(q,se,16)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){S.exports=function(se){for(var x,B=new Array(se),oe=0;oe<se;oe++)!(3&oe)&&(x=4294967296*Math.random()),B[oe]=x>>>((3&oe)<<3)&255;return B}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){var D=me("./helpers");function se(oe,$){oe[$>>5]|=128<<24-$%32,oe[15+($+64>>9<<4)]=$;for(var G,ee,q,k=Array(80),b=1732584193,M=-271733879,T=-1732584194,ce=271733878,j=-1009589776,Me=0;Me<oe.length;Me+=16){for(var ae=b,xe=M,Oe=T,Ve=ce,Ze=j,Je=0;Je<80;Je++){k[Je]=Je<16?oe[Me+Je]:B(k[Je-3]^k[Je-8]^k[Je-14]^k[Je-16],1);var Ce=x(x(B(b,5),(Ce=M,ee=T,q=ce,(G=Je)<20?Ce&ee|~Ce&q:!(G<40)&&G<60?Ce&ee|Ce&q|ee&q:Ce^ee^q)),x(x(j,k[Je]),(G=Je)<20?1518500249:G<40?1859775393:G<60?-1894007588:-899497514));j=ce,ce=T,T=B(M,30),M=b,b=Ce}b=x(b,ae),M=x(M,xe),T=x(T,Oe),ce=x(ce,Ve),j=x(j,Ze)}return Array(b,M,T,ce,j)}function x(oe,$){var G=(65535&oe)+(65535&$);return(oe>>16)+($>>16)+(G>>16)<<16|65535&G}function B(oe,$){return oe<<$|oe>>>32-$}S.exports=function(oe){return D.hash(oe,se,20,!0)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){function D($,G){var ee=(65535&$)+(65535&G);return($>>16)+(G>>16)+(ee>>16)<<16|65535&ee}function se($,G){var ee,q=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);$[G>>5]|=128<<24-G%32,$[15+(G+64>>9<<4)]=G;for(var M,T,ce=0;ce<$.length;ce+=16){for(var j=k[0],Me=k[1],ae=k[2],xe=k[3],Oe=k[4],Ve=k[5],Ze=k[6],Je=k[7],Ce=0;Ce<64;Ce++)b[Ce]=Ce<16?$[Ce+ce]:D(D(D(B(T=b[Ce-2],17)^B(T,19)^oe(T,10),b[Ce-7]),B(T=b[Ce-15],7)^B(T,18)^oe(T,3)),b[Ce-16]),ee=D(D(D(D(Je,B(T=Oe,6)^B(T,11)^B(T,25)),Oe&Ve^~Oe&Ze),q[Ce]),b[Ce]),M=D(B(M=j,2)^B(M,13)^B(M,22),j&Me^j&ae^Me&ae),Je=Ze,Ze=Ve,Ve=Oe,Oe=D(xe,ee),xe=ae,ae=Me,Me=j,j=D(ee,M);k[0]=D(j,k[0]),k[1]=D(Me,k[1]),k[2]=D(ae,k[2]),k[3]=D(xe,k[3]),k[4]=D(Oe,k[4]),k[5]=D(Ve,k[5]),k[6]=D(Ze,k[6]),k[7]=D(Je,k[7])}return k}var x=me("./helpers"),B=function($,G){return $>>>G|$<<32-G},oe=function($,G){return $>>>G};S.exports=function($){return x.hash($,se,32,!0)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){Q.read=function(D,se,x,B,ce){var $,G,ee=8*ce-B-1,q=(1<<ee)-1,k=q>>1,b=-7,M=x?ce-1:0,T=x?-1:1;for(ce=D[se+M],M+=T,$=ce&(1<<-b)-1,ce>>=-b,b+=ee;0<b;$=256*$+D[se+M],M+=T,b-=8);for(G=$&(1<<-b)-1,$>>=-b,b+=B;0<b;G=256*G+D[se+M],M+=T,b-=8);if(0===$)$=1-k;else{if($===q)return G?NaN:1/0*(ce?-1:1);G+=Math.pow(2,B),$-=k}return(ce?-1:1)*G*Math.pow(2,$-B)},Q.write=function(D,se,x,B,oe,j){var G,ee,q=8*j-oe-1,k=(1<<q)-1,b=k>>1,M=23===oe?Math.pow(2,-24)-Math.pow(2,-77):0,T=B?0:j-1,ce=B?1:-1;for(j=se<0||0===se&&1/se<0?1:0,se=Math.abs(se),isNaN(se)||se===1/0?(ee=isNaN(se)?1:0,G=k):(G=Math.floor(Math.log(se)/Math.LN2),se*(B=Math.pow(2,-G))<1&&(G--,B*=2),2<=(se+=1<=G+b?M/B:M*Math.pow(2,1-b))*B&&(G++,B/=2),k<=G+b?(ee=0,G=k):1<=G+b?(ee=(se*B-1)*Math.pow(2,oe),G+=b):(ee=se*Math.pow(2,b-1)*Math.pow(2,oe),G=0));8<=oe;D[x+T]=255&ee,T+=ce,ee/=256,oe-=8);for(G=G<<oe|ee,q+=oe;0<q;D[x+T]=255&G,T+=ce,G/=256,q-=8);D[x+T-ce]|=128*j}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(me,S,Q){(function(C,Y,z,X,_,E,F,W,N){var D,se,x;function B(){}(C=S.exports={}).nextTick=(se=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,se?function(oe){return window.setImmediate(oe)}:x?(D=[],window.addEventListener("message",function(oe){var $=oe.source;$!==window&&null!==$||"process-tick"!==oe.data||(oe.stopPropagation(),0<D.length&&D.shift()())},!0),function(oe){D.push(oe),window.postMessage("process-tick","*")}):function(oe){setTimeout(oe,0)}),C.title="browser",C.browser=!0,C.env={},C.argv=[],C.on=B,C.addListener=B,C.once=B,C.off=B,C.removeListener=B,C.removeAllListeners=B,C.emit=B,C.binding=function(oe){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(oe){throw new Error("process.chdir is not supported")}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},573:je=>{var S,Q,me=je.exports={};function C(){throw new Error("setTimeout has not been defined")}function Y(){throw new Error("clearTimeout has not been defined")}function z(B){if(S===setTimeout)return setTimeout(B,0);if((S===C||!S)&&setTimeout)return S=setTimeout,setTimeout(B,0);try{return S(B,0)}catch{try{return S.call(null,B,0)}catch{return S.call(this,B,0)}}}!function(){try{S="function"==typeof setTimeout?setTimeout:C}catch{S=C}try{Q="function"==typeof clearTimeout?clearTimeout:Y}catch{Q=Y}}();var F,_=[],E=!1,W=-1;function N(){!E||!F||(E=!1,F.length?_=F.concat(_):W=-1,_.length&&D())}function D(){if(!E){var B=z(N);E=!0;for(var oe=_.length;oe;){for(F=_,_=[];++W<oe;)F&&F[W].run();W=-1,oe=_.length}F=null,E=!1,function X(B){if(Q===clearTimeout)return clearTimeout(B);if((Q===Y||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(B);try{return Q(B)}catch{try{return Q.call(null,B)}catch{return Q.call(this,B)}}}(B)}}function se(B,oe){this.fun=B,this.array=oe}function x(){}me.nextTick=function(B){var oe=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)oe[$-1]=arguments[$];_.push(new se(B,oe)),1===_.length&&!E&&z(D)},se.prototype.run=function(){this.fun.apply(null,this.array)},me.title="browser",me.browser=!0,me.env={},me.argv=[],me.version="",me.versions={},me.on=x,me.addListener=x,me.once=x,me.off=x,me.removeListener=x,me.removeAllListeners=x,me.emit=x,me.prependListener=x,me.prependOnceListener=x,me.listeners=function(B){return[]},me.binding=function(B){throw new Error("process.binding is not supported")},me.cwd=function(){return"/"},me.chdir=function(B){throw new Error("process.chdir is not supported")},me.umask=function(){return 0}},4515:je=>{let me;je.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):S=>(me||(me=Promise.resolve())).then(S).catch(Q=>setTimeout(()=>{throw Q},0))},1224:(je,me,S)=>{je.exports=S(4548)},250:je=>{"use strict";je.exports=class PX{constructor(S,Q=new Map,C=0){this.prefix=S,this._existing=Q,this.counter=C}clone(){const{prefix:S,_existing:Q,counter:C}=this;return new PX(S,new Map(Q),C)}getId(S){const Q=S&&this._existing.get(S);if(Q)return Q;const C=this.prefix+this.counter;return this.counter++,S&&this._existing.set(S,C),C}hasId(S){return this._existing.has(S)}getOldIds(){return[...this._existing.keys()]}}},1126:(je,me,S)=>{"use strict";var Q=S(9293).default;S(7140);const C=self.crypto||self.msCrypto;je.exports=class{constructor(z){if(!C||!C.subtle)throw new Error("crypto.subtle not found.");if("sha256"===z)this.algorithm={name:"SHA-256"};else{if("sha1"!==z)throw new Error(`Unsupported algorithm "${z}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(z){this._content+=z}digest(){var z=this;return Q(function*(){const X=(new TextEncoder).encode(z._content),_=new Uint8Array(yield C.subtle.digest(z.algorithm,X));let E="";for(let F=0;F<_.length;++F)E+=_[F].toString(16).padStart(2,"0");return E})()}}},8276:je=>{"use strict";const Q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",C="http://www.w3.org/2001/XMLSchema#string",Y="NamedNode",z="BlankNode",X="Literal",_="DefaultGraph",E={};function F(x,B){return x.subject.termType===B.subject.termType&&x.object.termType===B.object.termType&&x.subject.value===B.subject.value&&x.predicate.value===B.predicate.value&&x.object.value===B.object.value&&(x.object.termType!==X||x.object.datatype.termType===B.object.datatype.termType&&x.object.language===B.object.language&&x.object.datatype.value===B.object.datatype.value)}(()=>{const x="(?:<([^:]+:[^>]*)>)",oe="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",$=oe+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+oe+"0-9])(?:(?:["+$+".])*(?:["+$+"]))?)",T="[ \\t]+",ce="[ \\t]*",j="(?:"+x+"|"+ee+")"+T,Me=x+T,ae="(?:"+x+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+x+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ce,xe="(?:\\.|(?:(?:"+x+"|"+ee+")"+ce+"\\.))";E.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,E.empty=new RegExp("^[ \\t]*$"),E.quad=new RegExp("^"+ce+j+Me+ae+xe+ce+"$")})(),je.exports=class HS{static parse(B){const oe=[],$={},G=B.split(E.eoln);let ee=0;for(const q of G){if(ee++,E.empty.test(q))continue;const k=q.match(E.quad);if(null===k)throw new Error("N-Quads parse error on line "+ee+".");const b={subject:null,predicate:null,object:null,graph:null};if(b.subject=void 0!==k[1]?{termType:Y,value:k[1]}:{termType:z,value:k[2]},b.predicate={termType:Y,value:k[3]},void 0!==k[4]?b.object={termType:Y,value:k[4]}:void 0!==k[5]?b.object={termType:z,value:k[5]}:(b.object={termType:X,value:void 0,datatype:{termType:Y}},void 0!==k[7]?b.object.datatype.value=k[7]:void 0!==k[8]?(b.object.datatype.value=Q,b.object.language=k[8]):b.object.datatype.value=C,b.object.value=k[6].replace(D,function(B,oe,$,G){if(oe)switch(oe){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if($)return String.fromCharCode(parseInt($,16));if(G)throw new Error("Unsupported U escape")})),b.graph=void 0!==k[9]?{termType:Y,value:k[9]}:void 0!==k[10]?{termType:z,value:k[10]}:{termType:_,value:""},b.graph.value in $){let M=!0;const T=$[b.graph.value];for(const ce of T)if(F(ce,b)){M=!1;break}M&&(T.push(b),oe.push(b))}else $[b.graph.value]=[b],oe.push(b)}return oe}static serialize(B){Array.isArray(B)||(B=HS.legacyDatasetToQuads(B));const oe=[];for(const $ of B)oe.push(HS.serializeQuad($));return oe.sort().join("")}static serializeQuadComponents(B,oe,$,G){let ee="";return ee+=B.termType===Y?`<${B.value}>`:`${B.value}`,ee+=` <${oe.value}> `,$.termType===Y?ee+=`<${$.value}>`:$.termType===z?ee+=$.value:(ee+=`"${function N(x){return x.replace(W,function(B){switch(B){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}($.value)}"`,$.datatype.value===Q?$.language&&(ee+=`@${$.language}`):$.datatype.value!==C&&(ee+=`^^<${$.datatype.value}>`)),G.termType===Y?ee+=` <${G.value}>`:G.termType===z&&(ee+=` ${G.value}`),ee+=" .\n",ee}static serializeQuad(B){return HS.serializeQuadComponents(B.subject,B.predicate,B.object,B.graph)}static legacyDatasetToQuads(B){const oe=[],$={"blank node":z,IRI:Y,literal:X};for(const G in B)B[G].forEach(q=>{const k={};for(const b in q){const M=q[b],T={termType:$[M.type],value:M.value};T.termType===X&&(T.datatype={termType:Y},"datatype"in M&&(T.datatype.value=M.datatype),"language"in M?("datatype"in M||(T.datatype.value=Q),T.language=M.language):"datatype"in M||(T.datatype.value=C)),k[b]=T}k.graph="@default"===G?{termType:_,value:""}:{termType:G.startsWith("_:")?z:Y,value:G},oe.push(k)});return oe}};const W=/["\\\n\r]/g,D=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7794:je=>{"use strict";je.exports=class{constructor(S){this.current=S.sort(),this.done=!1,this.dir=new Map;for(let Q=0;Q<S.length;++Q)this.dir.set(S[Q],!0)}hasNext(){return!this.done}next(){const{current:S,dir:Q}=this,C=S.slice();let Y=null,z=0;const X=S.length;for(let _=0;_<X;++_){const E=S[_],F=Q.get(E);(null===Y||E>Y)&&(F&&_>0&&E>S[_-1]||!F&&_<X-1&&E>S[_+1])&&(Y=E,z=_)}if(null===Y)this.done=!0;else{const _=Q.get(Y)?z-1:z+1;S[z]=S[_],S[_]=Y;for(const E of S)E>Y&&Q.set(E,!Q.get(E))}return C}}},624:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(250),Y=S(1126),z=S(7794),X=S(8276);function _(E,F){return E.hash<F.hash?-1:E.hash>F.hash?1:0}je.exports=class{constructor({createMessageDigest:F=(()=>new Y("sha256")),canonicalIdMap:W=new Map,maxDeepIterations:N=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n",W),this.createMessageDigest=F,this.maxDeepIterations=N,this.quads=null,this.deepIterations=null}main(F){var W=this;return Q(function*(){W.deepIterations=new Map,W.quads=F;for(const $ of F)W._addBlankNodeQuadInfo({quad:$,component:$.subject}),W._addBlankNodeQuadInfo({quad:$,component:$.object}),W._addBlankNodeQuadInfo({quad:$,component:$.graph});const N=new Map,D=[...W.blankNodeInfo.keys()];let se=0;for(const $ of D)++se%100==0&&(yield W._yield()),yield W._hashAndTrackBlankNode({id:$,hashToBlankNodes:N});const x=[...N.keys()].sort(),B=[];for(const $ of x){const G=N.get($);G.length>1?B.push(G):W.canonicalIssuer.getId(G[0])}for(const $ of B){const G=[];for(const ee of $){if(W.canonicalIssuer.hasId(ee))continue;const q=new C("_:b");q.getId(ee);const k=yield W.hashNDegreeQuads(ee,q);G.push(k)}G.sort(_);for(const ee of G){const q=ee.issuer.getOldIds();for(const k of q)W.canonicalIssuer.getId(k)}}const oe=[];for(const $ of W.quads){const G=X.serializeQuadComponents(W._componentWithCanonicalId($.subject),$.predicate,W._componentWithCanonicalId($.object),W._componentWithCanonicalId($.graph));oe.push(G)}return oe.sort(),oe.join("")})()}hashFirstDegreeQuads(F){var W=this;return Q(function*(){const N=[],D=W.blankNodeInfo.get(F),se=D.quads;for(const B of se){const oe={subject:null,predicate:B.predicate,object:null,graph:null};oe.subject=W.modifyFirstDegreeComponent(F,B.subject,"subject"),oe.object=W.modifyFirstDegreeComponent(F,B.object,"object"),oe.graph=W.modifyFirstDegreeComponent(F,B.graph,"graph"),N.push(X.serializeQuad(oe))}N.sort();const x=W.createMessageDigest();for(const B of N)x.update(B);return D.hash=yield x.digest(),D.hash})()}hashRelatedBlankNode(F,W,N,D){var se=this;return Q(function*(){let x;x=se.canonicalIssuer.hasId(F)?se.canonicalIssuer.getId(F):N.hasId(F)?N.getId(F):se.blankNodeInfo.get(F).hash;const B=se.createMessageDigest();return B.update(D),"g"!==D&&B.update(se.getRelatedPredicate(W)),B.update(x),B.digest()})()}hashNDegreeQuads(F,W){var N=this;return Q(function*(){const D=N.deepIterations.get(F)||0;if(D>N.maxDeepIterations)throw new Error(`Maximum deep iterations (${N.maxDeepIterations}) exceeded.`);N.deepIterations.set(F,D+1);const se=N.createMessageDigest(),x=yield N.createHashToRelated(F,W),B=[...x.keys()].sort();for(const oe of B){se.update(oe);let G,$="";const ee=new z(x.get(oe));let q=0;for(;ee.hasNext();){const k=ee.next();++q%3==0&&(yield N._yield());let b=W.clone(),M="";const T=[];let ce=!1;for(const j of k)if(N.canonicalIssuer.hasId(j)?M+=N.canonicalIssuer.getId(j):(b.hasId(j)||T.push(j),M+=b.getId(j)),0!==$.length&&M>$){ce=!0;break}if(!ce){for(const j of T){const Me=yield N.hashNDegreeQuads(j,b);if(M+=b.getId(j),M+=`<${Me.hash}>`,b=Me.issuer,0!==$.length&&M>$){ce=!0;break}}ce||(0===$.length||M<$)&&($=M,G=b)}}se.update($),W=G}return{hash:yield se.digest(),issuer:W}})()}modifyFirstDegreeComponent(F,W){return"BlankNode"!==W.termType?W:{termType:"BlankNode",value:W.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return`<${F.predicate.value}>`}createHashToRelated(F,W){var N=this;return Q(function*(){const D=new Map,se=N.blankNodeInfo.get(F).quads;let x=0;for(const B of se)++x%100==0&&(yield N._yield()),yield Promise.all([N._addRelatedBlankNodeHash({quad:B,component:B.subject,position:"s",id:F,issuer:W,hashToRelated:D}),N._addRelatedBlankNodeHash({quad:B,component:B.object,position:"o",id:F,issuer:W,hashToRelated:D}),N._addRelatedBlankNodeHash({quad:B,component:B.graph,position:"g",id:F,issuer:W,hashToRelated:D})]);return D})()}_hashAndTrackBlankNode({id:F,hashToBlankNodes:W}){var N=this;return Q(function*(){const D=yield N.hashFirstDegreeQuads(F),se=W.get(D);se?se.push(F):W.set(D,[F])})()}_addBlankNodeQuadInfo({quad:F,component:W}){if("BlankNode"!==W.termType)return;const N=W.value,D=this.blankNodeInfo.get(N);D?D.quads.add(F):this.blankNodeInfo.set(N,{quads:new Set([F]),hash:null})}_addRelatedBlankNodeHash({quad:F,component:W,position:N,id:D,issuer:se,hashToRelated:x}){var B=this;return Q(function*(){if("BlankNode"!==W.termType||W.value===D)return;const oe=W.value,$=yield B.hashRelatedBlankNode(oe,F,se,N),G=x.get($);G?G.push(oe):x.set($,[oe])})()}_componentWithCanonicalId(F){return"BlankNode"!==F.termType||F.value.startsWith(this.canonicalIssuer.prefix)?F:{termType:"BlankNode",value:this.canonicalIssuer.getId(F.value)}}_yield(){return Q(function*(){return new Promise(F=>setImmediate(F))})()}}},203:(je,me,S)=>{"use strict";const Q=S(250),C=S(1126),Y=S(7794),z=S(8276);function X(_,E){return _.hash<E.hash?-1:_.hash>E.hash?1:0}je.exports=class{constructor({createMessageDigest:E=(()=>new C("sha256")),canonicalIdMap:F=new Map,maxDeepIterations:W=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Q("_:c14n",F),this.createMessageDigest=E,this.maxDeepIterations=W,this.quads=null,this.deepIterations=null}main(E){this.deepIterations=new Map,this.quads=E;for(const x of E)this._addBlankNodeQuadInfo({quad:x,component:x.subject}),this._addBlankNodeQuadInfo({quad:x,component:x.object}),this._addBlankNodeQuadInfo({quad:x,component:x.graph});const F=new Map,W=[...this.blankNodeInfo.keys()];for(const x of W)this._hashAndTrackBlankNode({id:x,hashToBlankNodes:F});const N=[...F.keys()].sort(),D=[];for(const x of N){const B=F.get(x);B.length>1?D.push(B):this.canonicalIssuer.getId(B[0])}for(const x of D){const B=[];for(const oe of x){if(this.canonicalIssuer.hasId(oe))continue;const $=new Q("_:b");$.getId(oe);const G=this.hashNDegreeQuads(oe,$);B.push(G)}B.sort(X);for(const oe of B){const $=oe.issuer.getOldIds();for(const G of $)this.canonicalIssuer.getId(G)}}const se=[];for(const x of this.quads){const B=z.serializeQuadComponents(this._componentWithCanonicalId({component:x.subject}),x.predicate,this._componentWithCanonicalId({component:x.object}),this._componentWithCanonicalId({component:x.graph}));se.push(B)}return se.sort(),se.join("")}hashFirstDegreeQuads(E){const F=[],W=this.blankNodeInfo.get(E),N=W.quads;for(const se of N){const x={subject:null,predicate:se.predicate,object:null,graph:null};x.subject=this.modifyFirstDegreeComponent(E,se.subject,"subject"),x.object=this.modifyFirstDegreeComponent(E,se.object,"object"),x.graph=this.modifyFirstDegreeComponent(E,se.graph,"graph"),F.push(z.serializeQuad(x))}F.sort();const D=this.createMessageDigest();for(const se of F)D.update(se);return W.hash=D.digest(),W.hash}hashRelatedBlankNode(E,F,W,N){let D;D=this.canonicalIssuer.hasId(E)?this.canonicalIssuer.getId(E):W.hasId(E)?W.getId(E):this.blankNodeInfo.get(E).hash;const se=this.createMessageDigest();return se.update(N),"g"!==N&&se.update(this.getRelatedPredicate(F)),se.update(D),se.digest()}hashNDegreeQuads(E,F){const W=this.deepIterations.get(E)||0;if(W>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(E,W+1);const N=this.createMessageDigest(),D=this.createHashToRelated(E,F),se=[...D.keys()].sort();for(const x of se){N.update(x);let oe,B="";const $=new Y(D.get(x));for(;$.hasNext();){const G=$.next();let ee=F.clone(),q="";const k=[];let b=!1;for(const M of G)if(this.canonicalIssuer.hasId(M)?q+=this.canonicalIssuer.getId(M):(ee.hasId(M)||k.push(M),q+=ee.getId(M)),0!==B.length&&q>B){b=!0;break}if(!b){for(const M of k){const T=this.hashNDegreeQuads(M,ee);if(q+=ee.getId(M),q+=`<${T.hash}>`,ee=T.issuer,0!==B.length&&q>B){b=!0;break}}b||(0===B.length||q<B)&&(B=q,oe=ee)}}N.update(B),F=oe}return{hash:N.digest(),issuer:F}}modifyFirstDegreeComponent(E,F){return"BlankNode"!==F.termType?F:{termType:"BlankNode",value:F.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return`<${E.predicate.value}>`}createHashToRelated(E,F){const W=new Map,N=this.blankNodeInfo.get(E).quads;for(const D of N)this._addRelatedBlankNodeHash({quad:D,component:D.subject,position:"s",id:E,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:D,component:D.object,position:"o",id:E,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:D,component:D.graph,position:"g",id:E,issuer:F,hashToRelated:W});return W}_hashAndTrackBlankNode({id:E,hashToBlankNodes:F}){const W=this.hashFirstDegreeQuads(E),N=F.get(W);N?N.push(E):F.set(W,[E])}_addBlankNodeQuadInfo({quad:E,component:F}){if("BlankNode"!==F.termType)return;const W=F.value,N=this.blankNodeInfo.get(W);N?N.quads.add(E):this.blankNodeInfo.set(W,{quads:new Set([E]),hash:null})}_addRelatedBlankNodeHash({quad:E,component:F,position:W,id:N,issuer:D,hashToRelated:se}){if("BlankNode"!==F.termType||F.value===N)return;const x=F.value,B=this.hashRelatedBlankNode(x,E,D,W),oe=se.get(B);oe?oe.push(x):se.set(B,[x])}_componentWithCanonicalId({component:E}){return"BlankNode"!==E.termType||E.value.startsWith(this.canonicalIssuer.prefix)?E:{termType:"BlankNode",value:this.canonicalIssuer.getId(E.value)}}}},6268:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(1126),Y=S(624);je.exports=class extends Y{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new C("sha1")}modifyFirstDegreeComponent(X,_,E){return"BlankNode"!==_.termType?_:"graph"===E?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===X?"_:a":"_:z"}}getRelatedPredicate(X){return X.predicate.value}createHashToRelated(X,_){var E=this;return Q(function*(){const F=new Map,W=E.blankNodeInfo.get(X).quads;let N=0;for(const D of W){let se,x;if("BlankNode"===D.subject.termType&&D.subject.value!==X)x=D.subject.value,se="p";else{if("BlankNode"!==D.object.termType||D.object.value===X)continue;x=D.object.value,se="r"}++N%100==0&&(yield E._yield());const B=yield E.hashRelatedBlankNode(x,D,_,se),oe=F.get(B);oe?oe.push(x):F.set(B,[x])}return F})()}}},8911:(je,me,S)=>{"use strict";const Q=S(1126),C=S(203);je.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Q("sha1")}modifyFirstDegreeComponent(z,X,_){return"BlankNode"!==X.termType?X:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:X.value===z?"_:a":"_:z"}}getRelatedPredicate(z){return z.predicate.value}createHashToRelated(z,X){const _=new Map,E=this.blankNodeInfo.get(z).quads;for(const F of E){let W,N;if("BlankNode"===F.subject.termType&&F.subject.value!==z)N=F.subject.value,W="p";else{if("BlankNode"!==F.object.termType||F.object.value===z)continue;N=F.object.value,W="r"}const D=this.hashRelatedBlankNode(N,F,X,W),se=_.get(D);se?se.push(N):_.set(D,[N])}return _}}},4548:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(624),Y=S(6268),z=S(203),X=S(8911);let _;try{_=S(7789)}catch{}function E(F){return Array.isArray(F)?F:me.NQuads.legacyDatasetToQuads(F)}me.NQuads=S(8276),me.IdentifierIssuer=S(250),me._rdfCanonizeNative=function(F){return F&&(_=F),_},me.canonize=function(){var F=Q(function*(W,N){const D=E(W);if(N.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((se,x)=>_.canonize(D,N,(B,oe)=>B?x(B):se(oe)))}if("URDNA2015"===N.algorithm)return new C(N).main(D);if("URGNA2012"===N.algorithm){if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new Y(N).main(D)}throw"algorithm"in N?new Error("Invalid RDF Dataset Canonicalization algorithm: "+N.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(W,N){return F.apply(this,arguments)}}(),me._canonizeSync=function(F,W){const N=E(F);if(W.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(N,W)}if("URDNA2015"===W.algorithm)return new z(W).main(N);if("URGNA2012"===W.algorithm){if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new X(W).main(N)}throw"algorithm"in W?new Error("Invalid RDF Dataset Canonicalization algorithm: "+W.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},5376:function(je,me,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(Y,z,X,_){void 0===_&&(_=X),Object.defineProperty(Y,_,{enumerable:!0,get:function(){return z[X]}})}:function(Y,z,X,_){void 0===_&&(_=X),Y[_]=z[X]}),C=this&&this.__exportStar||function(Y,z){for(var X in Y)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,Y,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(1006),me),C(S(4122),me),C(S(2653),me),C(S(8327),me),C(S(7265),me),C(S(9797),me),C(S(8866),me)},1006:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BlankNode=void 0,me.BlankNode=class S{constructor(C){this.termType="BlankNode",this.value=C}equals(C){return!!C&&"BlankNode"===C.termType&&C.value===this.value}}},4122:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DataFactory=void 0;const Q=S(1006),C=S(2653),Y=S(8327),z=S(7265),X=S(9797),_=S(8866);let E=0;me.DataFactory=class F{constructor(N){this.blankNodeCounter=0,this.blankNodePrefix=(N=N||{}).blankNodePrefix||`df_${E++}_`}namedNode(N){return new z.NamedNode(N)}blankNode(N){return new Q.BlankNode(N||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(N,D){return new Y.Literal(N,D)}variable(N){return new _.Variable(N)}defaultGraph(){return C.DefaultGraph.INSTANCE}quad(N,D,se,x){return new X.Quad(N,D,se,x||this.defaultGraph())}fromTerm(N){switch(N.termType){case"NamedNode":return this.namedNode(N.value);case"BlankNode":return this.blankNode(N.value);case"Literal":return N.language?this.literal(N.value,N.language):N.datatype.equals(Y.Literal.XSD_STRING)?this.literal(N.value):this.literal(N.value,this.fromTerm(N.datatype));case"Variable":return this.variable(N.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(N.subject),this.fromTerm(N.predicate),this.fromTerm(N.object),this.fromTerm(N.graph))}}fromQuad(N){return this.fromTerm(N)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},2653:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DefaultGraph=void 0;class S{constructor(){this.termType="DefaultGraph",this.value=""}equals(C){return!!C&&"DefaultGraph"===C.termType}}me.DefaultGraph=S,S.INSTANCE=new S},8327:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Literal=void 0;const Q=S(7265);class C{constructor(z,X){this.termType="Literal",this.value=z,"string"==typeof X?(this.language=X,this.datatype=C.RDF_LANGUAGE_STRING):X?(this.language="",this.datatype=X):(this.language="",this.datatype=C.XSD_STRING)}equals(z){return!!z&&"Literal"===z.termType&&z.value===this.value&&z.language===this.language&&this.datatype.equals(z.datatype)}}me.Literal=C,C.RDF_LANGUAGE_STRING=new Q.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),C.XSD_STRING=new Q.NamedNode("http://www.w3.org/2001/XMLSchema#string")},7265:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.NamedNode=void 0,me.NamedNode=class S{constructor(C){this.termType="NamedNode",this.value=C}equals(C){return!!C&&"NamedNode"===C.termType&&C.value===this.value}}},9797:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Quad=void 0,me.Quad=class S{constructor(C,Y,z,X){this.termType="Quad",this.value="",this.subject=C,this.predicate=Y,this.object=z,this.graph=X}equals(C){return!!C&&("Quad"===C.termType||!C.termType)&&this.subject.equals(C.subject)&&this.predicate.equals(C.predicate)&&this.object.equals(C.object)&&this.graph.equals(C.graph)}}},8866:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Variable=void 0,me.Variable=class S{constructor(C){this.termType="Variable",this.value=C}equals(C){return!!C&&"Variable"===C.termType&&C.value===this.value}}},1994:function(je,me,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(x,B,oe,$){void 0===$&&($=oe);var G=Object.getOwnPropertyDescriptor(B,oe);(!G||("get"in G?!B.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return B[oe]}}),Object.defineProperty(x,$,G)}:function(x,B,oe,$){void 0===$&&($=oe),x[$]=B[oe]}),C=this&&this.__exportStar||function(x,B){for(var oe in x)"default"!==oe&&!Object.prototype.hasOwnProperty.call(B,oe)&&Q(B,x,oe)};Object.defineProperty(me,"__esModule",{value:!0}),me.getSupportedJavaScriptPrimitives=me.getSupportedRdfDatatypes=me.getTermRaw=me.toRdf=me.fromRdf=void 0;const Y=S(5376),z=S(8193),X=S(7006);C(S(8193),me),C(S(6997),me),C(S(7006),me);const _=new Y.DataFactory,E=new X.Translator;function F(x,B){return E.fromRdf(x,B)}E.registerHandler(new z.TypeHandlerString,z.TypeHandlerString.TYPES.map(x=>_.namedNode(x)),["string"]),E.registerHandler(new z.TypeHandlerBoolean,[z.TypeHandlerBoolean.TYPE].map(x=>_.namedNode(x)),["boolean"]),E.registerHandler(new z.TypeHandlerNumberDouble,z.TypeHandlerNumberDouble.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new z.TypeHandlerNumberInteger,z.TypeHandlerNumberInteger.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new z.TypeHandlerDate,z.TypeHandlerDate.TYPES.map(x=>_.namedNode(x)),["object"]),me.fromRdf=F,me.toRdf=function W(x,B){return B&&"namedNode"in B&&(B={dataFactory:B}),(B=B||{})&&!B.dataFactory&&(B.dataFactory=_),E.toRdf(x,B)},me.getTermRaw=function N(x,B){return"Literal"===x.termType?F(x,B):x.value},me.getSupportedRdfDatatypes=function D(){return E.getSupportedRdfDatatypes()},me.getSupportedJavaScriptPrimitives=function se(){return E.getSupportedJavaScriptPrimitives()}},6997:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0})},7006:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Translator=void 0,me.Translator=class S{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(C){throw new Error(`Invalid RDF ${C.datatype.value} value: '${C.value}'`)}registerHandler(C,Y,z){for(const X of Y)this.supportedRdfDatatypes.push(X),this.fromRdfHandlers[X.value]=C;for(const X of z){let _=this.toRdfHandlers[X];_||(this.toRdfHandlers[X]=_=[]),_.push(C)}}fromRdf(C,Y){const z=this.fromRdfHandlers[C.datatype.value];return z?z.fromRdf(C,Y):C.value}toRdf(C,Y){const z=this.toRdfHandlers[typeof C];if(z)for(const X of z){const _=X.toRdf(C,Y);if(_)return _}throw new Error(`Invalid JavaScript value: '${C}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},3133:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerBoolean=void 0;const Q=S(7006);me.TypeHandlerBoolean=(()=>{class Y{fromRdf(X,_){switch(X.value){case"true":case"1":return!0;case"false":case"0":return!1}return _&&Q.Translator.incorrectRdfDataType(X),!1}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(X?"true":"false",_||E.namedNode(Y.TYPE))}}return Y.TYPE="http://www.w3.org/2001/XMLSchema#boolean",Y})()},3177:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerDate=void 0;const Q=S(7006);me.TypeHandlerDate=(()=>{class Y{fromRdf(X,_){switch(_&&!X.value.match(Y.VALIDATORS[X.datatype.value.substr(33,X.datatype.value.length)])&&Q.Translator.incorrectRdfDataType(X),X.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(X.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const E=X.value.split("-");return new Date(0,parseInt(E[0],10)-1,parseInt(E[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(X.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(X.value+"-01");default:return new Date(X.value)}}toRdf(X,{datatype:_,dataFactory:E}){if(_=_||E.namedNode(Y.TYPES[0]),!(X instanceof Date))return null;const F=X;let W;switch(_.value){case"http://www.w3.org/2001/XMLSchema#gDay":W=String(F.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":W=F.getUTCMonth()+1+"-"+F.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":W=String(F.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":W=F.getUTCFullYear()+"-"+(F.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":W=F.toISOString().replace(/T.*$/,"");break;default:W=F.toISOString()}return E.literal(W,_)}}return Y.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],Y.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},Y})()},6861:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerNumberDouble=void 0;const Q=S(7006);me.TypeHandlerNumberDouble=(()=>{class Y{fromRdf(X,_){const E=parseFloat(X.value);return _&&isNaN(E)&&Q.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return _=_||E.namedNode(Y.TYPES[0]),isNaN(X)?E.literal("NaN",_):isFinite(X)?X%1==0?null:E.literal(X.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),_):E.literal(X>0?"INF":"-INF",_)}}return Y.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],Y})()},8796:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerNumberInteger=void 0;const Q=S(7006);me.TypeHandlerNumberInteger=(()=>{class Y{fromRdf(X,_){const E=parseInt(X.value,10);return _&&(isNaN(E)||X.value.indexOf(".")>=0)&&Q.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(String(X),_||E.namedNode(X<=Y.MAX_INT&&X>=Y.MIN_INT?Y.TYPES[0]:Y.TYPES[1]))}}return Y.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],Y.MAX_INT=2147483647,Y.MIN_INT=-2147483648,Y})()},4440:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerString=void 0,me.TypeHandlerString=(()=>{class Q{fromRdf(Y){return Y.value}toRdf(Y,{datatype:z,dataFactory:X}){return X.literal(Y,z)}}return Q.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Q})()},8193:function(je,me,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(Y,z,X,_){void 0===_&&(_=X);var E=Object.getOwnPropertyDescriptor(z,X);(!E||("get"in E?!z.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return z[X]}}),Object.defineProperty(Y,_,E)}:function(Y,z,X,_){void 0===_&&(_=X),Y[_]=z[X]}),C=this&&this.__exportStar||function(Y,z){for(var X in Y)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,Y,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(3133),me),C(S(3177),me),C(S(6861),me),C(S(8796),me),C(S(4440),me)},2756:function(je,me,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(Y,z,X,_){void 0===_&&(_=X),Object.defineProperty(Y,_,{enumerable:!0,get:function(){return z[X]}})}:function(Y,z,X,_){void 0===_&&(_=X),Y[_]=z[X]}),C=this&&this.__exportStar||function(Y,z){for(var X in Y)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,Y,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(392),me)},2725:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseError=void 0;class S extends Error{constructor(C,Y){const z=C.saxStream._parser;super(C.trackPosition?`Line ${z.line+1} column ${z.column+1}: ${Y}`:Y)}}me.ParseError=S},392:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseType=me.RdfXmlParser=void 0;const Q=S(2011),C=S(6620),Y=S(7045),z=S(2725),X=S(5376);class _ extends Y.Transform{constructor(W){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},W&&(Object.assign(this,W),this.options=W),this.dataFactory||(this.dataFactory=new X.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=C.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(W,N){const D={};let se=!1;for(const B in W.attributes)B.startsWith("xmlns")&&(5===B.length?(se=!0,D[""]=W.attributes[B]):":"===B.charAt(5)&&(se=!0,D[B.substr(6)]=W.attributes[B]));const x=N&&N.ns?N.ns:[_.DEFAULT_NS];return se?x.concat([D]):x}static expandPrefixedTerm(W,N,D){const se=W.indexOf(":");let x,B;se>=0?(x=W.substr(0,se),B=W.substr(se+1)):(x="",B=W);let oe=null,$=null;for(let G=N.length-1;G>=0;G--){const ee=N[G][x];if(ee){oe=ee;break}$||($=N[G][""])}if(!oe){if(x&&"xmlns"!==x)throw new z.ParseError(D,`The prefix '${x}' in term '${W}' was not bound.`);oe=$||""}return{prefix:x,local:B,uri:oe}}static isValidIri(W){return _.IRI_REGEX.test(W)}import(W){const N=new Y.PassThrough({readableObjectMode:!0});W.on("error",se=>D.emit("error",se)),W.on("data",se=>N.push(se)),W.on("end",()=>N.push(null));const D=N.pipe(new _(this.options));return D}_transform(W,N,D){try{this.saxStream.write(W,N)}catch(se){return D(se)}D()}newParseError(W){return new z.ParseError(this,W)}valueToUri(W,N){return this.uriToNamedNode(Q.resolve(W,N.baseIRI))}uriToNamedNode(W){if(!_.isValidIri(W))throw this.newParseError(`Invalid URI: ${W}`);return this.dataFactory.namedNode(W)}validateNcname(W){if(!_.NCNAME_MATCHER.test(W))throw this.newParseError(`Not a valid NCName: ${W}`)}attachSaxListeners(){this.saxStream.on("error",W=>this.emit("error",W)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(W){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let D=E.RESOURCE;if(N&&(N.hadChildren=!0,D=N.childrenParseType),N&&N.childrenStringTags){const x=W.name;let B="";for(const ee in W.attributes)B+=` ${ee}="${W.attributes[ee]}"`;N.childrenStringTags.push(`<${x}${B}>`);const G={childrenStringTags:N.childrenStringTags};return G.childrenStringEmitClosingTag=`</${x}>`,void this.activeTagStack.push(G)}const se={};N?(se.language=N.language,se.baseIRI=N.baseIRI):se.baseIRI=this.baseIRI,this.activeTagStack.push(se),se.ns=_.parseNamespace(W,N),D===E.RESOURCE?this.onTagResource(W,se,N,!N):this.onTagProperty(W,se,N)}onTagResource(W,N,D,se){const x=_.expandPrefixedTerm(W.name,N.ns,this);N.childrenParseType=E.PROPERTY;let B=!0;if(x.uri===_.RDF){if(!se&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(x.local)>=0)throw this.newParseError(`Illegal node element name: ${x.local}`);switch(x.local){case"RDF":N.childrenParseType=E.RESOURCE;case"Description":B=!1}}const oe=[],$=[];let G=null,ee=!1,q=!1,k=null;for(const b in W.attributes){const M=W.attributes[b],T=_.expandPrefixedTerm(b,N.ns,this);if(D&&T.uri===_.RDF)switch(T.local){case"about":if(G)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${G} where found.`);G=M;continue;case"ID":if(G)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${G} where found.`);this.validateNcname(M),G="#"+M,ee=!0;continue;case"nodeID":if(G)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${G} where found.`);this.validateNcname(M),G=M,q=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":k=M;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===_.XML){if("lang"===T.local){N.language=""===M?null:M.toLowerCase();continue}if("base"===T.local){N.baseIRI=Q.resolve(M,N.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(oe.push(this.uriToNamedNode(T.uri+T.local)),$.push(M))}if(null!==G&&(N.subject=q?this.dataFactory.blankNode(G):this.valueToUri(G,N),ee&&this.claimNodeId(N.subject)),N.subject||(N.subject=this.dataFactory.blankNode()),B){const b=this.uriToNamedNode(x.uri+x.local);this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),b,D?D.reifiedStatementId:null)}if(D){if(D.predicate)if(D.childrenCollectionSubject){const b=this.dataFactory.blankNode();this.emitTriple(D.childrenCollectionSubject,D.childrenCollectionPredicate,b,D.reifiedStatementId),this.emitTriple(b,this.dataFactory.namedNode(_.RDF+"first"),N.subject,N.reifiedStatementId),D.childrenCollectionSubject=b,D.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(D.subject,D.predicate,N.subject,D.reifiedStatementId);for(let b=0;b<D.predicateSubPredicates.length;b++)this.emitTriple(N.subject,D.predicateSubPredicates[b],D.predicateSubObjects[b],null);D.predicateSubPredicates=[],D.predicateSubObjects=[],D.predicateEmitted=!0}for(let b=0;b<oe.length;b++){const M=this.dataFactory.literal($[b],N.datatype||N.language);this.emitTriple(N.subject,oe[b],M,D.reifiedStatementId)}k&&this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(k),null)}}onTagProperty(W,N,D){const se=_.expandPrefixedTerm(W.name,N.ns,this);if(N.childrenParseType=E.RESOURCE,N.subject=D.subject,se.uri===_.RDF&&"li"===se.local?(D.listItemCounter||(D.listItemCounter=1),N.predicate=this.uriToNamedNode(se.uri+"_"+D.listItemCounter++)):N.predicate=this.uriToNamedNode(se.uri+se.local),se.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(se.local)>=0)throw this.newParseError(`Illegal property element name: ${se.local}`);N.predicateSubPredicates=[],N.predicateSubObjects=[];let x=!1,B=!1,oe=null,$=!0;const G=[],ee=[];for(const q in W.attributes){const k=W.attributes[q],b=_.expandPrefixedTerm(q,N.ns,this);if(b.uri===_.RDF)switch(b.local){case"resource":if(oe)throw this.newParseError(`Found both rdf:resource (${k}) and rdf:nodeID (${oe}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${k})`);N.hadChildren=!0,oe=k,$=!1;continue;case"datatype":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${k}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${k})`);N.datatype=this.valueToUri(k,N);continue;case"nodeID":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${k}).`);if(N.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${k}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${k})`);this.validateNcname(k),N.hadChildren=!0,oe=k,$=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(B)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(N.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${N.datatype.value})`);if(oe)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${oe})`);if("Resource"===k){x=!0,N.childrenParseType=E.PROPERTY;const M=this.dataFactory.blankNode();this.emitTriple(N.subject,N.predicate,M,N.reifiedStatementId),N.subject=M,N.predicate=null}else"Collection"===k?(x=!0,N.hadChildren=!0,N.childrenCollectionSubject=N.subject,N.childrenCollectionPredicate=N.predicate,$=!1):"Literal"===k&&(x=!0,N.childrenTagsToString=!0,N.childrenStringTags=[]);continue;case"ID":this.validateNcname(k),N.reifiedStatementId=this.valueToUri("#"+k,N),this.claimNodeId(N.reifiedStatementId);continue}else if(b.uri===_.XML&&"lang"===b.local){N.language=""===k?null:k.toLowerCase();continue}if("xml"!==b.prefix&&"xmlns"!==b.prefix&&b.uri){if(x||N.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${k}`);N.hadChildren=!0,B=!0,G.push(this.uriToNamedNode(b.uri+b.local)),ee.push(this.dataFactory.literal(k,N.datatype||N.language))}}if(null!==oe){const q=N.subject;N.subject=$?this.dataFactory.blankNode(oe):this.valueToUri(oe,N),this.emitTriple(q,N.predicate,N.subject,N.reifiedStatementId);for(let k=0;k<G.length;k++)this.emitTriple(N.subject,G[k],ee[k],null);N.predicateEmitted=!0}else $&&(N.predicateSubPredicates=G,N.predicateSubObjects=ee,N.predicateEmitted=!1)}emitTriple(W,N,D,se){this.push(this.dataFactory.quad(W,N,D,this.defaultGraph)),se&&(this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"subject"),W,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"predicate"),N,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"object"),D,this.defaultGraph)))}claimNodeId(W){if(!this.allowDuplicateRdfIds){if(this.nodeIds[W.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${W.value}'.`);this.nodeIds[W.value]=!0}}onText(W){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;N&&(N.childrenStringTags?N.childrenStringTags.push(W):N.predicate&&(N.text=W))}onCloseTag(){const W=this.activeTagStack.pop();if(W.childrenStringEmitClosingTag&&W.childrenStringTags.push(W.childrenStringEmitClosingTag),W.childrenTagsToString&&(W.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),W.text=W.childrenStringTags.join(""),W.hadChildren=!1),W.childrenCollectionSubject)this.emitTriple(W.childrenCollectionSubject,W.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),W.reifiedStatementId);else if(W.predicate)if(W.hadChildren||W.childrenParseType===E.PROPERTY){if(!W.predicateEmitted){const N=this.dataFactory.blankNode();this.emitTriple(W.subject,W.predicate,N,W.reifiedStatementId);for(let D=0;D<W.predicateSubPredicates.length;D++)this.emitTriple(N,W.predicateSubPredicates[D],W.predicateSubObjects[D],null)}}else this.emitTriple(W.subject,W.predicate,this.dataFactory.literal(W.text||"",W.datatype||W.language),W.reifiedStatementId)}onDoctype(W){W.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(N,D,se)=>(this.saxStream._parser.ENTITIES[D]=se,""))}}var E,F;me.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(F=E=me.ParseType||(me.ParseType={}))[F.RESOURCE=0]="RESOURCE",F[F.PROPERTY=1]="PROPERTY"},8992:(je,me,S)=>{"use strict";const{SymbolDispose:Q}=S(1251),{AbortError:C,codes:Y}=S(5480),{isNodeStream:z,isWebStream:X,kControllerErrorFunction:_}=S(6110),E=S(3139),{ERR_INVALID_ARG_TYPE:F}=Y;let W;je.exports.addAbortSignal=function(se,x){if(((D,se)=>{if("object"!=typeof D||!("aborted"in D))throw new F("signal","AbortSignal",D)})(se),!z(x)&&!X(x))throw new F("stream",["ReadableStream","WritableStream","Stream"],x);return je.exports.addAbortSignalNoValidate(se,x)},je.exports.addAbortSignalNoValidate=function(D,se){if("object"!=typeof D||!("aborted"in D))return se;const x=z(se)?()=>{se.destroy(new C(void 0,{cause:D.reason}))}:()=>{se[_](new C(void 0,{cause:D.reason}))};if(D.aborted)x();else{W=W||S(1663).addAbortListener;const B=W(D,x);E(se,B[Q])}return se}},9588:(je,me,S)=>{"use strict";const{StringPrototypeSlice:Q,SymbolIterator:C,TypedArrayPrototypeSet:Y,Uint8Array:z}=S(1251),{Buffer:X}=S(2317),{inspect:_}=S(1663);je.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(F){const W={data:F,next:null};this.length>0?this.tail.next=W:this.head=W,this.tail=W,++this.length}unshift(F){const W={data:F,next:this.head};0===this.length&&(this.tail=W),this.head=W,++this.length}shift(){if(0===this.length)return;const F=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,F}clear(){this.head=this.tail=null,this.length=0}join(F){if(0===this.length)return"";let W=this.head,N=""+W.data;for(;null!==(W=W.next);)N+=F+W.data;return N}concat(F){if(0===this.length)return X.alloc(0);const W=X.allocUnsafe(F>>>0);let N=this.head,D=0;for(;N;)Y(W,N.data,D),D+=N.data.length,N=N.next;return W}consume(F,W){const N=this.head.data;if(F<N.length){const D=N.slice(0,F);return this.head.data=N.slice(F),D}return F===N.length?this.shift():W?this._getString(F):this._getBuffer(F)}first(){return this.head.data}*[C](){for(let F=this.head;F;F=F.next)yield F.data}_getString(F){let W="",N=this.head,D=0;do{const se=N.data;if(!(F>se.length)){F===se.length?(W+=se,++D,this.head=N.next?N.next:this.tail=null):(W+=Q(se,0,F),this.head=N,N.data=Q(se,F));break}W+=se,F-=se.length,++D}while(null!==(N=N.next));return this.length-=D,W}_getBuffer(F){const W=X.allocUnsafe(F),N=F;let D=this.head,se=0;do{const x=D.data;if(!(F>x.length)){F===x.length?(Y(W,x,N-F),++se,this.head=D.next?D.next:this.tail=null):(Y(W,new z(x.buffer,x.byteOffset,F),N-F),this.head=D,D.data=x.slice(F));break}Y(W,x,N-F),F-=x.length,++se}while(null!==(D=D.next));return this.length-=se,W}[Symbol.for("nodejs.util.inspect.custom")](F,W){return _(this,{...W,depth:0,customInspect:!1})}}},6683:(je,me,S)=>{"use strict";var Q=S(9293).default;const{pipeline:C}=S(6249),Y=S(9613),{destroyer:z}=S(1509),{isNodeStream:X,isReadable:_,isWritable:E,isWebStream:F,isTransformStream:W,isWritableStream:N,isReadableStream:D}=S(6110),{AbortError:se,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:B}}=S(5480),oe=S(3139);je.exports=function(...G){if(0===G.length)throw new B("streams");if(1===G.length)return Y.from(G[0]);const ee=[...G];if("function"==typeof G[0]&&(G[0]=Y.from(G[0])),"function"==typeof G[G.length-1]){const Oe=G.length-1;G[Oe]=Y.from(G[Oe])}for(let Oe=0;Oe<G.length;++Oe)if(X(G[Oe])||F(G[Oe])){if(Oe<G.length-1&&!(_(G[Oe])||D(G[Oe])||W(G[Oe])))throw new x(`streams[${Oe}]`,ee[Oe],"must be readable");if(Oe>0&&!(E(G[Oe])||N(G[Oe])||W(G[Oe])))throw new x(`streams[${Oe}]`,ee[Oe],"must be writable")}let q,k,b,M,T;const j=G[0],Me=C(G,function ce(Oe){const Ve=M;M=null,Ve?Ve(Oe):Oe?T.destroy(Oe):!xe&&!ae&&T.destroy()}),ae=!!(E(j)||N(j)||W(j)),xe=!!(_(Me)||D(Me)||W(Me));if(T=new Y({writableObjectMode:!(null==j||!j.writableObjectMode),readableObjectMode:!(null==Me||!Me.readableObjectMode),writable:ae,readable:xe}),ae){if(X(j))T._write=function(Ve,Ze,Je){j.write(Ve,Ze)?Je():q=Je},T._final=function(Ve){j.end(),k=Ve},j.on("drain",function(){if(q){const Ve=q;q=null,Ve()}});else if(F(j)){const Ze=(W(j)?j.writable:j).getWriter();T._write=function(){var Je=Q(function*(Ce,ke,Ae){try{yield Ze.ready,Ze.write(Ce).catch(()=>{}),Ae()}catch(Be){Ae(Be)}});return function(Ce,ke,Ae){return Je.apply(this,arguments)}}(),T._final=function(){var Je=Q(function*(Ce){try{yield Ze.ready,Ze.close().catch(()=>{}),k=Ce}catch(ke){Ce(ke)}});return function(Ce){return Je.apply(this,arguments)}}()}const Oe=W(Me)?Me.readable:Me;oe(Oe,()=>{if(k){const Ve=k;k=null,Ve()}})}if(xe)if(X(Me))Me.on("readable",function(){if(b){const Oe=b;b=null,Oe()}}),Me.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Oe=Me.read();if(null===Oe)return void(b=T._read);if(!T.push(Oe))return}};else if(F(Me)){const Ve=(W(Me)?Me.readable:Me).getReader();T._read=Q(function*(){for(;;)try{const{value:Ze,done:Je}=yield Ve.read();if(!T.push(Ze))return;if(Je)return void T.push(null)}catch{return}})}return T._destroy=function(Oe,Ve){!Oe&&null!==M&&(Oe=new se),b=null,q=null,k=null,null===M?Ve(Oe):(M=Ve,X(Me)&&z(Me,Oe))},T}},1509:(je,me,S)=>{"use strict";const Q=S(573),{aggregateTwoErrors:C,codes:{ERR_MULTIPLE_CALLBACK:Y},AbortError:z}=S(5480),{Symbol:X}=S(1251),{kIsDestroyed:_,isDestroyed:E,isFinished:F,isServerRequest:W}=S(6110),N=X("kDestroy"),D=X("kConstruct");function se(ae,xe,Oe){ae&&(xe&&!xe.errored&&(xe.errored=ae),Oe&&!Oe.errored&&(Oe.errored=ae))}function B(ae,xe,Oe){let Ve=!1;function Ze(Je){if(Ve)return;Ve=!0;const Ce=ae._readableState,ke=ae._writableState;se(Je,ke,Ce),ke&&(ke.closed=!0),Ce&&(Ce.closed=!0),"function"==typeof Oe&&Oe(Je),Je?Q.nextTick(oe,ae,Je):Q.nextTick($,ae)}try{ae._destroy(xe||null,Ze)}catch(Je){Ze(Je)}}function oe(ae,xe){G(ae,xe),$(ae)}function $(ae){const xe=ae._readableState,Oe=ae._writableState;Oe&&(Oe.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=xe&&xe.emitClose)&&ae.emit("close")}function G(ae,xe){const Oe=ae._readableState,Ve=ae._writableState;null!=Ve&&Ve.errorEmitted||null!=Oe&&Oe.errorEmitted||(Ve&&(Ve.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),ae.emit("error",xe))}function q(ae,xe,Oe){const Ve=ae._readableState,Ze=ae._writableState;if(null!=Ze&&Ze.destroyed||null!=Ve&&Ve.destroyed)return this;null!=Ve&&Ve.autoDestroy||null!=Ze&&Ze.autoDestroy?ae.destroy(xe):xe&&(Ze&&!Ze.errored&&(Ze.errored=xe),Ve&&!Ve.errored&&(Ve.errored=xe),Oe?Q.nextTick(G,ae,xe):G(ae,xe))}function b(ae){let xe=!1;function Oe(Ve){if(xe)return void q(ae,Ve??new Y);xe=!0;const Ze=ae._readableState,Je=ae._writableState,Ce=Je||Ze;Ze&&(Ze.constructed=!0),Je&&(Je.constructed=!0),Ce.destroyed?ae.emit(N,Ve):Ve?q(ae,Ve,!0):Q.nextTick(M,ae)}try{ae._construct(Ve=>{Q.nextTick(Oe,Ve)})}catch(Ve){Q.nextTick(Oe,Ve)}}function M(ae){ae.emit(D)}function T(ae){return ae?.setHeader&&"function"==typeof ae.abort}function ce(ae){ae.emit("close")}function j(ae,xe){ae.emit("error",xe),Q.nextTick(ce,ae)}je.exports={construct:function k(ae,xe){if("function"!=typeof ae._construct)return;const Oe=ae._readableState,Ve=ae._writableState;Oe&&(Oe.constructed=!1),Ve&&(Ve.constructed=!1),ae.once(D,xe),!(ae.listenerCount(D)>1)&&Q.nextTick(b,ae)},destroyer:function Me(ae,xe){!ae||E(ae)||(!xe&&!F(ae)&&(xe=new z),W(ae)?(ae.socket=null,ae.destroy(xe)):T(ae)?ae.abort():T(ae.req)?ae.req.abort():"function"==typeof ae.destroy?ae.destroy(xe):"function"==typeof ae.close?ae.close():xe?Q.nextTick(j,ae,xe):Q.nextTick(ce,ae),ae.destroyed||(ae[_]=!0))},destroy:function x(ae,xe){const Oe=this._readableState,Ve=this._writableState,Ze=Ve||Oe;return null!=Ve&&Ve.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof xe&&xe(),this):(se(ae,Ve,Oe),Ve&&(Ve.destroyed=!0),Oe&&(Oe.destroyed=!0),Ze.constructed?B(this,ae,xe):this.once(N,function(Je){B(this,C(Je,ae),xe)}),this)},undestroy:function ee(){const ae=this._readableState,xe=this._writableState;ae&&(ae.constructed=!0,ae.closed=!1,ae.closeEmitted=!1,ae.destroyed=!1,ae.errored=null,ae.errorEmitted=!1,ae.reading=!1,ae.ended=!1===ae.readable,ae.endEmitted=!1===ae.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:q}},9613:(je,me,S)=>{"use strict";const{ObjectDefineProperties:Q,ObjectGetOwnPropertyDescriptor:C,ObjectKeys:Y,ObjectSetPrototypeOf:z}=S(1251);je.exports=E;const X=S(5779),_=S(2983);z(E.prototype,X.prototype),z(E,X);{const D=Y(_.prototype);for(let se=0;se<D.length;se++){const x=D[se];E.prototype[x]||(E.prototype[x]=_.prototype[x])}}function E(D){if(!(this instanceof E))return new E(D);X.call(this,D),_.call(this,D),D?(this.allowHalfOpen=!1!==D.allowHalfOpen,!1===D.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===D.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let F,N;function W(){return void 0===F&&(F={}),F}Q(E.prototype,{writable:{__proto__:null,...C(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...C(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...C(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...C(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...C(_.prototype,"writableLength")},writableFinished:{__proto__:null,...C(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...C(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...C(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...C(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(D){this._readableState&&this._writableState&&(this._readableState.destroyed=D,this._writableState.destroyed=D)}}}),E.fromWeb=function(D,se){return W().newStreamDuplexFromReadableWritablePair(D,se)},E.toWeb=function(D){return W().newReadableWritablePairFromDuplex(D)},E.from=function(D){return N||(N=S(4803)),N(D,"body")}},4803:(je,me,S)=>{var Q=S(9293).default,C=S(3344).default,Y=S(2958).default;const z=S(573),X=S(2317),{isReadable:_,isWritable:E,isIterable:F,isNodeStream:W,isReadableNodeStream:N,isWritableNodeStream:D,isDuplexNodeStream:se,isReadableStream:x,isWritableStream:B}=S(6110),oe=S(3139),{AbortError:$,codes:{ERR_INVALID_ARG_TYPE:G,ERR_INVALID_RETURN_VALUE:ee}}=S(5480),{destroyer:q}=S(1509),k=S(9613),b=S(5779),M=S(2983),{createDeferredPromise:T}=S(1663),ce=S(3447),j=globalThis.Blob||X.Blob,Me=typeof j<"u"?function(Ce){return Ce instanceof j}:function(Ce){return!1},ae=globalThis.AbortController||S(9465).AbortController,{FunctionPrototypeCall:xe}=S(1251);class Oe extends k{constructor(Ce){super(Ce),!1===Ce?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Ce?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Ze(Je){const Ce=Je.readable&&"function"!=typeof Je.readable.read?b.wrap(Je.readable):Je.readable,ke=Je.writable;let de,Se,nt,mt,Ye,Ae=!!_(Ce),Be=!!E(ke);function fe(R){const A=mt;mt=null,A?A(R):R&&Ye.destroy(R)}return Ye=new Oe({readableObjectMode:!(null==Ce||!Ce.readableObjectMode),writableObjectMode:!(null==ke||!ke.writableObjectMode),readable:Ae,writable:Be}),Be&&(oe(ke,R=>{Be=!1,R&&q(Ce,R),fe(R)}),Ye._write=function(R,A,ie){ke.write(R,A)?ie():de=ie},Ye._final=function(R){ke.end(),Se=R},ke.on("drain",function(){if(de){const R=de;de=null,R()}}),ke.on("finish",function(){if(Se){const R=Se;Se=null,R()}})),Ae&&(oe(Ce,R=>{Ae=!1,R&&q(Ce,R),fe(R)}),Ce.on("readable",function(){if(nt){const R=nt;nt=null,R()}}),Ce.on("end",function(){Ye.push(null)}),Ye._read=function(){for(;;){const R=Ce.read();if(null===R)return void(nt=Ye._read);if(!Ye.push(R))return}}),Ye._destroy=function(R,A){!R&&null!==mt&&(R=new $),nt=null,de=null,Se=null,null===mt?A(R):(mt=A,q(ke,R),q(Ce,R))},Ye}je.exports=function Je(Ce,ke){if(se(Ce))return Ce;if(N(Ce))return Ze({readable:Ce});if(D(Ce))return Ze({writable:Ce});if(W(Ce))return Ze({writable:!1,readable:!1});if(x(Ce))return Ze({readable:b.fromWeb(Ce)});if(B(Ce))return Ze({writable:M.fromWeb(Ce)});if("function"==typeof Ce){const{value:Be,write:de,final:Se,destroy:nt}=function Ve(Je){let{promise:Ce,resolve:ke}=T();const Ae=new ae,Be=Ae.signal;return{value:Je(Y(function*(){for(;;){const Se=Ce;Ce=null;const{chunk:nt,done:mt,cb:Ye}=yield C(Se);if(z.nextTick(Ye),mt)return;if(Be.aborted)throw new $(void 0,{cause:Be.reason});({promise:Ce,resolve:ke}=T()),yield nt}})(),{signal:Be}),write(Se,nt,mt){const Ye=ke;ke=null,Ye({chunk:Se,done:!1,cb:mt})},final(Se){const nt=ke;ke=null,nt({done:!0,cb:Se})},destroy(Se,nt){Ae.abort(),nt(Se)}}}(Ce);if(F(Be))return ce(Oe,Be,{objectMode:!0,write:de,final:Se,destroy:nt});const mt=Be?.then;if("function"==typeof mt){let Ye;const fe=xe(mt,Be,R=>{if(null!=R)throw new ee("nully","body",R)},R=>{q(Ye,R)});return Ye=new Oe({objectMode:!0,readable:!1,write:de,final(R){Se(Q(function*(){try{yield fe,z.nextTick(R,null)}catch(A){z.nextTick(R,A)}}))},destroy:nt})}throw new ee("Iterable, AsyncIterable or AsyncFunction",ke,Be)}if(Me(Ce))return Je(Ce.arrayBuffer());if(F(Ce))return ce(Oe,Ce,{objectMode:!0,writable:!1});if(x(Ce?.readable)&&B(Ce?.writable))return Oe.fromWeb(Ce);if("object"==typeof Ce?.writable||"object"==typeof Ce?.readable)return Ze({readable:null!=Ce&&Ce.readable?N(Ce?.readable)?Ce?.readable:Je(Ce.readable):void 0,writable:null!=Ce&&Ce.writable?D(Ce?.writable)?Ce?.writable:Je(Ce.writable):void 0});const Ae=Ce?.then;if("function"==typeof Ae){let Be;return xe(Ae,Ce,de=>{null!=de&&Be.push(de),Be.push(null)},de=>{q(Be,de)}),Be=new Oe({objectMode:!0,writable:!1,read(){}})}throw new G(ke,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Ce)}},3139:(je,me,S)=>{const Q=S(573),{AbortError:C,codes:Y}=S(5480),{ERR_INVALID_ARG_TYPE:z,ERR_STREAM_PREMATURE_CLOSE:X}=Y,{kEmptyObject:_,once:E}=S(1663),{validateAbortSignal:F,validateFunction:W,validateObject:N,validateBoolean:D}=S(438),{Promise:se,PromisePrototypeThen:x,SymbolDispose:B}=S(1251),{isClosed:oe,isReadable:$,isReadableNodeStream:G,isReadableStream:ee,isReadableFinished:q,isReadableErrored:k,isWritable:b,isWritableNodeStream:M,isWritableStream:T,isWritableFinished:ce,isWritableErrored:j,isNodeStream:Me,willEmitClose:ae,kIsClosedPromise:xe}=S(6110);let Oe;const Ze=()=>{};function Je(Ae,Be,de){var Se,nt;if(2===arguments.length?(de=Be,Be=_):null==Be?Be=_:N(Be,"options"),W(de,"callback"),F(Be.signal,"options.signal"),de=E(de),ee(Ae)||T(Ae))return function Ce(Ae,Be,de){let Se=!1,nt=Ze;if(Be.signal)if(nt=()=>{Se=!0,de.call(Ae,new C(void 0,{cause:Be.signal.reason}))},Be.signal.aborted)Q.nextTick(nt);else{Oe=Oe||S(1663).addAbortListener;const Ye=Oe(Be.signal,nt),fe=de;de=E((...R)=>{Ye[B](),fe.apply(Ae,R)})}const mt=(...Ye)=>{Se||Q.nextTick(()=>de.apply(Ae,Ye))};return x(Ae[xe].promise,mt,mt),Ze}(Ae,Be,de);if(!Me(Ae))throw new z("stream",["ReadableStream","WritableStream","Stream"],Ae);const mt=null!==(Se=Be.readable)&&void 0!==Se?Se:G(Ae),Ye=null!==(nt=Be.writable)&&void 0!==nt?nt:M(Ae),fe=Ae._writableState,R=Ae._readableState,A=()=>{Ae.writable||He()};let ie=ae(Ae)&&G(Ae)===mt&&M(Ae)===Ye,J=ce(Ae,!1);const He=()=>{J=!0,Ae.destroyed&&(ie=!1),(!ie||Ae.readable&&!mt)&&(!mt||Xe)&&de.call(Ae)};let Xe=q(Ae,!1);const ue=()=>{Xe=!0,Ae.destroyed&&(ie=!1),(!ie||Ae.writable&&!Ye)&&(!Ye||J)&&de.call(Ae)},te=Ee=>{de.call(Ae,Ee)};let U=oe(Ae);const I=()=>{U=!0;const Ee=j(Ae)||k(Ae);return Ee&&"boolean"!=typeof Ee?de.call(Ae,Ee):mt&&!Xe&&G(Ae,!0)&&!q(Ae,!1)?de.call(Ae,new X):!Ye||J||ce(Ae,!1)?void de.call(Ae):de.call(Ae,new X)},O=()=>{U=!0;const Ee=j(Ae)||k(Ae);if(Ee&&"boolean"!=typeof Ee)return de.call(Ae,Ee);de.call(Ae)},he=()=>{Ae.req.on("finish",He)};!function Ve(Ae){return Ae.setHeader&&"function"==typeof Ae.abort}(Ae)?Ye&&!fe&&(Ae.on("end",A),Ae.on("close",A)):(Ae.on("complete",He),ie||Ae.on("abort",I),Ae.req?he():Ae.on("request",he)),!ie&&"boolean"==typeof Ae.aborted&&Ae.on("aborted",I),Ae.on("end",ue),Ae.on("finish",He),!1!==Be.error&&Ae.on("error",te),Ae.on("close",I),U?Q.nextTick(I):null!=fe&&fe.errorEmitted||null!=R&&R.errorEmitted?ie||Q.nextTick(O):(!mt&&(!ie||$(Ae))&&(J||!1===b(Ae))||!Ye&&(!ie||b(Ae))&&(Xe||!1===$(Ae))||R&&Ae.req&&Ae.aborted)&&Q.nextTick(O);const We=()=>{de=Ze,Ae.removeListener("aborted",I),Ae.removeListener("complete",He),Ae.removeListener("abort",I),Ae.removeListener("request",he),Ae.req&&Ae.req.removeListener("finish",He),Ae.removeListener("end",A),Ae.removeListener("close",A),Ae.removeListener("finish",He),Ae.removeListener("end",ue),Ae.removeListener("error",te),Ae.removeListener("close",I)};if(Be.signal&&!U){const Ee=()=>{const Ue=de;We(),Ue.call(Ae,new C(void 0,{cause:Be.signal.reason}))};if(Be.signal.aborted)Q.nextTick(Ee);else{Oe=Oe||S(1663).addAbortListener;const Ue=Oe(Be.signal,Ee),Qe=de;de=E((...vt)=>{Ue[B](),Qe.apply(Ae,vt)})}}return We}je.exports=Je,je.exports.finished=function ke(Ae,Be){var de;let Se=!1;return null===Be&&(Be=_),null!==(de=Be)&&void 0!==de&&de.cleanup&&(D(Be.cleanup,"cleanup"),Se=Be.cleanup),new se((nt,mt)=>{const Ye=Je(Ae,Be,fe=>{Se&&Ye(),fe?mt(fe):nt()})})}},3447:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(573),{PromisePrototypeThen:Y,SymbolAsyncIterator:z,SymbolIterator:X}=S(1251),{Buffer:_}=S(2317),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:F}=S(5480).codes;je.exports=function W(N,D,se){let x,B;if("string"==typeof D||D instanceof _)return new N({objectMode:!0,...se,read(){this.push(D),this.push(null)}});if(D&&D[z])B=!0,x=D[z]();else{if(!D||!D[X])throw new E("iterable",["Iterable"],D);B=!1,x=D[X]()}const oe=new N({objectMode:!0,highWaterMark:1,...se});let $=!1;function ee(){return(ee=Q(function*(b){if(null!=b&&"function"==typeof x.throw){const{value:ce,done:j}=yield x.throw(b);if(yield ce,j)return}if("function"==typeof x.return){const{value:ce}=yield x.return();yield ce}})).apply(this,arguments)}function k(){return(k=Q(function*(){for(;;){try{const{value:b,done:M}=B?yield x.next():x.next();if(M)oe.push(null);else{const T=b&&"function"==typeof b.then?yield b:b;if(null===T)throw $=!1,new F;if(oe.push(T))continue;$=!1}}catch(b){oe.destroy(b)}break}})).apply(this,arguments)}return oe._read=function(){$||($=!0,function q(){k.apply(this,arguments)}())},oe._destroy=function(b,M){Y(function G(b){return ee.apply(this,arguments)}(b),()=>C.nextTick(M,b),T=>C.nextTick(M,T||b))},oe}},8708:(je,me,S)=>{"use strict";const{ArrayIsArray:Q,ObjectSetPrototypeOf:C}=S(1251),{EventEmitter:Y}=S(4356);function z(_){Y.call(this,_)}function X(_,E,F){if("function"==typeof _.prependListener)return _.prependListener(E,F);_._events&&_._events[E]?Q(_._events[E])?_._events[E].unshift(F):_._events[E]=[F,_._events[E]]:_.on(E,F)}C(z.prototype,Y.prototype),C(z,Y),z.prototype.pipe=function(_,E){const F=this;function W($){_.writable&&!1===_.write($)&&F.pause&&F.pause()}function N(){F.readable&&F.resume&&F.resume()}F.on("data",W),_.on("drain",N),!_._isStdio&&(!E||!1!==E.end)&&(F.on("end",se),F.on("close",x));let D=!1;function se(){D||(D=!0,_.end())}function x(){D||(D=!0,"function"==typeof _.destroy&&_.destroy())}function B($){oe(),0===Y.listenerCount(this,"error")&&this.emit("error",$)}function oe(){F.removeListener("data",W),_.removeListener("drain",N),F.removeListener("end",se),F.removeListener("close",x),F.removeListener("error",B),_.removeListener("error",B),F.removeListener("end",oe),F.removeListener("close",oe),_.removeListener("close",oe)}return X(F,"error",B),X(_,"error",B),F.on("end",oe),F.on("close",oe),_.on("close",oe),_.emit("pipe",F),_},je.exports={Stream:z,prependListener:X}},1210:(je,me,S)=>{"use strict";var Q=S(9293).default,C=S(3513).default,Y=S(2881).default,z=S(3344).default,X=S(2958).default;const _=globalThis.AbortController||S(9465).AbortController,{codes:{ERR_INVALID_ARG_VALUE:E,ERR_INVALID_ARG_TYPE:F,ERR_MISSING_ARGS:W,ERR_OUT_OF_RANGE:N},AbortError:D}=S(5480),{validateAbortSignal:se,validateInteger:x,validateObject:B}=S(438),oe=S(1251).Symbol("kWeak"),$=S(1251).Symbol("kResistStopPropagation"),{finished:G}=S(3139),ee=S(6683),{addAbortSignalNoValidate:q}=S(8992),{isWritable:k,isNodeStream:b}=S(6110),{deprecate:M}=S(1663),{ArrayPrototypePush:T,Boolean:ce,MathFloor:j,Number:Me,NumberIsNaN:ae,Promise:xe,PromiseReject:Oe,PromiseResolve:Ve,PromisePrototypeThen:Ze,Symbol:Je}=S(1251),Ce=Je("kEmpty"),ke=Je("kEof");function Be(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);null!=Ue&&B(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal");let Qe=1;null!=Ue?.concurrency&&(Qe=j(Ue.concurrency));let vt=Qe-1;return null!=Ue?.highWaterMark&&(vt=j(Ue.highWaterMark)),x(Qe,"options.concurrency",1),x(vt,"options.highWaterMark",0),vt+=Qe,function(){var Rt=X(function*(){const Lt=S(1663).AbortSignalAny([Ue?.signal].filter(ce)),pe=this,H=[],ne={signal:Lt};let Le,tt,lt=!1,xt=0;function nn(){lt=!0,Fn()}function Fn(){xt-=1,Hn()}function Hn(){tt&&!lt&&xt<Qe&&H.length<vt&&(tt(),tt=null)}function vn(){return(vn=Q(function*(){try{var lr,Ni=!1,ta=!1;try{for(var ao,Fs=Y(pe);Ni=!(ao=yield Fs.next()).done;Ni=!1){let Gi=ao.value;if(lt)return;if(Lt.aborted)throw new D;try{if(Gi=Ee(Gi,ne),Gi===Ce)continue;Gi=Ve(Gi)}catch(Lr){Gi=Oe(Lr)}xt+=1,Ze(Gi,Fn,nn),H.push(Gi),Le&&(Le(),Le=null),!lt&&(H.length>=vt||xt>=Qe)&&(yield new xe(Lr=>{tt=Lr}))}}catch(Gi){ta=!0,lr=Gi}finally{try{Ni&&null!=Fs.return&&(yield Fs.return())}finally{if(ta)throw lr}}H.push(ke)}catch(Gi){const Lr=Oe(Gi);Ze(Lr,Fn,nn),H.push(Lr)}finally{lt=!0,Le&&(Le(),Le=null)}})).apply(this,arguments)}!function An(){vn.apply(this,arguments)}();try{for(;;){for(;H.length>0;){const Ni=yield z(H[0]);if(Ni===ke)return;if(Lt.aborted)throw new D;Ni!==Ce&&(yield Ni),H.shift(),Hn()}yield z(new xe(Ni=>{Le=Ni}))}}finally{lt=!0,tt&&(tt(),tt=null)}});return function wt(){return Rt.apply(this,arguments)}}().call(this)}function Se(Ee){return nt.apply(this,arguments)}function nt(){return(nt=Q(function*(Ee,Ue=void 0){var Rt,Qe=!1,vt=!1;try{for(var wt=Y(J.call(this,Ee,Ue));Qe=!(yield wt.next()).done;Qe=!1)return!0}catch(pe){vt=!0,Rt=pe}finally{try{Qe&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Rt}}return!1})).apply(this,arguments)}function Ye(){return(Ye=Q(function*(Ee,Ue=void 0){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);return!(yield Se.call(this,Q(function*(...Qe){return!(yield Ee(...Qe))}),Ue))})).apply(this,arguments)}function R(){return(R=Q(function*(Ee,Ue){var Rt,Qe=!1,vt=!1;try{for(var Lt,wt=Y(J.call(this,Ee,Ue));Qe=!(Lt=yield wt.next()).done;Qe=!1)return Lt.value}catch(pe){vt=!0,Rt=pe}finally{try{Qe&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Rt}}})).apply(this,arguments)}function ie(){return ie=Q(function*(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);function vt(){return(vt=Q(function*(ne,Le){return yield Ee(ne,Le),Ce})).apply(this,arguments)}var Lt,Rt=!1,wt=!1;try{for(var pe=Y(Be.call(this,function Qe(ne,Le){return vt.apply(this,arguments)},Ue));Rt=!(yield pe.next()).done;Rt=!1);}catch(ne){wt=!0,Lt=ne}finally{try{Rt&&null!=pe.return&&(yield pe.return())}finally{if(wt)throw Lt}}}),ie.apply(this,arguments)}function J(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);function vt(){return(vt=Q(function*(Rt,wt){return(yield Ee(Rt,wt))?Rt:Ce})).apply(this,arguments)}return Be.call(this,function Qe(Rt,wt){return vt.apply(this,arguments)},Ue)}class He extends W{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ue(){return ue=Q(function*(Ee,Ue,Qe){var vt;if("function"!=typeof Ee)throw new F("reducer",["Function","AsyncFunction"],Ee);null!=Qe&&B(Qe,"options"),null!=Qe?.signal&&se(Qe.signal,"options.signal");let Rt=arguments.length>1;if(null!=Qe&&null!==(vt=Qe.signal)&&void 0!==vt&&vt.aborted){const nn=new D(void 0,{cause:Qe.signal.reason});throw this.once("error",()=>{}),yield G(this.destroy(nn)),nn}const wt=new _,Lt=wt.signal;null!=Qe&&Qe.signal&&Qe.signal.addEventListener("abort",()=>wt.abort(),{once:!0,[oe]:this,[$]:!0});let pe=!1;try{var Le,H=!1,ne=!1;try{for(var lt,tt=Y(this);H=!(lt=yield tt.next()).done;H=!1){const nn=lt.value;var xt;if(pe=!0,null!=Qe&&null!==(xt=Qe.signal)&&void 0!==xt&&xt.aborted)throw new D;Rt?Ue=yield Ee(Ue,nn,{signal:Lt}):(Ue=nn,Rt=!0)}}catch(nn){ne=!0,Le=nn}finally{try{H&&null!=tt.return&&(yield tt.return())}finally{if(ne)throw Le}}if(!pe&&!Rt)throw new He}finally{wt.abort()}return Ue}),ue.apply(this,arguments)}function U(){return(U=Q(function*(Ee){null!=Ee&&B(Ee,"options"),null!=Ee?.signal&&se(Ee.signal,"options.signal");const Ue=[];var Rt,Qe=!1,vt=!1;try{for(var Lt,wt=Y(this);Qe=!(Lt=yield wt.next()).done;Qe=!1){const H=Lt.value;var pe;if(null!=Ee&&null!==(pe=Ee.signal)&&void 0!==pe&&pe.aborted)throw new D(void 0,{cause:Ee.signal.reason});T(Ue,H)}}catch(H){vt=!0,Rt=H}finally{try{Qe&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Rt}}return Ue})).apply(this,arguments)}function O(Ee){if(Ee=Me(Ee),ae(Ee))return 0;if(Ee<0)throw new N("number",">= 0",Ee);return Ee}je.exports.streamReturningOperators={asIndexedPairs:M(function de(Ee=void 0){return null!=Ee&&B(Ee,"options"),null!=Ee?.signal&&se(Ee.signal,"options.signal"),function(){var Ue=X(function*(){let vt=0;var Lt,Rt=!1,wt=!1;try{for(var H,pe=Y(this);Rt=!(H=yield z(pe.next())).done;Rt=!1){const Le=H.value;var ne;if(null!=Ee&&null!==(ne=Ee.signal)&&void 0!==ne&&ne.aborted)throw new D({cause:Ee.signal.reason});yield[vt++,Le]}}catch(Le){wt=!0,Lt=Le}finally{try{Rt&&null!=pe.return&&(yield z(pe.return()))}finally{if(wt)throw Lt}}});return function Qe(){return Ue.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function he(Ee,Ue=void 0){return null!=Ue&&B(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),Ee=O(Ee),function(){var Qe=X(function*(){var Rt;if(null!=Ue&&null!==(Rt=Ue.signal)&&void 0!==Rt&&Rt.aborted)throw new D;var pe,wt=!1,Lt=!1;try{for(var ne,H=Y(this);wt=!(ne=yield z(H.next())).done;wt=!1){const tt=ne.value;var Le;if(null!=Ue&&null!==(Le=Ue.signal)&&void 0!==Le&&Le.aborted)throw new D;Ee--<=0&&(yield tt)}}catch(tt){Lt=!0,pe=tt}finally{try{wt&&null!=H.return&&(yield z(H.return()))}finally{if(Lt)throw pe}}});return function vt(){return Qe.apply(this,arguments)}}().call(this)},filter:J,flatMap:function I(Ee,Ue){const Qe=Be.call(this,Ee,Ue);return function(){var vt=X(function*(){var pe,wt=!1,Lt=!1;try{for(var ne,H=Y(Qe);wt=!(ne=yield z(H.next())).done;wt=!1){const Le=ne.value;yield*C(Y(Le),z)}}catch(Le){Lt=!0,pe=Le}finally{try{wt&&null!=H.return&&(yield z(H.return()))}finally{if(Lt)throw pe}}});return function Rt(){return vt.apply(this,arguments)}}().call(this)},map:Be,take:function We(Ee,Ue=void 0){return null!=Ue&&B(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),Ee=O(Ee),function(){var Qe=X(function*(){var Rt;if(null!=Ue&&null!==(Rt=Ue.signal)&&void 0!==Rt&&Rt.aborted)throw new D;var pe,wt=!1,Lt=!1;try{for(var ne,H=Y(this);wt=!(ne=yield z(H.next())).done;wt=!1){const tt=ne.value;var Le;if(null!=Ue&&null!==(Le=Ue.signal)&&void 0!==Le&&Le.aborted)throw new D;if(Ee-- >0&&(yield tt),Ee<=0)return}}catch(tt){Lt=!0,pe=tt}finally{try{wt&&null!=H.return&&(yield z(H.return()))}finally{if(Lt)throw pe}}});return function vt(){return Qe.apply(this,arguments)}}().call(this)},compose:function Ae(Ee,Ue){if(null!=Ue&&B(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),b(Ee)&&!k(Ee))throw new E("stream",Ee,"must be writable");const Qe=ee(this,Ee);return null!=Ue&&Ue.signal&&q(Ue.signal,Qe),Qe}},je.exports.promiseReturningOperators={every:function mt(Ee){return Ye.apply(this,arguments)},forEach:function A(Ee,Ue){return ie.apply(this,arguments)},reduce:function Xe(Ee,Ue,Qe){return ue.apply(this,arguments)},toArray:function te(Ee){return U.apply(this,arguments)},some:Se,find:function fe(Ee,Ue){return R.apply(this,arguments)}}},6569:(je,me,S)=>{"use strict";const{ObjectSetPrototypeOf:Q}=S(1251);je.exports=Y;const C=S(9059);function Y(z){if(!(this instanceof Y))return new Y(z);C.call(this,z)}Q(Y.prototype,C.prototype),Q(Y,C),Y.prototype._transform=function(z,X,_){_(null,z)}},6249:(je,me,S)=>{var Q=S(9293).default,C=S(2958).default,Y=S(3344).default,z=S(3513).default,X=S(2881).default;const _=S(573),{ArrayIsArray:E,Promise:F,SymbolAsyncIterator:W,SymbolDispose:N}=S(1251),D=S(3139),{once:se}=S(1663),x=S(1509),B=S(9613),{aggregateTwoErrors:oe,codes:{ERR_INVALID_ARG_TYPE:$,ERR_INVALID_RETURN_VALUE:G,ERR_MISSING_ARGS:ee,ERR_STREAM_DESTROYED:q,ERR_STREAM_PREMATURE_CLOSE:k},AbortError:b}=S(5480),{validateFunction:M,validateAbortSignal:T}=S(438),{isIterable:ce,isReadable:j,isReadableNodeStream:Me,isNodeStream:ae,isTransformStream:xe,isWebStream:Oe,isReadableStream:Ve,isReadableFinished:Ze}=S(6110),Je=globalThis.AbortController||S(9465).AbortController;let Ce,ke,Ae;function Be(Xe,ue,te){let U=!1;return Xe.on("close",()=>{U=!0}),{destroy:O=>{U||(U=!0,x.destroyer(Xe,O||new q("pipe")))},cleanup:D(Xe,{readable:ue,writable:te},O=>{U=!O})}}function Se(Xe){if(ce(Xe))return Xe;if(Me(Xe))return function nt(Xe){return mt.apply(this,arguments)}(Xe);throw new $("val",["Readable","Iterable","AsyncIterable"],Xe)}function mt(){return(mt=C(function*(Xe){ke||(ke=S(5779)),yield*z(X(ke.prototype[W].call(Xe)),Y)})).apply(this,arguments)}function Ye(Xe,ue,te,U){return fe.apply(this,arguments)}function fe(){return(fe=Q(function*(Xe,ue,te,{end:U}){let I,O=null;const he=Lt=>{if(Lt&&(I=Lt),O){const pe=O;O=null,pe()}},We=()=>new F((Lt,pe)=>{I?pe(I):O=()=>{I?pe(I):Lt()}});ue.on("drain",he);const Ee=D(ue,{readable:!1},he);try{ue.writableNeedDrain&&(yield We());var vt,Ue=!1,Qe=!1;try{for(var wt,Rt=X(Xe);Ue=!(wt=yield Rt.next()).done;Ue=!1)ue.write(wt.value)||(yield We())}catch(Lt){Qe=!0,vt=Lt}finally{try{Ue&&null!=Rt.return&&(yield Rt.return())}finally{if(Qe)throw vt}}U&&(ue.end(),yield We()),te()}catch(Lt){te(I!==Lt?oe(I,Lt):Lt)}finally{Ee(),ue.off("drain",he)}})).apply(this,arguments)}function R(Xe,ue,te,U){return A.apply(this,arguments)}function A(){return(A=Q(function*(Xe,ue,te,{end:U}){xe(ue)&&(ue=ue.writable);const I=ue.getWriter();try{var We,O=!1,he=!1;try{for(var Ue,Ee=X(Xe);O=!(Ue=yield Ee.next()).done;O=!1){const Qe=Ue.value;yield I.ready,I.write(Qe).catch(()=>{})}}catch(Qe){he=!0,We=Qe}finally{try{O&&null!=Ee.return&&(yield Ee.return())}finally{if(he)throw We}}yield I.ready,U&&(yield I.close()),te()}catch(Qe){try{yield I.abort(Qe),te(Qe)}catch(vt){te(vt)}}})).apply(this,arguments)}function J(Xe,ue,te){if(1===Xe.length&&E(Xe[0])&&(Xe=Xe[0]),Xe.length<2)throw new ee("streams");const U=new Je,I=U.signal,O=te?.signal,he=[];function We(){Lt(new b)}let Ee,Ue,Qe;T(O,"options.signal"),Ae=Ae||S(1663).addAbortListener,O&&(Ee=Ae(O,We));const vt=[];let pe,Rt=0;function wt(tt){Lt(tt,0==--Rt)}function Lt(tt,lt){var xt;if(tt&&(!Ue||"ERR_STREAM_PREMATURE_CLOSE"===Ue.code)&&(Ue=tt),Ue||lt){for(;vt.length;)vt.shift()(Ue);null===(xt=Ee)||void 0===xt||xt[N](),U.abort(),lt&&(Ue||he.forEach(nn=>nn()),_.nextTick(ue,Ue,Qe))}}for(let tt=0;tt<Xe.length;tt++){const lt=Xe[tt],xt=tt<Xe.length-1,nn=tt>0,Fn=xt||!1!==te?.end,Hn=tt===Xe.length-1;if(ae(lt)){let An=function(vn){vn&&"AbortError"!==vn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==vn.code&&wt(vn)};if(Fn){const{destroy:vn,cleanup:Ni}=Be(lt,xt,nn);vt.push(vn),j(lt)&&Hn&&he.push(Ni)}lt.on("error",An),j(lt)&&Hn&&he.push(()=>{lt.removeListener("error",An)})}if(0===tt)if("function"==typeof lt){if(pe=lt({signal:I}),!ce(pe))throw new G("Iterable, AsyncIterable or Stream","source",pe)}else pe=ce(lt)||Me(lt)||xe(lt)?lt:B.from(lt);else if("function"==typeof lt){var H;if(pe=xe(pe)?Se(null===(H=pe)||void 0===H?void 0:H.readable):Se(pe),pe=lt(pe,{signal:I}),xt){if(!ce(pe,!0))throw new G("AsyncIterable",`transform[${tt-1}]`,pe)}else{var ne;Ce||(Ce=S(6569));const An=new Ce({objectMode:!0}),vn=null===(ne=pe)||void 0===ne?void 0:ne.then;if("function"==typeof vn)Rt++,vn.call(pe,lr=>{Qe=lr,null!=lr&&An.write(lr),Fn&&An.end(),_.nextTick(wt)},lr=>{An.destroy(lr),_.nextTick(wt,lr)});else if(ce(pe,!0))Rt++,Ye(pe,An,wt,{end:Fn});else{if(!Ve(pe)&&!xe(pe))throw new G("AsyncIterable or Promise","destination",pe);Rt++,Ye(pe.readable||pe,An,wt,{end:Fn})}pe=An;const{destroy:Ni,cleanup:ta}=Be(pe,!1,!0);vt.push(Ni),Hn&&he.push(ta)}}else if(ae(lt)){if(Me(pe)){Rt+=2;const An=He(pe,lt,wt,{end:Fn});j(lt)&&Hn&&he.push(An)}else if(xe(pe)||Ve(pe))Rt++,Ye(pe.readable||pe,lt,wt,{end:Fn});else{if(!ce(pe))throw new $("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Rt++,Ye(pe,lt,wt,{end:Fn})}pe=lt}else if(Oe(lt)){if(Me(pe))Rt++,R(Se(pe),lt,wt,{end:Fn});else if(Ve(pe)||ce(pe))Rt++,R(pe,lt,wt,{end:Fn});else{if(!xe(pe))throw new $("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Rt++,R(pe.readable,lt,wt,{end:Fn})}pe=lt}else pe=B.from(lt)}return(null!=I&&I.aborted||null!=O&&O.aborted)&&_.nextTick(We),pe}function He(Xe,ue,te,{end:U}){let I=!1;if(ue.on("close",()=>{I||te(new k)}),Xe.pipe(ue,{end:!1}),U){let he=function(){I=!0,ue.end()};Ze(Xe)?_.nextTick(he):Xe.once("end",he)}else te();return D(Xe,{readable:!0,writable:!1},he=>{const We=Xe._readableState;he&&"ERR_STREAM_PREMATURE_CLOSE"===he.code&&We&&We.ended&&!We.errored&&!We.errorEmitted?Xe.once("end",te).once("error",te):te(he)}),D(ue,{readable:!1,writable:!0},te)}je.exports={pipelineImpl:J,pipeline:function ie(...Xe){return J(Xe,se(function de(Xe){return M(Xe[Xe.length-1],"streams[stream.length - 1]"),Xe.pop()}(Xe)))}}},5779:(je,me,S)=>{var Q=S(3344).default,C=S(2958).default;const Y=S(573),{ArrayPrototypeIndexOf:z,NumberIsInteger:X,NumberIsNaN:_,NumberParseInt:E,ObjectDefineProperties:F,ObjectKeys:W,ObjectSetPrototypeOf:N,Promise:D,SafeSet:se,SymbolAsyncDispose:x,SymbolAsyncIterator:B,Symbol:oe}=S(1251);je.exports=wt,wt.ReadableState=Rt;const{EventEmitter:$}=S(4356),{Stream:G,prependListener:ee}=S(8708),{Buffer:q}=S(2317),{addAbortSignal:k}=S(8992),b=S(3139);let M=S(1663).debuglog("stream",ze=>{M=ze});const T=S(9588),ce=S(1509),{getHighWaterMark:j,getDefaultHighWaterMark:Me}=S(2934),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:xe,ERR_METHOD_NOT_IMPLEMENTED:Oe,ERR_OUT_OF_RANGE:Ve,ERR_STREAM_PUSH_AFTER_EOF:Ze,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Je},AbortError:Ce}=S(5480),{validateObject:ke}=S(438),Ae=oe("kPaused"),{StringDecoder:Be}=S(8454),de=S(3447);N(wt.prototype,G.prototype),N(wt,G);const Se=()=>{},{errorOrDestroy:nt}=ce,mt=1,A=16,ie=32,J=64,U=2048,I=4096,Ee=65536;function vt(ze){return{enumerable:!1,get(){return!!(this.state&ze)},set(Ke){Ke?this.state|=ze:this.state&=~ze}}}function Rt(ze,Ke,zt){"boolean"!=typeof zt&&(zt=Ke instanceof S(9613)),this.state=U|I|A|ie,ze&&ze.objectMode&&(this.state|=mt),zt&&ze&&ze.readableObjectMode&&(this.state|=mt),this.highWaterMark=ze?j(this,ze,"readableHighWaterMark",zt):Me(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[Ae]=null,ze&&!1===ze.emitClose&&(this.state&=~U),ze&&!1===ze.autoDestroy&&(this.state&=~I),this.errored=null,this.defaultEncoding=ze&&ze.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ze&&ze.encoding&&(this.decoder=new Be(ze.encoding),this.encoding=ze.encoding)}function wt(ze){if(!(this instanceof wt))return new wt(ze);const Ke=this instanceof S(9613);this._readableState=new Rt(ze,this,Ke),ze&&("function"==typeof ze.read&&(this._read=ze.read),"function"==typeof ze.destroy&&(this._destroy=ze.destroy),"function"==typeof ze.construct&&(this._construct=ze.construct),ze.signal&&!Ke&&k(ze.signal,this)),G.call(this,ze),ce.construct(this,()=>{this._readableState.needReadable&&nn(this,this._readableState)})}function Lt(ze,Ke,zt,At){M("readableAddChunk",Ke);const rn=ze._readableState;let cr;if(rn.state&mt||("string"==typeof Ke?rn.encoding!==(zt=zt||rn.defaultEncoding)&&(At&&rn.encoding?Ke=q.from(Ke,zt).toString(rn.encoding):(Ke=q.from(Ke,zt),zt="")):Ke instanceof q?zt="":G._isUint8Array(Ke)?(Ke=G._uint8ArrayToBuffer(Ke),zt=""):null!=Ke&&(cr=new xe("chunk",["string","Buffer","Uint8Array"],Ke))),cr)nt(ze,cr);else if(null===Ke)rn.state&=-9,function tt(ze,Ke){if(M("onEofChunk"),!Ke.ended){if(Ke.decoder){const zt=Ke.decoder.end();zt&&zt.length&&(Ke.buffer.push(zt),Ke.length+=Ke.objectMode?1:zt.length)}Ke.ended=!0,Ke.sync?lt(ze):(Ke.needReadable=!1,Ke.emittedReadable=!0,xt(ze))}}(ze,rn);else if(rn.state&mt||Ke&&Ke.length>0)if(At)if(4&rn.state)nt(ze,new Je);else{if(rn.destroyed||rn.errored)return!1;pe(ze,rn,Ke,!0)}else if(rn.ended)nt(ze,new Ze);else{if(rn.destroyed||rn.errored)return!1;rn.state&=-9,rn.decoder&&!zt?(Ke=rn.decoder.write(Ke),rn.objectMode||0!==Ke.length?pe(ze,rn,Ke,!1):nn(ze,rn)):pe(ze,rn,Ke,!1)}else At||(rn.state&=-9,nn(ze,rn));return!rn.ended&&(rn.length<rn.highWaterMark||0===rn.length)}function pe(ze,Ke,zt,At){Ke.flowing&&0===Ke.length&&!Ke.sync&&ze.listenerCount("data")>0?(Ke.state&Ee?Ke.awaitDrainWriters.clear():Ke.awaitDrainWriters=null,Ke.dataEmitted=!0,ze.emit("data",zt)):(Ke.length+=Ke.objectMode?1:zt.length,At?Ke.buffer.unshift(zt):Ke.buffer.push(zt),Ke.state&J&&lt(ze)),nn(ze,Ke)}function Le(ze,Ke){return ze<=0||0===Ke.length&&Ke.ended?0:Ke.state&mt?1:_(ze)?Ke.flowing&&Ke.length?Ke.buffer.first().length:Ke.length:ze<=Ke.length?ze:Ke.ended?Ke.length:0}function lt(ze){const Ke=ze._readableState;M("emitReadable",Ke.needReadable,Ke.emittedReadable),Ke.needReadable=!1,Ke.emittedReadable||(M("emitReadable",Ke.flowing),Ke.emittedReadable=!0,Y.nextTick(xt,ze))}function xt(ze){const Ke=ze._readableState;M("emitReadable_",Ke.destroyed,Ke.length,Ke.ended),!Ke.destroyed&&!Ke.errored&&(Ke.length||Ke.ended)&&(ze.emit("readable"),Ke.emittedReadable=!1),Ke.needReadable=!Ke.flowing&&!Ke.ended&&Ke.length<=Ke.highWaterMark,lr(ze)}function nn(ze,Ke){!Ke.readingMore&&Ke.constructed&&(Ke.readingMore=!0,Y.nextTick(Fn,ze,Ke))}function Fn(ze,Ke){for(;!Ke.reading&&!Ke.ended&&(Ke.length<Ke.highWaterMark||Ke.flowing&&0===Ke.length);){const zt=Ke.length;if(M("maybeReadMore read 0"),ze.read(0),zt===Ke.length)break}Ke.readingMore=!1}function An(ze){const Ke=ze._readableState;Ke.readableListening=ze.listenerCount("readable")>0,Ke.resumeScheduled&&!1===Ke[Ae]?Ke.flowing=!0:ze.listenerCount("data")>0?ze.resume():Ke.readableListening||(Ke.flowing=null)}function vn(ze){M("readable nexttick read 0"),ze.read(0)}function ta(ze,Ke){M("resume",Ke.reading),Ke.reading||ze.read(0),Ke.resumeScheduled=!1,ze.emit("resume"),lr(ze),Ke.flowing&&!Ke.reading&&ze.read(0)}function lr(ze){const Ke=ze._readableState;for(M("flow",Ke.flowing);Ke.flowing&&null!==ze.read(););}function Fs(ze,Ke){"function"!=typeof ze.read&&(ze=wt.wrap(ze,{objectMode:!0}));const zt=function ao(ze,Ke){return Gi.apply(this,arguments)}(ze,Ke);return zt.stream=ze,zt}function Gi(){return(Gi=C(function*(ze,Ke){let rn,zt=Se;function At(as){this===ze?(zt(),zt=Se):zt=as}ze.on("readable",At);const cr=b(ze,{writable:!1},as=>{rn=as?ae(rn,as):null,zt(),zt=Se});try{for(;;){const as=ze.destroyed?null:ze.read();if(null!==as)yield as;else{if(rn)throw rn;if(null===rn)return;yield Q(new D(At))}}}catch(as){throw rn=ae(rn,as),rn}finally{!rn&&!1===Ke?.destroyOnReturn||void 0!==rn&&!ze._readableState.autoDestroy?(ze.off("readable",At),cr()):ce.destroyer(ze,null)}})).apply(this,arguments)}function Lr(ze,Ke){if(0===Ke.length)return null;let zt;return Ke.objectMode?zt=Ke.buffer.shift():!ze||ze>=Ke.length?(zt=Ke.decoder?Ke.buffer.join(""):1===Ke.buffer.length?Ke.buffer.first():Ke.buffer.concat(Ke.length),Ke.buffer.clear()):zt=Ke.buffer.consume(ze,Ke.decoder),zt}function lo(ze){const Ke=ze._readableState;M("endReadable",Ke.endEmitted),Ke.endEmitted||(Ke.ended=!0,Y.nextTick(rc,Ke,ze))}function rc(ze,Ke){if(M("endReadableNT",ze.endEmitted,ze.length),!ze.errored&&!ze.closeEmitted&&!ze.endEmitted&&0===ze.length)if(ze.endEmitted=!0,Ke.emit("end"),Ke.writable&&!1===Ke.allowHalfOpen)Y.nextTick(Ka,Ke);else if(ze.autoDestroy){const zt=Ke._writableState;(!zt||zt.autoDestroy&&(zt.finished||!1===zt.writable))&&Ke.destroy()}}function Ka(ze){ze.writable&&!ze.writableEnded&&!ze.destroyed&&ze.end()}let Sl;function Ja(){return void 0===Sl&&(Sl={}),Sl}F(Rt.prototype,{objectMode:vt(mt),ended:vt(2),endEmitted:vt(4),reading:vt(8),constructed:vt(A),sync:vt(ie),needReadable:vt(J),emittedReadable:vt(128),readableListening:vt(256),resumeScheduled:vt(512),errorEmitted:vt(1024),emitClose:vt(U),autoDestroy:vt(I),destroyed:vt(8192),closed:vt(16384),closeEmitted:vt(32768),multiAwaitDrain:vt(Ee),readingMore:vt(1<<17),dataEmitted:vt(1<<18)}),wt.prototype.destroy=ce.destroy,wt.prototype._undestroy=ce.undestroy,wt.prototype._destroy=function(ze,Ke){Ke(ze)},wt.prototype[$.captureRejectionSymbol]=function(ze){this.destroy(ze)},wt.prototype[x]=function(){let ze;return this.destroyed||(ze=this.readableEnded?null:new Ce,this.destroy(ze)),new D((Ke,zt)=>b(this,At=>At&&At!==ze?zt(At):Ke(null)))},wt.prototype.push=function(ze,Ke){return Lt(this,ze,Ke,!1)},wt.prototype.unshift=function(ze,Ke){return Lt(this,ze,Ke,!0)},wt.prototype.isPaused=function(){const ze=this._readableState;return!0===ze[Ae]||!1===ze.flowing},wt.prototype.setEncoding=function(ze){const Ke=new Be(ze);this._readableState.decoder=Ke,this._readableState.encoding=this._readableState.decoder.encoding;const zt=this._readableState.buffer;let At="";for(const rn of zt)At+=Ke.write(rn);return zt.clear(),""!==At&&zt.push(At),this._readableState.length=At.length,this},wt.prototype.read=function(ze){M("read",ze),void 0===ze?ze=NaN:X(ze)||(ze=E(ze,10));const Ke=this._readableState,zt=ze;if(ze>Ke.highWaterMark&&(Ke.highWaterMark=function ne(ze){if(ze>1073741824)throw new Ve("size","<= 1GiB",ze);return ze--,ze|=ze>>>1,ze|=ze>>>2,ze|=ze>>>4,ze|=ze>>>8,ze|=ze>>>16,++ze}(ze)),0!==ze&&(Ke.state&=-129),0===ze&&Ke.needReadable&&((0!==Ke.highWaterMark?Ke.length>=Ke.highWaterMark:Ke.length>0)||Ke.ended))return M("read: emitReadable",Ke.length,Ke.ended),0===Ke.length&&Ke.ended?lo(this):lt(this),null;if(0===(ze=Le(ze,Ke))&&Ke.ended)return 0===Ke.length&&lo(this),null;let rn,At=!!(Ke.state&J);if(M("need readable",At),(0===Ke.length||Ke.length-ze<Ke.highWaterMark)&&(At=!0,M("length less than watermark",At)),Ke.ended||Ke.reading||Ke.destroyed||Ke.errored||!Ke.constructed)At=!1,M("reading, ended or constructing",At);else if(At){M("do read"),Ke.state|=8|ie,0===Ke.length&&(Ke.state|=J);try{this._read(Ke.highWaterMark)}catch(cr){nt(this,cr)}Ke.state&=~ie,Ke.reading||(ze=Le(zt,Ke))}return rn=ze>0?Lr(ze,Ke):null,null===rn?(Ke.needReadable=Ke.length<=Ke.highWaterMark,ze=0):(Ke.length-=ze,Ke.multiAwaitDrain?Ke.awaitDrainWriters.clear():Ke.awaitDrainWriters=null),0===Ke.length&&(Ke.ended||(Ke.needReadable=!0),zt!==ze&&Ke.ended&&lo(this)),null!==rn&&!Ke.errorEmitted&&!Ke.closeEmitted&&(Ke.dataEmitted=!0,this.emit("data",rn)),rn},wt.prototype._read=function(ze){throw new Oe("_read()")},wt.prototype.pipe=function(ze,Ke){const zt=this,At=this._readableState;1===At.pipes.length&&(At.multiAwaitDrain||(At.multiAwaitDrain=!0,At.awaitDrainWriters=new se(At.awaitDrainWriters?[At.awaitDrainWriters]:[]))),At.pipes.push(ze),M("pipe count=%d opts=%j",At.pipes.length,Ke);const cr=Ke&&!1===Ke.end||ze===Y.stdout||ze===Y.stderr?$s:Za;function Za(){M("onend"),ze.end()}At.endEmitted?Y.nextTick(cr):zt.once("end",cr),ze.on("unpipe",function as(ls,St){M("onunpipe"),ls===zt&&St&&!1===St.hasUnpiped&&(St.hasUnpiped=!0,function Ji(){M("cleanup"),ze.removeListener("close",Bs),ze.removeListener("finish",Xt),Jt&&ze.removeListener("drain",Jt),ze.removeListener("error",Zn),ze.removeListener("unpipe",as),zt.removeListener("end",Za),zt.removeListener("end",$s),zt.removeListener("data",dn),Ca=!0,Jt&&At.awaitDrainWriters&&(!ze._writableState||ze._writableState.needDrain)&&Jt()}())});let Jt,Ca=!1;function Ta(){Ca||(1===At.pipes.length&&At.pipes[0]===ze?(M("false write response, pause",0),At.awaitDrainWriters=ze,At.multiAwaitDrain=!1):At.pipes.length>1&&At.pipes.includes(ze)&&(M("false write response, pause",At.awaitDrainWriters.size),At.awaitDrainWriters.add(ze)),zt.pause()),Jt||(Jt=function Hn(ze,Ke){return function(){const At=ze._readableState;At.awaitDrainWriters===Ke?(M("pipeOnDrain",1),At.awaitDrainWriters=null):At.multiAwaitDrain&&(M("pipeOnDrain",At.awaitDrainWriters.size),At.awaitDrainWriters.delete(Ke)),(!At.awaitDrainWriters||0===At.awaitDrainWriters.size)&&ze.listenerCount("data")&&ze.resume()}}(zt,ze),ze.on("drain",Jt))}function dn(ls){M("ondata");const St=ze.write(ls);M("dest.write",St),!1===St&&Ta()}function Zn(ls){if(M("onerror",ls),$s(),ze.removeListener("error",Zn),0===ze.listenerCount("error")){const St=ze._writableState||ze._readableState;St&&!St.errorEmitted?nt(ze,ls):ze.emit("error",ls)}}function Bs(){ze.removeListener("finish",Xt),$s()}function Xt(){M("onfinish"),ze.removeListener("close",Bs),$s()}function $s(){M("unpipe"),zt.unpipe(ze)}return zt.on("data",dn),ee(ze,"error",Zn),ze.once("close",Bs),ze.once("finish",Xt),ze.emit("pipe",zt),!0===ze.writableNeedDrain?Ta():At.flowing||(M("pipe resume"),zt.resume()),ze},wt.prototype.unpipe=function(ze){const Ke=this._readableState;if(0===Ke.pipes.length)return this;if(!ze){const rn=Ke.pipes;Ke.pipes=[],this.pause();for(let cr=0;cr<rn.length;cr++)rn[cr].emit("unpipe",this,{hasUnpiped:!1});return this}const At=z(Ke.pipes,ze);return-1===At||(Ke.pipes.splice(At,1),0===Ke.pipes.length&&this.pause(),ze.emit("unpipe",this,{hasUnpiped:!1})),this},wt.prototype.addListener=wt.prototype.on=function(ze,Ke){const zt=G.prototype.on.call(this,ze,Ke),At=this._readableState;return"data"===ze?(At.readableListening=this.listenerCount("readable")>0,!1!==At.flowing&&this.resume()):"readable"===ze&&!At.endEmitted&&!At.readableListening&&(At.readableListening=At.needReadable=!0,At.flowing=!1,At.emittedReadable=!1,M("on readable",At.length,At.reading),At.length?lt(this):At.reading||Y.nextTick(vn,this)),zt},wt.prototype.off=wt.prototype.removeListener=function(ze,Ke){const zt=G.prototype.removeListener.call(this,ze,Ke);return"readable"===ze&&Y.nextTick(An,this),zt},wt.prototype.removeAllListeners=function(ze){const Ke=G.prototype.removeAllListeners.apply(this,arguments);return("readable"===ze||void 0===ze)&&Y.nextTick(An,this),Ke},wt.prototype.resume=function(){const ze=this._readableState;return ze.flowing||(M("resume"),ze.flowing=!ze.readableListening,function Ni(ze,Ke){Ke.resumeScheduled||(Ke.resumeScheduled=!0,Y.nextTick(ta,ze,Ke))}(this,ze)),ze[Ae]=!1,this},wt.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ae]=!0,this},wt.prototype.wrap=function(ze){let Ke=!1;ze.on("data",At=>{!this.push(At)&&ze.pause&&(Ke=!0,ze.pause())}),ze.on("end",()=>{this.push(null)}),ze.on("error",At=>{nt(this,At)}),ze.on("close",()=>{this.destroy()}),ze.on("destroy",()=>{this.destroy()}),this._read=()=>{Ke&&ze.resume&&(Ke=!1,ze.resume())};const zt=W(ze);for(let At=1;At<zt.length;At++){const rn=zt[At];void 0===this[rn]&&"function"==typeof ze[rn]&&(this[rn]=ze[rn].bind(ze))}return this},wt.prototype[B]=function(){return Fs(this)},wt.prototype.iterator=function(ze){return void 0!==ze&&ke(ze,"options"),Fs(this,ze)},F(wt.prototype,{readable:{__proto__:null,get(){const ze=this._readableState;return!(!ze||!1===ze.readable||ze.destroyed||ze.errorEmitted||ze.endEmitted)},set(ze){this._readableState&&(this._readableState.readable=!!ze)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ze){this._readableState&&(this._readableState.flowing=ze)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(ze){this._readableState&&(this._readableState.destroyed=ze)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),F(Rt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ae]},set(ze){this[Ae]=!!ze}}}),wt._fromList=Lr,wt.from=function(ze,Ke){return de(wt,ze,Ke)},wt.fromWeb=function(ze,Ke){return Ja().newStreamReadableFromReadableStream(ze,Ke)},wt.toWeb=function(ze,Ke){return Ja().newReadableStreamFromStreamReadable(ze,Ke)},wt.wrap=function(ze,Ke){var zt,At;return new wt({objectMode:null===(zt=null!==(At=ze.readableObjectMode)&&void 0!==At?At:ze.objectMode)||void 0===zt||zt,...Ke,destroy(rn,cr){ce.destroyer(ze,rn),cr(rn)}}).wrap(ze)}},2934:(je,me,S)=>{"use strict";const{MathFloor:Q,NumberIsInteger:C}=S(1251),{validateInteger:Y}=S(438),{ERR_INVALID_ARG_VALUE:z}=S(5480).codes;let X=16384,_=16;function F(D){return D?_:X}je.exports={getHighWaterMark:function N(D,se,x,B){const oe=function E(D,se,x){return null!=D.highWaterMark?D.highWaterMark:se?D[x]:null}(se,B,x);if(null!=oe){if(!C(oe)||oe<0)throw new z(B?`options.${x}`:"options.highWaterMark",oe);return Q(oe)}return F(D.objectMode)},getDefaultHighWaterMark:F,setDefaultHighWaterMark:function W(D,se){Y(se,"value",0),D?_=se:X=se}}},9059:(je,me,S)=>{"use strict";const{ObjectSetPrototypeOf:Q,Symbol:C}=S(1251);je.exports=E;const{ERR_METHOD_NOT_IMPLEMENTED:Y}=S(5480).codes,z=S(9613),{getHighWaterMark:X}=S(2934);Q(E.prototype,z.prototype),Q(E,z);const _=C("kCallback");function E(N){if(!(this instanceof E))return new E(N);const D=N?X(this,N,"readableHighWaterMark",!0):null;0===D&&(N={...N,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:N.writableHighWaterMark||0}),z.call(this,N),this._readableState.sync=!1,this[_]=null,N&&("function"==typeof N.transform&&(this._transform=N.transform),"function"==typeof N.flush&&(this._flush=N.flush)),this.on("prefinish",W)}function F(N){"function"!=typeof this._flush||this.destroyed?(this.push(null),N&&N()):this._flush((D,se)=>{D?N?N(D):this.destroy(D):(null!=se&&this.push(se),this.push(null),N&&N())})}function W(){this._final!==F&&F.call(this)}E.prototype._final=F,E.prototype._transform=function(N,D,se){throw new Y("_transform()")},E.prototype._write=function(N,D,se){const x=this._readableState,B=this._writableState,oe=x.length;this._transform(N,D,($,G)=>{$?se($):(null!=G&&this.push(G),B.ended||oe===x.length||x.length<x.highWaterMark?se():this[_]=se)})},E.prototype._read=function(){if(this[_]){const N=this[_];this[_]=null,N()}}},6110:(je,me,S)=>{"use strict";const{SymbolAsyncIterator:Q,SymbolIterator:C,SymbolFor:Y}=S(1251),z=Y("nodejs.stream.destroyed"),X=Y("nodejs.stream.errored"),_=Y("nodejs.stream.readable"),E=Y("nodejs.stream.writable"),F=Y("nodejs.stream.disturbed"),W=Y("nodejs.webstream.isClosedPromise"),N=Y("nodejs.webstream.controllerErrorFunction");function D(de,Se=!1){var nt;return!(!de||"function"!=typeof de.pipe||"function"!=typeof de.on||Se&&("function"!=typeof de.pause||"function"!=typeof de.resume)||de._writableState&&!1===(null===(nt=de._readableState)||void 0===nt?void 0:nt.readable)||de._writableState&&!de._readableState)}function se(de){var Se;return!(!de||"function"!=typeof de.write||"function"!=typeof de.on||de._readableState&&!1===(null===(Se=de._writableState)||void 0===Se?void 0:Se.writable))}function B(de){return de&&(de._readableState||de._writableState||"function"==typeof de.write&&"function"==typeof de.on||"function"==typeof de.pipe&&"function"==typeof de.on)}function oe(de){return!(!de||B(de)||"function"!=typeof de.pipeThrough||"function"!=typeof de.getReader||"function"!=typeof de.cancel)}function $(de){return!(!de||B(de)||"function"!=typeof de.getWriter||"function"!=typeof de.abort)}function G(de){return!(!de||B(de)||"object"!=typeof de.readable||"object"!=typeof de.writable)}function k(de){if(!B(de))return null;const mt=de._writableState||de._readableState;return!!(de.destroyed||de[z]||null!=mt&&mt.destroyed)}function b(de){if(!se(de))return null;if(!0===de.writableEnded)return!0;const Se=de._writableState;return(null==Se||!Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)}function ce(de,Se){if(!D(de))return null;const nt=de._readableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.endEmitted?null:!!(nt.endEmitted||!1===Se&&!0===nt.ended&&0===nt.length))}function j(de){return de&&null!=de[_]?de[_]:"boolean"!=typeof de?.readable?null:!k(de)&&D(de)&&de.readable&&!ce(de)}function Me(de){return de&&null!=de[E]?de[E]:"boolean"!=typeof de?.writable?null:!k(de)&&se(de)&&de.writable&&!b(de)}function Ze(de){return"boolean"==typeof de._closed&&"boolean"==typeof de._defaultKeepAlive&&"boolean"==typeof de._removedConnection&&"boolean"==typeof de._removedContLen}function Je(de){return"boolean"==typeof de._sent100&&Ze(de)}je.exports={isDestroyed:k,kIsDestroyed:z,isDisturbed:function Ae(de){var Se;return!(!de||!(null!==(Se=de[F])&&void 0!==Se?Se:de.readableDidRead||de.readableAborted))},kIsDisturbed:F,isErrored:function Be(de){var Se,nt,mt,Ye,fe,R,A,ie,J,He;return!(!de||!(null!==(Se=null!==(nt=null!==(mt=null!==(Ye=null!==(fe=null!==(R=de[X])&&void 0!==R?R:de.readableErrored)&&void 0!==fe?fe:de.writableErrored)&&void 0!==Ye?Ye:null===(A=de._readableState)||void 0===A?void 0:A.errorEmitted)&&void 0!==mt?mt:null===(ie=de._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==nt?nt:null===(J=de._readableState)||void 0===J?void 0:J.errored)&&void 0!==Se?Se:null!==(He=de._writableState)&&void 0!==He&&He.errored))},kIsErrored:X,isReadable:j,kIsReadable:_,kIsClosedPromise:W,kControllerErrorFunction:N,kIsWritable:E,isClosed:function Ve(de){if(!B(de))return null;if("boolean"==typeof de.closed)return de.closed;const Se=de._writableState,nt=de._readableState;return"boolean"==typeof Se?.closed||"boolean"==typeof nt?.closed?Se?.closed||nt?.closed:"boolean"==typeof de._closed&&Ze(de)?de._closed:null},isDuplexNodeStream:function x(de){return!(!de||"function"!=typeof de.pipe||!de._readableState||"function"!=typeof de.on||"function"!=typeof de.write)},isFinished:function ae(de,Se){return B(de)?!!k(de)||!(!1!==Se?.readable&&j(de)||!1!==Se?.writable&&Me(de)):null},isIterable:function q(de,Se){return null!=de&&(!0===Se?"function"==typeof de[Q]:!1===Se?"function"==typeof de[C]:"function"==typeof de[Q]||"function"==typeof de[C])},isReadableNodeStream:D,isReadableStream:oe,isReadableEnded:function T(de){if(!D(de))return null;if(!0===de.readableEnded)return!0;const Se=de._readableState;return!(!Se||Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)},isReadableFinished:ce,isReadableErrored:function Oe(de){var Se,nt;return B(de)?de.readableErrored?de.readableErrored:null!==(Se=null===(nt=de._readableState)||void 0===nt?void 0:nt.errored)&&void 0!==Se?Se:null:null},isNodeStream:B,isWebStream:function ee(de){return oe(de)||$(de)||G(de)},isWritable:Me,isWritableNodeStream:se,isWritableStream:$,isWritableEnded:b,isWritableFinished:function M(de,Se){if(!se(de))return null;if(!0===de.writableFinished)return!0;const nt=de._writableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.finished?null:!!(nt.finished||!1===Se&&!0===nt.ended&&0===nt.length))},isWritableErrored:function xe(de){var Se,nt;return B(de)?de.writableErrored?de.writableErrored:null!==(Se=null===(nt=de._writableState)||void 0===nt?void 0:nt.errored)&&void 0!==Se?Se:null:null},isServerRequest:function Ce(de){var Se;return"boolean"==typeof de._consuming&&"boolean"==typeof de._dumped&&void 0===(null===(Se=de.req)||void 0===Se?void 0:Se.upgradeOrConnect)},isServerResponse:Je,willEmitClose:function ke(de){if(!B(de))return null;const mt=de._writableState||de._readableState;return!mt&&Je(de)||!!(mt&&mt.autoDestroy&&mt.emitClose&&!1===mt.closed)},isTransformStream:G}},2983:(je,me,S)=>{const Q=S(573),{ArrayPrototypeSlice:C,Error:Y,FunctionPrototypeSymbolHasInstance:z,ObjectDefineProperty:X,ObjectDefineProperties:_,ObjectSetPrototypeOf:E,StringPrototypeToLowerCase:F,Symbol:W,SymbolHasInstance:N}=S(1251);je.exports=Je,Je.WritableState=Ve;const{EventEmitter:D}=S(4356),se=S(8708).Stream,{Buffer:x}=S(2317),B=S(1509),{addAbortSignal:oe}=S(8992),{getHighWaterMark:$,getDefaultHighWaterMark:G}=S(2934),{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_MULTIPLE_CALLBACK:k,ERR_STREAM_CANNOT_PIPE:b,ERR_STREAM_DESTROYED:M,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:ce,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:Me}=S(5480).codes,{errorOrDestroy:ae}=B;function xe(){}E(Je.prototype,se.prototype),E(Je,se);const Oe=W("kOnFinished");function Ve(te,U,I){"boolean"!=typeof I&&(I=U instanceof S(9613)),this.objectMode=!(!te||!te.objectMode),I&&(this.objectMode=this.objectMode||!(!te||!te.writableObjectMode)),this.highWaterMark=te?$(this,te,"writableHighWaterMark",I):G(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(te&&!1===te.decodeStrings),this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=de.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ze(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!te||!1!==te.emitClose,this.autoDestroy=!te||!1!==te.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Ze(te){te.buffered=[],te.bufferedIndex=0,te.allBuffers=!0,te.allNoop=!0}function Je(te){const U=this instanceof S(9613);if(!U&&!z(Je,this))return new Je(te);this._writableState=new Ve(te,this,U),te&&("function"==typeof te.write&&(this._write=te.write),"function"==typeof te.writev&&(this._writev=te.writev),"function"==typeof te.destroy&&(this._destroy=te.destroy),"function"==typeof te.final&&(this._final=te.final),"function"==typeof te.construct&&(this._construct=te.construct),te.signal&&oe(te.signal,this)),se.call(this,te),B.construct(this,()=>{const I=this._writableState;I.writing||Ye(this,I),ie(this,I)})}function Ce(te,U,I,O){const he=te._writableState;if("function"==typeof I)O=I,I=he.defaultEncoding;else{if(I){if("buffer"!==I&&!x.isEncoding(I))throw new Me(I)}else I=he.defaultEncoding;"function"!=typeof O&&(O=xe)}if(null===U)throw new ce;if(!he.objectMode)if("string"==typeof U)!1!==he.decodeStrings&&(U=x.from(U,I),I="buffer");else if(U instanceof x)I="buffer";else{if(!se._isUint8Array(U))throw new ee("chunk",["string","Buffer","Uint8Array"],U);U=se._uint8ArrayToBuffer(U),I="buffer"}let We;return he.ending?We=new j:he.destroyed&&(We=new M("write")),We?(Q.nextTick(O,We),ae(te,We,!0),We):(he.pendingcb++,function ke(te,U,I,O,he){const We=U.objectMode?1:I.length;U.length+=We;const Ee=U.length<U.highWaterMark;return Ee||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:I,encoding:O,callback:he}),U.allBuffers&&"buffer"!==O&&(U.allBuffers=!1),U.allNoop&&he!==xe&&(U.allNoop=!1)):(U.writelen=We,U.writecb=he,U.writing=!0,U.sync=!0,te._write(I,O,U.onwrite),U.sync=!1),Ee&&!U.errored&&!U.destroyed}(te,he,U,I,O))}function Ae(te,U,I,O,he,We,Ee){U.writelen=O,U.writecb=Ee,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new M("write")):I?te._writev(he,U.onwrite):te._write(he,We,U.onwrite),U.sync=!1}function Be(te,U,I,O){--U.pendingcb,O(I),mt(U),ae(te,I)}function de(te,U){const I=te._writableState,O=I.sync,he=I.writecb;"function"==typeof he?(I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0,U?(I.errored||(I.errored=U),te._readableState&&!te._readableState.errored&&(te._readableState.errored=U),O?Q.nextTick(Be,te,I,U,he):Be(te,I,U,he)):(I.buffered.length>I.bufferedIndex&&Ye(te,I),O?null!==I.afterWriteTickInfo&&I.afterWriteTickInfo.cb===he?I.afterWriteTickInfo.count++:(I.afterWriteTickInfo={count:1,cb:he,stream:te,state:I},Q.nextTick(Se,I.afterWriteTickInfo)):nt(te,I,1,he))):ae(te,new k)}function Se({stream:te,state:U,count:I,cb:O}){return U.afterWriteTickInfo=null,nt(te,U,I,O)}function nt(te,U,I,O){for(!U.ending&&!te.destroyed&&0===U.length&&U.needDrain&&(U.needDrain=!1,te.emit("drain"));I-- >0;)U.pendingcb--,O();U.destroyed&&mt(U),ie(te,U)}function mt(te){if(te.writing)return;for(let he=te.bufferedIndex;he<te.buffered.length;++he){var U;const{chunk:We,callback:Ee}=te.buffered[he];te.length-=te.objectMode?1:We.length,Ee(null!==(U=te.errored)&&void 0!==U?U:new M("write"))}const I=te[Oe].splice(0);for(let he=0;he<I.length;he++){var O;I[he](null!==(O=te.errored)&&void 0!==O?O:new M("end"))}Ze(te)}function Ye(te,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;const{buffered:I,bufferedIndex:O,objectMode:he}=U,We=I.length-O;if(!We)return;let Ee=O;if(U.bufferProcessing=!0,We>1&&te._writev){U.pendingcb-=We-1;const Ue=U.allNoop?xe:vt=>{for(let Rt=Ee;Rt<I.length;++Rt)I[Rt].callback(vt)},Qe=U.allNoop&&0===Ee?I:C(I,Ee);Qe.allBuffers=U.allBuffers,Ae(te,U,!0,U.length,Qe,"",Ue),Ze(U)}else{do{const{chunk:Ue,encoding:Qe,callback:vt}=I[Ee];I[Ee++]=null,Ae(te,U,!1,he?1:Ue.length,Ue,Qe,vt)}while(Ee<I.length&&!U.writing);Ee===I.length?Ze(U):Ee>256?(I.splice(0,Ee),U.bufferedIndex=0):U.bufferedIndex=Ee}U.bufferProcessing=!1}function fe(te){return te.ending&&!te.destroyed&&te.constructed&&0===te.length&&!te.errored&&0===te.buffered.length&&!te.finished&&!te.writing&&!te.errorEmitted&&!te.closeEmitted}function ie(te,U,I){fe(U)&&(function A(te,U){!U.prefinished&&!U.finalCalled&&("function"!=typeof te._final||U.destroyed?(U.prefinished=!0,te.emit("prefinish")):(U.finalCalled=!0,function R(te,U){let I=!1;function O(he){if(I)ae(te,he??k());else if(I=!0,U.pendingcb--,he){const We=U[Oe].splice(0);for(let Ee=0;Ee<We.length;Ee++)We[Ee](he);ae(te,he,U.sync)}else fe(U)&&(U.prefinished=!0,te.emit("prefinish"),U.pendingcb++,Q.nextTick(J,te,U))}U.sync=!0,U.pendingcb++;try{te._final(O)}catch(he){O(he)}U.sync=!1}(te,U)))}(te,U),0===U.pendingcb&&(I?(U.pendingcb++,Q.nextTick((O,he)=>{fe(he)?J(O,he):he.pendingcb--},te,U)):fe(U)&&(U.pendingcb++,J(te,U))))}function J(te,U){U.pendingcb--,U.finished=!0;const I=U[Oe].splice(0);for(let O=0;O<I.length;O++)I[O]();if(te.emit("finish"),U.autoDestroy){const O=te._readableState;(!O||O.autoDestroy&&(O.endEmitted||!1===O.readable))&&te.destroy()}}Ve.prototype.getBuffer=function(){return C(this.buffered,this.bufferedIndex)},X(Ve.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),X(Je,N,{__proto__:null,value:function(te){return!!z(this,te)||this===Je&&te&&te._writableState instanceof Ve}}),Je.prototype.pipe=function(){ae(this,new b)},Je.prototype.write=function(te,U,I){return!0===Ce(this,te,U,I)},Je.prototype.cork=function(){this._writableState.corked++},Je.prototype.uncork=function(){const te=this._writableState;te.corked&&(te.corked--,te.writing||Ye(this,te))},Je.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=F(U)),!x.isEncoding(U))throw new Me(U);return this._writableState.defaultEncoding=U,this},Je.prototype._write=function(te,U,I){if(!this._writev)throw new q("_write()");this._writev([{chunk:te,encoding:U}],I)},Je.prototype._writev=null,Je.prototype.end=function(te,U,I){const O=this._writableState;let he;if("function"==typeof te?(I=te,te=null,U=null):"function"==typeof U&&(I=U,U=null),null!=te){const We=Ce(this,te,U);We instanceof Y&&(he=We)}return O.corked&&(O.corked=1,this.uncork()),he||(O.errored||O.ending?O.finished?he=new T("end"):O.destroyed&&(he=new M("end")):(O.ending=!0,ie(this,O,!0),O.ended=!0)),"function"==typeof I&&(he||O.finished?Q.nextTick(I,he):O[Oe].push(I)),this},_(Je.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(te){this._writableState&&(this._writableState.destroyed=te)}},writable:{__proto__:null,get(){const te=this._writableState;return!(!te||!1===te.writable||te.destroyed||te.errored||te.ending||te.ended)},set(te){this._writableState&&(this._writableState.writable=!!te)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const te=this._writableState;return!!te&&!te.destroyed&&!te.ending&&te.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const He=B.destroy;let Xe;function ue(){return void 0===Xe&&(Xe={}),Xe}Je.prototype.destroy=function(te,U){const I=this._writableState;return!I.destroyed&&(I.bufferedIndex<I.buffered.length||I[Oe].length)&&Q.nextTick(mt,I),He.call(this,te,U),this},Je.prototype._undestroy=B.undestroy,Je.prototype._destroy=function(te,U){U(te)},Je.prototype[D.captureRejectionSymbol]=function(te){this.destroy(te)},Je.fromWeb=function(te,U){return ue().newStreamWritableFromWritableStream(te,U)},Je.toWeb=function(te){return ue().newWritableStreamFromStreamWritable(te)}},438:(je,me,S)=>{"use strict";const{ArrayIsArray:Q,ArrayPrototypeIncludes:C,ArrayPrototypeJoin:Y,ArrayPrototypeMap:z,NumberIsInteger:X,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:E,NumberMIN_SAFE_INTEGER:F,NumberParseInt:W,ObjectPrototypeHasOwnProperty:N,RegExpPrototypeExec:D,String:se,StringPrototypeToUpperCase:x,StringPrototypeTrim:B}=S(1251),{hideStackFrames:oe,codes:{ERR_SOCKET_BAD_PORT:$,ERR_INVALID_ARG_TYPE:G,ERR_INVALID_ARG_VALUE:ee,ERR_OUT_OF_RANGE:q,ERR_UNKNOWN_SIGNAL:k}}=S(5480),{normalizeEncoding:b}=S(1663),{isAsyncFunction:M,isArrayBufferView:T}=S(1663).types,ce={},ae=/^[0-7]+$/,Ve=oe((Ee,Ue,Qe=F,vt=E)=>{if("number"!=typeof Ee)throw new G(Ue,"number",Ee);if(!X(Ee))throw new q(Ue,"an integer",Ee);if(Ee<Qe||Ee>vt)throw new q(Ue,`>= ${Qe} && <= ${vt}`,Ee)}),Ze=oe((Ee,Ue,Qe=-2147483648,vt=2147483647)=>{if("number"!=typeof Ee)throw new G(Ue,"number",Ee);if(!X(Ee))throw new q(Ue,"an integer",Ee);if(Ee<Qe||Ee>vt)throw new q(Ue,`>= ${Qe} && <= ${vt}`,Ee)}),Je=oe((Ee,Ue,Qe=!1)=>{if("number"!=typeof Ee)throw new G(Ue,"number",Ee);if(!X(Ee))throw new q(Ue,"an integer",Ee);const vt=Qe?1:0,Rt=4294967295;if(Ee<vt||Ee>Rt)throw new q(Ue,`>= ${vt} && <= ${Rt}`,Ee)});function Ce(Ee,Ue){if("string"!=typeof Ee)throw new G(Ue,"string",Ee)}const Ae=oe((Ee,Ue,Qe)=>{if(!C(Qe,Ee)){const Rt="must be one of: "+Y(z(Qe,wt=>"string"==typeof wt?`'${wt}'`:se(wt)),", ");throw new ee(Ue,Ee,Rt)}});function Be(Ee,Ue){if("boolean"!=typeof Ee)throw new G(Ue,"boolean",Ee)}function de(Ee,Ue,Qe){return null!=Ee&&N(Ee,Ue)?Ee[Ue]:Qe}const Se=oe((Ee,Ue,Qe=null)=>{const vt=de(Qe,"allowArray",!1),Rt=de(Qe,"allowFunction",!1);if(!de(Qe,"nullable",!1)&&null===Ee||!vt&&Q(Ee)||"object"!=typeof Ee&&(!Rt||"function"!=typeof Ee))throw new G(Ue,"Object",Ee)}),nt=oe((Ee,Ue)=>{if(null!=Ee&&"object"!=typeof Ee&&"function"!=typeof Ee)throw new G(Ue,"a dictionary",Ee)}),mt=oe((Ee,Ue,Qe=0)=>{if(!Q(Ee))throw new G(Ue,"Array",Ee);if(Ee.length<Qe)throw new ee(Ue,Ee,`must be longer than ${Qe}`)}),ie=oe((Ee,Ue="buffer")=>{if(!T(Ee))throw new G(Ue,["Buffer","TypedArray","DataView"],Ee)}),Xe=oe((Ee,Ue)=>{if(void 0!==Ee&&(null===Ee||"object"!=typeof Ee||!("aborted"in Ee)))throw new G(Ue,"AbortSignal",Ee)}),ue=oe((Ee,Ue)=>{if("function"!=typeof Ee)throw new G(Ue,"Function",Ee)}),te=oe((Ee,Ue)=>{if("function"!=typeof Ee||M(Ee))throw new G(Ue,"Function",Ee)}),U=oe((Ee,Ue)=>{if(void 0!==Ee)throw new G(Ue,"undefined",Ee)}),O=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(Ee,Ue){if(typeof Ee>"u"||!D(O,Ee))throw new ee(Ue,Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}je.exports={isInt32:function j(Ee){return Ee===(0|Ee)},isUint32:function Me(Ee){return Ee===Ee>>>0},parseFileMode:function Oe(Ee,Ue,Qe){if(typeof Ee>"u"&&(Ee=Qe),"string"==typeof Ee){if(null===D(ae,Ee))throw new ee(Ue,Ee,"must be a 32-bit unsigned integer or an octal string");Ee=W(Ee,8)}return Je(Ee,Ue),Ee},validateArray:mt,validateStringArray:function Ye(Ee,Ue){mt(Ee,Ue);for(let Qe=0;Qe<Ee.length;Qe++)Ce(Ee[Qe],`${Ue}[${Qe}]`)},validateBooleanArray:function fe(Ee,Ue){mt(Ee,Ue);for(let Qe=0;Qe<Ee.length;Qe++)Be(Ee[Qe],`${Ue}[${Qe}]`)},validateAbortSignalArray:function R(Ee,Ue){mt(Ee,Ue);for(let Qe=0;Qe<Ee.length;Qe++){const vt=Ee[Qe],Rt=`${Ue}[${Qe}]`;if(null==vt)throw new G(Rt,"AbortSignal",vt);Xe(vt,Rt)}},validateBoolean:Be,validateBuffer:ie,validateDictionary:nt,validateEncoding:function J(Ee,Ue){const Qe=b(Ue),vt=Ee.length;if("hex"===Qe&&vt%2!=0)throw new ee("encoding",Ue,`is invalid for data of length ${vt}`)},validateFunction:ue,validateInt32:Ze,validateInteger:Ve,validateNumber:function ke(Ee,Ue,Qe=void 0,vt){if("number"!=typeof Ee)throw new G(Ue,"number",Ee);if(null!=Qe&&Ee<Qe||null!=vt&&Ee>vt||(null!=Qe||null!=vt)&&_(Ee))throw new q(Ue,`${null!=Qe?`>= ${Qe}`:""}${null!=Qe&&null!=vt?" && ":""}${null!=vt?`<= ${vt}`:""}`,Ee)},validateObject:Se,validateOneOf:Ae,validatePlainFunction:te,validatePort:function He(Ee,Ue="Port",Qe=!0){if("number"!=typeof Ee&&"string"!=typeof Ee||"string"==typeof Ee&&0===B(Ee).length||+Ee!=+Ee>>>0||Ee>65535||0===Ee&&!Qe)throw new $(Ue,Ee,Qe);return 0|Ee},validateSignalName:function A(Ee,Ue="signal"){if(Ce(Ee,Ue),void 0===ce[Ee])throw void 0!==ce[x(Ee)]?new k(Ee+" (signals must use all capital letters)"):new k(Ee)},validateString:Ce,validateUint32:Je,validateUndefined:U,validateUnion:function I(Ee,Ue,Qe){if(!C(Qe,Ee))throw new G(Ue,`('${Y(Qe,"|")}')`,Ee)},validateAbortSignal:Xe,validateLinkHeaderValue:function We(Ee){if("string"==typeof Ee)return he(Ee,"hints"),Ee;if(Q(Ee)){const Ue=Ee.length;let Qe="";if(0===Ue)return Qe;for(let vt=0;vt<Ue;vt++){const Rt=Ee[vt];he(Rt,"hints"),Qe+=Rt,vt!==Ue-1&&(Qe+=", ")}return Qe}throw new ee("hints",Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},6947:(je,me,S)=>{"use strict";const Q=S(5603),C=S(9204),Y=Q.Readable.destroy;je.exports=Q.Readable,je.exports._uint8ArrayToBuffer=Q._uint8ArrayToBuffer,je.exports._isUint8Array=Q._isUint8Array,je.exports.isDisturbed=Q.isDisturbed,je.exports.isErrored=Q.isErrored,je.exports.isReadable=Q.isReadable,je.exports.Readable=Q.Readable,je.exports.Writable=Q.Writable,je.exports.Duplex=Q.Duplex,je.exports.Transform=Q.Transform,je.exports.PassThrough=Q.PassThrough,je.exports.addAbortSignal=Q.addAbortSignal,je.exports.finished=Q.finished,je.exports.destroy=Q.destroy,je.exports.destroy=Y,je.exports.pipeline=Q.pipeline,je.exports.compose=Q.compose,Object.defineProperty(Q,"promises",{configurable:!0,enumerable:!0,get:()=>C}),je.exports.Stream=Q.Stream,je.exports.default=je.exports},5480:(je,me,S)=>{"use strict";const{format:Q,inspect:C,AggregateError:Y}=S(1663),z=globalThis.AggregateError||Y,X=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],E=/^([A-Z][a-z0-9]*)+$/,W={};function N(G,ee){if(!G)throw new W.ERR_INTERNAL_ASSERTION(ee)}function D(G){let ee="",q=G.length;const k="-"===G[0]?1:0;for(;q>=k+4;q-=3)ee=`_${G.slice(q-3,q)}${ee}`;return`${G.slice(0,q)}${ee}`}function x(G,ee,q){q||(q=Error);class k extends q{constructor(...M){super(function se(G,ee,q){if("function"==typeof ee)return N(ee.length<=q.length,`Code: ${G}; The provided arguments length (${q.length}) does not match the required ones (${ee.length}).`),ee(...q);const k=(ee.match(/%[dfijoOs]/g)||[]).length;return N(k===q.length,`Code: ${G}; The provided arguments length (${q.length}) does not match the required ones (${k}).`),0===q.length?ee:Q(ee,...q)}(G,ee,M))}toString(){return`${this.name} [${G}]: ${this.message}`}}Object.defineProperties(k.prototype,{name:{value:q.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${G}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),k.prototype.code=G,k.prototype[X]=!0,W[G]=k}function B(G){return Object.defineProperty(G,"name",{value:"__node_internal_"+G.name}),G}class $ extends Error{constructor(ee="The operation was aborted",q=void 0){if(void 0!==q&&"object"!=typeof q)throw new W.ERR_INVALID_ARG_TYPE("options","Object",q);super(ee,q),this.code="ABORT_ERR",this.name="AbortError"}}x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(G,ee,q)=>{N("string"==typeof G,"'name' must be a string"),Array.isArray(ee)||(ee=[ee]);let k="The ";G.endsWith(" argument")?k+=`${G} `:k+=`"${G}" ${G.includes(".")?"property":"argument"} `,k+="must be ";const b=[],M=[],T=[];for(const j of ee)N("string"==typeof j,"All expected entries have to be of type string"),_.includes(j)?b.push(j.toLowerCase()):E.test(j)?M.push(j):(N("object"!==j,'The value "object" should be written as "Object"'),T.push(j));if(M.length>0){const j=b.indexOf("object");-1!==j&&(b.splice(b,j,1),M.push("Object"))}if(b.length>0){switch(b.length){case 1:k+=`of type ${b[0]}`;break;case 2:k+=`one of type ${b[0]} or ${b[1]}`;break;default:{const j=b.pop();k+=`one of type ${b.join(", ")}, or ${j}`}}(M.length>0||T.length>0)&&(k+=" or ")}if(M.length>0){switch(M.length){case 1:k+=`an instance of ${M[0]}`;break;case 2:k+=`an instance of ${M[0]} or ${M[1]}`;break;default:{const j=M.pop();k+=`an instance of ${M.join(", ")}, or ${j}`}}T.length>0&&(k+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(k+="an "),k+=`${T[0]}`;break;case 2:k+=`one of ${T[0]} or ${T[1]}`;break;default:{const j=T.pop();k+=`one of ${T.join(", ")}, or ${j}`}}if(null==q)k+=`. Received ${q}`;else if("function"==typeof q&&q.name)k+=`. Received function ${q.name}`;else if("object"==typeof q){var ce;null!==(ce=q.constructor)&&void 0!==ce&&ce.name?k+=`. Received an instance of ${q.constructor.name}`:k+=`. Received ${C(q,{depth:-1})}`}else{let j=C(q,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),k+=`. Received type ${typeof q} (${j})`}return k},TypeError),x("ERR_INVALID_ARG_VALUE",(G,ee,q="is invalid")=>{let k=C(ee);return k.length>128&&(k=k.slice(0,128)+"..."),`The ${G.includes(".")?"property":"argument"} '${G}' ${q}. Received ${k}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(G,ee,q)=>{var k;return`Expected ${G} to be returned from the "${ee}" function but got ${null!=q&&null!==(k=q.constructor)&&void 0!==k&&k.name?`instance of ${q.constructor.name}`:"type "+typeof q}.`},TypeError),x("ERR_MISSING_ARGS",(...G)=>{let ee;N(G.length>0,"At least one arg needs to be specified");const q=G.length;switch(G=(Array.isArray(G)?G:[G]).map(k=>`"${k}"`).join(" or "),q){case 1:ee+=`The ${G[0]} argument`;break;case 2:ee+=`The ${G[0]} and ${G[1]} arguments`;break;default:{const k=G.pop();ee+=`The ${G.join(", ")}, and ${k} arguments`}}return`${ee} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(G,ee,q)=>{let k;return N(ee,'Missing "range" argument'),Number.isInteger(q)&&Math.abs(q)>2**32?k=D(String(q)):"bigint"==typeof q?(k=String(q),(q>2n**32n||q<-(2n**32n))&&(k=D(k)),k+="n"):k=C(q),`The value of "${G}" is out of range. It must be ${ee}. Received ${k}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),je.exports={AbortError:$,aggregateTwoErrors:B(function oe(G,ee){if(G&&ee&&G!==ee){if(Array.isArray(ee.errors))return ee.errors.push(G),ee;const q=new z([ee,G],ee.message);return q.code=ee.code,q}return G||ee}),hideStackFrames:B,codes:W}},1251:je=>{"use strict";je.exports={ArrayIsArray:me=>Array.isArray(me),ArrayPrototypeIncludes:(me,S)=>me.includes(S),ArrayPrototypeIndexOf:(me,S)=>me.indexOf(S),ArrayPrototypeJoin:(me,S)=>me.join(S),ArrayPrototypeMap:(me,S)=>me.map(S),ArrayPrototypePop:(me,S)=>me.pop(S),ArrayPrototypePush:(me,S)=>me.push(S),ArrayPrototypeSlice:(me,S,Q)=>me.slice(S,Q),Error,FunctionPrototypeCall:(me,S,...Q)=>me.call(S,...Q),FunctionPrototypeSymbolHasInstance:(me,S)=>Function.prototype[Symbol.hasInstance].call(me,S),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(me,S)=>Object.defineProperties(me,S),ObjectDefineProperty:(me,S,Q)=>Object.defineProperty(me,S,Q),ObjectGetOwnPropertyDescriptor:(me,S)=>Object.getOwnPropertyDescriptor(me,S),ObjectKeys:me=>Object.keys(me),ObjectSetPrototypeOf:(me,S)=>Object.setPrototypeOf(me,S),Promise,PromisePrototypeCatch:(me,S)=>me.catch(S),PromisePrototypeThen:(me,S,Q)=>me.then(S,Q),PromiseReject:me=>Promise.reject(me),PromiseResolve:me=>Promise.resolve(me),ReflectApply:Reflect.apply,RegExpPrototypeTest:(me,S)=>me.test(S),SafeSet:Set,String,StringPrototypeSlice:(me,S,Q)=>me.slice(S,Q),StringPrototypeToLowerCase:me=>me.toLowerCase(),StringPrototypeToUpperCase:me=>me.toUpperCase(),StringPrototypeTrim:me=>me.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(me,S,Q)=>me.set(S,Q),Boolean,Uint8Array}},1663:(je,me,S)=>{"use strict";var Q=S(9293).default;const C=S(2317),{kResistStopPropagation:Y,SymbolDispose:z}=S(1251),X=globalThis.AbortSignal||S(9465).AbortSignal,_=globalThis.AbortController||S(9465).AbortController,E=Object.getPrototypeOf(Q(function*(){})).constructor,F=globalThis.Blob||C.Blob,W=typeof F<"u"?function(B){return B instanceof F}:function(B){return!1},N=(x,B)=>{if(void 0!==x&&(null===x||"object"!=typeof x||!("aborted"in x)))throw new ERR_INVALID_ARG_TYPE(B,"AbortSignal",x)};class se extends Error{constructor(B){if(!Array.isArray(B))throw new TypeError("Expected input to be an Array, got "+typeof B);let oe="";for(let $=0;$<B.length;$++)oe+=`    ${B[$].stack}\n`;super(oe),this.name="AggregateError",this.errors=B}}je.exports={AggregateError:se,kEmptyObject:Object.freeze({}),once(x){let B=!1;return function(...oe){B||(B=!0,x.apply(this,oe))}},createDeferredPromise:function(){let x,B;return{promise:new Promise(($,G)=>{x=$,B=G}),resolve:x,reject:B}},promisify:x=>new Promise((B,oe)=>{x(($,...G)=>$?oe($):B(...G))}),debuglog:()=>function(){},format:(x,...B)=>x.replace(/%([sdifj])/g,function(...[oe,$]){const G=B.shift();return"f"===$?G.toFixed(6):"j"===$?JSON.stringify(G):"s"===$&&"object"==typeof G?`${G.constructor!==Object?G.constructor.name:""} {}`.trim():G.toString()}),inspect(x){switch(typeof x){case"string":if(x.includes("'")){if(!x.includes('"'))return`"${x}"`;if(!x.includes("`")&&!x.includes("${"))return`\`${x}\``}return`'${x}'`;case"number":return isNaN(x)?"NaN":Object.is(x,-0)?String(x):x;case"bigint":return`${String(x)}n`;case"boolean":case"undefined":return String(x);case"object":return"{}"}},types:{isAsyncFunction:x=>x instanceof E,isArrayBufferView:x=>ArrayBuffer.isView(x)},isBlob:W,deprecate:(x,B)=>x,addAbortListener:S(4356).addAbortListener||function(B,oe){if(void 0===B)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",B);let $;return N(B,"signal"),((x,B)=>{if("function"!=typeof x)throw new ERR_INVALID_ARG_TYPE("listener","Function",x)})(oe),B.aborted?queueMicrotask(()=>oe()):(B.addEventListener("abort",oe,{__proto__:null,once:!0,[Y]:!0}),$=()=>{B.removeEventListener("abort",oe)}),{__proto__:null,[z](){var G;null===(G=$)||void 0===G||G()}}},AbortSignalAny:X.any||function(B){if(1===B.length)return B[0];const oe=new _,$=()=>oe.abort();return B.forEach(G=>{N(G,"signals"),G.addEventListener("abort",$,{once:!0})}),oe.signal.addEventListener("abort",()=>{B.forEach(G=>G.removeEventListener("abort",$))},{once:!0}),oe.signal}},je.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},5603:(je,me,S)=>{const{Buffer:Q}=S(2317),{ObjectDefineProperty:C,ObjectKeys:Y,ReflectApply:z}=S(1251),{promisify:{custom:X}}=S(1663),{streamReturningOperators:_,promiseReturningOperators:E}=S(1210),{codes:{ERR_ILLEGAL_CONSTRUCTOR:F}}=S(5480),W=S(6683),{setDefaultHighWaterMark:N,getDefaultHighWaterMark:D}=S(2934),{pipeline:se}=S(6249),{destroyer:x}=S(1509),B=S(3139),$=S(9204),G=S(6110),ee=je.exports=S(8708).Stream;ee.isDestroyed=G.isDestroyed,ee.isDisturbed=G.isDisturbed,ee.isErrored=G.isErrored,ee.isReadable=G.isReadable,ee.isWritable=G.isWritable,ee.Readable=S(5779);for(const b of Y(_)){let T=function(...ce){if(new.target)throw F();return ee.Readable.from(z(M,this,ce))};const M=_[b];C(T,"name",{__proto__:null,value:M.name}),C(T,"length",{__proto__:null,value:M.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const b of Y(E)){let T=function(...j){if(new.target)throw F();return z(M,this,j)};const M=E[b];C(T,"name",{__proto__:null,value:M.name}),C(T,"length",{__proto__:null,value:M.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}ee.Writable=S(2983),ee.Duplex=S(9613),ee.Transform=S(9059),ee.PassThrough=S(6569),ee.pipeline=se;const{addAbortSignal:q}=S(8992);ee.addAbortSignal=q,ee.finished=B,ee.destroy=x,ee.compose=W,ee.setDefaultHighWaterMark=N,ee.getDefaultHighWaterMark=D,C(ee,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>$}),C(se,X,{__proto__:null,enumerable:!0,get:()=>$.pipeline}),C(B,X,{__proto__:null,enumerable:!0,get:()=>$.finished}),ee.Stream=ee,ee._isUint8Array=function(M){return M instanceof Uint8Array},ee._uint8ArrayToBuffer=function(M){return Q.from(M.buffer,M.byteOffset,M.byteLength)}},9204:(je,me,S)=>{"use strict";const{ArrayPrototypePop:Q,Promise:C}=S(1251),{isIterable:Y,isNodeStream:z,isWebStream:X}=S(6110),{pipelineImpl:_}=S(6249),{finished:E}=S(3139);S(5603),je.exports={finished:E,pipeline:function F(...W){return new C((N,D)=>{let se,x;const B=W[W.length-1];if(B&&"object"==typeof B&&!z(B)&&!Y(B)&&!X(B)){const oe=Q(W);se=oe.signal,x=oe.end}_(W,(oe,$)=>{oe?D(oe):N($)},{signal:se,end:x})})}}},2317:(je,me,S)=>{"use strict";const Q=S(3981),C=S(2020),Y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;me.Buffer=E,me.SlowBuffer=function ee(pe){return+pe!=pe&&(pe=0),E.alloc(+pe)},me.INSPECT_MAX_BYTES=50;const z=2147483647;function _(pe){if(pe>z)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const H=new Uint8Array(pe);return Object.setPrototypeOf(H,E.prototype),H}function E(pe,H,ne){if("number"==typeof pe){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return D(pe)}return F(pe,H,ne)}function F(pe,H,ne){if("string"==typeof pe)return function se(pe,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!E.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const ne=0|q(pe,H);let Le=_(ne);const tt=Le.write(pe,H);return tt!==ne&&(Le=Le.slice(0,tt)),Le}(pe,H);if(ArrayBuffer.isView(pe))return function B(pe){if(Qe(pe,Uint8Array)){const H=new Uint8Array(pe);return oe(H.buffer,H.byteOffset,H.byteLength)}return x(pe)}(pe);if(null==pe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(Qe(pe,ArrayBuffer)||pe&&Qe(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qe(pe,SharedArrayBuffer)||pe&&Qe(pe.buffer,SharedArrayBuffer)))return oe(pe,H,ne);if("number"==typeof pe)throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=pe.valueOf&&pe.valueOf();if(null!=Le&&Le!==pe)return E.from(Le,H,ne);const tt=function $(pe){if(E.isBuffer(pe)){const H=0|G(pe.length),ne=_(H);return 0===ne.length||pe.copy(ne,0,0,H),ne}return void 0!==pe.length?"number"!=typeof pe.length||vt(pe.length)?_(0):x(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?x(pe.data):void 0}(pe);if(tt)return tt;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof pe[Symbol.toPrimitive])return E.from(pe[Symbol.toPrimitive]("string"),H,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}function W(pe){if("number"!=typeof pe)throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function D(pe){return W(pe),_(pe<0?0:0|G(pe))}function x(pe){const H=pe.length<0?0:0|G(pe.length),ne=_(H);for(let Le=0;Le<H;Le+=1)ne[Le]=255&pe[Le];return ne}function oe(pe,H,ne){if(H<0||pe.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<H+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return Le=void 0===H&&void 0===ne?new Uint8Array(pe):void 0===ne?new Uint8Array(pe,H):new Uint8Array(pe,H,ne),Object.setPrototypeOf(Le,E.prototype),Le}function G(pe){if(pe>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return 0|pe}function q(pe,H){if(E.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||Qe(pe,ArrayBuffer))return pe.byteLength;if("string"!=typeof pe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const ne=pe.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===ne)return 0;let tt=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return O(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return Ee(pe).length;default:if(tt)return Le?-1:O(pe).length;H=(""+H).toLowerCase(),tt=!0}}function k(pe,H,ne){let Le=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(H>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return Ae(this,H,ne);case"utf8":case"utf-8":return Ve(this,H,ne);case"ascii":return Ce(this,H,ne);case"latin1":case"binary":return ke(this,H,ne);case"base64":return Oe(this,H,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,H,ne);default:if(Le)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),Le=!0}}function b(pe,H,ne){const Le=pe[H];pe[H]=pe[ne],pe[ne]=Le}function M(pe,H,ne,Le,tt){if(0===pe.length)return-1;if("string"==typeof ne?(Le=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),vt(ne=+ne)&&(ne=tt?0:pe.length-1),ne<0&&(ne=pe.length+ne),ne>=pe.length){if(tt)return-1;ne=pe.length-1}else if(ne<0){if(!tt)return-1;ne=0}if("string"==typeof H&&(H=E.from(H,Le)),E.isBuffer(H))return 0===H.length?-1:T(pe,H,ne,Le,tt);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?tt?Uint8Array.prototype.indexOf.call(pe,H,ne):Uint8Array.prototype.lastIndexOf.call(pe,H,ne):T(pe,[H],ne,Le,tt);throw new TypeError("val must be string, number or Buffer")}function T(pe,H,ne,Le,tt){let Hn,lt=1,xt=pe.length,nn=H.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(pe.length<2||H.length<2)return-1;lt=2,xt/=2,nn/=2,ne/=2}function Fn(An,vn){return 1===lt?An[vn]:An.readUInt16BE(vn*lt)}if(tt){let An=-1;for(Hn=ne;Hn<xt;Hn++)if(Fn(pe,Hn)===Fn(H,-1===An?0:Hn-An)){if(-1===An&&(An=Hn),Hn-An+1===nn)return An*lt}else-1!==An&&(Hn-=Hn-An),An=-1}else for(ne+nn>xt&&(ne=xt-nn),Hn=ne;Hn>=0;Hn--){let An=!0;for(let vn=0;vn<nn;vn++)if(Fn(pe,Hn+vn)!==Fn(H,vn)){An=!1;break}if(An)return Hn}return-1}function ce(pe,H,ne,Le){ne=Number(ne)||0;const tt=pe.length-ne;Le?(Le=Number(Le))>tt&&(Le=tt):Le=tt;const lt=H.length;let xt;for(Le>lt/2&&(Le=lt/2),xt=0;xt<Le;++xt){const nn=parseInt(H.substr(2*xt,2),16);if(vt(nn))return xt;pe[ne+xt]=nn}return xt}function j(pe,H,ne,Le){return Ue(O(H,pe.length-ne),pe,ne,Le)}function Me(pe,H,ne,Le){return Ue(function he(pe){const H=[];for(let ne=0;ne<pe.length;++ne)H.push(255&pe.charCodeAt(ne));return H}(H),pe,ne,Le)}function ae(pe,H,ne,Le){return Ue(Ee(H),pe,ne,Le)}function xe(pe,H,ne,Le){return Ue(function We(pe,H){let ne,Le,tt;const lt=[];for(let xt=0;xt<pe.length&&!((H-=2)<0);++xt)ne=pe.charCodeAt(xt),Le=ne>>8,tt=ne%256,lt.push(tt),lt.push(Le);return lt}(H,pe.length-ne),pe,ne,Le)}function Oe(pe,H,ne){return Q.fromByteArray(0===H&&ne===pe.length?pe:pe.slice(H,ne))}function Ve(pe,H,ne){ne=Math.min(pe.length,ne);const Le=[];let tt=H;for(;tt<ne;){const lt=pe[tt];let xt=null,nn=lt>239?4:lt>223?3:lt>191?2:1;if(tt+nn<=ne){let Fn,Hn,An,vn;switch(nn){case 1:lt<128&&(xt=lt);break;case 2:Fn=pe[tt+1],128==(192&Fn)&&(vn=(31&lt)<<6|63&Fn,vn>127&&(xt=vn));break;case 3:Fn=pe[tt+1],Hn=pe[tt+2],128==(192&Fn)&&128==(192&Hn)&&(vn=(15&lt)<<12|(63&Fn)<<6|63&Hn,vn>2047&&(vn<55296||vn>57343)&&(xt=vn));break;case 4:Fn=pe[tt+1],Hn=pe[tt+2],An=pe[tt+3],128==(192&Fn)&&128==(192&Hn)&&128==(192&An)&&(vn=(15&lt)<<18|(63&Fn)<<12|(63&Hn)<<6|63&An,vn>65535&&vn<1114112&&(xt=vn))}}null===xt?(xt=65533,nn=1):xt>65535&&(xt-=65536,Le.push(xt>>>10&1023|55296),xt=56320|1023&xt),Le.push(xt),tt+=nn}return function Je(pe){const H=pe.length;if(H<=Ze)return String.fromCharCode.apply(String,pe);let ne="",Le=0;for(;Le<H;)ne+=String.fromCharCode.apply(String,pe.slice(Le,Le+=Ze));return ne}(Le)}me.kMaxLength=z,!(E.TYPED_ARRAY_SUPPORT=function X(){try{const pe=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(pe,H),42===pe.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}}),E.poolSize=8192,E.from=function(pe,H,ne){return F(pe,H,ne)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array),E.alloc=function(pe,H,ne){return function N(pe,H,ne){return W(pe),pe<=0?_(pe):void 0!==H?"string"==typeof ne?_(pe).fill(H,ne):_(pe).fill(H):_(pe)}(pe,H,ne)},E.allocUnsafe=function(pe){return D(pe)},E.allocUnsafeSlow=function(pe){return D(pe)},E.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==E.prototype},E.compare=function(H,ne){if(Qe(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),Qe(ne,Uint8Array)&&(ne=E.from(ne,ne.offset,ne.byteLength)),!E.isBuffer(H)||!E.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===ne)return 0;let Le=H.length,tt=ne.length;for(let lt=0,xt=Math.min(Le,tt);lt<xt;++lt)if(H[lt]!==ne[lt]){Le=H[lt],tt=ne[lt];break}return Le<tt?-1:tt<Le?1:0},E.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(H,ne){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return E.alloc(0);let Le;if(void 0===ne)for(ne=0,Le=0;Le<H.length;++Le)ne+=H[Le].length;const tt=E.allocUnsafe(ne);let lt=0;for(Le=0;Le<H.length;++Le){let xt=H[Le];if(Qe(xt,Uint8Array))lt+xt.length>tt.length?(E.isBuffer(xt)||(xt=E.from(xt)),xt.copy(tt,lt)):Uint8Array.prototype.set.call(tt,xt,lt);else{if(!E.isBuffer(xt))throw new TypeError('"list" argument must be an Array of Buffers');xt.copy(tt,lt)}lt+=xt.length}return tt},E.byteLength=q,E.prototype._isBuffer=!0,E.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ne=0;ne<H;ne+=2)b(this,ne,ne+1);return this},E.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ne=0;ne<H;ne+=4)b(this,ne,ne+3),b(this,ne+1,ne+2);return this},E.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ne=0;ne<H;ne+=8)b(this,ne,ne+7),b(this,ne+1,ne+6),b(this,ne+2,ne+5),b(this,ne+3,ne+4);return this},E.prototype.toLocaleString=E.prototype.toString=function(){const H=this.length;return 0===H?"":0===arguments.length?Ve(this,0,H):k.apply(this,arguments)},E.prototype.equals=function(H){if(!E.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===E.compare(this,H)},E.prototype.inspect=function(){let H="";const ne=me.INSPECT_MAX_BYTES;return H=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(H+=" ... "),"<Buffer "+H+">"},Y&&(E.prototype[Y]=E.prototype.inspect),E.prototype.compare=function(H,ne,Le,tt,lt){if(Qe(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),!E.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===ne&&(ne=0),void 0===Le&&(Le=H?H.length:0),void 0===tt&&(tt=0),void 0===lt&&(lt=this.length),ne<0||Le>H.length||tt<0||lt>this.length)throw new RangeError("out of range index");if(tt>=lt&&ne>=Le)return 0;if(tt>=lt)return-1;if(ne>=Le)return 1;if(this===H)return 0;let xt=(lt>>>=0)-(tt>>>=0),nn=(Le>>>=0)-(ne>>>=0);const Fn=Math.min(xt,nn),Hn=this.slice(tt,lt),An=H.slice(ne,Le);for(let vn=0;vn<Fn;++vn)if(Hn[vn]!==An[vn]){xt=Hn[vn],nn=An[vn];break}return xt<nn?-1:nn<xt?1:0},E.prototype.includes=function(H,ne,Le){return-1!==this.indexOf(H,ne,Le)},E.prototype.indexOf=function(H,ne,Le){return M(this,H,ne,Le,!0)},E.prototype.lastIndexOf=function(H,ne,Le){return M(this,H,ne,Le,!1)},E.prototype.write=function(H,ne,Le,tt){if(void 0===ne)tt="utf8",Le=this.length,ne=0;else if(void 0===Le&&"string"==typeof ne)tt=ne,Le=this.length,ne=0;else{if(!isFinite(ne))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ne>>>=0,isFinite(Le)?(Le>>>=0,void 0===tt&&(tt="utf8")):(tt=Le,Le=void 0)}const lt=this.length-ne;if((void 0===Le||Le>lt)&&(Le=lt),H.length>0&&(Le<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");tt||(tt="utf8");let xt=!1;for(;;)switch(tt){case"hex":return ce(this,H,ne,Le);case"utf8":case"utf-8":return j(this,H,ne,Le);case"ascii":case"latin1":case"binary":return Me(this,H,ne,Le);case"base64":return ae(this,H,ne,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,H,ne,Le);default:if(xt)throw new TypeError("Unknown encoding: "+tt);tt=(""+tt).toLowerCase(),xt=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Ze=4096;function Ce(pe,H,ne){let Le="";ne=Math.min(pe.length,ne);for(let tt=H;tt<ne;++tt)Le+=String.fromCharCode(127&pe[tt]);return Le}function ke(pe,H,ne){let Le="";ne=Math.min(pe.length,ne);for(let tt=H;tt<ne;++tt)Le+=String.fromCharCode(pe[tt]);return Le}function Ae(pe,H,ne){const Le=pe.length;(!H||H<0)&&(H=0),(!ne||ne<0||ne>Le)&&(ne=Le);let tt="";for(let lt=H;lt<ne;++lt)tt+=Rt[pe[lt]];return tt}function Be(pe,H,ne){const Le=pe.slice(H,ne);let tt="";for(let lt=0;lt<Le.length-1;lt+=2)tt+=String.fromCharCode(Le[lt]+256*Le[lt+1]);return tt}function de(pe,H,ne){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+H>ne)throw new RangeError("Trying to access beyond buffer length")}function Se(pe,H,ne,Le,tt,lt){if(!E.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>tt||H<lt)throw new RangeError('"value" argument is out of bounds');if(ne+Le>pe.length)throw new RangeError("Index out of range")}function nt(pe,H,ne,Le,tt){Xe(H,Le,tt,pe,ne,7);let lt=Number(H&BigInt(4294967295));pe[ne++]=lt,lt>>=8,pe[ne++]=lt,lt>>=8,pe[ne++]=lt,lt>>=8,pe[ne++]=lt;let xt=Number(H>>BigInt(32)&BigInt(4294967295));return pe[ne++]=xt,xt>>=8,pe[ne++]=xt,xt>>=8,pe[ne++]=xt,xt>>=8,pe[ne++]=xt,ne}function mt(pe,H,ne,Le,tt){Xe(H,Le,tt,pe,ne,7);let lt=Number(H&BigInt(4294967295));pe[ne+7]=lt,lt>>=8,pe[ne+6]=lt,lt>>=8,pe[ne+5]=lt,lt>>=8,pe[ne+4]=lt;let xt=Number(H>>BigInt(32)&BigInt(4294967295));return pe[ne+3]=xt,xt>>=8,pe[ne+2]=xt,xt>>=8,pe[ne+1]=xt,xt>>=8,pe[ne]=xt,ne+8}function Ye(pe,H,ne,Le,tt,lt){if(ne+Le>pe.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function fe(pe,H,ne,Le,tt){return H=+H,ne>>>=0,tt||Ye(pe,0,ne,4),C.write(pe,H,ne,Le,23,4),ne+4}function R(pe,H,ne,Le,tt){return H=+H,ne>>>=0,tt||Ye(pe,0,ne,8),C.write(pe,H,ne,Le,52,8),ne+8}E.prototype.slice=function(H,ne){const Le=this.length;(H=~~H)<0?(H+=Le)<0&&(H=0):H>Le&&(H=Le),(ne=void 0===ne?Le:~~ne)<0?(ne+=Le)<0&&(ne=0):ne>Le&&(ne=Le),ne<H&&(ne=H);const tt=this.subarray(H,ne);return Object.setPrototypeOf(tt,E.prototype),tt},E.prototype.readUintLE=E.prototype.readUIntLE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H],lt=1,xt=0;for(;++xt<ne&&(lt*=256);)tt+=this[H+xt]*lt;return tt},E.prototype.readUintBE=E.prototype.readUIntBE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H+--ne],lt=1;for(;ne>0&&(lt*=256);)tt+=this[H+--ne]*lt;return tt},E.prototype.readUint8=E.prototype.readUInt8=function(H,ne){return H>>>=0,ne||de(H,1,this.length),this[H]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(H,ne){return H>>>=0,ne||de(H,2,this.length),this[H]|this[H+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(H,ne){return H>>>=0,ne||de(H,2,this.length),this[H]<<8|this[H+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},E.prototype.readBigUInt64LE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=ne+256*this[++H]+65536*this[++H]+this[++H]*2**24,lt=this[++H]+256*this[++H]+65536*this[++H]+Le*2**24;return BigInt(tt)+(BigInt(lt)<<BigInt(32))}),E.prototype.readBigUInt64BE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=ne*2**24+65536*this[++H]+256*this[++H]+this[++H],lt=this[++H]*2**24+65536*this[++H]+256*this[++H]+Le;return(BigInt(tt)<<BigInt(32))+BigInt(lt)}),E.prototype.readIntLE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H],lt=1,xt=0;for(;++xt<ne&&(lt*=256);)tt+=this[H+xt]*lt;return lt*=128,tt>=lt&&(tt-=Math.pow(2,8*ne)),tt},E.prototype.readIntBE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=ne,lt=1,xt=this[H+--tt];for(;tt>0&&(lt*=256);)xt+=this[H+--tt]*lt;return lt*=128,xt>=lt&&(xt-=Math.pow(2,8*ne)),xt},E.prototype.readInt8=function(H,ne){return H>>>=0,ne||de(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},E.prototype.readInt16LE=function(H,ne){H>>>=0,ne||de(H,2,this.length);const Le=this[H]|this[H+1]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt16BE=function(H,ne){H>>>=0,ne||de(H,2,this.length);const Le=this[H+1]|this[H]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt32LE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},E.prototype.readInt32BE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},E.prototype.readBigInt64LE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];return(void 0===ne||void 0===Le)&&te(H,this.length-8),(BigInt(this[H+4]+256*this[H+5]+65536*this[H+6]+(Le<<24))<<BigInt(32))+BigInt(ne+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),E.prototype.readBigInt64BE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=(ne<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(tt)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+Le)}),E.prototype.readFloatLE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),C.read(this,H,!0,23,4)},E.prototype.readFloatBE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),C.read(this,H,!1,23,4)},E.prototype.readDoubleLE=function(H,ne){return H>>>=0,ne||de(H,8,this.length),C.read(this,H,!0,52,8)},E.prototype.readDoubleBE=function(H,ne){return H>>>=0,ne||de(H,8,this.length),C.read(this,H,!1,52,8)},E.prototype.writeUintLE=E.prototype.writeUIntLE=function(H,ne,Le,tt){H=+H,ne>>>=0,Le>>>=0,tt||Se(this,H,ne,Le,Math.pow(2,8*Le)-1,0);let lt=1,xt=0;for(this[ne]=255&H;++xt<Le&&(lt*=256);)this[ne+xt]=H/lt&255;return ne+Le},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(H,ne,Le,tt){H=+H,ne>>>=0,Le>>>=0,tt||Se(this,H,ne,Le,Math.pow(2,8*Le)-1,0);let lt=Le-1,xt=1;for(this[ne+lt]=255&H;--lt>=0&&(xt*=256);)this[ne+lt]=H/xt&255;return ne+Le},E.prototype.writeUint8=E.prototype.writeUInt8=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,1,255,0),this[ne]=255&H,ne+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,65535,0),this[ne]=255&H,this[ne+1]=H>>>8,ne+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,65535,0),this[ne]=H>>>8,this[ne+1]=255&H,ne+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,4294967295,0),this[ne+3]=H>>>24,this[ne+2]=H>>>16,this[ne+1]=H>>>8,this[ne]=255&H,ne+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,4294967295,0),this[ne]=H>>>24,this[ne+1]=H>>>16,this[ne+2]=H>>>8,this[ne+3]=255&H,ne+4},E.prototype.writeBigUInt64LE=wt(function(H,ne=0){return nt(this,H,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=wt(function(H,ne=0){return mt(this,H,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(H,ne,Le,tt){if(H=+H,ne>>>=0,!tt){const Fn=Math.pow(2,8*Le-1);Se(this,H,ne,Le,Fn-1,-Fn)}let lt=0,xt=1,nn=0;for(this[ne]=255&H;++lt<Le&&(xt*=256);)H<0&&0===nn&&0!==this[ne+lt-1]&&(nn=1),this[ne+lt]=(H/xt|0)-nn&255;return ne+Le},E.prototype.writeIntBE=function(H,ne,Le,tt){if(H=+H,ne>>>=0,!tt){const Fn=Math.pow(2,8*Le-1);Se(this,H,ne,Le,Fn-1,-Fn)}let lt=Le-1,xt=1,nn=0;for(this[ne+lt]=255&H;--lt>=0&&(xt*=256);)H<0&&0===nn&&0!==this[ne+lt+1]&&(nn=1),this[ne+lt]=(H/xt|0)-nn&255;return ne+Le},E.prototype.writeInt8=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,1,127,-128),H<0&&(H=255+H+1),this[ne]=255&H,ne+1},E.prototype.writeInt16LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,32767,-32768),this[ne]=255&H,this[ne+1]=H>>>8,ne+2},E.prototype.writeInt16BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,32767,-32768),this[ne]=H>>>8,this[ne+1]=255&H,ne+2},E.prototype.writeInt32LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,2147483647,-2147483648),this[ne]=255&H,this[ne+1]=H>>>8,this[ne+2]=H>>>16,this[ne+3]=H>>>24,ne+4},E.prototype.writeInt32BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[ne]=H>>>24,this[ne+1]=H>>>16,this[ne+2]=H>>>8,this[ne+3]=255&H,ne+4},E.prototype.writeBigInt64LE=wt(function(H,ne=0){return nt(this,H,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=wt(function(H,ne=0){return mt(this,H,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeFloatLE=function(H,ne,Le){return fe(this,H,ne,!0,Le)},E.prototype.writeFloatBE=function(H,ne,Le){return fe(this,H,ne,!1,Le)},E.prototype.writeDoubleLE=function(H,ne,Le){return R(this,H,ne,!0,Le)},E.prototype.writeDoubleBE=function(H,ne,Le){return R(this,H,ne,!1,Le)},E.prototype.copy=function(H,ne,Le,tt){if(!E.isBuffer(H))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!tt&&0!==tt&&(tt=this.length),ne>=H.length&&(ne=H.length),ne||(ne=0),tt>0&&tt<Le&&(tt=Le),tt===Le||0===H.length||0===this.length)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(tt<0)throw new RangeError("sourceEnd out of bounds");tt>this.length&&(tt=this.length),H.length-ne<tt-Le&&(tt=H.length-ne+Le);const lt=tt-Le;return this===H&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ne,Le,tt):Uint8Array.prototype.set.call(H,this.subarray(Le,tt),ne),lt},E.prototype.fill=function(H,ne,Le,tt){if("string"==typeof H){if("string"==typeof ne?(tt=ne,ne=0,Le=this.length):"string"==typeof Le&&(tt=Le,Le=this.length),void 0!==tt&&"string"!=typeof tt)throw new TypeError("encoding must be a string");if("string"==typeof tt&&!E.isEncoding(tt))throw new TypeError("Unknown encoding: "+tt);if(1===H.length){const xt=H.charCodeAt(0);("utf8"===tt&&xt<128||"latin1"===tt)&&(H=xt)}}else"number"==typeof H?H&=255:"boolean"==typeof H&&(H=Number(H));if(ne<0||this.length<ne||this.length<Le)throw new RangeError("Out of range index");if(Le<=ne)return this;let lt;if(ne>>>=0,Le=void 0===Le?this.length:Le>>>0,H||(H=0),"number"==typeof H)for(lt=ne;lt<Le;++lt)this[lt]=H;else{const xt=E.isBuffer(H)?H:E.from(H,tt),nn=xt.length;if(0===nn)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(lt=0;lt<Le-ne;++lt)this[lt+ne]=xt[lt%nn]}return this};const A={};function ie(pe,H,ne){A[pe]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,delete this.name}get code(){return pe}set code(tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:tt,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}function J(pe){let H="",ne=pe.length;const Le="-"===pe[0]?1:0;for(;ne>=Le+4;ne-=3)H=`_${pe.slice(ne-3,ne)}${H}`;return`${pe.slice(0,ne)}${H}`}function Xe(pe,H,ne,Le,tt,lt){if(pe>ne||pe<H){const xt="bigint"==typeof H?"n":"";let nn;throw nn=lt>3?0===H||H===BigInt(0)?`>= 0${xt} and < 2${xt} ** ${8*(lt+1)}${xt}`:`>= -(2${xt} ** ${8*(lt+1)-1}${xt}) and < 2 ** ${8*(lt+1)-1}${xt}`:`>= ${H}${xt} and <= ${ne}${xt}`,new A.ERR_OUT_OF_RANGE("value",nn,pe)}!function He(pe,H,ne){ue(H,"offset"),(void 0===pe[H]||void 0===pe[H+ne])&&te(H,pe.length-(ne+1))}(Le,tt,lt)}function ue(pe,H){if("number"!=typeof pe)throw new A.ERR_INVALID_ARG_TYPE(H,"number",pe)}function te(pe,H,ne){throw Math.floor(pe)!==pe?(ue(pe,ne),new A.ERR_OUT_OF_RANGE(ne||"offset","an integer",pe)):H<0?new A.ERR_BUFFER_OUT_OF_BOUNDS:new A.ERR_OUT_OF_RANGE(ne||"offset",`>= ${ne?1:0} and <= ${H}`,pe)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(pe,H){return`The "${pe}" argument must be of type number. Received type ${typeof H}`},TypeError),ie("ERR_OUT_OF_RANGE",function(pe,H,ne){let Le=`The value of "${pe}" is out of range.`,tt=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?tt=J(String(ne)):"bigint"==typeof ne&&(tt=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(tt=J(tt)),tt+="n"),Le+=` It must be ${H}. Received ${tt}`,Le},RangeError);const U=/[^+/0-9A-Za-z-_]/g;function O(pe,H){let ne;H=H||1/0;const Le=pe.length;let tt=null;const lt=[];for(let xt=0;xt<Le;++xt){if(ne=pe.charCodeAt(xt),ne>55295&&ne<57344){if(!tt){if(ne>56319){(H-=3)>-1&&lt.push(239,191,189);continue}if(xt+1===Le){(H-=3)>-1&&lt.push(239,191,189);continue}tt=ne;continue}if(ne<56320){(H-=3)>-1&&lt.push(239,191,189),tt=ne;continue}ne=65536+(tt-55296<<10|ne-56320)}else tt&&(H-=3)>-1&&lt.push(239,191,189);if(tt=null,ne<128){if((H-=1)<0)break;lt.push(ne)}else if(ne<2048){if((H-=2)<0)break;lt.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((H-=3)<0)break;lt.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;lt.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return lt}function Ee(pe){return Q.toByteArray(function I(pe){if((pe=(pe=pe.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;pe.length%4!=0;)pe+="=";return pe}(pe))}function Ue(pe,H,ne,Le){let tt;for(tt=0;tt<Le&&!(tt+ne>=H.length||tt>=pe.length);++tt)H[tt+ne]=pe[tt];return tt}function Qe(pe,H){return pe instanceof H||null!=pe&&null!=pe.constructor&&null!=pe.constructor.name&&pe.constructor.name===H.name}function vt(pe){return pe!=pe}const Rt=function(){const pe="0123456789abcdef",H=new Array(256);for(let ne=0;ne<16;++ne){const Le=16*ne;for(let tt=0;tt<16;++tt)H[Le+tt]=pe[ne]+pe[tt]}return H}();function wt(pe){return typeof BigInt>"u"?Lt:pe}function Lt(){throw new Error("BigInt not supported")}},2011:function(je,me,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(Y,z,X,_){void 0===_&&(_=X),Object.defineProperty(Y,_,{enumerable:!0,get:function(){return z[X]}})}:function(Y,z,X,_){void 0===_&&(_=X),Y[_]=z[X]}),C=this&&this.__exportStar||function(Y,z){for(var X in Y)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,Y,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(9787),me)},9787:(je,me)=>{"use strict";function Q(z){const X=[];let _=0;for(;_<z.length;)switch(z[_]){case"/":if("."===z[_+1])if("."===z[_+2]){if(!Y(z[_+3])){X.push([]),_++;break}X.pop(),z[_+3]||X.push([]),_+=3}else{if(!Y(z[_+2])){X.push([]),_++;break}z[_+2]||X.push([]),_+=2}else X.push([]),_++;break;case"#":case"?":X.length||X.push([]),X[X.length-1].push(z.substr(_)),_=z.length;break;default:X.length||X.push([]),X[X.length-1].push(z[_]),_++}return"/"+X.map(E=>E.join("")).join("/")}function C(z,X){let _=X+1;X>=0?"/"===z[X+1]&&"/"===z[X+2]&&(_=X+3):"/"===z[0]&&"/"===z[1]&&(_=2);const E=z.indexOf("/",_);return E<0?z:z.substr(0,E)+Q(z.substr(E))}function Y(z){return!z||"#"===z||"?"===z||"/"===z}Object.defineProperty(me,"__esModule",{value:!0}),me.removeDotSegmentsOfPath=me.removeDotSegments=me.resolve=void 0,me.resolve=function S(z,X){const _=(X=X||"").indexOf("#");if(_>0&&(X=X.substr(0,_)),!z.length){if(X.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${X}' for value '${z}'`);return X}if(z.startsWith("?")){const x=X.indexOf("?");return x>0&&(X=X.substr(0,x)),X+z}if(z.startsWith("#"))return X+z;if(!X.length){const x=z.indexOf(":");if(x<0)throw new Error(`Found invalid relative IRI '${z}' for a missing baseIRI`);return C(z,x)}const E=z.indexOf(":");if(E>=0)return C(z,E);const F=X.indexOf(":");if(F<0)throw new Error(`Found invalid baseIRI '${X}' for value '${z}'`);const W=X.substr(0,F+1);if(0===z.indexOf("//"))return W+C(z,E);let N;if(X.indexOf("//",F)===F+1){if(N=X.indexOf("/",F+3),N<0)return X.length>F+3?X+"/"+C(z,E):W+C(z,E)}else if(N=X.indexOf("/",F+1),N<0)return W+C(z,E);if(0===z.indexOf("/"))return X.substr(0,N)+Q(z);let D=X.substr(N);const se=D.lastIndexOf("/");return se>=0&&se<D.length-1&&(D=D.substr(0,se+1),"."===z[0]&&"."!==z[1]&&"/"!==z[1]&&z[2]&&(z=z.substr(1))),z=Q(z=D+z),X.substr(0,N)+z},me.removeDotSegments=Q,me.removeDotSegmentsOfPath=C},6620:(je,me,S)=>{!function(Q){Q.parser=function(R,A){return new Y(R,A)},Q.SAXParser=Y,Q.SAXStream=N,Q.createStream=function W(R,A){return new N(R,A)},Q.MAX_BUFFER_LENGTH=65536;var E,C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function Y(R,A){if(!(this instanceof Y))return new Y(R,A);var ie=this;(function X(R){for(var A=0,ie=C.length;A<ie;A++)R[C[A]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=Q.MAX_BUFFER_LENGTH,ie.opt=A||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!R,ie.noscript=!(!R&&!ie.opt.noscript),ie.state=j.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?Q.XML_ENTITIES:Q.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(oe)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),ae(ie,"onready")}Q.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(R){function A(){}return A.prototype=R,new A}),Object.keys||(Object.keys=function(R){var A=[];for(var ie in R)R.hasOwnProperty(ie)&&A.push(ie);return A}),Y.prototype={end:function(){Je(this)},write:function fe(R){var A=this;if(this.error)throw this.error;if(A.closed)return Ze(A,"Cannot write after close. Assign an onready handler.");if(null===R)return Je(A);"object"==typeof R&&(R=R.toString());for(var ie=0,J="";J=Ye(R,ie++),A.c=J,J;)switch(A.trackPosition&&(A.position++,"\n"===J?(A.line++,A.column=0):A.column++),A.state){case j.BEGIN:if(A.state=j.BEGIN_WHITESPACE,"\ufeff"===J)continue;mt(A,J);continue;case j.BEGIN_WHITESPACE:mt(A,J);continue;case j.TEXT:if(A.sawRoot&&!A.closedRoot){for(var He=ie-1;J&&"<"!==J&&"&"!==J;)(J=Ye(R,ie++))&&A.trackPosition&&(A.position++,"\n"===J?(A.line++,A.column=0):A.column++);A.textNode+=R.substring(He,ie-1)}"<"!==J||A.sawRoot&&A.closedRoot&&!A.strict?(!k(J)&&(!A.sawRoot||A.closedRoot)&&Ce(A,"Text data outside of root node."),"&"===J?A.state=j.TEXT_ENTITY:A.textNode+=J):(A.state=j.OPEN_WAKA,A.startTagPosition=A.position);continue;case j.SCRIPT:"<"===J?A.state=j.SCRIPT_ENDING:A.script+=J;continue;case j.SCRIPT_ENDING:"/"===J?A.state=j.CLOSE_TAG:(A.script+="<"+J,A.state=j.SCRIPT);continue;case j.OPEN_WAKA:"!"===J?(A.state=j.SGML_DECL,A.sgmlDecl=""):k(J)||(T($,J)?(A.state=j.OPEN_TAG,A.tagName=J):"/"===J?(A.state=j.CLOSE_TAG,A.tagName=""):"?"===J?(A.state=j.PROC_INST,A.procInstName=A.procInstBody=""):(Ce(A,"Unencoded <"),A.startTagPosition+1<A.position&&(J=new Array(A.position-A.startTagPosition).join(" ")+J),A.textNode+="<"+J,A.state=j.TEXT));continue;case j.SGML_DECL:(A.sgmlDecl+J).toUpperCase()===D?(xe(A,"onopencdata"),A.state=j.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+J==="--"?(A.state=j.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+J).toUpperCase()===se?(A.state=j.DOCTYPE,(A.doctype||A.sawRoot)&&Ce(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):">"===J?(xe(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=j.TEXT):(b(J)&&(A.state=j.SGML_DECL_QUOTED),A.sgmlDecl+=J);continue;case j.SGML_DECL_QUOTED:J===A.q&&(A.state=j.SGML_DECL,A.q=""),A.sgmlDecl+=J;continue;case j.DOCTYPE:">"===J?(A.state=j.TEXT,xe(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=J,"["===J?A.state=j.DOCTYPE_DTD:b(J)&&(A.state=j.DOCTYPE_QUOTED,A.q=J));continue;case j.DOCTYPE_QUOTED:A.doctype+=J,J===A.q&&(A.q="",A.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:A.doctype+=J,"]"===J?A.state=j.DOCTYPE:b(J)&&(A.state=j.DOCTYPE_DTD_QUOTED,A.q=J);continue;case j.DOCTYPE_DTD_QUOTED:A.doctype+=J,J===A.q&&(A.state=j.DOCTYPE_DTD,A.q="");continue;case j.COMMENT:"-"===J?A.state=j.COMMENT_ENDING:A.comment+=J;continue;case j.COMMENT_ENDING:"-"===J?(A.state=j.COMMENT_ENDED,A.comment=Ve(A.opt,A.comment),A.comment&&xe(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+J,A.state=j.COMMENT);continue;case j.COMMENT_ENDED:">"!==J?(Ce(A,"Malformed comment"),A.comment+="--"+J,A.state=j.COMMENT):A.state=j.TEXT;continue;case j.CDATA:"]"===J?A.state=j.CDATA_ENDING:A.cdata+=J;continue;case j.CDATA_ENDING:"]"===J?A.state=j.CDATA_ENDING_2:(A.cdata+="]"+J,A.state=j.CDATA);continue;case j.CDATA_ENDING_2:">"===J?(A.cdata&&xe(A,"oncdata",A.cdata),xe(A,"onclosecdata"),A.cdata="",A.state=j.TEXT):"]"===J?A.cdata+="]":(A.cdata+="]]"+J,A.state=j.CDATA);continue;case j.PROC_INST:"?"===J?A.state=j.PROC_INST_ENDING:k(J)?A.state=j.PROC_INST_BODY:A.procInstName+=J;continue;case j.PROC_INST_BODY:if(!A.procInstBody&&k(J))continue;"?"===J?A.state=j.PROC_INST_ENDING:A.procInstBody+=J;continue;case j.PROC_INST_ENDING:">"===J?(xe(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=j.TEXT):(A.procInstBody+="?"+J,A.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:T(G,J)?A.tagName+=J:(ke(A),">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:(k(J)||Ce(A,"Invalid character in tag name"),A.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:">"===J?(de(A,!0),Se(A)):(Ce(A,"Forward-slash in opening tag not followed by >"),A.state=j.ATTRIB);continue;case j.ATTRIB:if(k(J))continue;">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:T($,J)?(A.attribName=J,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME:"="===J?A.state=j.ATTRIB_VALUE:">"===J?(Ce(A,"Attribute without value"),A.attribValue=A.attribName,Be(A),de(A)):k(J)?A.state=j.ATTRIB_NAME_SAW_WHITE:T(G,J)?A.attribName+=J:Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if("="===J)A.state=j.ATTRIB_VALUE;else{if(k(J))continue;Ce(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",xe(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",">"===J?de(A):T($,J)?(A.attribName=J,A.state=j.ATTRIB_NAME):(Ce(A,"Invalid attribute name"),A.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(k(J))continue;b(J)?(A.q=J,A.state=j.ATTRIB_VALUE_QUOTED):(Ce(A,"Unquoted attribute value"),A.state=j.ATTRIB_VALUE_UNQUOTED,A.attribValue=J);continue;case j.ATTRIB_VALUE_QUOTED:if(J!==A.q){"&"===J?A.state=j.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=J;continue}Be(A),A.q="",A.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:k(J)?A.state=j.ATTRIB:">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:T($,J)?(Ce(A,"No whitespace between attributes"),A.attribName=J,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!M(J)){"&"===J?A.state=j.ATTRIB_VALUE_ENTITY_U:A.attribValue+=J;continue}Be(A),">"===J?de(A):A.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(A.tagName)">"===J?Se(A):T(G,J)?A.tagName+=J:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=j.SCRIPT):(k(J)||Ce(A,"Invalid tagname in closing tag"),A.state=j.CLOSE_TAG_SAW_WHITE);else{if(k(J))continue;ce($,J)?A.script?(A.script+="</"+J,A.state=j.SCRIPT):Ce(A,"Invalid tagname in closing tag."):A.tagName=J}continue;case j.CLOSE_TAG_SAW_WHITE:if(k(J))continue;">"===J?Se(A):Ce(A,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var ue,te;switch(A.state){case j.TEXT_ENTITY:ue=j.TEXT,te="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:ue=j.ATTRIB_VALUE_QUOTED,te="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:ue=j.ATTRIB_VALUE_UNQUOTED,te="attribValue"}if(";"===J)if(A.opt.unparsedEntities){var U=nt(A);A.entity="",A.state=ue,A.write(U)}else A[te]+=nt(A),A.entity="",A.state=ue;else T(A.entity.length?q:ee,J)?A.entity+=J:(Ce(A,"Invalid character in entity name"),A[te]+="&"+A.entity+J,A.entity="",A.state=ue);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&function z(R){for(var A=Math.max(Q.MAX_BUFFER_LENGTH,10),ie=0,J=0,He=C.length;J<He;J++){var Xe=R[C[J]].length;if(Xe>A)switch(C[J]){case"textNode":Oe(R);break;case"cdata":xe(R,"oncdata",R.cdata),R.cdata="";break;case"script":xe(R,"onscript",R.script),R.script="";break;default:Ze(R,"Max buffer length exceeded: "+C[J])}ie=Math.max(ie,Xe)}R.bufferCheckPosition=Q.MAX_BUFFER_LENGTH-ie+R.position}(A),A},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(R){Oe(R),""!==R.cdata&&(xe(R,"oncdata",R.cdata),R.cdata=""),""!==R.script&&(xe(R,"onscript",R.script),R.script="")}(this)}};try{E=S(7045).Stream}catch{E=function(){}}E||(E=function(){});var F=Q.EVENTS.filter(function(R){return"error"!==R&&"end"!==R});function N(R,A){if(!(this instanceof N))return new N(R,A);E.apply(this),this._parser=new Y(R,A),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(J){ie.emit("error",J),ie._parser.error=null},this._decoder=null,F.forEach(function(J){Object.defineProperty(ie,"on"+J,{get:function(){return ie._parser["on"+J]},set:function(He){if(!He)return ie.removeAllListeners(J),ie._parser["on"+J]=He,He;ie.on(J,He)},enumerable:!0,configurable:!1})})}(N.prototype=Object.create(E.prototype,{constructor:{value:N}})).write=function(R){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(R)){if(!this._decoder){var A=S(8454).StringDecoder;this._decoder=new A("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},N.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},N.prototype.on=function(R,A){var ie=this;return!ie._parser["on"+R]&&-1!==F.indexOf(R)&&(ie._parser["on"+R]=function(){var J=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);J.splice(0,0,R),ie.emit.apply(ie,J)}),E.prototype.on.call(ie,R,A)};var D="[CDATA[",se="DOCTYPE",x="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/2000/xmlns/",oe={xml:x,xmlns:B},$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,G=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function k(R){return" "===R||"\n"===R||"\r"===R||"\t"===R}function b(R){return'"'===R||"'"===R}function M(R){return">"===R||k(R)}function T(R,A){return R.test(A)}function ce(R,A){return!T(R,A)}var R,A,ie,j=0;for(var Me in Q.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},Q.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Q.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Q.ENTITIES).forEach(function(R){var A=Q.ENTITIES[R],ie="number"==typeof A?String.fromCharCode(A):A;Q.ENTITIES[R]=ie}),Q.STATE)Q.STATE[Q.STATE[Me]]=Me;function ae(R,A,ie){R[A]&&R[A](ie)}function xe(R,A,ie){R.textNode&&Oe(R),ae(R,A,ie)}function Oe(R){R.textNode=Ve(R.opt,R.textNode),R.textNode&&ae(R,"ontext",R.textNode),R.textNode=""}function Ve(R,A){return R.trim&&(A=A.trim()),R.normalize&&(A=A.replace(/\s+/g," ")),A}function Ze(R,A){return Oe(R),R.trackPosition&&(A+="\nLine: "+R.line+"\nColumn: "+R.column+"\nChar: "+R.c),A=new Error(A),R.error=A,ae(R,"onerror",A),R}function Je(R){return R.sawRoot&&!R.closedRoot&&Ce(R,"Unclosed root tag"),R.state!==j.BEGIN&&R.state!==j.BEGIN_WHITESPACE&&R.state!==j.TEXT&&Ze(R,"Unexpected end"),Oe(R),R.c="",R.closed=!0,ae(R,"onend"),Y.call(R,R.strict,R.opt),R}function Ce(R,A){if("object"!=typeof R||!(R instanceof Y))throw new Error("bad call to strictFail");R.strict&&Ze(R,A)}function ke(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var A=R.tags[R.tags.length-1]||R,ie=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(ie.ns=A.ns),R.attribList.length=0,xe(R,"onopentagstart",ie)}function Ae(R,A){var J=R.indexOf(":")<0?["",R]:R.split(":"),He=J[0],Xe=J[1];return A&&"xmlns"===R&&(He="xmlns",Xe=""),{prefix:He,local:Xe}}function Be(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),-1!==R.attribList.indexOf(R.attribName)||R.tag.attributes.hasOwnProperty(R.attribName))R.attribName=R.attribValue="";else{if(R.opt.xmlns){var A=Ae(R.attribName,!0),J=A.local;if("xmlns"===A.prefix)if("xml"===J&&R.attribValue!==x)Ce(R,"xml: prefix must be bound to "+x+"\nActual: "+R.attribValue);else if("xmlns"===J&&R.attribValue!==B)Ce(R,"xmlns: prefix must be bound to "+B+"\nActual: "+R.attribValue);else{var He=R.tag,Xe=R.tags[R.tags.length-1]||R;He.ns===Xe.ns&&(He.ns=Object.create(Xe.ns)),He.ns[J]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,xe(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}}function de(R,A){if(R.opt.xmlns){var ie=R.tag,J=Ae(R.tagName);ie.prefix=J.prefix,ie.local=J.local,ie.uri=ie.ns[J.prefix]||"",ie.prefix&&!ie.uri&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),ie.uri=J.prefix),ie.ns&&(R.tags[R.tags.length-1]||R).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(Qe){xe(R,"onopennamespace",{prefix:Qe,uri:ie.ns[Qe]})});for(var Xe=0,ue=R.attribList.length;Xe<ue;Xe++){var te=R.attribList[Xe],U=te[0],I=te[1],O=Ae(U,!0),he=O.prefix,Ee=""===he?"":ie.ns[he]||"",Ue={name:U,value:I,prefix:he,local:O.local,uri:Ee};he&&"xmlns"!==he&&!Ee&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(he)),Ue.uri=he),R.tag.attributes[U]=Ue,xe(R,"onattribute",Ue)}R.attribList.length=0}R.tag.isSelfClosing=!!A,R.sawRoot=!0,R.tags.push(R.tag),xe(R,"onopentag",R.tag),A||(R.state=R.noscript||"script"!==R.tagName.toLowerCase()?j.TEXT:j.SCRIPT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function Se(R){if(!R.tagName)return Ce(R,"Weird empty close tag."),R.textNode+="</>",void(R.state=j.TEXT);if(R.script){if("script"!==R.tagName)return R.script+="</"+R.tagName+">",R.tagName="",void(R.state=j.SCRIPT);xe(R,"onscript",R.script),R.script=""}var A=R.tags.length,ie=R.tagName;R.strict||(ie=ie[R.looseCase]());for(var J=ie;A--&&R.tags[A].name!==J;)Ce(R,"Unexpected close tag");if(A<0)return Ce(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",void(R.state=j.TEXT);R.tagName=ie;for(var Xe=R.tags.length;Xe-- >A;){var ue=R.tag=R.tags.pop();R.tagName=R.tag.name,xe(R,"onclosetag",R.tagName);var te={};for(var U in ue.ns)te[U]=ue.ns[U];R.opt.xmlns&&ue.ns!==(R.tags[R.tags.length-1]||R).ns&&Object.keys(ue.ns).forEach(function(O){xe(R,"onclosenamespace",{prefix:O,uri:ue.ns[O]})})}0===A&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=j.TEXT}function nt(R){var J,A=R.entity,ie=A.toLowerCase(),He="";return R.ENTITIES[A]?R.ENTITIES[A]:R.ENTITIES[ie]?R.ENTITIES[ie]:("#"===(A=ie).charAt(0)&&("x"===A.charAt(1)?(A=A.slice(2),He=(J=parseInt(A,16)).toString(16)):(A=A.slice(1),He=(J=parseInt(A,10)).toString(10))),A=A.replace(/^0+/,""),isNaN(J)||He.toLowerCase()!==A?(Ce(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(J))}function mt(R,A){"<"===A?(R.state=j.OPEN_WAKA,R.startTagPosition=R.position):k(A)||(Ce(R,"Non-whitespace before first tag."),R.textNode=A,R.state=j.TEXT)}function Ye(R,A){var ie="";return A<R.length&&(ie=R.charAt(A)),ie}j=Q.STATE,String.fromCodePoint||(R=String.fromCharCode,A=Math.floor,ie=function(){var He=[],te=-1,U=arguments.length;if(!U)return"";for(var I="";++te<U;){var O=Number(arguments[te]);if(!isFinite(O)||O<0||O>1114111||A(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?He.push(O):He.push(55296+((O-=65536)>>10),O%1024+56320),(te+1===U||He.length>16384)&&(I+=R.apply(null,He),He.length=0)}return I},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(me)},7140:function(){!function(je,me){"use strict";if(!je.setImmediate){var z,S=1,Q={},C=!1,Y=je.document,oe=Object.getPrototypeOf&&Object.getPrototypeOf(je);oe=oe&&oe.setTimeout?oe:je,"[object process]"==={}.toString.call(je.process)?function W(){z=function($){process.nextTick(function(){F($)})}}():function N(){if(je.postMessage&&!je.importScripts){var $=!0,G=je.onmessage;return je.onmessage=function(){$=!1},je.postMessage("","*"),je.onmessage=G,$}}()?function D(){var $="setImmediate$"+Math.random()+"$",G=function(ee){ee.source===je&&"string"==typeof ee.data&&0===ee.data.indexOf($)&&F(+ee.data.slice($.length))};je.addEventListener?je.addEventListener("message",G,!1):je.attachEvent("onmessage",G),z=function(ee){je.postMessage($+ee,"*")}}():je.MessageChannel?function se(){var $=new MessageChannel;$.port1.onmessage=function(G){F(G.data)},z=function(G){$.port2.postMessage(G)}}():Y&&"onreadystatechange"in Y.createElement("script")?function x(){var $=Y.documentElement;z=function(G){var ee=Y.createElement("script");ee.onreadystatechange=function(){F(G),ee.onreadystatechange=null,$.removeChild(ee),ee=null},$.appendChild(ee)}}():function B(){z=function($){setTimeout(F,0,$)}}(),oe.setImmediate=function X($){"function"!=typeof $&&($=new Function(""+$));for(var G=new Array(arguments.length-1),ee=0;ee<G.length;ee++)G[ee]=arguments[ee+1];return Q[S]={callback:$,args:G},z(S),S++},oe.clearImmediate=_}function _($){delete Q[$]}function F($){if(C)setTimeout(F,0,$);else{var G=Q[$];if(G){C=!0;try{!function E($){var G=$.callback,ee=$.args;switch(ee.length){case 0:G();break;case 1:G(ee[0]);break;case 2:G(ee[0],ee[1]);break;case 3:G(ee[0],ee[1],ee[2]);break;default:G.apply(undefined,ee)}}(G)}finally{_($),C=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},7045:(je,me,S)=>{je.exports=Y;var Q=S(4356).EventEmitter;function Y(){Q.call(this)}S(1993)(Y,Q),Y.Readable=S(1092),Y.Writable=S(5492),Y.Duplex=S(1030),Y.Transform=S(3410),Y.PassThrough=S(3824),Y.finished=S(7854),Y.pipeline=S(6846),Y.Stream=Y,Y.prototype.pipe=function(z,X){var _=this;function E(B){z.writable&&!1===z.write(B)&&_.pause&&_.pause()}function F(){_.readable&&_.resume&&_.resume()}_.on("data",E),z.on("drain",F),!z._isStdio&&(!X||!1!==X.end)&&(_.on("end",N),_.on("close",D));var W=!1;function N(){W||(W=!0,z.end())}function D(){W||(W=!0,"function"==typeof z.destroy&&z.destroy())}function se(B){if(x(),0===Q.listenerCount(this,"error"))throw B}function x(){_.removeListener("data",E),z.removeListener("drain",F),_.removeListener("end",N),_.removeListener("close",D),_.removeListener("error",se),z.removeListener("error",se),_.removeListener("end",x),_.removeListener("close",x),z.removeListener("close",x)}return _.on("error",se),z.on("error",se),_.on("end",x),_.on("close",x),z.on("close",x),z.emit("pipe",_),z}},464:je=>{"use strict";var S={};function Q(_,E,F){F||(F=Error);var N=function(D){function se(x,B,oe){return D.call(this,function W(D,se,x){return"string"==typeof E?E:E(D,se,x)}(x,B,oe))||this}return function me(_,E){_.prototype=Object.create(E.prototype),_.prototype.constructor=_,_.__proto__=E}(se,D),se}(F);N.prototype.name=F.name,N.prototype.code=_,S[_]=N}function C(_,E){if(Array.isArray(_)){var F=_.length;return _=_.map(function(W){return String(W)}),F>2?"one of ".concat(E," ").concat(_.slice(0,F-1).join(", "),", or ")+_[F-1]:2===F?"one of ".concat(E," ").concat(_[0]," or ").concat(_[1]):"of ".concat(E," ").concat(_[0])}return"of ".concat(E," ").concat(String(_))}Q("ERR_INVALID_OPT_VALUE",function(_,E){return'The value "'+E+'" is invalid for option "'+_+'"'},TypeError),Q("ERR_INVALID_ARG_TYPE",function(_,E,F){var W,N;if("string"==typeof E&&function Y(_,E,F){return _.substr(!F||F<0?0:+F,E.length)===E}(E,"not ")?(W="must not be",E=E.replace(/^not /,"")):W="must be",function z(_,E,F){return(void 0===F||F>_.length)&&(F=_.length),_.substring(F-E.length,F)===E}(_," argument"))N="The ".concat(_," ").concat(W," ").concat(C(E,"type"));else{var D=function X(_,E,F){return"number"!=typeof F&&(F=0),!(F+E.length>_.length)&&-1!==_.indexOf(E,F)}(_,".")?"property":"argument";N='The "'.concat(_,'" ').concat(D," ").concat(W," ").concat(C(E,"type"))}return N+". Received type ".concat(typeof F)},TypeError),Q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Q("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),Q("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Q("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),Q("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Q("ERR_STREAM_WRITE_AFTER_END","write after end"),Q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Q("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),Q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),je.exports.F=S},1030:(je,me,S)=>{"use strict";var Q=Object.keys||function(N){var D=[];for(var se in N)D.push(se);return D};je.exports=E;var C=S(1092),Y=S(5492);S(1993)(E,C);for(var z=Q(Y.prototype),X=0;X<z.length;X++){var _=z[X];E.prototype[_]||(E.prototype[_]=Y.prototype[_])}function E(N){if(!(this instanceof E))return new E(N);C.call(this,N),Y.call(this,N),this.allowHalfOpen=!0,N&&(!1===N.readable&&(this.readable=!1),!1===N.writable&&(this.writable=!1),!1===N.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(W,this)}function W(N){N.end()}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(D){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=D,this._writableState.destroyed=D)}})},3824:(je,me,S)=>{"use strict";je.exports=C;var Q=S(3410);function C(Y){if(!(this instanceof C))return new C(Y);Q.call(this,Y)}S(1993)(C,Q),C.prototype._transform=function(Y,z,X){X(null,Y)}},1092:(je,me,S)=>{"use strict";var Q;je.exports=ae,ae.ReadableState=Me,S(4356);var N,Y=function(te,U){return te.listeners(U).length},z=S(2601),X=S(3838).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},W=S(7199);N=W&&W.debuglog?W.debuglog("stream"):function(){};var k,b,M,D=S(5225),se=S(8152),B=S(2827).getHighWaterMark,oe=S(464).F,$=oe.ERR_INVALID_ARG_TYPE,G=oe.ERR_STREAM_PUSH_AFTER_EOF,ee=oe.ERR_METHOD_NOT_IMPLEMENTED,q=oe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(1993)(ae,z);var T=se.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function Me(ue,te,U){Q=Q||S(1030),"boolean"!=typeof U&&(U=te instanceof Q),this.objectMode=!!(ue=ue||{}).objectMode,U&&(this.objectMode=this.objectMode||!!ue.readableObjectMode),this.highWaterMark=B(this,ue,"readableHighWaterMark",U),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ue.emitClose,this.autoDestroy=!!ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ue.encoding&&(k||(k=S(8454).StringDecoder),this.decoder=new k(ue.encoding),this.encoding=ue.encoding)}function ae(ue){if(Q=Q||S(1030),!(this instanceof ae))return new ae(ue);this._readableState=new Me(ue,this,this instanceof Q),this.readable=!0,ue&&("function"==typeof ue.read&&(this._read=ue.read),"function"==typeof ue.destroy&&(this._destroy=ue.destroy)),z.call(this)}function xe(ue,te,U,I,O){N("readableAddChunk",te);var We,he=ue._readableState;if(null===te)he.reading=!1,function ke(ue,te){if(N("onEofChunk"),!te.ended){if(te.decoder){var U=te.decoder.end();U&&U.length&&(te.buffer.push(U),te.length+=te.objectMode?1:U.length)}te.ended=!0,te.sync?Ae(ue):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,Be(ue)))}}(ue,he);else if(O||(We=function Ve(ue,te){var U;return!function F(ue){return X.isBuffer(ue)||ue instanceof _}(te)&&"string"!=typeof te&&void 0!==te&&!ue.objectMode&&(U=new $("chunk",["string","Buffer","Uint8Array"],te)),U}(he,te)),We)T(ue,We);else if(he.objectMode||te&&te.length>0)if("string"!=typeof te&&!he.objectMode&&Object.getPrototypeOf(te)!==X.prototype&&(te=function E(ue){return X.from(ue)}(te)),I)he.endEmitted?T(ue,new q):Oe(ue,he,te,!0);else if(he.ended)T(ue,new G);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!U?(te=he.decoder.write(te),he.objectMode||0!==te.length?Oe(ue,he,te,!1):de(ue,he)):Oe(ue,he,te,!1)}else I||(he.reading=!1,de(ue,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function Oe(ue,te,U,I){te.flowing&&0===te.length&&!te.sync?(te.awaitDrain=0,ue.emit("data",U)):(te.length+=te.objectMode?1:U.length,I?te.buffer.unshift(U):te.buffer.push(U),te.needReadable&&Ae(ue)),de(ue,te)}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),ae.prototype.destroy=se.destroy,ae.prototype._undestroy=se.undestroy,ae.prototype._destroy=function(ue,te){te(ue)},ae.prototype.push=function(ue,te){var I,U=this._readableState;return U.objectMode?I=!0:"string"==typeof ue&&((te=te||U.defaultEncoding)!==U.encoding&&(ue=X.from(ue,te),te=""),I=!0),xe(this,ue,te,!1,I)},ae.prototype.unshift=function(ue){return xe(this,ue,null,!0,!1)},ae.prototype.isPaused=function(){return!1===this._readableState.flowing},ae.prototype.setEncoding=function(ue){k||(k=S(8454).StringDecoder);var te=new k(ue);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,I="";null!==U;)I+=te.write(U.data),U=U.next;return this._readableState.buffer.clear(),""!==I&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var Ze=1073741824;function Ce(ue,te){return ue<=0||0===te.length&&te.ended?0:te.objectMode?1:ue!=ue?te.flowing&&te.length?te.buffer.head.data.length:te.length:(ue>te.highWaterMark&&(te.highWaterMark=function Je(ue){return ue>=Ze?ue=Ze:(ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++),ue}(ue)),ue<=te.length?ue:te.ended?te.length:(te.needReadable=!0,0))}function Ae(ue){var te=ue._readableState;N("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(N("emitReadable",te.flowing),te.emittedReadable=!0,process.nextTick(Be,ue))}function Be(ue){var te=ue._readableState;N("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(ue.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,A(ue)}function de(ue,te){te.readingMore||(te.readingMore=!0,process.nextTick(Se,ue,te))}function Se(ue,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&0===te.length);){var U=te.length;if(N("maybeReadMore read 0"),ue.read(0),U===te.length)break}te.readingMore=!1}function mt(ue){var te=ue._readableState;te.readableListening=ue.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:ue.listenerCount("data")>0&&ue.resume()}function Ye(ue){N("readable nexttick read 0"),ue.read(0)}function R(ue,te){N("resume",te.reading),te.reading||ue.read(0),te.resumeScheduled=!1,ue.emit("resume"),A(ue),te.flowing&&!te.reading&&ue.read(0)}function A(ue){var te=ue._readableState;for(N("flow",te.flowing);te.flowing&&null!==ue.read(););}function ie(ue,te){return 0===te.length?null:(te.objectMode?U=te.buffer.shift():!ue||ue>=te.length?(U=te.decoder?te.buffer.join(""):1===te.buffer.length?te.buffer.first():te.buffer.concat(te.length),te.buffer.clear()):U=te.buffer.consume(ue,te.decoder),U);var U}function J(ue){var te=ue._readableState;N("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process.nextTick(He,te,ue))}function He(ue,te){if(N("endReadableNT",ue.endEmitted,ue.length),!ue.endEmitted&&0===ue.length&&(ue.endEmitted=!0,te.readable=!1,te.emit("end"),ue.autoDestroy)){var U=te._writableState;(!U||U.autoDestroy&&U.finished)&&te.destroy()}}function Xe(ue,te){for(var U=0,I=ue.length;U<I;U++)if(ue[U]===te)return U;return-1}ae.prototype.read=function(ue){N("read",ue),ue=parseInt(ue,10);var te=this._readableState,U=ue;if(0!==ue&&(te.emittedReadable=!1),0===ue&&te.needReadable&&((0!==te.highWaterMark?te.length>=te.highWaterMark:te.length>0)||te.ended))return N("read: emitReadable",te.length,te.ended),0===te.length&&te.ended?J(this):Ae(this),null;if(0===(ue=Ce(ue,te))&&te.ended)return 0===te.length&&J(this),null;var O,I=te.needReadable;return N("need readable",I),(0===te.length||te.length-ue<te.highWaterMark)&&N("length less than watermark",I=!0),te.ended||te.reading?N("reading or ended",I=!1):I&&(N("do read"),te.reading=!0,te.sync=!0,0===te.length&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(ue=Ce(U,te))),null===(O=ue>0?ie(ue,te):null)?(te.needReadable=te.length<=te.highWaterMark,ue=0):(te.length-=ue,te.awaitDrain=0),0===te.length&&(te.ended||(te.needReadable=!0),U!==ue&&te.ended&&J(this)),null!==O&&this.emit("data",O),O},ae.prototype._read=function(ue){T(this,new ee("_read()"))},ae.prototype.pipe=function(ue,te){var U=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=ue;break;case 1:I.pipes=[I.pipes,ue];break;default:I.pipes.push(ue)}I.pipesCount+=1,N("pipe count=%d opts=%j",I.pipesCount,te);var he=te&&!1===te.end||ue===process.stdout||ue===process.stderr?H:Ee;function Ee(){N("onend"),ue.end()}I.endEmitted?process.nextTick(he):U.once("end",he),ue.on("unpipe",function We(ne,Le){N("onunpipe"),ne===U&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,function vt(){N("cleanup"),ue.removeListener("close",Lt),ue.removeListener("finish",pe),ue.removeListener("drain",Ue),ue.removeListener("error",wt),ue.removeListener("unpipe",We),U.removeListener("end",Ee),U.removeListener("end",H),U.removeListener("data",Rt),Qe=!0,I.awaitDrain&&(!ue._writableState||ue._writableState.needDrain)&&Ue()}())});var Ue=function nt(ue){return function(){var U=ue._readableState;N("pipeOnDrain",U.awaitDrain),U.awaitDrain&&U.awaitDrain--,0===U.awaitDrain&&Y(ue,"data")&&(U.flowing=!0,A(ue))}}(U);ue.on("drain",Ue);var Qe=!1;function Rt(ne){N("ondata");var Le=ue.write(ne);N("dest.write",Le),!1===Le&&((1===I.pipesCount&&I.pipes===ue||I.pipesCount>1&&-1!==Xe(I.pipes,ue))&&!Qe&&(N("false write response, pause",I.awaitDrain),I.awaitDrain++),U.pause())}function wt(ne){N("onerror",ne),H(),ue.removeListener("error",wt),0===Y(ue,"error")&&T(ue,ne)}function Lt(){ue.removeListener("finish",pe),H()}function pe(){N("onfinish"),ue.removeListener("close",Lt),H()}function H(){N("unpipe"),U.unpipe(ue)}return U.on("data",Rt),function j(ue,te,U){if("function"==typeof ue.prependListener)return ue.prependListener(te,U);ue._events&&ue._events[te]?Array.isArray(ue._events[te])?ue._events[te].unshift(U):ue._events[te]=[U,ue._events[te]]:ue.on(te,U)}(ue,"error",wt),ue.once("close",Lt),ue.once("finish",pe),ue.emit("pipe",U),I.flowing||(N("pipe resume"),U.resume()),ue},ae.prototype.unpipe=function(ue){var te=this._readableState,U={hasUnpiped:!1};if(0===te.pipesCount)return this;if(1===te.pipesCount)return ue&&ue!==te.pipes||(ue||(ue=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,ue&&ue.emit("unpipe",this,U)),this;if(!ue){var I=te.pipes,O=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var he=0;he<O;he++)I[he].emit("unpipe",this,{hasUnpiped:!1});return this}var We=Xe(te.pipes,ue);return-1===We||(te.pipes.splice(We,1),te.pipesCount-=1,1===te.pipesCount&&(te.pipes=te.pipes[0]),ue.emit("unpipe",this,U)),this},ae.prototype.addListener=ae.prototype.on=function(ue,te){var U=z.prototype.on.call(this,ue,te),I=this._readableState;return"data"===ue?(I.readableListening=this.listenerCount("readable")>0,!1!==I.flowing&&this.resume()):"readable"===ue&&!I.endEmitted&&!I.readableListening&&(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,N("on readable",I.length,I.reading),I.length?Ae(this):I.reading||process.nextTick(Ye,this)),U},ae.prototype.removeListener=function(ue,te){var U=z.prototype.removeListener.call(this,ue,te);return"readable"===ue&&process.nextTick(mt,this),U},ae.prototype.removeAllListeners=function(ue){var te=z.prototype.removeAllListeners.apply(this,arguments);return("readable"===ue||void 0===ue)&&process.nextTick(mt,this),te},ae.prototype.resume=function(){var ue=this._readableState;return ue.flowing||(N("resume"),ue.flowing=!ue.readableListening,function fe(ue,te){te.resumeScheduled||(te.resumeScheduled=!0,process.nextTick(R,ue,te))}(this,ue)),ue.paused=!1,this},ae.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ae.prototype.wrap=function(ue){var te=this,U=this._readableState,I=!1;for(var O in ue.on("end",function(){if(N("wrapped end"),U.decoder&&!U.ended){var We=U.decoder.end();We&&We.length&&te.push(We)}te.push(null)}),ue.on("data",function(We){N("wrapped data"),U.decoder&&(We=U.decoder.write(We)),U.objectMode&&null==We||!(U.objectMode||We&&We.length)||te.push(We)||(I=!0,ue.pause())}),ue)void 0===this[O]&&"function"==typeof ue[O]&&(this[O]=function(Ee){return function(){return ue[Ee].apply(ue,arguments)}}(O));for(var he=0;he<ce.length;he++)ue.on(ce[he],this.emit.bind(this,ce[he]));return this._read=function(We){N("wrapped _read",We),I&&(I=!1,ue.resume())},this},"function"==typeof Symbol&&(ae.prototype[Symbol.asyncIterator]=function(){return void 0===b&&(b=S(2683)),b(this)}),Object.defineProperty(ae.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ae.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ae.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),ae._fromList=ie,Object.defineProperty(ae.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ae.from=function(ue,te){return void 0===M&&(M=S(7765)),M(ae,ue,te)})},3410:(je,me,S)=>{"use strict";je.exports=F;var Q=S(464).F,C=Q.ERR_METHOD_NOT_IMPLEMENTED,Y=Q.ERR_MULTIPLE_CALLBACK,z=Q.ERR_TRANSFORM_ALREADY_TRANSFORMING,X=Q.ERR_TRANSFORM_WITH_LENGTH_0,_=S(1030);function E(D,se){var x=this._transformState;x.transforming=!1;var B=x.writecb;if(null===B)return this.emit("error",new Y);x.writechunk=null,x.writecb=null,null!=se&&this.push(se),B(D);var oe=this._readableState;oe.reading=!1,(oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}function F(D){if(!(this instanceof F))return new F(D);_.call(this,D),this._transformState={afterTransform:E.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,D&&("function"==typeof D.transform&&(this._transform=D.transform),"function"==typeof D.flush&&(this._flush=D.flush)),this.on("prefinish",W)}function W(){var D=this;"function"!=typeof this._flush||this._readableState.destroyed?N(this,null,null):this._flush(function(se,x){N(D,se,x)})}function N(D,se,x){if(se)return D.emit("error",se);if(null!=x&&D.push(x),D._writableState.length)throw new X;if(D._transformState.transforming)throw new z;return D.push(null)}S(1993)(F,_),F.prototype.push=function(D,se){return this._transformState.needTransform=!1,_.prototype.push.call(this,D,se)},F.prototype._transform=function(D,se,x){x(new C("_transform()"))},F.prototype._write=function(D,se,x){var B=this._transformState;if(B.writecb=x,B.writechunk=D,B.writeencoding=se,!B.transforming){var oe=this._readableState;(B.needTransform||oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}},F.prototype._read=function(D){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},F.prototype._destroy=function(D,se){_.prototype._destroy.call(this,D,function(x){se(x)})}},5492:(je,me,S)=>{"use strict";function C(A){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function R(A,ie,J){var He=A.entry;for(A.entry=null;He;){var Xe=He.callback;ie.pendingcb--,Xe(J),He=He.next}ie.corkedRequestsFree.next=A}(ie,A)}}var Y;je.exports=Me,Me.WritableState=ce;var j,z={deprecate:S(3398)},X=S(2601),_=S(3838).Buffer,E=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},N=S(8152),se=S(2827).getHighWaterMark,x=S(464).F,B=x.ERR_INVALID_ARG_TYPE,oe=x.ERR_METHOD_NOT_IMPLEMENTED,$=x.ERR_MULTIPLE_CALLBACK,G=x.ERR_STREAM_CANNOT_PIPE,ee=x.ERR_STREAM_DESTROYED,q=x.ERR_STREAM_NULL_VALUES,k=x.ERR_STREAM_WRITE_AFTER_END,b=x.ERR_UNKNOWN_ENCODING,M=N.errorOrDestroy;function T(){}function ce(A,ie,J){Y=Y||S(1030),"boolean"!=typeof J&&(J=ie instanceof Y),this.objectMode=!!(A=A||{}).objectMode,J&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=se(this,A,"writableHighWaterMark",J),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===A.decodeStrings),this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Xe){!function ke(A,ie){var J=A._writableState,He=J.sync,Xe=J.writecb;if("function"!=typeof Xe)throw new $;if(function Ce(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}(J),ie)!function Je(A,ie,J,He,Xe){--ie.pendingcb,J?(process.nextTick(Xe,He),process.nextTick(Ye,A,ie),A._writableState.errorEmitted=!0,M(A,He)):(Xe(He),A._writableState.errorEmitted=!0,M(A,He),Ye(A,ie))}(A,J,He,ie,Xe);else{var ue=Se(J)||A.destroyed;!ue&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&de(A,J),He?process.nextTick(Ae,A,J,ue,Xe):Ae(A,J,ue,Xe)}}(ie,Xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new C(this)}function Me(A){var ie=this instanceof(Y=Y||S(1030));if(!ie&&!j.call(Me,this))return new Me(A);this._writableState=new ce(A,this,ie),this.writable=!0,A&&("function"==typeof A.write&&(this._write=A.write),"function"==typeof A.writev&&(this._writev=A.writev),"function"==typeof A.destroy&&(this._destroy=A.destroy),"function"==typeof A.final&&(this._final=A.final)),X.call(this)}function Ze(A,ie,J,He,Xe,ue,te){ie.writelen=He,ie.writecb=te,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ee("write")):J?A._writev(Xe,ie.onwrite):A._write(Xe,ue,ie.onwrite),ie.sync=!1}function Ae(A,ie,J,He){J||function Be(A,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,A.emit("drain"))}(A,ie),ie.pendingcb--,He(),Ye(A,ie)}function de(A,ie){ie.bufferProcessing=!0;var J=ie.bufferedRequest;if(A._writev&&J&&J.next){var Xe=new Array(ie.bufferedRequestCount),ue=ie.corkedRequestsFree;ue.entry=J;for(var te=0,U=!0;J;)Xe[te]=J,J.isBuf||(U=!1),J=J.next,te+=1;Xe.allBuffers=U,Ze(A,ie,!0,ie.length,Xe,"",ue.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ue.next?(ie.corkedRequestsFree=ue.next,ue.next=null):ie.corkedRequestsFree=new C(ie),ie.bufferedRequestCount=0}else{for(;J;){var I=J.chunk;if(Ze(A,ie,!1,ie.objectMode?1:I.length,I,J.encoding,J.callback),J=J.next,ie.bufferedRequestCount--,ie.writing)break}null===J&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=J,ie.bufferProcessing=!1}function Se(A){return A.ending&&0===A.length&&null===A.bufferedRequest&&!A.finished&&!A.writing}function nt(A,ie){A._final(function(J){ie.pendingcb--,J&&M(A,J),ie.prefinished=!0,A.emit("prefinish"),Ye(A,ie)})}function Ye(A,ie){var J=Se(ie);if(J&&(function mt(A,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof A._final||ie.destroyed?(ie.prefinished=!0,A.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(nt,A,ie)))}(A,ie),0===ie.pendingcb&&(ie.finished=!0,A.emit("finish"),ie.autoDestroy))){var He=A._readableState;(!He||He.autoDestroy&&He.endEmitted)&&A.destroy()}return J}S(1993)(Me,X),ce.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,J=[];ie;)J.push(ie),ie=ie.next;return J},function(){try{Object.defineProperty(ce.prototype,"buffer",{get:z.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(Me,Symbol.hasInstance,{value:function(ie){return!!j.call(this,ie)||this===Me&&ie&&ie._writableState instanceof ce}})):j=function(ie){return ie instanceof this},Me.prototype.pipe=function(){M(this,new G)},Me.prototype.write=function(A,ie,J){var He=this._writableState,Xe=!1,ue=!He.objectMode&&function W(A){return _.isBuffer(A)||A instanceof E}(A);return ue&&!_.isBuffer(A)&&(A=function F(A){return _.from(A)}(A)),"function"==typeof ie&&(J=ie,ie=null),ue?ie="buffer":ie||(ie=He.defaultEncoding),"function"!=typeof J&&(J=T),He.ending?function ae(A,ie){var J=new k;M(A,J),process.nextTick(ie,J)}(this,J):(ue||function xe(A,ie,J,He){var Xe;return null===J?Xe=new q:"string"!=typeof J&&!ie.objectMode&&(Xe=new B("chunk",["string","Buffer"],J)),!Xe||(M(A,Xe),process.nextTick(He,Xe),!1)}(this,He,A,J))&&(He.pendingcb++,Xe=function Ve(A,ie,J,He,Xe,ue){if(!J){var te=function Oe(A,ie,J){return!A.objectMode&&!1!==A.decodeStrings&&"string"==typeof ie&&(ie=_.from(ie,J)),ie}(ie,He,Xe);He!==te&&(J=!0,Xe="buffer",He=te)}var U=ie.objectMode?1:He.length;ie.length+=U;var I=ie.length<ie.highWaterMark;if(I||(ie.needDrain=!0),ie.writing||ie.corked){var O=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:He,encoding:Xe,isBuf:J,callback:ue,next:null},O?O.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else Ze(A,ie,!1,U,He,Xe,ue);return I}(this,He,ue,A,ie,J)),Xe},Me.prototype.cork=function(){this._writableState.corked++},Me.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&de(this,A))},Me.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new b(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Me.prototype._write=function(A,ie,J){J(new oe("_write()"))},Me.prototype._writev=null,Me.prototype.end=function(A,ie,J){var He=this._writableState;return"function"==typeof A?(J=A,A=null,ie=null):"function"==typeof ie&&(J=ie,ie=null),null!=A&&this.write(A,ie),He.corked&&(He.corked=1,this.uncork()),He.ending||function fe(A,ie,J){ie.ending=!0,Ye(A,ie),J&&(ie.finished?process.nextTick(J):A.once("finish",J)),ie.ended=!0,A.writable=!1}(this,He,J),this},Object.defineProperty(Me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Me.prototype.destroy=N.destroy,Me.prototype._undestroy=N.undestroy,Me.prototype._destroy=function(A,ie){ie(A)}},2683:(je,me,S)=>{"use strict";var Q;function C(k,b,M){return b=function Y(k){var b=function z(k,b){if("object"!=typeof k||null===k)return k;var M=k[Symbol.toPrimitive];if(void 0!==M){var T=M.call(k,b||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(k)}(k,"string");return"symbol"==typeof b?b:String(b)}(b),b in k?Object.defineProperty(k,b,{value:M,enumerable:!0,configurable:!0,writable:!0}):k[b]=M,k}var X=S(7854),_=Symbol("lastResolve"),E=Symbol("lastReject"),F=Symbol("error"),W=Symbol("ended"),N=Symbol("lastPromise"),D=Symbol("handlePromise"),se=Symbol("stream");function x(k,b){return{value:k,done:b}}function B(k){var b=k[_];if(null!==b){var M=k[se].read();null!==M&&(k[N]=null,k[_]=null,k[E]=null,b(x(M,!1)))}}function oe(k){process.nextTick(B,k)}var G=Object.getPrototypeOf(function(){}),ee=Object.setPrototypeOf((C(Q={get stream(){return this[se]},next:function(){var b=this,M=this[F];if(null!==M)return Promise.reject(M);if(this[W])return Promise.resolve(x(void 0,!0));if(this[se].destroyed)return new Promise(function(Me,ae){process.nextTick(function(){b[F]?ae(b[F]):Me(x(void 0,!0))})});var ce,T=this[N];if(T)ce=new Promise(function $(k,b){return function(M,T){k.then(function(){b[W]?M(x(void 0,!0)):b[D](M,T)},T)}}(T,this));else{var j=this[se].read();if(null!==j)return Promise.resolve(x(j,!1));ce=new Promise(this[D])}return this[N]=ce,ce}},Symbol.asyncIterator,function(){return this}),C(Q,"return",function(){var b=this;return new Promise(function(M,T){b[se].destroy(null,function(ce){ce?T(ce):M(x(void 0,!0))})})}),Q),G);je.exports=function(b){var M,T=Object.create(ee,(C(M={},se,{value:b,writable:!0}),C(M,_,{value:null,writable:!0}),C(M,E,{value:null,writable:!0}),C(M,F,{value:null,writable:!0}),C(M,W,{value:b._readableState.endEmitted,writable:!0}),C(M,D,{value:function(j,Me){var ae=T[se].read();ae?(T[N]=null,T[_]=null,T[E]=null,j(x(ae,!1))):(T[_]=j,T[E]=Me)},writable:!0}),M));return T[N]=null,X(b,function(ce){if(ce&&"ERR_STREAM_PREMATURE_CLOSE"!==ce.code){var j=T[E];return null!==j&&(T[N]=null,T[_]=null,T[E]=null,j(ce)),void(T[F]=ce)}var Me=T[_];null!==Me&&(T[N]=null,T[_]=null,T[E]=null,Me(x(void 0,!0))),T[W]=!0}),b.on("readable",oe.bind(null,T)),T}},5225:(je,me,S)=>{"use strict";function Q(oe,$){var G=Object.keys(oe);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(oe);$&&(ee=ee.filter(function(q){return Object.getOwnPropertyDescriptor(oe,q).enumerable})),G.push.apply(G,ee)}return G}function C(oe){for(var $=1;$<arguments.length;$++){var G=null!=arguments[$]?arguments[$]:{};$%2?Q(Object(G),!0).forEach(function(ee){Y(oe,ee,G[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(G)):Q(Object(G)).forEach(function(ee){Object.defineProperty(oe,ee,Object.getOwnPropertyDescriptor(G,ee))})}return oe}function Y(oe,$,G){return($=E($))in oe?Object.defineProperty(oe,$,{value:G,enumerable:!0,configurable:!0,writable:!0}):oe[$]=G,oe}function X(oe,$){for(var G=0;G<$.length;G++){var ee=$[G];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(oe,E(ee.key),ee)}}function E(oe){var $=function F(oe,$){if("object"!=typeof oe||null===oe)return oe;var G=oe[Symbol.toPrimitive];if(void 0!==G){var ee=G.call(oe,$||"default");if("object"!=typeof ee)return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===$?String:Number)(oe)}(oe,"string");return"symbol"==typeof $?$:String($)}var N=S(3838).Buffer,se=S(3779).inspect,x=se&&se.custom||"inspect";function B(oe,$,G){N.prototype.copy.call(oe,$,G)}je.exports=function(){function oe(){(function z(oe,$){if(!(oe instanceof $))throw new TypeError("Cannot call a class as a function")})(this,oe),this.head=null,this.tail=null,this.length=0}return function _(oe,$,G){$&&X(oe.prototype,$),G&&X(oe,G),Object.defineProperty(oe,"prototype",{writable:!1})}(oe,[{key:"push",value:function(G){var ee={data:G,next:null};this.length>0?this.tail.next=ee:this.head=ee,this.tail=ee,++this.length}},{key:"unshift",value:function(G){var ee={data:G,next:this.head};0===this.length&&(this.tail=ee),this.head=ee,++this.length}},{key:"shift",value:function(){if(0!==this.length){var G=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,G}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(G){if(0===this.length)return"";for(var ee=this.head,q=""+ee.data;ee=ee.next;)q+=G+ee.data;return q}},{key:"concat",value:function(G){if(0===this.length)return N.alloc(0);for(var ee=N.allocUnsafe(G>>>0),q=this.head,k=0;q;)B(q.data,ee,k),k+=q.data.length,q=q.next;return ee}},{key:"consume",value:function(G,ee){var q;return G<this.head.data.length?(q=this.head.data.slice(0,G),this.head.data=this.head.data.slice(G)):q=G===this.head.data.length?this.shift():ee?this._getString(G):this._getBuffer(G),q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(G){var ee=this.head,q=1,k=ee.data;for(G-=k.length;ee=ee.next;){var b=ee.data,M=G>b.length?b.length:G;if(k+=M===b.length?b:b.slice(0,G),0==(G-=M)){M===b.length?(++q,this.head=ee.next?ee.next:this.tail=null):(this.head=ee,ee.data=b.slice(M));break}++q}return this.length-=q,k}},{key:"_getBuffer",value:function(G){var ee=N.allocUnsafe(G),q=this.head,k=1;for(q.data.copy(ee),G-=q.data.length;q=q.next;){var b=q.data,M=G>b.length?b.length:G;if(b.copy(ee,ee.length-G,0,M),0==(G-=M)){M===b.length?(++k,this.head=q.next?q.next:this.tail=null):(this.head=q,q.data=b.slice(M));break}++k}return this.length-=k,ee}},{key:x,value:function(G,ee){return se(this,C(C({},ee),{},{depth:0,customInspect:!1}))}}]),oe}()},8152:je=>{"use strict";function S(X,_){Y(X,_),Q(X)}function Q(X){X._writableState&&!X._writableState.emitClose||X._readableState&&!X._readableState.emitClose||X.emit("close")}function Y(X,_){X.emit("error",_)}je.exports={destroy:function me(X,_){var E=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(X):X&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Y,this,X)):process.nextTick(Y,this,X)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(X||null,function(N){!_&&N?E._writableState?E._writableState.errorEmitted?process.nextTick(Q,E):(E._writableState.errorEmitted=!0,process.nextTick(S,E,N)):process.nextTick(S,E,N):_?(process.nextTick(Q,E),_(N)):process.nextTick(Q,E)}),this)},undestroy:function C(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function z(X,_){var E=X._readableState,F=X._writableState;E&&E.autoDestroy||F&&F.autoDestroy?X.destroy(_):X.emit("error",_)}}},7854:(je,me,S)=>{"use strict";var Q=S(464).F.ERR_STREAM_PREMATURE_CLOSE;function Y(){}je.exports=function X(_,E,F){if("function"==typeof E)return X(_,null,E);E||(E={}),F=function C(_){var E=!1;return function(){if(!E){E=!0;for(var F=arguments.length,W=new Array(F),N=0;N<F;N++)W[N]=arguments[N];_.apply(this,W)}}}(F||Y);var W=E.readable||!1!==E.readable&&_.readable,N=E.writable||!1!==E.writable&&_.writable,D=function(){_.writable||x()},se=_._writableState&&_._writableState.finished,x=function(){N=!1,se=!0,W||F.call(_)},B=_._readableState&&_._readableState.endEmitted,oe=function(){W=!1,B=!0,N||F.call(_)},$=function(k){F.call(_,k)},G=function(){var k;return W&&!B?((!_._readableState||!_._readableState.ended)&&(k=new Q),F.call(_,k)):N&&!se?((!_._writableState||!_._writableState.ended)&&(k=new Q),F.call(_,k)):void 0},ee=function(){_.req.on("finish",x)};return function z(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",x),_.on("abort",G),_.req?ee():_.on("request",ee)):N&&!_._writableState&&(_.on("end",D),_.on("close",D)),_.on("end",oe),_.on("finish",x),!1!==E.error&&_.on("error",$),_.on("close",G),function(){_.removeListener("complete",x),_.removeListener("abort",G),_.removeListener("request",ee),_.req&&_.req.removeListener("finish",x),_.removeListener("end",D),_.removeListener("close",D),_.removeListener("finish",x),_.removeListener("end",oe),_.removeListener("error",$),_.removeListener("close",G)}}},7765:je=>{je.exports=function(){throw new Error("Readable.from is not available in the browser")}},6846:(je,me,S)=>{"use strict";var Q,Y=S(464).F,z=Y.ERR_MISSING_ARGS,X=Y.ERR_STREAM_DESTROYED;function _(x){if(x)throw x}function W(x){x()}function N(x,B){return x.pipe(B)}je.exports=function se(){for(var x=arguments.length,B=new Array(x),oe=0;oe<x;oe++)B[oe]=arguments[oe];var $=function D(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():_}(B);if(Array.isArray(B[0])&&(B=B[0]),B.length<2)throw new z("streams");var G,ee=B.map(function(q,k){var b=k<B.length-1;return function F(x,B,oe,$){$=function C(x){var B=!1;return function(){B||(B=!0,x.apply(void 0,arguments))}}($);var G=!1;x.on("close",function(){G=!0}),void 0===Q&&(Q=S(7854)),Q(x,{readable:B,writable:oe},function(q){if(q)return $(q);G=!0,$()});var ee=!1;return function(q){if(!G&&!ee){if(ee=!0,function E(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();$(q||new X("pipe"))}}}(q,b,k>0,function(T){G||(G=T),T&&ee.forEach(W),!b&&(ee.forEach(W),$(G))})});return B.reduce(N)}},2827:(je,me,S)=>{"use strict";var Q=S(464).F.ERR_INVALID_OPT_VALUE;je.exports={getHighWaterMark:function Y(z,X,_,E){var F=function C(z,X,_){return null!=z.highWaterMark?z.highWaterMark:X?z[_]:null}(X,E,_);if(null!=F){if(!isFinite(F)||Math.floor(F)!==F||F<0)throw new Q(E?_:"highWaterMark",F);return Math.floor(F)}return z.objectMode?16:16384}}},2601:(je,me,S)=>{je.exports=S(4356).EventEmitter},8454:(je,me,S)=>{"use strict";var Q=S(4272).Buffer,C=Q.isEncoding||function(ee){switch((ee=""+ee)&&ee.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function X(ee){var q;switch(this.encoding=function z(ee){var q=function Y(ee){if(!ee)return"utf8";for(var q;;)switch(ee){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ee;default:if(q)return;ee=(""+ee).toLowerCase(),q=!0}}(ee);if("string"!=typeof q&&(Q.isEncoding===C||!C(ee)))throw new Error("Unknown encoding: "+ee);return q||ee}(ee),this.encoding){case"utf16le":this.text=se,this.end=x,q=4;break;case"utf8":this.fillLast=W,q=4;break;case"base64":this.text=B,this.end=oe,q=3;break;default:return this.write=$,void(this.end=G)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(q)}function _(ee){return ee<=127?0:ee>>5==6?2:ee>>4==14?3:ee>>3==30?4:ee>>6==2?-1:-2}function W(ee){var q=this.lastTotal-this.lastNeed,k=function F(ee,q,k){if(128!=(192&q[0]))return ee.lastNeed=0,"\ufffd";if(ee.lastNeed>1&&q.length>1){if(128!=(192&q[1]))return ee.lastNeed=1,"\ufffd";if(ee.lastNeed>2&&q.length>2&&128!=(192&q[2]))return ee.lastNeed=2,"\ufffd"}}(this,ee);return void 0!==k?k:this.lastNeed<=ee.length?(ee.copy(this.lastChar,q,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ee.copy(this.lastChar,q,0,ee.length),void(this.lastNeed-=ee.length))}function se(ee,q){if((ee.length-q)%2==0){var k=ee.toString("utf16le",q);if(k){var b=k.charCodeAt(k.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ee[ee.length-1],ee.toString("utf16le",q,ee.length-1)}function x(ee){var q=ee&&ee.length?this.write(ee):"";return this.lastNeed?q+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):q}function B(ee,q){var k=(ee.length-q)%3;return 0===k?ee.toString("base64",q):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=ee[ee.length-1]:(this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1]),ee.toString("base64",q,ee.length-k))}function oe(ee){var q=ee&&ee.length?this.write(ee):"";return this.lastNeed?q+this.lastChar.toString("base64",0,3-this.lastNeed):q}function $(ee){return ee.toString(this.encoding)}function G(ee){return ee&&ee.length?this.write(ee):""}me.StringDecoder=X,X.prototype.write=function(ee){if(0===ee.length)return"";var q,k;if(this.lastNeed){if(void 0===(q=this.fillLast(ee)))return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<ee.length?q?q+this.text(ee,k):this.text(ee,k):q||""},X.prototype.end=function D(ee){var q=ee&&ee.length?this.write(ee):"";return this.lastNeed?q+"\ufffd":q},X.prototype.text=function N(ee,q){var k=function E(ee,q,k){var b=q.length-1;if(b<k)return 0;var M=_(q[b]);return M>=0?(M>0&&(ee.lastNeed=M-1),M):--b<k||-2===M?0:(M=_(q[b]))>=0?(M>0&&(ee.lastNeed=M-2),M):--b<k||-2===M?0:(M=_(q[b]))>=0?(M>0&&(2===M?M=0:ee.lastNeed=M-3),M):0}(this,ee,q);if(!this.lastNeed)return ee.toString("utf8",q);this.lastTotal=k;var b=ee.length-(k-this.lastNeed);return ee.copy(this.lastChar,0,b),ee.toString("utf8",q,b)},X.prototype.fillLast=function(ee){if(this.lastNeed<=ee.length)return ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ee.length),this.lastNeed-=ee.length}},4272:(je,me,S)=>{var Q=S(3838),C=Q.Buffer;function Y(X,_){for(var E in X)_[E]=X[E]}function z(X,_,E){return C(X,_,E)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?je.exports=Q:(Y(Q,me),me.Buffer=z),z.prototype=Object.create(C.prototype),Y(C,z),z.from=function(X,_,E){if("number"==typeof X)throw new TypeError("Argument must not be a number");return C(X,_,E)},z.alloc=function(X,_,E){if("number"!=typeof X)throw new TypeError("Argument must be a number");var F=C(X);return void 0!==_?"string"==typeof E?F.fill(_,E):F.fill(_):F.fill(0),F},z.allocUnsafe=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return C(X)},z.allocUnsafeSlow=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return Q.SlowBuffer(X)}},3398:je=>{function S(Q){try{if(!global.localStorage)return!1}catch{return!1}var C=global.localStorage[Q];return null!=C&&"true"===String(C).toLowerCase()}je.exports=function me(Q,C){if(S("noDeprecation"))return Q;var Y=!1;return function z(){if(!Y){if(S("throwDeprecation"))throw new Error(C);S("traceDeprecation")?console.trace(C):console.warn(C),Y=!0}return Q.apply(this,arguments)}}},8822:je=>{"use strict";je.exports=function(me){me.prototype[Symbol.iterator]=function*(){for(let S=this.head;S;S=S.next)yield S.value}}},3748:(je,me,S)=>{"use strict";function Q(_){var E=this;if(E instanceof Q||(E=new Q),E.tail=null,E.head=null,E.length=0,_&&"function"==typeof _.forEach)_.forEach(function(N){E.push(N)});else if(arguments.length>0)for(var F=0,W=arguments.length;F<W;F++)E.push(arguments[F]);return E}function C(_,E,F){var W=E===_.head?new X(F,null,E,_):new X(F,E,E.next,_);return null===W.next&&(_.tail=W),null===W.prev&&(_.head=W),_.length++,W}function Y(_,E){_.tail=new X(E,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function z(_,E){_.head=new X(E,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function X(_,E,F,W){if(!(this instanceof X))return new X(_,E,F,W);this.list=W,this.value=_,E?(E.next=this,this.prev=E):this.prev=null,F?(F.prev=this,this.next=F):this.next=null}je.exports=Q,Q.Node=X,Q.create=Q,Q.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var E=_.next,F=_.prev;return E&&(E.prev=F),F&&(F.next=E),_===this.head&&(this.head=E),_===this.tail&&(this.tail=F),_.list.length--,_.next=null,_.prev=null,_.list=null,E},Q.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var E=this.head;_.list=this,_.next=E,E&&(E.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},Q.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var E=this.tail;_.list=this,_.prev=E,E&&(E.next=_),this.tail=_,this.head||(this.head=_),this.length++}},Q.prototype.push=function(){for(var _=0,E=arguments.length;_<E;_++)Y(this,arguments[_]);return this.length},Q.prototype.unshift=function(){for(var _=0,E=arguments.length;_<E;_++)z(this,arguments[_]);return this.length},Q.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},Q.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},Q.prototype.forEach=function(_,E){E=E||this;for(var F=this.head,W=0;null!==F;W++)_.call(E,F.value,W,this),F=F.next},Q.prototype.forEachReverse=function(_,E){E=E||this;for(var F=this.tail,W=this.length-1;null!==F;W--)_.call(E,F.value,W,this),F=F.prev},Q.prototype.get=function(_){for(var E=0,F=this.head;null!==F&&E<_;E++)F=F.next;if(E===_&&null!==F)return F.value},Q.prototype.getReverse=function(_){for(var E=0,F=this.tail;null!==F&&E<_;E++)F=F.prev;if(E===_&&null!==F)return F.value},Q.prototype.map=function(_,E){E=E||this;for(var F=new Q,W=this.head;null!==W;)F.push(_.call(E,W.value,this)),W=W.next;return F},Q.prototype.mapReverse=function(_,E){E=E||this;for(var F=new Q,W=this.tail;null!==W;)F.push(_.call(E,W.value,this)),W=W.prev;return F},Q.prototype.reduce=function(_,E){var F,W=this.head;if(arguments.length>1)F=E;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");W=this.head.next,F=this.head.value}for(var N=0;null!==W;N++)F=_(F,W.value,N),W=W.next;return F},Q.prototype.reduceReverse=function(_,E){var F,W=this.tail;if(arguments.length>1)F=E;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");W=this.tail.prev,F=this.tail.value}for(var N=this.length-1;null!==W;N--)F=_(F,W.value,N),W=W.prev;return F},Q.prototype.toArray=function(){for(var _=new Array(this.length),E=0,F=this.head;null!==F;E++)_[E]=F.value,F=F.next;return _},Q.prototype.toArrayReverse=function(){for(var _=new Array(this.length),E=0,F=this.tail;null!==F;E++)_[E]=F.value,F=F.prev;return _},Q.prototype.slice=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var F=new Q;if(E<_||E<0)return F;_<0&&(_=0),E>this.length&&(E=this.length);for(var W=0,N=this.head;null!==N&&W<_;W++)N=N.next;for(;null!==N&&W<E;W++,N=N.next)F.push(N.value);return F},Q.prototype.sliceReverse=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var F=new Q;if(E<_||E<0)return F;_<0&&(_=0),E>this.length&&(E=this.length);for(var W=this.length,N=this.tail;null!==N&&W>E;W--)N=N.prev;for(;null!==N&&W>_;W--,N=N.prev)F.push(N.value);return F},Q.prototype.splice=function(_,E,...F){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var W=0,N=this.head;null!==N&&W<_;W++)N=N.next;var D=[];for(W=0;N&&W<E;W++)D.push(N.value),N=this.removeNode(N);for(null===N&&(N=this.tail),N!==this.head&&N!==this.tail&&(N=N.prev),W=0;W<F.length;W++)N=C(this,N,F[W]);return D},Q.prototype.reverse=function(){for(var _=this.head,E=this.tail,F=_;null!==F;F=F.prev){var W=F.prev;F.prev=F.next,F.next=W}return this.head=E,this.tail=_,this};try{S(8822)(Q)}catch{}},1492:()=>{},2435:()=>{},7789:()=>{},3779:()=>{},7199:()=>{},7490:(je,me,S)=>{var Q=S(5172);function C(Y){var z,X;function _(F,W){try{var N=Y[F](W),D=N.value,se=D instanceof Q;Promise.resolve(se?D.v:D).then(function(x){if(se){var B="return"===F?"return":"next";if(!D.k||x.done)return _(B,x);x=Y[B](x).value}E(N.done?"return":"normal",x)},function(x){_("throw",x)})}catch(x){E("throw",x)}}function E(F,W){switch(F){case"return":z.resolve({value:W,done:!0});break;case"throw":z.reject(W);break;default:z.resolve({value:W,done:!1})}(z=z.next)?_(z.key,z.arg):X=null}this._invoke=function(F,W){return new Promise(function(N,D){var se={key:F,arg:W,resolve:N,reject:D,next:null};X?X=X.next=se:(z=X=se,_(F,W))})},"function"!=typeof Y.return&&(this.return=void 0)}C.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},C.prototype.next=function(Y){return this._invoke("next",Y)},C.prototype.throw=function(Y){return this._invoke("throw",Y)},C.prototype.return=function(Y){return this._invoke("return",Y)},je.exports=C,je.exports.__esModule=!0,je.exports.default=je.exports},5172:je=>{je.exports=function me(S,Q){this.v=S,this.k=Q},je.exports.__esModule=!0,je.exports.default=je.exports},3513:(je,me,S)=>{var Q=S(5172);je.exports=function C(Y){var z={},X=!1;function _(E,F){return X=!0,F=new Promise(function(W){W(Y[E](F))}),{done:!1,value:new Q(F,1)}}return z[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},z.next=function(E){return X?(X=!1,E):_("next",E)},"function"==typeof Y.throw&&(z.throw=function(E){if(X)throw X=!1,E;return _("throw",E)}),"function"==typeof Y.return&&(z.return=function(E){return X?(X=!1,E):_("return",E)}),z},je.exports.__esModule=!0,je.exports.default=je.exports},2881:je=>{function S(Q){function C(Y){if(Object(Y)!==Y)return Promise.reject(new TypeError(Y+" is not an object."));var z=Y.done;return Promise.resolve(Y.value).then(function(X){return{value:X,done:z}})}return(S=function(z){this.s=z,this.n=z.next}).prototype={s:null,n:null,next:function(){return C(this.n.apply(this.s,arguments))},return:function(z){var X=this.s.return;return void 0===X?Promise.resolve({value:z,done:!0}):C(X.apply(this.s,arguments))},throw:function(z){var X=this.s.return;return void 0===X?Promise.reject(z):C(X.apply(this.s,arguments))}},new S(Q)}je.exports=function me(Q){var C,Y,z,X=2;for(typeof Symbol<"u"&&(Y=Symbol.asyncIterator,z=Symbol.iterator);X--;){if(Y&&null!=(C=Q[Y]))return C.call(Q);if(z&&null!=(C=Q[z]))return new S(C.call(Q));Y="@@asyncIterator",z="@@iterator"}throw new TypeError("Object is not async iterable")},je.exports.__esModule=!0,je.exports.default=je.exports},9293:je=>{function me(Q,C,Y,z,X,_,E){try{var F=Q[_](E),W=F.value}catch(N){return void Y(N)}F.done?C(W):Promise.resolve(W).then(z,X)}je.exports=function S(Q){return function(){var C=this,Y=arguments;return new Promise(function(z,X){var _=Q.apply(C,Y);function E(W){me(_,z,X,E,F,"next",W)}function F(W){me(_,z,X,E,F,"throw",W)}E(void 0)})}},je.exports.__esModule=!0,je.exports.default=je.exports},3344:(je,me,S)=>{var Q=S(5172);je.exports=function C(Y){return new Q(Y,0)},je.exports.__esModule=!0,je.exports.default=je.exports},2958:(je,me,S)=>{var Q=S(7490);je.exports=function C(Y){return function(){return new Q(Y.apply(this,arguments))}},je.exports.__esModule=!0,je.exports.default=je.exports}},je=>{je(je.s=8707)}]);