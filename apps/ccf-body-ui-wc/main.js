(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[179],{822:Ue=>{"use strict";Ue.exports=S,Ue.exports.default=S;var _e=1e20;function S(q,_,E,N,z,P){this.fontSize=q||24,this.buffer=void 0===_?3:_,this.cutoff=N||.25,this.fontFamily=z||"sans-serif",this.fontWeight=P||"normal",this.radius=E||8;var F=this.size=this.fontSize+2*this.buffer,oe=F+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function $(q,_,E,N,z,P){for(var F=0;F<_;F++)G(q,F,_,E,N,z,P);for(var oe=0;oe<E;oe++)G(q,oe*_,1,_,N,z,P)}function G(q,_,E,N,z,P,F){var oe,x,B,se;for(P[0]=0,F[0]=-_e,F[1]=_e,oe=0;oe<N;oe++)z[oe]=q[_+oe*E];for(oe=1,x=0,B=0;oe<N;oe++){do{B=(z[oe]-z[se=P[x]]+oe*oe-se*se)/(oe-se)/2}while(B<=F[x]&&--x>-1);P[++x]=oe,F[x]=B,F[x+1]=_e}for(oe=0,x=0;oe<N;oe++){for(;F[x+1]<oe;)x++;q[_+oe*E]=z[se=P[x]]+(oe-se)*(oe-se)}}S.prototype._draw=function(q,_){var P,F,oe,x,B,se,Y,J,ee,E=this.ctx.measureText(q),N=E.width,z=2*this.buffer;_&&this.useMetrics?(B=Math.floor(E.actualBoundingBoxAscent),J=this.buffer+Math.ceil(E.actualBoundingBoxAscent),se=this.buffer,Y=this.buffer,P=(F=Math.min(this.size,Math.ceil(E.actualBoundingBoxRight-E.actualBoundingBoxLeft)))+z,oe=(x=Math.min(this.size-se,Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent)))+z,this.ctx.textBaseline="alphabetic"):(P=F=this.size,oe=x=this.size,B=19*this.fontSize/24,se=Y=0,J=this.middle,this.ctx.textBaseline="middle"),F&&x&&(this.ctx.clearRect(Y,se,F,x),this.ctx.fillText(q,this.buffer,J),ee=this.ctx.getImageData(Y,se,F,x));var W=new Uint8ClampedArray(P*oe);return function Q(q,_,E,N,z,P,F){P.fill(_e,0,_*E),F.fill(0,0,_*E);for(var oe=(_-N)/2,x=0;x<z;x++)for(var B=0;B<N;B++){var se=(x+oe)*_+B+oe,Y=q.data[4*(x*N+B)+3]/255;if(1===Y)P[se]=0,F[se]=_e;else if(0===Y)P[se]=_e,F[se]=0;else{var J=Math.max(0,.5-Y),ee=Math.max(0,Y-.5);P[se]=J*J,F[se]=ee*ee}}}(ee,P,oe,F,x,this.gridOuter,this.gridInner),$(this.gridOuter,P,oe,this.f,this.v,this.z),$(this.gridInner,P,oe,this.f,this.v,this.z),function C(q,_,E,N,z,P,F){for(var oe=0;oe<_*E;oe++){var x=Math.sqrt(N[oe])-Math.sqrt(z[oe]);q[oe]=Math.round(255-255*(x/P+F))}}(W,P,oe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:W,metrics:{width:F,height:x,sdfWidth:P,sdfHeight:oe,top:B,left:0,advance:N}}},S.prototype.draw=function(q){return this._draw(q,!1).data},S.prototype.drawWithMetrics=function(q){return this._draw(q,!0)}},2332:(Ue,_e,S)=>{"use strict";var Q={};S.r(Q),S.d(Q,{decode:()=>Zye,name:()=>Jye});var C={};S.r(C),S.d(C,{name:()=>r0e,preprocess:()=>s0e});var $={};S.r($),S.d($,{name:()=>o0e,preprocess:()=>a0e});var G={};S.r(G),S.d(G,{decode:()=>W0e,encode:()=>$0e,name:()=>G0e,preprocess:()=>z0e});var q={};S.r(q),S.d(q,{decode:()=>J0e,encode:()=>Z0e,name:()=>K0e});var _={};S.r(_),S.d(_,{decode:()=>eve,encode:()=>tve,name:()=>Q0e});var E={};S.r(E),S.d(E,{decode:()=>ive,encode:()=>rve,name:()=>nve});var N={};S.r(N),S.d(N,{delMany:()=>YOe,get:()=>WOe,setMany:()=>$Oe});var z={};S.r(z),S.d(z,{inDefaultGraph:()=>s2e,isBlankNode:()=>n2e,isDefaultGraph:()=>Hm,isLiteral:()=>i2e,isNamedNode:()=>t2e,isVariable:()=>r2e,prefix:()=>o2e,prefixes:()=>tL});let F=null,x=1;function se(n){const e=F;return F=n,e}function I(n){if((!Xe(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==x)){if(!n.producerMustRecompute(n)&&!xe(n))return n.dirty=!1,void(n.lastCleanEpoch=x);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=x}}function xe(n){Ce(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(I(t),i!==t.version))return!0}return!1}function Qe(n,e){if(function je(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ce(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Qe(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Ce(r),r.producerIndexOfThis[i]=e}}function Xe(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ce(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ke=null;function Re(n){return"function"==typeof n}function ot(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const bt=ot(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function It(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class mt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Re(i))try{i()}catch(s){e=s instanceof bt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{H(s)}catch(o){e=e??[],o instanceof bt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)H(e);else{if(e instanceof mt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&It(t,e)}remove(e){const{_finalizers:t}=this;t&&It(t,e),e instanceof mt&&e._removeParent(this)}}mt.EMPTY=(()=>{const n=new mt;return n.closed=!0,n})();const zt=mt.EMPTY;function pe(n){return n instanceof mt||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function H(n){Re(n)?n():n.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Le={setTimeout(n,e,...t){const{delegate:i}=Le;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Le;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function it(n){Le.setTimeout(()=>{const{onUnhandledError:e}=te;if(!e)throw n;e(n)})}function lt(){}const Et=Nn("C",void 0,void 0);function Nn(n,e,t){return{kind:n,value:e,error:t}}let pn=null;function wn(n){if(te.useDeprecatedSynchronousErrorHandling){const e=!pn;if(e&&(pn={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=pn;if(pn=null,t)throw i}}else n()}class Ks extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pe(e)&&e.add(this)):this.destination=Jc}static create(e,t,i){return new vi(e,t,i)}next(e){this.isStopped?ka(function Dn(n){return Nn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ka(function en(n){return Nn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ka(Et,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xr=Function.prototype.bind;function Jr(n,e){return xr.call(n,e)}class Vo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Br(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Br(i)}else Br(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Br(t)}}}class vi extends Ks{constructor(e,t,i){let r;if(super(),Re(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&te.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Jr(e.next,s),error:e.error&&Jr(e.error,s),complete:e.complete&&Jr(e.complete,s)}):r=e}this.destination=new Vo(r)}}function Br(n){te.useDeprecatedSynchronousErrorHandling?function ji(n){te.useDeprecatedSynchronousErrorHandling&&pn&&(pn.errorThrown=!0,pn.error=n)}(n):it(n)}function ka(n,e){const{onStoppedNotification:t}=te;t&&Le.setTimeout(()=>t(n,e))}const Jc={closed:!0,next:lt,error:function da(n){throw n},complete:lt},ha="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ns(n){return n}let St=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function or(n){return n&&n instanceof Ks||function tn(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}(n)&&pe(n)}(t)?t:new vi(t,i,r);return wn(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Gt(i))((r,s)=>{const o=new vi({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[ha](){return this}pipe(...t){return function Ze(n){return 0===n.length?Ns:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Gt(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Gt(n){var e;return null!==(e=n??te.Promise)&&void 0!==e?e:Promise}const Zr=ot(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Jt=(()=>{class n extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Js(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Zr}next(t){wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?zt:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,It(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new St;return t.source=this,t}}return n.create=(e,t)=>new Js(e,t),n})();class Js extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:zt}}class Ni extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function dc(n){return Re(n?.lift)}function ci(n){return e=>{if(dc(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(n,e,t,i,r){return new Ho(n,e,t,i,r)}class Ho extends Ks{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Wt(n,e){return ci((t,i)=>{let r=0;t.subscribe(ln(i,s=>{i.next(n.call(e,s,r++))}))})}function jn(n){for(let e in n)if(n[e]===jn)return e;throw Error("Could not find renamed property on target object.")}function kr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ti(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ti).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Li(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Te=jn({__forward_ref__:jn});function me(n){return n.__forward_ref__=me,n.toString=function(){return ti(this())},n}function D(n){return X(n)?n():n}function X(n){return"function"==typeof n&&n.hasOwnProperty(Te)&&n.__forward_ref__===me}function ge(n){return n&&!!n.\u0275providers}const Ye="https://g.co/ng/security#xss";class ze extends Error{constructor(e,t){super(function Tt(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Nt=jn({\u0275cmp:jn}),Ut=jn({\u0275dir:jn}),nn=jn({\u0275pipe:jn}),mn=jn({\u0275mod:jn}),ar=jn({\u0275fac:jn}),cr=jn({__NG_ELEMENT_ID__:jn}),Cs=jn({__NG_ENV_ID__:jn});function xn(n){return"string"==typeof n?n:null==n?"":String(n)}function fa(n,e){throw new ze(-201,!1)}function Zs(n,e){null==n&&function Sn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fs(n){return{providers:n.providers||[],imports:n.imports||[]}}function vp(n){return pb(n,bp)||pb(n,gb)}function pb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Si(n){return n&&(n.hasOwnProperty(n_)||n.hasOwnProperty(IS))?n[n_]:null}const bp=jn({\u0275prov:jn}),n_=jn({\u0275inj:jn}),gb=jn({ngInjectableDef:jn}),IS=jn({ngInjectorDef:jn});var ni=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ni||{});let i_;function Qs(n){const e=i_;return i_=n,e}function es(n,e,t){const i=vp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ni.Optional?null:void 0!==e?e:void fa(ti(n))}const li=globalThis;class xt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Dt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Wo={},ad="__NG_DI_FLAG__",cd="ngTempTokenPath",Qc=/\n/gm,yb="__source";let el;function tl(n){const e=el;return el=n,e}function NS(n,e=ni.Default){if(void 0===el)throw new ze(-203,!1);return null===el?es(n,void 0,e):el.get(n,e&ni.Optional?null:void 0,e)}function ut(n,e=ni.Default){return(function r_(){return i_}()||NS)(D(n),e)}function Vt(n,e=ni.Default){return ut(n,Sp(e))}function Sp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cp(n){const e=[];for(let t=0;t<n.length;t++){const i=D(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ze(900,!1);let r,s=ni.Default;for(let o=0;o<i.length;o++){const a=i[o],c=a_(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(ut(r,s))}else e.push(ut(i))}return e}function ld(n,e){return n[ad]=e,n.prototype[ad]=e,n}function a_(n){return n[ad]}function hc(n){return{toString:n}.toString()}var ud=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ud||{}),vo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vo||{});const ja={},hi=[];function eo(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Th(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];l_(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function dd(n){return 3===n||4===n||6===n}function l_(n){return 64===n.charCodeAt(0)}function hd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||bb(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function bb(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const wb="ng-template";function LS(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==eo(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function xb(n){return 4===n.type&&n.value!==wb}function FS(n,e,t){return e===(4!==n.type||t?n.value:wb)}function fd(n,e,t){let i=4;const r=n.attrs||[],s=function nl(n){for(let e=0;e<n.length;e++)if(dd(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!FS(n,c,t)||""===c&&1===e.length){if(ma(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!LS(n.attrs,l,t)){if(ma(i))return!1;o=!0}continue}const h=BS(8&i?"class":c,r,xb(n),t);if(-1===h){if(ma(i))return!1;o=!0;continue}if(""!==l){let f;f=h>s?"":r[h+1].toLowerCase();const g=8&i?f:null;if(g&&-1!==eo(g,l,0)||2&i&&l!==f){if(ma(i))return!1;o=!0}}}}else{if(!o&&!ma(i)&&!ma(c))return!1;if(o&&ma(c))continue;o=!1,i=c|1&i}}return ma(i)||o}function ma(n){return 0==(1&n)}function BS(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Mp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Tp(n,e,t=!1){for(let i=0;i<e.length;i++)if(fd(n,e[i],t))return!0;return!1}function kS(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Ab(n,e){return n?":not("+e.trim()+")":e}function jS(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ma(o)&&(e+=Ab(s,r),r=""),i=o,s=s||!ma(i);t++}return""!==r&&(e+=Ab(s,r)),e}function Fi(n){return hc(()=>{const e=pi(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ud.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vo.Emulated,styles:n.styles||hi,_:null,schemas:n.schemas||null,tView:null,id:""};Dr(t);const i=n.dependencies;return t.directiveDefs=bi(i,!1),t.pipeDefs=bi(i,!0),t.id=function HS(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function US(n){return rt(n)||At(n)}function VS(n){return null!==n}function to(n){return hc(()=>({type:n.type,bootstrap:n.bootstrap||hi,declarations:n.declarations||hi,imports:n.imports||hi,exports:n.exports||hi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sb(n,e){if(null==n)return ja;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function $t(n){return hc(()=>{const e=pi(n);return Dr(e),e})}function Ur(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function rt(n){return n[Nt]||null}function At(n){return n[Ut]||null}function yt(n){return n[nn]||null}function pi(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ja,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||hi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sb(n.inputs,e),outputs:Sb(n.outputs),debugInfo:null}}function Dr(n){n.features?.forEach(e=>e(n))}function bi(n,e){if(!n)return null;const t=e?yt:US;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(VS)}const fi=0,Ht=1,gn=2,Ci=3,no=4,Vr=5,Xn=6,gd=7,Bi=8,ts=9,fc=10,Rn=11,Mh=12,Ih=13,bo=14,Ui=15,md=16,pc=17,ya=18,_d=19,Dh=20,gc=21,il=22,wo=23,In=25,d_=1,Ua=7,mc=9,_r=10;var yd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(yd||{});function ns(n){return Array.isArray(n)&&"object"==typeof n[d_]}function is(n){return Array.isArray(n)&&!0===n[d_]}function h_(n){return 0!=(4&n.flags)}function Ki(n){return n.componentOffset>-1}function Hr(n){return 1==(1&n.flags)}function va(n){return!!n.template}function f_(n){return 0!=(512&n[gn])}function ru(n,e){return n.hasOwnProperty(ar)?n[ar]:null}class Tb{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Vi(){return Mb}function Mb(n){return n.type.prototype.ngOnChanges&&(n.setInput=$S),WS}function WS(){const n=Db(this),e=n?.current;if(e){const t=n.previous;if(t===ja)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function $S(n,e,t,i){const r=this.declaredInputs[t],s=Db(n)||function _c(n,e){return n[Ib]=e}(n,{previous:ja,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new Tb(c&&c.currentValue,e,a===ja),n[i]=e}Vi.ngInherit=!0;const Ib="__ngSimpleChanges__";function Db(n){return n[Ib]||null}const Va=function(n,e,t){};let Ha=!1;function Hi(n){for(;Array.isArray(n);)n=n[fi];return n}function Nh(n,e){return Hi(e[n])}function Tr(n,e){return Hi(e[n.index])}function Lh(n,e){return n.data[e]}function Ms(n,e){return n[e]}function xo(n,e){const t=e[n];return ns(t)?t:t[fi]}function b_(n){return 128==(128&n[gn])}function Ga(n,e){return null==e?null:n[e]}function w_(n){n[pc]=0}function Pb(n){1024&n[gn]||(n[gn]|=1024,b_(n)&&yc(n))}function Lb(n){return 9216&n[gn]||n[wo]?.dirty}function Fh(n){Lb(n)?yc(n):64&n[gn]&&(function qS(){return Ha}()?(n[gn]|=1024,yc(n)):n[fc].changeDetectionScheduler?.notify())}function yc(n){n[fc].changeDetectionScheduler?.notify();let e=n[Ci];for(;null!==e&&!(is(e)&&e[gn]&yd.HasChildViewsToRefresh||ns(e)&&8192&e[gn]);){if(is(e))e[gn]|=yd.HasChildViewsToRefresh;else if(e[gn]|=8192,!b_(e))break;e=e[Ci]}}const Tn={lFrame:M_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Bb(){return Tn.bindingsEnabled}function au(){return null!==Tn.skipHydrationRootTNode}function Mt(){return Tn.lFrame.lView}function si(){return Tn.lFrame.tView}function bd(n){return Tn.lFrame.contextLView=n,n[Bi]}function Mr(n){return Tn.lFrame.contextLView=null,n}function wi(){let n=A_();for(;null!==n&&64===n.type;)n=n.parent;return n}function A_(){return Tn.lFrame.currentTNode}function Yo(n,e){const t=Tn.lFrame;t.currentTNode=n,t.isParent=e}function wd(){return Tn.lFrame.isParent}function vc(){Tn.lFrame.isParent=!1}function Bs(){const n=Tn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qo(){return Tn.lFrame.bindingIndex++}function wc(n){const e=Tn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function QS(n,e){const t=Tn.lFrame;t.bindingIndex=t.bindingRootIndex=n,cu(e)}function cu(n){Tn.lFrame.currentDirectiveIndex=n}function Hb(){return Tn.lFrame.currentQueryIndex}function jh(n){Tn.lFrame.currentQueryIndex=n}function Gb(n){const e=n[Ht];return 2===e.type?e.declTNode:1===e.type?n[Vr]:null}function zb(n,e,t){if(t&ni.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ni.Host||(r=Gb(s),null===r||(s=s[bo],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Tn.lFrame=Wb();return i.currentTNode=e,i.lView=n,!0}function T_(n){const e=Wb(),t=n[Ht];Tn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wb(){const n=Tn.lFrame,e=null===n?null:n.child;return null===e?M_(n):e}function M_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Pp(){const n=Tn.lFrame;return Tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const $b=Pp;function Uh(){const n=Pp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ys(){return Tn.lFrame.selectedIndex}function al(n){Tn.lFrame.selectedIndex=n}function Oi(){const n=Tn.lFrame;return Lh(n.tView,n.selectedIndex)}let Kb=!0;function xd(){return Kb}function xc(n){Kb=n}function Np(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Ed(n,e,t){Jb(n,e,3,t)}function Un(n,e,t,i){(3&n[gn])===t&&Jb(n,e,t,i)}function R_(n,e){let t=n[gn];(3&t)===e&&(t&=16383,t+=1,n[gn]=t)}function Jb(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[pc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[pc]+=65536),(a<s||-1==s)&&(Zb(n,t,e,c),n[pc]=(4294901760&n[pc])+c+2),c++}function Ad(n,e){Va(4,n,e);const t=se(null);try{e.call(n)}finally{se(t),Va(5,n,e)}}function Zb(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[gn]>>14<n[pc]>>16&&(3&n[gn])===e&&(n[gn]+=16384,Ad(a,s)):Ad(a,s)}const Sd=-1;class Vh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function za(n){return n!==Sd}function lu(n){return 32767&n}function cl(n,e){let t=function ew(n){return n>>16}(n),i=e;for(;t>0;)i=i[bo],t--;return i}let Fp=!0;function Cd(n){const e=Fp;return Fp=n,e}const Bp=255,kp=5;let ll=0;const Wa={};function Hh(n,e){const t=Up(n,e);if(-1!==t)return t;const i=e[Ht];i.firstCreatePass&&(n.injectorIndex=e.length,jp(i.data,n),jp(e,null),jp(i.blueprint,null));const r=Vp(n,e),s=n.injectorIndex;if(za(r)){const o=lu(r),a=cl(r,e),c=a[Ht].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function jp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Up(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Vp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=rw(r),null===i)return Sd;if(t++,r=r[bo],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Sd}function N_(n,e,t){!function ul(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(cr)&&(i=t[cr]),null==i&&(i=t[cr]=ll++);const r=i&Bp;e.data[n+(r>>kp)]|=1<<r}(n,e,t)}function L_(n,e,t){if(t&ni.Optional||void 0!==n)return n;fa()}function F_(n,e,t,i){if(t&ni.Optional&&void 0===i&&(i=null),!(t&(ni.Self|ni.Host))){const r=n[ts],s=Qs(void 0);try{return r?r.get(e,i,t&ni.Optional):es(e,i,t&ni.Optional)}finally{Qs(s)}}return L_(i,0,t)}function tw(n,e,t,i=ni.Default,r){if(null!==n){if(2048&e[gn]&&!(i&ni.Self)){const o=function zh(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[gn]&&!(512&o[gn]);){const a=B_(s,o,t,i|ni.Self,Wa);if(a!==Wa)return a;let c=s.parent;if(!c){const l=o[Dh];if(l){const u=l.get(t,Wa,i);if(u!==Wa)return u}c=rw(o),o=o[bo]}s=c}return r}(n,e,t,i,Wa);if(o!==Wa)return o}const s=B_(n,e,t,i,Wa);if(s!==Wa)return s}return F_(e,t,i,r)}function B_(n,e,t,i,r){const s=function oC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(cr)?n[cr]:void 0;return"number"==typeof e?e>=0?e&Bp:aC:e}(t);if("function"==typeof s){if(!zb(e,n,i))return i&ni.Host?L_(r,0,i):F_(e,t,i,r);try{let o;if(o=s(i),null!=o||i&ni.Optional)return o;fa()}finally{$b()}}else if("number"==typeof s){let o=null,a=Up(n,e),c=Sd,l=i&ni.Host?e[Ui][Vr]:null;for((-1===a||i&ni.SkipSelf)&&(c=-1===a?Vp(n,e):e[a+8],c!==Sd&&Gh(i,!1)?(o=e[Ht],a=lu(c),e=cl(c,e)):a=-1);-1!==a;){const u=e[Ht];if(iw(s,a,u.data)){const h=nw(a,e,t,o,i,l);if(h!==Wa)return h}c=e[a+8],c!==Sd&&Gh(i,e[Ht].data[a+8]===l)&&iw(s,a,e)?(o=u,a=lu(c),e=cl(c,e)):a=-1}}return r}function nw(n,e,t,i,r,s){const o=e[Ht],a=o.data[n+8],u=vs(a,o,t,null==i?Ki(a)&&Fp:i!=o&&0!=(3&a.type),r&ni.Host&&s===a);return null!==u?Is(e,o,u,a):Wa}function vs(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,f=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<c&&t===m||g>=c&&m.type===t)return g}if(r){const g=o[c];if(g&&va(g)&&g.type===t)return c}return null}function Is(n,e,t,i){let r=n[t];const s=e.data;if(function Xo(n){return n instanceof Vh}(r)){const o=r;o.resolving&&function Zc(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ze(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Hn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():xn(n)}(s[t]));const a=Cd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Qs(o.injectImpl):null;zb(n,i,ni.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function D_(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Mb(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Qs(l),Cd(a),o.resolving=!1,$b()}}return r}function iw(n,e,t){return!!(t[e+(n>>kp)]&1<<n)}function Gh(n,e){return!(n&ni.Self||n&ni.Host&&e)}class Rr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return tw(this._tNode,this._lView,e,Sp(i),t)}}function aC(){return new Rr(wi(),Mt())}function ur(n){return hc(()=>{const e=n.prototype.constructor,t=e[ar]||dl(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ar]||dl(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function dl(n){return X(n)?()=>{const e=dl(D(n));return e&&e()}:ru(n)}function rw(n){const e=n[Ht],t=e.type;return 2===t?e.declTNode:1===t?n[Vr]:null}function du(n){return function sC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(dd(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(wi(),n)}const Ec="__parameters__";function Ac(n,e,t){return hc(()=>{const i=function $h(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(Ec)?c[Ec]:Object.defineProperty(c,Ec,{value:[]})[Ec];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function fl(n,e){n.forEach(t=>Array.isArray(t)?fl(t,e):e(t))}function Hp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $a(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Eo(n,e,t){let i=mu(n,e);return i>=0?n[1|i]=t:(i=~i,function Gp(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function qh(n,e){const t=mu(n,e);if(t>=0)return n[1|t]}function mu(n,e){return function cw(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const pl=ld(Ac("Optional"),8),Md=ld(Ac("SkipSelf"),4),gl=new xt("ENVIRONMENT_INITIALIZER"),yu=new xt("INJECTOR",-1),zp=new xt("INJECTOR_DEF_TYPES");class Ao{get(e,t=Wo){if(t===Wo){const i=new Error(`NullInjectorError: No provider for ${ti(e)}!`);throw i.name="NullInjectorError",i}return t}}function xC(...n){return{\u0275providers:z_(0,n),\u0275fromNgModule:!0}}function z_(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return fl(e,o=>{const a=o;Wp(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&gw(r,s),t}function gw(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];W_(r,s=>{e(s,i)})}}function Wp(n,e,t,i){if(!(n=D(n)))return!1;let r=null,s=Si(n);const o=!s&&rt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=Si(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Wp(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{fl(s.imports,u=>{Wp(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&gw(l,e)}if(!a){const l=ru(r)||(()=>new r);e({provide:r,useFactory:l,deps:hi},r),e({provide:zp,useValue:r,multi:!0},r),e({provide:gl,useValue:()=>ut(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;W_(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function W_(n,e){for(let t of n)ge(t)&&(t=t.\u0275providers),Array.isArray(t)?W_(t,e):e(t)}const EC=jn({provide:String,useValue:jn});function $_(n){return null!==n&&"object"==typeof n&&EC in n}function vu(n){return"function"==typeof n}const Y_=new xt("Set Injector scope."),Zh={},yw={};let $p;function Yp(){return void 0===$p&&($p=new Ao),$p}class xa{}class Dd extends xa{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,q_(e,o=>this.processProvider(o)),this.records.set(yu,Rd(void 0,this)),r.has("environment")&&this.records.set(xa,Rd(void 0,this));const s=this.records.get(Y_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zp,hi,ni.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=tl(this),i=Qs(void 0);try{return e()}finally{tl(t),Qs(i)}}get(e,t=Wo,i=ni.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Cs))return e[Cs](this);i=Sp(i);const s=tl(this),o=Qs(void 0);try{if(!(i&ni.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function Zo(n){return"function"==typeof n||"object"==typeof n&&n instanceof xt}(e)&&vp(e);c=l&&this.injectableDefInScope(l)?Rd(qp(e),Zh):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&ni.Self?Yp():this.parent).get(e,t=i&ni.Optional&&t===Wo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[cd]=a[cd]||[]).unshift(ti(e)),s)throw a;return function c_(n,e,t,i){const r=n[cd];throw e[yb]&&r.unshift(e[yb]),n.message=function vb(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=ti(e);if(Array.isArray(e))r=e.map(ti).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ti(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Qc,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[cd]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Qs(o),tl(s)}}resolveInjectorInitializers(){const e=tl(this),t=Qs(void 0);try{const r=this.get(gl,hi,ni.Self);for(const s of r)s()}finally{tl(e),Qs(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(ti(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processProvider(e){let t=vu(e=D(e))?e:D(e&&e.provide);const i=function CC(n){return $_(n)?Rd(void 0,n.useValue):Rd(vw(n),Zh)}(e);if(vu(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Rd(void 0,Zh,!0),r.factory=()=>Cp(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Zh&&(t.value=yw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function MC(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=D(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function qp(n){const e=vp(n),t=null!==e?e.factory:ru(n);if(null!==t)return t;if(n instanceof xt)throw new ze(204,!1);if(n instanceof Function)return function SC(n){const e=n.length;if(e>0)throw $a(e,"?"),new ze(204,!1);const t=function Xi(n){return n&&(n[bp]||n[gb])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ze(204,!1)}function vw(n,e,t){let i;if(vu(n)){const r=D(n);return ru(r)||qp(r)}if($_(n))i=()=>D(n.useValue);else if(function _w(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Cp(n.deps||[]));else if(function mw(n){return!(!n||!n.useExisting)}(n))i=()=>ut(D(n.useExisting));else{const r=D(n&&(n.useClass||n.provide));if(!function TC(n){return!!n.deps}(n))return ru(r)||qp(r);i=()=>new r(...Cp(n.deps))}return i}function Rd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function q_(n,e){for(const t of n)Array.isArray(t)?q_(t,e):t&&ge(t)?q_(t.\u0275providers,e):e(t)}function ww(n,e=null,t=null,i){const r=xw(n,e,t,i);return r.resolveInjectorInitializers(),r}function xw(n,e=null,t=null,i,r=new Set){const s=[t||hi,xC(n)];return i=i||("object"==typeof n?void 0:ti(n)),new Dd(s,e||Yp(),i||null,r)}let Z_,Ji=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Wo;static#t=this.NULL=new Ao;static create(t,i){if(Array.isArray(t))return ww({name:""},i,t,"");{const r=t.name??"";return ww({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=Dt({token:n,providedIn:"any",factory:()=>ut(yu)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();const Jp=new xt("AppId",{providedIn:"root",factory:()=>BC}),BC="ng",Aw=new xt("Platform Initializer"),Ya=new xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cc=new xt("AnimationModuleType"),Cw=new xt("CSP nonce",{providedIn:"root",factory:()=>function yl(){if(void 0!==Z_)return Z_;if(typeof document<"u")return document;throw new ze(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function eg(n){return 128==(128&n.flags)}var bl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(bl||{});const ng=/^>|^->|<!--|-->|--!>|<!-$/g,XC=/(<|>)/g,Lw="\u200b$1\u200b";const rf=new Map;let Fw=0;const sy="__ngContext__";function Rs(n,e){ns(e)?(n[sy]=e[_d],function kw(n){rf.set(n[_d],n)}(e)):n[sy]=e}let ay;function cy(n,e){return ay(n,e)}function Us(n){const e=n[Ci];return is(e)?e[Ci]:e}function wl(n){return Gw(n[Mh])}function Ln(n){return Gw(n[no])}function Gw(n){for(;null!==n&&!is(n);)n=n[no];return n}function Gr(n,e,t,i,r){if(null!=i){let s,o=!1;is(i)?s=i:ns(i)&&(o=!0,i=i[fi]);const a=Hi(i);0===n&&null!==t?null==r?Yw(e,t,a):Eu(e,t,a,r||null,!0):1===n&&null!==t?Eu(e,t,a,r||null,!0):2===n?function sg(n,e,t){const i=xl(n,e);i&&function dT(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Zw(n,e,t,i,r){const s=t[Ua];s!==Hi(t)&&Gr(e,n,i,s,r);for(let a=_r;a<t.length;a++){const c=t[a];On(c[Ht],c,n,e,i,s)}}(e,n,s,t,r)}}function qa(n,e){return n.createComment(function iy(n){return n.replace(ng,e=>e.replace(XC,Lw))}(e))}function ig(n,e,t){return n.createElement(e,t)}function Xa(n,e){const t=n[mc],i=t.indexOf(e);t.splice(i,1)}function Ld(n,e){if(n.length<=_r)return;const t=_r+e,i=n[t];if(i){const r=i[md];null!==r&&r!==n&&Xa(r,i),e>0&&(n[t-1][no]=i[no]);const s=gu(n,_r+e);!function oT(n,e){On(n,e,e[Rn],2,null,null),e[fi]=null,e[Vr]=null}(i[Ht],i);const o=s[ya];null!==o&&o.detachView(s[Ht]),i[Ci]=null,i[no]=null,i[gn]&=-129}return i}function xu(n,e){if(!(256&e[gn])){const t=e[Rn];t.destroyNode&&On(n,e,t,3,null,null),function lT(n){let e=n[Mh];if(!e)return Zi(n[Ht],n);for(;e;){let t=null;if(ns(e))t=e[Mh];else{const i=e[_r];i&&(t=i)}if(!t){for(;e&&!e[no]&&e!==n;)ns(e)&&Zi(e[Ht],e),e=e[Ci];null===e&&(e=n),ns(e)&&Zi(e[Ht],e),t=e&&e[no]}e=t}}(e)}}function Zi(n,e){if(!(256&e[gn])){e[gn]&=-129,e[gn]|=256,e[wo]&&function Pe(n){if(Ce(n),Xe(n))for(let e=0;e<n.producerNode.length;e++)Qe(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[wo]),function Ww(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Vh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];Va(4,a,c);try{c.call(a)}finally{Va(5,a,c)}}else{Va(4,r,s);try{s.call(r)}finally{Va(5,r,s)}}}}}(n,e),function Er(n,e){const t=n.cleanup,i=e[gd];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[gd]=null);const r=e[gc];if(null!==r){e[gc]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[Ht].type&&e[Rn].destroy();const t=e[md];if(null!==t&&is(e[Ci])){t!==e[Ci]&&Xa(t,e);const i=e[ya];null!==i&&i.detachView(n)}!function KC(n){rf.delete(n[_d])}(e)}}function uy(n,e,t){return function $w(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[fi];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===vo.None||s===vo.Emulated)return null}return Tr(i,t)}}(n,e.parent,t)}function Eu(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Yw(n,e,t){n.appendChild(e,t)}function qw(n,e,t,i,r){null!==i?Eu(n,e,t,i,r):Yw(n,e,t)}function xl(n,e){return n.parentNode(e)}function Xw(n,e,t){return af(n,e,t)}let Vs,Su,af=function hy(n,e,t){return 40&n.type?Tr(n,t):null};function rg(n,e,t,i){const r=uy(n,i,e),s=e[Rn],a=Xw(i.parent||e[Vr],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)qw(s,r,t[c],a,!1);else qw(s,r,t,a,!1);void 0!==Vs&&Vs(s,i,e,t,r)}function cf(n,e){if(null!==e){const t=e.type;if(3&t)return Tr(e,n);if(4&t)return fy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return cf(n,i);{const r=n[e.index];return is(r)?fy(-1,r):Hi(r)}}if(32&t)return cy(e,n)()||Hi(n[e.index]);{const i=Kw(n,e);return null!==i?Array.isArray(i)?i[0]:cf(Us(n[Ui]),i):cf(n,e.next)}}return null}function Kw(n,e){return null!==e?n[Ui][Vr].projection[e.projection]:null}function fy(n,e){const t=_r+n+1;if(t<e.length){const i=e[t],r=i[Ht].firstChild;if(null!==r)return cf(i,r)}return e[Ua]}function Ea(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Rs(Hi(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Ea(n,e,t.child,i,r,s,!1),Gr(e,n,r,a,s);else if(32&c){const l=cy(t,i);let u;for(;u=l();)Gr(e,n,r,u,s);Gr(e,n,r,a,s)}else 16&c?Co(n,e,i,t,r,s):Gr(e,n,r,a,s);t=o?t.projectionNext:t.next}}function On(n,e,t,i,r,s){Ea(t,i,n.firstChild,e,r,s,!1)}function Co(n,e,t,i,r,s){const o=t[Ui],c=o[Vr].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Gr(e,n,r,c[l],s);else{let l=c;const u=o[Ci];eg(i)&&(l.flags|=128),Ea(n,e,l,u,r,s,!0)}}function Qw(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gy(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Th(n,e,i),null!==r&&Qw(n,e,r),null!==s&&function xi(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Fd(n){return function my(){if(void 0===Su&&(Su=null,li.trustedTypes))try{Su=li.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Su}()?.createHTML(n)||n}class Cu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ye})`}}class _T extends Cu{getTypeName(){return"HTML"}}class yy extends Cu{getTypeName(){return"Style"}}class yT extends Cu{getTypeName(){return"Script"}}class vy extends Cu{getTypeName(){return"URL"}}class vT extends Cu{getTypeName(){return"ResourceURL"}}function To(n){return n instanceof Cu?n.changingThisBreaksApplicationSecurity:n}function Ka(n,e){const t=function rs(n){return n instanceof Cu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ye})`)}return t===e}class ET{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Fd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class AT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Fd(e),t}}const ST=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ag(n){return(n=String(n)).match(ST)?n:"unsafe:"+n}function Mc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Bd(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const by=Mc("area,br,col,hr,img,wbr"),ox=Mc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ax=Mc("rp,rt"),wy=Bd(by,Bd(ox,Mc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bd(ax,Mc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bd(ax,ox)),xy=Mc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cx=Bd(xy,Mc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lx=Mc("script,style,template");class ux{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!wy.hasOwnProperty(t))return this.sanitizedSomething=!0,!lx.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!cx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;xy[a]&&(c=ag(c)),this.buf.push(" ",o,'="',dx(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();wy.hasOwnProperty(t)&&!by.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const CT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TT=/([^\#-~ |!])/g;function dx(n){return n.replace(/&/g,"&amp;").replace(CT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(TT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cg;function hx(n,e){let t=null;try{cg=cg||function rx(n){const e=new AT(n);return function sx(){try{return!!(new window.DOMParser).parseFromString(Fd(""),"text/html")}catch{return!1}}()?new ET(e):e}(n);let i=e?String(e):"";t=cg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=cg.getInertBodyElement(i)}while(i!==s);return Fd((new ux).sanitizeChildren(Ey(t)||t))}finally{if(t){const i=Ey(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Ey(n){return"content"in n&&function MT(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var bs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bs||{});function Ay(n){const e=function uf(){const n=Mt();return n&&n[fc].sanitizer}();return e?e.sanitize(bs.URL,n)||"":Ka(n,"URL")?To(n):ag(xn(n))}class LT{}let mx=(n,e,t)=>null;function pf(n,e,t=!1){return mx(n,e,t)}class HT{}class vx{}class zT{resolveComponentFactory(e){throw function GT(n){const e=Error(`No component factory found for ${ti(n)}.`);return e.ngComponent=n,e}(e)}}let El=(()=>{class n{static#e=this.NULL=new zT}return n})();function WT(){return Ud(wi(),Mt())}function Ud(n,e){return new ui(Tr(n,e))}let ui=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=WT}return n})();function $T(n){return n instanceof ui?n.nativeElement:n}class wx{}let Ic=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function qT(){const n=Mt(),t=xo(wi().index,n);return(ns(t)?t:n)[Rn]}()}return n})(),XT=(()=>{class n{static#e=this.\u0275prov=Dt({token:n,providedIn:"root",factory:()=>null})}return n})();const Oy={};function d(n){const e=se(null);try{return n()}finally{se(e)}}function y(n){return!!Be(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Be(n){return null!==n&&("function"==typeof n||"object"==typeof n)}class et{constructor(){}supports(e){return y(e)}create(e){return new pt(e)}}const ct=(n,e)=>e;class pt{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ct}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Yt(i,r,s)?t:i,a=Yt(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<l&&(s[f]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!y(e))throw new ze(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function be(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Rt(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Bt),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Rt{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ot{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Bt{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ot,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yt(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class cn{constructor(){}supports(e){return e instanceof Map||Be(e)}create(){return new Cn}}class Cn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Be(e)))throw new ze(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Gn(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Gn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function An(){return new zn([new et])}let zn=(()=>{class n{static#e=this.\u0275prov=Dt({token:n,providedIn:"root",factory:An});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||An()),deps:[[n,new Md,new pl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ze(901,!1)}}return n})();function ao(){return new zr([new cn])}let zr=(()=>{class n{static#e=this.\u0275prov=Dt({token:n,providedIn:"root",factory:ao});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||ao()),deps:[[n,new Md,new pl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ze(901,!1)}}return n})();function Qi(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(Hi(s)),is(s)&&Qo(s,i);const o=t.type;if(8&o)Qi(n,e,t.child,i);else if(32&o){const a=cy(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=Kw(e,t);if(Array.isArray(a))i.push(...a);else{const c=Us(e[Ui]);Qi(c[Ht],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function Qo(n,e){for(let t=_r;t<n.length;t++){const i=n[t],r=i[Ht].firstChild;null!==r&&Qi(i[Ht],i,r,e)}n[Ua]!==n[fi]&&e.push(n[Ua])}let Ja=[];const Iq={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{yc(n.lView)},consumerOnSignalRead(){this.lView[wo]=this}};function JT(n){return n.ngOriginalError}class Aa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&JT(e);for(;t&&JT(t);)t=JT(t);return t||null}}const NF=new xt("",{providedIn:"root",factory:()=>Vt(Aa).handleError.bind(void 0)}),FF=new xt("",{providedIn:"root",factory:()=>!1}),Vn={};function Jn(n){UF(si(),Mt(),ys()+n,!1)}function UF(n,e,t,i){if(!i)if(3==(3&e[gn])){const s=n.preOrderCheckHooks;null!==s&&Ed(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Un(e,s,0,t)}al(t)}function at(n,e=ni.Default){const t=Mt();return null===t?ut(n,e):tw(wi(),t,D(n),e)}function Ax(n,e,t,i,r,s,o,a,c,l,u){const h=e.blueprint.slice();return h[fi]=r,h[gn]=204|i,(null!==l||n&&2048&n[gn])&&(h[gn]|=2048),w_(h),h[Ci]=h[bo]=n,h[Bi]=t,h[fc]=o||n&&n[fc],h[Rn]=a||n&&n[Rn],h[ts]=c||n&&n[ts]||null,h[Vr]=s,h[_d]=function Bw(){return Fw++}(),h[Xn]=u,h[Dh]=l,h[Ui]=2==e.type?n[Ui]:h,h}function pg(n,e,t,i,r){let s=n.data[e];if(null===s)s=function ZT(n,e,t,i,r){const s=A_(),o=wd(),c=n.data[e]=function Hq(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return au()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function kh(){return Tn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function io(){const n=Tn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Yo(s,!0),s}function Py(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function HF(n,e,t,i,r){const s=ys(),o=2&i;try{al(-1),o&&e.length>In&&UF(n,e,In,!1),Va(o?2:0,r),t(i,r)}finally{al(s),Va(o?3:1,r)}}function QT(n,e,t){if(h_(e)){const i=se(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{se(i)}}}function eM(n,e,t){Bb()&&(function Xq(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;Ki(t)&&function nX(n,e,t){const i=Tr(e,n),r=GF(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Sx(n,Ax(n,r,null,o,i,e,null,n[fc].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Hh(t,e),Rs(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=Is(e,n,a,t);Rs(l,e),null!==o&&iX(0,a-r,l,c,0,o),va(c)&&(xo(t.index,e)[Bi]=Is(e,n,a,t))}}(n,e,t,Tr(t,e)),64==(64&t.flags)&&qF(n,e,t))}function tM(n,e,t=Tr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function GF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=nM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function nM(n,e,t,i,r,s,o,a,c,l,u){const h=In+i,f=h+r,g=function Fq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Vn);return t}(h,f),m="function"==typeof l?l():l;return g[Ht]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}let zF=n=>null;function WF(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?$F(t,e,r,s):i.hasOwnProperty(r)&&$F(t,e,i[r],s)}return t}function $F(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Sa(n,e,t,i,r,s,o,a){const c=Tr(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(aM(n,t,u,i,r),Ki(e)&&function Wq(n,e){const t=xo(e,n);16&t[gn]||(t[gn]|=64)}(t,e.index)):3&e.type&&(i=function zq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function iM(n,e,t,i){if(Bb()){const r=null===i?null:{"":-1},s=function Jq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Tp(e,o.selectors,!1))if(i||(i=[]),va(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),rM(n,e,a.length)}else i.unshift(o),rM(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&YF(n,e,t,o,r,a),r&&function Zq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ze(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=hd(t.mergedAttrs,t.attrs)}function YF(n,e,t,i,r,s){for(let l=0;l<i.length;l++)N_(Hh(t,e),n,i[l].type);!function eX(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Py(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=hd(t.mergedAttrs,u.hostAttrs),tX(n,t,e,c,u),Qq(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Gq(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],f=t?t.get(h):null,m=f?f.outputs:null;c=WF(h.inputs,u,c,f?f.inputs:null),l=WF(h.outputs,u,l,m);const b=null===c||null===o||xb(e)?null:rX(c,u,o);a.push(b)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function qF(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function eC(){return Tn.lFrame.currentDirectiveIndex}();try{al(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];cu(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Kq(c,l)}}finally{al(-1),cu(o)}}function Kq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function rM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Qq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;va(e)&&(t[""]=n)}}function tX(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=ru(r.type)),o=new Vh(s,va(r),at);n.blueprint[i]=o,t[i]=o,function Yq(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function qq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Py(n,t,r.hostVars,Vn),r)}function Al(n,e,t,i,r,s){const o=Tr(n,e);!function sM(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?xn(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Rn],o,s,n.value,t,i,r)}function iX(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)XF(i,t,o[a++],o[a++],o[a++])}function XF(n,e,t,i,r){const s=se(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{se(s)}}function rX(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function KF(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function JF(n,e){const t=n.contentQueries;if(null!==t){const i=se(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];jh(t[r]),a.contentQueries(2,e[o],o)}}}finally{se(i)}}}function Sx(n,e){return n[Mh]?n[Ih][no]=e:n[Mh]=e,n[Ih]=e,e}function oM(n,e,t){jh(0);const i=se(null);try{e(n,t)}finally{se(i)}}function ZF(n){return n[gd]||(n[gd]=[])}function QF(n){return n.cleanup||(n.cleanup=[])}function Cx(n,e){const t=n[ts],i=t?t.get(Aa,null):null;i&&i.handleError(e)}function aM(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];XF(n.data[o],e[o],i,a,r)}}function aX(n,e,t,i){const r=e[gn];if(256==(256&r))return;e[fc].inlineEffectRunner?.flush(),T_(e);let o=null,a=null;(function cX(n){return 2!==n.type})(n)&&(a=function xx(n){return n[wo]??function Tq(n){const e=Ja.pop()??Object.create(Iq);return e.lView=n,e}(n)}(e),o=function Me(n){return n&&(n.nextProducerIndex=0),se(n)}(a));try{w_(e),function Vb(n){return Tn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&HF(n,e,t,2,i);const c=3==(3&r);if(c){const h=n.preOrderCheckHooks;null!==h&&Ed(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Un(e,h,0,null),R_(e,0)}if(function lX(n){for(let e=wl(n);null!==e;e=Ln(e)){if(!(e[gn]&yd.HasTransplantedViews))continue;const t=e[mc];for(let i=0;i<t.length;i++){Pb(t[i])}}}(e),tB(e,0),null!==n.contentQueries&&JF(n,e),c){const h=n.contentCheckHooks;null!==h&&Ed(e,h)}else{const h=n.contentHooks;null!==h&&Un(e,h,1),R_(e,1)}!function Lq(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)al(~r);else{const s=r,o=t[++i],a=t[++i];QS(o,s),a(2,e[s])}}}finally{al(-1)}}(n,e);const l=n.components;null!==l&&iB(e,l,0);const u=n.viewQuery;if(null!==u&&oM(2,u,i),c){const h=n.viewCheckHooks;null!==h&&Ed(e,h)}else{const h=n.viewHooks;null!==h&&Un(e,h,2),R_(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[il]){for(const h of e[il])h();e[il]=null}e[gn]&=-73}catch(c){throw yc(e),c}finally{null!==a&&(function ae(n,e){if(se(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Xe(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Qe(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function Mq(n){n.lView[wo]!==n&&(n.lView=null,Ja.push(n))}(a)),Uh()}}function tB(n,e){for(let t=wl(n);null!==t;t=Ln(t)){t[gn]&=~yd.HasChildViewsToRefresh;for(let i=_r;i<t.length;i++)nB(t[i],e)}}function uX(n,e,t){nB(xo(e,n),t)}function nB(n,e){b_(n)&&lM(n,e)}function lM(n,e){const i=n[Ht],r=n[gn],s=n[wo];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!xe(s)),s&&(s.dirty=!1),n[gn]&=-9217,o)aX(i,n,i.template,n[Bi]);else if(8192&r){tB(n,1);const a=i.components;null!==a&&iB(n,a,1)}}function iB(n,e,t){for(let i=0;i<e.length;i++)uX(n,e[i],t)}function Ny(n){for(n[fc].changeDetectionScheduler?.notify();n;){n[gn]|=64;const e=Us(n);if(f_(n)&&!e)return n;n=e}return null}class Ly{get rootNodes(){const e=this._lView,t=e[Ht];return Qi(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bi]}set context(e){this._lView[Bi]=e}get destroyed(){return 256==(256&this._lView[gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ci];if(is(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Ld(e,i),gu(t,i))}this._attachedToViewContainer=!1}xu(this._lView[Ht],this._lView)}onDestroy(e){!function su(n,e){if(256==(256&n[gn]))throw new ze(911,!1);null===n[gc]&&(n[gc]=[]),n[gc].push(e)}(this._lView,e)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[gn]&=-129}reattach(){Fh(this._lView),this._lView[gn]|=128}detectChanges(){this._lView[gn]|=1024,function cM(n,e=!0){const t=n[fc],i=t.rendererFactory,r=t.afterRenderEventManager;i.begin?.(),r?.begin();try{!function oX(n){lM(n,0);let e=0;for(;Lb(n);){if(100===e)throw new ze(103,!1);e++,lM(n,1)}}(n)}catch(o){throw e&&Cx(n,o),o}finally{i.end?.(),t.inlineEffectRunner?.flush(),r?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cT(n,e){On(n,e,e[Rn],2,null,null)}(this._lView[Ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ze(902,!1);this._appRef=e,Fh(this._lView)}}let Io=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=dX}return n})();function dX(n){return function hX(n,e,t){if(Ki(n)&&!t){const i=xo(n.index,e);return new Ly(i,i)}return 47&n.type?new Ly(e[Ui],e):null}(wi(),Mt(),16==(16&n))}const rB=new Set;function mf(n){rB.has(n)||(rB.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function dM(n){return e=>{setTimeout(n,void 0,e)}}const vn=class xX extends Jt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=dM(s),r&&(r=dM(r)),o&&(o=dM(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof mt&&e.add(a),a}};function sB(...n){}class _n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),typeof Zone>"u")throw new ze(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function EX(){const n="function"==typeof li.requestAnimationFrame;let e=li[n?"requestAnimationFrame":"setTimeout"],t=li[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function CX(n){const e=()=>{!function SX(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(li,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fM(n),n.isCheckStableRunning=!0,hM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function MX(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return oB(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),aB(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return oB(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),aB(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,fM(n),hM(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_n.isInAngularZone())throw new ze(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new ze(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,AX,sB,sB);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const AX={};function hM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function oB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aB(n){n._nesting--,hM(n)}class TX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let Tx=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const t of this.internalCallbacks)t();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Dt({token:n,providedIn:"root",factory:()=>new n})}return n})();function OX(n,e){const t=xo(e,n),i=t[Ht];!function PX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[fi];null!==r&&null===t[Xn]&&(t[Xn]=pf(r,t[ts])),pM(i,t,t[Bi])}function pM(n,e,t){T_(e);try{const i=n.viewQuery;null!==i&&oM(1,i,t);const r=n.template;null!==r&&HF(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&JF(n,e),n.staticViewQueries&&oM(2,n.viewQuery,t);const s=n.components;null!==s&&function NX(n,e){for(let t=0;t<e.length;t++)OX(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[gn]&=-5,Uh()}}function Mx(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Li(r,a):2==s&&(i=Li(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class hB extends El{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=rt(e);return new Fy(t,this.ngModule)}}function fB(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class FX{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Sp(i);const r=this.injector.get(e,Oy,i);return r!==Oy||t===Oy?r:this.parentInjector.get(e,t,i)}}class Fy extends vx{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=fB(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return fB(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function pd(n){return n.map(jS).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof xa?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new FX(e,s):e,a=o.get(wx,null);if(null===a)throw new ze(407,!1);const h={rendererFactory:a,sanitizer:o.get(XT,null),inlineEffectRunner:null,afterRenderEventManager:o.get(Tx,null),changeDetectionScheduler:o.get(LT,null)},f=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=i?function Bq(n,e,t,i){const s=i.get(FF,!1)||t===vo.ShadowDom,o=n.selectRootElement(e,s);return function kq(n){zF(n)}(o),o}(f,i,this.componentDef.encapsulation,o):ig(f,g,function LX(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g));let b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let w=null;null!==m&&(w=pf(m,o,!0));const L=nM(0,null,null,1,0,null,null,null,null,null,null),V=Ax(null,L,null,b,null,null,h,f,o,null,w);let ce,re;T_(V);try{const Ie=this.componentDef;let Ne,st=null;Ie.findHostDirectiveDefs?(Ne=[],st=new Map,Ie.findHostDirectiveDefs(Ie,Ne,st),Ne.push(Ie)):Ne=[Ie];const dt=function kX(n,e){const t=n[Ht],i=In;return n[i]=e,pg(t,i,2,"#host",null)}(V,m),qe=function jX(n,e,t,i,r,s,o){const a=r[Ht];!function UX(n,e,t,i){for(const r of n)e.mergedAttrs=hd(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Mx(e,e.mergedAttrs,!0),null!==t&&gy(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=pf(e,r[ts]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=Ax(r,GF(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&rM(a,n,i.length-1),Sx(r,h),r[n.index]=h}(dt,m,Ie,Ne,V,h,f);re=Lh(L,In),m&&function HX(n,e,t,i){if(i)Th(n,t,["ng-version","17.0.8"]);else{const{attrs:r,classes:s}=function _a(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ma(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Th(n,t,r),s&&s.length>0&&Qw(n,t,s.join(" "))}}(f,Ie,m,i),void 0!==t&&function GX(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(re,this.ngContentSelectors,t),ce=function VX(n,e,t,i,r,s){const o=wi(),a=r[Ht],c=Tr(o,r);YF(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Rs(Is(r,a,o.directiveStart+u,o),r);qF(a,r,o),c&&Rs(c,r);const l=Is(r,a,o.directiveStart+o.componentOffset,o);if(n[Bi]=r[Bi]=l,null!==s)for(const u of s)u(l,e);return QT(a,o,n),l}(qe,Ie,Ne,st,V,[zX]),pM(L,V,null)}finally{Uh()}return new BX(this.componentType,ce,Ud(re,V),V,re)}}class BX extends HT{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ly(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;aM(s[Ht],s,r,e,t),this.previousInputValues.set(e,t),Ny(xo(this._tNode.index,s))}}get injector(){return new Rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function zX(){const n=wi();Np(Mt()[Ht],n)}function oi(n){let e=function pB(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(va(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ze(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Ix(n.inputs),o.inputTransforms=Ix(n.inputTransforms),o.declaredInputs=Ix(n.declaredInputs),o.outputs=Ix(n.outputs);const a=r.hostBindings;a&&qX(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&$X(n,c),l&&YX(n,l),kr(n.inputs,r.inputs),kr(n.declaredInputs,r.declaredInputs),kr(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),kr(o.inputTransforms,r.inputTransforms)),va(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===oi&&(t=!1)}}e=Object.getPrototypeOf(e)}!function WX(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=hd(r.hostAttrs,t=hd(t,r.hostAttrs))}}(i)}function Ix(n){return n===ja?{}:n===hi?[]:n}function $X(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function YX(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function qX(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function gg(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Sl(n,e,t){return n[e]=t}function ss(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Pr(n,e,t,i){const r=Mt();return ss(r,qo(),e)&&(si(),Al(Oi(),r,n,e,t,i)),Pr}function _g(n,e,t,i){return ss(n,qo(),t)?e+xn(t)+i:Vn}function Rx(n,e){return n<<17|e<<2}function Vd(n){return n>>17&32767}function gM(n){return 2|n}function vf(n){return(131068&n)>>2}function mM(n,e){return-131069&n|e<<2}function _M(n){return 1|n}function TB(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Vd(s):vf(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];sK(n[a],e)&&(c=!0,n[a+1]=i?_M(u):gM(u)),a=i?Vd(u):vf(u)}c&&(n[t+1]=i?gM(s):_M(s))}function sK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&mu(n,e)>=0}const xs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MB(n){return n.substring(xs.key,xs.keyEnd)}function oK(n){return n.substring(xs.value,xs.valueEnd)}function IB(n,e){const t=xs.textEnd;return t===e?-1:(e=xs.keyEnd=function lK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,xs.key=e,t),Sg(n,e,t))}function DB(n,e){const t=xs.textEnd;let i=xs.key=Sg(n,e,t);return t===i?-1:(i=xs.keyEnd=function uK(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=OB(n,i,t),i=xs.value=Sg(n,i,t),i=xs.valueEnd=function dK(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=PB(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=PB(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),OB(n,i,t))}function RB(n){xs.key=0,xs.keyEnd=0,xs.value=0,xs.valueEnd=0,xs.textEnd=n.length}function Sg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function OB(n,e,t,i){return(e=Sg(n,e,t))<t&&e++,e}function PB(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Ti(n,e,t){const i=Mt();return ss(i,qo(),e)&&Sa(si(),Oi(),i,n,e,i[Rn],t,!1),Ti}function yM(n,e,t,i,r){const o=r?"class":"style";aM(n,t,e.inputs[o],o,i)}function vM(n,e,t){return Rc(n,e,t,!1),vM}function Ar(n,e){return Rc(n,e,null,!0),Ar}function hK(n,e){for(let t=function cK(n){return RB(n),DB(n,Sg(n,0,xs.textEnd))}(e);t>=0;t=DB(e,t))FB(n,MB(e),oK(e))}function Cg(n){Oc(yK,Cl,n,!0)}function Cl(n,e){for(let t=function aK(n){return RB(n),IB(n,Sg(n,0,xs.textEnd))}(e);t>=0;t=IB(e,t))Eo(n,MB(e),!0)}function Rc(n,e,t,i){const r=Mt(),s=si(),o=wc(2);s.firstUpdatePass&&LB(s,n,o,i),e!==Vn&&ss(r,o,e)&&BB(s,s.data[ys()],r,r[Rn],n,r[o+1]=function bK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ti(To(n)))),n}(e,t),i,o)}function Oc(n,e,t,i){const r=si(),s=wc(2);r.firstUpdatePass&&LB(r,null,s,i);const o=Mt();if(t!==Vn&&ss(o,s,t)){const a=r.data[ys()];if(jB(a,i)&&!NB(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Li(c,t||"")),yM(r,a,o,t,i)}else!function vK(n,e,t,i,r,s,o,a){r===Vn&&(r=hi);let c=0,l=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let b,m=null;u===h?(c+=2,l+=2,f!==g&&(m=h,b=g)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,b=g),null!==m&&BB(n,e,t,i,m,b,o,a),u=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[Rn],o[s+1],o[s+1]=function _K(n,e,t){if(null==t||""===t)return hi;const i=[],r=To(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function NB(n,e){return e>=n.expandoStartIndex}function LB(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[ys()],o=NB(n,t);jB(s,i)&&null===e&&!o&&(e=!1),e=function fK(n,e,t,i){const r=function C_(n){const e=Tn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=ky(t=bM(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=bM(r,n,e,t,i),null===s){let c=function pK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==vf(i))return n[Vd(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=bM(null,n,e,c[1],i),c=ky(c,e.attrs,i),function gK(n,e,t,i){n[Vd(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function mK(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=ky(i,n[s].hostAttrs,t);return ky(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function iK(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Vd(o),c=vf(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||mu(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const f=Vd(n[a+1]);n[i+1]=Rx(f,a),0!==f&&(n[f+1]=mM(n[f+1],i)),n[a+1]=function tK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Rx(a,0),0!==a&&(n[a+1]=mM(n[a+1],i)),a=i;else n[i+1]=Rx(c,0),0===a?a=i:n[c+1]=mM(n[c+1],i),c=i;l&&(n[i+1]=gM(n[i+1])),TB(n,u,i,!0),TB(n,u,i,!1),function rK(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&mu(s,e)>=0&&(t[i+1]=_M(t[i+1]))}(e,u,n,i,s),o=Rx(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function bM(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=ky(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function ky(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Eo(n,o,!!t||e[++s]))}return void 0===n?null:n}function FB(n,e,t){Eo(n,e,To(t))}function yK(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Eo(n,i,t)}function BB(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function nK(n){return 1==(1&n)}(l)?kB(c,e,t,r,vf(l),o):void 0;Ox(u)||(Ox(s)||function eK(n){return 2==(2&n)}(l)&&(s=kB(c,null,t,r,a,o)),function fT(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:bl.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=bl.Important),n.setStyle(t,i,r,s))}}(i,o,Nh(ys(),t),r,s))}function kB(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=t[r+1];f===Vn&&(f=h?hi:void 0);let g=h?qh(f,i):u===i?f:void 0;if(l&&!Ox(g)&&(g=qh(c,i)),Ox(g)&&(a=g,o))return a;const m=n[r+1];r=o?Vd(m):vf(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=qh(c,i))}return a}function Ox(n){return void 0!==n}function jB(n,e){return 0!=(n.flags&(e?8:16))}let WB=(n,e)=>null;function Tg(n,e){return WB(n,e)}function Gy(n,e,t,i){const r=e.tView,a=Ax(n,r,t,4096&n[gn]?4096:16,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null);a[md]=n[e.index];const l=n[ya];return null!==l&&(a[ya]=l.createEmbeddedView(r)),pM(r,a,t),a}function Mg(n,e){return!e||null===e.firstChild||eg(n)}function zy(n,e,t,i=!0){const r=e[Ht];if(function ly(n,e,t,i){const r=_r+i,s=t.length;i>0&&(t[r-1][no]=e),i<s-_r?(e[no]=t[r],Hp(t,_r+i,e)):(t.push(e),e[no]=null),e[Ci]=t;const o=e[md];null!==o&&t!==o&&function uT(n,e){const t=n[mc];e[Ui]!==e[Ci][Ci][Ui]&&(n[gn]|=yd.HasTransplantedViews),null===t?n[mc]=[e]:t.push(e)}(o,e);const a=e[ya];null!==a&&a.insertView(n),Fh(e),e[gn]|=128}(r,e,n,t),i){const o=fy(t,n),a=e[Rn],c=xl(a,n[Ua]);null!==c&&function aT(n,e,t,i,r,s){i[fi]=r,i[Vr]=e,On(n,i,t,1,r,s)}(r,n[Vr],a,e,c,o)}const s=e[Xn];null!==s&&null!==s.firstChild&&(s.firstChild=null)}let co=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eJ}return n})();function eJ(){return ZB(wi(),Mt())}const tJ=co,KB=class extends tJ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ud(this._hostTNode,this._hostLView)}get injector(){return new Rr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Vp(this._hostTNode,this._hostLView);if(za(e)){const t=cl(e,this._hostLView),i=lu(e);return new Rr(t[Ht].data[i+8],t)}return new Rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=JB(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Tg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,Mg(this._hostTNode,o)),a}createComponent(e,t,i,r,s){const o=e&&!function Yh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const m=t||{};a=m.index,i=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const c=o?e:new Fy(rt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const b=(o?l:this.parentInjector).get(xa,null);b&&(s=b)}const u=rt(c.componentType??{}),h=Tg(this._lContainer,u?.id??null),g=c.create(l,r,h?.firstChild??null,s);return this.insertImpl(g.hostView,a,Mg(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function JS(n){return is(n[Ci])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Ci],l=new KB(c,c[Vr],c[Ci]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return zy(o,r,s,i),e.attachToViewContainerRef(),Hp(IM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=JB(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Ld(this._lContainer,t);i&&(gu(IM(this._lContainer),t),xu(i[Ht],i))}detach(e){const t=this._adjustIndex(e,-1),i=Ld(this._lContainer,t);return i&&null!=gu(IM(this._lContainer),t)?new Ly(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function JB(n){return n[8]}function IM(n){return n[8]||(n[8]=[])}function ZB(n,e){let t;const i=e[n.index];return is(i)?t=i:(t=KF(i,e,null,n),e[n.index]=t,Sx(e,t)),QB(t,e,n,i),new KB(t,n,e)}let QB=function tk(n,e,t,i){if(n[Ua])return;let r;r=8&t.type?Hi(i):function nJ(n,e){const t=n[Rn],i=t.createComment(""),r=Tr(e,n);return Eu(t,xl(t,r),i,function dy(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Ua]=r},DM=(n,e,t)=>!1;function Mi(n,e,t,i,r,s,o,a){const c=Mt(),l=si(),u=n+In,h=l.firstCreatePass?function oJ(n,e,t,i,r,s,o,a,c){const l=e.consts,u=pg(e,n,4,o||null,Ga(l,a));iM(e,t,u,Ga(l,c)),Np(e,u);const h=u.tView=nM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];Yo(h,!1);const f=nk(l,c,h,n);xd()&&rg(l,c,f,h),Rs(f,c);const g=KF(f,c,f,h);return c[u]=g,Sx(c,g),function ek(n,e,t){return DM(n,e,t)}(g,h,c),Hr(h)&&eM(l,c,h),null!=o&&tM(c,h,a),Mi}let nk=function ik(n,e,t,i){return xc(!0),e[Rn].createComment("")};function Os(n,e,t){mf("NgControlFlow");const i=Mt(),r=qo(),s=function RM(n,e){return n[e]}(i,In+n);if(ss(i,r,e)){const a=se(null);try{if(function MM(n,e){const t=Ld(n,e);return void 0!==t&&xu(t[Ht],t),t}(s,0),-1!==e){const c=function OM(n,e){return Lh(n,e)}(i[Ht],In+e),l=Tg(s,c.tView.ssrId);zy(s,Gy(i,c,t,{dehydratedView:l}),0,Mg(c,l))}}finally{se(a)}}else{const a=function XB(n,e){const t=_r+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Bi]=t)}}function Fn(n,e,t,i){const r=Mt(),s=si(),o=In+n,a=r[Rn],c=s.firstCreatePass?function qJ(n,e,t,i,r,s){const o=e.consts,c=pg(e,n,2,i,Ga(o,r));return iM(e,t,c,Ga(o,s)),null!==c.attrs&&Mx(c,c.attrs,!1),null!==c.mergedAttrs&&Mx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=Ck(s,r,c,a,e,n);r[o]=l;const u=Hr(c);return Yo(c,!0),gy(a,l,c),32!=(32&c.flags)&&xd()&&rg(s,r,l,c),0===function E_(){return Tn.lFrame.elementDepthCount}()&&Rs(l,r),function ou(){Tn.lFrame.elementDepthCount++}(),u&&(eM(s,r,c),QT(s,c,r)),null!==i&&tM(r,c),Fn}function Bn(){let n=wi();wd()?vc():(n=n.parent,Yo(n,!1));const e=n;(function kb(n){return Tn.skipHydrationRootTNode===n})(e)&&function ZS(){Tn.skipHydrationRootTNode=null}(),function $o(){Tn.lFrame.elementDepthCount--}();const t=si();return t.firstCreatePass&&(Np(t,n),h_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function P_(n){return 0!=(8&n.flags)}(e)&&yM(t,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Qb(n){return 0!=(16&n.flags)}(e)&&yM(t,e,Mt(),e.stylesWithoutHost,!1),Bn}function as(n,e,t,i){return Fn(n,e,t,i),Bn(),as}let Ck=(n,e,t,i,r,s)=>(xc(!0),ig(i,r,function I_(){return Tn.lFrame.currentNamespace}()));function qy(n,e,t){const i=Mt(),r=si(),s=n+In,o=r.firstCreatePass?function JJ(n,e,t,i,r){const s=e.consts,o=Ga(s,i),a=pg(e,n,8,"ng-container",o);return null!==o&&Mx(a,o,!0),iM(e,t,a,Ga(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Yo(o,!0);const a=Mk(r,i,o,n);return i[s]=a,xd()&&rg(r,i,a,o),Rs(a,i),Hr(o)&&(eM(r,i,o),QT(r,o,i)),null!=t&&tM(i,o),qy}function Xy(){let n=wi();const e=si();return wd()?vc():(n=n.parent,Yo(n,!1)),e.firstCreatePass&&(Np(e,n),h_(n)&&e.queries.elementEnd(n)),Xy}let Mk=(n,e,t,i)=>(xc(!0),qa(e[Rn],""));function VM(){return Mt()}function wf(n,e,t){const i=Mt();return ss(i,qo(),e)&&Sa(si(),Oi(),i,n,e,i[Rn],t,!0),wf}const Fg="en-US";let Ok=Fg;function Bg(n){return!!n&&"function"==typeof n.then}function r3(n){return!!n&&"function"==typeof n.subscribe}function Gi(n,e,t,i){const r=Mt(),s=si(),o=wi();return function o3(n,e,t,i,r,s,o){const a=Hr(i),l=n.firstCreatePass&&QF(n),u=e[Bi],h=ZF(e);let f=!0;if(3&i.type||o){const b=Tr(i,e),w=o?o(b):b,L=h.length,V=o?re=>o(Hi(re[i.index])):i.index;let ce=null;if(!o&&a&&(ce=function KZ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[gd],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==ce)(ce.__ngLastListenerFn__||ce).__ngNextListenerFn__=s,ce.__ngLastListenerFn__=s,f=!1;else{s=c3(i,e,u,s,!1);const re=t.listen(w,r,s);h.push(s,re),l&&l.push(r,V,L,L+1)}}else s=c3(i,e,u,s,!1);const g=i.outputs;let m;if(f&&null!==g&&(m=g[r])){const b=m.length;if(b)for(let w=0;w<b;w+=2){const Ie=e[m[w]][m[w+1]].subscribe(s),Ne=h.length;h.push(s,Ie),l&&l.push(r,i.index,Ne,-(Ne+1))}}}(s,r,r[Rn],o,n,e,i),Gi}function a3(n,e,t,i){try{return Va(6,e,t),!1!==t(i)}catch(r){return Cx(n,r),!1}finally{Va(7,e,t)}}function c3(n,e,t,i,r){return function s(o){if(o===Function)return i;Ny(n.componentOffset>-1?xo(n.index,e):e);let c=a3(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=a3(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function cs(n=1){return function Yb(n){return(Tn.lFrame.contextLView=function Nb(n,e){for(;n>0;)e=e[bo],n--;return e}(n,Tn.lFrame.contextLView))[Bi]}(n)}function JZ(n,e){let t=null;const i=function Eb(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Tp(n,s,!0):kS(i,s))return r}else t=r}return t}function Ca(n){const e=Mt()[Ui][Vr];if(!e.projection){const i=e.projection=$a(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?JZ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ii(n,e=0,t){const i=Mt(),r=si(),s=pg(r,In+n,16,null,t||null);null===s.projection&&(s.projection=e),vc(),(!i[Xn]||au())&&32!=(32&s.flags)&&function Jw(n,e,t){Co(e[Rn],0,e,t,uy(n,t,e),Xw(t.parent||e[Vr],t,e))}(r,i,s)}function zM(n,e,t){return WM(n,"",e,"",t),zM}function WM(n,e,t,i,r){const s=Mt(),o=_g(s,e,t,i);return o!==Vn&&Sa(si(),Oi(),s,n,o,s[Rn],r,!1),WM}function $x(n){return Ms(function Ub(){return Tn.lFrame.contextLView}(),In+n)}function Pc(n,e=""){const t=Mt(),i=si(),r=n+In,s=i.firstCreatePass?pg(i,r,1,e,null):i.data[r],o=C3(i,t,s,e,n);t[r]=o,xd()&&rg(i,t,o,s),Yo(s,!1)}let C3=(n,e,t,i,r)=>(xc(!0),function dr(n,e){return n.createText(e)}(e[Rn],i));function Gd(n){return t0("",n,""),Gd}function t0(n,e,t){const i=Mt(),r=_g(i,n,e,t);return r!==Vn&&function Mu(n,e,t){const i=Nh(e,n);!function zw(n,e,t){n.setValue(e,t)}(n[Rn],i,t)}(i,ys(),r),t0}function $M(n,e,t,i,r){if(n=D(n),Array.isArray(n))for(let s=0;s<n.length;s++)$M(n[s],e,t,i,r);else{const s=si(),o=Mt(),a=wi();let c=vu(n)?n:D(n.provide);const l=vw(n),u=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(vu(n)||!n.multi){const g=new Vh(l,r,at),m=qM(c,e,r?u:u+f,h);-1===m?(N_(Hh(a,o),s,c),YM(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=qM(c,e,u+f,h),m=qM(c,e,u,u+f),w=m>=0&&t[m];if(r&&!w||!r&&!(g>=0&&t[g])){N_(Hh(a,o),s,c);const L=function fQ(n,e,t,i,r){const s=new Vh(n,t,at);return s.multi=[],s.index=e,s.componentProviders=0,L3(s,r,i&&!t),s}(r?hQ:dQ,t.length,r,i,l);!r&&w&&(t[m].providerFactory=L),YM(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else YM(s,n,g>-1?g:m,L3(t[r?m:g],l,!r&&i));!r&&i&&w&&t[m].componentProviders++}}}function YM(n,e,t,i){const r=vu(e),s=function AC(n){return!!n.useClass}(e);if(r||s){const c=(s?D(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function L3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qM(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dQ(n,e,t,i){return XM(this.multi,[])}function hQ(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Is(t,t[Ht],this.providerFactory.index,i);s=a.slice(0,o),XM(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],XM(r,s);return s}function XM(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ei(n,e=[]){return t=>{t.providersResolver=(i,r)=>function uQ(n,e,t){const i=si();if(i.firstCreatePass){const r=va(n);$M(t,i.data,i.blueprint,r,!0),$M(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Ef{}class F3{}class KM extends Ef{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hB(this);const r=function un(n,e){const t=n[mn]||null;if(!t&&!0===e)throw new Error(`Type ${ti(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function So(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=xw(e,t,[{provide:Ef,useValue:this},{provide:El,useValue:this.componentFactoryResolver},...i],ti(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class JM extends F3{constructor(e){super(),this.moduleType=e}create(e){return new KM(this.moduleType,e,[])}}class B3 extends Ef{constructor(e){super(),this.componentFactoryResolver=new hB(this),this.instance=null;const t=new Dd([...e.providers,{provide:Ef,useValue:this},{provide:El,useValue:this.componentFactoryResolver}],e.parent||Yp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let mQ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=z_(0,t.type),r=i.length>0?function k3(n,e,t=null){return new B3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Dt({token:n,providedIn:"environment",factory:()=>new n(ut(xa))})}return n})();function kg(n){mf("NgStandalone"),n.getStandaloneInjector=e=>e.get(mQ).getOrCreateStandaloneInjector(n)}function Y3(n,e,t,i,r,s){const o=e+t;return ss(n,o,r)?Sl(n,o+1,s?i.call(s,r):i(r)):function n0(n,e){const t=n[e];return t===Vn?void 0:t}(n,o+1)}function Iu(n,e){const t=si();let i;const r=n+In;t.firstCreatePass?(i=function FQ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=ru(i.type)),a=Qs(at);try{const c=Cd(!1),l=s();return Cd(c),function ZZ(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Mt(),r,l),l}finally{Qs(a)}}function Du(n,e,t){const i=n+In,r=Mt(),s=Ms(r,i);return function r0(n,e){return n[Ht].data[e].pure}(r,i)?Y3(r,Bs(),e,s.transform,t,s):s.transform(t)}function VQ(){return this._results[Symbol.iterator]()}class s0{static#e=Symbol.iterator;get changes(){return this._changes??=new vn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=s0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=VQ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Ds(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Sc(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let ec=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=zQ}return n})();const HQ=ec,GQ=class extends HQ{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=Gy(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new Ly(r)}};function zQ(){return Xx(wi(),Mt())}function Xx(n,e){return 4&n.type?new GQ(e,n,Ud(n,e)):null}class QM{constructor(e){this.queryList=e,this.matches=null}clone(){return new QM(this.queryList)}setDirty(){this.queryList.setDirty()}}class eI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new eI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nj(e,t).matches&&this.queries[t].setDirty()}}class Z3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class tI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new tI(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class nI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new nI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,WQ(t,s)),this.matchTNodeWithReadOption(e,t,vs(t,e,s,!1,!1))}else i===ec?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vs(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ui||r===co||r===ec&&4&t.type)this.addMatch(t.index,-2);else{const s=vs(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function WQ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function YQ(n,e,t,i){return-1===t?function $Q(n,e){return 11&n.type?Ud(n,e):4&n.type?Xx(n,e):null}(e,n):-2===t?function qQ(n,e,t){return t===ui?Ud(e,n):t===ec?Xx(e,n):t===co?ZB(e,n):void 0}(n,e,i):Is(n,n[Ht],t,e)}function Q3(n,e,t,i){const r=e[ya].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:YQ(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function iI(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=Q3(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let h=_r;h<u.length;h++){const f=u[h];f[md]===f[Ci]&&iI(f[Ht],f,l,i)}if(null!==u[mc]){const h=u[mc];for(let f=0;f<h.length;f++){const g=h[f];iI(g[Ht],g,l,i)}}}}}return i}function er(n){const e=Mt(),t=si(),i=Hb();jh(i+1);const r=nj(t,i);if(n.dirty&&function KS(n){return 4==(4&n[gn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?iI(t,e,i,[]):Q3(t,e,r,i);n.reset(s,$T),n.notifyOnChanges()}return!0}return!1}function lo(n,e,t){const i=si();i.firstCreatePass&&(tj(i,new Z3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),ej(i,Mt(),e)}function tc(n,e,t,i){const r=si();if(r.firstCreatePass){const s=wi();tj(r,new Z3(e,t,i),s.index),function KQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}ej(r,Mt(),t)}function tr(){return function XQ(n,e){return n[ya].queries[e].queryList}(Mt(),Hb())}function ej(n,e,t){const i=new s0(4==(4&t));(function Vq(n,e,t,i){const r=ZF(e);r.push(t),n.firstCreatePass&&QF(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[ya]&&(e[ya]=new eI),e[ya].queries.push(new QM(i))}function tj(n,e,t){null===n.queries&&(n.queries=new tI),n.queries.track(new nI(e,t))}function nj(n,e){return n.queries.getByIndex(e)}function ij(n,e){return Xx(n,e)}let cI=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ni(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Aj=new xt(""),Zx=new xt("");let hI,uI=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hI||(function zee(n){hI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ut(_n),ut(dI),ut(Zx))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})(),dI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return hI?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Sj=new xt("Application Initializer");let fI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Vt(Sj,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Bg(s))t.push(s);else if(r3(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Qx=new xt("appBootstrapListener");function Mj(n,e){return Array.isArray(e)?e.reduce(Mj,n):{...n,...e}}let Sf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vt(NF),this.componentTypes=[],this.components=[],this.isStable=Vt(cI).hasPendingTasks.pipe(Wt(t=>!t)),this._injector=Vt(xa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof vx;if(!this._injector.get(fI).done)throw!r&&function Xt(n){const e=rt(n)||At(n)||yt(n);return null!==e&&e.standalone}(t),new ze(405,!1);let o;o=r?t:this._injector.get(El).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function $ee(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ef),l=o.create(Ji.NULL,[],i||o.selector,a),u=l.location.nativeElement,h=l.injector.get(Aj,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),eE(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ze(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;eE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Qx,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>eE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ze(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let qee=(()=>{class n{constructor(){this.zone=Vt(_n),this.applicationRef=Vt(Sf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xee(){const n=Vt(_n),e=Vt(Aa);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Jee=(()=>{class n{constructor(){this.subscription=new mt,this.initialized=!1,this.zone=Vt(_n),this.pendingTasks=Vt(cI)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_n.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Tl=new xt("LocaleId",{providedIn:"root",factory:()=>Vt(Tl,ni.Optional|ni.SkipSelf)||function Zee(){return typeof $localize<"u"&&$localize.locale||Fg}()}),pI=new xt("PlatformDestroyListeners");let Oj=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function IX(n="zone.js",e){return"noop"===n?new TX:"zone.js"===n?new _n(e):n}(i?.ngZone,function Rj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function gQ(n,e,t){return new KM(n,e,t)}(t.moduleType,this.injector,function Dj(n){return[{provide:_n,useFactory:n},{provide:gl,multi:!0,useFactory:()=>{const e=Vt(qee,{optional:!0});return()=>e.initialize()}},{provide:gl,multi:!0,useFactory:()=>{const e=Vt(Jee);return()=>{e.initialize()}}},{provide:NF,useFactory:Xee}]}(()=>r)),o=s.injector.get(Aa,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{eE(this._modules,s),a.unsubscribe()})}),function Tj(n,e,t){try{const i=t();return Bg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(fI);return a.runInitializers(),a.donePromise.then(()=>(function Pk(n){Zs(n,"Expected localeId to be defined"),"string"==typeof n&&(Ok=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Tl,Fg)||Fg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=Mj({},i);return function Wee(n,e,t){const i=new JM(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Sf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ze(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ze(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(pI,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Ji))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),zd=null;const Pj=new xt("AllowMultipleToken");function Nj(n,e,t=[]){const i=`Platform: ${e}`,r=new xt(i);return(s=[])=>{let o=gI();if(!o||o.injector.get(Pj,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function tte(n){if(zd&&!zd.get(Pj,!1))throw new ze(400,!1);(function Cj(){!function R(n){Ke=n}(()=>{throw new ze(600,!1)})})(),zd=n;const e=n.get(Oj);(function Fj(n){n.get(Aw,null)?.forEach(t=>t())})(n)}(function Lj(n=[],e){return Ji.create({name:e,providers:[{provide:Y_,useValue:"platform"},{provide:pI,useValue:new Set([()=>zd=null])},...n]})}(a,i))}return function nte(n){const e=gI();if(!e)throw new ze(401,!1);return e}()}}function gI(){return zd?.get(Oj)??null}const cte=Nj(null,"core",[]);let lte=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Sf))};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({})}return n})();function Po(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let AI=null;function Wd(){return AI}class Fte{}const ii=new xt("DocumentToken");let sU=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:()=>Vt(Bte),providedIn:"platform"})}return n})(),Bte=(()=>{class n extends sU{constructor(){super(),this._doc=Vt(ii),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wd().getBaseHref(this._doc)}onPopState(t){const i=Wd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Wd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function oU(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function aU(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mf(n){return n&&"?"!==n[0]?"?"+n:n}let lE=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:()=>Vt(jte),providedIn:"root"})}return n})();const kte=new xt("appBaseHref");let jte=(()=>{class n extends lE{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Vt(ii).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return oU(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Mf(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Mf(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Mf(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(sU),ut(kte,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),If=(()=>{class n{constructor(t){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Hte(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(aU(cU(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Mf(i))}normalize(t){return n.stripTrailingSlash(function Vte(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,cU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mf(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Mf;static#t=this.joinWithSlash=oU;static#n=this.stripTrailingSlash=aU;static#i=this.\u0275fac=function(i){return new(i||n)(ut(lE))};static#r=this.\u0275prov=Dt({token:n,factory:()=>function Ute(){return new If(ut(lE))}(),providedIn:"root"})}return n})();function cU(n){return n.replace(/\/index.html$/,"")}const NI=/\s+/,_U=[];let yU=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=_U,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(NI):_U}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(NI):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(NI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(at(zn),at(zr),at(ui),at(Ic))};static#t=this.\u0275dir=$t({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Mne{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bE=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Mne(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),bU(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{bU(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(at(co),at(ec),at(zn))};static#t=this.\u0275dir=$t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function bU(n,e){n.context.$implicit=e.item}let LI=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Ine,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(at(co),at(ec))};static#t=this.\u0275dir=$t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ine{constructor(){this.$implicit=null,this.ngIf=null}}function wU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ti(e)}'.`)}let EU=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,r),get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static#e=this.\u0275fac=function(i){return new(i||n)(at(co))};static#t=this.\u0275dir=$t({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Vi]})}return n})();class Lne{createSubscription(e,t){return d(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){d(()=>e.unsubscribe())}}class Fne{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Bne=new Fne,kne=new Lne;let h0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Bg(t))return Bne;if(r3(t))return kne;throw function Lc(n,e){return new ze(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(at(Io,16))};static#t=this.\u0275pipe=Ur({name:"async",type:n,pure:!1,standalone:!0})}return n})(),SU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({})}return n})();const CU="browser";function $d(n){return n===CU}function UI(n){return"server"===n}class Iie extends Fte{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class GI extends Iie{static makeCurrent(){!function Lte(n){AI||(AI=n)}(new GI)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Die(){return p0=p0||document.querySelector("base"),p0?p0.getAttribute("href"):null}();return null==t?null:function Rie(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){p0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Cne(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let p0=null,Pie=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();const zI=new xt("EventManagerPlugins");let DU=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ze(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ut(zI),ut(_n))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();class RU{constructor(e){this._doc=e}}const WI="ng-app-id";let OU=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=UI(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${WI}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(WI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(WI,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii),ut(Jp),ut(Cw,8),ut(Ya))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();const $I={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},YI=/%COMP%/g,Bie=new xt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function NU(n,e){return e.map(t=>t.replace(YI,n))}let LU=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=UI(a),this.defaultRenderer=new qI(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===vo.ShadowDom&&(i={...i,encapsulation:vo.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof BU?r.applyToHost(t):r instanceof XI&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case vo.Emulated:s=new BU(c,l,i,this.appId,u,o,a,h);break;case vo.ShadowDom:return new Vie(c,l,t,i,o,a,this.nonce,h);default:s=new XI(c,l,i,u,o,a,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ut(DU),ut(OU),ut(Jp),ut(Bie),ut(ii),ut(Ya),ut(_n),ut(Cw))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();class qI{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($I[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(FU(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(FU(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ze(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=$I[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=$I[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(bl.DashCase|bl.Important)?e.style.setProperty(t,i,r&bl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&bl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Wd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function FU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vie extends qI{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=NU(r.id,r.styles);for(const u of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class XI extends qI{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?NU(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class BU extends XI{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function kie(n){return"_ngcontent-%COMP%".replace(YI,n)}(l),this.hostAttr=function jie(n){return"_nghost-%COMP%".replace(YI,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Hie=(()=>{class n extends RU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();const kU=["alt","control","meta","shift"],Gie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zie={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wie=(()=>{class n extends RU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),kU.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=Gie[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kU.forEach(o=>{o!==r&&(0,zie[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();const UU=[{provide:Ya,useValue:CU},{provide:Aw,useValue:function $ie(){GI.makeCurrent()},multi:!0},{provide:ii,useFactory:function qie(){return function FC(n){Z_=n}(document),document},deps:[]}],Xie=Nj(cte,"browser",UU),Kie=new xt(""),VU=[{provide:Zx,useClass:class Oie{addToWindow(e){li.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new ze(5103,!1);return s},li.getAllAngularTestabilities=()=>e.getAllTestabilities(),li.getAllAngularRootElements=()=>e.getAllRootElements(),li.frameworkStabilizers||(li.frameworkStabilizers=[]),li.frameworkStabilizers.push(i=>{const r=li.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Wd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Aj,useClass:uI,deps:[_n,dI,Zx]},{provide:uI,useClass:uI,deps:[_n,dI,Zx]}],HU=[{provide:Y_,useValue:"root"},{provide:Aa,useFactory:function Yie(){return new Aa},deps:[]},{provide:zI,useClass:Hie,multi:!0,deps:[ii,_n,Ya]},{provide:zI,useClass:Wie,multi:!0,deps:[ii]},LU,OU,DU,{provide:wx,useExisting:LU},{provide:class oie{},useClass:Pie,deps:[]},[]];let Jie=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Jp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Kie,12))};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({providers:[...HU,...VU],imports:[SU,lte]})}return n})();typeof window<"u"&&window;let g0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:function(i){let r=null;return r=i?new(i||n):ut($U),r},providedIn:"root"})}return n})(),$U=(()=>{class n extends g0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case bs.NONE:return i;case bs.HTML:return Ka(i,"HTML")?To(i):hx(this._doc,String(i)).toString();case bs.STYLE:return Ka(i,"Style")?To(i):i;case bs.SCRIPT:if(Ka(i,"Script"))return To(i);throw new ze(5200,!1);case bs.URL:return Ka(i,"URL")?To(i):ag(String(i));case bs.RESOURCE_URL:if(Ka(i,"ResourceURL"))return To(i);throw new ze(5201,!1);default:throw new ze(5202,!1)}}bypassSecurityTrustHtml(t){return function oo(n){return new _T(n)}(t)}bypassSecurityTrustStyle(t){return function bT(n){return new yy(n)}(t)}bypassSecurityTrustScript(t){return function wT(n){return new yT(n)}(t)}bypassSecurityTrustUrl(t){return function xT(n){return new vy(n)}(t)}bypassSecurityTrustResourceUrl(t){return function ix(n){return new vT(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:function(i){let r=null;return r=i?new i:function ire(n){return new $U(n.get(ii))}(ut(Ji)),r},providedIn:"root"})}return n})();const JI={now:()=>(JI.delegate||Date).now(),delegate:void 0};class Df extends Jt{constructor(e=1/0,t=1/0,i=JI){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function kn(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function eD(n,e){return function(t,i){e(t,i,n)}}function Ft(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function qd(n){return this instanceof qd?(this.v=n,this):new qd(n)}function JU(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function nD(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const iD=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ZU(n){return Re(n?.then)}function QU(n){return Re(n[ha])}function eV(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function tV(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const nV=function xre(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function iV(n){return Re(n?.[nV])}function rV(n){return function KU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(g){return new Promise(function(m,b){s.push([f,g,m,b])>1||a(f,g)})})}function a(f,g){try{!function c(f){f.value instanceof qd?Promise.resolve(f.value.v).then(l,u):h(s[0][2],f)}(i[f](g))}catch(m){h(s[0][3],m)}}function l(f){a("next",f)}function u(f){a("throw",f)}function h(f,g){f(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield qd(t.read());if(r)return yield qd(void 0);yield yield qd(i)}}finally{t.releaseLock()}})}function sV(n){return Re(n?.getReader)}function us(n){if(n instanceof St)return n;if(null!=n){if(QU(n))return function Ere(n){return new St(e=>{const t=n[ha]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(iD(n))return function Are(n){return new St(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ZU(n))return function Sre(n){return new St(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,it)})}(n);if(eV(n))return oV(n);if(iV(n))return function Cre(n){return new St(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(sV(n))return function Tre(n){return oV(rV(n))}(n)}throw tV(n)}function oV(n){return new St(e=>{(function Mre(n,e){var t,i,r,s;return function qU(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=JU(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Pu(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ds(n,e,t=1/0){return Re(e)?ds((i,r)=>Wt((s,o)=>e(i,s,r,o))(us(n(i,r))),t):("number"==typeof e&&(t=e),ci((i,r)=>function Ire(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},g=b=>l<i?m(b):c.push(b),m=b=>{s&&e.next(b),l++;let w=!1;us(t(b,u++)).subscribe(ln(e,L=>{r?.(L),s?g(L):e.next(L)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const L=c.shift();o?Pu(e,o,()=>m(L)):m(L)}f()}catch(L){e.error(L)}}))};return n.subscribe(ln(e,g,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function EE(n=1/0){return ds(Ns,n)}const Lo=new St(n=>n.complete());function aV(n){return n&&Re(n.schedule)}function rD(n){return n[n.length-1]}function cV(n){return Re(rD(n))?n.pop():void 0}function m0(n){return aV(rD(n))?n.pop():void 0}function lV(n,e=0){return ci((t,i)=>{t.subscribe(ln(i,r=>Pu(i,n,()=>i.next(r),e),()=>Pu(i,n,()=>i.complete(),e),r=>Pu(i,n,()=>i.error(r),e)))})}function uV(n,e=0){return ci((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function dV(n,e){if(!n)throw new Error("Iterable cannot be null");return new St(t=>{Pu(t,e,()=>{const i=n[Symbol.asyncIterator]();Pu(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function hs(n,e){return e?function kre(n,e){if(null!=n){if(QU(n))return function Pre(n,e){return us(n).pipe(uV(e),lV(e))}(n,e);if(iD(n))return function Lre(n,e){return new St(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ZU(n))return function Nre(n,e){return us(n).pipe(uV(e),lV(e))}(n,e);if(eV(n))return dV(n,e);if(iV(n))return function Fre(n,e){return new St(t=>{let i;return Pu(t,e,()=>{i=n[nV](),Pu(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Re(i?.return)&&i.return()})}(n,e);if(sV(n))return function Bre(n,e){return dV(rV(n),e)}(n,e)}throw tV(n)}(n,e):us(n)}function Fc(...n){const e=m0(n),t=function Ore(n,e){return"number"==typeof rD(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?us(i[0]):EE(t)(hs(i,e)):Lo}function zi(n,e){return ci((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ln(i,c=>{r?.unsubscribe();let l=0;const u=s++;us(n(c,u)).subscribe(r=ln(i,h=>i.next(e?e(c,h,u,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const AE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return AE.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return AE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let sD;function Yre(n,e,t){let i=t;return function Ure(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function Hre(n,e){if(!sD){const t=Element.prototype;sD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&sD.call(n,e)}(n,r)||(i=s,0))),i}class Xre{constructor(e,t){this.componentFactory=t.get(El).resolveComponentFactory(e)}create(e){return new Kre(this.componentFactory,e)}}class Kre{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Df(1),this.events=this.eventEmitters.pipe(zi(i=>Fc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(_n),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=AE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function Gre(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Ji.create({providers:[],parent:this.injector}),i=function $re(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],c=Yre(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Io),this.implementsOnChanges=function Vre(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Sf).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Wt(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=AE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Tb(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Jre extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let Qre=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({imports:[SU]})}return n})();function hV(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function kt(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){hV(s,i,r,o,a,"next",c)}function a(c){hV(s,i,r,o,a,"throw",c)}o(void 0)})}}function _0(n){return(_0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function we(n,e,t){return(e=function tse(n){var e=function ese(n,e){if("object"!==_0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==_0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===_0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fV(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function Ml(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||fV()}const pV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ml();class ise{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";we(this,"storage",void 0),we(this,"id",void 0),we(this,"config",void 0),this.storage=function nse(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function oD(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let SE;var n;function gV(n){return"string"==typeof n?SE[n.toUpperCase()]||SE.WHITE:n}function CE(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=SE||(SE={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Xd={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},TE=Xd.window||Xd.self||Xd.global,y0=Xd.process||{};function Gg(){let n;var e,t;if(Ml&&"performance"in TE)n=null==TE||null===(e=TE.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in y0){var i;const r=null==y0||null===(i=y0.hrtime)||void 0===i?void 0:i.call(y0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const zg={debug:Ml&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},use={enabled:!0,level:0};function rc(){}const mV={},_V={once:!0};class v0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};we(this,"id",void 0),we(this,"VERSION",pV),we(this,"_startTs",Gg()),we(this,"_deltaTs",Gg()),we(this,"_storage",void 0),we(this,"userData",{}),we(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new ise("__probe-".concat(this.id,"__"),use),this.timeStamp("".concat(this.id," started")),function lse(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Gg()-this._startTs).toPrecision(10))}getDelta(){return Number((Gg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){CE(e,t)}warn(e){return this._getLogFunction(0,e,zg.warn,arguments,_V)}error(e){return this._getLogFunction(0,e,zg.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,zg.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,zg.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,t,zg.debug||zg.info,arguments,_V)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||rc,i&&[i],{tag:pse(t)}):rc}image(e){let{logLevel:t,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(t||i)?Ml?function fse(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=oD(s,t,i);console.log(...o)},s.src=e,rc}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...oD(e,t,i)),rc;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...oD(s,t,i)),s.src=e.toDataURL(),rc}return rc}({image:r,message:s,scale:o}):function hse(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),rc}({image:r,message:s,scale:o}):rc}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||rc)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=vV({logLevel:e,message:t,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||rc)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=yV(e)}_getLogFunction(e,t,i,r,s){if(this._shouldLog(e)){s=vV({logLevel:e,message:t,args:r,opts:s}),CE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Gg();const o=s.tag||s.message;if(s.once){if(mV[o])return rc;mV[o]=Gg()}return t=function dse(n,e,t){if("string"==typeof e){const i=t.time?function sse(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function rse(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function cse(n,e,t){return!Ml&&"string"==typeof n&&(e&&(e=gV(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=gV(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,s.message,s),i.bind(console,t,...s.args)}return rc}}function yV(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return CE(Number.isFinite(e)&&e>=0),e}function vV(n){const{logLevel:e,message:t}=n;n.logLevel=yV(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return CE("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function pse(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}we(v0,"VERSION",pV);const ai=new v0({id:"deck"}),b0=new class gse{constructor(e={}){we(this,"_pool",[]),we(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,u=t*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let h=1/0;c&&(h=c*i+s);const f=this._allocate(l,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.opts.poolSize)&&t.splice(s,0,i),t.length>this.opts.poolSize&&t.shift()}},mse=1/Math.PI*180,_se=1/180*Math.PI,Yr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function yse(n,{precision:e=Yr.precision}={}){return n=function Ese(n){return Math.round(n/Yr.EPSILON)*Yr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Nu(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bV(n){return function bse(n,e){return Lu(n,t=>t*_se,e)}(n)}function vse(n){return function wse(n,e){return Lu(n,t=>t*mse,e)}(n)}function Ir(n,e,t){return Lu(n,i=>Math.max(e,Math.min(t,i)))}function ME(n,e,t){return Nu(n)?n.map((i,r)=>ME(i,e[r],t)):t*e+(1-t)*n}function Wg(n,e,t){const i=Yr.EPSILON;t&&(Yr.EPSILON=t);try{if(n===e)return!0;if(Nu(n)&&Nu(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Wg(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=Yr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Yr.EPSILON=i}}function Lu(n,e,t){if(Nu(n)){const i=n;t=t||function Ase(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class IE extends(function Sse(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Nu(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Yr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+yse(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Wg(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(Yr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function Zn(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function DE(n,e,t=""){if(Yr.debug&&!function Cse(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function xV(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class EV extends IE{get x(){return this[0]}set x(e){this[0]=Zn(e)}get y(){return this[1]}set y(e){this[1]=Zn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return Zn(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return Zn(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return xV(e>=0&&e<this.ELEMENTS,"index is out of range"),Zn(this[e])}setComponent(e,t){return xV(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Il=1e-6,ta=typeof Float32Array<"u"?Float32Array:Array;function AV(){var n=new ta(3);return ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function SV(n,e,t){var i=new ta(3);return i[0]=n,i[1]=e,i[2]=t,i}function CV(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function RE(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=r*c-s*a,n[1]=s*o-i*c,n[2]=i*a-r*o,n}function aD(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function TV(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,b=i*h-r*u,w=2*t[3];return h*=w,f*=w,m*=2,b*=2,n[0]=a+(u*=w)+(g*=2),n[1]=c+h+m,n[2]=l+f+b,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function MV(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}AV();const cD=[0,0,0];let OE;class uo extends EV{static get ZERO(){return OE||(OE=new uo(0,0,0),Object.freeze(OE)),OE}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Nu(e)?this.copy(e):(Yr.debug&&(Zn(e),Zn(t),Zn(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Yr.debug&&(Zn(e.x),Zn(e.y),Zn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Zn(e)}angle(e){return function Fse(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&CV(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return RE(this,this,e),this.check()}rotateX({radians:e,origin:t=cD}){return function Pse(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=cD}){return function Nse(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=cD}){return function Lse(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return aD(this,this,e),this.check()}transformAsVector(e){return MV(this,this,e),this.check()}transformByMatrix3(e){return function Ose(n,e,t){var i=e[0],r=e[1],s=e[2];n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Use(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return TV(this,this,e),this.check()}}const IV=new uo;function $g(n,e,t,i){IV.set(n,e,t);const r=IV.len();return{distance:i/r,normal:new uo(-n/r,-e/r,-t/r)}}function $se(n){return n-Math.fround(n)}let x0;function lD(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,s=(r-i)/t;x0=b0.allocate(x0,s,{type:Float32Array,size:2*t});let o=i,a=0;for(;o<r;){for(let c=0;c<t;c++){const l=n[o++];x0[a+c]=l,x0[a+c+t]=$se(l)}a+=2*t}return x0.subarray(0,s*t*2)}class Yse extends IE{toString(){let e="[";if(Yr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=Zn(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function uD(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],b=e[13],w=e[14],L=e[15],V=t*a-i*o,ce=t*c-r*o,re=t*l-s*o,Ie=i*c-r*a,Ne=i*l-s*a,st=r*l-s*c,dt=u*b-h*m,qe=u*w-f*m,ht=u*L-g*m,vt=h*w-f*b,Ct=h*L-g*b,ft=f*L-g*w,gt=V*ft-ce*Ct+re*vt+Ie*ht-Ne*qe+st*dt;return gt?(n[0]=(a*ft-c*Ct+l*vt)*(gt=1/gt),n[1]=(r*Ct-i*ft-s*vt)*gt,n[2]=(b*st-w*Ne+L*Ie)*gt,n[3]=(f*Ne-h*st-g*Ie)*gt,n[4]=(c*ht-o*ft-l*qe)*gt,n[5]=(t*ft-r*ht+s*qe)*gt,n[6]=(w*re-m*st-L*ce)*gt,n[7]=(u*st-f*re+g*ce)*gt,n[8]=(o*Ct-a*ht+l*dt)*gt,n[9]=(i*ht-t*Ct-s*dt)*gt,n[10]=(m*Ne-b*re+L*V)*gt,n[11]=(h*re-u*Ne-g*V)*gt,n[12]=(a*qe-o*vt-c*dt)*gt,n[13]=(t*vt-i*qe+r*dt)*gt,n[14]=(b*ce-m*Ie-w*V)*gt,n[15]=(u*Ie-h*ce+f*V)*gt,n):null}function Rf(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],b=e[12],w=e[13],L=e[14],V=e[15],ce=t[0],re=t[1],Ie=t[2],Ne=t[3];return n[0]=ce*i+re*a+Ie*h+Ne*b,n[1]=ce*r+re*c+Ie*f+Ne*w,n[2]=ce*s+re*l+Ie*g+Ne*L,n[3]=ce*o+re*u+Ie*m+Ne*V,n[4]=(ce=t[4])*i+(re=t[5])*a+(Ie=t[6])*h+(Ne=t[7])*b,n[5]=ce*r+re*c+Ie*f+Ne*w,n[6]=ce*s+re*l+Ie*g+Ne*L,n[7]=ce*o+re*u+Ie*m+Ne*V,n[8]=(ce=t[8])*i+(re=t[9])*a+(Ie=t[10])*h+(Ne=t[11])*b,n[9]=ce*r+re*c+Ie*f+Ne*w,n[10]=ce*s+re*l+Ie*g+Ne*L,n[11]=ce*o+re*u+Ie*m+Ne*V,n[12]=(ce=t[12])*i+(re=t[13])*a+(Ie=t[14])*h+(Ne=t[15])*b,n[13]=ce*r+re*c+Ie*f+Ne*w,n[14]=ce*s+re*l+Ie*g+Ne*L,n[15]=ce*o+re*u+Ie*m+Ne*V,n}function PE(n,e,t){var o,a,c,l,u,h,f,g,m,b,w,L,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],b=e[9],w=e[10],L=e[11],n[0]=o=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=u,n[5]=h,n[6]=f,n[7]=g,n[8]=m,n[9]=b,n[10]=w,n[11]=L,n[12]=o*i+u*r+m*s+e[12],n[13]=a*i+h*r+b*s+e[13],n[14]=c*i+f*r+w*s+e[14],n[15]=l*i+g*r+L*s+e[15]),n}function dD(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function DV(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+l*i,n[5]=o*r+u*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-s*i,n[9]=u*r-o*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function RV(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+l*i,n[1]=o*r+u*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-s*i,n[5]=u*r-o*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function NE(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function OV(n,e){return n[0]=-e[0],n[1]=-e[1],n}function PV(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}function NV(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function E0(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}!function coe(){var n=new ta(2);ta!=Float32Array&&(n[0]=0,n[1]=0)}(),function uoe(){var n=new ta(4);ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var LV=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(LV||{});const Aoe=45*Math.PI/180,Soe=1,hD=.1,fD=500,Coe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Pn extends Yse{static get IDENTITY(){return function Moe(){return FE||(FE=new Pn,Object.freeze(FE)),FE}()}static get ZERO(){return function Toe(){return LE||(LE=new Pn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(LE)),LE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return LV}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,c,l,u,h,f,g,m,b,w){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=b,this[15]=w,this.check()}setRowMajor(e,t,i,r,s,o,a,c,l,u,h,f,g,m,b,w){return this[0]=e,this[1]=s,this[2]=l,this[3]=g,this[4]=t,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=b,this[12]=r,this[13]=c,this[14]=f,this[15]=w,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Coe)}fromObject(e){return this.check()}fromQuaternion(e){return function toe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,c=r+r,l=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,b=s*o,w=s*a,L=s*c;n[0]=1-h-m,n[1]=u+L,n[2]=f-w,n[3]=0,n[4]=u-L,n[5]=1-l-m,n[6]=g+b,n[7]=0,n[8]=f+w,n[9]=g-b,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:s,near:o=hD,far:a=fD}=e;return a===1/0?function Ioe(n,e,t,i,r,s){const a=2*s/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*s;n[0]=2*s/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,s,o):function noe(n,e,t,i,r,s,o){var a=1/(t-e),c=1/(r-i),l=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(o+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*l,n[15]=0}(this,t,i,r,s,o,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function aoe(n,e,t,i){var r,s,o,a,c,l,u,h,f,g,m=e[0],b=e[1],w=e[2],L=i[0],V=i[1],ce=i[2],re=t[0],Ie=t[1],Ne=t[2];Math.abs(m-re)<Il&&Math.abs(b-Ie)<Il&&Math.abs(w-Ne)<Il?function qse(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-re,h=b-Ie,f=w-Ne,r=V*(f*=g=1/Math.hypot(u,h,f))-ce*(h*=g),s=ce*(u*=g)-L*f,o=L*h-V*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,c=f*r-u*o,l=u*s-h*r,(g=Math.hypot(a,c,l))?(a*=g=1/g,c*=g,l*=g):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=c,n[6]=h,n[7]=0,n[8]=o,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*m+s*b+o*w),n[13]=-(a*m+c*b+l*w),n[14]=-(u*m+h*b+f*w),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:s,near:o=hD,far:a=fD}=e;return function soe(n,e,t,i,r,s,o){var a=1/(e-t),c=1/(i-r),l=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(o+s)*l,n[15]=1}(this,t,i,r,s,o,a),this.check()}orthographic(e){const{fovy:t=Aoe,aspect:i=Soe,focalDistance:r=1,near:s=hD,far:o=fD}=e;FV(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return FV(t),function ioe(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,s),this.check()}determinant(){return function Kse(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8],u=n[9],h=n[10],f=n[11],g=n[12],m=n[13],b=n[14],w=n[15];return(e*o-t*s)*(h*w-f*b)-(e*a-i*s)*(u*w-f*m)+(e*c-r*s)*(u*b-h*m)+(t*a-i*o)*(l*w-f*g)-(t*c-r*o)*(l*b-h*g)+(i*c-r*a)*(l*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Xse(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return uD(this,this),this.check()}multiplyLeft(e){return Rf(this,e,this),this.check()}multiplyRight(e){return Rf(this,this,e),this.check()}rotateX(e){return DV(this,this,e),this.check()}rotateY(e){return function Zse(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-l*i,n[1]=o*r-u*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=s*i+l*r,n[9]=o*i+u*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return RV(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function Jse(n,e,t,i){var c,l,u,h,f,g,m,b,w,L,V,ce,re,Ie,Ne,st,dt,qe,ht,vt,Ct,ft,gt,Pt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Il||(r*=a=1/a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],g=e[2],m=e[3],w=e[5],L=e[6],V=e[7],re=e[9],Ie=e[10],Ne=e[11],ht=r*s*(u=1-l)-o*c,vt=s*s*u+l,Ct=o*s*u+r*c,ft=r*o*u+s*c,gt=s*o*u-r*c,Pt=o*o*u+l,n[0]=(h=e[0])*(st=r*r*u+l)+(b=e[4])*(dt=s*r*u+o*c)+(ce=e[8])*(qe=o*r*u-s*c),n[1]=f*st+w*dt+re*qe,n[2]=g*st+L*dt+Ie*qe,n[3]=m*st+V*dt+Ne*qe,n[4]=h*ht+b*vt+ce*Ct,n[5]=f*ht+w*vt+re*Ct,n[6]=g*ht+L*vt+Ie*Ct,n[7]=m*ht+V*vt+Ne*Ct,n[8]=h*ft+b*gt+ce*Pt,n[9]=f*ft+w*gt+re*Pt,n[10]=g*ft+L*gt+Ie*Pt,n[11]=m*ft+V*gt+Ne*Pt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return dD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return PE(this,this,e),this.check()}transform(e,t){return 4===e.length?(DE(t=E0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function loe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=aD(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return DE(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function jse(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:i=MV(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return DE(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let LE,FE;function FV(n){if(n>2*Math.PI)throw Error("expected radians")}function Yg(n,e){const t=E0([],e,n);return NV(t,t,1/t[3]),t}function BV(n,e){const t=n%e;return t<0?e+t:t}function pD(n,e,t){return n<e?e:n>t?t:n}const gD=Math.log2||function Roe(n){return Math.log(n)*Math.LOG2E};function Fu(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Bc=Math.PI,kV=Bc/4,sc=Bc/180,mD=180/Bc,qg=512,BE=4003e4,kE=85.051129,Ooe=1.5;function jE(n){const[e,t]=n;return Fu(Number.isFinite(e)),Fu(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[qg*(e*sc+Bc)/(2*Bc),qg*(Bc+Math.log(Math.tan(kV+t*sc*.5)))/(2*Bc)]}function Xg(n){const[e,t]=n,i=e/qg*(2*Bc)-Bc,r=2*(Math.atan(Math.exp(t/qg*(2*Bc)-Bc))-kV);return[i*mD,r*mD]}function _D(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Fu(Number.isFinite(e)&&Number.isFinite(t));const r=qg,s=Math.cos(e*sc),o=r/360,a=o/s,c=r/BE/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const u=sc*Math.tan(e*sc)/s,f=r/BE*u,g=f/a*c;l.unitsPerDegree2=[0,o*u/2,f],l.unitsPerMeter2=[g,0,g]}return l}function jV(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=_D({longitude:t,latitude:i,highPrecision:!0}),u=jE(n);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const h=Xg(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function UE(n){return 2*Math.atan(.5/n)*mD}function yD(n){return.5/Math.tan(.5*n*sc)}function VV(n,e){const[t,i,r=0]=n;return Fu(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Yg(e,[t,i,r,1])}function A0(n,e,t=0){const[i,r,s]=n;if(Fu(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Yg(e,[i,r,s,1]);const o=Yg(e,[i,r,0,1]),a=Yg(e,[i,r,1,1]),c=o[2],l=a[2];return PV([],o,a,c===l?0:((t||0)-c)/(l-c))}function HV(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=n,[[a,c],[l,u]]=i,h=function Foe(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Fu(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=jE([a,pD(u,-kE,kE)]),g=jE([l,pD(c,-kE,kE)]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],b=[e-h.left-h.right-2*Math.abs(o[0]),t-h.top-h.bottom-2*Math.abs(o[1])];Fu(b[0]>0&&b[1]>0);const w=b[0]/m[0],L=b[1]/m[1],Ie=Xg([(g[0]+f[0])/2+(h.right-h.left)/2/w,(g[1]+f[1])/2+(h.top-h.bottom)/2/L]),Ne=Math.min(s,gD(Math.abs(Math.min(w,L))));return Fu(Number.isFinite(Ne)),{longitude:Ie[0],latitude:Ie[1],zoom:Ne}}const GV=Math.PI/180;function zV(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Yg(i,[e,0,1,1]),s=Yg(i,[e,n.height,1,1]),l=Xg(PV([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(t),l}const gi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(gi,"IDENTITY",{get:()=>(ai.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Dl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},VE={common:0,meters:1,pixels:2},XV={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Uoe=Math.PI/180,Voe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],KV=[0,0,0],Hoe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Kd{constructor(e={}){we(this,"id",void 0),we(this,"x",void 0),we(this,"y",void 0),we(this,"width",void 0),we(this,"height",void 0),we(this,"padding",void 0),we(this,"isGeospatial",void 0),we(this,"zoom",void 0),we(this,"focalDistance",void 0),we(this,"position",void 0),we(this,"modelMatrix",void 0),we(this,"distanceScales",void 0),we(this,"scale",void 0),we(this,"center",void 0),we(this,"cameraPosition",void 0),we(this,"projectionMatrix",void 0),we(this,"viewMatrix",void 0),we(this,"viewMatrixUncentered",void 0),we(this,"viewMatrixInverse",void 0),we(this,"viewProjectionMatrix",void 0),we(this,"pixelProjectionMatrix",void 0),we(this,"pixelUnprojectionMatrix",void 0),we(this,"resolution",void 0),we(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Hoe,this.focalDistance=e.focalDistance||1,this.position=e.position||KV,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Dl.WEB_MERCATOR:Dl.WEB_MERCATOR_AUTO_OFFSET:Dl.IDENTITY}equals(e){return e instanceof Kd&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Wg(e.projectionMatrix,this.projectionMatrix)&&Wg(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=VV(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,s,o]=e,l=A0([r,t?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[u,h,f]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=jE(e);return t[1]=Ir(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Xg(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),s=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?_D({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Wse(n){return{left:$g(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:$g(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:$g(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:$g(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:$g(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:$g(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Noe(n){const{latitude:e}=n;Fu(Number.isFinite(e));const t=Math.cos(e*sc);return function Poe(n){return gD(n)}(BE*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||_D({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=KV;if(s&&(a=o?new Pn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new uo(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=Voe,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Pn).multiplyRight(t).translate(new uo(this.center).negate()),this.projectionMatrix=i||function Goe({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=n/e,l=t?(new Pn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new Pn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Ir((u+n-h)/2,0,n)-n/2,b=Ir((f+e-g)/2,0,e)-e/2;l[8]-=2*m/n,l[9]+=2*b/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Uoe,focalDistance:u,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Rf(h,h,this.projectionMatrix),Rf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=uD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function zse(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];dD(f,f,[this.width/2,-this.height/2,1]),PE(f,f,[1,-1,0]),Rf(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=uD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ai.warn("Pixel project matrix not invertible")()}}we(Kd,"displayName","Viewport");const zoe=/([0-9]+\.?[0-9]*)(%|px)/;function Jd(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=zoe.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function Zd(n,e){return n.relative?Math.round(n.position*e):n.position}function Kg(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Kg(i,r)))return!1}return!0}function Hs(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}class bD{constructor(e){we(this,"id",void 0),we(this,"viewportInstance",void 0),we(this,"_x",void 0),we(this,"_y",void 0),we(this,"_width",void 0),we(this,"_height",void 0),we(this,"_padding",void 0),we(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};Hs(!c||c instanceof Kd),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Jd(i),this._y=Jd(r),this._width=Jd(s),this._height=Jd(o),this._padding=a&&{left:Jd(a.left||0),right:Jd(a.right||0),top:Jd(a.top||0),bottom:Jd(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&Kg(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:Zd(this._x,e),y:Zd(this._y,t),width:Zd(this._width,e),height:Zd(this._height,t)};return this._padding&&(i.padding={left:Zd(this._padding.left,e),top:Zd(this._padding.top,t),right:Zd(this._padding.right,e),bottom:Zd(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Woe=(new Pn).lookAt({eye:[0,0,1]});function $oe({width:n,height:e,near:t,far:i,padding:r}){let s=-n/2,o=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:u=0,top:h=0,bottom:f=0}=r,g=Ir((l+n-u)/2,0,n)-n/2,m=Ir((h+e-f)/2,0,e)-e/2;s-=g,o-=g,a+=m,c+=m}return(new Pn).ortho({left:s,right:o,bottom:a,top:c,near:t,far:i})}class Yoe extends Kd{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(u,h),g=Math.pow(2,f);let m;if(u!==h){const b=Math.pow(2,u),w=Math.pow(2,h);m={unitsPerMeter:[b/g,w/g,1],metersPerUnit:[g/b,g/w,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Woe.clone().scale([g,g*(l?-1:1),g]),projectionMatrix:$oe({width:t||1,height:i||1,padding:c,near:r,far:s}),zoom:f,distanceScales:m})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=A0(t,this.pixelUnprojectionMatrix),s=NE([],this.projectFlat(e),OV([],i)),o=NE([],this.center,s);return{target:this.unprojectFlat(o)}}}class C0{constructor(e){we(this,"_inProgress",void 0),we(this,"_handle",void 0),we(this,"_timeline",void 0),we(this,"time",void 0),we(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const JV=()=>{},qoe=n=>n;class Koe{constructor(e){we(this,"getControllerState",void 0),we(this,"props",void 0),we(this,"propsInTransition",void 0),we(this,"transition",void 0),we(this,"onViewStateChange",void 0),we(this,"onStateChange",void 0),we(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=t,l=c(i/a),u=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new C0(e.timeline),this.onViewStateChange=e.onViewStateChange||JV,this.onStateChange=e.onStateChange||JV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),s=t.transitionInterpolator,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:t.transitionEasing||qoe,interpolator:s,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class Joe{constructor(e){we(this,"_propsToCompare",void 0),we(this,"_propsToExtract",void 0),we(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!Wg(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const s of this._propsToExtract)(s in e||s in t)&&(i[s]=e[s],r[s]=t[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];Hs(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const Zoe=["longitude","latitude","zoom","bearing","pitch"],Qoe=["longitude","latitude","zoom"];class HE extends Joe{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Zoe,required:Qoe},super(i.transitionProps),we(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=ME(e[s]||0,t[s]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...t,...r});Object.assign(r,s.panByPosition(t.aroundPosition,ME(e.around,t.around,i)))}return r}}const Qd={transitionDuration:0},GE=n=>1-(1-n)*(1-n),Jg_WHEEL=["wheel"],Jg_PAN=["panstart","panmove","panend"],Jg_PINCH=["pinchstart","pinchmove","pinchend"],Jg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Jg_DOUBLE_TAP=["doubletap"],Jg_KEYBOARD=["keydown"],Of={};class xD{constructor(e){we(this,"props",void 0),we(this,"state",{}),we(this,"transitionManager",void 0),we(this,"eventManager",void 0),we(this,"onViewStateChange",void 0),we(this,"onStateChange",void 0),we(this,"makeViewport",void 0),we(this,"_controllerState",void 0),we(this,"_events",{}),we(this,"_interactionState",{isDragging:!1}),we(this,"_customEvents",[]),we(this,"_eventStartBlocked",null),we(this,"_panMove",!1),we(this,"invertPan",!1),we(this,"dragMode","rotate"),we(this,"inertia",0),we(this,"scrollZoom",!0),we(this,"dragPan",!0),we(this,"dragRotate",!0),we(this,"doubleClickZoom",!0),we(this,"touchZoom",!0),we(this,"touchRotate",!1),we(this,"keyboard",!0),this.transitionManager=new Koe({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Jg_WHEEL,u&&i),this.toggleEvents(Jg_PAN,u&&(r||s)),this.toggleEvents(Jg_PINCH,u&&(a||c)),this.toggleEvents(Jg_TRIPLE_PAN,u&&c),this.toggleEvents(Jg_DOUBLE_TAP,u&&o),this.toggleEvents(Jg_KEYBOARD,u&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,Qd,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,Qd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:GE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Qd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:GE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,Qd,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Qd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:GE},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Of._startPinchRotation=e.rotation,Of._lastPinchEvent=e,this.updateViewport(i,Qd,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:Of._startPinchRotation-i})}return this.updateViewport(t,Qd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Of._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=Of;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:GE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Of._startPinchRotation=null,Of._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new HE({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:Qd}}class ZV{constructor(e,t){we(this,"_viewportProps",void 0),we(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class QV extends ZV{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:b,startZoomPosition:w,startZoom:L}=e;super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:h},{startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:b,startZoomPosition:w,startZoom:L}),we(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),Ir(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Ir(r[0],i,t),Ir(r[1],i,t)]:Ir(r,i,t),e.rotationX=Ir(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Gse(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class tae extends xD{constructor(...e){super(...e),we(this,"ControllerState",QV),we(this,"transition",{transitionDuration:300,transitionInterpolator:new HE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class nae extends QV{constructor(e){super(e),we(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(t)){let[o,a]=t;switch(this.zoomAxis){case"X":o=Ir(o+s,r,i);break;case"Y":a=Ir(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return Ir(t+s,r,i)}}class iae extends xD{constructor(...e){super(...e),we(this,"ControllerState",nae),we(this,"transition",{transitionDuration:300,transitionInterpolator:new HE(["target","zoom"])}),we(this,"dragMode","pan")}_onPanRotate(){return!1}}class ED extends bD{get ViewportType(){return Yoe}get ControllerType(){return iae}}we(ED,"displayName","OrthographicView");const AD=Math.PI/180;function rae({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Pn).lookAt({eye:a,up:o});c.rotateX(i*AD),"Z"===t?c.rotateZ(r*AD):c.rotateY(r*AD);const l=Math.pow(2,s)/n;return c.scale(l),c}class sae extends Kd{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=i?i[5]/2:yD(r);super({...e,longitude:void 0,viewMatrix:rae({height:t||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:u,position:o,zoom:l}),we(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,c,l]=A0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class eH extends bD{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return sae}get ControllerType(){return tae}}we(eH,"displayName","OrbitView");const T0="vs";function Ma(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const CD={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function aae(n){let e=tH(n);return"object"===e?n?"type"in n?Object.assign({},n,CD[n.type]):"value"in n?(e=tH(n.value),Object.assign({type:e},n,CD[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},CD[e])}function tH(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class TD{constructor(e){let{name:t,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:h,fragmentShader:f}=e;Ma("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function uae(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(u),o&&(this.uniforms=function oae(n){const e={};for(const t in n){const r=aae(n[t]);e[t]=r}return e}(o))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Ma(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ma(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=s.value}return t}}function dae(n){return function nH(n){const e={},t={};return MD({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(iH(n))}function MD(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<t)&&(r[s.name]=t);for(const s of e)s.dependencies&&MD({modules:s.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function iH(n,e){return n.map(t=>(t instanceof TD||(Ma("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Ma(t.name,"shader module has no name"),(t=new TD(t)).dependencies=iH(t.dependencies)),t))}const fae=7936,pae=7937,gae=7938,mae=35724,ID={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Pf={};function vae(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(ID).forEach(n=>{Pf[n]=n});const DD={};function rH(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=ID[e];if(Ma(i,e),!function hae(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in DD)return DD[e];const s=t.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),DD[e]=c,c}function zE(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function bae(n,e){const t=ID[e];Ma(t,e);const i=function _ae(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return Ma(!1===r||!0===r),r}(n,t))}const Sae={[T0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},WE="__LUMA_INJECT_DECLARATIONS__",sH=/void\s+main\s*\([^)]*\)\s*\{\n?/,oH=/}\n?[^{}]*$/,RD=[];function aH(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===T0;for(const s in t){const o=t[s];o.sort((c,l)=>c.order-l.order),RD.length=o.length;for(let c=0,l=o.length;c<l;++c)RD[c]=o[c].injection;const a="".concat(RD.join("\n"),"\n");switch(s){case"vs:#decl":r&&(n=n.replace(WE,a));break;case"vs:#main-start":r&&(n=n.replace(sH,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(oH,c=>a+c));break;case"fs:#decl":r||(n=n.replace(WE,a));break;case"fs:#main-start":r||(n=n.replace(sH,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(oH,c=>a+c));break;default:n=n.replace(s,c=>c+a)}}return n=n.replace(WE,""),i&&(n=n.replace(/\}\s*$/,s=>s+Sae[e])),n}function OD(n){const e={};return Ma(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}function Zg(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const cH=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Cae=[...cH,[Zg("attribute"),"in $1"],[Zg("varying"),"out $1"]],Tae=[...cH,[Zg("varying"),"in $1"]],lH=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Mae=[...lH,[Zg("in"),"attribute $1"],[Zg("out"),"varying $1"]],Iae=[...lH,[Zg("in"),"varying $1"]],PD="gl_FragColor",ND=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Dae=/void\s+main\s*\([^)]*\)\s*\{\n?/;function $E(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Nae="\n\n".concat(WE,"\n\n"),uH={[T0]:"vertex",fs:"fragment"};function dH(n,e){let{id:t,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:h}=e;Ma("string"==typeof i,"shader source must be a string");const f=r===T0,g=i.split("\n");let m=100,b="",w=i;0===g[0].indexOf("#version ")?(m=300,b=g[0],w=g.slice(1).join("\n")):b="#version ".concat(m);const L={};s.forEach(st=>{Object.assign(L,st.getDefines())}),Object.assign(L,o);let V=u?"".concat(b,"\n").concat(function jae(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(uH[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function kae(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(uH[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function wae(n){switch(function yae(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||fae),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||pae);return{gpuVendor:vae(t,i),vendor:t,renderer:i,version:n.getParameter(gae),shadingLanguageVersion:n.getParameter(mae)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function xae(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return zE(n,Pf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),zE(n,Pf.GLSL_DERIVATIVES)&&rH(n,Pf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),zE(n,Pf.GLSL_FRAG_DATA)&&rH(n,Pf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),zE(n,Pf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function Uae(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(L),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(b,"\n");const ce=function Hae(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),re={},Ie={},Ne={};for(const st in c){const dt="string"==typeof c[st]?{injection:c[st],order:0}:c[st],qe=st.match(/^(v|f)s:(#)?([\w-]+)$/);qe?qe[2]?"decl"===qe[3]?Ie[st]=[dt]:Ne[st]=[dt]:re[st]=[dt]:Ne[st]=[dt]}for(const st of s){h&&st.checkDeprecations(w,h),V+=st.getModuleSource(r,m);const qe=st.injections[r];for(const ht in qe){const vt=ht.match(/^(v|f)s:#([\w-]+)$/);if(vt){const ft="decl"===vt[2]?Ie:Ne;ft[ht]=ft[ht]||[],ft[ht].push(qe[ht])}else re[ht]=re[ht]||[],re[ht].push(qe[ht])}}return V+=Nae,V=aH(V,r,Ie),V+=function Vae(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+="  ".concat(o.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(ce[r],re),V+=w,V=aH(V,r,Ne),V=function Rae(n,e,t){switch(e){case 300:return t?$E(n,Cae):function Oae(n){const e=(n=$E(n,Tae)).match(ND);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(PD,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(Dae,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(PD,"\\b"),"g"),t)}return n}(n);case 100:return t?$E(n,Mae):function Pae(n){const e=(n=$E(n,Iae)).match(ND);if(e){const t=e[1];n=n.replace(ND,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),PD)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(V,l?100:m,f),V}function Bae(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const rn=new v0({id:"luma.gl"});function Fo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const zae="Requires WebGL2";function YE(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function Qn(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function qE(n){return Fo(YE(n),"Invalid WebGLRenderingContext"),n}function ho(n){return Fo(Qn(n),zae),n}const M0={};const I0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(I0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Nf=function(e){const t=this;this.gl=e,function Xae(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(M0[i]=!0)}while(0!==i);for(i in M0)if(M0[i])return delete M0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=t.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Yae(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Nf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Nf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new I0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Nf.prototype.createVertexArrayOES=function(){const e=new I0(this);return this.vertexArrayObjects.push(e),e},Nf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Nf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof I0&&e.hasBeenBound&&e.ext===this)},Nf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function qae(n,e){M0[n]=!0,void 0!==e&&function $ae(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=r?r.attribs[c]:null;if((!r||l.enabled!==u.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==u.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==u.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const hH="OES_element_index",fH="WEBGL_draw_buffers",pH="WEBGL_debug_renderer_info",pr=n=>Qn(n)?void 0:0,oce={3074:n=>Qn(n)?void 0:36064,35723:n=>Qn(n)?void 0:4352,35977:pr,32937:pr,36795:(n,e)=>{const t=Qn(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(pH);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(pH);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:pr,35071:pr,37447:pr,36063:(n,e)=>{if(!Qn(n)){const t=n.getExtension(fH);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:pr,35374:pr,35377:pr,34852:n=>{if(!Qn(n)){const e=n.getExtension(fH);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(hH)?2147483647:65535,33001:n=>n.getExtension(hH)?16777216:65535,33e3:n=>16777216,37157:pr,35373:pr,35657:pr,36183:pr,37137:pr,34045:pr,35978:pr,35979:pr,35968:pr,35376:pr,35375:pr,35659:pr,37154:pr,35371:pr,35658:pr,35076:pr,35077:pr,35380:pr},gH="ANGLE_instanced_arrays",mH={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Fo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[gH]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Fo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Fo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Fo(!1)},deleteQuery:()=>{Fo(!1)},beginQuery:()=>{Fo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},LD={readBuffer:(n,e,t)=>{Qn(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function fce(n,e){return{webgl2:Qn(n),ext:n.getExtension(e)}}(n,gH);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!Qn(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>Qn(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function ace(n,e,t){const i=oce[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function yce(n,e){let{extension:t,target:i,target2:r}=e;const s=mH[t];Fo(s);const{meta:o={}}=s,{suffix:a=""}=o,c=n.getExtension(t);for(const l of Object.keys(s)){const u="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[u]?h=function(){return c[u](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function pce(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function Kae(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Nf(this)),this.__OESVertexArrayObject))}}(n),function gce(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function _ce(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&yce(n,{extension:t,target:n.luma,target2:n})}(n,mH),function mce(n,e){let{target:t,target2:i}=e;Object.keys(LD).forEach(r=>{if("function"==typeof LD[r]){const s=n[r]?n[r].bind(n):()=>{},o=LD[r].bind(null,n,s);t[r]=o,i[r]=o}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const FD={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},eh=(n,e,t)=>e?n.enable(t):n.disable(t),_H=(n,e,t)=>n.hint(t,e),Ia=(n,e,t)=>n.pixelStorei(t,e);function D0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const wce={3042:eh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:eh,2885:(n,e)=>n.cullFace(e),2929:eh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:eh,35723:_H,36006:(n,e)=>{const t=Qn(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:_H,2849:(n,e)=>n.lineWidth(e),32823:eh,32824:"polygonOffset",10752:"polygonOffset",35977:eh,32938:"sampleCoverage",32939:"sampleCoverage",3089:eh,3088:(n,e)=>n.scissor(...e),2960:eh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:Ia,3317:Ia,37440:Ia,37441:Ia,37443:Ia,3330:Ia,3332:Ia,3331:Ia,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:Ia,32878:Ia,3316:Ia,3315:Ia,32877:Ia,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=D0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=D0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=D0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=D0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=D0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function Lr(n,e,t){return void 0!==e[n]?e[n]:t[n]}const xce={blendEquation:(n,e,t)=>n.blendEquationSeparate(Lr(32777,e,t),Lr(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Lr(32969,e,t),Lr(32968,e,t),Lr(32971,e,t),Lr(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Lr(32824,e,t),Lr(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Lr(32938,e,t),Lr(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Lr(2962,e,t),Lr(2967,e,t),Lr(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Lr(34816,e,t),Lr(36003,e,t),Lr(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Lr(2964,e,t),Lr(2965,e,t),Lr(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Lr(34817,e,t),Lr(34818,e,t),Lr(34819,e,t))},yH={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Rl=(n,e)=>n.isEnabled(e),vH={3042:Rl,2884:Rl,2929:Rl,3024:Rl,32823:Rl,32926:Rl,32928:Rl,3089:Rl,2960:Rl,35977:Rl};function bH(n){for(const e in n)return!1;return!0}function Ece(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function wH(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Ace(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Cce{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function Mce(n,e){if("number"==typeof(e=e||FD)){const r=e,s=vH[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=vH[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},FD),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Fo(this.stateStack.length>0),Bu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Fo(void 0!==s);const o=e[s],a=this.cache[s];Ece(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function xH(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(Fo(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new Cce(n,{copyState:i}),function Sce(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in yH)Ace(n,s,yH[s]);wH(n,"getParameter"),wH(n,"isEnabled")}return n.state.enable=t,n}function EH(n){Fo(n.state),n.state.pop()}function Bu(n,e){if(Fo(YE(n),"setParameters requires a WebGL context"),bH(e))return;const t={};for(const r in e){const s=Number(r),o=wce[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,xce[r])(n,e,i)}function oc(n,e,t){if(bH(e))return t(n);const{nocatch:i=!0}=e;let r;if(function Tce(n){n.state||xH(n,{copyState:!1}),n.state.push()}(n),Bu(n,e),i)r=t(n),EH(n);else try{r=t(n)}finally{EH(n)}return r}function Qg(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function BD(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Rce(n,e,t,i,r){const s=AH(n[0],e,t);let o=SH(n[1],e,i,r),a=AH(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=SH(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,Qg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function AH(n,e,t){return Math.min(Math.round(n*e),t-1)}function SH(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const kD=Ml(),Oce=kD&&typeof document<"u",CH={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function TH(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fo(kD,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},CH,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function Fce(n){let s,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(Oce&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:t,onError:i});return r=function Lce(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,n),r?(r=jD(r,n),function Bce(n){const e=Qn(n)?"WebGL2":"WebGL1",t=function Pce(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";rn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function jD(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function kce(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},CH,e);const{manageState:t,debug:i}=e;return t&&xH(n,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return rn.log(1,...s)()}}),kD&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),rn.level=Math.max(rn.level,1)):rn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function MH(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class IH{constructor(e,t){we(this,"name",void 0),we(this,"type",void 0),we(this,"sampleSize",1),we(this,"time",void 0),we(this,"count",void 0),we(this,"samples",void 0),we(this,"lastTiming",void 0),we(this,"lastSampleTime",void 0),we(this,"lastSampleCount",void 0),we(this,"_count",0),we(this,"_time",0),we(this,"_samples",0),we(this,"_startTime",0),we(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=MH(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(MH()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class UD{constructor(e){we(this,"id",void 0),we(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof IH?e:new IH(t,i)),this.stats[t]}}const R0="8.5.21",Lf=new class Vce{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new UD({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==R0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(R0));function qt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function VD(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return qt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function th(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(Ml()&&rn.log(1,"luma.gl ".concat(R0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:R0,version:R0,log:rn,stats:Lf,globals:{modules:{},nodeIO:{}}}),globalThis;const HD={};function na(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";HD[n]=HD[n]||1;const e=HD[n]++;return"".concat(n,"-").concat(e)}function DH(n){return qt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function em(n){let e=!0;for(const t in n){e=!1;break}return e}function RH(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw rn.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const tm="Resource subclass must define virtual methods";class ku{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qE(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||na(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qt(e=VD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Qn(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=Qn(this.gl),o={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?th(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=th(this.gl,o[h]))}}return o}setParameter(e,t){qt(e=VD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Qn(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=VD(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return RH(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(tm)}_deleteHandle(){throw new Error(tm)}_bindHandle(e){throw new Error(tm)}_getOptsFromHandle(){throw new Error(tm)}_getParameter(e,t){throw new Error(tm)}_setParameter(e,t){throw new Error(tm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Lf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Lf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Lf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Lf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Hce="Failed to deduce GL constant from typed array";function GD(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Hce)}}function O0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function zce(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:o,width:r,height:s}}function zD(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";rn.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];rn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];rn.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Wce={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},$ce={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ia{static getBytesPerElement(e){return O0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return qt(e.size),O0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new ia(Wce,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ia.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ia.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=zD("Accessor",e,$ce),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const PH={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Yce={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:PH},qce={removedProps:PH};class Wi extends ku{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ia.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ia.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=zD("Buffer",e,Yce),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=zD("Buffer",e,qce))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ia(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;qt(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(ho(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return ho(o),o.bindBuffer(36662,t.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ho(this.gl);const s=O0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const u=Math.min(o,c);return r=r||u,qt(r<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(qt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;qt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=GD(e);return qt(s),this.setAccessor(new ia(this.accessor,{type:s})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;qt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/O0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ia(this.accessor,{type:GD(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return rn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return rn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return rn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return rn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ia(this.accessor,e),this}}const WD={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},NH={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},LH={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Jce=[9729,9728],FH=globalThis.WebGLBuffer||function(){};class Ff extends ku{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function Xce(n,e){const t=WD[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=Qn(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function Kce(n,e){const t=WD[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=na("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(V=>this.initialize(Object.assign({},e,{pixels:V,data:V}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;t||(t=r);let{width:h,height:f,dataFormat:g,type:m,compressed:b=!1,mipmaps:w=!0}=e;const{depth:L=0}=e;return({width:h,height:f,compressed:b,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:b,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=L,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),w&&this._isNPOT()&&(rn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(c)),this.mipmaps=w,this.setImageData({data:t,width:h,height:f,depth:L,format:s,type:m,dataFormat:g,border:o,mipmaps:w,parameters:l,compressed:b}),w&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(rn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),oc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;l||(l=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:l,width:h,height:f}));const{gl:b}=this;b.bindTexture(this.target,this.handle);let w=null;({data:l,dataType:w}=this._getDataType({data:l,compressed:m}));let L,V=0;return oc(this.gl,c,()=>{switch(w){case"null":b.texImage2D(t,r,s,h,f,o,g,u,l);break;case"typed-array":b.texImage2D(t,r,s,h,f,o,g,u,l,a);break;case"buffer":L=ho(b),L.bindBuffer(35052,l.handle||l),L.texImage2D(t,r,s,h,f,o,g,u,a),L.bindBuffer(35052,null);break;case"browser-object":Qn(b)?b.texImage2D(t,r,s,h,f,o,g,u,l):b.texImage2D(t,r,s,g,u,l);break;case"compressed":for(const[ce,re]of l.entries())b.compressedTexImage2D(t,ce,re.format,re.width,re.height,o,re.data),V+=re.levelSize;break;default:qt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===w?V:l&&l.byteLength?l.byteLength:this.width*this.height*(NH[this.dataFormat]||4)*(LH[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:b=this.border,parameters:w={}}=e;if(({type:h,dataFormat:f,compressed:g,width:a,height:c}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:r,width:a,height:c})),qt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const L=r;r=L.data,a=L.shape[0],c=L.shape[1]}r instanceof Wi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),oc(this.gl,w,()=>{if(g)this.gl.compressedTexSubImage2D(t,l,s,o,a,c,u,r);else if(null===r)this.gl.texSubImage2D(t,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,s,o,a,c,f,h,r,m);else if(r instanceof FH){const L=ho(this.gl);L.bindBuffer(35052,r),L.texSubImage2D(t,l,s,o,a,c,f,h,m),L.bindBuffer(35052,null)}else Qn(this.gl)?ho(this.gl).texSubImage2D(t,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(t,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return rn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Wi?{data:t.handle,dataType:"buffer"}:t instanceof FH?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=WD[t];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},qt(r,"Could not deduced texture size"),qt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),qt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:qt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Qn(this.gl)||!this.width||!this.height||DH(this.width)&&DH(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Jce.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Zce(n,e){return qt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Gs extends Ff{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Ff.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qE(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Zce(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Bf="EXT_color_buffer_float",BH={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Bf,bpp:2},33327:{gl2:Bf,bpp:4},34842:{gl2:Bf,bpp:8},33326:{gl2:Bf,bpp:4},33328:{gl2:Bf,bpp:8},34836:{gl2:Bf,bpp:16},35898:{gl2:Bf,bpp:4}};class nm extends ku{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function Qce(n,e,t){const i=t[e];if(!i)return!1;const r=Qn(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,BH)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:s=0}=e;return qt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Qn(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*BH[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const kH=6144,HH="clear: bad arguments";function YD(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),qt(0!==o,HH),oc(n,s,()=>{n.clear(o)})}const qD=[34069,34070,34071,34072,34073,34074];let sle=(()=>{class n extends Ff{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qE(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return kt(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t;const{gl:h}=i,f=o||a,g=yield Promise.all(qD.map(m=>{const b=f[m];return Promise.all(Array.isArray(b)?b:[b])}));i.bind(),qD.forEach((m,b)=>{g[b].length>1&&!1!==i.opts.mipmaps&&rn.warn("".concat(i.id," has mipmap and multiple LODs."))(),g[b].forEach((w,L)=>{r&&s?h.texImage2D(m,L,l,r,s,c,l,u,w):h.texImage2D(m,L,l,l,u,w)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,u,f):h.texImage2D(i,0,l,l,u,f),this}}return n.FACES=qD,n})();class ole extends Ff{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Qn(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ho(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:u=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),oc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,h),h instanceof Wi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,u))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(NH[this.dataFormat]||4)*(LH[this.type]||1),"Texture"),this.loaded=!0,this}}function cle(n,e){const{gl:t,width:i,height:r,id:s}=n;return new fs(t,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:n}}))}function XE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=P0(n);qt(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,c=c||u.height,36064===s&&null===g&&(s=1028),qt(m[s]),l=l||m[s].type,o=function ule(n,e,t,i,r){if(n)return n;const s=O0(e=e||5121,{clamped:!1}),o=function rle(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return qt(!1),0}}(t);return new s(i*r*o)}(o,l,r,a,c),l=l||GD(o);const b=f.bindFramebuffer(36160,g);return f.readPixels(t,i,a,c,r,l,o),f.bindFramebuffer(36160,b||null),h&&u.delete(),o}function XD(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=XE(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=zce({data:i,width:r,height:s}));!function Gce(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:s}=n;const o=t*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function P0(n){return n instanceof fs?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:cle(n),deleteFramebuffer:!0}}const GH={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function dle(n){const e=new Gs(n,{format:6408,type:5126,dataFormat:6408}),t=new fs(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},hle=2;function KD(n,e){return zH(n,e)}function zH(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>WH(n,t))}function WH(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function ple(n,e){const t=GH[e];let i;qt(t,e);const r=Qn(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!n.getExtension(s)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:qt(!1);return i}(n,e)),n.luma.caps[e]||rn.log(hle,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}const $H="Multiple render targets not supported";class fs extends ku{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new fs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ho(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ho(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:u}=e;if(qt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(s,o,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(t,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return qt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&rn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){qt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof nm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,h=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function mle(n){return(fs.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&YD(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,c)=>{!function ile(n){let{framebuffer:e=null,buffer:t=kH,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ho(n),oc(n,{framebuffer:e},()=>{switch(t){case kH:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:qt(!1,HH)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return rn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return rn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return rn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return rn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return rn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return rn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:s,height:o}=e;const a=ho(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=th(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[t?th(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?th(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(XD(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>rn.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=XD(this,{targetMaxHeight:100});return rn.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new Gs(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new nm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new nm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&qt(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof nm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:ho(o).framebufferTextureLayer(36160,t,i.target,s,r);break;case 34067:const c=function gle(n){return n<34069?n+34069:n}(r);o.framebufferTexture2D(36160,t,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,t,3553,i.handle,s);break;default:qt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function Wae(n){return Qn(n)?n:null}(this.gl);t?t.readBuffer(e):qt(36064===e||1029===e,$H),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=ho(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):qt(1===e.length&&(36064===e[0]||1029===e[0]),$H)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function fle(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in GH)void 0===n.luma.caps[e]&&(n.luma.caps[e]=WH(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}fs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const yle={5126:yr.bind(null,"uniform1fv",Da,1,fo),35664:yr.bind(null,"uniform2fv",Da,2,fo),35665:yr.bind(null,"uniform3fv",Da,3,fo),35666:yr.bind(null,"uniform4fv",Da,4,fo),5124:yr.bind(null,"uniform1iv",nh,1,fo),35667:yr.bind(null,"uniform2iv",nh,2,fo),35668:yr.bind(null,"uniform3iv",nh,3,fo),35669:yr.bind(null,"uniform4iv",nh,4,fo),35670:yr.bind(null,"uniform1iv",nh,1,fo),35671:yr.bind(null,"uniform2iv",nh,2,fo),35672:yr.bind(null,"uniform3iv",nh,3,fo),35673:yr.bind(null,"uniform4iv",nh,4,fo),35674:yr.bind(null,"uniformMatrix2fv",Da,4,ju),35675:yr.bind(null,"uniformMatrix3fv",Da,9,ju),35676:yr.bind(null,"uniformMatrix4fv",Da,16,ju),35678:zs,35680:zs,5125:yr.bind(null,"uniform1uiv",KE,1,fo),36294:yr.bind(null,"uniform2uiv",KE,2,fo),36295:yr.bind(null,"uniform3uiv",KE,3,fo),36296:yr.bind(null,"uniform4uiv",KE,4,fo),35685:yr.bind(null,"uniformMatrix2x3fv",Da,6,ju),35686:yr.bind(null,"uniformMatrix2x4fv",Da,8,ju),35687:yr.bind(null,"uniformMatrix3x2fv",Da,6,ju),35688:yr.bind(null,"uniformMatrix3x4fv",Da,12,ju),35689:yr.bind(null,"uniformMatrix4x2fv",Da,8,ju),35690:yr.bind(null,"uniformMatrix4x3fv",Da,12,ju),35678:zs,35680:zs,35679:zs,35682:zs,36289:zs,36292:zs,36293:zs,36298:zs,36299:zs,36300:zs,36303:zs,36306:zs,36307:zs,36308:zs,36311:zs},vle={},ble={},wle={},YH=[0];function JD(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(YH[0]=n,n=YH);const r=n.length;if(r%e&&rn.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Da(n,e){return JD(n,e,Float32Array,vle)}function nh(n,e){return JD(n,e,Int32Array,ble)}function KE(n,e){return JD(n,e,Uint32Array,wle)}function qH(n,e,t){const i=yle[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function xle(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function Ale(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function Cle(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Ff||n instanceof nm)||n instanceof fs&&!!n.texture}function Sle(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function zs(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function yr(n,e,t,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,t),u=l.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{qt(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,n,a,l),r.set(l)),h}}function fo(n,e,t,i){n[e](t,i)}function ju(n,e,t,i){n[e](t,!1,i)}function JE(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function KH(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();t+=JH("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function JH(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class N0 extends ku{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return qt(!1),"unknown"}}constructor(e,t){qE(e),qt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:JE(t.source,null)||t.id||na("unnamed ".concat(N0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=JE(t,null);i&&(this.id=na(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(N0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return JE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function XH(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||JE(e)||"(unnamed)",c="".concat(function Ile(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==g?s[m]=h:o[m]=h}const l=function Dle(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return JH(a,r-a.length)+t+s})}(e);return{shaderName:c,errors:KH(s,l),warnings:KH(o,l)}}(i,this.source,this.shaderType,this.id);throw rn.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),rn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class ZD extends N0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class QD extends N0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ole=5120,Ple=5121,Nle=5122,Lle=5123,As=5126,L0=5124,F0=5125,eR={[As]:[As,1,"float"],35664:[As,2,"vec2"],35665:[As,3,"vec3"],35666:[As,4,"vec4"],[L0]:[L0,1,"int"],35667:[L0,2,"ivec2"],35668:[L0,3,"ivec3"],35669:[L0,4,"ivec4"],[F0]:[F0,1,"uint"],36294:[F0,2,"uvec2"],36295:[F0,3,"uvec3"],36296:[F0,4,"uvec4"],35670:[As,1,"bool"],35671:[As,2,"bvec2"],35672:[As,3,"bvec3"],35673:[As,4,"bvec4"],35674:[As,8,"mat2"],35685:[As,8,"mat2x3"],35686:[As,8,"mat2x4"],35675:[As,12,"mat3"],35687:[As,12,"mat3x2"],35688:[As,12,"mat3x4"],35676:[As,16,"mat4"],35689:[As,16,"mat4x2"],35690:[As,16,"mat4x3"]};function i4(n){const e=eR[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function r4(n,e){switch(n){case Ole:case Ple:case Nle:case Lle:n=As}for(const t in eR){const[i,r,s]=eR[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class sue{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Qn(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=i4(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new ia(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=i4(i),c={location:e,name:t,accessor:new ia({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const oue=35981,aue=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class o4 extends ku{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",aue),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=oue}=e;return this.hash=t||"",this.vs="string"==typeof i?new ZD(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new QD(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,qt(this.vs instanceof ZD),qt(this.fs instanceof QD),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ho(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new sue(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:b={},uniforms:w,samplers:L}=e;if((w||L)&&(rn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(w||{})),rn.priority>=t){const V=m?m.id:"default",ce="mode=".concat(th(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(th(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(V);rn.log(t,ce)()}return qt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===u||(f.bindForDraw(r,u,()=>{if(void 0!==m&&(b=Object.assign({},b,{framebuffer:m})),g){const V=function n4(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return qt(!1),0}}(i);g.begin(V)}this._bindTextures(),oc(this.gl,b,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,u):c&&Qn(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),g&&g.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rn.priority>=2&&function Ele(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!Ale(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof fs&&(s=s.texture),s instanceof Ff)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&Sle(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new ZD({handle:r});break;case 35632:i.fs=new QD({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=na(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),rn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),rn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||rn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=xle(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=qH(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=qH(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class B0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new B0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(t),h=this._getHash(i),f=l.map(ce=>this._getHash(ce.name)).sort(),g=o.map(ce=>this._getHash(ce)),m=Object.keys(r).sort(),b=Object.keys(s).sort(),w=[],L=[];for(const ce of m)w.push(this._getHash(ce)),w.push(this._getHash(r[ce]));for(const ce of b)L.push(this._getHash(ce)),L.push(this._getHash(s[ce]));const V="".concat(u,"/").concat(h,"D").concat(w.join("/"),"M").concat(f.join("/"),"I").concat(L.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[V]){const ce=function Fae(n,e){const{vs:t,fs:i}=e,r=dae(e.modules||[]);return{gl:n,vs:dH(n,Object.assign({},e,{source:t,type:T0,modules:r})),fs:dH(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Bae(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[V]=new o4(this.gl,{hash:V,vs:ce.vs,fs:ce.fs,varyings:o,bufferMode:a}),this._getUniforms[V]=ce.getUniforms||(re=>{}),this._useCounts[V]=0}return this._useCounts[V]++,this._programCache[V]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;t[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}const cue=[255,255,255],lue=1;let uue=0;class a4{constructor(e={}){we(this,"id",void 0),we(this,"color",void 0),we(this,"intensity",void 0),we(this,"type","ambient");const{color:t=cue}=e,{intensity:i=lue}=e;this.id=e.id||"ambient-".concat(uue++),this.color=t,this.intensity=i}}const due=[255,255,255],hue=1,fue=[0,0,-1];let pue=0;class c4{constructor(e={}){we(this,"id",void 0),we(this,"color",void 0),we(this,"intensity",void 0),we(this,"type","directional"),we(this,"direction",void 0),we(this,"shadow",void 0);const{color:t=due}=e,{intensity:i=hue}=e,{direction:r=fue}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(pue++),this.color=t,this.intensity=i,this.type="directional",this.direction=new uo(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class gue{constructor(e,t={id:"pass"}){we(this,"id",void 0),we(this,"gl",void 0),we(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class QE extends gue{constructor(...e){super(...e),we(this,"_lastRenderIndex",-1)}render(e){return Bu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function _ue(n){Bu(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const u=[];for(const h of r){const f=s&&s[h.id];o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const b of m){const w=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:b,view:f,pass:e.pass,layers:e.layers},g);u.push(w)}}return u}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=l4(this._lastRenderIndex+1),u={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<t.length;f++){const g=t[f],m=this._shouldDrawLayer(g,u,r,h),b={shouldDrawLayer:m};m&&(b.layerRenderIndex=l(g,m),b.moduleParameters=this._getModuleParameters(g,o,i,a),b.layerParameters=this.getLayerParameters(g,f,e)),c[f]=b}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function mue(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,s=e&&e.devicePixelRatio||Qg(n);return[i.x*s,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;oc(e,{scissorTest:!0,scissor:l},()=>YD(e,h))}const u={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Bu(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:b,layerParameters:w}=c[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),b.viewport=o;try{f._drawLayer({moduleParameters:b,uniforms:{layerIndex:m},parameters:w})}catch(L){f.raiseError(L,"drawing ".concat(f," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(t))return!1;t.layer=o,o=o.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Qg(this.gl)});if(t)for(const c of t){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,t),r)}}function l4(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const u=t[c]=t[c]||l4(e[c],e);l=u(r,s),t[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),t[a]=null):l=n;return s&&l>=n&&(n=l+1),e[a]=l,l};return i}class yue extends QE{constructor(e,t){super(e,t),we(this,"shadowMap",void 0),we(this,"depthBuffer",void 0),we(this,"fbo",void 0),this.shadowMap=new Gs(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new nm(e,{format:33189,width:1,height:1}),this.fbo=new fs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;oc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Qg(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const u4="#define SMOOTH_EDGE_RADIUS 0.5",xue={name:"geometry",vs:"\n".concat(u4,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(u4,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Eue=Object.keys(gi).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(gi[n],";")).join(""),Aue=Object.keys(Dl).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Dl[n],";")).join(""),Sue=Object.keys(VE).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(VE[n],";")).join(""),Cue="".concat(Eue,"\n").concat(Aue,"\n").concat(Sue,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function Tue(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function eA(n){let t,e={};return i=>{for(const r in i)if(!Tue(i[r],e[r])){t=n(i),e=i;break}return t}}const d4=[0,0,0,0],Mue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],h4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Iue=[0,0,0],f4=[0,0,0],Due=eA(function Pue({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Rue(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=d4,c=d4,l=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=p4(n,e,t);return f&&(c=n.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=E0([],c,o),s=i||s,o=Rf([],r,s),o=Rf([],o,Mue)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(n,t,i),u=n.getDistanceScales(),h=[n.width*e,n.height*e],f=E0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Iue,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:h4,project_uCameraPosition:a};if(l){const m=n.getDistanceScales(l);switch(t){case gi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case gi.LNGLAT:case gi.LNGLAT_OFFSETS:n._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case gi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function p4(n,e,t=f4){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,s=!0;switch(r=e===gi.LNGLAT_OFFSETS||e===gi.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Dl.WEB_MERCATOR:(e===gi.LNGLAT||e===gi.CARTESIAN)&&(r=[0,0,0],s=!1);break;case Dl.WEB_MERCATOR_AUTO_OFFSET:e===gi.LNGLAT?i=r:e===gi.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Dl.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case Dl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const Nue={},tR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},xue],vs:Cue,getUniforms:function Lue(n=Nue){return"viewport"in n?function Oue({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=gi.DEFAULT,coordinateOrigin:r=f4,autoWrapLongitude:s=!1}){i===gi.DEFAULT&&(i=n.isGeospatial?gi.LNGLAT:gi.CARTESIAN);const o=Due({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||h4,o}(n):{}}},kue=eA(function Gue({viewport:n,center:e}){return new Pn(n.viewProjectionMatrix).invert().transform(e)}),jue=eA(function zue({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function Hue(n,e){const[t,i,r]=n,s=A0([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new uo(n.center).negate()),c=s.map(u=>a.transform(u)),l=(new Pn).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});t.push(l.multiplyRight(o))}return t}),Uue=[0,0,0,1],Vue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],nR={name:"shadow",dependencies:[tR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function Wue(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||Uue,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=kue({viewport:n.viewport,center:e.project_uCenter}),s=[],o=jue({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new uo(n.viewport.center).negate());e.project_uCoordinateSystem===gi.LNGLAT&&e.project_uProjectionMode===Dl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(Vue),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},$ue={color:[255,255,255],intensity:1},g4=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Yue=[0,0,0,200/255];class iR{constructor(e={}){we(this,"id","lighting-effect"),we(this,"props",null),we(this,"shadowColor",Yue),we(this,"shadow",void 0),we(this,"ambientLight",null),we(this,"directionalLights",[]),we(this,"pointLights",[]),we(this,"shadowPasses",[]),we(this,"shadowMaps",[]),we(this,"dummyShadowMap",null),we(this,"programManager",void 0),we(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=B0.getDefaultProgramManager(e),nR&&this.programManager.addDefaultModule(nR)),this.dummyShadowMap||(this.dummyShadowMap=new Gs(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(nR),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Pn).lookAt({eye:new uo(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new yue(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new a4($ue),this.directionalLights.push(new c4(g4[0]),new c4(g4[1])))}}let que=1,Xue=1;class m4{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=que++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Xue++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const tA=Symbol.for("component"),om=Symbol.for("asyncPropDefaults"),kf=Symbol.for("asyncPropOriginal"),ih=Symbol.for("asyncPropResolved");let rR={};function po(n,e,t,i){ai.level>0&&rR[n]&&rR[n].call(null,e,t,i)}function sR(n,e=(()=>!0)){return Array.isArray(n)?_4(n,e,[]):e(n)?[n]:[]}function _4(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?_4(r,e,t):e(r)&&t.push(r)}return t}function Jue({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const kc=n=>"function"==typeof n,rh=n=>null!==n&&"object"==typeof n,v4=n=>rh(n)&&n.constructor==={}.constructor,Zue=n=>n&&"function"==typeof n[Symbol.iterator],Que=n=>n&&"function"==typeof n[Symbol.asyncIterator],am=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,cm=n=>typeof Blob<"u"&&n instanceof Blob,ede=n=>n&&"object"==typeof n&&n.isBuffer,b4=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||rh(n)&&kc(n.tee)&&kc(n.cancel)&&kc(n.getReader))(n)||(n=>rh(n)&&kc(n.read)&&kc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function w4(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function oR(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function aR(n){var e,t;let i;return w4(n,"null loader"),w4(oR(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let cR="";const lR={},ode=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,ade=/^([-\w.]+\/[-\w.+]+)/;function cde(n){const e=ade.exec(n);return e?e[1]:n}function x4(n){const e=ode.exec(n);return e?e[1]:""}const lde=/\?.*/;function nA(n){if(am(n)){const e=uR(n.url||"");return{url:e,type:cde(n.headers.get("content-type")||"")||x4(e)}}return cm(n)?{url:uR(n.name||""),type:n.type||""}:"string"==typeof n?{url:uR(n),type:x4(n)}:{url:"",type:""}}function uR(n){return n.replace(lde,"")}function E4(n){return dR.apply(this,arguments)}function dR(){return dR=kt(function*(n){if(am(n))return n;const e={},t=function ude(n){return am(n)?n.headers["content-length"]||-1:cm(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=nA(n);r&&(e["content-type"]=r);const s=yield function fde(n){return pR.apply(this,arguments)}(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),dR.apply(this,arguments)}function hR(){return hR=kt(function*(n){if(!n.ok){const e=yield function hde(n){return fR.apply(this,arguments)}(n);throw new Error(e)}}),hR.apply(this,arguments)}function fR(){return fR=kt(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),fR.apply(this,arguments)}function pR(){return pR=kt(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function pde(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),pR.apply(this,arguments)}function A4(n,e){return gR.apply(this,arguments)}function gR(){return gR=kt(function*(n,e){if("string"==typeof n){n=function sde(n){for(const e in lR)n.startsWith(e)&&(n=n.replace(e,lR[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(cR).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield E4(n)}),gR.apply(this,arguments)}const S4=new v0({id:"loaders.gl"});class gde{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const C4=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),T4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),M4=(T4&&parseFloat(T4[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class mde{constructor(){we(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:C4,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),_de={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function mR(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const _R=()=>{const n=mR();return n.globalOptions=n.globalOptions||{...M4},n.globalOptions};function yde(n,e,t,i){return t=t||[],function vde(n,e){D4(n,null,M4,_de,e);for(const t of e)D4(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function R4(n,e,t){const r={...n.options||{}};return function wde(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new gde),O4(r,_R()),O4(r,e),r}(e,n,i)}function I4(n,e){const t=_R(),i=n||t;return"function"==typeof i.fetch?i.fetch:rh(i.fetch)?r=>A4(r,i):null!=e&&e.fetch?e?.fetch:A4}function D4(n,e,t,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in n){const c=!e&&rh(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)S4.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=bde(a,r);S4.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function bde(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function O4(n,e){for(const t in e)t in e&&(n[t]=v4(e[t])&&v4(n[t])?{...n[t],...e[t]}:e[t])}function Pl(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const xde="3.2.13",Nl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Ade=Nl.global||Nl.self||Nl.window||{},sh="object"!=typeof process||"[object process]"!==String(process)||process.browser,yR="function"==typeof importScripts,Sde=typeof window<"u"&&typeof window.orientation<"u",P4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);P4&&parseFloat(P4[1]);class vR{}const bR=new Map;function N4(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function L4(n,e=!0,t){const i=t||new Set;if(n)if(F4(n))i.add(n);else if(F4(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)L4(n[r],e,i);return void 0===t?Array.from(i):[]}function F4(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const wR=()=>{};class xR{static isSupported(){return typeof Worker<"u"&&sh||typeof vR<"u"&&!sh}constructor(e){we(this,"name",void 0),we(this,"source",void 0),we(this,"url",void 0),we(this,"terminated",!1),we(this,"worker",void 0),we(this,"onMessage",void 0),we(this,"onError",void 0),we(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Pl(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=wR,this.onError=s=>console.log(s),this.worker=sh?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=wR,this.onError=wR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||L4(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function Cde(n){Pl(n.source&&!n.url||!n.source&&n.url);let e=bR.get(n.source||n.url);return e||(n.url&&(e=function Tde(n){if(!n.startsWith("http"))return n;const e=function Mde(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return N4(e)}(n.url),bR.set(n.url,e)),n.source&&(e=N4(n.source),bR.set(n.source,e))),Pl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new vR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new vR(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class Dde{constructor(e,t){we(this,"name",void 0),we(this,"workerThread",void 0),we(this,"isRunning",!0),we(this,"result",void 0),we(this,"_resolve",()=>{}),we(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Pl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Pl(this.isRunning),this.isRunning=!1,this._reject(e)}}class Rde{static isSupported(){return xR.isSupported()}constructor(e){we(this,"name","unnamed"),we(this,"source",void 0),we(this,"url",void 0),we(this,"maxConcurrency",1),we(this,"maxMobileConcurrency",1),we(this,"onDebug",()=>{}),we(this,"reuseWorkers",!0),we(this,"props",{}),we(this,"jobQueue",[]),we(this,"idleQueue",[]),we(this,"count",0),we(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return kt(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return kt(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new Dde(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new xR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Sde?this.maxMobileConcurrency:this.maxConcurrency}}const Ode={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Uu{static isSupported(){return xR.isSupported()}static getWorkerFarm(e={}){return Uu._workerFarm=Uu._workerFarm||new Uu({}),Uu._workerFarm.setProps(e),Uu._workerFarm}constructor(e){we(this,"props",void 0),we(this,"workerPools",new Map),this.props={...Ode},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new Rde({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}we(Uu,"_workerFarm",void 0);const Pde="latest";function ER(){return ER=kt(function*(n,e,t,i,r){const s=n.id,o=function Nde(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let s=n.version;"latest"===s&&(s=Pde);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(o,"/dist/").concat(i)}return Pl(r),r}(n,t),c=Uu.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Bde.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),ER.apply(this,arguments)}function Bde(n,e,t,i){return AR.apply(this,arguments)}function AR(){return AR=kt(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),AR.apply(this,arguments)}function SR(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new iA(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function iA(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(iA=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new iA(n)}function k4(n){return n&&"object"==typeof n&&n.isBuffer}function j4(n){if(k4(n))return function kde(n){return k4(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function TR(){return TR=kt(function*(n){const e=[];var r,t=!1,i=!1;try{for(var o,s=SR(n);t=!(o=yield s.next()).done;t=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function Ude(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),TR.apply(this,arguments)}S(643);const Hde=262144,zde=262144;function U4(n,e){this.v=n,this.k=e}function rA(n){return new U4(n,0)}function k0(n){var e,t;function i(s,o){try{var a=n[s](o),c=a.value,l=c instanceof U4;Promise.resolve(l?c.v:c).then(function(u){if(l){var h="return"===s?"return":"next";if(!c.k||u.done)return i(h,u);u=n[h](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}function IR(n){return function(){return new k0(n.apply(this,arguments))}}k0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},k0.prototype.next=function(n){return this._invoke("next",n)},k0.prototype.throw=function(n){return this._invoke("throw",n)},k0.prototype.return=function(n){return this._invoke("return",n)};const $de=1048576;function DR(){return DR=IR(function*(n,e){const t=e?.chunkSize||$de;let i=0;for(;i<n.size;){const r=i+t,s=yield rA(n.slice(i,r).arrayBuffer());i=r,yield s}}),DR.apply(this,arguments)}function V4(n,e){return C4?function qde(n,e){return RR.apply(this,arguments)}(n,e):function Xde(n,e){return OR.apply(this,arguments)}(n,e)}function RR(){return RR=IR(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield rA(r);if(s)return;yield j4(o)}}catch{t.releaseLock()}}),RR.apply(this,arguments)}function OR(){return OR=IR(function*(n,e){var r,t=!1,i=!1;try{for(var o,s=SR(n);t=!(o=yield rA(s.next())).done;t=!1){const a=o.value;yield j4(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield rA(s.return()))}finally{if(i)throw r}}}),OR.apply(this,arguments)}const PR="Cannot convert supplied data type";function NR(){return NR=kt(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function Jde(n,e,t){if(e.text&&"string"==typeof n)return n;if(ede(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(PR)}(n,e);if(cm(n)&&(n=yield E4(n)),am(n)){const r=n;return yield function dde(n){return hR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(b4(n)&&(n=function Kde(n,e){if("string"==typeof n)return function*Gde(n,e){const t=e?.chunkSize||Hde;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*Wde(n,e={}){const{chunkSize:t=zde}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(cm(n))return function Yde(n,e){return DR.apply(this,arguments)}(n,e);if(b4(n))return V4(n,e);if(am(n))return V4(n.body,e);throw new Error("makeIterator")}(n,t)),Zue(n)||Que(n))return function Vde(n){return TR.apply(this,arguments)}(n);throw new Error(PR)}),NR.apply(this,arguments)}const ihe=new v0({id:"loaders.gl"}),H4=()=>{const n=mR();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function G4(n){const e=H4();n=Array.isArray(n)?n:[n];for(const t of n){const i=aR(t);e.find(r=>i===r)||e.unshift(i)}}const she=/\.([^.]+)$/;function BR(){return BR=kt(function*(n,e=[],t,i){if(!W4(n))return null;let r=z4(n,e,{...t,nothrow:!0},i);if(r)return r;if(cm(n)&&(r=z4(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error($4(n));return r}),BR.apply(this,arguments)}function z4(n,e=[],t,i){if(!W4(n))return null;if(e&&!Array.isArray(e))return aR(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function rhe(){return H4()}()),function che(n){for(const e of n)aR(e)}(r);const s=function ahe(n,e,t,i){const{url:r,type:s}=nA(n),o=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=kR(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function lhe(n,e){const t=e&&she.exec(e),i=t&&t[1];return i?function uhe(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||kR(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function dhe(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(hhe(e,t))return t}else if(ArrayBuffer.isView(e)){if(Y4(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&Y4(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(q4(n)):""),a=a||kR(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&ihe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error($4(n));return s}function W4(n){return!(n instanceof Response&&204===n.status)}function $4(n){const{url:e,type:t}=nA(n);let i="No valid loader found (";i+=e?"".concat(function nhe(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?q4(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function kR(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function hhe(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function Y4(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function fhe(n,e,t,i){if(i instanceof ArrayBuffer)return function jde(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===jR(n,e,i.length);default:return!1}}(n,e,t,r))}function q4(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?jR(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?jR(n,0,e):""}function jR(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function sA(n,e,t,i){return UR.apply(this,arguments)}function UR(){return UR=kt(function*(n,e,t,i){Pl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!oR(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=nA(n),o=function the(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function ohe(n){return BR.apply(this,arguments)}(n,o,t);return a?(i=function ehe(n,e,t=null){if(t)return t;const i={fetch:I4(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:sA,loaders:o},t=yde(t,a,o,r),i),yield function phe(n,e,t,i){return VR.apply(this,arguments)}(a,n,t,i)):null}),UR.apply(this,arguments)}function VR(){return VR=kt(function*(n,e,t,i){if(function Ede(n,e=xde){Pl(n,"no worker provided")}(n),am(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:u}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:u}}if(e=yield function Zde(n,e,t){return NR.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function Lde(n,e){return!(!Uu.isSupported()||!(sh||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function Fde(n,e,t,i,r){return ER.apply(this,arguments)}(n,e,t,i,sA);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Pl(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),VR.apply(this,arguments)}function j0(n,e,t,i){return HR.apply(this,arguments)}function HR(){return HR=kt(function*(n,e,t,i){!Array.isArray(e)&&!oR(e)&&(t=e,e=void 0);const r=I4(t);let s=n;return"string"==typeof n&&(s=yield r(n)),cm(n)&&(s=yield r(n)),yield sA(s,e,t)}),HR.apply(this,arguments)}class ghe{constructor(e,t,i){we(this,"id",void 0),we(this,"context",void 0),we(this,"isLoaded",void 0),we(this,"persistent",void 0),we(this,"_loadCount",0),we(this,"_subscribers",new Set),we(this,"_data",void 0),we(this,"_loader",void 0),we(this,"_error",void 0),we(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=j0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class mhe{constructor({gl:e,protocol:t}){we(this,"protocol",void 0),we(this,"_context",void 0),we(this,"_resources",void 0),we(this,"_consumers",void 0),we(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new ghe(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const _he=[tR],yhe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function vhe(n){const e=B0.getDefaultProgramManager(n);for(const t of _he)e.addDefaultModule(t);for(const t of yhe)e.addShaderHook(t);return e}class xhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){we(this,"layers",void 0),we(this,"context",void 0),we(this,"resourceManager",void 0),we(this,"_lastRenderedLayers",[]),we(this,"_needsRedraw",!1),we(this,"_needsUpdate",!1),we(this,"_nextLayers",null),we(this,"_debug",!1),we(this,"activateViewport",o=>{po("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new mhe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&vhe(e),stats:i||new UD({id:"deck.gl"}),viewport:r||new Kd({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new m4,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){po("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=sR(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?ai.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&ai.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Ehe{constructor(e){we(this,"width",void 0),we(this,"height",void 0),we(this,"views",void 0),we(this,"viewState",void 0),we(this,"controllers",void 0),we(this,"timeline",void 0),we(this,"_viewports",void 0),we(this,"_viewportMap",void 0),we(this,"_isUpdating",void 0),we(this,"_needsRedraw",void 0),we(this,"_needsUpdate",void 0),we(this,"_eventManager",void 0),we(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=sR(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Kg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ai.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const s=e.controller;if(s){const o={...t,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=t[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in t){const s=t[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}const Che=Math.PI/180;function X4(n){return 512/4003e4/Math.cos(n*Che)}class oh extends Kd{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:g=!1}=e;let{width:m,height:b,altitude:w=1.5}=e;const L=Math.pow(2,r);m=m||1,b=b||1;let V,ce=null;u?(w=u[5]/2,V=UE(w)):(e.fovy?(V=e.fovy,w=yD(V)):V=UE(w),ce=function UV(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:u=UE(Ooe)}=n;void 0!==i&&(u=UE(i));const h=u*sc,f=r*sc,g=yD(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/t);const b=h*(.5+(s?s[1]:0)/t),w=Math.sin(b)*m/Math.sin(pD(Math.PI/2-f-b,.01,Math.PI-.01)),L=Math.sin(f)*w+m;return{fov:h,aspect:e/t,focalDistance:g,near:c,far:Math.min(L*l,10*m)}}({width:m,height:b,pitch:s,fovy:V,nearZMultiplier:a,farZMultiplier:c}));let re=function Loe(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:s,center:o}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];PE(a,a,[0,0,-r]),DV(a,a,-t*sc),RV(a,a,i*sc);const c=s/e;return dD(a,a,[c,c,c]),o&&PE(a,a,function Dse(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],o)),a}({height:b,pitch:s,bearing:o,scale:L,altitude:w});f&&(re=(new Pn).translate([512*f,0,0]).multiplyLeft(re)),super({...e,width:m,height:b,viewMatrix:re,longitude:i,latitude:t,zoom:r,...ce,fovy:V,focalDistance:w}),we(this,"longitude",void 0),we(this,"latitude",void 0),we(this,"pitch",void 0),we(this,"bearing",void 0),we(this,"altitude",void 0),we(this,"fovy",void 0),we(this,"orthographic",void 0),we(this,"_subViewports",void 0),we(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=w,this.fovy=V,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const s=r?new oh({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*X4(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/X4(i)]}addMetersToLngLat(e,t){return jV(e,t)}panByPosition(e,t){const i=A0(t,this.pixelUnprojectionMatrix),s=NE([],this.projectFlat(e),OV([],i)),o=NE([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const t=function Boe(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let c,l;return(n.fovy?.5*n.fovy*GV:Math.atan(.5/n.altitude))>(90-n.pitch)*GV-.01?(c=zV(n,0,e),l=zV(n,t,e)):(c=r([0,0],s),l=r([t,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=HV({width:i,height:r,bounds:e,...t});return new oh({width:i,height:r,longitude:s,latitude:o,zoom:a})}}we(oh,"displayName","WebMercatorViewport");class Mhe extends ZV{constructor(e){const{width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:b,startZoomLngLat:w,startRotatePos:L,startBearing:V,startPitch:ce,startZoom:re,normalize:Ie=!0}=e;Hs(Number.isFinite(s)),Hs(Number.isFinite(r)),Hs(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:Ie,position:u},{startPanLngLat:b,startZoomLngLat:w,startRotatePos:L,startBearing:V,startPitch:ce,startZoom:re}),we(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Ir(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Ir(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Ir(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function koe(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=n;(r<-180||r>180)&&(r=BV(r+180,360)-180),(a<-180||a>180)&&(a=BV(a+180,360)-180);const c=gD(t/512);if(o<=c)o=c,s=0;else{const l=t/2/Math.pow(2,o),u=Xg([0,l])[1];if(s<u)s=u;else{const h=Xg([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:t,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const s=e[0]-t[0],o=e[1]-t[1],a=e[1],c=t[1],{width:l,height:u}=this.getViewportProps(),h=s/l;let f=0;o>0?Math.abs(u-c)>5&&(f=o/(c-u)*1.2):o<0&&c>5&&(f=1-a/c),f=Ir(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps();let w=i;return f>0?w=i+f*(m-i):f<0&&(w=i-f*(g-i)),{pitch:w,bearing:r+180*h}}}class Ihe extends xD{constructor(...e){super(...e),we(this,"ControllerState",Mhe),we(this,"transition",{transitionDuration:300,transitionInterpolator:new HE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),we(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class J4 extends bD{get ViewportType(){return oh}get ControllerType(){return Ihe}}we(J4,"displayName","MapView");class Dhe extends QE{constructor(e,t){super(e,t),we(this,"maskMap",void 0),we(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new Gs(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new fs(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,oc(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Nhe{constructor(){we(this,"id","mask-effect"),we(this,"props",null),we(this,"useInPicking",!0),we(this,"dummyMaskMap",void 0),we(this,"channels",[]),we(this,"masks",null),we(this,"maskPass",void 0),we(this,"maskMap",void 0),we(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new Gs(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Dhe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function Rhe({layers:n,viewport:e}){let t=null;for(const s of n){const o=s.getBounds();o&&(t?(t[0]=Math.min(t[0],o[0][0]),t[1]=Math.min(t[1],o[0][1]),t[2]=Math.max(t[2],o[1][0]),t[3]=Math.max(t[3],o[1][1])):t=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!t)return i;const r=function Phe(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:s}),c||!Wg(e.bounds,a.bounds))){const{maskPass:l,maskMap:u}=this,h=function Ohe({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof oh){const{longitude:a,latitude:c,zoom:l}=HV({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new oh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const s=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],o=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new ED({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:s}=r.root;let o=t[s];if(!o){if(++i>4){ai.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in t))&&(this.channels[r]=null)}for(const r in t){const s=t[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Lhe=new iR;class Fhe{constructor(){we(this,"effects",void 0),we(this,"_internalEffects",void 0),we(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Kg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Nhe),e.some(t=>t instanceof iR)||this._internalEffects.push(Lhe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Bhe extends QE{shouldDrawLayer(e){return"draw"===e.props.operation}}const Z4={blendFunc:[1,0,32771,0],blendEquation:32774};class Q4 extends QE{constructor(...e){super(...e),we(this,"pickZ",void 0),we(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m}){const b=this.gl;this.pickZ=m;const w=m?null:{byLayer:new Map,byAlpha:[]};this._colors=w;const L=oc(b,{scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Z4,blend:!m},()=>super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(ce=>ce.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:w&&jhe.bind(null,w),stats:L}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,Z4),r.blend=!0,r.blendColor=function khe(n,e,t){const{byLayer:i,byAlpha:r}=n;let s,o=i.get(e);return o?(o.viewports.push(t),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[t]},i.set(e,o),r[s]=o):(ai.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function jhe(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class Vhe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Bhe(e),this.pickLayersPass=new Q4(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||fs.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,po("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new fs(this.gl),new fs(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Hhe={pickedColor:null,pickedObjectIndex:-1};function Ghe({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let u=r*r,h=-1,f=0;for(let g=0;g<l;g++){const m=g+a-i,b=m*m;if(b>u)f+=4*c;else for(let w=0;w<c;w++){if(n[f+3]-1>=0){const V=w+o-t,ce=V*V+b;ce<=u&&(u=ce,h=f)}f+=4}}if(h>=0){const g=n.slice(h,h+4),m=e(g);if(m){const b=Math.floor(h/4/c),w=h/4-b*c;return{...m,pickedColor:g,pickedX:o+w,pickedY:a+b}}ai.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Hhe}function e8({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function $he(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function Whe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const f=t.layerId,g=o?o.props.id:null;if(g!==f||a!==t.index){if(g!==f){const m=r.find(b=>b.props.id===f);m&&c.unshift(m)}t.layerId=g,t.index=a,t.info=null}}const l=e8(n),u=new Map;return u.set(null,l),c.forEach(h=>{let f={...l};h===o&&(f.color=s,f.index=a,f.picked=!0),f=t8({layer:h,info:f,mode:i});const g=f.layer;h===o&&"hover"===i&&(t.info=f),u.set(g.id,f),"hover"===i&&g.updateAutoHighlight(f)}),u}function t8({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class Yhe{constructor(e){we(this,"gl",void 0),we(this,"pickingFBO",void 0),we(this,"depthFBO",void 0),we(this,"pickLayersPass",void 0),we(this,"layerFilter",void 0),we(this,"lastPickedInfo",void 0),we(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new Q4(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(f=>f.id===o):null,l=a&&r.find(f=>f.id===a)||r[0],u=l&&l.unproject([e-l.x,t-l.y]);return{...s,x:e,y:t,viewport:l,coordinate:u,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new fs(i),fs.isSupported(i,{colorBufferFloat:!0}))){const r=new fs(i);r.attach({36064:new Gs(i,{format:Qn(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=Qg(this.gl);if(!f)return{result:[],emptyInfo:e8({viewports:i,x:r,y:s,pixelRatio:g})};this._resizeBuffer();const m=BD(this.gl,[r,s],!0),b=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],w=Math.round(o*g),{width:L,height:V}=this.pickingFBO,ce=this._getPickingRect({deviceX:b[0],deviceY:b[1],deviceRadius:w,deviceWidth:L,deviceHeight:V}),re={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Ie;const Ne=[],st=new Set;for(let dt=0;dt<a;dt++){let qe,ht;qe=ce?Ghe({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:u,deviceRect:ce,cullRect:re,effects:h,pass:"picking:".concat(c)}),deviceX:b[0],deviceY:b[1],deviceRadius:w,deviceRect:ce}):{pickedColor:null,pickedObjectIndex:-1},qe.pickedLayer&&l&&this.depthFBO&&(ht=this._drawAndSample({layers:[qe.pickedLayer],views:t,viewports:i,onViewportActive:u,deviceRect:{x:qe.pickedX,y:qe.pickedY,width:1,height:1},cullRect:re,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),qe.pickedLayer&&dt+1<a&&(st.add(qe.pickedLayer),qe.pickedLayer.disablePickingIndex(qe.pickedObjectIndex)),Ie=Whe({pickInfo:qe,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:s,z:ht,pixelRatio:g});for(const vt of Ie.values())vt.layer&&Ne.push(vt);if(!qe.pickedColor)break}for(const dt of st)dt.restorePickingColors();return{result:Ne,emptyInfo:Ie.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=Qg(this.gl),m=BD(this.gl,[r,s],!0),b=m.x,w=m.y+m.height,L=BD(this.gl,[r+o,s+a],!0),ce=L.y,Ne=function zhe({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e(s);a?t.set(o,{...a,color:s}):ai.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:u,deviceRect:{x:b,y:ce,width:L.x+L.width-b,height:w-ce},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),st=new Map,dt=Number.isFinite(l);for(let qe=0;qe<Ne.length&&!(dt&&l&&st.size>=l);qe++){const ht=Ne[qe];let vt={color:ht.pickedColor,layer:null,index:ht.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:g};vt=t8({layer:ht.pickedLayer,info:vt,mode:c}),st.has(vt.object)||st.set(vt.object,vt)}return Array.from(st.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:f,y:g,width:m,height:b}=s,w=new(l?Float32Array:Uint8Array)(m*b*4);return XE(u,{sourceX:f,sourceY:g,sourceWidth:m,sourceHeight:b,target:w}),{pickedColors:w,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,t+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const qhe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Xhe{constructor(e){we(this,"el",null),we(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,qhe),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function n8(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Jhe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),i8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Zhe}=(i8&&parseFloat(i8[1]),globalThis),GR=typeof Image<"u",zR=typeof ImageBitmap<"u",WR=!!Jhe||!!Zhe;function r8(n){const e=function o8(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const tfe=/^data:image\/svg\+xml/,nfe=/\.svg((\?|#).*)?$/;function $R(n){return n&&(tfe.test(n)||nfe.test(n))}function a8(n,e){if($R(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function c8(n,e,t){return YR.apply(this,arguments)}function YR(){return YR=kt(function*(n,e,t){const i=function ife(n,e){if($R(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return a8(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function rfe(n,e){return qR.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),YR.apply(this,arguments)}function qR(){return qR=kt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),qR.apply(this,arguments)}const sfe={};let l8=!0;function XR(){return XR=kt(function*(n,e,t){let i;i=$R(t)?yield c8(n,e,t):a8(n,t);const r=e&&e.imagebitmap;return yield function afe(n){return KR.apply(this,arguments)}(i,r)}),XR.apply(this,arguments)}function KR(){return KR=kt(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function cfe(n){for(const e in n||sfe)return!1;return!0}(e)||!l8)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),l8=!1}return yield createImageBitmap(n)}),KR.apply(this,arguments)}const Fl=!1,U0=!0;function u8(n){const e=V0(n);return function gfe(n){const e=V0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Fl)?{mimeType:"image/png",width:e.getUint32(16,Fl),height:e.getUint32(20,Fl)}:null}(e)||function yfe(n){const e=V0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Fl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function vfe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Fl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Fl),width:e.getUint16(s+7,Fl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Fl)}return null}(e)||function mfe(n){const e=V0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Fl)?{mimeType:"image/gif",width:e.getUint16(6,U0),height:e.getUint16(8,U0)}:null}(e)||function _fe(n){const e=V0(n);return e.byteLength>=14&&16973===e.getUint16(0,Fl)&&e.getUint32(2,U0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,U0),height:e.getUint32(22,U0)}:null}(e)||function pfe(n){const t=function lfe(n){return function ffe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function hfe(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function ufe(n){switch(function dfe(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function V0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function JR(){return JR=kt(function*(n,e){const{mimeType:t}=u8(n)||{},i=globalThis._parseImageNode;return n8(i),yield i(n,t)}),JR.apply(this,arguments)}function ZR(){return ZR=kt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function xfe(n){switch(n){case"auto":case"data":return function efe(){if(zR)return"imagebitmap";if(GR)return"image";if(WR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Qhe(n){switch(n){case"auto":return zR||GR||WR;case"imagebitmap":return zR;case"image":return GR;case"data":return WR;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function ofe(n,e,t){return XR.apply(this,arguments)}(n,e,s);break;case"image":a=yield c8(n,e,s);break;case"data":a=yield function bfe(n,e){return JR.apply(this,arguments)}(n,e);break;default:n8(!1)}return"data"===r&&(a=function s8(n){switch(r8(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),ZR.apply(this,arguments)}const d8={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function wfe(n,e,t){return ZR.apply(this,arguments)},tests:[n=>!!u8(new DataView(n))],options:{image:{type:"auto",decode:!0}}},Afe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Efe(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},H0="8.8.27",oA=globalThis.deck&&globalThis.deck.VERSION;if(oA&&oA!==H0)throw new Error("deck.gl - multiple versions detected: ".concat(oA," vs ").concat(H0));oA||(ai.log(1,"deck.gl ".concat(H0))(),globalThis.deck={...globalThis.deck,VERSION:H0,version:H0,log:ai,_registerLoggers:function Kue(n){rR=n}},G4([Afe,[d8,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Sfe=globalThis.deck,aA=globalThis;function h8(n){if(!n&&!Ml())return"Node";if(fV(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":aA.chrome?"Chrome":aA.safari?"Safari":aA.mozInnerScreenX?"Firefox":"Unknown"}class cA extends ku{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=Qn(e),r=zH(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:qt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return cA.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const f8=Ml()&&typeof document<"u";let Lfe=0;class Ffe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(w=>TH(w)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=Lf.get("animation-loop-".concat(Lfe++))}=e;let{useDevicePixels:b=!0}=e;"useDevicePixelRatio"in e&&(rn.deprecated("useDevicePixelRatio","useDevicePixels")(),b=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:b}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return qt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=cA.isSupported(this.gl,["timers"])?new cA(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return kt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return rn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=f8?new Promise((e,t)=>{f8&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Nfe(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function Pfe(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?jD(this.props.gl,e):this.onCreateContext(e),!YE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Ice(n){Bu(n,FD)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Nce(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function Dce(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function jce(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(rn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(rn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new fs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var lA=S(7271);const Bfe={mousedown:1,mousemove:2,mouseup:4};(function jfe(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function kfe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(lA.PointerEventInput),function Ufe(n){n.prototype.handler=function(t){let i=Bfe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(lA.MouseInput);const Vfe=lA.Manager,Bl=lA;class uA{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const Hfe=Bl?[[Bl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Bl.Rotate,{enable:!1}],[Bl.Pinch,{enable:!1}],[Bl.Swipe,{enable:!1}],[Bl.Pan,{threshold:0,enable:!1}],[Bl.Press,{enable:!1}],[Bl.Tap,{event:"doubletap",taps:2,enable:!1}],[Bl.Tap,{event:"anytap",enable:!1}],[Bl.Tap,{enable:!1}]]:null,m8={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Gfe={doubletap:["tap"]},zfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},eO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Wfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},_8={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},$fe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",lm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let tO=!1;try{lm.addEventListener("test",null,{get passive(){return tO=!0,!0}}),lm.removeEventListener("test",null)}catch{tO=!1}const Yfe=-1!==$fe.indexOf("firefox"),{WHEEL_EVENTS:qfe}=eO,v8=4.000244140625;class Jfe extends uA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;lm.WheelEvent&&(Yfe&&r.deltaMode===lm.WheelEvent.DOM_DELTA_PIXEL&&(s/=lm.devicePixelRatio),r.deltaMode===lm.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%v8==0&&(s=Math.floor(s/v8)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(qfe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!tO&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:Zfe}=eO,b8="pointermove",w8="pointerover",x8="pointerout",E8="pointerenter",A8="pointerleave";class Qfe extends uA{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Zfe),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===b8&&(this.enableMoveEvent=t),e===w8&&(this.enableOverEvent=t),e===x8&&(this.enableOutEvent=t),e===E8&&(this.enableEnterEvent=t),e===A8&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(w8,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(x8,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(E8,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(A8,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(b8,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:epe}=eO,S8="keydown";class tpe extends uA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:S8,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(epe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===S8&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const T8="contextmenu";class npe extends uA{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:T8,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===T8&&(this.options.enable=t)}}const ipe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function fpe(n){const e=ipe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&t),o=!!(4&t),a=!!(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function ppe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const rO={srcElement:"root",priority:0};class gpe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=rO;"string"==typeof i||i&&i.addEventListener?c={...rO,srcElement:i}:i&&(c={...rO,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const u={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=u.priority);)h--;l.splice(h+1,0,u)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:u,once:h}=i[c];if(u({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...fpe(e),...ppe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const mpe={events:null,recognizers:null,recognizerOptions:{},Manager:Vfe,touchAction:"none",tabIndex:0};class _pe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:s}=r,o=zfe[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...mpe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||Hfe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(m8).forEach(r=>{const s=this.manager.get(r);s&&m8[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new Jfe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Qfe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tpe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new npe(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=Gfe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,c=_8[e]||e;let l=a.get(c);l||(l=new gpe(this),a.set(c,l),l.recognizerName=Wfe[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,t,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(_8[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function jf(){}const M8={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:jf,onResize:jf,onViewStateChange:jf,onInteractionStateChange:jf,onBeforeRender:jf,onAfterRender:jf,onLoad:jf,onError:n=>ai.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class sO{constructor(e){we(this,"props",void 0),we(this,"width",0),we(this,"height",0),we(this,"userData",{}),we(this,"canvas",null),we(this,"viewManager",null),we(this,"layerManager",null),we(this,"effectManager",null),we(this,"deckRenderer",null),we(this,"deckPicker",null),we(this,"eventManager",null),we(this,"tooltip",null),we(this,"metrics",void 0),we(this,"animationLoop",void 0),we(this,"stats",void 0),we(this,"viewState",void 0),we(this,"cursorState",void 0),we(this,"_needsRedraw",void 0),we(this,"_pickRequest",void 0),we(this,"_lastPointerDownInfo",null),we(this,"_metricsCounter",void 0),we(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),we(this,"_onEvent",t=>{const i=XV[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let u=!1;c&&(u=c.call(a,o,t)),!u&&l&&l(o,t)}),we(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...M8,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&ai.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===h8()&&ai.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new UD({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&b0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ai.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ai.removed("onLayerClick","onClick")(),e.initialViewState&&!Kg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return Hs(this.viewManager),this.viewManager.views}getViewports(e){return Hs(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){Hs(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),Hs(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const s=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new Ffe({width:t,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:h=>TH({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new J4({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var t;s=a,o=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,jD(e,{enable:!0,copyState:!0})),this.tooltip=new Xhe(this.canvas),Bu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new m4;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new _pe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in XV)this.eventManager.on(r,this._onEvent);this.viewManager=new Ehe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new xhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new Fhe,this.deckRenderer=new Vhe(e),this.deckPicker=new Yhe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Bu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ai.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=Lf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}we(sO,"defaultProps",M8),we(sO,"VERSION",Sfe.VERSION);var Uf=S(1979);function Vu(n={}){const{connector:e=(()=>new Jt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=c=void 0,u=h=!1},m=()=>{const b=o;g(),b?.unsubscribe()};return ci((b,w)=>{l++,!h&&!u&&f();const L=c=c??e();w.add(()=>{l--,0===l&&!h&&!u&&(a=oO(m,r))}),L.subscribe(w),!o&&l>0&&(o=new vi({next:V=>L.next(V),error:V=>{h=!0,f(),a=oO(g,t,V),L.error(V)},complete:()=>{u=!0,f(),a=oO(g,i),L.complete()}}),us(b).subscribe(o))})(s)}}function oO(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new vi({next:()=>{i.unsubscribe(),n()}});return us(e(...t)).subscribe(i)}class aO{constructor(e,t){we(this,"opts",void 0),we(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function hA(n){return n.stride||n.size*n.bytesPerElement}function I8(n,e){e.offset&&ai.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=hA(n),s=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:s,stride:t}}class bpe{constructor(e,t,i){we(this,"gl",void 0),we(this,"id",void 0),we(this,"size",void 0),we(this,"settings",void 0),we(this,"value",void 0),we(this,"doublePrecision",void 0),we(this,"_buffer",void 0),we(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,s=5130===r;let a,{defaultValue:o}=t;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&t.isIndexed?e&&KD(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function ype(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Wi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*hA(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),b0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function vpe(n,e){const t=I8(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new aO(this,s.high),i["".concat(e,"64Low")]=r?new aO(this,s.low):new Float32Array(this.size),i}if(t){const i=I8(this.getAccessor(),t);return{[e]:new aO(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,s=i*r;if(t&&s&&t.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const u=t[c++];u<o[l]&&(o[l]=u),u>a[l]&&(a[l]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Wi?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),t.constant&&this._areValuesEqual(s,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;t.externalBuffer=s,t.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=hA(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;t.externalBuffer=null,t.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=hA(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=lD(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?lD(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,s=b0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?lD(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&ai.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}const D8=[],R8=[];function fA(n,e=0,t=1/0){let i=D8;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(R8.length=n.length,i=R8):i=D8,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function O8(n){return n&&n[Symbol.asyncIterator]}const xpe=[],pA=[[0,1/0]];function cO(n){const{source:e,target:t,start:i=0,size:r,getData:s}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!s)return;let l=a;for(;l<c;){const u=s(l,e);for(let h=0;h<r;h++)t[i+l]=u[h]||0,l++}}const Spe={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function P8(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...Spe[t],...e,...n,type:t}}function N8(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function L8(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function F8(n){n.push(n.shift())}function lO(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function B8({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,c=t.byteOffset,l=t.startIndices,u=r&&l,h=lO(t,e),f=t.isConstant;if(!u&&i>=h)return;const g=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const L=s;s=(V,ce)=>t.normalizeConstant(L(V,ce))}const m=f?(L,V)=>s(g,V):(L,V)=>s(g.subarray(L,L+a),V),b=n.getData({length:i}),w=new Float32Array(h);(function Ape({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return cO({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const c=i&&((u,h)=>i(u+a,h)),l=Math.min(r.length,s.length);for(let u=1;u<l;u++){const h=r[u]*t,f=s[u]*t;cO({source:n.subarray(o,h),target:e,start:a,end:f,size:t,getData:c}),o=h,a=f}a<e.length&&cO({source:[],target:e,start:a,size:t,getData:c})})({source:b,target:w,sourceStartIndices:r,targetStartIndices:l,size:a,getData:m}),n.byteLength<w.byteLength+c&&n.reallocate(w.byteLength+c),n.subData({data:w,offset:c})}class uO extends bpe{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:pA}),we(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return P8(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function Epe(n,e){if(n===pA||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=pA}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=xpe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==pA),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(r,this,{data:t,startRow:l,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,u]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return Hs(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function wpe(n,e){const{size:t,stride:i,offset:r,startIndices:s,nested:o}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,u=Math.floor((n.length-l)/c);return(h,{index:f,target:g})=>{if(!s){const L=f*c+l;for(let V=0;V<t;V++)g[V]=n[L+V];return g}const m=s[f],b=s[f+1]||u;let w;if(o){w=new Array(b-m);for(let L=m;L<b;L++){const V=L*c+l;g=new Array(t);for(let ce=0;ce<t;ce++)g[ce]=n[V+ce];w[L-m]=g}}else if(c===t)w=n.subarray(m*t+l,b*t+l);else{w=new n.constructor((b-m)*t);let L=0;for(let V=m;V<b;V++){const ce=V*c+l;for(let re=0;re<t;re++)w[L++]=n[ce+re]}}return w}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:t,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=c.binaryAccessor||("function"==typeof f?f:s[f]);Hs("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let b=e.getVertexOffset(i);const{iterable:w,objectInfo:L}=fA(t,i,r);for(const V of w){L.index++;let ce=m(V,L);if(g&&(ce=g.call(this,ce)),h){const re=(L.index<h.length-1?h[L.index+1]:o)-h[L.index];if(ce&&Array.isArray(ce[0])){let Ie=b;for(const Ne of ce)e._normalizeValue(Ne,l,Ie),Ie+=u}else ce&&ce.length>u?l.set(ce,b):(e._normalizeValue(ce,L.target,0),Jue({target:l,source:L.target,start:b,count:re}));b+=re*u}else e._normalizeValue(ce,l,b),b+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const k8="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Tpe="#version 300 es\n".concat(k8);function j8(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function U8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Tpe:e>300?"#version ".concat(e,"\n").concat(k8):"void main() {gl_FragColor = vec4(0);}";const s=function Dpe(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Ma(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class V8 extends ku{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Qn(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ho(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,em(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,rn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Wi?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Rpe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Wi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&qt(Qn(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new V8(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],qt(i[s]instanceof Wi)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Wi(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function H8(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const Ope={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},gA="transform_uSize_",G8="transform_position";const Upe={10241:9728,10240:9728,10242:33071,10243:33071};class Hpe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function Lpe(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let s,o;t&&(({width:s,height:o}=i),r["".concat(gA).concat(t)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(gA).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=XE(t);if(!e)return i;const r=i.constructor,s=function Ipe(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ma(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof Gs)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Wi(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new fs(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(Upe)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function ale(n,e){qt(n instanceof Gs||n instanceof sle||n instanceof ole);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function Npe(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,o=Object.keys(t).length,a=null;const c={};let l=e,u={};if(o>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((g,m,b)=>{if(o>0){const w=function jpe(n,e){const t={},i=function Fpe(n){return j8(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Bpe(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(gA).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(s),u=function Mpe(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ma(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,";\n");return t[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(g,t);if(w){const{updatedLine:L,inject:V}=w;f[m]=L,u=OD([u,V]),Object.assign(c,w.samplerTextureMap),o--}}i&&!a&&(a=function kpe(n,e){const t=j8(n,["varying","out"]);return t&&t.name===e?t.type:null}(g,i))}),i){qt(r);const g="".concat(gA).concat(i),m="uniform vec2 ".concat(g,";\n"),b="     vec2 ".concat(G8," = transform_getPos(").concat(g,");\n     gl_Position = vec4(").concat(G8,", 0, 1.);\n");u=OD([u,{"vs:#decl":m,"vs:#main-start":b}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=OD([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||U8({version:H8(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Ope].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}let mA=null;class Ra extends ku{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||Qn(e)||"Chrome"===h8()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ra(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ra.MAX_ATTRIBUTES=Ra.MAX_ATTRIBUTES||e.getParameter(34921),Ra.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ra._setConstantFloatArray(e,t,i);break;case Int32Array:Ra._setConstantIntArray(e,t,i);break;case Uint32Array:Ra._setConstantUintArray(e,t,i);break;default:qt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ra.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return qt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(qt(Qn(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Ra.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Wi(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function zpe(n,e){const t=function Gpe(n){return(!mA||mA.byteLength<n)&&(mA=new ArrayBuffer(n)),mA}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,s);(function Wpe(n){let{target:e,source:t,start:i=0,count:r=1}=n;const s=t.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:qt(!1)}}static _setConstantIntArray(e,t,i){switch(qt(Qn(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:qt(!1)}}static _setConstantUintArray(e,t,i){switch(qt(Qn(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:qt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return qt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const qpe=/^(.+)__LOCATION_([0-9]+)$/,Xpe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Kpe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ra(e),RH(this,"VertexArray","v6.0",Xpe),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Wi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Wi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Wi&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,rn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=ia.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return qt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=qpe.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Wi)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Wi)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Wi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Ra.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ra.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Wi){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function G0(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function Jpe(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=G0(n[o],e);const s=n.length>t?"...":"]";return"".concat(r).concat(s)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function z8(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,u,h,s="NOT PROVIDED",o=1,a=0,c=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Wi){const f=e,{data:g,changed:m}=f.getDebugData();let b;return u=m?"*":"",h=g,c=f.byteLength,a=c/g.BYTES_PER_ELEMENT/o,t?b="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(th(r,s),")"):(l=!0,b="".concat(c," bytes")),{[i]:"".concat(u).concat(G0(h,{size:o,isInteger:l})),"Format ":b}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(G0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Qpe(n,e){const{type:t,size:i}=e,r=r4(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function W8(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;qt(t);const o=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let u=0;for(const g of l)!g.match(".*_.*")&&!g.match(o)&&dO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)g.match(o)&&dO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)c[g]||dO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;let h=0;const f={};if(!r)for(const g in i){const m=i[g];c[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:G0(m)})}return{table:c,count:u,unusedTable:f,unusedCount:h}}function dO(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:s}=n;const o=i[r],a=function ege(n){return null!=n}(o);return!(s&&a||(e[r]={[t]:a?G0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function $8(n){const{type:e,size:t}=n.accessor,i=r4(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const nge={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function rge(n,e){const{attributeMap:t=nge}=e||{};return t&&t[n]||n}function sge(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}qt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const Y8=()=>{},cge={};class dm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=na("model")}=t;qt(YE(e)),this.id=i,this.gl=e,this.id=t.id||na("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||B0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},qt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return qt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return qt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function ige(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=rge(s,t);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Wi(n,c),l],sge(s,l)}}if(r){const s=r.value||r;qt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Wi(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(em(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return YD(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),rn.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&rn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:b,instanceCount:w}=this,{onBeforeRender:L=Y8,onAfterRender:V=Y8}=this.props;L(),this.program.setUniforms(this.uniforms);const ce=this.program.draw(Object.assign(cge,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:b,instanceCount:w,offset:h?g:0}));return V(),rn.priority>=2&&this._logDrawCallEnd(l,c,i),ce}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}qt(t instanceof o4,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Kpe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Wi&&t.delete()}}_setAnimationProps(e){this.animated&&qt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(em(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new V8(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),rn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:rn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function Zpe(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=z8(e,e.elements,null,t));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(Qpe(o.name,c))),i[a]=z8(e,r[s],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=W8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:u}=W8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&rn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&rn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function tge(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=$8(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=$8(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);rn.table(e,s)(),rn.table(e,o)(),rn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),rn.groupEnd(2)()}}class hO{static isSupported(e){return Qn(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();qt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new dm(t,Object.assign({},e,{fs:e.fs||U8({version:H8(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function lge(n){return!(em(n.feedbackBuffers)&&em(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new Rpe(e,t)),function uge(n){return!(em(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new Hpe(e,t)),qt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}const yge={interpolation:class dge{constructor({gl:e,attribute:t,timeline:i}){we(this,"gl",void 0),we(this,"type","interpolation"),we(this,"attributeInTransition",void 0),we(this,"settings",void 0),we(this,"attribute",void 0),we(this,"transition",void 0),we(this,"currentStartIndices",void 0),we(this,"currentLength",void 0),we(this,"transform",void 0),we(this,"buffers",void 0),this.gl=e,this.transition=new C0(i),this.attribute=t,this.attributeInTransition=new uO(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function fge(n,e){const t=L8(e.size);return new hO(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Wi(e,r),new Wi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;F8(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)B8({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=lO(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:N8(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let s=r/t;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class pge{constructor({gl:e,attribute:t,timeline:i}){we(this,"gl",void 0),we(this,"type","spring"),we(this,"attributeInTransition",void 0),we(this,"settings",void 0),we(this,"attribute",void 0),we(this,"transition",void 0),we(this,"currentStartIndices",void 0),we(this,"currentLength",void 0),we(this,"texture",void 0),we(this,"framebuffer",void 0),we(this,"transform",void 0),we(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new C0(i),this.attribute=t,this.attributeInTransition=new uO(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function mge(n){return new Gs(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function _ge(n,e){return new fs(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function gge(n,e,t){const i=L8(e.size);return new hO(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Wi(e,r),new Wi(e,r),new Wi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)B8({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=lO(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:N8(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),F8(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),XE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class vge{constructor(e,{id:t,timeline:i}){we(this,"id",void 0),we(this,"isSupported",void 0),we(this,"gl",void 0),we(this,"timeline",void 0),we(this,"transitions",void 0),we(this,"needsRedraw",void 0),we(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=hO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void ai.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=yge[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(ai.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const q8="attributeManager.invalidate";class Sge{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){we(this,"id",void 0),we(this,"gl",void 0),we(this,"attributes",void 0),we(this,"updateTriggers",void 0),we(this,"needsRedraw",void 0),we(this,"userData",void 0),we(this,"stats",void 0),we(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new vge(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);po(q8,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);po(q8,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;po("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],h=u.settings.accessor;u.startIndices=i,u.numInstances=t,s[l]&&ai.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&po("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new uO(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;po("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&po("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,po("attribute.updateEnd",t,i)))}}function K8(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function J8(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const Ige={interpolation:class Cge extends C0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=ME(t,i,o)}},spring:class Mge extends C0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function Tge(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=K8(n[o],e[o],t[o],i,r);return s}return K8(n,e,t,i,r)}(s,o,t,i,r);const c=J8(a,t),l=J8(a,o);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class Dge{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=P8(r)))return;const o=Ige[r.type];if(!o)return void ai.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:t,toValue:i}),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function Pge(n,e){if(!n.transitions)return!1;const t={},i=pO(n);let r=!1;for(const s in n.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&fO(n[s],e[s],o)&&(t[s]=!0,r=!0)}return!!r&&t}function Z8({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=fO(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=fO(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function fO(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Fge(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function Q8(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},Z8({oldProps:r,newProps:i,triggerName:t})}function pO(n){const e=n[tA],t=e&&e.constructor;return t?t._propTypes:{}}function Hge(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function gO(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof oh){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function eG(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=n;switch(t&&([o,a,c]=E0([],[o,a,c,1],t)),i){case gi.LNGLAT:return gO([o,a,c],e,s);case gi.LNGLAT_OFFSETS:return gO([o+r[0],a+r[1],c+(r[2]||0)],e,s);case gi.METER_OFFSETS:return gO(jV(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}const Wge={10241:9987,10240:9729,10242:33071,10243:33071},mO={},qge={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||W0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>_O(n,e)},accessor:{validate(n,e){const t=_A(n);return"function"===t||t===_A(e.value)},equal:(n,e,t)=>"function"==typeof e||_O(n,e)},array:{validate:(n,e)=>e.optional&&!n||W0(n),equal:(n,e,t)=>t.compare?_O(n,e):n===e},object:{equal:(n,e,t)=>t.compare?Kg(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function $ge(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Gs)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new Gs(t,{...e,parameters:{...Wge,...i,...n.props.textureParameters}});return mO[r.id]=!0,r}(t,n),release:n=>{!function Yge(n){!n||!(n instanceof Gs)||mO[n.id]&&(n.delete(),delete mO[n.id])}(n)}}};function _O(n,e){if(n===e)return!0;if(!W0(n)||!W0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Kge(n,e){switch(_A(e)){case"object":return z0(n,e);case"array":return z0(n,{type:"array",value:e,compare:!1});case"boolean":return z0(n,{type:"boolean",value:e});case"number":return z0(n,{type:"number",value:e});case"function":return z0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function z0(n,e){return"type"in e?{name:n,...qge[e.type],...e}:"value"in e?{name:n,type:_A(e.value),...e}:{name:n,type:"object",value:e}}function W0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function _A(n){return W0(n)?"array":null===n?"null":typeof n}function tG(n){return yA(n,"_mergedDefaultProps")||(function Zge(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=tG(t),s=function Xge(n){const e={},t={},i={};for(const[r,s]of Object.entries(n)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=Kge(r,s);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(yA(n,"defaultProps")||{}),o=function Qge(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function ime(n){const e=yA(n,"layerName")||yA(n,"componentName");return e||ai.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a={...t._propTypes,...s.propTypes};!function tme(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=nme(o))}n[om]=t,n[kf]={},Object.defineProperties(n,i)}(o,a);const c={...t._deprecatedProps,...s.deprecatedProps};(function eme(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])nG(this,s)||(this[s]=i);ai.deprecated(r,e[t].join("/"))()}})})(o,c),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function nme(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||O8(e)?this[kf][n]=e:this[ih][n]=e},get(){if(this[ih]){if(n in this[ih])return this[ih][n]||this[om][n];if(n in this[kf]){const e=this[tA]&&this[tA].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[om][n]}}return this[om][n]}}}function nG(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yA(n,e){return nG(n,e)&&n[e]}let rme=0;class yO{constructor(...e){we(this,"id",void 0),we(this,"props",void 0),we(this,"count",void 0),this.props=function Jge(n,e){const t=tG(n.constructor),i=Object.create(t);i[tA]=n,i[kf]={},i[ih]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=rme++}clone(e){const{props:t}=this,i={};for(const r in t[om])r in t[ih]?i[r]=t[ih][r]:r in t[kf]&&(i[r]=t[kf][r]);return new this.constructor({...t,...i,...e})}}we(yO,"componentName","Component"),we(yO,"defaultProps",{});const sme=Object.freeze({});class ome{constructor(e){we(this,"component",void 0),we(this,"onAsyncPropUpdated",void 0),we(this,"asyncProps",void 0),we(this,"oldProps",void 0),we(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||sme}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[ih]||{},i=e[kf]||e,r=e[om]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(O8(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,t){var i=this;return kt(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,c=!1,l=!1;try{for(var f,h=SR(t);c=!(f=yield h.next()).done;c=!1){const g=f.value;{const{dataTransform:m}=i.component.props;o=m?m(g,o):o.concat(g),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(g){l=!0,u=g}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class ame extends ome{constructor({attributeManager:e,layer:t}){super(t),we(this,"attributeManager",void 0),we(this,"needsRedraw",void 0),we(this,"needsUpdate",void 0),we(this,"subLayers",void 0),we(this,"usesPickingColorCache",void 0),we(this,"changeFlags",void 0),we(this,"viewport",void 0),we(this,"uniformTransitions",void 0),we(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const fme=Object.freeze([]),pme=eA(({oldViewport:n,viewport:e})=>n.equals(e));let kl=new Uint8ClampedArray(0);const gme={data:{type:"data",value:fme,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(n);return!c&&!r&&(o.add({resourceId:n,data:j0(n,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:n,onChange:l=>{var u;return null===(u=t.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):j0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:gi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Vf extends yO{constructor(...e){super(...e),we(this,"internalState",null),we(this,"lifecycle","Awaiting state"),we(this,"context",void 0),we(this,"state",void 0),we(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Hs(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=eG(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=VV(i,t.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return Hs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return Hs(this.internalState),function zge(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function Gge(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return r===gi.DEFAULT&&(r=e.isGeospatial?gi.LNGLAT:gi.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=p4(t,i,r),h=eG(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function Ise(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===gi.DEFAULT||e===gi.LNGLAT||e===gi.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Hs(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function jge(n){if(!function Vge(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function Uge(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=Hge(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,t.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,s,o;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!pme({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(kl.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&ai.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),kl=b0.allocate(kl,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(kl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),kl[3*o+0]=s[0],kl[3*o+1]=s[1],kl[3*o+2]=s[2]}e.value=kl.subarray(0,3*t)}_setModelAttributes(e,t){const s=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==kl.buffer&&(i.value=kl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Hs(!this.internalState),Hs(Number.isFinite(this.props.coordinateSystem)),po("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new ame({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ai.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Dge(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){po("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(po("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){po("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];Bu(s.gl,{polygonOffset:c}),oc(s.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=t[r];o&&Array.isArray(a)&&(t.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}t[r]||(t[r]=e[r],s=!0),s&&po("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function Oge(n,e){const t=Z8({newProps:n,oldProps:e,propTypes:pO(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Nge(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function Lge(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&Q8(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&Q8(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Fge(n,e),transitionsChanged:Pge(n,e)}}(e,t);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,t[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function Rge(n){const e=pO(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Sge(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}we(Vf,"defaultProps",gme),we(Vf,"layerName","Layer");class vO extends Vf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:b,extensions:w,fetch:L,operation:V,_subLayerProps:ce}=this.props,re={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:b,extensions:w,fetch:L,operation:V},Ie=ce&&e.id&&ce[e.id],Ne=Ie&&Ie.updateTriggers,st=e.id||"sublayer";if(Ie){const dt=this.constructor._propTypes,qe=e.type?e.type._propTypes:{};for(const ht in Ie){const vt=qe[ht]||dt[ht];vt&&"accessor"===vt.type&&(Ie[ht]=this.getSubLayerAccessor(Ie[ht]))}}Object.assign(re,e,Ie),re.id="".concat(this.props.id,"-").concat(st),re.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...Ne};for(const dt of w){const qe=dt.getSubLayerProps.call(this,dt);qe&&Object.assign(re,qe,{updateTriggers:Object.assign(re.updateTriggers,qe.updateTriggers)})}return re}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=sR(this.renderLayers(),Boolean),this.internalState.subLayers=i),po("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}we(vO,"layerName","CompositeLayer");const vA={name:"project32",dependencies:[tR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},_me={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},bA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function yme(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_me;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},rG={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ah{static get DRAW_MODE(){return rG}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("geometry"),drawMode:i=rG.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,qt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(qt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return qt(Number.isFinite(i)),i}}const sG=()=>{},oG={10241:9987,10240:9729,10242:33071,10243:33071};function Eme(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Ame(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function $0(n){return n&&(n.id||n.url)}function aG(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[$0(r)]={...r,x:s,y:t}}}class Mme{constructor(e,{onUpdate:t=sG,onError:i=sG}){we(this,"gl",void 0),we(this,"onUpdate",void 0),we(this,"onError",void 0),we(this,"_loadOptions",null),we(this,"_texture",null),we(this,"_externalTexture",null),we(this,"_mapping",{}),we(this,"_textureParameters",null),we(this,"_pendingCount",0),we(this,"_autoPacking",!1),we(this,"_xOffset",0),we(this,"_yOffset",0),we(this,"_rowHeight",0),we(this,"_buffer",4),we(this,"_canvasWidth",1024),we(this,"_canvasHeight",0),we(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?$0(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Tme(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=fA(n);for(const o of r){s.index++;const a=e(o,s),c=$0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Cme({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[$0(l)]){const{height:h,width:f}=l;i+f+e>o&&(aG(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&aG(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Eme(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new Gs(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||oG})),this._texture.height!==this._canvasHeight&&(this._texture=function Sme(n,e,t,i){const r=n.width,s=n.height,o=new Gs(n.gl,{width:e,height:t,parameters:i});return function lle(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:u,height:h}=t;const{framebuffer:f,deleteFramebuffer:g}=P0(n);qt(f);const{gl:m,handle:b}=f,w=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const L=m.bindFramebuffer(36160,b);qt(e);let V=null;if(e instanceof Ff&&(V=e,u=Number.isFinite(u)?u:V.width,h=Number.isFinite(h)?h:V.height,V.bind(0),e=V.target),w)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,c,i,r,u,h);break;case 35866:case 32879:ho(m).copyTexSubImage3D(e,s,a,c,l,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);V&&V.unbind(),m.bindFramebuffer(36160,L||null),g&&f.delete()}(n,o,{targetY:0,width:r,height:s}),n.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||oG)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,j0(i.url,d8,this._loadOptions).then(r=>{const s=$0(i),{x:o,y:a,width:c,height:l}=this._mapping[s],u=Ame(t,r,c,l);this._texture.setSubImageData({data:u,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const cG=[0,0,0,255],Ime={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:cG},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class bO extends Vf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[vA,bA]})}initializeState(){this.state={iconManager:new Mme(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:cG},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:u}=t,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:u}),f?i.iconMapping!==t.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:VE[s],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new dm(e,{...this.getShaders(),id:this.props.id,geometry:new ah({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):ai.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[t,i,r,s]}}we(bO,"defaultProps",Ime),we(bO,"layerName","IconLayer");const uG=[];class wO extends bO{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&ai.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):uG}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):uG}}we(wO,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),we(wO,"layerName","MultiIconLayer");var Ome=S(822),Pme=S.n(Ome);const Nme=32,Lme=[];function Fme(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function dG(n,e,t,i){let r=0;for(let o=e;o<t;o++){var s;r+=(null===(s=i[n[o]])||void 0===s?void 0:s.width)||0}return r}function hG(n,e,t,i,r,s){let o=e,a=0;for(let c=e;c<t;c++){const l=dG(n,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function jme(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?hG(n,r,s,t,i,o):function kme(n,e,t,i,r,s){let o=e,a=e,c=e,l=0;for(let u=e;u<t;u++)if((" "===n[u]||" "===n[u+1]||u+1===t)&&(c=u+1),c>a){let h=dG(n,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=hG(n,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(n,r,s,t,i,o),o}function Ume(n,e,t,i,r,s){let o=0,a=0;for(let c=e;c<t;c++){const l=n[c],u=i[l];u?(a||(a=u.height),r[c]=o+u.width/2,o+=u.width):(ai.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=Nme)}s[0]=o,s[1]=a}function fG(n,e,t,i,r){const s=Array.from(n),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let g=0,m=0,b=0;for(let w=0;w<=o;w++){const L=s[w];if(("\n"===L||w===o)&&(b=w),b>m){const V=u?jme(s,t,i,r,m,b):Lme;for(let ce=0;ce<=V.length;ce++){const re=0===ce?m:V[ce-1],Ie=ce<V.length?V[ce]:b;Ume(s,re,Ie,r,a,f);for(let Ne=re;Ne<Ie;Ne++)c[Ne]=g+f[1]/2,l[Ne]=f[0];g+=f[1]*e,h[0]=Math.max(h[0],f[0])}m=b}"\n"===L&&(a[m]=0,c[m]=0,l[m]=0,m++)}return h[1]=g,{x:a,y:c,rowWidth:l,size:h}}class pG{constructor(e=5){we(this,"limit",void 0),we(this,"_cache",{}),we(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const Y0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Hme(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let wA=new pG(3);function Wme(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function yG(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class Yme{constructor(){we(this,"props",{...Y0}),we(this,"_key",void 0),we(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function zme(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=wA.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=wA.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,wA.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");yG(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:b,yOffset:w}=function Bme({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of n)if(!s[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const u=t+2*i;return{mapping:s,xOffset:l,yOffset:a+c*u,canvasHeight:Fme(a+(c+1)*u)}}({getFontWidth:L=>f.measureText(L).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==m){const L=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(L,0,0)}if(yG(f,r,o,s),c){const L=new(Pme())(o,a,l,u,r,s),V=f.getImageData(0,0,L.size,L.size);for(const ce of t)Wme(L.draw(ce),V),f.putImageData(V,g[ce].x-a,g[ce].y+a)}else for(const L of t)f.fillText(L,g[L].x,g[L].y+.9*o);return{xOffset:b,yOffset:w,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Kme={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class xO extends Vf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[vA,bA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:VE[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new dm(e,{...this.getShaders(),id:this.props.id,geometry:new ah({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}we(xO,"defaultProps",Kme),we(xO,"layerName","TextBackgroundLayer");const vG={start:1,middle:0,end:-1},bG={top:1,center:0,bottom:-1},EO=[0,0,0,255],Zme={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:EO},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Y0.characterSet},fontFamily:Y0.fontFamily,fontWeight:Y0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:EO},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:EO},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class AO extends vO{constructor(...e){super(...e),we(this,"state",void 0),we(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{size:[f,g]}=fG(h,c,o,a,r);return[(vG["function"==typeof l?l(t,i):l]-1)*f/2,(bG["function"==typeof u?u(t,i):u]-1)*g/2,f,g]}),we(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{x:f,y:g,rowWidth:m,size:[b,w]}=fG(h,c,o,a,r),L=vG["function"==typeof l?l(t,i):l],V=bG["function"==typeof u?u(t,i):u],ce=f.length,re=new Array(2*ce);let Ie=0;for(let Ne=0;Ne<ce;Ne++)re[Ie++]=(L-1)*b/2+(1-L)*(b-m[Ne])/2+f[Ne],re[Ie++]=(V-1)*w/2+g[Ne];return re})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Yme}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=t.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:u}=function Vme({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,c=i?i/o:0,l=r[e]||Math.ceil((n.length-c)/a),u=s&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let m=0;m<l;m++)f[m]=n[m*a+c]}for(let g=0;g<e;g++){const w=f.subarray(r[g],r[g+1]||l);h[g]=String.fromCodePoint.apply(null,w),u&&w.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:o,characterSet:c});a=u,s=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:u}=fA(t);o=[0],a=0;for(const h of l){u.index++;const f=Array.from(s(h,u)||"");c&&f.forEach(c.add,c),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,getBackgroundColor:b,getBorderColor:w,getBorderWidth:L,backgroundPadding:V,background:ce,billboard:re,fontSettings:Ie,outlineWidth:Ne,outlineColor:st,sizeScale:dt,sizeUnits:qe,sizeMinPixels:ht,sizeMaxPixels:vt,transitions:Ct,updateTriggers:ft}=this.props,gt=this.getSubLayerClass("characters",wO),Pt=this.getSubLayerClass("background",xO);return[ce&&new Pt({getFillColor:b,getLineColor:w,getLineWidth:L,padding:V,getPosition:u,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:dt/this.state.fontAtlasManager.props.fontSize,sizeUnits:qe,sizeMinPixels:ht,sizeMaxPixels:vt,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new gt({sdf:Ie.sdf,smoothing:Number.isFinite(Ie.smoothing)?Ie.smoothing:Y0.smoothing,outlineWidth:Ne,outlineColor:st,iconAtlas:s,iconMapping:o,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:dt*r,sizeUnits:qe,sizeMinPixels:ht*r,sizeMaxPixels:vt*r,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function $me(n){ai.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),wA=new pG(n)}(e)}}we(AO,"defaultProps",Zme),we(AO,"layerName","TextLayer");const wG="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Qme={lightSources:{}};function SO(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const CO={name:"lights",vs:wG,fs:wG,getUniforms:function xG(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qme;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function e_e(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?SO(e):[0,0,0],t.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=SO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=SO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return xG({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},t_e={};const i_e={name:"phong-lighting",dependencies:[CO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function AG(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t_e;if(!("material"in n))return{};const{material:e}=n;return e?function n_e(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},TO=Math.PI/180,xA=new Float32Array(16),SG=new Float32Array(12);function CG(n,e,t){const i=e[0]*TO,r=e[1]*TO,s=e[2]*TO,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=t[0],g=t[1],m=t[2];n[0]=f*h*u,n[1]=f*c*u,n[2]=f*-a,n[3]=g*(-c*l+h*a*o),n[4]=g*(h*l+c*a*o),n[5]=g*u*o,n[6]=m*(c*o+h*a*l),n[7]=m*(-h*o+c*a*l),n[8]=m*u*l}function TG(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const MG={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=l||!c&&!!a(i[0]);n.constant=g?l:h&&u&&f;const m=n.value;if(n.constant){let b;g?(xA.set(a),b=TG(xA)):(b=SG,CG(b,r,s),b.set(o,9)),n.value=new Float32Array(b)}else{let b=e*n.size;const{iterable:w,objectInfo:L}=fA(i,e,t);for(const V of w){let ce;L.index++,g?(xA.set(l?a:a(V,L)),ce=TG(xA)):(ce=SG,CG(ce,h?r:r(V,L),u?s:s(V,L)),ce.set(f?o:o(V,L),9)),m[b++]=ce[0],m[b++]=ce[1],m[b++]=ce[2],m[b++]=ce[3],m[b++]=ce[4],m[b++]=ce[5],m[b++]=ce[6],m[b++]=ce[7],m[b++]=ce[8],m[b++]=ce[9],m[b++]=ce[10],m[b++]=ce[11]}}}};function IG(n,e){return e===gi.CARTESIAN||e===gi.METER_OFFSETS||e===gi.DEFAULT&&!n.isGeospatial}function DG(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),ai.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function o_e(n,e){if(n.attributes)return DG(n.attributes,e),n instanceof ah?n:new ah(n);if(n.positions||n.POSITION)return DG(n,e),new ah({attributes:n});throw Error("Invalid mesh")}class MO extends Vf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){const e=!Qn(this.context.gl),t={};return KD(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[vA,i_e,bA],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:MG}),this.setState({emptyTexture:new Gs(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||IG(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new dm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:o_e(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}we(MO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),we(MO,"layerName","SimpleMeshLayer");const RG={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[CO]};class hm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||na(this.constructor.name),this.display=!0,this.position=new uo,this.rotation=new uo,this.scale=new uo(1,1,1),this.matrix=new Pn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return qt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return qt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return qt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:s=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){qt(e),t=t||this.matrix;const i=new Pn(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class q0 extends hm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;rn.assert(t.every(i=>i instanceof hm),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const s=t.getBounds();if(!s)return;const[o,a]=s,c=new uo(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new uo(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let u=0;u<8;u++){const h=new uo(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Pn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Pn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof q0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let EA;class IO extends EV{static get ZERO(){return EA||(EA=new IO(0,0,0,0),Object.freeze(EA)),EA}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Nu(e)&&1===arguments.length?this.copy(e):(Yr.debug&&(Zn(e),Zn(t),Zn(i),Zn(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Yr.debug&&(Zn(e.x),Zn(e.y),Zn(e.z),Zn(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Zn(e)}get w(){return this[3]}set w(e){this[3]=Zn(e)}transform(e){return aD(this,this,e),this.check()}transformByMatrix3(e){return function Hse(n,e,t){const i=e[0],r=e[1],s=e[2];n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Vse(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return TV(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function OG(){var n=new ta(4);return ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function PG(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function NG(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+o*a+r*l-s*c,n[1]=r*u+o*c+s*a-i*l,n[2]=s*u+o*l+i*c-r*a,n[3]=o*u-i*a-r*c-s*l,n}var FG=NV,x_e=function(){var n=AV(),e=SV(1,0,0),t=SV(0,1,0);return function(i,r,s){var o=CV(r,s);return o<-.999999?(RE(n,e,r),function Mse(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&RE(n,t,r),function Rse(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),PG(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(RE(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function yoe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();OG(),OG(),function c_e(){var n=new ta(9);ta!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const E_e=[0,0,0,1];class DO extends IE{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function LG(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return PG(this,e,t),this.check()}identity(){return function l_e(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Zn(e)}get y(){return this[1]}set y(e){this[1]=Zn(e)}get z(){return this[2]}set z(e){this[2]=Zn(e)}get w(){return this[3]}set w(e){this[3]=Zn(e)}len(){return function moe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function _oe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function voe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return x_e(this,e,t),this.check()}add(e){return function goe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function f_e(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function __e(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function m_e(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function boe(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return NG(this,this,e),this.check()}multiplyLeft(e){return NG(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function u_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+o*a,n[1]=r*c+s*a,n[2]=s*c-r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function d_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-s*a,n[1]=r*c+o*a,n[2]=s*c+i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function h_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return FG(this,this,e),this.check()}slerp(e,t,i){let r,s,o;switch(arguments.length){case 1:({start:r=E_e,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=t;break;default:r=e,s=t,o=i}return function AA(n,e,t,i){var f,g,m,b,w,r=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],h=t[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>Il?(f=Math.acos(g),m=Math.sin(f),b=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(b=1-i,w=i),n[0]=b*r+w*c,n[1]=b*s+w*l,n[2]=b*o+w*u,n[3]=b*a+w*h,n}(this,r,s,o),this.check()}transformVector4(e,t=new IO){return function woe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;n[0]=u*l+g*-o+h*-c-f*-a,n[1]=h*l+g*-a+f*-o-u*-c,n[2]=f*l+g*-c+u*-a-h*-o,n[3]=e[3]}(t,e,this),DE(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const A_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S_e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function jG(n){if(!n._animation){const e=S_e[n.componentType],t=A_e[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=t)a.push(Array.from(o.slice(c,c+t)));n._animation=a}}return n._animation}const C_e=new Pn,RO=new DO;class O_e{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function R_e(n,e,t,i){let{input:r,interpolation:s,output:o}=e;const c=n%r[r.length-1],l=r.findIndex(g=>g>=c),u=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:rn.warn("Bad animation path ".concat(i))()}qt(t[i].length===o[u].length);const h=r[u],f=r[l];switch(s){case"STEP":!function D_e(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,o[u]);break;case"LINEAR":f>h&&function M_e(n,e,t,i,r){if("rotation"===e){RO.slerp({start:t,target:i,ratio:r});for(let s=0;s<RO.length;s++)n[e][s]=RO[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(t,i,o[u],o[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function I_e(n,e,t){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const u=r[l]*a,h=s[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:rn.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function T_e(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=C_e.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(o,o._node)})}}class P_e{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),s=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:jG(e.accessors[c]),interpolation:l,output:jG(e.accessors[u])}}),o=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new O_e({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class N_e extends hm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof dm?(this.model=e,this._setModelNodeProps(t)):this.model=new dm(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class L_e{constructor(e,t){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},KD(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new Gs(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(rn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function UG(n,e){return Qn(n)?"#version 300 es\n".concat(e):e}const j_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U_e={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class V_e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},U_e,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new P_e(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new q0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new q0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Pn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new q0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){rn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function k_e(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new L_e(n,e);rn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new N_e(n,{id:t,drawMode:i,vertexCount:r,modules:[RG],parameters:a.parameters,vs:UG(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:UG(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...o,defines:{...a.defines,...o.defines}});return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),rn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Wi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new ia({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:j_e[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var X0=S(9125);const W_e="3.2.13",OO={};function Hf(n){return PO.apply(this,arguments)}function PO(){return PO=kt(function*(n,e=null,t={}){return e&&(n=function $_e(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:sh?t.CDN?(Pl(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(W_e,"/dist/libs/").concat(n)):yR?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),OO[n]=OO[n]||function Y_e(n){return NO.apply(this,arguments)}(n),yield OO[n]}),PO.apply(this,arguments)}function NO(){return NO=kt(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!sh)try{return X0&&X0.requireFromFile&&(yield X0.requireFromFile(n))}catch{return null}return yR?importScripts(n):function q_e(n,e){if(!sh)return X0.requireFromString&&X0.requireFromString(n,e);if(yR)return eval.call(Ade,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),NO.apply(this,arguments)}const X_e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),K_e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let LO,kO;function HG(n){return FO.apply(this,arguments)}function FO(){return FO=kt(function*(n){const e=n.modules||{};return e.basis?e.basis:(LO=LO||function J_e(n){return BO.apply(this,arguments)}(n),yield LO)}),FO.apply(this,arguments)}function BO(){return BO=kt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Hf("basis_transcoder.js","textures",n),yield Hf("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function Z_e(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,t)}),BO.apply(this,arguments)}function GG(n){return jO.apply(this,arguments)}function jO(){return jO=kt(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(kO=kO||function Q_e(n){return UO.apply(this,arguments)}(n),yield kO)}),jO.apply(this,arguments)}function UO(){return UO=kt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Hf(K_e,"textures",n),yield Hf(X_e,"textures",n)]),e=e||globalThis.BASIS,yield function eye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,t)}),UO.apply(this,arguments)}const tye=["","WEBKIT_","MOZ_"],zG={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let SA=null;var VO,CA,HO,TA,$G,GO,YG,qG;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(VO||(VO={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(CA||(CA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(HO||(HO={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(TA||(TA={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}($G||($G={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(GO||(GO={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(YG||(YG={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(qG||(qG={}));const Oa=[171,75,84,88,32,50,48,187,13,10,26,10],aye={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function WO(){return WO=kt(function*(n,e){if("auto"===e.basis.containerFormat){if(function oye(n){const e=new Uint8Array(n);return!(e.byteLength<Oa.length||e[0]!==Oa[0]||e[1]!==Oa[1]||e[2]!==Oa[2]||e[3]!==Oa[3]||e[4]!==Oa[4]||e[5]!==Oa[5]||e[6]!==Oa[6]||e[7]!==Oa[7]||e[8]!==Oa[8]||e[9]!==Oa[9]||e[10]!==Oa[10]||e[11]!==Oa[11])}(n))return JG((yield GG(e)).KTX2File,n,e);const{BasisFile:t}=yield HG(e);return $O(t,n,e)}if("encoder"===e.basis.module){const t=yield GG(e);return"ktx2"===e.basis.containerFormat?JG(t.KTX2File,n,e):$O(t.BasisFile,n,e)}{const{BasisFile:i}=yield HG(e);return $O(i,n,e)}}),WO.apply(this,arguments)}function $O(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(lye(i,o,l,t));s.push(c)}return s}finally{i.close(),i.delete()}}function lye(n,e,t,i){const r=n.getImageWidth(e,t),s=n.getImageHeight(e,t),o=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=ZG(i,o),u=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(u);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function JG(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(uye(i,o,t));break}return[s]}finally{i.close(),i.delete()}}function uye(n,e,t){const{alphaFlag:i,height:r,width:s}=n.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=ZG(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!n.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function ZG(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=QG()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),aye[t]}function QG(){const n=function nye(n){if(!SA){n=n||function iye(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,SA=new Set;for(const e of tye)for(const t in zG)n&&n.getExtension("".concat(e).concat(t))&&SA.add(zG[t])}return SA}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const dye={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function cye(n,e){return WO.apply(this,arguments)}};function Gf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const IA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),ez=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:fye}=(ez&&parseFloat(ez[1]),globalThis),YO=typeof Image<"u",qO=typeof ImageBitmap<"u",XO=!!IA||!!fye;function tz(n){const e=function iz(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const mye=/^data:image\/svg\+xml/,_ye=/\.svg((\?|#).*)?$/;function KO(n){return n&&(mye.test(n)||_ye.test(n))}function rz(n,e){if(KO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function sz(n,e,t){return JO.apply(this,arguments)}function JO(){return JO=kt(function*(n,e,t){const i=function yye(n,e){if(KO(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return rz(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function vye(n,e){return ZO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),JO.apply(this,arguments)}function ZO(){return ZO=kt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),ZO.apply(this,arguments)}const bye={};let oz=!0;function QO(){return QO=kt(function*(n,e,t){let i;i=KO(t)?yield sz(n,e,t):rz(n,t);const r=e&&e.imagebitmap;return yield function xye(n){return e2.apply(this,arguments)}(i,r)}),QO.apply(this,arguments)}function e2(){return e2=kt(function*(n,e=null){if((function Eye(n){for(const e in n||bye)return!1;return!0}(e)||!oz)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),oz=!1}return yield createImageBitmap(n)}),e2.apply(this,arguments)}const Ul=!1,J0=!0;function t2(n){const e=Z0(n);return function Aye(n){const e=Z0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Ul)?{mimeType:"image/png",width:e.getUint32(16,Ul),height:e.getUint32(20,Ul)}:null}(e)||function Tye(n){const e=Z0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Ul)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Mye(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Ul);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Ul),width:e.getUint16(s+7,Ul)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Ul)}return null}(e)||function Sye(n){const e=Z0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Ul)?{mimeType:"image/gif",width:e.getUint16(6,J0),height:e.getUint16(8,J0)}:null}(e)||function Cye(n){const e=Z0(n);return e.byteLength>=14&&16973===e.getUint16(0,Ul)&&e.getUint32(2,J0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,J0),height:e.getUint32(22,J0)}:null}(e)}function Z0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function n2(){return n2=kt(function*(n,e){const{mimeType:t}=t2(n)||{},i=globalThis._parseImageNode;return Gf(i),yield i(n,t)}),n2.apply(this,arguments)}function r2(){return r2=kt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function Rye(n){switch(n){case"auto":case"data":return function gye(){if(qO)return"imagebitmap";if(YO)return"image";if(XO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function pye(n){switch(n){case"auto":return qO||YO||XO;case"imagebitmap":return qO;case"image":return YO;case"data":return XO;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function wye(n,e,t){return QO.apply(this,arguments)}(n,e,s);break;case"image":a=yield sz(n,e,s);break;case"data":a=yield function Iye(n,e){return n2.apply(this,arguments)}(n,e);break;default:Gf(!1)}return"data"===r&&(a=function nz(n){switch(tz(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),r2.apply(this,arguments)}const Oye={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function Dye(n,e,t){return r2.apply(this,arguments)},tests:[n=>!!t2(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function az(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function cz(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function Pa(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function lz(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function Q0(n,e){return Gf(n>=0),Gf(e>0),n+(e-1)&~(e-1)}function Lye(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+Q0(i.byteLength,4)}const dz=["SCALAR","VEC2","VEC3","VEC4"],Fye=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Bye=new Map(Fye),kye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jye={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Uye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function hz(n){return dz[n-1]||dz[0]}function fz(n){const e=Bye.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function pz(n,e){const t=Uye[n.componentType],i=kye[n.type],s=n.count*i,o=n.count*i*jye[n.componentType];return Pa(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const Vye={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class ac{constructor(e){we(this,"gltf",void 0),we(this,"sourceBuffers",void 0),we(this,"byteLength",void 0),this.gltf=e||{json:{...Vye},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Pa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=pz(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Pa(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Pa(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=t2(e),r=t||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Pa(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Q0(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:hz(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:fz(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Lye(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Gye="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",zye="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Wye=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),$ye=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),gz={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Yye={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function c2(){return c2=kt(function*(n,e,t,i,r,s="NONE"){const o=yield function DA(){return u2.apply(this,arguments)}();!function RA(n,e,t,i,r,s,o){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),u=a(s.length),h=new Uint8Array(n.exports.memory.buffer);h.set(s,u);const f=e(l,i,r,u,s.length);if(0===f&&o&&o(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[Yye[r]],n,e,t,i,o.exports[gz[s||"NONE"]])}),c2.apply(this,arguments)}let l2;function u2(){return u2=kt(function*(){return l2||(l2=function Xye(){return d2.apply(this,arguments)}()),l2}),u2.apply(this,arguments)}function d2(){return d2=kt(function*(){let n=Gye;WebAssembly.validate(Wye)&&(n=zye,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Kye(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?$ye[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),d2.apply(this,arguments)}const h2="EXT_meshopt_compression",Jye=h2;function Zye(n,e){return f2.apply(this,arguments)}function f2(){return f2=kt(function*(n,e){var t;const i=new ac(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const s of n.json.bufferViews||[])r.push(Qye(i,s));yield Promise.all(r),i.removeExtension(h2)}),f2.apply(this,arguments)}function Qye(n,e){return p2.apply(this,arguments)}function p2(){return p2=kt(function*(n,e){const t=n.getObjectExtension(e,h2);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=t,u=n.gltf.buffers[l],h=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function qye(n,e,t,i,r){return c2.apply(this,arguments)}(f,o,s,h,a,c),f}return null}),p2.apply(this,arguments)}const e0e=["image/png","image/jpeg","image/gif"],g2={};const pm="EXT_texture_webp",r0e=pm;function s0e(n,e){const t=new ac(n);if(!function t0e(n){return void 0===g2[n]&&(g2[n]=function n0e(n){switch(n){case"image/webp":return function i0e(){if(!IA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return IA;default:if(!IA){const{_parseImageNode:e}=globalThis;return!!e&&e0e.includes(n)}return!0}}(n)),g2[n]}("image/webp")){if(t.getRequiredExtensions().includes(pm))throw new Error("gltf: Required extension ".concat(pm," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,pm);s&&(r.source=s.source),t.removeObjectExtension(r,pm)}t.removeExtension(pm)}const OA="KHR_texture_basisu",o0e=OA;function a0e(n,e){const t=new ac(n),{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,OA);s&&(r.source=s.source),t.removeObjectExtension(r,OA)}t.removeExtension(OA)}const _z={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class PA{constructor(e,t,i=!1,r=new Map){we(this,"name",void 0),we(this,"type",void 0),we(this,"nullable",void 0),we(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new PA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let $i,yz,vz,bz,wz,xz,Ez,Az,Sz;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}($i||($i={}));class zf{static isNull(e){return e&&e.typeId===$i.Null}static isInt(e){return e&&e.typeId===$i.Int}static isFloat(e){return e&&e.typeId===$i.Float}static isBinary(e){return e&&e.typeId===$i.Binary}static isUtf8(e){return e&&e.typeId===$i.Utf8}static isBool(e){return e&&e.typeId===$i.Bool}static isDecimal(e){return e&&e.typeId===$i.Decimal}static isDate(e){return e&&e.typeId===$i.Date}static isTime(e){return e&&e.typeId===$i.Time}static isTimestamp(e){return e&&e.typeId===$i.Timestamp}static isInterval(e){return e&&e.typeId===$i.Interval}static isList(e){return e&&e.typeId===$i.List}static isStruct(e){return e&&e.typeId===$i.Struct}static isUnion(e){return e&&e.typeId===$i.Union}static isFixedSizeBinary(e){return e&&e.typeId===$i.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===$i.FixedSizeList}static isMap(e){return e&&e.typeId===$i.Map}static isDictionary(e){return e&&e.typeId===$i.Dictionary}get typeId(){return $i.NONE}compareTo(e){return this===e}}Symbol,Symbol,yz=Symbol.toStringTag;class gm extends zf{constructor(e,t){super(),we(this,"isSigned",void 0),we(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return $i.Int}get[yz](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class l0e extends gm{constructor(){super(!0,8)}}class u0e extends gm{constructor(){super(!0,16)}}class d0e extends gm{constructor(){super(!0,32)}}class h0e extends gm{constructor(){super(!1,8)}}class f0e extends gm{constructor(){super(!1,16)}}class p0e extends gm{constructor(){super(!1,32)}}vz=Symbol.toStringTag;class Cz extends zf{constructor(e){super(),we(this,"precision",void 0),this.precision=e}get typeId(){return $i.Float}get[vz](){return"Float"}toString(){return"Float".concat(this.precision)}}class g0e extends Cz{constructor(){super(32)}}class m0e extends Cz{constructor(){super(64)}}Symbol,Symbol,bz=Symbol.toStringTag,wz=Symbol.toStringTag,xz=Symbol.toStringTag,Ez=Symbol.toStringTag,Az=Symbol.toStringTag;class _0e extends zf{constructor(e,t){super(),we(this,"listSize",void 0),we(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return $i.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Az](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}Sz=Symbol.toStringTag;class mm{constructor(e,t){we(this,"fields",void 0),we(this,"metadata",void 0),function w0e(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function x0e(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new mm(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new mm(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof mm){const o=e;t=o.fields,i=Mz(Mz(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new mm(s,i)}}function Mz(n,e){return new Map([...n||new Map,...e||new Map])}function Iz(n,e,t){return function Tz(n,e,t){const i=function y0e(n){switch(n.constructor){case Int8Array:return new l0e;case Uint8Array:return new h0e;case Int16Array:return new u0e;case Uint16Array:return new f0e;case Int32Array:return new d0e;case Uint32Array:return new p0e;case Float32Array:return new g0e;case Float64Array:return new m0e;default:throw new Error("array type not supported")}}(e.value),r=t||function b0e(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new PA(n,new _0e(e.size,new PA("value",i)),!1,r)}(n,e,t?Dz(t.metadata):void 0)}function Dz(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const Rz={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},S0e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class T0e{constructor(e){we(this,"draco",void 0),we(this,"decoder",void 0),we(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,t),c=this._getMeshData(s,a,t),l=function c0e(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],h=a[l+1],f=a[l+2];e=u<e?u:e,t=h<t?h:t,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,t,i],[r,s,o]]}(c.attributes),u=function E0e(n,e,t){const i=Dz(e.metadata),r=[],s=function A0e(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const c=Iz(o,n[o],s[o]);r.push(c)}if(t){const o=Iz("indices",t);r.push(o)}return new mm(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,t);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(t,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function D0e(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=S0e[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function M0e(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,u),l=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in Rz)if(this.draco[o]===r)return Rz[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function I0e(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const NA="1.4.1",R0e="https://www.gstatic.com/draco/versioned/decoders/".concat(NA,"/draco_decoder.js"),O0e="https://www.gstatic.com/draco/versioned/decoders/".concat(NA,"/draco_wasm_wrapper.js"),P0e="https://www.gstatic.com/draco/versioned/decoders/".concat(NA,"/draco_decoder.wasm");let ev;function v2(){return v2=kt(function*(n){const e=n.modules||{};return ev=e.draco3d?ev||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):ev||function F0e(n){return w2.apply(this,arguments)}(n),yield ev}),v2.apply(this,arguments)}function w2(){return w2=kt(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield Hf(R0e,"draco",n):[e,t]=yield Promise.all([yield Hf(O0e,"draco",n),yield Hf(P0e,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function B0e(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),w2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(NA,"/javascript/draco_encoder.js");const E2={..._z,parse:function j0e(n,e){return A2.apply(this,arguments)}};function A2(){return A2=kt(function*(n,e){const{draco:t}=yield function L0e(n){return v2.apply(this,arguments)}(e),i=new T0e(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),A2.apply(this,arguments)}function Oz(n){const{buffer:e,size:t,count:i}=function V0e(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function H0e(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:hz(t),componentType:fz(e)}}const Wf="KHR_draco_mesh_compression",G0e=Wf;function z0e(n,e,t){const i=new ac(n);for(const r of Pz(i))i.getObjectExtension(r,Wf)}function W0e(n,e,t){return S2.apply(this,arguments)}function S2(){return S2=kt(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new ac(n),s=[];for(const o of Pz(r))r.getObjectExtension(o,Wf)&&s.push(Y0e(r,o,e,t));yield Promise.all(s),r.removeExtension(Wf)}),S2.apply(this,arguments)}function $0e(n,e={}){const t=new ac(n);for(const i of t.json.meshes||[])q0e(i),t.addRequiredExtension(Wf)}function Y0e(n,e,t,i){return C2.apply(this,arguments)}function C2(){return C2=kt(function*(n,e,t,i){const r=n.getObjectExtension(e,Wf);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=cz(s.buffer,s.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(o,E2,c,i),u=function U0e(n){const e={};for(const t in n)if("indices"!==t){const r=Oz(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=n.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,l.indices&&(e.indices=Oz(l.indices)),function X0e(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),C2.apply(this,arguments)}function q0e(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:t,extensions:{[Wf]:{bufferView:l,attributes:c}}}]}}function*Pz(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const $f="KHR_lights_punctual",K0e=$f;function J0e(n){return T2.apply(this,arguments)}function T2(){return T2=kt(function*(n){const e=new ac(n),{json:t}=e,i=e.getExtension($f);i&&(e.json.lights=i.lights,e.removeExtension($f));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,$f);s&&(r.light=s.light),e.removeObjectExtension(r,$f)}}),T2.apply(this,arguments)}function Z0e(n){return M2.apply(this,arguments)}function M2(){return M2=kt(function*(n){const e=new ac(n),{json:t}=e;if(t.lights){const i=e.addExtension($f);Pa(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,$f,i);delete e.json.lights}}),M2.apply(this,arguments)}const nv="KHR_materials_unlit",Q0e=nv;function eve(n){return I2.apply(this,arguments)}function I2(){return I2=kt(function*(n){const e=new ac(n),{json:t}=e;e.removeExtension(nv);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,nv)}),I2.apply(this,arguments)}function tve(n){const e=new ac(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,nv,{}),e.addExtension(nv))}const iv="KHR_techniques_webgl",nve=iv;function ive(n){return D2.apply(this,arguments)}function D2(){return D2=kt(function*(n){const e=new ac(n),{json:t}=e,i=e.getExtension(iv);if(i){const r=function sve(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,iv);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=ove(s.technique,e)),e.removeObjectExtension(s,iv)}e.removeExtension(iv)}}),D2.apply(this,arguments)}function rve(n,e){return R2.apply(this,arguments)}function R2(){return(R2=kt(function*(n,e){})).apply(this,arguments)}function ove(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const Nz=[Q,C,$,G,q,_,E];function O2(){return O2=kt(function*(n,e={},t){const i=Nz.filter(s=>Lz(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,n,e,t)}}),O2.apply(this,arguments)}function Lz(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const P2="KHR_binary_glTF",Fz={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},uve={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class dve{constructor(){we(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),we(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function lve(n){const e=new ac(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,P2);r&&Object.assign(i,r),e.removeObjectExtension(i,P2)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(P2)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in Fz)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in Fz)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=uve[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const s of e.materials){var t,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(t=s.values)||void 0===t?void 0:t.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const fve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},gve={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},mve={10240:9729,10241:9986,10242:10497,10243:10497};class vve{constructor(){we(this,"baseUri",""),we(this,"json",{}),we(this,"buffers",[]),we(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Pa(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function _ve(n){return pve[n]}(e.componentType),e.components=function yve(n){return fve[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=pz(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=t+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):mve,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return gve[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const Bz=1735152710,N2=12,LA=8,wve=1313821514,xve=5130562,Eve=0,Ave=1,Sve=0,_m=!0;function L2(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),Q0(i,4)}function F2(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),Q0(i,4)}function B2(){return B2=kt(function*(n,e,t=0,i,r){var s,o,a,c;(function Pve(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function Tve(n,e=0,t={}){const i=new DataView(n),{magic:r=Bz}=t,s=i.getUint32(e,!1);return s===r||s===Bz}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function Nye(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Pye(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?az(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?az(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};t=function Mve(n,e,t=0,i={}){const r=new DataView(e),s=function Cve(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),o=r.getUint32(t+4,_m),a=r.getUint32(t+8,_m);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=N2,n.version){case 1:return function Ive(n,e,t){Gf(n.header.byteLength>N2+LA);const i=e.getUint32(t+0,_m),r=e.getUint32(t+4,_m);return t+=LA,Gf(r===Sve),L2(n,e,t,i),(t+=i)+F2(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function Dve(n,e,t,i){return Gf(n.header.byteLength>N2+LA),function Rve(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,_m),s=e.getUint32(t+4,_m);switch(t+=LA,s){case wve:L2(n,e,t,r);break;case xve:F2(n,e,t,r);break;case Eve:i.strict||L2(n,e,t,r);break;case Ave:i.strict||F2(n,e,t,r)}t+=Q0(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(o,e,t,i.glb),Pa("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),n._glb=o,n.json=o.json}else Pa(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function hve(n,e={}){(new dve).normalize(n,e)}(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function ave(n,e={},t){const i=Nz.filter(s=>Lz(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield function Nve(n,e,t){return k2.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function Lve(n,e,t){return j2.apply(this,arguments)}(n,i,r);l.push(h)}const u=function cve(n){return O2.apply(this,arguments)}(n,i,r);return l.push(u),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function bve(n,e){return(new vve).postProcess(n,e)}(n,i):n}),B2.apply(this,arguments)}function k2(){return k2=kt(function*(n,e,t){const i=n.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=t;Pa(c);const l=lz(a.uri,e),u=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);n.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[o]&&(n.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),k2.apply(this,arguments)}function j2(){return j2=kt(function*(n,e,t){const i=function Fve(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],s=[];for(const o of i)s.push(Bve(n,r[o],o,e,t));return yield Promise.all(s)}),j2.apply(this,arguments)}function Bve(n,e,t,i,r){return U2.apply(this,arguments)}function U2(){return U2=kt(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=lz(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function uz(n,e,t){const i=n.bufferViews[t];Pa(i);const s=e[i.buffer];return Pa(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=cz(l.buffer,l.byteOffset,l.byteLength)}Pa(a,"glTF image has no data");let c=yield o(a,[Oye,dye],{mimeType:e.mimeType,basis:i.basis||{format:QG()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),U2.apply(this,arguments)}const ym={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function kve(n){return V2.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function V2(){return V2=kt(function*(n,e={},t){(e={...ym.options,...e}).gltf={...ym.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function Ove(n,e){return B2.apply(this,arguments)}({},n,i,e,t)}),V2.apply(this,arguments)}function H2(){return H2=kt(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Uve(n){return G2.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),H2.apply(this,arguments)}function G2(){return G2=kt(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),G2.apply(this,arguments)}const kz=[255,255,255,255],Gve={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:kz},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[ym]};class z2 extends Vf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){const e=[vA,bA];return"pbr"===this.props._lighting&&e.push(RG),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:kz,transition:!0},instanceModelMatrix:MG})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof hm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function H_e(n,e,t){const i=new V_e(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function jve(n){return H2.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(ai.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof hm?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&ai.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):ai.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):ai.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof hm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!Qn(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(u),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:IG(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}we(z2,"defaultProps",Gve),we(z2,"layerName","ScenegraphLayer");class zve extends ah{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("sphere-geometry")}=e,{indices:i,attributes:r}=function Wve(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(t+1);if("number"==typeof i){const L=i;i=(V,ce,re,Ie,Ne)=>L}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),b=new(u>65535?Uint32Array:Uint16Array)(e*t*6);for(let L=0;L<=e;L++)for(let V=0;V<=t;V++){const ce=V/t,re=L/e,Ie=V+L*(t+1),Ne=2*Ie,st=3*Ie,dt=l*ce,qe=o*re,ht=Math.sin(dt),vt=Math.cos(dt),Ct=Math.sin(qe),gt=vt*Ct,Pt=Math.cos(qe),Lt=ht*Ct,dn=i(gt,Pt,Lt,ce,re);h[st+0]=dn*gt,h[st+1]=dn*Pt,h[st+2]=dn*Lt,f[st+0]=gt,f[st+1]=Pt,f[st+2]=Lt,g[Ne+0]=ce,g[Ne+1]=1-re}const w=t+1;for(let L=0;L<t;L++)for(let V=0;V<e;V++){const ce=6*(L*e+V);b[ce+0]=V*w+L,b[ce+1]=V*w+L+1,b[ce+2]=(V+1)*w+L,b[ce+3]=(V+1)*w+L,b[ce+4]=V*w+L+1,b[ce+5]=(V+1)*w+L+1}return{indices:{size:1,value:b},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const $ve={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class jz extends ah{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Yve(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),u=(r+1)*(s+1+l),h=Math.atan2(e-t,i),f=Math.sin,g=Math.cos,m=Math.PI,b=g(h),w=f(h),L=a?-2:0,V=s+(c?2:0),ce=r+1,re=new Uint16Array(r*(s+l)*6),Ie=$ve[o],Ne=new Float32Array(3*u),st=new Float32Array(3*u),dt=new Float32Array(2*u);let qe=0,ht=0;for(let vt=L;vt<=V;vt++){let gt,Ct=vt/s,ft=i*Ct;vt<0?(ft=0,Ct=1,gt=e):vt>s?(ft=i,Ct=1,gt=t):gt=e+vt/s*(t-e),(-2===vt||vt===s+2)&&(gt=0,Ct=0),ft-=i/2;for(let Pt=0;Pt<ce;Pt++){const Lt=f(Pt*m*2/r),dn=g(Pt*m*2/r);Ne[qe+Ie[0]]=Lt*gt,Ne[qe+Ie[1]]=ft,Ne[qe+Ie[2]]=dn*gt,st[qe+Ie[0]]=vt<0||vt>s?0:Lt*b,st[qe+Ie[1]]=vt<0?-1:vt>s?1:w,st[qe+Ie[2]]=vt<0||vt>s?0:dn*b,dt[ht+0]=Pt/r,dt[ht+1]=Ct,ht+=2,qe+=3}}for(let vt=0;vt<s+l;vt++)for(let Ct=0;Ct<r;Ct++){const ft=6*(vt*r+Ct);re[ft+0]=ce*(vt+0)+0+Ct,re[ft+1]=ce*(vt+0)+1+Ct,re[ft+2]=ce*(vt+1)+1+Ct,re[ft+3]=ce*(vt+0)+0+Ct,re[ft+4]=ce*(vt+1)+1+Ct,re[ft+5]=ce*(vt+1)+0+Ct}return{indices:re,attributes:{POSITION:{size:3,value:Ne},NORMAL:{size:3,value:st},TEXCOORD_0:{size:2,value:dt}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class qve extends jz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Xve extends jz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const Kve=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Jve=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Zve=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Qve=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),ebe={POSITION:{size:3,value:new Float32Array(Jve)},NORMAL:{size:3,value:new Float32Array(Zve)},TEXCOORD_0:{size:2,value:new Float32Array(Qve)}};class tbe extends ah{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(Kve)},attributes:{...ebe,...e.attributes}})}}function FA(n,e,t){e||(e=new Pn(Pn.IDENTITY));const i=new Pn(Pn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new Pn(Pn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new Pn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===FA(s,r,t))return!1;return!0}function Uz(){G4([_z,ym])}function Vz(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||FA(r,new Pn(Pn.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function Hz(n,e){return W2.apply(this,arguments)}function W2(){return W2=kt(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield sA(i,ym,{DracoLoader:E2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),Vz(n.scenegraphNode,r)}),W2.apply(this,arguments)}function nbe(n,e){return $2.apply(this,arguments)}function $2(){return $2=kt(function*(n,e){return Vz(n,yield e)}),$2.apply(this,arguments)}class jc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new ve);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new ve);const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new jc);const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],b=r[0],w=r[1],L=r[2],V=r[3],ce=r[4],re=r[5],Ie=r[6],Ne=r[7],st=r[8];return s[0]=o*b+a*V+c*Ie,s[1]=o*w+a*ce+c*Ne,s[2]=o*L+a*re+c*st,s[3]=l*b+u*V+h*Ie,s[4]=l*w+u*ce+h*Ne,s[5]=l*L+u*re+h*st,s[6]=f*b+g*V+m*Ie,s[7]=f*w+g*ce+m*Ne,s[8]=f*L+g*re+m*st,t}scale(e,t){void 0===t&&(t=new jc);const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t){void 0===t&&(t=new ve);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--c);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new jc);const r=ibe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,c=r+r,l=t*o,u=t*a,h=t*c,f=i*a,g=i*c,m=r*c,b=s*o,w=s*a,L=s*c,V=this.elements;return V[0]=1-(f+m),V[1]=u-L,V[2]=h+w,V[3]=u+L,V[4]=1-(l+m),V[5]=g-b,V[6]=h-w,V[7]=g+b,V[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new jc);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const ibe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ve{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new ve);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return t.x=a*s-c*r,t.y=c*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new ve(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new ve(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new jc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ve);const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new ve);const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t){return void 0===t&&(t=new ve),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new ve),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ve),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=rbe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=sbe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(Gz),Gz.almostEquals(e,t)}clone(){return new ve(this.x,this.y,this.z)}}ve.ZERO=new ve(0,0,0),ve.UNIT_X=new ve(1,0,0),ve.UNIT_Y=new ve(0,1,0),ve.UNIT_Z=new ve(0,0,1);const rbe=new ve,sbe=new ve,Gz=new ve;class ir{constructor(e){void 0===e&&(e={}),this.lowerBound=new ve,this.upperBound=new ve,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,zz),l=zz),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new ir).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),t.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,t){const i=Wz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=Wz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(h,f));return!(m<0||g>m)}}const zz=new ve,Wz=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve];class obe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Fr{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new ve),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=abe;e.tangents(i,cbe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new Fr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return t.x=i*u+o*a+r*l-s*c,t.y=r*u+o*c+s*a-i*l,t.z=s*u+o*l+i*c-r*a,t.w=o*u-i*a-r*c-s*l,t}inverse(e){void 0===e&&(e=new Fr);const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Fr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new ve);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;return t.x=u*l+g*-o+h*-c-f*-a,t.y=h*l+g*-a+f*-o-u*-c,t.z=f*l+g*-c+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,s;void 0===t&&(t="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const u=o*a+c*l;if(u>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*g)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===r&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new Fr(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new Fr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,b,w,c=e.x,l=e.y,u=e.z,h=e.w;return g=r*c+s*l+o*u+a*h,g<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),b=Math.sin((1-t)*f)/m,w=Math.sin(t*f)/m):(b=1-t,w=t),i.x=b*r+w*c,i.y=b*s+w*l,i.z=b*o+w*u,i.w=b*a+w*h,i}integrate(e,t,i,r){void 0===r&&(r=new Fr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,u=this.z,h=this.w,f=.5*t;return r.x+=f*(s*h+o*u-a*l),r.y+=f*(o*h+a*c-s*u),r.z+=f*(a*h+s*l-o*c),r.w+=f*(-s*c-o*l-a*u),r}}const abe=new ve,cbe=new ve,lbe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let sn=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=lbe,n})();class _i{constructor(e){void 0===e&&(e={}),this.position=new ve,this.quaternion=new Fr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return _i.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return _i.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new ve),i.vsub(e,r),t.conjugate(Yz),Yz.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new ve),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new ve),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new ve),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const Yz=new Fr;class Yf extends sn{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:sn.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ve;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){t[o[c]].vsub(t[o[(c+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new ve;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];Yf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new ve,o=new ve;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,c,l){const u=new ve;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const b=u.dot(o);b>f&&(f=b,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const b=i.vertices[i.faces[h][m]],w=new ve;w.copy(b),s.vmult(w,w),r.vadd(w,w),g.push(w)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,c,l)}findSeparatingAxis(e,t,i,r,s,o,a,c){const l=new ve,u=new ve,h=new ve,f=new ve,g=new ve,m=new ve;let b=Number.MAX_VALUE;const w=this;if(w.uniqueAxes)for(let L=0;L!==w.uniqueAxes.length;L++){i.vmult(w.uniqueAxes[L],l);const V=w.testSepAxis(l,e,t,i,r,s);if(!1===V)return!1;V<b&&(b=V,o.copy(l))}else{const L=a?a.length:w.faces.length;for(let V=0;V<L;V++){l.copy(w.faceNormals[a?a[V]:V]),i.vmult(l,l);const re=w.testSepAxis(l,e,t,i,r,s);if(!1===re)return!1;re<b&&(b=re,o.copy(l))}}if(e.uniqueAxes)for(let L=0;L!==e.uniqueAxes.length;L++){s.vmult(e.uniqueAxes[L],u);const V=w.testSepAxis(u,e,t,i,r,s);if(!1===V)return!1;V<b&&(b=V,o.copy(u))}else{const L=c?c.length:e.faces.length;for(let V=0;V<L;V++){u.copy(e.faceNormals[c?c[V]:V]),s.vmult(u,u);const re=w.testSepAxis(u,e,t,i,r,s);if(!1===re)return!1;re<b&&(b=re,o.copy(u))}}for(let L=0;L!==w.uniqueEdges.length;L++){i.vmult(w.uniqueEdges[L],f);for(let V=0;V!==e.uniqueEdges.length;V++)if(s.vmult(e.uniqueEdges[V],g),f.cross(g,m),!m.almostZero()){m.normalize();const ce=w.testSepAxis(m,e,t,i,r,s);if(!1===ce)return!1;ce<b&&(b=ce,o.copy(m))}}return r.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){Yf.project(this,e,i,r,Y2),Yf.project(t,e,s,o,q2);const c=Y2[0],l=Y2[1],u=q2[0],h=q2[1];if(c<h||u<l)return!1;const f=c-h,g=u-l;return f<g?f:g}calculateLocalInertia(e,t){const i=new ve,r=new ve;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const c=new ve,l=new ve,u=new ve,h=new ve,f=new ve,g=new ve,m=new ve,b=new ve,w=this,V=r,ce=[];let re=-1,Ie=Number.MAX_VALUE;for(let ht=0;ht<w.faces.length;ht++){c.copy(w.faceNormals[ht]),i.vmult(c,c);const vt=c.dot(e);vt<Ie&&(Ie=vt,re=ht)}if(re<0)return;const Ne=w.faces[re];Ne.connectedFaces=[];for(let ht=0;ht<w.faces.length;ht++)for(let vt=0;vt<w.faces[ht].length;vt++)-1!==Ne.indexOf(w.faces[ht][vt])&&ht!==re&&-1===Ne.connectedFaces.indexOf(ht)&&Ne.connectedFaces.push(ht);const st=Ne.length;for(let ht=0;ht<st;ht++){const vt=w.vertices[Ne[ht]];vt.vsub(w.vertices[Ne[(ht+1)%st]],l),u.copy(l),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[re]),i.vmult(h,h),t.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(vt),i.vmult(g,g),t.vadd(g,g);const ft=Ne.connectedFaces[ht];m.copy(this.faceNormals[ft]);const gt=this.getPlaneConstantOfFace(ft);b.copy(m),i.vmult(b,b);const Pt=gt-b.dot(t);for(this.clipFaceAgainstPlane(V,ce,b,Pt);V.length;)V.shift();for(;ce.length;)V.push(ce.shift())}m.copy(this.faceNormals[re]);const dt=this.getPlaneConstantOfFace(re);b.copy(m),i.vmult(b,b);const qe=dt-b.dot(t);for(let ht=0;ht<V.length;ht++){let vt=b.dot(V[ht])+qe;vt<=s&&(console.log(`clamped: depth=${vt} to minDist=${s}`),vt=s),vt<=o&&vt<=1e-6&&a.push({point:V[ht],normal:b,depth:vt})}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],o=i.dot(l)+r,s<0)if(o<0){const h=new ve;h.copy(l),t.push(h)}else{const h=new ve;c.lerp(l,s/(s-o),h),t.push(h)}else if(o<0){const h=new ve;c.lerp(l,s/(s-o),h),t.push(h),t.push(l)}c=l,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ve);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new ve);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,c,l,u,h,f=new ve;for(let g=0;g<s.length;g++)f.copy(s[g]),t.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===u||f.y>u)&&(u=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,c),r.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ve);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,o=new ve;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],u=new ve;e.vsub(l,u);const h=c.dot(u),f=new ve;o.vsub(l,f);const g=c.dot(f);if(h<0&&g>0||h>0&&g<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=dbe;let c=0,l=0;const u=hbe,h=e.vertices;u.setZero(),_i.vectorToLocalFrame(i,r,t,a),_i.pointToLocalFrame(i,r,u,u);const f=u.dot(a);l=c=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>c&&(c=m),m<l&&(l=m)}if(l-=f,c-=f,l>c){const g=l;l=c,c=g}s[0]=c,s[1]=l}}const Y2=[],q2=[],dbe=(new ve,new ve),hbe=new ve;class BA extends sn{constructor(e){super({type:sn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=ve,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Yf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new ve),BA.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)lh.set(s[o][0],s[o][1],s[o][2]),t.vmult(lh,lh),e.vadd(lh,lh),i(lh.x,lh.y,lh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;Vl[0].set(s.x,s.y,s.z),Vl[1].set(-s.x,s.y,s.z),Vl[2].set(-s.x,-s.y,s.z),Vl[3].set(-s.x,-s.y,-s.z),Vl[4].set(s.x,-s.y,-s.z),Vl[5].set(s.x,s.y,-s.z),Vl[6].set(-s.x,s.y,-s.z),Vl[7].set(s.x,-s.y,s.z);const o=Vl[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Vl[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,h=c.z;l>r.x&&(r.x=l),u>r.y&&(r.y=u),h>r.z&&(r.z=h),l<i.x&&(i.x=l),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const lh=new ve,Vl=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve];class on extends obe{constructor(e){void 0===e&&(e={}),super(),this.id=on.idCounter++,this.index=-1,this.world=null,this.vlambda=new ve,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ve,this.previousPosition=new ve,this.interpolatedPosition=new ve,this.initPosition=new ve,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ve,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ve,this.force=new ve;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?on.STATIC:on.DYNAMIC,typeof e.type==typeof on.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=on.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ve,this.quaternion=new Fr,this.initQuaternion=new Fr,this.previousQuaternion=new Fr,this.interpolatedQuaternion=new Fr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ve,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ve,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ve,this.invInertia=new ve,this.invInertiaWorld=new jc,this.invMassSolve=0,this.invInertiaSolve=new ve,this.invInertiaWorldSolve=new jc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ve(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ve(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new ir,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ve,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=on.AWAKE,this.wakeUpAfterNarrowphase=!1,e===on.SLEEPING&&this.dispatchEvent(on.wakeupEvent)}sleep(){this.sleepState=on.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===on.AWAKE&&i<r?(this.sleepState=on.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(on.sleepyEvent)):t===on.SLEEPY&&i>r?this.wakeUp():t===on.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(on.sleepEvent))}}updateSolveMassProperties(){this.sleepState===on.SLEEPING||this.type===on.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new ve),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new ve,s=new Fr;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=fbe,o=pbe,a=this.quaternion,c=this.aabb,l=gbe;for(let u=0;u!==r;u++){const h=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=mbe,r=_be;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new ve),this.type!==on.DYNAMIC)return;this.sleepState===on.SLEEPING&&this.wakeUp();const i=vbe;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new ve),this.type!==on.DYNAMIC)return;const i=bbe,r=wbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===on.DYNAMIC&&(this.sleepState===on.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new ve),this.type!==on.DYNAMIC)return;this.sleepState===on.SLEEPING&&this.wakeUp();const i=t,r=xbe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=Ebe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new ve),this.type!==on.DYNAMIC)return;const i=Abe,r=Sbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Cbe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),BA.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new ve;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==on.DYNAMIC&&this.type!==on.KINEMATIC||this.sleepState===on.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,b=this.angularFactor,w=c.x*b.x,L=c.y*b.y,V=c.z*b.z;s.x+=e*(m[0]*w+m[1]*L+m[2]*V),s.y+=e*(m[3]*w+m[4]*L+m[5]*V),s.z+=e*(m[6]*w+m[7]*L+m[8]*V),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}on.idCounter=0,on.COLLIDE_EVENT_NAME="collide",on.DYNAMIC=1,on.STATIC=2,on.KINEMATIC=4,on.AWAKE=0,on.SLEEPY=1,on.SLEEPING=2,on.wakeupEvent={type:"wakeup"},on.sleepyEvent={type:"sleepy"},on.sleepEvent={type:"sleep"};const fbe=new ve,pbe=new Fr,gbe=new ir,mbe=new jc,_be=new jc,vbe=(new jc,new ve),bbe=new ve,wbe=new ve,xbe=new ve,Ebe=new ve,Abe=new ve,Sbe=new ve,Cbe=new ve;new ve,new ve,new Fr,new ve,new ve,new ve,new ve;class rv{constructor(){this.rayFromWorld=new ve,this.rayToWorld=new ve,this.hitNormalWorld=new ve,this.hitPointWorld=new ve,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let qz,Xz,Kz,Jz,Zz,Qz,e6;qz=sn.types.SPHERE,Xz=sn.types.PLANE,Kz=sn.types.BOX,Jz=sn.types.CYLINDER,Zz=sn.types.CONVEXPOLYHEDRON,Qz=sn.types.HEIGHTFIELD,e6=sn.types.TRIMESH;class ps{get[qz](){return this._intersectSphere}get[Xz](){return this._intersectPlane}get[Kz](){return this._intersectBox}get[Jz](){return this._intersectConvex}get[Zz](){return this._intersectConvex}get[Qz](){return this._intersectHeightfield}get[e6](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new ve),void 0===t&&(t=new ve),this.from=e.clone(),this.to=t.clone(),this.direction=new ve,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ps.ANY,this.result=new rv,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||ps.ANY,this.result=t.result||new rv,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(t6),Z2.length=0,e.broadphase.aabbQuery(e,t6,Z2),this.intersectBodies(Z2),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=Pbe,s=Nbe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function Kbe(n,e,t){t.vsub(n,qf);const i=qf.dot(e);return e.scale(i,jA),jA.vadd(n,jA),t.distanceTo(jA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new ve(0,0,1);t.vmult(l,l);const u=new ve;o.vsub(i,u);const h=u.dot(l);if(a.vsub(i,u),h*u.dot(l)>0||o.distanceTo(a)<h)return;const g=l.dot(c);if(Math.abs(g)<this.precision)return;const m=new ve,b=new ve,w=new ve;o.vsub(i,m);const L=-l.dot(m)/g;c.scale(L,b),o.vadd(b,w),this.reportIntersection(l,w,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=Lbe;o.from.copy(this.from),o.to.copy(this.to),_i.pointToLocalFrame(i,t,o.from,o.from),_i.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=Fbe;let c,l,u,h;c=l=0,u=h=e.data.length-1;const f=new ir;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=c;g<u;g++)for(let m=l;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),_i.pointToWorldFrame(i,t,e.pillarOffset,kA),this._intersectConvex(e.pillarConvex,t,kA,r,s,n6),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),_i.pointToWorldFrame(i,t,e.pillarOffset,kA),this._intersectConvex(e.pillarConvex,t,kA,r,s,n6)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=u**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),g=Bbe,m=kbe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const b=(-u-Math.sqrt(f))/(2*l),w=(-u+Math.sqrt(f))/(2*l);if(b>=0&&b<=1&&(o.lerp(a,b,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(o.lerp(a,w,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=jbe,c=i6,l=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,w=m.distanceTo(this.to),L=l?l.length:u.length,V=this.result;for(let ce=0;!V.shouldStop&&ce<L;ce++){const re=l?l[ce]:ce,Ie=u[re],Ne=f[re],st=t,dt=i;c.copy(h[Ie[0]]),st.vmult(c,c),c.vadd(dt,c),c.vsub(m,c),st.vmult(Ne,a);const qe=g.dot(a);if(Math.abs(qe)<this.precision)continue;const ht=a.dot(c)/qe;if(!(ht<0)){g.scale(ht,ra),ra.vadd(m,ra),Uc.copy(h[Ie[0]]),st.vmult(Uc,Uc),dt.vadd(Uc,Uc);for(let vt=1;!V.shouldStop&&vt<Ie.length-1;vt++){Hl.copy(h[Ie[vt]]),Gl.copy(h[Ie[vt+1]]),st.vmult(Hl,Hl),st.vmult(Gl,Gl),dt.vadd(Hl,Hl),dt.vadd(Gl,Gl);const Ct=ra.distanceTo(m);!ps.pointInTriangle(ra,Uc,Hl,Gl)&&!ps.pointInTriangle(ra,Hl,Uc,Gl)||Ct>w||this.reportIntersection(a,ra,s,r,re)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=Hbe,c=qbe,l=Xbe,u=i6,h=Gbe,f=zbe,g=Wbe,m=Ybe,b=$be,w=e.indices,L=this.from,V=this.to,ce=this.direction;l.position.copy(i),l.quaternion.copy(t),_i.vectorToLocalFrame(i,t,ce,h),_i.pointToLocalFrame(i,t,L,f),_i.pointToLocalFrame(i,t,V,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const re=f.distanceSquared(g);e.tree.rayQuery(this,l,c);for(let Ie=0,Ne=c.length;!this.result.shouldStop&&Ie!==Ne;Ie++){const st=c[Ie];e.getNormal(st,a),e.getVertex(w[3*st],Uc),Uc.vsub(f,u);const dt=h.dot(a),qe=a.dot(u)/dt;if(qe<0)continue;h.scale(qe,ra),ra.vadd(f,ra),e.getVertex(w[3*st+1],Hl),e.getVertex(w[3*st+2],Gl);const ht=ra.distanceSquared(f);!ps.pointInTriangle(ra,Hl,Uc,Gl)&&!ps.pointInTriangle(ra,Uc,Hl,Gl)||ht>re||(_i.vectorToWorldFrame(t,a,b),_i.pointToWorldFrame(i,t,ra,m),this.reportIntersection(b,m,s,r,st))}c.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ps.ALL:this.hasHit=!0,l.set(o,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case ps.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c));break;case ps.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,qf),i.vsub(t,sv),e.vsub(t,Q2);const s=qf.dot(qf),o=qf.dot(sv),a=qf.dot(Q2),c=sv.dot(sv),l=sv.dot(Q2);let u,h;return(u=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&u+h<s*c-o*o}}ps.CLOSEST=1,ps.ANY=2,ps.ALL=4;const t6=new ir,Z2=[],sv=new ve,Q2=new ve,Pbe=new ve,Nbe=new Fr,ra=new ve,Uc=new ve,Hl=new ve,Gl=new ve;new ve,new rv;const n6={faceList:[0]},kA=new ve,Lbe=new ps,Fbe=[],Bbe=new ve,kbe=new ve,jbe=new ve,i6=(new ve,new ve,new ve),Hbe=new ve,Gbe=new ve,zbe=new ve,Wbe=new ve,$be=new ve,Ybe=new ve;new ir;const qbe=[],Xbe=new _i,qf=new ve,jA=new ve;new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ps,new ve,new ve,new ve,new ve(1,0,0),new ve(0,1,0),new ve(0,0,1),new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ir,new ve,new ir,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ir,new ve,new _i,new ir,new ve,new ve,new ve,new ve,new ve,new Fr,new Fr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ir,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new Fr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ir,new ps;const Ss=globalThis.performance||{};if(!Ss.now){let n=Date.now();Ss.timing&&Ss.timing.navigationStart&&(n=Ss.timing.navigationStart),Ss.now=()=>Date.now()-n}function iP(){return iP=kt(function*(n){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Pn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new ir({lowerBound:new ve(...c.map((u,h)=>Math.min(u,l[h]))),upperBound:new ve(...l.map((u,h)=>Math.max(u,c[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield j0(o.scenegraph,ym,{DracoLoader:E2,decompress:!0,postProcess:!0});for(const c of a.scenes)FA(c,new Pn(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new ir({lowerBound:new ve(...f.map((m,b)=>Math.min(m,g[b]))),upperBound:new ve(...g.map((m,b)=>Math.max(m,f[b])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of t)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),iP.apply(this,arguments)}function rP(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new zve;break;case"cone":i=new qve;break;case"cylinder":i=new Xve;break;default:i=new tbe}return new MO({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:gi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function I6(n,e,t){if(e&&0!==e.length)return new AO({id:n,pickable:!0,data:e.map(i=>({...i,position:new Pn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}new ve;let tAe=(()=>{class n extends vO{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),Uz()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of t.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=Hz({scenegraph:o.scenegraph},n.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const c of a)s.push(new z2({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:gi.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?nbe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===o?(s.push(I6("text",a.filter(c=>c.unpickable),{pickable:!1})),s.push(I6("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===o?s.push(rP(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(rP(o,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(rP(`${o}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return t.doCollisions&&function eAe(n){iP.apply(this,arguments)}(t.data),s.filter(o=>!!o)}getPickingInfo(t){return t.info}}return n})();function D6(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),D6(t,e);return e}function sP(){return sP=kt(function*(n,e,t,i){Uz();const r=yield Hz({scenegraph:n,scenegraphNode:t},i),s={},o=[];e=new Pn(e??Pn.IDENTITY);for(const a of r.scenes)FA(a,e,(c,l)=>{const u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Pn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new Pn(e||Pn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),g=l.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new ir({lowerBound:new ve(...f.map((m,b)=>Math.min(m,g[b]))),upperBound:new ve(...g.map((m,b)=>Math.max(m,f[b])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of D6(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ve(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Pn(Pn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),sP.apply(this,arguments)}class Zf{constructor(e){this.deckProps=e,this.bodyUILayer=new tAe({}),this.nodeClickSubject=new Jt,this.nodeHoverStartSubject=new Jt,this.nodeHoverStopSubject=new Jt,this.sceneRotationSubject=new Ni([0,0]),this.nodeDragStartSubject=new Jt,this.nodeDragSubject=new Jt,this.nodeDragEndSubject=new Jt,this.nodeClick$=this.nodeClickSubject.pipe(Vu()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Vu()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Vu()),this.sceneRotation$=this.sceneRotationSubject.pipe(Vu()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Vu()),this.nodeDrag$=this.nodeDragSubject.pipe(Vu()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Vu());const t={...e,views:["orthographic"===e.camera?new ED({flipY:!1,near:-1e3}):new eH({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(t.effects=[new iR({ambientLight:new a4({color:[255,255,255],intensity:10})})]),this.deck=new sO(t),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return kt(function*(){for(;!e.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let t=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);t=i?.05:t,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,t):this.bodyUILayer.setState({data:e,zoomOpacity:t})}}debugSceneNodeProcessing(e,t){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new Pn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function nAe(n,e,t,i){return sP.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:t})})}zoomTo(e){const t=new Pn(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:t.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:t}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object?.["@id"]?t!==e.object&&(t&&this.nodeHoverStopSubject.next(t),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):t&&(this.nodeHoverStopSubject.next(t),this.lastHovered=void 0)}_onClick(e,t){e.picked&&e.object?.["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:t?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(e){if(e.interactionState?.isZooming){const t=this.bodyUILayer.state,i=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);t.zoomOpacity!==i&&this.bodyUILayer.setState({data:t.data,zoomOpacity:i})}this.deck.setProps({viewState:{...e.viewState}}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,t){this._dragEvent(e,t,this.nodeDragStartSubject)}_onDrag(e,t){this._dragEvent(e,t,this.nodeDragSubject)}_onDragEnd(e,t){this._dragEvent(e,t,this.nodeDragEndSubject)}_dragEvent(e,t,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:t})}}kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],Zf.prototype,"_onHover",null),kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,Object]),Ft("design:returntype",void 0)],Zf.prototype,"_onClick",null),kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],Zf.prototype,"_onViewStateChange",null),kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],Zf.prototype,"_onDragStart",null),kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],Zf.prototype,"_onDrag",null),kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],Zf.prototype,"_onDragEnd",null);const iAe=["bodyCanvas"];let rAe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new vn,this.nodeDrag=new vn,this.nodeClick=new vn,this.nodeHoverStart=new vn,this.nodeHoverStop=new vn,this.initialized=new vn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t=this;return kt(function*(){const i=t.bodyCanvas.nativeElement,r=new Zf({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(s=>t.rotationChange.next(s)),t.bodyUI.nodeDrag$.subscribe(s=>t.nodeDrag.emit(s)),t.bodyUI.nodeClick$.subscribe(s=>t.nodeClick.emit(s)),t.bodyUI.nodeHoverStart$.subscribe(s=>t.nodeHoverStart.emit(s)),t.bodyUI.nodeHoverStop$.subscribe(s=>t.nodeHoverStop.emit(s))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&lo(iAe,5,ui),2&i){let s;er(s=tr())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Cg(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&as(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),R6=(()=>{class n{constructor(){this.bootstrap$=new Df(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sAe(n,e){return n===e}function oP(n,e=sAe){let t=null,i=null;function r(){return function oAe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let aAe=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const O6=new xt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>aAe.pop()}),P6=new xt("\u0275NGXS_STATE_FACTORY"),N6=new xt("\u0275NGXS_STATE_CONTEXT_FACTORY");function an(...n){return hs(n,m0(n))}const{isArray:cAe}=Array,{getPrototypeOf:lAe,prototype:uAe,keys:dAe}=Object;function L6(n){if(1===n.length){const e=n[0];if(cAe(e))return{args:e,keys:null};if(function hAe(n){return n&&"object"==typeof n&&lAe(n)===uAe}(e)){const t=dAe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:fAe}=Array;function YA(n){return Wt(e=>function pAe(n,e){return fAe(e)?n(...e):n(e)}(n,e))}function F6(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function dv(...n){const e=cV(n),{args:t,keys:i}=L6(n),r=new St(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let h=!1;us(t[u]).subscribe(ln(s,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?F6(i,a):a),s.complete())}))}});return e?r.pipe(YA(e)):r}function uh(n,e){const t=Re(n)?n:()=>n,i=r=>r.error(t());return new St(e?r=>e.schedule(i,0,r):i)}function Qf(n){return!!n&&(n instanceof St||Re(n.lift)&&Re(n.subscribe))}function mi(n,e){return ci((t,i)=>{let r=0;t.subscribe(ln(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Bo(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,Vu({connector:()=>new Df(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function yi(n){return n<=0?()=>Lo:ci((e,t)=>{let i=0;e.subscribe(ln(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function B6(n,e){return e?t=>t.pipe(B6((i,r)=>us(n(i,r)).pipe(Wt((s,o)=>e(i,s,r,o))))):ci((t,i)=>{let r=0,s=null,o=!1;t.subscribe(ln(i,a=>{s||(s=ln(i,void 0,()=>{s=null,o&&i.complete()}),us(n(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function xm(n){return ci((e,t)=>{let i=!1;e.subscribe(ln(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Vc(n){return ci((e,t)=>{let s,i=null,r=!1;i=e.subscribe(ln(t,void 0,void 0,o=>{s=us(n(o,Vc(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Na(n){return ci((e,t)=>{us(n).subscribe(ln(t,()=>t.complete(),lt)),!t.closed&&e.subscribe(t)})}function dh(n,e=Ns){return n=n??gAe,ci((t,i)=>{let r,s=!0;t.subscribe(ln(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function gAe(n,e){return n===e}function rr(n,e,t){const i=Re(n)||e||t?{next:n,error:e,complete:t}:n;return i?ci((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ln(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ns}function qA(...n){return function mAe(){return EE(1)}()(hs(n,m0(n)))}function zl(...n){const e=m0(n);return ci((t,i)=>{(e?qA(n,t,e):qA(n,t)).subscribe(i)})}function ep(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const H6=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},cP=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),lP=n=>n&&"object"==typeof n&&!Array.isArray(n),uP=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(lP(n)&&lP(t))for(const i in t)lP(t[i])?(n[i]||Object.assign(n,{[i]:{}}),uP(n[i],t[i])):Object.assign(n,{[i]:t[i]});return uP(n,...e)};let G6=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return UI(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return _n.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return _n.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(ut(_n),ut(Ya))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z6=new xt("ROOT_OPTIONS"),W6=new xt("ROOT_STATE_TOKEN"),$6=new xt("FEATURE_STATE_TOKEN"),Y6=new xt("NGXS_PLUGINS"),qu="NGXS_META",q6="NGXS_OPTIONS_META",dP="NGXS_SELECTOR_META";let KA=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=G6}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Dt({token:n,factory:function(t){let i=null;return t?i=new t:(r=ut(z6),i=uP(new n,r)),i;var r},providedIn:"root"}),n})();class CAe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let TAe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X6=new xt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),MAe=new xt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=Vt(yu),e=n.get(X6);return n.get(e||(typeof li.Zone<"u"?G6:TAe))}});function hP(n){if(!n.hasOwnProperty(qu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,qu,{value:e})}return tp(n)}function tp(n){return n[qu]}function JA(n){return n[dP]}function K6(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function IAe(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function DAe(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}function FAe(...n){return function Em(n,e,t=jAe){const i=function UAe(n){return n.reduce((e,t)=>(e[ep(t)]=!0,e),{})}(n),r=e&&function VAe(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function BAe(n,e){return mi(t=>{const i=ep(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function jAe(){return Wt(n=>n.action)}function ZA(n){return e=>new St(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let J6=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(ut(MAe))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z6(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const s=e.pop();s&&n(...s)}t=!1}}}class HAe extends Jt{constructor(){super(...arguments),this._orderedNext=Z6(e=>super.next(e))}next(e){this._orderedNext(e)}}class GAe extends Ni{constructor(e){super(e),this._orderedNext=Z6(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let Q6=(()=>{class n extends HAe{ngOnDestroy(){this.complete()}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})(),n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e5=n=>(...e)=>n.shift()(...e,(...i)=>e5(n)(...i));let t5=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(Aa));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(ut(Ji))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pP=(()=>{class n extends GAe{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gP=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(ut(n,12),ut(Y6,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})(),n5=(()=>{class n extends Jt{}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})(),n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WAe=(()=>{class n{constructor(t,i,r,s,o,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function zAe(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new St(r=>(i=!0,t.pipe(ZA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?an(this._stateStream.getValue()):dv(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return e5([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Bo())}getActionResultStream(t){return this._actionResults.pipe(mi(i=>i.action===t&&"DISPATCHED"!==i.status),yi(1),Bo())}createDispatchObservable(t){return t.pipe(B6(i=>{switch(i.status){case"SUCCESSFUL":return an(this._stateStream.getValue());case"ERRORED":return uh(i.error);default:return Lo}})).pipe(Bo())}}return n.\u0275fac=function(t){return new(t||n)(ut(Q6),ut(n5),ut(gP),ut(pP),ut(J6),ut(t5))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hv=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(ut(pP),ut(WAe),ut(KA))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mP=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>a5(i.getState(),t.path),patchState(r){const s=i.getState(),o=function $Ae(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(r);return o5(i,s,o,t.path)},setState(r){const s=i.getState();return function XA(n){return"function"==typeof n}(r)?o5(i,s,r,t.path):s5(i,s,r,t.path)},dispatch:r=>i.dispatch(r)}}}return n.\u0275fac=function(t){return new(t||n)(ut(hv))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s5(n,e,t,i){const r=H6(e,i,t);return n.setState(r),r}function o5(n,e,t,i){return s5(n,e,t(a5(e,i)),i)}function a5(n,e){return cP(n,e)}new RegExp("^[a-zA-Z0-9_]+$");let c5=(()=>{class n{}return n.type="@@INIT",n})(),l5=(()=>{class n{constructor(t){this.addedStates=t}}return n.type="@@UPDATE_STATE",n})();new xt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Am=(()=>{class n{constructor(t,i,r,s,o,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=oP(()=>{const l=this;function u(f){const g=l.statePaths[f];return g?K6(g.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(t){let i=t;return Array.isArray(t)?i=t.slice():function LAe(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?i=Object.assign({},t):void 0===t&&(i={}),i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function RAe(n){const e=t=>n.find(r=>r===t)[qu].name;return n.reduce((t,i)=>{const{name:r,children:s}=i[qu];return t[r]=(s||[]).map(e),t},{})}(i),s=function NAe(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function PAe(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function OAe(n){return n.reduce((e,t)=>(e[t[qu].name]=t,e),{})}(i),c=[];for(const l of s){const u=a[l],h=o[l],f=u[qu];this.addRuntimeInfoToMeta(f,h);const g={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:n._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>H6(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new Jt;this._actionsSubscription=this._actions.pipe(mi(i=>"DISPATCHED"===i.status),ds(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(Wt(()=>({action:r,status:"SUCCESSFUL"})),xm({action:r,status:"CANCELED"}),Vc(s=>an({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=ep(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const u=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](u,i);h instanceof Promise&&(h=hs(h)),Qf(h)?(h=h.pipe(ds(f=>f instanceof Promise?hs(f):Qf(f)?f:an(f)),xm({})),l.options.cancelUncompleted&&(h=h.pipe(Na(t.pipe(FAe(i)))))):h=an({}).pipe(Bo()),s.push(h)}catch(h){s.push(uh(h))}o=!0}}return s.length||s.push(an({})),dv(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=tp(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==cP(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(ut(Ji),ut(KA),ut(n,12),ut(Q6),ut(n5),ut(mP),ut(O6,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();function u5(n){const e=JA(n)||tp(n);return e&&e.makeRootSelector||(()=>n)}let Xu=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(ZA(this._internalExecutionStrategy),Bo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(Wt(i),Vc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?an(void 0):uh(r)}),dh(),ZA(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(yi(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(ZA(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return u5(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(ut(pP),ut(hv),ut(KA),ut(J6),ut(Am),ut(O6,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e1=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(ut(Xu),ut(KA))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),d5=(()=>{class n{constructor(t,i,r,s,o){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new Jt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(mi(()=>!!i),rr(()=>this._invokeInitOnStates(i.states)),ds(()=>this._bootstrapper.appBootstrapped$),mi(r=>!!r),Vc(r=>(this._internalErrorReporter.reportErrorSafely(r),Lo)),Na(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>cP(s,i.path)).pipe(zl(void 0),ci((n,e)=>{let t,i=!1;n.subscribe(ln(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))}),Na(this._destroy$)).subscribe(([s,o])=>{const a=new CAe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(ut(Xu),ut(t5),ut(hv),ut(mP),ut(R6))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),s1e=(()=>{class n{constructor(t,i,r,s,o=[],a){const c=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new c5,c)}}return n.\u0275fac=function(t){return new(t||n)(ut(Am),ut(hv),ut(Xu),ut(e1),ut(W6,8),ut(d5))},n.\u0275mod=to({type:n}),n.\u0275inj=Fs({}),n})(),o1e=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new l5(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(ut(Xu),ut(hv),ut(Am),ut($6,8),ut(d5))},n.\u0275mod=to({type:n}),n.\u0275inj=Fs({}),n})(),a1e=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:s1e,providers:[Am,gP,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:o1e,providers:[Am,gP,...t,{provide:$6,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:X6,useValue:i.executionStrategy},{provide:W6,useValue:t},{provide:z6,useValue:i},{provide:Qx,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[R6]},{provide:N6,useExisting:mP},{provide:P6,useExisting:Am}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=to({type:n}),n.\u0275inj=Fs({}),n})();function _P(n,e){return(t,i)=>{const r=hP(t.constructor);Array.isArray(n)||(n=[n]);for(const s of n){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function yP(n){return e=>{const t=e,i=hP(t),r=Object.getPrototypeOf(t),s=function c1e(n,e){return Object.assign(Object.assign({},n[q6]||{}),e)}(r,n);(function l1e(n){const{meta:e,inheritedStateClass:t,optionsWithInheritance:i}=n,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;if(t.hasOwnProperty(qu)){const c=t[qu]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),t[q6]=s}}const u1e=36;function t1(n,...e){return function(t,i){const r=i.toString(),s=`__${r}__selector`,o=function h1e(n,e,t=[]){return e=e||function f1e(n){const e=n.length-1;return n.charCodeAt(e)===u1e?n.slice(0,e):n}(n),"string"==typeof e?K6(t.length?[e,...t]:e.split("."),e1.config):e}(r,n,e);Object.defineProperties(t,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function d1e(n){return e1.store||function SAe(){throw new Error("You have forgotten to import the NGXS module!")}(),e1.store.select(n)}(o))}}})}}const h5="NGXS_SELECTOR_OPTIONS_META",n1={getOptions:n=>n&&n[h5]||{},defineOptions:(n,e)=>{n&&(n[h5]=e)}};function p1e(n,e){const t=function fP(n){return n.hasOwnProperty(dP)||Object.defineProperty(n,dP,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),JA(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function g1e(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},n1.getOptions(n.containerClass)||{}),n1.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function fv(n,e,t){const i=function n1e(n,e){const t=e&&e.containerClass,r=oP(function(...o){const a=n.apply(t,o);return a instanceof Function?oP.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=p1e(e,t);return r.makeRootSelector=function t1e(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function i1e(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),o=function r1e(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&tp(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>u5(a)(n));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,n,i),i}function Sm(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,s=fv(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let f5=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(at(Ic),at(ui))};static#t=this.\u0275dir=$t({type:n})}return n})(),np=(()=>{class n extends f5{static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ur(n)))(r||n)}})();static#t=this.\u0275dir=$t({type:n,features:[oi]})}return n})();const Hc=new xt("NgValueAccessor"),v1e={provide:Hc,useExisting:me(()=>s1),multi:!0},w1e=new xt("CompositionEventMode");let s1=(()=>{class n extends f5{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function b1e(){const n=Wd()?Wd().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(at(Ic),at(ui),at(w1e,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Gi("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Ei([v1e]),oi]})}return n})();function hh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function g5(n){return null!=n&&"number"==typeof n.length}const go=new xt("NgValidators"),fh=new xt("NgAsyncValidators"),x1e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class E1e{static min(e){return function m5(n){return e=>{if(hh(e.value)||hh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function _5(n){return e=>{if(hh(e.value)||hh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function y5(n){return hh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function v5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function b5(n){return hh(n.value)||x1e.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function w5(n){return e=>hh(e.value)||!g5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function x5(n){return e=>g5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function E5(n){if(!n)return o1;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(hh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return I5(e)}static composeAsync(e){return D5(e)}}function o1(n){return null}function A5(n){return null!=n}function S5(n){return Bg(n)?hs(n):n}function C5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function T5(n,e){return e.map(t=>t(n))}function M5(n){return n.map(e=>function A1e(n){return!n.validate}(e)?e:t=>e.validate(t))}function I5(n){if(!n)return null;const e=n.filter(A5);return 0==e.length?null:function(t){return C5(T5(t,e))}}function vP(n){return null!=n?I5(M5(n)):null}function D5(n){if(!n)return null;const e=n.filter(A5);return 0==e.length?null:function(t){return dv(T5(t,e).map(S5)).pipe(Wt(C5))}}function bP(n){return null!=n?D5(M5(n)):null}function R5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function O5(n){return n._rawValidators}function P5(n){return n._rawAsyncValidators}function wP(n){return n?Array.isArray(n)?n:[n]:[]}function a1(n,e){return Array.isArray(n)?n.includes(e):n===e}function N5(n,e){const t=wP(e);return wP(n).forEach(r=>{a1(t,r)||t.push(r)}),t}function L5(n,e){return wP(e).filter(t=>!a1(n,t))}class F5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ko extends F5{get formDirective(){return null}get path(){return null}}class Ku extends F5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class B5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let k5=(()=>{class n extends B5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(at(Ku,2))};static#t=this.\u0275dir=$t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Ar("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[oi]})}return n})(),j5=(()=>{class n extends B5{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(at(ko,10))};static#t=this.\u0275dir=$t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Ar("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[oi]})}return n})();const pv="VALID",l1="INVALID",Cm="PENDING",gv="DISABLED";function AP(n){return(u1(n)?n.validators:n)||null}function SP(n,e){return(u1(e)?e.asyncValidators:n)||null}function u1(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class G5{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pv}get invalid(){return this.status===l1}get pending(){return this.status==Cm}get disabled(){return this.status===gv}get enabled(){return this.status!==gv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(N5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(L5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(L5(e,this._rawAsyncValidators))}hasValidator(e){return a1(this._rawValidators,e)}hasAsyncValidator(e){return a1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pv,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pv||this.status===Cm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gv:pv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cm,this._hasOwnPendingAsyncValidator=!0;const t=S5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?gv:this.errors?l1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cm)?Cm:this._anyControlsHaveStatus(l1)?l1:pv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){u1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function M1e(n){return Array.isArray(n)?vP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function I1e(n){return Array.isArray(n)?bP(n):n||null}(this._rawAsyncValidators)}}class CP extends G5{constructor(e,t,i){super(AP(t),SP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function H5(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ze(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function V5(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ze(1e3,"");if(!i[t])throw new ze(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const mv=new xt("CallSetDisabledState",{providedIn:"root",factory:()=>TP}),TP="always";function _v(n,e,t=TP){MP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function O1e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&z5(n,e)})}(n,e),function N1e(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function P1e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&z5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function R1e(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function h1(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),p1(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function f1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MP(n,e){const t=O5(n);null!==e.validator?n.setValidators(R5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=P5(n);null!==e.asyncValidator?n.setAsyncValidators(R5(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();f1(e._rawValidators,r),f1(e._rawAsyncValidators,r)}function p1(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=O5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=P5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return f1(e._rawValidators,i),f1(e._rawAsyncValidators,i),t}function z5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function W5(n,e){MP(n,e)}function $5(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const j1e={provide:ko,useExisting:me(()=>vv)},yv=(()=>Promise.resolve())();let vv=(()=>{class n extends ko{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new vn,this.form=new CP({},vP(t),bP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yv.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),_v(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yv.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yv.then(()=>{const i=this._findContainer(t.path),r=new CP({});W5(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yv.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){yv.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,$5(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(at(go,10),at(fh,10),at(mv,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Gi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ei([j1e]),oi]})}return n})();function Y5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function q5(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const OP=class extends G5{constructor(e=null,t,i){super(AP(t),SP(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),u1(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=q5(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Y5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Y5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){q5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},U1e=OP;let Q5=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const i9=new xt("NgModelWithFormControlWarning"),X1e={provide:Ku,useExisting:me(()=>PP)};let PP=(()=>{class n extends Ku{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new vn,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=function RP(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===s1?t=s:function B1e(n){return Object.getPrototypeOf(n.constructor)===np}(s)?i=s:r=s}),r||i||t||null}(0,r)}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&h1(i,this,!1),_v(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function DP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&h1(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||n)(at(go,10),at(fh,10),at(Hc,10),at(i9,8),at(mv,8))};static#n=this.\u0275dir=$t({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ei([X1e]),oi,Vi]})}return n})();const K1e={provide:ko,useExisting:me(()=>g1)};let g1=(()=>{class n extends ko{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new vn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(p1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return _v(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){h1(t.control||null,t,!1),function k1e(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,$5(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(h1(i||null,t),(n=>n instanceof OP)(r)&&(_v(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);W5(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function L1e(n,e){return p1(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MP(this.form,this),this._oldForm&&p1(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(at(go,10),at(fh,10),at(mv,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&Gi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ei([K1e]),oi,Vi]})}return n})();const bv=ot(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _9(n,e){const t="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;n.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):t?i(e.defaultValue):r(new bv)}})})}let jP;try{jP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{jP=!1}let Tm,La=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?$d(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!jP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Ya))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const y9=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function v9(){if(Tm)return Tm;if("object"!=typeof document||!document)return Tm=new Set(y9),Tm;let n=document.createElement("input");return Tm=new Set(y9.filter(e=>(n.setAttribute("type",e),n.type===e))),Tm}let wv,rp,UP;function xv(n){return function gSe(){if(null==wv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wv=!0}))}finally{wv=wv||!1}return wv}()?n:!!n.capture}function mSe(){if(null==rp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return rp=!1,rp;if("scrollBehavior"in document.documentElement.style)rp=!0;else{const n=Element.prototype.scrollTo;rp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return rp}function VP(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ju(n){return n.composedPath?n.composedPath()[0]:n.target}function b9(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ph(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class NSe extends mt{constructor(e,t){super()}schedule(e,t=0){return this}}const y1={setInterval(n,e,...t){const{delegate:i}=y1;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=y1;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class zP extends NSe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return y1.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&y1.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,It(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class Ev{constructor(e,t=Ev.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Ev.now=JI.now;class WP extends Ev{constructor(e,t=Ev.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const v1=new WP(zP),LSe=v1;function Mm(n){return null!=n&&"false"!=`${n}`}function $P(n,e=0){return function BSe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function S9(n){return Array.isArray(n)?n:[n]}function gs(n){return null==n?"":"string"==typeof n?n:`${n}px`}function gh(n){return n instanceof ui?n.nativeElement:n}function T9(n,e,t){const i=M9(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))}function YP(n,e,t){const r=M9(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}function M9(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}class VSe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Jt,this._typeaheadSubscription=mt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Jt,this.change=new Jt,e instanceof s0&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(rr(t=>this._pressedLetters.push(t)),function FSe(n,e=v1){return ci((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(ln(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(e),mi(()=>this._pressedLetters.length>0),Wt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||ph(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof s0?this._items.toArray():this._items}}class HSe extends VSe{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let qP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function zSe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function GSe(n){try{return n.frameElement}catch{return null}}(function ZSe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===D9(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=D9(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function KSe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function JSe(n){return!function $Se(n){return function qSe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function WSe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function YSe(n){return function XSe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||I9(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(ut(La))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I9(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function D9(n){if(!I9(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class QSe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(yi(1)).subscribe(e)}}let R9=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new QSe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(qP),ut(_n),ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O9(n){return 0===n.buttons||0===n.detail}function P9(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const eCe=new xt("cdk-input-modality-detector-options"),tCe={ignoreKeys:[18,17,224,91,16]},Im=xv({passive:!0,capture:!0});let nCe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ni(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ju(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(O9(o)?"keyboard":"mouse"),this._mostRecentTarget=Ju(o))},this._onTouchstart=o=>{P9(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ju(o))},this._options={...tCe,...s},this.modalityDetected=this._modality.pipe(function A9(n){return mi((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(dh()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Im),r.addEventListener("mousedown",this._onMousedown,Im),r.addEventListener("touchstart",this._onTouchstart,Im)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Im),document.removeEventListener("mousedown",this._onMousedown,Im),document.removeEventListener("touchstart",this._onTouchstart,Im))}static#e=this.\u0275fac=function(i){return new(i||n)(ut(La),ut(_n),ut(ii),ut(eCe,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rCe=new xt("cdk-focus-monitor-default-options"),b1=xv({passive:!0,capture:!0});let XP=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Jt,this._rootNodeFocusAndBlurListener=a=>{for(let l=Ju(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=gh(t);if(!this._platform.isBrowser||1!==r.nodeType)return an();const s=function ySe(n){if(function _Se(){if(null==UP){const n=typeof document<"u"?document.head:null;UP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return UP}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Jt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=gh(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=gh(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Ju(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,b1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,b1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Na(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,b1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,b1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ut(_n),ut(La),ut(nCe),ut(ii,8),ut(rCe,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const sCe=["text"];function oCe(n,e){if(1&n&&as(0,"mat-pseudo-checkbox",6),2&n){const t=cs();Ti("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function aCe(n,e){1&n&&as(0,"mat-pseudo-checkbox",7),2&n&&Ti("disabled",cs().disabled)}function cCe(n,e){if(1&n&&(Fn(0,"span",8),Pc(1),Bn()),2&n){const t=cs();Jn(1),t0("(",t.group.label,")")}}const lCe=[[["mat-icon"]],"*"],uCe=["mat-icon","*"];function hCe(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function fCe(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?$P(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function pCe(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let mCe=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _Ce{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const F9=xv({passive:!0,capture:!0});class yCe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ju(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,F9)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,F9)))}}const B9={enterDuration:225,exitDuration:150},k9=xv({passive:!0,capture:!0}),j9=["mousedown","touchstart"],U9=["mouseup","mouseleave","touchend","touchcancel"];class w1{static#e=this._eventManager=new yCe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=gh(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...B9,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function bCe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),g=h.transitionDuration,m="none"===h.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,b=new _Ce(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",b.state=0,i.persistent||(this._mostRecentTransientRipple=b);let w=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const L=()=>this._finishRippleTransition(b),V=()=>this._destroyRipple(b);u.addEventListener("transitionend",L),u.addEventListener("transitioncancel",V),w={onTransitionEnd:L,onTransitionCancel:V}}),this._activeRipples.set(b,w),(m||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...B9,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=gh(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,j9.forEach(i=>{w1._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{U9.forEach(t=>{this._triggerElement.addEventListener(t,this,k9)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=O9(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!P9(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(j9.forEach(t=>w1._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&U9.forEach(t=>e.removeEventListener(t,this,k9)))}}const wCe=new xt("mat-ripple-global-options");let xCe=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new w1(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(_n),at(La),at(wCe,8),at(Cc,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Ar("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),ECe=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||n)(at(Cc,8))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&Ar("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})();const V9=new xt("MAT_OPTION_PARENT_COMPONENT"),H9=new xt("MatOptgroup");let ACe=0;class G9{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let z9=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ACe++,this.onSelectionChange=new vn,this._stateChanges=new Jt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!ph(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new G9(this,t))}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(Io),at(V9,8),at(H9,8))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-option"]],viewQuery:function(i,r){if(1&i&&lo(sCe,7),2&i){let s;er(s=tr())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&Gi("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(wf("id",r.id),Pr("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Ar("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:["disabled","disabled",Po]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[gg],ngContentSelectors:uCe,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled"],["class","cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(i,r){1&i&&(Ca(lCe),Mi(0,oCe,1,2,"mat-pseudo-checkbox",0),Ii(1),Fn(2,"span",1,2),Ii(4,1),Bn(),Mi(5,aCe,1,1,"mat-pseudo-checkbox",3)(6,cCe,2,1,"span",4),as(7,"div",5)),2&i&&(Os(0,r.multiple?0:-1),Jn(5),Os(5,r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),Jn(1),Os(6,r.group&&r.group._inert?6:-1),Jn(1),Ti("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[xCe,ECe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();const TCe=["addListener","removeListener"],MCe=["addEventListener","removeEventListener"],ICe=["on","off"];function Dm(n,e,t,i){if(Re(t)&&(i=t,t=void 0),i)return Dm(n,e,t).pipe(YA(i));const[r,s]=function OCe(n){return Re(n.addEventListener)&&Re(n.removeEventListener)}(n)?MCe.map(o=>a=>n[o](e,a,t)):function DCe(n){return Re(n.addListener)&&Re(n.removeListener)}(n)?TCe.map(W9(n,e)):function RCe(n){return Re(n.on)&&Re(n.off)}(n)?ICe.map(W9(n,e)):[];if(!r&&iD(n))return ds(o=>Dm(o,e,t))(us(n));if(!r)throw new TypeError("Invalid event target");return new St(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function W9(n,e){return t=>i=>n[t](e,i)}const Sv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Sv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new mt(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Sv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Sv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class NCe extends WP{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class PCe extends zP{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Sv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Sv.cancelAnimationFrame(t),e._scheduled=void 0)}});let KP,FCe=1;const x1={};function $9(n){return n in x1&&(delete x1[n],!0)}const BCe={setImmediate(n){const e=FCe++;return x1[e]=!0,KP||(KP=Promise.resolve()),KP.then(()=>$9(e)&&n()),e},clearImmediate(n){$9(n)}},{setImmediate:kCe,clearImmediate:jCe}=BCe,E1={setImmediate(...n){const{delegate:e}=E1;return(e?.setImmediate||kCe)(...n)},clearImmediate(n){const{delegate:e}=E1;return(e?.clearImmediate||jCe)(n)},delegate:void 0};new class VCe extends WP{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class UCe extends zP{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=E1.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(E1.clearImmediate(t),e._scheduled=void 0)}});function JP(n=0,e,t=LSe){let i=-1;return null!=e&&(aV(e)?t=e:i=e),new St(r=>{let s=function zCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Y9(n,e=v1){return function GCe(n){return ci((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(ln(t,l=>{i=!0,r=l,s||us(n(l)).subscribe(s=ln(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>JP(n,e))}let $Ce=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Jt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new St(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Y9(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):an()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(mi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=gh(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Dm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(_n),ut(La),ut(ii,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZP=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Jt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Y9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(ut(La),ut(_n),ut(ii,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const qCe=new xt("cdk-dir-doc",{providedIn:"root",factory:function XCe(){return Vt(ii)}}),KCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Cv=(()=>{class n{constructor(t){this.value="ltr",this.change=new vn,t&&(this.value=function JCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?KCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(ut(qCe,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class QP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class eN extends QP{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class A1 extends QP{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class ZCe extends QP{constructor(e){super(),this.element=e instanceof ui?e.nativeElement:e}}class tN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof eN?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof A1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof ZCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class QCe extends tN{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ji.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let S1=(()=>{class n extends tN{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new vn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(at(El),at(co),at(ii))};static#t=this.\u0275dir=$t({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[oi]})}return n})(),q9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({})}return n})();const X9=mSe();class eTe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=gs(-this._previousScrollPosition.left),e.style.top=gs(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),X9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),X9&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class tTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(mi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class K9{enable(){}disable(){}attach(){}}function nN(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function J9(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class nTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();nN(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let iTe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new K9,this.close=o=>new tTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new eTe(this._viewportRuler,this._document),this.reposition=o=>new nTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(ut($Ce),ut(ZP),ut(_n),ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class iN{constructor(e){if(this.scrollStrategy=new K9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class rTe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Z9=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sTe=(()=>{class n extends Z9{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii),ut(_n,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oTe=(()=>{class n extends Z9{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ju(s)},this._clickListener=s=>{const o=Ju(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii),ut(La),ut(_n,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C1=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||b9()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),b9()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ii),ut(La))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class T1{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Jt,this._attachments=new Jt,this._detachments=new Jt,this._locationChanges=mt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Jt,this._outsidePointerEvents=new Jt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(yi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=gs(this._config.width),e.height=gs(this._config.height),e.minWidth=gs(this._config.minWidth),e.minHeight=gs(this._config.minHeight),e.maxWidth=gs(this._config.maxWidth),e.maxHeight=gs(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=S9(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Na(Fc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Q9="cdk-overlay-connected-position-bounding-box",aTe=/([A-Za-z%]+)$/;class cTe{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Jt,this._resizeSubscription=mt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Q9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&sp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Q9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=tW(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),b=this._subtractOverflows(s.height,f,g),w=m*b;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=eW(this._overlayRef.getConfig().minHeight),a=eW(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=tW(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new rTe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=gs(i.height),r.top=gs(i.top),r.bottom=gs(i.bottom),r.width=gs(i.width),r.left=gs(i.left),r.right=gs(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=gs(s)),o&&(r.maxWidth=gs(o))}this._lastBoundingBoxSize=i,sp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){sp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){sp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();sp(i,this._getExactOverlayY(t,e,u)),sp(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=gs(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=gs(o.maxWidth):s&&(i.maxWidth="")),sp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=gs(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=gs(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:J9(e,i),isOriginOutsideView:nN(e,i),isOverlayClipped:J9(t,i),isOverlayOutsideView:nN(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&S9(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ui)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function sp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function eW(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(aTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function tW(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const nW="cdk-global-overlay-wrapper";class lTe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(nW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let g="",m="",b="";c?b="flex-start":"center"===u?(b="center",f?m=h:g=h):f?"left"===u||"end"===u?(b="flex-end",g=h):("right"===u||"start"===u)&&(b="flex-start",m=h):"left"===u||"start"===u?(b="flex-start",g=h):("right"===u||"end"===u)&&(b="flex-end",m=h),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,t.justifyContent=b,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(nW),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let uTe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new lTe}flexibleConnectedTo(t){return new cTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(ZP),ut(ii),ut(La),ut(C1))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dTe=0,Gc=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,h,f,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new iN(t);return o.direction=o.direction||this._directionality.value,new T1(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+dTe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Sf)),new QCe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(iTe),ut(C1),ut(El),ut(uTe),ut(sTe),ut(Ji),ut(_n),ut(ii),ut(Cv),ut(If),ut(oTe),ut(Cc,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tv(n,e){return{type:7,name:n,definitions:e,options:{}}}function mh(n,e=null){return{type:4,styles:e,timings:n}}function rN(n,e=null){return{type:3,steps:n,options:e}}function sa(n){return{type:6,styles:n,offset:null}}function _h(n,e,t){return{type:0,name:n,styles:e,options:t}}function op(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Mv(n){return new St(e=>{us(n()).subscribe(e)})}class _Te{constructor(e){this._box=e,this._destroyed=new Jt,this._resizeSubject=new Jt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new St(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(mi(t=>t.some(i=>i.target===e)),Bo({bufferSize:1,refCount:!0}),Na(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let yTe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=Vt(_n)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new _Te(r)),this._observers.get(r).observe(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const vTe=["notch"],bTe=["matFormFieldNotchedOutline",""],wTe=["*"],xTe=["textField"],ETe=["iconPrefixContainer"],ATe=["textPrefixContainer"];function STe(n,e){1&n&&as(0,"span",16)}function CTe(n,e){if(1&n&&(Fn(0,"label",14),Ii(1,1),Mi(2,STe,1,0,"span",15),Bn()),2&n){const t=cs(2);Ti("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),Pr("for",t._control.id),Jn(2),Os(2,!t.hideRequiredMarker&&t._control.required?2:-1)}}function TTe(n,e){1&n&&Mi(0,CTe,3,5,"label",14),2&n&&Os(0,cs()._hasFloatingLabel()?0:-1)}function MTe(n,e){1&n&&as(0,"div",17)}function ITe(n,e){}function DTe(n,e){1&n&&Mi(0,ITe,0,0,"ng-template",9),2&n&&(cs(2),Ti("ngTemplateOutlet",$x(1)))}function RTe(n,e){if(1&n&&(Fn(0,"div",5),Mi(1,DTe,1,1,null,9),Bn()),2&n){const t=cs();Ti("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),Jn(1),Os(1,t._forceDisplayInfixLabel()?-1:1)}}function OTe(n,e){1&n&&(Fn(0,"div",18,19),Ii(2,2),Bn())}function PTe(n,e){1&n&&(Fn(0,"div",20,21),Ii(2,3),Bn())}function NTe(n,e){}function LTe(n,e){1&n&&Mi(0,NTe,0,0,"ng-template",9),2&n&&(cs(),Ti("ngTemplateOutlet",$x(1)))}function FTe(n,e){1&n&&(Fn(0,"div",22),Ii(1,4),Bn())}function BTe(n,e){1&n&&(Fn(0,"div",23),Ii(1,5),Bn())}function kTe(n,e){1&n&&as(0,"div",12)}function jTe(n,e){1&n&&(Fn(0,"div",24),Ii(1,6),Bn()),2&n&&Ti("@transitionMessages",cs()._subscriptAnimationState)}function UTe(n,e){if(1&n&&(Fn(0,"mat-hint",26),Pc(1),Bn()),2&n){const t=cs(2);Ti("id",t._hintLabelId),Jn(1),Gd(t.hintLabel)}}function VTe(n,e){if(1&n&&(Fn(0,"div",25),Mi(1,UTe,2,2,"mat-hint",26),Ii(2,7),as(3,"div",27),Ii(4,8),Bn()),2&n){const t=cs();Ti("@transitionMessages",t._subscriptAnimationState),Jn(1),Os(1,t.hintLabel?1:-1)}}const HTe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],GTe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let sW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["mat-label"]]})}return n})();const zTe=new xt("MatError");let WTe=0,oW=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+WTe++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(wf("id",r.id),Pr("align",null),Ar("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const aW=new xt("MatPrefix");let $Te=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:["matTextPrefix","_isTextSelector"]},features:[Ei([{provide:aW,useExisting:n}])]})}return n})();const cW=new xt("MatSuffix");let YTe=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[Ei([{provide:cW,useExisting:n}])]})}return n})();const lW=new xt("FloatingLabelParent");let uW=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Vt(yTe),this._ngZone=Vt(_n),this._parent=Vt(lW),this._resizeSubscription=new mt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function qTe(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui))};static#t=this.\u0275dir=$t({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Ar("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const dW="mdc-line-ripple--active",M1="mdc-line-ripple--deactivating";let hW=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(M1);"opacity"===r.propertyName&&o&&s.remove(dW,M1)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(M1),t.add(dW)}deactivate(){this._elementRef.nativeElement.classList.add(M1)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(_n))};static#t=this.\u0275dir=$t({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),fW=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(_n))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&lo(vTe,5),2&i){let s;er(s=tr())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Ar("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:bTe,ngContentSelectors:wTe,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(Ca(),as(0,"div",0),Fn(1,"div",1,2),Ii(3),Bn(),as(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const XTe={transitionMessages:Tv("transitionMessages",[_h("enter",sa({opacity:1,transform:"translateY(0%)"})),op("void => enter",[sa({opacity:0,transform:"translateY(-5px)"}),mh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let pW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n})}return n})();const sN=new xt("MatFormField"),KTe=new xt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let gW=0,QTe=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Mm(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,c,l){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+gW++,this._hintLabelId="mat-mdc-hint-"+gW++,this._subscriptAnimationState="",this._destroyed=new Jt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Na(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Fc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Na(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Na(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(Io),at(_n),at(Cv),at(La),at(KTe,8),at(Cc,8),at(ii))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(tc(s,sW,5),tc(s,sW,7),tc(s,pW,5),tc(s,aW,5),tc(s,cW,5),tc(s,zTe,5),tc(s,oW,5)),2&i){let o;er(o=tr())&&(r._labelChildNonStatic=o.first),er(o=tr())&&(r._labelChildStatic=o.first),er(o=tr())&&(r._formFieldControl=o.first),er(o=tr())&&(r._prefixChildren=o),er(o=tr())&&(r._suffixChildren=o),er(o=tr())&&(r._errorChildren=o),er(o=tr())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(lo(xTe,5),lo(ETe,5),lo(ATe,5),lo(uW,5),lo(fW,5),lo(hW,5)),2&i){let s;er(s=tr())&&(r._textField=s.first),er(s=tr())&&(r._iconPrefixContainer=s.first),er(s=tr())&&(r._textPrefixContainer=s.first),er(s=tr())&&(r._floatingLabel=s.first),er(s=tr())&&(r._notchedOutline=s.first),er(s=tr())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Ar("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ei([{provide:sN,useExisting:n},{provide:lW,useExisting:n}])],ngContentSelectors:GTe,decls:18,vars:21,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],["class","mat-mdc-form-field-icon-prefix"],["class","mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],["class","mat-mdc-form-field-text-suffix"],["class","mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(1&i&&(Ca(HTe),Mi(0,TTe,1,1,"ng-template",null,0,ij),Fn(2,"div",1,2),Gi("click",function(o){return r._control.onContainerClick(o)}),Mi(4,MTe,1,0,"div",3),Fn(5,"div",4),Mi(6,RTe,2,2,"div",5)(7,OTe,3,0,"div",6)(8,PTe,3,0,"div",7),Fn(9,"div",8),Mi(10,LTe,1,1,null,9),Ii(11),Bn(),Mi(12,FTe,2,0,"div",10)(13,BTe,2,0,"div",11),Bn(),Mi(14,kTe,1,0,"div",12),Bn(),Fn(15,"div",13),Mi(16,jTe,2,1)(17,VTe,5,2),Bn()),2&i){let s;Jn(2),Ar("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),Jn(2),Os(4,r._hasOutline()||r._control.disabled?-1:4),Jn(2),Os(6,r._hasOutline()?6:-1),Jn(1),Os(7,r._hasIconPrefix?7:-1),Jn(1),Os(8,r._hasTextPrefix?8:-1),Jn(2),Os(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),Jn(2),Os(12,r._hasTextSuffix?12:-1),Jn(1),Os(13,r._hasIconSuffix?13:-1),Jn(1),Os(14,r._hasOutline()?-1:14),Jn(1),Ar("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),Jn(1),Os(16,"error"===(s=r._getDisplayedMessages())?16:"hint"===s?17:-1)}},dependencies:[EU,oW,uW,fW,hW],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[XTe.transitionMessages]},changeDetection:0})}return n})();function oN(n){return Wt(()=>n)}function yW(n,e){return e?t=>qA(e.pipe(yi(1),function eMe(){return ci((n,e)=>{n.subscribe(ln(e,lt))})}()),t.pipe(yW(n))):ds((t,i)=>us(n(t,i)).pipe(yi(1),oN(t)))}function vW(n,e=v1){const t=JP(n,e);return yW(()=>t)}const tMe=["panel"];function nMe(n,e){if(1&n){const t=VM();Fn(0,"div",0,1),Gi("@panelAnimation.done",function(r){return bd(t),Mr(cs()._animationDone.next(r))}),Ii(2),Bn()}if(2&n){const t=e.id,i=cs();Ti("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),Pr("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(t))}}const iMe=["*"],rMe=Tv("panelAnimation",[_h("void, hidden",sa({opacity:0,transform:"scaleY(0.8)"})),op(":enter, hidden => visible",[rN([mh("0.03s linear",sa({opacity:1})),mh("0.12s cubic-bezier(0, 0, 0.2, 1)",sa({transform:"scaleY(1)"}))])]),op(":leave, visible => hidden",[mh("0.075s linear",sa({opacity:0}))])]);let sMe=0;class oMe{constructor(e,t){this.source=e,this.option=t}}const bW=new xt("mat-autocomplete-default-options",{providedIn:"root",factory:function aMe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let cMe=(()=>{class n{get isOpen(){return this._isOpen&&this.showPanel}_setColor(t){this._color=t,this._setThemeClasses(this._classList)}set classList(t){this._classList=t&&t.length?function kSe(n,e=/\s+/){const t=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(e);for(const r of i){const s=`${r}`.trim();s&&t.push(s)}}return t}(t).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}constructor(t,i,r,s){this._changeDetectorRef=t,this._elementRef=i,this._defaults=r,this._activeOptionChanges=mt.EMPTY,this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new vn,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new vn,this.opened=new vn,this.closed=new vn,this.optionActivated=new vn,this._classList={},this.id="mat-autocomplete-"+sMe++,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!r.autoActiveFirstOption,this.autoSelectActiveOption=!!r.autoSelectActiveOption,this.requireSelection=!!r.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new HSe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const i=new oMe(this,t);this.optionSelected.emit(i)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_setVisibilityClasses(t){t[this._visibleClass]=this.showPanel,t[this._hiddenClass]=!this.showPanel}_setThemeClasses(t){t["mat-primary"]="primary"===this._color,t["mat-warn"]="warn"===this._color,t["mat-accent"]="accent"===this._color}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||n)(at(Io),at(ui),at(bW),at(La))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(tc(s,z9,5),tc(s,H9,5)),2&i){let o;er(o=tr())&&(r.options=o),er(o=tr())&&(r.optionGroups=o)}},viewQuery:function(i,r){if(1&i&&(lo(ec,7),lo(tMe,5)),2&i){let s;er(s=tr())&&(r.template=s.first),er(s=tr())&&(r.panel=s.first)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:["autoActiveFirstOption","autoActiveFirstOption",Po],autoSelectActiveOption:["autoSelectActiveOption","autoSelectActiveOption",Po],requireSelection:["requireSelection","requireSelection",Po],panelWidth:"panelWidth",disableRipple:["disableRipple","disableRipple",Po],classList:["class","classList"],hideSingleSelectionIndicator:["hideSingleSelectionIndicator","hideSingleSelectionIndicator",Po]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[Ei([{provide:V9,useExisting:n}]),gg],ngContentSelectors:iMe,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(i,r){1&i&&(Ca(),Mi(0,nMe,3,5,"ng-template"))},dependencies:[yU],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[rMe]},changeDetection:0})}return n})();const lMe={provide:Hc,useExisting:me(()=>xW),multi:!0},wW=new xt("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=Vt(Gc);return()=>n.scrollStrategies.reposition()}});let xW=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,h,f){this._element=t,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=o,this._dir=c,this._formField=l,this._document=u,this._viewportRuler=h,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=mt.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Jt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Mv(()=>{const g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(zl(g),zi(()=>Fc(...g.map(m=>m.onSelectionChange)))):this._zone.onStable.pipe(yi(1),zi(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(27===g.keyCode&&!ph(g)||38===g.keyCode&&ph(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){const t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&T9(this._trackedModal,"aria-owns",this.autocomplete.id)}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&YP(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Fc(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(mi(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(mi(()=>this._overlayAttached)):an()).pipe(Wt(t=>t instanceof G9?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Fc(Dm(this._document,"click"),Dm(this._document,"auxclick"),Dm(this._document,"touchend")).pipe(mi(t=>{const i=Ju(t),r=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const i=t.keyCode,r=ph(t);if(27===i&&!r&&t.preventDefault(),this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this.openPanel(),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let i=t.target,r=i.value;if("number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r){if(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&r!==(this.autocomplete.displayWith?.(s)??s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);this._canOpen()&&this._document.activeElement===t.target&&this.openPanel()}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return Fc(this._zone.onStable.pipe(yi(1)),this.autocomplete.options.changes.pipe(rr(()=>this._positionStrategy.reapplyLastPosition()),vW(0))).pipe(zi(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),yi(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(t){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t;null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const i=this.autocomplete,r=t?t.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(yi(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,i){this.autocomplete?.options?.forEach(r=>{r!==t&&r.selected&&r.deselect(i)})}_attachOverlay(){let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new A1(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=this._element.nativeElement.value,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new iN({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let o;o="above"===this.position?s:"below"===this.position?i:[...i,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let i=-1;for(let r=0;r<t.options.length;r++)if(!t.options.get(r).disabled){i=r;break}t._keyManager.setActiveItem(i)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(t){const i=this.autocomplete,r=function SCe(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(t,i.options,i.optionGroups);if(0===t&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[t];if(s){const o=s._getHostElement(),a=function CCe(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const i=this.autocomplete.id;this._trackedModal&&YP(this._trackedModal,"aria-owns",i),T9(t,"aria-owns",i),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(YP(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(Gc),at(co),at(_n),at(Io),at(wW),at(Cv,8),at(sN,9),at(ii,8),at(ZP),at(bW,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&Gi("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&i&&Pr("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled",Po]},exportAs:["matAutocompleteTrigger"],features:[Ei([lMe]),gg,Vi]})}return n})();const EW=xv({passive:!0});let dMe=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Lo;const i=gh(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Jt,o="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===c.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,EW),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,EW)}}),s}stopMonitoring(t){const i=gh(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(ut(La),ut(_n))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hMe=new xt("MAT_INPUT_VALUE_ACCESSOR"),fMe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let pMe=0;const gMe=pCe(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Jt}});let mMe=(()=>{class n extends gMe{get disabled(){return this._disabled}set disabled(t){this._disabled=Mm(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(E1e.required)??!1}set required(t){this._required=Mm(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&v9().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Mm(t)}constructor(t,i,r,s,o,a,c,l,u,h){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=l,this._formField=h,this._uid="mat-input-"+pMe++,this.focused=!1,this.stateChanges=new Jt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>v9().has(m)),this._iOSKeyupListener=m=>{const b=m.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=c||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){fMe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(La),at(Ku,10),at(vv,8),at(g1,8),at(mCe),at(hMe,10),at(dMe),at(_n),at(sN,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&Gi("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(wf("id",r.id)("disabled",r.disabled)("required",r.required),Pr("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ar("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Ei([{provide:pW,useExisting:n}]),oi,Vi]})}return n})();function AW(n,e){return n>=0&&n<e?n:n>=e?e:n+e<0?0:n+e}function yMe(n,e){if(1&n&&(Fn(0,"span"),Pc(1),Bn()),2&n){const t=e.$implicit;(function Dc(n){Oc(FB,hK,n,!1)})(t.styles),Cg(t.classes),Jn(1),t0(" ",t.text,"\n")}}let vMe=(()=>{class n{constructor(){this.clsName="ccf-decorated-text",this.segments=[]}ngOnChanges(t){("text"in t||"decorations"in t)&&(this.segments=this.createSegments())}createSegments(){const{text:t}=this;if(!t)return[this.makeUndecoratedSegment(t)];const i=this.getNormalizedDecorations();if(0===i.length)return[this.makeUndecoratedSegment(t)];const r=this.createStackOps(i),s=[];let o=[],a=0;0===r[0].index&&(o=this.updateStack(o,r.shift()));for(const c of r)s.push(this.makeDecoratedSegment(t.slice(a,c.index),o)),a=c.index,o=this.updateStack(o,c);return a!==t.length&&s.push(this.makeDecoratedSegment(t.slice(a),o)),s}createStackOps(t){const i={},r=s=>i[s]??={index:s,added:[],removed:[]};for(const s of t)r(s.start).added.push(s),r(s.end).removed.push(s);return Object.entries(i).sort((s,o)=>+s[0]-+o[0]).map(s=>s[1])}updateStack(t,i){return t.filter(r=>!i.removed.includes(r)).concat(i.added)}getNormalizedDecorations(){const{decorations:t=[],text:{length:i}}=this;return t.map(r=>function _Me(n,e){return{start:AW(n.start??0,e),end:AW(n.end??e,e),classes:n.classes??[],styles:n.styles??{}}}(r,i)).filter(r=>r.start<i&&r.start<r.end)}makeUndecoratedSegment(t){return{text:t,classes:[],styles:{}}}makeDecoratedSegment(t,i){return{text:t,classes:i.reduce((o,a)=>o.concat(a.classes),[]),styles:i.reduce((o,a)=>({...o,...a.styles}),{})}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-decorated-text"]],hostVars:2,hostBindings:function(i,r){2&i&&Cg(r.clsName)},inputs:{text:"text",decorations:"decorations"},features:[Vi],decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&Mi(0,yMe,2,5,"span",0),2&i&&Ti("ngForOf",r.segments)},dependencies:[bE],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})}return n})();function bMe(n,e){if(1&n&&(Fn(0,"mat-option"),as(1,"ccf-decorated-text",8),Bn()),2&n){const t=e.$implicit;Jn(1),Ti("text",t.label)("decorations",t.decorations)}}const wMe=[[["","matPrefix",""]],[["","matSuffix",""]]],xMe=["[matPrefix]","[matSuffix]"],EMe=new xt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});class I1{get value(){return this.controller.value}set value(e){this.controller.setValue(e,{emitEvent:!1})}constructor(e){this.defaultMaxOptions=e,this.clsName="ccf-text-search",this.placeholder="Search...",this.optionSelected=new vn,this.controller=new U1e,this.options=this.controller.valueChanges.pipe(zl(""),dh(),zi(this.getOptions)),this.valueChange=this.controller.valueChanges}getOptions(e){var t=this;return kt(function*(){const{autoCompleter:i,maxOptions:r=t.defaultMaxOptions}=t;return!i||r<1?[]:_9(hs(i(e,r)).pipe(yi(1),Wt(o=>o.length<=r?o:o.slice(0,r))))})()}optionDisplay(e){return e?.label??""}optionId(e,t){return t.id}static#e=this.\u0275fac=function(t){return new(t||I1)(at(EMe))};static#t=this.\u0275cmp=Fi({type:I1,selectors:[["ccf-text-search"]],hostVars:2,hostBindings:function(t,i){2&t&&Cg(i.clsName)},inputs:{placeholder:"placeholder",value:"value",maxOptions:"maxOptions",autoCompleter:"autoCompleter"},outputs:{valueChange:"valueChange",optionSelected:"optionSelected"},ngContentSelectors:xMe,decls:11,vars:8,consts:[[1,"form"],["appearance","outline",1,"form-field"],["matPrefix",""],["matInput","","type","search",1,"input",3,"placeholder","formControl","matAutocomplete"],[1,"autocomplete",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[4,"ngFor","ngForOf","ngForTrackBy"],["matSuffix",""],[3,"text","decorations"]],template:function(t,i){if(1&t&&(Ca(wMe),Fn(0,"form",0)(1,"mat-form-field",1),qy(2,2),Ii(3),Xy(),as(4,"input",3),Fn(5,"mat-autocomplete",4,5),Gi("optionSelected",function(s){return i.optionSelected.emit(s.option.value)}),Mi(7,bMe,2,2,"mat-option",6),Iu(8,"async"),Bn(),qy(9,7),Ii(10,1),Xy(),Bn()()),2&t){const r=$x(6);Jn(4),Ti("placeholder",i.placeholder)("formControl",i.controller)("matAutocomplete",r),Jn(1),Ti("displayWith",i.optionDisplay),Jn(2),Ti("ngForOf",Du(8,6,i.options))("ngForTrackBy",i.optionId)}},dependencies:[bE,Q5,s1,k5,j5,vv,PP,cMe,z9,xW,QTe,$Te,YTe,mMe,vMe,h0],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex{align-items:center}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{height:3rem;border:none}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{top:0;border:none}"],changeDetection:0})}function Rm(n){return!0===n}function oa(n){return null===n||typeof n>"u"}function mo(n){return!oa(n)}function aN(n){return!!n}function IW(n){return oa(n)?n:JSON.parse(JSON.stringify(n))}function DW(n){return mo(n)&&"object"==typeof n&&function cN(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}kn([Uf.ak,Ft("design:type",Function),Ft("design:paramtypes",[String]),Ft("design:returntype",Promise)],I1.prototype,"getOptions",null),S(1563),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name)).filter(n=>!0!==n.disabled);const qMe="NGXS_COMPUTED_OPTION",PW="NGXS_DATA_META",lN="NGXS_META",NW="NGXS_ARGUMENT_REGISTRY_META";function LW(n=KMe){return ci((e,t)=>{let i=!1;e.subscribe(ln(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function KMe(){return new bv}let FW=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new Ni(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(ut(Xu,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();function Dv(n){return n[PW]}let lc=(()=>{class n{constructor(t,i,r){n.store=t.get(Xu),n.ngZone=t.get(_n),n.factory=i,n.context=r,n.computed=t.get(FW),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(ut(Ji),ut(P6),ut(N6))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();class qr{constructor(){qr.statesCachedMeta.clear()}static createStateContext(e){return lc.context.createStateContext(e)}static ensureMappedState(e){if(oa(lc.factory)||oa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(mo(e.name)?qr.statesCachedMeta.get(e.name):null)||qr.ensureMeta(e)}static getRepositoryByInstance(e){const i=Dv(qr.getStateClassByInstance(e))??null;if(oa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=qr.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=t?.getPayloadTypeByIndex(s);mo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=qr.createPayload(t,i),s=function QMe(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new s(r)}static ensureMeta(e){const t=mo(e.name)?lc.factory.states?.find(i=>i.name===e.name):null;return mo(t)&&mo(e.name)&&qr.statesCachedMeta.set(e.name,t),t}}qr.statesCachedMeta=new Map,qr.\u0275fac=function(e){return new(e||qr)},qr.\u0275prov=Dt({token:qr,factory:qr.\u0275fac}),new class eIe{constructor(){this.subject=new Df(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Zu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?mi((r,s)=>n(r,s,i)):Ns,yi(1),t?xm(e):LW(()=>new bv))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Df(1)}};class nIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${mo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function BW(n){return n.NGXS_OPTIONS_META??{name:""}}function kW(n){const e=BW(n),t=e.children??[],r=IW(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(DW(r))return function iIe(n,e){return e.reduce((t,i)=>{const r=BW(i);if(function Iv(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=kW(i),t},n??{})}(r,t);throw new nIe(r)}return r}function jW(){return`__${qMe}__`}function UW(n){return n[jW()]??null}function VW(){return lc?.computed?.sequenceValue??0}function oIe(n){let e=!1;return Qf(n)&&(e=!0),e}function uN(n){return n[NW]}class aIe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class cIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(aN(this.argumentMap.has(e))||aN(this.payloadMap.has(e)))throw new aIe(e,t)}}function pIe(n){return{enumerable:!0,configurable:!0,get(){const e=Dv(n),t=qr.ensureMappedState(e.stateMeta);return qr.createStateContext(t)}}}const bIe={dataActionSubscribeRequired:!0},wIe=new xt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>bIe});let xIe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[qr,lc,FW,...t]}}}return n.\u0275fac=function(t){return new(t||n)(ut(qr,2),ut(lc,2))},n.\u0275mod=to({type:n}),n.\u0275inj=Fs({}),n})();function HW(){return(n,e,t)=>{!function ZMe(n,e){if(!function VMe(n,e){let t=n,i=!1;if(DW(t))for(;null!==t;){if(Rm(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function sIe(n){return oa(UW(n))&&Object.defineProperties(n,{[jW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),UW(n)}(this),o=s?.get(i);if(Rm(o?.isObservable))return o?.value;if(oa(o)||o.sequenceId!==VW()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:VW(),isObservable:oIe(c)}),c}return o?.value},t}}const EIe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function N1(n={}){const e=function AIe(n){const e=lc?.injector?.get(wIe,void 0,ni.Optional),t={...EIe};return mo(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function JMe(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const u=qr.getRepositoryByInstance(c),h=u.operations;let f=h[o];const g=u.stateMeta,m=uN(s);if(oa(f)){const ce=function vIe(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),re=function tIe(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)mo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):mo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:g.path,methodName:o,argumentsNames:ce,argumentRegistry:m});f=h[o]={type:re,options:{cancelUncompleted:e.cancelUncompleted??!1}},mo(f)&&(g.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}qr.ensureMappedState(g).instance[f.type]=()=>(Rm(e.insideZone)?lc.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),Qf(l)&&Rm(e.subscribeRequired)?an(null).pipe(Wt(()=>l)):l);const L=qr.createAction(f,a,m),V=lc.store.dispatch(L);return Qf(l)?function rIe(n,e){return dv([n,e]).pipe(Wt(t=>t.pop()))}(V,l):l},r}}function GW(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function lIe(n,e){const t=n[e];return oa(uN(t))&&Object.defineProperties(t,{[NW]:{enumerable:!0,configurable:!0,value:new cIe}}),uN(t)})(e,t).createPayloadType(r,t,i)}}function zW(){return n=>{const e=function yIe(n){if(function DMe(n){return!aN(n)}(n.hasOwnProperty(lN))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,lN,{value:e})}return function _Ie(n){return n?.[lN]}(n)}(n);if(oa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function hIe(n,e){(function dIe(n){const e=Dv(n)??null;return(oa(e)||e?.stateClass!==n)&&function uIe(n){Object.defineProperty(n,PW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Dv(n)}(n)).stateMeta=e}(n,e),function CIe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>IW(t)},context:pIe(n)})}(n,e,kW(n)),function gIe(n){const t=Dv(n)?.stateMeta?.name??null;if(mo(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(mo(this[i]))return this[i];if(oa(lc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=lc.store.select(n).pipe(Wt(r=>r),Bo({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let TIe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new Jt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})(),WW=(()=>{class n extends TIe{get snapshot(){return this.getState()}get ctx(){return function mIe(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})(),n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),kn([HW(),Ft("design:type",Object),Ft("design:paramtypes",[])],n.prototype,"snapshot",null),kn([N1(),eD(0,GW("patchValue")),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],n.prototype,"patchState",null),kn([N1(),eD(0,GW("stateValue")),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],n.prototype,"setState",null),kn([N1(),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",void 0)],n.prototype,"reset",null),n})();function $W(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return Wt(t=>{let i=t;for(let r=0;r<e;r++){const s=i?.[n[r]];if(!(typeof s<"u"))return;i=s}return i})}let Qu=class hb extends WW{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function MIe(){return mi(n=>null!=n)}(),Bo(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe($W(...e),dh(),Bo(1))}getOption(...e){const t=this.getPathKey(e);if(this.optionCache.has(t))return this.optionCache.get(t)??an();const i=this.config$.pipe($W(...e),dh(),Bo(1));return this.optionCache.set(t,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ur(hb)))(i||hb)}})();static#t=this.\u0275prov=Dt({token:hb,factory:hb.\u0275fac})};kn([HW(),Ft("design:type",St),Ft("design:paramtypes",[])],Qu.prototype,"config$",null),Qu=kn([zW(),yP({name:"globalConfig",defaults:null})],Qu);const YW="ALLOW_TELEMETRY",DIe=qW();function qW(){const n=localStorage.getItem(YW);return null===n?void 0:"true"===n.toLowerCase()}let dN=class fb extends WW{setAllowTelemetry(e){const t=qW();localStorage.setItem(YW,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==t||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ur(fb)))(i||fb)}})();static#t=this.\u0275prov=Dt({token:fb,factory:fb.\u0275fac})};function yh(...n){const e=m0(n),t=cV(n),{args:i,keys:r}=L6(n);if(0===i.length)return hs([],e);const s=new St(function RIe(n,e,t=Ns){return i=>{XW(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)XW(e,()=>{const l=hs(n[c],e);let u=!1;l.subscribe(ln(i,h=>{s[c]=h,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>F6(r,o):Ns));return t?s.pipe(YA(t)):s}function XW(n,e,t){n?Pu(t,n,e):e()}function L1(){return ci((n,e)=>{let t=null;n._refCount++;const i=ln(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}kn([N1(),Ft("design:type",Function),Ft("design:paramtypes",[Boolean]),Ft("design:returntype",void 0)],dN.prototype,"setAllowTelemetry",null),dN=kn([zW(),yP({name:"tracking",defaults:{allowTelemetry:DIe}})],dN);class fN extends St{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,dc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;const t=this.getSubject();e.add(this.source.subscribe(ln(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return L1()(this)}}function Ov(n){return ci((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}Error;const HN=new xt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),GN=new xt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Vt(ii);if(!n)throw new Error("Window is not available");return n}}),qRe=new xt("ngx-data-layer",{providedIn:"root",factory:()=>function YRe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Vt(GN))}),Y7=new xt("ngx-gtag-fn",{providedIn:"root",factory:()=>function XRe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Vt(GN),Vt(qRe))});let zN=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([u,h])=>c.set(u,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(ut(HN),ut(ii),ut(Y7))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new xt("ngx-google-analytics-routing-settings",{factory:()=>({})}),new xt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});const rOe={connector:()=>new Jt};function aOe(n,e,t,i){t&&!Re(t)&&(i=t);const r=Re(t)?t:void 0;return s=>function oOe(n,e){const t=Re(n)?n:()=>n;return Re(e)?function sOe(n,e=rOe){const{connector:t}=e;return ci((i,r)=>{const s=t();us(n(function iOe(n){return new St(e=>n.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:t}):i=>new fN(i,t)}(new Df(n,e,i),r)(s)}class cOe{}const uOe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),dOe=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Wc={storageStrategy:class lOe extends cOe{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},hOe=new Jt;function Fa(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,s=i.value;if(i&&i.value){let o=n.storageStrategy?new n.storageStrategy:new Wc.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),Fc(hOe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:function Dre(n){return n?function Rre(n){return new St(e=>n.schedule(()=>e.complete()))}(n):Lo}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||Wc.cacheResolver||uOe,n.cacheHasher=n.cacheHasher||Wc.cacheHasher||dOe,i.value=function(...u){const h=o.getAll(r,this);let f=n.cacheHasher(u),g=h.find(b=>n.cacheResolver(b.parameters,f));const m=a.find(b=>n.cacheResolver(b.parameters,f));if((n.maxAge||Wc.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(n.maxAge||Wc.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(n.slidingExpiration||Wc.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const b=an(g.response);return n.async?b.pipe(vW(0)):b}if(m)return m.response;{const b=s.call(this,...u).pipe(Ov(()=>{const w=a.find(L=>n.cacheResolver(L.parameters,f));a.splice(a.indexOf(w),1)}),rr(w=>{(!n.shouldCacheDecider||n.shouldCacheDecider(w))&&((!(n.maxCacheCount||Wc.maxCacheCount)||1===(n.maxCacheCount||Wc.maxCacheCount)||(n.maxCacheCount||Wc.maxCacheCount)&&(n.maxCacheCount||Wc.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:w,created:n.maxAge||Wc.maxAge?new Date:null},r,this))}),aOe(1),L1());return a.push({parameters:f,response:b,created:new Date}),b}}}return i}}class WN{}class Kl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Kl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Kl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Kl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class fOe{encodeKey(e){return X7(e)}encodeValue(e){return X7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const gOe=/%(\d[a-f0-9])/gi,mOe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function X7(n){return encodeURIComponent(n).replace(gOe,(e,t)=>mOe[t]??e)}function X1(n){return`${n}`}class sr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fOe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pOe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(X1):[X1(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(X1(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(X1(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Xr{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function K7(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function J7(n){return typeof Blob<"u"&&n instanceof Blob}function Z7(n){return typeof FormData<"u"&&n instanceof FormData}class qv{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _Oe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new Kl),this.context||(this.context=new Xr),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new sr,this.urlWithParams=t}serializeBody(){return null===this.body?null:K7(this.body)||J7(this.body)||Z7(this.body)||function yOe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Z7(this.body)?null:J7(this.body)?this.body.type||null:K7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new qv(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var YN=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(YN||{});class vOe{constructor(e,t=200,i="OK"){this.headers=e.headers||new Kl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xv extends vOe{constructor(e={}){super(e),this.type=YN.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Xv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function qN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let wh=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof qv)s=t;else{let c,l;c=r.headers instanceof Kl?r.headers:new Kl(r.headers),r.params&&(l=r.params instanceof sr?r.params:new sr({fromObject:r.params})),s=new qv(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=an(s).pipe(function Rv(n,e){return Re(e)?ds(n,e,1):ds(n,1)}(c=>this.handler.handle(c)));if(t instanceof qv||"events"===r.observe)return o;const a=o.pipe(mi(c=>c instanceof Xv));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Wt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Wt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Wt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Wt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new sr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,qN(r,i))}post(t,i,r={}){return this.request("POST",t,qN(r,i))}put(t,i,r={}){return this.request("PUT",t,qN(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(ut(WN))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})();class VOe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const HOe=new xt("basePath");class f${constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:t=>this.defaultEncodeParam(t),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}defaultEncodeParam(e){const t="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(t))}}let p$=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Kl,this.configuration=new f$,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new VOe}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>t=this.addToHttpParamsRecursive(t,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>t=this.addToHttpParamsRecursive(t,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,s){const o=t.token;let a=new sr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new Xr);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,s){const o=t.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Xr);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,s){const o=t.cache;let a=new sr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new Xr);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,u=t.bmiRange,h=t.cache,f=t.ontologyTerms,g=t.cellTypeTerms,m=t.biomarkerTerms,b=t.consortiums,w=t.providers,L=t.sex,V=t.spatial,ce=t.technologies,re=t.token;let Ie=new sr({encoder:this.encoder});null!=a&&(Ie=this.addToHttpParams(Ie,a,"age")),null!=c&&(Ie=this.addToHttpParams(Ie,c,"age-range")),null!=l&&(Ie=this.addToHttpParams(Ie,l,"bmi")),null!=u&&(Ie=this.addToHttpParams(Ie,u,"bmi-range")),null!=h&&(Ie=this.addToHttpParams(Ie,h,"cache")),f&&f.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"ontology-terms")}),g&&g.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"cell-type-terms")}),m&&m.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"biomarker-terms")}),null!=o&&(Ie=this.addToHttpParams(Ie,o,"organ-iri")),b&&b.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"consortiums")}),w&&w.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"providers")}),null!=L&&(Ie=this.addToHttpParams(Ie,L,"sex")),V&&V.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"spatial")}),ce&&ce.forEach(ht=>{Ie=this.addToHttpParams(Ie,ht,"technologies")}),null!=re&&(Ie=this.addToHttpParams(Ie,re,"token"));let Ne=this.defaultHeaders,st=s&&s.httpHeaderAccept;void 0===st&&(st=this.configuration.selectHeaderAccept(["application/json"])),void 0!==st&&(Ne=Ne.set("Accept",st));let dt=s&&s.context;void 0===dt&&(dt=new Xr);let qe="json";return st&&(qe=st.startsWith("text")?"text":this.configuration.isJsonMime(st)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:dt,params:Ie,responseType:qe,withCredentials:this.configuration.withCredentials,headers:Ne,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}sennetRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,s){const o=t.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,c=t.format;let l=new sr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new Xr);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,s){const o=t.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,c=t.format;let l=new sr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new Xr);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let b="json";return h&&(b=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:l,responseType:b,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new sr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Xr);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,b=t.providers,w=t.sex,L=t.spatial,V=t.technologies,ce=t.token;let re=new sr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(qe=>{re=this.addToHttpParams(re,qe,"ontology-terms")}),f&&f.forEach(qe=>{re=this.addToHttpParams(re,qe,"cell-type-terms")}),g&&g.forEach(qe=>{re=this.addToHttpParams(re,qe,"biomarker-terms")}),m&&m.forEach(qe=>{re=this.addToHttpParams(re,qe,"consortiums")}),b&&b.forEach(qe=>{re=this.addToHttpParams(re,qe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),L&&L.forEach(qe=>{re=this.addToHttpParams(re,qe,"spatial")}),V&&V.forEach(qe=>{re=this.addToHttpParams(re,qe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new Xr);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(ut(wh),ut(HOe,8),ut(f$,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JN=new Jt,Vm={cacheBusterObserver:JN},up={cacheBusterObserver:JN,maxCacheCount:4};function g$(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function GOe(n){return{age:g$(n?.ageRange,1,110),bmi:g$(n?.bmiRange,13,83),sex:n?.sex?.toLowerCase?.(),ontologyTerms:n?.ontologyTerms,cellTypeTerms:n?.cellTypeTerms,biomarkerTerms:n?.biomarkerTerms,consortiums:n?.consortiums,providers:n?.tmc,technologies:n?.technologies,spatial:n?.spatialSearches}}function m$(n){return n.map(e=>({...e,transformMatrix:new Pn(e.transformMatrix??[])}))}class $s{constructor(e,t){this.api=e,this.globalConfig=t,t.getOption("hubmapToken").subscribe(JN)}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},n=>n)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},n=>n)}getTissueBlockResults(e){return this.doRequest(t=>this.api.tissueBlocks(t),e,{},n=>n)}getAggregateResults(e){return this.doRequest(t=>this.api.aggregateResults(t),e)}getOntologyTermOccurences(e){return this.doRequest(t=>this.api.ontologyTermOccurences(t),e)}getCellTypeTermOccurences(e){return this.doRequest(t=>this.api.cellTypeTermOccurences(t),e)}getBiomarkerTermOccurences(e){return this.doRequest(t=>this.api.biomarkerTermOccurences(t),e)}getScene(e){return this.doRequest(t=>this.api.scene(t),e,{},m$)}getReferenceOrganScene(e,t){return this.doRequest(i=>this.api.referenceOrganScene(i),t,{organIri:e},m$)}doRequest(e,t,i,r){const{api:s,globalConfig:o}=this,a={...GOe(t),...i};return yh([o.getOption("remoteApiEndpoint"),o.getOption("hubmapToken")]).pipe(yi(1),rr(([c,l])=>{s.configuration.basePath=c,l&&(a.token=l)}),zi(()=>e(a)),Wt(c=>r?r(c):c))}static#e=this.\u0275fac=function(t){return new(t||$s)(ut(p$),ut(Qu))};static#t=this.\u0275prov=Dt({token:$s,factory:$s.\u0275fac,providedIn:"root"})}function aa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let ZN;function $c(){return ZN||(ZN=function zOe(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=aa(t);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),ZN}function WOe(n,e=$c()){return e("readonly",t=>aa(t.get(n)))}function $Oe(n,e=$c()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),aa(t.transaction)))}function YOe(n,e=$c()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),aa(t.transaction)))}kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getProviderNames",null),kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getDatasetTechnologyNames",null),kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getOntologyTreeModel",null),kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getCellTypeTreeModel",null),kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getBiomarkerTreeModel",null),kn([Fa(Vm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],$s.prototype,"getReferenceOrgans",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getTissueBlockResults",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getAggregateResults",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getOntologyTermOccurences",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getCellTypeTermOccurences",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getBiomarkerTermOccurences",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],$s.prototype,"getScene",null),kn([Fa(up),Ft("design:type",Function),Ft("design:paramtypes",[String,Object]),Ft("design:returntype",St)],$s.prototype,"getReferenceOrganScene",null);var qOe=S(5020);const Jv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Zv="http://www.w3.org/2001/XMLSchema#",eL="http://www.w3.org/2000/10/swap/",_o={xsd:{decimal:`${Zv}decimal`,boolean:`${Zv}boolean`,double:`${Zv}double`,integer:`${Zv}integer`,string:`${Zv}string`},rdf:{type:`${Jv}type`,nil:`${Jv}nil`,first:`${Jv}first`,rest:`${Jv}rest`,langString:`${Jv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${eL}reify#forSome`,forAll:`${eL}reify#forAll`},log:{implies:`${eL}log#implies`}};var XOe=S(3410),KOe=S.n(XOe);const{xsd:Z1}=_o,JOe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,_$={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},ZOe=/[\x00-\x20<>\\"\{\}\|\^\`]/,QOe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},e2e=/$0^/;class y${constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in QOe)&&this[t]instanceof RegExp&&(this[t]=e2e)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,u=i[0];let h="",f="",g="",m=null,b=0,w=!1;switch(u){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(b=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){w=!0;break}case"<":if(m=this._unescapedIri.exec(i))h="IRI",f=m[1];else if(m=this._iri.exec(i)){if(f=this._unescape(m[1]),null===f||ZOe.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",b=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",b=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",b=2);break;case"_":((m=this._blank.exec(i))||t&&(m=this._blank.exec(`${i} `)))&&(h="blank",g="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(i))f=m[1];else if(({value:f,matchLength:b}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==b)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(i))f=m[1];else if(({value:f,matchLength:b}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==b)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(i))&&(h="var",f=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(i))?(h="langcode",f=m[1]):(m=this._keyword.exec(i))&&(h=m[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",b=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(i)||t&&(m=this._number.exec(`${i} `)))&&(h="literal",f=m[0],g="string"==typeof m[1]?Z1.double:"string"==typeof m[2]?Z1.decimal:Z1.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(i))?h=m[0].toUpperCase():w=!0;break;case"f":case"t":(m=this._boolean.exec(i))?(h="literal",f=m[0],g=Z1.boolean):w=!0;break;case"a":(m=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):w=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(b=1,f="="):(b=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(b=1,h=u);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",b=2):(h=u,b=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",b=2);break;default:w=!0}if(w&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(i))?((m=this._prefixed.exec(i))||t&&(m=this._prefixed.exec(`${i} `)))&&(h="prefixed",g=m[1]||"",f=this._unescape(m[2])):(h="prefix",f=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const L=b||m[0].length,V=s(h,f,g,l,L);this.previousToken=V,this._previousMarker=h,i=i.substr(L,i.length)}function s(a,c,l,u,h){const f=i?r-i.length:r,m={type:a,value:c,prefix:l,line:u,start:f,end:f+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(JOe,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in _$?_$[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}KOe()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}function t2e(n){return!!n&&"NamedNode"===n.termType}function n2e(n){return!!n&&"BlankNode"===n.termType}function i2e(n){return!!n&&"Literal"===n.termType}function r2e(n){return!!n&&"Variable"===n.termType}function Hm(n){return!!n&&"DefaultGraph"===n.termType}function s2e(n){return Hm(n.graph)}function o2e(n,e){return tL({"":n.value||n},e)("")}function tL(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);t[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||mr,i}const{rdf:a2e,xsd:dp}=_o;let Qv,c2e=0;const nL={namedNode:function l2e(n){return new iL(n)},blankNode:function u2e(n){return new b$(n||"n3-"+c2e++)},variable:function h2e(n){return new w$(n)},literal:function d2e(n,e){if("string"==typeof e)return new hp(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=dp.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?dp.integer:dp.double:(t=dp.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new hp(""===t||t===dp.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function f2e(){return Qv},quad:E$,triple:E$},mr=nL;class Yc{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Yc?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class iL extends Yc{get termType(){return"NamedNode"}}class hp extends Yc{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new iL(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?dp.string:a2e.langString}equals(e){return e instanceof hp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class b$ extends Yc{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class w$ extends Yc{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Gm(n,e,t){if(e=e||nL,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===nL)return new hp(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const i=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,i-1),"@"===n[i+1]?n.substr(i+2):e.namedNode(n.substr(i+3)));case"[":n=JSON.parse(n);break;default:if(!t||!Array.isArray(n))return e.namedNode(n)}return e.quad(Gm(n[0],e,!0),Gm(n[1],e,!0),Gm(n[2],e,!0),n[3]&&Gm(n[3],e,!0))}function ca(n,e){if("string"==typeof n)return n;if(n instanceof Yc&&"Quad"!==n.termType)return n.id;if(!n)return Qv.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==dp.string?`^^${n.datatype.value}`:""}`;case"Quad":const t=[ca(n.subject,!0),ca(n.predicate,!0),ca(n.object,!0)];return Hm(n.graph)||t.push(ca(n.graph,!0)),e?t:JSON.stringify(t);default:throw new Error(`Unexpected termType: ${n.termType}`)}}Qv=new class x$ extends Yc{constructor(){return super(""),Qv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class rL extends Yc{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||Qv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function E$(n,e,t,i){return new rL(n,e,t,i)}let A$=0;class Q1{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&S$(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),s=/triple/.test(t),o=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new y$({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){A$=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=sL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<t;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<t&&"/"!==e[s];)r=s;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${A$++}_`,this._prefixCallback=i||sL,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=t,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=sL):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function sL(){}function S$(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(_o.rdf.first),n.RDF_REST=t(_o.rdf.rest),n.RDF_NIL=t(_o.rdf.nil),n.N3_FORALL=t(_o.r.forAll),n.N3_FORSOME=t(_o.r.forSome),n.ABBREVIATIONS={a:t(_o.rdf.type),"=":t(_o.owl.sameAs),">":t(_o.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}S$(Q1.prototype,mr),mr.defaultGraph();var nb=S(8905);class eS{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||mr,e&&this.addQuads(e)}_termFromId(e,t){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return Gm(e,t)}_termToNumericId(e){if("Quad"===e.termType){const t=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let s;return t&&i&&r&&(Hm(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${t}.${i}.${r}.${s}`:`.${t}.${i}.${r}`]}return this._ids[ca(e)]}_termToNewNumericId(e){const t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${Hm(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ca(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const s in t)for(const o in i=t[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const s=e[t]||(e[t]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,t,i,r){const s=e[t],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[t]}*_findInIndex(e,t,i,r,s,o,a,c){let l,u,h;const f=this._entities,g=this._termFromId(c,this._factory),m={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const b in e)if(u=e[b]){m[s]=this._termFromId(f[b],this._factory),i&&((l=u,u={})[i]=l[i]);for(const w in u)if(h=u[w]){m[o]=this._termFromId(f[w],this._factory);const L=r?r in h?[r]:[]:Object.keys(h);for(let V=0;V<L.length;V++)m[a]=this._termFromId(f[L[V]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,g)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,s;if(r=e[t])for(s in r)i(s)}_loopByKey1(e,t,i){let r,s;for(r in e)s=e[r],s[t]&&i(r)}_loopBy2Keys(e,t,i,r){let s,o,a;if((s=e[t])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,t,i,r){let o,a,c,s=0;t&&((o=e,e={})[t]=o[t]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const u in a)(c=a[u])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!function m2e(n){return"string"==typeof n||n instanceof String}(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=ca(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),i=this._termToNewNumericId(i);const o=this._addToIndex(s.subjects,e,t,i);return this._addToIndex(s.predicates,t,i,e),this._addToIndex(s.objects,i,e,t),this._size=null,o}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=ca(r);const s=this._graphs;let o,a,c;if(!((e=e&&this._termToNumericId(e))&&(t=t&&this._termToNumericId(t))&&(i=i&&this._termToNumericId(i))&&(o=s[r])&&(a=o.subjects[e])&&(c=a[t])&&i in c))return!1;for(e in this._removeFromIndex(o.subjects,e,t,i),this._removeFromIndex(o.predicates,t,i,e),this._removeFromIndex(o.objects,i,e,t),null!==this._size&&this._size--,o.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const s=new nb.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,t,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){r=r&&ca(r);const s=this._getGraphs(r);let o,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||t&&!(c=this._termToNumericId(t))||i&&!(l=this._termToNumericId(i))))for(const u in s)(o=s[u])&&(a?l?yield*this._findInIndex(o.objects,l,a,c,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,a,c,null,"subject","predicate","object",u):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",u):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",u))}match(e,t,i,r){return new oL(this,e,t,i,r)}countQuads(e,t,i,r){r=r&&ca(r);const s=this._getGraphs(r);let a,c,l,u,o=0;if(e&&!(c=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||i&&!(u=this._termToNumericId(i)))return 0;for(const h in s)(a=s[h])&&(o+=e?i?this._countInIndex(a.objects,u,c,l):this._countInIndex(a.subjects,c,l,u):t?this._countInIndex(a.predicates,l,u,c):this._countInIndex(a.objects,u,c,l));return o}forEach(e,t,i,r,s){this.some(o=>(e(o),!1),t,i,r,s)}every(e,t,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),t,i,r,s);return o&&a}some(e,t,i,r,s){for(const o of this.readQuads(t,i,r,s))if(e(o))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,t,i),r}forSubjects(e,t,i,r){r=r&&ca(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.predicates,a,c,e):this._loopByKey1(o.subjects,a,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,t,i),r}forPredicates(e,t,i,r){r=r&&ca(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.objects,c,a,e):this._loopByKey0(o.subjects,a,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(s=>{r.push(s)},e,t,i),r}forObjects(e,t,i,r){r=r&&ca(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.subjects,a,c,e):this._loopByKey1(o.objects,a,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,t,i),r}forGraphs(e,t,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),t,i,r,s)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,_o.rdf.rest,_o.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let u,h,l=!1;const f=a.graph;let g=a.subject;for(;g&&!l;){const m=this.getQuads(null,null,g,null),b=this.getQuads(g,null,null,null);let w,L=null,V=null,ce=null;for(let re=0;re<b.length&&!l;re++)w=b[re],w.graph.equals(f)?u?l=r(g,"has non-list arcs out"):w.predicate.value===_o.rdf.first?L?l=r(g,"has multiple rdf:first arcs"):o.push(L=w):w.predicate.value===_o.rdf.rest?V?l=r(g,"has multiple rdf:rest arcs"):o.push(V=w):m.length?l=r(g,"can't be subject and object"):(u=w,h="subject"):l=r(g,"not confined to single graph");for(let re=0;re<m.length&&!l;++re)w=m[re],u?l=r(g,"can't have coreferences"):w.predicate.value===_o.rdf.rest?ce?l=r(g,"has incoming rdf:rest arcs"):ce=w:(u=w,h="object");L?c.unshift(L.object):l=r(g,"has no list head"),g=ce&&ce.subject}l?e=!1:u&&(i[u[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}class oL extends nb.Readable{constructor(e,t,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:s}=this,o=this._filtered=new eS({factory:e._factory});for(const a of e.readQuads(s,r,i,t))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new oL(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var v2e=S(7661),b2e=S(2821);function Sr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function R$(n){const e=n.length;let t=0;return new nb.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function aL(n,e){return cL.apply(this,arguments)}function cL(){return cL=kt(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield(0,v2e.toRDF)(t);e.import(R$(i))}return e}),cL.apply(this,arguments)}function lL(){return lL=kt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new b2e.RdfXmlParser({dataFactory:mr,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(t),i.end(),r}return e}),lL.apply(this,arguments)}function uL(){return uL=kt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new Q1({format:"n3"}).parse(t);e.import(R$(i))}return e}),uL.apply(this,arguments)}function dL(n,e){const t=JSON.parse(n),i=new eS;return Object.assign(i,t,{_factory:e??mr}),i}const tS="Unknown Euler angle order",Wm=.99999;var Ps=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(Ps||{});class Kr extends IE{static get ZYX(){return Ps.ZYX}static get YXZ(){return Ps.YXZ}static get XZY(){return Ps.XZY}static get ZXY(){return Ps.ZXY}static get YZX(){return Ps.YZX}static get XYZ(){return Ps.XYZ}static get RollPitchYaw(){return Ps.ZYX}static get DefaultOrder(){return Ps.ZYX}static get RotationOrders(){return Ps}static rotationOrder(e){return Ps[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=Kr.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(t*i+s*r);let l=-2*(t*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+s*t),-2*(t*t+o)+1),g=Math.asin(l),m=Math.atan2(c,a);return this.set(f,g,m,Kr.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function A2e(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=Zn(e)}get y(){return this[1]}set y(e){this[1]=Zn(e)}get z(){return this[2]}set z(e){this[2]=Zn(e)}get alpha(){return this[0]}set alpha(e){this[0]=Zn(e)}get beta(){return this[1]}set beta(e){this[1]=Zn(e)}get gamma(){return this[2]}set gamma(e){this[2]=Zn(e)}get phi(){return this[0]}set phi(e){this[0]=Zn(e)}get theta(){return this[1]}set theta(e){this[1]=Zn(e)}get psi(){return this[2]}set psi(e){this[2]=Zn(e)}get roll(){return this[0]}set roll(e){this[0]=Zn(e)}get pitch(){return this[1]}set pitch(e){this[1]=Zn(e)}get yaw(){return this[2]}set yaw(e){this[2]=Zn(e)}get order(){return this[3]}set order(e){this[3]=function S2e(n){if(n<0&&n>=6)throw new Error(tS);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Ps.ZYX)}fromRotationMatrix(e,t=Kr.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new DO;switch(this[4]){case Ps.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ps.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ps.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ps.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ps.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ps.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(tS)}}_fromRotationMatrix(e,t=Kr.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],u=e[6],h=e[10];switch(t=t||this[3]){case Kr.XYZ:this[1]=Math.asin(Ir(s,-1,1)),Math.abs(s)<Wm?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,a),this[2]=0);break;case Kr.YXZ:this[0]=Math.asin(-Ir(c,-1,1)),Math.abs(c)<Wm?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case Kr.ZXY:this[0]=Math.asin(Ir(u,-1,1)),Math.abs(u)<Wm?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case Kr.ZYX:this[1]=Math.asin(-Ir(l,-1,1)),Math.abs(l)<Wm?(this[0]=Math.atan2(u,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case Kr.YZX:this[2]=Math.asin(Ir(o,-1,1)),Math.abs(o)<Wm?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case Kr.XZY:this[2]=Math.asin(-Ir(r,-1,1)),Math.abs(r)<Wm?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(tS)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case Kr.XYZ:{const f=o*c,g=o*h,m=l*c,b=l*h;t[0]=a*c,t[4]=-a*h,t[8]=u,t[1]=g+m*u,t[5]=f-b*u,t[9]=-l*a,t[2]=b-f*u,t[6]=m+g*u,t[10]=o*a;break}case Kr.YXZ:{const f=a*c,g=a*h,m=u*c,b=u*h;t[0]=f+b*l,t[4]=m*l-g,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-l,t[2]=g*l-m,t[6]=b+f*l,t[10]=o*a;break}case Kr.ZXY:{const f=a*c,g=a*h,m=u*c,b=u*h;t[0]=f-b*l,t[4]=-o*h,t[8]=m+g*l,t[1]=g+m*l,t[5]=o*c,t[9]=b-f*l,t[2]=-o*u,t[6]=l,t[10]=o*a;break}case Kr.ZYX:{const f=o*c,g=o*h,m=l*c,b=l*h;t[0]=a*c,t[4]=m*u-g,t[8]=f*u+b,t[1]=a*h,t[5]=b*u+f,t[9]=g*u-m,t[2]=-u,t[6]=l*a,t[10]=o*a;break}case Kr.YZX:{const f=o*a,g=o*u,m=l*a,b=l*u;t[0]=a*c,t[4]=b-f*h,t[8]=m*h+g,t[1]=h,t[5]=o*c,t[9]=-l*c,t[2]=-u*c,t[6]=g*h+m,t[10]=f-b*h;break}case Kr.XZY:{const f=o*a,g=o*u,m=l*a,b=l*u;t[0]=a*c,t[4]=-h,t[8]=u*c,t[1]=f*h+b,t[5]=o*c,t[9]=g*h-m,t[2]=m*h-g,t[6]=l*c,t[10]=b*h+f;break}default:throw new Error(tS)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new DO(e*r*s-t*i*o,e*i*o+t*r*s,t*i*s-e*r*o,e*i*s+t*r*o)}}var O$=S(4938),C2e=S.n(O$),T2e=S(7991),M2e=S.n(T2e),qi=S(6990);const P$={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let nS;const I2e=new Uint8Array(16);function D2e(){if(!nS&&(nS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nS(I2e)}const Ys=[];for(let n=0;n<256;++n)Ys.push((n+256).toString(16).slice(1));const O2e=function R2e(n,e,t){if(P$.randomUUID&&!e&&!n)return P$.randomUUID();const i=(n=n||{}).random||(n.rng||D2e)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function N$(n,e=0){return Ys[n[e+0]]+Ys[n[e+1]]+Ys[n[e+2]]+Ys[n[e+3]]+"-"+Ys[n[e+4]]+Ys[n[e+5]]+"-"+Ys[n[e+6]]+Ys[n[e+7]]+"-"+Ys[n[e+8]]+Ys[n[e+9]]+"-"+Ys[n[e+10]]+Ys[n[e+11]]+Ys[n[e+12]]+Ys[n[e+13]]+Ys[n[e+14]]+Ys[n[e+15]]}(i)};var iS=S(9689);function*rS(n,e,t){for(const[i,r]of Object.entries(t))for(const s of Sr(n,e,i,null,null)){const o="Literal"===s.object.termType?(0,iS.fromRdf)(s.object):s.object.id;yield[r,o]}}function fp(n,e,t,i){const r={"@id":e,"@type":t};for(const[s,o]of Object.entries(i))for(const a of Sr(n,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,iS.fromRdf)(a.object):a.object.id;r[o]=c}return r}const ki=tL({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},mr),L$={x:ki("rdf"),type:ki("rdf")("type")},P2e_label=(ki("rdfs"),ki("rdfs")("label")),Kt=(ki("rdfs")("comment"),ki("rdfs")("isDefinedBy"),ki("rdfs")("seeAlso"),ki("ccf")),Wn={id:ki("ccf")("has_registration_location"),label:ki("rdfs")("label"),description:ki("rdfs")("comment"),link:Kt("url"),sex:Kt("sex"),age:Kt("age"),bmi:Kt("bmi"),Male:mr.literal("Male"),Female:mr.literal("Female"),consortiumName:Kt("consortium_name"),providerName:Kt("tissue_provider_name"),providerUUID:Kt("tissue_provider_uuid"),donor:Kt("comes_from"),sections:Kt("subdivided_into_sections"),datasets:Kt("generates_dataset"),sampleType:Kt("sample_type"),TissueBlock:mr.literal("Tissue Block"),TissueSection:mr.literal("Tissue Section"),NonStandard:mr.literal("Non-standard"),sectionCount:Kt("section_count"),sectionSize:Kt("section_size"),sectionUnits:Kt("section_size_unit"),sectionNumber:Kt("section_number"),spatialEntity:Kt("has_registration_location"),ontologyTerms:Kt("has_ontology_term"),cellTypeTerms:Kt("has_cell_type_term"),biomarkerTerms:Kt("has_biomarker_term"),technology:Kt("technology"),thumbnail:Kt("thumbnail")},ei={x:Kt,base:ki("base"),ontologyNode:{label:Kt("ccf_pref_label"),parent:Kt("ccf_part_of"),children:Kt("ccf_part_of"),rui_rank:Kt("rui_rank"),synonymLabels:mr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Kt("ccf_part_of"),ct_is_a:Kt("ccf_ct_isa"),located_in:Kt("ccf_located_in"),characterizes:Kt("ccf_characterizes"),bm_located_in:Kt("ccf_bm_located_in")},spatial:{Female:ki("base")("VHFemale"),Male:ki("base")("VHMale"),BothSexes:ki("base")("VHBothSexes"),FemaleOrgans:ki("base")("VHFemaleOrgans"),MaleOrgans:ki("base")("VHMaleOrgans")},SpatialObjectReference:Kt("spatial_object_reference"),SpatialEntity:Kt("spatial_entity"),SpatialPlacement:Kt("spatial_placement"),spatialObjectReference:{file:Kt("file_url"),file_format:Kt("file_format"),file_subpath:Kt("file_subpath")},extractionSet:{label:ki("rdfs")("label"),rui_rank:Kt("rui_rank")},spatialEntity:{label:ki("rdfs")("label"),description:ki("rdfs")("comment"),creator:ki("dcterms")("creator"),creator_first_name:Kt("creator_first_name"),creator_last_name:Kt("creator_last_name"),creator_middle_name:Kt("creator_middle_name"),creator_orcid:Kt("creator_orcid"),creation_date:ki("dcterms")("created"),updated_date:Kt("updated_date"),ccf_annotations:Kt("collides_with"),representation_of:Kt("representation_of"),reference_organ:Kt("has_reference_organ"),extraction_set_for:Kt("extraction_set_for"),extraction_set:Kt("has_extraction_set"),sex:Kt("organ_owner_sex"),side:Kt("organ_side"),rui_rank:Kt("rui_rank"),slice_thickness:Kt("slice_thickness"),slice_count:Kt("slice_count"),x_dimension:Kt("x_dimension"),y_dimension:Kt("y_dimension"),z_dimension:Kt("z_dimension"),dimension_units:Kt("dimension_unit"),object:Kt("has_object_reference")},spatialPlacement:{source:Kt("placement_for"),target:Kt("placement_relative_to"),placement_date:ki("dcterms")("created"),x_scaling:Kt("x_scaling"),y_scaling:Kt("y_scaling"),z_scaling:Kt("z_scaling"),scaling_units:Kt("scaling_unit"),x_rotation:Kt("x_rotation"),y_rotation:Kt("y_rotation"),z_rotation:Kt("z_rotation"),w_rotation:Kt("theta_rotation"),rotation_order:Kt("rotation_order"),rotation_units:Kt("rotation_unit"),x_translation:Kt("x_translation"),y_translation:Kt("y_translation"),z_translation:Kt("z_translation"),translation_units:Kt("translation_unit")}},$n={x:ki("uberon"),body:ki("uberon")("0013702")},N2e={x:ki("cl"),cell:ki("cl")("0000000")},ib={x:ki("fma")},qc=(ki("lmha"),{body:$n.body,cell:N2e.cell,respiratory_system:$n.x("0001004"),colon:$n.x("0001155"),left_lung:$n.x("0002168"),right_lung:$n.x("0002167"),left_bronchus:$n.x("0002178"),right_bronchus:$n.x("0002177"),kidney:$n.x("0002113"),ureter:$n.x("0000056"),eye:$n.x("0000970"),fallopian_tube:$n.x("0003889"),knee:$n.x("0001465"),ovary:$n.x("0000992"),trachea:$n.x("0003126"),aorta:$n.x("0000947"),blood:$n.x("0000178"),bone_marrow:$n.x("0002371"),male_reproductive_system:$n.x("0000079"),lymph_node:$n.x("0000029"),blood_vasculature:$n.x("0004537"),brain:$n.x("0000955"),eye_left:$n.x("0004548"),eye_right:ib.x("54449"),fallopian_tube_left:$n.x("0001303"),fallopian_tube_right:$n.x("0001302"),heart:$n.x("0000948"),kidney_left:$n.x("0004538"),kidney_right:$n.x("0004539"),knee_left:ib.x("24978"),knee_right:ib.x("24977"),large_intestine:$n.x("0000059"),liver:$n.x("0002107"),lungs:$n.x("0002048"),mesenteric_lymph_node:$n.x("0002509"),ovary_left:ib.x("7214"),ovary_right:ib.x("7213"),pancreas:$n.x("0001264"),pelvis:$n.x("0001270"),prostate_gland:$n.x("0002367"),skin:$n.x("0002097"),small_intestine:$n.x("0002108"),spleen:$n.x("0002106"),thymus:$n.x("0002370"),ureter_left:$n.x("0001223"),ureter_right:$n.x("0001222"),urinary_bladder:$n.x("0001255"),uterus:$n.x("0000995")});function hL(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const sS={spatialObjectReference:hL(ei.spatialObjectReference),spatialEntity:hL(ei.spatialEntity),spatialPlacement:hL(ei.spatialPlacement)};function F$(n,e){const t=fp(n,e,"ExtractionSet",sS.spatialEntity);return t.extractionSites=(0,qi.sortBy)(n.getSubjects(ei.spatialEntity.extraction_set,e,null).map(i=>pp(n,i.id)),["rui_rank"]),t}function pp(n,e){const t=fp(n,e,"SpatialEntity",sS.spatialEntity);return t.object&&(t.object=function L2e(n,e){return fp(n,e,"SpatialObjectReference",sS.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,ei.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,Wn.spatialEntity,e,null),t}function j2e(n,e){const t=fp(n,e,"SpatialPlacement",sS.spatialPlacement);return t.source&&(t.source=pp(n,t.source)),t.target&&(t.target=pp(n,t.target)),t}const V2e=(C2e()||O$).DirectedGraph;function B$(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(bV),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}class k${constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new V2e;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},L$.type,ei.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},L$.type,ei.SpatialEntity,null);const t={};for(const i of Sr(e,null,ei.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of Sr(e,null,ei.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new Pn(Pn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new Pn(Pn.IDENTITY),s=M2e()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&B$(r,j2e(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,qi.get)(e,"placement[0]",(0,qi.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,t),s&&(s=B$(s,r))):i&&(s=this.getTransformationMatrix(i,t)),s){const o=(new Kr).fromRotationMatrix(s,Kr.XYZ),a=s.getTranslation().map(u=>1e3*u),c=o.toVector3().map(vse),l=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${O2e()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class j${constructor(e){this.db=e}getSpatialEntity(e){return pp(this.db.store,e)}getExtractionSets(e){return function F2e(n,e){return(0,qi.sortBy)(n.getSubjects(ei.spatialEntity.extraction_set_for,e,null).map(t=>F$(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return F$(this.db.store,e)}getAnatomicalStructures(e){return function B2e(n,e){return(0,qi.sortBy)(n.getSubjects(ei.spatialEntity.reference_organ,e,null).map(t=>pp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function k2e(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(pp(n,t.subject.id))},null,ei.spatialEntity.reference_organ,null,null),(0,qi.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=ei.spatial.Male.id;break;case"Female":t=ei.spatial.Female.id;break;default:t=ei.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ei.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ei.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ei.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ei.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ei.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===t?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(o){if(r)o=new Pn(Pn.IDENTITY).rotateX(bV(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function rb(n,e,t){const i=new Set;for(const r of e)for(const s of Sr(n,r,t,null,null))i.add(s.object.id);return i}const $m=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),br=(Math,Math,{});function q2e(n,{precision:e=br.precision||4}={}){return n=function Y2e(n){return Math.round(n/br.EPSILON)*br.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Eh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function sb(n,e,t){const i=br.EPSILON;t&&(br.EPSILON=t);try{if(n===e)return!0;if(Eh(n)&&Eh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!sb(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=br.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{br.EPSILON=i}}function Xc(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}br.EPSILON=1e-12,br.debug=!1,br.precision=4,br.printTypes=!1,br.printDegrees=!1,br.printRowMajor=!0;class fL extends(function ePe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Xc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Eh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(br)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+q2e(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!sb(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(br.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function qs(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function U$(n,e,t=""){if(br.debug&&!function tPe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const V$={};function pL(n,e){V$[n]||(V$[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class nPe extends fL{get ELEMENTS(){return Xc(!1),0}copy(e){return Xc(!1),this}get x(){return this[0]}set x(e){this[0]=qs(e)}get y(){return this[1]}set y(e){this[1]=qs(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return qs(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return qs(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Xc(e>=0&&e<this.ELEMENTS,"index is out of range"),qs(this[e])}setComponent(e,t){return Xc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var la=typeof Float32Array<"u"?Float32Array:Array;function H$(){var n=new la(3);return la!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function G$(n,e,t){var i=new la(3);return i[0]=n,i[1]=e,i[2]=t,i}function z$(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function oS(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=r*c-s*a,n[1]=s*o-i*c,n[2]=i*a-r*o,n}function W$(n,e,t){var i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});H$();const gL=[0,0,0],Y$={};class En extends nPe{static get ZERO(){return Y$.ZERO=Y$.ZERO||Object.freeze(new En(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Eh(e)?this.copy(e):(br.debug&&(qs(e),qs(t),qs(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return br.debug&&(qs(e.x),qs(e.y),qs(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=qs(e)}angle(e){return function dPe(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&z$(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return oS(this,this,e),this.check()}rotateX({radians:e,origin:t=gL}){return function cPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=gL}){return function lPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=gL}){return function uPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function oPe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o}(this,this,e),this.check()}transformAsVector(e){return function fPe(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return W$(this,this,e),this.check()}transformByMatrix2(e){return function pPe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function aPe(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,b=i*h-r*u,w=2*t[3];h*=w,f*=w,m*=2,b*=2,n[0]=a+(u*=w)+(g*=2),n[1]=c+h+m,n[2]=l+f+b}(this,this,e),this.check()}}new En,new En;const ob=new En,J$=new En;class mL{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new En,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=ob.from(t),this.center=(new En).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new mL(this.center,this.radius)}union(e){const t=this.center,i=this.radius,s=e.radius,o=ob.copy(e.center).subtract(t),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return J$.copy(o).scale((-i+c)/a).add(t),this.center.copy(J$),this.radius=c,this}expand(e){const t=(e=ob.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function K$(n,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(s,o,a),n[2]=Math.hypot(c,l,u),n}(ob,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=ob.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?$m.OUTSIDE:s<i?$m.INTERSECTING:$m.INSIDE}}class vPe extends fL{get ELEMENTS(){return Xc(!1),0}get RANK(){return Xc(!1),0}toString(){let e="[";if(br.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=qs(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function Z$(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=t[0],g=t[1],m=t[2],b=t[3],w=t[4],L=t[5],V=t[6],ce=t[7],re=t[8];return n[0]=f*i+g*o+m*l,n[1]=f*r+g*a+m*u,n[2]=f*s+g*c+m*h,n[3]=b*i+w*o+L*l,n[4]=b*r+w*a+L*u,n[5]=b*s+w*c+L*h,n[6]=V*i+ce*o+re*l,n[7]=V*r+ce*a+re*u,n[8]=V*s+ce*c+re*h,n}function Q$(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function TPe(){var n=new la(2);la!=Float32Array&&(n[0]=0,n[1]=0)}();const eY=Object.freeze([1,0,0,0,1,0,0,0,1]),IPe=Object.freeze([0,0,0,0,0,0,0,0,0]),DPe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),qm={};class jo extends vPe{static get IDENTITY(){return qm.IDENTITY=qm.IDENTITY||Object.freeze(new jo(eY)),qm.IDENTITY}static get ZERO(){return qm.ZERO=qm.ZERO||Object.freeze(new jo(IPe)),qm.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return DPe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,s,o,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function EPe(n){var r=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*s-o*c)+n[1]*(-l*r+o*a)+n[2]*(c*r-s*a)}(this)}identity(){return this.copy(eY)}fromQuaternion(e){return function CPe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,c=r+r,l=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,b=s*o,w=s*a,L=s*c;n[0]=1-h-m,n[3]=u-L,n[6]=f+w,n[1]=u+L,n[4]=1-l-m,n[7]=g-b,n[2]=f-w,n[5]=g+b,n[8]=1-l-h}(this,e),this.check()}transpose(){return function wPe(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function xPe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=-u*s+a*c,g=l*s-o*c,m=t*h+i*f+r*g;m&&(n[0]=h*(m=1/m),n[1]=(-u*i+r*l)*m,n[2]=(a*i-r*o)*m,n[3]=f*m,n[4]=(u*t-r*c)*m,n[5]=(-a*t+r*s)*m,n[6]=g*m,n[7]=(-l*t+i*c)*m,n[8]=(o*t-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return Z$(this,e,this),this.check()}multiplyRight(e){return Z$(this,this,e),this.check()}rotate(e){return function SPe(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=Math.sin(t),g=Math.cos(t);n[0]=g*i+f*o,n[1]=g*r+f*a,n[2]=g*s+f*c,n[3]=g*o-f*i,n[4]=g*a-f*r,n[5]=g*c-f*s,n[6]=l,n[7]=u,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?Q$(this,this,e):Q$(this,this,[e,e,e]),this.check()}translate(e){return function APe(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=t[0],g=t[1];n[0]=i,n[1]=r,n[2]=s,n[3]=o,n[4]=a,n[5]=c,n[6]=f*i+g*o+l,n[7]=f*r+g*a+u,n[8]=f*s+g*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function MPe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=W$(t||[-0,-0,-0],e,this);break;case 4:t=function gPe(n,e,t){const i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return U$(t,e.length),t}transformVector(e,t){return pL("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return pL("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return pL("Matrix3.transformVector"),this.transform(e,t)}}function tY(){var n=new la(4);return la!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function nY(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function iY(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+o*a+r*l-s*c,n[1]=r*u+o*c+s*a-i*l,n[2]=s*u+o*l+i*c-r*a,n[3]=o*u-i*a-r*c-s*l,n}!function RPe(){var n=new la(4);la!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var sNe=function(){var n=H$(),e=G$(1,0,0),t=G$(0,1,0);return function(i,r,s){var o=z$(r,s);return o<-.999999?(oS(n,e,r),function rPe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&oS(n,t,r),function sPe(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),nY(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(oS(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function UPe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();tY(),tY(),function bPe(){var n=new la(9);la!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const oNe=[0,0,0,1];class cY extends fL{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function rY(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}(this,e),this.check()}identity(){return function $Pe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return nY(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=qs(e)}get y(){return this[1]}set y(e){this[1]=qs(e)}get z(){return this[2]}set z(e){this[2]=qs(e)}get w(){return this[3]}set w(e){this[3]=qs(e)}len(){return function kPe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function jPe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function VPe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return sNe(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function FPe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function KPe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function eNe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function QPe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return function HPe(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return Xc(!t),iY(this,this,e),this.check()}multiplyLeft(e,t){return Xc(!t),iY(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function YPe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+o*a,n[1]=r*c+s*a,n[2]=s*c-r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function qPe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-s*a,n[1]=r*c+o*a,n[2]=s*c+i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function XPe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return function BPe(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=oNe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function aS(n,e,t,i){var f,g,m,b,w,r=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],h=t[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),b=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(b=1-i,w=i),n[0]=b*r+w*c,n[1]=b*s+w*l,n[2]=b*o+w*u,n[3]=b*a+w*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function GPe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;n[0]=u*l+g*-o+h*-c-f*-a,n[1]=h*l+g*-a+f*-o-u*-c,n[2]=f*l+g*-c+u*-a-h*-o,n[3]=e[3]}(t,e,this),U$(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const aNe=new En,cNe=new En,cS=new En,lS=new En,uS=new En,lNe=new En,uNe=new En;class _L{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new En).from(e),this.halfAxes=new jo(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new En(e).len(),new En(t).len(),new En(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new En(e).normalize(),s=new En(t).normalize(),o=new En(i).normalize();return(new cY).fromMatrix3(new jo([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new cY(i),s=(new jo).fromQuaternion(r);return s[0]=s[0]*t[0],s[1]=s[1]*t[0],s[2]=s[2]*t[0],s[3]=s[3]*t[1],s[4]=s[4]*t[1],s[5]=s[5]*t[1],s[6]=s[6]*t[2],s[7]=s[7]*t[2],s[8]=s[8]*t[2],this.center=(new En).from(e),this.halfAxes=s,this}clone(){return new _L(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new mL){const t=this.halfAxes,i=t.getColumn(0,cS),r=t.getColumn(1,lS),s=t.getColumn(2,uS),o=aNe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?$m.OUTSIDE:l>=c?$m.INSIDE:$m.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=cNe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,cS),s=i.getColumn(1,lS),o=i.getColumn(2,uS),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(t.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(t.dot(s))-c,h>0&&(u+=h*h),h=Math.abs(t.dot(o))-l,h>0&&(u+=h*h),u}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,cS),l=a.getColumn(1,lS),u=a.getColumn(2,uS),h=lNe.copy(c).add(l).add(u).add(o),f=uNe.copy(h).subtract(e);let g=t.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).add(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,cS);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,lS);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,uS);return r.transformAsPoint(e),this.halfAxes=new jo([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const lY=new En,uY=new En;class yL{constructor(e=[0,0,1],t=0){this.normal=new En,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Xc(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=lY.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),Xc(sb(this.normal.len(),1)),this.distance=r,this}clone(e){return new yL(this.normal,this.distance)}equals(e){return sb(this.distance,e.distance)&&sb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=uY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=lY.from(e);const i=this.getPointDistance(e),r=uY.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new En([1,0,0]),new En([0,1,0]),new En([0,0,1]),new En,new En,new yL(new En(1,0,0),0),new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,Math,new jo,new jo,new jo,new jo,new jo,new En,new En,new En,new En,new En,new jo,new jo,new jo;const UNe={[ei.spatialEntity.x_dimension.id]:"x",[ei.spatialEntity.y_dimension.id]:"y",[ei.spatialEntity.z_dimension.id]:"z"};function HNe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let s;if(r){const o=r.getTranslation(),a=function VNe(n,e){const t=fp(n,e,"Dimensions",UNe);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new Kr).fromRotationMatrix(r,Kr.XYZ).toQuaternion().normalize().calculateW();s=(new _L).fromCenterHalfSizeQuaternion(o,a,c)}return s}function GNe(n,e,t,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,u=a/1e3*(a/1e3);for(const h of t){const f=HNe(n,e,h,c);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&l.add(h)}return l}function cb(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Sr(n,a,Wn.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=t(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function hS(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Sr(n,a,Wn.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=t(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function Km(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function AL(n,e,t){const i=new Set;for(const r of t){const s=mr.namedNode(r);n.forSubjects(Km(e,i),ei.spatialEntity.ccf_annotations,s,null)}return i}function SL(n,e){const t=function iLe(n,e){const t=new Map;for(const i of n)for(const r of Sr(e,i,Wn.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id)?.add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const s=t.get(r);for(const o of Sr(e,r,ei.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s?.forEach(c=>a?.add(c))}else i.set(o.object.id,new Set(s))}return i}function aLe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ei.ontologyNode.label.id]:"label",[t]:"parent",[ei.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of rS(n,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=n.getSubjects(t,e,null).map(s=>s.id),i}function pY(n,e,t,i){const r={root:e,nodes:{}},s=new Set;for(const a of Sr(n,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=aLe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const o=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,gY(r),r}function gY(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)gY(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const mY=(0,qi.memoize)(function cLe(n){const e=pY(n,qc.body.id,"body",ei.asctb.part_of.id);return e.nodes[qc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function CL(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const fS={[Wn.label.id]:"label",[Wn.description.id]:"description",[Wn.link.id]:"link"},dLe={...fS,[Wn.providerName.id]:"providerName"},hLe={...fS,[Wn.technology.id]:"technology",[Wn.thumbnail.id]:"thumbnail"},fLe={...fS,[Wn.sampleType.id]:"sampleType",[Wn.sectionNumber.id]:"sectionNumber",[Wn.datasets.id]:"datasets"},pLe={...fS,[Wn.sampleType.id]:"sampleType",[Wn.sectionCount.id]:"sectionCount",[Wn.sectionSize.id]:"sectionSize",[Wn.sectionUnits.id]:"sectionUnits",[Wn.donor.id]:"donor",[Wn.spatialEntity.id]:"spatialEntityId",[Wn.sections.id]:"sections",[Wn.datasets.id]:"datasets"};function gLe(n,e){return fp(n,e,"Donor",dLe)}function _Y(n,e){return fp(n,e,"Dataset",hLe)}function mLe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of rS(n,e,fLe))if("datasets"===i){const s=_Y(n,r);t[i].push(s)}else t[i]=r;return t}class yLe{constructor(e){this.database=e,this.status="Loading",this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;return kt(function*(){e.status="Loading",e.message="Loading database";const t=Date.now();return e.database.connect().then(function(){var i=kt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{e.status="Error",e.message=i?.message??"Unknown error while loading database",e.timestamp=(new Date).toISOString()}).finally(()=>{e.loadTime=Date.now()-t})})()}}function TL(){return TL=kt(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),TL.apply(this,arguments)}const ML="http://purl.org/ccf/",ELe={"@context":{"@base":ML,"@vocab":ML,ccf:ML,rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function pS(n,e=ELe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const yY={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},ALe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},vY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),SLe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Jm={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},IL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class MLe{constructor(e,t){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=ALe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=yY}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const o=this.getRuiLocation(e,this.donor);o?this.rui_location=o:this.bad=!0,Jm[e.group_uuid]||(Jm[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=Jm[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const u={},h=[];this.sections=h;const f=[];this.datasets=f;for(const L of r.filter(V=>"Sample"===V.entity_type)){const V=this.getSection(L,e);u[L.submission_id]=V,h.push(V),V.section_number=V.section_number??h.length}for(const L of r)if("Dataset"===L.entity_type){const V=this.getDataset(L,t),ce=(0,qi.get)(L,["ingest_metadata","metadata","tissue_id"]);u[ce]?u[ce].datasets?.push(V):f.push(V)}const g=o??{},m=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const b=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=b;const w=g.dimension_units||"millimeter";this.section_units=w,this.description=`${m}, ${b} ${w}, ${this.section_count} Sections`,h.forEach((L,V)=>{L.description=`${g.x_dimension} x ${g.y_dimension} x ${b} ${w}, ${b} ${w}, ${L.description}`,L.section_number=V+1})}getSection(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${Jm[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=Jm[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,o=e.dataset_type??"",a=o.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":o.split(/ \[/)[0],l=this.getDatasetThumbnail(e,t)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${s}, ${r}`,description:`Dataset Type: ${o}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,t){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(t?`?token=${t}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,qi.get)(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>vY.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(t?`?token=${t}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(vY.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=SLe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const t=(e.description||"").toLowerCase();let i;t.includes("female")?i="Female":t.includes("male")&&(i="Male");const r=t.match(/age ([0-9]+)/)??t.match(/ ([0-9]+) years/);let s,o,a;r&&(s=(0,qi.toNumber)(r[1]));const c=(0,qi.get)(e,"mapped_metadata",(0,qi.get)(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!s&&c.age_value?.length>0&&(s=c.age_value[0]),!o&&c.body_mass_index_value?.length>0&&(o=c.body_mass_index_value[0]);for(const g of(0,qi.get)(e,"metadata.organ_donor_data",(0,qi.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===g.preferred_term||"Female"===g.preferred_term?i="Female":"Masculine gender"===g.preferred_term||"Male"===g.preferred_term?i="Male":"Current chronological age"===g.preferred_term||"Age"===g.preferred_term?s=(0,qi.toNumber)(g.data_value):"Body mass index"===g.preferred_term?o=(0,qi.toNumber)(g.data_value):"Race"===g.grouping_concept_preferred_term&&(a=g.preferred_term);let l="";i&&s?(l+=`${i}, Age ${s}`,o&&(l+=`, BMI ${o.toFixed(1)}`)):i&&(l=i);const u=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Jm[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${u}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:s,sex:i,bmi:o,race:a,consortium_name:this.portal===yY?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=(0,qi.get)(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,qi.set)(i,["placement","target"],s.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&(0,qi.set)(i,["placement","target"],"Male"===t.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,qi.omit)({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const ILe=1e4,DLe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],RLe={exists:{field:"rui_location"}};function bY(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??RLe,_source:{includes:DLe}})}function DL(n,e){return RL.apply(this,arguments)}function RL(){return RL=kt(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),RL.apply(this,arguments)}function OL(){return OL=kt(function*(n,e,t){const i=ILe,r=function OLe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=bY(0,i,t),o=yield DL(n,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push(DL(n,{method:"POST",headers:r,body:bY(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const u=l.map(h=>h?.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...u)}}}),OL.apply(this,arguments)}function PL(){return PL=kt(function*(n,e,t,i,r="",s=""){let o;if("static"===e?o=yield DL(n):"search-api"===e&&(o=yield function PLe(n,e,t){return OL.apply(this,arguments)}(n,i,t)),o)return function CLe(n,e,t=!1){const r={},s=(0,qi.get)(n,"hits.hits",[]).map(a=>(0,qi.get)(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new MLe(a,e).toJsonLd());for(const a of s){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const o=Object.values(r);return t&&(function TLe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,t++)}i.samples=r.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(o),console.log(o.map(a=>({"@context":IL,...a})))),pS(JSON.stringify({"@context":IL,"@graph":o}),IL)}(o,i);console.warn(`Unable to load ${n}`)}),PL.apply(this,arguments)}const{delMany:LLe,get:wY,setMany:FLe}=N,xY={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class BLe{constructor(e=xY){this.options=e,this.store=new eS(void 0,{factory:mr}),this.graph=new k$(this),this.scene=new j$(this)}connect(e,t=!1){var i=this;return kt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return kt(function*(){const t=(new Date).getTime(),i=qOe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield wY(r).catch(()=>{});let a;o&&t-new Date(+o).getTime()>36e5?yield LLe([s,r]).catch(()=>{}):a=yield wY(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),FLe([[s,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return kt(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=dL(r,mr);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=dL(s,mr))}else r?.length>0&&i.push(r);i.push(yield function wLe(){return TL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function NLe(n,e,t,i){return PL.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(s=>{if(s)return e.addDataSources([s])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return kt(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var s=kt(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=pS(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield aL(o,r)}else o.endsWith("n3")?yield function x2e(n,e){return uL.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function w2e(n,e){return lL.apply(this,arguments)}(o,r):(o=pS(o),yield aL(o,r));else o=pS(JSON.stringify(o)),yield aL(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return kt(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function xLe(n){const e=mY(n),t=new Map;for(const{subject:i,object:r}of Sr(n,null,ei.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;t.set(i.id,[...s].map(a=>mr.namedNode(a)))}for(const{object:i}of Sr(n,null,Wn.spatialEntity,null,null))for(const{subject:r}of Sr(n,null,ei.spatialPlacement.source,i,null))for(const{object:s}of Sr(n,r,ei.spatialPlacement.target,null,null))for(const o of t.get(s.id)??[])n.addQuad(mr.namedNode(i.id),ei.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function E2e(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return kt(function*(){t.store=dL(e,mr),t.graph=new k$(t),t.scene=new j$(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function WNe(n,e,t){let i=function $Ne(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),Wn.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function tLe(n,e,t=!0){const i=new Set;if(n.forSubjects(Km(e,i),Wn.spatialEntity,null,null),!t){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=cb(n,i,s=>function YNe(n,e,t){const i=new Set;return n.forSubjects(Km(e,i),Wn.sex,Wn[t],null),i}(n,s,r))}if(i.size>0&&t.consortiums?.length>0&&(i=cb(n,i,r=>function qNe(n,e,t){const i=new Set;for(const r of t){const s=mr.literal(r);n.forSubjects(Km(e,i),Wn.consortiumName,s,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=cb(n,i,r=>function XNe(n,e,t){const i=new Set;for(const r of t){const s=mr.literal(r);n.forSubjects(Km(e,i),Wn.providerName,s,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function zNe(n,e,t){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of Sr(n,c,Wn.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of Sr(n,c,Wn.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=t(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function KNe(n,e,t){const i=new Set;for(const r of t){const s=mr.literal(r);n.forSubjects(Km(e,i),Wn.technology,s,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=hS(n,i,r=>function nLe(n,e,t,i){const r=new Set;for(const s of i)GNe(n,e,t,s).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(qc.body.id)&&(i=hS(n,i,s=>AL(n,s,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(qc.cell.id)&&(i=hS(n,i,s=>function JNe(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ei.asctb.located_in,null),r===qc.cell.id&&i.add(qc.body.id);return AL(n,e,[...i])}(n,s,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=hS(n,i,s=>function ZNe(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ei.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(qc.body.id);return AL(n,e,[...i])}(n,s,r)))}if(i.size>0&&2===t.ageRange?.length&&(0,qi.isFinite)(t.ageRange[0])&&(0,qi.isFinite)(t.ageRange[1])){const r=Math.max(...t.ageRange),s=Math.min(...t.ageRange);1===s&&110===r||(i=cb(n,i,o=>function QNe(n,e,t,i){const r=new Set;for(const s of e)for(const o of Sr(n,s,Wn.age,null,null)){const a=(0,iS.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,o,s,r)))}if(i.size>0&&2===t.bmiRange?.length&&(0,qi.isFinite)(t.bmiRange[0])&&(0,qi.isFinite)(t.bmiRange[1])){const r=Math.max(...t.bmiRange),s=Math.min(...t.bmiRange);13===s&&83===r||(i=cb(n,i,o=>function eLe(n,e,t,i){const r=new Set;for(const s of e)for(const o of Sr(n,s,Wn.bmi,null,null)){const a=(0,iS.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(mr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function U2e(n,e){const t=n.getObjects(mr.namedNode(e),Wn.spatialEntity,null);if(t.length>0)return pp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return kt(function*(){return e.status||(e.status=new yLe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return kt(function*(){return function G2e(n){const e=new Set;for(const t of Sr(n,null,Wn.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return kt(function*(){return function z2e(n){const e=new Set;for(const t of Sr(n,null,Wn.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return kt(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function _Le(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of rS(n,e,pLe))if("sections"===i){const s=mLe(n,r);t[i].push(s)}else if("datasets"===i){const s=_Y(n,r);t[i].push(s)}else t[i]="donor"===i?gLe(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return kt(function*(){return function H2e(n,e){const t=rb(e,n,Wn.donor.id),i=rb(e,t,Wn.providerUUID.id),r=new Set;for(const c of n)for(const l of Sr(e,c,Wn.spatialEntity,null,null))r.add(l.subject.id);const s=rb(e,r,Wn.sections.id),o=new Set([...rb(e,r,Wn.datasets.id),...rb(e,s,Wn.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return kt(function*(){return function rLe(n,e){const t={};return SL(n,e).forEach((r,s)=>{t[s]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return kt(function*(){return function oLe(n,e){const t=SL(n,e),i=new Map;for(const s of t.keys()){const o=t.get(s);for(const a of Sr(e,null,ei.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[qc.cell.id]=t.get(qc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return kt(function*(){return function sLe(n,e){const t=SL(n,e),i=new Map;for(const s of t.keys()){const o=t.get(s);for(const a of Sr(e,null,ei.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=t.get(qc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return kt(function*(){return mY(e.store)})()}getCellTypeTreeModel(){var e=this;return kt(function*(){return function lLe(n){return pY(n,qc.cell.id,"cell",ei.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return kt(function*(){return function uLe(n){const e=ei.x("ccf_biomarker_type"),t={biomarkers:CL("biomarkers","Biomarkers","",[])};for(const i of Sr(n,null,e,null,null)){const r=i.object.value,s=i.subject.id;t[r]||(t[r]=CL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(s);const o=CL(s,"",r,[]),a={[ei.ontologyNode.label.id]:"label",[P2e_label.id]:"synonymLabels"};for(const[c,l]of rS(n,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,u)=>t[l]?.label.localeCompare(t[u]?.label));t[s]=o}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return kt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return kt(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return kt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return kt(function*(){return i.graph.getSpatialPlacement(e,t)})()}}class EY extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class GLe{constructor(){this.cancelUncompleted$=new Jt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const NL="\u0275fac",AY=Symbol("InjectorInstance"),SY=Symbol("FactoryHasBeenDecorated");function CY(n,e){const t=n[AY];return t?t.get(e):null}const $Le={cancelUncompleted:!1};function TY(n=$Le){return(e,t,i)=>{let r;const s=function zLe(n){return n?new GLe:null}(n.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=CY(this,Xu)||function VLe(){throw new EY}(),c=CY(this,_n)||function HLe(){throw new EY}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function ULe(n,e,t){return Bg(e)?function jLe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):Qf(e)?function kLe(n,e,t){return null!==t&&(e=e.pipe(Na(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,t,{set:a=>r=a,get:()=>o}),function WLe(n){if(SY in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[NL]&&function LL(n){const e=n[NL];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[AY]=at(yu),r};t&&(t.factory=i),Object.defineProperty(n,NL,{get:()=>i})}(e),n.constructor.prototype[SY]=!0}(e)}}let MY=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),IY=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),DY=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();function YLe(n,e){}class gS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let RY=(()=>{class n extends tN{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=VP(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=VP();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=VP())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(R9),at(ii,8),at(gS),at(qP),at(_n),at(T1),at(XP))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&lo(S1,7),2&i){let s;er(s=tr())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Pr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[oi,kg],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Mi(0,YLe,0,0,"ng-template",0)},dependencies:[q9,S1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class FL{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Jt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!ph(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const OY=new xt("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=Vt(Gc);return()=>n.scrollStrategies.block()}}),qLe=new xt("DialogData"),XLe=new xt("DefaultDialogConfig");let JLe=0,ZLe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt,this._afterOpenedAtThisLevel=new Jt,this._ariaHiddenElements=new Map,this.afterAllClosed=Mv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(zl(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new gS,...i}).id=i.id||"cdk-dialog-"+JLe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new FL(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){BL(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){BL(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),BL(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new iN({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:gS,useValue:r},{provide:FL,useValue:i},{provide:T1,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=RY;const c=new eN(a,r.viewContainerRef,Ji.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof ec){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new A1(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new eN(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:qLe,useValue:t.data},{provide:FL,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Cv,null,{optional:!0}))&&a.push({provide:Cv,useValue:{value:t.direction,change:an()}}),Ji.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Gc),ut(Ji),ut(XLe,8),ut(n,12),ut(C1),ut(OY))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BL(n,e){let t=n.length;for(;t--;)e(n[t])}function QLe(n,e){}class kL{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const jL="mdc-dialog--open",PY="mdc-dialog--opening",NY="mdc-dialog--closing";let LY=(()=>{class n extends RY{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._animationMode=l,this._animationStateChanged=new vn,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?BY(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?BY(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(FY,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(PY,jL)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(jL),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(jL),this._animationsEnabled?(this._hostElement.style.setProperty(FY,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(NY)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(PY,NY)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(R9),at(ii,8),at(kL),at(qP),at(_n),at(T1),at(Cc,8),at(XP))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(wf("id",r._config.id),Pr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Ar("_mat-animation-noopable",!r._animationsEnabled))},standalone:!0,features:[oi,kg],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Fn(0,"div",0)(1,"div",1),Mi(2,QLe,0,0,"ng-template",2),Bn()())},dependencies:[q9,S1],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();const FY="--mat-dialog-transition-duration";function BY(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?$P(n.substring(0,n.length-2)):n.endsWith("s")?1e3*$P(n.substring(0,n.length-1)):"0"===n?0:null}class mS{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Jt,this._beforeClosed=new Jt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(mi(r=>"opened"===r.state),yi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(mi(r=>"closed"===r.state),yi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Fc(this.backdropClick(),this.keydownEvents().pipe(mi(r=>27===r.keyCode&&!this.disableClose&&!ph(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function kY(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(mi(t=>"closing"===t.state),yi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const jY=new xt("MatMdcDialogData"),nFe=new xt("mat-mdc-dialog-default-options"),UY=new xt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=Vt(Gc);return()=>n.scrollStrategies.block()}});let rFe=0,_S=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,a,c,l){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt,this._afterOpenedAtThisLevel=new Jt,this.dialogConfigClass=kL,this.afterAllClosed=Mv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(zl(void 0))),this._dialog=i.get(ZLe),this._dialogRefConstructor=mS,this._dialogContainerType=LY,this._dialogDataToken=jY}open(t,i){let r;(i={...this._defaultOptions||new kL,...i}).id=i.id||"mat-mdc-dialog-"+rFe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:gS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Gc),ut(Ji),ut(If,8),ut(nFe,8),ut(UY),ut(n,12),ut(C1),ut(Cc,8))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sFe=0,UL=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+sFe++}ngOnInit(){this._dialogRef||(this._dialogRef=function VY(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(at(mS,8),at(ui),at(_S))};static#t=this.\u0275dir=$t({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&wf("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0})}return n})(),VL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return n})();let GY=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Ni({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(ut(wh))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cFe=["*"];let yS;function ub(n){return function lFe(){if(void 0===yS&&(yS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(yS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return yS}()?.createHTML(n)||n}function zY(n){return Error(`Unable to find icon with the name "${n}"`)}function WY(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function $Y(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class gp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let vS=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new gp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(bs.HTML,r);if(!o)throw $Y(r);const a=ub(o);return this._addSvgIconConfig(t,i,new gp("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new gp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(bs.HTML,i);if(!s)throw $Y(i);const o=ub(s);return this._addSvgIconSetConfig(t,new gp("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(bs.RESOURCE_URL,t);if(!i)throw WY(t);const r=this._cachedIconsByUrl.get(i);return r?an(bS(r)):this._loadSvgIconFromConfig(new gp(t,null)).pipe(rr(s=>this._cachedIconsByUrl.set(i,s)),Wt(s=>bS(s)))}getNamedSvgIcon(t,i=""){const r=YY(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):uh(zY(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?an(bS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Wt(i=>bS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?an(r):dv(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Vc(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(bs.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),an(null)})))).pipe(Wt(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw zY(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(rr(i=>t.svgText=i),Wt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?an(null):this._fetchIcon(t).pipe(rr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(ub("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(ub("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function uFe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(bs.RESOURCE_URL,i);if(!o)throw WY(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Wt(l=>ub(l)),Ov(()=>this._inProgressUrlFetches.delete(o)),Vu());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(YY(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return hFe(s)?new gp(s.url,null,s.options):new gp(s,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(ut(wh,8),ut(g0),ut(ii,8),ut(Aa))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bS(n){return n.cloneNode(!0)}function YY(n,e){return n+":"+e}function hFe(n){return!(!n.url||!n.options)}const fFe=hCe(class{constructor(n){this._elementRef=n}}),pFe=new xt("MAT_ICON_DEFAULT_OPTIONS"),gFe=new xt("mat-icon-location",{providedIn:"root",factory:function mFe(){const n=Vt(ii),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),qY=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_Fe=qY.map(n=>`[${n}]`).join(", "),yFe=/^url\(['"]?#(.*?)['"]?\)$/;let XY=(()=>{class n extends fFe{get inline(){return this._inline}set inline(t){this._inline=Mm(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=mt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(_Fe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)qY.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(yFe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(yi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(vS),du("aria-hidden"),at(gFe),at(Aa),at(pFe,8))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Pr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ar("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[oi],ngContentSelectors:cFe,decls:1,vars:0,template:function(i,r){1&i&&(Ca(),Ii(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),KY=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const JY=new xt("CdkAccordion");let vFe=0,bFe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=mt.EMPTY,this.closed=new vn,this.opened=new vn,this.destroyed=new vn,this.expandedChange=new vn,this.id="cdk-accordion-child-"+vFe++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(at(JY,12),at(Io),at(KY))};static#t=this.\u0275dir=$t({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:["expanded","expanded",Po],disabled:["disabled","disabled",Po]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Ei([{provide:JY,useValue:void 0}]),gg]})}return n})();const wFe=["body"];function xFe(n,e){}const EFe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],AFe=["mat-expansion-panel-header","*","mat-action-row"];function SFe(n,e){1&n&&as(0,"span",2),2&n&&Ti("@indicatorRotate",cs()._getExpandedState())}const CFe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],TFe=["mat-panel-title","mat-panel-description","*"],ZY=new xt("MAT_ACCORDION"),QY="225ms cubic-bezier(0.4,0.0,0.2,1)",eq={indicatorRotate:Tv("indicatorRotate",[_h("collapsed, void",sa({transform:"rotate(0deg)"})),_h("expanded",sa({transform:"rotate(180deg)"})),op("expanded <=> collapsed, void => collapsed",mh(QY))]),bodyExpansion:Tv("bodyExpansion",[_h("collapsed, void",sa({height:"0px",visibility:"hidden"})),_h("expanded",sa({height:"*",visibility:""})),op("expanded <=> collapsed, void => collapsed",mh(QY))])},tq=new xt("MAT_EXPANSION_PANEL");let MFe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(at(ec),at(tq,8))};static#t=this.\u0275dir=$t({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),IFe=0;const nq=new xt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let iq=(()=>{class n extends bFe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Mm(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,a,c){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new vn,this.afterCollapse=new vn,this._inputChanges=new Jt,this._headerId="mat-expansion-panel-header-"+IFe++,this._bodyAnimationDone=new Jt,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(dh((l,u)=>l.fromState===u.fromState&&l.toState===u.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(zl(null),mi(()=>this.expanded&&!this._portal),yi(1)).subscribe(()=>{this._portal=new A1(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(at(ZY,12),at(Io),at(KY),at(co),at(ii),at(Cc,8),at(nq,8))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&tc(s,MFe,5),2&i){let o;er(o=tr())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&lo(wFe,5),2&i){let s;er(s=tr())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Ar("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Ei([{provide:ZY,useValue:void 0},{provide:tq,useExisting:n}]),oi,Vi],ngContentSelectors:AFe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Ca(EFe),Ii(0),Fn(1,"div",0,1),Gi("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),Fn(3,"div",2),Ii(4,1),Mi(5,xFe,0,0,"ng-template",3),Bn(),Ii(6,2),Bn()),2&i&&(Jn(1),Ti("@bodyExpansion",r._getExpandedState())("id",r.id),Pr("aria-labelledby",r._headerId),Jn(4),Ti("cdkPortalOutlet",r._portal))},dependencies:[S1],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[eq.bodyExpansion]},changeDetection:0})}return n})();class DFe{}const RFe=fCe(DFe);let OFe=(()=>{class n extends RFe{constructor(t,i,r,s,o,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=mt.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(mi(u=>!(!u.hideToggle&&!u.togglePosition))):Lo;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=Fc(t.opened,t.closed,l,t._inputChanges.pipe(mi(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(mi(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ph(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(at(iq,1),at(ui),at(XP),at(Io),at(nq,8),at(Cc,8),du("tabindex"))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Gi("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(Pr("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),vM("height",r._getHeaderHeight()),Ar("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[oi],ngContentSelectors:TFe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Ca(CFe),Fn(0,"span",0),Ii(1),Ii(2,1),Ii(3,2),Bn(),Mi(4,SFe,1,1,"span",1)),2&i&&(Ar("mat-content-hide-toggle",!r._showToggle()),Jn(4),Os(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[eq.indicatorRotate]},changeDetection:0})}return n})();function rq(n,e,t){return t?rq(n,e).pipe(YA(t)):new St(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=n(r);return Re(e)?()=>e(r,s):void 0})}const PFe=["youtubeContainer"];let aq=(()=>{class n{get height(){return this._height}set height(t){this._height=t||390}get width(){return this._width}set width(t){this._width=t||640}constructor(t,i){this._ngZone=t,this._destroyed=new Jt,this._playerChanges=new Ni(void 0),this._height=390,this._width=640,this.disableCookies=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=$d(i)}ngAfterViewInit(){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer():(this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer())}))}ngOnChanges(t){this._shouldRecreatePlayer(t)?this._createPlayer():this._player&&((t.width||t.height)&&this._setSize(),t.suggestedQuality&&this._setQuality(),(t.startSeconds||t.endSeconds||t.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(t){const i=t.videoId||t.playerVars||t.disableCookies;return!!i&&!i.isFirstChange()}_createPlayer(){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const t=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:this.playerVars})),i=()=>{this._player=t,this._pendingPlayer=void 0,t.removeEventListener("onReady",i),this._playerChanges.next(t),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(t,this._pendingPlayerState),this._pendingPlayerState=void 0);const r=t.getPlayerState();(r===YT.PlayerState.UNSTARTED||r===YT.PlayerState.CUED||null==r)&&this._cuePlayer()};this._pendingPlayer=t,t.addEventListener("onReady",i)}_applyPendingPlayerState(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(t){return this._playerChanges.pipe(zi(i=>i?rq(r=>{i.addEventListener(t,r)},r=>{try{i?.removeEventListener?.(t,r)}catch{}}):an()),i=>new St(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),Na(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(at(_n),at(Ya))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&lo(PFe,7),2&i){let s;er(s=tr())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[Vi],decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&as(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();let mp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function cq(n){mp=n}const lq=/[&<>"']/,NFe=new RegExp(lq.source,"g"),uq=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,LFe=new RegExp(uq.source,"g"),FFe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dq=n=>FFe[n];function Ba(n,e){if(e){if(lq.test(n))return n.replace(NFe,dq)}else if(uq.test(n))return n.replace(LFe,dq);return n}const BFe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function kFe(n){return n.replace(BFe,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const jFe=/(^|[^\[])\^/g;function Pi(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(jFe,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}function hq(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const wS={exec:()=>null};function fq(n,e){const i=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function xS(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s!==e||t){if(s===e||!t)break;r++}else r++}return n.slice(0,i-r)}function pq(n,e,t,i){const r=e.href,s=e.title?Ba(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:s,text:Ba(o)}}class ES{options;rules;lexer;constructor(e){this.options=e||mp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:xS(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function VFe(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=xS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=xS(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split("\n",1)[0].replace(/^\t+/,L=>" ".repeat(3*L.length)),f=e.split("\n",1)[0],g=0;this.options.pedantic?(g=2,c=h.trimStart()):(g=t[2].search(/[^ ]/),g=g>4?1:g,c=h.slice(g),g+=t[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),u=!0),!u){const L=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ce=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const Ie=e.split("\n",1)[0];if(f=Ie,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ce.test(f)||re.test(f)||L.test(f)||V.test(e))break;if(f.search(/[^ ]/)>=g||!f.trim())c+="\n"+f.slice(g);else{if(m||h.search(/[^ ]/)>=4||ce.test(h)||re.test(h)||V.test(h))break;c+="\n"+f}!m&&!f.trim()&&(m=!0),a+=Ie+"\n",e=e.substring(Ie.length+1),h=f.slice(g)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let w,b=null;this.options.gfm&&(b=/^\[[ xX]\] /.exec(c),b&&(w="[ ] "!==b[0],c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!b,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(g=>"space"===g.type),f=h.length>0&&h.some(g=>/\n.*\n/.test(g.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const i={type:"table",raw:t[0],header:fq(t[1]).map(r=>({text:r,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let s,o,a,c,r=i.align.length;for(s=0;s<r;s++){const l=i.align[s];l&&(i.align[s]=/^ *-+: *$/.test(l)?"right":/^ *:-+: *$/.test(l)?"center":/^ *:-+ *$/.test(l)?"left":null)}for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=fq(i.rows[s],i.header.length).map(l=>({text:l,tokens:[]}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ba(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=xS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function UFe(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(o>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),pq(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return pq(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,c,l=o,u=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const b=g.slice(1,-1);return{type:"em",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ba(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return"@"===t[2]?(i=Ba(t[1]),r="mailto:"+i):(i=Ba(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if("@"===t[2])i=Ba(t[0]),r="mailto:"+i;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(s!==t[0]);i=Ba(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:Ba(t[0]),{type:"text",raw:t[0],text:i}}}}const bn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:wS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};bn.def=Pi(bn.def).replace("label",bn._label).replace("title",bn._title).getRegex(),bn.bullet=/(?:[*+-]|\d{1,9}[.)])/,bn.listItemStart=Pi(/^( *)(bull) */).replace("bull",bn.bullet).getRegex(),bn.list=Pi(bn.list).replace(/bull/g,bn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+bn.def.source+")").getRegex(),bn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,bn.html=Pi(bn.html,"i").replace("comment",bn._comment).replace("tag",bn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),bn.lheading=Pi(bn.lheading).replace(/bull/g,bn.bullet).getRegex(),bn.paragraph=Pi(bn._paragraph).replace("hr",bn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn._tag).getRegex(),bn.blockquote=Pi(bn.blockquote).replace("paragraph",bn.paragraph).getRegex(),bn.normal={...bn},bn.gfm={...bn.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},bn.gfm.table=Pi(bn.gfm.table).replace("hr",bn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn._tag).getRegex(),bn.gfm.paragraph=Pi(bn._paragraph).replace("hr",bn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",bn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bn._tag).getRegex(),bn.pedantic={...bn.normal,html:Pi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",bn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Pi(bn.normal._paragraph).replace("hr",bn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",bn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const Qt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:wS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:wS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};Qt.punctuation=Pi(Qt.punctuation,"u").replace(/punctuation/g,Qt._punctuation).getRegex(),Qt.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Qt.anyPunctuation=/\\[punct]/g,Qt._escapes=/\\([punct])/g,Qt._comment=Pi(bn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Qt.emStrong.lDelim=Pi(Qt.emStrong.lDelim,"u").replace(/punct/g,Qt._punctuation).getRegex(),Qt.emStrong.rDelimAst=Pi(Qt.emStrong.rDelimAst,"gu").replace(/punct/g,Qt._punctuation).getRegex(),Qt.emStrong.rDelimUnd=Pi(Qt.emStrong.rDelimUnd,"gu").replace(/punct/g,Qt._punctuation).getRegex(),Qt.anyPunctuation=Pi(Qt.anyPunctuation,"gu").replace(/punct/g,Qt._punctuation).getRegex(),Qt._escapes=Pi(Qt._escapes,"gu").replace(/punct/g,Qt._punctuation).getRegex(),Qt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Qt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Qt.autolink=Pi(Qt.autolink).replace("scheme",Qt._scheme).replace("email",Qt._email).getRegex(),Qt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Qt.tag=Pi(Qt.tag).replace("comment",Qt._comment).replace("attribute",Qt._attribute).getRegex(),Qt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Qt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Qt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Qt.link=Pi(Qt.link).replace("label",Qt._label).replace("href",Qt._href).replace("title",Qt._title).getRegex(),Qt.reflink=Pi(Qt.reflink).replace("label",Qt._label).replace("ref",bn._label).getRegex(),Qt.nolink=Pi(Qt.nolink).replace("ref",bn._label).getRegex(),Qt.reflinkSearch=Pi(Qt.reflinkSearch,"g").replace("reflink",Qt.reflink).replace("nolink",Qt.nolink).getRegex(),Qt.normal={...Qt},Qt.pedantic={...Qt.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Pi(/^!?\[(label)\]\((.*?)\)/).replace("label",Qt._label).getRegex(),reflink:Pi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Qt._label).getRegex()},Qt.gfm={...Qt.normal,escape:Pi(Qt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qt.gfm.url=Pi(Qt.gfm.url,"i").replace("email",Qt.gfm._extended_email).getRegex(),Qt.breaks={...Qt.gfm,br:Pi(Qt.br).replace("{2,}","*").getRegex(),text:Pi(Qt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Zl{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||mp,this.options.tokenizer=this.options.tokenizer||new ES,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:bn.normal,inline:Qt.normal};this.options.pedantic?(t.block=bn.pedantic,t.inline=Qt.pedantic):this.options.gfm&&(t.block=bn.gfm,t.inline=this.options.breaks?Qt.breaks:Qt.gfm),this.tokenizer.rules=t}static get rules(){return{block:bn,inline:Qt}}static lex(e,t){return new Zl(t).lex(e)}static lexInline(e,t){return new Zl(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),"number"==typeof f&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return t}}class Zm{options;constructor(e){this.options=e||mp}code(e,t,i){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Ba(r)+'">'+(i?e:Ba(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Ba(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const r=hq(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>",s}image(e,t,i){const r=hq(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class GL{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class Ql{options;renderer;textRenderer;constructor(e){this.options=e||mp,this.options.renderer=this.options.renderer||new Zm,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new GL}static parse(e,t){return new Ql(t).parse(e)}static parseInline(e,t){return new Ql(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,kFe(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",c="";for(let u=0;u<o.header.length;u++)c+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(c);let l="";for(let u=0;u<o.rows.length;u++){const h=o.rows[u];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,c=o.start,l=o.loose;let u="";for(let h=0;h<o.items.length;h++){const f=o.items[h],g=f.checked,m=f.task;let b="";if(f.task){const w=this.renderer.checkbox(!!g);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=w+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=w+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:w+" "}):b+=w+" "}b+=this.parse(f.tokens,l),u+=this.renderer.listitem(b,m,!!g)}i+=this.renderer.list(u,a,c);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=t.text(s.text);break;case"html":i+=t.html(s.text);break;case"link":i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":i+=t.image(s.href,s.title,s.text);break;case"strong":i+=t.strong(this.parseInline(s.tokens,t));break;case"em":i+=t.em(this.parseInline(s.tokens,t));break;case"codespan":i+=t.codespan(s.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(s.tokens,t));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class AS{options;constructor(e){this.options=e||mp}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const _p=new class HFe{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Zl.lex,Ql.parse);parseInline=this.#e(Zl.lexInline,Ql.parseInline);Parser=Ql;Renderer=Zm;TextRenderer=GL;Lexer=Zl;Tokenizer=ES;Hooks=AS;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,t));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(r.items,t));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{i=i.concat(this.walkTokens(s[o],t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];t.renderers[s.name]=o?function(...a){let c=s.renderer.apply(this,a);return!1===c&&(c=o.apply(this,a)),c}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&("block"===s.level?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:"inline"===s.level&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new Zm(this.defaults);for(const o in i.renderer){const a=i.renderer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new ES(this.defaults);for(const o in i.tokenizer){const a=i.tokenizer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new AS;for(const o in i.hooks){const a=i.hooks[o],l=s[o];s[o]=AS.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>l.call(s,f));const h=a.call(s,u);return l.call(s,h)}:(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Zl.lex(e,t??this.defaults)}parser(e,t){return Ql.parse(e,t??this.defaults)}#e(e,t){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));const c=e(i,o);o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Ba(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}};function Ai(n,e){return _p.parse(n,e)}Ai.options=Ai.setOptions=function(n){return _p.setOptions(n),cq(Ai.defaults=_p.defaults),Ai},Ai.getDefaults=function HL(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ai.defaults=mp,Ai.use=function(...n){return _p.use(...n),cq(Ai.defaults=_p.defaults),Ai},Ai.walkTokens=function(n,e){return _p.walkTokens(n,e)},Ai.parseInline=_p.parseInline,Ai.Parser=Ql,Ai.parser=Ql.parse,Ai.Renderer=Zm,Ai.TextRenderer=GL,Ai.Lexer=Zl,Ai.lexer=Zl.lex,Ai.Tokenizer=ES,Ai.Hooks=AS,Ai.parse=Ai;const GFe=["*"];let gq=(()=>{class n{constructor(){this._buttonClick$=new Jt,this.copied$=this._buttonClick$.pipe(zi(()=>Fc(an(!0),JP(3e3).pipe(oN(!1)))),dh(),Bo(1)),this.copiedText$=this.copied$.pipe(zl(!1),Wt(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Fi({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[kg],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Fn(0,"button",0),Gi("click",function(){return r.onCopyToClipboardClick()}),Iu(1,"async"),Pc(2),Iu(3,"async"),Bn()),2&i&&(Ar("copied",Du(1,3,r.copied$)),Jn(2),Gd(Du(3,5,r.copiedText$)))},dependencies:[h0],encapsulation:2,changeDetection:0})}return n})();const $Fe=new xt("CLIPBOARD_OPTIONS");var zL=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(zL||{});const mq=new xt("MARKED_EXTENSIONS"),qFe=new xt("MARKED_OPTIONS"),_q=new xt("SECURITY_CONTEXT");let WL=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,s,o,a,c){this.clipboardOptions=t,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Zm},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Jt,this.reload$=this._reload$.asObservable(),this.options=r}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},u=l.renderer||this.renderer||new Zm;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const h=this.trimIndentation(t),f=r?this.decodeHtml(h):h,g=o?this.parseEmoji(f):f,m=this.parseMarked(g,l,s);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:c,mermaid:l,mermaidOptions:u}=i;s&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...u}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(Wt(i=>this.handleExtension(t,i)))}highlight(t){if(!$d(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!$d(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Ai.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const r=t.code;return t.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),s=r>-1?t.substring(r+4):t,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return i.renderer&&(Ai.use({renderer:i.renderer}),delete i.renderer),r?Ai.parseInline(t,i):Ai.parse(t,i)}parseEmoji(t){if(!$d(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if($d(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!$d(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),u=document.createElement("div");u.style.position="relative",l.parentNode.insertBefore(u,l),u.appendChild(l);const h=document.createElement("div");let f,g;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",u.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=s?i.createComponent(s).hostView:o?i.createEmbeddedView(o):i.createComponent(gq).hostView,f.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),g=new ClipboardJS(m,{text:()=>l.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!$d(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(ut($Fe,8),ut(mq,8),ut(qFe,8),ut(Ya),ut(_q),ut(wh,8),ut(g0))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac})}return n})(),yq=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new vn,this.load=new vn,this.ready=new vn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Jt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Na(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){var r=this;return kt(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(t,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,zL.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,zL.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const c=this.toLispCase(o);r.item(s).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(at(ui),at(WL),at(co))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Vi,kg],ngContentSelectors:GFe,decls:1,vars:0,template:function(i,r){1&i&&(Ca(),Ii(0))},encapsulation:2})}return n})();var vq;function nBe(n,e){if(1&n&&(Fn(0,"div",16),as(1,"youtube-player",17),Bn()),2&n){const t=cs(3);Jn(1),zM("videoId",t.videoID)}}function iBe(n,e){if(1&n&&(Fn(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Pc(3),Bn()(),Fn(4,"div",13),as(5,"markdown",14),Mi(6,nBe,2,1,"div",15),Bn()()),2&n){const t=cs(),i=t.index,r=t.$implicit;Ti("expanded",0===i),Jn(3),Gd(r.title),Jn(2),Ar("first",0===i),Ti("data",r.content),Jn(1),Ti("ngIf",0===i)}}function rBe(n,e){if(1&n&&(Fn(0,"div",9),Mi(1,iBe,7,6,"mat-expansion-panel",10),Bn()),2&n){const t=e.$implicit;Jn(1),Ti("ngIf",t)}}!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(vq||(vq={}));let sBe=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(at(mS),at(jY))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Fn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Pc(5),Bn(),Fn(6,"div",5)(7,"mat-icon",6),Gi("click",function(){return r.close()}),Pc(8,"clear"),Bn()()(),Fn(9,"mat-dialog-content",7),Mi(10,rBe,2,1,"div",8),Bn()()()()),2&i&&(Jn(5),Gd(r.infoTitle),Jn(5),Ti("ngForOf",r.documentationContents))},dependencies:[bE,LI,UL,VL,XY,iq,OFe,aq,yq],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})();class uc{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return uc.storage?.length??0}key(e){return uc.storage?.key(e)??null}getItem(e,t){return uc.storage?.getItem(e)??t??null}setItem(e,t){try{return uc.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){uc.storage?.removeItem(e)}clear(){uc.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||uc)};static#n=this.\u0275prov=Dt({token:uc,factory:uc.\u0275fac,providedIn:"root"})}var $L;const bq="callToActionPopupShown";let Kc=class CS{static#e=$L=this;static ctaDatePassed(e,t=Date.now){return+t()>+new Date(e)}constructor(e,t,i,r,s){this.dialog=e,this.ga=t,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:t,popupShown:i}=e.getState(),r=this.storage.getItem(bq,`${i}`),s=$L.ctaDatePassed(t);"true"!==r&&!s&&e.dispatch(new IY)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Wt(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(sBe,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(rr(t=>this.launchLearnMore(t)))}open(e){this.dialog.open(tu,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(bq,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(t){return new(t||CS)(ut(_S),ut(zN),ut(uc),ut(GY),ut(wh))};static#n=this.\u0275prov=Dt({token:CS,factory:CS.\u0275fac})};kn([_P(MY),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Kc.prototype,"learnMore",null),kn([_P(IY),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],Kc.prototype,"open",null),kn([_P(DY),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],Kc.prototype,"close",null),Kc=$L=kn([yP({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),Ft("design:paramtypes",[_S,zN,uc,GY,wh])],Kc);class eu{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],eu,"title",null),kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],eu,"message",null),kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],eu,"callToAction",null),kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],eu,"imageUrl",null),kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],eu,"expirationDate",null),kn([Sm([Kc]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",Boolean)],eu,"popupShown",null);let wq=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=$t({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})(),xBe=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new vn,this.closeClicked=new vn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Cg(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Fn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Pc(5),Bn(),Fn(6,"mat-icon",5),Gi("click",function(){return r.close()}),Pc(7,"clear"),Bn()(),as(8,"img",6),Fn(9,"mat-dialog-content",7)(10,"div",8),Pc(11),Bn(),Fn(12,"a",9),Gi("click",function(){return r.onDialogButtonClick()}),Bn()()()()()),2&i&&(Jn(5),Gd(r.infoTitle),Jn(3),Ti("src",r.imageUrl,Ay),Jn(3),Gd(r.message),Jn(1),Ti("text",r.callToAction))},dependencies:[XY,UL,VL,wq],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})();class tu{constructor(){this.close=()=>new DY,this.learnMore=()=>new MY}static#e=this.\u0275fac=function(t){return new(t||tu)};static#t=this.\u0275cmp=Fi({type:tu,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(t,i){if(1&t&&(Fn(0,"ccf-call-to-action",0),Gi("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Iu(1,"async"),Iu(2,"async"),Iu(3,"async"),Iu(4,"async"),Bn()),2&t){let r,s,o,a;Ti("infoTitle",null!==(r=Du(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=Du(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=Du(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=Du(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[xBe,h0],changeDetection:0})}kn([t1(eu.title),Ft("design:type",St)],tu.prototype,"title$",void 0),kn([t1(eu.message),Ft("design:type",St)],tu.prototype,"message$",void 0),kn([t1(eu.callToAction),Ft("design:type",St)],tu.prototype,"callToAction$",void 0),kn([t1(eu.imageUrl),Ft("design:type",St)],tu.prototype,"imageUrl$",void 0),kn([TY(),Ft("design:type",Object)],tu.prototype,"close",void 0),kn([TY(),Ft("design:type",Object)],tu.prototype,"learnMore",void 0);const EBe={initialConfig:{},parse:{},rename:{}};class ABe{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...EBe,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,t,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=t.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[o]=a}}let SBe=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new ABe(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function VF(){throw new Error("invalid")}()};static#t=this.\u0275dir=$t({type:n,features:[Vi]})}return n})();const db_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""},xq=(window,"http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity"),MBe=[173,255,47,229.5];function NBe(n,e){return n===e}let LBe=(()=>{class n{constructor(t){this.subscriptions=new mt,this.dataSource=t.getOption("data").pipe(Wt(i=>({...xY,dataSources:i})),mi(i=>Object.keys(i).length>0),Wt(i=>i),dh(NBe),zi(i=>function PBe(n,e){return new St(t=>{const i=n(),r=e(i);return(r?us(r):Lo).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),r=>this.connectDataSource(r.source,i))),Bo(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(t){return this.dataSource.pipe(zi(i=>i.getTissueBlockResults(t)),yi(1))}getAggregateResults(t){return this.dataSource.pipe(zi(i=>i.getAggregateResults(t)),yi(1))}getOntologyTermOccurences(t){return this.dataSource.pipe(zi(i=>i.getOntologyTermOccurences(t)),yi(1))}getCellTypeTermOccurences(t){return this.dataSource.pipe(zi(i=>i.getCellTypeTermOccurences(t)),yi(1))}getOntologyTreeModel(){return this.dataSource.pipe(zi(t=>t.getOntologyTreeModel()),yi(1))}getCellTypeTreeModel(){return this.dataSource.pipe(zi(t=>t.getCellTypeTreeModel()),yi(1))}getReferenceOrgans(){return this.dataSource.pipe(zi(t=>t.getReferenceOrgans()),yi(1))}getScene(t){return this.dataSource.pipe(zi(i=>i.getScene(t)),yi(1))}getOrganScene(t,i){return this.dataSource.pipe(zi(r=>r.getReferenceOrganScene(t,i)),yi(1))}createDataSource(){return{source:new BLe,unsubscribe:()=>{}}}connectDataSource(t,i){return kt(function*(){(new Date).getTime();return yield t.connect(i,!1),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Qu))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FBe=(()=>{class n{constructor(t,i){this.configState=t,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(Wt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(Wt(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=yh([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(zi(([r,s,o])=>this.chooseScene(r,s))),this.organs$=this.configState.getOption("data").pipe(Wt(r=>this.selectOrgans(r)),Bo(1)),this.filteredOrgans$=yh([this.organs$,this.referenceOrgans$]).pipe(Wt(([r,s])=>this.getNeededReferenceOrgans(s,r)),Bo(1)),this.filteredScene$=yh([this.scene$,this.organs$,this.referenceOrgans$]).pipe(Wt(([r,s,o])=>this.filterSceneNodes(r,s,o)),function DBe(n,e){const t=n.pipe(zl(""));return i=>yh([i,t]).pipe(Wt(([r,s])=>r.map(o=>function IBe(n,e,t){return n.entityId!==e?n:{...n,color:t}}(o,s,e))))}(this.highlightID$,MBe),function OBe(n){const e=n.pipe(zl(""));return t=>yh([t,e]).pipe(Wt(([i,r])=>i.map(s=>function RBe(n,e){return n.entityId!==e?n:{...n,zoomToOnLoad:!0}}(s,r))))}(this.zoomToID$),Bo(1))}chooseScene(t,i){const r=t?.map(o=>o[xq]?.placement.target)??[];if(new Set(r).size>1)return this.source.getScene();if(i){const o=i.find(a=>a["@id"]===r[0]);if(o)return this.source.getOrganScene(o.representation_of??"",{ontologyTerms:[o.reference_organ],sex:o.sex})}return an([])}selectOrgans(t){const r=(t??[]).map(s=>s[xq].placement.target);return new Set(r)}filterSceneNodes(t,i,r){const s=this.getNeededReferenceOrgans(r,i),o=this.getNeededSkins(s),a=new Set([...i,...o]);return t.filter(c=>!c.reference_organ||a.has(c.reference_organ))}getNeededReferenceOrgans(t,i){return t.filter(r=>i.has(r.reference_organ??""))}getNeededSkins(t){if(1===t.length)return[];const i=new Set;return t.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Qu),ut(LBe))};static#t=this.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const BBe=["bodyUI"],kBe=()=>[];let jBe=(()=>{class n{constructor(t,i,r){this.configState=t,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new vn,this.onMouseLeave=new vn,this.onClick=new vn,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(rr(s=>this.reset()))}reset(){var t=this;return kt(function*(){const{bodyUI:i}=t;yield new Promise(o=>{setTimeout(o,200)});const r=yield _9(t.organs$.pipe(yi(1))),s=!!i.scene?.find(o=>o.zoomToOnLoad);if(i.rotation=0,i.rotationX=0,!s)if(r&&1===r.length){const{x_dimension:o,y_dimension:a,z_dimension:c}=r[0];i.bounds={x:1.25*o/1e3,y:1.25*a/1e3,z:1.25*c/1e3},i.target=[o/1e3/2,a/1e3/2,c/1e3/2]}else i.bounds={x:2.2,y:2,z:.4},i.target=[0,0,0];t.cdr.detectChanges()})()}static#e=this.\u0275fac=function(i){return new(i||n)(at(Qu),at(FBe),at(Io))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&lo(BBe,7),2&i){let s;er(s=tr())&&(r.bodyUI=s.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:5,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","nodeHoverStart","nodeHoverStop"],["bodyUI",""]],template:function(i,r){if(1&i&&(Fn(0,"ccf-body-ui",0,1),Gi("nodeClick",function(o){return r.onClick.emit(o)})("nodeHoverStart",function(o){return r.onMouseEnter.emit(o)})("nodeHoverStop",function(o){return r.onMouseLeave.emit(o)}),Iu(2,"async"),Bn()),2&i){let s;Ti("scene",null!==(s=Du(2,2,r.scene$))&&void 0!==s?s:function $3(n,e,t){const i=Bs()+n,r=Mt();return r[i]===Vn?Sl(r,i,t?e.call(t):e()):function By(n,e){return n[e]}(r,i)}(4,kBe))("interactive",!0)}},dependencies:[rAe,h0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return n})();function UBe(n,e){if(1&n){const t=VM();Fn(0,"ccf-root",1),Gi("onMouseEnter",function(r){return bd(t),Mr(cs().onMouseEnter.emit(r))})("onMouseLeave",function(r){return bd(t),Mr(cs().onMouseLeave.emit(r))})("onClick",function(r){return bd(t),Mr(cs().onClick.emit(r))}),Bn()}}function VBe(n){return"string"==typeof n&&(n=JSON.parse(n)),n.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let HBe=(()=>{class n extends SBe{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...db_dbOptions,...globalThis.dbOptions},parse:{data:VBe}}),this.onMouseEnter=new vn,this.onMouseLeave=new vn,this.onClick=new vn}static#e=this.\u0275fac=function(i){return new(i||n)(at(Qu),at(Io))};static#t=this.\u0275cmp=Fi({type:n,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[oi],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&Mi(0,UBe,1,0,"ccf-root",0),2&i&&Ti("ngIf",r.initialized)},dependencies:[LI,jBe],encapsulation:2,changeDetection:0})}return n})();const SS=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class WBe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=ep(this.action),i=function zBe(n){return SS(n.getHours(),2)+":"+SS(n.getMinutes(),2)+":"+SS(n.getSeconds(),2)+"."+SS(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class $Be{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const Eq=new xt("NGXS_LOGGER_PLUGIN_OPTIONS");let YBe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new $Be(this._options),this._store=this._store||this._injector.get(Xu);const s=new WBe(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(rr(o=>{s.completed(o)}),Vc(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(ut(Eq),ut(Ji))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();const Aq=new xt("LOGGER_USER_OPTIONS");function qBe(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let XBe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Y6,useClass:YBe,multi:!0},{provide:Aq,useValue:t},{provide:Eq,useFactory:qBe,deps:[Aq]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=to({type:n}),n.\u0275inj=Fs({}),n})();const KBe=[Qu];let JBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({imports:[xIe.forRoot(),a1e.forRoot(KBe,{developmentMode:!1}),XBe.forRoot({disabled:true})]})}return n})(),ZBe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function Zre(n,e){const t=function Wre(n,e){return e.get(El).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new Xre(n,e.injector),r=function zre(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function jre(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class s extends Jre{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,a)},configurable:!0,enumerable:!0})}),s}(HBe,{injector:this.injector});customElements.define("ccf-body-ui-wc",t)}static#e=this.\u0275fac=function(i){return new(i||n)(ut(Ji))};static#t=this.\u0275mod=to({type:n});static#n=this.\u0275inj=Fs({imports:[Jie,JBe,Qre]})}return n})();Xie().bootstrapModule(ZBe).catch(n=>console.error(n))},2323:Ue=>{Ue.exports=function(S,Q){var C=Q.length;if(0!==C){var $=S.length;S.length+=C;for(var G=0;G<C;G++)S[$+G]=Q[G]}}},3982:Ue=>{"use strict";const{AbortController:_e,AbortSignal:S}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ue.exports=_e,Ue.exports.AbortSignal=S,Ue.exports.default=_e},9919:(Ue,_e)=>{"use strict";_e.byteLength=function E(x){var B=_(x),Y=B[1];return 3*(B[0]+Y)/4-Y},_e.toByteArray=function z(x){var B,v,se=_(x),Y=se[0],J=se[1],ee=new C(function N(x,B,se){return 3*(B+se)/4-se}(0,Y,J)),W=0,k=J>0?Y-4:Y;for(v=0;v<k;v+=4)B=Q[x.charCodeAt(v)]<<18|Q[x.charCodeAt(v+1)]<<12|Q[x.charCodeAt(v+2)]<<6|Q[x.charCodeAt(v+3)],ee[W++]=B>>16&255,ee[W++]=B>>8&255,ee[W++]=255&B;return 2===J&&(B=Q[x.charCodeAt(v)]<<2|Q[x.charCodeAt(v+1)]>>4,ee[W++]=255&B),1===J&&(B=Q[x.charCodeAt(v)]<<10|Q[x.charCodeAt(v+1)]<<4|Q[x.charCodeAt(v+2)]>>2,ee[W++]=B>>8&255,ee[W++]=255&B),ee},_e.fromByteArray=function oe(x){for(var B,se=x.length,Y=se%3,J=[],W=0,k=se-Y;W<k;W+=16383)J.push(F(x,W,W+16383>k?k:W+16383));return 1===Y?J.push(S[(B=x[se-1])>>2]+S[B<<4&63]+"=="):2===Y&&J.push(S[(B=(x[se-2]<<8)+x[se-1])>>10]+S[B>>4&63]+S[B<<2&63]+"="),J.join("")};for(var S=[],Q=[],C=typeof Uint8Array<"u"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0;G<64;++G)S[G]=$[G],Q[$.charCodeAt(G)]=G;function _(x){var B=x.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=x.indexOf("=");return-1===se&&(se=B),[se,se===B?0:4-se%4]}function P(x){return S[x>>18&63]+S[x>>12&63]+S[x>>6&63]+S[63&x]}function F(x,B,se){for(var J=[],ee=B;ee<se;ee+=3)J.push(P((x[ee]<<16&16711680)+(x[ee+1]<<8&65280)+(255&x[ee+2])));return J.join("")}Q["-".charCodeAt(0)]=62,Q["_".charCodeAt(0)]=63},1979:(Ue,_e)=>{"use strict";var Q=function($){return $.typeOfFunction="function",$.boolTrue=!0,$}(Q||{});_e.ak=function C($,G,q){if(!q||typeof q.value!==Q.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+G+"> is not a method!");return{configurable:Q.boolTrue,get:function(){var _=q.value.bind(this);return Object.defineProperty(this,G,{value:_,configurable:Q.boolTrue,writable:Q.boolTrue}),_}}}},9007:(Ue,_e,S)=>{"use strict";var Q=S(9919),C=S(2601);_e.Buffer=_,_e.SlowBuffer=function Y(U){return+U!=U&&(U=0),_.alloc(+U)},_e.INSPECT_MAX_BYTES=50;var $=2147483647;function q(U){if(U>$)throw new RangeError('The value "'+U+'" is invalid for option "size"');var M=new Uint8Array(U);return M.__proto__=_.prototype,M}function _(U,M,O){if("number"==typeof U){if("string"==typeof M)throw new TypeError('The "string" argument must be of type string. Received type number');return P(U)}return E(U,M,O)}function E(U,M,O){if("string"==typeof U)return function F(U,M){if(("string"!=typeof M||""===M)&&(M="utf8"),!_.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var O=0|J(U,M),he=q(O),We=he.write(U,M);return We!==O&&(he=he.slice(0,We)),he}(U,M);if(ArrayBuffer.isView(U))return oe(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ue(U,ArrayBuffer)||U&&ue(U.buffer,ArrayBuffer))return function x(U,M,O){if(M<0||U.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<M+(O||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===M&&void 0===O?new Uint8Array(U):void 0===O?new Uint8Array(U,M):new Uint8Array(U,M,O)).__proto__=_.prototype,he}(U,M,O);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=U.valueOf&&U.valueOf();if(null!=he&&he!==U)return _.from(he,M,O);var We=function B(U){if(_.isBuffer(U)){var M=0|se(U.length),O=q(M);return 0===O.length||U.copy(O,0,0,M),O}return void 0!==U.length?"number"!=typeof U.length||ne(U.length)?q(0):oe(U):"Buffer"===U.type&&Array.isArray(U.data)?oe(U.data):void 0}(U);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),M,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function N(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function P(U){return N(U),q(U<0?0:0|se(U))}function oe(U){for(var M=U.length<0?0:0|se(U.length),O=q(M),he=0;he<M;he+=1)O[he]=255&U[he];return O}function se(U){if(U>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|U}function J(U,M){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||ue(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var O=U.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===O)return 0;for(var We=!1;;)switch(M){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return A(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return Ve(U).length;default:if(We)return he?-1:A(U).length;M=(""+M).toLowerCase(),We=!0}}function ee(U,M,O){var he=!1;if((void 0===M||M<0)&&(M=0),M>this.length||((void 0===O||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(M>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return je(this,M,O);case"utf8":case"utf-8":return Pe(this,M,O);case"ascii":return Xe(this,M,O);case"latin1":case"binary":return Ce(this,M,O);case"base64":return xe(this,M,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,M,O);default:if(he)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),he=!0}}function W(U,M,O){var he=U[M];U[M]=U[O],U[O]=he}function k(U,M,O,he,We){if(0===U.length)return-1;if("string"==typeof O?(he=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),ne(O=+O)&&(O=We?0:U.length-1),O<0&&(O=U.length+O),O>=U.length){if(We)return-1;O=U.length-1}else if(O<0){if(!We)return-1;O=0}if("string"==typeof M&&(M=_.from(M,he)),_.isBuffer(M))return 0===M.length?-1:v(U,M,O,he,We);if("number"==typeof M)return M&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(U,M,O):Uint8Array.prototype.lastIndexOf.call(U,M,O):v(U,[M],O,he,We);throw new TypeError("val must be string, number or Buffer")}function v(U,M,O,he,We){var It,Ee=1,Re=U.length,ot=M.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(U.length<2||M.length<2)return-1;Ee=2,Re/=2,ot/=2,O/=2}function bt(H,te){return 1===Ee?H[te]:H.readUInt16BE(te*Ee)}if(We){var mt=-1;for(It=O;It<Re;It++)if(bt(U,It)===bt(M,-1===mt?0:It-mt)){if(-1===mt&&(mt=It),It-mt+1===ot)return mt*Ee}else-1!==mt&&(It-=It-mt),mt=-1}else for(O+ot>Re&&(O=Re-ot),It=O;It>=0;It--){for(var zt=!0,pe=0;pe<ot;pe++)if(bt(U,It+pe)!==bt(M,pe)){zt=!1;break}if(zt)return It}return-1}function I(U,M,O,he){O=Number(O)||0;var We=U.length-O;he?(he=Number(he))>We&&(he=We):he=We;var Ee=M.length;he>Ee/2&&(he=Ee/2);for(var Re=0;Re<he;++Re){var ot=parseInt(M.substr(2*Re,2),16);if(ne(ot))return Re;U[O+Re]=ot}return Re}function T(U,M,O,he){return Je(A(M,U.length-O),U,O,he)}function le(U,M,O,he){return Je(function ie(U){for(var M=[],O=0;O<U.length;++O)M.push(255&U.charCodeAt(O));return M}(M),U,O,he)}function j(U,M,O,he){return le(U,M,O,he)}function Me(U,M,O,he){return Je(Ve(M),U,O,he)}function ae(U,M,O,he){return Je(function Z(U,M){for(var O,he,Ee=[],Re=0;Re<U.length&&!((M-=2)<0);++Re)he=(O=U.charCodeAt(Re))>>8,Ee.push(O%256),Ee.push(he);return Ee}(M,U.length-O),U,O,he)}function xe(U,M,O){return Q.fromByteArray(0===M&&O===U.length?U:U.slice(M,O))}function Pe(U,M,O){O=Math.min(U.length,O);for(var he=[],We=M;We<O;){var bt,It,mt,zt,Ee=U[We],Re=null,ot=Ee>239?4:Ee>223?3:Ee>191?2:1;if(We+ot<=O)switch(ot){case 1:Ee<128&&(Re=Ee);break;case 2:128==(192&(bt=U[We+1]))&&(zt=(31&Ee)<<6|63&bt)>127&&(Re=zt);break;case 3:It=U[We+2],128==(192&(bt=U[We+1]))&&128==(192&It)&&(zt=(15&Ee)<<12|(63&bt)<<6|63&It)>2047&&(zt<55296||zt>57343)&&(Re=zt);break;case 4:It=U[We+2],mt=U[We+3],128==(192&(bt=U[We+1]))&&128==(192&It)&&128==(192&mt)&&(zt=(15&Ee)<<18|(63&bt)<<12|(63&It)<<6|63&mt)>65535&&zt<1114112&&(Re=zt)}null===Re?(Re=65533,ot=1):Re>65535&&(he.push((Re-=65536)>>>10&1023|55296),Re=56320|1023&Re),he.push(Re),We+=ot}return function Qe(U){var M=U.length;if(M<=He)return String.fromCharCode.apply(String,U);for(var O="",he=0;he<M;)O+=String.fromCharCode.apply(String,U.slice(he,he+=He));return O}(he)}_e.kMaxLength=$,!(_.TYPED_ARRAY_SUPPORT=function G(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(U,M,O){return E(U,M,O)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(U,M,O){return function z(U,M,O){return N(U),U<=0?q(U):void 0!==M?"string"==typeof O?q(U).fill(M,O):q(U).fill(M):q(U)}(U,M,O)},_.allocUnsafe=function(U){return P(U)},_.allocUnsafeSlow=function(U){return P(U)},_.isBuffer=function(M){return null!=M&&!0===M._isBuffer&&M!==_.prototype},_.compare=function(M,O){if(ue(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),ue(O,Uint8Array)&&(O=_.from(O,O.offset,O.byteLength)),!_.isBuffer(M)||!_.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===O)return 0;for(var he=M.length,We=O.length,Ee=0,Re=Math.min(he,We);Ee<Re;++Ee)if(M[Ee]!==O[Ee]){he=M[Ee],We=O[Ee];break}return he<We?-1:We<he?1:0},_.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(M,O){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return _.alloc(0);var he;if(void 0===O)for(O=0,he=0;he<M.length;++he)O+=M[he].length;var We=_.allocUnsafe(O),Ee=0;for(he=0;he<M.length;++he){var Re=M[he];if(ue(Re,Uint8Array)&&(Re=_.from(Re)),!_.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(We,Ee),Ee+=Re.length}return We},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<M;O+=2)W(this,O,O+1);return this},_.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<M;O+=4)W(this,O,O+3),W(this,O+1,O+2);return this},_.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<M;O+=8)W(this,O,O+7),W(this,O+1,O+6),W(this,O+2,O+5),W(this,O+3,O+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var M=this.length;return 0===M?"":0===arguments.length?Pe(this,0,M):ee.apply(this,arguments)},_.prototype.equals=function(M){if(!_.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||0===_.compare(this,M)},_.prototype.inspect=function(){var M="",O=_e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(M+=" ... "),"<Buffer "+M+">"},_.prototype.compare=function(M,O,he,We,Ee){if(ue(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),!_.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(void 0===O&&(O=0),void 0===he&&(he=M?M.length:0),void 0===We&&(We=0),void 0===Ee&&(Ee=this.length),O<0||he>M.length||We<0||Ee>this.length)throw new RangeError("out of range index");if(We>=Ee&&O>=he)return 0;if(We>=Ee)return-1;if(O>=he)return 1;if(this===M)return 0;for(var Re=(Ee>>>=0)-(We>>>=0),ot=(he>>>=0)-(O>>>=0),bt=Math.min(Re,ot),It=this.slice(We,Ee),mt=M.slice(O,he),zt=0;zt<bt;++zt)if(It[zt]!==mt[zt]){Re=It[zt],ot=mt[zt];break}return Re<ot?-1:ot<Re?1:0},_.prototype.includes=function(M,O,he){return-1!==this.indexOf(M,O,he)},_.prototype.indexOf=function(M,O,he){return k(this,M,O,he,!0)},_.prototype.lastIndexOf=function(M,O,he){return k(this,M,O,he,!1)},_.prototype.write=function(M,O,he,We){if(void 0===O)We="utf8",he=this.length,O=0;else if(void 0===he&&"string"==typeof O)We=O,he=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(he)?(he>>>=0,void 0===We&&(We="utf8")):(We=he,he=void 0)}var Ee=this.length-O;if((void 0===he||he>Ee)&&(he=Ee),M.length>0&&(he<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var Re=!1;;)switch(We){case"hex":return I(this,M,O,he);case"utf8":case"utf-8":return T(this,M,O,he);case"ascii":return le(this,M,O,he);case"latin1":case"binary":return j(this,M,O,he);case"base64":return Me(this,M,O,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,M,O,he);default:if(Re)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Re=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var He=4096;function Xe(U,M,O){var he="";O=Math.min(U.length,O);for(var We=M;We<O;++We)he+=String.fromCharCode(127&U[We]);return he}function Ce(U,M,O){var he="";O=Math.min(U.length,O);for(var We=M;We<O;++We)he+=String.fromCharCode(U[We]);return he}function je(U,M,O){var he=U.length;(!M||M<0)&&(M=0),(!O||O<0||O>he)&&(O=he);for(var We="",Ee=M;Ee<O;++Ee)We+=R(U[Ee]);return We}function Se(U,M,O){for(var he=U.slice(M,O),We="",Ee=0;Ee<he.length;Ee+=2)We+=String.fromCharCode(he[Ee]+256*he[Ee+1]);return We}function ke(U,M,O){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+M>O)throw new RangeError("Trying to access beyond buffer length")}function de(U,M,O,he,We,Ee){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>We||M<Ee)throw new RangeError('"value" argument is out of bounds');if(O+he>U.length)throw new RangeError("Index out of range")}function Ae(U,M,O,he,We,Ee){if(O+he>U.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function nt(U,M,O,he,We){return M=+M,O>>>=0,We||Ae(U,0,O,4),C.write(U,M,O,he,23,4),O+4}function _t(U,M,O,he,We){return M=+M,O>>>=0,We||Ae(U,0,O,8),C.write(U,M,O,he,52,8),O+8}_.prototype.slice=function(M,O){var he=this.length;(M=~~M)<0?(M+=he)<0&&(M=0):M>he&&(M=he),(O=void 0===O?he:~~O)<0?(O+=he)<0&&(O=0):O>he&&(O=he),O<M&&(O=M);var We=this.subarray(M,O);return We.__proto__=_.prototype,We},_.prototype.readUIntLE=function(M,O,he){M>>>=0,O>>>=0,he||ke(M,O,this.length);for(var We=this[M],Ee=1,Re=0;++Re<O&&(Ee*=256);)We+=this[M+Re]*Ee;return We},_.prototype.readUIntBE=function(M,O,he){M>>>=0,O>>>=0,he||ke(M,O,this.length);for(var We=this[M+--O],Ee=1;O>0&&(Ee*=256);)We+=this[M+--O]*Ee;return We},_.prototype.readUInt8=function(M,O){return M>>>=0,O||ke(M,1,this.length),this[M]},_.prototype.readUInt16LE=function(M,O){return M>>>=0,O||ke(M,2,this.length),this[M]|this[M+1]<<8},_.prototype.readUInt16BE=function(M,O){return M>>>=0,O||ke(M,2,this.length),this[M]<<8|this[M+1]},_.prototype.readUInt32LE=function(M,O){return M>>>=0,O||ke(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},_.prototype.readUInt32BE=function(M,O){return M>>>=0,O||ke(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},_.prototype.readIntLE=function(M,O,he){M>>>=0,O>>>=0,he||ke(M,O,this.length);for(var We=this[M],Ee=1,Re=0;++Re<O&&(Ee*=256);)We+=this[M+Re]*Ee;return We>=(Ee*=128)&&(We-=Math.pow(2,8*O)),We},_.prototype.readIntBE=function(M,O,he){M>>>=0,O>>>=0,he||ke(M,O,this.length);for(var We=O,Ee=1,Re=this[M+--We];We>0&&(Ee*=256);)Re+=this[M+--We]*Ee;return Re>=(Ee*=128)&&(Re-=Math.pow(2,8*O)),Re},_.prototype.readInt8=function(M,O){return M>>>=0,O||ke(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},_.prototype.readInt16LE=function(M,O){M>>>=0,O||ke(M,2,this.length);var he=this[M]|this[M+1]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt16BE=function(M,O){M>>>=0,O||ke(M,2,this.length);var he=this[M+1]|this[M]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt32LE=function(M,O){return M>>>=0,O||ke(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},_.prototype.readInt32BE=function(M,O){return M>>>=0,O||ke(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},_.prototype.readFloatLE=function(M,O){return M>>>=0,O||ke(M,4,this.length),C.read(this,M,!0,23,4)},_.prototype.readFloatBE=function(M,O){return M>>>=0,O||ke(M,4,this.length),C.read(this,M,!1,23,4)},_.prototype.readDoubleLE=function(M,O){return M>>>=0,O||ke(M,8,this.length),C.read(this,M,!0,52,8)},_.prototype.readDoubleBE=function(M,O){return M>>>=0,O||ke(M,8,this.length),C.read(this,M,!1,52,8)},_.prototype.writeUIntLE=function(M,O,he,We){M=+M,O>>>=0,he>>>=0,We||de(this,M,O,he,Math.pow(2,8*he)-1,0);var Re=1,ot=0;for(this[O]=255&M;++ot<he&&(Re*=256);)this[O+ot]=M/Re&255;return O+he},_.prototype.writeUIntBE=function(M,O,he,We){M=+M,O>>>=0,he>>>=0,We||de(this,M,O,he,Math.pow(2,8*he)-1,0);var Re=he-1,ot=1;for(this[O+Re]=255&M;--Re>=0&&(ot*=256);)this[O+Re]=M/ot&255;return O+he},_.prototype.writeUInt8=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,1,255,0),this[O]=255&M,O+1},_.prototype.writeUInt16LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,65535,0),this[O]=255&M,this[O+1]=M>>>8,O+2},_.prototype.writeUInt16BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,65535,0),this[O]=M>>>8,this[O+1]=255&M,O+2},_.prototype.writeUInt32LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,4294967295,0),this[O+3]=M>>>24,this[O+2]=M>>>16,this[O+1]=M>>>8,this[O]=255&M,O+4},_.prototype.writeUInt32BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,4294967295,0),this[O]=M>>>24,this[O+1]=M>>>16,this[O+2]=M>>>8,this[O+3]=255&M,O+4},_.prototype.writeIntLE=function(M,O,he,We){if(M=+M,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,M,O,he,Ee-1,-Ee)}var Re=0,ot=1,bt=0;for(this[O]=255&M;++Re<he&&(ot*=256);)M<0&&0===bt&&0!==this[O+Re-1]&&(bt=1),this[O+Re]=(M/ot>>0)-bt&255;return O+he},_.prototype.writeIntBE=function(M,O,he,We){if(M=+M,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,M,O,he,Ee-1,-Ee)}var Re=he-1,ot=1,bt=0;for(this[O+Re]=255&M;--Re>=0&&(ot*=256);)M<0&&0===bt&&0!==this[O+Re+1]&&(bt=1),this[O+Re]=(M/ot>>0)-bt&255;return O+he},_.prototype.writeInt8=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,1,127,-128),M<0&&(M=255+M+1),this[O]=255&M,O+1},_.prototype.writeInt16LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,32767,-32768),this[O]=255&M,this[O+1]=M>>>8,O+2},_.prototype.writeInt16BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,32767,-32768),this[O]=M>>>8,this[O+1]=255&M,O+2},_.prototype.writeInt32LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,2147483647,-2147483648),this[O]=255&M,this[O+1]=M>>>8,this[O+2]=M>>>16,this[O+3]=M>>>24,O+4},_.prototype.writeInt32BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[O]=M>>>24,this[O+1]=M>>>16,this[O+2]=M>>>8,this[O+3]=255&M,O+4},_.prototype.writeFloatLE=function(M,O,he){return nt(this,M,O,!0,he)},_.prototype.writeFloatBE=function(M,O,he){return nt(this,M,O,!1,he)},_.prototype.writeDoubleLE=function(M,O,he){return _t(this,M,O,!0,he)},_.prototype.writeDoubleBE=function(M,O,he){return _t(this,M,O,!1,he)},_.prototype.copy=function(M,O,he,We){if(!_.isBuffer(M))throw new TypeError("argument should be a Buffer");if(he||(he=0),!We&&0!==We&&(We=this.length),O>=M.length&&(O=M.length),O||(O=0),We>0&&We<he&&(We=he),We===he||0===M.length||0===this.length)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),M.length-O<We-he&&(We=M.length-O+he);var Ee=We-he;if(this===M&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(O,he,We);else if(this===M&&he<O&&O<We)for(var Re=Ee-1;Re>=0;--Re)M[Re+O]=this[Re+he];else Uint8Array.prototype.set.call(M,this.subarray(he,We),O);return Ee},_.prototype.fill=function(M,O,he,We){if("string"==typeof M){if("string"==typeof O?(We=O,O=0,he=this.length):"string"==typeof he&&(We=he,he=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!_.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===M.length){var Ee=M.charCodeAt(0);("utf8"===We&&Ee<128||"latin1"===We)&&(M=Ee)}}else"number"==typeof M&&(M&=255);if(O<0||this.length<O||this.length<he)throw new RangeError("Out of range index");if(he<=O)return this;var Re;if(O>>>=0,he=void 0===he?this.length:he>>>0,M||(M=0),"number"==typeof M)for(Re=O;Re<he;++Re)this[Re]=M;else{var ot=_.isBuffer(M)?M:_.from(M,We),bt=ot.length;if(0===bt)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Re=0;Re<he-O;++Re)this[Re+O]=ot[Re%bt]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function R(U){return U<16?"0"+U.toString(16):U.toString(16)}function A(U,M){M=M||1/0;for(var O,he=U.length,We=null,Ee=[],Re=0;Re<he;++Re){if((O=U.charCodeAt(Re))>55295&&O<57344){if(!We){if(O>56319){(M-=3)>-1&&Ee.push(239,191,189);continue}if(Re+1===he){(M-=3)>-1&&Ee.push(239,191,189);continue}We=O;continue}if(O<56320){(M-=3)>-1&&Ee.push(239,191,189),We=O;continue}O=65536+(We-55296<<10|O-56320)}else We&&(M-=3)>-1&&Ee.push(239,191,189);if(We=null,O<128){if((M-=1)<0)break;Ee.push(O)}else if(O<2048){if((M-=2)<0)break;Ee.push(O>>6|192,63&O|128)}else if(O<65536){if((M-=3)<0)break;Ee.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;Ee.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return Ee}function Ve(U){return Q.toByteArray(function fe(U){if((U=(U=U.split("=")[0]).trim().replace(Ke,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Je(U,M,O,he){for(var We=0;We<he&&!(We+O>=M.length||We>=U.length);++We)M[We+O]=U[We];return We}function ue(U,M){return U instanceof M||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===M.name}function ne(U){return U!=U}},1563:(Ue,_e,S)=>{Ue.exports={ResizeSensor:S(884),ElementQueries:S(8381)}},8381:function(Ue,_e,S){"use strict";var Q,C,$;typeof window<"u"&&window,C=[S(884)],void 0!==($="function"==typeof(Q=function(G){var q=function(){var E,N={},z=[];function P(j){j||(j=document.documentElement);var Me=window.getComputedStyle(j,null).fontSize;return parseFloat(Me)||16}function oe(j,Me){var ae=Me.split(/\d/),xe=ae[ae.length-1];switch(Me=parseFloat(Me),xe){case"px":default:return Me;case"em":return Me*P(j);case"rem":return Me*P();case"vw":return Me*document.documentElement.clientWidth/100;case"vh":return Me*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Pe=document.documentElement.clientWidth/100,He=document.documentElement.clientHeight/100;return Me*(0,Math["vmin"===xe?"min":"max"])(Pe,He)}}function x(j,Me){this.element=j;var ae,xe,Pe,He,Qe,Xe,Ce,je,Se=["min-width","min-height","max-width","max-height"];this.call=function(){for(ae in Pe=function F(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var Me=j.getBoundingClientRect();return{width:Math.round(Me.width),height:Math.round(Me.height)}}(this.element),Xe={},N[Me])N[Me].hasOwnProperty(ae)&&(He=oe(this.element,(xe=N[Me][ae]).value),Qe="width"===xe.property?Pe.width:Pe.height,Ce="","min"===xe.mode&&Qe>=He&&(Ce+=xe.value),"max"===xe.mode&&Qe<=He&&(Ce+=xe.value),Xe[je=xe.mode+"-"+xe.property]||(Xe[je]=""),Ce&&-1===(" "+Xe[je]+" ").indexOf(" "+Ce+" ")&&(Xe[je]+=" "+Ce));for(var ke in Se)Se.hasOwnProperty(ke)&&(Xe[Se[ke]]?this.element.setAttribute(Se[ke],Xe[Se[ke]].substr(1)):this.element.removeAttribute(Se[ke]))}}function B(j,Me){j.elementQueriesSetupInformation||(j.elementQueriesSetupInformation=new x(j,Me)),j.elementQueriesSensor||(j.elementQueriesSensor=new G(j,function(){j.elementQueriesSetupInformation.call()}))}function se(j,Me,ae,xe){if(typeof N[j]>"u"){N[j]=[];var Pe=z.length;E.innerHTML+="\n"+j+" {animation: 0.1s element-queries;}",E.innerHTML+="\n"+j+" > .resize-sensor {min-width: "+Pe+"px;}",z.push(j)}N[j].push({mode:Me,property:ae,value:xe})}function Y(j){var Me;if(document.querySelectorAll&&(Me=j?j.querySelectorAll.bind(j):document.querySelectorAll.bind(document)),!Me&&typeof $$<"u"&&(Me=$$),!Me&&typeof jQuery<"u"&&(Me=jQuery),!Me)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Me}function ee(j){var Me=[],ae=[],xe=[],Pe=0,He=-1,Qe=[];for(var Xe in j.children)if(j.children.hasOwnProperty(Xe)&&j.children[Xe].tagName&&"img"===j.children[Xe].tagName.toLowerCase()){Me.push(j.children[Xe]);var Ce=j.children[Xe].getAttribute("min-width")||j.children[Xe].getAttribute("data-min-width"),je=j.children[Xe].getAttribute("data-src")||j.children[Xe].getAttribute("url");xe.push(je),ae.push({minWidth:Ce}),Ce?j.children[Xe].style.display="none":(Pe=Me.length-1,j.children[Xe].style.display="block")}function ke(){var Ae,de=!1;for(Ae in Me)Me.hasOwnProperty(Ae)&&ae[Ae].minWidth&&j.offsetWidth>ae[Ae].minWidth&&(de=Ae);if(de||(de=Pe),He!==de)if(Qe[de])Me[He].style.display="none",Me[de].style.display="block",He=de;else{var nt=new Image;nt.onload=function(){Me[de].src=xe[de],Me[He].style.display="none",Me[de].style.display="block",Qe[de]=!0,He=de},nt.src=xe[de]}else Me[de].src=xe[de]}He=Pe,j.resizeSensorInstance=new G(j,ke),ke()}var k=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,v=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function I(j){var Me,ae,xe,Pe;for(j=j.replace(/'/g,'"');null!==(Me=k.exec(j));)for(ae=Me[1]+Me[3],xe=Me[2];null!==(Pe=v.exec(xe));)se(ae,Pe[1],Pe[2],Pe[3])}function T(j){var Me="";if(j)if("string"==typeof j)(-1!==(j=j.toLowerCase()).indexOf("min-width")||-1!==j.indexOf("max-width"))&&I(j);else for(var ae=0,xe=j.length;ae<xe;ae++)1===j[ae].type?(-1!==(Me=j[ae].selectorText||j[ae].cssText).indexOf("min-height")||-1!==Me.indexOf("max-height")||-1!==Me.indexOf("min-width")||-1!==Me.indexOf("max-width"))&&I(Me):4===j[ae].type?T(j[ae].cssRules||j[ae].rules):3===j[ae].type&&j[ae].styleSheet.hasOwnProperty("cssRules")&&T(j[ae].styleSheet.cssRules)}var le=!1;this.init=function(){var j="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?j="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?j="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(j="oanimationstart"),document.body.addEventListener(j,function(xe){var Pe=xe.target,He=Pe&&window.getComputedStyle(Pe,null),Qe=He&&He.getPropertyValue("animation-name");if(Qe&&-1!==Qe.indexOf("element-queries")){Pe.elementQueriesSensor=new G(Pe,function(){Pe.elementQueriesSetupInformation&&Pe.elementQueriesSetupInformation.call()});var je=window.getComputedStyle(Pe.resizeSensor,null).getPropertyValue("min-width");je=parseInt(je.replace("px","")),B(xe.target,z[je])}}),le||((E=document.createElement("style")).type="text/css",E.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",E.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(E),le=!0);for(var Me=0,ae=document.styleSheets.length;Me<ae;Me++)try{document.styleSheets[Me].href&&0===document.styleSheets[Me].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Me].href),T(document.styleSheets[Me].cssRules||document.styleSheets[Me].rules||document.styleSheets[Me].cssText)}catch{}!function W(){for(var Me=Y()("[data-responsive-image],[responsive-image]"),ae=0,xe=Me.length;ae<xe;ae++)ee(Me[ae])}()},this.findElementQueriesElements=function(j){!function J(j){var Me=Y(j);for(var ae in N)if(N.hasOwnProperty(ae))for(var xe=Me(ae,j),Pe=0,He=xe.length;Pe<He;Pe++)B(xe[Pe],ae)}(j)},this.update=function(){this.init()}};q.update=function(){q.instance.update()},q.detach=function(E){E.elementQueriesSetupInformation?(E.elementQueriesSensor.detach(),delete E.elementQueriesSetupInformation,delete E.elementQueriesSensor):E.resizeSensorInstance&&(E.resizeSensorInstance.detach(),delete E.resizeSensorInstance)},q.init=function(){q.instance||(q.instance=new q),q.instance.init()};return q.findElementQueriesElements=function(E){q.instance.findElementQueriesElements(E)},q.listen=function(){!function(E){if(document.addEventListener)document.addEventListener("DOMContentLoaded",E,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var N=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(E(),clearInterval(N))},10);else window.onload=E}(q.init)},q})?Q.apply(_e,C):Q)&&(Ue.exports=$)},884:function(Ue,_e,S){"use strict";var Q,C;typeof window<"u"&&window,void 0!==(C="function"==typeof(Q=function(){if(typeof window>"u")return null;var $=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),G=$.requestAnimationFrame||$.mozRequestAnimationFrame||$.webkitRequestAnimationFrame||function(F){return $.setTimeout(F,20)},q=$.cancelAnimationFrame||$.mozCancelAnimationFrame||$.webkitCancelAnimationFrame||function(F){$.clearTimeout(F)};function _(F,oe){var x=Object.prototype.toString.call(F),B="[object Array]"===x||"[object NodeList]"===x||"[object HTMLCollection]"===x||"[object Object]"===x||typeof jQuery<"u"&&F instanceof jQuery||typeof Elements<"u"&&F instanceof Elements,se=0,Y=F.length;if(B)for(;se<Y;se++)oe(F[se]);else oe(F)}function E(F){if(!F.getBoundingClientRect)return{width:F.offsetWidth,height:F.offsetHeight};var oe=F.getBoundingClientRect();return{width:Math.round(oe.width),height:Math.round(oe.height)}}function N(F,oe){Object.keys(oe).forEach(function(x){F.style[x]=oe[x]})}var z=function(F,oe){var x=0;function B(){var J,ee,Y=[];this.add=function(W){Y.push(W)},this.call=function(W){for(J=0,ee=Y.length;J<ee;J++)Y[J].call(this,W)},this.remove=function(W){var k=[];for(J=0,ee=Y.length;J<ee;J++)Y[J]!==W&&k.push(Y[J]);Y=k},this.length=function(){return Y.length}}function se(Y,J){if(Y){if(Y.resizedAttached)return void Y.resizedAttached.add(J);Y.resizedAttached=new B,Y.resizedAttached.add(J),Y.resizeSensor=document.createElement("div"),Y.resizeSensor.dir="ltr",Y.resizeSensor.className="resize-sensor";var ee={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},W={position:"absolute",left:"0px",top:"0px",transition:"0s"};N(Y.resizeSensor,ee);var k=document.createElement("div");k.className="resize-sensor-expand",N(k,ee);var v=document.createElement("div");N(v,W),k.appendChild(v);var I=document.createElement("div");I.className="resize-sensor-shrink",N(I,ee);var T=document.createElement("div");N(T,W),N(T,{width:"200%",height:"200%"}),I.appendChild(T),Y.resizeSensor.appendChild(k),Y.resizeSensor.appendChild(I),Y.appendChild(Y.resizeSensor);var le=window.getComputedStyle(Y),j=le?le.getPropertyValue("position"):null;"absolute"!==j&&"relative"!==j&&"fixed"!==j&&"sticky"!==j&&(Y.style.position="relative");var Me=!1,ae=0,xe=E(Y),Pe=0,He=0,Qe=!0;x=0;var Ce=function(){if(Qe){if(0===Y.offsetWidth&&0===Y.offsetHeight)return void(x||(x=G(function(){x=0,Ce()})));Qe=!1}var de,Ae;Ae=Y.offsetHeight,v.style.width=(de=Y.offsetWidth)+10+"px",v.style.height=Ae+10+"px",k.scrollLeft=de+10,k.scrollTop=Ae+10,I.scrollLeft=de+10,I.scrollTop=Ae+10};Y.resizeSensor.resetSensor=Ce;var je=function(){ae=0,Me&&(Pe=xe.width,He=xe.height,Y.resizedAttached&&Y.resizedAttached.call(xe))},Se=function(){xe=E(Y),(Me=xe.width!==Pe||xe.height!==He)&&!ae&&(ae=G(je)),Ce()},ke=function(de,Ae,nt){de.attachEvent?de.attachEvent("on"+Ae,nt):de.addEventListener(Ae,nt)};ke(k,"scroll",Se),ke(I,"scroll",Se),x=G(function(){x=0,Ce()})}}_(F,function(Y){se(Y,oe)}),this.detach=function(Y){x||(q(x),x=0),z.detach(F,Y)},this.reset=function(){F.resizeSensor.resetSensor()}};if(z.reset=function(F){_(F,function(oe){oe.resizeSensor.resetSensor()})},z.detach=function(F,oe){_(F,function(x){x&&(x.resizedAttached&&"function"==typeof oe&&(x.resizedAttached.remove(oe),x.resizedAttached.length())||x.resizeSensor&&(x.contains(x.resizeSensor)&&x.removeChild(x.resizeSensor),delete x.resizeSensor,delete x.resizedAttached))})},typeof MutationObserver<"u"){var P=new MutationObserver(function(F){for(var oe in F)if(F.hasOwnProperty(oe))for(var x=F[oe].addedNodes,B=0;B<x.length;B++)x[B].resizeSensor&&z.reset(x[B])});document.addEventListener("DOMContentLoaded",function(F){P.observe(document.body,{childList:!0,subtree:!0})})}return z})?Q.call(_e,S,_e,Ue):Q)&&(Ue.exports=C)},2016:Ue=>{"use strict";var Q,_e="object"==typeof Reflect?Reflect:null,S=_e&&"function"==typeof _e.apply?_e.apply:function(k,v,I){return Function.prototype.apply.call(k,v,I)};Q=_e&&"function"==typeof _e.ownKeys?_e.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var $=Number.isNaN||function(k){return k!=k};function G(){G.init.call(this)}Ue.exports=G,Ue.exports.once=function Y(W,k){return new Promise(function(v,I){function T(j){W.removeListener(k,le),I(j)}function le(){"function"==typeof W.removeListener&&W.removeListener("error",T),v([].slice.call(arguments))}ee(W,k,le,{once:!0}),"error"!==k&&function J(W,k,v){"function"==typeof W.on&&ee(W,"error",k,v)}(W,T,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var q=10;function _(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function E(W){return void 0===W._maxListeners?G.defaultMaxListeners:W._maxListeners}function N(W,k,v,I){var T,le,j;if(_(v),void 0===(le=W._events)?(le=W._events=Object.create(null),W._eventsCount=0):(void 0!==le.newListener&&(W.emit("newListener",k,v.listener?v.listener:v),le=W._events),j=le[k]),void 0===j)j=le[k]=v,++W._eventsCount;else if("function"==typeof j?j=le[k]=I?[v,j]:[j,v]:I?j.unshift(v):j.push(v),(T=E(W))>0&&j.length>T&&!j.warned){j.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=W,Me.type=k,Me.count=j.length,function C(W){console&&console.warn&&console.warn(W)}(Me)}return W}function z(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(W,k,v){var I={fired:!1,wrapFn:void 0,target:W,type:k,listener:v},T=z.bind(I);return T.listener=v,I.wrapFn=T,T}function F(W,k,v){var I=W._events;if(void 0===I)return[];var T=I[k];return void 0===T?[]:"function"==typeof T?v?[T.listener||T]:[T]:v?function se(W){for(var k=new Array(W.length),v=0;v<k.length;++v)k[v]=W[v].listener||W[v];return k}(T):x(T,T.length)}function oe(W){var k=this._events;if(void 0!==k){var v=k[W];if("function"==typeof v)return 1;if(void 0!==v)return v.length}return 0}function x(W,k){for(var v=new Array(k),I=0;I<k;++I)v[I]=W[I];return v}function ee(W,k,v,I){if("function"==typeof W.on)I.once?W.once(k,v):W.on(k,v);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(k,function T(le){I.once&&W.removeEventListener(k,T),v(le)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(W){if("number"!=typeof W||W<0||$(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");q=W}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(k){if("number"!=typeof k||k<0||$(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},G.prototype.getMaxListeners=function(){return E(this)},G.prototype.emit=function(k){for(var v=[],I=1;I<arguments.length;I++)v.push(arguments[I]);var T="error"===k,le=this._events;if(void 0!==le)T=T&&void 0===le.error;else if(!T)return!1;if(T){var j;if(v.length>0&&(j=v[0]),j instanceof Error)throw j;var Me=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw Me.context=j,Me}var ae=le[k];if(void 0===ae)return!1;if("function"==typeof ae)S(ae,this,v);else{var xe=ae.length,Pe=x(ae,xe);for(I=0;I<xe;++I)S(Pe[I],this,v)}return!0},G.prototype.on=G.prototype.addListener=function(k,v){return N(this,k,v,!1)},G.prototype.prependListener=function(k,v){return N(this,k,v,!0)},G.prototype.once=function(k,v){return _(v),this.on(k,P(this,k,v)),this},G.prototype.prependOnceListener=function(k,v){return _(v),this.prependListener(k,P(this,k,v)),this},G.prototype.off=G.prototype.removeListener=function(k,v){var I,T,le,j,Me;if(_(v),void 0===(T=this._events))return this;if(void 0===(I=T[k]))return this;if(I===v||I.listener===v)0==--this._eventsCount?this._events=Object.create(null):(delete T[k],T.removeListener&&this.emit("removeListener",k,I.listener||v));else if("function"!=typeof I){for(le=-1,j=I.length-1;j>=0;j--)if(I[j]===v||I[j].listener===v){Me=I[j].listener,le=j;break}if(le<0)return this;0===le?I.shift():function B(W,k){for(;k+1<W.length;k++)W[k]=W[k+1];W.pop()}(I,le),1===I.length&&(T[k]=I[0]),void 0!==T.removeListener&&this.emit("removeListener",k,Me||v)}return this},G.prototype.removeAllListeners=function(k){var v,I,T;if(void 0===(I=this._events))return this;if(void 0===I.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==I[k]&&(0==--this._eventsCount?this._events=Object.create(null):delete I[k]),this;if(0===arguments.length){var j,le=Object.keys(I);for(T=0;T<le.length;++T)"removeListener"!==(j=le[T])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(v=I[k]))this.removeListener(k,v);else if(void 0!==v)for(T=v.length-1;T>=0;T--)this.removeListener(k,v[T]);return this},G.prototype.listeners=function(k){return F(this,k,!0)},G.prototype.rawListeners=function(k){return F(this,k,!1)},G.listenerCount=function(W,k){return"function"==typeof W.listenerCount?W.listenerCount(k):oe.call(W,k)},G.prototype.listenerCount=oe,G.prototype.eventNames=function(){return this._eventsCount>0?Q(this._events):[]}},7991:(Ue,_e,S)=>{var Q=S(6943),C=S(9151),$=S(2323);function G(F,oe,x){if(!Q(F))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!F.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');if(!F.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" target node does not exist in the given graph.');if((oe=""+oe)==(x=""+x))return[oe];var B=F.inboundNeighbors.bind(F),se=F.outboundNeighbors.bind(F),Y={},J={};Y[oe]=null,J[x]=null;var k,v,I,T,le,j,Me,ae,ee=[oe],W=[x],xe=!1;e:for(;ee.length&&W.length;)if(ee.length<=W.length){for(k=ee,ee=[],le=0,Me=k.length;le<Me;le++)for(j=0,ae=(I=se(v=k[le])).length;j<ae;j++)if((T=I[j])in Y||(ee.push(T),Y[T]=v),T in J){xe=!0;break e}}else for(k=W,W=[],le=0,Me=k.length;le<Me;le++)for(v=k[le],I=B(v),j=0,ae=I.length;j<ae;j++)if(T=I[j],T in J||(W.push(T),J[T]=v),T in Y){xe=!0;break e}if(!xe)return null;for(var Pe=[];T;)Pe.unshift(T),T=Y[T];for(T=J[Pe[Pe.length-1]];T;)Pe.push(T),T=J[T];return Pe.length?Pe:null}function q(F,oe){if(!Q(F))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!F.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');var se,Y,J,ee,W,k,x={},B={};for(x[oe=""+oe]=!0,B[oe]=[oe];Object.keys(x).length;)for(J in se=x,x={},se)for(W=0,k=(Y=F.outboundNeighbors(J)).length;W<k;W++)B[ee=Y[W]]||(B[ee]=B[J].concat(ee),x[ee]=!0);return B}function _(F,oe,x){if(!Q(oe))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!oe.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" source node does not exist in the given graph.');x=""+x;var B=new Set,se={},Y=0;se[x]=0;for(var ee,W,k,J=[x];0!==J.length;){var v=[];for(ee=0,W=J.length;ee<W;ee++)!B.has(k=J[ee])&&(B.add(k),$(v,oe[F](k)),se[k]=Y);Y++,J=v}return se}var E=_.bind(null,"outboundNeighbors"),N=_.bind(null,"neighbors");function z(F,oe,x){return arguments.length<3?q(F,oe):G(F,oe,x)}z.bidirectional=G,z.singleSource=q,z.singleSourceLength=E,z.undirectedSingleSourceLength=N,z.brandes=function P(F,oe){oe=""+oe;var J,ee,W,k,v,I,T,le,j,x=[],B={},se={},Y=F.nodes();for(I=0,le=Y.length;I<le;I++)B[k=Y[I]]=[],se[k]=0;var Me={};se[oe]=1,Me[oe]=0;for(var ae=C.of(oe);ae.size;)for(k=ae.dequeue(),x.push(k),J=Me[k],ee=se[k],T=0,j=(W=F.outboundNeighbors(k)).length;T<j;T++)(v=W[T])in Me||(ae.enqueue(v),Me[v]=J+1),Me[v]===J+1&&(se[v]+=ee,B[v].push(k));return[x,B,se]},Ue.exports=z},6943:Ue=>{Ue.exports=function(S){return null!==S&&"object"==typeof S&&"function"==typeof S.addUndirectedEdgeWithKey&&"function"==typeof S.dropNode&&"boolean"==typeof S.multi}},4938:function(Ue){Ue.exports=function(){"use strict";function _e(ye){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(ye)}function S(ye,Te){ye.prototype=Object.create(Te.prototype),ye.prototype.constructor=ye,C(ye,Te)}function Q(ye){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(ye)}function C(ye,Te){return(C=Object.setPrototypeOf||function(me,D){return me.__proto__=D,me})(ye,Te)}function G(ye,Te,me){return(G=function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(D,X,ge){var Fe=[null];Fe.push.apply(Fe,X);var Ye=new(Function.bind.apply(D,Fe));return ge&&C(Ye,ge.prototype),Ye}).apply(null,arguments)}function q(ye){var Te="function"==typeof Map?new Map:void 0;return(q=function(me){if(null===me||-1===Function.toString.call(me).indexOf("[native code]"))return me;if("function"!=typeof me)throw new TypeError("Super expression must either be null or a function");if(void 0!==Te){if(Te.has(me))return Te.get(me);Te.set(me,X)}function X(){return G(me,arguments,Q(this).constructor)}return X.prototype=Object.create(me.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),C(X,me)})(ye)}function _(ye){if(void 0===ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}var E=function(){for(var ye=arguments[0],Te=1,me=arguments.length;Te<me;Te++)if(arguments[Te])for(var D in arguments[Te])ye[D]=arguments[Te][D];return ye};function N(ye,Te,me,D){var X=ye._nodes.get(Te),ge=null;return X?ge="mixed"===D?X.out&&X.out[me]||X.undirected&&X.undirected[me]:"directed"===D?X.out&&X.out[me]:X.undirected&&X.undirected[me]:ge}function P(ye){return"object"===_e(ye)&&null!==ye&&ye.constructor===Object}function F(ye){var Te;for(Te in ye)return!1;return!0}function oe(ye,Te,me){Object.defineProperty(ye,Te,{enumerable:!1,configurable:!1,writable:!0,value:me})}function x(ye,Te,me){var D={enumerable:!0,configurable:!0};"function"==typeof me?D.get=me:(D.value=me,D.writable=!1),Object.defineProperty(ye,Te,D)}function B(ye){return!(!P(ye)||ye.attributes&&!Array.isArray(ye.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var se,Y={exports:{}},J="object"==typeof Reflect?Reflect:null,ee=J&&"function"==typeof J.apply?J.apply:function(ye,Te,me){return Function.prototype.apply.call(ye,Te,me)};se=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(ye){return Object.getOwnPropertyNames(ye).concat(Object.getOwnPropertySymbols(ye))}:function(ye){return Object.getOwnPropertyNames(ye)};var W=Number.isNaN||function(ye){return ye!=ye};function k(){k.init.call(this)}Y.exports=k,Y.exports.once=function(ye,Te){return new Promise(function(me,D){function X(Fe){ye.removeListener(Te,ge),D(Fe)}function ge(){"function"==typeof ye.removeListener&&ye.removeListener("error",X),me([].slice.call(arguments))}var Fe;He(ye,Te,ge,{once:!0}),"error"!==Te&&("function"==typeof(Fe=ye).on&&He(Fe,"error",X,{once:!0}))})},k.EventEmitter=k,k.prototype._events=void 0,k.prototype._eventsCount=0,k.prototype._maxListeners=void 0;var v=10;function I(ye){if("function"!=typeof ye)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ye)}function T(ye){return void 0===ye._maxListeners?k.defaultMaxListeners:ye._maxListeners}function le(ye,Te,me,D){var X,ge,Fe;if(I(me),void 0===(ge=ye._events)?(ge=ye._events=Object.create(null),ye._eventsCount=0):(void 0!==ge.newListener&&(ye.emit("newListener",Te,me.listener?me.listener:me),ge=ye._events),Fe=ge[Te]),void 0===Fe)Fe=ge[Te]=me,++ye._eventsCount;else if("function"==typeof Fe?Fe=ge[Te]=D?[me,Fe]:[Fe,me]:D?Fe.unshift(me):Fe.push(me),(X=T(ye))>0&&Fe.length>X&&!Fe.warned){Fe.warned=!0;var ze=new Error("Possible EventEmitter memory leak detected. "+Fe.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");ze.name="MaxListenersExceededWarning",ze.emitter=ye,ze.type=Te,ze.count=Fe.length,console&&console.warn&&console.warn(ze)}return ye}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Me(ye,Te,me){var D={fired:!1,wrapFn:void 0,target:ye,type:Te,listener:me},X=j.bind(D);return X.listener=me,D.wrapFn=X,X}function ae(ye,Te,me){var D=ye._events;if(void 0===D)return[];var X=D[Te];return void 0===X?[]:"function"==typeof X?me?[X.listener||X]:[X]:me?function(ge){for(var Fe=new Array(ge.length),Ye=0;Ye<Fe.length;++Ye)Fe[Ye]=ge[Ye].listener||ge[Ye];return Fe}(X):Pe(X,X.length)}function xe(ye){var Te=this._events;if(void 0!==Te){var me=Te[ye];if("function"==typeof me)return 1;if(void 0!==me)return me.length}return 0}function Pe(ye,Te){for(var me=new Array(Te),D=0;D<Te;++D)me[D]=ye[D];return me}function He(ye,Te,me,D){if("function"==typeof ye.on)D.once?ye.once(Te,me):ye.on(Te,me);else{if("function"!=typeof ye.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ye);ye.addEventListener(Te,function X(ge){D.once&&ye.removeEventListener(Te,X),me(ge)})}}function Qe(ye){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ye}),this.done=!1}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(ye){if("number"!=typeof ye||ye<0||W(ye))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ye+".");v=ye}}),k.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(ye){if("number"!=typeof ye||ye<0||W(ye))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ye+".");return this._maxListeners=ye,this},k.prototype.getMaxListeners=function(){return T(this)},k.prototype.emit=function(ye){for(var Te=[],me=1;me<arguments.length;me++)Te.push(arguments[me]);var D="error"===ye,X=this._events;if(void 0!==X)D=D&&void 0===X.error;else if(!D)return!1;if(D){var ge;if(Te.length>0&&(ge=Te[0]),ge instanceof Error)throw ge;var Fe=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw Fe.context=ge,Fe}var Ye=X[ye];if(void 0===Ye)return!1;if("function"==typeof Ye)ee(Ye,this,Te);else{var ze=Ye.length,Tt=Pe(Ye,ze);for(me=0;me<ze;++me)ee(Tt[me],this,Te)}return!0},k.prototype.addListener=function(ye,Te){return le(this,ye,Te,!1)},k.prototype.on=k.prototype.addListener,k.prototype.prependListener=function(ye,Te){return le(this,ye,Te,!0)},k.prototype.once=function(ye,Te){return I(Te),this.on(ye,Me(this,ye,Te)),this},k.prototype.prependOnceListener=function(ye,Te){return I(Te),this.prependListener(ye,Me(this,ye,Te)),this},k.prototype.removeListener=function(ye,Te){var me,D,X,ge,Fe;if(I(Te),void 0===(D=this._events))return this;if(void 0===(me=D[ye]))return this;if(me===Te||me.listener===Te)0==--this._eventsCount?this._events=Object.create(null):(delete D[ye],D.removeListener&&this.emit("removeListener",ye,me.listener||Te));else if("function"!=typeof me){for(X=-1,ge=me.length-1;ge>=0;ge--)if(me[ge]===Te||me[ge].listener===Te){Fe=me[ge].listener,X=ge;break}if(X<0)return this;0===X?me.shift():function(Ye,ze){for(;ze+1<Ye.length;ze++)Ye[ze]=Ye[ze+1];Ye.pop()}(me,X),1===me.length&&(D[ye]=me[0]),void 0!==D.removeListener&&this.emit("removeListener",ye,Fe||Te)}return this},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(ye){var Te,me,D;if(void 0===(me=this._events))return this;if(void 0===me.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==me[ye]&&(0==--this._eventsCount?this._events=Object.create(null):delete me[ye]),this;if(0===arguments.length){var X,ge=Object.keys(me);for(D=0;D<ge.length;++D)"removeListener"!==(X=ge[D])&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Te=me[ye]))this.removeListener(ye,Te);else if(void 0!==Te)for(D=Te.length-1;D>=0;D--)this.removeListener(ye,Te[D]);return this},k.prototype.listeners=function(ye){return ae(this,ye,!0)},k.prototype.rawListeners=function(ye){return ae(this,ye,!1)},k.listenerCount=function(ye,Te){return"function"==typeof ye.listenerCount?ye.listenerCount(Te):xe.call(ye,Te)},k.prototype.listenerCount=xe,k.prototype.eventNames=function(){return this._eventsCount>0?se(this._events):[]},Qe.prototype.next=function(){if(this.done)return{done:!0};var ye=this._next();return ye.done&&(this.done=!0),ye},typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this}),Qe.of=function(){var ye=arguments,Te=ye.length,me=0;return new Qe(function(){return me>=Te?{done:!0}:{done:!1,value:ye[me++]}})},Qe.empty=function(){var ye=new Qe(null);return ye.done=!0,ye},Qe.is=function(ye){return ye instanceof Qe||"object"==typeof ye&&null!==ye&&"function"==typeof ye.next};var Xe=Qe,Ce=function(ye,Te){for(var me,D=arguments.length>1?Te:1/0,X=D!==1/0?new Array(D):[],ge=0;;){if(ge===D)return X;if((me=ye.next()).done)return ge!==Te?X.slice(0,ge):X;X[ge++]=me.value}},je=function(ye){function Te(me,D){var X;return(X=ye.call(this)||this).name="GraphError",X.message=me||"",X.data=D||{},X}return S(Te,ye),Te}(q(Error)),Se=function(ye){function Te(me,D){var X;return(X=ye.call(this,me,D)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(X),Te.prototype.constructor),X}return S(Te,ye),Te}(je),ke=function(ye){function Te(me,D){var X;return(X=ye.call(this,me,D)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(X),Te.prototype.constructor),X}return S(Te,ye),Te}(je),de=function(ye){function Te(me,D){var X;return(X=ye.call(this,me,D)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(X),Te.prototype.constructor),X}return S(Te,ye),Te}(je);function Ae(ye,Te){this.key=ye,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function nt(ye,Te){this.key=ye,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function _t(ye,Te){this.key=ye,this.attributes=Te,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ke(ye,Te,me,D,X,ge){this.key=Te,this.attributes=ge,this.undirected=ye,this.source=D,this.target=X,this.generatedKey=me}function fe(ye,Te,me,D,X,ge,Fe){var Ye,ze,Tt="out",Nt="in";if(Te&&(Tt=Nt="undirected"),ye.multi){if(void 0===(ze=(Ye=ge[Tt])[X])&&(Ye[X]=ze=new Set),ze.add(me),D===X&&Te)return;void 0===(Ye=Fe[Nt])[D]&&(Ye[D]=ze)}else{if(ge[Tt][X]=me,D===X&&Te)return;Fe[Nt][D]=me}}nt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},_t.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var A=[{name:function(ye){return"get".concat(ye,"Attribute")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X){var ge;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+X;if(X=arguments[2],!(ge=N(this,Fe,Ye,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(ge=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==me&&ge.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return ge.attributes[X]}}},{name:function(ye){return"get".concat(ye,"Attributes")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D){var X;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ge=""+D,Fe=""+arguments[1];if(!(X=N(this,ge,Fe,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(ge,'" - "').concat(Fe,'").'))}else if(!(X=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==me&&X.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return X.attributes}}},{name:function(ye){return"has".concat(ye,"Attribute")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X){var ge;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+X;if(X=arguments[2],!(ge=N(this,Fe,Ye,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(ge=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==me&&ge.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return ge.attributes.hasOwnProperty(X)}}},{name:function(ye){return"set".concat(ye,"Attribute")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X,ge){var Fe;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ye=""+D,ze=""+X;if(X=arguments[2],ge=arguments[3],!(Fe=N(this,Ye,ze,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Ye,'" - "').concat(ze,'").'))}else if(!(Fe=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==me&&Fe.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return Fe.attributes[X]=ge,this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:X}),this}}},{name:function(ye){return"update".concat(ye,"Attribute")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X,ge){var Fe;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ye=""+D,ze=""+X;if(X=arguments[2],ge=arguments[3],!(Fe=N(this,Ye,ze,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Ye,'" - "').concat(ze,'").'))}else if(!(Fe=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("function"!=typeof ge)throw new Se("Graph.".concat(Te,": updater should be a function."));if("mixed"!==me&&Fe.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return Fe.attributes[X]=ge(Fe.attributes[X]),this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:X}),this}}},{name:function(ye){return"remove".concat(ye,"Attribute")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X){var ge;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+X;if(X=arguments[2],!(ge=N(this,Fe,Ye,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(ge=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==me&&ge.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return delete ge.attributes[X],this.emit("edgeAttributesUpdated",{key:ge.key,type:"remove",attributes:ge.attributes,name:X}),this}}},{name:function(ye){return"replace".concat(ye,"Attributes")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X){var ge;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+X;if(X=arguments[2],!(ge=N(this,Fe,Ye,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(ge=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if(!P(X))throw new Se("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==me&&ge.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return ge.attributes=X,this.emit("edgeAttributesUpdated",{key:ge.key,type:"replace",attributes:ge.attributes}),this}}},{name:function(ye){return"merge".concat(ye,"Attributes")},attacher:function(ye,Te,me){ye.prototype[Te]=function(D,X){var ge;if("mixed"!==this.type&&"mixed"!==me&&me!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+X;if(X=arguments[2],!(ge=N(this,Fe,Ye,me)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(ge=this._edges.get(D=""+D)))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if(!P(X))throw new Se("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==me&&ge.undirected!==("undirected"===me))throw new ke("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(me," edge in the graph."));return E(ge.attributes,X),this.emit("edgeAttributesUpdated",{key:ge.key,type:"merge",attributes:ge.attributes,data:X}),this}}}],ie=Xe,Z=function(){var ye,Te=arguments,me=-1;return new ie(function D(){if(!ye){if(++me>=Te.length)return{done:!0};ye=Te[me]}var X=ye.next();return X.done?(ye=null,D()):X})},Ve=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Je(ye,Te){for(var me in Te)ye.push(Te[me].key)}function ue(ye,Te){for(var me in Te)Te[me].forEach(function(D){return ye.push(D.key)})}function ne(ye,Te,me){for(var D in ye)if(D!==me){var X=ye[D];Te(X.key,X.attributes,X.source.key,X.target.key,X.source.attributes,X.target.attributes,X.undirected,X.generatedKey)}}function U(ye,Te,me){for(var D in ye)D!==me&&ye[D].forEach(function(X){return Te(X.key,X.attributes,X.source.key,X.target.key,X.source.attributes,X.target.attributes,X.undirected,X.generatedKey)})}function M(ye,Te,me){for(var D in ye)if(D!==me){var X=ye[D];if(Te(X.key,X.attributes,X.source.key,X.target.key,X.source.attributes,X.target.attributes,X.undirected,X.generatedKey))return!0}return!1}function O(ye,Te,me){var D,X,ge,Fe,Ye;for(var ze in ye)if(ze!==me)for(D=ye[ze].values();!0!==(X=D.next()).done;)if(Fe=(ge=X.value).source,Te(ge.key,ge.attributes,Fe.key,(Ye=ge.target).key,Fe.attributes,Ye.attributes,ge.undirected,ge.generatedKey))return!0;return!1}function he(ye,Te){var me=Object.keys(ye),D=me.length,X=null,ge=0;return new Xe(function Fe(){var Ye;if(X){var ze=X.next();if(ze.done)return X=null,ge++,Fe();Ye=ze.value}else{if(ge>=D)return{done:!0};var Tt=me[ge];if(Tt===Te)return ge++,Fe();if((Ye=ye[Tt])instanceof Set)return X=Ye.values(),Fe();ge++}return{done:!1,value:[Ye.key,Ye.attributes,Ye.source.key,Ye.target.key,Ye.source.attributes,Ye.target.attributes]}})}function We(ye,Te,me){var D=Te[me];D&&ye.push(D.key)}function Ee(ye,Te,me){var D=Te[me];D&&D.forEach(function(X){return ye.push(X.key)})}function Re(ye,Te,me){var D=ye[Te];if(D){var X=D.source,ge=D.target;me(D.key,D.attributes,X.key,ge.key,X.attributes,ge.attributes,D.undirected,D.generatedKey)}}function ot(ye,Te,me){var D=ye[Te];D&&D.forEach(function(X){return me(X.key,X.attributes,X.source.key,X.target.key,X.source.attributes,X.target.attributes,X.undirected,X.generatedKey)})}function bt(ye,Te,me){var D=ye[Te];if(D){var X=D.source,ge=D.target;return me(D.key,D.attributes,X.key,ge.key,X.attributes,ge.attributes,D.undirected,D.generatedKey)}}function It(ye,Te,me){var D=ye[Te];if(D){for(var X,ge,Fe=D.values();!0!==(X=Fe.next()).done;)if(me((ge=X.value).key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes,ge.undirected,ge.generatedKey))return!0;return!1}}function mt(ye,Te){var me=ye[Te];if(me instanceof Set){var D=me.values();return new Xe(function(){var X=D.next();if(X.done)return X;var ge=X.value;return{done:!1,value:[ge.key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes]}})}return Xe.of([me.key,me.attributes,me.source.key,me.target.key,me.source.attributes,me.target.attributes])}var wn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ji(ye,Te){if(void 0!==Te)for(var me in Te)ye.add(me)}function xr(ye,Te,me){for(var D in Te){var X=Te[D];X instanceof Set&&(X=X.values().next().value);var ge=X.source,Ye=ge===ye?X.target:ge;me(Ye.key,Ye.attributes)}}function Jr(ye,Te,me,D){for(var X in me){var ge=me[X];ge instanceof Set&&(ge=ge.values().next().value);var Fe=ge.source,ze=Fe===Te?ge.target:Fe;ye.has(ze.key)||(ye.add(ze.key),D(ze.key,ze.attributes))}}function Vo(ye,Te,me){for(var D in Te){var X=Te[D];X instanceof Set&&(X=X.values().next().value);var ge=X.source,Ye=ge===ye?X.target:ge;if(me(Ye.key,Ye.attributes))return!0}return!1}function vi(ye,Te,me,D){for(var X in me){var ge=me[X];ge instanceof Set&&(ge=ge.values().next().value);var Fe=ge.source,ze=Fe===Te?ge.target:Fe;if(!ye.has(ze.key)&&(ye.add(ze.key),D(ze.key,ze.attributes)))return!0}return!1}function Br(ye,Te){var me=Object.keys(Te),D=me.length,X=0;return new Xe(function(){if(X>=D)return{done:!0};var ge=Te[me[X++]];ge instanceof Set&&(ge=ge.values().next().value);var Fe=ge.source,ze=Fe===ye?ge.target:Fe;return{done:!1,value:[ze.key,ze.attributes]}})}function da(ye,Te,me){var D=Object.keys(me),X=D.length,ge=0;return new Xe(function Fe(){if(ge>=X)return{done:!0};var Ye=me[D[ge++]];Ye instanceof Set&&(Ye=Ye.values().next().value);var ze=Ye.source,Nt=ze===Te?Ye.target:ze;return ye.has(Nt.key)?Fe():(ye.add(Nt.key),{done:!1,value:[Nt.key,Nt.attributes]})})}function $e(ye,Te,me){for(var D,X,ge,Fe,Ye,ze,Tt,Nt=Te._nodes.values(),Ut=Te.type;!0!==(D=Nt.next()).done;){if(X=D.value,"undirected"!==Ut)for(ge in Fe=X.out)if(ze=(Ye=Fe[ge]).target,Tt=me(X.key,ze.key,X.attributes,ze.attributes,Ye.key,Ye.attributes,Ye.undirected,Ye.generatedKey),ye&&Tt)return;if("directed"!==Ut)for(ge in Fe=X.undirected)if((ze=(Ye=Fe[ge]).target).key!==ge&&(ze=Ye.source),Tt=me(X.key,ze.key,X.attributes,ze.attributes,Ye.key,Ye.attributes,Ye.undirected,Ye.generatedKey),ye&&Tt)return}}function Ze(ye,Te,me){for(var D,X,ge,Fe,Ye,ze,Tt,Nt,Ut,nn=Te._nodes.values(),mn=Te.type;!0!==(D=nn.next()).done;){if(X=D.value,"undirected"!==mn)for(ge in ze=X.out)for(Fe=ze[ge].values();!0!==(Ye=Fe.next()).done;)if(Nt=(Tt=Ye.value).target,Ut=me(X.key,Nt.key,X.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ye&&Ut)return;if("directed"!==mn)for(ge in ze=X.undirected)for(Fe=ze[ge].values();!0!==(Ye=Fe.next()).done;)if((Nt=(Tt=Ye.value).target).key!==ge&&(Nt=Tt.source),Ut=me(X.key,Nt.key,X.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ye&&Ut)return}}function St(ye,Te){var me={key:ye};return F(Te.attributes)||(me.attributes=E({},Te.attributes)),me}function Gt(ye,Te){var me={source:Te.source.key,target:Te.target.key};return Te.generatedKey||(me.key=ye),F(Te.attributes)||(me.attributes=E({},Te.attributes)),Te.undirected&&(me.undirected=!0),me}var Zr=new Set(["directed","undirected","mixed"]),Jt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Js={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ni(ye,Te,me){var D=new ye.NodeDataClass(Te,me);return ye._nodes.set(Te,D),ye.emit("nodeAdded",{key:Te,attributes:me}),D}function dc(ye,Te,me,D,X,ge,Fe,Ye){if(!D&&"undirected"===ye.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(D&&"directed"===ye.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Ye&&!P(Ye))throw new Se("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat(Ye,'"'));if(ge=""+ge,Fe=""+Fe,Ye=Ye||{},!ye.allowSelfLoops&&ge===Fe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ze=ye._nodes.get(ge),Tt=ye._nodes.get(Fe);if(!ze)throw new ke("Graph.".concat(Te,': source node "').concat(ge,'" not found.'));if(!Tt)throw new ke("Graph.".concat(Te,': target node "').concat(Fe,'" not found.'));var Nt={key:null,undirected:D,source:ge,target:Fe,attributes:Ye};if(me&&(X=ye._edgeKeyGenerator(Nt)),ye._edges.has(X=""+X))throw new de("Graph.".concat(Te,': the "').concat(X,'" edge already exists in the graph.'));if(!ye.multi&&(D?void 0!==ze.undirected[Fe]:void 0!==ze.out[Fe]))throw new de("Graph.".concat(Te,': an edge linking "').concat(ge,'" to "').concat(Fe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Ut=new Ke(D,X,me,ze,Tt,Ye);return ye._edges.set(X,Ut),ge===Fe?D?(ze.undirectedSelfLoops++,ye._undirectedSelfLoopCount++):(ze.directedSelfLoops++,ye._directedSelfLoopCount++):D?(ze.undirectedDegree++,Tt.undirectedDegree++):(ze.outDegree++,Tt.inDegree++),fe(ye,D,Ut,ge,Fe,ze,Tt),D?ye._undirectedSize++:ye._directedSize++,Nt.key=X,ye.emit("edgeAdded",Nt),X}function ci(ye,Te,me,D,X,ge,Fe,Ye,ze){if(!D&&"undirected"===ye.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(D&&"directed"===ye.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Ye)if(ze){if("function"!=typeof Ye)throw new Se("Graph.".concat(Te,': invalid updater function. Expecting a function but got "').concat(Ye,'"'))}else if(!P(Ye))throw new Se("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat(Ye,'"'));var Tt;if(ge=""+ge,Fe=""+Fe,ze&&(Tt=Ye,Ye=void 0),!ye.allowSelfLoops&&ge===Fe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Nt,Ut,nn=ye._nodes.get(ge),mn=ye._nodes.get(Fe);if(!me&&(Nt=ye._edges.get(X))){if(Nt.source.key!==ge||Nt.target.key!==Fe||D&&(Nt.source.key!==Fe||Nt.target.key!==ge))throw new de("Graph.".concat(Te,': inconsistency detected when attempting to merge the "').concat(X,'" edge with "').concat(ge,'" source & "').concat(Fe,'" target vs. ("').concat(Nt.source.key,'", "').concat(Nt.target.key,'").'));Ut=Nt}if(Ut||ye.multi||!nn||(Ut=D?nn.undirected[Fe]:nn.out[Fe]),Ut)return(ze?Tt:Ye)?(ze?(Ut.attributes=Tt(Ut.attributes),ye.emit("edgeAttributesUpdated",{type:"replace",key:Ut.key,attributes:Ut.attributes})):(E(Ut.attributes,Ye),ye.emit("edgeAttributesUpdated",{type:"merge",key:Ut.key,attributes:Ut.attributes,data:Ye})),Ut.key):Ut.key;Ye=Ye||{},ze&&Tt&&(Ye=Tt(Ye));var cr={key:null,undirected:D,source:ge,target:Fe,attributes:Ye};if(me&&(X=ye._edgeKeyGenerator(cr)),ye._edges.has(X=""+X))throw new de("Graph.".concat(Te,': the "').concat(X,'" edge already exists in the graph.'));return nn||(nn=Ni(ye,ge,{}),ge===Fe&&(mn=nn)),mn||(mn=Ni(ye,Fe,{})),Nt=new Ke(D,X,me,nn,mn,Ye),ye._edges.set(X,Nt),ge===Fe?D?(nn.undirectedSelfLoops++,ye._undirectedSelfLoopCount++):(nn.directedSelfLoops++,ye._directedSelfLoopCount++):D?(nn.undirectedDegree++,mn.undirectedDegree++):(nn.outDegree++,mn.inDegree++),fe(ye,D,Nt,ge,Fe,nn,mn),D?ye._undirectedSize++:ye._directedSize++,cr.key=X,ye.emit("edgeAdded",cr),X}var ye,ln=function(ye){function Te(D){var X;if(X=ye.call(this)||this,(D=E({},Js,D)).edgeKeyGenerator&&"function"!=typeof D.edgeKeyGenerator)throw new Se("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(D.edgeKeyGenerator,'".'));if("boolean"!=typeof D.multi)throw new Se("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(D.multi,'".'));if(!Zr.has(D.type))throw new Se('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(D.type,'".'));if("boolean"!=typeof D.allowSelfLoops)throw new Se("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(D.allowSelfLoops,'".'));var ge,Fe="mixed"===D.type?Ae:"directed"===D.type?nt:_t;return oe(_(X),"NodeDataClass",Fe),oe(_(X),"_attributes",{}),oe(_(X),"_nodes",new Map),oe(_(X),"_edges",new Map),oe(_(X),"_directedSize",0),oe(_(X),"_undirectedSize",0),oe(_(X),"_directedSelfLoopCount",0),oe(_(X),"_undirectedSelfLoopCount",0),oe(_(X),"_edgeKeyGenerator",D.edgeKeyGenerator||(ge=0,function(){return ge++})),oe(_(X),"_options",D),Jt.forEach(function(Ye){return oe(_(X),Ye,X[Ye])}),x(_(X),"order",function(){return X._nodes.size}),x(_(X),"size",function(){return X._edges.size}),x(_(X),"directedSize",function(){return X._directedSize}),x(_(X),"undirectedSize",function(){return X._undirectedSize}),x(_(X),"selfLoopCount",function(){return X._directedSelfLoopCount+X._undirectedSelfLoopCount}),x(_(X),"directedSelfLoopCount",function(){return X._directedSelfLoopCount}),x(_(X),"undirectedSelfLoopCount",function(){return X._undirectedSelfLoopCount}),x(_(X),"multi",X._options.multi),x(_(X),"type",X._options.type),x(_(X),"allowSelfLoops",X._options.allowSelfLoops),x(_(X),"implementation",function(){return"graphology"}),X}S(Te,ye);var me=Te.prototype;return me.hasNode=function(D){return this._nodes.has(""+D)},me.hasDirectedEdge=function(D,X){if("undirected"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+D);return!!Fe&&!Fe.undirected}if(2===arguments.length){X=""+X;var Ye=this._nodes.get(D=""+D);if(!Ye)return!1;var ze=Ye.out[X];return!(!ze||this.multi&&!ze.size)}throw new Se("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},me.hasUndirectedEdge=function(D,X){if("directed"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+D);return!!Fe&&Fe.undirected}if(2===arguments.length){X=""+X;var Ye=this._nodes.get(D=""+D);if(!Ye)return!1;var ze=Ye.undirected[X];return!(!ze||this.multi&&!ze.size)}throw new Se("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},me.hasEdge=function(D,X){if(1===arguments.length)return this._edges.has(""+D);if(2===arguments.length){X=""+X;var Fe=this._nodes.get(D=""+D);if(!Fe)return!1;var Ye=void 0!==Fe.out&&Fe.out[X];return Ye||(Ye=void 0!==Fe.undirected&&Fe.undirected[X]),!(!Ye||this.multi&&!Ye.size)}throw new Se("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},me.directedEdge=function(D,X){if("undirected"!==this.type){if(D=""+D,X=""+X,this.multi)throw new de("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ge=this._nodes.get(D);if(!ge)throw new ke('Graph.directedEdge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(X))throw new ke('Graph.directedEdge: could not find the "'.concat(X,'" target node in the graph.'));var Fe=ge.out&&ge.out[X]||void 0;return Fe?Fe.key:void 0}},me.undirectedEdge=function(D,X){if("directed"!==this.type){if(D=""+D,X=""+X,this.multi)throw new de("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ge=this._nodes.get(D);if(!ge)throw new ke('Graph.undirectedEdge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(X))throw new ke('Graph.undirectedEdge: could not find the "'.concat(X,'" target node in the graph.'));var Fe=ge.undirected&&ge.undirected[X]||void 0;return Fe?Fe.key:void 0}},me.edge=function(D,X){if(this.multi)throw new de("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");X=""+X;var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.edge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(X))throw new ke('Graph.edge: could not find the "'.concat(X,'" target node in the graph.'));var Fe=ge.out&&ge.out[X]||ge.undirected&&ge.undirected[X]||void 0;if(Fe)return Fe.key},me.inDegree=function(D){var X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof X)throw new Se('Graph.inDegree: Expecting a boolean but got "'.concat(X,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.inDegree: could not find the "'.concat(D,'" node in the graph.'));return"undirected"===this.type?0:ge.inDegree+(X?ge.directedSelfLoops:0)},me.outDegree=function(D){var X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof X)throw new Se('Graph.outDegree: Expecting a boolean but got "'.concat(X,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.outDegree: could not find the "'.concat(D,'" node in the graph.'));return"undirected"===this.type?0:ge.outDegree+(X?ge.directedSelfLoops:0)},me.directedDegree=function(D){var X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof X)throw new Se('Graph.directedDegree: Expecting a boolean but got "'.concat(X,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.directedDegree: could not find the "'.concat(D,'" node in the graph.'));if("undirected"===this.type)return 0;var Fe=X?ge.directedSelfLoops:0;return ge.inDegree+Fe+(ge.outDegree+Fe)},me.undirectedDegree=function(D){var X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof X)throw new Se('Graph.undirectedDegree: Expecting a boolean but got "'.concat(X,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.undirectedDegree: could not find the "'.concat(D,'" node in the graph.'));return"directed"===this.type?0:ge.undirectedDegree+2*(X?ge.undirectedSelfLoops:0)},me.degree=function(D){var X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof X)throw new Se('Graph.degree: Expecting a boolean but got "'.concat(X,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.degree: could not find the "'.concat(D,'" node in the graph.'));var Fe=0,Ye=0;return"directed"!==this.type&&(X&&(Ye=ge.undirectedSelfLoops),Fe+=ge.undirectedDegree+2*Ye),"undirected"!==this.type&&(X&&(Ye=ge.directedSelfLoops),Fe+=ge.inDegree+ge.outDegree+2*Ye),Fe},me.source=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.source: could not find the "'.concat(D,'" edge in the graph.'));return X.source.key},me.target=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.target: could not find the "'.concat(D,'" edge in the graph.'));return X.target.key},me.extremities=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.extremities: could not find the "'.concat(D,'" edge in the graph.'));return[X.source.key,X.target.key]},me.opposite=function(D,X){D=""+D;var ge=this._edges.get(X=""+X);if(!ge)throw new ke('Graph.opposite: could not find the "'.concat(X,'" edge in the graph.'));var Fe=ge.source.key,Ye=ge.target.key;if(D!==Fe&&D!==Ye)throw new ke('Graph.opposite: the "'.concat(D,'" node is not attached to the "').concat(X,'" edge (').concat(Fe,", ").concat(Ye,")."));return D===Fe?Ye:Fe},me.hasExtremity=function(D,X){X=""+X;var ge=this._edges.get(D=""+D);if(!ge)throw new ke('Graph.hasExtremity: could not find the "'.concat(D,'" edge in the graph.'));return ge.source.key===X||ge.target.key===X},me.isUndirected=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.isUndirected: could not find the "'.concat(D,'" edge in the graph.'));return X.undirected},me.isDirected=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.isDirected: could not find the "'.concat(D,'" edge in the graph.'));return!X.undirected},me.isSelfLoop=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.isSelfLoop: could not find the "'.concat(D,'" edge in the graph.'));return X.source===X.target},me.hasGeneratedKey=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.hasGeneratedKey: could not find the "'.concat(D,'" edge in the graph.'));return X.generatedKey},me.addNode=function(D,X){return function(ge,Fe,Ye){if(Ye&&!P(Ye))throw new Se('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Ye,'"'));if(Ye=Ye||{},ge._nodes.has(Fe=""+Fe))throw new de('Graph.addNode: the "'.concat(Fe,'" node already exist in the graph.'));var ze=new ge.NodeDataClass(Fe,Ye);return ge._nodes.set(Fe,ze),ge.emit("nodeAdded",{key:Fe,attributes:Ye}),ze}(this,D,X).key},me.mergeNode=function(D,X){if(X&&!P(X))throw new Se('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(X,'"'));X=X||{};var ge=this._nodes.get(D=""+D);return ge?(X&&(E(ge.attributes,X),this.emit("nodeAttributesUpdated",{type:"merge",key:D,attributes:ge.attributes,data:X})),D):(ge=new this.NodeDataClass(D,X),this._nodes.set(D,ge),this.emit("nodeAdded",{key:D,attributes:X}),D)},me.updateNode=function(D,X){if(X&&"function"!=typeof X)throw new Se('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(X,'"'));var ge=this._nodes.get(D=""+D);if(ge)return X&&(ge.attributes=X(ge.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:D,attributes:ge.attributes})),D;var Ye=X?X({}):{};return ge=new this.NodeDataClass(D,Ye),this._nodes.set(D,ge),this.emit("nodeAdded",{key:D,attributes:Ye}),D},me.dropNode=function(D){var X=this,ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.dropNode: could not find the "'.concat(D,'" node in the graph.'));this.forEachEdge(D,function(Fe){X.dropEdge(Fe)}),this._nodes.delete(D),this.emit("nodeDropped",{key:D,attributes:ge.attributes})},me.dropEdge=function(D){var X;if(arguments.length>1){var ge=""+arguments[0],Fe=""+arguments[1];if(!(X=N(this,ge,Fe,this.type)))throw new ke('Graph.dropEdge: could not find the "'.concat(ge,'" -> "').concat(Fe,'" edge in the graph.'))}else if(!(X=this._edges.get(D=""+D)))throw new ke('Graph.dropEdge: could not find the "'.concat(D,'" edge in the graph.'));this._edges.delete(X.key);var ze=X.source,Tt=X.target,Nt=X.attributes,Ut=X.undirected;return ze===Tt?Ut?(ze.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(ze.directedSelfLoops--,this._directedSelfLoopCount--):Ut?(ze.undirectedDegree--,Tt.undirectedDegree--):(ze.outDegree--,Tt.inDegree--),function R(ye,Te,me){var D=ye.multi,X=me.source,ge=me.target,Fe=X.key,Ye=ge.key,ze=X[Te?"undirected":"out"],Tt=Te?"undirected":"in";if(Ye in ze)if(D){var Nt=ze[Ye];1===Nt.size?(delete ze[Ye],delete ge[Tt][Fe]):Nt.delete(me)}else delete ze[Ye];D||delete ge[Tt][Fe]}(this,Ut,X),Ut?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:D,attributes:Nt,source:ze.key,target:Tt.key,undirected:Ut}),this},me.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},me.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},me.getAttribute=function(D){return this._attributes[D]},me.getAttributes=function(){return this._attributes},me.hasAttribute=function(D){return this._attributes.hasOwnProperty(D)},me.setAttribute=function(D,X){return this._attributes[D]=X,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:D}),this},me.updateAttribute=function(D,X){if("function"!=typeof X)throw new Se("Graph.updateAttribute: updater should be a function.");return this._attributes[D]=X(this._attributes[D]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:D}),this},me.removeAttribute=function(D){return delete this._attributes[D],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:D}),this},me.replaceAttributes=function(D){if(!P(D))throw new Se("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=D,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},me.mergeAttributes=function(D){if(!P(D))throw new Se("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,D),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:D}),this},me.getNodeAttribute=function(D,X){var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.getNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return ge.attributes[X]},me.getNodeAttributes=function(D){var X=this._nodes.get(D=""+D);if(!X)throw new ke('Graph.getNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));return X.attributes},me.hasNodeAttribute=function(D,X){var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.hasNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return ge.attributes.hasOwnProperty(X)},me.setNodeAttribute=function(D,X,ge){var Fe=this._nodes.get(D=""+D);if(!Fe)throw new ke('Graph.setNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));if(arguments.length<3)throw new Se("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Fe.attributes[X]=ge,this.emit("nodeAttributesUpdated",{key:D,type:"set",attributes:Fe.attributes,name:X}),this},me.updateNodeAttribute=function(D,X,ge){var Fe=this._nodes.get(D=""+D);if(!Fe)throw new ke('Graph.updateNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));if(arguments.length<3)throw new Se("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ge)throw new Se("Graph.updateAttribute: updater should be a function.");var Ye=Fe.attributes,ze=ge(Ye[X]);return Ye[X]=ze,this.emit("nodeAttributesUpdated",{key:D,type:"set",attributes:Fe.attributes,name:X}),this},me.removeNodeAttribute=function(D,X){var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.hasNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return delete ge.attributes[X],this.emit("nodeAttributesUpdated",{key:D,type:"remove",attributes:ge.attributes,name:X}),this},me.replaceNodeAttributes=function(D,X){var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.replaceNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));if(!P(X))throw new Se("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ge.attributes=X,this.emit("nodeAttributesUpdated",{key:D,type:"replace",attributes:ge.attributes}),this},me.mergeNodeAttributes=function(D,X){var ge=this._nodes.get(D=""+D);if(!ge)throw new ke('Graph.mergeNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));if(!P(X))throw new Se("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return E(ge.attributes,X),this.emit("nodeAttributesUpdated",{key:D,type:"merge",attributes:ge.attributes,data:X}),this},me.updateEachNodeAttributes=function(D,X){if("function"!=typeof D)throw new Se("Graph.updateEachNodeAttributes: expecting an updater function.");if(X&&!B(X))throw new Se("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Fe,Ye=this._nodes.values();!0!==(ge=Ye.next()).done;)(Fe=ge.value).attributes=D(Fe.key,Fe.attributes);this.emit("eachNodeAttributesUpdated",{hints:X||null})},me.updateEachEdgeAttributes=function(D,X){if("function"!=typeof D)throw new Se("Graph.updateEachEdgeAttributes: expecting an updater function.");if(X&&!B(X))throw new Se("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Fe,Ye=this._edges.values();!0!==(ge=Ye.next()).done;)(Fe=ge.value).attributes=D(Fe.key,Fe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:X||null})},me.forEach=function(D){if("function"!=typeof D)throw new Se("Graph.forEach: expecting a callback.");this.multi?Ze(!1,this,D):$e(!1,this,D)},me.forEachUntil=function(D){if("function"!=typeof D)throw new Se("Graph.forEach: expecting a callback.");this.multi?Ze(!0,this,D):$e(!0,this,D)},me.adjacency=function(){return this.multi?(ze=(D=this)._nodes.values(),Tt=D.type,Nt="outer",Ut=null,new Xe(function nn(){var mn;if("outer"===Nt)return!0===(mn=ze.next()).done?mn:(X=mn.value,Nt="directed",nn());if("directed"===Nt)return"undirected"===Tt?(Nt="undirected",nn()):(Fe=X.out,ge=Object.keys(X.out),Ye=0,Nt="inner-directed",nn());if("undirected"===Nt){if("directed"===Tt)return Nt="outer",nn();Fe=X.undirected,ge=Object.keys(X.undirected),Ye=0,Nt="inner-undirected"}if(!Ut&&Ye>=ge.length)return Nt="inner-undirected"===Nt?"outer":"undirected",nn();if(!Ut){var ar=ge[Ye++];return Ut=Fe[ar].values(),nn()}if((mn=Ut.next()).done)return Ut=null,nn();var cr=mn.value,Cs=cr.target;return"inner-undirected"===Nt&&Cs.key===X.key&&(Cs=cr.source),{done:!1,value:[X.key,Cs.key,X.attributes,Cs.attributes,cr.key,cr.attributes]}})):(xn=(nn=this)._nodes.values(),Hn=nn.type,Qr="outer",new Xe(function Ls(){var Zc;if("outer"===Qr)return!0===(Zc=xn.next()).done?Zc:(mn=Zc.value,Qr="directed",Ls());if("directed"===Qr)return"undirected"===Hn?(Qr="undirected",Ls()):(cr=mn.out,ar=Object.keys(mn.out),Cs=0,Qr="inner-directed",Ls());if("undirected"===Qr){if("directed"===Hn)return Qr="outer",Ls();cr=mn.undirected,ar=Object.keys(mn.undirected),Cs=0,Qr="inner-undirected"}if(Cs>=ar.length)return Qr="inner-undirected"===Qr?"outer":"undirected",Ls();var od=ar[Cs++],Go=cr[od],fa=Go.target;return"inner-undirected"===Qr&&fa.key===mn.key&&(fa=Go.source),{done:!1,value:[mn.key,fa.key,mn.attributes,fa.attributes,Go.key,Go.attributes]}}));var nn,mn,ar,cr,Cs,xn,Hn,Qr,D,X,ge,Fe,Ye,ze,Tt,Nt,Ut},me.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ce(this._nodes.keys(),this._nodes.size)},me.forEachNode=function(D){if("function"!=typeof D)throw new Se("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(X,ge){D(ge,X.attributes)})},me.forEachNodeUntil=function(D){if("function"!=typeof D)throw new Se("Graph.forEachNode: expecting a callback.");for(var X,ge,Fe=this._nodes.values();!0!==(X=Fe.next())&&!D((ge=X.value).key,ge.attributes););},me.nodeEntries=function(){var D=this._nodes.values();return new Xe(function(){var X=D.next();if(X.done)return X;var ge=X.value;return{value:[ge.key,ge.attributes],done:!1}})},me.exportNode=function(D){var X=this._nodes.get(D=""+D);if(!X)throw new ke('Graph.exportNode: could not find the "'.concat(D,'" node in the graph.'));return St(D,X)},me.exportEdge=function(D){var X=this._edges.get(D=""+D);if(!X)throw new ke('Graph.exportEdge: could not find the "'.concat(D,'" edge in the graph.'));return Gt(D,X)},me.export=function(){var D=new Array(this._nodes.size),X=0;this._nodes.forEach(function(Fe,Ye){D[X++]=St(Ye,Fe)});var ge=new Array(this._edges.size);return X=0,this._edges.forEach(function(Fe,Ye){ge[X++]=Gt(Ye,Fe)}),{attributes:this.getAttributes(),nodes:D,edges:ge,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},me.importNode=function(D){var X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function tn(ye){return P(ye)?"key"in ye?!("attributes"in ye)||P(ye.attributes)&&null!==ye.attributes?null:"invalid-attributes":"no-key":"not-object"}(D);if(ge){if("not-object"===ge)throw new Se('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ge)throw new Se("Graph.importNode: no key provided.");if("invalid-attributes"===ge)throw new Se("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Fe=D.key,Ye=D.attributes,ze=void 0===Ye?{}:Ye;return X?this.mergeNode(Fe,ze):this.addNode(Fe,ze),this},me.importEdge=function(D){var X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function or(ye){return P(ye)?"source"in ye?"target"in ye?!("attributes"in ye)||P(ye.attributes)&&null!==ye.attributes?"undirected"in ye&&"boolean"!=typeof ye.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(D);if(ge){if("not-object"===ge)throw new Se('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ge)throw new Se("Graph.importEdge: missing souce.");if("no-target"===ge)throw new Se("Graph.importEdge: missing target.");if("invalid-attributes"===ge)throw new Se("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ge)throw new Se("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Fe=D.source,Ye=D.target,ze=D.attributes,Tt=void 0===ze?{}:ze,Nt=D.undirected,Ut=void 0!==Nt&&Nt;return"key"in D?(X?Ut?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ut?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,D.key,Fe,Ye,Tt):(X?Ut?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ut?this.addUndirectedEdge:this.addDirectedEdge).call(this,Fe,Ye,Tt),this},me.import=function(D){var X,ge,Fe,Ye=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function z(ye){return null!==ye&&"object"===_e(ye)&&"function"==typeof ye.addUndirectedEdgeWithKey&&"function"==typeof ye.dropNode}(D))return this.import(D.export(),Ye),this;if(!P(D))throw new Se("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(D.attributes){if(!P(D.attributes))throw new Se("Graph.import: invalid attributes. Expecting a plain object.");Ye?this.mergeAttributes(D.attributes):this.replaceAttributes(D.attributes)}if(D.nodes){if(Fe=D.nodes,!Array.isArray(Fe))throw new Se("Graph.import: invalid nodes. Expecting an array.");for(X=0,ge=Fe.length;X<ge;X++)this.importNode(Fe[X],Ye)}if(D.edges){if(Fe=D.edges,!Array.isArray(Fe))throw new Se("Graph.import: invalid edges. Expecting an array.");for(X=0,ge=Fe.length;X<ge;X++)this.importEdge(Fe[X],Ye)}return this},me.nullCopy=function(D){return new Te(E({},this._options,D))},me.emptyCopy=function(D){var X=this.nullCopy(D);return this._nodes.forEach(function(ge,Fe){var Ye=E({},ge.attributes);ge=new X.NodeDataClass(Fe,Ye),X._nodes.set(Fe,ge)}),X},me.copy=function(){var D=new Te(this._options);return D.import(this),D},me.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(D){return D.upgradeToMixed()}),this._options.type="mixed",x(this,"type",this._options.type),oe(this,"NodeDataClass",Ae)),this},me.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,x(this,"multi",!0),(D=this)._nodes.forEach(function(X,ge){if(X.out)for(var Fe in X.out){var Ye=new Set;Ye.add(X.out[Fe]),X.out[Fe]=Ye,D._nodes.get(Fe).in[ge]=Ye}if(X.undirected)for(var ze in X.undirected)if(!(ze>ge)){var Tt=new Set;Tt.add(X.undirected[ze]),X.undirected[ze]=Tt,D._nodes.get(ze).undirected[ge]=Tt}})),this;var D},me.clearIndex=function(){return this._nodes.forEach(function(D){void 0!==D.in&&(D.in={},D.out={}),void 0!==D.undirected&&(D.undirected={})}),this},me.toJSON=function(){return this.export()},me.toString=function(){return"[object Graph]"},me.inspect=function(){var D=this,X={};this._nodes.forEach(function(Tt,Nt){X[Nt]=Tt.attributes});var ge={},Fe={};this._edges.forEach(function(Tt,Nt){var Ut=Tt.undirected?"--":"->",nn="",mn="(".concat(Tt.source.key,")").concat(Ut,"(").concat(Tt.target.key,")");Tt.generatedKey?D.multi&&(void 0===Fe[mn]?Fe[mn]=0:Fe[mn]++,nn+="".concat(Fe[mn],". ")):nn+="[".concat(Nt,"]: "),ge[nn+=mn]=Tt.attributes});var Ye={};for(var ze in this)this.hasOwnProperty(ze)&&!Jt.has(ze)&&"function"!=typeof this[ze]&&(Ye[ze]=this[ze]);return Ye.attributes=this._attributes,Ye.nodes=X,Ye.edges=ge,oe(Ye,"constructor",this.constructor),Ye},Te}(Y.exports.EventEmitter);typeof Symbol<"u"&&(ln.prototype[Symbol.for("nodejs.util.inspect.custom")]=ln.prototype.inspect),[{name:function(ye){return"".concat(ye,"Edge")},generateKey:!0},{name:function(ye){return"".concat(ye,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ye){return"".concat(ye,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ye){return"".concat(ye,"EdgeWithKey")}},{name:function(ye){return"".concat(ye,"DirectedEdgeWithKey")},type:"directed"},{name:function(ye){return"".concat(ye,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ye){["add","merge","update"].forEach(function(Te){var me=ye.name(Te),D="add"===Te?dc:ci;ln.prototype[me]=ye.generateKey?function(X,ge,Fe){return D(this,me,!0,"undirected"===(ye.type||this.type),null,X,ge,Fe,"update"===Te)}:function(X,ge,Fe,Ye){return D(this,me,!1,"undirected"===(ye.type||this.type),X,ge,Fe,Ye,"update"===Te)}})}),typeof Symbol<"u"&&(ln.prototype[Symbol.iterator]=ln.prototype.adjacency),ye=ln,A.forEach(function(Te){var me=Te.name,D=Te.attacher;D(ye,me("Edge"),"mixed"),D(ye,me("DirectedEdge"),"directed"),D(ye,me("UndirectedEdge"),"undirected")}),function(ye){Ve.forEach(function(Te){var D,X,ge,Fe;ge=(D=Te).type,Fe=D.direction,ye.prototype[X=D.name]=function(Ye,ze){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(!arguments.length)return function zt(ye,Te){if(0===ye.size)return[];if("mixed"===Te||Te===ye.type)return"function"==typeof Array.from?Array.from(ye._edges.keys()):Ce(ye._edges.keys(),ye._edges.size);for(var me,D,ge=new Array("undirected"===Te?ye.undirectedSize:ye.directedSize),Fe="undirected"===Te,Ye=ye._edges.values(),ze=0;!0!==(me=Ye.next()).done;)(D=me.value).undirected===Fe&&(ge[ze++]=D.key);return ge}(this,ge);if(1===arguments.length){var Tt=this._nodes.get(Ye=""+Ye);if(void 0===Tt)throw new ke("Graph.".concat(X,': could not find the "').concat(Ye,'" node in the graph.'));return function Le(ye,Te,me,D){var X=[],ge=ye?ue:Je;return"undirected"!==Te&&("out"!==me&&ge(X,D.in),"in"!==me&&ge(X,D.out),!me&&D.directedSelfLoops>0&&X.splice(X.lastIndexOf(D.key),1)),"directed"!==Te&&ge(X,D.undirected),X}(this.multi,"mixed"===ge?this.type:ge,Fe,Tt)}if(2===arguments.length){ze=""+ze;var Nt=this._nodes.get(Ye=""+Ye);if(!Nt)throw new ke("Graph.".concat(X,':  could not find the "').concat(Ye,'" source node in the graph.'));if(!this._nodes.has(ze))throw new ke("Graph.".concat(X,':  could not find the "').concat(ze,'" target node in the graph.'));return function en(ye,Te,me,D,X){var ge=Te?Ee:We,Fe=[];return"undirected"!==ye&&(void 0!==D.in&&"out"!==me&&ge(Fe,D.in,X),void 0!==D.out&&"in"!==me&&ge(Fe,D.out,X),!me&&D.directedSelfLoops>0&&Fe.splice(Fe.lastIndexOf(D.key),1)),"directed"!==ye&&void 0!==D.undirected&&ge(Fe,D.undirected,X),Fe}(ge,this.multi,Fe,Nt,ze)}throw new Se("Graph.".concat(X,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(me,D){var X=D.name,ge=D.type,Fe=D.direction,Ye="forEach"+X[0].toUpperCase()+X.slice(1,-1);me.prototype[Ye]=function(ze,Tt,Nt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function pe(ye,Te,me){if(0!==ye.size)for(var D,X,ge="mixed"!==Te&&Te!==ye.type,Fe="undirected"===Te,Ye=ye._edges.values();!0!==(D=Ye.next()).done;)if(X=D.value,!ge||X.undirected===Fe){var Ut=X.source,nn=X.target;me(X.key,X.attributes,Ut.key,nn.key,Ut.attributes,nn.attributes,X.undirected,X.generatedKey)}}(this,ge,Nt=ze);if(2===arguments.length){Nt=Tt;var Ut=this._nodes.get(ze=""+ze);if(void 0===Ut)throw new ke("Graph.".concat(Ye,': could not find the "').concat(ze,'" node in the graph.'));return function it(ye,Te,me,D,X){var ge=ye?U:ne;"undirected"!==Te&&("out"!==me&&ge(D.in,X),"in"!==me&&ge(D.out,X,me?null:D.key)),"directed"!==Te&&ge(D.undirected,X)}(this.multi,"mixed"===ge?this.type:ge,Fe,Ut,Nt)}if(3===arguments.length){Tt=""+Tt;var nn=this._nodes.get(ze=""+ze);if(!nn)throw new ke("Graph.".concat(Ye,':  could not find the "').concat(ze,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Dn(ye,Te,me,D,X,ge){var Fe=Te?ot:Re;"undirected"!==ye&&(void 0!==D.in&&"out"!==me&&Fe(D.in,X,ge),D.key!==X&&void 0!==D.out&&"in"!==me&&Fe(D.out,X,ge)),"directed"!==ye&&void 0!==D.undirected&&Fe(D.undirected,X,ge)}(ge,this.multi,Fe,nn,Tt,Nt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ye,Te),function(me,D){var X=D.name,ge=D.type,Fe=D.direction,Ye="forEach"+X[0].toUpperCase()+X.slice(1,-1)+"Until";me.prototype[Ye]=function(ze,Tt,Nt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function H(ye,Te,me){if(0!==ye.size)for(var D,X,ge="mixed"!==Te&&Te!==ye.type,Fe="undirected"===Te,Ye=ye._edges.values();!0!==(D=Ye.next()).done;)if(X=D.value,!ge||X.undirected===Fe){var Ut=X.source,nn=X.target;if(me(X.key,X.attributes,Ut.key,nn.key,Ut.attributes,nn.attributes,X.undirected,X.generatedKey))break}}(this,ge,Nt=ze);if(2===arguments.length){Nt=Tt;var Ut=this._nodes.get(ze=""+ze);if(void 0===Ut)throw new ke("Graph.".concat(Ye,': could not find the "').concat(ze,'" node in the graph.'));return function lt(ye,Te,me,D,X){var ge=ye?O:M;"undirected"!==Te&&("out"!==me&&ge(D.in,X)||"in"!==me&&ge(D.out,X,me?null:D.key))||"directed"===Te||ge(D.undirected,X)}(this.multi,"mixed"===ge?this.type:ge,Fe,Ut,Nt)}if(3===arguments.length){Tt=""+Tt;var nn=this._nodes.get(ze=""+ze);if(!nn)throw new ke("Graph.".concat(Ye,':  could not find the "').concat(ze,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Nn(ye,Te,me,D,X,ge){var Fe=Te?It:bt;"undirected"!==ye&&(void 0!==D.in&&"out"!==me&&Fe(D.in,X,ge)||D.key!==X&&void 0!==D.out&&"in"!==me&&Fe(D.out,X,ge,me?null:D.key))||"directed"===ye||void 0===D.undirected||Fe(D.undirected,X,ge)}(ge,this.multi,Fe,nn,Tt,Nt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ye,Te),function(me,D){var ge=D.type,Fe=D.direction,Ye=D.name.slice(0,-1)+"Entries";me.prototype[Ye]=function(ze,Tt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return Xe.empty();if(!arguments.length)return function te(ye,Te){if(0===ye.size)return Xe.empty();var me="mixed"!==Te&&Te!==ye.type,D="undirected"===Te,X=ye._edges.values();return new Xe(function(){for(var ge,Fe;;){if((ge=X.next()).done)return ge;if(Fe=ge.value,!me||Fe.undirected===D)break}return{value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes],done:!1}})}(this,ge);if(1===arguments.length){var Nt=this._nodes.get(ze=""+ze);if(!Nt)throw new ke("Graph.".concat(Ye,': could not find the "').concat(ze,'" node in the graph.'));return function Et(ye,Te,me){var D=Xe.empty();return"undirected"!==ye&&("out"!==Te&&void 0!==me.in&&(D=Z(D,he(me.in))),"in"!==Te&&void 0!==me.out&&(D=Z(D,he(me.out,Te?null:me.key)))),"directed"!==ye&&void 0!==me.undirected&&(D=Z(D,he(me.undirected))),D}(ge,Fe,Nt)}if(2===arguments.length){Tt=""+Tt;var Ut=this._nodes.get(ze=""+ze);if(!Ut)throw new ke("Graph.".concat(Ye,':  could not find the "').concat(ze,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function pn(ye,Te,me,D){var X=Xe.empty();return"undirected"!==ye&&(void 0!==me.in&&"out"!==Te&&D in me.in&&(X=Z(X,mt(me.in,D))),void 0!==me.out&&"in"!==Te&&D in me.out&&(X=Z(X,mt(me.out,D)))),"directed"!==ye&&void 0!==me.undirected&&D in me.undirected&&(X=Z(X,mt(me.undirected,D))),X}(ge,Fe,Ut,Tt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ye,Te)})}(ln),function(ye){wn.forEach(function(Te){var D,X,ge,Fe;ge=(D=Te).type,Fe=D.direction,ye.prototype[X=D.name]=function(Ye){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(2===arguments.length){var ze=""+arguments[0],Tt=""+arguments[1];if(!this._nodes.has(ze))throw new ke("Graph.".concat(X,': could not find the "').concat(ze,'" node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat(X,': could not find the "').concat(Tt,'" node in the graph.'));return function ka(ye,Te,me,D,X){var ge=ye._nodes.get(D);if("undirected"!==Te){if("out"!==me&&void 0!==ge.in)for(var Fe in ge.in)if(Fe===X)return!0;if("in"!==me&&void 0!==ge.out)for(var Ye in ge.out)if(Ye===X)return!0}if("directed"!==Te&&void 0!==ge.undirected)for(var ze in ge.undirected)if(ze===X)return!0;return!1}(this,ge,Fe,ze,Tt)}if(1===arguments.length){var Nt=this._nodes.get(Ye=""+Ye);if(void 0===Nt)throw new ke("Graph.".concat(X,': could not find the "').concat(Ye,'" node in the graph.'));return function Ks(ye,Te,me){if("mixed"!==ye){if("undirected"===ye)return Object.keys(me.undirected);if("string"==typeof Te)return Object.keys(me[Te])}var D=new Set;return"undirected"!==ye&&("out"!==Te&&ji(D,me.in),"in"!==Te&&ji(D,me.out)),"directed"!==ye&&ji(D,me.undirected),Ce(D.values(),D.size)}("mixed"===ge?this.type:ge,Fe,Nt)}throw new Se("Graph.".concat(X,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Jc(ye,Te){var me=Te.name,D=Te.type,X=Te.direction,ge="forEach"+me[0].toUpperCase()+me.slice(1,-1);ye.prototype[ge]=function(Fe,Ye){if("mixed"===D||"mixed"===this.type||D===this.type){var ze=this._nodes.get(Fe=""+Fe);if(void 0===ze)throw new ke("Graph.".concat(ge,': could not find the "').concat(Fe,'" node in the graph.'));!function(Tt,Nt,Ut,nn){if("mixed"!==Tt){if("undirected"===Tt)return xr(Ut,Ut.undirected,nn);if("string"==typeof Nt)return xr(Ut,Ut[Nt],nn)}var mn=new Set;"undirected"!==Tt&&("out"!==Nt&&Jr(mn,Ut,Ut.in,nn),"in"!==Nt&&Jr(mn,Ut,Ut.out,nn)),"directed"!==Tt&&Jr(mn,Ut,Ut.undirected,nn)}("mixed"===D?this.type:D,X,ze,Ye)}}}(ye,Te),function ha(ye,Te){var me=Te.name,D=Te.type,X=Te.direction,ge="forEach"+me[0].toUpperCase()+me.slice(1,-1)+"Until";ye.prototype[ge]=function(Fe,Ye){if("mixed"===D||"mixed"===this.type||D===this.type){var ze=this._nodes.get(Fe=""+Fe);if(void 0===ze)throw new ke("Graph.".concat(ge,': could not find the "').concat(Fe,'" node in the graph.'));!function(Tt,Nt,Ut,nn){if("mixed"!==Tt){if("undirected"===Tt)return Vo(Ut,Ut.undirected,nn);if("string"==typeof Nt)return Vo(Ut,Ut[Nt],nn)}var mn=new Set;"undirected"!==Tt&&("out"!==Nt&&vi(mn,Ut,Ut.in,nn)||"in"!==Nt&&vi(mn,Ut,Ut.out,nn))||"directed"===Tt||vi(mn,Ut,Ut.undirected,nn)}("mixed"===D?this.type:D,X,ze,Ye)}}}(ye,Te),function Ns(ye,Te){var D=Te.type,X=Te.direction,ge=Te.name.slice(0,-1)+"Entries";ye.prototype[ge]=function(Fe){if("mixed"!==D&&"mixed"!==this.type&&D!==this.type)return Xe.empty();var Ye=this._nodes.get(Fe=""+Fe);if(void 0===Ye)throw new ke("Graph.".concat(ge,': could not find the "').concat(Fe,'" node in the graph.'));return function(ze,Tt,Nt){if("mixed"!==ze){if("undirected"===ze)return Br(Nt,Nt.undirected);if("string"==typeof Tt)return Br(Nt,Nt[Tt])}var Ut=Xe.empty(),nn=new Set;return"undirected"!==ze&&("out"!==Tt&&(Ut=Z(Ut,da(nn,Nt,Nt.in))),"in"!==Tt&&(Ut=Z(Ut,da(nn,Nt,Nt.out)))),"directed"!==ze&&(Ut=Z(Ut,da(nn,Nt,Nt.undirected))),Ut}("mixed"===D?this.type:D,X,Ye)}}(ye,Te)})}(ln);var Ho=function(ye){function Te(me){var D=E({type:"directed"},me);if("multi"in D&&!1!==D.multi)throw new Se("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==D.type)throw new Se('DirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(ln),Wt=function(ye){function Te(me){var D=E({type:"undirected"},me);if("multi"in D&&!1!==D.multi)throw new Se("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==D.type)throw new Se('UndirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(ln),jn=function(ye){function Te(me){var D=E({multi:!0},me);if("multi"in D&&!0!==D.multi)throw new Se("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ye.call(this,D)||this}return S(Te,ye),Te}(ln),kr=function(ye){function Te(me){var D=E({type:"directed",multi:!0},me);if("multi"in D&&!0!==D.multi)throw new Se("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==D.type)throw new Se('MultiDirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(ln),ti=function(ye){function Te(me){var D=E({type:"undirected",multi:!0},me);if("multi"in D&&!0!==D.multi)throw new Se("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==D.type)throw new Se('MultiUndirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(ln);function Li(ye){ye.from=function(Te,me){var D=E({},Te.options,me),X=new ye(D);return X.import(Te),X}}return Li(ln),Li(Ho),Li(Wt),Li(jn),Li(kr),Li(ti),ln.Graph=ln,ln.DirectedGraph=Ho,ln.UndirectedGraph=Wt,ln.MultiGraph=jn,ln.MultiDirectedGraph=kr,ln.MultiUndirectedGraph=ti,ln.InvalidArgumentsGraphError=Se,ln.NotFoundGraphError=ke,ln.UsageGraphError=de,ln}()},7271:(Ue,_e,S)=>{var Q;!function(C,$,G,q){"use strict";var Y,_=["","webkit","Moz","MS","ms","o"],E=$.createElement("div"),N="function",z=Math.round,P=Math.abs,F=Date.now;function oe(De,Ge,tt){return setTimeout(k(De,tt),Ge)}function x(De,Ge,tt){return!!Array.isArray(De)&&(B(De,tt[Ge],tt),!0)}function B(De,Ge,tt){var wt;if(De)if(De.forEach)De.forEach(Ge,tt);else if(De.length!==q)for(wt=0;wt<De.length;)Ge.call(tt,De[wt],wt,De),wt++;else for(wt in De)De.hasOwnProperty(wt)&&Ge.call(tt,De[wt],wt,De)}function se(De,Ge,tt){var wt="DEPRECATED METHOD: "+Ge+"\n"+tt+" AT \n";return function(){var jt=new Error("get-stack-trace"),Zt=jt&&jt.stack?jt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qn=C.console&&(C.console.warn||C.console.log);return qn&&qn.call(C.console,wt,Zt),De.apply(this,arguments)}}Y="function"!=typeof Object.assign?function(Ge){if(Ge===q||null===Ge)throw new TypeError("Cannot convert undefined or null to object");for(var tt=Object(Ge),wt=1;wt<arguments.length;wt++){var jt=arguments[wt];if(jt!==q&&null!==jt)for(var Zt in jt)jt.hasOwnProperty(Zt)&&(tt[Zt]=jt[Zt])}return tt}:Object.assign;var J=se(function(Ge,tt,wt){for(var jt=Object.keys(tt),Zt=0;Zt<jt.length;)(!wt||wt&&Ge[jt[Zt]]===q)&&(Ge[jt[Zt]]=tt[jt[Zt]]),Zt++;return Ge},"extend","Use `assign`."),ee=se(function(Ge,tt){return J(Ge,tt,!0)},"merge","Use `assign`.");function W(De,Ge,tt){var jt,wt=Ge.prototype;(jt=De.prototype=Object.create(wt)).constructor=De,jt._super=wt,tt&&Y(jt,tt)}function k(De,Ge){return function(){return De.apply(Ge,arguments)}}function v(De,Ge){return typeof De==N?De.apply(Ge&&Ge[0]||q,Ge):De}function I(De,Ge){return De===q?Ge:De}function T(De,Ge,tt){B(ae(Ge),function(wt){De.addEventListener(wt,tt,!1)})}function le(De,Ge,tt){B(ae(Ge),function(wt){De.removeEventListener(wt,tt,!1)})}function j(De,Ge){for(;De;){if(De==Ge)return!0;De=De.parentNode}return!1}function Me(De,Ge){return De.indexOf(Ge)>-1}function ae(De){return De.trim().split(/\s+/g)}function xe(De,Ge,tt){if(De.indexOf&&!tt)return De.indexOf(Ge);for(var wt=0;wt<De.length;){if(tt&&De[wt][tt]==Ge||!tt&&De[wt]===Ge)return wt;wt++}return-1}function Pe(De){return Array.prototype.slice.call(De,0)}function He(De,Ge,tt){for(var wt=[],jt=[],Zt=0;Zt<De.length;){var qn=Ge?De[Zt][Ge]:De[Zt];xe(jt,qn)<0&&wt.push(De[Zt]),jt[Zt]=qn,Zt++}return tt&&(wt=Ge?wt.sort(function(jr,_s){return jr[Ge]>_s[Ge]}):wt.sort()),wt}function Qe(De,Ge){for(var tt,wt,jt=Ge[0].toUpperCase()+Ge.slice(1),Zt=0;Zt<_.length;){if((wt=(tt=_[Zt])?tt+jt:Ge)in De)return wt;Zt++}return q}var Xe=1;function je(De){var Ge=De.ownerDocument||De;return Ge.defaultView||Ge.parentWindow||C}var ke="ontouchstart"in C,de=Qe(C,"PointerEvent")!==q,Ae=ke&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",Ke="mouse",R=25,A=1,Z=4,Ve=8,Je=1,ue=2,ne=4,U=8,M=16,O=ue|ne,he=U|M,We=O|he,Ee=["x","y"],Re=["clientX","clientY"];function ot(De,Ge){var tt=this;this.manager=De,this.callback=Ge,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(wt){v(De.options.enable,[De])&&tt.handler(wt)},this.init()}function It(De,Ge,tt){var wt=tt.pointers.length,jt=tt.changedPointers.length,Zt=Ge&A&&wt-jt==0,qn=Ge&(Z|Ve)&&wt-jt==0;tt.isFirst=!!Zt,tt.isFinal=!!qn,Zt&&(De.session={}),tt.eventType=Ge,function mt(De,Ge){var tt=De.session,wt=Ge.pointers,jt=wt.length;tt.firstInput||(tt.firstInput=H(Ge)),jt>1&&!tt.firstMultiple?tt.firstMultiple=H(Ge):1===jt&&(tt.firstMultiple=!1);var Zt=tt.firstInput,qn=tt.firstMultiple,Cr=qn?qn.center:Zt.center,jr=Ge.center=te(wt);Ge.timeStamp=F(),Ge.deltaTime=Ge.timeStamp-Zt.timeStamp,Ge.angle=Et(Cr,jr),Ge.distance=lt(Cr,jr),function zt(De,Ge){var tt=Ge.center,wt=De.offsetDelta||{},jt=De.prevDelta||{},Zt=De.prevInput||{};(Ge.eventType===A||Zt.eventType===Z)&&(jt=De.prevDelta={x:Zt.deltaX||0,y:Zt.deltaY||0},wt=De.offsetDelta={x:tt.x,y:tt.y}),Ge.deltaX=jt.x+(tt.x-wt.x),Ge.deltaY=jt.y+(tt.y-wt.y)}(tt,Ge),Ge.offsetDirection=it(Ge.deltaX,Ge.deltaY);var _s=Le(Ge.deltaTime,Ge.deltaX,Ge.deltaY);Ge.overallVelocityX=_s.x,Ge.overallVelocityY=_s.y,Ge.overallVelocity=P(_s.x)>P(_s.y)?_s.x:_s.y,Ge.scale=qn?function Dn(De,Ge){return lt(Ge[0],Ge[1],Re)/lt(De[0],De[1],Re)}(qn.pointers,wt):1,Ge.rotation=qn?function en(De,Ge){return Et(Ge[1],Ge[0],Re)+Et(De[1],De[0],Re)}(qn.pointers,wt):0,Ge.maxPointers=tt.prevInput?Ge.pointers.length>tt.prevInput.maxPointers?Ge.pointers.length:tt.prevInput.maxPointers:Ge.pointers.length,function pe(De,Ge){var jt,Zt,qn,Cr,tt=De.lastInterval||Ge,wt=Ge.timeStamp-tt.timeStamp;if(Ge.eventType!=Ve&&(wt>R||tt.velocity===q)){var jr=Ge.deltaX-tt.deltaX,_s=Ge.deltaY-tt.deltaY,pa=Le(wt,jr,_s);Zt=pa.x,qn=pa.y,jt=P(pa.x)>P(pa.y)?pa.x:pa.y,Cr=it(jr,_s),De.lastInterval=Ge}else jt=tt.velocity,Zt=tt.velocityX,qn=tt.velocityY,Cr=tt.direction;Ge.velocity=jt,Ge.velocityX=Zt,Ge.velocityY=qn,Ge.direction=Cr}(tt,Ge);var pa=De.element;j(Ge.srcEvent.target,pa)&&(pa=Ge.srcEvent.target),Ge.target=pa}(De,tt),De.emit("hammer.input",tt),De.recognize(tt),De.session.prevInput=tt}function H(De){for(var Ge=[],tt=0;tt<De.pointers.length;)Ge[tt]={clientX:z(De.pointers[tt].clientX),clientY:z(De.pointers[tt].clientY)},tt++;return{timeStamp:F(),pointers:Ge,center:te(Ge),deltaX:De.deltaX,deltaY:De.deltaY}}function te(De){var Ge=De.length;if(1===Ge)return{x:z(De[0].clientX),y:z(De[0].clientY)};for(var tt=0,wt=0,jt=0;jt<Ge;)tt+=De[jt].clientX,wt+=De[jt].clientY,jt++;return{x:z(tt/Ge),y:z(wt/Ge)}}function Le(De,Ge,tt){return{x:Ge/De||0,y:tt/De||0}}function it(De,Ge){return De===Ge?Je:P(De)>=P(Ge)?De<0?ue:ne:Ge<0?U:M}function lt(De,Ge,tt){tt||(tt=Ee);var wt=Ge[tt[0]]-De[tt[0]],jt=Ge[tt[1]]-De[tt[1]];return Math.sqrt(wt*wt+jt*jt)}function Et(De,Ge,tt){return tt||(tt=Ee),180*Math.atan2(Ge[tt[1]]-De[tt[1]],Ge[tt[0]]-De[tt[0]])/Math.PI}ot.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(je(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(je(this.element),this.evWin,this.domHandler)}};var Nn={mousedown:A,mousemove:2,mouseup:Z},pn="mousedown",wn="mousemove mouseup";function ji(){this.evEl=pn,this.evWin=wn,this.pressed=!1,ot.apply(this,arguments)}W(ji,ot,{handler:function(Ge){var tt=Nn[Ge.type];tt&A&&0===Ge.button&&(this.pressed=!0),2&tt&&1!==Ge.which&&(tt=Z),this.pressed&&(tt&Z&&(this.pressed=!1),this.callback(this.manager,tt,{pointers:[Ge],changedPointers:[Ge],pointerType:Ke,srcEvent:Ge}))}});var Ks={pointerdown:A,pointermove:2,pointerup:Z,pointercancel:Ve,pointerout:Ve},xr={2:nt,3:"pen",4:Ke,5:"kinect"},Jr="pointerdown",Vo="pointermove pointerup pointercancel";function vi(){this.evEl=Jr,this.evWin=Vo,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C.MSPointerEvent&&!C.PointerEvent&&(Jr="MSPointerDown",Vo="MSPointerMove MSPointerUp MSPointerCancel"),W(vi,ot,{handler:function(Ge){var tt=this.store,wt=!1,jt=Ge.type.toLowerCase().replace("ms",""),Zt=Ks[jt],qn=xr[Ge.pointerType]||Ge.pointerType,Cr=qn==nt,jr=xe(tt,Ge.pointerId,"pointerId");Zt&A&&(0===Ge.button||Cr)?jr<0&&(tt.push(Ge),jr=tt.length-1):Zt&(Z|Ve)&&(wt=!0),!(jr<0)&&(tt[jr]=Ge,this.callback(this.manager,Zt,{pointers:tt,changedPointers:[Ge],pointerType:qn,srcEvent:Ge}),wt&&tt.splice(jr,1))}});var Br={touchstart:A,touchmove:2,touchend:Z,touchcancel:Ve};function Jc(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ot.apply(this,arguments)}function ha(De,Ge){var tt=Pe(De.touches),wt=Pe(De.changedTouches);return Ge&(Z|Ve)&&(tt=He(tt.concat(wt),"identifier",!0)),[tt,wt]}W(Jc,ot,{handler:function(Ge){var tt=Br[Ge.type];if(tt===A&&(this.started=!0),this.started){var wt=ha.call(this,Ge,tt);tt&(Z|Ve)&&wt[0].length-wt[1].length==0&&(this.started=!1),this.callback(this.manager,tt,{pointers:wt[0],changedPointers:wt[1],pointerType:nt,srcEvent:Ge})}}});var Ns={touchstart:A,touchmove:2,touchend:Z,touchcancel:Ve},$e="touchstart touchmove touchend touchcancel";function Ze(){this.evTarget=$e,this.targetIds={},ot.apply(this,arguments)}function St(De,Ge){var tt=Pe(De.touches),wt=this.targetIds;if(Ge&(2|A)&&1===tt.length)return wt[tt[0].identifier]=!0,[tt,tt];var jt,Zt,qn=Pe(De.changedTouches),Cr=[],jr=this.target;if(Zt=tt.filter(function(_s){return j(_s.target,jr)}),Ge===A)for(jt=0;jt<Zt.length;)wt[Zt[jt].identifier]=!0,jt++;for(jt=0;jt<qn.length;)wt[qn[jt].identifier]&&Cr.push(qn[jt]),Ge&(Z|Ve)&&delete wt[qn[jt].identifier],jt++;return Cr.length?[He(Zt.concat(Cr),"identifier",!0),Cr]:void 0}W(Ze,ot,{handler:function(Ge){var tt=Ns[Ge.type],wt=St.call(this,Ge,tt);wt&&this.callback(this.manager,tt,{pointers:wt[0],changedPointers:wt[1],pointerType:nt,srcEvent:Ge})}});var Gt=2500;function or(){ot.apply(this,arguments);var De=k(this.handler,this);this.touch=new Ze(this.manager,De),this.mouse=new ji(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function Zr(De,Ge){De&A?(this.primaryTouch=Ge.changedPointers[0].identifier,Jt.call(this,Ge)):De&(Z|Ve)&&Jt.call(this,Ge)}function Jt(De){var Ge=De.changedPointers[0];if(Ge.identifier===this.primaryTouch){var tt={x:Ge.clientX,y:Ge.clientY};this.lastTouches.push(tt);var wt=this.lastTouches;setTimeout(function(){var Zt=wt.indexOf(tt);Zt>-1&&wt.splice(Zt,1)},Gt)}}function Js(De){for(var Ge=De.srcEvent.clientX,tt=De.srcEvent.clientY,wt=0;wt<this.lastTouches.length;wt++){var jt=this.lastTouches[wt],Zt=Math.abs(Ge-jt.x),qn=Math.abs(tt-jt.y);if(Zt<=25&&qn<=25)return!0}return!1}W(or,ot,{handler:function(Ge,tt,wt){var Zt=wt.pointerType==Ke;if(!(Zt&&wt.sourceCapabilities&&wt.sourceCapabilities.firesTouchEvents)){if(wt.pointerType==nt)Zr.call(this,tt,wt);else if(Zt&&Js.call(this,wt))return;this.callback(Ge,tt,wt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ni=Qe(E.style,"touchAction"),dc=Ni!==q,ci="compute",Ho="manipulation",Wt="none",jn="pan-x",kr="pan-y",ti=function Te(){if(!dc)return!1;var De={},Ge=C.CSS&&C.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(tt){De[tt]=!Ge||C.CSS.supports("touch-action",tt)}),De}();function Li(De,Ge){this.manager=De,this.set(Ge)}Li.prototype={set:function(De){De==ci&&(De=this.compute()),dc&&this.manager.element.style&&ti[De]&&(this.manager.element.style[Ni]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return B(this.manager.recognizers,function(Ge){v(Ge.options.enable,[Ge])&&(De=De.concat(Ge.getTouchAction()))}),function ye(De){if(Me(De,Wt))return Wt;var Ge=Me(De,jn),tt=Me(De,kr);return Ge&&tt?Wt:Ge||tt?Ge?jn:kr:Me(De,Ho)?Ho:"auto"}(De.join(" "))},preventDefaults:function(De){var Ge=De.srcEvent,tt=De.offsetDirection;if(!this.manager.session.prevented){var wt=this.actions,jt=Me(wt,Wt)&&!ti[Wt],Zt=Me(wt,kr)&&!ti[kr],qn=Me(wt,jn)&&!ti[jn];if(jt&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return qn&&Zt||!(jt||Zt&&tt&O||qn&&tt&he)?void 0:this.preventSrc(Ge)}Ge.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}};var me=1;function Tt(De){this.options=Y({},this.defaults,De||{}),this.id=function Ce(){return Xe++}(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function Nt(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function Ut(De){return De==M?"down":De==U?"up":De==ue?"left":De==ne?"right":""}function nn(De,Ge){var tt=Ge.manager;return tt?tt.get(De):De}function mn(){Tt.apply(this,arguments)}function ar(){mn.apply(this,arguments),this.pX=null,this.pY=null}function cr(){mn.apply(this,arguments)}function Cs(){Tt.apply(this,arguments),this._timer=null,this._input=null}function xn(){mn.apply(this,arguments)}function Hn(){mn.apply(this,arguments)}function Qr(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ls(De,Ge){return(Ge=Ge||{}).recognizers=I(Ge.recognizers,Ls.defaults.preset),new Go(De,Ge)}function Go(De,Ge){this.options=Y({},Ls.defaults,Ge||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function bt(De){return new(De.options.inputClass||(de?vi:Ae?Ze:ke?or:ji))(De,It)}(this),this.touchAction=new Li(this,this.options.touchAction),fa(this,!0),B(this.options.recognizers,function(tt){var wt=this.add(new tt[0](tt[1]));tt[2]&&wt.recognizeWith(tt[2]),tt[3]&&wt.requireFailure(tt[3])},this)}function fa(De,Ge){var wt,tt=De.element;tt.style&&(B(De.options.cssProps,function(jt,Zt){wt=Qe(tt.style,Zt),Ge?(De.oldCssProps[wt]=tt.style[wt],tt.style[wt]=jt):tt.style[wt]=De.oldCssProps[wt]||""}),Ge||(De.oldCssProps={}))}Tt.prototype={defaults:{},set:function(De){return Y(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(x(De,"recognizeWith",this))return this;var Ge=this.simultaneous;return Ge[(De=nn(De,this)).id]||(Ge[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return x(De,"dropRecognizeWith",this)||(De=nn(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(x(De,"requireFailure",this))return this;var Ge=this.requireFail;return-1===xe(Ge,De=nn(De,this))&&(Ge.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(x(De,"dropRequireFailure",this))return this;De=nn(De,this);var Ge=xe(this.requireFail,De);return Ge>-1&&this.requireFail.splice(Ge,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var Ge=this,tt=this.state;function wt(jt){Ge.manager.emit(jt,De)}tt<8&&wt(Ge.options.event+Nt(tt)),wt(Ge.options.event),De.additionalEvent&&wt(De.additionalEvent),tt>=8&&wt(Ge.options.event+Nt(tt))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(this.requireFail[De].state&(32|me)))return!1;De++}return!0},recognize:function(De){var Ge=Y({},De);if(!v(this.options.enable,[this,Ge]))return this.reset(),void(this.state=32);56&this.state&&(this.state=me),this.state=this.process(Ge),30&this.state&&this.tryEmit(Ge)},process:function(De){},getTouchAction:function(){},reset:function(){}},W(mn,Tt,{defaults:{pointers:1},attrTest:function(De){var Ge=this.options.pointers;return 0===Ge||De.pointers.length===Ge},process:function(De){var Ge=this.state,tt=De.eventType,wt=6&Ge,jt=this.attrTest(De);return wt&&(tt&Ve||!jt)?16|Ge:wt||jt?tt&Z?8|Ge:2&Ge?4|Ge:2:32}}),W(ar,mn,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var De=this.options.direction,Ge=[];return De&O&&Ge.push(kr),De&he&&Ge.push(jn),Ge},directionTest:function(De){var Ge=this.options,tt=!0,wt=De.distance,jt=De.direction,Zt=De.deltaX,qn=De.deltaY;return jt&Ge.direction||(Ge.direction&O?(jt=0===Zt?Je:Zt<0?ue:ne,tt=Zt!=this.pX,wt=Math.abs(De.deltaX)):(jt=0===qn?Je:qn<0?U:M,tt=qn!=this.pY,wt=Math.abs(De.deltaY))),De.direction=jt,tt&&wt>Ge.threshold&&jt&Ge.direction},attrTest:function(De){return mn.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var Ge=Ut(De.direction);Ge&&(De.additionalEvent=this.options.event+Ge),this._super.emit.call(this,De)}}),W(cr,mn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Wt]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),W(Cs,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var Ge=this.options,tt=De.pointers.length===Ge.pointers,wt=De.distance<Ge.threshold,jt=De.deltaTime>Ge.time;if(this._input=De,!wt||!tt||De.eventType&(Z|Ve)&&!jt)this.reset();else if(De.eventType&A)this.reset(),this._timer=oe(function(){this.state=8,this.tryEmit()},Ge.time,this);else if(De.eventType&Z)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&De.eventType&Z?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=F(),this.manager.emit(this.options.event,this._input)))}}),W(xn,mn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Wt]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),W(Hn,mn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|he,pointers:1},getTouchAction:function(){return ar.prototype.getTouchAction.call(this)},attrTest:function(De){var tt,Ge=this.options.direction;return Ge&(O|he)?tt=De.overallVelocity:Ge&O?tt=De.overallVelocityX:Ge&he&&(tt=De.overallVelocityY),this._super.attrTest.call(this,De)&&Ge&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&P(tt)>this.options.velocity&&De.eventType&Z},emit:function(De){var Ge=Ut(De.offsetDirection);Ge&&this.manager.emit(this.options.event+Ge,De),this.manager.emit(this.options.event,De)}}),W(Qr,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ho]},process:function(De){var Ge=this.options,tt=De.pointers.length===Ge.pointers,wt=De.distance<Ge.threshold,jt=De.deltaTime<Ge.time;if(this.reset(),De.eventType&A&&0===this.count)return this.failTimeout();if(wt&&jt&&tt){if(De.eventType!=Z)return this.failTimeout();var Zt=!this.pTime||De.timeStamp-this.pTime<Ge.interval,qn=!this.pCenter||lt(this.pCenter,De.center)<Ge.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,qn&&Zt?this.count+=1:this.count=1,this._input=De,0==this.count%Ge.taps)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=8,this.tryEmit()},Ge.interval,this),2):8}return 32},failTimeout:function(){return this._timer=oe(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ls.VERSION="2.0.7",Ls.defaults={domEvents:!1,touchAction:ci,enable:!0,inputTarget:null,inputClass:null,preset:[[xn,{enable:!1}],[cr,{enable:!1},["rotate"]],[Hn,{direction:O}],[ar,{direction:O},["swipe"]],[Qr],[Qr,{event:"doubletap",taps:2},["tap"]],[Cs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Go.prototype={set:function(De){return Y(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var Ge=this.session;if(!Ge.stopped){this.touchAction.preventDefaults(De);var tt,wt=this.recognizers,jt=Ge.curRecognizer;(!jt||jt&&8&jt.state)&&(jt=Ge.curRecognizer=null);for(var Zt=0;Zt<wt.length;)tt=wt[Zt],2===Ge.stopped||jt&&tt!=jt&&!tt.canRecognizeWith(jt)?tt.reset():tt.recognize(De),!jt&&14&tt.state&&(jt=Ge.curRecognizer=tt),Zt++}},get:function(De){if(De instanceof Tt)return De;for(var Ge=this.recognizers,tt=0;tt<Ge.length;tt++)if(Ge[tt].options.event==De)return Ge[tt];return null},add:function(De){if(x(De,"add",this))return this;var Ge=this.get(De.options.event);return Ge&&this.remove(Ge),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(x(De,"remove",this))return this;if(De=this.get(De)){var Ge=this.recognizers,tt=xe(Ge,De);-1!==tt&&(Ge.splice(tt,1),this.touchAction.update())}return this},on:function(De,Ge){if(De!==q&&Ge!==q){var tt=this.handlers;return B(ae(De),function(wt){tt[wt]=tt[wt]||[],tt[wt].push(Ge)}),this}},off:function(De,Ge){if(De!==q){var tt=this.handlers;return B(ae(De),function(wt){Ge?tt[wt]&&tt[wt].splice(xe(tt[wt],Ge),1):delete tt[wt]}),this}},emit:function(De,Ge){this.options.domEvents&&function Ts(De,Ge){var tt=$.createEvent("Event");tt.initEvent(De,!0,!0),tt.gesture=Ge,Ge.target.dispatchEvent(tt)}(De,Ge);var tt=this.handlers[De]&&this.handlers[De].slice();if(tt&&tt.length){Ge.type=De,Ge.preventDefault=function(){Ge.srcEvent.preventDefault()};for(var wt=0;wt<tt.length;)tt[wt](Ge),wt++}},destroy:function(){this.element&&fa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Y(Ls,{INPUT_START:A,INPUT_MOVE:2,INPUT_END:Z,INPUT_CANCEL:Ve,STATE_POSSIBLE:me,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Je,DIRECTION_LEFT:ue,DIRECTION_RIGHT:ne,DIRECTION_UP:U,DIRECTION_DOWN:M,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:he,DIRECTION_ALL:We,Manager:Go,Input:ot,TouchAction:Li,TouchInput:Ze,MouseInput:ji,PointerEventInput:vi,TouchMouseInput:or,SingleTouchInput:Jc,Recognizer:Tt,AttrRecognizer:mn,Tap:Qr,Pan:ar,Swipe:Hn,Pinch:cr,Rotate:xn,Press:Cs,on:T,off:le,each:B,merge:ee,extend:J,assign:Y,inherit:W,bindFn:k,prefixed:Qe}),(typeof C<"u"?C:typeof self<"u"?self:{}).Hammer=Ls,(Q=function(){return Ls}.call(_e,S,_e,Ue))!==q&&(Ue.exports=Q)}(window,document)},2601:(Ue,_e)=>{_e.read=function(S,Q,C,$,G){var q,_,E=8*G-$-1,N=(1<<E)-1,z=N>>1,P=-7,F=C?G-1:0,oe=C?-1:1,x=S[Q+F];for(F+=oe,q=x&(1<<-P)-1,x>>=-P,P+=E;P>0;q=256*q+S[Q+F],F+=oe,P-=8);for(_=q&(1<<-P)-1,q>>=-P,P+=$;P>0;_=256*_+S[Q+F],F+=oe,P-=8);if(0===q)q=1-z;else{if(q===N)return _?NaN:1/0*(x?-1:1);_+=Math.pow(2,$),q-=z}return(x?-1:1)*_*Math.pow(2,q-$)},_e.write=function(S,Q,C,$,G,q){var _,E,N,z=8*q-G-1,P=(1<<z)-1,F=P>>1,oe=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,x=$?0:q-1,B=$?1:-1,se=Q<0||0===Q&&1/Q<0?1:0;for(Q=Math.abs(Q),isNaN(Q)||Q===1/0?(E=isNaN(Q)?1:0,_=P):(_=Math.floor(Math.log(Q)/Math.LN2),Q*(N=Math.pow(2,-_))<1&&(_--,N*=2),(Q+=_+F>=1?oe/N:oe*Math.pow(2,1-F))*N>=2&&(_++,N/=2),_+F>=P?(E=0,_=P):_+F>=1?(E=(Q*N-1)*Math.pow(2,G),_+=F):(E=Q*Math.pow(2,F-1)*Math.pow(2,G),_=0));G>=8;S[C+x]=255&E,x+=B,E/=256,G-=8);for(_=_<<G|E,z+=G;z>0;S[C+x]=255&_,x+=B,_/=256,z-=8);S[C+x-B]|=128*se}},6698:Ue=>{Ue.exports="function"==typeof Object.create?function(S,Q){Q&&(S.super_=Q,S.prototype=Object.create(Q.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,Q){if(Q){S.super_=Q;var C=function(){};C.prototype=Q.prototype,S.prototype=new C,S.prototype.constructor=S}}},4198:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{isArray:C,isObject:$,isString:G}=S(8254),{asArray:q}=S(3521),{prependBase:_}=S(2651),E=S(1874),N=S(1252);function P(oe){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:oe})}function F({context:oe,base:x}){if(!oe)return;const B=oe["@context"];if(G(B))oe["@context"]=_(x,B);else if(C(B))for(let se=0;se<B.length;++se){const Y=B[se];G(Y)?B[se]=_(x,Y):$(Y)&&F({context:{"@context":Y},base:x})}else if($(B))for(const se in B)F({context:B[se],base:x})}Ue.exports=class{constructor({sharedCache:x}){this.perOpCache=new Map,this.sharedCache=x}resolve({activeCtx:x,context:B,documentLoader:se,base:Y,cycles:J=new Set}){var ee=this;return Q(function*(){B&&$(B)&&B["@context"]&&(B=B["@context"]),B=q(B);const W=[];for(const k of B){if(G(k)){let T=ee._get(k);T||(T=yield ee._resolveRemoteContext({activeCtx:x,url:k,documentLoader:se,base:Y,cycles:J})),C(T)?W.push(...T):W.push(T);continue}if(null===k){W.push(new N({document:null}));continue}$(k)||P(B);const v=JSON.stringify(k);let I=ee._get(v);I||(I=new N({document:k}),ee._cacheResolvedContext({key:v,resolved:I,tag:"static"})),W.push(I)}return W})()}_get(x){let B=this.perOpCache.get(x);if(!B){const se=this.sharedCache.get(x);se&&(B=se.get("static"),B&&this.perOpCache.set(x,B))}return B}_cacheResolvedContext({key:x,resolved:B,tag:se}){if(this.perOpCache.set(x,B),void 0!==se){let Y=this.sharedCache.get(x);Y||(Y=new Map,this.sharedCache.set(x,Y)),Y.set(se,B)}return B}_resolveRemoteContext({activeCtx:x,url:B,documentLoader:se,base:Y,cycles:J}){var ee=this;return Q(function*(){B=_(Y,B);const{context:W,remoteDoc:k}=yield ee._fetchContext({activeCtx:x,url:B,documentLoader:se,cycles:J});F({context:W,base:Y=k.documentUrl||B});const v=yield ee.resolve({activeCtx:x,context:W,documentLoader:se,base:Y,cycles:J});return ee._cacheResolvedContext({key:B,resolved:v,tag:k.tag}),v})()}_fetchContext({activeCtx:x,url:B,documentLoader:se,cycles:Y}){return Q(function*(){if(Y.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"loading remote context failed":"context overflow",max:10});if(Y.has(B))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"recursive context inclusion":"context overflow",url:B});let J,ee;Y.add(B);try{ee=yield se(B),J=ee.document||null,G(J)&&(J=JSON.parse(J))}catch(W){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:B,cause:W})}if(!$(J))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:B});return J="@context"in J?{"@context":J["@context"]}:{"@context":{}},ee.contextUrl&&(C(J["@context"])||(J["@context"]=[J["@context"]]),J["@context"].push(ee.contextUrl)),{context:J,remoteDoc:ee}})()}}},1874:Ue=>{"use strict";Ue.exports=class extends Error{constructor(S="An unspecified JSON-LD error occurred.",Q="jsonld.Error",C={}){super(S),this.name=Q,this.message=S,this.details=C}}},1828:Ue=>{"use strict";Ue.exports=_e=>{class S{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(S,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(S.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:S}),S.compact=function(Q,C){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):_e.compact(Q,C)},S.expand=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):_e.expand(Q)},S.flatten=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):_e.flatten(Q)},S}},7260:(Ue,_e,S)=>{"use strict";Ue.exports=S(1986).NQuads},4044:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;Ue.exports=class{constructor(){this._requests={}}wrapLoader($){const G=this;return G._loader=$,function(){return G.add.apply(G,arguments)}}add($){var G=this;return Q(function*(){let q=G._requests[$];if(q)return Promise.resolve(q);q=G._requests[$]=G._loader($);try{return yield q}finally{delete G._requests[$]}})()}}},1252:(Ue,_e,S)=>{"use strict";const Q=S(1072);Ue.exports=class{constructor({document:G}){this.document=G,this.cache=new Q({max:10})}getProcessed(G){return this.cache.get(G)}setProcessed(G,q){this.cache.set(G,q)}}},8809:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),{isArray:$,isObject:G,isString:q,isUndefined:_}=S(8254),{isList:E,isValue:N,isGraph:z,isSimpleGraph:P,isSubjectReference:F}=S(543),{expandIri:oe,getContextValue:x,isKeyword:B,process:se,processingMode:Y}=S(9611),{removeBase:J,prependBase:ee}=S(2651),{REGEX_KEYWORD:W,addValue:k,asArray:v,compareShortestLeast:I}=S(3521),T={};function j(Me,ae,xe){if("@nest"!==oe(Me,ae,{vocab:!0},xe))throw new C("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ue.exports=T,T.compact=function(){var Me=Q(function*({activeCtx:ae,activeProperty:xe=null,element:Pe,options:He={}}){if($(Pe)){let Xe=[];for(let Ce=0;Ce<Pe.length;++Ce){const je=yield T.compact({activeCtx:ae,activeProperty:xe,element:Pe[Ce],options:He});null!==je&&Xe.push(je)}return He.compactArrays&&1===Xe.length&&0===(x(ae,xe,"@container")||[]).length&&(Xe=Xe[0]),Xe}const Qe=x(ae,xe,"@context");if(_(Qe)||(ae=yield se({activeCtx:ae,localCtx:Qe,propagate:!0,overrideProtected:!0,options:He})),G(Pe)){if(He.link&&"@id"in Pe&&He.link.hasOwnProperty(Pe["@id"])){const nt=He.link[Pe["@id"]];for(let _t=0;_t<nt.length;++_t)if(nt[_t].expanded===Pe)return nt[_t].compacted}if(N(Pe)||F(Pe)){const nt=T.compactValue({activeCtx:ae,activeProperty:xe,value:Pe,options:He});return He.link&&F(Pe)&&(He.link.hasOwnProperty(Pe["@id"])||(He.link[Pe["@id"]]=[]),He.link[Pe["@id"]].push({expanded:Pe,compacted:nt})),nt}if(E(Pe)&&(x(ae,xe,"@container")||[]).includes("@list"))return T.compact({activeCtx:ae,activeProperty:xe,element:Pe["@list"],options:He});const Xe="@reverse"===xe,Ce={},je=ae;!N(Pe)&&!F(Pe)&&(ae=ae.revertToPreviousContext());const Se=x(je,xe,"@context");_(Se)||(ae=yield se({activeCtx:ae,localCtx:Se,propagate:!0,overrideProtected:!0,options:He})),He.link&&"@id"in Pe&&(He.link.hasOwnProperty(Pe["@id"])||(He.link[Pe["@id"]]=[]),He.link[Pe["@id"]].push({expanded:Pe,compacted:Ce}));let ke=Pe["@type"]||[];ke.length>1&&(ke=Array.from(ke).sort());const de=ae;for(const nt of ke){const _t=T.compactIri({activeCtx:de,iri:nt,relativeTo:{vocab:!0}}),Ke=x(je,_t,"@context");_(Ke)||(ae=yield se({activeCtx:ae,localCtx:Ke,options:He,propagate:!1}))}const Ae=Object.keys(Pe).sort();for(const nt of Ae){const _t=Pe[nt];if("@id"!==nt)if("@type"!==nt)if("@reverse"!==nt)if("@preserve"!==nt)if("@index"!==nt)if("@graph"!==nt&&"@list"!==nt&&"@included"!==nt&&B(nt)){const Ke=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,Ke,_t)}else{if(!$(_t))throw new C("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===_t.length){const Ke=T.compactIri({activeCtx:ae,iri:nt,value:_t,relativeTo:{vocab:!0},reverse:Xe}),fe=ae.mappings.has(Ke)?ae.mappings.get(Ke)["@nest"]:null;let R=Ce;fe&&(j(ae,fe,He),G(Ce[fe])||(Ce[fe]={}),R=Ce[fe]),k(R,Ke,_t,{propertyIsArray:!0})}for(const Ke of _t){const fe=T.compactIri({activeCtx:ae,iri:nt,value:Ke,relativeTo:{vocab:!0},reverse:Xe}),R=ae.mappings.has(fe)?ae.mappings.get(fe)["@nest"]:null;let A=Ce;R&&(j(ae,R,He),G(Ce[R])||(Ce[R]={}),A=Ce[R]);const ie=x(ae,fe,"@container")||[],Z=z(Ke),Ve=E(Ke);let Je;Ve?Je=Ke["@list"]:Z&&(Je=Ke["@graph"]);let ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:Ve||Z?Je:Ke,options:He});if(Ve){if($(ue)||(ue=[ue]),ie.includes("@list")){k(A,fe,ue,{valueIsArray:!0,allowDuplicate:!0});continue}ue={[T.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ue},"@index"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ke["@index"])}if(Z)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&P(Ke))){let ne;A.hasOwnProperty(fe)?ne=A[fe]:A[fe]=ne={};const U=(ie.includes("@id")?Ke["@id"]:Ke["@index"])||T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});k(ne,U,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&P(Ke)?($(ue)&&ue.length>1&&(ue={"@included":ue}),k(A,fe,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")})):($(ue)&&1===ue.length&&He.compactArrays&&(ue=ue[0]),ue={[T.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ue},"@id"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ke["@id"]),"@index"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ke["@index"]),k(A,fe,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let ne,U;if(A.hasOwnProperty(fe)?ne=A[fe]:A[fe]=ne={},ie.includes("@language"))N(ue)&&(ue=ue["@value"]),U=Ke["@language"];else if(ie.includes("@index")){const M=x(ae,fe,"@index")||"@index",O=T.compactIri({activeCtx:ae,iri:M,relativeTo:{vocab:!0}});if("@index"===M)U=Ke["@index"],delete ue[O];else{let he;if([U,...he]=v(ue[M]||[]),q(U))switch(he.length){case 0:delete ue[M];break;case 1:ue[M]=he[0];break;default:ue[M]=he}else U=null}}else if(ie.includes("@id")){const M=T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});U=ue[M],delete ue[M]}else if(ie.includes("@type")){const M=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let O;switch([U,...O]=v(ue[M]||[]),O.length){case 0:delete ue[M];break;case 1:ue[M]=O[0];break;default:ue[M]=O}1===Object.keys(ue).length&&"@id"in Ke&&(ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:{"@id":Ke["@id"]},options:He}))}U||(U=T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),k(ne,U,ue,{propertyIsArray:ie.includes("@set")})}else{const ne=!He.compactArrays||ie.includes("@set")||ie.includes("@list")||$(ue)&&0===ue.length||"@list"===nt||"@graph"===nt;k(A,fe,ue,{propertyIsArray:ne})}}}else{if((x(ae,xe,"@container")||[]).includes("@index"))continue;const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,fe,_t)}else{const Ke=yield T.compact({activeCtx:ae,activeProperty:xe,element:_t,options:He});$(Ke)&&0===Ke.length||k(Ce,nt,Ke)}else{const Ke=yield T.compact({activeCtx:ae,activeProperty:"@reverse",element:_t,options:He});for(const fe in Ke)if(ae.mappings.has(fe)&&ae.mappings.get(fe).reverse){const R=Ke[fe],ie=(x(ae,fe,"@container")||[]).includes("@set")||!He.compactArrays;k(Ce,fe,R,{propertyIsArray:ie}),delete Ke[fe]}if(Object.keys(Ke).length>0){const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});k(Ce,fe,Ke)}}else{let Ke=v(_t).map(Z=>T.compactIri({activeCtx:je,iri:Z,relativeTo:{vocab:!0}}));1===Ke.length&&(Ke=Ke[0]);const fe=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),ie=(x(ae,fe,"@container")||[]).includes("@set")&&Y(ae,1.1)||$(Ke)&&0===_t.length;k(Ce,fe,Ke,{propertyIsArray:ie})}else{let Ke=v(_t).map(R=>T.compactIri({activeCtx:ae,iri:R,relativeTo:{vocab:!1},base:He.base}));1===Ke.length&&(Ke=Ke[0]),Ce[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ke}}return Ce}return Pe});return function(ae){return Me.apply(this,arguments)}}(),T.compactIri=({activeCtx:Me,iri:ae,value:xe=null,relativeTo:Pe={vocab:!1},reverse:He=!1,base:Qe=null})=>{if(null===ae)return ae;Me.isPropertyTermScoped&&Me.previousContext&&(Me=Me.previousContext);const Xe=Me.getInverse();if(B(ae)&&ae in Xe&&"@none"in Xe[ae]&&"@type"in Xe[ae]["@none"]&&"@none"in Xe[ae]["@none"]["@type"])return Xe[ae]["@none"]["@type"]["@none"];if(Pe.vocab&&ae in Xe){const de=Me["@language"]||"@none",Ae=[];G(xe)&&"@index"in xe&&!("@graph"in xe)&&Ae.push("@index","@index@set"),G(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),z(xe)?("@index"in xe&&Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Ae.push("@graph@id","@graph@id@set"),Ae.push("@graph","@graph@set","@set"),"@index"in xe||Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Ae.push("@graph@id","@graph@id@set")):G(xe)&&!N(xe)&&Ae.push("@id","@id@set","@type","@set@type");let nt="@language",_t="@null";if(He)nt="@type",_t="@reverse",Ae.push("@set");else if(E(xe)){"@index"in xe||Ae.push("@list");const fe=xe["@list"];if(0===fe.length)nt="@any",_t="@none";else{let R=0===fe.length?de:null,A=null;for(let ie=0;ie<fe.length;++ie){const Z=fe[ie];let Ve="@none",Je="@none";if(N(Z)?"@direction"in Z?Ve=`${(Z["@language"]||"").toLowerCase()}_${Z["@direction"]}`:"@language"in Z?Ve=Z["@language"].toLowerCase():"@type"in Z?Je=Z["@type"]:Ve="@null":Je="@id",null===R?R=Ve:Ve!==R&&N(Z)&&(R="@none"),null===A?A=Je:Je!==A&&(A="@none"),"@none"===R&&"@none"===A)break}R=R||"@none",A=A||"@none","@none"!==A?(nt="@type",_t=A):_t=R}}else{if(N(xe))if("@language"in xe&&!("@index"in xe)){Ae.push("@language","@language@set"),_t=xe["@language"];const fe=xe["@direction"];fe&&(_t=`${_t}_${fe}`)}else"@direction"in xe&&!("@index"in xe)?_t=`_${xe["@direction"]}`:"@type"in xe&&(nt="@type",_t=xe["@type"]);else nt="@type",_t="@id";Ae.push("@set")}Ae.push("@none"),G(xe)&&!("@index"in xe)&&Ae.push("@index","@index@set"),N(xe)&&1===Object.keys(xe).length&&Ae.push("@language","@language@set");const Ke=function le(Me,ae,xe,Pe,He,Qe){null===Qe&&(Qe="@null");const Xe=[];if(("@id"===Qe||"@reverse"===Qe)&&G(xe)&&"@id"in xe){"@reverse"===Qe&&Xe.push("@reverse");const je=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:!0}});Me.mappings.has(je)&&Me.mappings.get(je)&&Me.mappings.get(je)["@id"]===xe["@id"]?Xe.push.apply(Xe,["@vocab","@id"]):Xe.push.apply(Xe,["@id","@vocab"])}else{Xe.push(Qe);const je=Xe.find(Se=>Se.includes("_"));je&&Xe.push(je.replace(/^[^_]+_/,"_"))}Xe.push("@none");const Ce=Me.inverse[ae];for(const je of Pe){if(!(je in Ce))continue;const Se=Ce[je][He];for(const ke of Xe)if(ke in Se)return Se[ke]}return null}(Me,ae,xe,Ae,nt,_t);if(null!==Ke)return Ke}if(Pe.vocab&&"@vocab"in Me){const de=Me["@vocab"];if(0===ae.indexOf(de)&&ae!==de){const Ae=ae.substr(de.length);if(!Me.mappings.has(Ae))return Ae}}let Ce=null;const je=[];let Se=Me.fastCurieMap;const ke=ae.length-1;for(let de=0;de<ke&&ae[de]in Se;++de)Se=Se[ae[de]],""in Se&&je.push(Se[""][0]);for(let de=je.length-1;de>=0;--de){const Ae=je[de],nt=Ae.terms;for(const _t of nt){const Ke=_t+":"+ae.substr(Ae.iri.length);Me.mappings.get(_t)._prefix&&(!Me.mappings.has(Ke)||null===xe&&Me.mappings.get(Ke)["@id"]===ae)&&(null===Ce||I(Ke,Ce)<0)&&(Ce=Ke)}}if(null!==Ce)return Ce;for(const[de,Ae]of Me.mappings)if(Ae&&Ae._prefix&&ae.startsWith(de+":"))throw new C(`Absolute IRI "${ae}" confused with prefix "${de}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Me});if(!Pe.vocab){if("@base"in Me){if(Me["@base"]){const de=J(ee(Qe,Me["@base"]),ae);return W.test(de)?`./${de}`:de}return ae}return J(Qe,ae)}return ae},T.compactValue=({activeCtx:Me,activeProperty:ae,value:xe,options:Pe})=>{if(N(xe)){const Ce=x(Me,ae,"@type"),je=x(Me,ae,"@language"),Se=x(Me,ae,"@direction"),ke=x(Me,ae,"@container")||[],de="@index"in xe&&!ke.includes("@index");if(!de&&"@none"!==Ce&&(xe["@type"]===Ce||"@language"in xe&&xe["@language"]===je&&"@direction"in xe&&xe["@direction"]===Se||"@language"in xe&&xe["@language"]===je||"@direction"in xe&&xe["@direction"]===Se))return xe["@value"];const Ae=Object.keys(xe).length,nt=1===Ae||2===Ae&&"@index"in xe&&!de,_t="@language"in Me,Ke=q(xe["@value"]),fe=Me.mappings.has(ae)&&null===Me.mappings.get(ae)["@language"];if(nt&&"@none"!==Ce&&(!_t||!Ke||fe))return xe["@value"];const R={};return de&&(R[T.compactIri({activeCtx:Me,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?R[T.compactIri({activeCtx:Me,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Me,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),R[T.compactIri({activeCtx:Me,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],R}const He=oe(Me,ae,{vocab:!0},Pe),Qe=x(Me,ae,"@type"),Xe=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:"@vocab"===Qe},base:Pe.base});return"@id"===Qe||"@vocab"===Qe||"@graph"===He?Xe:{[T.compactIri({activeCtx:Me,iri:"@id",relativeTo:{vocab:!0}})]:Xe}}},6982:Ue=>{"use strict";const _e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",S="http://www.w3.org/2001/XMLSchema#";Ue.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:_e,RDF_LIST:_e+"List",RDF_FIRST:_e+"first",RDF_REST:_e+"rest",RDF_NIL:_e+"nil",RDF_TYPE:_e+"type",RDF_PLAIN_LITERAL:_e+"PlainLiteral",RDF_XML_LITERAL:_e+"XMLLiteral",RDF_JSON_LITERAL:_e+"JSON",RDF_OBJECT:_e+"object",RDF_LANGSTRING:_e+"langString",XSD:S,XSD_BOOLEAN:S+"boolean",XSD_DOUBLE:S+"double",XSD_INTEGER:S+"integer",XSD_STRING:S+"string"}},9611:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(3521),$=S(1874),{isArray:G,isObject:q,isString:_,isUndefined:E}=S(8254),{isAbsolute:N,isRelative:z,prependBase:P}=S(2651),{handleEvent:F}=S(3855),{REGEX_BCP47:oe,REGEX_KEYWORD:x,asArray:B,compareShortestLeast:se}=S(3521),Y=new Map,ee={};function W(v,I,T,le,j,Me){if(null===I||!_(I)||ee.isKeyword(I))return I;if(I.match(x))return null;if(le&&le.hasOwnProperty(I)&&!0!==j.get(I)&&ee.createTermDefinition({activeCtx:v,localCtx:le,term:I,defined:j,options:Me}),(T=T||{}).vocab){const xe=v.mappings.get(I);if(null===xe)return null;if(q(xe)&&"@id"in xe)return xe["@id"]}const ae=I.indexOf(":");if(ae>0){const xe=I.substr(0,ae),Pe=I.substr(ae+1);if("_"===xe||0===Pe.indexOf("//"))return I;le&&le.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:v,localCtx:le,term:xe,defined:j,options:Me});const He=v.mappings.get(xe);if(He&&He._prefix)return He["@id"]+Pe;if(N(I))return I}if(T.vocab&&"@vocab"in v)I=v["@vocab"]+I;else if(T.base){let xe,Pe;"@base"in v?v["@base"]?(Pe=P(Me.base,v["@base"]),xe=P(Pe,I)):(Pe=v["@base"],xe=I):(Pe=Me.base,xe=P(Me.base,I)),I=xe}return I}function k(v,I){if(!v||"object"!=typeof v||!I||"object"!=typeof I)return v===I;const T=Array.isArray(v);if(T!==Array.isArray(I))return!1;if(T){if(v.length!==I.length)return!1;for(let Me=0;Me<v.length;++Me)if(!k(v[Me],I[Me]))return!1;return!0}const le=Object.keys(v),j=Object.keys(I);if(le.length!==j.length)return!1;for(const Me in v){let ae=v[Me],xe=I[Me];if("@container"===Me&&Array.isArray(ae)&&Array.isArray(xe)&&(ae=ae.slice().sort(),xe=xe.slice().sort()),!k(ae,xe))return!1}return!0}Ue.exports=ee,ee.process=function(){var v=Q(function*({activeCtx:I,localCtx:T,options:le,propagate:j=!0,overrideProtected:Me=!1,cycles:ae=new Set}){if(q(T)&&"@context"in T&&G(T["@context"])&&(T=T["@context"]),0===B(T).length)return I;const Pe=[],He=[({event:je,next:Se})=>{Pe.push(je),Se()}];le.eventHandler&&He.push(le.eventHandler);const Qe=le;le={...le,eventHandler:He};const Xe=yield le.contextResolver.resolve({activeCtx:I,context:T,documentLoader:le.documentLoader,base:le.base});q(Xe[0].document)&&"boolean"==typeof Xe[0].document["@propagate"]&&(j=Xe[0].document["@propagate"]);let Ce=I;!j&&!Ce.previousContext&&(Ce=Ce.clone(),Ce.previousContext=I);for(const je of Xe){let{document:Se}=je;if(I=Ce,null===Se){if(!Me&&0!==Object.keys(I.protected).length)throw new $("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ce=I=ee.getInitialContext(le).clone();continue}const ke=je.getProcessed(I);if(ke){if(Qe.eventHandler)for(const Ae of ke.events)F({event:Ae,options:Qe});Ce=I=ke.context;continue}if(q(Se)&&"@context"in Se&&(Se=Se["@context"]),!q(Se))throw new $("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Se});Ce=Ce.clone();const de=new Map;if("@version"in Se){if(1.1!==Se["@version"])throw new $("Unsupported JSON-LD version: "+Se["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Se});if(I.processingMode&&"json-ld-1.0"===I.processingMode)throw new $("@version: "+Se["@version"]+" not compatible with "+I.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Se});Ce.processingMode="json-ld-1.1",Ce["@version"]=Se["@version"],de.set("@version",!0)}if(Ce.processingMode=Ce.processingMode||I.processingMode,"@base"in Se){let Ae=Se["@base"];if(null!==Ae&&!N(Ae)){if(!z(Ae))throw new $('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Se});Ae=P(Ce["@base"],Ae)}Ce["@base"]=Ae,de.set("@base",!0)}if("@vocab"in Se){const Ae=Se["@vocab"];if(null===Ae)delete Ce["@vocab"];else{if(!_(Ae))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Se});if(!N(Ae)&&ee.processingMode(Ce,1))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Se});{const nt=W(Ce,Ae,{vocab:!0,base:!0},void 0,void 0,le);N(nt)||le.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:nt}},options:le}),Ce["@vocab"]=nt}}de.set("@vocab",!0)}if("@language"in Se){const Ae=Se["@language"];if(null===Ae)delete Ce["@language"];else{if(!_(Ae))throw new $('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Se});Ae.match(oe)||le.eventHandler&&F({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ae}},options:le}),Ce["@language"]=Ae.toLowerCase()}de.set("@language",!0)}if("@direction"in Se){const Ae=Se["@direction"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @direction not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Se});if(null===Ae)delete Ce["@direction"];else{if("ltr"!==Ae&&"rtl"!==Ae)throw new $('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Se});Ce["@direction"]=Ae}de.set("@direction",!0)}if("@propagate"in Se){const Ae=Se["@propagate"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @propagate not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Se});if("boolean"!=typeof Ae)throw new $("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});de.set("@propagate",!0)}if("@import"in Se){const Ae=Se["@import"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @import not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Se});if(!_(Ae))throw new $("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const nt=yield le.contextResolver.resolve({activeCtx:I,context:Ae,documentLoader:le.documentLoader,base:le.base});if(1!==nt.length)throw new $("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const _t=nt[0].getProcessed(I);if(_t)Se=_t;else{const Ke=nt[0].document;if("@import"in Ke)throw new $("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const fe in Ke)Se.hasOwnProperty(fe)||(Se[fe]=Ke[fe]);nt[0].setProcessed(I,Se)}de.set("@import",!0)}de.set("@protected",Se["@protected"]||!1);for(const Ae in Se)if(ee.createTermDefinition({activeCtx:Ce,localCtx:Se,term:Ae,defined:de,options:le,overrideProtected:Me}),q(Se[Ae])&&"@context"in Se[Ae]){const nt=Se[Ae]["@context"];let _t=!0;if(_(nt)){const Ke=P(le.base,nt);ae.has(Ke)?_t=!1:ae.add(Ke)}if(_t)try{yield ee.process({activeCtx:Ce.clone(),localCtx:Se[Ae]["@context"],overrideProtected:!0,options:le,cycles:ae})}catch{throw new $("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Se[Ae]["@context"],term:Ae})}}je.setProcessed(I,{context:Ce,events:Pe})}return Ce});return function(I){return v.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:v,localCtx:I,term:T,defined:le,options:j,overrideProtected:Me=!1})=>{if(le.has(T)){if(le.get(T))return;throw new $("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:I,term:T})}let ae;if(le.set(T,!1),I.hasOwnProperty(T)&&(ae=I[T]),"@type"===T&&q(ae)&&"@set"===(ae["@container"]||"@set")&&ee.processingMode(v,1.1)){const je=["@container","@id","@protected"],Se=Object.keys(ae);if(0===Se.length||Se.some(ke=>!je.includes(ke)))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:T})}else{if(ee.isKeyword(T))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:T});if(T.match(x))return void(j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:j}));if(""===T)throw new $("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:I})}const xe=v.mappings.get(T);v.mappings.has(T)&&v.mappings.delete(T);let Pe=!1;if((_(ae)||null===ae)&&(Pe=!0,ae={"@id":ae}),!q(ae))throw new $("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:I});const He={};v.mappings.set(T,He),He.reverse=!1;const Qe=["@container","@id","@language","@reverse","@type"];ee.processingMode(v,1.1)&&Qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const je in ae)if(!Qe.includes(je))throw new $("Invalid JSON-LD syntax; a term definition must not contain "+je,"jsonld.SyntaxError",{code:"invalid term definition",context:I});const Xe=T.indexOf(":");if(He._termHasColon=Xe>0,"@reverse"in ae){if("@id"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});if("@nest"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});const je=ae["@reverse"];if(!_(je))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(je.match(x))return j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:je}},options:j}),void(xe?v.mappings.set(T,xe):v.mappings.delete(T));const Se=W(v,je,{vocab:!0,base:!1},I,le,j);if(!N(Se))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});He["@id"]=Se,He.reverse=!0}else if("@id"in ae){let je=ae["@id"];if(je&&!_(je))throw new $("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(null===je)He["@id"]=null;else{if(!ee.isKeyword(je)&&je.match(x))return j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:je}},options:j}),void(xe?v.mappings.set(T,xe):v.mappings.delete(T));if(je!==T){if(je=W(v,je,{vocab:!0,base:!1},I,le,j),!N(je)&&!ee.isKeyword(je))throw new $("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(T.match(/(?::[^:])|\//)&&W(v,T,{vocab:!0,base:!1},I,new Map(le).set(T,!0),j)!==je)throw new $("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});He["@id"]=je,He._prefix=Pe&&!He._termHasColon&&null!==je.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in He))if(He._termHasColon){const je=T.substr(0,Xe);if(I.hasOwnProperty(je)&&ee.createTermDefinition({activeCtx:v,localCtx:I,term:je,defined:le,options:j}),v.mappings.has(je)){const Se=T.substr(Xe+1);He["@id"]=v.mappings.get(je)["@id"]+Se}else He["@id"]=T}else if("@type"===T)He["@id"]=T;else{if(!("@vocab"in v))throw new $("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I,term:T});He["@id"]=v["@vocab"]+T}if((!0===ae["@protected"]||!0===le.get("@protected")&&!1!==ae["@protected"])&&(v.protected[T]=!0,He.protected=!0),le.set(T,!0),"@type"in ae){let je=ae["@type"];if(!_(je))throw new $("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if("@json"===je||"@none"===je){if(ee.processingMode(v,1))throw new $(`Invalid JSON-LD syntax; an @context @type value must not be "${je}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else if("@id"!==je&&"@vocab"!==je){if(je=W(v,je,{vocab:!0,base:!1},I,le,j),!N(je))throw new $("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if(0===je.indexOf("_:"))throw new $("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}He["@type"]=je}if("@container"in ae){const je=_(ae["@container"])?[ae["@container"]]:ae["@container"]||[],Se=["@list","@set","@index","@language"];let ke=!0;const de=je.includes("@set");if(ee.processingMode(v,1.1)){if(Se.push("@graph","@id","@type"),je.includes("@list")){if(1!==je.length)throw new $("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else if(je.includes("@graph")){if(je.some(Ae=>"@graph"!==Ae&&"@id"!==Ae&&"@index"!==Ae&&"@set"!==Ae))throw new $("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else ke&=je.length<=(de?2:1);if(je.includes("@type")&&(He["@type"]=He["@type"]||"@id",!["@id","@vocab"].includes(He["@type"])))throw new $("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else ke&=!G(ae["@container"]),ke&=je.length<=1;if(ke&=je.every(Ae=>Se.includes(Ae)),ke&=!(de&&je.includes("@list")),!ke)throw new $("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Se.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:I});if(He.reverse&&!je.every(Ae=>["@index","@set"].includes(Ae)))throw new $("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});He["@container"]=je}if("@index"in ae){if(!("@container"in ae)||!He["@container"].includes("@index"))throw new $(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});if(!_(ae["@index"])||0===ae["@index"].indexOf("@"))throw new $(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});He["@index"]=ae["@index"]}if("@context"in ae&&(He["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let je=ae["@language"];if(null!==je&&!_(je))throw new $("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:I});null!==je&&(je=je.toLowerCase()),He["@language"]=je}if("@prefix"in ae){if(T.match(/:|\//))throw new $("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:I});if(ee.isKeyword(He["@id"]))throw new $("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:I});if("boolean"!=typeof ae["@prefix"])throw new $("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:I});He._prefix=!0===ae["@prefix"]}if("@direction"in ae){const je=ae["@direction"];if(null!==je&&"ltr"!==je&&"rtl"!==je)throw new $('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:I});He["@direction"]=je}if("@nest"in ae){const je=ae["@nest"];if(!_(je)||"@nest"!==je&&0===je.indexOf("@"))throw new $("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:I});He["@nest"]=je}const Ce=He["@id"];if("@context"===Ce||"@preserve"===Ce)throw new $("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:I});if(xe&&xe.protected&&!Me&&(v.protected[T]=!0,He.protected=!0,!k(xe,He)))throw new $("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:I,term:T})},ee.expandIri=(v,I,T,le)=>W(v,I,T,void 0,void 0,le),ee.getInitialContext=v=>{const I=JSON.stringify({processingMode:v.processingMode}),T=Y.get(I);if(T)return T;const le={processingMode:v.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const He=this;if(He.inverse)return He.inverse;const Qe=He.inverse={},Xe=He.fastCurieMap={},Ce={},je=(He["@language"]||"@none").toLowerCase(),Se=He["@direction"],ke=He.mappings,de=[...ke.keys()].sort(se);for(const Ae of de){const nt=ke.get(Ae);if(null===nt)continue;let _t=nt["@container"]||"@none";if(_t=[].concat(_t).sort().join(""),null===nt["@id"])continue;const Ke=B(nt["@id"]);for(const fe of Ke){let R=Qe[fe];const A=ee.isKeyword(fe);if(R)!A&&!nt._termHasColon&&Ce[fe].push(Ae);else if(Qe[fe]=R={},!A&&!nt._termHasColon){Ce[fe]=[Ae];const ie={iri:fe,terms:Ce[fe]};fe[0]in Xe?Xe[fe[0]].push(ie):Xe[fe[0]]=[ie]}if(R[_t]||(R[_t]={"@language":{},"@type":{},"@any":{}}),R=R[_t],ae(Ae,R["@any"],"@none"),nt.reverse)ae(Ae,R["@type"],"@reverse");else if("@none"===nt["@type"])ae(Ae,R["@any"],"@none"),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none");else if("@type"in nt)ae(Ae,R["@type"],nt["@type"]);else if("@language"in nt&&"@direction"in nt){const ie=nt["@language"],Z=nt["@direction"];ae(Ae,R["@language"],ie&&Z?`${ie}_${Z}`.toLowerCase():ie?ie.toLowerCase():Z?`_${Z}`:"@null")}else"@language"in nt?ae(Ae,R["@language"],(nt["@language"]||"@null").toLowerCase()):"@direction"in nt?ae(Ae,R["@language"],nt["@direction"]?`_${nt["@direction"]}`:"@none"):Se?(ae(Ae,R["@language"],`_${Se}`),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none")):(ae(Ae,R["@language"],je),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none"))}}for(const Ae in Xe)Me(Xe,Ae,1);return Qe},clone:function xe(){const He={};return He.mappings=C.clone(this.mappings),He.clone=this.clone,He.inverse=null,He.getInverse=this.getInverse,He.protected=C.clone(this.protected),this.previousContext&&(He.previousContext=this.previousContext.clone()),He.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(He["@base"]=this["@base"]),"@language"in this&&(He["@language"]=this["@language"]),"@vocab"in this&&(He["@vocab"]=this["@vocab"]),He},revertToPreviousContext:function Pe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Y.size&&Y.clear(),Y.set(I,le),le;function Me(He,Qe,Xe){const Ce=He[Qe],je=He[Qe]={};let Se,ke;for(const de of Ce)Se=de.iri,ke=Xe>=Se.length?"":Se[Xe],ke in je?je[ke].push(de):je[ke]=[de];for(const de in je)""!==de&&Me(je,de,Xe+1)}function ae(He,Qe,Xe){Qe.hasOwnProperty(Xe)||(Qe[Xe]=He)}},ee.getContextValue=(v,I,T)=>{if(null===I)return"@context"===T?void 0:null;if(v.mappings.has(I)){const le=v.mappings.get(I);if(E(T))return le;if(le.hasOwnProperty(T))return le[T]}return"@language"===T&&T in v||"@direction"===T&&T in v?v[T]:"@context"!==T?null:void 0},ee.processingMode=(v,I)=>I.toString()>="1.1"?!v.processingMode||v.processingMode>="json-ld-"+I.toString():"json-ld-1.0"===v.processingMode,ee.isKeyword=v=>{if(!_(v)||"@"!==v[0])return!1;switch(v){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{parseLinkHeader:C,buildHeaders:$}=S(3521),{LINK_HEADER_CONTEXT:G}=S(6982),q=S(1874),_=S(4044),{prependBase:E}=S(2651),N=/(^|(\r\n))link:/i;Ue.exports=({secure:P,headers:F={},xhr:oe}={headers:{}})=>{return F=$(F),(new _).wrapLoader(B);function B(Y){return se.apply(this,arguments)}function se(){return se=Q(function*(Y){if(0!==Y.indexOf("http:")&&0!==Y.indexOf("https:"))throw new q('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});if(P&&0!==Y.indexOf("https"))throw new q('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});let J;try{J=yield function z(P,F,oe){const x=new(P=P||XMLHttpRequest);return new Promise((B,se)=>{x.onload=()=>B(x),x.onerror=Y=>se(Y),x.open("GET",F,!0);for(const Y in oe)x.setRequestHeader(Y,oe[Y]);x.send()})}(oe,Y,F)}catch(I){throw new q("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Y,cause:I})}if(J.status>=400)throw new q("URL could not be dereferenced: "+J.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Y,httpStatusCode:J.status});let ee={contextUrl:null,documentUrl:Y,document:J.response},W=null;const k=J.getResponseHeader("Content-Type");let v;if(N.test(J.getAllResponseHeaders())&&(v=J.getResponseHeader("Link")),v&&"application/ld+json"!==k){const I=C(v),T=I[G];if(Array.isArray(T))throw new q("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Y});T&&(ee.contextUrl=T.target),W=I.alternate,W&&"application/ld+json"==W.type&&!(k||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield B(E(Y,W.target)))}return ee}),se.apply(this,arguments)}}},3855:(Ue,_e,S)=>{"use strict";const Q=S(1874),{isArray:C}=S(8254),{asArray:$}=S(3521),G={};function q({event:E,handlers:N}){let z=!0;for(let P=0;z&&P<N.length;++P){z=!1;const F=N[P];if(C(F))z=q({event:E,handlers:F});else if("function"==typeof F)F({event:E,next:()=>{z=!0}});else{if("object"!=typeof F)throw new Q("Invalid event handler.","jsonld.InvalidEventHandler",{event:E});E.code in F?F[E.code]({event:E,next:()=>{z=!0}}):z=!0}}return z}Ue.exports=G,G.defaultEventHandler=null,G.setupEventHandler=({options:E={}})=>{const N=[].concat(E.safe?G.safeEventHandler:[],E.eventHandler?$(E.eventHandler):[],G.defaultEventHandler?G.defaultEventHandler:[]);return 0===N.length?null:N},G.handleEvent=({event:E,options:N})=>{q({event:E,handlers:N.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);G.safeEventHandler=function({event:N,next:z}){if("warning"===N.level&&_.has(N.code))throw new Q("Safe mode validation error.","jsonld.ValidationError",{event:N});z()},G.logEventHandler=function({event:N,next:z}){console.log(`EVENT: ${N.message}`,{event:N}),z()},G.logWarningEventHandler=function({event:N,next:z}){"warning"===N.level&&console.warn(`WARNING: ${N.message}`,{event:N}),z()},G.unhandledEventHandler=function({event:N}){throw new Q("No handler for event.","jsonld.UnhandledEvent",{event:N})},G.setDefaultEventHandler=function({eventHandler:E}={}){G.defaultEventHandler=E?$(E):null}},3860:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),{isArray:$,isObject:G,isEmptyObject:q,isString:_,isUndefined:E}=S(8254),{isList:N,isValue:z,isGraph:P,isSubject:F}=S(543),{expandIri:oe,getContextValue:x,isKeyword:B,process:se,processingMode:Y}=S(9611),{isAbsolute:J}=S(2651),{REGEX_BCP47:ee,REGEX_KEYWORD:W,addValue:k,asArray:v,getValues:I,validateTypeValue:T}=S(3521),{handleEvent:le}=S(3855),j={};function Me({value:Ce,count:je,options:Se}){if(0===je||"@value"in Ce||"@list"in Ce||1===je&&"@id"in Ce){if(Se.eventHandler){let ke,de;0===je?(ke="empty object",de="Dropping empty object."):"@value"in Ce?(ke="object with only @value",de="Dropping object with only @value."):"@list"in Ce?(ke="object with only @list",de="Dropping object with only @list."):1===je&&"@id"in Ce&&(ke="object with only @id",de="Dropping object with only @id."),le({event:{type:["JsonLdEvent"],code:ke,level:"warning",message:de,details:{value:Ce}},options:Se})}return null}return Ce}function ae(Ce){return xe.apply(this,arguments)}function xe(){return(xe=Q(function*({activeCtx:Ce,activeProperty:je,expandedActiveProperty:Se,element:ke,expandedParent:de,options:Ae={},insideList:nt,typeKey:_t,typeScopedContext:Ke}){const fe=Object.keys(ke).sort(),R=[];let A;const ie=ke[_t]&&"@json"===oe(Ce,$(ke[_t])?ke[_t][0]:ke[_t],{vocab:!0},{...Ae,typeExpansion:!0});for(const Z of fe){let Je,Ve=ke[Z];if("@context"===Z)continue;const ue=oe(Ce,Z,{vocab:!0},Ae);if(null===ue||!J(ue)&&!B(ue)){Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Z,expandedProperty:ue}},options:Ae});continue}if(B(ue)){if("@reverse"===Se)throw new C("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ve});if(ue in de&&"@included"!==ue&&"@type"!==ue)throw new C("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ue})}if("@id"===ue){if(!_(Ve)){if(!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve});if(G(Ve)){if(!q(Ve))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve})}else{if(!$(Ve))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve});if(!Ve.every(O=>_(O)))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve})}}k(de,"@id",v(Ve).map(O=>{if(_(O)){const he=oe(Ce,O,{base:!0},Ae);return Ae.eventHandler&&(null===he?le(null===O?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:Ae}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:Ae}):J(he)||le({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:he}},options:Ae})),he}return O}),{propertyIsArray:Ae.isFrame});continue}if("@type"===ue){G(Ve)&&(Ve=Object.fromEntries(Object.entries(Ve).map(([O,he])=>[oe(Ke,O,{vocab:!0}),v(he).map(We=>oe(Ke,We,{base:!0,vocab:!0},{...Ae,typeExpansion:!0}))]))),T(Ve,Ae.isFrame),k(de,"@type",v(Ve).map(O=>{if(_(O)){const he=oe(Ke,O,{base:!0,vocab:!0},{...Ae,typeExpansion:!0});return"@json"!==he&&!J(he)&&Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:Ae}),he}return O}),{propertyIsArray:!!Ae.isFrame});continue}if("@included"===ue&&Y(Ce,1.1)){const O=v(yield j.expand({activeCtx:Ce,activeProperty:je,element:Ve,options:Ae}));if(!O.every(he=>F(he)))throw new C("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Ve});k(de,"@included",O,{propertyIsArray:!0});continue}if("@graph"===ue&&!G(Ve)&&!$(Ve))throw new C('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ve});if("@value"===ue){A=Ve,ie&&Y(Ce,1.1)?de["@value"]=Ve:k(de,"@value",Ve,{propertyIsArray:Ae.isFrame});continue}if("@language"===ue){if(null===Ve)continue;if(!_(Ve)&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ve});Ve=v(Ve).map(O=>_(O)?O.toLowerCase():O);for(const O of Ve)_(O)&&!O.match(ee)&&Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:Ae});k(de,"@language",Ve,{propertyIsArray:Ae.isFrame});continue}if("@direction"===ue){if(!_(Ve)&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Ve});Ve=v(Ve);for(const O of Ve)if(_(O)&&"ltr"!==O&&"rtl"!==O)throw new C('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Ve});k(de,"@direction",Ve,{propertyIsArray:Ae.isFrame});continue}if("@index"===ue){if(!_(Ve))throw new C('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ve});k(de,"@index",Ve);continue}if("@reverse"===ue){if(!G(Ve))throw new C('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ve});if(Je=yield j.expand({activeCtx:Ce,activeProperty:"@reverse",element:Ve,options:Ae}),"@reverse"in Je)for(const he in Je["@reverse"])k(de,he,Je["@reverse"][he],{propertyIsArray:!0});let O=de["@reverse"]||null;for(const he in Je){if("@reverse"===he)continue;null===O&&(O=de["@reverse"]={}),k(O,he,[],{propertyIsArray:!0});const We=Je[he];for(let Ee=0;Ee<We.length;++Ee){const Re=We[Ee];if(z(Re)||N(Re))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});k(O,he,Re,{propertyIsArray:!0})}}continue}if("@nest"===ue){R.push(Z);continue}let ne=Ce;const U=x(Ce,Z,"@context");E(U)||(ne=yield se({activeCtx:Ce,localCtx:U,propagate:!0,overrideProtected:!0,options:Ae}));const M=x(Ce,Z,"@container")||[];if(M.includes("@language")&&G(Ve))Je=He(ne,Ve,x(ne,Z,"@direction"),Ae);else if(M.includes("@index")&&G(Ve)){const O=M.includes("@graph"),he=x(ne,Z,"@index")||"@index",We="@index"!==he&&oe(Ce,he,{vocab:!0},Ae);Je=yield Qe({activeCtx:ne,options:Ae,activeProperty:Z,value:Ve,asGraph:O,indexKey:he,propertyIndex:We})}else if(M.includes("@id")&&G(Ve)){const O=M.includes("@graph");Je=yield Qe({activeCtx:ne,options:Ae,activeProperty:Z,value:Ve,asGraph:O,indexKey:"@id"})}else if(M.includes("@type")&&G(Ve))Je=yield Qe({activeCtx:ne.revertToPreviousContext(),options:Ae,activeProperty:Z,value:Ve,asGraph:!1,indexKey:"@type"});else{const O="@list"===ue;if(O||"@set"===ue){let he=je;O&&"@graph"===Se&&(he=null),Je=yield j.expand({activeCtx:ne,activeProperty:he,element:Ve,options:Ae,insideList:O})}else Je="@json"===x(Ce,Z,"@type")?{"@type":"@json","@value":Ve}:yield j.expand({activeCtx:ne,activeProperty:Z,element:Ve,options:Ae,insideList:!1})}if(null!==Je||"@value"===ue){if("@list"!==ue&&!N(Je)&&M.includes("@list")&&(Je={"@list":v(Je)}),M.includes("@graph")&&!M.some(O=>"@id"===O||"@index"===O)){if(Je=v(Je),Ae.isFrame||(Je=Je.filter(O=>null!==Me({value:O,count:Object.keys(O).length,options:Ae}))),0===Je.length)continue;Je=Je.map(O=>({"@graph":v(O)}))}if(ne.mappings.has(Z)&&ne.mappings.get(Z).reverse){const O=de["@reverse"]=de["@reverse"]||{};Je=v(Je);for(let he=0;he<Je.length;++he){const We=Je[he];if(z(We)||N(We))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});k(O,ue,We,{propertyIsArray:!0})}continue}k(de,ue,Je,{propertyIsArray:!0})}}if("@value"in de&&("@json"!==de["@type"]||!Y(Ce,1.1))&&(G(A)||$(A))&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:A});for(const Z of R){const Ve=$(ke[Z])?ke[Z]:[ke[Z]];for(const Je of Ve){if(!G(Je)||Object.keys(Je).some(ue=>"@value"===oe(Ce,ue,{vocab:!0},Ae)))throw new C("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Je});yield ae({activeCtx:Ce,activeProperty:je,expandedActiveProperty:Se,element:Je,expandedParent:de,options:Ae,insideList:nt,typeScopedContext:Ke,typeKey:_t})}}})).apply(this,arguments)}function Pe({activeCtx:Ce,activeProperty:je,value:Se,options:ke}){if(null==Se)return null;const de=oe(Ce,je,{vocab:!0},ke);if("@id"===de)return oe(Ce,Se,{base:!0},ke);if("@type"===de)return oe(Ce,Se,{vocab:!0,base:!0},{...ke,typeExpansion:!0});const Ae=x(Ce,je,"@type");if(("@id"===Ae||"@graph"===de)&&_(Se)){const _t=oe(Ce,Se,{base:!0},ke);return null===_t&&Se.match(W)&&ke.eventHandler&&le({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:je}},options:ke}),{"@id":_t}}if("@vocab"===Ae&&_(Se))return{"@id":oe(Ce,Se,{vocab:!0,base:!0},ke)};if(B(de))return Se;const nt={};if(Ae&&!["@id","@vocab","@none"].includes(Ae))nt["@type"]=Ae;else if(_(Se)){const _t=x(Ce,je,"@language");null!==_t&&(nt["@language"]=_t);const Ke=x(Ce,je,"@direction");null!==Ke&&(nt["@direction"]=Ke)}return["boolean","number","string"].includes(typeof Se)||(Se=Se.toString()),nt["@value"]=Se,nt}function He(Ce,je,Se,ke){const de=[],Ae=Object.keys(je).sort();for(const nt of Ae){const _t=oe(Ce,nt,{vocab:!0},ke);let Ke=je[nt];$(Ke)||(Ke=[Ke]);for(const fe of Ke){if(null===fe)continue;if(!_(fe))throw new C("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:je});const R={"@value":fe};"@none"!==_t&&(nt.match(ee)||ke.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt}},options:ke}),R["@language"]=nt.toLowerCase()),Se&&(R["@direction"]=Se),de.push(R)}}return de}function Qe(Ce){return Xe.apply(this,arguments)}function Xe(){return(Xe=Q(function*({activeCtx:Ce,options:je,activeProperty:Se,value:ke,asGraph:de,indexKey:Ae,propertyIndex:nt}){const _t=[],Ke=Object.keys(ke).sort(),fe="@type"===Ae;for(let R of Ke){if(fe){const Z=x(Ce,R,"@context");E(Z)||(Ce=yield se({activeCtx:Ce,localCtx:Z,propagate:!1,options:je}))}let ie,A=ke[R];$(A)||(A=[A]),A=yield j.expand({activeCtx:Ce,activeProperty:Se,element:A,options:je,insideList:!1,insideIndex:!0}),ie=nt?"@none"===R?"@none":Pe({activeCtx:Ce,activeProperty:Ae,value:R,options:je}):oe(Ce,R,{vocab:!0},je),"@id"===Ae?R=oe(Ce,R,{base:!0},je):fe&&(R=ie);for(let Z of A){if(de&&!P(Z)&&(Z={"@graph":[Z]}),"@type"===Ae)"@none"===ie||(Z["@type"]=Z["@type"]?[R].concat(Z["@type"]):[R]);else{if(z(Z)&&!["@language","@type","@index"].includes(Ae))throw new C(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Z});nt?"@none"!==ie&&k(Z,nt,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Ae in Z)&&(Z[Ae]=R)}_t.push(Z)}}return _t})).apply(this,arguments)}Ue.exports=j,j.expand=function(){var Ce=Q(function*({activeCtx:je,activeProperty:Se=null,element:ke,options:de={},insideList:Ae=!1,insideIndex:nt=!1,typeScopedContext:_t=null}){if(null==ke)return null;if("@default"===Se&&(de=Object.assign({},de,{isFrame:!1})),!$(ke)&&!G(ke))return Ae||null!==Se&&"@graph"!==oe(je,Se,{vocab:!0},de)?Pe({activeCtx:je,activeProperty:Se,value:ke,options:de}):(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:ke}},options:de}),null);if($(ke)){let Je=[];const ue=x(je,Se,"@container")||[];Ae=Ae||ue.includes("@list");for(let ne=0;ne<ke.length;++ne){let U=yield j.expand({activeCtx:je,activeProperty:Se,element:ke[ne],options:de,insideIndex:nt,typeScopedContext:_t});Ae&&$(U)&&(U={"@list":U}),null!==U&&($(U)?Je=Je.concat(U):Je.push(U))}return Je}const Ke=oe(je,Se,{vocab:!0},de),fe=x(je,Se,"@context");_t=_t||(je.previousContext?je:null);let R=Object.keys(ke).sort(),A=!nt;if(A&&_t&&R.length<=2&&!R.includes("@context"))for(const Je of R){const ue=oe(_t,Je,{vocab:!0},de);if("@value"===ue){A=!1,je=_t;break}if("@id"===ue&&1===R.length){A=!1;break}}A&&(je=je.revertToPreviousContext()),E(fe)||(je=yield se({activeCtx:je,localCtx:fe,propagate:!0,overrideProtected:!0,options:de})),"@context"in ke&&(je=yield se({activeCtx:je,localCtx:ke["@context"],options:de})),_t=je;let ie=null;for(const Je of R)if("@type"===oe(je,Je,{vocab:!0},de)){ie=ie||Je;const ne=ke[Je],U=Array.isArray(ne)?ne.length>1?ne.slice().sort():ne:[ne];for(const M of U){const O=x(_t,M,"@context");E(O)||(je=yield se({activeCtx:je,localCtx:O,options:de,propagate:!1}))}}let Z={};yield ae({activeCtx:je,activeProperty:Se,expandedActiveProperty:Ke,element:ke,expandedParent:Z,options:de,insideList:Ae,typeKey:ie,typeScopedContext:_t}),R=Object.keys(Z);let Ve=R.length;if("@value"in Z){if("@type"in Z&&("@language"in Z||"@direction"in Z))throw new C('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});let Je=Ve-1;if("@type"in Z&&(Je-=1),"@index"in Z&&(Je-=1),"@language"in Z&&(Je-=1),"@direction"in Z&&(Je-=1),0!==Je)throw new C('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});const ue=null===Z["@value"]?[]:v(Z["@value"]),ne=I(Z,"@type");if(!Y(je,1.1)||!ne.includes("@json")||1!==ne.length)if(0===ue.length)de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Z}},options:de}),Z=null;else{if(!ue.every(U=>_(U)||q(U))&&"@language"in Z)throw new C("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Z});if(!ne.every(U=>J(U)&&!(_(U)&&0===U.indexOf("_:"))||q(U)))throw new C('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Z})}}else if("@type"in Z&&!$(Z["@type"]))Z["@type"]=[Z["@type"]];else if("@set"in Z||"@list"in Z){if(Ve>1&&(2!==Ve||!("@index"in Z)))throw new C('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Z});"@set"in Z&&(Z=Z["@set"],R=Object.keys(Z),Ve=R.length)}else 1===Ve&&"@language"in Z&&(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Z}},options:de}),Z=null);return G(Z)&&!de.keepFreeFloatingNodes&&!Ae&&(null===Se||"@graph"===Ke||(x(je,Se,"@container")||[]).includes("@graph"))&&(Z=Me({value:Z,count:Ve,options:de})),Z});return function(je){return Ce.apply(this,arguments)}}()},8295:(Ue,_e,S)=>{"use strict";const{isSubjectReference:Q}=S(543),{createMergedNodeMap:C}=S(9783),$={};Ue.exports=$,$.flatten=G=>{const q=C(G),_=[],E=Object.keys(q).sort();for(let N=0;N<E.length;++N){const z=q[E[N]];Q(z)||_.push(z)}return _}},9193:(Ue,_e,S)=>{"use strict";const{isKeyword:Q}=S(9611),C=S(543),$=S(8254),G=S(3521),q=S(2651),_=S(1874),{createNodeMap:E,mergeNodeMapGraphs:N}=S(9783),z={};function P(v){const I={};for(const T in v)void 0!==v[T]&&(I["@"+T]=[v[T]]);return[I]}function F(v,I,T){for(let le=T.length-1;le>=0;--le){const j=T[le];if(j.graph===I&&j.subject["@id"]===v["@id"])return!0}return!1}function oe(v,I,T){const le="@"+T;let j=le in v?v[le][0]:I[T];if("embed"===T)if(!0===j)j="@once";else if(!1===j)j="@never";else if("@always"!==j&&"@never"!==j&&"@link"!==j&&"@first"!==j&&"@last"!==j&&"@once"!==j)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:v});return j}function x(v){if(!$.isArray(v)||1!==v.length||!$.isObject(v[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:v});if("@id"in v[0])for(const I of G.asArray(v[0]["@id"]))if(!$.isObject(I)&&!q.isAbsolute(I)||$.isString(I)&&0===I.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v});if("@type"in v[0])for(const I of G.asArray(v[0]["@type"]))if(!$.isObject(I)&&!q.isAbsolute(I)&&"@json"!==I||$.isString(I)&&0===I.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v})}function se(v,I,T,le){let j=!0,Me=!1;for(const ae in T){let xe=!1;const Pe=G.getValues(I,ae),He=0===G.getValues(T,ae).length;if("@id"===ae){if($.isEmptyObject(T["@id"][0]||{})?xe=!0:T["@id"].length>=0&&(xe=T["@id"].includes(Pe[0])),!le.requireAll)return xe}else if("@type"===ae){if(j=!1,He){if(Pe.length>0)return!1;xe=!0}else if(1===T["@type"].length&&$.isEmptyObject(T["@type"][0]))xe=Pe.length>0;else for(const Qe of T["@type"])xe=!(!$.isObject(Qe)||!("@default"in Qe))||xe||Pe.some(Xe=>Xe===Qe);if(!le.requireAll)return xe}else{if(Q(ae))continue;{const Qe=G.getValues(T,ae)[0];let Xe=!1;if(Qe&&(x([Qe]),Xe="@default"in Qe),j=!1,0===Pe.length&&Xe)continue;if(Pe.length>0&&He)return!1;if(void 0===Qe){if(Pe.length>0)return!1;xe=!0}else if(C.isList(Qe)){const Ce=Qe["@list"][0];if(C.isList(Pe[0])){const je=Pe[0]["@list"];C.isValue(Ce)?xe=je.some(Se=>k(Ce,Se)):(C.isSubject(Ce)||C.isSubjectReference(Ce))&&(xe=je.some(Se=>W(v,Ce,Se,le)))}}else xe=C.isValue(Qe)?Pe.some(Ce=>k(Qe,Ce)):C.isSubjectReference(Qe)?Pe.some(Ce=>W(v,Qe,Ce,le)):!!$.isObject(Qe)&&Pe.length>0}}if(!xe&&le.requireAll)return!1;Me=Me||xe}return j||Me}function Y(v,I){const T=v.uniqueEmbeds[v.graph],le=T[I],j=le.parent,Me=le.property,ae={"@id":I};if($.isArray(j)){for(let Pe=0;Pe<j.length;++Pe)if(G.compareValues(j[Pe],ae)){j[Pe]=ae;break}}else{const Pe=$.isArray(j[Me]);G.removeValue(j,Me,ae,{propertyIsArray:Pe}),G.addValue(j,Me,ae,{propertyIsArray:Pe})}const xe=Pe=>{const He=Object.keys(T);for(const Qe of He)Qe in T&&$.isObject(T[Qe].parent)&&T[Qe].parent["@id"]===Pe&&(delete T[Qe],xe(Qe))};xe(I)}function J(v,I){if($.isArray(v))return v.map(T=>J(T,I));if($.isObject(v)){if("@preserve"in v)return v["@preserve"][0];if(C.isValue(v))return v;if(C.isList(v))return v["@list"]=J(v["@list"],I),v;if("@id"in v){const T=v["@id"];if(I.link.hasOwnProperty(T)){const le=I.link[T].indexOf(v);if(-1!==le)return I.link[T][le];I.link[T].push(v)}else I.link[T]=[v]}for(const T in v)"@id"===T&&I.bnodesToClear.includes(v[T])?delete v["@id"]:v[T]=J(v[T],I)}return v}function ee(v,I,T){$.isObject(v)?G.addValue(v,I,T,{propertyIsArray:!0}):v.push(T)}function W(v,I,T,le){if(!("@id"in T))return!1;const j=v.subjects[T["@id"]];return j&&se(v,j,I,le)}function k(v,I){const T=I["@value"],le=I["@type"],j=I["@language"],Me=v["@value"]?$.isArray(v["@value"])?v["@value"]:[v["@value"]]:[],ae=v["@type"]?$.isArray(v["@type"])?v["@type"]:[v["@type"]]:[],xe=v["@language"]?$.isArray(v["@language"])?v["@language"]:[v["@language"]]:[];return 0===Me.length&&0===ae.length&&0===xe.length||!(!Me.includes(T)&&!$.isEmptyObject(Me[0])||!(!le&&0===ae.length||ae.includes(le)||le&&$.isEmptyObject(ae[0]))||!(!j&&0===xe.length||xe.includes(j)||j&&$.isEmptyObject(xe[0])))}Ue.exports=z,z.frameMergedOrDefault=(v,I,T)=>{const le={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},j=new G.IdentifierIssuer("_:b");E(v,le.graphMap,"@default",j),T.merged&&(le.graphMap["@merged"]=N(le.graphMap),le.graph="@merged"),le.subjects=le.graphMap[le.graph];const Me=[];return z.frame(le,Object.keys(le.subjects).sort(),I,Me),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(le.bnodeMap).filter(ae=>1===le.bnodeMap[ae].length)),T.link={},J(Me,T)},z.frame=(v,I,T,le,j=null)=>{x(T);const Me=v.options,ae={embed:oe(T=T[0],Me,"embed"),explicit:oe(T,Me,"explicit"),requireAll:oe(T,Me,"requireAll")};v.link.hasOwnProperty(v.graph)||(v.link[v.graph]={});const xe=v.link[v.graph],Pe=function B(v,I,T,le){const j={};for(const Me of I){const ae=v.graphMap[v.graph][Me];se(v,ae,T,le)&&(j[Me]=ae)}return j}(v,I,T,ae),He=Object.keys(Pe).sort();for(const Qe of He){const Xe=Pe[Qe];if(null===j?v.uniqueEmbeds={[v.graph]:{}}:v.uniqueEmbeds[v.graph]=v.uniqueEmbeds[v.graph]||{},"@link"===ae.embed&&Qe in xe){ee(le,j,xe[Qe]);continue}const Ce={"@id":Qe};if(0===Qe.indexOf("_:")&&G.addValue(v.bnodeMap,Qe,Ce,{propertyIsArray:!0}),xe[Qe]=Ce,("@first"===ae.embed||"@last"===ae.embed)&&v.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(v.embedded||!v.uniqueEmbeds[v.graph].hasOwnProperty(Qe)){if(v.embedded&&("@never"===ae.embed||F(Xe,v.graph,v.subjectStack))){ee(le,j,Ce);continue}if(v.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&v.uniqueEmbeds[v.graph].hasOwnProperty(Qe)){ee(le,j,Ce);continue}if("@last"===ae.embed&&Qe in v.uniqueEmbeds[v.graph]&&Y(v,Qe),v.uniqueEmbeds[v.graph][Qe]={parent:le,property:j},v.subjectStack.push({subject:Xe,graph:v.graph}),Qe in v.graphMap){let je=!1,Se=null;"@graph"in T?(Se=T["@graph"][0],je=!("@merged"===Qe||"@default"===Qe),$.isObject(Se)||(Se={})):(je="@merged"!==v.graph,Se={}),je&&z.frame({...v,graph:Qe,embedded:!1},Object.keys(v.graphMap[Qe]).sort(),[Se],Ce,"@graph")}"@included"in T&&z.frame({...v,embedded:!1},I,T["@included"],Ce,"@included");for(const je of Object.keys(Xe).sort())if(Q(je)){if(Ce[je]=G.clone(Xe[je]),"@type"===je)for(const Se of Xe["@type"])0===Se.indexOf("_:")&&G.addValue(v.bnodeMap,Se,Ce,{propertyIsArray:!0})}else if(!ae.explicit||je in T)for(const Se of Xe[je]){const ke=je in T?T[je]:P(ae);if(C.isList(Se)){const de=T[je]&&T[je][0]&&T[je][0]["@list"]?T[je][0]["@list"]:P(ae),Ae={"@list":[]};ee(Ce,je,Ae);const nt=Se["@list"];for(const _t of nt)C.isSubjectReference(_t)?z.frame({...v,embedded:!0},[_t["@id"]],de,Ae,"@list"):ee(Ae,"@list",G.clone(_t))}else C.isSubjectReference(Se)?z.frame({...v,embedded:!0},[Se["@id"]],ke,Ce,je):k(ke[0],Se)&&ee(Ce,je,G.clone(Se))}for(const je of Object.keys(T).sort()){if("@type"===je){if(!$.isObject(T[je][0])||!("@default"in T[je][0]))continue}else if(Q(je))continue;const Se=T[je][0]||{};if(!oe(Se,Me,"omitDefault")&&!(je in Ce)){let de="@null";"@default"in Se&&(de=G.clone(Se["@default"])),$.isArray(de)||(de=[de]),Ce[je]=[{"@preserve":de}]}}for(const je of Object.keys(T["@reverse"]||{}).sort()){const Se=T["@reverse"][je];for(const ke of Object.keys(v.subjects))G.getValues(v.subjects[ke],je).some(Ae=>Ae["@id"]===Qe)&&(Ce["@reverse"]=Ce["@reverse"]||{},G.addValue(Ce["@reverse"],je,[],{propertyIsArray:!0}),z.frame({...v,embedded:!0},[ke],Se,Ce["@reverse"][je],j))}ee(le,j,Ce),v.subjectStack.pop()}}},z.cleanupNull=(v,I)=>{if($.isArray(v))return v.map(le=>z.cleanupNull(le,I)).filter(le=>le);if("@null"===v)return null;if($.isObject(v)){if("@id"in v){const T=v["@id"];if(I.link.hasOwnProperty(T)){const le=I.link[T].indexOf(v);if(-1!==le)return I.link[T][le];I.link[T].push(v)}else I.link[T]=[v]}for(const T in v)v[T]=z.cleanupNull(v[T],I)}return v}},9767:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),$=S(543),G=S(8254),{REGEX_BCP47:q,addValue:_}=S(3521),{handleEvent:E}=S(3855),{RDF_LIST:N,RDF_FIRST:z,RDF_REST:P,RDF_NIL:F,RDF_TYPE:oe,RDF_JSON_LITERAL:x,XSD_BOOLEAN:B,XSD_DOUBLE:se,XSD_INTEGER:Y,XSD_STRING:J}=S(6982),ee={};function W(k,v,I,T){if(k.termType.endsWith("Node"))return{"@id":k.value};const le={"@value":k.value};if(k.language)k.language.match(q)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:k.language}},options:T}),le["@language"]=k.language;else{let j=k.datatype.value;if(j||(j=J),j===x){j="@json";try{le["@value"]=JSON.parse(le["@value"])}catch(Me){throw new C("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:le["@value"],cause:Me})}}if(v){if(j===B)"true"===le["@value"]?le["@value"]=!0:"false"===le["@value"]&&(le["@value"]=!1);else if(G.isNumeric(le["@value"]))if(j===Y){const Me=parseInt(le["@value"],10);Me.toFixed(0)===le["@value"]&&(le["@value"]=Me)}else j===se&&(le["@value"]=parseFloat(le["@value"]));[B,Y,se,J].includes(j)||(le["@type"]=j)}else if("i18n-datatype"===I&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,Me,ae]=j.split(/[#_]/);Me.length>0&&(le["@language"]=Me,Me.match(q)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Me}},options:T})),le["@direction"]=ae}else j!==J&&(le["@type"]=j)}return le}Ue.exports=ee,ee.fromRDF=function(){var k=Q(function*(v,I){const{useRdfType:T=!1,useNativeTypes:le=!1,rdfDirection:j=null}=I,Me={},ae={"@default":Me},xe={};if(j){if("compound-literal"===j)throw new C("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:j});if("i18n-datatype"!==j)throw new C("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:j})}for(const Qe of v){const Xe="DefaultGraph"===Qe.graph.termType?"@default":Qe.graph.value;Xe in ae||(ae[Xe]={}),"@default"!==Xe&&!(Xe in Me)&&(Me[Xe]={"@id":Xe});const Ce=ae[Xe],je=Qe.subject.value,Se=Qe.predicate.value,ke=Qe.object;je in Ce||(Ce[je]={"@id":je});const de=Ce[je],Ae=ke.termType.endsWith("Node");if(Ae&&!(ke.value in Ce)&&(Ce[ke.value]={"@id":ke.value}),Se===oe&&!T&&Ae){_(de,"@type",ke.value,{propertyIsArray:!0});continue}const nt=W(ke,le,j,I);if(_(de,Se,nt,{propertyIsArray:!0}),Ae)if(ke.value===F){const _t=Ce[ke.value];"usages"in _t||(_t.usages=[]),_t.usages.push({node:de,property:Se,value:nt})}else xe[ke.value]=!(ke.value in xe)&&{node:de,property:Se,value:nt}}for(const Qe in ae){const Xe=ae[Qe];if(!(F in Xe))continue;const Ce=Xe[F];if(Ce.usages){for(let je of Ce.usages){let Se=je.node,ke=je.property,de=je.value;const Ae=[],nt=[];let _t=Object.keys(Se).length;for(;ke===P&&G.isObject(xe[Se["@id"]])&&G.isArray(Se[z])&&1===Se[z].length&&G.isArray(Se[P])&&1===Se[P].length&&(3===_t||4===_t&&G.isArray(Se["@type"])&&1===Se["@type"].length&&Se["@type"][0]===N)&&(Ae.push(Se[z][0]),nt.push(Se["@id"]),je=xe[Se["@id"]],Se=je.node,ke=je.property,de=je.value,_t=Object.keys(Se).length,$.isBlankNode(Se)););delete de["@id"],de["@list"]=Ae.reverse();for(const Ke of nt)delete Xe[Ke]}delete Ce.usages}}const Pe=[],He=Object.keys(Me).sort();for(const Qe of He){const Xe=Me[Qe];if(Qe in ae){const Ce=Xe["@graph"]=[],je=ae[Qe],Se=Object.keys(je).sort();for(const ke of Se){const de=je[ke];$.isSubjectReference(de)||Ce.push(de)}}$.isSubjectReference(Xe)||Pe.push(Xe)}return Pe});return function(v,I){return k.apply(this,arguments)}}()},543:(Ue,_e,S)=>{"use strict";const Q=S(8254),C={};Ue.exports=C,C.isSubject=$=>!(!Q.isObject($)||"@value"in $||"@set"in $||"@list"in $)&&(Object.keys($).length>1||!("@id"in $)),C.isSubjectReference=$=>Q.isObject($)&&1===Object.keys($).length&&"@id"in $,C.isValue=$=>Q.isObject($)&&"@value"in $,C.isList=$=>Q.isObject($)&&"@list"in $,C.isGraph=$=>Q.isObject($)&&"@graph"in $&&1===Object.keys($).filter(G=>"@id"!==G&&"@index"!==G).length,C.isSimpleGraph=$=>C.isGraph($)&&!("@id"in $),C.isBlankNode=$=>{if(Q.isObject($)){if("@id"in $){const G=$["@id"];return!Q.isString(G)||0===G.indexOf("_:")}return 0===Object.keys($).length||!("@value"in $||"@set"in $||"@list"in $)}return!1}},7661:(Ue,_e,S)=>{var Q=S(7156).default;const C=S(1986),$=S(8924),G=S(3521),q=S(4198),_=G.IdentifierIssuer,E=S(1874),N=S(1072),z=S(7260),{expand:P}=S(3860),{flatten:F}=S(8295),{fromRDF:oe}=S(9767),{toRDF:x}=S(240),{frameMergedOrDefault:B,cleanupNull:se}=S(9193),{isArray:Y,isObject:J,isString:ee}=S(8254),{isSubjectReference:W}=S(543),{expandIri:k,getInitialContext:v,process:I,processingMode:T}=S(9611),{compact:le,compactIri:j}=S(8809),{createNodeMap:Me,createMergedNodeMap:ae,mergeNodeMaps:xe}=S(9783),{logEventHandler:Pe,logWarningEventHandler:He,safeEventHandler:Qe,setDefaultEventHandler:Xe,setupEventHandler:Ce,strictEventHandler:je,unhandledEventHandler:Se}=S(3855),ke=function(Ae){const nt={},Ke=new N({max:100});function fe(R,{documentLoader:A=Ae.documentLoader,...ie}){if(R&&"compactionMap"in R)throw new E('"compactionMap" not supported.',"jsonld.OptionsError");if(R&&"expansionMap"in R)throw new E('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:A},ie,R,{eventHandler:Ce({options:R})})}return Ae.compact=function(){var R=Q(function*(A,ie,Z){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===A)return null;let Ve;(Z=fe(Z,{base:ee(A)?A:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new q({sharedCache:Ke})})).link&&(Z.skipExpansion=!0),Z.compactToRelative||delete Z.base,Ve=Z.skipExpansion?A:yield Ae.expand(A,Z);const Je=yield Ae.processContext(v(Z),ie,Z);let ue=yield le({activeCtx:Je,element:Ve,options:Z});Z.compactArrays&&!Z.graph&&Y(ue)?1===ue.length?ue=ue[0]:0===ue.length&&(ue={}):Z.graph&&J(ue)&&(ue=[ue]),J(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=G.clone(ie),Y(ie)||(ie=[ie]);const ne=ie;ie=[];for(let M=0;M<ne.length;++M)(!J(ne[M])||Object.keys(ne[M]).length>0)&&ie.push(ne[M]);const U=ie.length>0;if(1===ie.length&&(ie=ie[0]),Y(ue)){const M=j({activeCtx:Je,iri:"@graph",relativeTo:{vocab:!0}}),O=ue;ue={},U&&(ue["@context"]=ie),ue[M]=O}else if(J(ue)&&U){const M=ue;ue={"@context":ie};for(const O in M)ue[O]=M[O]}return ue});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.expand=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Z={},Ve=[];if("expandContext"in(ie=fe(ie,{keepFreeFloatingNodes:!1,contextResolver:new q({sharedCache:Ke})}))){const U=G.clone(ie.expandContext);Z.expandContext=J(U)&&"@context"in U?U:{"@context":U},Ve.push(Z.expandContext)}let Je;if(ee(A)){const U=yield Ae.get(A,ie);Je=U.documentUrl,Z.input=U.document,U.contextUrl&&(Z.remoteContext={"@context":U.contextUrl},Ve.push(Z.remoteContext))}else Z.input=G.clone(A);"base"in ie||(ie.base=Je||"");let ue=v(ie);for(const U of Ve)ue=yield I({activeCtx:ue,localCtx:U,options:ie});let ne=yield P({activeCtx:ue,element:Z.input,options:ie});return J(ne)&&"@graph"in ne&&1===Object.keys(ne).length?ne=ne["@graph"]:null===ne&&(ne=[]),Y(ne)||(ne=[ne]),ne});return function(A,ie){return R.apply(this,arguments)}}(),Ae.flatten=function(){var R=Q(function*(A,ie,Z){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,Z=fe(Z,{base:ee(A)?A:"",contextResolver:new q({sharedCache:Ke})});const Ve=yield Ae.expand(A,Z),Je=F(Ve);return null===ie?Je:(Z.graph=!0,Z.skipExpansion=!0,yield Ae.compact(Je,ie,Z))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.frame=function(){var R=Q(function*(A,ie,Z){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Z=fe(Z,{base:ee(A)?A:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new q({sharedCache:Ke})}),ee(ie)){const We=yield Ae.get(ie,Z);if(ie=We.document,We.contextUrl){let Ee=ie["@context"];Ee?Y(Ee)?Ee.push(We.contextUrl):Ee=[Ee,We.contextUrl]:Ee=We.contextUrl,ie["@context"]=Ee}}const Ve=ie&&ie["@context"]||{},Je=yield Ae.processContext(v(Z),Ve,Z);Z.hasOwnProperty("omitGraph")||(Z.omitGraph=T(Je,1.1)),Z.hasOwnProperty("pruneBlankNodeIdentifiers")||(Z.pruneBlankNodeIdentifiers=T(Je,1.1));const ue=yield Ae.expand(A,Z),ne={...Z};ne.isFrame=!0,ne.keepFreeFloatingNodes=!0;const U=yield Ae.expand(ie,ne),M=Object.keys(ie).map(We=>k(Je,We,{vocab:!0}));ne.merged=!M.includes("@graph"),ne.is11=T(Je,1.1);const O=B(ue,U,ne);ne.graph=!Z.omitGraph,ne.skipExpansion=!0,ne.link={},ne.framing=!0;let he=yield Ae.compact(O,Ve,ne);return ne.link={},he=se(he,ne),he});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.link=function(){var R=Q(function*(A,ie,Z){const Ve={};return ie&&(Ve["@context"]=ie),Ve["@embed"]="@link",Ae.frame(A,Ve,Z)});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.normalize=Ae.canonize=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=fe(ie,{base:ee(A)?A:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new q({sharedCache:Ke})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Je=z.parse(A);return C.canonize(Je,ie)}const Z={...ie};delete Z.format,Z.produceGeneralizedRdf=!1;const Ve=yield Ae.toRDF(A,Z);return C.canonize(Ve,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.fromRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=fe(ie,{format:ee(A)?"application/n-quads":void 0});const{format:Z}=ie;let{rdfParser:Ve}=ie;if(Z){if(Ve=Ve||nt[Z],!Ve)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:Z})}else Ve=()=>A;const Je=yield Ve(A);return oe(Je,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.toRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Z;Z=(ie=fe(ie,{base:ee(A)?A:"",skipExpansion:!1,contextResolver:new q({sharedCache:Ke})})).skipExpansion?A:yield Ae.expand(A,ie);const Ve=x(Z,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return z.serialize(Ve);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return Ve});return function(A,ie){return R.apply(this,arguments)}}(),Ae.createNodeMap=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=fe(ie,{base:ee(A)?A:"",contextResolver:new q({sharedCache:Ke})});const Z=yield Ae.expand(A,ie);return ae(Z,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.merge=function(){var R=Q(function*(A,ie,Z){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Y(A))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,Z=fe(Z,{contextResolver:new q({sharedCache:Ke})});const Ve=yield Promise.all(A.map(We=>{const Ee={...Z};return Ae.expand(We,Ee)}));let Je=!0;"mergeNodes"in Z&&(Je=Z.mergeNodes);const ue=Z.issuer||new _("_:b"),ne={"@default":{}};for(let We=0;We<Ve.length;++We){const Ee=G.relabelBlankNodes(Ve[We],{issuer:new _("_:b"+We+"-")}),Re=Je||0===We?ne:{"@default":{}};if(Me(Ee,Re,"@default",ue),Re!==ne)for(const ot in Re){const bt=Re[ot];if(!(ot in ne)){ne[ot]=bt;continue}const It=ne[ot];for(const mt in bt)mt in It||(It[mt]=bt[mt])}}const U=xe(ne),M=[],O=Object.keys(U).sort();for(let We=0;We<O.length;++We){const Ee=U[O[We]];W(Ee)||M.push(Ee)}return null===ie?M:(Z.graph=!0,Z.skipExpansion=!0,yield Ae.compact(M,ie,Z))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Object.defineProperty(Ae,"documentLoader",{get:()=>Ae._documentLoader,set:R=>Ae._documentLoader=R}),Ae.documentLoader=function(){var R=Q(function*(A){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:A})});return function(A){return R.apply(this,arguments)}}(),Ae.get=function(){var R=Q(function*(A,ie){let Z;Z="function"==typeof ie.documentLoader?ie.documentLoader:Ae.documentLoader;const Ve=yield Z(A);try{if(!Ve.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(Ve.document)&&(Ve.document=JSON.parse(Ve.document))}catch(Je){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Je,remoteDoc:Ve})}return Ve});return function(A,ie){return R.apply(this,arguments)}}(),Ae.processContext=function(){var R=Q(function*(A,ie,Z){return Z=fe(Z,{base:"",contextResolver:new q({sharedCache:Ke})}),null===ie?v(Z):(ie=G.clone(ie),J(ie)&&"@context"in ie||(ie={"@context":ie}),I({activeCtx:A,localCtx:ie,options:Z}))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.getContextValue=S(9611).getContextValue,Ae.documentLoaders={},Ae.useDocumentLoader=function(R){if(!(R in Ae.documentLoaders))throw new E('Unknown document loader type: "'+R+'"',"jsonld.UnknownDocumentLoader",{type:R});Ae.documentLoader=Ae.documentLoaders[R].apply(Ae,Array.prototype.slice.call(arguments,1))},Ae.registerRDFParser=function(R,A){nt[R]=A},Ae.unregisterRDFParser=function(R){delete nt[R]},Ae.registerRDFParser("application/n-quads",z.parse),Ae.registerRDFParser("application/nquads",z.parse),Ae.url=S(2651),Ae.logEventHandler=Pe,Ae.logWarningEventHandler=He,Ae.safeEventHandler=Qe,Ae.setDefaultEventHandler=Xe,Ae.strictEventHandler=je,Ae.unhandledEventHandler=Se,Ae.util=G,Object.assign(Ae,G),Ae.promises=Ae,Ae.RequestQueue=S(4044),Ae.JsonLdProcessor=S(1828)(Ae),$.setupGlobals(Ae),$.setupDocumentLoaders(Ae),Ae},de=function(){return ke(function(){return de()})};ke(de),Ue.exports=de},9783:(Ue,_e,S)=>{"use strict";const{isKeyword:Q}=S(9611),C=S(543),$=S(8254),G=S(3521),q=S(1874),_={};Ue.exports=_,_.createMergedNodeMap=(E,N)=>{const z=(N=N||{}).issuer||new G.IdentifierIssuer("_:b"),P={"@default":{}};return _.createNodeMap(E,P,"@default",z),_.mergeNodeMaps(P)},_.createNodeMap=(E,N,z,P,F,oe)=>{if($.isArray(E)){for(const Y of E)_.createNodeMap(Y,N,z,P,void 0,oe);return}if(!$.isObject(E))return void(oe&&oe.push(E));if(C.isValue(E)){if("@type"in E){let Y=E["@type"];0===Y.indexOf("_:")&&(E["@type"]=Y=P.getId(Y))}return void(oe&&oe.push(E))}if(oe&&C.isList(E)){const Y=[];return _.createNodeMap(E["@list"],N,z,P,F,Y),void oe.push({"@list":Y})}if("@type"in E){const Y=E["@type"];for(const J of Y)0===J.indexOf("_:")&&P.getId(J)}$.isUndefined(F)&&(F=C.isBlankNode(E)?P.getId(E["@id"]):E["@id"]),oe&&oe.push({"@id":F});const x=N[z],B=x[F]=x[F]||{};B["@id"]=F;const se=Object.keys(E).sort();for(let Y of se){if("@id"===Y)continue;if("@reverse"===Y){const ee={"@id":F},W=E["@reverse"];for(const k in W){const v=W[k];for(const I of v){let T=I["@id"];C.isBlankNode(I)&&(T=P.getId(T)),_.createNodeMap(I,N,z,P,T),G.addValue(x[T],k,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Y){F in N||(N[F]={}),_.createNodeMap(E[Y],N,F,P);continue}if("@included"===Y){_.createNodeMap(E[Y],N,z,P);continue}if("@type"!==Y&&Q(Y)){if("@index"===Y&&Y in B&&(E[Y]!==B[Y]||E[Y]["@id"]!==B[Y]["@id"]))throw new q("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:B});B[Y]=E[Y];continue}const J=E[Y];if(0===Y.indexOf("_:")&&(Y=P.getId(Y)),0!==J.length)for(let ee of J)if("@type"===Y&&(ee=0===ee.indexOf("_:")?P.getId(ee):ee),C.isSubject(ee)||C.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const W=C.isBlankNode(ee)?P.getId(ee["@id"]):ee["@id"];G.addValue(B,Y,{"@id":W},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ee,N,z,P,W)}else if(C.isValue(ee))G.addValue(B,Y,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(C.isList(ee)){const W=[];_.createNodeMap(ee["@list"],N,z,P,F,W),ee={"@list":W},G.addValue(B,Y,ee,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ee,N,z,P,F),G.addValue(B,Y,ee,{propertyIsArray:!0,allowDuplicate:!1});else G.addValue(B,Y,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=E=>{const N={};for(const z of Object.keys(E).sort())for(const P of Object.keys(E[z]).sort()){const F=E[z][P];P in N||(N[P]={"@id":P});const oe=N[P];for(const x of Object.keys(F).sort())if(Q(x)&&"@type"!==x)oe[x]=G.clone(F[x]);else for(const B of F[x])G.addValue(oe,x,G.clone(B),{propertyIsArray:!0,allowDuplicate:!1})}return N},_.mergeNodeMaps=E=>{const N=E["@default"],z=Object.keys(E).sort();for(const P of z){if("@default"===P)continue;const F=E[P];let oe=N[P];oe?"@graph"in oe||(oe["@graph"]=[]):N[P]=oe={"@id":P,"@graph":[]};const x=oe["@graph"];for(const B of Object.keys(F).sort()){const se=F[B];C.isSubjectReference(se)||x.push(se)}}return N}},8924:(Ue,_e,S)=>{"use strict";const Q=S(627),C={};Ue.exports=C,C.setupDocumentLoaders=function($){typeof XMLHttpRequest<"u"&&($.documentLoaders.xhr=Q,$.useDocumentLoader("xhr"))},C.setupGlobals=function($){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:$.JsonLdProcessor})}},240:(Ue,_e,S)=>{"use strict";const{createNodeMap:Q}=S(9783),{isKeyword:C}=S(9611),$=S(543),G=S(5041),q=S(1874),_=S(8254),E=S(3521),{handleEvent:N}=S(3855),{RDF_FIRST:z,RDF_REST:P,RDF_NIL:F,RDF_TYPE:oe,RDF_JSON_LITERAL:x,RDF_LANGSTRING:B,XSD_BOOLEAN:se,XSD_DOUBLE:Y,XSD_INTEGER:J,XSD_STRING:ee}=S(6982),{isAbsolute:W}=S(2651),k={};function v(le,j,Me,ae,xe){const Pe=Object.keys(j).sort();for(const He of Pe){const Qe=j[He],Xe=Object.keys(Qe).sort();for(let Ce of Xe){const je=Qe[Ce];if("@type"===Ce)Ce=oe;else if(C(Ce))continue;for(const Se of je){const ke={termType:He.startsWith("_:")?"BlankNode":"NamedNode",value:He};if(!W(He)){xe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:He}},options:xe});continue}const de={termType:Ce.startsWith("_:")?"BlankNode":"NamedNode",value:Ce};if(!W(Ce)){xe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ce}},options:xe});continue}if("BlankNode"===de.termType&&!xe.produceGeneralizedRdf){xe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ae.getOldIds().find(nt=>ae.getId(nt)===Ce)}},options:xe});continue}const Ae=T(Se,ae,le,Me,xe.rdfDirection,xe);Ae&&le.push({subject:ke,predicate:de,object:Ae,graph:Me})}}}}function T(le,j,Me,ae,xe,Pe){const He={};if($.isValue(le)){He.termType="Literal",He.value=void 0,He.datatype={termType:"NamedNode"};let Qe=le["@value"];const Xe=le["@type"]||null;if("@json"===Xe)He.value=G(Qe),He.datatype.value=x;else if(_.isBoolean(Qe))He.value=Qe.toString(),He.datatype.value=Xe||se;else if(_.isDouble(Qe)||Xe===Y)_.isDouble(Qe)||(Qe=parseFloat(Qe)),He.value=Qe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),He.datatype.value=Xe||Y;else if(_.isNumber(Qe))He.value=Qe.toFixed(0),He.datatype.value=Xe||J;else if("@direction"in le&&"i18n-datatype"===xe){const Ce=(le["@language"]||"").toLowerCase();He.datatype.value=`https://www.w3.org/ns/i18n#${Ce}_${le["@direction"]}`,He.value=Qe}else{if("@direction"in le&&"compound-literal"===xe)throw new q("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});if("@direction"in le&&xe)throw new q("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});"@language"in le?("@direction"in le&&!xe&&Pe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:He.value}},options:Pe}),He.value=Qe,He.datatype.value=Xe||B,He.language=le["@language"]):("@direction"in le&&!xe&&Pe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:He.value}},options:Pe}),He.value=Qe,He.datatype.value=Xe||ee)}}else if($.isList(le)){const Qe=function I(le,j,Me,ae,xe,Pe){const He={termType:"NamedNode",value:z},Qe={termType:"NamedNode",value:P},Xe={termType:"NamedNode",value:F},Ce=le.pop(),je=Ce?{termType:"BlankNode",value:j.getId()}:Xe;let Se=je;for(const ke of le){const de=T(ke,j,Me,ae,xe,Pe),Ae={termType:"BlankNode",value:j.getId()};Me.push({subject:Se,predicate:He,object:de,graph:ae}),Me.push({subject:Se,predicate:Qe,object:Ae,graph:ae}),Se=Ae}if(Ce){const ke=T(Ce,j,Me,ae,xe,Pe);Me.push({subject:Se,predicate:He,object:ke,graph:ae}),Me.push({subject:Se,predicate:Qe,object:Xe,graph:ae})}return je}(le["@list"],j,Me,ae,xe,Pe);He.termType=Qe.termType,He.value=Qe.value}else{const Qe=_.isObject(le)?le["@id"]:le;He.termType=Qe.startsWith("_:")?"BlankNode":"NamedNode",He.value=Qe}return"NamedNode"!==He.termType||W(He.value)?He:(Pe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:He.value}},options:Pe}),null)}Ue.exports=k,k.toRDF=(le,j)=>{const Me=new E.IdentifierIssuer("_:b"),ae={"@default":{}};Q(le,ae,"@default",Me);const xe=[],Pe=Object.keys(ae).sort();for(const He of Pe){let Qe;if("@default"===He)Qe={termType:"DefaultGraph",value:""};else{if(!W(He)){j.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:He}},options:j});continue}Qe=He.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Qe.value=He}v(xe,ae[He],Qe,Me,j)}return xe}},8254:Ue=>{"use strict";const _e={};Ue.exports=_e,_e.isArray=Array.isArray,_e.isBoolean=S=>"boolean"==typeof S||"[object Boolean]"===Object.prototype.toString.call(S),_e.isDouble=S=>_e.isNumber(S)&&(-1!==String(S).indexOf(".")||Math.abs(S)>=1e21),_e.isEmptyObject=S=>_e.isObject(S)&&0===Object.keys(S).length,_e.isNumber=S=>"number"==typeof S||"[object Number]"===Object.prototype.toString.call(S),_e.isNumeric=S=>!isNaN(parseFloat(S))&&isFinite(S),_e.isObject=S=>"[object Object]"===Object.prototype.toString.call(S),_e.isString=S=>"string"==typeof S||"[object String]"===Object.prototype.toString.call(S),_e.isUndefined=S=>typeof S>"u"},2651:(Ue,_e,S)=>{"use strict";const Q=S(8254),C={};Ue.exports=C,C.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},C.parse=(G,q)=>{const _={},E=C.parsers[q||"full"],N=E.regex.exec(G);let z=E.keys.length;for(;z--;)_[E.keys[z]]=void 0===N[z]?null:N[z];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=C.removeDotSegments(_.path),_},C.prependBase=(G,q)=>{if(null===G||C.isAbsolute(q))return q;(!G||Q.isString(G))&&(G=C.parse(G||""));const _=C.parse(q),E={protocol:G.protocol||""};if(null!==_.authority)E.authority=_.authority,E.path=_.path,E.query=_.query;else if(E.authority=G.authority,""===_.path)E.path=G.path,E.query=null!==_.query?_.query:G.query;else{if(0===_.path.indexOf("/"))E.path=_.path;else{let z=G.path;z=z.substr(0,z.lastIndexOf("/")+1),(z.length>0||G.authority)&&"/"!==z.substr(-1)&&(z+="/"),z+=_.path,E.path=z}E.query=_.query}""!==_.path&&(E.path=C.removeDotSegments(E.path));let N=E.protocol;return null!==E.authority&&(N+="//"+E.authority),N+=E.path,null!==E.query&&(N+="?"+E.query),null!==_.fragment&&(N+="#"+_.fragment),""===N&&(N="./"),N},C.removeBase=(G,q)=>{if(null===G)return q;(!G||Q.isString(G))&&(G=C.parse(G||""));let _="";if(""!==G.href?_+=(G.protocol||"")+"//"+(G.authority||""):q.indexOf("//")&&(_+="//"),0!==q.indexOf(_))return q;const E=C.parse(q.substr(_.length)),N=G.normalizedPath.split("/"),z=E.normalizedPath.split("/"),P=E.fragment||E.query?0:1;for(;N.length>0&&z.length>P&&N[0]===z[0];)N.shift(),z.shift();let F="";if(N.length>0){N.pop();for(let oe=0;oe<N.length;++oe)F+="../"}return F+=z.join("/"),null!==E.query&&(F+="?"+E.query),null!==E.fragment&&(F+="#"+E.fragment),""===F&&(F="./"),F},C.removeDotSegments=G=>{if(0===G.length)return"";const q=G.split("/"),_=[];for(;q.length>0;){const E=q.shift(),N=0===q.length;"."!==E?".."!==E?_.push(E):(_.pop(),N&&_.push("")):N&&_.push("")}return"/"===G[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const $=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;C.isAbsolute=G=>Q.isString(G)&&$.test(G),C.isRelative=G=>Q.isString(G)},3521:(Ue,_e,S)=>{"use strict";const Q=S(543),C=S(8254),$=S(1986).IdentifierIssuer,G=S(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,N=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers_accept="application/ld+json, application/json",F={};function oe(x,B){if(C.isArray(B))for(let se=0;se<B.length;++se)B[se]=oe(x,B[se]);else if(Q.isList(B))B["@list"]=oe(x,B["@list"]);else if(C.isObject(B)){Q.isBlankNode(B)&&(B["@id"]=x.getId(B["@id"]));const se=Object.keys(B).sort();for(let Y=0;Y<se.length;++Y){const J=se[Y];"@id"!==J&&(B[J]=oe(x,B[J]))}}return B}Ue.exports=F,F.IdentifierIssuer=$,F.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,F.REGEX_KEYWORD=/^@[a-zA-Z]+$/,F.clone=function(x){if(x&&"object"==typeof x){let B;if(C.isArray(x)){B=[];for(let se=0;se<x.length;++se)B[se]=F.clone(x[se])}else if(x instanceof Map){B=new Map;for(const[se,Y]of x)B.set(se,F.clone(Y))}else if(x instanceof Set){B=new Set;for(const se of x)B.add(F.clone(se))}else if(C.isObject(x)){B={};for(const se in x)B[se]=F.clone(x[se])}else B=x.toString();return B}return x},F.asArray=function(x){return Array.isArray(x)?x:[x]},F.buildHeaders=(x={})=>{if(Object.keys(x).some(se=>"accept"===se.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers_accept+'" is supported.');return Object.assign({Accept:P_headers_accept},x)},F.parseLinkHeader=x=>{const B={},se=x.match(_);for(let Y=0;Y<se.length;++Y){let J=se[Y].match(E);if(!J)continue;const ee={target:J[1]},W=J[2];for(;J=N.exec(W);)ee[J[1]]=void 0===J[2]?J[3]:J[2];const k=ee.rel||"";Array.isArray(B[k])?B[k].push(ee):B[k]=B.hasOwnProperty(k)?[B[k],ee]:ee}return B},F.validateTypeValue=(x,B)=>{if(!(C.isString(x)||C.isArray(x)&&x.every(se=>C.isString(se)))){if(B&&C.isObject(x))switch(Object.keys(x).length){case 0:return;case 1:if("@default"in x&&F.asArray(x["@default"]).every(se=>C.isString(se)))return}throw new G('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:x})}},F.hasProperty=(x,B)=>{if(x.hasOwnProperty(B)){const se=x[B];return!C.isArray(se)||se.length>0}return!1},F.hasValue=(x,B,se)=>{if(F.hasProperty(x,B)){let Y=x[B];const J=Q.isList(Y);if(C.isArray(Y)||J){J&&(Y=Y["@list"]);for(let ee=0;ee<Y.length;++ee)if(F.compareValues(se,Y[ee]))return!0}else if(!C.isArray(se))return F.compareValues(se,Y)}return!1},F.addValue=(x,B,se,Y)=>{if("propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1),"valueIsArray"in Y||(Y.valueIsArray=!1),"allowDuplicate"in Y||(Y.allowDuplicate=!0),"prependValue"in Y||(Y.prependValue=!1),Y.valueIsArray)x[B]=se;else if(C.isArray(se)){0===se.length&&Y.propertyIsArray&&!x.hasOwnProperty(B)&&(x[B]=[]),Y.prependValue&&(se=se.concat(x[B]),x[B]=[]);for(let J=0;J<se.length;++J)F.addValue(x,B,se[J],Y)}else if(x.hasOwnProperty(B)){const J=!Y.allowDuplicate&&F.hasValue(x,B,se);!C.isArray(x[B])&&(!J||Y.propertyIsArray)&&(x[B]=[x[B]]),J||(Y.prependValue?x[B].unshift(se):x[B].push(se))}else x[B]=Y.propertyIsArray?[se]:se},F.getValues=(x,B)=>[].concat(x[B]||[]),F.removeProperty=(x,B)=>{delete x[B]},F.removeValue=(x,B,se,Y)=>{"propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1);const J=F.getValues(x,B).filter(ee=>!F.compareValues(ee,se));0===J.length?F.removeProperty(x,B):x[B]=1!==J.length||Y.propertyIsArray?J:J[0]},F.relabelBlankNodes=(x,B)=>oe((B=B||{}).issuer||new $("_:b"),x),F.compareValues=(x,B)=>!!(x===B||Q.isValue(x)&&Q.isValue(B)&&x["@value"]===B["@value"]&&x["@type"]===B["@type"]&&x["@language"]===B["@language"]&&x["@index"]===B["@index"])||!!(C.isObject(x)&&"@id"in x&&C.isObject(B)&&"@id"in B)&&x["@id"]===B["@id"],F.compareShortestLeast=(x,B)=>x.length<B.length?-1:B.length<x.length?1:x===B?0:x<B?-1:1},5041:Ue=>{"use strict";Ue.exports=function _e(S){return null===S||"object"!=typeof S||null!=S.toJSON?JSON.stringify(S):Array.isArray(S)?"["+S.reduce((Q,C,$)=>Q+(0===$?"":",")+_e(void 0===C||"symbol"==typeof C?null:C),"")+"]":"{"+Object.keys(S).sort().reduce((Q,C,$)=>void 0===S[C]||"symbol"==typeof S[C]?Q:Q+(0===Q.length?"":",")+_e(C)+":"+_e(S[C]),"")+"}"}},1072:(Ue,_e,S)=>{"use strict";const Q=S(4439),C=Symbol("max"),$=Symbol("length"),G=Symbol("lengthCalculator"),q=Symbol("allowStale"),_=Symbol("maxAge"),E=Symbol("dispose"),N=Symbol("noDisposeOnSet"),z=Symbol("lruList"),P=Symbol("cache"),F=Symbol("updateAgeOnGet"),oe=()=>1,B=(k,v,I)=>{const T=k[P].get(v);if(T){const le=T.value;if(se(k,le)){if(J(k,T),!k[q])return}else I&&(k[F]&&(T.value.now=Date.now()),k[z].unshiftNode(T));return le.value}},se=(k,v)=>{if(!v||!v.maxAge&&!k[_])return!1;const I=Date.now()-v.now;return v.maxAge?I>v.maxAge:k[_]&&I>k[_]},Y=k=>{if(k[$]>k[C])for(let v=k[z].tail;k[$]>k[C]&&null!==v;){const I=v.prev;J(k,v),v=I}},J=(k,v)=>{if(v){const I=v.value;k[E]&&k[E](I.key,I.value),k[$]-=I.length,k[P].delete(I.key),k[z].removeNode(v)}};class ee{constructor(v,I,T,le,j){this.key=v,this.value=I,this.length=T,this.now=le,this.maxAge=j||0}}const W=(k,v,I,T)=>{let le=I.value;se(k,le)&&(J(k,I),k[q]||(le=void 0)),le&&v.call(T,le.value,le.key,k)};Ue.exports=class x{constructor(v){if("number"==typeof v&&(v={max:v}),v||(v={}),v.max&&("number"!=typeof v.max||v.max<0))throw new TypeError("max must be a non-negative number");this[C]=v.max||1/0;const T=v.length||oe;if(this[G]="function"!=typeof T?oe:T,this[q]=v.stale||!1,v.maxAge&&"number"!=typeof v.maxAge)throw new TypeError("maxAge must be a number");this[_]=v.maxAge||0,this[E]=v.dispose,this[N]=v.noDisposeOnSet||!1,this[F]=v.updateAgeOnGet||!1,this.reset()}set max(v){if("number"!=typeof v||v<0)throw new TypeError("max must be a non-negative number");this[C]=v||1/0,Y(this)}get max(){return this[C]}set allowStale(v){this[q]=!!v}get allowStale(){return this[q]}set maxAge(v){if("number"!=typeof v)throw new TypeError("maxAge must be a non-negative number");this[_]=v,Y(this)}get maxAge(){return this[_]}set lengthCalculator(v){"function"!=typeof v&&(v=oe),v!==this[G]&&(this[G]=v,this[$]=0,this[z].forEach(I=>{I.length=this[G](I.value,I.key),this[$]+=I.length})),Y(this)}get lengthCalculator(){return this[G]}get length(){return this[$]}get itemCount(){return this[z].length}rforEach(v,I){I=I||this;for(let T=this[z].tail;null!==T;){const le=T.prev;W(this,v,T,I),T=le}}forEach(v,I){I=I||this;for(let T=this[z].head;null!==T;){const le=T.next;W(this,v,T,I),T=le}}keys(){return this[z].toArray().map(v=>v.key)}values(){return this[z].toArray().map(v=>v.value)}reset(){this[E]&&this[z]&&this[z].length&&this[z].forEach(v=>this[E](v.key,v.value)),this[P]=new Map,this[z]=new Q,this[$]=0}dump(){return this[z].map(v=>!se(this,v)&&{k:v.key,v:v.value,e:v.now+(v.maxAge||0)}).toArray().filter(v=>v)}dumpLru(){return this[z]}set(v,I,T){if((T=T||this[_])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const le=T?Date.now():0,j=this[G](I,v);if(this[P].has(v)){if(j>this[C])return J(this,this[P].get(v)),!1;const xe=this[P].get(v).value;return this[E]&&(this[N]||this[E](v,xe.value)),xe.now=le,xe.maxAge=T,xe.value=I,this[$]+=j-xe.length,xe.length=j,this.get(v),Y(this),!0}const Me=new ee(v,I,j,le,T);return Me.length>this[C]?(this[E]&&this[E](v,I),!1):(this[$]+=Me.length,this[z].unshift(Me),this[P].set(v,this[z].head),Y(this),!0)}has(v){if(!this[P].has(v))return!1;const I=this[P].get(v).value;return!se(this,I)}get(v){return B(this,v,!0)}peek(v){return B(this,v,!1)}pop(){const v=this[z].tail;return v?(J(this,v),v.value):null}del(v){J(this,this[P].get(v))}load(v){this.reset();const I=Date.now();for(let T=v.length-1;T>=0;T--){const le=v[T],j=le.e||0;if(0===j)this.set(le.k,le.v);else{const Me=j-I;Me>0&&this.set(le.k,le.v,Me)}}}prune(){this[P].forEach((v,I)=>B(this,I,!1))}}},6990:function(Ue,_e,S){var Q;Ue=S.nmd(Ue),function(){var C,_="Expected a function",N="__lodash_hash_undefined__",P="__lodash_placeholder__",v=32,T=128,Ce=1/0,je=9007199254740991,de=4294967295,_t=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",v],["partialRight",64],["rearg",256]],Ke="[object Arguments]",fe="[object Array]",A="[object Boolean]",ie="[object Date]",Ve="[object Error]",Je="[object Function]",ue="[object GeneratorFunction]",ne="[object Map]",U="[object Number]",O="[object Object]",he="[object Promise]",Ee="[object RegExp]",Re="[object Set]",ot="[object String]",bt="[object Symbol]",mt="[object WeakMap]",pe="[object ArrayBuffer]",H="[object DataView]",te="[object Float32Array]",Le="[object Float64Array]",it="[object Int8Array]",lt="[object Int16Array]",Et="[object Int32Array]",en="[object Uint8Array]",Dn="[object Uint8ClampedArray]",Nn="[object Uint16Array]",pn="[object Uint32Array]",wn=/\b__p \+= '';/g,ji=/\b(__p \+=) '' \+/g,Ks=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xr=/&(?:amp|lt|gt|quot|#39);/g,Jr=/[&<>"']/g,Vo=RegExp(xr.source),vi=RegExp(Jr.source),Br=/<%-([\s\S]+?)%>/g,da=/<%([\s\S]+?)%>/g,ka=/<%=([\s\S]+?)%>/g,Jc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ha=/^\w*$/,Ns=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,Ze=RegExp($e.source),St=/^\s+/,Gt=/\s/,tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,or=/\{\n\/\* \[wrapped with (.+)\] \*/,Zr=/,? & /,Jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Js=/[()=,{}\[\]\/\s]/,Ni=/\\(\\)?/g,dc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ci=/\w*$/,ln=/^[-+]0x[0-9a-f]+$/i,Ho=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,jn=/^0o[0-7]+$/i,kr=/^(?:0|[1-9]\d*)$/,ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Li=/($^)/,ye=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",ge="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\u2700-\\u27bf",Ye="a-z\\xdf-\\xf6\\xf8-\\xff",nn="A-Z\\xc0-\\xd6\\xd8-\\xde",mn="\\ufe0e\\ufe0f",ar="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cs="["+Te+"]",xn="["+ar+"]",Hn="["+ge+"]",Qr="\\d+",Ls="["+Fe+"]",Zc="["+Ye+"]",od="[^"+Te+ar+Qr+Fe+Ye+nn+"]",Go="\\ud83c[\\udffb-\\udfff]",Ts="[^"+Te+"]",yp="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+nn+"]",wt="(?:"+Zc+"|"+od+")",jt="(?:"+Ge+"|"+od+")",Zt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Cr="(?:"+Hn+"|"+Go+")?",jr="["+mn+"]?",Sn=jr+Cr+"(?:\\u200d(?:"+[Ts,yp,De].join("|")+")"+jr+Cr+")*",YL="(?:"+[Ls,yp,De].join("|")+")"+Sn,qL="(?:"+[Ts+Hn+"?",Hn,yp,De,Cs].join("|")+")",XL=RegExp("['\u2019]","g"),KL=RegExp(Hn,"g"),Dt=RegExp(Go+"(?="+Go+")|"+qL+Sn,"g"),JL=RegExp([Ge+"?"+Zc+"+"+Zt+"(?="+[xn,Ge,"$"].join("|")+")",jt+"+"+qn+"(?="+[xn,Ge+wt,"$"].join("|")+")",Ge+"?"+wt+"+"+Zt,Ge+"+"+qn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qr,YL].join("|"),"g"),Fs=RegExp("[\\u200d"+Te+ge+mn+"]"),vp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,MS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pb=-1,Xi={};Xi[te]=Xi[Le]=Xi[it]=Xi[lt]=Xi[Et]=Xi[en]=Xi[Dn]=Xi[Nn]=Xi[pn]=!0,Xi[Ke]=Xi[fe]=Xi[pe]=Xi[A]=Xi[H]=Xi[ie]=Xi[Ve]=Xi[Je]=Xi[ne]=Xi[U]=Xi[O]=Xi[Ee]=Xi[Re]=Xi[ot]=Xi[mt]=!1;var Si={};Si[Ke]=Si[fe]=Si[pe]=Si[H]=Si[A]=Si[ie]=Si[te]=Si[Le]=Si[it]=Si[lt]=Si[Et]=Si[ne]=Si[U]=Si[O]=Si[Ee]=Si[Re]=Si[ot]=Si[bt]=Si[en]=Si[Dn]=Si[Nn]=Si[pn]=!0,Si[Ve]=Si[Je]=Si[mt]=!1;var IS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ni=parseFloat,i_=parseInt,r_="object"==typeof global&&global&&global.Object===Object&&global,Qs="object"==typeof self&&self&&self.Object===Object&&self,es=r_||Qs||Function("return this")(),DS=_e&&!_e.nodeType&&_e,li=DS&&Ue&&!Ue.nodeType&&Ue,RS=li&&li.exports===DS,mb=RS&&r_.process,xt=function(){try{return li&&li.require&&li.require("util").types||mb&&mb.binding&&mb.binding("util")}catch{}}(),wp=xt&&xt.isArrayBuffer,xp=xt&&xt.isDate,s_=xt&&xt.isMap,Ep=xt&&xt.isRegExp,_b=xt&&xt.isSet,Ap=xt&&xt.isTypedArray;function zo(rt,At,yt){switch(yt.length){case 0:return rt.call(At);case 1:return rt.call(At,yt[0]);case 2:return rt.call(At,yt[0],yt[1]);case 3:return rt.call(At,yt[0],yt[1],yt[2])}return rt.apply(At,yt)}function ZL(rt,At,yt,Xt){for(var un=-1,pi=null==rt?0:rt.length;++un<pi;){var Dr=rt[un];At(Xt,Dr,yt(Dr),rt)}return Xt}function ga(rt,At){for(var yt=-1,Xt=null==rt?0:rt.length;++yt<Xt&&!1!==At(rt[yt],yt,rt););return rt}function QL(rt,At){for(var yt=null==rt?0:rt.length;yt--&&!1!==At(rt[yt],yt,rt););return rt}function OS(rt,At){for(var yt=-1,Xt=null==rt?0:rt.length;++yt<Xt;)if(!At(rt[yt],yt,rt))return!1;return!0}function Wo(rt,At){for(var yt=-1,Xt=null==rt?0:rt.length,un=0,pi=[];++yt<Xt;){var Dr=rt[yt];At(Dr,yt,rt)&&(pi[un++]=Dr)}return pi}function ad(rt,At){return!(null==rt||!rt.length)&&Vt(rt,At,0)>-1}function cd(rt,At,yt){for(var Xt=-1,un=null==rt?0:rt.length;++Xt<un;)if(yt(At,rt[Xt]))return!0;return!1}function lr(rt,At){for(var yt=-1,Xt=null==rt?0:rt.length,un=Array(Xt);++yt<Xt;)un[yt]=At(rt[yt],yt,rt);return un}function Qc(rt,At){for(var yt=-1,Xt=At.length,un=rt.length;++yt<Xt;)rt[un+yt]=At[yt];return rt}function o_(rt,At,yt,Xt){var un=-1,pi=null==rt?0:rt.length;for(Xt&&pi&&(yt=rt[++un]);++un<pi;)yt=At(yt,rt[un],un,rt);return yt}function yb(rt,At,yt,Xt){var un=null==rt?0:rt.length;for(Xt&&un&&(yt=rt[--un]);un--;)yt=At(yt,rt[un],un,rt);return yt}function el(rt,At){for(var yt=-1,Xt=null==rt?0:rt.length;++yt<Xt;)if(At(rt[yt],yt,rt))return!0;return!1}var PS=a_("length");function ut(rt,At,yt){var Xt;return yt(rt,function(un,pi,Dr){if(At(un,pi,Dr))return Xt=pi,!1}),Xt}function Ch(rt,At,yt,Xt){for(var un=rt.length,pi=yt+(Xt?1:-1);Xt?pi--:++pi<un;)if(At(rt[pi],pi,rt))return pi;return-1}function Vt(rt,At,yt){return At==At?function Ab(rt,At,yt){for(var Xt=yt-1,un=rt.length;++Xt<un;)if(rt[Xt]===At)return Xt;return-1}(rt,At,yt):Ch(rt,Cp,yt)}function Sp(rt,At,yt,Xt){for(var un=yt-1,pi=rt.length;++un<pi;)if(Xt(rt[un],At))return un;return-1}function Cp(rt){return rt!=rt}function ld(rt,At){var yt=null==rt?0:rt.length;return yt?ud(rt,At)/yt:NaN}function a_(rt){return function(At){return null==At?C:At[rt]}}function c_(rt){return function(At){return null==rt?C:rt[At]}}function vb(rt,At,yt,Xt,un){return un(rt,function(pi,Dr,bi){yt=Xt?(Xt=!1,pi):At(yt,pi,Dr,bi)}),yt}function ud(rt,At){for(var yt,Xt=-1,un=rt.length;++Xt<un;){var pi=At(rt[Xt]);pi!==C&&(yt=yt===C?pi:yt+pi)}return yt}function vo(rt,At){for(var yt=-1,Xt=Array(rt);++yt<rt;)Xt[yt]=At(yt);return Xt}function hi(rt){return rt&&rt.slice(0,Fi(rt)+1).replace(St,"")}function eo(rt){return function(At){return rt(At)}}function Th(rt,At){return lr(At,function(yt){return rt[yt]})}function dd(rt,At){return rt.has(At)}function l_(rt,At){for(var yt=-1,Xt=rt.length;++yt<Xt&&Vt(At,rt[yt],0)>-1;);return yt}function hd(rt,At){for(var yt=rt.length;yt--&&Vt(At,rt[yt],0)>-1;);return yt}var wb=c_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),LS=c_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xb(rt){return"\\"+IS[rt]}function fd(rt){return Fs.test(rt)}function Tp(rt){var At=-1,yt=Array(rt.size);return rt.forEach(function(Xt,un){yt[++At]=[un,Xt]}),yt}function Eb(rt,At){return function(yt){return rt(At(yt))}}function nl(rt,At){for(var yt=-1,Xt=rt.length,un=0,pi=[];++yt<Xt;){var Dr=rt[yt];(Dr===At||Dr===P)&&(rt[yt]=P,pi[un++]=yt)}return pi}function Mp(rt){var At=-1,yt=Array(rt.size);return rt.forEach(function(Xt){yt[++At]=Xt}),yt}function pd(rt){return fd(rt)?function VS(rt){for(var At=Dt.lastIndex=0;Dt.test(rt);)++At;return At}(rt):PS(rt)}function _a(rt){return fd(rt)?function to(rt){return rt.match(Dt)||[]}(rt):function tl(rt){return rt.split("")}(rt)}function Fi(rt){for(var At=rt.length;At--&&Gt.test(rt.charAt(At)););return At}var US=c_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ur=function rt(At){var d,yt=(At=null==At?es:Ur.defaults(es.Object(),At,Ur.pick(es,MS))).Array,Xt=At.Date,un=At.Error,pi=At.Function,Dr=At.Math,bi=At.Object,u_=At.RegExp,HS=At.String,fi=At.TypeError,Ht=yt.prototype,Ci=bi.prototype,no=At["__core-js_shared__"],Vr=pi.prototype.toString,Xn=Ci.hasOwnProperty,gd=0,Bi=(d=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",ts=Ci.toString,fc=Vr.call(bi),Rn=es._,Mh=u_("^"+Vr.call(Xn).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ih=RS?At.Buffer:C,bo=At.Symbol,Ui=At.Uint8Array,md=Ih?Ih.allocUnsafe:C,pc=Eb(bi.getPrototypeOf,bi),ya=bi.create,_d=Ci.propertyIsEnumerable,Dh=Ht.splice,gc=bo?bo.isConcatSpreadable:C,il=bo?bo.iterator:C,wo=bo?bo.toStringTag:C,In=function(){try{var d=Td(bi,"defineProperty");return d({},"",{}),d}catch{}}(),d_=At.clearTimeout!==es.clearTimeout&&At.clearTimeout,Rh=Xt&&Xt.now!==es.Date.now&&Xt.now,Ua=At.setTimeout!==es.setTimeout&&At.setTimeout,nu=Dr.ceil,mc=Dr.floor,_r=bi.getOwnPropertySymbols,yd=Ih?Ih.isBuffer:C,ns=At.isFinite,is=Ht.join,h_=Eb(bi.keys,bi),Ki=Dr.max,Hr=Dr.min,va=Xt.now,f_=At.parseInt,Cb=Dr.random,GS=Ht.reverse,Oh=Td(At,"DataView"),vd=Td(At,"Map"),p_=Td(At,"Promise"),rl=Td(At,"Set"),Ip=Td(At,"WeakMap"),Dp=Td(bi,"create"),g_=Ip&&new Ip,Ph={},eF=ml(Oh),tF=ml(vd),nF=ml(p_),iF=ml(rl),rF=ml(Ip),m_=bo?bo.prototype:C,Rp=m_?m_.valueOf:C,zS=m_?m_.toString:C;function Oe(d){if(Er(d)&&!Ln(d)&&!(d instanceof ri)){if(d instanceof ba)return d;if(Xn.call(d,"__wrapped__"))return z_(d)}return new ba(d)}var iu=function(){function d(){}return function(p){if(!Zi(p))return{};if(ya)return ya(p);d.prototype=p;var y=new d;return d.prototype=C,y}}();function __(){}function ba(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=C}function ri(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function Vi(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function _c(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Ha(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Tr(d){var p=-1,y=null==d?0:d.length;for(this.__data__=new Ha;++p<y;)this.add(d[p])}function Ms(d){var p=this.__data__=new _c(d);this.size=p.size}function w_(d,p){var y=Ln(d),K=!y&&wl(d),be=!y&&!K&&qa(d),Be=!y&&!K&&!be&&Au(d),et=y||K||be||Be,ct=et?vo(d.length,HS):[],pt=ct.length;for(var Rt in d)(p||Xn.call(d,Rt))&&(!et||!("length"==Rt||be&&("offset"==Rt||"parent"==Rt)||Be&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||Jo(Rt,pt)))&&ct.push(Rt);return ct}function Pb(d){var p=d.length;return p?d[D_(0,p-1)]:C}function Nb(d,p){return yu(vs(d),ou(p,0,d.length))}function Lb(d){return yu(vs(d))}function Fh(d,p,y){(y!==C&&!Us(d[p],y)||y===C&&!(p in d))&&sl(d,p,y)}function yc(d,p,y){var K=d[p];(!Xn.call(d,p)||!Us(K,y)||y===C&&!(p in d))&&sl(d,p,y)}function su(d,p){for(var y=d.length;y--;)if(Us(d[y][0],p))return y;return-1}function x_(d,p,y,K){return ol(d,function(be,Be,et){p(K,be,y(be),et)}),K}function Tn(d,p){return d&&Is(p,rs(p),d)}function sl(d,p,y){"__proto__"==p&&In?In(d,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):d[p]=y}function E_(d,p){for(var y=-1,K=p.length,be=yt(K),Be=null==d;++y<K;)be[y]=Be?C:yy(d,p[y]);return be}function ou(d,p,y){return d==d&&(y!==C&&(d=d<=y?d:y),p!==C&&(d=d>=p?d:p)),d}function $o(d,p,y,K,be,Be){var et,ct=1&p,pt=2&p,Rt=4&p;if(y&&(et=be?y(d,K,be,Be):y(d)),et!==C)return et;if(!Zi(d))return d;var Ot=Ln(d);if(Ot){if(et=function fC(d){var p=d.length,y=new d.constructor(p);return p&&"string"==typeof d[0]&&Xn.call(d,"index")&&(y.index=d.index,y.input=d.input),y}(d),!ct)return vs(d,et)}else{var Bt=ks(d),Yt=Bt==Je||Bt==ue;if(qa(d))return jp(d,ct);if(Bt==O||Bt==Ke||Yt&&!be){if(et=pt||Yt?{}:uw(d),!ct)return pt?function iw(d,p){return Is(d,mu(d),p)}(d,function Fb(d,p){return d&&Is(p,oo(p),d)}(et,d)):function oC(d,p){return Is(d,qh(d),p)}(d,Tn(et,d))}else{if(!Si[Bt])return be?d:{};et=function pC(d,p,y){var K=d.constructor;switch(p){case pe:return Up(d);case A:case ie:return new K(+d);case H:return function Vp(d,p){var y=p?Up(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.byteLength)}(d,y);case te:case Le:case it:case lt:case Et:case en:case Dn:case Nn:case pn:return L_(d,y);case ne:return new K;case U:case ot:return new K(d);case Ee:return function N_(d){var p=new d.constructor(d.source,ci.exec(d));return p.lastIndex=d.lastIndex,p}(d);case Re:return new K;case bt:return function sC(d){return Rp?bi(Rp.call(d)):{}}(d)}}(d,Bt,ct)}}Be||(Be=new Ms);var cn=Be.get(d);if(cn)return cn;Be.set(d,et),hy(d)?d.forEach(function(An){et.add($o(An,p,y,An,d,Be))}):Ww(d)&&d.forEach(function(An,zn){et.set(zn,$o(An,p,y,zn,d,Be))});var Gn=Ot?C:(Rt?pt?fl:Ds:pt?oo:rs)(d);return ga(Gn||d,function(An,zn){Gn&&(An=d[zn=An]),yc(et,zn,$o(An,p,y,zn,d,Be))}),et}function au(d,p,y){var K=y.length;if(null==d)return!K;for(d=bi(d);K--;){var be=y[K],et=d[be];if(et===C&&!(be in d)||!(0,p[be])(et))return!1}return!0}function kb(d,p,y){if("function"!=typeof d)throw new fi(_);return Jh(function(){d.apply(C,y)},p)}function Bh(d,p,y,K){var be=-1,Be=ad,et=!0,ct=d.length,pt=[],Rt=p.length;if(!ct)return pt;y&&(p=lr(p,eo(y))),K?(Be=cd,et=!1):p.length>=200&&(Be=dd,et=!1,p=new Tr(p));e:for(;++be<ct;){var Ot=d[be],Bt=null==y?Ot:y(Ot);if(Ot=K||0!==Ot?Ot:0,et&&Bt==Bt){for(var Yt=Rt;Yt--;)if(p[Yt]===Bt)continue e;pt.push(Ot)}else Be(p,Bt,K)||pt.push(Ot)}return pt}Oe.templateSettings={escape:Br,evaluate:da,interpolate:ka,variable:"",imports:{_:Oe}},(Oe.prototype=__.prototype).constructor=Oe,(ba.prototype=iu(__.prototype)).constructor=ba,(ri.prototype=iu(__.prototype)).constructor=ri,Vi.prototype.clear=function Mb(){this.__data__=Dp?Dp(null):{},this.size=0},Vi.prototype.delete=function WS(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},Vi.prototype.get=function $S(d){var p=this.__data__;if(Dp){var y=p[d];return y===N?C:y}return Xn.call(p,d)?p[d]:C},Vi.prototype.has=function Ib(d){var p=this.__data__;return Dp?p[d]!==C:Xn.call(p,d)},Vi.prototype.set=function Db(d,p){var y=this.__data__;return this.size+=this.has(d)?0:1,y[d]=Dp&&p===C?N:p,this},_c.prototype.clear=function y_(){this.__data__=[],this.size=0},_c.prototype.delete=function YS(d){var p=this.__data__,y=su(p,d);return!(y<0||(y==p.length-1?p.pop():Dh.call(p,y,1),--this.size,0))},_c.prototype.get=function Va(d){var p=this.__data__,y=su(p,d);return y<0?C:p[y][1]},_c.prototype.has=function Rb(d){return su(this.__data__,d)>-1},_c.prototype.set=function Ob(d,p){var y=this.__data__,K=su(y,d);return K<0?(++this.size,y.push([d,p])):y[K][1]=p,this},Ha.prototype.clear=function qS(){this.size=0,this.__data__={hash:new Vi,map:new(vd||_c),string:new Vi}},Ha.prototype.delete=function oF(d){var p=j_(this,d).delete(d);return this.size-=p?1:0,p},Ha.prototype.get=function Hi(d){return j_(this,d).get(d)},Ha.prototype.has=function v_(d){return j_(this,d).has(d)},Ha.prototype.set=function Nh(d,p){var y=j_(this,d),K=y.size;return y.set(d,p),this.size+=y.size==K?0:1,this},Tr.prototype.add=Tr.prototype.push=function XS(d){return this.__data__.set(d,N),this},Tr.prototype.has=function Lh(d){return this.__data__.has(d)},Ms.prototype.clear=function xo(){this.__data__=new _c,this.size=0},Ms.prototype.delete=function KS(d){var p=this.__data__,y=p.delete(d);return this.size=p.size,y},Ms.prototype.get=function b_(d){return this.__data__.get(d)},Ms.prototype.has=function JS(d){return this.__data__.has(d)},Ms.prototype.set=function Ga(d,p){var y=this.__data__;if(y instanceof _c){var K=y.__data__;if(!vd||K.length<199)return K.push([d,p]),this.size=++y.size,this;y=this.__data__=new Ha(K)}return y.set(d,p),this.size=y.size,this};var ol=uu(io),jb=uu(Yo,!0);function ZS(d,p){var y=!0;return ol(d,function(K,be,Be){return y=!!p(K,be,Be)}),y}function Mt(d,p,y){for(var K=-1,be=d.length;++K<be;){var Be=d[K],et=p(Be);if(null!=et&&(ct===C?et==et&&!Vs(et):y(et,ct)))var ct=et,pt=Be}return pt}function bd(d,p){var y=[];return ol(d,function(K,be,Be){p(K,be,Be)&&y.push(K)}),y}function Mr(d,p,y,K,be){var Be=-1,et=d.length;for(y||(y=U_),be||(be=[]);++Be<et;){var ct=d[Be];p>0&&y(ct)?p>1?Mr(ct,p-1,y,K,be):Qc(be,ct):K||(be[be.length]=ct)}return be}var wi=Rr(),A_=Rr(!0);function io(d,p){return d&&wi(d,p,rs)}function Yo(d,p){return d&&A_(d,p,rs)}function wd(d,p){return Wo(p,function(y){return Xa(d[y])})}function vc(d,p){for(var y=0,K=(p=ll(p,d)).length;null!=d&&y<K;)d=d[Ao(p[y++])];return y&&y==K?d:C}function Ub(d,p,y){var K=p(d);return Ln(d)?K:Qc(K,y(d))}function ro(d){return null==d?d===C?"[object Undefined]":"[object Null]":wo&&wo in bi(d)?function Eo(d){var p=Xn.call(d,wo),y=d[wo];try{d[wo]=C;var K=!0}catch{}var be=ts.call(d);return K&&(p?d[wo]=y:delete d[wo]),be}(d):function Kh(d){return ts.call(d)}(d)}function Op(d,p){return d>p}function Bs(d,p){return null!=d&&Xn.call(d,p)}function bc(d,p){return null!=d&&p in bi(d)}function qo(d,p,y){for(var K=y?cd:ad,be=d[0].length,Be=d.length,et=Be,ct=yt(Be),pt=1/0,Rt=[];et--;){var Ot=d[et];et&&p&&(Ot=lr(Ot,eo(p))),pt=Hr(Ot.length,pt),ct[et]=!y&&(p||be>=120&&Ot.length>=120)?new Tr(et&&Ot):C}Ot=d[0];var Bt=-1,Yt=ct[0];e:for(;++Bt<be&&Rt.length<pt;){var cn=Ot[Bt],Cn=p?p(cn):cn;if(cn=y||0!==cn?cn:0,!(Yt?dd(Yt,Cn):K(Rt,Cn,y))){for(et=Be;--et;){var Gn=ct[et];if(!(Gn?dd(Gn,Cn):K(d[et],Cn,y)))continue e}Yt&&Yt.push(Cn),Rt.push(cn)}}return Rt}function kh(d,p,y){var K=null==(d=bC(d,p=ll(p,d)))?d:d[Ao(Zo(p))];return null==K?C:zo(K,d,y)}function S_(d){return Er(d)&&ro(d)==Ke}function cu(d,p,y,K,be){return d===p||(null==d||null==p||!Er(d)&&!Er(p)?d!=d&&p!=p:function C_(d,p,y,K,be,Be){var et=Ln(d),ct=Ln(p),pt=et?fe:ks(d),Rt=ct?fe:ks(p),Ot=(pt=pt==Ke?O:pt)==O,Bt=(Rt=Rt==Ke?O:Rt)==O,Yt=pt==Rt;if(Yt&&qa(d)){if(!qa(p))return!1;et=!0,Ot=!1}if(Yt&&!Ot)return Be||(Be=new Ms),et||Au(d)?Or(d,p,y,K,be,Be):function dC(d,p,y,K,be,Be,et){switch(y){case H:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case pe:return!(d.byteLength!=p.byteLength||!Be(new Ui(d),new Ui(p)));case A:case ie:case U:return Us(+d,+p);case Ve:return d.name==p.name&&d.message==p.message;case Ee:case ot:return d==p+"";case ne:var ct=Tp;case Re:if(ct||(ct=Mp),d.size!=p.size&&!(1&K))return!1;var Rt=et.get(d);if(Rt)return Rt==p;K|=2,et.set(d,p);var Ot=Or(ct(d),ct(p),K,be,Be,et);return et.delete(d),Ot;case bt:if(Rp)return Rp.call(d)==Rp.call(p)}return!1}(d,p,pt,y,K,be,Be);if(!(1&y)){var cn=Ot&&Xn.call(d,"__wrapped__"),Cn=Bt&&Xn.call(p,"__wrapped__");if(cn||Cn){var Gn=cn?d.value():d,An=Cn?p.value():p;return Be||(Be=new Ms),be(Gn,An,y,K,Be)}}return!!Yt&&(Be||(Be=new Ms),function Yh(d,p,y,K,be,Be){var et=1&y,ct=Ds(d),pt=ct.length;if(pt!=Ds(p).length&&!et)return!1;for(var Bt=pt;Bt--;){var Yt=ct[Bt];if(!(et?Yt in p:Xn.call(p,Yt)))return!1}var cn=Be.get(d),Cn=Be.get(p);if(cn&&Cn)return cn==p&&Cn==d;var Gn=!0;Be.set(d,p),Be.set(p,d);for(var An=et;++Bt<pt;){var zn=d[Yt=ct[Bt]],di=p[Yt];if(K)var ao=et?K(di,zn,Yt,p,d,Be):K(zn,di,Yt,d,p,Be);if(!(ao===C?zn===di||be(zn,di,y,K,Be):ao)){Gn=!1;break}An||(An="constructor"==Yt)}if(Gn&&!An){var zr=d.constructor,Mo=p.constructor;zr!=Mo&&"constructor"in d&&"constructor"in p&&!("function"==typeof zr&&zr instanceof zr&&"function"==typeof Mo&&Mo instanceof Mo)&&(Gn=!1)}return Be.delete(d),Be.delete(p),Gn}(d,p,y,K,be,Be))}(d,p,y,K,cu,be))}function jh(d,p,y,K){var be=y.length,Be=be,et=!K;if(null==d)return!Be;for(d=bi(d);be--;){var ct=y[be];if(et&&ct[2]?ct[1]!==d[ct[0]]:!(ct[0]in d))return!1}for(;++be<Be;){var pt=(ct=y[be])[0],Rt=d[pt],Ot=ct[1];if(et&&ct[2]){if(Rt===C&&!(pt in d))return!1}else{var Bt=new Ms;if(K)var Yt=K(Rt,Ot,pt,d,p,Bt);if(!(Yt===C?cu(Ot,Rt,3,K,Bt):Yt))return!1}}return!0}function Gb(d){return!(!Zi(d)||function _C(d){return!!Bi&&Bi in d}(d))&&(Xa(d)?Mh:Wt).test(ml(d))}function M_(d){return"function"==typeof d?d:null==d?ws:"object"==typeof d?Ln(d)?al(d[0],d[1]):ys(d):yx(d)}function Pp(d){if(!_u(d))return h_(d);var p=[];for(var y in bi(d))Xn.call(d,y)&&"constructor"!=y&&p.push(y);return p}function Uh(d,p){return d<p}function Yb(d,p){var y=-1,K=Gr(d)?yt(d.length):[];return ol(d,function(be,Be,et){K[++y]=p(be,Be,et)}),K}function ys(d){var p=Gp(d);return 1==p.length&&p[0][2]?V_(p[0][0],p[0][1]):function(y){return y===d||jh(y,d,p)}}function al(d,p){return pl(d)&&Xh(p)?V_(Ao(d),p):function(y){var K=yy(y,d);return K===C&&K===p?vy(y,d):cu(p,K,3)}}function Oi(d,p,y,K,be){d!==p&&wi(p,function(Be,et){if(be||(be=new Ms),Zi(Be))!function tC(d,p,y,K,be,Be,et){var ct=H_(d,y),pt=H_(p,y),Rt=et.get(pt);if(Rt)Fh(d,y,Rt);else{var Ot=Be?Be(ct,pt,y+"",d,p,et):C,Bt=Ot===C;if(Bt){var Yt=Ln(pt),cn=!Yt&&qa(pt),Cn=!Yt&&!cn&&Au(pt);Ot=pt,Yt||cn||Cn?Ln(ct)?Ot=ct:dr(ct)?Ot=vs(ct):cn?(Bt=!1,Ot=jp(pt,!0)):Cn?(Bt=!1,Ot=L_(pt,!0)):Ot=[]:xl(pt)||wl(pt)?(Ot=ct,wl(ct)?Ot=Zw(ct):(!Zi(ct)||Xa(ct))&&(Ot=uw(pt))):Bt=!1}Bt&&(et.set(pt,Ot),be(Ot,pt,K,Be,et),et.delete(pt)),Fh(d,y,Ot)}}(d,p,et,y,Oi,K,be);else{var ct=K?K(H_(d,et),Be,et+"",d,p,be):C;ct===C&&(ct=Be),Fh(d,et,ct)}},oo)}function qb(d,p){var y=d.length;if(y)return Jo(p+=p<0?y:0,y)?d[p]:C}function Xb(d,p,y){p=p.length?lr(p,function(Be){return Ln(Be)?function(et){return vc(et,1===Be.length?Be[0]:Be)}:Be}):[ws];var K=-1;return p=lr(p,eo(yn())),function hc(rt,At){var yt=rt.length;for(rt.sort(At);yt--;)rt[yt]=rt[yt].value;return rt}(Yb(d,function(Be,et,ct){return{criteria:lr(p,function(Rt){return Rt(Be)}),index:++K,value:Be}}),function(Be,et){return function tw(d,p,y){for(var K=-1,be=d.criteria,Be=p.criteria,et=be.length,ct=y.length;++K<et;){var pt=F_(be[K],Be[K]);if(pt)return K>=ct?pt:pt*("desc"==y[K]?-1:1)}return d.index-p.index}(Be,et,y)})}function I_(d,p,y){for(var K=-1,be=p.length,Be={};++K<be;){var et=p[K],ct=vc(d,et);y(ct,et)&&Ad(Be,ll(et,d),ct)}return Be}function xd(d,p,y,K){var be=K?Sp:Vt,Be=-1,et=p.length,ct=d;for(d===p&&(p=vs(p)),y&&(ct=lr(d,eo(y)));++Be<et;)for(var pt=0,Rt=p[Be],Ot=y?y(Rt):Rt;(pt=be(ct,Ot,pt,K))>-1;)ct!==d&&Dh.call(ct,pt,1),Dh.call(d,pt,1);return d}function xc(d,p){for(var y=d?p.length:0,K=y-1;y--;){var be=p[y];if(y==K||be!==Be){var Be=be;Jo(be)?Dh.call(d,be,1):lu(d,be)}}return d}function D_(d,p){return d+mc(Cb()*(p-d+1))}function Ed(d,p){var y="";if(!d||p<1||p>je)return y;do{p%2&&(y+=d),(p=mc(p/2))&&(d+=d)}while(p);return y}function Un(d,p){return G_(hw(d,p,ws),d+"")}function R_(d){return Pb(lf(d))}function Jb(d,p){var y=lf(d);return yu(y,ou(p,0,y.length))}function Ad(d,p,y,K){if(!Zi(d))return d;for(var be=-1,Be=(p=ll(p,d)).length,et=Be-1,ct=d;null!=ct&&++be<Be;){var pt=Ao(p[be]),Rt=y;if("__proto__"===pt||"constructor"===pt||"prototype"===pt)return d;if(be!=et){var Ot=ct[pt];(Rt=K?K(Ot,pt,ct):C)===C&&(Rt=Zi(Ot)?Ot:Jo(p[be+1])?[]:{})}yc(ct,pt,Rt),ct=ct[pt]}return d}var Zb=g_?function(d,p){return g_.set(d,p),d}:ws,Sd=In?function(d,p){return In(d,"toString",{configurable:!0,enumerable:!1,value:kd(p),writable:!0})}:ws;function Vh(d){return yu(lf(d))}function Xo(d,p,y){var K=-1,be=d.length;p<0&&(p=-p>be?0:be+p),(y=y>be?be:y)<0&&(y+=be),be=p>y?0:y-p>>>0,p>>>=0;for(var Be=yt(be);++K<be;)Be[K]=d[K+p];return Be}function O_(d,p){var y;return ol(d,function(K,be,Be){return!(y=p(K,be,Be))}),!!y}function Lp(d,p,y){var K=0,be=null==d?K:d.length;if("number"==typeof p&&p==p&&be<=2147483647){for(;K<be;){var Be=K+be>>>1,et=d[Be];null!==et&&!Vs(et)&&(y?et<=p:et<p)?K=Be+1:be=Be}return be}return P_(d,p,ws,y)}function P_(d,p,y,K){var be=0,Be=null==d?0:d.length;if(0===Be)return 0;for(var et=(p=y(p))!=p,ct=null===p,pt=Vs(p),Rt=p===C;be<Be;){var Ot=mc((be+Be)/2),Bt=y(d[Ot]),Yt=Bt!==C,cn=null===Bt,Cn=Bt==Bt,Gn=Vs(Bt);if(et)var An=K||Cn;else An=Rt?Cn&&(K||Yt):ct?Cn&&Yt&&(K||!cn):pt?Cn&&Yt&&!cn&&(K||!Gn):!cn&&!Gn&&(K?Bt<=p:Bt<p);An?be=Ot+1:Be=Ot}return Hr(Be,4294967294)}function Qb(d,p){for(var y=-1,K=d.length,be=0,Be=[];++y<K;){var et=d[y],ct=p?p(et):et;if(!y||!Us(ct,pt)){var pt=ct;Be[be++]=0===et?0:et}}return Be}function iC(d){return"number"==typeof d?d:Vs(d)?NaN:+d}function Ko(d){if("string"==typeof d)return d;if(Ln(d))return lr(d,Ko)+"";if(Vs(d))return zS?zS.call(d):"";var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function za(d,p,y){var K=-1,be=ad,Be=d.length,et=!0,ct=[],pt=ct;if(y)et=!1,be=cd;else if(Be>=200){var Rt=p?null:cF(d);if(Rt)return Mp(Rt);et=!1,be=dd,pt=new Tr}else pt=p?[]:ct;e:for(;++K<Be;){var Ot=d[K],Bt=p?p(Ot):Ot;if(Ot=y||0!==Ot?Ot:0,et&&Bt==Bt){for(var Yt=pt.length;Yt--;)if(pt[Yt]===Bt)continue e;p&&pt.push(Bt),ct.push(Ot)}else be(pt,Bt,y)||(pt!==ct&&pt.push(Bt),ct.push(Ot))}return ct}function lu(d,p){return null==(d=bC(d,p=ll(p,d)))||delete d[Ao(Zo(p))]}function ew(d,p,y,K){return Ad(d,p,y(vc(d,p)),K)}function cl(d,p,y,K){for(var be=d.length,Be=K?be:-1;(K?Be--:++Be<be)&&p(d[Be],Be,d););return y?Xo(d,K?0:Be,K?Be+1:be):Xo(d,K?Be+1:0,K?be:Be)}function Fp(d,p){var y=d;return y instanceof ri&&(y=y.value()),o_(p,function(K,be){return be.func.apply(be.thisArg,Qc([K],be.args))},y)}function Cd(d,p,y){var K=d.length;if(K<2)return K?za(d[0]):[];for(var be=-1,Be=yt(K);++be<K;)for(var et=d[be],ct=-1;++ct<K;)ct!=be&&(Be[be]=Bh(Be[be]||et,d[ct],p,y));return za(Mr(Be,1),p,y)}function rC(d,p,y){for(var K=-1,be=d.length,Be=p.length,et={};++K<be;)y(et,d[K],K<Be?p[K]:C);return et}function Bp(d){return dr(d)?d:[]}function kp(d){return"function"==typeof d?d:ws}function ll(d,p){return Ln(d)?d:pl(d,p)?[d]:zp(xi(d))}var Wa=Un;function ul(d,p,y){var K=d.length;return y=y===C?K:y,!p&&y>=K?d:Xo(d,p,y)}var Hh=d_||function(d){return es.clearTimeout(d)};function jp(d,p){if(p)return d.slice();var y=d.length,K=md?md(y):new d.constructor(y);return d.copy(K),K}function Up(d){var p=new d.constructor(d.byteLength);return new Ui(p).set(new Ui(d)),p}function L_(d,p){var y=p?Up(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.length)}function F_(d,p){if(d!==p){var y=d!==C,K=null===d,be=d==d,Be=Vs(d),et=p!==C,ct=null===p,pt=p==p,Rt=Vs(p);if(!ct&&!Rt&&!Be&&d>p||Be&&et&&pt&&!ct&&!Rt||K&&et&&pt||!y&&pt||!be)return 1;if(!K&&!Be&&!Rt&&d<p||Rt&&y&&be&&!K&&!Be||ct&&y&&be||!et&&be||!pt)return-1}return 0}function B_(d,p,y,K){for(var be=-1,Be=d.length,et=y.length,ct=-1,pt=p.length,Rt=Ki(Be-et,0),Ot=yt(pt+Rt),Bt=!K;++ct<pt;)Ot[ct]=p[ct];for(;++be<et;)(Bt||be<Be)&&(Ot[y[be]]=d[be]);for(;Rt--;)Ot[ct++]=d[be++];return Ot}function nw(d,p,y,K){for(var be=-1,Be=d.length,et=-1,ct=y.length,pt=-1,Rt=p.length,Ot=Ki(Be-ct,0),Bt=yt(Ot+Rt),Yt=!K;++be<Ot;)Bt[be]=d[be];for(var cn=be;++pt<Rt;)Bt[cn+pt]=p[pt];for(;++et<ct;)(Yt||be<Be)&&(Bt[cn+y[et]]=d[be++]);return Bt}function vs(d,p){var y=-1,K=d.length;for(p||(p=yt(K));++y<K;)p[y]=d[y];return p}function Is(d,p,y,K){var be=!y;y||(y={});for(var Be=-1,et=p.length;++Be<et;){var ct=p[Be],pt=K?K(y[ct],d[ct],ct,y,d):C;pt===C&&(pt=d[ct]),be?sl(y,ct,pt):yc(y,ct,pt)}return y}function Gh(d,p){return function(y,K){var be=Ln(y)?ZL:x_,Be=p?p():{};return be(y,d,yn(K,2),Be)}}function wa(d){return Un(function(p,y){var K=-1,be=y.length,Be=be>1?y[be-1]:C,et=be>2?y[2]:C;for(Be=d.length>3&&"function"==typeof Be?(be--,Be):C,et&&js(y[0],y[1],et)&&(Be=be<3?C:Be,be=1),p=bi(p);++K<be;){var ct=y[K];ct&&d(p,ct,K,Be)}return p})}function uu(d,p){return function(y,K){if(null==y)return y;if(!Gr(y))return d(y,K);for(var be=y.length,Be=p?be:-1,et=bi(y);(p?Be--:++Be<be)&&!1!==K(et[Be],Be,et););return y}}function Rr(d){return function(p,y,K){for(var be=-1,Be=bi(p),et=K(p),ct=et.length;ct--;){var pt=et[d?ct:++be];if(!1===y(Be[pt],pt,Be))break}return p}}function ur(d){return function(p){var y=fd(p=xi(p))?_a(p):C,K=y?y[0]:p.charAt(0),be=y?ul(y,1).join(""):p.slice(1);return K[d]()+be}}function dl(d){return function(p){return o_(ug(ux(p).replace(XL,"")),d,"")}}function zh(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=iu(d.prototype),K=d.apply(y,p);return Zi(K)?K:y}}function du(d){return function(p,y,K){var be=bi(p);if(!Gr(p)){var Be=yn(y,3);p=rs(p),y=function(ct){return Be(be[ct],ct,be)}}var et=d(p,y,K);return et>-1?be[Be?p[et]:et]:C}}function hu(d){return Sc(function(p){var y=p.length,K=y,be=ba.prototype.thru;for(d&&p.reverse();K--;){var Be=p[K];if("function"!=typeof Be)throw new fi(_);if(be&&!et&&"wrapper"==gu(Be))var et=new ba([],!0)}for(K=et?K:y;++K<y;){var ct=gu(Be=p[K]),pt="wrapper"==ct?Hp(Be):C;et=pt&&Md(pt[0])&&424==pt[1]&&!pt[4].length&&1==pt[9]?et[gu(pt[0])].apply(et,pt[3]):1==Be.length&&Md(Be)?et[ct]():et.thru(Be)}return function(){var Rt=arguments,Ot=Rt[0];if(et&&1==Rt.length&&Ln(Ot))return et.plant(Ot).value();for(var Bt=0,Yt=y?p[Bt].apply(this,Rt):Ot;++Bt<y;)Yt=p[Bt].call(this,Yt);return Yt}})}function Ec(d,p,y,K,be,Be,et,ct,pt,Rt){var Ot=p&T,Bt=1&p,Yt=2&p,cn=24&p,Cn=512&p,Gn=Yt?C:zh(d);return function An(){for(var zn=arguments.length,di=yt(zn),ao=zn;ao--;)di[ao]=arguments[ao];if(cn)var zr=$a(An),Mo=function bb(rt,At){for(var yt=rt.length,Xt=0;yt--;)rt[yt]===At&&++Xt;return Xt}(di,zr);if(K&&(di=B_(di,K,be,cn)),Be&&(di=nw(di,Be,et,cn)),zn-=Mo,cn&&zn<Rt){var Qi=nl(di,zr);return cC(d,p,Ec,An.placeholder,y,di,Qi,ct,pt,Rt-zn)}var Qo=Bt?y:this,Ja=Yt?Qo[d]:d;return zn=di.length,ct?di=function fw(d,p){for(var y=d.length,K=Hr(p.length,y),be=vs(d);K--;){var Be=p[K];d[K]=Jo(Be,y)?be[Be]:C}return d}(di,ct):Cn&&zn>1&&di.reverse(),Ot&&pt<zn&&(di.length=pt),this&&this!==es&&this instanceof An&&(Ja=Gn||zh(Ja)),Ja.apply(Qo,di)}}function fu(d,p){return function(y,K){return function wc(d,p,y,K){return io(d,function(be,Be,et){p(K,y(be),Be,et)}),K}(y,d,p(K),{})}}function Wh(d,p){return function(y,K){var be;if(y===C&&K===C)return p;if(y!==C&&(be=y),K!==C){if(be===C)return K;"string"==typeof y||"string"==typeof K?(y=Ko(y),K=Ko(K)):(y=iC(y),K=iC(K)),be=d(y,K)}return be}}function $h(d){return Sc(function(p){return p=lr(p,eo(yn())),Un(function(y){var K=this;return d(p,function(be){return zo(be,K,y)})})})}function Ac(d,p){var y=(p=p===C?" ":Ko(p)).length;if(y<2)return y?Ed(p,d):p;var K=Ed(p,nu(d/pd(p)));return fd(p)?ul(_a(K),0,d).join(""):K.slice(0,d)}function sw(d){return function(p,y,K){return K&&"number"!=typeof K&&js(p,y,K)&&(y=K=C),p=Ea(p),y===C?(y=p,p=0):y=Ea(y),function Np(d,p,y,K){for(var be=-1,Be=Ki(nu((p-d)/(y||1)),0),et=yt(Be);Be--;)et[K?Be:++be]=d,d+=y;return et}(p,y,K=K===C?p<y?1:-1:Ea(K),d)}}function k_(d){return function(p,y){return"string"==typeof p&&"string"==typeof y||(p=Co(p),y=Co(y)),d(p,y)}}function cC(d,p,y,K,be,Be,et,ct,pt,Rt){var Ot=8&p;p|=Ot?v:64,4&(p&=~(Ot?64:v))||(p&=-4);var Gn=[d,p,be,Ot?Be:C,Ot?et:C,Ot?C:Be,Ot?C:et,ct,pt,Rt],An=y.apply(C,Gn);return Md(d)&&wC(An,Gn),An.placeholder=K,pw(An,d,p)}function ow(d){var p=Dr[d];return function(y,K){if(y=Co(y),(K=null==K?0:Hr(On(K),292))&&ns(y)){var be=(xi(y)+"e").split("e");return+((be=(xi(p(be[0]+"e"+(+be[1]+K)))+"e").split("e"))[0]+"e"+(+be[1]-K))}return p(y)}}var cF=rl&&1/Mp(new rl([,-0]))[1]==Ce?function(d){return new rl(d)}:pf;function lC(d){return function(p){var y=ks(p);return y==ne?Tp(p):y==Re?function kS(rt){var At=-1,yt=Array(rt.size);return rt.forEach(function(Xt){yt[++At]=[Xt,Xt]}),yt}(p):function ja(rt,At){return lr(At,function(yt){return[yt,rt[yt]]})}(p,d(p))}}function hl(d,p,y,K,be,Be,et,ct){var pt=2&p;if(!pt&&"function"!=typeof d)throw new fi(_);var Rt=K?K.length:0;if(Rt||(p&=-97,K=be=C),et=et===C?et:Ki(On(et),0),ct=ct===C?ct:On(ct),Rt-=be?be.length:0,64&p){var Ot=K,Bt=be;K=be=C}var Yt=pt?C:Hp(d),cn=[d,p,y,K,be,Ot,Bt,Be,et,ct];if(Yt&&function vC(d,p){var y=d[1],K=p[1],be=y|K;if(!(be<131)&&!(K==T&&8==y||K==T&&256==y&&d[7].length<=p[8]||384==K&&p[7].length<=p[8]&&8==y))return d;1&K&&(d[2]=p[2],be|=1&y?0:4);var ct=p[3];if(ct){var pt=d[3];d[3]=pt?B_(pt,ct,p[4]):ct,d[4]=pt?nl(d[3],P):p[4]}(ct=p[5])&&(d[5]=(pt=d[5])?nw(pt,ct,p[6]):ct,d[6]=pt?nl(d[5],P):p[6]),(ct=p[7])&&(d[7]=ct),K&T&&(d[8]=null==d[8]?p[8]:Hr(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=be}(cn,Yt),d=cn[0],p=cn[1],y=cn[2],K=cn[3],be=cn[4],!(ct=cn[9]=cn[9]===C?pt?0:d.length:Ki(cn[9]-Rt,0))&&24&p&&(p&=-25),p&&1!=p)Cn=8==p||16==p?function rw(d,p,y){var K=zh(d);return function be(){for(var Be=arguments.length,et=yt(Be),ct=Be,pt=$a(be);ct--;)et[ct]=arguments[ct];var Rt=Be<3&&et[0]!==pt&&et[Be-1]!==pt?[]:nl(et,pt);return(Be-=Rt.length)<y?cC(d,p,Ec,be.placeholder,C,et,Rt,C,C,y-Be):zo(this&&this!==es&&this instanceof be?K:d,this,et)}}(d,p,ct):p!=v&&33!=p||be.length?Ec.apply(C,cn):function aF(d,p,y,K){var be=1&p,Be=zh(d);return function et(){for(var ct=-1,pt=arguments.length,Rt=-1,Ot=K.length,Bt=yt(Ot+pt),Yt=this&&this!==es&&this instanceof et?Be:d;++Rt<Ot;)Bt[Rt]=K[Rt];for(;pt--;)Bt[Rt++]=arguments[++ct];return zo(Yt,be?y:this,Bt)}}(d,p,y,K);else var Cn=function aC(d,p,y){var K=1&p,be=zh(d);return function Be(){return(this&&this!==es&&this instanceof Be?be:d).apply(K?y:this,arguments)}}(d,p,y);return pw((Yt?Zb:wC)(Cn,cn),d,p)}function pu(d,p,y,K){return d===C||Us(d,Ci[y])&&!Xn.call(K,y)?p:d}function aw(d,p,y,K,be,Be){return Zi(d)&&Zi(p)&&(Be.set(p,d),Oi(d,p,C,aw,Be),Be.delete(p)),d}function uC(d){return xl(d)?C:d}function Or(d,p,y,K,be,Be){var et=1&y,ct=d.length,pt=p.length;if(ct!=pt&&!(et&&pt>ct))return!1;var Rt=Be.get(d),Ot=Be.get(p);if(Rt&&Ot)return Rt==p&&Ot==d;var Bt=-1,Yt=!0,cn=2&y?new Tr:C;for(Be.set(d,p),Be.set(p,d);++Bt<ct;){var Cn=d[Bt],Gn=p[Bt];if(K)var An=et?K(Gn,Cn,Bt,p,d,Be):K(Cn,Gn,Bt,d,p,Be);if(An!==C){if(An)continue;Yt=!1;break}if(cn){if(!el(p,function(zn,di){if(!dd(cn,di)&&(Cn===zn||be(Cn,zn,y,K,Be)))return cn.push(di)})){Yt=!1;break}}else if(Cn!==Gn&&!be(Cn,Gn,y,K,Be)){Yt=!1;break}}return Be.delete(d),Be.delete(p),Yt}function Sc(d){return G_(hw(d,C,$p),d+"")}function Ds(d){return Ub(d,rs,qh)}function fl(d){return Ub(d,oo,mu)}var Hp=g_?function(d){return g_.get(d)}:pf;function gu(d){for(var p=d.name+"",y=Ph[p],K=Xn.call(Ph,p)?y.length:0;K--;){var be=y[K],Be=be.func;if(null==Be||Be==d)return be.name}return p}function $a(d){return(Xn.call(Oe,"placeholder")?Oe:d).placeholder}function yn(){var d=Oe.iteratee||gx;return d=d===gx?M_:d,arguments.length?d(arguments[0],arguments[1]):d}function j_(d,p){var y=d.__data__;return function mC(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?y["string"==typeof p?"string":"hash"]:y.map}function Gp(d){for(var p=rs(d),y=p.length;y--;){var K=p[y],be=d[K];p[y]=[K,be,Xh(be)]}return p}function Td(d,p){var y=function FS(rt,At){return null==rt?C:rt[At]}(d,p);return Gb(y)?y:C}var qh=_r?function(d){return null==d?[]:(d=bi(d),Wo(_r(d),function(p){return _d.call(d,p)}))}:hg,mu=_r?function(d){for(var p=[];d;)Qc(p,qh(d)),d=pc(d);return p}:hg,ks=ro;function lw(d,p,y){for(var K=-1,be=(p=ll(p,d)).length,Be=!1;++K<be;){var et=Ao(p[K]);if(!(Be=null!=d&&y(d,et)))break;d=d[et]}return Be||++K!=be?Be:!!(be=null==d?0:d.length)&&xu(be)&&Jo(et,be)&&(Ln(d)||wl(d))}function uw(d){return"function"!=typeof d.constructor||_u(d)?{}:iu(pc(d))}function U_(d){return Ln(d)||wl(d)||!!(gc&&d&&d[gc])}function Jo(d,p){var y=typeof d;return!!(p=p??je)&&("number"==y||"symbol"!=y&&kr.test(d))&&d>-1&&d%1==0&&d<p}function js(d,p,y){if(!Zi(y))return!1;var K=typeof p;return!!("number"==K?Gr(y)&&Jo(p,y.length):"string"==K&&p in y)&&Us(y[p],d)}function pl(d,p){if(Ln(d))return!1;var y=typeof d;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=d&&!Vs(d))||ha.test(d)||!Jc.test(d)||null!=p&&d in bi(p)}function Md(d){var p=gu(d),y=Oe[p];if("function"!=typeof y||!(p in ri.prototype))return!1;if(d===y)return!0;var K=Hp(y);return!!K&&d===K[0]}(Oh&&ks(new Oh(new ArrayBuffer(1)))!=H||vd&&ks(new vd)!=ne||p_&&ks(p_.resolve())!=he||rl&&ks(new rl)!=Re||Ip&&ks(new Ip)!=mt)&&(ks=function(d){var p=ro(d),y=p==O?d.constructor:C,K=y?ml(y):"";if(K)switch(K){case eF:return H;case tF:return ne;case nF:return he;case iF:return Re;case rF:return mt}return p});var dw=no?Xa:gf;function _u(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||Ci)}function Xh(d){return d==d&&!Zi(d)}function V_(d,p){return function(y){return null!=y&&y[d]===p&&(p!==C||d in bi(y))}}function hw(d,p,y){return p=Ki(p===C?d.length-1:p,0),function(){for(var K=arguments,be=-1,Be=Ki(K.length-p,0),et=yt(Be);++be<Be;)et[be]=K[p+be];be=-1;for(var ct=yt(p+1);++be<p;)ct[be]=K[be];return ct[p]=y(et),zo(d,this,ct)}}function bC(d,p){return p.length<2?d:vc(d,Xo(p,0,-1))}function H_(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var wC=gl(Zb),Jh=Ua||function(d,p){return es.setTimeout(d,p)},G_=gl(Sd);function pw(d,p,y){var K=p+"";return G_(d,function gC(d,p){var y=p.length;if(!y)return d;var K=y-1;return p[K]=(y>1?"& ":"")+p[K],p=p.join(y>2?", ":" "),d.replace(tn,"{\n/* [wrapped with "+p+"] */\n")}(K,function xC(d,p){return ga(_t,function(y){var K="_."+y[0];p&y[1]&&!ad(d,K)&&d.push(K)}),d.sort()}(function hC(d){var p=d.match(or);return p?p[1].split(Zr):[]}(K),y)))}function gl(d){var p=0,y=0;return function(){var K=va(),be=16-(K-y);if(y=K,be>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(C,arguments)}}function yu(d,p){var y=-1,K=d.length,be=K-1;for(p=p===C?K:p;++y<p;){var Be=D_(y,be),et=d[Be];d[Be]=d[y],d[y]=et}return d.length=p,d}var zp=function yC(d){var p=Nd(d,function(K){return 500===y.size&&y.clear(),K}),y=p.cache;return p}(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(Ns,function(y,K,be,Be){p.push(be?Be.replace(Ni,"$1"):K||y)}),p});function Ao(d){if("string"==typeof d||Vs(d))return d;var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function ml(d){if(null!=d){try{return Vr.call(d)}catch{}try{return d+""}catch{}}return""}function z_(d){if(d instanceof ri)return d.clone();var p=new ba(d.__wrapped__,d.__chain__);return p.__actions__=vs(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var W_=Un(function(d,p){return dr(d)?Bh(d,Mr(p,1,dr,!0)):[]}),EC=Un(function(d,p){var y=Zo(p);return dr(y)&&(y=C),dr(d)?Bh(d,Mr(p,1,dr,!0),yn(y,2)):[]}),$_=Un(function(d,p){var y=Zo(p);return dr(y)&&(y=C),dr(d)?Bh(d,Mr(p,1,dr,!0),C,y):[]});function Zh(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=null==y?0:On(y);return be<0&&(be=Ki(K+be,0)),Ch(d,yn(p,3),be)}function yw(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=K-1;return y!==C&&(be=On(y),be=y<0?Ki(K+be,0):Hr(be,K-1)),Ch(d,yn(p,3),be,!0)}function $p(d){return null!=d&&d.length?Mr(d,1):[]}function qp(d){return d&&d.length?d[0]:C}var vw=Un(function(d){var p=lr(d,Bp);return p.length&&p[0]===d[0]?qo(p):[]}),Rd=Un(function(d){var p=Zo(d),y=lr(d,Bp);return p===Zo(y)?p=C:y.pop(),y.length&&y[0]===d[0]?qo(y,yn(p,2)):[]}),TC=Un(function(d){var p=Zo(d),y=lr(d,Bp);return(p="function"==typeof p?p:C)&&y.pop(),y.length&&y[0]===d[0]?qo(y,C,p):[]});function Zo(d){var p=null==d?0:d.length;return p?d[p-1]:C}var X_=Un(K_);function K_(d,p){return d&&d.length&&p&&p.length?xd(d,p):d}var bw=Sc(function(d,p){var y=null==d?0:d.length,K=E_(d,p);return xc(d,lr(p,function(be){return Jo(be,y)?+be:be}).sort(F_)),K});function Xp(d){return null==d?d:GS.call(d)}var FC=Un(function(d){return za(Mr(d,1,dr,!0))}),yl=Un(function(d){var p=Zo(d);return dr(p)&&(p=C),za(Mr(d,1,dr,!0),yn(p,2))}),Jp=Un(function(d){var p=Zo(d);return p="function"==typeof p?p:C,za(Mr(d,1,dr,!0),C,p)});function Sw(d){if(!d||!d.length)return[];var p=0;return d=Wo(d,function(y){if(dr(y))return p=Ki(y.length,p),!0}),vo(p,function(y){return lr(d,a_(y))})}function Cc(d,p){if(!d||!d.length)return[];var y=Sw(d);return null==p?y:lr(y,function(K){return zo(p,C,K)})}var Cw=Un(function(d,p){return dr(d)?Bh(d,p):[]}),kC=Un(function(d){return Cd(Wo(d,dr))}),jC=Un(function(d){var p=Zo(d);return dr(p)&&(p=C),Cd(Wo(d,dr),yn(p,2))}),UC=Un(function(d){var p=Zo(d);return p="function"==typeof p?p:C,Cd(Wo(d,dr),C,p)}),VC=Un(Sw),So=Un(function(d){var p=d.length,y=p>1?d[p-1]:C;return y="function"==typeof y?(d.pop(),y):C,Cc(d,y)});function Tc(d){var p=Oe(d);return p.__chain__=!0,p}function ef(d,p){return p(d)}var vl=Sc(function(d){var p=d.length,y=p?d[0]:0,K=this.__wrapped__,be=function(Be){return E_(Be,d)};return!(p>1||this.__actions__.length)&&K instanceof ri&&Jo(y)?((K=K.slice(y,+y+(p?1:0))).__actions__.push({func:ef,args:[be],thisArg:C}),new ba(K,this.__chain__).thru(function(Be){return p&&!Be.length&&Be.push(C),Be})):this.thru(be)}),Dw=Gh(function(d,p,y){Xn.call(d,y)?++d[y]:sl(d,y,1)}),zC=du(Zh),ey=du(yw);function WC(d,p){return(Ln(d)?ga:ol)(d,yn(p,3))}function $C(d,p){return(Ln(d)?QL:jb)(d,yn(p,3))}var mF=Gh(function(d,p,y){Xn.call(d,y)?d[y].push(p):sl(d,y,[p])}),yF=Un(function(d,p,y){var K=-1,be="function"==typeof p,Be=Gr(d)?yt(d.length):[];return ol(d,function(et){Be[++K]=be?zo(p,et,y):kh(et,p,y)}),Be}),YC=Gh(function(d,p,y){sl(d,y,p)});function bu(d,p){return(Ln(d)?lr:Yb)(d,yn(p,3))}var ny=Gh(function(d,p,y){d[y?0:1].push(p)},function(){return[[],[]]}),bl=Un(function(d,p){if(null==d)return[];var y=p.length;return y>1&&js(d,p[0],p[1])?p=[]:y>2&&js(p[0],p[1],p[2])&&(p=[p[0]]),Xb(d,Mr(p,1),[])}),ng=Rh||function(){return es.Date.now()};function Lw(d,p,y){return p=y?C:p,hl(d,T,C,C,C,C,p=d&&null==p?d.length:p)}function iy(d,p){var y;if("function"!=typeof p)throw new fi(_);return d=On(d),function(){return--d>0&&(y=p.apply(this,arguments)),d<=1&&(p=C),y}}var rf=Un(function(d,p,y){var K=1;if(y.length){var be=nl(y,$a(rf));K|=v}return hl(d,K,p,y,be)}),Fw=Un(function(d,p,y){var K=3;if(y.length){var be=nl(y,$a(Fw));K|=v}return hl(p,K,d,y,be)});function ry(d,p,y){var K,be,Be,et,ct,pt,Rt=0,Ot=!1,Bt=!1,Yt=!0;if("function"!=typeof d)throw new fi(_);function cn(Qi){var Qo=K,Ja=be;return K=be=C,Rt=Qi,et=d.apply(Ja,Qo)}function An(Qi){var Qo=Qi-pt;return pt===C||Qo>=p||Qo<0||Bt&&Qi-Rt>=Be}function zn(){var Qi=ng();if(An(Qi))return di(Qi);ct=Jh(zn,function Gn(Qi){var xx=p-(Qi-pt);return Bt?Hr(xx,Be-(Qi-Rt)):xx}(Qi))}function di(Qi){return ct=C,Yt&&K?cn(Qi):(K=be=C,et)}function Mo(){var Qi=ng(),Qo=An(Qi);if(K=arguments,be=this,pt=Qi,Qo){if(ct===C)return function Cn(Qi){return Rt=Qi,ct=Jh(zn,p),Ot?cn(Qi):et}(pt);if(Bt)return Hh(ct),ct=Jh(zn,p),cn(pt)}return ct===C&&(ct=Jh(zn,p)),et}return p=Co(p)||0,Zi(y)&&(Ot=!!y.leading,Be=(Bt="maxWait"in y)?Ki(Co(y.maxWait)||0,p):Be,Yt="trailing"in y?!!y.trailing:Yt),Mo.cancel=function ao(){ct!==C&&Hh(ct),Rt=0,K=pt=be=ct=C},Mo.flush=function zr(){return ct===C?et:di(ng())},Mo}var KC=Un(function(d,p){return kb(d,1,p)}),JC=Un(function(d,p,y){return kb(d,Co(p)||0,y)});function Nd(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new fi(_);var y=function(){var K=arguments,be=p?p.apply(this,K):K[0],Be=y.cache;if(Be.has(be))return Be.get(be);var et=d.apply(this,K);return y.cache=Be.set(be,et)||Be,et};return y.cache=new(Nd.Cache||Ha),y}function sf(d){if("function"!=typeof d)throw new fi(_);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}Nd.Cache=Ha;var Rs=Wa(function(d,p){var y=(p=1==p.length&&Ln(p[0])?lr(p[0],eo(yn())):lr(Mr(p,1),eo(yn()))).length;return Un(function(K){for(var be=-1,Be=Hr(K.length,y);++be<Be;)K[be]=p[be].call(this,K[be]);return zo(d,this,K)})}),wu=Un(function(d,p){var y=nl(p,$a(wu));return hl(d,v,C,p,y)}),oy=Un(function(d,p){var y=nl(p,$a(oy));return hl(d,64,C,p,y)}),jw=Sc(function(d,p){return hl(d,256,C,C,C,p)});function Us(d,p){return d===p||d!=d&&p!=p}var rT=k_(Op),sT=k_(function(d,p){return d>=p}),wl=S_(function(){return arguments}())?S_:function(d){return Er(d)&&Xn.call(d,"callee")&&!_d.call(d,"callee")},Ln=yt.isArray,Gw=wp?eo(wp):function QS(d){return Er(d)&&ro(d)==pe};function Gr(d){return null!=d&&xu(d.length)&&!Xa(d)}function dr(d){return Er(d)&&Gr(d)}var qa=yd||gf,ig=xp?eo(xp):function eC(d){return Er(d)&&ro(d)==ie};function ly(d){if(!Er(d))return!1;var p=ro(d);return p==Ve||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!xl(d)}function Xa(d){if(!Zi(d))return!1;var p=ro(d);return p==Je||p==ue||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Ld(d){return"number"==typeof d&&d==On(d)}function xu(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=je}function Zi(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Er(d){return null!=d&&"object"==typeof d}var Ww=s_?eo(s_):function Hb(d){return Er(d)&&ks(d)==ne};function hT(d){return"number"==typeof d||Er(d)&&ro(d)==U}function xl(d){if(!Er(d)||ro(d)!=O)return!1;var p=pc(d);if(null===p)return!0;var y=Xn.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&Vr.call(y)==fc}var dy=Ep?eo(Ep):function zb(d){return Er(d)&&ro(d)==Ee},hy=_b?eo(_b):function T_(d){return Er(d)&&ks(d)==Re};function af(d){return"string"==typeof d||!Ln(d)&&Er(d)&&ro(d)==ot}function Vs(d){return"symbol"==typeof d||Er(d)&&ro(d)==bt}var Au=Ap?eo(Ap):function Wb(d){return Er(d)&&xu(d.length)&&!!Xi[ro(d)]},fy=k_(Uh),sg=k_(function(d,p){return d<=p});function py(d){if(!d)return[];if(Gr(d))return af(d)?_a(d):vs(d);if(il&&d[il])return function BS(rt){for(var At,yt=[];!(At=rt.next()).done;)yt.push(At.value);return yt}(d[il]());var p=ks(d);return(p==ne?Tp:p==Re?Mp:lf)(d)}function Ea(d){return d?(d=Co(d))===Ce||d===-Ce?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function On(d){var p=Ea(d),y=p%1;return p==p?y?p-y:p:0}function Jw(d){return d?ou(On(d),0,de):0}function Co(d){if("number"==typeof d)return d;if(Vs(d))return NaN;if(Zi(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Zi(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=hi(d);var y=Ho.test(d);return y||jn.test(d)?i_(d.slice(2),y?2:8):ln.test(d)?NaN:+d}function Zw(d){return Is(d,oo(d))}function xi(d){return null==d?"":Ko(d)}var Qw=wa(function(d,p){if(_u(p)||Gr(p))Is(p,rs(p),d);else for(var y in p)Xn.call(p,y)&&yc(d,y,p[y])}),gy=wa(function(d,p){Is(p,oo(p),d)}),Su=wa(function(d,p,y,K){Is(p,oo(p),d,K)}),my=wa(function(d,p,y,K){Is(p,rs(p),d,K)}),Fd=Sc(E_),gT=Un(function(d,p){d=bi(d);var y=-1,K=p.length,be=K>2?p[2]:C;for(be&&js(p[0],p[1],be)&&(K=1);++y<K;)for(var Be=p[y],et=oo(Be),ct=-1,pt=et.length;++ct<pt;){var Rt=et[ct],Ot=d[Rt];(Ot===C||Us(Ot,Ci[Rt])&&!Xn.call(d,Rt))&&(d[Rt]=Be[Rt])}return d}),vF=Un(function(d){return d.push(C,aw),zo(ix,C,d)});function yy(d,p,y){var K=null==d?C:vc(d,p);return K===C?y:K}function vy(d,p){return null!=d&&lw(d,p,bc)}var vT=fu(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=ts.call(p)),d[p]=y},kd(ws)),To=fu(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=ts.call(p)),Xn.call(d,p)?d[p].push(y):d[p]=[y]},yn),Ka=Un(kh);function rs(d){return Gr(d)?w_(d):Pp(d)}function oo(d){return Gr(d)?w_(d,!0):function $b(d){if(!Zi(d))return function Id(d){var p=[];if(null!=d)for(var y in bi(d))p.push(y);return p}(d);var p=_u(d),y=[];for(var K in d)"constructor"==K&&(p||!Xn.call(d,K))||y.push(K);return y}(d)}var xT=wa(function(d,p,y){Oi(d,p,y)}),ix=wa(function(d,p,y,K){Oi(d,p,y,K)}),rx=Sc(function(d,p){var y={};if(null==d)return y;var K=!1;p=lr(p,function(Be){return Be=ll(Be,d),K||(K=Be.length>1),Be}),Is(d,fl(d),y),K&&(y=$o(y,7,uC));for(var be=p.length;be--;)lu(y,p[be]);return y}),AT=Sc(function(d,p){return null==d?{}:function nC(d,p){return I_(d,p,function(y,K){return vy(d,K)})}(d,p)});function sx(d,p){if(null==d)return{};var y=lr(fl(d),function(K){return[K]});return p=yn(p),I_(d,y,function(K,be){return p(K,be[0])})}var Bd=lC(rs),by=lC(oo);function lf(d){return null==d?[]:Th(d,rs(d))}var cx=dl(function(d,p,y){return p=p.toLowerCase(),d+(y?lx(p):p)});function lx(d){return df(xi(d).toLowerCase())}function ux(d){return(d=xi(d))&&d.replace(ti,wb).replace(KL,"")}var cg=dl(function(d,p,y){return d+(y?"-":"")+p.toLowerCase()}),hx=dl(function(d,p,y){return d+(y?" ":"")+p.toLowerCase()}),Ey=ur("toLowerCase"),RT=dl(function(d,p,y){return d+(y?"_":"")+p.toLowerCase()}),PT=dl(function(d,p,y){return d+(y?" ":"")+df(p)}),FT=dl(function(d,p,y){return d+(y?" ":"")+p.toUpperCase()}),df=ur("toUpperCase");function ug(d,p,y){return d=xi(d),(p=y?C:p)===C?function ma(rt){return vp.test(rt)}(d)?function Sb(rt){return rt.match(JL)||[]}(d):function NS(rt){return rt.match(Jt)||[]}(d):d.match(p)||[]}var Tu=Un(function(d,p){try{return zo(d,C,p)}catch(y){return ly(y)?y:new un(y)}}),Sy=Sc(function(d,p){return ga(p,function(y){y=Ao(y),sl(d,y,rf(d[y],d))}),d});function kd(d){return function(){return d}}var Ty=hu(),My=hu(!0);function ws(d){return d}function gx(d){return M_("function"==typeof d?d:$o(d,1))}var BT=Un(function(d,p){return function(y){return kh(y,d,p)}}),mx=Un(function(d,p){return function(y){return kh(d,y,p)}});function Dy(d,p,y){var K=rs(p),be=wd(p,K);null==y&&(!Zi(p)||!be.length&&K.length)&&(y=p,p=d,d=this,be=wd(p,rs(p)));var Be=!(Zi(y)&&"chain"in y&&!y.chain),et=Xa(d);return ga(be,function(ct){var pt=p[ct];d[ct]=pt,et&&(d.prototype[ct]=function(){var Rt=this.__chain__;if(Be||Rt){var Ot=d(this.__wrapped__);return(Ot.__actions__=vs(this.__actions__)).push({func:pt,args:arguments,thisArg:d}),Ot.__chain__=Rt,Ot}return pt.apply(d,Qc([this.value()],arguments))})}),d}function pf(){}var jT=$h(lr),UT=$h(OS),MF=$h(el);function yx(d){return pl(d)?a_(Ao(d)):function Kb(d){return function(p){return vc(p,d)}}(d)}var Ry=sw(),VT=sw(!0);function hg(){return[]}function gf(){return!1}var zT=Wh(function(d,p){return d+p},0),El=ow("ceil"),WT=Wh(function(d,p){return d/p},1),Ud=ow("floor"),Oy=Wh(function(d,p){return d*p},1),DF=ow("round"),RF=Wh(function(d,p){return d-p},0);return Oe.after=function XC(d,p){if("function"!=typeof p)throw new fi(_);return d=On(d),function(){if(--d<1)return p.apply(this,arguments)}},Oe.ary=Lw,Oe.assign=Qw,Oe.assignIn=gy,Oe.assignInWith=Su,Oe.assignWith=my,Oe.at=Fd,Oe.before=iy,Oe.bind=rf,Oe.bindAll=Sy,Oe.bindKey=Fw,Oe.castArray=function Hw(){if(!arguments.length)return[];var d=arguments[0];return Ln(d)?d:[d]},Oe.chain=Tc,Oe.chunk=function gw(d,p,y){p=(y?js(d,p,y):p===C)?1:Ki(On(p),0);var K=null==d?0:d.length;if(!K||p<1)return[];for(var be=0,Be=0,et=yt(nu(K/p));be<K;)et[Be++]=Xo(d,be,be+=p);return et},Oe.compact=function Wp(d){for(var p=-1,y=null==d?0:d.length,K=0,be=[];++p<y;){var Be=d[p];Be&&(be[K++]=Be)}return be},Oe.concat=function lF(){var d=arguments.length;if(!d)return[];for(var p=yt(d-1),y=arguments[0],K=d;K--;)p[K-1]=arguments[K];return Qc(Ln(y)?vs(y):[y],Mr(p,1))},Oe.cond=function Cy(d){var p=null==d?0:d.length,y=yn();return d=p?lr(d,function(K){if("function"!=typeof K[1])throw new fi(_);return[y(K[0]),K[1]]}):[],Un(function(K){for(var be=-1;++be<p;){var Be=d[be];if(zo(Be[0],this,K))return zo(Be[1],this,K)}})},Oe.conforms=function hf(d){return function Bb(d){var p=rs(d);return function(y){return au(y,d,p)}}($o(d,1))},Oe.constant=kd,Oe.countBy=Dw,Oe.create=function pT(d,p){var y=iu(d);return null==p?y:Tn(y,p)},Oe.curry=function Bw(d,p,y){var K=hl(d,8,C,C,C,C,C,p=y?C:p);return K.placeholder=Bw.placeholder,K},Oe.curryRight=function kw(d,p,y){var K=hl(d,16,C,C,C,C,C,p=y?C:p);return K.placeholder=kw.placeholder,K},Oe.debounce=ry,Oe.defaults=gT,Oe.defaultsDeep=vF,Oe.defer=KC,Oe.delay=JC,Oe.difference=W_,Oe.differenceBy=EC,Oe.differenceWith=$_,Oe.drop=function mw(d,p,y){var K=null==d?0:d.length;return K?Xo(d,(p=y||p===C?1:On(p))<0?0:p,K):[]},Oe.dropRight=function _w(d,p,y){var K=null==d?0:d.length;return K?Xo(d,0,(p=K-(p=y||p===C?1:On(p)))<0?0:p):[]},Oe.dropRightWhile=function vu(d,p){return d&&d.length?cl(d,yn(p,3),!0,!0):[]},Oe.dropWhile=function AC(d,p){return d&&d.length?cl(d,yn(p,3),!0):[]},Oe.fill=function Y_(d,p,y,K){var be=null==d?0:d.length;return be?(y&&"number"!=typeof y&&js(d,p,y)&&(y=0,K=be),function si(d,p,y,K){var be=d.length;for((y=On(y))<0&&(y=-y>be?0:be+y),(K=K===C||K>be?be:On(K))<0&&(K+=be),K=y>K?0:Jw(K);y<K;)d[y++]=p;return d}(d,p,y,K)):[]},Oe.filter=function GC(d,p){return(Ln(d)?Wo:bd)(d,yn(p,3))},Oe.flatMap=function pF(d,p){return Mr(bu(d,p),1)},Oe.flatMapDeep=function gF(d,p){return Mr(bu(d,p),Ce)},Oe.flatMapDepth=function ty(d,p,y){return y=y===C?1:On(y),Mr(bu(d,p),y)},Oe.flatten=$p,Oe.flattenDeep=function Yp(d){return null!=d&&d.length?Mr(d,Ce):[]},Oe.flattenDepth=function xa(d,p){return null!=d&&d.length?Mr(d,p=p===C?1:On(p)):[]},Oe.flip=function so(d){return hl(d,512)},Oe.flow=Ty,Oe.flowRight=My,Oe.fromPairs=function Dd(d){for(var p=-1,y=null==d?0:d.length,K={};++p<y;){var be=d[p];K[be[0]]=be[1]}return K},Oe.functions=function Cu(d){return null==d?[]:wd(d,rs(d))},Oe.functionsIn=function _T(d){return null==d?[]:wd(d,oo(d))},Oe.groupBy=mF,Oe.initial=function CC(d){return null!=d&&d.length?Xo(d,0,-1):[]},Oe.intersection=vw,Oe.intersectionBy=Rd,Oe.intersectionWith=TC,Oe.invert=vT,Oe.invertBy=To,Oe.invokeMap=yF,Oe.iteratee=gx,Oe.keyBy=YC,Oe.keys=rs,Oe.keysIn=oo,Oe.map=bu,Oe.mapKeys=function bT(d,p){var y={};return p=yn(p,3),io(d,function(K,be,Be){sl(y,p(K,be,Be),K)}),y},Oe.mapValues=function wT(d,p){var y={};return p=yn(p,3),io(d,function(K,be,Be){sl(y,be,p(K,be,Be))}),y},Oe.matches=function Iy(d){return ys($o(d,1))},Oe.matchesProperty=function ff(d,p){return al(d,$o(p,1))},Oe.memoize=Nd,Oe.merge=xT,Oe.mergeWith=ix,Oe.method=BT,Oe.methodOf=mx,Oe.mixin=Dy,Oe.negate=sf,Oe.nthArg=function _x(d){return d=On(d),Un(function(p){return qb(p,d)})},Oe.omit=rx,Oe.omitBy=function ET(d,p){return sx(d,sf(yn(p)))},Oe.once=function sy(d){return iy(2,d)},Oe.orderBy=function Qp(d,p,y,K){return null==d?[]:(Ln(p)||(p=null==p?[]:[p]),Ln(y=K?C:y)||(y=null==y?[]:[y]),Xb(d,p,y))},Oe.over=jT,Oe.overArgs=Rs,Oe.overEvery=UT,Oe.overSome=MF,Oe.partial=wu,Oe.partialRight=oy,Oe.partition=ny,Oe.pick=AT,Oe.pickBy=sx,Oe.property=yx,Oe.propertyOf=function dg(d){return function(p){return null==d?C:vc(d,p)}},Oe.pull=X_,Oe.pullAll=K_,Oe.pullAllBy=function IC(d,p,y){return d&&d.length&&p&&p.length?xd(d,p,yn(y,2)):d},Oe.pullAllWith=function DC(d,p,y){return d&&d.length&&p&&p.length?xd(d,p,C,y):d},Oe.pullAt=bw,Oe.range=Ry,Oe.rangeRight=VT,Oe.rearg=jw,Oe.reject=function nf(d,p){return(Ln(d)?Wo:bd)(d,sf(yn(p,3)))},Oe.remove=function RC(d,p){var y=[];if(!d||!d.length)return y;var K=-1,be=[],Be=d.length;for(p=yn(p,3);++K<Be;){var et=d[K];p(et,K,d)&&(y.push(et),be.push(K))}return xc(d,be),y},Oe.rest=function ZC(d,p){if("function"!=typeof d)throw new fi(_);return Un(d,p=p===C?p:On(p))},Oe.reverse=Xp,Oe.sampleSize=function Pw(d,p,y){return p=(y?js(d,p,y):p===C)?1:On(p),(Ln(d)?Nb:Jb)(d,p)},Oe.set=function ag(d,p,y){return null==d?d:Ad(d,p,y)},Oe.setWith=function Mc(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:Ad(d,p,y,K)},Oe.shuffle=function Nw(d){return(Ln(d)?Lb:Vh)(d)},Oe.slice=function OC(d,p,y){var K=null==d?0:d.length;return K?(y&&"number"!=typeof y&&js(d,p,y)?(p=0,y=K):(p=null==p?0:On(p),y=y===C?K:On(y)),Xo(d,p,y)):[]},Oe.sortBy=bl,Oe.sortedUniq=function _l(d){return d&&d.length?Qb(d):[]},Oe.sortedUniqBy=function Kp(d,p){return d&&d.length?Qb(d,yn(p,2)):[]},Oe.split=function OT(d,p,y){return y&&"number"!=typeof y&&js(d,p,y)&&(p=y=C),(y=y===C?de:y>>>0)?(d=xi(d))&&("string"==typeof p||null!=p&&!dy(p))&&!(p=Ko(p))&&fd(d)?ul(_a(d),0,y):d.split(p,y):[]},Oe.spread=function Uw(d,p){if("function"!=typeof d)throw new fi(_);return p=null==p?0:Ki(On(p),0),Un(function(y){var K=y[p],be=ul(y,0,p);return K&&Qc(be,K),zo(d,this,be)})},Oe.tail=function Ew(d){var p=null==d?0:d.length;return p?Xo(d,1,p):[]},Oe.take=function Qh(d,p,y){return d&&d.length?Xo(d,0,(p=y||p===C?1:On(p))<0?0:p):[]},Oe.takeRight=function NC(d,p,y){var K=null==d?0:d.length;return K?Xo(d,(p=K-(p=y||p===C?1:On(p)))<0?0:p,K):[]},Oe.takeRightWhile=function LC(d,p){return d&&d.length?cl(d,yn(p,3),!1,!0):[]},Oe.takeWhile=function Z_(d,p){return d&&d.length?cl(d,yn(p,3)):[]},Oe.tap=function Q_(d,p){return p(d),d},Oe.throttle=function QC(d,p,y){var K=!0,be=!0;if("function"!=typeof d)throw new fi(_);return Zi(y)&&(K="leading"in y?!!y.leading:K,be="trailing"in y?!!y.trailing:be),ry(d,p,{leading:K,maxWait:p,trailing:be})},Oe.thru=ef,Oe.toArray=py,Oe.toPairs=Bd,Oe.toPairsIn=by,Oe.toPath=function bx(d){return Ln(d)?lr(d,Ao):Vs(d)?[d]:vs(zp(xi(d)))},Oe.toPlainObject=Zw,Oe.transform=function ox(d,p,y){var K=Ln(d),be=K||qa(d)||Au(d);if(p=yn(p,4),null==y){var Be=d&&d.constructor;y=be?K?new Be:[]:Zi(d)&&Xa(Be)?iu(pc(d)):{}}return(be?ga:io)(d,function(et,ct,pt){return p(y,et,ct,pt)}),y},Oe.unary=function Vw(d){return Lw(d,1)},Oe.union=FC,Oe.unionBy=yl,Oe.unionWith=Jp,Oe.uniq=function BC(d){return d&&d.length?za(d):[]},Oe.uniqBy=function Aw(d,p){return d&&d.length?za(d,yn(p,2)):[]},Oe.uniqWith=function Ya(d,p){return p="function"==typeof p?p:C,d&&d.length?za(d,C,p):[]},Oe.unset=function ax(d,p){return null==d||lu(d,p)},Oe.unzip=Sw,Oe.unzipWith=Cc,Oe.update=function bF(d,p,y){return null==d?d:ew(d,p,kp(y))},Oe.updateWith=function wF(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:ew(d,p,kp(y),K)},Oe.values=lf,Oe.valuesIn=function wy(d){return null==d?[]:Th(d,oo(d))},Oe.without=Cw,Oe.words=ug,Oe.wrap=function eT(d,p){return wu(kp(p),d)},Oe.xor=kC,Oe.xorBy=jC,Oe.xorWith=UC,Oe.zip=VC,Oe.zipObject=function Tw(d,p){return rC(d||[],p||[],yc)},Oe.zipObjectDeep=function Pd(d,p){return rC(d||[],p||[],Ad)},Oe.zipWith=So,Oe.entries=Bd,Oe.entriesIn=by,Oe.extend=gy,Oe.extendWith=Su,Dy(Oe,Oe),Oe.add=zT,Oe.attempt=Tu,Oe.camelCase=cx,Oe.capitalize=lx,Oe.ceil=El,Oe.clamp=function xy(d,p,y){return y===C&&(y=p,p=C),y!==C&&(y=(y=Co(y))==y?y:0),p!==C&&(p=(p=Co(p))==p?p:0),ou(Co(d),p,y)},Oe.clone=function tT(d){return $o(d,4)},Oe.cloneDeep=function ay(d){return $o(d,5)},Oe.cloneDeepWith=function cy(d,p){return $o(d,5,p="function"==typeof p?p:C)},Oe.cloneWith=function nT(d,p){return $o(d,4,p="function"==typeof p?p:C)},Oe.conformsTo=function iT(d,p){return null==p||au(d,p,rs(p))},Oe.deburr=ux,Oe.defaultTo=function jd(d,p){return null==d||d!=d?p:d},Oe.divide=WT,Oe.endsWith=function CT(d,p,y){d=xi(d),p=Ko(p);var K=d.length,be=y=y===C?K:ou(On(y),0,K);return(y-=p.length)>=0&&d.slice(y,be)==p},Oe.eq=Us,Oe.escape=function TT(d){return(d=xi(d))&&vi.test(d)?d.replace(Jr,LS):d},Oe.escapeRegExp=function dx(d){return(d=xi(d))&&Ze.test(d)?d.replace($e,"\\$&"):d},Oe.every=function fF(d,p,y){var K=Ln(d)?OS:ZS;return y&&js(d,p,y)&&(p=C),K(d,yn(p,3))},Oe.find=zC,Oe.findIndex=Zh,Oe.findKey=function mT(d,p){return ut(d,yn(p,3),io)},Oe.findLast=ey,Oe.findLastIndex=yw,Oe.findLastKey=function og(d,p){return ut(d,yn(p,3),Yo)},Oe.floor=Ud,Oe.forEach=WC,Oe.forEachRight=$C,Oe.forIn=function _y(d,p){return null==d?d:wi(d,yn(p,3),oo)},Oe.forInRight=function ex(d,p){return null==d?d:A_(d,yn(p,3),oo)},Oe.forOwn=function tx(d,p){return d&&io(d,yn(p,3))},Oe.forOwnRight=function nx(d,p){return d&&Yo(d,yn(p,3))},Oe.get=yy,Oe.gt=rT,Oe.gte=sT,Oe.has=function yT(d,p){return null!=d&&lw(d,p,Bs)},Oe.hasIn=vy,Oe.head=qp,Oe.identity=ws,Oe.includes=function _F(d,p,y,K){d=Gr(d)?d:lf(d),y=y&&!K?On(y):0;var be=d.length;return y<0&&(y=Ki(be+y,0)),af(d)?y<=be&&d.indexOf(p,y)>-1:!!be&&Vt(d,p,y)>-1},Oe.indexOf=function SC(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=null==y?0:On(y);return be<0&&(be=Ki(K+be,0)),Vt(d,p,be)},Oe.inRange=function xF(d,p,y){return p=Ea(p),y===C?(y=p,p=0):y=Ea(y),function Vb(d,p,y){return d>=Hr(p,y)&&d<Ki(p,y)}(d=Co(d),p,y)},Oe.invoke=Ka,Oe.isArguments=wl,Oe.isArray=Ln,Oe.isArrayBuffer=Gw,Oe.isArrayLike=Gr,Oe.isArrayLikeObject=dr,Oe.isBoolean=function zw(d){return!0===d||!1===d||Er(d)&&ro(d)==A},Oe.isBuffer=qa,Oe.isDate=ig,Oe.isElement=function oT(d){return Er(d)&&1===d.nodeType&&!xl(d)},Oe.isEmpty=function aT(d){if(null==d)return!0;if(Gr(d)&&(Ln(d)||"string"==typeof d||"function"==typeof d.splice||qa(d)||Au(d)||wl(d)))return!d.length;var p=ks(d);if(p==ne||p==Re)return!d.size;if(_u(d))return!Pp(d).length;for(var y in d)if(Xn.call(d,y))return!1;return!0},Oe.isEqual=function cT(d,p){return cu(d,p)},Oe.isEqualWith=function lT(d,p,y){var K=(y="function"==typeof y?y:C)?y(d,p):C;return K===C?cu(d,p,C,y):!!K},Oe.isError=ly,Oe.isFinite=function uT(d){return"number"==typeof d&&ns(d)},Oe.isFunction=Xa,Oe.isInteger=Ld,Oe.isLength=xu,Oe.isMap=Ww,Oe.isMatch=function uy(d,p){return d===p||jh(d,p,Gp(p))},Oe.isMatchWith=function $w(d,p,y){return y="function"==typeof y?y:C,jh(d,p,Gp(p),y)},Oe.isNaN=function Eu(d){return hT(d)&&d!=+d},Oe.isNative=function Yw(d){if(dw(d))throw new un("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Gb(d)},Oe.isNil=function dT(d){return null==d},Oe.isNull=function qw(d){return null===d},Oe.isNumber=hT,Oe.isObject=Zi,Oe.isObjectLike=Er,Oe.isPlainObject=xl,Oe.isRegExp=dy,Oe.isSafeInteger=function Xw(d){return Ld(d)&&d>=-je&&d<=je},Oe.isSet=hy,Oe.isString=af,Oe.isSymbol=Vs,Oe.isTypedArray=Au,Oe.isUndefined=function rg(d){return d===C},Oe.isWeakMap=function cf(d){return Er(d)&&ks(d)==mt},Oe.isWeakSet=function Kw(d){return Er(d)&&"[object WeakSet]"==ro(d)},Oe.join=function MC(d,p){return null==d?"":is.call(d,p)},Oe.kebabCase=cg,Oe.last=Zo,Oe.lastIndexOf=function q_(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=K;return y!==C&&(be=(be=On(y))<0?Ki(K+be,0):Hr(be,K-1)),p==p?function jS(rt,At,yt){for(var Xt=yt+1;Xt--;)if(rt[Xt]===At)return Xt;return Xt}(d,p,be):Ch(d,Cp,be,!0)},Oe.lowerCase=hx,Oe.lowerFirst=Ey,Oe.lt=fy,Oe.lte=sg,Oe.max=function ui(d){return d&&d.length?Mt(d,ws,Op):C},Oe.maxBy=function $T(d,p){return d&&d.length?Mt(d,yn(p,2),Op):C},Oe.mean=function wx(d){return ld(d,ws)},Oe.meanBy=function Ic(d,p){return ld(d,yn(p,2))},Oe.min=function qT(d){return d&&d.length?Mt(d,ws,Uh):C},Oe.minBy=function XT(d,p){return d&&d.length?Mt(d,yn(p,2),Uh):C},Oe.stubArray=hg,Oe.stubFalse=gf,Oe.stubObject=function fg(){return{}},Oe.stubString=function HT(){return""},Oe.stubTrue=function vx(){return!0},Oe.multiply=Oy,Oe.nth=function Od(d,p){return d&&d.length?qb(d,On(p)):C},Oe.noConflict=function kT(){return es._===this&&(es._=Rn),this},Oe.noop=pf,Oe.now=ng,Oe.pad=function MT(d,p,y){d=xi(d);var K=(p=On(p))?pd(d):0;if(!p||K>=p)return d;var be=(p-K)/2;return Ac(mc(be),y)+d+Ac(nu(be),y)},Oe.padEnd=function bs(d,p,y){d=xi(d);var K=(p=On(p))?pd(d):0;return p&&K<p?d+Ac(p-K,y):d},Oe.padStart=function IT(d,p,y){d=xi(d);var K=(p=On(p))?pd(d):0;return p&&K<p?Ac(p-K,y)+d:d},Oe.parseInt=function DT(d,p,y){return y||null==p?p=0:p&&(p=+p),f_(xi(d).replace(St,""),p||0)},Oe.random=function EF(d,p,y){if(y&&"boolean"!=typeof y&&js(d,p,y)&&(p=y=C),y===C&&("boolean"==typeof p?(y=p,p=C):"boolean"==typeof d&&(y=d,d=C)),d===C&&p===C?(d=0,p=1):(d=Ea(d),p===C?(p=d,d=0):p=Ea(p)),d>p){var K=d;d=p,p=K}if(y||d%1||p%1){var be=Cb();return Hr(d+be*(p-d+ni("1e-"+((be+"").length-1))),p)}return D_(d,p)},Oe.reduce=function Rw(d,p,y){var K=Ln(d)?o_:vb,be=arguments.length<3;return K(d,yn(p,4),y,be,ol)},Oe.reduceRight=function Ow(d,p,y){var K=Ln(d)?yb:vb,be=arguments.length<3;return K(d,yn(p,4),y,be,jb)},Oe.repeat=function Ay(d,p,y){return p=(y?js(d,p,y):p===C)?1:On(p),Ed(xi(d),p)},Oe.replace=function fx(){var d=arguments,p=xi(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Oe.result=function ST(d,p,y){var K=-1,be=(p=ll(p,d)).length;for(be||(be=1,d=C);++K<be;){var Be=null==d?C:d[Ao(p[K])];Be===C&&(K=be,Be=y),d=Xa(Be)?Be.call(d):Be}return d},Oe.round=DF,Oe.runInContext=rt,Oe.sample=function qC(d){return(Ln(d)?Pb:R_)(d)},Oe.size=function eg(d){if(null==d)return 0;if(Gr(d))return af(d)?pd(d):d.length;var p=ks(d);return p==ne||p==Re?d.size:Pp(d).length},Oe.snakeCase=RT,Oe.some=function tg(d,p,y){var K=Ln(d)?el:O_;return y&&js(d,p,y)&&(p=C),K(d,yn(p,3))},Oe.sortedIndex=function PC(d,p){return Lp(d,p)},Oe.sortedIndexBy=function uF(d,p,y){return P_(d,p,yn(y,2))},Oe.sortedIndexOf=function ww(d,p){var y=null==d?0:d.length;if(y){var K=Lp(d,p);if(K<y&&Us(d[K],p))return K}return-1},Oe.sortedLastIndex=function xw(d,p){return Lp(d,p,!0)},Oe.sortedLastIndexBy=function Ji(d,p,y){return P_(d,p,yn(y,2),!0)},Oe.sortedLastIndexOf=function J_(d,p){if(null!=d&&d.length){var K=Lp(d,p,!0)-1;if(Us(d[K],p))return K}return-1},Oe.startCase=PT,Oe.startsWith=function NT(d,p,y){return d=xi(d),y=null==y?0:ou(On(y),0,d.length),p=Ko(p),d.slice(y,y+p.length)==p},Oe.subtract=RF,Oe.sum=function OF(d){return d&&d.length?ud(d,ws):0},Oe.sumBy=function KT(d,p){return d&&d.length?ud(d,yn(p,2)):0},Oe.template=function px(d,p,y){var K=Oe.templateSettings;y&&js(d,p,y)&&(p=C),d=xi(d),p=Su({},p,K,pu);var ct,pt,be=Su({},p.imports,K.imports,pu),Be=rs(be),et=Th(be,Be),Rt=0,Ot=p.interpolate||Li,Bt="__p += '",Yt=u_((p.escape||Li).source+"|"+Ot.source+"|"+(Ot===ka?dc:Li).source+"|"+(p.evaluate||Li).source+"|$","g"),cn="//# sourceURL="+(Xn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pb+"]")+"\n";d.replace(Yt,function(An,zn,di,ao,zr,Mo){return di||(di=ao),Bt+=d.slice(Rt,Mo).replace(ye,xb),zn&&(ct=!0,Bt+="' +\n__e("+zn+") +\n'"),zr&&(pt=!0,Bt+="';\n"+zr+";\n__p += '"),di&&(Bt+="' +\n((__t = ("+di+")) == null ? '' : __t) +\n'"),Rt=Mo+An.length,An}),Bt+="';\n";var Cn=Xn.call(p,"variable")&&p.variable;if(Cn){if(Js.test(Cn))throw new un("Invalid `variable` option passed into `_.template`")}else Bt="with (obj) {\n"+Bt+"\n}\n";Bt=(pt?Bt.replace(wn,""):Bt).replace(ji,"$1").replace(Ks,"$1;"),Bt="function("+(Cn||"obj")+") {\n"+(Cn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ct?", __e = _.escape":"")+(pt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Bt+"return __p\n}";var Gn=Tu(function(){return pi(Be,cn+"return "+Bt).apply(C,et)});if(Gn.source=Bt,ly(Gn))throw Gn;return Gn},Oe.times=function GT(d,p){if((d=On(d))<1||d>je)return[];var y=de,K=Hr(d,de);p=yn(p),d-=de;for(var be=vo(K,p);++y<d;)p(y);return be},Oe.toFinite=Ea,Oe.toInteger=On,Oe.toLength=Jw,Oe.toLower=function AF(d){return xi(d).toLowerCase()},Oe.toNumber=Co,Oe.toSafeInteger=function fT(d){return d?ou(On(d),-je,je):0===d?d:0},Oe.toString=xi,Oe.toUpper=function SF(d){return xi(d).toUpperCase()},Oe.trim=function uf(d,p,y){if((d=xi(d))&&(y||p===C))return hi(d);if(!d||!(p=Ko(p)))return d;var K=_a(d),be=_a(p);return ul(K,l_(K,be),hd(K,be)+1).join("")},Oe.trimEnd=function LT(d,p,y){if((d=xi(d))&&(y||p===C))return d.slice(0,Fi(d)+1);if(!d||!(p=Ko(p)))return d;var K=_a(d);return ul(K,0,hd(K,_a(p))+1).join("")},Oe.trimStart=function CF(d,p,y){if((d=xi(d))&&(y||p===C))return d.replace(St,"");if(!d||!(p=Ko(p)))return d;var K=_a(d);return ul(K,l_(K,_a(p))).join("")},Oe.truncate=function TF(d,p){var y=30,K="...";if(Zi(p)){var be="separator"in p?p.separator:be;y="length"in p?On(p.length):y,K="omission"in p?Ko(p.omission):K}var Be=(d=xi(d)).length;if(fd(d)){var et=_a(d);Be=et.length}if(y>=Be)return d;var ct=y-pd(K);if(ct<1)return K;var pt=et?ul(et,0,ct).join(""):d.slice(0,ct);if(be===C)return pt+K;if(et&&(ct+=pt.length-ct),dy(be)){if(d.slice(ct).search(be)){var Rt,Ot=pt;for(be.global||(be=u_(be.source,xi(ci.exec(be))+"g")),be.lastIndex=0;Rt=be.exec(Ot);)var Bt=Rt.index;pt=pt.slice(0,Bt===C?ct:Bt)}}else if(d.indexOf(Ko(be),ct)!=ct){var Yt=pt.lastIndexOf(be);Yt>-1&&(pt=pt.slice(0,Yt))}return pt+K},Oe.unescape=function lg(d){return(d=xi(d))&&Vo.test(d)?d.replace(xr,US):d},Oe.uniqueId=function IF(d){var p=++gd;return xi(d)+p},Oe.upperCase=FT,Oe.upperFirst=df,Oe.each=WC,Oe.eachRight=$C,Oe.first=qp,Dy(Oe,function(){var d={};return io(Oe,function(p,y){Xn.call(Oe.prototype,y)||(d[y]=p)}),d}(),{chain:!1}),Oe.VERSION="4.17.21",ga(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Oe[d].placeholder=Oe}),ga(["drop","take"],function(d,p){ri.prototype[d]=function(y){y=y===C?1:Ki(On(y),0);var K=this.__filtered__&&!p?new ri(this):this.clone();return K.__filtered__?K.__takeCount__=Hr(y,K.__takeCount__):K.__views__.push({size:Hr(y,de),type:d+(K.__dir__<0?"Right":"")}),K},ri.prototype[d+"Right"]=function(y){return this.reverse()[d](y).reverse()}}),ga(["filter","map","takeWhile"],function(d,p){var y=p+1,K=1==y||3==y;ri.prototype[d]=function(be){var Be=this.clone();return Be.__iteratees__.push({iteratee:yn(be,3),type:y}),Be.__filtered__=Be.__filtered__||K,Be}}),ga(["head","last"],function(d,p){var y="take"+(p?"Right":"");ri.prototype[d]=function(){return this[y](1).value()[0]}}),ga(["initial","tail"],function(d,p){var y="drop"+(p?"":"Right");ri.prototype[d]=function(){return this.__filtered__?new ri(this):this[y](1)}}),ri.prototype.compact=function(){return this.filter(ws)},ri.prototype.find=function(d){return this.filter(d).head()},ri.prototype.findLast=function(d){return this.reverse().find(d)},ri.prototype.invokeMap=Un(function(d,p){return"function"==typeof d?new ri(this):this.map(function(y){return kh(y,d,p)})}),ri.prototype.reject=function(d){return this.filter(sf(yn(d)))},ri.prototype.slice=function(d,p){d=On(d);var y=this;return y.__filtered__&&(d>0||p<0)?new ri(y):(d<0?y=y.takeRight(-d):d&&(y=y.drop(d)),p!==C&&(y=(p=On(p))<0?y.dropRight(-p):y.take(p-d)),y)},ri.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},ri.prototype.toArray=function(){return this.take(de)},io(ri.prototype,function(d,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),K=/^(?:head|last)$/.test(p),be=Oe[K?"take"+("last"==p?"Right":""):p],Be=K||/^find/.test(p);be&&(Oe.prototype[p]=function(){var et=this.__wrapped__,ct=K?[1]:arguments,pt=et instanceof ri,Rt=ct[0],Ot=pt||Ln(et),Bt=function(zn){var di=be.apply(Oe,Qc([zn],ct));return K&&Yt?di[0]:di};Ot&&y&&"function"==typeof Rt&&1!=Rt.length&&(pt=Ot=!1);var Yt=this.__chain__,Cn=Be&&!Yt,Gn=pt&&!this.__actions__.length;if(!Be&&Ot){et=Gn?et:new ri(this);var An=d.apply(et,ct);return An.__actions__.push({func:ef,args:[Bt],thisArg:C}),new ba(An,Yt)}return Cn&&Gn?d.apply(this,ct):(An=this.thru(Bt),Cn?K?An.value()[0]:An.value():An)})}),ga(["pop","push","shift","sort","splice","unshift"],function(d){var p=Ht[d],y=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",K=/^(?:pop|shift)$/.test(d);Oe.prototype[d]=function(){var be=arguments;if(K&&!this.__chain__){var Be=this.value();return p.apply(Ln(Be)?Be:[],be)}return this[y](function(et){return p.apply(Ln(et)?et:[],be)})}}),io(ri.prototype,function(d,p){var y=Oe[p];if(y){var K=y.name+"";Xn.call(Ph,K)||(Ph[K]=[]),Ph[K].push({name:p,func:y})}}),Ph[Ec(C,2).name]=[{name:"wrapper",func:C}],ri.prototype.clone=function sF(){var d=new ri(this.__wrapped__);return d.__actions__=vs(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=vs(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=vs(this.__views__),d},ri.prototype.reverse=function ru(){if(this.__filtered__){var d=new ri(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},ri.prototype.value=function Tb(){var d=this.__wrapped__.value(),p=this.__dir__,y=Ln(d),K=p<0,be=y?d.length:0,Be=function cw(d,p,y){for(var K=-1,be=y.length;++K<be;){var Be=y[K],et=Be.size;switch(Be.type){case"drop":d+=et;break;case"dropRight":p-=et;break;case"take":p=Hr(p,d+et);break;case"takeRight":d=Ki(d,p-et)}}return{start:d,end:p}}(0,be,this.__views__),et=Be.start,ct=Be.end,pt=ct-et,Rt=K?ct:et-1,Ot=this.__iteratees__,Bt=Ot.length,Yt=0,cn=Hr(pt,this.__takeCount__);if(!y||!K&&be==pt&&cn==pt)return Fp(d,this.__actions__);var Cn=[];e:for(;pt--&&Yt<cn;){for(var Gn=-1,An=d[Rt+=p];++Gn<Bt;){var zn=Ot[Gn],ao=zn.type,zr=(0,zn.iteratee)(An);if(2==ao)An=zr;else if(!zr){if(1==ao)continue e;break e}}Cn[Yt++]=An}return Cn},Oe.prototype.at=vl,Oe.prototype.chain=function tf(){return Tc(this)},Oe.prototype.commit=function dF(){return new ba(this.value(),this.__chain__)},Oe.prototype.next=function Zp(){this.__values__===C&&(this.__values__=py(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?C:this.__values__[this.__index__++]}},Oe.prototype.plant=function HC(d){for(var p,y=this;y instanceof __;){var K=z_(y);K.__index__=0,K.__values__=C,p?be.__wrapped__=K:p=K;var be=K;y=y.__wrapped__}return be.__wrapped__=d,p},Oe.prototype.reverse=function Iw(){var d=this.__wrapped__;if(d instanceof ri){var p=d;return this.__actions__.length&&(p=new ri(this)),(p=p.reverse()).__actions__.push({func:ef,args:[Xp],thisArg:C}),new ba(p,this.__chain__)}return this.thru(Xp)},Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=function hF(){return Fp(this.__wrapped__,this.__actions__)},Oe.prototype.first=Oe.prototype.head,il&&(Oe.prototype[il]=function Mw(){return this}),Oe}();es._=Ur,(Q=function(){return Ur}.call(_e,S,_e,Ue))!==C&&(Ue.exports=Q)}.call(this)},5249:(Ue,_e,S)=>{var Q=S(549),C=Q.ARRAY_BUFFER_SUPPORT,$=Q.SYMBOL_SUPPORT;Ue.exports=function(q,_){var E,N,z,P,F;if(!q)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(q)||C&&ArrayBuffer.isView(q)||"string"==typeof q||"[object Arguments]"===q.toString())for(z=0,P=q.length;z<P;z++)_(q[z],z);else if("function"!=typeof q.forEach)if($&&Symbol.iterator in q&&"function"!=typeof q.next&&(q=q[Symbol.iterator]()),"function"!=typeof q.next)for(N in q)q.hasOwnProperty(N)&&_(q[N],N);else for(E=q,z=0;!0!==(F=E.next()).done;)_(F.value,z),z++;else q.forEach(_)}},2508:Ue=>{function _e(S){if("function"!=typeof S)throw new Error("obliterator/iterator: expecting a function!");this.next=S}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this}),_e.of=function(){var S=arguments,Q=S.length,C=0;return new _e(function(){return C>=Q?{done:!0}:{done:!1,value:S[C++]}})},_e.empty=function(){return new _e(function(){return{done:!0}})},_e.fromSequence=function(S){var Q=0,C=S.length;return new _e(function(){return Q>=C?{done:!0}:{done:!1,value:S[Q++]}})},_e.is=function(S){return S instanceof _e||"object"==typeof S&&null!==S&&"function"==typeof S.next},Ue.exports=_e},549:(Ue,_e)=>{_e.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",_e.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(Ue,_e,S)=>{var Q=S(2508),C=S(5249);function $(){this.clear()}$.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},$.prototype.enqueue=function(G){return this.items.push(G),++this.size},$.prototype.dequeue=function(){if(this.size){var G=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,G}},$.prototype.peek=function(){if(this.size)return this.items[this.offset]},$.prototype.forEach=function(G,q){q=arguments.length>1?q:this;for(var _=this.offset,E=0,N=this.items.length;_<N;_++,E++)G.call(q,this.items[_],E,this)},$.prototype.toArray=function(){return this.items.slice(this.offset)},$.prototype.values=function(){var G=this.items,q=this.offset;return new Q(function(){if(q>=G.length)return{done:!0};var _=G[q];return q++,{value:_,done:!1}})},$.prototype.entries=function(){var G=this.items,q=this.offset,_=0;return new Q(function(){if(q>=G.length)return{done:!0};var E=G[q];return q++,{value:[_++,E],done:!1}})},typeof Symbol<"u"&&($.prototype[Symbol.iterator]=$.prototype.values),$.prototype.toString=function(){return this.toArray().join(",")},$.prototype.toJSON=function(){return this.toArray()},$.prototype.inspect=function(){var G=this.toArray();return Object.defineProperty(G,"constructor",{value:$,enumerable:!1}),G},typeof Symbol<"u"&&($.prototype[Symbol.for("nodejs.util.inspect.custom")]=$.prototype.inspect),$.from=function(G){var q=new $;return C(G,function(_){q.enqueue(_)}),q},$.of=function(){return $.from(arguments)},Ue.exports=$},5020:Ue=>{Ue.exports=function _e(S,Q,C){function $(_,E){if(!Q[_]){if(!S[_]){if(G)return G(_,!0);throw new Error("Cannot find module '"+_+"'")}E=Q[_]={exports:{}},S[_][0].call(E.exports,function(z){return $(S[_][1][z]||z)},E,E.exports,_e,S,Q,C)}return Q[_].exports}for(var G=void 0,q=0;q<C.length;q++)$(C[q]);return $}({1:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){"use strict";var F=_e("crypto");function oe(W,k){var v;return void 0===(v="passthrough"!==(k=se(W,k)).algorithm?F.createHash(k.algorithm):new ee).write&&(v.write=v.update,v.end=v.update),J(k,v).dispatch(W),v.update||v.end(""),v.digest?v.digest("buffer"===k.encoding?void 0:k.encoding):(W=v.read(),"buffer"!==k.encoding?W.toString(k.encoding):W)}(Q=S.exports=oe).sha1=function(W){return oe(W)},Q.keys=function(W){return oe(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},Q.MD5=function(W){return oe(W,{algorithm:"md5",encoding:"hex"})},Q.keysMD5=function(W){return oe(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=F.getHashes?F.getHashes().slice():["sha1","md5"],B=(x.push("passthrough"),["buffer","hex","binary","base64"]);function se(W,k){var v={};if(v.algorithm=(k=k||{}).algorithm||"sha1",v.encoding=k.encoding||"hex",v.excludeValues=!!k.excludeValues,v.algorithm=v.algorithm.toLowerCase(),v.encoding=v.encoding.toLowerCase(),v.ignoreUnknown=!0===k.ignoreUnknown,v.respectType=!1!==k.respectType,v.respectFunctionNames=!1!==k.respectFunctionNames,v.respectFunctionProperties=!1!==k.respectFunctionProperties,v.unorderedArrays=!0===k.unorderedArrays,v.unorderedSets=!1!==k.unorderedSets,v.unorderedObjects=!1!==k.unorderedObjects,v.replacer=k.replacer||void 0,v.excludeKeys=k.excludeKeys||void 0,void 0===W)throw new Error("Object argument required.");for(var I=0;I<x.length;++I)x[I].toLowerCase()===v.algorithm.toLowerCase()&&(v.algorithm=x[I]);if(-1===x.indexOf(v.algorithm))throw new Error('Algorithm "'+v.algorithm+'"  not supported. supported values: '+x.join(", "));if(-1===B.indexOf(v.encoding)&&"passthrough"!==v.algorithm)throw new Error('Encoding "'+v.encoding+'"  not supported. supported values: '+B.join(", "));return v}function Y(W){if("function"==typeof W)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))}function J(W,k,v){function I(T){return k.update?k.update(T,"utf8"):k.write(T,"utf8")}return v=v||[],{dispatch:function(T){return this["_"+(null===(T=W.replacer?W.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var le,j=Object.prototype.toString.call(T),Me=/\[object (.*)\]/i.exec(j);if(Me=(Me=Me?Me[1]:"unknown:["+j+"]").toLowerCase(),0<=(j=v.indexOf(T)))return this.dispatch("[CIRCULAR:"+j+"]");if(v.push(T),void 0!==G&&G.isBuffer&&G.isBuffer(T))return I("buffer:"),I(T);if("object"===Me||"function"===Me||"asyncfunction"===Me)return j=Object.keys(T),W.unorderedObjects&&(j=j.sort()),!1===W.respectType||Y(T)||j.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(j=j.filter(function(ae){return!W.excludeKeys(ae)})),I("object:"+j.length+":"),le=this,j.forEach(function(ae){le.dispatch(ae),I(":"),W.excludeValues||le.dispatch(T[ae]),I(",")});if(!this["_"+Me]){if(W.ignoreUnknown)return I("["+Me+"]");throw new Error('Unknown object type "'+Me+'"')}this["_"+Me](T)},_array:function(T,ae){ae=void 0!==ae?ae:!1!==W.unorderedArrays;var j=this;if(I("array:"+T.length+":"),!ae||T.length<=1)return T.forEach(function(xe){return j.dispatch(xe)});var Me=[];return ae=T.map(function(xe){var Pe=new ee,He=v.slice();return J(W,Pe,He).dispatch(xe),Me=Me.concat(He.slice(v.length)),Pe.read().toString()}),v=v.concat(Me),ae.sort(),this._array(ae,!1)},_date:function(T){return I("date:"+T.toJSON())},_symbol:function(T){return I("symbol:"+T.toString())},_error:function(T){return I("error:"+T.toString())},_boolean:function(T){return I("bool:"+T.toString())},_string:function(T){I("string:"+T.length+":"),I(T.toString())},_function:function(T){I("fn:"),Y(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==W.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),W.respectFunctionProperties&&this._object(T)},_number:function(T){return I("number:"+T.toString())},_xml:function(T){return I("xml:"+T.toString())},_null:function(){return I("Null")},_undefined:function(){return I("Undefined")},_regexp:function(T){return I("regex:"+T.toString())},_uint8array:function(T){return I("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return I("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return I("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return I("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return I("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return I("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return I("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return I("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return I("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return I("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return I("url:"+T.toString())},_map:function(T){return I("map:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_set:function(T){return I("set:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_file:function(T){return I("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(W.ignoreUnknown)return I("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return I("domwindow")},_bigint:function(T){return I("bigint:"+T.toString())},_process:function(){return I("process")},_timer:function(){return I("timer")},_pipe:function(){return I("pipe")},_tcp:function(){return I("tcp")},_udp:function(){return I("udp")},_tty:function(){return I("tty")},_statwatcher:function(){return I("statwatcher")},_securecontext:function(){return I("securecontext")},_connection:function(){return I("connection")},_zlib:function(){return I("zlib")},_context:function(){return I("context")},_nodescript:function(){return I("nodescript")},_httpparser:function(){return I("httpparser")},_dataview:function(){return I("dataview")},_signal:function(){return I("signal")},_fsevent:function(){return I("fsevent")},_tlswrap:function(){return I("tlswrap")}}}function ee(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}Q.writeToStream=function(W,k,v){return void 0===v&&(v=k,k={}),J(k=se(W,k),v).dispatch(W)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){!function(F){"use strict";var oe=typeof Uint8Array<"u"?Uint8Array:Array,x="+".charCodeAt(0),B="/".charCodeAt(0),se="0".charCodeAt(0),Y="a".charCodeAt(0),J="A".charCodeAt(0),ee="-".charCodeAt(0),W="_".charCodeAt(0);function k(v){return(v=v.charCodeAt(0))===x||v===ee?62:v===B||v===W?63:v<se?-1:v<se+10?v-se+26+26:v<J+26?v-J:v<Y+26?v-Y+26:void 0}F.toByteArray=function(v){var I,T;if(0<v.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var le="="===v.charAt((le=v.length)-2)?2:"="===v.charAt(le-1)?1:0,j=new oe(3*v.length/4-le),Me=0<le?v.length-4:v.length,ae=0;function xe(Pe){j[ae++]=Pe}for(I=0;I<Me;I+=4,0)xe((16711680&(T=k(v.charAt(I))<<18|k(v.charAt(I+1))<<12|k(v.charAt(I+2))<<6|k(v.charAt(I+3))))>>16),xe((65280&T)>>8),xe(255&T);return 2==le?xe(255&(T=k(v.charAt(I))<<2|k(v.charAt(I+1))>>4)):1==le&&(xe((T=k(v.charAt(I))<<10|k(v.charAt(I+1))<<4|k(v.charAt(I+2))>>2)>>8&255),xe(255&T)),j},F.fromByteArray=function(v){var I,T,le,j,Me=v.length%3,ae="";function xe(Pe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Pe)}for(I=0,le=v.length-Me;I<le;I+=3)ae+=xe((j=T=(v[I]<<16)+(v[I+1]<<8)+v[I+2])>>18&63)+xe(j>>12&63)+xe(j>>6&63)+xe(63&j);switch(Me){case 1:ae=(ae+=xe((T=v[v.length-1])>>2))+xe(T<<4&63)+"==";break;case 2:ae=(ae=(ae+=xe((T=(v[v.length-2]<<8)+v[v.length-1])>>10))+xe(T>>4&63))+xe(T<<2&63)+"="}return ae}}(void 0===Q?this.base64js={}:Q)}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(_e,S,Q){(function(C,$,x,q,_,E,N,z,P){var F=_e("base64-js"),oe=_e("ieee754");function x(fe,R,A){if(!(this instanceof x))return new x(fe,R,A);var ie,Z,Ve,Je,ue=typeof fe;if("base64"===R&&"string"==ue)for(fe=(Je=fe).trim?Je.trim():Je.replace(/^\s+|\s+$/g,"");fe.length%4!=0;)fe+="=";if("number"==ue)ie=Qe(fe);else if("string"==ue)ie=x.byteLength(fe,R);else{if("object"!=ue)throw new Error("First argument needs to be a number, array or string.");ie=Qe(fe.length)}if(x._useTypedArrays?Z=x._augment(new Uint8Array(ie)):((Z=this).length=ie,Z._isBuffer=!0),x._useTypedArrays&&"number"==typeof fe.byteLength)Z._set(fe);else if(Xe(Je=fe)||x.isBuffer(Je)||Je&&"object"==typeof Je&&"number"==typeof Je.length)for(Ve=0;Ve<ie;Ve++)Z[Ve]=x.isBuffer(fe)?fe.readUInt8(Ve):fe[Ve];else if("string"==ue)Z.write(fe,0,R);else if("number"==ue&&!x._useTypedArrays&&!A)for(Ve=0;Ve<ie;Ve++)Z[Ve]=0;return Z}function J(fe,R,A,Ve){var Z;if(Ve||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+1<fe.length,"Trying to read beyond buffer length")),!((Ve=fe.length)<=R))return A?(Z=fe[R],R+1<Ve&&(Z|=fe[R+1]<<8)):(Z=fe[R]<<8,R+1<Ve&&(Z|=fe[R+1])),Z}function ee(fe,R,A,Ve){var Z;if(Ve||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),!((Ve=fe.length)<=R))return A?(R+2<Ve&&(Z=fe[R+2]<<16),R+1<Ve&&(Z|=fe[R+1]<<8),Z|=fe[R],R+3<Ve&&(Z+=fe[R+3]<<24>>>0)):(R+1<Ve&&(Z=fe[R+1]<<16),R+2<Ve&&(Z|=fe[R+2]<<8),R+3<Ve&&(Z|=fe[R+3]),Z+=fe[R]<<24>>>0),Z}function W(fe,R,A,ie){if(ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+1<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 32768&(ie=J(fe,R,A,!0))?-1*(65535-ie+1):ie}function k(fe,R,A,ie){if(ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 2147483648&(ie=ee(fe,R,A,!0))?-1*(4294967295-ie+1):ie}function v(fe,R,A,ie){return ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),oe.read(fe,R,A,23,4)}function I(fe,R,A,ie){return ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(R+7<fe.length,"Trying to read beyond buffer length")),oe.read(fe,R,A,52,8)}function T(fe,R,A,ie,Z){if(Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+1<fe.length,"trying to write beyond buffer length"),Ae(R,65535)),!((Z=fe.length)<=A))for(var Ve=0,Je=Math.min(Z-A,2);Ve<Je;Ve++)fe[A+Ve]=(R&255<<8*(ie?Ve:1-Ve))>>>8*(ie?Ve:1-Ve)}function le(fe,R,A,ie,Z){if(Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"trying to write beyond buffer length"),Ae(R,4294967295)),!((Z=fe.length)<=A))for(var Ve=0,Je=Math.min(Z-A,4);Ve<Je;Ve++)fe[A+Ve]=R>>>8*(ie?Ve:3-Ve)&255}function j(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+1<fe.length,"Trying to write beyond buffer length"),nt(R,32767,-32768)),fe.length<=A||T(fe,0<=R?R:65535+R+1,A,ie,Z)}function Me(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"Trying to write beyond buffer length"),nt(R,2147483647,-2147483648)),fe.length<=A||le(fe,0<=R?R:4294967295+R+1,A,ie,Z)}function ae(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"Trying to write beyond buffer length"),_t(R,34028234663852886e22,-34028234663852886e22)),fe.length<=A||oe.write(fe,R,A,ie,23,4)}function xe(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+7<fe.length,"Trying to write beyond buffer length"),_t(R,17976931348623157e292,-17976931348623157e292)),fe.length<=A||oe.write(fe,R,A,ie,52,8)}Q.Buffer=x,Q.SlowBuffer=x,Q.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var fe=new ArrayBuffer(0),R=new Uint8Array(fe);return R.foo=function(){return 42},42===R.foo()&&"function"==typeof R.subarray}catch{return!1}}(),x.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(fe){return!(null==fe||!fe._isBuffer)},x.byteLength=function(fe,R){var A;switch(fe+="",R||"utf8"){case"hex":A=fe.length/2;break;case"utf8":case"utf-8":A=je(fe).length;break;case"ascii":case"binary":case"raw":A=fe.length;break;case"base64":A=Se(fe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=2*fe.length;break;default:throw new Error("Unknown encoding")}return A},x.concat=function(fe,R){if(Ke(Xe(fe),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===fe.length)return new x(0);if(1===fe.length)return fe[0];if("number"!=typeof R)for(Z=R=0;Z<fe.length;Z++)R+=fe[Z].length;for(var A=new x(R),ie=0,Z=0;Z<fe.length;Z++){var Ve=fe[Z];Ve.copy(A,ie),ie+=Ve.length}return A},x.prototype.write=function(fe,R,A,ie){isFinite(R)?isFinite(A)||(ie=A,A=void 0):(ne=ie,ie=R,R=A,A=ne),R=Number(R)||0;var Z,Ve,Je,ue,ne=this.length-R;switch((!A||ne<(A=Number(A)))&&(A=ne),ie=String(ie||"utf8").toLowerCase()){case"hex":Z=function(U,M,O,he){O=Number(O)||0;var We=U.length-O;(!he||We<(he=Number(he)))&&(he=We),Ke((We=M.length)%2==0,"Invalid hex string"),We/2<he&&(he=We/2);for(var Ee=0;Ee<he;Ee++){var Re=parseInt(M.substr(2*Ee,2),16);Ke(!isNaN(Re),"Invalid hex string"),U[O+Ee]=Re}return x._charsWritten=2*Ee,Ee}(this,fe,R,A);break;case"utf8":case"utf-8":Ve=this,Je=R,ue=A,Z=x._charsWritten=ke(je(fe),Ve,Je,ue);break;case"ascii":case"binary":Z=function B(fe,R,A,ie){return x._charsWritten=ke(function(Z){for(var Ve=[],Je=0;Je<Z.length;Je++)Ve.push(255&Z.charCodeAt(Je));return Ve}(R),fe,A,ie)}(this,fe,R,A);break;case"base64":Ve=this,Je=R,ue=A,Z=x._charsWritten=ke(Se(fe),Ve,Je,ue);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Z=function se(fe,R,A,ie){return x._charsWritten=ke(function(Z){for(var Ve,Je,ue=[],ne=0;ne<Z.length;ne++)Ve=(Je=Z.charCodeAt(ne))>>8,ue.push(Je%=256),ue.push(Ve);return ue}(R),fe,A,ie)}(this,fe,R,A);break;default:throw new Error("Unknown encoding")}return Z},x.prototype.toString=function(fe,R,A){var ie,Z,Ve,Je,ue=this;if(fe=String(fe||"utf8").toLowerCase(),R=Number(R)||0,(A=void 0!==A?Number(A):ue.length)===R)return"";switch(fe){case"hex":ie=function(ne,U,M){var O=ne.length;(!U||U<0)&&(U=0),(!M||M<0||O<M)&&(M=O);for(var he="",We=U;We<M;We++)he+=Ce(ne[We]);return he}(ue,R,A);break;case"utf8":case"utf-8":ie=function(ne,U,M){var O="",he="";M=Math.min(ne.length,M);for(var We=U;We<M;We++)ne[We]<=127?(O+=de(he)+String.fromCharCode(ne[We]),he=""):he+="%"+ne[We].toString(16);return O+de(he)}(ue,R,A);break;case"ascii":case"binary":ie=function Y(fe,R,A){var ie="";A=Math.min(fe.length,A);for(var Z=R;Z<A;Z++)ie+=String.fromCharCode(fe[Z]);return ie}(ue,R,A);break;case"base64":Z=ue,Je=A,ie=0===(Ve=R)&&Je===Z.length?F.fromByteArray(Z):F.fromByteArray(Z.slice(Ve,Je));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(ne,U,M){for(var O=ne.slice(U,M),he="",We=0;We<O.length;We+=2)he+=String.fromCharCode(O[We]+256*O[We+1]);return he}(ue,R,A);break;default:throw new Error("Unknown encoding")}return ie},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(fe,R,A,ie){if(R=R||0,(ie=ie||0===ie?ie:this.length)!==(A=A||0)&&0!==fe.length&&0!==this.length){Ke(A<=ie,"sourceEnd < sourceStart"),Ke(0<=R&&R<fe.length,"targetStart out of bounds"),Ke(0<=A&&A<this.length,"sourceStart out of bounds"),Ke(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var Z=(ie=fe.length-R<ie-A?fe.length-R+A:ie)-A;if(Z<100||!x._useTypedArrays)for(var Ve=0;Ve<Z;Ve++)fe[Ve+R]=this[Ve+A];else fe._set(this.subarray(A,A+Z),R)}},x.prototype.slice=function(fe,R){var A=this.length;if(fe=He(fe,A,0),R=He(R,A,A),x._useTypedArrays)return x._augment(this.subarray(fe,R));for(var ie=R-fe,Z=new x(ie,void 0,!0),Ve=0;Ve<ie;Ve++)Z[Ve]=this[Ve+fe];return Z},x.prototype.get=function(fe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(fe)},x.prototype.set=function(fe,R){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(fe,R)},x.prototype.readUInt8=function(fe,R){if(R||(Ke(null!=fe,"missing offset"),Ke(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return this[fe]},x.prototype.readUInt16LE=function(fe,R){return J(this,fe,!0,R)},x.prototype.readUInt16BE=function(fe,R){return J(this,fe,!1,R)},x.prototype.readUInt32LE=function(fe,R){return ee(this,fe,!0,R)},x.prototype.readUInt32BE=function(fe,R){return ee(this,fe,!1,R)},x.prototype.readInt8=function(fe,R){if(R||(Ke(null!=fe,"missing offset"),Ke(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return 128&this[fe]?-1*(255-this[fe]+1):this[fe]},x.prototype.readInt16LE=function(fe,R){return W(this,fe,!0,R)},x.prototype.readInt16BE=function(fe,R){return W(this,fe,!1,R)},x.prototype.readInt32LE=function(fe,R){return k(this,fe,!0,R)},x.prototype.readInt32BE=function(fe,R){return k(this,fe,!1,R)},x.prototype.readFloatLE=function(fe,R){return v(this,fe,!0,R)},x.prototype.readFloatBE=function(fe,R){return v(this,fe,!1,R)},x.prototype.readDoubleLE=function(fe,R){return I(this,fe,!0,R)},x.prototype.readDoubleBE=function(fe,R){return I(this,fe,!1,R)},x.prototype.writeUInt8=function(fe,R,A){A||(Ke(null!=fe,"missing value"),Ke(null!=R,"missing offset"),Ke(R<this.length,"trying to write beyond buffer length"),Ae(fe,255)),R>=this.length||(this[R]=fe)},x.prototype.writeUInt16LE=function(fe,R,A){T(this,fe,R,!0,A)},x.prototype.writeUInt16BE=function(fe,R,A){T(this,fe,R,!1,A)},x.prototype.writeUInt32LE=function(fe,R,A){le(this,fe,R,!0,A)},x.prototype.writeUInt32BE=function(fe,R,A){le(this,fe,R,!1,A)},x.prototype.writeInt8=function(fe,R,A){A||(Ke(null!=fe,"missing value"),Ke(null!=R,"missing offset"),Ke(R<this.length,"Trying to write beyond buffer length"),nt(fe,127,-128)),R>=this.length||this.writeUInt8(0<=fe?fe:255+fe+1,R,A)},x.prototype.writeInt16LE=function(fe,R,A){j(this,fe,R,!0,A)},x.prototype.writeInt16BE=function(fe,R,A){j(this,fe,R,!1,A)},x.prototype.writeInt32LE=function(fe,R,A){Me(this,fe,R,!0,A)},x.prototype.writeInt32BE=function(fe,R,A){Me(this,fe,R,!1,A)},x.prototype.writeFloatLE=function(fe,R,A){ae(this,fe,R,!0,A)},x.prototype.writeFloatBE=function(fe,R,A){ae(this,fe,R,!1,A)},x.prototype.writeDoubleLE=function(fe,R,A){xe(this,fe,R,!0,A)},x.prototype.writeDoubleBE=function(fe,R,A){xe(this,fe,R,!1,A)},x.prototype.fill=function(fe,R,A){if(R=R||0,A=A||this.length,Ke("number"==typeof(fe="string"==typeof(fe=fe||0)?fe.charCodeAt(0):fe)&&!isNaN(fe),"value is not a number"),Ke(R<=A,"end < start"),A!==R&&0!==this.length){Ke(0<=R&&R<this.length,"start out of bounds"),Ke(0<=A&&A<=this.length,"end out of bounds");for(var ie=R;ie<A;ie++)this[ie]=fe}},x.prototype.inspect=function(){for(var fe=[],R=this.length,A=0;A<R;A++)if(fe[A]=Ce(this[A]),A===Q.INSPECT_MAX_BYTES){fe[A+1]="...";break}return"<Buffer "+fe.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var fe=new Uint8Array(this.length),R=0,A=fe.length;R<A;R+=1)fe[R]=this[R];return fe.buffer};var Pe=x.prototype;function He(fe,R,A){return"number"!=typeof fe?A:R<=(fe=~~fe)?R:0<=fe||0<=(fe+=R)?fe:0}function Qe(fe){return(fe=~~Math.ceil(+fe))<0?0:fe}function Xe(fe){return(Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)})(fe)}function Ce(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function je(fe){for(var R=[],A=0;A<fe.length;A++){var ie=fe.charCodeAt(A);if(ie<=127)R.push(fe.charCodeAt(A));else for(var Z=A,Ve=(55296<=ie&&ie<=57343&&A++,encodeURIComponent(fe.slice(Z,A+1)).substr(1).split("%")),Je=0;Je<Ve.length;Je++)R.push(parseInt(Ve[Je],16))}return R}function Se(fe){return F.toByteArray(fe)}function ke(fe,R,A,ie){for(var Z=0;Z<ie&&!(Z+A>=R.length||Z>=fe.length);Z++)R[Z+A]=fe[Z];return Z}function de(fe){try{return decodeURIComponent(fe)}catch{return String.fromCharCode(65533)}}function Ae(fe,R){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(0<=fe,"specified a negative value for writing an unsigned value"),Ke(fe<=R,"value is larger than maximum value for type"),Ke(Math.floor(fe)===fe,"value has a fractional component")}function nt(fe,R,A){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(fe<=R,"value larger than maximum allowed value"),Ke(A<=fe,"value smaller than minimum allowed value"),Ke(Math.floor(fe)===fe,"value has a fractional component")}function _t(fe,R,A){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(fe<=R,"value larger than maximum allowed value"),Ke(A<=fe,"value smaller than minimum allowed value")}function Ke(fe,R){if(!fe)throw new Error(R||"Failed assertion")}x._augment=function(fe){return fe._isBuffer=!0,fe._get=fe.get,fe._set=fe.set,fe.get=Pe.get,fe.set=Pe.set,fe.write=Pe.write,fe.toString=Pe.toString,fe.toLocaleString=Pe.toString,fe.toJSON=Pe.toJSON,fe.copy=Pe.copy,fe.slice=Pe.slice,fe.readUInt8=Pe.readUInt8,fe.readUInt16LE=Pe.readUInt16LE,fe.readUInt16BE=Pe.readUInt16BE,fe.readUInt32LE=Pe.readUInt32LE,fe.readUInt32BE=Pe.readUInt32BE,fe.readInt8=Pe.readInt8,fe.readInt16LE=Pe.readInt16LE,fe.readInt16BE=Pe.readInt16BE,fe.readInt32LE=Pe.readInt32LE,fe.readInt32BE=Pe.readInt32BE,fe.readFloatLE=Pe.readFloatLE,fe.readFloatBE=Pe.readFloatBE,fe.readDoubleLE=Pe.readDoubleLE,fe.readDoubleBE=Pe.readDoubleBE,fe.writeUInt8=Pe.writeUInt8,fe.writeUInt16LE=Pe.writeUInt16LE,fe.writeUInt16BE=Pe.writeUInt16BE,fe.writeUInt32LE=Pe.writeUInt32LE,fe.writeUInt32BE=Pe.writeUInt32BE,fe.writeInt8=Pe.writeInt8,fe.writeInt16LE=Pe.writeInt16LE,fe.writeInt16BE=Pe.writeInt16BE,fe.writeInt32LE=Pe.writeInt32LE,fe.writeInt32BE=Pe.writeInt32BE,fe.writeFloatLE=Pe.writeFloatLE,fe.writeFloatBE=Pe.writeFloatBE,fe.writeDoubleLE=Pe.writeDoubleLE,fe.writeDoubleBE=Pe.writeDoubleBE,fe.fill=Pe.fill,fe.inspect=Pe.inspect,fe.toArrayBuffer=Pe.toArrayBuffer,fe}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(_e,S,Q){(function(C,$,F,q,_,E,N,z,P){F=_e("buffer").Buffer;var x=new F(4);x.fill(0),S.exports={hash:function(B,se,Y,J){for(var ee=se(function(T,le){T.length%4!=0&&(T=F.concat([T,x],T.length+(4-T.length%4)));for(var Me=[],ae=le?T.readInt32BE:T.readInt32LE,xe=0;xe<T.length;xe+=4)Me.push(ae.call(T,xe));return Me}(B=F.isBuffer(B)?B:new F(B),J),8*B.length),W=(se=J,new F(Y)),k=se?W.writeInt32BE:W.writeInt32LE,v=0;v<ee.length;v++)k.call(W,ee[v],4*v,!0);return W}}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(_e,S,Q){(function(C,$,F,q,_,E,N,z,P){F=_e("buffer").Buffer;var oe=_e("./sha"),x=_e("./sha256"),B=_e("./rng"),se={sha1:oe,sha256:x,md5:_e("./md5")},Y=64,J=new F(Y);function ee(T,le){var j=se[T=T||"sha1"],Me=[];return j||W("algorithm:",T,"is not yet supported"),{update:function(ae){return F.isBuffer(ae)||(ae=new F(ae)),Me.push(ae),this},digest:function(ae){var xe=F.concat(Me);return xe=le?function(Pe,He,Qe){F.isBuffer(He)||(He=new F(He)),F.isBuffer(Qe)||(Qe=new F(Qe)),He.length>Y?He=Pe(He):He.length<Y&&(He=F.concat([He,J],Y));for(var Xe=new F(Y),Ce=new F(Y),je=0;je<Y;je++)Xe[je]=54^He[je],Ce[je]=92^He[je];return Qe=Pe(F.concat([Xe,Qe])),Pe(F.concat([Ce,Qe]))}(j,le,xe):j(xe),Me=null,ae?xe.toString(ae):xe}}}function W(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}J.fill(0),Q.createHash=function(T){return ee(T)},Q.createHmac=ee,Q.randomBytes=function(T,le){if(!le||!le.call)return new F(B(T));try{le.call(this,void 0,new F(B(T)))}catch(j){le(j)}};var k,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],I=function(T){Q[T]=function(){W("sorry,",T,"is not implemented yet")}};for(k in v)I(v[k])}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){var F=_e("./helpers");function oe(W,k){W[k>>5]|=128<<k%32,W[14+(k+64>>>9<<4)]=k;for(var v=1732584193,I=-271733879,T=-1732584194,le=271733878,j=0;j<W.length;j+=16){var Me=v,ae=I,xe=T,Pe=le;v=B(v,I,T,le,W[j+0],7,-680876936),le=B(le,v,I,T,W[j+1],12,-389564586),T=B(T,le,v,I,W[j+2],17,606105819),I=B(I,T,le,v,W[j+3],22,-1044525330),v=B(v,I,T,le,W[j+4],7,-176418897),le=B(le,v,I,T,W[j+5],12,1200080426),T=B(T,le,v,I,W[j+6],17,-1473231341),I=B(I,T,le,v,W[j+7],22,-45705983),v=B(v,I,T,le,W[j+8],7,1770035416),le=B(le,v,I,T,W[j+9],12,-1958414417),T=B(T,le,v,I,W[j+10],17,-42063),I=B(I,T,le,v,W[j+11],22,-1990404162),v=B(v,I,T,le,W[j+12],7,1804603682),le=B(le,v,I,T,W[j+13],12,-40341101),T=B(T,le,v,I,W[j+14],17,-1502002290),v=se(v,I=B(I,T,le,v,W[j+15],22,1236535329),T,le,W[j+1],5,-165796510),le=se(le,v,I,T,W[j+6],9,-1069501632),T=se(T,le,v,I,W[j+11],14,643717713),I=se(I,T,le,v,W[j+0],20,-373897302),v=se(v,I,T,le,W[j+5],5,-701558691),le=se(le,v,I,T,W[j+10],9,38016083),T=se(T,le,v,I,W[j+15],14,-660478335),I=se(I,T,le,v,W[j+4],20,-405537848),v=se(v,I,T,le,W[j+9],5,568446438),le=se(le,v,I,T,W[j+14],9,-1019803690),T=se(T,le,v,I,W[j+3],14,-187363961),I=se(I,T,le,v,W[j+8],20,1163531501),v=se(v,I,T,le,W[j+13],5,-1444681467),le=se(le,v,I,T,W[j+2],9,-51403784),T=se(T,le,v,I,W[j+7],14,1735328473),v=Y(v,I=se(I,T,le,v,W[j+12],20,-1926607734),T,le,W[j+5],4,-378558),le=Y(le,v,I,T,W[j+8],11,-2022574463),T=Y(T,le,v,I,W[j+11],16,1839030562),I=Y(I,T,le,v,W[j+14],23,-35309556),v=Y(v,I,T,le,W[j+1],4,-1530992060),le=Y(le,v,I,T,W[j+4],11,1272893353),T=Y(T,le,v,I,W[j+7],16,-155497632),I=Y(I,T,le,v,W[j+10],23,-1094730640),v=Y(v,I,T,le,W[j+13],4,681279174),le=Y(le,v,I,T,W[j+0],11,-358537222),T=Y(T,le,v,I,W[j+3],16,-722521979),I=Y(I,T,le,v,W[j+6],23,76029189),v=Y(v,I,T,le,W[j+9],4,-640364487),le=Y(le,v,I,T,W[j+12],11,-421815835),T=Y(T,le,v,I,W[j+15],16,530742520),v=J(v,I=Y(I,T,le,v,W[j+2],23,-995338651),T,le,W[j+0],6,-198630844),le=J(le,v,I,T,W[j+7],10,1126891415),T=J(T,le,v,I,W[j+14],15,-1416354905),I=J(I,T,le,v,W[j+5],21,-57434055),v=J(v,I,T,le,W[j+12],6,1700485571),le=J(le,v,I,T,W[j+3],10,-1894986606),T=J(T,le,v,I,W[j+10],15,-1051523),I=J(I,T,le,v,W[j+1],21,-2054922799),v=J(v,I,T,le,W[j+8],6,1873313359),le=J(le,v,I,T,W[j+15],10,-30611744),T=J(T,le,v,I,W[j+6],15,-1560198380),I=J(I,T,le,v,W[j+13],21,1309151649),v=J(v,I,T,le,W[j+4],6,-145523070),le=J(le,v,I,T,W[j+11],10,-1120210379),T=J(T,le,v,I,W[j+2],15,718787259),I=J(I,T,le,v,W[j+9],21,-343485551),v=ee(v,Me),I=ee(I,ae),T=ee(T,xe),le=ee(le,Pe)}return Array(v,I,T,le)}function x(W,k,v,I,T,le){return ee((k=ee(ee(k,W),ee(I,le)))<<T|k>>>32-T,v)}function B(W,k,v,I,T,le,j){return x(k&v|~k&I,W,k,T,le,j)}function se(W,k,v,I,T,le,j){return x(k&I|v&~I,W,k,T,le,j)}function Y(W,k,v,I,T,le,j){return x(k^v^I,W,k,T,le,j)}function J(W,k,v,I,T,le,j){return x(v^(k|~I),W,k,T,le,j)}function ee(W,k){var v=(65535&W)+(65535&k);return(W>>16)+(k>>16)+(v>>16)<<16|65535&v}S.exports=function(W){return F.hash(W,oe,16)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){S.exports=function(oe){for(var x,B=new Array(oe),se=0;se<oe;se++)!(3&se)&&(x=4294967296*Math.random()),B[se]=x>>>((3&se)<<3)&255;return B}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){var F=_e("./helpers");function oe(se,Y){se[Y>>5]|=128<<24-Y%32,se[15+(Y+64>>9<<4)]=Y;for(var J,ee,W,k=Array(80),v=1732584193,I=-271733879,T=-1732584194,le=271733878,j=-1009589776,Me=0;Me<se.length;Me+=16){for(var ae=v,xe=I,Pe=T,He=le,Qe=j,Xe=0;Xe<80;Xe++){k[Xe]=Xe<16?se[Me+Xe]:B(k[Xe-3]^k[Xe-8]^k[Xe-14]^k[Xe-16],1);var Ce=x(x(B(v,5),(Ce=I,ee=T,W=le,(J=Xe)<20?Ce&ee|~Ce&W:!(J<40)&&J<60?Ce&ee|Ce&W|ee&W:Ce^ee^W)),x(x(j,k[Xe]),(J=Xe)<20?1518500249:J<40?1859775393:J<60?-1894007588:-899497514));j=le,le=T,T=B(I,30),I=v,v=Ce}v=x(v,ae),I=x(I,xe),T=x(T,Pe),le=x(le,He),j=x(j,Qe)}return Array(v,I,T,le,j)}function x(se,Y){var J=(65535&se)+(65535&Y);return(se>>16)+(Y>>16)+(J>>16)<<16|65535&J}function B(se,Y){return se<<Y|se>>>32-Y}S.exports=function(se){return F.hash(se,oe,20,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){function F(Y,J){var ee=(65535&Y)+(65535&J);return(Y>>16)+(J>>16)+(ee>>16)<<16|65535&ee}function oe(Y,J){var ee,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),v=new Array(64);Y[J>>5]|=128<<24-J%32,Y[15+(J+64>>9<<4)]=J;for(var I,T,le=0;le<Y.length;le+=16){for(var j=k[0],Me=k[1],ae=k[2],xe=k[3],Pe=k[4],He=k[5],Qe=k[6],Xe=k[7],Ce=0;Ce<64;Ce++)v[Ce]=Ce<16?Y[Ce+le]:F(F(F(B(T=v[Ce-2],17)^B(T,19)^se(T,10),v[Ce-7]),B(T=v[Ce-15],7)^B(T,18)^se(T,3)),v[Ce-16]),ee=F(F(F(F(Xe,B(T=Pe,6)^B(T,11)^B(T,25)),Pe&He^~Pe&Qe),W[Ce]),v[Ce]),I=F(B(I=j,2)^B(I,13)^B(I,22),j&Me^j&ae^Me&ae),Xe=Qe,Qe=He,He=Pe,Pe=F(xe,ee),xe=ae,ae=Me,Me=j,j=F(ee,I);k[0]=F(j,k[0]),k[1]=F(Me,k[1]),k[2]=F(ae,k[2]),k[3]=F(xe,k[3]),k[4]=F(Pe,k[4]),k[5]=F(He,k[5]),k[6]=F(Qe,k[6]),k[7]=F(Xe,k[7])}return k}var x=_e("./helpers"),B=function(Y,J){return Y>>>J|Y<<32-J},se=function(Y,J){return Y>>>J};S.exports=function(Y){return x.hash(Y,oe,32,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){Q.read=function(F,oe,x,B,le){var Y,J,ee=8*le-B-1,W=(1<<ee)-1,k=W>>1,v=-7,I=x?le-1:0,T=x?-1:1;for(le=F[oe+I],I+=T,Y=le&(1<<-v)-1,le>>=-v,v+=ee;0<v;Y=256*Y+F[oe+I],I+=T,v-=8);for(J=Y&(1<<-v)-1,Y>>=-v,v+=B;0<v;J=256*J+F[oe+I],I+=T,v-=8);if(0===Y)Y=1-k;else{if(Y===W)return J?NaN:1/0*(le?-1:1);J+=Math.pow(2,B),Y-=k}return(le?-1:1)*J*Math.pow(2,Y-B)},Q.write=function(F,oe,x,B,se,j){var J,ee,W=8*j-se-1,k=(1<<W)-1,v=k>>1,I=23===se?Math.pow(2,-24)-Math.pow(2,-77):0,T=B?0:j-1,le=B?1:-1;for(j=oe<0||0===oe&&1/oe<0?1:0,oe=Math.abs(oe),isNaN(oe)||oe===1/0?(ee=isNaN(oe)?1:0,J=k):(J=Math.floor(Math.log(oe)/Math.LN2),oe*(B=Math.pow(2,-J))<1&&(J--,B*=2),2<=(oe+=1<=J+v?I/B:I*Math.pow(2,1-v))*B&&(J++,B/=2),k<=J+v?(ee=0,J=k):1<=J+v?(ee=(oe*B-1)*Math.pow(2,se),J+=v):(ee=oe*Math.pow(2,v-1)*Math.pow(2,se),J=0));8<=se;F[x+T]=255&ee,T+=le,ee/=256,se-=8);for(J=J<<se|ee,W+=se;0<W;F[x+T]=255&J,T+=le,J/=256,W-=8);F[x+T-le]|=128*j}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(_e,S,Q){(function(C,$,G,q,_,E,N,z,P){var F,oe,x;function B(){}(C=S.exports={}).nextTick=(oe=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,oe?function(se){return window.setImmediate(se)}:x?(F=[],window.addEventListener("message",function(se){var Y=se.source;Y!==window&&null!==Y||"process-tick"!==se.data||(se.stopPropagation(),0<F.length&&F.shift()())},!0),function(se){F.push(se),window.postMessage("process-tick","*")}):function(se){setTimeout(se,0)}),C.title="browser",C.browser=!0,C.env={},C.argv=[],C.on=B,C.addListener=B,C.once=B,C.off=B,C.removeListener=B,C.removeAllListeners=B,C.emit=B,C.binding=function(se){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(se){throw new Error("process.chdir is not supported")}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:Ue=>{var S,Q,_e=Ue.exports={};function C(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}function G(B){if(S===setTimeout)return setTimeout(B,0);if((S===C||!S)&&setTimeout)return S=setTimeout,setTimeout(B,0);try{return S(B,0)}catch{try{return S.call(null,B,0)}catch{return S.call(this,B,0)}}}!function(){try{S="function"==typeof setTimeout?setTimeout:C}catch{S=C}try{Q="function"==typeof clearTimeout?clearTimeout:$}catch{Q=$}}();var N,_=[],E=!1,z=-1;function P(){!E||!N||(E=!1,N.length?_=N.concat(_):z=-1,_.length&&F())}function F(){if(!E){var B=G(P);E=!0;for(var se=_.length;se;){for(N=_,_=[];++z<se;)N&&N[z].run();z=-1,se=_.length}N=null,E=!1,function q(B){if(Q===clearTimeout)return clearTimeout(B);if((Q===$||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(B);try{return Q(B)}catch{try{return Q.call(null,B)}catch{return Q.call(this,B)}}}(B)}}function oe(B,se){this.fun=B,this.array=se}function x(){}_e.nextTick=function(B){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)se[Y-1]=arguments[Y];_.push(new oe(B,se)),1===_.length&&!E&&G(F)},oe.prototype.run=function(){this.fun.apply(null,this.array)},_e.title="browser",_e.browser=!0,_e.env={},_e.argv=[],_e.version="",_e.versions={},_e.on=x,_e.addListener=x,_e.once=x,_e.off=x,_e.removeListener=x,_e.removeAllListeners=x,_e.emit=x,_e.prependListener=x,_e.prependOnceListener=x,_e.listeners=function(B){return[]},_e.binding=function(B){throw new Error("process.binding is not supported")},_e.cwd=function(){return"/"},_e.chdir=function(B){throw new Error("process.chdir is not supported")},_e.umask=function(){return 0}},3410:Ue=>{let _e;Ue.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):S=>(_e||(_e=Promise.resolve())).then(S).catch(Q=>setTimeout(()=>{throw Q},0))},1986:(Ue,_e,S)=>{Ue.exports=S(7842)},5327:Ue=>{"use strict";Ue.exports=class Cq{constructor(S,Q=new Map,C=0){this.prefix=S,this._existing=Q,this.counter=C}clone(){const{prefix:S,_existing:Q,counter:C}=this;return new Cq(S,new Map(Q),C)}getId(S){const Q=S&&this._existing.get(S);if(Q)return Q;const C=this.prefix+this.counter;return this.counter++,S&&this._existing.set(S,C),C}hasId(S){return this._existing.has(S)}getOldIds(){return[...this._existing.keys()]}}},7475:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;S(8280);const C=self.crypto||self.msCrypto;Ue.exports=class{constructor(G){if(!C||!C.subtle)throw new Error("crypto.subtle not found.");if("sha256"===G)this.algorithm={name:"SHA-256"};else{if("sha1"!==G)throw new Error(`Unsupported algorithm "${G}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(G){this._content+=G}digest(){var G=this;return Q(function*(){const q=(new TextEncoder).encode(G._content),_=new Uint8Array(yield C.subtle.digest(G.algorithm,q));let E="";for(let N=0;N<_.length;++N)E+=_[N].toString(16).padStart(2,"0");return E})()}}},8003:Ue=>{"use strict";const Q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",C="http://www.w3.org/2001/XMLSchema#string",$="NamedNode",G="BlankNode",q="Literal",_="DefaultGraph",E={};function N(x,B){return x.subject.termType===B.subject.termType&&x.object.termType===B.object.termType&&x.subject.value===B.subject.value&&x.predicate.value===B.predicate.value&&x.object.value===B.object.value&&(x.object.termType!==q||x.object.datatype.termType===B.object.datatype.termType&&x.object.language===B.object.language&&x.object.datatype.value===B.object.datatype.value)}(()=>{const x="(?:<([^:]+:[^>]*)>)",se="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Y=se+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+se+"0-9])(?:(?:["+Y+".])*(?:["+Y+"]))?)",T="[ \\t]+",le="[ \\t]*",j="(?:"+x+"|"+ee+")"+T,Me=x+T,ae="(?:"+x+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+x+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+le,xe="(?:\\.|(?:(?:"+x+"|"+ee+")"+le+"\\.))";E.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,E.empty=new RegExp("^[ \\t]*$"),E.quad=new RegExp("^"+le+j+Me+ae+xe+le+"$")})(),Ue.exports=class TS{static parse(B){const se=[],Y={},J=B.split(E.eoln);let ee=0;for(const W of J){if(ee++,E.empty.test(W))continue;const k=W.match(E.quad);if(null===k)throw new Error("N-Quads parse error on line "+ee+".");const v={subject:null,predicate:null,object:null,graph:null};if(v.subject=void 0!==k[1]?{termType:$,value:k[1]}:{termType:G,value:k[2]},v.predicate={termType:$,value:k[3]},void 0!==k[4]?v.object={termType:$,value:k[4]}:void 0!==k[5]?v.object={termType:G,value:k[5]}:(v.object={termType:q,value:void 0,datatype:{termType:$}},void 0!==k[7]?v.object.datatype.value=k[7]:void 0!==k[8]?(v.object.datatype.value=Q,v.object.language=k[8]):v.object.datatype.value=C,v.object.value=k[6].replace(F,function(B,se,Y,J){if(se)switch(se){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Y)return String.fromCharCode(parseInt(Y,16));if(J)throw new Error("Unsupported U escape")})),v.graph=void 0!==k[9]?{termType:$,value:k[9]}:void 0!==k[10]?{termType:G,value:k[10]}:{termType:_,value:""},v.graph.value in Y){let I=!0;const T=Y[v.graph.value];for(const le of T)if(N(le,v)){I=!1;break}I&&(T.push(v),se.push(v))}else Y[v.graph.value]=[v],se.push(v)}return se}static serialize(B){Array.isArray(B)||(B=TS.legacyDatasetToQuads(B));const se=[];for(const Y of B)se.push(TS.serializeQuad(Y));return se.sort().join("")}static serializeQuadComponents(B,se,Y,J){let ee="";return ee+=B.termType===$?`<${B.value}>`:`${B.value}`,ee+=` <${se.value}> `,Y.termType===$?ee+=`<${Y.value}>`:Y.termType===G?ee+=Y.value:(ee+=`"${function P(x){return x.replace(z,function(B){switch(B){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Y.value)}"`,Y.datatype.value===Q?Y.language&&(ee+=`@${Y.language}`):Y.datatype.value!==C&&(ee+=`^^<${Y.datatype.value}>`)),J.termType===$?ee+=` <${J.value}>`:J.termType===G&&(ee+=` ${J.value}`),ee+=" .\n",ee}static serializeQuad(B){return TS.serializeQuadComponents(B.subject,B.predicate,B.object,B.graph)}static legacyDatasetToQuads(B){const se=[],Y={"blank node":G,IRI:$,literal:q};for(const J in B)B[J].forEach(W=>{const k={};for(const v in W){const I=W[v],T={termType:Y[I.type],value:I.value};T.termType===q&&(T.datatype={termType:$},"datatype"in I&&(T.datatype.value=I.datatype),"language"in I?("datatype"in I||(T.datatype.value=Q),T.language=I.language):"datatype"in I||(T.datatype.value=C)),k[v]=T}k.graph="@default"===J?{termType:_,value:""}:{termType:J.startsWith("_:")?G:$,value:J},se.push(k)});return se}};const z=/["\\\n\r]/g,F=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:Ue=>{"use strict";Ue.exports=class{constructor(S){this.current=S.sort(),this.done=!1,this.dir=new Map;for(let Q=0;Q<S.length;++Q)this.dir.set(S[Q],!0)}hasNext(){return!this.done}next(){const{current:S,dir:Q}=this,C=S.slice();let $=null,G=0;const q=S.length;for(let _=0;_<q;++_){const E=S[_],N=Q.get(E);(null===$||E>$)&&(N&&_>0&&E>S[_-1]||!N&&_<q-1&&E>S[_+1])&&($=E,G=_)}if(null===$)this.done=!0;else{const _=Q.get($)?G-1:G+1;S[G]=S[_],S[_]=$;for(const E of S)E>$&&Q.set(E,!Q.get(E))}return C}}},7218:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(5327),$=S(7475),G=S(7790),q=S(8003);function _(E,N){return E.hash<N.hash?-1:E.hash>N.hash?1:0}Ue.exports=class{constructor({createMessageDigest:N=(()=>new $("sha256")),canonicalIdMap:z=new Map,maxDeepIterations:P=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n",z),this.createMessageDigest=N,this.maxDeepIterations=P,this.quads=null,this.deepIterations=null}main(N){var z=this;return Q(function*(){z.deepIterations=new Map,z.quads=N;for(const Y of N)z._addBlankNodeQuadInfo({quad:Y,component:Y.subject}),z._addBlankNodeQuadInfo({quad:Y,component:Y.object}),z._addBlankNodeQuadInfo({quad:Y,component:Y.graph});const P=new Map,F=[...z.blankNodeInfo.keys()];let oe=0;for(const Y of F)++oe%100==0&&(yield z._yield()),yield z._hashAndTrackBlankNode({id:Y,hashToBlankNodes:P});const x=[...P.keys()].sort(),B=[];for(const Y of x){const J=P.get(Y);J.length>1?B.push(J):z.canonicalIssuer.getId(J[0])}for(const Y of B){const J=[];for(const ee of Y){if(z.canonicalIssuer.hasId(ee))continue;const W=new C("_:b");W.getId(ee);const k=yield z.hashNDegreeQuads(ee,W);J.push(k)}J.sort(_);for(const ee of J){const W=ee.issuer.getOldIds();for(const k of W)z.canonicalIssuer.getId(k)}}const se=[];for(const Y of z.quads){const J=q.serializeQuadComponents(z._componentWithCanonicalId(Y.subject),Y.predicate,z._componentWithCanonicalId(Y.object),z._componentWithCanonicalId(Y.graph));se.push(J)}return se.sort(),se.join("")})()}hashFirstDegreeQuads(N){var z=this;return Q(function*(){const P=[],F=z.blankNodeInfo.get(N),oe=F.quads;for(const B of oe){const se={subject:null,predicate:B.predicate,object:null,graph:null};se.subject=z.modifyFirstDegreeComponent(N,B.subject,"subject"),se.object=z.modifyFirstDegreeComponent(N,B.object,"object"),se.graph=z.modifyFirstDegreeComponent(N,B.graph,"graph"),P.push(q.serializeQuad(se))}P.sort();const x=z.createMessageDigest();for(const B of P)x.update(B);return F.hash=yield x.digest(),F.hash})()}hashRelatedBlankNode(N,z,P,F){var oe=this;return Q(function*(){let x;x=oe.canonicalIssuer.hasId(N)?oe.canonicalIssuer.getId(N):P.hasId(N)?P.getId(N):oe.blankNodeInfo.get(N).hash;const B=oe.createMessageDigest();return B.update(F),"g"!==F&&B.update(oe.getRelatedPredicate(z)),B.update(x),B.digest()})()}hashNDegreeQuads(N,z){var P=this;return Q(function*(){const F=P.deepIterations.get(N)||0;if(F>P.maxDeepIterations)throw new Error(`Maximum deep iterations (${P.maxDeepIterations}) exceeded.`);P.deepIterations.set(N,F+1);const oe=P.createMessageDigest(),x=yield P.createHashToRelated(N,z),B=[...x.keys()].sort();for(const se of B){oe.update(se);let J,Y="";const ee=new G(x.get(se));let W=0;for(;ee.hasNext();){const k=ee.next();++W%3==0&&(yield P._yield());let v=z.clone(),I="";const T=[];let le=!1;for(const j of k)if(P.canonicalIssuer.hasId(j)?I+=P.canonicalIssuer.getId(j):(v.hasId(j)||T.push(j),I+=v.getId(j)),0!==Y.length&&I>Y){le=!0;break}if(!le){for(const j of T){const Me=yield P.hashNDegreeQuads(j,v);if(I+=v.getId(j),I+=`<${Me.hash}>`,v=Me.issuer,0!==Y.length&&I>Y){le=!0;break}}le||(0===Y.length||I<Y)&&(Y=I,J=v)}}oe.update(Y),z=J}return{hash:yield oe.digest(),issuer:z}})()}modifyFirstDegreeComponent(N,z){return"BlankNode"!==z.termType?z:{termType:"BlankNode",value:z.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return`<${N.predicate.value}>`}createHashToRelated(N,z){var P=this;return Q(function*(){const F=new Map,oe=P.blankNodeInfo.get(N).quads;let x=0;for(const B of oe)++x%100==0&&(yield P._yield()),yield Promise.all([P._addRelatedBlankNodeHash({quad:B,component:B.subject,position:"s",id:N,issuer:z,hashToRelated:F}),P._addRelatedBlankNodeHash({quad:B,component:B.object,position:"o",id:N,issuer:z,hashToRelated:F}),P._addRelatedBlankNodeHash({quad:B,component:B.graph,position:"g",id:N,issuer:z,hashToRelated:F})]);return F})()}_hashAndTrackBlankNode({id:N,hashToBlankNodes:z}){var P=this;return Q(function*(){const F=yield P.hashFirstDegreeQuads(N),oe=z.get(F);oe?oe.push(N):z.set(F,[N])})()}_addBlankNodeQuadInfo({quad:N,component:z}){if("BlankNode"!==z.termType)return;const P=z.value,F=this.blankNodeInfo.get(P);F?F.quads.add(N):this.blankNodeInfo.set(P,{quads:new Set([N]),hash:null})}_addRelatedBlankNodeHash({quad:N,component:z,position:P,id:F,issuer:oe,hashToRelated:x}){var B=this;return Q(function*(){if("BlankNode"!==z.termType||z.value===F)return;const se=z.value,Y=yield B.hashRelatedBlankNode(se,N,oe,P),J=x.get(Y);J?J.push(se):x.set(Y,[se])})()}_componentWithCanonicalId(N){return"BlankNode"!==N.termType||N.value.startsWith(this.canonicalIssuer.prefix)?N:{termType:"BlankNode",value:this.canonicalIssuer.getId(N.value)}}_yield(){return Q(function*(){return new Promise(N=>setImmediate(N))})()}}},9123:(Ue,_e,S)=>{"use strict";const Q=S(5327),C=S(7475),$=S(7790),G=S(8003);function q(_,E){return _.hash<E.hash?-1:_.hash>E.hash?1:0}Ue.exports=class{constructor({createMessageDigest:E=(()=>new C("sha256")),canonicalIdMap:N=new Map,maxDeepIterations:z=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Q("_:c14n",N),this.createMessageDigest=E,this.maxDeepIterations=z,this.quads=null,this.deepIterations=null}main(E){this.deepIterations=new Map,this.quads=E;for(const x of E)this._addBlankNodeQuadInfo({quad:x,component:x.subject}),this._addBlankNodeQuadInfo({quad:x,component:x.object}),this._addBlankNodeQuadInfo({quad:x,component:x.graph});const N=new Map,z=[...this.blankNodeInfo.keys()];for(const x of z)this._hashAndTrackBlankNode({id:x,hashToBlankNodes:N});const P=[...N.keys()].sort(),F=[];for(const x of P){const B=N.get(x);B.length>1?F.push(B):this.canonicalIssuer.getId(B[0])}for(const x of F){const B=[];for(const se of x){if(this.canonicalIssuer.hasId(se))continue;const Y=new Q("_:b");Y.getId(se);const J=this.hashNDegreeQuads(se,Y);B.push(J)}B.sort(q);for(const se of B){const Y=se.issuer.getOldIds();for(const J of Y)this.canonicalIssuer.getId(J)}}const oe=[];for(const x of this.quads){const B=G.serializeQuadComponents(this._componentWithCanonicalId({component:x.subject}),x.predicate,this._componentWithCanonicalId({component:x.object}),this._componentWithCanonicalId({component:x.graph}));oe.push(B)}return oe.sort(),oe.join("")}hashFirstDegreeQuads(E){const N=[],z=this.blankNodeInfo.get(E),P=z.quads;for(const oe of P){const x={subject:null,predicate:oe.predicate,object:null,graph:null};x.subject=this.modifyFirstDegreeComponent(E,oe.subject,"subject"),x.object=this.modifyFirstDegreeComponent(E,oe.object,"object"),x.graph=this.modifyFirstDegreeComponent(E,oe.graph,"graph"),N.push(G.serializeQuad(x))}N.sort();const F=this.createMessageDigest();for(const oe of N)F.update(oe);return z.hash=F.digest(),z.hash}hashRelatedBlankNode(E,N,z,P){let F;F=this.canonicalIssuer.hasId(E)?this.canonicalIssuer.getId(E):z.hasId(E)?z.getId(E):this.blankNodeInfo.get(E).hash;const oe=this.createMessageDigest();return oe.update(P),"g"!==P&&oe.update(this.getRelatedPredicate(N)),oe.update(F),oe.digest()}hashNDegreeQuads(E,N){const z=this.deepIterations.get(E)||0;if(z>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(E,z+1);const P=this.createMessageDigest(),F=this.createHashToRelated(E,N),oe=[...F.keys()].sort();for(const x of oe){P.update(x);let se,B="";const Y=new $(F.get(x));for(;Y.hasNext();){const J=Y.next();let ee=N.clone(),W="";const k=[];let v=!1;for(const I of J)if(this.canonicalIssuer.hasId(I)?W+=this.canonicalIssuer.getId(I):(ee.hasId(I)||k.push(I),W+=ee.getId(I)),0!==B.length&&W>B){v=!0;break}if(!v){for(const I of k){const T=this.hashNDegreeQuads(I,ee);if(W+=ee.getId(I),W+=`<${T.hash}>`,ee=T.issuer,0!==B.length&&W>B){v=!0;break}}v||(0===B.length||W<B)&&(B=W,se=ee)}}P.update(B),N=se}return{hash:P.digest(),issuer:N}}modifyFirstDegreeComponent(E,N){return"BlankNode"!==N.termType?N:{termType:"BlankNode",value:N.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return`<${E.predicate.value}>`}createHashToRelated(E,N){const z=new Map,P=this.blankNodeInfo.get(E).quads;for(const F of P)this._addRelatedBlankNodeHash({quad:F,component:F.subject,position:"s",id:E,issuer:N,hashToRelated:z}),this._addRelatedBlankNodeHash({quad:F,component:F.object,position:"o",id:E,issuer:N,hashToRelated:z}),this._addRelatedBlankNodeHash({quad:F,component:F.graph,position:"g",id:E,issuer:N,hashToRelated:z});return z}_hashAndTrackBlankNode({id:E,hashToBlankNodes:N}){const z=this.hashFirstDegreeQuads(E),P=N.get(z);P?P.push(E):N.set(z,[E])}_addBlankNodeQuadInfo({quad:E,component:N}){if("BlankNode"!==N.termType)return;const z=N.value,P=this.blankNodeInfo.get(z);P?P.quads.add(E):this.blankNodeInfo.set(z,{quads:new Set([E]),hash:null})}_addRelatedBlankNodeHash({quad:E,component:N,position:z,id:P,issuer:F,hashToRelated:oe}){if("BlankNode"!==N.termType||N.value===P)return;const x=N.value,B=this.hashRelatedBlankNode(x,E,F,z),se=oe.get(B);se?se.push(x):oe.set(B,[x])}_componentWithCanonicalId({component:E}){return"BlankNode"!==E.termType||E.value.startsWith(this.canonicalIssuer.prefix)?E:{termType:"BlankNode",value:this.canonicalIssuer.getId(E.value)}}}},1326:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(7475),$=S(7218);Ue.exports=class extends ${constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new C("sha1")}modifyFirstDegreeComponent(q,_,E){return"BlankNode"!==_.termType?_:"graph"===E?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===q?"_:a":"_:z"}}getRelatedPredicate(q){return q.predicate.value}createHashToRelated(q,_){var E=this;return Q(function*(){const N=new Map,z=E.blankNodeInfo.get(q).quads;let P=0;for(const F of z){let oe,x;if("BlankNode"===F.subject.termType&&F.subject.value!==q)x=F.subject.value,oe="p";else{if("BlankNode"!==F.object.termType||F.object.value===q)continue;x=F.object.value,oe="r"}++P%100==0&&(yield E._yield());const B=yield E.hashRelatedBlankNode(x,F,_,oe),se=N.get(B);se?se.push(x):N.set(B,[x])}return N})()}}},9869:(Ue,_e,S)=>{"use strict";const Q=S(7475),C=S(9123);Ue.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Q("sha1")}modifyFirstDegreeComponent(G,q,_){return"BlankNode"!==q.termType?q:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:q.value===G?"_:a":"_:z"}}getRelatedPredicate(G){return G.predicate.value}createHashToRelated(G,q){const _=new Map,E=this.blankNodeInfo.get(G).quads;for(const N of E){let z,P;if("BlankNode"===N.subject.termType&&N.subject.value!==G)P=N.subject.value,z="p";else{if("BlankNode"!==N.object.termType||N.object.value===G)continue;P=N.object.value,z="r"}const F=this.hashRelatedBlankNode(P,N,q,z),oe=_.get(F);oe?oe.push(P):_.set(F,[P])}return _}}},7842:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(7218),$=S(1326),G=S(9123),q=S(9869);let _;try{_=S(7670)}catch{}function E(N){return Array.isArray(N)?N:_e.NQuads.legacyDatasetToQuads(N)}_e.NQuads=S(8003),_e.IdentifierIssuer=S(5327),_e._rdfCanonizeNative=function(N){return N&&(_=N),_},_e.canonize=function(){var N=Q(function*(z,P){const F=E(z);if(P.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((oe,x)=>_.canonize(F,P,(B,se)=>B?x(B):oe(se)))}if("URDNA2015"===P.algorithm)return new C(P).main(F);if("URGNA2012"===P.algorithm){if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new $(P).main(F)}throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(z,P){return N.apply(this,arguments)}}(),_e._canonizeSync=function(N,z){const P=E(N);if(z.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(z.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(P,z)}if("URDNA2015"===z.algorithm)return new G(z).main(P);if("URGNA2012"===z.algorithm){if(z.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new q(z).main(P)}throw"algorithm"in z?new Error("Invalid RDF Dataset Canonicalization algorithm: "+z.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,G,q,_){void 0===_&&(_=q),Object.defineProperty($,_,{enumerable:!0,get:function(){return G[q]}})}:function($,G,q,_){void 0===_&&(_=q),$[_]=G[q]}),C=this&&this.__exportStar||function($,G){for(var q in $)"default"!==q&&!Object.prototype.hasOwnProperty.call(G,q)&&Q(G,$,q)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(4740),_e),C(S(3613),_e),C(S(9379),_e),C(S(5565),_e),C(S(3283),_e),C(S(3905),_e),C(S(2234),_e)},4740:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.BlankNode=void 0,_e.BlankNode=class S{constructor(C){this.termType="BlankNode",this.value=C}equals(C){return!!C&&"BlankNode"===C.termType&&C.value===this.value}}},3613:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DataFactory=void 0;const Q=S(4740),C=S(9379),$=S(5565),G=S(3283),q=S(3905),_=S(2234);let E=0;_e.DataFactory=class N{constructor(P){this.blankNodeCounter=0,this.blankNodePrefix=(P=P||{}).blankNodePrefix||`df_${E++}_`}namedNode(P){return new G.NamedNode(P)}blankNode(P){return new Q.BlankNode(P||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(P,F){return new $.Literal(P,F)}variable(P){return new _.Variable(P)}defaultGraph(){return C.DefaultGraph.INSTANCE}quad(P,F,oe,x){return new q.Quad(P,F,oe,x||this.defaultGraph())}fromTerm(P){switch(P.termType){case"NamedNode":return this.namedNode(P.value);case"BlankNode":return this.blankNode(P.value);case"Literal":return P.language?this.literal(P.value,P.language):P.datatype.equals($.Literal.XSD_STRING)?this.literal(P.value):this.literal(P.value,this.fromTerm(P.datatype));case"Variable":return this.variable(P.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(P.subject),this.fromTerm(P.predicate),this.fromTerm(P.object),this.fromTerm(P.graph))}}fromQuad(P){return this.fromTerm(P)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DefaultGraph=void 0;class S{constructor(){this.termType="DefaultGraph",this.value=""}equals(C){return!!C&&"DefaultGraph"===C.termType}}_e.DefaultGraph=S,S.INSTANCE=new S},5565:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Literal=void 0;const Q=S(3283);class C{constructor(G,q){this.termType="Literal",this.value=G,"string"==typeof q?(this.language=q,this.datatype=C.RDF_LANGUAGE_STRING):q?(this.language="",this.datatype=q):(this.language="",this.datatype=C.XSD_STRING)}equals(G){return!!G&&"Literal"===G.termType&&G.value===this.value&&G.language===this.language&&this.datatype.equals(G.datatype)}}_e.Literal=C,C.RDF_LANGUAGE_STRING=new Q.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),C.XSD_STRING=new Q.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.NamedNode=void 0,_e.NamedNode=class S{constructor(C){this.termType="NamedNode",this.value=C}equals(C){return!!C&&"NamedNode"===C.termType&&C.value===this.value}}},3905:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Quad=void 0,_e.Quad=class S{constructor(C,$,G,q){this.termType="Quad",this.value="",this.subject=C,this.predicate=$,this.object=G,this.graph=q}equals(C){return!!C&&("Quad"===C.termType||!C.termType)&&this.subject.equals(C.subject)&&this.predicate.equals(C.predicate)&&this.object.equals(C.object)&&this.graph.equals(C.graph)}}},2234:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Variable=void 0,_e.Variable=class S{constructor(C){this.termType="Variable",this.value=C}equals(C){return!!C&&"Variable"===C.termType&&C.value===this.value}}},9689:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(x,B,se,Y){void 0===Y&&(Y=se);var J=Object.getOwnPropertyDescriptor(B,se);(!J||("get"in J?!B.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return B[se]}}),Object.defineProperty(x,Y,J)}:function(x,B,se,Y){void 0===Y&&(Y=se),x[Y]=B[se]}),C=this&&this.__exportStar||function(x,B){for(var se in x)"default"!==se&&!Object.prototype.hasOwnProperty.call(B,se)&&Q(B,x,se)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.getSupportedJavaScriptPrimitives=_e.getSupportedRdfDatatypes=_e.getTermRaw=_e.toRdf=_e.fromRdf=void 0;const $=S(2633),G=S(2538),q=S(6374);C(S(2538),_e),C(S(1815),_e),C(S(6374),_e);const _=new $.DataFactory,E=new q.Translator;function N(x,B){return E.fromRdf(x,B)}E.registerHandler(new G.TypeHandlerString,G.TypeHandlerString.TYPES.map(x=>_.namedNode(x)),["string"]),E.registerHandler(new G.TypeHandlerBoolean,[G.TypeHandlerBoolean.TYPE].map(x=>_.namedNode(x)),["boolean"]),E.registerHandler(new G.TypeHandlerNumberDouble,G.TypeHandlerNumberDouble.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new G.TypeHandlerNumberInteger,G.TypeHandlerNumberInteger.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new G.TypeHandlerDate,G.TypeHandlerDate.TYPES.map(x=>_.namedNode(x)),["object"]),_e.fromRdf=N,_e.toRdf=function z(x,B){return B&&"namedNode"in B&&(B={dataFactory:B}),(B=B||{})&&!B.dataFactory&&(B.dataFactory=_),E.toRdf(x,B)},_e.getTermRaw=function P(x,B){return"Literal"===x.termType?N(x,B):x.value},_e.getSupportedRdfDatatypes=function F(){return E.getSupportedRdfDatatypes()},_e.getSupportedJavaScriptPrimitives=function oe(){return E.getSupportedJavaScriptPrimitives()}},1815:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0})},6374:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Translator=void 0,_e.Translator=class S{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(C){throw new Error(`Invalid RDF ${C.datatype.value} value: '${C.value}'`)}registerHandler(C,$,G){for(const q of $)this.supportedRdfDatatypes.push(q),this.fromRdfHandlers[q.value]=C;for(const q of G){let _=this.toRdfHandlers[q];_||(this.toRdfHandlers[q]=_=[]),_.push(C)}}fromRdf(C,$){const G=this.fromRdfHandlers[C.datatype.value];return G?G.fromRdf(C,$):C.value}toRdf(C,$){const G=this.toRdfHandlers[typeof C];if(G)for(const q of G){const _=q.toRdf(C,$);if(_)return _}throw new Error(`Invalid JavaScript value: '${C}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerBoolean=void 0;const Q=S(6374);_e.TypeHandlerBoolean=(()=>{class ${fromRdf(q,_){switch(q.value){case"true":case"1":return!0;case"false":case"0":return!1}return _&&Q.Translator.incorrectRdfDataType(q),!1}toRdf(q,{datatype:_,dataFactory:E}){return E.literal(q?"true":"false",_||E.namedNode($.TYPE))}}return $.TYPE="http://www.w3.org/2001/XMLSchema#boolean",$})()},1600:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerDate=void 0;const Q=S(6374);_e.TypeHandlerDate=(()=>{class ${fromRdf(q,_){switch(_&&!q.value.match($.VALIDATORS[q.datatype.value.substr(33,q.datatype.value.length)])&&Q.Translator.incorrectRdfDataType(q),q.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(q.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const E=q.value.split("-");return new Date(0,parseInt(E[0],10)-1,parseInt(E[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(q.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(q.value+"-01");default:return new Date(q.value)}}toRdf(q,{datatype:_,dataFactory:E}){if(_=_||E.namedNode($.TYPES[0]),!(q instanceof Date))return null;const N=q;let z;switch(_.value){case"http://www.w3.org/2001/XMLSchema#gDay":z=String(N.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":z=N.getUTCMonth()+1+"-"+N.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":z=String(N.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":z=N.getUTCFullYear()+"-"+(N.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":z=N.toISOString().replace(/T.*$/,"");break;default:z=N.toISOString()}return E.literal(z,_)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],$.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},$})()},1511:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberDouble=void 0;const Q=S(6374);_e.TypeHandlerNumberDouble=(()=>{class ${fromRdf(q,_){const E=parseFloat(q.value);return _&&isNaN(E)&&Q.Translator.incorrectRdfDataType(q),E}toRdf(q,{datatype:_,dataFactory:E}){return _=_||E.namedNode($.TYPES[0]),isNaN(q)?E.literal("NaN",_):isFinite(q)?q%1==0?null:E.literal(q.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),_):E.literal(q>0?"INF":"-INF",_)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],$})()},9199:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberInteger=void 0;const Q=S(6374);_e.TypeHandlerNumberInteger=(()=>{class ${fromRdf(q,_){const E=parseInt(q.value,10);return _&&(isNaN(E)||q.value.indexOf(".")>=0)&&Q.Translator.incorrectRdfDataType(q),E}toRdf(q,{datatype:_,dataFactory:E}){return E.literal(String(q),_||E.namedNode(q<=$.MAX_INT&&q>=$.MIN_INT?$.TYPES[0]:$.TYPES[1]))}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],$.MAX_INT=2147483647,$.MIN_INT=-2147483648,$})()},2210:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerString=void 0,_e.TypeHandlerString=(()=>{class Q{fromRdf($){return $.value}toRdf($,{datatype:G,dataFactory:q}){return q.literal($,G)}}return Q.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Q})()},2538:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,G,q,_){void 0===_&&(_=q);var E=Object.getOwnPropertyDescriptor(G,q);(!E||("get"in E?!G.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return G[q]}}),Object.defineProperty($,_,E)}:function($,G,q,_){void 0===_&&(_=q),$[_]=G[q]}),C=this&&this.__exportStar||function($,G){for(var q in $)"default"!==q&&!Object.prototype.hasOwnProperty.call(G,q)&&Q(G,$,q)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(88),_e),C(S(1600),_e),C(S(1511),_e),C(S(9199),_e),C(S(2210),_e)},2821:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,G,q,_){void 0===_&&(_=q),Object.defineProperty($,_,{enumerable:!0,get:function(){return G[q]}})}:function($,G,q,_){void 0===_&&(_=q),$[_]=G[q]}),C=this&&this.__exportStar||function($,G){for(var q in $)"default"!==q&&!Object.prototype.hasOwnProperty.call(G,q)&&Q(G,$,q)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(5664),_e)},758:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseError=void 0;class S extends Error{constructor(C,$){const G=C.saxStream._parser;super(C.trackPosition?`Line ${G.line+1} column ${G.column+1}: ${$}`:$)}}_e.ParseError=S},5664:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseType=_e.RdfXmlParser=void 0;const Q=S(7054),C=S(9528),$=S(1793),G=S(758),q=S(2633);class _ extends $.Transform{constructor(z){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},z&&(Object.assign(this,z),this.options=z),this.dataFactory||(this.dataFactory=new q.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=C.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(z,P){const F={};let oe=!1;for(const B in z.attributes)B.startsWith("xmlns")&&(5===B.length?(oe=!0,F[""]=z.attributes[B]):":"===B.charAt(5)&&(oe=!0,F[B.substr(6)]=z.attributes[B]));const x=P&&P.ns?P.ns:[_.DEFAULT_NS];return oe?x.concat([F]):x}static expandPrefixedTerm(z,P,F){const oe=z.indexOf(":");let x,B;oe>=0?(x=z.substr(0,oe),B=z.substr(oe+1)):(x="",B=z);let se=null,Y=null;for(let J=P.length-1;J>=0;J--){const ee=P[J][x];if(ee){se=ee;break}Y||(Y=P[J][""])}if(!se){if(x&&"xmlns"!==x)throw new G.ParseError(F,`The prefix '${x}' in term '${z}' was not bound.`);se=Y||""}return{prefix:x,local:B,uri:se}}static isValidIri(z){return _.IRI_REGEX.test(z)}import(z){const P=new $.PassThrough({readableObjectMode:!0});z.on("error",oe=>F.emit("error",oe)),z.on("data",oe=>P.push(oe)),z.on("end",()=>P.push(null));const F=P.pipe(new _(this.options));return F}_transform(z,P,F){try{this.saxStream.write(z,P)}catch(oe){return F(oe)}F()}newParseError(z){return new G.ParseError(this,z)}valueToUri(z,P){return this.uriToNamedNode(Q.resolve(z,P.baseIRI))}uriToNamedNode(z){if(!_.isValidIri(z))throw this.newParseError(`Invalid URI: ${z}`);return this.dataFactory.namedNode(z)}validateNcname(z){if(!_.NCNAME_MATCHER.test(z))throw this.newParseError(`Not a valid NCName: ${z}`)}attachSaxListeners(){this.saxStream.on("error",z=>this.emit("error",z)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(z){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let F=E.RESOURCE;if(P&&(P.hadChildren=!0,F=P.childrenParseType),P&&P.childrenStringTags){const x=z.name;let B="";for(const ee in z.attributes)B+=` ${ee}="${z.attributes[ee]}"`;P.childrenStringTags.push(`<${x}${B}>`);const J={childrenStringTags:P.childrenStringTags};return J.childrenStringEmitClosingTag=`</${x}>`,void this.activeTagStack.push(J)}const oe={};P?(oe.language=P.language,oe.baseIRI=P.baseIRI):oe.baseIRI=this.baseIRI,this.activeTagStack.push(oe),oe.ns=_.parseNamespace(z,P),F===E.RESOURCE?this.onTagResource(z,oe,P,!P):this.onTagProperty(z,oe,P)}onTagResource(z,P,F,oe){const x=_.expandPrefixedTerm(z.name,P.ns,this);P.childrenParseType=E.PROPERTY;let B=!0;if(x.uri===_.RDF){if(!oe&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(x.local)>=0)throw this.newParseError(`Illegal node element name: ${x.local}`);switch(x.local){case"RDF":P.childrenParseType=E.RESOURCE;case"Description":B=!1}}const se=[],Y=[];let J=null,ee=!1,W=!1,k=null;for(const v in z.attributes){const I=z.attributes[v],T=_.expandPrefixedTerm(v,P.ns,this);if(F&&T.uri===_.RDF)switch(T.local){case"about":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);J=I;continue;case"ID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);this.validateNcname(I),J="#"+I,ee=!0;continue;case"nodeID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);this.validateNcname(I),J=I,W=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":k=I;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===_.XML){if("lang"===T.local){P.language=""===I?null:I.toLowerCase();continue}if("base"===T.local){P.baseIRI=Q.resolve(I,P.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(se.push(this.uriToNamedNode(T.uri+T.local)),Y.push(I))}if(null!==J&&(P.subject=W?this.dataFactory.blankNode(J):this.valueToUri(J,P),ee&&this.claimNodeId(P.subject)),P.subject||(P.subject=this.dataFactory.blankNode()),B){const v=this.uriToNamedNode(x.uri+x.local);this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),v,F?F.reifiedStatementId:null)}if(F){if(F.predicate)if(F.childrenCollectionSubject){const v=this.dataFactory.blankNode();this.emitTriple(F.childrenCollectionSubject,F.childrenCollectionPredicate,v,F.reifiedStatementId),this.emitTriple(v,this.dataFactory.namedNode(_.RDF+"first"),P.subject,P.reifiedStatementId),F.childrenCollectionSubject=v,F.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(F.subject,F.predicate,P.subject,F.reifiedStatementId);for(let v=0;v<F.predicateSubPredicates.length;v++)this.emitTriple(P.subject,F.predicateSubPredicates[v],F.predicateSubObjects[v],null);F.predicateSubPredicates=[],F.predicateSubObjects=[],F.predicateEmitted=!0}for(let v=0;v<se.length;v++){const I=this.dataFactory.literal(Y[v],P.datatype||P.language);this.emitTriple(P.subject,se[v],I,F.reifiedStatementId)}k&&this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(k),null)}}onTagProperty(z,P,F){const oe=_.expandPrefixedTerm(z.name,P.ns,this);if(P.childrenParseType=E.RESOURCE,P.subject=F.subject,oe.uri===_.RDF&&"li"===oe.local?(F.listItemCounter||(F.listItemCounter=1),P.predicate=this.uriToNamedNode(oe.uri+"_"+F.listItemCounter++)):P.predicate=this.uriToNamedNode(oe.uri+oe.local),oe.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(oe.local)>=0)throw this.newParseError(`Illegal property element name: ${oe.local}`);P.predicateSubPredicates=[],P.predicateSubObjects=[];let x=!1,B=!1,se=null,Y=!0;const J=[],ee=[];for(const W in z.attributes){const k=z.attributes[W],v=_.expandPrefixedTerm(W,P.ns,this);if(v.uri===_.RDF)switch(v.local){case"resource":if(se)throw this.newParseError(`Found both rdf:resource (${k}) and rdf:nodeID (${se}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${k})`);P.hadChildren=!0,se=k,Y=!1;continue;case"datatype":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${k}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${k})`);P.datatype=this.valueToUri(k,P);continue;case"nodeID":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${k}).`);if(P.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${k}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${k})`);this.validateNcname(k),P.hadChildren=!0,se=k,Y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(B)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(P.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${P.datatype.value})`);if(se)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${se})`);if("Resource"===k){x=!0,P.childrenParseType=E.PROPERTY;const I=this.dataFactory.blankNode();this.emitTriple(P.subject,P.predicate,I,P.reifiedStatementId),P.subject=I,P.predicate=null}else"Collection"===k?(x=!0,P.hadChildren=!0,P.childrenCollectionSubject=P.subject,P.childrenCollectionPredicate=P.predicate,Y=!1):"Literal"===k&&(x=!0,P.childrenTagsToString=!0,P.childrenStringTags=[]);continue;case"ID":this.validateNcname(k),P.reifiedStatementId=this.valueToUri("#"+k,P),this.claimNodeId(P.reifiedStatementId);continue}else if(v.uri===_.XML&&"lang"===v.local){P.language=""===k?null:k.toLowerCase();continue}if("xml"!==v.prefix&&"xmlns"!==v.prefix&&v.uri){if(x||P.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${k}`);P.hadChildren=!0,B=!0,J.push(this.uriToNamedNode(v.uri+v.local)),ee.push(this.dataFactory.literal(k,P.datatype||P.language))}}if(null!==se){const W=P.subject;P.subject=Y?this.dataFactory.blankNode(se):this.valueToUri(se,P),this.emitTriple(W,P.predicate,P.subject,P.reifiedStatementId);for(let k=0;k<J.length;k++)this.emitTriple(P.subject,J[k],ee[k],null);P.predicateEmitted=!0}else Y&&(P.predicateSubPredicates=J,P.predicateSubObjects=ee,P.predicateEmitted=!1)}emitTriple(z,P,F,oe){this.push(this.dataFactory.quad(z,P,F,this.defaultGraph)),oe&&(this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"subject"),z,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"predicate"),P,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"object"),F,this.defaultGraph)))}claimNodeId(z){if(!this.allowDuplicateRdfIds){if(this.nodeIds[z.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${z.value}'.`);this.nodeIds[z.value]=!0}}onText(z){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;P&&(P.childrenStringTags?P.childrenStringTags.push(z):P.predicate&&(P.text=z))}onCloseTag(){const z=this.activeTagStack.pop();if(z.childrenStringEmitClosingTag&&z.childrenStringTags.push(z.childrenStringEmitClosingTag),z.childrenTagsToString&&(z.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),z.text=z.childrenStringTags.join(""),z.hadChildren=!1),z.childrenCollectionSubject)this.emitTriple(z.childrenCollectionSubject,z.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),z.reifiedStatementId);else if(z.predicate)if(z.hadChildren||z.childrenParseType===E.PROPERTY){if(!z.predicateEmitted){const P=this.dataFactory.blankNode();this.emitTriple(z.subject,z.predicate,P,z.reifiedStatementId);for(let F=0;F<z.predicateSubPredicates.length;F++)this.emitTriple(P,z.predicateSubPredicates[F],z.predicateSubObjects[F],null)}}else this.emitTriple(z.subject,z.predicate,this.dataFactory.literal(z.text||"",z.datatype||z.language),z.reifiedStatementId)}onDoctype(z){z.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(P,F,oe)=>(this.saxStream._parser.ENTITIES[F]=oe,""))}}var E,N;_e.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(N=E=_e.ParseType||(_e.ParseType={}))[N.RESOURCE=0]="RESOURCE",N[N.PROPERTY=1]="PROPERTY"},9987:(Ue,_e,S)=>{"use strict";const{SymbolDispose:Q}=S(6305),{AbortError:C,codes:$}=S(4370),{isNodeStream:G,isWebStream:q,kControllerErrorFunction:_}=S(5428),E=S(4618),{ERR_INVALID_ARG_TYPE:N}=$;let z;Ue.exports.addAbortSignal=function(oe,x){if(((F,oe)=>{if("object"!=typeof F||!("aborted"in F))throw new N("signal","AbortSignal",F)})(oe),!G(x)&&!q(x))throw new N("stream",["ReadableStream","WritableStream","Stream"],x);return Ue.exports.addAbortSignalNoValidate(oe,x)},Ue.exports.addAbortSignalNoValidate=function(F,oe){if("object"!=typeof F||!("aborted"in F))return oe;const x=G(oe)?()=>{oe.destroy(new C(void 0,{cause:F.reason}))}:()=>{oe[_](new C(void 0,{cause:F.reason}))};if(F.aborted)x();else{z=z||S(2656).addAbortListener;const B=z(F,x);E(oe,B[Q])}return oe}},2960:(Ue,_e,S)=>{"use strict";const{StringPrototypeSlice:Q,SymbolIterator:C,TypedArrayPrototypeSet:$,Uint8Array:G}=S(6305),{Buffer:q}=S(1657),{inspect:_}=S(2656);Ue.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(N){const z={data:N,next:null};this.length>0?this.tail.next=z:this.head=z,this.tail=z,++this.length}unshift(N){const z={data:N,next:this.head};0===this.length&&(this.tail=z),this.head=z,++this.length}shift(){if(0===this.length)return;const N=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,N}clear(){this.head=this.tail=null,this.length=0}join(N){if(0===this.length)return"";let z=this.head,P=""+z.data;for(;null!==(z=z.next);)P+=N+z.data;return P}concat(N){if(0===this.length)return q.alloc(0);const z=q.allocUnsafe(N>>>0);let P=this.head,F=0;for(;P;)$(z,P.data,F),F+=P.data.length,P=P.next;return z}consume(N,z){const P=this.head.data;if(N<P.length){const F=P.slice(0,N);return this.head.data=P.slice(N),F}return N===P.length?this.shift():z?this._getString(N):this._getBuffer(N)}first(){return this.head.data}*[C](){for(let N=this.head;N;N=N.next)yield N.data}_getString(N){let z="",P=this.head,F=0;do{const oe=P.data;if(!(N>oe.length)){N===oe.length?(z+=oe,++F,this.head=P.next?P.next:this.tail=null):(z+=Q(oe,0,N),this.head=P,P.data=Q(oe,N));break}z+=oe,N-=oe.length,++F}while(null!==(P=P.next));return this.length-=F,z}_getBuffer(N){const z=q.allocUnsafe(N),P=N;let F=this.head,oe=0;do{const x=F.data;if(!(N>x.length)){N===x.length?($(z,x,P-N),++oe,this.head=F.next?F.next:this.tail=null):($(z,new G(x.buffer,x.byteOffset,N),P-N),this.head=F,F.data=x.slice(N));break}$(z,x,P-N),N-=x.length,++oe}while(null!==(F=F.next));return this.length-=oe,z}[Symbol.for("nodejs.util.inspect.custom")](N,z){return _(this,{...z,depth:0,customInspect:!1})}}},7721:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{pipeline:C}=S(4514),$=S(5931),{destroyer:G}=S(5601),{isNodeStream:q,isReadable:_,isWritable:E,isWebStream:N,isTransformStream:z,isWritableStream:P,isReadableStream:F}=S(5428),{AbortError:oe,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:B}}=S(4370),se=S(4618);Ue.exports=function(...J){if(0===J.length)throw new B("streams");if(1===J.length)return $.from(J[0]);const ee=[...J];if("function"==typeof J[0]&&(J[0]=$.from(J[0])),"function"==typeof J[J.length-1]){const Pe=J.length-1;J[Pe]=$.from(J[Pe])}for(let Pe=0;Pe<J.length;++Pe)if(q(J[Pe])||N(J[Pe])){if(Pe<J.length-1&&!(_(J[Pe])||F(J[Pe])||z(J[Pe])))throw new x(`streams[${Pe}]`,ee[Pe],"must be readable");if(Pe>0&&!(E(J[Pe])||P(J[Pe])||z(J[Pe])))throw new x(`streams[${Pe}]`,ee[Pe],"must be writable")}let W,k,v,I,T;const j=J[0],Me=C(J,function le(Pe){const He=I;I=null,He?He(Pe):Pe?T.destroy(Pe):!xe&&!ae&&T.destroy()}),ae=!!(E(j)||P(j)||z(j)),xe=!!(_(Me)||F(Me)||z(Me));if(T=new $({writableObjectMode:!(null==j||!j.writableObjectMode),readableObjectMode:!(null==Me||!Me.readableObjectMode),writable:ae,readable:xe}),ae){if(q(j))T._write=function(He,Qe,Xe){j.write(He,Qe)?Xe():W=Xe},T._final=function(He){j.end(),k=He},j.on("drain",function(){if(W){const He=W;W=null,He()}});else if(N(j)){const Qe=(z(j)?j.writable:j).getWriter();T._write=function(){var Xe=Q(function*(Ce,je,Se){try{yield Qe.ready,Qe.write(Ce).catch(()=>{}),Se()}catch(ke){Se(ke)}});return function(Ce,je,Se){return Xe.apply(this,arguments)}}(),T._final=function(){var Xe=Q(function*(Ce){try{yield Qe.ready,Qe.close().catch(()=>{}),k=Ce}catch(je){Ce(je)}});return function(Ce){return Xe.apply(this,arguments)}}()}const Pe=z(Me)?Me.readable:Me;se(Pe,()=>{if(k){const He=k;k=null,He()}})}if(xe)if(q(Me))Me.on("readable",function(){if(v){const Pe=v;v=null,Pe()}}),Me.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Pe=Me.read();if(null===Pe)return void(v=T._read);if(!T.push(Pe))return}};else if(N(Me)){const He=(z(Me)?Me.readable:Me).getReader();T._read=Q(function*(){for(;;)try{const{value:Qe,done:Xe}=yield He.read();if(!T.push(Qe))return;if(Xe)return void T.push(null)}catch{return}})}return T._destroy=function(Pe,He){!Pe&&null!==I&&(Pe=new oe),v=null,W=null,k=null,null===I?He(Pe):(I=He,q(Me)&&G(Me,Pe))},T}},5601:(Ue,_e,S)=>{"use strict";const Q=S(42),{aggregateTwoErrors:C,codes:{ERR_MULTIPLE_CALLBACK:$},AbortError:G}=S(4370),{Symbol:q}=S(6305),{kIsDestroyed:_,isDestroyed:E,isFinished:N,isServerRequest:z}=S(5428),P=q("kDestroy"),F=q("kConstruct");function oe(ae,xe,Pe){ae&&(xe&&!xe.errored&&(xe.errored=ae),Pe&&!Pe.errored&&(Pe.errored=ae))}function B(ae,xe,Pe){let He=!1;function Qe(Xe){if(He)return;He=!0;const Ce=ae._readableState,je=ae._writableState;oe(Xe,je,Ce),je&&(je.closed=!0),Ce&&(Ce.closed=!0),"function"==typeof Pe&&Pe(Xe),Xe?Q.nextTick(se,ae,Xe):Q.nextTick(Y,ae)}try{ae._destroy(xe||null,Qe)}catch(Xe){Qe(Xe)}}function se(ae,xe){J(ae,xe),Y(ae)}function Y(ae){const xe=ae._readableState,Pe=ae._writableState;Pe&&(Pe.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Pe&&Pe.emitClose||null!=xe&&xe.emitClose)&&ae.emit("close")}function J(ae,xe){const Pe=ae._readableState,He=ae._writableState;null!=He&&He.errorEmitted||null!=Pe&&Pe.errorEmitted||(He&&(He.errorEmitted=!0),Pe&&(Pe.errorEmitted=!0),ae.emit("error",xe))}function W(ae,xe,Pe){const He=ae._readableState,Qe=ae._writableState;if(null!=Qe&&Qe.destroyed||null!=He&&He.destroyed)return this;null!=He&&He.autoDestroy||null!=Qe&&Qe.autoDestroy?ae.destroy(xe):xe&&(Qe&&!Qe.errored&&(Qe.errored=xe),He&&!He.errored&&(He.errored=xe),Pe?Q.nextTick(J,ae,xe):J(ae,xe))}function v(ae){let xe=!1;function Pe(He){if(xe)return void W(ae,He??new $);xe=!0;const Qe=ae._readableState,Xe=ae._writableState,Ce=Xe||Qe;Qe&&(Qe.constructed=!0),Xe&&(Xe.constructed=!0),Ce.destroyed?ae.emit(P,He):He?W(ae,He,!0):Q.nextTick(I,ae)}try{ae._construct(He=>{Q.nextTick(Pe,He)})}catch(He){Q.nextTick(Pe,He)}}function I(ae){ae.emit(F)}function T(ae){return ae?.setHeader&&"function"==typeof ae.abort}function le(ae){ae.emit("close")}function j(ae,xe){ae.emit("error",xe),Q.nextTick(le,ae)}Ue.exports={construct:function k(ae,xe){if("function"!=typeof ae._construct)return;const Pe=ae._readableState,He=ae._writableState;Pe&&(Pe.constructed=!1),He&&(He.constructed=!1),ae.once(F,xe),!(ae.listenerCount(F)>1)&&Q.nextTick(v,ae)},destroyer:function Me(ae,xe){!ae||E(ae)||(!xe&&!N(ae)&&(xe=new G),z(ae)?(ae.socket=null,ae.destroy(xe)):T(ae)?ae.abort():T(ae.req)?ae.req.abort():"function"==typeof ae.destroy?ae.destroy(xe):"function"==typeof ae.close?ae.close():xe?Q.nextTick(j,ae,xe):Q.nextTick(le,ae),ae.destroyed||(ae[_]=!0))},destroy:function x(ae,xe){const Pe=this._readableState,He=this._writableState,Qe=He||Pe;return null!=He&&He.destroyed||null!=Pe&&Pe.destroyed?("function"==typeof xe&&xe(),this):(oe(ae,He,Pe),He&&(He.destroyed=!0),Pe&&(Pe.destroyed=!0),Qe.constructed?B(this,ae,xe):this.once(P,function(Xe){B(this,C(Xe,ae),xe)}),this)},undestroy:function ee(){const ae=this._readableState,xe=this._writableState;ae&&(ae.constructed=!0,ae.closed=!1,ae.closeEmitted=!1,ae.destroyed=!1,ae.errored=null,ae.errorEmitted=!1,ae.reading=!1,ae.ended=!1===ae.readable,ae.endEmitted=!1===ae.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:W}},5931:(Ue,_e,S)=>{"use strict";const{ObjectDefineProperties:Q,ObjectGetOwnPropertyDescriptor:C,ObjectKeys:$,ObjectSetPrototypeOf:G}=S(6305);Ue.exports=E;const q=S(8383),_=S(9764);G(E.prototype,q.prototype),G(E,q);{const F=$(_.prototype);for(let oe=0;oe<F.length;oe++){const x=F[oe];E.prototype[x]||(E.prototype[x]=_.prototype[x])}}function E(F){if(!(this instanceof E))return new E(F);q.call(this,F),_.call(this,F),F?(this.allowHalfOpen=!1!==F.allowHalfOpen,!1===F.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===F.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let N,P;function z(){return void 0===N&&(N={}),N}Q(E.prototype,{writable:{__proto__:null,...C(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...C(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...C(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...C(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...C(_.prototype,"writableLength")},writableFinished:{__proto__:null,...C(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...C(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...C(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...C(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(F){this._readableState&&this._writableState&&(this._readableState.destroyed=F,this._writableState.destroyed=F)}}}),E.fromWeb=function(F,oe){return z().newStreamDuplexFromReadableWritablePair(F,oe)},E.toWeb=function(F){return z().newReadableWritablePairFromDuplex(F)},E.from=function(F){return P||(P=S(8078)),P(F,"body")}},8078:(Ue,_e,S)=>{var Q=S(7156).default,C=S(6737).default,$=S(8186).default;const G=S(42),q=S(1657),{isReadable:_,isWritable:E,isIterable:N,isNodeStream:z,isReadableNodeStream:P,isWritableNodeStream:F,isDuplexNodeStream:oe,isReadableStream:x,isWritableStream:B}=S(5428),se=S(4618),{AbortError:Y,codes:{ERR_INVALID_ARG_TYPE:J,ERR_INVALID_RETURN_VALUE:ee}}=S(4370),{destroyer:W}=S(5601),k=S(5931),v=S(8383),I=S(9764),{createDeferredPromise:T}=S(2656),le=S(55),j=globalThis.Blob||q.Blob,Me=typeof j<"u"?function(Ce){return Ce instanceof j}:function(Ce){return!1},ae=globalThis.AbortController||S(3982).AbortController,{FunctionPrototypeCall:xe}=S(6305);class Pe extends k{constructor(Ce){super(Ce),!1===Ce?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Ce?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Qe(Xe){const Ce=Xe.readable&&"function"!=typeof Xe.readable.read?v.wrap(Xe.readable):Xe.readable,je=Xe.writable;let de,Ae,nt,_t,Ke,Se=!!_(Ce),ke=!!E(je);function fe(R){const A=_t;_t=null,A?A(R):R&&Ke.destroy(R)}return Ke=new Pe({readableObjectMode:!(null==Ce||!Ce.readableObjectMode),writableObjectMode:!(null==je||!je.writableObjectMode),readable:Se,writable:ke}),ke&&(se(je,R=>{ke=!1,R&&W(Ce,R),fe(R)}),Ke._write=function(R,A,ie){je.write(R,A)?ie():de=ie},Ke._final=function(R){je.end(),Ae=R},je.on("drain",function(){if(de){const R=de;de=null,R()}}),je.on("finish",function(){if(Ae){const R=Ae;Ae=null,R()}})),Se&&(se(Ce,R=>{Se=!1,R&&W(Ce,R),fe(R)}),Ce.on("readable",function(){if(nt){const R=nt;nt=null,R()}}),Ce.on("end",function(){Ke.push(null)}),Ke._read=function(){for(;;){const R=Ce.read();if(null===R)return void(nt=Ke._read);if(!Ke.push(R))return}}),Ke._destroy=function(R,A){!R&&null!==_t&&(R=new Y),nt=null,de=null,Ae=null,null===_t?A(R):(_t=A,W(je,R),W(Ce,R))},Ke}Ue.exports=function Xe(Ce,je){if(oe(Ce))return Ce;if(P(Ce))return Qe({readable:Ce});if(F(Ce))return Qe({writable:Ce});if(z(Ce))return Qe({writable:!1,readable:!1});if(x(Ce))return Qe({readable:v.fromWeb(Ce)});if(B(Ce))return Qe({writable:I.fromWeb(Ce)});if("function"==typeof Ce){const{value:ke,write:de,final:Ae,destroy:nt}=function He(Xe){let{promise:Ce,resolve:je}=T();const Se=new ae,ke=Se.signal;return{value:Xe($(function*(){for(;;){const Ae=Ce;Ce=null;const{chunk:nt,done:_t,cb:Ke}=yield C(Ae);if(G.nextTick(Ke),_t)return;if(ke.aborted)throw new Y(void 0,{cause:ke.reason});({promise:Ce,resolve:je}=T()),yield nt}})(),{signal:ke}),write(Ae,nt,_t){const Ke=je;je=null,Ke({chunk:Ae,done:!1,cb:_t})},final(Ae){const nt=je;je=null,nt({done:!0,cb:Ae})},destroy(Ae,nt){Se.abort(),nt(Ae)}}}(Ce);if(N(ke))return le(Pe,ke,{objectMode:!0,write:de,final:Ae,destroy:nt});const _t=ke?.then;if("function"==typeof _t){let Ke;const fe=xe(_t,ke,R=>{if(null!=R)throw new ee("nully","body",R)},R=>{W(Ke,R)});return Ke=new Pe({objectMode:!0,readable:!1,write:de,final(R){Ae(Q(function*(){try{yield fe,G.nextTick(R,null)}catch(A){G.nextTick(R,A)}}))},destroy:nt})}throw new ee("Iterable, AsyncIterable or AsyncFunction",je,ke)}if(Me(Ce))return Xe(Ce.arrayBuffer());if(N(Ce))return le(Pe,Ce,{objectMode:!0,writable:!1});if(x(Ce?.readable)&&B(Ce?.writable))return Pe.fromWeb(Ce);if("object"==typeof Ce?.writable||"object"==typeof Ce?.readable)return Qe({readable:null!=Ce&&Ce.readable?P(Ce?.readable)?Ce?.readable:Xe(Ce.readable):void 0,writable:null!=Ce&&Ce.writable?F(Ce?.writable)?Ce?.writable:Xe(Ce.writable):void 0});const Se=Ce?.then;if("function"==typeof Se){let ke;return xe(Se,Ce,de=>{null!=de&&ke.push(de),ke.push(null)},de=>{W(ke,de)}),ke=new Pe({objectMode:!0,writable:!1,read(){}})}throw new J(je,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Ce)}},4618:(Ue,_e,S)=>{const Q=S(42),{AbortError:C,codes:$}=S(4370),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_PREMATURE_CLOSE:q}=$,{kEmptyObject:_,once:E}=S(2656),{validateAbortSignal:N,validateFunction:z,validateObject:P,validateBoolean:F}=S(2120),{Promise:oe,PromisePrototypeThen:x,SymbolDispose:B}=S(6305),{isClosed:se,isReadable:Y,isReadableNodeStream:J,isReadableStream:ee,isReadableFinished:W,isReadableErrored:k,isWritable:v,isWritableNodeStream:I,isWritableStream:T,isWritableFinished:le,isWritableErrored:j,isNodeStream:Me,willEmitClose:ae,kIsClosedPromise:xe}=S(5428);let Pe;const Qe=()=>{};function Xe(Se,ke,de){var Ae,nt;if(2===arguments.length?(de=ke,ke=_):null==ke?ke=_:P(ke,"options"),z(de,"callback"),N(ke.signal,"options.signal"),de=E(de),ee(Se)||T(Se))return function Ce(Se,ke,de){let Ae=!1,nt=Qe;if(ke.signal)if(nt=()=>{Ae=!0,de.call(Se,new C(void 0,{cause:ke.signal.reason}))},ke.signal.aborted)Q.nextTick(nt);else{Pe=Pe||S(2656).addAbortListener;const Ke=Pe(ke.signal,nt),fe=de;de=E((...R)=>{Ke[B](),fe.apply(Se,R)})}const _t=(...Ke)=>{Ae||Q.nextTick(()=>de.apply(Se,Ke))};return x(Se[xe].promise,_t,_t),Qe}(Se,ke,de);if(!Me(Se))throw new G("stream",["ReadableStream","WritableStream","Stream"],Se);const _t=null!==(Ae=ke.readable)&&void 0!==Ae?Ae:J(Se),Ke=null!==(nt=ke.writable)&&void 0!==nt?nt:I(Se),fe=Se._writableState,R=Se._readableState,A=()=>{Se.writable||Ve()};let ie=ae(Se)&&J(Se)===_t&&I(Se)===Ke,Z=le(Se,!1);const Ve=()=>{Z=!0,Se.destroyed&&(ie=!1),(!ie||Se.readable&&!_t)&&(!_t||Je)&&de.call(Se)};let Je=W(Se,!1);const ue=()=>{Je=!0,Se.destroyed&&(ie=!1),(!ie||Se.writable&&!Ke)&&(!Ke||Z)&&de.call(Se)},ne=Ee=>{de.call(Se,Ee)};let U=se(Se);const M=()=>{U=!0;const Ee=j(Se)||k(Se);return Ee&&"boolean"!=typeof Ee?de.call(Se,Ee):_t&&!Je&&J(Se,!0)&&!W(Se,!1)?de.call(Se,new q):!Ke||Z||le(Se,!1)?void de.call(Se):de.call(Se,new q)},O=()=>{U=!0;const Ee=j(Se)||k(Se);if(Ee&&"boolean"!=typeof Ee)return de.call(Se,Ee);de.call(Se)},he=()=>{Se.req.on("finish",Ve)};!function He(Se){return Se.setHeader&&"function"==typeof Se.abort}(Se)?Ke&&!fe&&(Se.on("end",A),Se.on("close",A)):(Se.on("complete",Ve),ie||Se.on("abort",M),Se.req?he():Se.on("request",he)),!ie&&"boolean"==typeof Se.aborted&&Se.on("aborted",M),Se.on("end",ue),Se.on("finish",Ve),!1!==ke.error&&Se.on("error",ne),Se.on("close",M),U?Q.nextTick(M):null!=fe&&fe.errorEmitted||null!=R&&R.errorEmitted?ie||Q.nextTick(O):(!_t&&(!ie||Y(Se))&&(Z||!1===v(Se))||!Ke&&(!ie||v(Se))&&(Je||!1===Y(Se))||R&&Se.req&&Se.aborted)&&Q.nextTick(O);const We=()=>{de=Qe,Se.removeListener("aborted",M),Se.removeListener("complete",Ve),Se.removeListener("abort",M),Se.removeListener("request",he),Se.req&&Se.req.removeListener("finish",Ve),Se.removeListener("end",A),Se.removeListener("close",A),Se.removeListener("finish",Ve),Se.removeListener("end",ue),Se.removeListener("error",ne),Se.removeListener("close",M)};if(ke.signal&&!U){const Ee=()=>{const Re=de;We(),Re.call(Se,new C(void 0,{cause:ke.signal.reason}))};if(ke.signal.aborted)Q.nextTick(Ee);else{Pe=Pe||S(2656).addAbortListener;const Re=Pe(ke.signal,Ee),ot=de;de=E((...bt)=>{Re[B](),ot.apply(Se,bt)})}}return We}Ue.exports=Xe,Ue.exports.finished=function je(Se,ke){var de;let Ae=!1;return null===ke&&(ke=_),null!==(de=ke)&&void 0!==de&&de.cleanup&&(F(ke.cleanup,"cleanup"),Ae=ke.cleanup),new oe((nt,_t)=>{const Ke=Xe(Se,ke,fe=>{Ae&&Ke(),fe?_t(fe):nt()})})}},55:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(42),{PromisePrototypeThen:$,SymbolAsyncIterator:G,SymbolIterator:q}=S(6305),{Buffer:_}=S(1657),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:N}=S(4370).codes;Ue.exports=function z(P,F,oe){let x,B;if("string"==typeof F||F instanceof _)return new P({objectMode:!0,...oe,read(){this.push(F),this.push(null)}});if(F&&F[G])B=!0,x=F[G]();else{if(!F||!F[q])throw new E("iterable",["Iterable"],F);B=!1,x=F[q]()}const se=new P({objectMode:!0,highWaterMark:1,...oe});let Y=!1;function ee(){return(ee=Q(function*(v){if(null!=v&&"function"==typeof x.throw){const{value:le,done:j}=yield x.throw(v);if(yield le,j)return}if("function"==typeof x.return){const{value:le}=yield x.return();yield le}})).apply(this,arguments)}function k(){return(k=Q(function*(){for(;;){try{const{value:v,done:I}=B?yield x.next():x.next();if(I)se.push(null);else{const T=v&&"function"==typeof v.then?yield v:v;if(null===T)throw Y=!1,new N;if(se.push(T))continue;Y=!1}}catch(v){se.destroy(v)}break}})).apply(this,arguments)}return se._read=function(){Y||(Y=!0,function W(){k.apply(this,arguments)}())},se._destroy=function(v,I){$(function J(v){return ee.apply(this,arguments)}(v),()=>C.nextTick(I,v),T=>C.nextTick(I,T||v))},se}},900:(Ue,_e,S)=>{"use strict";const{ArrayIsArray:Q,ObjectSetPrototypeOf:C}=S(6305),{EventEmitter:$}=S(2016);function G(_){$.call(this,_)}function q(_,E,N){if("function"==typeof _.prependListener)return _.prependListener(E,N);_._events&&_._events[E]?Q(_._events[E])?_._events[E].unshift(N):_._events[E]=[N,_._events[E]]:_.on(E,N)}C(G.prototype,$.prototype),C(G,$),G.prototype.pipe=function(_,E){const N=this;function z(Y){_.writable&&!1===_.write(Y)&&N.pause&&N.pause()}function P(){N.readable&&N.resume&&N.resume()}N.on("data",z),_.on("drain",P),!_._isStdio&&(!E||!1!==E.end)&&(N.on("end",oe),N.on("close",x));let F=!1;function oe(){F||(F=!0,_.end())}function x(){F||(F=!0,"function"==typeof _.destroy&&_.destroy())}function B(Y){se(),0===$.listenerCount(this,"error")&&this.emit("error",Y)}function se(){N.removeListener("data",z),_.removeListener("drain",P),N.removeListener("end",oe),N.removeListener("close",x),N.removeListener("error",B),_.removeListener("error",B),N.removeListener("end",se),N.removeListener("close",se),_.removeListener("close",se)}return q(N,"error",B),q(_,"error",B),N.on("end",se),N.on("close",se),_.on("close",se),_.emit("pipe",N),_},Ue.exports={Stream:G,prependListener:q}},7624:(Ue,_e,S)=>{"use strict";var Q=S(7156).default,C=S(8131).default,$=S(8237).default,G=S(6737).default,q=S(8186).default;const _=globalThis.AbortController||S(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:E,ERR_INVALID_ARG_TYPE:N,ERR_MISSING_ARGS:z,ERR_OUT_OF_RANGE:P},AbortError:F}=S(4370),{validateAbortSignal:oe,validateInteger:x,validateObject:B}=S(2120),se=S(6305).Symbol("kWeak"),Y=S(6305).Symbol("kResistStopPropagation"),{finished:J}=S(4618),ee=S(7721),{addAbortSignalNoValidate:W}=S(9987),{isWritable:k,isNodeStream:v}=S(5428),{deprecate:I}=S(2656),{ArrayPrototypePush:T,Boolean:le,MathFloor:j,Number:Me,NumberIsNaN:ae,Promise:xe,PromiseReject:Pe,PromiseResolve:He,PromisePrototypeThen:Qe,Symbol:Xe}=S(6305),Ce=Xe("kEmpty"),je=Xe("kEof");function ke(Ee,Re){if("function"!=typeof Ee)throw new N("fn",["Function","AsyncFunction"],Ee);null!=Re&&B(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal");let ot=1;null!=Re?.concurrency&&(ot=j(Re.concurrency));let bt=ot-1;return null!=Re?.highWaterMark&&(bt=j(Re.highWaterMark)),x(ot,"options.concurrency",1),x(bt,"options.highWaterMark",0),bt+=ot,function(){var It=q(function*(){const zt=S(2656).AbortSignalAny([Re?.signal].filter(le)),pe=this,H=[],te={signal:zt};let Le,it,lt=!1,Et=0;function en(){lt=!0,Dn()}function Dn(){Et-=1,Nn()}function Nn(){it&&!lt&&Et<ot&&H.length<bt&&(it(),it=null)}function wn(){return(wn=Q(function*(){try{var xr,ji=!1,Ks=!1;try{for(var Vo,Jr=$(pe);ji=!(Vo=yield Jr.next()).done;ji=!1){let vi=Vo.value;if(lt)return;if(zt.aborted)throw new F;try{if(vi=Ee(vi,te),vi===Ce)continue;vi=He(vi)}catch(Br){vi=Pe(Br)}Et+=1,Qe(vi,Dn,en),H.push(vi),Le&&(Le(),Le=null),!lt&&(H.length>=bt||Et>=ot)&&(yield new xe(Br=>{it=Br}))}}catch(vi){Ks=!0,xr=vi}finally{try{ji&&null!=Jr.return&&(yield Jr.return())}finally{if(Ks)throw xr}}H.push(je)}catch(vi){const Br=Pe(vi);Qe(Br,Dn,en),H.push(Br)}finally{lt=!0,Le&&(Le(),Le=null)}})).apply(this,arguments)}!function pn(){wn.apply(this,arguments)}();try{for(;;){for(;H.length>0;){const ji=yield G(H[0]);if(ji===je)return;if(zt.aborted)throw new F;ji!==Ce&&(yield ji),H.shift(),Nn()}yield G(new xe(ji=>{Le=ji}))}}finally{lt=!0,it&&(it(),it=null)}});return function mt(){return It.apply(this,arguments)}}().call(this)}function Ae(Ee){return nt.apply(this,arguments)}function nt(){return(nt=Q(function*(Ee,Re=void 0){var It,ot=!1,bt=!1;try{for(var mt=$(Z.call(this,Ee,Re));ot=!(yield mt.next()).done;ot=!1)return!0}catch(pe){bt=!0,It=pe}finally{try{ot&&null!=mt.return&&(yield mt.return())}finally{if(bt)throw It}}return!1})).apply(this,arguments)}function Ke(){return(Ke=Q(function*(Ee,Re=void 0){if("function"!=typeof Ee)throw new N("fn",["Function","AsyncFunction"],Ee);return!(yield Ae.call(this,Q(function*(...ot){return!(yield Ee(...ot))}),Re))})).apply(this,arguments)}function R(){return(R=Q(function*(Ee,Re){var It,ot=!1,bt=!1;try{for(var zt,mt=$(Z.call(this,Ee,Re));ot=!(zt=yield mt.next()).done;ot=!1)return zt.value}catch(pe){bt=!0,It=pe}finally{try{ot&&null!=mt.return&&(yield mt.return())}finally{if(bt)throw It}}})).apply(this,arguments)}function ie(){return ie=Q(function*(Ee,Re){if("function"!=typeof Ee)throw new N("fn",["Function","AsyncFunction"],Ee);function bt(){return(bt=Q(function*(te,Le){return yield Ee(te,Le),Ce})).apply(this,arguments)}var zt,It=!1,mt=!1;try{for(var pe=$(ke.call(this,function ot(te,Le){return bt.apply(this,arguments)},Re));It=!(yield pe.next()).done;It=!1);}catch(te){mt=!0,zt=te}finally{try{It&&null!=pe.return&&(yield pe.return())}finally{if(mt)throw zt}}}),ie.apply(this,arguments)}function Z(Ee,Re){if("function"!=typeof Ee)throw new N("fn",["Function","AsyncFunction"],Ee);function bt(){return(bt=Q(function*(It,mt){return(yield Ee(It,mt))?It:Ce})).apply(this,arguments)}return ke.call(this,function ot(It,mt){return bt.apply(this,arguments)},Re)}class Ve extends z{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ue(){return ue=Q(function*(Ee,Re,ot){var bt;if("function"!=typeof Ee)throw new N("reducer",["Function","AsyncFunction"],Ee);null!=ot&&B(ot,"options"),null!=ot?.signal&&oe(ot.signal,"options.signal");let It=arguments.length>1;if(null!=ot&&null!==(bt=ot.signal)&&void 0!==bt&&bt.aborted){const en=new F(void 0,{cause:ot.signal.reason});throw this.once("error",()=>{}),yield J(this.destroy(en)),en}const mt=new _,zt=mt.signal;null!=ot&&ot.signal&&ot.signal.addEventListener("abort",()=>mt.abort(),{once:!0,[se]:this,[Y]:!0});let pe=!1;try{var Le,H=!1,te=!1;try{for(var lt,it=$(this);H=!(lt=yield it.next()).done;H=!1){const en=lt.value;var Et;if(pe=!0,null!=ot&&null!==(Et=ot.signal)&&void 0!==Et&&Et.aborted)throw new F;It?Re=yield Ee(Re,en,{signal:zt}):(Re=en,It=!0)}}catch(en){te=!0,Le=en}finally{try{H&&null!=it.return&&(yield it.return())}finally{if(te)throw Le}}if(!pe&&!It)throw new Ve}finally{mt.abort()}return Re}),ue.apply(this,arguments)}function U(){return(U=Q(function*(Ee){null!=Ee&&B(Ee,"options"),null!=Ee?.signal&&oe(Ee.signal,"options.signal");const Re=[];var It,ot=!1,bt=!1;try{for(var zt,mt=$(this);ot=!(zt=yield mt.next()).done;ot=!1){const H=zt.value;var pe;if(null!=Ee&&null!==(pe=Ee.signal)&&void 0!==pe&&pe.aborted)throw new F(void 0,{cause:Ee.signal.reason});T(Re,H)}}catch(H){bt=!0,It=H}finally{try{ot&&null!=mt.return&&(yield mt.return())}finally{if(bt)throw It}}return Re})).apply(this,arguments)}function O(Ee){if(Ee=Me(Ee),ae(Ee))return 0;if(Ee<0)throw new P("number",">= 0",Ee);return Ee}Ue.exports.streamReturningOperators={asIndexedPairs:I(function de(Ee=void 0){return null!=Ee&&B(Ee,"options"),null!=Ee?.signal&&oe(Ee.signal,"options.signal"),function(){var Re=q(function*(){let bt=0;var zt,It=!1,mt=!1;try{for(var H,pe=$(this);It=!(H=yield G(pe.next())).done;It=!1){const Le=H.value;var te;if(null!=Ee&&null!==(te=Ee.signal)&&void 0!==te&&te.aborted)throw new F({cause:Ee.signal.reason});yield[bt++,Le]}}catch(Le){mt=!0,zt=Le}finally{try{It&&null!=pe.return&&(yield G(pe.return()))}finally{if(mt)throw zt}}});return function ot(){return Re.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function he(Ee,Re=void 0){return null!=Re&&B(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),Ee=O(Ee),function(){var ot=q(function*(){var It;if(null!=Re&&null!==(It=Re.signal)&&void 0!==It&&It.aborted)throw new F;var pe,mt=!1,zt=!1;try{for(var te,H=$(this);mt=!(te=yield G(H.next())).done;mt=!1){const it=te.value;var Le;if(null!=Re&&null!==(Le=Re.signal)&&void 0!==Le&&Le.aborted)throw new F;Ee--<=0&&(yield it)}}catch(it){zt=!0,pe=it}finally{try{mt&&null!=H.return&&(yield G(H.return()))}finally{if(zt)throw pe}}});return function bt(){return ot.apply(this,arguments)}}().call(this)},filter:Z,flatMap:function M(Ee,Re){const ot=ke.call(this,Ee,Re);return function(){var bt=q(function*(){var pe,mt=!1,zt=!1;try{for(var te,H=$(ot);mt=!(te=yield G(H.next())).done;mt=!1){const Le=te.value;yield*C($(Le),G)}}catch(Le){zt=!0,pe=Le}finally{try{mt&&null!=H.return&&(yield G(H.return()))}finally{if(zt)throw pe}}});return function It(){return bt.apply(this,arguments)}}().call(this)},map:ke,take:function We(Ee,Re=void 0){return null!=Re&&B(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),Ee=O(Ee),function(){var ot=q(function*(){var It;if(null!=Re&&null!==(It=Re.signal)&&void 0!==It&&It.aborted)throw new F;var pe,mt=!1,zt=!1;try{for(var te,H=$(this);mt=!(te=yield G(H.next())).done;mt=!1){const it=te.value;var Le;if(null!=Re&&null!==(Le=Re.signal)&&void 0!==Le&&Le.aborted)throw new F;if(Ee-- >0&&(yield it),Ee<=0)return}}catch(it){zt=!0,pe=it}finally{try{mt&&null!=H.return&&(yield G(H.return()))}finally{if(zt)throw pe}}});return function bt(){return ot.apply(this,arguments)}}().call(this)},compose:function Se(Ee,Re){if(null!=Re&&B(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),v(Ee)&&!k(Ee))throw new E("stream",Ee,"must be writable");const ot=ee(this,Ee);return null!=Re&&Re.signal&&W(Re.signal,ot),ot}},Ue.exports.promiseReturningOperators={every:function _t(Ee){return Ke.apply(this,arguments)},forEach:function A(Ee,Re){return ie.apply(this,arguments)},reduce:function Je(Ee,Re,ot){return ue.apply(this,arguments)},toArray:function ne(Ee){return U.apply(this,arguments)},some:Ae,find:function fe(Ee,Re){return R.apply(this,arguments)}}},6973:(Ue,_e,S)=>{"use strict";const{ObjectSetPrototypeOf:Q}=S(6305);Ue.exports=$;const C=S(123);function $(G){if(!(this instanceof $))return new $(G);C.call(this,G)}Q($.prototype,C.prototype),Q($,C),$.prototype._transform=function(G,q,_){_(null,G)}},4514:(Ue,_e,S)=>{var Q=S(7156).default,C=S(8186).default,$=S(6737).default,G=S(8131).default,q=S(8237).default;const _=S(42),{ArrayIsArray:E,Promise:N,SymbolAsyncIterator:z,SymbolDispose:P}=S(6305),F=S(4618),{once:oe}=S(2656),x=S(5601),B=S(5931),{aggregateTwoErrors:se,codes:{ERR_INVALID_ARG_TYPE:Y,ERR_INVALID_RETURN_VALUE:J,ERR_MISSING_ARGS:ee,ERR_STREAM_DESTROYED:W,ERR_STREAM_PREMATURE_CLOSE:k},AbortError:v}=S(4370),{validateFunction:I,validateAbortSignal:T}=S(2120),{isIterable:le,isReadable:j,isReadableNodeStream:Me,isNodeStream:ae,isTransformStream:xe,isWebStream:Pe,isReadableStream:He,isReadableFinished:Qe}=S(5428),Xe=globalThis.AbortController||S(3982).AbortController;let Ce,je,Se;function ke(Je,ue,ne){let U=!1;return Je.on("close",()=>{U=!0}),{destroy:O=>{U||(U=!0,x.destroyer(Je,O||new W("pipe")))},cleanup:F(Je,{readable:ue,writable:ne},O=>{U=!O})}}function Ae(Je){if(le(Je))return Je;if(Me(Je))return function nt(Je){return _t.apply(this,arguments)}(Je);throw new Y("val",["Readable","Iterable","AsyncIterable"],Je)}function _t(){return(_t=C(function*(Je){je||(je=S(8383)),yield*G(q(je.prototype[z].call(Je)),$)})).apply(this,arguments)}function Ke(Je,ue,ne,U){return fe.apply(this,arguments)}function fe(){return(fe=Q(function*(Je,ue,ne,{end:U}){let M,O=null;const he=zt=>{if(zt&&(M=zt),O){const pe=O;O=null,pe()}},We=()=>new N((zt,pe)=>{M?pe(M):O=()=>{M?pe(M):zt()}});ue.on("drain",he);const Ee=F(ue,{readable:!1},he);try{ue.writableNeedDrain&&(yield We());var bt,Re=!1,ot=!1;try{for(var mt,It=q(Je);Re=!(mt=yield It.next()).done;Re=!1)ue.write(mt.value)||(yield We())}catch(zt){ot=!0,bt=zt}finally{try{Re&&null!=It.return&&(yield It.return())}finally{if(ot)throw bt}}U&&(ue.end(),yield We()),ne()}catch(zt){ne(M!==zt?se(M,zt):zt)}finally{Ee(),ue.off("drain",he)}})).apply(this,arguments)}function R(Je,ue,ne,U){return A.apply(this,arguments)}function A(){return(A=Q(function*(Je,ue,ne,{end:U}){xe(ue)&&(ue=ue.writable);const M=ue.getWriter();try{var We,O=!1,he=!1;try{for(var Re,Ee=q(Je);O=!(Re=yield Ee.next()).done;O=!1){const ot=Re.value;yield M.ready,M.write(ot).catch(()=>{})}}catch(ot){he=!0,We=ot}finally{try{O&&null!=Ee.return&&(yield Ee.return())}finally{if(he)throw We}}yield M.ready,U&&(yield M.close()),ne()}catch(ot){try{yield M.abort(ot),ne(ot)}catch(bt){ne(bt)}}})).apply(this,arguments)}function Z(Je,ue,ne){if(1===Je.length&&E(Je[0])&&(Je=Je[0]),Je.length<2)throw new ee("streams");const U=new Xe,M=U.signal,O=ne?.signal,he=[];function We(){zt(new v)}let Ee,Re,ot;T(O,"options.signal"),Se=Se||S(2656).addAbortListener,O&&(Ee=Se(O,We));const bt=[];let pe,It=0;function mt(it){zt(it,0==--It)}function zt(it,lt){var Et;if(it&&(!Re||"ERR_STREAM_PREMATURE_CLOSE"===Re.code)&&(Re=it),Re||lt){for(;bt.length;)bt.shift()(Re);null===(Et=Ee)||void 0===Et||Et[P](),U.abort(),lt&&(Re||he.forEach(en=>en()),_.nextTick(ue,Re,ot))}}for(let it=0;it<Je.length;it++){const lt=Je[it],Et=it<Je.length-1,en=it>0,Dn=Et||!1!==ne?.end,Nn=it===Je.length-1;if(ae(lt)){let pn=function(wn){wn&&"AbortError"!==wn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==wn.code&&mt(wn)};if(Dn){const{destroy:wn,cleanup:ji}=ke(lt,Et,en);bt.push(wn),j(lt)&&Nn&&he.push(ji)}lt.on("error",pn),j(lt)&&Nn&&he.push(()=>{lt.removeListener("error",pn)})}if(0===it)if("function"==typeof lt){if(pe=lt({signal:M}),!le(pe))throw new J("Iterable, AsyncIterable or Stream","source",pe)}else pe=le(lt)||Me(lt)||xe(lt)?lt:B.from(lt);else if("function"==typeof lt){var H;if(pe=xe(pe)?Ae(null===(H=pe)||void 0===H?void 0:H.readable):Ae(pe),pe=lt(pe,{signal:M}),Et){if(!le(pe,!0))throw new J("AsyncIterable",`transform[${it-1}]`,pe)}else{var te;Ce||(Ce=S(6973));const pn=new Ce({objectMode:!0}),wn=null===(te=pe)||void 0===te?void 0:te.then;if("function"==typeof wn)It++,wn.call(pe,xr=>{ot=xr,null!=xr&&pn.write(xr),Dn&&pn.end(),_.nextTick(mt)},xr=>{pn.destroy(xr),_.nextTick(mt,xr)});else if(le(pe,!0))It++,Ke(pe,pn,mt,{end:Dn});else{if(!He(pe)&&!xe(pe))throw new J("AsyncIterable or Promise","destination",pe);It++,Ke(pe.readable||pe,pn,mt,{end:Dn})}pe=pn;const{destroy:ji,cleanup:Ks}=ke(pe,!1,!0);bt.push(ji),Nn&&he.push(Ks)}}else if(ae(lt)){if(Me(pe)){It+=2;const pn=Ve(pe,lt,mt,{end:Dn});j(lt)&&Nn&&he.push(pn)}else if(xe(pe)||He(pe))It++,Ke(pe.readable||pe,lt,mt,{end:Dn});else{if(!le(pe))throw new Y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);It++,Ke(pe,lt,mt,{end:Dn})}pe=lt}else if(Pe(lt)){if(Me(pe))It++,R(Ae(pe),lt,mt,{end:Dn});else if(He(pe)||le(pe))It++,R(pe,lt,mt,{end:Dn});else{if(!xe(pe))throw new Y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);It++,R(pe.readable,lt,mt,{end:Dn})}pe=lt}else pe=B.from(lt)}return(null!=M&&M.aborted||null!=O&&O.aborted)&&_.nextTick(We),pe}function Ve(Je,ue,ne,{end:U}){let M=!1;if(ue.on("close",()=>{M||ne(new k)}),Je.pipe(ue,{end:!1}),U){let he=function(){M=!0,ue.end()};Qe(Je)?_.nextTick(he):Je.once("end",he)}else ne();return F(Je,{readable:!0,writable:!1},he=>{const We=Je._readableState;he&&"ERR_STREAM_PREMATURE_CLOSE"===he.code&&We&&We.ended&&!We.errored&&!We.errorEmitted?Je.once("end",ne).once("error",ne):ne(he)}),F(ue,{readable:!1,writable:!0},ne)}Ue.exports={pipelineImpl:Z,pipeline:function ie(...Je){return Z(Je,oe(function de(Je){return I(Je[Je.length-1],"streams[stream.length - 1]"),Je.pop()}(Je)))}}},8383:(Ue,_e,S)=>{var Q=S(6737).default,C=S(8186).default;const $=S(42),{ArrayPrototypeIndexOf:G,NumberIsInteger:q,NumberIsNaN:_,NumberParseInt:E,ObjectDefineProperties:N,ObjectKeys:z,ObjectSetPrototypeOf:P,Promise:F,SafeSet:oe,SymbolAsyncDispose:x,SymbolAsyncIterator:B,Symbol:se}=S(6305);Ue.exports=mt,mt.ReadableState=It;const{EventEmitter:Y}=S(2016),{Stream:J,prependListener:ee}=S(900),{Buffer:W}=S(1657),{addAbortSignal:k}=S(9987),v=S(4618);let I=S(2656).debuglog("stream",$e=>{I=$e});const T=S(2960),le=S(5601),{getHighWaterMark:j,getDefaultHighWaterMark:Me}=S(8782),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:xe,ERR_METHOD_NOT_IMPLEMENTED:Pe,ERR_OUT_OF_RANGE:He,ERR_STREAM_PUSH_AFTER_EOF:Qe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Xe},AbortError:Ce}=S(4370),{validateObject:je}=S(2120),Se=se("kPaused"),{StringDecoder:ke}=S(2024),de=S(55);P(mt.prototype,J.prototype),P(mt,J);const Ae=()=>{},{errorOrDestroy:nt}=le,_t=1,A=16,ie=32,Z=64,U=2048,M=4096,Ee=65536;function bt($e){return{enumerable:!1,get(){return 0!=(this.state&$e)},set(Ze){Ze?this.state|=$e:this.state&=~$e}}}function It($e,Ze,St){"boolean"!=typeof St&&(St=Ze instanceof S(5931)),this.state=U|M|A|ie,$e&&$e.objectMode&&(this.state|=_t),St&&$e&&$e.readableObjectMode&&(this.state|=_t),this.highWaterMark=$e?j(this,$e,"readableHighWaterMark",St):Me(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[Se]=null,$e&&!1===$e.emitClose&&(this.state&=~U),$e&&!1===$e.autoDestroy&&(this.state&=~M),this.errored=null,this.defaultEncoding=$e&&$e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,$e&&$e.encoding&&(this.decoder=new ke($e.encoding),this.encoding=$e.encoding)}function mt($e){if(!(this instanceof mt))return new mt($e);const Ze=this instanceof S(5931);this._readableState=new It($e,this,Ze),$e&&("function"==typeof $e.read&&(this._read=$e.read),"function"==typeof $e.destroy&&(this._destroy=$e.destroy),"function"==typeof $e.construct&&(this._construct=$e.construct),$e.signal&&!Ze&&k($e.signal,this)),J.call(this,$e),le.construct(this,()=>{this._readableState.needReadable&&en(this,this._readableState)})}function zt($e,Ze,St,Gt){I("readableAddChunk",Ze);const tn=$e._readableState;let or;if(tn.state&_t||("string"==typeof Ze?tn.encoding!==(St=St||tn.defaultEncoding)&&(Gt&&tn.encoding?Ze=W.from(Ze,St).toString(tn.encoding):(Ze=W.from(Ze,St),St="")):Ze instanceof W?St="":J._isUint8Array(Ze)?(Ze=J._uint8ArrayToBuffer(Ze),St=""):null!=Ze&&(or=new xe("chunk",["string","Buffer","Uint8Array"],Ze))),or)nt($e,or);else if(null===Ze)tn.state&=-9,function it($e,Ze){if(I("onEofChunk"),!Ze.ended){if(Ze.decoder){const St=Ze.decoder.end();St&&St.length&&(Ze.buffer.push(St),Ze.length+=Ze.objectMode?1:St.length)}Ze.ended=!0,Ze.sync?lt($e):(Ze.needReadable=!1,Ze.emittedReadable=!0,Et($e))}}($e,tn);else if(tn.state&_t||Ze&&Ze.length>0)if(Gt)if(4&tn.state)nt($e,new Xe);else{if(tn.destroyed||tn.errored)return!1;pe($e,tn,Ze,!0)}else if(tn.ended)nt($e,new Qe);else{if(tn.destroyed||tn.errored)return!1;tn.state&=-9,tn.decoder&&!St?(Ze=tn.decoder.write(Ze),tn.objectMode||0!==Ze.length?pe($e,tn,Ze,!1):en($e,tn)):pe($e,tn,Ze,!1)}else Gt||(tn.state&=-9,en($e,tn));return!tn.ended&&(tn.length<tn.highWaterMark||0===tn.length)}function pe($e,Ze,St,Gt){Ze.flowing&&0===Ze.length&&!Ze.sync&&$e.listenerCount("data")>0?(Ze.state&Ee?Ze.awaitDrainWriters.clear():Ze.awaitDrainWriters=null,Ze.dataEmitted=!0,$e.emit("data",St)):(Ze.length+=Ze.objectMode?1:St.length,Gt?Ze.buffer.unshift(St):Ze.buffer.push(St),Ze.state&Z&&lt($e)),en($e,Ze)}function Le($e,Ze){return $e<=0||0===Ze.length&&Ze.ended?0:Ze.state&_t?1:_($e)?Ze.flowing&&Ze.length?Ze.buffer.first().length:Ze.length:$e<=Ze.length?$e:Ze.ended?Ze.length:0}function lt($e){const Ze=$e._readableState;I("emitReadable",Ze.needReadable,Ze.emittedReadable),Ze.needReadable=!1,Ze.emittedReadable||(I("emitReadable",Ze.flowing),Ze.emittedReadable=!0,$.nextTick(Et,$e))}function Et($e){const Ze=$e._readableState;I("emitReadable_",Ze.destroyed,Ze.length,Ze.ended),!Ze.destroyed&&!Ze.errored&&(Ze.length||Ze.ended)&&($e.emit("readable"),Ze.emittedReadable=!1),Ze.needReadable=!Ze.flowing&&!Ze.ended&&Ze.length<=Ze.highWaterMark,xr($e)}function en($e,Ze){!Ze.readingMore&&Ze.constructed&&(Ze.readingMore=!0,$.nextTick(Dn,$e,Ze))}function Dn($e,Ze){for(;!Ze.reading&&!Ze.ended&&(Ze.length<Ze.highWaterMark||Ze.flowing&&0===Ze.length);){const St=Ze.length;if(I("maybeReadMore read 0"),$e.read(0),St===Ze.length)break}Ze.readingMore=!1}function pn($e){const Ze=$e._readableState;Ze.readableListening=$e.listenerCount("readable")>0,Ze.resumeScheduled&&!1===Ze[Se]?Ze.flowing=!0:$e.listenerCount("data")>0?$e.resume():Ze.readableListening||(Ze.flowing=null)}function wn($e){I("readable nexttick read 0"),$e.read(0)}function Ks($e,Ze){I("resume",Ze.reading),Ze.reading||$e.read(0),Ze.resumeScheduled=!1,$e.emit("resume"),xr($e),Ze.flowing&&!Ze.reading&&$e.read(0)}function xr($e){const Ze=$e._readableState;for(I("flow",Ze.flowing);Ze.flowing&&null!==$e.read(););}function Jr($e,Ze){"function"!=typeof $e.read&&($e=mt.wrap($e,{objectMode:!0}));const St=function Vo($e,Ze){return vi.apply(this,arguments)}($e,Ze);return St.stream=$e,St}function vi(){return(vi=C(function*($e,Ze){let tn,St=Ae;function Gt(Zr){this===$e?(St(),St=Ae):St=Zr}$e.on("readable",Gt);const or=v($e,{writable:!1},Zr=>{tn=Zr?ae(tn,Zr):null,St(),St=Ae});try{for(;;){const Zr=$e.destroyed?null:$e.read();if(null!==Zr)yield Zr;else{if(tn)throw tn;if(null===tn)return;yield Q(new F(Gt))}}}catch(Zr){throw tn=ae(tn,Zr),tn}finally{!tn&&!1===Ze?.destroyOnReturn||void 0!==tn&&!$e._readableState.autoDestroy?($e.off("readable",Gt),or()):le.destroyer($e,null)}})).apply(this,arguments)}function Br($e,Ze){if(0===Ze.length)return null;let St;return Ze.objectMode?St=Ze.buffer.shift():!$e||$e>=Ze.length?(St=Ze.decoder?Ze.buffer.join(""):1===Ze.buffer.length?Ze.buffer.first():Ze.buffer.concat(Ze.length),Ze.buffer.clear()):St=Ze.buffer.consume($e,Ze.decoder),St}function da($e){const Ze=$e._readableState;I("endReadable",Ze.endEmitted),Ze.endEmitted||(Ze.ended=!0,$.nextTick(ka,Ze,$e))}function ka($e,Ze){if(I("endReadableNT",$e.endEmitted,$e.length),!$e.errored&&!$e.closeEmitted&&!$e.endEmitted&&0===$e.length)if($e.endEmitted=!0,Ze.emit("end"),Ze.writable&&!1===Ze.allowHalfOpen)$.nextTick(Jc,Ze);else if($e.autoDestroy){const St=Ze._writableState;(!St||St.autoDestroy&&(St.finished||!1===St.writable))&&Ze.destroy()}}function Jc($e){$e.writable&&!$e.writableEnded&&!$e.destroyed&&$e.end()}let ha;function Ns(){return void 0===ha&&(ha={}),ha}N(It.prototype,{objectMode:bt(_t),ended:bt(2),endEmitted:bt(4),reading:bt(8),constructed:bt(A),sync:bt(ie),needReadable:bt(Z),emittedReadable:bt(128),readableListening:bt(256),resumeScheduled:bt(512),errorEmitted:bt(1024),emitClose:bt(U),autoDestroy:bt(M),destroyed:bt(8192),closed:bt(16384),closeEmitted:bt(32768),multiAwaitDrain:bt(Ee),readingMore:bt(1<<17),dataEmitted:bt(1<<18)}),mt.prototype.destroy=le.destroy,mt.prototype._undestroy=le.undestroy,mt.prototype._destroy=function($e,Ze){Ze($e)},mt.prototype[Y.captureRejectionSymbol]=function($e){this.destroy($e)},mt.prototype[x]=function(){let $e;return this.destroyed||($e=this.readableEnded?null:new Ce,this.destroy($e)),new F((Ze,St)=>v(this,Gt=>Gt&&Gt!==$e?St(Gt):Ze(null)))},mt.prototype.push=function($e,Ze){return zt(this,$e,Ze,!1)},mt.prototype.unshift=function($e,Ze){return zt(this,$e,Ze,!0)},mt.prototype.isPaused=function(){const $e=this._readableState;return!0===$e[Se]||!1===$e.flowing},mt.prototype.setEncoding=function($e){const Ze=new ke($e);this._readableState.decoder=Ze,this._readableState.encoding=this._readableState.decoder.encoding;const St=this._readableState.buffer;let Gt="";for(const tn of St)Gt+=Ze.write(tn);return St.clear(),""!==Gt&&St.push(Gt),this._readableState.length=Gt.length,this},mt.prototype.read=function($e){I("read",$e),void 0===$e?$e=NaN:q($e)||($e=E($e,10));const Ze=this._readableState,St=$e;if($e>Ze.highWaterMark&&(Ze.highWaterMark=function te($e){if($e>1073741824)throw new He("size","<= 1GiB",$e);return $e--,$e|=$e>>>1,$e|=$e>>>2,$e|=$e>>>4,$e|=$e>>>8,$e|=$e>>>16,++$e}($e)),0!==$e&&(Ze.state&=-129),0===$e&&Ze.needReadable&&((0!==Ze.highWaterMark?Ze.length>=Ze.highWaterMark:Ze.length>0)||Ze.ended))return I("read: emitReadable",Ze.length,Ze.ended),0===Ze.length&&Ze.ended?da(this):lt(this),null;if(0===($e=Le($e,Ze))&&Ze.ended)return 0===Ze.length&&da(this),null;let tn,Gt=0!=(Ze.state&Z);if(I("need readable",Gt),(0===Ze.length||Ze.length-$e<Ze.highWaterMark)&&(Gt=!0,I("length less than watermark",Gt)),Ze.ended||Ze.reading||Ze.destroyed||Ze.errored||!Ze.constructed)Gt=!1,I("reading, ended or constructing",Gt);else if(Gt){I("do read"),Ze.state|=8|ie,0===Ze.length&&(Ze.state|=Z);try{this._read(Ze.highWaterMark)}catch(or){nt(this,or)}Ze.state&=~ie,Ze.reading||($e=Le(St,Ze))}return tn=$e>0?Br($e,Ze):null,null===tn?(Ze.needReadable=Ze.length<=Ze.highWaterMark,$e=0):(Ze.length-=$e,Ze.multiAwaitDrain?Ze.awaitDrainWriters.clear():Ze.awaitDrainWriters=null),0===Ze.length&&(Ze.ended||(Ze.needReadable=!0),St!==$e&&Ze.ended&&da(this)),null!==tn&&!Ze.errorEmitted&&!Ze.closeEmitted&&(Ze.dataEmitted=!0,this.emit("data",tn)),tn},mt.prototype._read=function($e){throw new Pe("_read()")},mt.prototype.pipe=function($e,Ze){const St=this,Gt=this._readableState;1===Gt.pipes.length&&(Gt.multiAwaitDrain||(Gt.multiAwaitDrain=!0,Gt.awaitDrainWriters=new oe(Gt.awaitDrainWriters?[Gt.awaitDrainWriters]:[]))),Gt.pipes.push($e),I("pipe count=%d opts=%j",Gt.pipes.length,Ze);const or=Ze&&!1===Ze.end||$e===$.stdout||$e===$.stderr?kr:Jt;function Jt(){I("onend"),$e.end()}Gt.endEmitted?$.nextTick(or):St.once("end",or),$e.on("unpipe",function Zr(ti,Li){I("onunpipe"),ti===St&&Li&&!1===Li.hasUnpiped&&(Li.hasUnpiped=!0,function dc(){I("cleanup"),$e.removeListener("close",Wt),$e.removeListener("finish",jn),Js&&$e.removeListener("drain",Js),$e.removeListener("error",Ho),$e.removeListener("unpipe",Zr),St.removeListener("end",Jt),St.removeListener("end",kr),St.removeListener("data",ln),Ni=!0,Js&&Gt.awaitDrainWriters&&(!$e._writableState||$e._writableState.needDrain)&&Js()}())});let Js,Ni=!1;function ci(){Ni||(1===Gt.pipes.length&&Gt.pipes[0]===$e?(I("false write response, pause",0),Gt.awaitDrainWriters=$e,Gt.multiAwaitDrain=!1):Gt.pipes.length>1&&Gt.pipes.includes($e)&&(I("false write response, pause",Gt.awaitDrainWriters.size),Gt.awaitDrainWriters.add($e)),St.pause()),Js||(Js=function Nn($e,Ze){return function(){const Gt=$e._readableState;Gt.awaitDrainWriters===Ze?(I("pipeOnDrain",1),Gt.awaitDrainWriters=null):Gt.multiAwaitDrain&&(I("pipeOnDrain",Gt.awaitDrainWriters.size),Gt.awaitDrainWriters.delete(Ze)),(!Gt.awaitDrainWriters||0===Gt.awaitDrainWriters.size)&&$e.listenerCount("data")&&$e.resume()}}(St,$e),$e.on("drain",Js))}function ln(ti){I("ondata");const Li=$e.write(ti);I("dest.write",Li),!1===Li&&ci()}function Ho(ti){if(I("onerror",ti),kr(),$e.removeListener("error",Ho),0===$e.listenerCount("error")){const Li=$e._writableState||$e._readableState;Li&&!Li.errorEmitted?nt($e,ti):$e.emit("error",ti)}}function Wt(){$e.removeListener("finish",jn),kr()}function jn(){I("onfinish"),$e.removeListener("close",Wt),kr()}function kr(){I("unpipe"),St.unpipe($e)}return St.on("data",ln),ee($e,"error",Ho),$e.once("close",Wt),$e.once("finish",jn),$e.emit("pipe",St),!0===$e.writableNeedDrain?ci():Gt.flowing||(I("pipe resume"),St.resume()),$e},mt.prototype.unpipe=function($e){const Ze=this._readableState;if(0===Ze.pipes.length)return this;if(!$e){const tn=Ze.pipes;Ze.pipes=[],this.pause();for(let or=0;or<tn.length;or++)tn[or].emit("unpipe",this,{hasUnpiped:!1});return this}const Gt=G(Ze.pipes,$e);return-1===Gt||(Ze.pipes.splice(Gt,1),0===Ze.pipes.length&&this.pause(),$e.emit("unpipe",this,{hasUnpiped:!1})),this},mt.prototype.addListener=mt.prototype.on=function($e,Ze){const St=J.prototype.on.call(this,$e,Ze),Gt=this._readableState;return"data"===$e?(Gt.readableListening=this.listenerCount("readable")>0,!1!==Gt.flowing&&this.resume()):"readable"===$e&&!Gt.endEmitted&&!Gt.readableListening&&(Gt.readableListening=Gt.needReadable=!0,Gt.flowing=!1,Gt.emittedReadable=!1,I("on readable",Gt.length,Gt.reading),Gt.length?lt(this):Gt.reading||$.nextTick(wn,this)),St},mt.prototype.off=mt.prototype.removeListener=function($e,Ze){const St=J.prototype.removeListener.call(this,$e,Ze);return"readable"===$e&&$.nextTick(pn,this),St},mt.prototype.removeAllListeners=function($e){const Ze=J.prototype.removeAllListeners.apply(this,arguments);return("readable"===$e||void 0===$e)&&$.nextTick(pn,this),Ze},mt.prototype.resume=function(){const $e=this._readableState;return $e.flowing||(I("resume"),$e.flowing=!$e.readableListening,function ji($e,Ze){Ze.resumeScheduled||(Ze.resumeScheduled=!0,$.nextTick(Ks,$e,Ze))}(this,$e)),$e[Se]=!1,this},mt.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Se]=!0,this},mt.prototype.wrap=function($e){let Ze=!1;$e.on("data",Gt=>{!this.push(Gt)&&$e.pause&&(Ze=!0,$e.pause())}),$e.on("end",()=>{this.push(null)}),$e.on("error",Gt=>{nt(this,Gt)}),$e.on("close",()=>{this.destroy()}),$e.on("destroy",()=>{this.destroy()}),this._read=()=>{Ze&&$e.resume&&(Ze=!1,$e.resume())};const St=z($e);for(let Gt=1;Gt<St.length;Gt++){const tn=St[Gt];void 0===this[tn]&&"function"==typeof $e[tn]&&(this[tn]=$e[tn].bind($e))}return this},mt.prototype[B]=function(){return Jr(this)},mt.prototype.iterator=function($e){return void 0!==$e&&je($e,"options"),Jr(this,$e)},N(mt.prototype,{readable:{__proto__:null,get(){const $e=this._readableState;return!(!$e||!1===$e.readable||$e.destroyed||$e.errorEmitted||$e.endEmitted)},set($e){this._readableState&&(this._readableState.readable=!!$e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function($e){this._readableState&&(this._readableState.flowing=$e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set($e){this._readableState&&(this._readableState.destroyed=$e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),N(It.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Se]},set($e){this[Se]=!!$e}}}),mt._fromList=Br,mt.from=function($e,Ze){return de(mt,$e,Ze)},mt.fromWeb=function($e,Ze){return Ns().newStreamReadableFromReadableStream($e,Ze)},mt.toWeb=function($e,Ze){return Ns().newReadableStreamFromStreamReadable($e,Ze)},mt.wrap=function($e,Ze){var St,Gt;return new mt({objectMode:null===(St=null!==(Gt=$e.readableObjectMode)&&void 0!==Gt?Gt:$e.objectMode)||void 0===St||St,...Ze,destroy(tn,or){le.destroyer($e,tn),or(tn)}}).wrap($e)}},8782:(Ue,_e,S)=>{"use strict";const{MathFloor:Q,NumberIsInteger:C}=S(6305),{validateInteger:$}=S(2120),{ERR_INVALID_ARG_VALUE:G}=S(4370).codes;let q=16384,_=16;function N(F){return F?_:q}Ue.exports={getHighWaterMark:function P(F,oe,x,B){const se=function E(F,oe,x){return null!=F.highWaterMark?F.highWaterMark:oe?F[x]:null}(oe,B,x);if(null!=se){if(!C(se)||se<0)throw new G(B?`options.${x}`:"options.highWaterMark",se);return Q(se)}return N(F.objectMode)},getDefaultHighWaterMark:N,setDefaultHighWaterMark:function z(F,oe){$(oe,"value",0),F?_=oe:q=oe}}},123:(Ue,_e,S)=>{"use strict";const{ObjectSetPrototypeOf:Q,Symbol:C}=S(6305);Ue.exports=E;const{ERR_METHOD_NOT_IMPLEMENTED:$}=S(4370).codes,G=S(5931),{getHighWaterMark:q}=S(8782);Q(E.prototype,G.prototype),Q(E,G);const _=C("kCallback");function E(P){if(!(this instanceof E))return new E(P);const F=P?q(this,P,"readableHighWaterMark",!0):null;0===F&&(P={...P,highWaterMark:null,readableHighWaterMark:F,writableHighWaterMark:P.writableHighWaterMark||0}),G.call(this,P),this._readableState.sync=!1,this[_]=null,P&&("function"==typeof P.transform&&(this._transform=P.transform),"function"==typeof P.flush&&(this._flush=P.flush)),this.on("prefinish",z)}function N(P){"function"!=typeof this._flush||this.destroyed?(this.push(null),P&&P()):this._flush((F,oe)=>{F?P?P(F):this.destroy(F):(null!=oe&&this.push(oe),this.push(null),P&&P())})}function z(){this._final!==N&&N.call(this)}E.prototype._final=N,E.prototype._transform=function(P,F,oe){throw new $("_transform()")},E.prototype._write=function(P,F,oe){const x=this._readableState,B=this._writableState,se=x.length;this._transform(P,F,(Y,J)=>{Y?oe(Y):(null!=J&&this.push(J),B.ended||se===x.length||x.length<x.highWaterMark?oe():this[_]=oe)})},E.prototype._read=function(){if(this[_]){const P=this[_];this[_]=null,P()}}},5428:(Ue,_e,S)=>{"use strict";const{SymbolAsyncIterator:Q,SymbolIterator:C,SymbolFor:$}=S(6305),G=$("nodejs.stream.destroyed"),q=$("nodejs.stream.errored"),_=$("nodejs.stream.readable"),E=$("nodejs.stream.writable"),N=$("nodejs.stream.disturbed"),z=$("nodejs.webstream.isClosedPromise"),P=$("nodejs.webstream.controllerErrorFunction");function F(de,Ae=!1){var nt;return!(!de||"function"!=typeof de.pipe||"function"!=typeof de.on||Ae&&("function"!=typeof de.pause||"function"!=typeof de.resume)||de._writableState&&!1===(null===(nt=de._readableState)||void 0===nt?void 0:nt.readable)||de._writableState&&!de._readableState)}function oe(de){var Ae;return!(!de||"function"!=typeof de.write||"function"!=typeof de.on||de._readableState&&!1===(null===(Ae=de._writableState)||void 0===Ae?void 0:Ae.writable))}function B(de){return de&&(de._readableState||de._writableState||"function"==typeof de.write&&"function"==typeof de.on||"function"==typeof de.pipe&&"function"==typeof de.on)}function se(de){return!(!de||B(de)||"function"!=typeof de.pipeThrough||"function"!=typeof de.getReader||"function"!=typeof de.cancel)}function Y(de){return!(!de||B(de)||"function"!=typeof de.getWriter||"function"!=typeof de.abort)}function J(de){return!(!de||B(de)||"object"!=typeof de.readable||"object"!=typeof de.writable)}function k(de){if(!B(de))return null;const _t=de._writableState||de._readableState;return!!(de.destroyed||de[G]||null!=_t&&_t.destroyed)}function v(de){if(!oe(de))return null;if(!0===de.writableEnded)return!0;const Ae=de._writableState;return(null==Ae||!Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)}function le(de,Ae){if(!F(de))return null;const nt=de._readableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.endEmitted?null:!!(nt.endEmitted||!1===Ae&&!0===nt.ended&&0===nt.length))}function j(de){return de&&null!=de[_]?de[_]:"boolean"!=typeof de?.readable?null:!k(de)&&F(de)&&de.readable&&!le(de)}function Me(de){return de&&null!=de[E]?de[E]:"boolean"!=typeof de?.writable?null:!k(de)&&oe(de)&&de.writable&&!v(de)}function Qe(de){return"boolean"==typeof de._closed&&"boolean"==typeof de._defaultKeepAlive&&"boolean"==typeof de._removedConnection&&"boolean"==typeof de._removedContLen}function Xe(de){return"boolean"==typeof de._sent100&&Qe(de)}Ue.exports={isDestroyed:k,kIsDestroyed:G,isDisturbed:function Se(de){var Ae;return!(!de||!(null!==(Ae=de[N])&&void 0!==Ae?Ae:de.readableDidRead||de.readableAborted))},kIsDisturbed:N,isErrored:function ke(de){var Ae,nt,_t,Ke,fe,R,A,ie,Z,Ve;return!(!de||!(null!==(Ae=null!==(nt=null!==(_t=null!==(Ke=null!==(fe=null!==(R=de[q])&&void 0!==R?R:de.readableErrored)&&void 0!==fe?fe:de.writableErrored)&&void 0!==Ke?Ke:null===(A=de._readableState)||void 0===A?void 0:A.errorEmitted)&&void 0!==_t?_t:null===(ie=de._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==nt?nt:null===(Z=de._readableState)||void 0===Z?void 0:Z.errored)&&void 0!==Ae?Ae:null!==(Ve=de._writableState)&&void 0!==Ve&&Ve.errored))},kIsErrored:q,isReadable:j,kIsReadable:_,kIsClosedPromise:z,kControllerErrorFunction:P,kIsWritable:E,isClosed:function He(de){if(!B(de))return null;if("boolean"==typeof de.closed)return de.closed;const Ae=de._writableState,nt=de._readableState;return"boolean"==typeof Ae?.closed||"boolean"==typeof nt?.closed?Ae?.closed||nt?.closed:"boolean"==typeof de._closed&&Qe(de)?de._closed:null},isDuplexNodeStream:function x(de){return!(!de||"function"!=typeof de.pipe||!de._readableState||"function"!=typeof de.on||"function"!=typeof de.write)},isFinished:function ae(de,Ae){return B(de)?!!k(de)||!(!1!==Ae?.readable&&j(de)||!1!==Ae?.writable&&Me(de)):null},isIterable:function W(de,Ae){return null!=de&&(!0===Ae?"function"==typeof de[Q]:!1===Ae?"function"==typeof de[C]:"function"==typeof de[Q]||"function"==typeof de[C])},isReadableNodeStream:F,isReadableStream:se,isReadableEnded:function T(de){if(!F(de))return null;if(!0===de.readableEnded)return!0;const Ae=de._readableState;return!(!Ae||Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)},isReadableFinished:le,isReadableErrored:function Pe(de){var Ae,nt;return B(de)?de.readableErrored?de.readableErrored:null!==(Ae=null===(nt=de._readableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ae?Ae:null:null},isNodeStream:B,isWebStream:function ee(de){return se(de)||Y(de)||J(de)},isWritable:Me,isWritableNodeStream:oe,isWritableStream:Y,isWritableEnded:v,isWritableFinished:function I(de,Ae){if(!oe(de))return null;if(!0===de.writableFinished)return!0;const nt=de._writableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.finished?null:!!(nt.finished||!1===Ae&&!0===nt.ended&&0===nt.length))},isWritableErrored:function xe(de){var Ae,nt;return B(de)?de.writableErrored?de.writableErrored:null!==(Ae=null===(nt=de._writableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ae?Ae:null:null},isServerRequest:function Ce(de){var Ae;return"boolean"==typeof de._consuming&&"boolean"==typeof de._dumped&&void 0===(null===(Ae=de.req)||void 0===Ae?void 0:Ae.upgradeOrConnect)},isServerResponse:Xe,willEmitClose:function je(de){if(!B(de))return null;const _t=de._writableState||de._readableState;return!_t&&Xe(de)||!!(_t&&_t.autoDestroy&&_t.emitClose&&!1===_t.closed)},isTransformStream:J}},9764:(Ue,_e,S)=>{const Q=S(42),{ArrayPrototypeSlice:C,Error:$,FunctionPrototypeSymbolHasInstance:G,ObjectDefineProperty:q,ObjectDefineProperties:_,ObjectSetPrototypeOf:E,StringPrototypeToLowerCase:N,Symbol:z,SymbolHasInstance:P}=S(6305);Ue.exports=Xe,Xe.WritableState=He;const{EventEmitter:F}=S(2016),oe=S(900).Stream,{Buffer:x}=S(1657),B=S(5601),{addAbortSignal:se}=S(9987),{getHighWaterMark:Y,getDefaultHighWaterMark:J}=S(8782),{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_MULTIPLE_CALLBACK:k,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:le,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:Me}=S(4370).codes,{errorOrDestroy:ae}=B;function xe(){}E(Xe.prototype,oe.prototype),E(Xe,oe);const Pe=z("kOnFinished");function He(ne,U,M){"boolean"!=typeof M&&(M=U instanceof S(5931)),this.objectMode=!(!ne||!ne.objectMode),M&&(this.objectMode=this.objectMode||!(!ne||!ne.writableObjectMode)),this.highWaterMark=ne?Y(this,ne,"writableHighWaterMark",M):J(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(ne&&!1===ne.decodeStrings),this.defaultEncoding=ne&&ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=de.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Qe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ne||!1!==ne.emitClose,this.autoDestroy=!ne||!1!==ne.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Pe]=[]}function Qe(ne){ne.buffered=[],ne.bufferedIndex=0,ne.allBuffers=!0,ne.allNoop=!0}function Xe(ne){const U=this instanceof S(5931);if(!U&&!G(Xe,this))return new Xe(ne);this._writableState=new He(ne,this,U),ne&&("function"==typeof ne.write&&(this._write=ne.write),"function"==typeof ne.writev&&(this._writev=ne.writev),"function"==typeof ne.destroy&&(this._destroy=ne.destroy),"function"==typeof ne.final&&(this._final=ne.final),"function"==typeof ne.construct&&(this._construct=ne.construct),ne.signal&&se(ne.signal,this)),oe.call(this,ne),B.construct(this,()=>{const M=this._writableState;M.writing||Ke(this,M),ie(this,M)})}function Ce(ne,U,M,O){const he=ne._writableState;if("function"==typeof M)O=M,M=he.defaultEncoding;else{if(M){if("buffer"!==M&&!x.isEncoding(M))throw new Me(M)}else M=he.defaultEncoding;"function"!=typeof O&&(O=xe)}if(null===U)throw new le;if(!he.objectMode)if("string"==typeof U)!1!==he.decodeStrings&&(U=x.from(U,M),M="buffer");else if(U instanceof x)M="buffer";else{if(!oe._isUint8Array(U))throw new ee("chunk",["string","Buffer","Uint8Array"],U);U=oe._uint8ArrayToBuffer(U),M="buffer"}let We;return he.ending?We=new j:he.destroyed&&(We=new I("write")),We?(Q.nextTick(O,We),ae(ne,We,!0),We):(he.pendingcb++,function je(ne,U,M,O,he){const We=U.objectMode?1:M.length;U.length+=We;const Ee=U.length<U.highWaterMark;return Ee||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:M,encoding:O,callback:he}),U.allBuffers&&"buffer"!==O&&(U.allBuffers=!1),U.allNoop&&he!==xe&&(U.allNoop=!1)):(U.writelen=We,U.writecb=he,U.writing=!0,U.sync=!0,ne._write(M,O,U.onwrite),U.sync=!1),Ee&&!U.errored&&!U.destroyed}(ne,he,U,M,O))}function Se(ne,U,M,O,he,We,Ee){U.writelen=O,U.writecb=Ee,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new I("write")):M?ne._writev(he,U.onwrite):ne._write(he,We,U.onwrite),U.sync=!1}function ke(ne,U,M,O){--U.pendingcb,O(M),_t(U),ae(ne,M)}function de(ne,U){const M=ne._writableState,O=M.sync,he=M.writecb;"function"==typeof he?(M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0,U?(M.errored||(M.errored=U),ne._readableState&&!ne._readableState.errored&&(ne._readableState.errored=U),O?Q.nextTick(ke,ne,M,U,he):ke(ne,M,U,he)):(M.buffered.length>M.bufferedIndex&&Ke(ne,M),O?null!==M.afterWriteTickInfo&&M.afterWriteTickInfo.cb===he?M.afterWriteTickInfo.count++:(M.afterWriteTickInfo={count:1,cb:he,stream:ne,state:M},Q.nextTick(Ae,M.afterWriteTickInfo)):nt(ne,M,1,he))):ae(ne,new k)}function Ae({stream:ne,state:U,count:M,cb:O}){return U.afterWriteTickInfo=null,nt(ne,U,M,O)}function nt(ne,U,M,O){for(!U.ending&&!ne.destroyed&&0===U.length&&U.needDrain&&(U.needDrain=!1,ne.emit("drain"));M-- >0;)U.pendingcb--,O();U.destroyed&&_t(U),ie(ne,U)}function _t(ne){if(ne.writing)return;for(let he=ne.bufferedIndex;he<ne.buffered.length;++he){var U;const{chunk:We,callback:Ee}=ne.buffered[he];ne.length-=ne.objectMode?1:We.length,Ee(null!==(U=ne.errored)&&void 0!==U?U:new I("write"))}const M=ne[Pe].splice(0);for(let he=0;he<M.length;he++){var O;M[he](null!==(O=ne.errored)&&void 0!==O?O:new I("end"))}Qe(ne)}function Ke(ne,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;const{buffered:M,bufferedIndex:O,objectMode:he}=U,We=M.length-O;if(!We)return;let Ee=O;if(U.bufferProcessing=!0,We>1&&ne._writev){U.pendingcb-=We-1;const Re=U.allNoop?xe:bt=>{for(let It=Ee;It<M.length;++It)M[It].callback(bt)},ot=U.allNoop&&0===Ee?M:C(M,Ee);ot.allBuffers=U.allBuffers,Se(ne,U,!0,U.length,ot,"",Re),Qe(U)}else{do{const{chunk:Re,encoding:ot,callback:bt}=M[Ee];M[Ee++]=null,Se(ne,U,!1,he?1:Re.length,Re,ot,bt)}while(Ee<M.length&&!U.writing);Ee===M.length?Qe(U):Ee>256?(M.splice(0,Ee),U.bufferedIndex=0):U.bufferedIndex=Ee}U.bufferProcessing=!1}function fe(ne){return ne.ending&&!ne.destroyed&&ne.constructed&&0===ne.length&&!ne.errored&&0===ne.buffered.length&&!ne.finished&&!ne.writing&&!ne.errorEmitted&&!ne.closeEmitted}function ie(ne,U,M){fe(U)&&(function A(ne,U){!U.prefinished&&!U.finalCalled&&("function"!=typeof ne._final||U.destroyed?(U.prefinished=!0,ne.emit("prefinish")):(U.finalCalled=!0,function R(ne,U){let M=!1;function O(he){if(M)ae(ne,he??k());else if(M=!0,U.pendingcb--,he){const We=U[Pe].splice(0);for(let Ee=0;Ee<We.length;Ee++)We[Ee](he);ae(ne,he,U.sync)}else fe(U)&&(U.prefinished=!0,ne.emit("prefinish"),U.pendingcb++,Q.nextTick(Z,ne,U))}U.sync=!0,U.pendingcb++;try{ne._final(O)}catch(he){O(he)}U.sync=!1}(ne,U)))}(ne,U),0===U.pendingcb&&(M?(U.pendingcb++,Q.nextTick((O,he)=>{fe(he)?Z(O,he):he.pendingcb--},ne,U)):fe(U)&&(U.pendingcb++,Z(ne,U))))}function Z(ne,U){U.pendingcb--,U.finished=!0;const M=U[Pe].splice(0);for(let O=0;O<M.length;O++)M[O]();if(ne.emit("finish"),U.autoDestroy){const O=ne._readableState;(!O||O.autoDestroy&&(O.endEmitted||!1===O.readable))&&ne.destroy()}}He.prototype.getBuffer=function(){return C(this.buffered,this.bufferedIndex)},q(He.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),q(Xe,P,{__proto__:null,value:function(ne){return!!G(this,ne)||this===Xe&&ne&&ne._writableState instanceof He}}),Xe.prototype.pipe=function(){ae(this,new v)},Xe.prototype.write=function(ne,U,M){return!0===Ce(this,ne,U,M)},Xe.prototype.cork=function(){this._writableState.corked++},Xe.prototype.uncork=function(){const ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||Ke(this,ne))},Xe.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=N(U)),!x.isEncoding(U))throw new Me(U);return this._writableState.defaultEncoding=U,this},Xe.prototype._write=function(ne,U,M){if(!this._writev)throw new W("_write()");this._writev([{chunk:ne,encoding:U}],M)},Xe.prototype._writev=null,Xe.prototype.end=function(ne,U,M){const O=this._writableState;let he;if("function"==typeof ne?(M=ne,ne=null,U=null):"function"==typeof U&&(M=U,U=null),null!=ne){const We=Ce(this,ne,U);We instanceof $&&(he=We)}return O.corked&&(O.corked=1,this.uncork()),he||(O.errored||O.ending?O.finished?he=new T("end"):O.destroyed&&(he=new I("end")):(O.ending=!0,ie(this,O,!0),O.ended=!0)),"function"==typeof M&&(he||O.finished?Q.nextTick(M,he):O[Pe].push(M)),this},_(Xe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(ne){this._writableState&&(this._writableState.destroyed=ne)}},writable:{__proto__:null,get(){const ne=this._writableState;return!(!ne||!1===ne.writable||ne.destroyed||ne.errored||ne.ending||ne.ended)},set(ne){this._writableState&&(this._writableState.writable=!!ne)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const ne=this._writableState;return!!ne&&!ne.destroyed&&!ne.ending&&ne.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Ve=B.destroy;let Je;function ue(){return void 0===Je&&(Je={}),Je}Xe.prototype.destroy=function(ne,U){const M=this._writableState;return!M.destroyed&&(M.bufferedIndex<M.buffered.length||M[Pe].length)&&Q.nextTick(_t,M),Ve.call(this,ne,U),this},Xe.prototype._undestroy=B.undestroy,Xe.prototype._destroy=function(ne,U){U(ne)},Xe.prototype[F.captureRejectionSymbol]=function(ne){this.destroy(ne)},Xe.fromWeb=function(ne,U){return ue().newStreamWritableFromWritableStream(ne,U)},Xe.toWeb=function(ne){return ue().newWritableStreamFromStreamWritable(ne)}},2120:(Ue,_e,S)=>{"use strict";const{ArrayIsArray:Q,ArrayPrototypeIncludes:C,ArrayPrototypeJoin:$,ArrayPrototypeMap:G,NumberIsInteger:q,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:E,NumberMIN_SAFE_INTEGER:N,NumberParseInt:z,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:F,String:oe,StringPrototypeToUpperCase:x,StringPrototypeTrim:B}=S(6305),{hideStackFrames:se,codes:{ERR_SOCKET_BAD_PORT:Y,ERR_INVALID_ARG_TYPE:J,ERR_INVALID_ARG_VALUE:ee,ERR_OUT_OF_RANGE:W,ERR_UNKNOWN_SIGNAL:k}}=S(4370),{normalizeEncoding:v}=S(2656),{isAsyncFunction:I,isArrayBufferView:T}=S(2656).types,le={},ae=/^[0-7]+$/,He=se((Ee,Re,ot=N,bt=E)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!q(Ee))throw new W(Re,"an integer",Ee);if(Ee<ot||Ee>bt)throw new W(Re,`>= ${ot} && <= ${bt}`,Ee)}),Qe=se((Ee,Re,ot=-2147483648,bt=2147483647)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!q(Ee))throw new W(Re,"an integer",Ee);if(Ee<ot||Ee>bt)throw new W(Re,`>= ${ot} && <= ${bt}`,Ee)}),Xe=se((Ee,Re,ot=!1)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!q(Ee))throw new W(Re,"an integer",Ee);const bt=ot?1:0,It=4294967295;if(Ee<bt||Ee>It)throw new W(Re,`>= ${bt} && <= ${It}`,Ee)});function Ce(Ee,Re){if("string"!=typeof Ee)throw new J(Re,"string",Ee)}const Se=se((Ee,Re,ot)=>{if(!C(ot,Ee)){const It="must be one of: "+$(G(ot,mt=>"string"==typeof mt?`'${mt}'`:oe(mt)),", ");throw new ee(Re,Ee,It)}});function ke(Ee,Re){if("boolean"!=typeof Ee)throw new J(Re,"boolean",Ee)}function de(Ee,Re,ot){return null!=Ee&&P(Ee,Re)?Ee[Re]:ot}const Ae=se((Ee,Re,ot=null)=>{const bt=de(ot,"allowArray",!1),It=de(ot,"allowFunction",!1);if(!de(ot,"nullable",!1)&&null===Ee||!bt&&Q(Ee)||"object"!=typeof Ee&&(!It||"function"!=typeof Ee))throw new J(Re,"Object",Ee)}),nt=se((Ee,Re)=>{if(null!=Ee&&"object"!=typeof Ee&&"function"!=typeof Ee)throw new J(Re,"a dictionary",Ee)}),_t=se((Ee,Re,ot=0)=>{if(!Q(Ee))throw new J(Re,"Array",Ee);if(Ee.length<ot)throw new ee(Re,Ee,`must be longer than ${ot}`)}),ie=se((Ee,Re="buffer")=>{if(!T(Ee))throw new J(Re,["Buffer","TypedArray","DataView"],Ee)}),Je=se((Ee,Re)=>{if(void 0!==Ee&&(null===Ee||"object"!=typeof Ee||!("aborted"in Ee)))throw new J(Re,"AbortSignal",Ee)}),ue=se((Ee,Re)=>{if("function"!=typeof Ee)throw new J(Re,"Function",Ee)}),ne=se((Ee,Re)=>{if("function"!=typeof Ee||I(Ee))throw new J(Re,"Function",Ee)}),U=se((Ee,Re)=>{if(void 0!==Ee)throw new J(Re,"undefined",Ee)}),O=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(Ee,Re){if(typeof Ee>"u"||!F(O,Ee))throw new ee(Re,Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ue.exports={isInt32:function j(Ee){return Ee===(0|Ee)},isUint32:function Me(Ee){return Ee===Ee>>>0},parseFileMode:function Pe(Ee,Re,ot){if(typeof Ee>"u"&&(Ee=ot),"string"==typeof Ee){if(null===F(ae,Ee))throw new ee(Re,Ee,"must be a 32-bit unsigned integer or an octal string");Ee=z(Ee,8)}return Xe(Ee,Re),Ee},validateArray:_t,validateStringArray:function Ke(Ee,Re){_t(Ee,Re);for(let ot=0;ot<Ee.length;ot++)Ce(Ee[ot],`${Re}[${ot}]`)},validateBooleanArray:function fe(Ee,Re){_t(Ee,Re);for(let ot=0;ot<Ee.length;ot++)ke(Ee[ot],`${Re}[${ot}]`)},validateAbortSignalArray:function R(Ee,Re){_t(Ee,Re);for(let ot=0;ot<Ee.length;ot++){const bt=Ee[ot],It=`${Re}[${ot}]`;if(null==bt)throw new J(It,"AbortSignal",bt);Je(bt,It)}},validateBoolean:ke,validateBuffer:ie,validateDictionary:nt,validateEncoding:function Z(Ee,Re){const ot=v(Re),bt=Ee.length;if("hex"===ot&&bt%2!=0)throw new ee("encoding",Re,`is invalid for data of length ${bt}`)},validateFunction:ue,validateInt32:Qe,validateInteger:He,validateNumber:function je(Ee,Re,ot=void 0,bt){if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(null!=ot&&Ee<ot||null!=bt&&Ee>bt||(null!=ot||null!=bt)&&_(Ee))throw new W(Re,`${null!=ot?`>= ${ot}`:""}${null!=ot&&null!=bt?" && ":""}${null!=bt?`<= ${bt}`:""}`,Ee)},validateObject:Ae,validateOneOf:Se,validatePlainFunction:ne,validatePort:function Ve(Ee,Re="Port",ot=!0){if("number"!=typeof Ee&&"string"!=typeof Ee||"string"==typeof Ee&&0===B(Ee).length||+Ee!=+Ee>>>0||Ee>65535||0===Ee&&!ot)throw new Y(Re,Ee,ot);return 0|Ee},validateSignalName:function A(Ee,Re="signal"){if(Ce(Ee,Re),void 0===le[Ee])throw void 0!==le[x(Ee)]?new k(Ee+" (signals must use all capital letters)"):new k(Ee)},validateString:Ce,validateUint32:Xe,validateUndefined:U,validateUnion:function M(Ee,Re,ot){if(!C(ot,Ee))throw new J(Re,`('${$(ot,"|")}')`,Ee)},validateAbortSignal:Je,validateLinkHeaderValue:function We(Ee){if("string"==typeof Ee)return he(Ee,"hints"),Ee;if(Q(Ee)){const Re=Ee.length;let ot="";if(0===Re)return ot;for(let bt=0;bt<Re;bt++){const It=Ee[bt];he(It,"hints"),ot+=It,bt!==Re-1&&(ot+=", ")}return ot}throw new ee("hints",Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(Ue,_e,S)=>{"use strict";const Q=S(8110),C=S(16),$=Q.Readable.destroy;Ue.exports=Q.Readable,Ue.exports._uint8ArrayToBuffer=Q._uint8ArrayToBuffer,Ue.exports._isUint8Array=Q._isUint8Array,Ue.exports.isDisturbed=Q.isDisturbed,Ue.exports.isErrored=Q.isErrored,Ue.exports.isReadable=Q.isReadable,Ue.exports.Readable=Q.Readable,Ue.exports.Writable=Q.Writable,Ue.exports.Duplex=Q.Duplex,Ue.exports.Transform=Q.Transform,Ue.exports.PassThrough=Q.PassThrough,Ue.exports.addAbortSignal=Q.addAbortSignal,Ue.exports.finished=Q.finished,Ue.exports.destroy=Q.destroy,Ue.exports.destroy=$,Ue.exports.pipeline=Q.pipeline,Ue.exports.compose=Q.compose,Object.defineProperty(Q,"promises",{configurable:!0,enumerable:!0,get:()=>C}),Ue.exports.Stream=Q.Stream,Ue.exports.default=Ue.exports},4370:(Ue,_e,S)=>{"use strict";const{format:Q,inspect:C,AggregateError:$}=S(2656),G=globalThis.AggregateError||$,q=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],E=/^([A-Z][a-z0-9]*)+$/,z={};function P(J,ee){if(!J)throw new z.ERR_INTERNAL_ASSERTION(ee)}function F(J){let ee="",W=J.length;const k="-"===J[0]?1:0;for(;W>=k+4;W-=3)ee=`_${J.slice(W-3,W)}${ee}`;return`${J.slice(0,W)}${ee}`}function x(J,ee,W){W||(W=Error);class k extends W{constructor(...I){super(function oe(J,ee,W){if("function"==typeof ee)return P(ee.length<=W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${ee.length}).`),ee(...W);const k=(ee.match(/%[dfijoOs]/g)||[]).length;return P(k===W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${k}).`),0===W.length?ee:Q(ee,...W)}(J,ee,I))}toString(){return`${this.name} [${J}]: ${this.message}`}}Object.defineProperties(k.prototype,{name:{value:W.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${J}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),k.prototype.code=J,k.prototype[q]=!0,z[J]=k}function B(J){return Object.defineProperty(J,"name",{value:"__node_internal_"+J.name}),J}class Y extends Error{constructor(ee="The operation was aborted",W=void 0){if(void 0!==W&&"object"!=typeof W)throw new z.ERR_INVALID_ARG_TYPE("options","Object",W);super(ee,W),this.code="ABORT_ERR",this.name="AbortError"}}x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(J,ee,W)=>{P("string"==typeof J,"'name' must be a string"),Array.isArray(ee)||(ee=[ee]);let k="The ";J.endsWith(" argument")?k+=`${J} `:k+=`"${J}" ${J.includes(".")?"property":"argument"} `,k+="must be ";const v=[],I=[],T=[];for(const j of ee)P("string"==typeof j,"All expected entries have to be of type string"),_.includes(j)?v.push(j.toLowerCase()):E.test(j)?I.push(j):(P("object"!==j,'The value "object" should be written as "Object"'),T.push(j));if(I.length>0){const j=v.indexOf("object");-1!==j&&(v.splice(v,j,1),I.push("Object"))}if(v.length>0){switch(v.length){case 1:k+=`of type ${v[0]}`;break;case 2:k+=`one of type ${v[0]} or ${v[1]}`;break;default:{const j=v.pop();k+=`one of type ${v.join(", ")}, or ${j}`}}(I.length>0||T.length>0)&&(k+=" or ")}if(I.length>0){switch(I.length){case 1:k+=`an instance of ${I[0]}`;break;case 2:k+=`an instance of ${I[0]} or ${I[1]}`;break;default:{const j=I.pop();k+=`an instance of ${I.join(", ")}, or ${j}`}}T.length>0&&(k+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(k+="an "),k+=`${T[0]}`;break;case 2:k+=`one of ${T[0]} or ${T[1]}`;break;default:{const j=T.pop();k+=`one of ${T.join(", ")}, or ${j}`}}if(null==W)k+=`. Received ${W}`;else if("function"==typeof W&&W.name)k+=`. Received function ${W.name}`;else if("object"==typeof W){var le;null!==(le=W.constructor)&&void 0!==le&&le.name?k+=`. Received an instance of ${W.constructor.name}`:k+=`. Received ${C(W,{depth:-1})}`}else{let j=C(W,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),k+=`. Received type ${typeof W} (${j})`}return k},TypeError),x("ERR_INVALID_ARG_VALUE",(J,ee,W="is invalid")=>{let k=C(ee);return k.length>128&&(k=k.slice(0,128)+"..."),`The ${J.includes(".")?"property":"argument"} '${J}' ${W}. Received ${k}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(J,ee,W)=>{var k;return`Expected ${J} to be returned from the "${ee}" function but got ${null!=W&&null!==(k=W.constructor)&&void 0!==k&&k.name?`instance of ${W.constructor.name}`:"type "+typeof W}.`},TypeError),x("ERR_MISSING_ARGS",(...J)=>{let ee;P(J.length>0,"At least one arg needs to be specified");const W=J.length;switch(J=(Array.isArray(J)?J:[J]).map(k=>`"${k}"`).join(" or "),W){case 1:ee+=`The ${J[0]} argument`;break;case 2:ee+=`The ${J[0]} and ${J[1]} arguments`;break;default:{const k=J.pop();ee+=`The ${J.join(", ")}, and ${k} arguments`}}return`${ee} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(J,ee,W)=>{let k;return P(ee,'Missing "range" argument'),Number.isInteger(W)&&Math.abs(W)>2**32?k=F(String(W)):"bigint"==typeof W?(k=String(W),(W>2n**32n||W<-(2n**32n))&&(k=F(k)),k+="n"):k=C(W),`The value of "${J}" is out of range. It must be ${ee}. Received ${k}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ue.exports={AbortError:Y,aggregateTwoErrors:B(function se(J,ee){if(J&&ee&&J!==ee){if(Array.isArray(ee.errors))return ee.errors.push(J),ee;const W=new G([ee,J],ee.message);return W.code=ee.code,W}return J||ee}),hideStackFrames:B,codes:z}},6305:Ue=>{"use strict";Ue.exports={ArrayIsArray:_e=>Array.isArray(_e),ArrayPrototypeIncludes:(_e,S)=>_e.includes(S),ArrayPrototypeIndexOf:(_e,S)=>_e.indexOf(S),ArrayPrototypeJoin:(_e,S)=>_e.join(S),ArrayPrototypeMap:(_e,S)=>_e.map(S),ArrayPrototypePop:(_e,S)=>_e.pop(S),ArrayPrototypePush:(_e,S)=>_e.push(S),ArrayPrototypeSlice:(_e,S,Q)=>_e.slice(S,Q),Error,FunctionPrototypeCall:(_e,S,...Q)=>_e.call(S,...Q),FunctionPrototypeSymbolHasInstance:(_e,S)=>Function.prototype[Symbol.hasInstance].call(_e,S),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(_e,S)=>Object.defineProperties(_e,S),ObjectDefineProperty:(_e,S,Q)=>Object.defineProperty(_e,S,Q),ObjectGetOwnPropertyDescriptor:(_e,S)=>Object.getOwnPropertyDescriptor(_e,S),ObjectKeys:_e=>Object.keys(_e),ObjectSetPrototypeOf:(_e,S)=>Object.setPrototypeOf(_e,S),Promise,PromisePrototypeCatch:(_e,S)=>_e.catch(S),PromisePrototypeThen:(_e,S,Q)=>_e.then(S,Q),PromiseReject:_e=>Promise.reject(_e),PromiseResolve:_e=>Promise.resolve(_e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(_e,S)=>_e.test(S),SafeSet:Set,String,StringPrototypeSlice:(_e,S,Q)=>_e.slice(S,Q),StringPrototypeToLowerCase:_e=>_e.toLowerCase(),StringPrototypeToUpperCase:_e=>_e.toUpperCase(),StringPrototypeTrim:_e=>_e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(_e,S,Q)=>_e.set(S,Q),Boolean,Uint8Array}},2656:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1657),{kResistStopPropagation:$,SymbolDispose:G}=S(6305),q=globalThis.AbortSignal||S(3982).AbortSignal,_=globalThis.AbortController||S(3982).AbortController,E=Object.getPrototypeOf(Q(function*(){})).constructor,N=globalThis.Blob||C.Blob,z=typeof N<"u"?function(B){return B instanceof N}:function(B){return!1},P=(x,B)=>{if(void 0!==x&&(null===x||"object"!=typeof x||!("aborted"in x)))throw new ERR_INVALID_ARG_TYPE(B,"AbortSignal",x)};class oe extends Error{constructor(B){if(!Array.isArray(B))throw new TypeError("Expected input to be an Array, got "+typeof B);let se="";for(let Y=0;Y<B.length;Y++)se+=`    ${B[Y].stack}\n`;super(se),this.name="AggregateError",this.errors=B}}Ue.exports={AggregateError:oe,kEmptyObject:Object.freeze({}),once(x){let B=!1;return function(...se){B||(B=!0,x.apply(this,se))}},createDeferredPromise:function(){let x,B;return{promise:new Promise((Y,J)=>{x=Y,B=J}),resolve:x,reject:B}},promisify:x=>new Promise((B,se)=>{x((Y,...J)=>Y?se(Y):B(...J))}),debuglog:()=>function(){},format:(x,...B)=>x.replace(/%([sdifj])/g,function(...[se,Y]){const J=B.shift();return"f"===Y?J.toFixed(6):"j"===Y?JSON.stringify(J):"s"===Y&&"object"==typeof J?`${J.constructor!==Object?J.constructor.name:""} {}`.trim():J.toString()}),inspect(x){switch(typeof x){case"string":if(x.includes("'")){if(!x.includes('"'))return`"${x}"`;if(!x.includes("`")&&!x.includes("${"))return`\`${x}\``}return`'${x}'`;case"number":return isNaN(x)?"NaN":Object.is(x,-0)?String(x):x;case"bigint":return`${String(x)}n`;case"boolean":case"undefined":return String(x);case"object":return"{}"}},types:{isAsyncFunction:x=>x instanceof E,isArrayBufferView:x=>ArrayBuffer.isView(x)},isBlob:z,deprecate:(x,B)=>x,addAbortListener:S(2016).addAbortListener||function(B,se){if(void 0===B)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",B);let Y;return P(B,"signal"),((x,B)=>{if("function"!=typeof x)throw new ERR_INVALID_ARG_TYPE("listener","Function",x)})(se),B.aborted?queueMicrotask(()=>se()):(B.addEventListener("abort",se,{__proto__:null,once:!0,[$]:!0}),Y=()=>{B.removeEventListener("abort",se)}),{__proto__:null,[G](){var J;null===(J=Y)||void 0===J||J()}}},AbortSignalAny:q.any||function(B){if(1===B.length)return B[0];const se=new _,Y=()=>se.abort();return B.forEach(J=>{P(J,"signals"),J.addEventListener("abort",Y,{once:!0})}),se.signal.addEventListener("abort",()=>{B.forEach(J=>J.removeEventListener("abort",Y))},{once:!0}),se.signal}},Ue.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(Ue,_e,S)=>{const{Buffer:Q}=S(1657),{ObjectDefineProperty:C,ObjectKeys:$,ReflectApply:G}=S(6305),{promisify:{custom:q}}=S(2656),{streamReturningOperators:_,promiseReturningOperators:E}=S(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:N}}=S(4370),z=S(7721),{setDefaultHighWaterMark:P,getDefaultHighWaterMark:F}=S(8782),{pipeline:oe}=S(4514),{destroyer:x}=S(5601),B=S(4618),Y=S(16),J=S(5428),ee=Ue.exports=S(900).Stream;ee.isDestroyed=J.isDestroyed,ee.isDisturbed=J.isDisturbed,ee.isErrored=J.isErrored,ee.isReadable=J.isReadable,ee.isWritable=J.isWritable,ee.Readable=S(8383);for(const v of $(_)){let T=function(...le){if(new.target)throw N();return ee.Readable.from(G(I,this,le))};const I=_[v];C(T,"name",{__proto__:null,value:I.name}),C(T,"length",{__proto__:null,value:I.length}),C(ee.Readable.prototype,v,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const v of $(E)){let T=function(...j){if(new.target)throw N();return G(I,this,j)};const I=E[v];C(T,"name",{__proto__:null,value:I.name}),C(T,"length",{__proto__:null,value:I.length}),C(ee.Readable.prototype,v,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}ee.Writable=S(9764),ee.Duplex=S(5931),ee.Transform=S(123),ee.PassThrough=S(6973),ee.pipeline=oe;const{addAbortSignal:W}=S(9987);ee.addAbortSignal=W,ee.finished=B,ee.destroy=x,ee.compose=z,ee.setDefaultHighWaterMark=P,ee.getDefaultHighWaterMark=F,C(ee,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>Y}),C(oe,q,{__proto__:null,enumerable:!0,get:()=>Y.pipeline}),C(B,q,{__proto__:null,enumerable:!0,get:()=>Y.finished}),ee.Stream=ee,ee._isUint8Array=function(I){return I instanceof Uint8Array},ee._uint8ArrayToBuffer=function(I){return Q.from(I.buffer,I.byteOffset,I.byteLength)}},16:(Ue,_e,S)=>{"use strict";const{ArrayPrototypePop:Q,Promise:C}=S(6305),{isIterable:$,isNodeStream:G,isWebStream:q}=S(5428),{pipelineImpl:_}=S(4514),{finished:E}=S(4618);S(8110),Ue.exports={finished:E,pipeline:function N(...z){return new C((P,F)=>{let oe,x;const B=z[z.length-1];if(B&&"object"==typeof B&&!G(B)&&!$(B)&&!q(B)){const se=Q(z);oe=se.signal,x=se.end}_(z,(se,Y)=>{se?F(se):P(Y)},{signal:oe,end:x})})}}},1657:(Ue,_e,S)=>{"use strict";const Q=S(9919),C=S(2601),$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_e.Buffer=E,_e.SlowBuffer=function ee(pe){return+pe!=pe&&(pe=0),E.alloc(+pe)},_e.INSPECT_MAX_BYTES=50;const G=2147483647;function _(pe){if(pe>G)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const H=new Uint8Array(pe);return Object.setPrototypeOf(H,E.prototype),H}function E(pe,H,te){if("number"==typeof pe){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return F(pe)}return N(pe,H,te)}function N(pe,H,te){if("string"==typeof pe)return function oe(pe,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!E.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const te=0|W(pe,H);let Le=_(te);const it=Le.write(pe,H);return it!==te&&(Le=Le.slice(0,it)),Le}(pe,H);if(ArrayBuffer.isView(pe))return function B(pe){if(ot(pe,Uint8Array)){const H=new Uint8Array(pe);return se(H.buffer,H.byteOffset,H.byteLength)}return x(pe)}(pe);if(null==pe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(ot(pe,ArrayBuffer)||pe&&ot(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ot(pe,SharedArrayBuffer)||pe&&ot(pe.buffer,SharedArrayBuffer)))return se(pe,H,te);if("number"==typeof pe)throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=pe.valueOf&&pe.valueOf();if(null!=Le&&Le!==pe)return E.from(Le,H,te);const it=function Y(pe){if(E.isBuffer(pe)){const H=0|J(pe.length),te=_(H);return 0===te.length||pe.copy(te,0,0,H),te}return void 0!==pe.length?"number"!=typeof pe.length||bt(pe.length)?_(0):x(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?x(pe.data):void 0}(pe);if(it)return it;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof pe[Symbol.toPrimitive])return E.from(pe[Symbol.toPrimitive]("string"),H,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}function z(pe){if("number"!=typeof pe)throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function F(pe){return z(pe),_(pe<0?0:0|J(pe))}function x(pe){const H=pe.length<0?0:0|J(pe.length),te=_(H);for(let Le=0;Le<H;Le+=1)te[Le]=255&pe[Le];return te}function se(pe,H,te){if(H<0||pe.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<H+(te||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return Le=void 0===H&&void 0===te?new Uint8Array(pe):void 0===te?new Uint8Array(pe,H):new Uint8Array(pe,H,te),Object.setPrototypeOf(Le,E.prototype),Le}function J(pe){if(pe>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|pe}function W(pe,H){if(E.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||ot(pe,ArrayBuffer))return pe.byteLength;if("string"!=typeof pe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const te=pe.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===te)return 0;let it=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return O(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return Ee(pe).length;default:if(it)return Le?-1:O(pe).length;H=(""+H).toLowerCase(),it=!0}}function k(pe,H,te){let Le=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(H>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return Se(this,H,te);case"utf8":case"utf-8":return He(this,H,te);case"ascii":return Ce(this,H,te);case"latin1":case"binary":return je(this,H,te);case"base64":return Pe(this,H,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,H,te);default:if(Le)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),Le=!0}}function v(pe,H,te){const Le=pe[H];pe[H]=pe[te],pe[te]=Le}function I(pe,H,te,Le,it){if(0===pe.length)return-1;if("string"==typeof te?(Le=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),bt(te=+te)&&(te=it?0:pe.length-1),te<0&&(te=pe.length+te),te>=pe.length){if(it)return-1;te=pe.length-1}else if(te<0){if(!it)return-1;te=0}if("string"==typeof H&&(H=E.from(H,Le)),E.isBuffer(H))return 0===H.length?-1:T(pe,H,te,Le,it);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?it?Uint8Array.prototype.indexOf.call(pe,H,te):Uint8Array.prototype.lastIndexOf.call(pe,H,te):T(pe,[H],te,Le,it);throw new TypeError("val must be string, number or Buffer")}function T(pe,H,te,Le,it){let Nn,lt=1,Et=pe.length,en=H.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(pe.length<2||H.length<2)return-1;lt=2,Et/=2,en/=2,te/=2}function Dn(pn,wn){return 1===lt?pn[wn]:pn.readUInt16BE(wn*lt)}if(it){let pn=-1;for(Nn=te;Nn<Et;Nn++)if(Dn(pe,Nn)===Dn(H,-1===pn?0:Nn-pn)){if(-1===pn&&(pn=Nn),Nn-pn+1===en)return pn*lt}else-1!==pn&&(Nn-=Nn-pn),pn=-1}else for(te+en>Et&&(te=Et-en),Nn=te;Nn>=0;Nn--){let pn=!0;for(let wn=0;wn<en;wn++)if(Dn(pe,Nn+wn)!==Dn(H,wn)){pn=!1;break}if(pn)return Nn}return-1}function le(pe,H,te,Le){te=Number(te)||0;const it=pe.length-te;Le?(Le=Number(Le))>it&&(Le=it):Le=it;const lt=H.length;let Et;for(Le>lt/2&&(Le=lt/2),Et=0;Et<Le;++Et){const en=parseInt(H.substr(2*Et,2),16);if(bt(en))return Et;pe[te+Et]=en}return Et}function j(pe,H,te,Le){return Re(O(H,pe.length-te),pe,te,Le)}function Me(pe,H,te,Le){return Re(function he(pe){const H=[];for(let te=0;te<pe.length;++te)H.push(255&pe.charCodeAt(te));return H}(H),pe,te,Le)}function ae(pe,H,te,Le){return Re(Ee(H),pe,te,Le)}function xe(pe,H,te,Le){return Re(function We(pe,H){let te,Le,it;const lt=[];for(let Et=0;Et<pe.length&&!((H-=2)<0);++Et)te=pe.charCodeAt(Et),Le=te>>8,it=te%256,lt.push(it),lt.push(Le);return lt}(H,pe.length-te),pe,te,Le)}function Pe(pe,H,te){return Q.fromByteArray(0===H&&te===pe.length?pe:pe.slice(H,te))}function He(pe,H,te){te=Math.min(pe.length,te);const Le=[];let it=H;for(;it<te;){const lt=pe[it];let Et=null,en=lt>239?4:lt>223?3:lt>191?2:1;if(it+en<=te){let Dn,Nn,pn,wn;switch(en){case 1:lt<128&&(Et=lt);break;case 2:Dn=pe[it+1],128==(192&Dn)&&(wn=(31&lt)<<6|63&Dn,wn>127&&(Et=wn));break;case 3:Dn=pe[it+1],Nn=pe[it+2],128==(192&Dn)&&128==(192&Nn)&&(wn=(15&lt)<<12|(63&Dn)<<6|63&Nn,wn>2047&&(wn<55296||wn>57343)&&(Et=wn));break;case 4:Dn=pe[it+1],Nn=pe[it+2],pn=pe[it+3],128==(192&Dn)&&128==(192&Nn)&&128==(192&pn)&&(wn=(15&lt)<<18|(63&Dn)<<12|(63&Nn)<<6|63&pn,wn>65535&&wn<1114112&&(Et=wn))}}null===Et?(Et=65533,en=1):Et>65535&&(Et-=65536,Le.push(Et>>>10&1023|55296),Et=56320|1023&Et),Le.push(Et),it+=en}return function Xe(pe){const H=pe.length;if(H<=Qe)return String.fromCharCode.apply(String,pe);let te="",Le=0;for(;Le<H;)te+=String.fromCharCode.apply(String,pe.slice(Le,Le+=Qe));return te}(Le)}_e.kMaxLength=G,!(E.TYPED_ARRAY_SUPPORT=function q(){try{const pe=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(pe,H),42===pe.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}}),E.poolSize=8192,E.from=function(pe,H,te){return N(pe,H,te)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array),E.alloc=function(pe,H,te){return function P(pe,H,te){return z(pe),pe<=0?_(pe):void 0!==H?"string"==typeof te?_(pe).fill(H,te):_(pe).fill(H):_(pe)}(pe,H,te)},E.allocUnsafe=function(pe){return F(pe)},E.allocUnsafeSlow=function(pe){return F(pe)},E.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==E.prototype},E.compare=function(H,te){if(ot(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),ot(te,Uint8Array)&&(te=E.from(te,te.offset,te.byteLength)),!E.isBuffer(H)||!E.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===te)return 0;let Le=H.length,it=te.length;for(let lt=0,Et=Math.min(Le,it);lt<Et;++lt)if(H[lt]!==te[lt]){Le=H[lt],it=te[lt];break}return Le<it?-1:it<Le?1:0},E.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(H,te){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return E.alloc(0);let Le;if(void 0===te)for(te=0,Le=0;Le<H.length;++Le)te+=H[Le].length;const it=E.allocUnsafe(te);let lt=0;for(Le=0;Le<H.length;++Le){let Et=H[Le];if(ot(Et,Uint8Array))lt+Et.length>it.length?(E.isBuffer(Et)||(Et=E.from(Et)),Et.copy(it,lt)):Uint8Array.prototype.set.call(it,Et,lt);else{if(!E.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(it,lt)}lt+=Et.length}return it},E.byteLength=W,E.prototype._isBuffer=!0,E.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let te=0;te<H;te+=2)v(this,te,te+1);return this},E.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let te=0;te<H;te+=4)v(this,te,te+3),v(this,te+1,te+2);return this},E.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let te=0;te<H;te+=8)v(this,te,te+7),v(this,te+1,te+6),v(this,te+2,te+5),v(this,te+3,te+4);return this},E.prototype.toLocaleString=E.prototype.toString=function(){const H=this.length;return 0===H?"":0===arguments.length?He(this,0,H):k.apply(this,arguments)},E.prototype.equals=function(H){if(!E.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===E.compare(this,H)},E.prototype.inspect=function(){let H="";const te=_e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(H+=" ... "),"<Buffer "+H+">"},$&&(E.prototype[$]=E.prototype.inspect),E.prototype.compare=function(H,te,Le,it,lt){if(ot(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),!E.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===te&&(te=0),void 0===Le&&(Le=H?H.length:0),void 0===it&&(it=0),void 0===lt&&(lt=this.length),te<0||Le>H.length||it<0||lt>this.length)throw new RangeError("out of range index");if(it>=lt&&te>=Le)return 0;if(it>=lt)return-1;if(te>=Le)return 1;if(this===H)return 0;let Et=(lt>>>=0)-(it>>>=0),en=(Le>>>=0)-(te>>>=0);const Dn=Math.min(Et,en),Nn=this.slice(it,lt),pn=H.slice(te,Le);for(let wn=0;wn<Dn;++wn)if(Nn[wn]!==pn[wn]){Et=Nn[wn],en=pn[wn];break}return Et<en?-1:en<Et?1:0},E.prototype.includes=function(H,te,Le){return-1!==this.indexOf(H,te,Le)},E.prototype.indexOf=function(H,te,Le){return I(this,H,te,Le,!0)},E.prototype.lastIndexOf=function(H,te,Le){return I(this,H,te,Le,!1)},E.prototype.write=function(H,te,Le,it){if(void 0===te)it="utf8",Le=this.length,te=0;else if(void 0===Le&&"string"==typeof te)it=te,Le=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(Le)?(Le>>>=0,void 0===it&&(it="utf8")):(it=Le,Le=void 0)}const lt=this.length-te;if((void 0===Le||Le>lt)&&(Le=lt),H.length>0&&(Le<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");it||(it="utf8");let Et=!1;for(;;)switch(it){case"hex":return le(this,H,te,Le);case"utf8":case"utf-8":return j(this,H,te,Le);case"ascii":case"latin1":case"binary":return Me(this,H,te,Le);case"base64":return ae(this,H,te,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,H,te,Le);default:if(Et)throw new TypeError("Unknown encoding: "+it);it=(""+it).toLowerCase(),Et=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function Ce(pe,H,te){let Le="";te=Math.min(pe.length,te);for(let it=H;it<te;++it)Le+=String.fromCharCode(127&pe[it]);return Le}function je(pe,H,te){let Le="";te=Math.min(pe.length,te);for(let it=H;it<te;++it)Le+=String.fromCharCode(pe[it]);return Le}function Se(pe,H,te){const Le=pe.length;(!H||H<0)&&(H=0),(!te||te<0||te>Le)&&(te=Le);let it="";for(let lt=H;lt<te;++lt)it+=It[pe[lt]];return it}function ke(pe,H,te){const Le=pe.slice(H,te);let it="";for(let lt=0;lt<Le.length-1;lt+=2)it+=String.fromCharCode(Le[lt]+256*Le[lt+1]);return it}function de(pe,H,te){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+H>te)throw new RangeError("Trying to access beyond buffer length")}function Ae(pe,H,te,Le,it,lt){if(!E.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>it||H<lt)throw new RangeError('"value" argument is out of bounds');if(te+Le>pe.length)throw new RangeError("Index out of range")}function nt(pe,H,te,Le,it){Je(H,Le,it,pe,te,7);let lt=Number(H&BigInt(4294967295));pe[te++]=lt,lt>>=8,pe[te++]=lt,lt>>=8,pe[te++]=lt,lt>>=8,pe[te++]=lt;let Et=Number(H>>BigInt(32)&BigInt(4294967295));return pe[te++]=Et,Et>>=8,pe[te++]=Et,Et>>=8,pe[te++]=Et,Et>>=8,pe[te++]=Et,te}function _t(pe,H,te,Le,it){Je(H,Le,it,pe,te,7);let lt=Number(H&BigInt(4294967295));pe[te+7]=lt,lt>>=8,pe[te+6]=lt,lt>>=8,pe[te+5]=lt,lt>>=8,pe[te+4]=lt;let Et=Number(H>>BigInt(32)&BigInt(4294967295));return pe[te+3]=Et,Et>>=8,pe[te+2]=Et,Et>>=8,pe[te+1]=Et,Et>>=8,pe[te]=Et,te+8}function Ke(pe,H,te,Le,it,lt){if(te+Le>pe.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function fe(pe,H,te,Le,it){return H=+H,te>>>=0,it||Ke(pe,0,te,4),C.write(pe,H,te,Le,23,4),te+4}function R(pe,H,te,Le,it){return H=+H,te>>>=0,it||Ke(pe,0,te,8),C.write(pe,H,te,Le,52,8),te+8}E.prototype.slice=function(H,te){const Le=this.length;(H=~~H)<0?(H+=Le)<0&&(H=0):H>Le&&(H=Le),(te=void 0===te?Le:~~te)<0?(te+=Le)<0&&(te=0):te>Le&&(te=Le),te<H&&(te=H);const it=this.subarray(H,te);return Object.setPrototypeOf(it,E.prototype),it},E.prototype.readUintLE=E.prototype.readUIntLE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H],lt=1,Et=0;for(;++Et<te&&(lt*=256);)it+=this[H+Et]*lt;return it},E.prototype.readUintBE=E.prototype.readUIntBE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H+--te],lt=1;for(;te>0&&(lt*=256);)it+=this[H+--te]*lt;return it},E.prototype.readUint8=E.prototype.readUInt8=function(H,te){return H>>>=0,te||de(H,1,this.length),this[H]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(H,te){return H>>>=0,te||de(H,2,this.length),this[H]|this[H+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(H,te){return H>>>=0,te||de(H,2,this.length),this[H]<<8|this[H+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(H,te){return H>>>=0,te||de(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(H,te){return H>>>=0,te||de(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},E.prototype.readBigUInt64LE=mt(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=te+256*this[++H]+65536*this[++H]+this[++H]*2**24,lt=this[++H]+256*this[++H]+65536*this[++H]+Le*2**24;return BigInt(it)+(BigInt(lt)<<BigInt(32))}),E.prototype.readBigUInt64BE=mt(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=te*2**24+65536*this[++H]+256*this[++H]+this[++H],lt=this[++H]*2**24+65536*this[++H]+256*this[++H]+Le;return(BigInt(it)<<BigInt(32))+BigInt(lt)}),E.prototype.readIntLE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H],lt=1,Et=0;for(;++Et<te&&(lt*=256);)it+=this[H+Et]*lt;return lt*=128,it>=lt&&(it-=Math.pow(2,8*te)),it},E.prototype.readIntBE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=te,lt=1,Et=this[H+--it];for(;it>0&&(lt*=256);)Et+=this[H+--it]*lt;return lt*=128,Et>=lt&&(Et-=Math.pow(2,8*te)),Et},E.prototype.readInt8=function(H,te){return H>>>=0,te||de(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},E.prototype.readInt16LE=function(H,te){H>>>=0,te||de(H,2,this.length);const Le=this[H]|this[H+1]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt16BE=function(H,te){H>>>=0,te||de(H,2,this.length);const Le=this[H+1]|this[H]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt32LE=function(H,te){return H>>>=0,te||de(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},E.prototype.readInt32BE=function(H,te){return H>>>=0,te||de(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},E.prototype.readBigInt64LE=mt(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];return(void 0===te||void 0===Le)&&ne(H,this.length-8),(BigInt(this[H+4]+256*this[H+5]+65536*this[H+6]+(Le<<24))<<BigInt(32))+BigInt(te+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),E.prototype.readBigInt64BE=mt(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=(te<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(it)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+Le)}),E.prototype.readFloatLE=function(H,te){return H>>>=0,te||de(H,4,this.length),C.read(this,H,!0,23,4)},E.prototype.readFloatBE=function(H,te){return H>>>=0,te||de(H,4,this.length),C.read(this,H,!1,23,4)},E.prototype.readDoubleLE=function(H,te){return H>>>=0,te||de(H,8,this.length),C.read(this,H,!0,52,8)},E.prototype.readDoubleBE=function(H,te){return H>>>=0,te||de(H,8,this.length),C.read(this,H,!1,52,8)},E.prototype.writeUintLE=E.prototype.writeUIntLE=function(H,te,Le,it){H=+H,te>>>=0,Le>>>=0,it||Ae(this,H,te,Le,Math.pow(2,8*Le)-1,0);let lt=1,Et=0;for(this[te]=255&H;++Et<Le&&(lt*=256);)this[te+Et]=H/lt&255;return te+Le},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(H,te,Le,it){H=+H,te>>>=0,Le>>>=0,it||Ae(this,H,te,Le,Math.pow(2,8*Le)-1,0);let lt=Le-1,Et=1;for(this[te+lt]=255&H;--lt>=0&&(Et*=256);)this[te+lt]=H/Et&255;return te+Le},E.prototype.writeUint8=E.prototype.writeUInt8=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,1,255,0),this[te]=255&H,te+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,65535,0),this[te]=255&H,this[te+1]=H>>>8,te+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,65535,0),this[te]=H>>>8,this[te+1]=255&H,te+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,4294967295,0),this[te+3]=H>>>24,this[te+2]=H>>>16,this[te+1]=H>>>8,this[te]=255&H,te+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,4294967295,0),this[te]=H>>>24,this[te+1]=H>>>16,this[te+2]=H>>>8,this[te+3]=255&H,te+4},E.prototype.writeBigUInt64LE=mt(function(H,te=0){return nt(this,H,te,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=mt(function(H,te=0){return _t(this,H,te,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(H,te,Le,it){if(H=+H,te>>>=0,!it){const Dn=Math.pow(2,8*Le-1);Ae(this,H,te,Le,Dn-1,-Dn)}let lt=0,Et=1,en=0;for(this[te]=255&H;++lt<Le&&(Et*=256);)H<0&&0===en&&0!==this[te+lt-1]&&(en=1),this[te+lt]=(H/Et>>0)-en&255;return te+Le},E.prototype.writeIntBE=function(H,te,Le,it){if(H=+H,te>>>=0,!it){const Dn=Math.pow(2,8*Le-1);Ae(this,H,te,Le,Dn-1,-Dn)}let lt=Le-1,Et=1,en=0;for(this[te+lt]=255&H;--lt>=0&&(Et*=256);)H<0&&0===en&&0!==this[te+lt+1]&&(en=1),this[te+lt]=(H/Et>>0)-en&255;return te+Le},E.prototype.writeInt8=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,1,127,-128),H<0&&(H=255+H+1),this[te]=255&H,te+1},E.prototype.writeInt16LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,32767,-32768),this[te]=255&H,this[te+1]=H>>>8,te+2},E.prototype.writeInt16BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,32767,-32768),this[te]=H>>>8,this[te+1]=255&H,te+2},E.prototype.writeInt32LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,2147483647,-2147483648),this[te]=255&H,this[te+1]=H>>>8,this[te+2]=H>>>16,this[te+3]=H>>>24,te+4},E.prototype.writeInt32BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[te]=H>>>24,this[te+1]=H>>>16,this[te+2]=H>>>8,this[te+3]=255&H,te+4},E.prototype.writeBigInt64LE=mt(function(H,te=0){return nt(this,H,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=mt(function(H,te=0){return _t(this,H,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeFloatLE=function(H,te,Le){return fe(this,H,te,!0,Le)},E.prototype.writeFloatBE=function(H,te,Le){return fe(this,H,te,!1,Le)},E.prototype.writeDoubleLE=function(H,te,Le){return R(this,H,te,!0,Le)},E.prototype.writeDoubleBE=function(H,te,Le){return R(this,H,te,!1,Le)},E.prototype.copy=function(H,te,Le,it){if(!E.isBuffer(H))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!it&&0!==it&&(it=this.length),te>=H.length&&(te=H.length),te||(te=0),it>0&&it<Le&&(it=Le),it===Le||0===H.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(it<0)throw new RangeError("sourceEnd out of bounds");it>this.length&&(it=this.length),H.length-te<it-Le&&(it=H.length-te+Le);const lt=it-Le;return this===H&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(te,Le,it):Uint8Array.prototype.set.call(H,this.subarray(Le,it),te),lt},E.prototype.fill=function(H,te,Le,it){if("string"==typeof H){if("string"==typeof te?(it=te,te=0,Le=this.length):"string"==typeof Le&&(it=Le,Le=this.length),void 0!==it&&"string"!=typeof it)throw new TypeError("encoding must be a string");if("string"==typeof it&&!E.isEncoding(it))throw new TypeError("Unknown encoding: "+it);if(1===H.length){const Et=H.charCodeAt(0);("utf8"===it&&Et<128||"latin1"===it)&&(H=Et)}}else"number"==typeof H?H&=255:"boolean"==typeof H&&(H=Number(H));if(te<0||this.length<te||this.length<Le)throw new RangeError("Out of range index");if(Le<=te)return this;let lt;if(te>>>=0,Le=void 0===Le?this.length:Le>>>0,H||(H=0),"number"==typeof H)for(lt=te;lt<Le;++lt)this[lt]=H;else{const Et=E.isBuffer(H)?H:E.from(H,it),en=Et.length;if(0===en)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(lt=0;lt<Le-te;++lt)this[lt+te]=Et[lt%en]}return this};const A={};function ie(pe,H,te){A[pe]=class extends te{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,delete this.name}get code(){return pe}set code(it){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:it,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}function Z(pe){let H="",te=pe.length;const Le="-"===pe[0]?1:0;for(;te>=Le+4;te-=3)H=`_${pe.slice(te-3,te)}${H}`;return`${pe.slice(0,te)}${H}`}function Je(pe,H,te,Le,it,lt){if(pe>te||pe<H){const Et="bigint"==typeof H?"n":"";let en;throw en=lt>3?0===H||H===BigInt(0)?`>= 0${Et} and < 2${Et} ** ${8*(lt+1)}${Et}`:`>= -(2${Et} ** ${8*(lt+1)-1}${Et}) and < 2 ** ${8*(lt+1)-1}${Et}`:`>= ${H}${Et} and <= ${te}${Et}`,new A.ERR_OUT_OF_RANGE("value",en,pe)}!function Ve(pe,H,te){ue(H,"offset"),(void 0===pe[H]||void 0===pe[H+te])&&ne(H,pe.length-(te+1))}(Le,it,lt)}function ue(pe,H){if("number"!=typeof pe)throw new A.ERR_INVALID_ARG_TYPE(H,"number",pe)}function ne(pe,H,te){throw Math.floor(pe)!==pe?(ue(pe,te),new A.ERR_OUT_OF_RANGE(te||"offset","an integer",pe)):H<0?new A.ERR_BUFFER_OUT_OF_BOUNDS:new A.ERR_OUT_OF_RANGE(te||"offset",`>= ${te?1:0} and <= ${H}`,pe)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(pe,H){return`The "${pe}" argument must be of type number. Received type ${typeof H}`},TypeError),ie("ERR_OUT_OF_RANGE",function(pe,H,te){let Le=`The value of "${pe}" is out of range.`,it=te;return Number.isInteger(te)&&Math.abs(te)>2**32?it=Z(String(te)):"bigint"==typeof te&&(it=String(te),(te>BigInt(2)**BigInt(32)||te<-(BigInt(2)**BigInt(32)))&&(it=Z(it)),it+="n"),Le+=` It must be ${H}. Received ${it}`,Le},RangeError);const U=/[^+/0-9A-Za-z-_]/g;function O(pe,H){let te;H=H||1/0;const Le=pe.length;let it=null;const lt=[];for(let Et=0;Et<Le;++Et){if(te=pe.charCodeAt(Et),te>55295&&te<57344){if(!it){if(te>56319){(H-=3)>-1&&lt.push(239,191,189);continue}if(Et+1===Le){(H-=3)>-1&&lt.push(239,191,189);continue}it=te;continue}if(te<56320){(H-=3)>-1&&lt.push(239,191,189),it=te;continue}te=65536+(it-55296<<10|te-56320)}else it&&(H-=3)>-1&&lt.push(239,191,189);if(it=null,te<128){if((H-=1)<0)break;lt.push(te)}else if(te<2048){if((H-=2)<0)break;lt.push(te>>6|192,63&te|128)}else if(te<65536){if((H-=3)<0)break;lt.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;lt.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return lt}function Ee(pe){return Q.toByteArray(function M(pe){if((pe=(pe=pe.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;pe.length%4!=0;)pe+="=";return pe}(pe))}function Re(pe,H,te,Le){let it;for(it=0;it<Le&&!(it+te>=H.length||it>=pe.length);++it)H[it+te]=pe[it];return it}function ot(pe,H){return pe instanceof H||null!=pe&&null!=pe.constructor&&null!=pe.constructor.name&&pe.constructor.name===H.name}function bt(pe){return pe!=pe}const It=function(){const pe="0123456789abcdef",H=new Array(256);for(let te=0;te<16;++te){const Le=16*te;for(let it=0;it<16;++it)H[Le+it]=pe[te]+pe[it]}return H}();function mt(pe){return typeof BigInt>"u"?zt:pe}function zt(){throw new Error("BigInt not supported")}},7054:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,G,q,_){void 0===_&&(_=q),Object.defineProperty($,_,{enumerable:!0,get:function(){return G[q]}})}:function($,G,q,_){void 0===_&&(_=q),$[_]=G[q]}),C=this&&this.__exportStar||function($,G){for(var q in $)"default"!==q&&!Object.prototype.hasOwnProperty.call(G,q)&&Q(G,$,q)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(361),_e)},361:(Ue,_e)=>{"use strict";function Q(G){const q=[];let _=0;for(;_<G.length;)switch(G[_]){case"/":if("."===G[_+1])if("."===G[_+2]){if(!$(G[_+3])){q.push([]),_++;break}q.pop(),G[_+3]||q.push([]),_+=3}else{if(!$(G[_+2])){q.push([]),_++;break}G[_+2]||q.push([]),_+=2}else q.push([]),_++;break;case"#":case"?":q.length||q.push([]),q[q.length-1].push(G.substr(_)),_=G.length;break;default:q.length||q.push([]),q[q.length-1].push(G[_]),_++}return"/"+q.map(E=>E.join("")).join("/")}function C(G,q){let _=q+1;q>=0?"/"===G[q+1]&&"/"===G[q+2]&&(_=q+3):"/"===G[0]&&"/"===G[1]&&(_=2);const E=G.indexOf("/",_);return E<0?G:G.substr(0,E)+Q(G.substr(E))}function $(G){return!G||"#"===G||"?"===G||"/"===G}Object.defineProperty(_e,"__esModule",{value:!0}),_e.removeDotSegmentsOfPath=_e.removeDotSegments=_e.resolve=void 0,_e.resolve=function S(G,q){const _=(q=q||"").indexOf("#");if(_>0&&(q=q.substr(0,_)),!G.length){if(q.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${q}' for value '${G}'`);return q}if(G.startsWith("?")){const x=q.indexOf("?");return x>0&&(q=q.substr(0,x)),q+G}if(G.startsWith("#"))return q+G;if(!q.length){const x=G.indexOf(":");if(x<0)throw new Error(`Found invalid relative IRI '${G}' for a missing baseIRI`);return C(G,x)}const E=G.indexOf(":");if(E>=0)return C(G,E);const N=q.indexOf(":");if(N<0)throw new Error(`Found invalid baseIRI '${q}' for value '${G}'`);const z=q.substr(0,N+1);if(0===G.indexOf("//"))return z+C(G,E);let P;if(q.indexOf("//",N)===N+1){if(P=q.indexOf("/",N+3),P<0)return q.length>N+3?q+"/"+C(G,E):z+C(G,E)}else if(P=q.indexOf("/",N+1),P<0)return z+C(G,E);if(0===G.indexOf("/"))return q.substr(0,P)+Q(G);let F=q.substr(P);const oe=F.lastIndexOf("/");return oe>=0&&oe<F.length-1&&(F=F.substr(0,oe+1),"."===G[0]&&"."!==G[1]&&"/"!==G[1]&&G[2]&&(G=G.substr(1))),G=Q(G=F+G),q.substr(0,P)+G},_e.removeDotSegments=Q,_e.removeDotSegmentsOfPath=C},9528:(Ue,_e,S)=>{!function(Q){Q.parser=function(R,A){return new $(R,A)},Q.SAXParser=$,Q.SAXStream=P,Q.createStream=function z(R,A){return new P(R,A)},Q.MAX_BUFFER_LENGTH=65536;var E,C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function $(R,A){if(!(this instanceof $))return new $(R,A);var ie=this;(function q(R){for(var A=0,ie=C.length;A<ie;A++)R[C[A]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=Q.MAX_BUFFER_LENGTH,ie.opt=A||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!R,ie.noscript=!(!R&&!ie.opt.noscript),ie.state=j.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?Q.XML_ENTITIES:Q.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(se)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),ae(ie,"onready")}Q.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(R){function A(){}return A.prototype=R,new A}),Object.keys||(Object.keys=function(R){var A=[];for(var ie in R)R.hasOwnProperty(ie)&&A.push(ie);return A}),$.prototype={end:function(){Xe(this)},write:function fe(R){var A=this;if(this.error)throw this.error;if(A.closed)return Qe(A,"Cannot write after close. Assign an onready handler.");if(null===R)return Xe(A);"object"==typeof R&&(R=R.toString());for(var ie=0,Z="";Z=Ke(R,ie++),A.c=Z,Z;)switch(A.trackPosition&&(A.position++,"\n"===Z?(A.line++,A.column=0):A.column++),A.state){case j.BEGIN:if(A.state=j.BEGIN_WHITESPACE,"\ufeff"===Z)continue;_t(A,Z);continue;case j.BEGIN_WHITESPACE:_t(A,Z);continue;case j.TEXT:if(A.sawRoot&&!A.closedRoot){for(var Ve=ie-1;Z&&"<"!==Z&&"&"!==Z;)(Z=Ke(R,ie++))&&A.trackPosition&&(A.position++,"\n"===Z?(A.line++,A.column=0):A.column++);A.textNode+=R.substring(Ve,ie-1)}"<"!==Z||A.sawRoot&&A.closedRoot&&!A.strict?(!k(Z)&&(!A.sawRoot||A.closedRoot)&&Ce(A,"Text data outside of root node."),"&"===Z?A.state=j.TEXT_ENTITY:A.textNode+=Z):(A.state=j.OPEN_WAKA,A.startTagPosition=A.position);continue;case j.SCRIPT:"<"===Z?A.state=j.SCRIPT_ENDING:A.script+=Z;continue;case j.SCRIPT_ENDING:"/"===Z?A.state=j.CLOSE_TAG:(A.script+="<"+Z,A.state=j.SCRIPT);continue;case j.OPEN_WAKA:"!"===Z?(A.state=j.SGML_DECL,A.sgmlDecl=""):k(Z)||(T(Y,Z)?(A.state=j.OPEN_TAG,A.tagName=Z):"/"===Z?(A.state=j.CLOSE_TAG,A.tagName=""):"?"===Z?(A.state=j.PROC_INST,A.procInstName=A.procInstBody=""):(Ce(A,"Unencoded <"),A.startTagPosition+1<A.position&&(Z=new Array(A.position-A.startTagPosition).join(" ")+Z),A.textNode+="<"+Z,A.state=j.TEXT));continue;case j.SGML_DECL:(A.sgmlDecl+Z).toUpperCase()===F?(xe(A,"onopencdata"),A.state=j.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+Z==="--"?(A.state=j.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+Z).toUpperCase()===oe?(A.state=j.DOCTYPE,(A.doctype||A.sawRoot)&&Ce(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):">"===Z?(xe(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=j.TEXT):(v(Z)&&(A.state=j.SGML_DECL_QUOTED),A.sgmlDecl+=Z);continue;case j.SGML_DECL_QUOTED:Z===A.q&&(A.state=j.SGML_DECL,A.q=""),A.sgmlDecl+=Z;continue;case j.DOCTYPE:">"===Z?(A.state=j.TEXT,xe(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=Z,"["===Z?A.state=j.DOCTYPE_DTD:v(Z)&&(A.state=j.DOCTYPE_QUOTED,A.q=Z));continue;case j.DOCTYPE_QUOTED:A.doctype+=Z,Z===A.q&&(A.q="",A.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:A.doctype+=Z,"]"===Z?A.state=j.DOCTYPE:v(Z)&&(A.state=j.DOCTYPE_DTD_QUOTED,A.q=Z);continue;case j.DOCTYPE_DTD_QUOTED:A.doctype+=Z,Z===A.q&&(A.state=j.DOCTYPE_DTD,A.q="");continue;case j.COMMENT:"-"===Z?A.state=j.COMMENT_ENDING:A.comment+=Z;continue;case j.COMMENT_ENDING:"-"===Z?(A.state=j.COMMENT_ENDED,A.comment=He(A.opt,A.comment),A.comment&&xe(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+Z,A.state=j.COMMENT);continue;case j.COMMENT_ENDED:">"!==Z?(Ce(A,"Malformed comment"),A.comment+="--"+Z,A.state=j.COMMENT):A.state=j.TEXT;continue;case j.CDATA:"]"===Z?A.state=j.CDATA_ENDING:A.cdata+=Z;continue;case j.CDATA_ENDING:"]"===Z?A.state=j.CDATA_ENDING_2:(A.cdata+="]"+Z,A.state=j.CDATA);continue;case j.CDATA_ENDING_2:">"===Z?(A.cdata&&xe(A,"oncdata",A.cdata),xe(A,"onclosecdata"),A.cdata="",A.state=j.TEXT):"]"===Z?A.cdata+="]":(A.cdata+="]]"+Z,A.state=j.CDATA);continue;case j.PROC_INST:"?"===Z?A.state=j.PROC_INST_ENDING:k(Z)?A.state=j.PROC_INST_BODY:A.procInstName+=Z;continue;case j.PROC_INST_BODY:if(!A.procInstBody&&k(Z))continue;"?"===Z?A.state=j.PROC_INST_ENDING:A.procInstBody+=Z;continue;case j.PROC_INST_ENDING:">"===Z?(xe(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=j.TEXT):(A.procInstBody+="?"+Z,A.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:T(J,Z)?A.tagName+=Z:(je(A),">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:(k(Z)||Ce(A,"Invalid character in tag name"),A.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:">"===Z?(de(A,!0),Ae(A)):(Ce(A,"Forward-slash in opening tag not followed by >"),A.state=j.ATTRIB);continue;case j.ATTRIB:if(k(Z))continue;">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:T(Y,Z)?(A.attribName=Z,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME:"="===Z?A.state=j.ATTRIB_VALUE:">"===Z?(Ce(A,"Attribute without value"),A.attribValue=A.attribName,ke(A),de(A)):k(Z)?A.state=j.ATTRIB_NAME_SAW_WHITE:T(J,Z)?A.attribName+=Z:Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if("="===Z)A.state=j.ATTRIB_VALUE;else{if(k(Z))continue;Ce(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",xe(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",">"===Z?de(A):T(Y,Z)?(A.attribName=Z,A.state=j.ATTRIB_NAME):(Ce(A,"Invalid attribute name"),A.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(k(Z))continue;v(Z)?(A.q=Z,A.state=j.ATTRIB_VALUE_QUOTED):(Ce(A,"Unquoted attribute value"),A.state=j.ATTRIB_VALUE_UNQUOTED,A.attribValue=Z);continue;case j.ATTRIB_VALUE_QUOTED:if(Z!==A.q){"&"===Z?A.state=j.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=Z;continue}ke(A),A.q="",A.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:k(Z)?A.state=j.ATTRIB:">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:T(Y,Z)?(Ce(A,"No whitespace between attributes"),A.attribName=Z,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!I(Z)){"&"===Z?A.state=j.ATTRIB_VALUE_ENTITY_U:A.attribValue+=Z;continue}ke(A),">"===Z?de(A):A.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(A.tagName)">"===Z?Ae(A):T(J,Z)?A.tagName+=Z:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=j.SCRIPT):(k(Z)||Ce(A,"Invalid tagname in closing tag"),A.state=j.CLOSE_TAG_SAW_WHITE);else{if(k(Z))continue;le(Y,Z)?A.script?(A.script+="</"+Z,A.state=j.SCRIPT):Ce(A,"Invalid tagname in closing tag."):A.tagName=Z}continue;case j.CLOSE_TAG_SAW_WHITE:if(k(Z))continue;">"===Z?Ae(A):Ce(A,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var ue,ne;switch(A.state){case j.TEXT_ENTITY:ue=j.TEXT,ne="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:ue=j.ATTRIB_VALUE_QUOTED,ne="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:ue=j.ATTRIB_VALUE_UNQUOTED,ne="attribValue"}if(";"===Z)if(A.opt.unparsedEntities){var U=nt(A);A.entity="",A.state=ue,A.write(U)}else A[ne]+=nt(A),A.entity="",A.state=ue;else T(A.entity.length?W:ee,Z)?A.entity+=Z:(Ce(A,"Invalid character in entity name"),A[ne]+="&"+A.entity+Z,A.entity="",A.state=ue);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&function G(R){for(var A=Math.max(Q.MAX_BUFFER_LENGTH,10),ie=0,Z=0,Ve=C.length;Z<Ve;Z++){var Je=R[C[Z]].length;if(Je>A)switch(C[Z]){case"textNode":Pe(R);break;case"cdata":xe(R,"oncdata",R.cdata),R.cdata="";break;case"script":xe(R,"onscript",R.script),R.script="";break;default:Qe(R,"Max buffer length exceeded: "+C[Z])}ie=Math.max(ie,Je)}R.bufferCheckPosition=Q.MAX_BUFFER_LENGTH-ie+R.position}(A),A},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(R){Pe(R),""!==R.cdata&&(xe(R,"oncdata",R.cdata),R.cdata=""),""!==R.script&&(xe(R,"onscript",R.script),R.script="")}(this)}};try{E=S(1793).Stream}catch{E=function(){}}E||(E=function(){});var N=Q.EVENTS.filter(function(R){return"error"!==R&&"end"!==R});function P(R,A){if(!(this instanceof P))return new P(R,A);E.apply(this),this._parser=new $(R,A),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(Z){ie.emit("error",Z),ie._parser.error=null},this._decoder=null,N.forEach(function(Z){Object.defineProperty(ie,"on"+Z,{get:function(){return ie._parser["on"+Z]},set:function(Ve){if(!Ve)return ie.removeAllListeners(Z),ie._parser["on"+Z]=Ve,Ve;ie.on(Z,Ve)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(E.prototype,{constructor:{value:P}})).write=function(R){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(R)){if(!this._decoder){var A=S(2024).StringDecoder;this._decoder=new A("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},P.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},P.prototype.on=function(R,A){var ie=this;return!ie._parser["on"+R]&&-1!==N.indexOf(R)&&(ie._parser["on"+R]=function(){var Z=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Z.splice(0,0,R),ie.emit.apply(ie,Z)}),E.prototype.on.call(ie,R,A)};var F="[CDATA[",oe="DOCTYPE",x="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/2000/xmlns/",se={xml:x,xmlns:B},Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function k(R){return" "===R||"\n"===R||"\r"===R||"\t"===R}function v(R){return'"'===R||"'"===R}function I(R){return">"===R||k(R)}function T(R,A){return R.test(A)}function le(R,A){return!T(R,A)}var R,A,ie,j=0;for(var Me in Q.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},Q.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Q.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Q.ENTITIES).forEach(function(R){var A=Q.ENTITIES[R],ie="number"==typeof A?String.fromCharCode(A):A;Q.ENTITIES[R]=ie}),Q.STATE)Q.STATE[Q.STATE[Me]]=Me;function ae(R,A,ie){R[A]&&R[A](ie)}function xe(R,A,ie){R.textNode&&Pe(R),ae(R,A,ie)}function Pe(R){R.textNode=He(R.opt,R.textNode),R.textNode&&ae(R,"ontext",R.textNode),R.textNode=""}function He(R,A){return R.trim&&(A=A.trim()),R.normalize&&(A=A.replace(/\s+/g," ")),A}function Qe(R,A){return Pe(R),R.trackPosition&&(A+="\nLine: "+R.line+"\nColumn: "+R.column+"\nChar: "+R.c),A=new Error(A),R.error=A,ae(R,"onerror",A),R}function Xe(R){return R.sawRoot&&!R.closedRoot&&Ce(R,"Unclosed root tag"),R.state!==j.BEGIN&&R.state!==j.BEGIN_WHITESPACE&&R.state!==j.TEXT&&Qe(R,"Unexpected end"),Pe(R),R.c="",R.closed=!0,ae(R,"onend"),$.call(R,R.strict,R.opt),R}function Ce(R,A){if("object"!=typeof R||!(R instanceof $))throw new Error("bad call to strictFail");R.strict&&Qe(R,A)}function je(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var A=R.tags[R.tags.length-1]||R,ie=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(ie.ns=A.ns),R.attribList.length=0,xe(R,"onopentagstart",ie)}function Se(R,A){var Z=R.indexOf(":")<0?["",R]:R.split(":"),Ve=Z[0],Je=Z[1];return A&&"xmlns"===R&&(Ve="xmlns",Je=""),{prefix:Ve,local:Je}}function ke(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),-1!==R.attribList.indexOf(R.attribName)||R.tag.attributes.hasOwnProperty(R.attribName))R.attribName=R.attribValue="";else{if(R.opt.xmlns){var A=Se(R.attribName,!0),Z=A.local;if("xmlns"===A.prefix)if("xml"===Z&&R.attribValue!==x)Ce(R,"xml: prefix must be bound to "+x+"\nActual: "+R.attribValue);else if("xmlns"===Z&&R.attribValue!==B)Ce(R,"xmlns: prefix must be bound to "+B+"\nActual: "+R.attribValue);else{var Ve=R.tag,Je=R.tags[R.tags.length-1]||R;Ve.ns===Je.ns&&(Ve.ns=Object.create(Je.ns)),Ve.ns[Z]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,xe(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}}function de(R,A){if(R.opt.xmlns){var ie=R.tag,Z=Se(R.tagName);ie.prefix=Z.prefix,ie.local=Z.local,ie.uri=ie.ns[Z.prefix]||"",ie.prefix&&!ie.uri&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),ie.uri=Z.prefix),ie.ns&&(R.tags[R.tags.length-1]||R).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(ot){xe(R,"onopennamespace",{prefix:ot,uri:ie.ns[ot]})});for(var Je=0,ue=R.attribList.length;Je<ue;Je++){var ne=R.attribList[Je],U=ne[0],M=ne[1],O=Se(U,!0),he=O.prefix,Ee=""===he?"":ie.ns[he]||"",Re={name:U,value:M,prefix:he,local:O.local,uri:Ee};he&&"xmlns"!==he&&!Ee&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(he)),Re.uri=he),R.tag.attributes[U]=Re,xe(R,"onattribute",Re)}R.attribList.length=0}R.tag.isSelfClosing=!!A,R.sawRoot=!0,R.tags.push(R.tag),xe(R,"onopentag",R.tag),A||(R.state=R.noscript||"script"!==R.tagName.toLowerCase()?j.TEXT:j.SCRIPT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function Ae(R){if(!R.tagName)return Ce(R,"Weird empty close tag."),R.textNode+="</>",void(R.state=j.TEXT);if(R.script){if("script"!==R.tagName)return R.script+="</"+R.tagName+">",R.tagName="",void(R.state=j.SCRIPT);xe(R,"onscript",R.script),R.script=""}var A=R.tags.length,ie=R.tagName;R.strict||(ie=ie[R.looseCase]());for(var Z=ie;A--&&R.tags[A].name!==Z;)Ce(R,"Unexpected close tag");if(A<0)return Ce(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",void(R.state=j.TEXT);R.tagName=ie;for(var Je=R.tags.length;Je-- >A;){var ue=R.tag=R.tags.pop();R.tagName=R.tag.name,xe(R,"onclosetag",R.tagName);var ne={};for(var U in ue.ns)ne[U]=ue.ns[U];R.opt.xmlns&&ue.ns!==(R.tags[R.tags.length-1]||R).ns&&Object.keys(ue.ns).forEach(function(O){xe(R,"onclosenamespace",{prefix:O,uri:ue.ns[O]})})}0===A&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=j.TEXT}function nt(R){var Z,A=R.entity,ie=A.toLowerCase(),Ve="";return R.ENTITIES[A]?R.ENTITIES[A]:R.ENTITIES[ie]?R.ENTITIES[ie]:("#"===(A=ie).charAt(0)&&("x"===A.charAt(1)?(A=A.slice(2),Ve=(Z=parseInt(A,16)).toString(16)):(A=A.slice(1),Ve=(Z=parseInt(A,10)).toString(10))),A=A.replace(/^0+/,""),isNaN(Z)||Ve.toLowerCase()!==A?(Ce(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(Z))}function _t(R,A){"<"===A?(R.state=j.OPEN_WAKA,R.startTagPosition=R.position):k(A)||(Ce(R,"Non-whitespace before first tag."),R.textNode=A,R.state=j.TEXT)}function Ke(R,A){var ie="";return A<R.length&&(ie=R.charAt(A)),ie}j=Q.STATE,String.fromCodePoint||(R=String.fromCharCode,A=Math.floor,ie=function(){var Ve=[],ne=-1,U=arguments.length;if(!U)return"";for(var M="";++ne<U;){var O=Number(arguments[ne]);if(!isFinite(O)||O<0||O>1114111||A(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?Ve.push(O):Ve.push(55296+((O-=65536)>>10),O%1024+56320),(ne+1===U||Ve.length>16384)&&(M+=R.apply(null,Ve),Ve.length=0)}return M},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(_e)},8280:function(){!function(Ue,_e){"use strict";if(!Ue.setImmediate){var G,S=1,Q={},C=!1,$=Ue.document,se=Object.getPrototypeOf&&Object.getPrototypeOf(Ue);se=se&&se.setTimeout?se:Ue,"[object process]"==={}.toString.call(Ue.process)?function z(){G=function(Y){process.nextTick(function(){N(Y)})}}():function P(){if(Ue.postMessage&&!Ue.importScripts){var Y=!0,J=Ue.onmessage;return Ue.onmessage=function(){Y=!1},Ue.postMessage("","*"),Ue.onmessage=J,Y}}()?function F(){var Y="setImmediate$"+Math.random()+"$",J=function(ee){ee.source===Ue&&"string"==typeof ee.data&&0===ee.data.indexOf(Y)&&N(+ee.data.slice(Y.length))};Ue.addEventListener?Ue.addEventListener("message",J,!1):Ue.attachEvent("onmessage",J),G=function(ee){Ue.postMessage(Y+ee,"*")}}():Ue.MessageChannel?function oe(){var Y=new MessageChannel;Y.port1.onmessage=function(J){N(J.data)},G=function(J){Y.port2.postMessage(J)}}():$&&"onreadystatechange"in $.createElement("script")?function x(){var Y=$.documentElement;G=function(J){var ee=$.createElement("script");ee.onreadystatechange=function(){N(J),ee.onreadystatechange=null,Y.removeChild(ee),ee=null},Y.appendChild(ee)}}():function B(){G=function(Y){setTimeout(N,0,Y)}}(),se.setImmediate=function q(Y){"function"!=typeof Y&&(Y=new Function(""+Y));for(var J=new Array(arguments.length-1),ee=0;ee<J.length;ee++)J[ee]=arguments[ee+1];return Q[S]={callback:Y,args:J},G(S),S++},se.clearImmediate=_}function _(Y){delete Q[Y]}function N(Y){if(C)setTimeout(N,0,Y);else{var J=Q[Y];if(J){C=!0;try{!function E(Y){var J=Y.callback,ee=Y.args;switch(ee.length){case 0:J();break;case 1:J(ee[0]);break;case 2:J(ee[0],ee[1]);break;case 3:J(ee[0],ee[1],ee[2]);break;default:J.apply(undefined,ee)}}(J)}finally{_(Y),C=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(Ue,_e,S)=>{Ue.exports=$;var Q=S(2016).EventEmitter;function $(){Q.call(this)}S(6698)($,Q),$.Readable=S(842),$.Writable=S(7597),$.Duplex=S(2232),$.Transform=S(555),$.PassThrough=S(8226),$.finished=S(1227),$.pipeline=S(2345),$.Stream=$,$.prototype.pipe=function(G,q){var _=this;function E(B){G.writable&&!1===G.write(B)&&_.pause&&_.pause()}function N(){_.readable&&_.resume&&_.resume()}_.on("data",E),G.on("drain",N),!G._isStdio&&(!q||!1!==q.end)&&(_.on("end",P),_.on("close",F));var z=!1;function P(){z||(z=!0,G.end())}function F(){z||(z=!0,"function"==typeof G.destroy&&G.destroy())}function oe(B){if(x(),0===Q.listenerCount(this,"error"))throw B}function x(){_.removeListener("data",E),G.removeListener("drain",N),_.removeListener("end",P),_.removeListener("close",F),_.removeListener("error",oe),G.removeListener("error",oe),_.removeListener("end",x),_.removeListener("close",x),G.removeListener("close",x)}return _.on("error",oe),G.on("error",oe),_.on("end",x),_.on("close",x),G.on("close",x),G.emit("pipe",_),G}},9555:Ue=>{"use strict";var S={};function Q(_,E,N){N||(N=Error);var P=function(F){function oe(x,B,se){return F.call(this,function z(F,oe,x){return"string"==typeof E?E:E(F,oe,x)}(x,B,se))||this}return function _e(_,E){_.prototype=Object.create(E.prototype),_.prototype.constructor=_,_.__proto__=E}(oe,F),oe}(N);P.prototype.name=N.name,P.prototype.code=_,S[_]=P}function C(_,E){if(Array.isArray(_)){var N=_.length;return _=_.map(function(z){return String(z)}),N>2?"one of ".concat(E," ").concat(_.slice(0,N-1).join(", "),", or ")+_[N-1]:2===N?"one of ".concat(E," ").concat(_[0]," or ").concat(_[1]):"of ".concat(E," ").concat(_[0])}return"of ".concat(E," ").concat(String(_))}Q("ERR_INVALID_OPT_VALUE",function(_,E){return'The value "'+E+'" is invalid for option "'+_+'"'},TypeError),Q("ERR_INVALID_ARG_TYPE",function(_,E,N){var z,P;if("string"==typeof E&&function $(_,E,N){return _.substr(!N||N<0?0:+N,E.length)===E}(E,"not ")?(z="must not be",E=E.replace(/^not /,"")):z="must be",function G(_,E,N){return(void 0===N||N>_.length)&&(N=_.length),_.substring(N-E.length,N)===E}(_," argument"))P="The ".concat(_," ").concat(z," ").concat(C(E,"type"));else{var F=function q(_,E,N){return"number"!=typeof N&&(N=0),!(N+E.length>_.length)&&-1!==_.indexOf(E,N)}(_,".")?"property":"argument";P='The "'.concat(_,'" ').concat(F," ").concat(z," ").concat(C(E,"type"))}return P+". Received type ".concat(typeof N)},TypeError),Q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Q("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),Q("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Q("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),Q("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Q("ERR_STREAM_WRITE_AFTER_END","write after end"),Q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Q("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),Q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ue.exports.q=S},2232:(Ue,_e,S)=>{"use strict";var Q=Object.keys||function(P){var F=[];for(var oe in P)F.push(oe);return F};Ue.exports=E;var C=S(842),$=S(7597);S(6698)(E,C);for(var G=Q($.prototype),q=0;q<G.length;q++){var _=G[q];E.prototype[_]||(E.prototype[_]=$.prototype[_])}function E(P){if(!(this instanceof E))return new E(P);C.call(this,P),$.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",N)))}function N(){this._writableState.ended||process.nextTick(z,this)}function z(P){P.end()}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(F){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=F,this._writableState.destroyed=F)}})},8226:(Ue,_e,S)=>{"use strict";Ue.exports=C;var Q=S(555);function C($){if(!(this instanceof C))return new C($);Q.call(this,$)}S(6698)(C,Q),C.prototype._transform=function($,G,q){q(null,$)}},842:(Ue,_e,S)=>{"use strict";var Q;Ue.exports=ae,ae.ReadableState=Me,S(2016);var P,$=function(ne,U){return ne.listeners(U).length},G=S(3951),q=S(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},z=S(964);P=z&&z.debuglog?z.debuglog("stream"):function(){};var k,v,I,F=S(2998),oe=S(3992),B=S(4962).getHighWaterMark,se=S(9555).q,Y=se.ERR_INVALID_ARG_TYPE,J=se.ERR_STREAM_PUSH_AFTER_EOF,ee=se.ERR_METHOD_NOT_IMPLEMENTED,W=se.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(6698)(ae,G);var T=oe.errorOrDestroy,le=["error","close","destroy","pause","resume"];function Me(ue,ne,U){Q=Q||S(2232),"boolean"!=typeof U&&(U=ne instanceof Q),this.objectMode=!!(ue=ue||{}).objectMode,U&&(this.objectMode=this.objectMode||!!ue.readableObjectMode),this.highWaterMark=B(this,ue,"readableHighWaterMark",U),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ue.emitClose,this.autoDestroy=!!ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ue.encoding&&(k||(k=S(2024).StringDecoder),this.decoder=new k(ue.encoding),this.encoding=ue.encoding)}function ae(ue){if(Q=Q||S(2232),!(this instanceof ae))return new ae(ue);this._readableState=new Me(ue,this,this instanceof Q),this.readable=!0,ue&&("function"==typeof ue.read&&(this._read=ue.read),"function"==typeof ue.destroy&&(this._destroy=ue.destroy)),G.call(this)}function xe(ue,ne,U,M,O){P("readableAddChunk",ne);var We,he=ue._readableState;if(null===ne)he.reading=!1,function je(ue,ne){if(P("onEofChunk"),!ne.ended){if(ne.decoder){var U=ne.decoder.end();U&&U.length&&(ne.buffer.push(U),ne.length+=ne.objectMode?1:U.length)}ne.ended=!0,ne.sync?Se(ue):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,ke(ue)))}}(ue,he);else if(O||(We=function He(ue,ne){var U;return!function N(ue){return q.isBuffer(ue)||ue instanceof _}(ne)&&"string"!=typeof ne&&void 0!==ne&&!ue.objectMode&&(U=new Y("chunk",["string","Buffer","Uint8Array"],ne)),U}(he,ne)),We)T(ue,We);else if(he.objectMode||ne&&ne.length>0)if("string"!=typeof ne&&!he.objectMode&&Object.getPrototypeOf(ne)!==q.prototype&&(ne=function E(ue){return q.from(ue)}(ne)),M)he.endEmitted?T(ue,new W):Pe(ue,he,ne,!0);else if(he.ended)T(ue,new J);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!U?(ne=he.decoder.write(ne),he.objectMode||0!==ne.length?Pe(ue,he,ne,!1):de(ue,he)):Pe(ue,he,ne,!1)}else M||(he.reading=!1,de(ue,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function Pe(ue,ne,U,M){ne.flowing&&0===ne.length&&!ne.sync?(ne.awaitDrain=0,ue.emit("data",U)):(ne.length+=ne.objectMode?1:U.length,M?ne.buffer.unshift(U):ne.buffer.push(U),ne.needReadable&&Se(ue)),de(ue,ne)}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ne){this._readableState&&(this._readableState.destroyed=ne)}}),ae.prototype.destroy=oe.destroy,ae.prototype._undestroy=oe.undestroy,ae.prototype._destroy=function(ue,ne){ne(ue)},ae.prototype.push=function(ue,ne){var M,U=this._readableState;return U.objectMode?M=!0:"string"==typeof ue&&((ne=ne||U.defaultEncoding)!==U.encoding&&(ue=q.from(ue,ne),ne=""),M=!0),xe(this,ue,ne,!1,M)},ae.prototype.unshift=function(ue){return xe(this,ue,null,!0,!1)},ae.prototype.isPaused=function(){return!1===this._readableState.flowing},ae.prototype.setEncoding=function(ue){k||(k=S(2024).StringDecoder);var ne=new k(ue);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,M="";null!==U;)M+=ne.write(U.data),U=U.next;return this._readableState.buffer.clear(),""!==M&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var Qe=1073741824;function Ce(ue,ne){return ue<=0||0===ne.length&&ne.ended?0:ne.objectMode?1:ue!=ue?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(ue>ne.highWaterMark&&(ne.highWaterMark=function Xe(ue){return ue>=Qe?ue=Qe:(ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++),ue}(ue)),ue<=ne.length?ue:ne.ended?ne.length:(ne.needReadable=!0,0))}function Se(ue){var ne=ue._readableState;P("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(P("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(ke,ue))}function ke(ue){var ne=ue._readableState;P("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&(ne.length||ne.ended)&&(ue.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,A(ue)}function de(ue,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(Ae,ue,ne))}function Ae(ue,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&0===ne.length);){var U=ne.length;if(P("maybeReadMore read 0"),ue.read(0),U===ne.length)break}ne.readingMore=!1}function _t(ue){var ne=ue._readableState;ne.readableListening=ue.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:ue.listenerCount("data")>0&&ue.resume()}function Ke(ue){P("readable nexttick read 0"),ue.read(0)}function R(ue,ne){P("resume",ne.reading),ne.reading||ue.read(0),ne.resumeScheduled=!1,ue.emit("resume"),A(ue),ne.flowing&&!ne.reading&&ue.read(0)}function A(ue){var ne=ue._readableState;for(P("flow",ne.flowing);ne.flowing&&null!==ue.read(););}function ie(ue,ne){return 0===ne.length?null:(ne.objectMode?U=ne.buffer.shift():!ue||ue>=ne.length?(U=ne.decoder?ne.buffer.join(""):1===ne.buffer.length?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):U=ne.buffer.consume(ue,ne.decoder),U);var U}function Z(ue){var ne=ue._readableState;P("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(Ve,ne,ue))}function Ve(ue,ne){if(P("endReadableNT",ue.endEmitted,ue.length),!ue.endEmitted&&0===ue.length&&(ue.endEmitted=!0,ne.readable=!1,ne.emit("end"),ue.autoDestroy)){var U=ne._writableState;(!U||U.autoDestroy&&U.finished)&&ne.destroy()}}function Je(ue,ne){for(var U=0,M=ue.length;U<M;U++)if(ue[U]===ne)return U;return-1}ae.prototype.read=function(ue){P("read",ue),ue=parseInt(ue,10);var ne=this._readableState,U=ue;if(0!==ue&&(ne.emittedReadable=!1),0===ue&&ne.needReadable&&((0!==ne.highWaterMark?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return P("read: emitReadable",ne.length,ne.ended),0===ne.length&&ne.ended?Z(this):Se(this),null;if(0===(ue=Ce(ue,ne))&&ne.ended)return 0===ne.length&&Z(this),null;var O,M=ne.needReadable;return P("need readable",M),(0===ne.length||ne.length-ue<ne.highWaterMark)&&P("length less than watermark",M=!0),ne.ended||ne.reading?P("reading or ended",M=!1):M&&(P("do read"),ne.reading=!0,ne.sync=!0,0===ne.length&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(ue=Ce(U,ne))),null===(O=ue>0?ie(ue,ne):null)?(ne.needReadable=ne.length<=ne.highWaterMark,ue=0):(ne.length-=ue,ne.awaitDrain=0),0===ne.length&&(ne.ended||(ne.needReadable=!0),U!==ue&&ne.ended&&Z(this)),null!==O&&this.emit("data",O),O},ae.prototype._read=function(ue){T(this,new ee("_read()"))},ae.prototype.pipe=function(ue,ne){var U=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=ue;break;case 1:M.pipes=[M.pipes,ue];break;default:M.pipes.push(ue)}M.pipesCount+=1,P("pipe count=%d opts=%j",M.pipesCount,ne);var he=ne&&!1===ne.end||ue===process.stdout||ue===process.stderr?H:Ee;function Ee(){P("onend"),ue.end()}M.endEmitted?process.nextTick(he):U.once("end",he),ue.on("unpipe",function We(te,Le){P("onunpipe"),te===U&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,function bt(){P("cleanup"),ue.removeListener("close",zt),ue.removeListener("finish",pe),ue.removeListener("drain",Re),ue.removeListener("error",mt),ue.removeListener("unpipe",We),U.removeListener("end",Ee),U.removeListener("end",H),U.removeListener("data",It),ot=!0,M.awaitDrain&&(!ue._writableState||ue._writableState.needDrain)&&Re()}())});var Re=function nt(ue){return function(){var U=ue._readableState;P("pipeOnDrain",U.awaitDrain),U.awaitDrain&&U.awaitDrain--,0===U.awaitDrain&&$(ue,"data")&&(U.flowing=!0,A(ue))}}(U);ue.on("drain",Re);var ot=!1;function It(te){P("ondata");var Le=ue.write(te);P("dest.write",Le),!1===Le&&((1===M.pipesCount&&M.pipes===ue||M.pipesCount>1&&-1!==Je(M.pipes,ue))&&!ot&&(P("false write response, pause",M.awaitDrain),M.awaitDrain++),U.pause())}function mt(te){P("onerror",te),H(),ue.removeListener("error",mt),0===$(ue,"error")&&T(ue,te)}function zt(){ue.removeListener("finish",pe),H()}function pe(){P("onfinish"),ue.removeListener("close",zt),H()}function H(){P("unpipe"),U.unpipe(ue)}return U.on("data",It),function j(ue,ne,U){if("function"==typeof ue.prependListener)return ue.prependListener(ne,U);ue._events&&ue._events[ne]?Array.isArray(ue._events[ne])?ue._events[ne].unshift(U):ue._events[ne]=[U,ue._events[ne]]:ue.on(ne,U)}(ue,"error",mt),ue.once("close",zt),ue.once("finish",pe),ue.emit("pipe",U),M.flowing||(P("pipe resume"),U.resume()),ue},ae.prototype.unpipe=function(ue){var ne=this._readableState,U={hasUnpiped:!1};if(0===ne.pipesCount)return this;if(1===ne.pipesCount)return ue&&ue!==ne.pipes||(ue||(ue=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,ue&&ue.emit("unpipe",this,U)),this;if(!ue){var M=ne.pipes,O=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var he=0;he<O;he++)M[he].emit("unpipe",this,{hasUnpiped:!1});return this}var We=Je(ne.pipes,ue);return-1===We||(ne.pipes.splice(We,1),ne.pipesCount-=1,1===ne.pipesCount&&(ne.pipes=ne.pipes[0]),ue.emit("unpipe",this,U)),this},ae.prototype.addListener=ae.prototype.on=function(ue,ne){var U=G.prototype.on.call(this,ue,ne),M=this._readableState;return"data"===ue?(M.readableListening=this.listenerCount("readable")>0,!1!==M.flowing&&this.resume()):"readable"===ue&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,P("on readable",M.length,M.reading),M.length?Se(this):M.reading||process.nextTick(Ke,this)),U},ae.prototype.removeListener=function(ue,ne){var U=G.prototype.removeListener.call(this,ue,ne);return"readable"===ue&&process.nextTick(_t,this),U},ae.prototype.removeAllListeners=function(ue){var ne=G.prototype.removeAllListeners.apply(this,arguments);return("readable"===ue||void 0===ue)&&process.nextTick(_t,this),ne},ae.prototype.resume=function(){var ue=this._readableState;return ue.flowing||(P("resume"),ue.flowing=!ue.readableListening,function fe(ue,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,process.nextTick(R,ue,ne))}(this,ue)),ue.paused=!1,this},ae.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ae.prototype.wrap=function(ue){var ne=this,U=this._readableState,M=!1;for(var O in ue.on("end",function(){if(P("wrapped end"),U.decoder&&!U.ended){var We=U.decoder.end();We&&We.length&&ne.push(We)}ne.push(null)}),ue.on("data",function(We){P("wrapped data"),U.decoder&&(We=U.decoder.write(We)),U.objectMode&&null==We||!(U.objectMode||We&&We.length)||ne.push(We)||(M=!0,ue.pause())}),ue)void 0===this[O]&&"function"==typeof ue[O]&&(this[O]=function(Ee){return function(){return ue[Ee].apply(ue,arguments)}}(O));for(var he=0;he<le.length;he++)ue.on(le[he],this.emit.bind(this,le[he]));return this._read=function(We){P("wrapped _read",We),M&&(M=!1,ue.resume())},this},"function"==typeof Symbol&&(ae.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=S(2590)),v(this)}),Object.defineProperty(ae.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ae.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ae.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ne){this._readableState&&(this._readableState.flowing=ne)}}),ae._fromList=ie,Object.defineProperty(ae.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ae.from=function(ue,ne){return void 0===I&&(I=S(5374)),I(ae,ue,ne)})},555:(Ue,_e,S)=>{"use strict";Ue.exports=N;var Q=S(9555).q,C=Q.ERR_METHOD_NOT_IMPLEMENTED,$=Q.ERR_MULTIPLE_CALLBACK,G=Q.ERR_TRANSFORM_ALREADY_TRANSFORMING,q=Q.ERR_TRANSFORM_WITH_LENGTH_0,_=S(2232);function E(F,oe){var x=this._transformState;x.transforming=!1;var B=x.writecb;if(null===B)return this.emit("error",new $);x.writechunk=null,x.writecb=null,null!=oe&&this.push(oe),B(F);var se=this._readableState;se.reading=!1,(se.needReadable||se.length<se.highWaterMark)&&this._read(se.highWaterMark)}function N(F){if(!(this instanceof N))return new N(F);_.call(this,F),this._transformState={afterTransform:E.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,F&&("function"==typeof F.transform&&(this._transform=F.transform),"function"==typeof F.flush&&(this._flush=F.flush)),this.on("prefinish",z)}function z(){var F=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(oe,x){P(F,oe,x)})}function P(F,oe,x){if(oe)return F.emit("error",oe);if(null!=x&&F.push(x),F._writableState.length)throw new q;if(F._transformState.transforming)throw new G;return F.push(null)}S(6698)(N,_),N.prototype.push=function(F,oe){return this._transformState.needTransform=!1,_.prototype.push.call(this,F,oe)},N.prototype._transform=function(F,oe,x){x(new C("_transform()"))},N.prototype._write=function(F,oe,x){var B=this._transformState;if(B.writecb=x,B.writechunk=F,B.writeencoding=oe,!B.transforming){var se=this._readableState;(B.needTransform||se.needReadable||se.length<se.highWaterMark)&&this._read(se.highWaterMark)}},N.prototype._read=function(F){var oe=this._transformState;null===oe.writechunk||oe.transforming?oe.needTransform=!0:(oe.transforming=!0,this._transform(oe.writechunk,oe.writeencoding,oe.afterTransform))},N.prototype._destroy=function(F,oe){_.prototype._destroy.call(this,F,function(x){oe(x)})}},7597:(Ue,_e,S)=>{"use strict";function C(A){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function R(A,ie,Z){var Ve=A.entry;for(A.entry=null;Ve;){var Je=Ve.callback;ie.pendingcb--,Je(Z),Ve=Ve.next}ie.corkedRequestsFree.next=A}(ie,A)}}var $;Ue.exports=Me,Me.WritableState=le;var j,G={deprecate:S(496)},q=S(3951),_=S(9007).Buffer,E=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=S(3992),oe=S(4962).getHighWaterMark,x=S(9555).q,B=x.ERR_INVALID_ARG_TYPE,se=x.ERR_METHOD_NOT_IMPLEMENTED,Y=x.ERR_MULTIPLE_CALLBACK,J=x.ERR_STREAM_CANNOT_PIPE,ee=x.ERR_STREAM_DESTROYED,W=x.ERR_STREAM_NULL_VALUES,k=x.ERR_STREAM_WRITE_AFTER_END,v=x.ERR_UNKNOWN_ENCODING,I=P.errorOrDestroy;function T(){}function le(A,ie,Z){$=$||S(2232),"boolean"!=typeof Z&&(Z=ie instanceof $),this.objectMode=!!(A=A||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=oe(this,A,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===A.decodeStrings),this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Je){!function je(A,ie){var Z=A._writableState,Ve=Z.sync,Je=Z.writecb;if("function"!=typeof Je)throw new Y;if(function Ce(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}(Z),ie)!function Xe(A,ie,Z,Ve,Je){--ie.pendingcb,Z?(process.nextTick(Je,Ve),process.nextTick(Ke,A,ie),A._writableState.errorEmitted=!0,I(A,Ve)):(Je(Ve),A._writableState.errorEmitted=!0,I(A,Ve),Ke(A,ie))}(A,Z,Ve,ie,Je);else{var ue=Ae(Z)||A.destroyed;!ue&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&de(A,Z),Ve?process.nextTick(Se,A,Z,ue,Je):Se(A,Z,ue,Je)}}(ie,Je)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new C(this)}function Me(A){var ie=this instanceof($=$||S(2232));if(!ie&&!j.call(Me,this))return new Me(A);this._writableState=new le(A,this,ie),this.writable=!0,A&&("function"==typeof A.write&&(this._write=A.write),"function"==typeof A.writev&&(this._writev=A.writev),"function"==typeof A.destroy&&(this._destroy=A.destroy),"function"==typeof A.final&&(this._final=A.final)),q.call(this)}function Qe(A,ie,Z,Ve,Je,ue,ne){ie.writelen=Ve,ie.writecb=ne,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ee("write")):Z?A._writev(Je,ie.onwrite):A._write(Je,ue,ie.onwrite),ie.sync=!1}function Se(A,ie,Z,Ve){Z||function ke(A,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,A.emit("drain"))}(A,ie),ie.pendingcb--,Ve(),Ke(A,ie)}function de(A,ie){ie.bufferProcessing=!0;var Z=ie.bufferedRequest;if(A._writev&&Z&&Z.next){var Je=new Array(ie.bufferedRequestCount),ue=ie.corkedRequestsFree;ue.entry=Z;for(var ne=0,U=!0;Z;)Je[ne]=Z,Z.isBuf||(U=!1),Z=Z.next,ne+=1;Je.allBuffers=U,Qe(A,ie,!0,ie.length,Je,"",ue.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ue.next?(ie.corkedRequestsFree=ue.next,ue.next=null):ie.corkedRequestsFree=new C(ie),ie.bufferedRequestCount=0}else{for(;Z;){var M=Z.chunk;if(Qe(A,ie,!1,ie.objectMode?1:M.length,M,Z.encoding,Z.callback),Z=Z.next,ie.bufferedRequestCount--,ie.writing)break}null===Z&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=Z,ie.bufferProcessing=!1}function Ae(A){return A.ending&&0===A.length&&null===A.bufferedRequest&&!A.finished&&!A.writing}function nt(A,ie){A._final(function(Z){ie.pendingcb--,Z&&I(A,Z),ie.prefinished=!0,A.emit("prefinish"),Ke(A,ie)})}function Ke(A,ie){var Z=Ae(ie);if(Z&&(function _t(A,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof A._final||ie.destroyed?(ie.prefinished=!0,A.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(nt,A,ie)))}(A,ie),0===ie.pendingcb&&(ie.finished=!0,A.emit("finish"),ie.autoDestroy))){var Ve=A._readableState;(!Ve||Ve.autoDestroy&&Ve.endEmitted)&&A.destroy()}return Z}S(6698)(Me,q),le.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,Z=[];ie;)Z.push(ie),ie=ie.next;return Z},function(){try{Object.defineProperty(le.prototype,"buffer",{get:G.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(Me,Symbol.hasInstance,{value:function(ie){return!!j.call(this,ie)||this===Me&&ie&&ie._writableState instanceof le}})):j=function(ie){return ie instanceof this},Me.prototype.pipe=function(){I(this,new J)},Me.prototype.write=function(A,ie,Z){var Ve=this._writableState,Je=!1,ue=!Ve.objectMode&&function z(A){return _.isBuffer(A)||A instanceof E}(A);return ue&&!_.isBuffer(A)&&(A=function N(A){return _.from(A)}(A)),"function"==typeof ie&&(Z=ie,ie=null),ue?ie="buffer":ie||(ie=Ve.defaultEncoding),"function"!=typeof Z&&(Z=T),Ve.ending?function ae(A,ie){var Z=new k;I(A,Z),process.nextTick(ie,Z)}(this,Z):(ue||function xe(A,ie,Z,Ve){var Je;return null===Z?Je=new W:"string"!=typeof Z&&!ie.objectMode&&(Je=new B("chunk",["string","Buffer"],Z)),!Je||(I(A,Je),process.nextTick(Ve,Je),!1)}(this,Ve,A,Z))&&(Ve.pendingcb++,Je=function He(A,ie,Z,Ve,Je,ue){if(!Z){var ne=function Pe(A,ie,Z){return!A.objectMode&&!1!==A.decodeStrings&&"string"==typeof ie&&(ie=_.from(ie,Z)),ie}(ie,Ve,Je);Ve!==ne&&(Z=!0,Je="buffer",Ve=ne)}var U=ie.objectMode?1:Ve.length;ie.length+=U;var M=ie.length<ie.highWaterMark;if(M||(ie.needDrain=!0),ie.writing||ie.corked){var O=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Ve,encoding:Je,isBuf:Z,callback:ue,next:null},O?O.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else Qe(A,ie,!1,U,Ve,Je,ue);return M}(this,Ve,ue,A,ie,Z)),Je},Me.prototype.cork=function(){this._writableState.corked++},Me.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&de(this,A))},Me.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new v(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Me.prototype._write=function(A,ie,Z){Z(new se("_write()"))},Me.prototype._writev=null,Me.prototype.end=function(A,ie,Z){var Ve=this._writableState;return"function"==typeof A?(Z=A,A=null,ie=null):"function"==typeof ie&&(Z=ie,ie=null),null!=A&&this.write(A,ie),Ve.corked&&(Ve.corked=1,this.uncork()),Ve.ending||function fe(A,ie,Z){ie.ending=!0,Ke(A,ie),Z&&(ie.finished?process.nextTick(Z):A.once("finish",Z)),ie.ended=!0,A.writable=!1}(this,Ve,Z),this},Object.defineProperty(Me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Me.prototype.destroy=P.destroy,Me.prototype._undestroy=P.undestroy,Me.prototype._destroy=function(A,ie){ie(A)}},2590:(Ue,_e,S)=>{"use strict";var Q;function C(k,v,I){return v=function $(k){var v=function G(k,v){if("object"!=typeof k||null===k)return k;var I=k[Symbol.toPrimitive];if(void 0!==I){var T=I.call(k,v||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(k)}(k,"string");return"symbol"==typeof v?v:String(v)}(v),v in k?Object.defineProperty(k,v,{value:I,enumerable:!0,configurable:!0,writable:!0}):k[v]=I,k}var q=S(1227),_=Symbol("lastResolve"),E=Symbol("lastReject"),N=Symbol("error"),z=Symbol("ended"),P=Symbol("lastPromise"),F=Symbol("handlePromise"),oe=Symbol("stream");function x(k,v){return{value:k,done:v}}function B(k){var v=k[_];if(null!==v){var I=k[oe].read();null!==I&&(k[P]=null,k[_]=null,k[E]=null,v(x(I,!1)))}}function se(k){process.nextTick(B,k)}var J=Object.getPrototypeOf(function(){}),ee=Object.setPrototypeOf((C(Q={get stream(){return this[oe]},next:function(){var v=this,I=this[N];if(null!==I)return Promise.reject(I);if(this[z])return Promise.resolve(x(void 0,!0));if(this[oe].destroyed)return new Promise(function(Me,ae){process.nextTick(function(){v[N]?ae(v[N]):Me(x(void 0,!0))})});var le,T=this[P];if(T)le=new Promise(function Y(k,v){return function(I,T){k.then(function(){v[z]?I(x(void 0,!0)):v[F](I,T)},T)}}(T,this));else{var j=this[oe].read();if(null!==j)return Promise.resolve(x(j,!1));le=new Promise(this[F])}return this[P]=le,le}},Symbol.asyncIterator,function(){return this}),C(Q,"return",function(){var v=this;return new Promise(function(I,T){v[oe].destroy(null,function(le){le?T(le):I(x(void 0,!0))})})}),Q),J);Ue.exports=function(v){var I,T=Object.create(ee,(C(I={},oe,{value:v,writable:!0}),C(I,_,{value:null,writable:!0}),C(I,E,{value:null,writable:!0}),C(I,N,{value:null,writable:!0}),C(I,z,{value:v._readableState.endEmitted,writable:!0}),C(I,F,{value:function(j,Me){var ae=T[oe].read();ae?(T[P]=null,T[_]=null,T[E]=null,j(x(ae,!1))):(T[_]=j,T[E]=Me)},writable:!0}),I));return T[P]=null,q(v,function(le){if(le&&"ERR_STREAM_PREMATURE_CLOSE"!==le.code){var j=T[E];return null!==j&&(T[P]=null,T[_]=null,T[E]=null,j(le)),void(T[N]=le)}var Me=T[_];null!==Me&&(T[P]=null,T[_]=null,T[E]=null,Me(x(void 0,!0))),T[z]=!0}),v.on("readable",se.bind(null,T)),T}},2998:(Ue,_e,S)=>{"use strict";function Q(se,Y){var J=Object.keys(se);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(se);Y&&(ee=ee.filter(function(W){return Object.getOwnPropertyDescriptor(se,W).enumerable})),J.push.apply(J,ee)}return J}function C(se){for(var Y=1;Y<arguments.length;Y++){var J=null!=arguments[Y]?arguments[Y]:{};Y%2?Q(Object(J),!0).forEach(function(ee){$(se,ee,J[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(J)):Q(Object(J)).forEach(function(ee){Object.defineProperty(se,ee,Object.getOwnPropertyDescriptor(J,ee))})}return se}function $(se,Y,J){return(Y=E(Y))in se?Object.defineProperty(se,Y,{value:J,enumerable:!0,configurable:!0,writable:!0}):se[Y]=J,se}function q(se,Y){for(var J=0;J<Y.length;J++){var ee=Y[J];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(se,E(ee.key),ee)}}function E(se){var Y=function N(se,Y){if("object"!=typeof se||null===se)return se;var J=se[Symbol.toPrimitive];if(void 0!==J){var ee=J.call(se,Y||"default");if("object"!=typeof ee)return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(se)}(se,"string");return"symbol"==typeof Y?Y:String(Y)}var P=S(9007).Buffer,oe=S(9862).inspect,x=oe&&oe.custom||"inspect";function B(se,Y,J){P.prototype.copy.call(se,Y,J)}Ue.exports=function(){function se(){(function G(se,Y){if(!(se instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,se),this.head=null,this.tail=null,this.length=0}return function _(se,Y,J){Y&&q(se.prototype,Y),J&&q(se,J),Object.defineProperty(se,"prototype",{writable:!1})}(se,[{key:"push",value:function(J){var ee={data:J,next:null};this.length>0?this.tail.next=ee:this.head=ee,this.tail=ee,++this.length}},{key:"unshift",value:function(J){var ee={data:J,next:this.head};0===this.length&&(this.tail=ee),this.head=ee,++this.length}},{key:"shift",value:function(){if(0!==this.length){var J=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,J}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(J){if(0===this.length)return"";for(var ee=this.head,W=""+ee.data;ee=ee.next;)W+=J+ee.data;return W}},{key:"concat",value:function(J){if(0===this.length)return P.alloc(0);for(var ee=P.allocUnsafe(J>>>0),W=this.head,k=0;W;)B(W.data,ee,k),k+=W.data.length,W=W.next;return ee}},{key:"consume",value:function(J,ee){var W;return J<this.head.data.length?(W=this.head.data.slice(0,J),this.head.data=this.head.data.slice(J)):W=J===this.head.data.length?this.shift():ee?this._getString(J):this._getBuffer(J),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(J){var ee=this.head,W=1,k=ee.data;for(J-=k.length;ee=ee.next;){var v=ee.data,I=J>v.length?v.length:J;if(k+=I===v.length?v:v.slice(0,J),0==(J-=I)){I===v.length?(++W,this.head=ee.next?ee.next:this.tail=null):(this.head=ee,ee.data=v.slice(I));break}++W}return this.length-=W,k}},{key:"_getBuffer",value:function(J){var ee=P.allocUnsafe(J),W=this.head,k=1;for(W.data.copy(ee),J-=W.data.length;W=W.next;){var v=W.data,I=J>v.length?v.length:J;if(v.copy(ee,ee.length-J,0,I),0==(J-=I)){I===v.length?(++k,this.head=W.next?W.next:this.tail=null):(this.head=W,W.data=v.slice(I));break}++k}return this.length-=k,ee}},{key:x,value:function(J,ee){return oe(this,C(C({},ee),{},{depth:0,customInspect:!1}))}}]),se}()},3992:Ue=>{"use strict";function S(q,_){$(q,_),Q(q)}function Q(q){q._writableState&&!q._writableState.emitClose||q._readableState&&!q._readableState.emitClose||q.emit("close")}function $(q,_){q.emit("error",_)}Ue.exports={destroy:function _e(q,_){var E=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(q):q&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick($,this,q)):process.nextTick($,this,q)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(q||null,function(P){!_&&P?E._writableState?E._writableState.errorEmitted?process.nextTick(Q,E):(E._writableState.errorEmitted=!0,process.nextTick(S,E,P)):process.nextTick(S,E,P):_?(process.nextTick(Q,E),_(P)):process.nextTick(Q,E)}),this)},undestroy:function C(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function G(q,_){var E=q._readableState,N=q._writableState;E&&E.autoDestroy||N&&N.autoDestroy?q.destroy(_):q.emit("error",_)}}},1227:(Ue,_e,S)=>{"use strict";var Q=S(9555).q.ERR_STREAM_PREMATURE_CLOSE;function $(){}Ue.exports=function q(_,E,N){if("function"==typeof E)return q(_,null,E);E||(E={}),N=function C(_){var E=!1;return function(){if(!E){E=!0;for(var N=arguments.length,z=new Array(N),P=0;P<N;P++)z[P]=arguments[P];_.apply(this,z)}}}(N||$);var z=E.readable||!1!==E.readable&&_.readable,P=E.writable||!1!==E.writable&&_.writable,F=function(){_.writable||x()},oe=_._writableState&&_._writableState.finished,x=function(){P=!1,oe=!0,z||N.call(_)},B=_._readableState&&_._readableState.endEmitted,se=function(){z=!1,B=!0,P||N.call(_)},Y=function(k){N.call(_,k)},J=function(){var k;return z&&!B?((!_._readableState||!_._readableState.ended)&&(k=new Q),N.call(_,k)):P&&!oe?((!_._writableState||!_._writableState.ended)&&(k=new Q),N.call(_,k)):void 0},ee=function(){_.req.on("finish",x)};return function G(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",x),_.on("abort",J),_.req?ee():_.on("request",ee)):P&&!_._writableState&&(_.on("end",F),_.on("close",F)),_.on("end",se),_.on("finish",x),!1!==E.error&&_.on("error",Y),_.on("close",J),function(){_.removeListener("complete",x),_.removeListener("abort",J),_.removeListener("request",ee),_.req&&_.req.removeListener("finish",x),_.removeListener("end",F),_.removeListener("close",F),_.removeListener("finish",x),_.removeListener("end",se),_.removeListener("error",Y),_.removeListener("close",J)}}},5374:Ue=>{Ue.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(Ue,_e,S)=>{"use strict";var Q,$=S(9555).q,G=$.ERR_MISSING_ARGS,q=$.ERR_STREAM_DESTROYED;function _(x){if(x)throw x}function z(x){x()}function P(x,B){return x.pipe(B)}Ue.exports=function oe(){for(var x=arguments.length,B=new Array(x),se=0;se<x;se++)B[se]=arguments[se];var Y=function F(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():_}(B);if(Array.isArray(B[0])&&(B=B[0]),B.length<2)throw new G("streams");var J,ee=B.map(function(W,k){var v=k<B.length-1;return function N(x,B,se,Y){Y=function C(x){var B=!1;return function(){B||(B=!0,x.apply(void 0,arguments))}}(Y);var J=!1;x.on("close",function(){J=!0}),void 0===Q&&(Q=S(1227)),Q(x,{readable:B,writable:se},function(W){if(W)return Y(W);J=!0,Y()});var ee=!1;return function(W){if(!J&&!ee){if(ee=!0,function E(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();Y(W||new q("pipe"))}}}(W,v,k>0,function(T){J||(J=T),T&&ee.forEach(z),!v&&(ee.forEach(z),Y(J))})});return B.reduce(P)}},4962:(Ue,_e,S)=>{"use strict";var Q=S(9555).q.ERR_INVALID_OPT_VALUE;Ue.exports={getHighWaterMark:function $(G,q,_,E){var N=function C(G,q,_){return null!=G.highWaterMark?G.highWaterMark:q?G[_]:null}(q,E,_);if(null!=N){if(!isFinite(N)||Math.floor(N)!==N||N<0)throw new Q(E?_:"highWaterMark",N);return Math.floor(N)}return G.objectMode?16:16384}}},3951:(Ue,_e,S)=>{Ue.exports=S(2016).EventEmitter},2024:(Ue,_e,S)=>{"use strict";var Q=S(4282).Buffer,C=Q.isEncoding||function(ee){switch((ee=""+ee)&&ee.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function q(ee){var W;switch(this.encoding=function G(ee){var W=function $(ee){if(!ee)return"utf8";for(var W;;)switch(ee){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ee;default:if(W)return;ee=(""+ee).toLowerCase(),W=!0}}(ee);if("string"!=typeof W&&(Q.isEncoding===C||!C(ee)))throw new Error("Unknown encoding: "+ee);return W||ee}(ee),this.encoding){case"utf16le":this.text=oe,this.end=x,W=4;break;case"utf8":this.fillLast=z,W=4;break;case"base64":this.text=B,this.end=se,W=3;break;default:return this.write=Y,void(this.end=J)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(W)}function _(ee){return ee<=127?0:ee>>5==6?2:ee>>4==14?3:ee>>3==30?4:ee>>6==2?-1:-2}function z(ee){var W=this.lastTotal-this.lastNeed,k=function N(ee,W,k){if(128!=(192&W[0]))return ee.lastNeed=0,"\ufffd";if(ee.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return ee.lastNeed=1,"\ufffd";if(ee.lastNeed>2&&W.length>2&&128!=(192&W[2]))return ee.lastNeed=2,"\ufffd"}}(this,ee);return void 0!==k?k:this.lastNeed<=ee.length?(ee.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ee.copy(this.lastChar,W,0,ee.length),void(this.lastNeed-=ee.length))}function oe(ee,W){if((ee.length-W)%2==0){var k=ee.toString("utf16le",W);if(k){var v=k.charCodeAt(k.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ee[ee.length-1],ee.toString("utf16le",W,ee.length-1)}function x(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function B(ee,W){var k=(ee.length-W)%3;return 0===k?ee.toString("base64",W):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=ee[ee.length-1]:(this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1]),ee.toString("base64",W,ee.length-k))}function se(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function Y(ee){return ee.toString(this.encoding)}function J(ee){return ee&&ee.length?this.write(ee):""}_e.StringDecoder=q,q.prototype.write=function(ee){if(0===ee.length)return"";var W,k;if(this.lastNeed){if(void 0===(W=this.fillLast(ee)))return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<ee.length?W?W+this.text(ee,k):this.text(ee,k):W||""},q.prototype.end=function F(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+"\ufffd":W},q.prototype.text=function P(ee,W){var k=function E(ee,W,k){var v=W.length-1;if(v<k)return 0;var I=_(W[v]);return I>=0?(I>0&&(ee.lastNeed=I-1),I):--v<k||-2===I?0:(I=_(W[v]))>=0?(I>0&&(ee.lastNeed=I-2),I):--v<k||-2===I?0:(I=_(W[v]))>=0?(I>0&&(2===I?I=0:ee.lastNeed=I-3),I):0}(this,ee,W);if(!this.lastNeed)return ee.toString("utf8",W);this.lastTotal=k;var v=ee.length-(k-this.lastNeed);return ee.copy(this.lastChar,0,v),ee.toString("utf8",W,v)},q.prototype.fillLast=function(ee){if(this.lastNeed<=ee.length)return ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ee.length),this.lastNeed-=ee.length}},4282:(Ue,_e,S)=>{var Q=S(9007),C=Q.Buffer;function $(q,_){for(var E in q)_[E]=q[E]}function G(q,_,E){return C(q,_,E)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?Ue.exports=Q:($(Q,_e),_e.Buffer=G),G.prototype=Object.create(C.prototype),$(C,G),G.from=function(q,_,E){if("number"==typeof q)throw new TypeError("Argument must not be a number");return C(q,_,E)},G.alloc=function(q,_,E){if("number"!=typeof q)throw new TypeError("Argument must be a number");var N=C(q);return void 0!==_?"string"==typeof E?N.fill(_,E):N.fill(_):N.fill(0),N},G.allocUnsafe=function(q){if("number"!=typeof q)throw new TypeError("Argument must be a number");return C(q)},G.allocUnsafeSlow=function(q){if("number"!=typeof q)throw new TypeError("Argument must be a number");return Q.SlowBuffer(q)}},496:Ue=>{function S(Q){try{if(!global.localStorage)return!1}catch{return!1}var C=global.localStorage[Q];return null!=C&&"true"===String(C).toLowerCase()}Ue.exports=function _e(Q,C){if(S("noDeprecation"))return Q;var $=!1;return function G(){if(!$){if(S("throwDeprecation"))throw new Error(C);S("traceDeprecation")?console.trace(C):console.warn(C),$=!0}return Q.apply(this,arguments)}}},1171:Ue=>{"use strict";Ue.exports=function(_e){_e.prototype[Symbol.iterator]=function*(){for(let S=this.head;S;S=S.next)yield S.value}}},4439:(Ue,_e,S)=>{"use strict";function Q(_){var E=this;if(E instanceof Q||(E=new Q),E.tail=null,E.head=null,E.length=0,_&&"function"==typeof _.forEach)_.forEach(function(P){E.push(P)});else if(arguments.length>0)for(var N=0,z=arguments.length;N<z;N++)E.push(arguments[N]);return E}function C(_,E,N){var z=E===_.head?new q(N,null,E,_):new q(N,E,E.next,_);return null===z.next&&(_.tail=z),null===z.prev&&(_.head=z),_.length++,z}function $(_,E){_.tail=new q(E,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function G(_,E){_.head=new q(E,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function q(_,E,N,z){if(!(this instanceof q))return new q(_,E,N,z);this.list=z,this.value=_,E?(E.next=this,this.prev=E):this.prev=null,N?(N.prev=this,this.next=N):this.next=null}Ue.exports=Q,Q.Node=q,Q.create=Q,Q.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var E=_.next,N=_.prev;return E&&(E.prev=N),N&&(N.next=E),_===this.head&&(this.head=E),_===this.tail&&(this.tail=N),_.list.length--,_.next=null,_.prev=null,_.list=null,E},Q.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var E=this.head;_.list=this,_.next=E,E&&(E.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},Q.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var E=this.tail;_.list=this,_.prev=E,E&&(E.next=_),this.tail=_,this.head||(this.head=_),this.length++}},Q.prototype.push=function(){for(var _=0,E=arguments.length;_<E;_++)$(this,arguments[_]);return this.length},Q.prototype.unshift=function(){for(var _=0,E=arguments.length;_<E;_++)G(this,arguments[_]);return this.length},Q.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},Q.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},Q.prototype.forEach=function(_,E){E=E||this;for(var N=this.head,z=0;null!==N;z++)_.call(E,N.value,z,this),N=N.next},Q.prototype.forEachReverse=function(_,E){E=E||this;for(var N=this.tail,z=this.length-1;null!==N;z--)_.call(E,N.value,z,this),N=N.prev},Q.prototype.get=function(_){for(var E=0,N=this.head;null!==N&&E<_;E++)N=N.next;if(E===_&&null!==N)return N.value},Q.prototype.getReverse=function(_){for(var E=0,N=this.tail;null!==N&&E<_;E++)N=N.prev;if(E===_&&null!==N)return N.value},Q.prototype.map=function(_,E){E=E||this;for(var N=new Q,z=this.head;null!==z;)N.push(_.call(E,z.value,this)),z=z.next;return N},Q.prototype.mapReverse=function(_,E){E=E||this;for(var N=new Q,z=this.tail;null!==z;)N.push(_.call(E,z.value,this)),z=z.prev;return N},Q.prototype.reduce=function(_,E){var N,z=this.head;if(arguments.length>1)N=E;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");z=this.head.next,N=this.head.value}for(var P=0;null!==z;P++)N=_(N,z.value,P),z=z.next;return N},Q.prototype.reduceReverse=function(_,E){var N,z=this.tail;if(arguments.length>1)N=E;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");z=this.tail.prev,N=this.tail.value}for(var P=this.length-1;null!==z;P--)N=_(N,z.value,P),z=z.prev;return N},Q.prototype.toArray=function(){for(var _=new Array(this.length),E=0,N=this.head;null!==N;E++)_[E]=N.value,N=N.next;return _},Q.prototype.toArrayReverse=function(){for(var _=new Array(this.length),E=0,N=this.tail;null!==N;E++)_[E]=N.value,N=N.prev;return _},Q.prototype.slice=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var N=new Q;if(E<_||E<0)return N;_<0&&(_=0),E>this.length&&(E=this.length);for(var z=0,P=this.head;null!==P&&z<_;z++)P=P.next;for(;null!==P&&z<E;z++,P=P.next)N.push(P.value);return N},Q.prototype.sliceReverse=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var N=new Q;if(E<_||E<0)return N;_<0&&(_=0),E>this.length&&(E=this.length);for(var z=this.length,P=this.tail;null!==P&&z>E;z--)P=P.prev;for(;null!==P&&z>_;z--,P=P.prev)N.push(P.value);return N},Q.prototype.splice=function(_,E,...N){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var z=0,P=this.head;null!==P&&z<_;z++)P=P.next;var F=[];for(z=0;P&&z<E;z++)F.push(P.value),P=this.removeNode(P);for(null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev),z=0;z<N.length;z++)P=C(this,P,N[z]);return F},Q.prototype.reverse=function(){for(var _=this.head,E=this.tail,N=_;null!==N;N=N.prev){var z=N.prev;N.prev=N.next,N.next=z}return this.head=E,this.tail=_,this};try{S(1171)(Q)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(Ue,_e,S)=>{var Q=S(3801);function C($){var G,q;function _(N,z){try{var P=$[N](z),F=P.value,oe=F instanceof Q;Promise.resolve(oe?F.v:F).then(function(x){if(oe){var B="return"===N?"return":"next";if(!F.k||x.done)return _(B,x);x=$[B](x).value}E(P.done?"return":"normal",x)},function(x){_("throw",x)})}catch(x){E("throw",x)}}function E(N,z){switch(N){case"return":G.resolve({value:z,done:!0});break;case"throw":G.reject(z);break;default:G.resolve({value:z,done:!1})}(G=G.next)?_(G.key,G.arg):q=null}this._invoke=function(N,z){return new Promise(function(P,F){var oe={key:N,arg:z,resolve:P,reject:F,next:null};q?q=q.next=oe:(G=q=oe,_(N,z))})},"function"!=typeof $.return&&(this.return=void 0)}C.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},C.prototype.next=function($){return this._invoke("next",$)},C.prototype.throw=function($){return this._invoke("throw",$)},C.prototype.return=function($){return this._invoke("return",$)},Ue.exports=C,Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},3801:Ue=>{Ue.exports=function _e(S,Q){this.v=S,this.k=Q},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8131:(Ue,_e,S)=>{var Q=S(3801);Ue.exports=function C($){var G={},q=!1;function _(E,N){return q=!0,N=new Promise(function(z){z($[E](N))}),{done:!1,value:new Q(N,1)}}return G[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},G.next=function(E){return q?(q=!1,E):_("next",E)},"function"==typeof $.throw&&(G.throw=function(E){if(q)throw q=!1,E;return _("throw",E)}),"function"==typeof $.return&&(G.return=function(E){return q?(q=!1,E):_("return",E)}),G},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8237:Ue=>{function S(Q){function C($){if(Object($)!==$)return Promise.reject(new TypeError($+" is not an object."));var G=$.done;return Promise.resolve($.value).then(function(q){return{value:q,done:G}})}return(S=function(G){this.s=G,this.n=G.next}).prototype={s:null,n:null,next:function(){return C(this.n.apply(this.s,arguments))},return:function(G){var q=this.s.return;return void 0===q?Promise.resolve({value:G,done:!0}):C(q.apply(this.s,arguments))},throw:function(G){var q=this.s.return;return void 0===q?Promise.reject(G):C(q.apply(this.s,arguments))}},new S(Q)}Ue.exports=function _e(Q){var C,$,G,q=2;for(typeof Symbol<"u"&&($=Symbol.asyncIterator,G=Symbol.iterator);q--;){if($&&null!=(C=Q[$]))return C.call(Q);if(G&&null!=(C=Q[G]))return new S(C.call(Q));$="@@asyncIterator",G="@@iterator"}throw new TypeError("Object is not async iterable")},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},7156:Ue=>{function _e(Q,C,$,G,q,_,E){try{var N=Q[_](E),z=N.value}catch(P){return void $(P)}N.done?C(z):Promise.resolve(z).then(G,q)}Ue.exports=function S(Q){return function(){var C=this,$=arguments;return new Promise(function(G,q){var _=Q.apply(C,$);function E(z){_e(_,G,q,E,N,"next",z)}function N(z){_e(_,G,q,E,N,"throw",z)}E(void 0)})}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},6737:(Ue,_e,S)=>{var Q=S(3801);Ue.exports=function C($){return new Q($,0)},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8186:(Ue,_e,S)=>{var Q=S(4642);Ue.exports=function C($){return function(){return new Q($.apply(this,arguments))}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports}},Ue=>{Ue(Ue.s=2332)}]);