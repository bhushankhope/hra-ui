(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{822:Ue=>{"use strict";Ue.exports=S,Ue.exports.default=S;var _e=1e20;function S(X,_,E,L,G,P){this.fontSize=X||24,this.buffer=void 0===_?3:_,this.cutoff=L||.25,this.fontFamily=G||"sans-serif",this.fontWeight=P||"normal",this.radius=E||8;var F=this.size=this.fontSize+2*this.buffer,oe=F+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function $(X,_,E,L,G,P){for(var F=0;F<_;F++)z(X,F,_,E,L,G,P);for(var oe=0;oe<E;oe++)z(X,oe*_,1,_,L,G,P)}function z(X,_,E,L,G,P,F){var oe,x,k,se;for(P[0]=0,F[0]=-_e,F[1]=_e,oe=0;oe<L;oe++)G[oe]=X[_+oe*E];for(oe=1,x=0,k=0;oe<L;oe++){do{k=(G[oe]-G[se=P[x]]+oe*oe-se*se)/(oe-se)/2}while(k<=F[x]&&--x>-1);P[++x]=oe,F[x]=k,F[x+1]=_e}for(oe=0,x=0;oe<L;oe++){for(;F[x+1]<oe;)x++;X[_+oe*E]=G[se=P[x]]+(oe-se)*(oe-se)}}S.prototype._draw=function(X,_){var P,F,oe,x,k,se,Y,J,ee,E=this.ctx.measureText(X),L=E.width,G=2*this.buffer;_&&this.useMetrics?(k=Math.floor(E.actualBoundingBoxAscent),J=this.buffer+Math.ceil(E.actualBoundingBoxAscent),se=this.buffer,Y=this.buffer,P=(F=Math.min(this.size,Math.ceil(E.actualBoundingBoxRight-E.actualBoundingBoxLeft)))+G,oe=(x=Math.min(this.size-se,Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent)))+G,this.ctx.textBaseline="alphabetic"):(P=F=this.size,oe=x=this.size,k=19*this.fontSize/24,se=Y=0,J=this.middle,this.ctx.textBaseline="middle"),F&&x&&(this.ctx.clearRect(Y,se,F,x),this.ctx.fillText(X,this.buffer,J),ee=this.ctx.getImageData(Y,se,F,x));var W=new Uint8ClampedArray(P*oe);return function Q(X,_,E,L,G,P,F){P.fill(_e,0,_*E),F.fill(0,0,_*E);for(var oe=(_-L)/2,x=0;x<G;x++)for(var k=0;k<L;k++){var se=(x+oe)*_+k+oe,Y=X.data[4*(x*L+k)+3]/255;if(1===Y)P[se]=0,F[se]=_e;else if(0===Y)P[se]=_e,F[se]=0;else{var J=Math.max(0,.5-Y),ee=Math.max(0,Y-.5);P[se]=J*J,F[se]=ee*ee}}}(ee,P,oe,F,x,this.gridOuter,this.gridInner),$(this.gridOuter,P,oe,this.f,this.v,this.z),$(this.gridInner,P,oe,this.f,this.v,this.z),function C(X,_,E,L,G,P,F){for(var oe=0;oe<_*E;oe++){var x=Math.sqrt(L[oe])-Math.sqrt(G[oe]);X[oe]=Math.round(255-255*(x/P+F))}}(W,P,oe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:W,metrics:{width:F,height:x,sdfWidth:P,sdfHeight:oe,top:k,left:0,advance:L}}},S.prototype.draw=function(X){return this._draw(X,!1).data},S.prototype.drawWithMetrics=function(X){return this._draw(X,!0)}},2641:(Ue,_e,S)=>{"use strict";var Q={};S.r(Q),S.d(Q,{decode:()=>S0e,name:()=>A0e});var C={};S.r(C),S.d(C,{name:()=>R0e,preprocess:()=>O0e});var $={};S.r($),S.d($,{name:()=>P0e,preprocess:()=>N0e});var z={};S.r(z),S.d(z,{decode:()=>yve,encode:()=>vve,name:()=>mve,preprocess:()=>_ve});var X={};S.r(X),S.d(X,{decode:()=>Ave,encode:()=>Sve,name:()=>Eve});var _={};S.r(_),S.d(_,{decode:()=>Tve,encode:()=>Mve,name:()=>Cve});var E={};S.r(E),S.d(E,{decode:()=>Dve,encode:()=>Rve,name:()=>Ive});var L={};S.r(L),S.d(L,{delMany:()=>L2e,get:()=>P2e,setMany:()=>N2e});var G={};S.r(G),S.d(G,{inDefaultGraph:()=>Y2e,isBlankNode:()=>G2e,isDefaultGraph:()=>e_,isLiteral:()=>W2e,isNamedNode:()=>z2e,isVariable:()=>$2e,prefix:()=>X2e,prefixes:()=>_L});let F=null,x=1;function se(n){const e=F;return F=n,e}function I(n){if((!qe(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==x)){if(!n.producerMustRecompute(n)&&!xe(n))return n.dirty=!1,void(n.lastCleanEpoch=x);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=x}}function xe(n){Ce(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(I(t),i!==t.version))return!0}return!1}function Qe(n,e){if(function je(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ce(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Qe(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Ce(r),r.producerIndexOfThis[i]=e}}function qe(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ce(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Ke=null;function Re(n){return"function"==typeof n}function ct(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const bt=ct(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Dt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class _t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Re(i))try{i()}catch(s){e=s instanceof bt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{H(s)}catch(o){e=e??[],o instanceof bt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)H(e);else{if(e instanceof _t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Dt(t,e)}remove(e){const{_finalizers:t}=this;t&&Dt(t,e),e instanceof _t&&e._removeParent(this)}}_t.EMPTY=(()=>{const n=new _t;return n.closed=!0,n})();const Gt=_t.EMPTY;function pe(n){return n instanceof _t||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function H(n){Re(n)?n():n.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Le={setTimeout(n,e,...t){const{delegate:i}=Le;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Le;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function it(n){Le.setTimeout(()=>{const{onUnhandledError:e}=te;if(!e)throw n;e(n)})}function ut(){}const Et=kn("C",void 0,void 0);function kn(n,e,t){return{kind:n,value:e,error:t}}let vn=null;function An(n){if(te.useDeprecatedSynchronousErrorHandling){const e=!vn;if(e&&(vn={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=vn;if(vn=null,t)throw i}}else n()}class io extends _t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pe(e)&&e.add(this)):this.destination=il}static create(e,t,i){return new Ei(e,t,i)}next(e){this.isStopped?za(function Pn(n){return kn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?za(function tn(n){return kn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?za(Et,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tr=Function.prototype.bind;function rs(n,e){return Tr.call(n,e)}class Wo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){zr(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){zr(i)}else zr(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zr(t)}}}class Ei extends io{constructor(e,t,i){let r;if(super(),Re(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&te.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&rs(e.next,s),error:e.error&&rs(e.error,s),complete:e.complete&&rs(e.complete,s)}):r=e}this.destination=new Wo(r)}}function zr(n){te.useDeprecatedSynchronousErrorHandling?function Yi(n){te.useDeprecatedSynchronousErrorHandling&&vn&&(vn.errorThrown=!0,vn.error=n)}(n):it(n)}function za(n,e){const{onStoppedNotification:t}=te;t&&Le.setTimeout(()=>t(n,e))}const il={closed:!0,next:ut,error:function ya(n){throw n},complete:ut},va="function"==typeof Symbol&&Symbol.observable||"@@observable";function Hs(n){return n}let St=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function ur(n){return n&&n instanceof io||function nn(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}(n)&&pe(n)}(t)?t:new Ei(t,i,r);return An(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=zt(i))((r,s)=>{const o=new Ei({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[va](){return this}pipe(...t){return function Ze(n){return 0===n.length?Hs:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=zt(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function zt(n){var e;return null!==(e=n??te.Promise)&&void 0!==e?e:Promise}const ss=ct(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Zt=(()=>{class n extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new ro(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new ss}next(t){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Gt:(this.currentObservers=null,s.push(t),new _t(()=>{this.currentObservers=null,Dt(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new St;return t.source=this,t}}return n.create=(e,t)=>new ro(e,t),n})();class ro extends Zt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Gt}}class Ui extends Zt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function yc(n){return Re(n?.lift)}function di(n){return e=>{if(yc(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function hn(n,e,t,i,r){return new $o(n,e,t,i,r)}class $o extends io{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $t(n,e){return di((t,i)=>{let r=0;t.subscribe(hn(i,s=>{i.next(n.call(e,s,r++))}))})}function Vn(n){for(let e in n)if(n[e]===Vn)return e;throw Error("Could not find renamed property on target object.")}function Gr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ri(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ri).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Vi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Te=Vn({__forward_ref__:Vn});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return ri(this())},n}function D(n){return q(n)?n():n}function q(n){return"function"==typeof n&&n.hasOwnProperty(Te)&&n.__forward_ref__===ge}function me(n){return n&&!!n.\u0275providers}const Ye="https://g.co/ng/security#xss";class Ge extends Error{constructor(e,t){super(function Tt(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Nt=Vn({\u0275cmp:Vn}),Vt=Vn({\u0275dir:Vn}),rn=Vn({\u0275pipe:Vn}),wn=Vn({\u0275mod:Vn}),dr=Vn({\u0275fac:Vn}),hr=Vn({__NG_ELEMENT_ID__:Vn}),Ns=Vn({__NG_ENV_ID__:Vn});function Sn(n){return"string"==typeof n?n:null==n?"":String(n)}function ba(n,e){throw new Ge(-201,!1)}function so(n,e){null==n&&function Mn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function It(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ii(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mp(n){return Mb(n,Ip)||Mb(n,Ib)}function Mb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Di(n){return n&&(n.hasOwnProperty(p_)||n.hasOwnProperty($S))?n[p_]:null}const Ip=Vn({\u0275prov:Vn}),p_=Vn({\u0275inj:Vn}),Ib=Vn({ngInjectableDef:Vn}),$S=Vn({ngInjectorDef:Vn});var si=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(si||{});let g_;function oo(n){const e=g_;return g_=n,e}function as(n,e,t){const i=Mp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&si.Optional?null:void 0!==e?e:void ba(ri(n))}const hi=globalThis;class xt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=It({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qo={},fd="__NG_DI_FLAG__",pd="ngTempTokenPath",sl=/\n/gm,Ob="__source";let ol;function al(n){const e=ol;return ol=n,e}function JS(n,e=si.Default){if(void 0===ol)throw new Ge(-203,!1);return null===ol?as(n,void 0,e):ol.get(n,e&si.Optional?null:void 0,e)}function ot(n,e=si.Default){return(function m_(){return g_}()||JS)(D(n),e)}function kt(n,e=si.Default){return ot(n,Np(e))}function Np(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Lp(n){const e=[];for(let t=0;t<n.length;t++){const i=D(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ge(900,!1);let r,s=si.Default;for(let o=0;o<i.length;o++){const a=i[o],c=v_(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(ot(r,s))}else e.push(ot(i))}return e}function gd(n,e){return n[fd]=e,n.prototype[fd]=e,n}function v_(n){return n[fd]}function vc(n){return{toString:n}.toString()}var md=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(md||{}),Eo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Eo||{});const Ga={},pi=[];function ao(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Oh(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];w_(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function _d(n){return 3===n||4===n||6===n}function w_(n){return 64===n.charCodeAt(0)}function yd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Nb(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Nb(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const Lb="ng-template";function ZS(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==ao(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Fb(n){return 4===n.type&&n.value!==Lb}function QS(n,e,t){return e===(4!==n.type||t?n.value:Lb)}function vd(n,e,t){let i=4;const r=n.attrs||[],s=function cl(n){for(let e=0;e<n.length;e++)if(_d(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!QS(n,c,t)||""===c&&1===e.length){if(Ea(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!ZS(n.attrs,l,t)){if(Ea(i))return!1;o=!0}continue}const h=eC(8&i?"class":c,r,Fb(n),t);if(-1===h){if(Ea(i))return!1;o=!0;continue}if(""!==l){let f;f=h>s?"":r[h+1].toLowerCase();const g=8&i?f:null;if(g&&-1!==ao(g,l,0)||2&i&&l!==f){if(Ea(i))return!1;o=!0}}}}else{if(!o&&!Ea(i)&&!Ea(c))return!1;if(o&&Ea(c))continue;o=!1,i=c|1&i}}return Ea(i)||o}function Ea(n){return 0==(1&n)}function eC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function kp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Fp(n,e,t=!1){for(let i=0;i<e.length;i++)if(vd(n,e[i],t))return!0;return!1}function tC(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Bb(n,e){return n?":not("+e.trim()+")":e}function nC(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ea(o)&&(e+=Bb(s,r),r=""),i=o,s=s||!Ea(i);t++}return""!==r&&(e+=Bb(s,r)),e}function _i(n){return vc(()=>{const e=yi(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===md.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Eo.Emulated,styles:n.styles||pi,_:null,schemas:n.schemas||null,tView:null,id:""};Nr(t);const i=n.dependencies;return t.directiveDefs=Ai(i,!1),t.pipeDefs=Ai(i,!0),t.id=function sC(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function iC(n){return at(n)||At(n)}function rC(n){return null!==n}function Ni(n){return vc(()=>({type:n.type,bootstrap:n.bootstrap||pi,declarations:n.declarations||pi,imports:n.imports||pi,exports:n.exports||pi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jb(n,e){if(null==n)return Ga;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Wt(n){return vc(()=>{const e=yi(n);return Nr(e),e})}function $r(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function at(n){return n[Nt]||null}function At(n){return n[Vt]||null}function yt(n){return n[rn]||null}function yi(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ga,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||pi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jb(n.inputs,e),outputs:jb(n.outputs),debugInfo:null}}function Nr(n){n.features?.forEach(e=>e(n))}function Ai(n,e){if(!n)return null;const t=e?yt:iC;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(rC)}const gi=0,Ht=1,bn=2,Ri=3,co=4,Yr=5,Jn=6,wd=7,Hi=8,cs=9,bc=10,Nn=11,Ph=12,Nh=13,Ao=14,Xi=15,xd=16,wc=17,Sa=18,Ed=19,Lh=20,xc=21,ll=22,So=23,On=25,E_=1,Wa=7,Ec=9,br=10;var Ad=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(Ad||{});function ls(n){return Array.isArray(n)&&"object"==typeof n[E_]}function us(n){return Array.isArray(n)&&!0===n[E_]}function A_(n){return 0!=(4&n.flags)}function nr(n){return n.componentOffset>-1}function Xr(n){return 1==(1&n.flags)}function Ca(n){return!!n.template}function S_(n){return 0!=(512&n[bn])}function uu(n,e){return n.hasOwnProperty(dr)?n[dr]:null}class Vb{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function zi(){return Hb}function Hb(n){return n.type.prototype.ngOnChanges&&(n.setInput=lC),cC}function cC(){const n=Gb(this),e=n?.current;if(e){const t=n.previous;if(t===Ga)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function lC(n,e,t,i){const r=this.declaredInputs[t],s=Gb(n)||function Ac(n,e){return n[zb]=e}(n,{previous:Ga,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new Vb(c&&c.currentValue,e,a===Ga),n[i]=e}zi.ngInherit=!0;const zb="__ngSimpleChanges__";function Gb(n){return n[zb]||null}const $a=function(n,e,t){},Wb="svg";let Ya=!1;function qi(n){for(;Array.isArray(n);)n=n[gi];return n}function jh(n,e){return qi(e[n])}function Or(n,e){return qi(e[n.index])}function Uh(n,e){return n.data[e]}function Fs(n,e){return n[e]}function Co(n,e){const t=e[n];return ls(t)?t:t[gi]}function O_(n){return 128==(128&n[bn])}function Xa(n,e){return null==e?null:n[e]}function P_(n){n[wc]=0}function Yb(n){1024&n[bn]||(n[bn]|=1024,O_(n)&&Sc(n))}function qb(n){return 9216&n[bn]||n[So]?.dirty}function Vh(n){qb(n)?Sc(n):64&n[bn]&&(function dC(){return Ya}()?(n[bn]|=1024,Sc(n)):n[bc].changeDetectionScheduler?.notify())}function Sc(n){n[bc].changeDetectionScheduler?.notify();let e=n[Ri];for(;null!==e&&!(us(e)&&e[bn]&Ad.HasChildViewsToRefresh||ls(e)&&8192&e[bn]);){if(us(e))e[bn]|=Ad.HasChildViewsToRefresh;else if(e[bn]|=8192,!O_(e))break;e=e[Ri]}}const Dn={lFrame:U_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Jb(){return Dn.bindingsEnabled}function fu(){return null!==Dn.skipHydrationRootTNode}function Mt(){return Dn.lFrame.lView}function li(){return Dn.lFrame.tView}function qa(n){return Dn.lFrame.contextLView=n,n[Hi]}function ir(n){return Dn.lFrame.contextLView=null,n}function Si(){let n=F_();for(;null!==n&&64===n.type;)n=n.parent;return n}function F_(){return Dn.lFrame.currentTNode}function Jo(n,e){const t=Dn.lFrame;t.currentTNode=n,t.isParent=e}function Cd(){return Dn.lFrame.isParent}function Cc(){Dn.lFrame.isParent=!1}function Gs(){const n=Dn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Zo(){return Dn.lFrame.bindingIndex++}function Mc(n){const e=Dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mC(n,e){const t=Dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,pu(e)}function pu(n){Dn.lFrame.currentDirectiveIndex=n}function nw(){return Dn.lFrame.currentQueryIndex}function Gh(n){Dn.lFrame.currentQueryIndex=n}function iw(n){const e=n[Ht];return 2===e.type?e.declTNode:1===e.type?n[Yr]:null}function rw(n,e,t){if(t&si.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&si.Host||(r=iw(s),null===r||(s=s[Ao],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Dn.lFrame=sw();return i.currentTNode=e,i.lView=n,!0}function j_(n){const e=sw(),t=n[Ht];Dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sw(){const n=Dn.lFrame,e=null===n?null:n.child;return null===e?U_(n):e}function U_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Hp(){const n=Dn.lFrame;return Dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ow=Hp;function Wh(){const n=Hp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function As(){return Dn.lFrame.selectedIndex}function fl(n){Dn.lFrame.selectedIndex=n}function Li(){const n=Dn.lFrame;return Uh(n.tView,n.selectedIndex)}let dw=!0;function Td(){return dw}function Ic(n){dw=n}function zp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Md(n,e,t){hw(n,e,3,t)}function Hn(n,e,t,i){(3&n[bn])===t&&hw(n,e,t,i)}function z_(n,e){let t=n[bn];(3&t)===e&&(t&=16383,t+=1,n[bn]=t)}function hw(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[wc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[wc]+=65536),(a<s||-1==s)&&(fw(n,t,e,c),n[wc]=(4294901760&n[wc])+c+2),c++}function Id(n,e){$a(4,n,e);const t=se(null);try{e.call(n)}finally{se(t),$a(5,n,e)}}function fw(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[bn]>>14<n[wc]>>16&&(3&n[bn])===e&&(n[bn]+=16384,Id(a,s)):Id(a,s)}const Dd=-1;class $h{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Ka(n){return n!==Dd}function gu(n){return 32767&n}function pl(n,e){let t=function gw(n){return n>>16}(n),i=e;for(;t>0;)i=i[Ao],t--;return i}let Wp=!0;function Rd(n){const e=Wp;return Wp=n,e}const $p=255,Yp=5;let gl=0;const Ja={};function Yh(n,e){const t=qp(n,e);if(-1!==t)return t;const i=e[Ht];i.firstCreatePass&&(n.injectorIndex=e.length,Xp(i.data,n),Xp(e,null),Xp(i.blueprint,null));const r=Kp(n,e),s=n.injectorIndex;if(Ka(r)){const o=gu(r),a=pl(r,e),c=a[Ht].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Xp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qp(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Kp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=vw(r),null===i)return Dd;if(t++,r=r[Ao],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Dd}function $_(n,e,t){!function ml(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(hr)&&(i=t[hr]),null==i&&(i=t[hr]=gl++);const r=i&$p;e.data[n+(r>>Yp)]|=1<<r}(n,e,t)}function Y_(n,e,t){if(t&si.Optional||void 0!==n)return n;ba()}function X_(n,e,t,i){if(t&si.Optional&&void 0===i&&(i=null),!(t&(si.Self|si.Host))){const r=n[cs],s=oo(void 0);try{return r?r.get(e,i,t&si.Optional):as(e,i,t&si.Optional)}finally{oo(s)}}return Y_(i,0,t)}function mw(n,e,t,i=si.Default,r){if(null!==n){if(2048&e[bn]&&!(i&si.Self)){const o=function qh(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[bn]&&!(512&o[bn]);){const a=q_(s,o,t,i|si.Self,Ja);if(a!==Ja)return a;let c=s.parent;if(!c){const l=o[Lh];if(l){const u=l.get(t,Ja,i);if(u!==Ja)return u}c=vw(o),o=o[Ao]}s=c}return r}(n,e,t,i,Ja);if(o!==Ja)return o}const s=q_(n,e,t,i,Ja);if(s!==Ja)return s}return X_(e,t,i,r)}function q_(n,e,t,i,r){const s=function xC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(hr)?n[hr]:void 0;return"number"==typeof e?e>=0?e&$p:EC:e}(t);if("function"==typeof s){if(!rw(e,n,i))return i&si.Host?Y_(r,0,i):X_(e,t,i,r);try{let o;if(o=s(i),null!=o||i&si.Optional)return o;ba()}finally{ow()}}else if("number"==typeof s){let o=null,a=qp(n,e),c=Dd,l=i&si.Host?e[Xi][Yr]:null;for((-1===a||i&si.SkipSelf)&&(c=-1===a?Kp(n,e):e[a+8],c!==Dd&&Xh(i,!1)?(o=e[Ht],a=gu(c),e=pl(c,e)):a=-1);-1!==a;){const u=e[Ht];if(yw(s,a,u.data)){const h=_w(a,e,t,o,i,l);if(h!==Ja)return h}c=e[a+8],c!==Dd&&Xh(i,e[Ht].data[a+8]===l)&&yw(s,a,e)?(o=u,a=gu(c),e=pl(c,e)):a=-1}}return r}function _w(n,e,t,i,r,s){const o=e[Ht],a=o.data[n+8],u=Ss(a,o,t,null==i?nr(a)&&Wp:i!=o&&0!=(3&a.type),r&si.Host&&s===a);return null!==u?ks(e,o,u,a):Ja}function Ss(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,f=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<c&&t===m||g>=c&&m.type===t)return g}if(r){const g=o[c];if(g&&Ca(g)&&g.type===t)return c}return null}function ks(n,e,t,i){let r=n[t];const s=e.data;if(function Qo(n){return n instanceof $h}(r)){const o=r;o.resolving&&function rl(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ge(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Gn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Sn(n)}(s[t]));const a=Rd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?oo(o.injectImpl):null;rw(n,i,si.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function H_(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Hb(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&oo(l),Rd(a),o.resolving=!1,ow()}}return r}function yw(n,e,t){return!!(t[e+(n>>Yp)]&1<<n)}function Xh(n,e){return!(n&si.Self||n&si.Host&&e)}class Lr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return mw(this._tNode,this._lView,e,Np(i),t)}}function EC(){return new Lr(Si(),Mt())}function Gi(n){return vc(()=>{const e=n.prototype.constructor,t=e[dr]||_l(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[dr]||_l(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function _l(n){return q(n)?()=>{const e=_l(D(n));return e&&e()}:uu(n)}function vw(n){const e=n[Ht],t=e.type;return 2===t?e.declTNode:1===t?n[Yr]:null}function yl(n){return function wC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(_d(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Si(),n)}const Dc="__parameters__";function Rc(n,e,t){return vc(()=>{const i=function Jh(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(Dc)?c[Dc]:Object.defineProperty(c,Dc,{value:[]})[Dc];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function bl(n,e){n.forEach(t=>Array.isArray(t)?bl(t,e):e(t))}function Jp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Za(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function To(n,e,t){let i=wu(n,e);return i>=0?n[1|i]=t:(i=~i,function Zp(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Qh(n,e){const t=wu(n,e);if(t>=0)return n[1|t]}function wu(n,e){return function Ew(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const wl=gd(Rc("Optional"),8),Pd=gd(Rc("SkipSelf"),4),xl=new xt("ENVIRONMENT_INITIALIZER"),Eu=new xt("INJECTOR",-1),Qp=new xt("INJECTOR_DEF_TYPES");class Mo{get(e,t=qo){if(t===qo){const i=new Error(`NullInjectorError: No provider for ${ri(e)}!`);throw i.name="NullInjectorError",i}return t}}function BC(...n){return{\u0275providers:ny(0,n),\u0275fromNgModule:!0}}function ny(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return bl(e,o=>{const a=o;eg(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Dw(r,s),t}function Dw(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];iy(r,s=>{e(s,i)})}}function eg(n,e,t,i){if(!(n=D(n)))return!1;let r=null,s=Di(n);const o=!s&&at(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=Di(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)eg(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{bl(s.imports,u=>{eg(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Dw(l,e)}if(!a){const l=uu(r)||(()=>new r);e({provide:r,useFactory:l,deps:pi},r),e({provide:Qp,useValue:r,multi:!0},r),e({provide:xl,useValue:()=>ot(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;iy(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function iy(n,e){for(let t of n)me(t)&&(t=t.\u0275providers),Array.isArray(t)?iy(t,e):e(t)}const jC=Vn({provide:String,useValue:Vn});function ry(n){return null!==n&&"object"==typeof n&&jC in n}function Au(n){return"function"==typeof n}const sy=new xt("Set Injector scope."),rf={},Pw={};let tg;function ng(){return void 0===tg&&(tg=new Mo),tg}class na{}class Ld extends na{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oy(e,o=>this.processProvider(o)),this.records.set(Eu,Fd(void 0,this)),r.has("environment")&&this.records.set(na,Fd(void 0,this));const s=this.records.get(sy);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qp,pi,si.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=al(this),i=oo(void 0);try{return e()}finally{al(t),oo(i)}}get(e,t=qo,i=si.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ns))return e[Ns](this);i=Np(i);const s=al(this),o=oo(void 0);try{if(!(i&si.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function ia(n){return"function"==typeof n||"object"==typeof n&&n instanceof xt}(e)&&Mp(e);c=l&&this.injectableDefInScope(l)?Fd(ig(e),rf):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&si.Self?ng():this.parent).get(e,t=i&si.Optional&&t===qo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[pd]=a[pd]||[]).unshift(ri(e)),s)throw a;return function b_(n,e,t,i){const r=n[pd];throw e[Ob]&&r.unshift(e[Ob]),n.message=function Pb(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=ri(e);if(Array.isArray(e))r=e.map(ri).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(sl,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[pd]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{oo(o),al(s)}}resolveInjectorInitializers(){const e=al(this),t=oo(void 0);try{const r=this.get(xl,pi,si.Self);for(const s of r)s()}finally{al(e),oo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(ri(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ge(205,!1)}processProvider(e){let t=Au(e=D(e))?e:D(e&&e.provide);const i=function HC(n){return ry(n)?Fd(void 0,n.useValue):Fd(Nw(n),rf)}(e);if(Au(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Fd(void 0,rf,!0),r.factory=()=>Lp(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===rf&&(t.value=Pw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function GC(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=D(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function ig(n){const e=Mp(n),t=null!==e?e.factory:uu(n);if(null!==t)return t;if(n instanceof xt)throw new Ge(204,!1);if(n instanceof Function)return function VC(n){const e=n.length;if(e>0)throw Za(e,"?"),new Ge(204,!1);const t=function tr(n){return n&&(n[Ip]||n[Ib])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ge(204,!1)}function Nw(n,e,t){let i;if(Au(n)){const r=D(n);return uu(r)||ig(r)}if(ry(n))i=()=>D(n.useValue);else if(function Ow(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Lp(n.deps||[]));else if(function Rw(n){return!(!n||!n.useExisting)}(n))i=()=>ot(D(n.useExisting));else{const r=D(n&&(n.useClass||n.provide));if(!function zC(n){return!!n.deps}(n))return uu(r)||ig(r);i=()=>new r(...Lp(n.deps))}return i}function Fd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oy(n,e){for(const t of n)Array.isArray(t)?oy(t,e):t&&me(t)?oy(t.\u0275providers,e):e(t)}function Fw(n,e=null,t=null,i){const r=kw(n,e,t,i);return r.resolveInjectorInitializers(),r}function kw(n,e=null,t=null,i,r=new Set){const s=[t||pi,BC(n)];return i=i||("object"==typeof n?void 0:ri(n)),new Ld(s,e||ng(),i||null,r)}let uy,Ki=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=qo;static#t=this.NULL=new Mo;static create(t,i){if(Array.isArray(t))return Fw({name:""},i,t,"");{const r=t.name??"";return Fw({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=It({token:n,providedIn:"any",factory:()=>ot(Eu)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();const og=new xt("AppId",{providedIn:"root",factory:()=>QC}),QC="ng",jw=new xt("Platform Initializer"),Ia=new xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qa=new xt("AnimationModuleType"),dy=new xt("CSP nonce",{providedIn:"root",factory:()=>function Al(){if(void 0!==uy)return uy;if(typeof document<"u")return document;throw new Ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function lg(n){return 128==(128&n.flags)}var Cl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cl||{});const dg=/^>|^->|<!--|-->|--!>|<!-$/g,dT=/(<|>)/g,qw="\u200b$1\u200b";const uf=new Map;let Kw=0;const yy="__ngContext__";function js(n,e){ls(e)?(n[yy]=e[Ed],function Zw(n){uf.set(n[Ed],n)}(e)):n[yy]=e}let by;function wy(n,e){return by(n,e)}function Ys(n){const e=n[Ri];return us(e)?e[Ri]:e}function Tl(n){return ix(n[Ph])}function Bn(n){return ix(n[co])}function ix(n){for(;null!==n&&!us(n);)n=n[co];return n}function qr(n,e,t,i,r){if(null!=i){let s,o=!1;us(i)?s=i:ls(i)&&(o=!0,i=i[gi]);const a=qi(i);0===n&&null!==t?null==r?ax(e,t,a):Iu(e,t,a,r||null,!0):1===n&&null!==t?Iu(e,t,a,r||null,!0):2===n?function pg(n,e,t){const i=Ml(n,e);i&&function TT(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function hx(n,e,t,i,r){const s=t[Wa];s!==qi(t)&&qr(e,n,i,s,r);for(let a=br;a<t.length;a++){const c=t[a];Ln(c[Ht],c,n,e,i,s)}}(e,n,s,t,r)}}function ec(n,e){return n.createComment(function my(n){return n.replace(dg,e=>e.replace(dT,qw))}(e))}function hg(n,e,t){return n.createElement(e,t)}function tc(n,e){const t=n[Ec],i=t.indexOf(e);t.splice(i,1)}function jd(n,e){if(n.length<=br)return;const t=br+e,i=n[t];if(i){const r=i[xd];null!==r&&r!==n&&tc(r,i),e>0&&(n[t-1][co]=i[co]);const s=bu(n,br+e);!function xT(n,e){Ln(n,e,e[Nn],2,null,null),e[gi]=null,e[Yr]=null}(i[Ht],i);const o=s[Sa];null!==o&&o.detachView(s[Ht]),i[Ri]=null,i[co]=null,i[bn]&=-129}return i}function Mu(n,e){if(!(256&e[bn])){const t=e[Nn];t.destroyNode&&Ln(n,e,t,3,null,null),function ST(n){let e=n[Ph];if(!e)return rr(n[Ht],n);for(;e;){let t=null;if(ls(e))t=e[Ph];else{const i=e[br];i&&(t=i)}if(!t){for(;e&&!e[co]&&e!==n;)ls(e)&&rr(e[Ht],e),e=e[Ri];null===e&&(e=n),ls(e)&&rr(e[Ht],e),t=e&&e[co]}e=t}}(e)}}function rr(n,e){if(!(256&e[bn])){e[bn]&=-129,e[bn]|=256,e[So]&&function Pe(n){if(Ce(n),qe(n))for(let e=0;e<n.producerNode.length;e++)Qe(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[So]),function sx(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof $h)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];$a(4,a,c);try{c.call(a)}finally{$a(5,a,c)}}else{$a(4,r,s);try{s.call(r)}finally{$a(5,r,s)}}}}}(n,e),function Mr(n,e){const t=n.cleanup,i=e[wd];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[wd]=null);const r=e[xc];if(null!==r){e[xc]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[Ht].type&&e[Nn].destroy();const t=e[xd];if(null!==t&&us(e[Ri])){t!==e[Ri]&&tc(t,e);const i=e[Sa];null!==i&&i.detachView(n)}!function hT(n){uf.delete(n[Ed])}(e)}}function Ey(n,e,t){return function ox(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[gi];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Eo.None||s===Eo.Emulated)return null}return Or(i,t)}}(n,e.parent,t)}function Iu(n,e,t,i,r){n.insertBefore(e,t,i,r)}function ax(n,e,t){n.appendChild(e,t)}function cx(n,e,t,i,r){null!==i?Iu(n,e,t,i,r):ax(n,e,t)}function Ml(n,e){return n.parentNode(e)}function lx(n,e,t){return hf(n,e,t)}let Xs,Ru,hf=function Sy(n,e,t){return 40&n.type?Or(n,t):null};function fg(n,e,t,i){const r=Ey(n,i,e),s=e[Nn],a=lx(i.parent||e[Yr],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)cx(s,r,t[c],a,!1);else cx(s,r,t,a,!1);void 0!==Xs&&Xs(s,i,e,t,r)}function ff(n,e){if(null!==e){const t=e.type;if(3&t)return Or(e,n);if(4&t)return Cy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ff(n,i);{const r=n[e.index];return us(r)?Cy(-1,r):qi(r)}}if(32&t)return wy(e,n)()||qi(n[e.index]);{const i=ux(n,e);return null!==i?Array.isArray(i)?i[0]:ff(Ys(n[Xi]),i):ff(n,e.next)}}return null}function ux(n,e){return null!==e?n[Xi][Yr].projection[e.projection]:null}function Cy(n,e){const t=br+n+1;if(t<e.length){const i=e[t],r=i[Ht].firstChild;if(null!==r)return ff(i,r)}return e[Wa]}function Da(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&js(qi(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Da(n,e,t.child,i,r,s,!1),qr(e,n,r,a,s);else if(32&c){const l=wy(t,i);let u;for(;u=l();)qr(e,n,r,u,s);qr(e,n,r,a,s)}else 16&c?Do(n,e,i,t,r,s):qr(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Ln(n,e,t,i,r,s){Da(t,i,n.firstChild,e,r,s,!1)}function Do(n,e,t,i,r,s){const o=t[Xi],c=o[Yr].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)qr(e,n,r,c[l],s);else{let l=c;const u=o[Ri];lg(i)&&(l.flags|=128),Da(n,e,l,u,r,s,!0)}}function fx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function My(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Oh(n,e,i),null!==r&&fx(n,e,r),null!==s&&function Ci(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Ud(n){return function Iy(){if(void 0===Ru&&(Ru=null,hi.trustedTypes))try{Ru=hi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ru}()?.createHTML(n)||n}class Ou{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ye})`}}class PT extends Ou{getTypeName(){return"HTML"}}class Ry extends Ou{getTypeName(){return"Style"}}class NT extends Ou{getTypeName(){return"Script"}}class Oy extends Ou{getTypeName(){return"URL"}}class LT extends Ou{getTypeName(){return"ResourceURL"}}function Ro(n){return n instanceof Ou?n.changingThisBreaksApplicationSecurity:n}function nc(n,e){const t=function ds(n){return n instanceof Ou&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ye})`)}return t===e}class jT{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ud(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class UT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ud(e),t}}const VT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mg(n){return(n=String(n)).match(VT)?n:"unsafe:"+n}function Lc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Vd(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Py=Lc("area,br,col,hr,img,wbr"),bx=Lc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wx=Lc("rp,rt"),Ny=Vd(Py,Vd(bx,Lc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vd(wx,Lc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vd(wx,bx)),Ly=Lc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xx=Vd(Ly,Lc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ex=Lc("script,style,template");class Ax{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ny.hasOwnProperty(t))return this.sanitizedSomething=!0,!Ex.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!xx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Ly[a]&&(c=mg(c)),this.buf.push(" ",o,'="',Sx(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ny.hasOwnProperty(t)&&!Py.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Sx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const HT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zT=/([^\#-~ |!])/g;function Sx(n){return n.replace(/&/g,"&amp;").replace(HT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(zT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _g;function Cx(n,e){let t=null;try{_g=_g||function yx(n){const e=new UT(n);return function vx(){try{return!!(new window.DOMParser).parseFromString(Ud(""),"text/html")}catch{return!1}}()?new jT(e):e}(n);let i=e?String(e):"";t=_g.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=_g.getInertBodyElement(i)}while(i!==s);return Ud((new Ax).sanitizeChildren(Fy(t)||t))}finally{if(t){const i=Fy(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Fy(n){return"content"in n&&function GT(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Cs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Cs||{});function ky(n){const e=function gf(){const n=Mt();return n&&n[bc].sanitizer}();return e?e.sanitize(Cs.URL,n)||"":nc(n,"URL")?Ro(n):mg(Sn(n))}class ZT{}let Dx=(n,e,t)=>null;function vf(n,e,t=!1){return Dx(n,e,t)}class sM{}class Px{}class aM{resolveComponentFactory(e){throw function oM(n){const e=Error(`No component factory found for ${ri(n)}.`);return e.ngComponent=n,e}(e)}}let Il=(()=>{class n{static#e=this.NULL=new aM}return n})();function cM(){return Gd(Si(),Mt())}function Gd(n,e){return new ei(Or(n,e))}let ei=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=cM}return n})();function lM(n){return n instanceof ei?n.nativeElement:n}class Lx{}let Fc=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uM(){const n=Mt(),t=Co(Si().index,n);return(ls(t)?t:n)[Nn]}()}return n})(),dM=(()=>{class n{static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:()=>null})}return n})();const Wy={};function d(n){const e=se(null);try{return n()}finally{se(e)}}function y(n){return!!ke(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ke(n){return null!==n&&("function"==typeof n||"object"==typeof n)}class et{constructor(){}supports(e){return y(e)}create(e){return new pt(e)}}const lt=(n,e)=>e;class pt{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lt}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Yt(i,r,s)?t:i,a=Yt(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<l&&(s[f]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!y(e))throw new Ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function be(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Rt(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Bt),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Rt{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ot{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Bt{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ot,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yt(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class un{constructor(){}supports(e){return e instanceof Map||ke(e)}create(){return new In}}class In{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ke(e)))throw new Ge(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Wn(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Wn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tn(){return new $n([new et])}let $n=(()=>{class n{static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:Tn});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Tn()),deps:[[n,new Pd,new wl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ge(901,!1)}}return n})();function po(){return new Kr([new un])}let Kr=(()=>{class n{static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:po});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||po()),deps:[[n,new Pd,new wl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Ge(901,!1)}}return n})();function sr(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(qi(s)),us(s)&&ra(s,i);const o=t.type;if(8&o)sr(n,e,t.child,i);else if(32&o){const a=wy(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=ux(e,t);if(Array.isArray(a))i.push(...a);else{const c=Ys(e[Xi]);sr(c[Ht],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function ra(n,e){for(let t=br;t<n.length;t++){const i=n[t],r=i[Ht].firstChild;null!==r&&sr(i[Ht],i,r,e)}n[Wa]!==n[gi]&&e.push(n[Wa])}let ic=[];const iq={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Sc(n.lView)},consumerOnSignalRead(){this.lView[So]=this}};function fM(n){return n.ngOriginalError}class Ra{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fM(e);for(;t&&fM(t);)t=fM(t);return t||null}}const ZF=new xt("",{providedIn:"root",factory:()=>kt(Ra).handleError.bind(void 0)}),ek=new xt("",{providedIn:"root",factory:()=>!1}),zn={};function dn(n){rk(li(),Mt(),As()+n,!1)}function rk(n,e,t,i){if(!i)if(3==(3&e[bn])){const s=n.preOrderCheckHooks;null!==s&&Md(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Hn(e,s,0,t)}fl(t)}function rt(n,e=si.Default){const t=Mt();return null===t?ot(n,e):mw(Si(),t,D(n),e)}function Bx(n,e,t,i,r,s,o,a,c,l,u){const h=e.blueprint.slice();return h[gi]=r,h[bn]=204|i,(null!==l||n&&2048&n[bn])&&(h[bn]|=2048),P_(h),h[Ri]=h[Ao]=n,h[Hi]=t,h[bc]=o||n&&n[bc],h[Nn]=a||n&&n[Nn],h[cs]=c||n&&n[cs]||null,h[Yr]=s,h[Ed]=function Jw(){return Kw++}(),h[Jn]=u,h[Lh]=l,h[Xi]=2==e.type?n[Xi]:h,h}function Eg(n,e,t,i,r){let s=n.data[e];if(null===s)s=function pM(n,e,t,i,r){const s=F_(),o=Cd(),c=n.data[e]=function mq(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return fu()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function zh(){return Dn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function lo(){const n=Dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Jo(s,!0),s}function $y(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ok(n,e,t,i,r){const s=As(),o=2&i;try{fl(-1),o&&e.length>On&&rk(n,e,On,!1),$a(o?2:0,r),t(i,r)}finally{fl(s),$a(o?3:1,r)}}function gM(n,e,t){if(A_(e)){const i=se(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{se(i)}}}function mM(n,e,t){Jb()&&(function Eq(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;nr(t)&&function Dq(n,e,t){const i=Or(e,n),r=ak(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=jx(n,Bx(n,r,null,o,i,e,null,n[bc].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Yh(t,e),js(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=ks(e,n,a,t);js(l,e),null!==o&&Rq(0,a-r,l,c,0,o),Ca(c)&&(Co(t.index,e)[Hi]=ks(e,n,a,t))}}(n,e,t,Or(t,e)),64==(64&t.flags)&&hk(n,e,t))}function _M(n,e,t=Or){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function ak(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=yM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yM(n,e,t,i,r,s,o,a,c,l,u){const h=On+i,f=h+r,g=function uq(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:zn);return t}(h,f),m="function"==typeof l?l():l;return g[Ht]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}let ck=n=>null;function lk(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?uk(t,e,r,s):i.hasOwnProperty(r)&&uk(t,e,i[r],s)}return t}function uk(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Oa(n,e,t,i,r,s,o,a){const c=Or(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(EM(n,t,u,i,r),nr(e)&&function vq(n,e){const t=Co(e,n);16&t[bn]||(t[bn]|=64)}(t,e.index)):3&e.type&&(i=function yq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function vM(n,e,t,i){if(Jb()){const r=null===i?null:{"":-1},s=function Sq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Fp(e,o.selectors,!1))if(i||(i=[]),Ca(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),bM(n,e,a.length)}else i.unshift(o),bM(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&dk(n,e,t,o,r,a),r&&function Cq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ge(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=yd(t.mergedAttrs,t.attrs)}function dk(n,e,t,i,r,s){for(let l=0;l<i.length;l++)$_(Yh(t,e),n,i[l].type);!function Mq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=$y(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=yd(t.mergedAttrs,u.hostAttrs),Iq(n,t,e,c,u),Tq(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function _q(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],f=t?t.get(h):null,m=f?f.outputs:null;c=lk(h.inputs,u,c,f?f.inputs:null),l=lk(h.outputs,u,l,m);const v=null===c||null===o||Fb(e)?null:Oq(c,u,o);a.push(v)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function hk(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function _C(){return Dn.lFrame.currentDirectiveIndex}();try{fl(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];pu(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Aq(c,l)}}finally{fl(-1),pu(o)}}function Aq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function bM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Tq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ca(e)&&(t[""]=n)}}function Iq(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=uu(r.type)),o=new $h(s,Ca(r),rt);n.blueprint[i]=o,t[i]=o,function wq(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function xq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,$y(n,t,r.hostVars,zn),r)}function Dl(n,e,t,i,r,s){const o=Or(n,e);!function wM(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Sn(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Nn],o,s,n.value,t,i,r)}function Rq(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)fk(i,t,o[a++],o[a++],o[a++])}function fk(n,e,t,i,r){const s=se(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{se(s)}}function Oq(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function pk(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function gk(n,e){const t=n.contentQueries;if(null!==t){const i=se(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];Gh(t[r]),a.contentQueries(2,e[o],o)}}}finally{se(i)}}}function jx(n,e){return n[Ph]?n[Nh][co]=e:n[Ph]=e,n[Nh]=e,e}function xM(n,e,t){Gh(0);const i=se(null);try{e(n,t)}finally{se(i)}}function mk(n){return n[wd]||(n[wd]=[])}function _k(n){return n.cleanup||(n.cleanup=[])}function Ux(n,e){const t=n[cs],i=t?t.get(Ra,null):null;i&&i.handleError(e)}function EM(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];fk(n.data[o],e[o],i,a,r)}}function Lq(n,e,t,i){const r=e[bn];if(256==(256&r))return;e[bc].inlineEffectRunner?.flush(),j_(e);let o=null,a=null;(function Fq(n){return 2!==n.type})(n)&&(a=function Fx(n){return n[So]??function tq(n){const e=ic.pop()??Object.create(iq);return e.lView=n,e}(n)}(e),o=function Ie(n){return n&&(n.nextProducerIndex=0),se(n)}(a));try{P_(e),function tw(n){return Dn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ok(n,e,t,2,i);const c=3==(3&r);if(c){const h=n.preOrderCheckHooks;null!==h&&Md(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Hn(e,h,0,null),z_(e,0)}if(function kq(n){for(let e=Tl(n);null!==e;e=Bn(e)){if(!(e[bn]&Ad.HasTransplantedViews))continue;const t=e[Ec];for(let i=0;i<t.length;i++){Yb(t[i])}}}(e),vk(e,0),null!==n.contentQueries&&gk(n,e),c){const h=n.contentCheckHooks;null!==h&&Md(e,h)}else{const h=n.contentHooks;null!==h&&Hn(e,h,1),z_(e,1)}!function lq(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)fl(~r);else{const s=r,o=t[++i],a=t[++i];mC(o,s),a(2,e[s])}}}finally{fl(-1)}}(n,e);const l=n.components;null!==l&&wk(e,l,0);const u=n.viewQuery;if(null!==u&&xM(2,u,i),c){const h=n.viewCheckHooks;null!==h&&Md(e,h)}else{const h=n.viewHooks;null!==h&&Hn(e,h,2),z_(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ll]){for(const h of e[ll])h();e[ll]=null}e[bn]&=-73}catch(c){throw Sc(e),c}finally{null!==a&&(function ae(n,e){if(se(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(qe(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Qe(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function nq(n){n.lView[So]!==n&&(n.lView=null,ic.push(n))}(a)),Wh()}}function vk(n,e){for(let t=Tl(n);null!==t;t=Bn(t)){t[bn]&=~Ad.HasChildViewsToRefresh;for(let i=br;i<t.length;i++)bk(t[i],e)}}function Bq(n,e,t){bk(Co(e,n),t)}function bk(n,e){O_(n)&&SM(n,e)}function SM(n,e){const i=n[Ht],r=n[bn],s=n[So];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!xe(s)),s&&(s.dirty=!1),n[bn]&=-9217,o)Lq(i,n,i.template,n[Hi]);else if(8192&r){vk(n,1);const a=i.components;null!==a&&wk(n,a,1)}}function wk(n,e,t){for(let i=0;i<e.length;i++)Bq(n,e[i],t)}function Yy(n){for(n[bc].changeDetectionScheduler?.notify();n;){n[bn]|=64;const e=Ys(n);if(S_(n)&&!e)return n;n=e}return null}class Xy{get rootNodes(){const e=this._lView,t=e[Ht];return sr(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hi]}set context(e){this._lView[Hi]=e}get destroyed(){return 256==(256&this._lView[bn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ri];if(us(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(jd(e,i),bu(t,i))}this._attachedToViewContainer=!1}Mu(this._lView[Ht],this._lView)}onDestroy(e){!function du(n,e){if(256==(256&n[bn]))throw new Ge(911,!1);null===n[xc]&&(n[xc]=[]),n[xc].push(e)}(this._lView,e)}markForCheck(){Yy(this._cdRefInjectingView||this._lView)}detach(){this._lView[bn]&=-129}reattach(){Vh(this._lView),this._lView[bn]|=128}detectChanges(){this._lView[bn]|=1024,function AM(n,e=!0){const t=n[bc],i=t.rendererFactory,r=t.afterRenderEventManager;i.begin?.(),r?.begin();try{!function Nq(n){SM(n,0);let e=0;for(;qb(n);){if(100===e)throw new Ge(103,!1);e++,SM(n,1)}}(n)}catch(o){throw e&&Ux(n,o),o}finally{i.end?.(),t.inlineEffectRunner?.flush(),r?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function AT(n,e){Ln(n,e,e[Nn],2,null,null)}(this._lView[Ht],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=e,Vh(this._lView)}}let Po=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=jq}return n})();function jq(n){return function Uq(n,e,t){if(nr(n)&&!t){const i=Co(n.index,e);return new Xy(i,i)}return 47&n.type?new Xy(e[Xi],e):null}(Si(),Mt(),16==(16&n))}const xk=new Set;function wf(n){xk.has(n)||(xk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function TM(n){return e=>{setTimeout(n,void 0,e)}}const pn=class Kq extends Zt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=TM(s),r&&(r=TM(r)),o&&(o=TM(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof _t&&e.add(a),a}};function Ek(...n){}class mn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Jq(){const n="function"==typeof hi.requestAnimationFrame;let e=hi[n?"requestAnimationFrame":"setTimeout"],t=hi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function eK(n){const e=()=>{!function Qq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(hi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,IM(n),n.isCheckStableRunning=!0,MM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),IM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function nK(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return Ak(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Sk(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return Ak(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Sk(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,IM(n),MM(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mn.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(mn.isInAngularZone())throw new Ge(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Zq,Ek,Ek);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Zq={};function MM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Ak(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Sk(n){n._nesting--,MM(n)}class tK{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let Vx=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const t of this.internalCallbacks)t();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=It({token:n,providedIn:"root",factory:()=>new n})}return n})();function oK(n,e){const t=Co(e,n),i=t[Ht];!function aK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[gi];null!==r&&null===t[Jn]&&(t[Jn]=vf(r,t[cs])),DM(i,t,t[Hi])}function DM(n,e,t){j_(e);try{const i=n.viewQuery;null!==i&&xM(1,i,t);const r=n.template;null!==r&&ok(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&gk(n,e),n.staticViewQueries&&xM(2,n.viewQuery,t);const s=n.components;null!==s&&function cK(n,e){for(let t=0;t<e.length;t++)oK(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[bn]&=-5,Wh()}}function Hx(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Vi(r,a):2==s&&(i=Vi(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class Dk extends Il{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=at(e);return new qy(t,this.ngModule)}}function Rk(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class uK{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Np(i);const r=this.injector.get(e,Wy,i);return r!==Wy||t===Wy?r:this.parentInjector.get(e,t,i)}}class qy extends Px{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=Rk(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return Rk(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bd(n){return n.map(nC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof na?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new uK(e,s):e,a=o.get(Lx,null);if(null===a)throw new Ge(407,!1);const h={rendererFactory:a,sanitizer:o.get(dM,null),inlineEffectRunner:null,afterRenderEventManager:o.get(Vx,null),changeDetectionScheduler:o.get(ZT,null)},f=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=i?function dq(n,e,t,i){const s=i.get(ek,!1)||t===Eo.ShadowDom,o=n.selectRootElement(e,s);return function hq(n){ck(n)}(o),o}(f,i,this.componentDef.encapsulation,o):hg(f,g,function lK(n){const e=n.toLowerCase();return"svg"===e?Wb:"math"===e?"math":null}(g));let v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let w=null;null!==m&&(w=vf(m,o,!0));const N=yM(0,null,null,1,0,null,null,null,null,null,null),U=Bx(null,N,null,v,null,null,h,f,o,null,w);let ce,re;j_(U);try{const Me=this.componentDef;let Ne,st=null;Me.findHostDirectiveDefs?(Ne=[],st=new Map,Me.findHostDirectiveDefs(Me,Ne,st),Ne.push(Me)):Ne=[Me];const dt=function hK(n,e){const t=n[Ht],i=On;return n[i]=e,Eg(t,i,2,"#host",null)}(U,m),Xe=function fK(n,e,t,i,r,s,o){const a=r[Ht];!function pK(n,e,t,i){for(const r of n)e.mergedAttrs=yd(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Hx(e,e.mergedAttrs,!0),null!==t&&My(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=vf(e,r[cs]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const h=Bx(r,ak(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&bM(a,n,i.length-1),jx(r,h),r[n.index]=h}(dt,m,Me,Ne,U,h,f);re=Uh(N,On),m&&function mK(n,e,t,i){if(i)Oh(n,t,["ng-version","17.0.8"]);else{const{attrs:r,classes:s}=function Aa(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ea(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Oh(n,t,r),s&&s.length>0&&fx(n,t,s.join(" "))}}(f,Me,m,i),void 0!==t&&function _K(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(re,this.ngContentSelectors,t),ce=function gK(n,e,t,i,r,s){const o=Si(),a=r[Ht],c=Or(o,r);dk(a,r,o,t,null,i);for(let u=0;u<t.length;u++)js(ks(r,a,o.directiveStart+u,o),r);hk(a,r,o),c&&js(c,r);const l=ks(r,a,o.directiveStart+o.componentOffset,o);if(n[Hi]=r[Hi]=l,null!==s)for(const u of s)u(l,e);return gM(a,o,n),l}(Xe,Me,Ne,st,U,[yK]),DM(N,U,null)}finally{Wh()}return new dK(this.componentType,ce,Gd(re,U),U,re)}}class dK extends sM{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Xy(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;EM(s[Ht],s,r,e,t),this.previousInputValues.set(e,t),Yy(Co(this._tNode.index,s))}}get injector(){return new Lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function yK(){const n=Si();zp(Mt()[Ht],n)}function oi(n){let e=function Ok(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ca(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ge(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=zx(n.inputs),o.inputTransforms=zx(n.inputTransforms),o.declaredInputs=zx(n.declaredInputs),o.outputs=zx(n.outputs);const a=r.hostBindings;a&&xK(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&bK(n,c),l&&wK(n,l),Gr(n.inputs,r.inputs),Gr(n.declaredInputs,r.declaredInputs),Gr(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Gr(o.inputTransforms,r.inputTransforms)),Ca(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===oi&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vK(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=yd(r.hostAttrs,t=yd(t,r.hostAttrs))}}(i)}function zx(n){return n===Ga?{}:n===pi?[]:n}function bK(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function wK(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function xK(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Ef(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Rl(n,e,t){return n[e]=t}function hs(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function wr(n,e,t,i){const r=Mt();return hs(r,Zo(),e)&&(li(),Dl(Li(),r,n,e,t,i)),wr}function Sg(n,e,t,i){return hs(n,Zo(),t)?e+Sn(t)+i:zn}function Wx(n,e){return n<<17|e<<2}function Wd(n){return n>>17&32767}function RM(n){return 2|n}function Sf(n){return(131068&n)>>2}function OM(n,e){return-131069&n|e<<2}function PM(n){return 1|n}function Wk(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Wd(s):Sf(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];PK(n[a],e)&&(c=!0,n[a+1]=i?PM(u):RM(u)),a=i?Wd(u):Sf(u)}c&&(n[t+1]=i?RM(s):PM(s))}function PK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wu(n,e)>=0}const Ms={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $k(n){return n.substring(Ms.key,Ms.keyEnd)}function NK(n){return n.substring(Ms.value,Ms.valueEnd)}function Yk(n,e){const t=Ms.textEnd;return t===e?-1:(e=Ms.keyEnd=function kK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ms.key=e,t),Pg(n,e,t))}function Xk(n,e){const t=Ms.textEnd;let i=Ms.key=Pg(n,e,t);return t===i?-1:(i=Ms.keyEnd=function BK(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=Kk(n,i,t),i=Ms.value=Pg(n,i,t),i=Ms.valueEnd=function jK(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=Jk(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=Jk(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),Kk(n,i,t))}function qk(n){Ms.key=0,Ms.keyEnd=0,Ms.value=0,Ms.valueEnd=0,Ms.textEnd=n.length}function Pg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Kk(n,e,t,i){return(e=Pg(n,e,t))<t&&e++,e}function Jk(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function jn(n,e,t){const i=Mt();return hs(i,Zo(),e)&&Oa(li(),Li(),i,n,e,i[Nn],t,!1),jn}function NM(n,e,t,i,r){const o=r?"class":"style";EM(n,t,e.inputs[o],o,i)}function LM(n,e,t){return Bc(n,e,t,!1),LM}function Wi(n,e){return Bc(n,e,null,!0),Wi}function UK(n,e){for(let t=function FK(n){return qk(n),Xk(n,Pg(n,0,Ms.textEnd))}(e);t>=0;t=Xk(e,t))eB(n,$k(e),NK(e))}function $d(n){jc($K,Ol,n,!0)}function Ol(n,e){for(let t=function LK(n){return qk(n),Yk(n,Pg(n,0,Ms.textEnd))}(e);t>=0;t=Yk(e,t))To(n,$k(e),!0)}function Bc(n,e,t,i){const r=Mt(),s=li(),o=Mc(2);s.firstUpdatePass&&Qk(s,n,o,i),e!==zn&&hs(r,o,e)&&tB(s,s.data[As()],r,r[Nn],n,r[o+1]=function XK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ri(Ro(n)))),n}(e,t),i,o)}function jc(n,e,t,i){const r=li(),s=Mc(2);r.firstUpdatePass&&Qk(r,null,s,i);const o=Mt();if(t!==zn&&hs(o,s,t)){const a=r.data[As()];if(iB(a,i)&&!Zk(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Vi(c,t||"")),NM(r,a,o,t,i)}else!function YK(n,e,t,i,r,s,o,a){r===zn&&(r=pi);let c=0,l=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let v,m=null;u===h?(c+=2,l+=2,f!==g&&(m=h,v=g)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,v=g),null!==m&&tB(n,e,t,i,m,v,o,a),u=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[Nn],o[s+1],o[s+1]=function WK(n,e,t){if(null==t||""===t)return pi;const i=[],r=Ro(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function Zk(n,e){return e>=n.expandoStartIndex}function Qk(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[As()],o=Zk(n,t);iB(s,i)&&null===e&&!o&&(e=!1),e=function VK(n,e,t,i){const r=function B_(n){const e=Dn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Jy(t=FM(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=FM(r,n,e,t,i),null===s){let c=function HK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Sf(i))return n[Wd(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=FM(null,n,e,c[1],i),c=Jy(c,e.attrs,i),function zK(n,e,t,i){n[Wd(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function GK(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Jy(i,n[s].hostAttrs,t);return Jy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function RK(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Wd(o),c=Sf(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||wu(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const f=Wd(n[a+1]);n[i+1]=Wx(f,a),0!==f&&(n[f+1]=OM(n[f+1],i)),n[a+1]=function IK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Wx(a,0),0!==a&&(n[a+1]=OM(n[a+1],i)),a=i;else n[i+1]=Wx(c,0),0===a?a=i:n[c+1]=OM(n[c+1],i),c=i;l&&(n[i+1]=RM(n[i+1])),Wk(n,u,i,!0),Wk(n,u,i,!1),function OK(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&wu(s,e)>=0&&(t[i+1]=PM(t[i+1]))}(e,u,n,i,s),o=Wx(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function FM(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Jy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Jy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),To(n,o,!!t||e[++s]))}return void 0===n?null:n}function eB(n,e,t){To(n,e,Ro(t))}function $K(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&To(n,i,t)}function tB(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function DK(n){return 1==(1&n)}(l)?nB(c,e,t,r,Sf(l),o):void 0;$x(u)||($x(s)||function MK(n){return 2==(2&n)}(l)&&(s=nB(c,null,t,r,a,o)),function IT(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Cl.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Cl.Important),n.setStyle(t,i,r,s))}}(i,o,jh(As(),t),r,s))}function nB(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=t[r+1];f===zn&&(f=h?pi:void 0);let g=h?Qh(f,i):u===i?f:void 0;if(l&&!$x(g)&&(g=Qh(c,i)),$x(g)&&(a=g,o))return a;const m=n[r+1];r=o?Wd(m):Sf(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Qh(c,i))}return a}function $x(n){return void 0!==n}function iB(n,e){return 0!=(n.flags&(e?8:16))}let lB=(n,e)=>null;function Ng(n,e){return lB(n,e)}function n0(n,e,t,i){const r=e.tView,a=Bx(n,r,t,4096&n[bn]?4096:16,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null);a[xd]=n[e.index];const l=n[Sa];return null!==l&&(a[Sa]=l.createEmbeddedView(r)),DM(r,a,t),a}function Lg(n,e){return!e||null===e.firstChild||lg(n)}function r0(n,e,t,i=!0){const r=e[Ht];if(function xy(n,e,t,i){const r=br+i,s=t.length;i>0&&(t[r-1][co]=e),i<s-br?(e[co]=t[r],Jp(t,br+i,e)):(t.push(e),e[co]=null),e[Ri]=t;const o=e[xd];null!==o&&t!==o&&function CT(n,e){const t=n[Ec];e[Xi]!==e[Ri][Ri][Xi]&&(n[bn]|=Ad.HasTransplantedViews),null===t?n[Ec]=[e]:t.push(e)}(o,e);const a=e[Sa];null!==a&&a.insertView(n),Vh(e),e[bn]|=128}(r,e,n,t),i){const o=Cy(t,n),a=e[Nn],c=Ml(a,n[Wa]);null!==c&&function ET(n,e,t,i,r,s){i[gi]=r,i[Yr]=e,Ln(n,i,t,1,r,s)}(r,n[Yr],a,e,c,o)}const s=e[Jn];null!==s&&null!==s.firstChild&&(s.firstChild=null)}let go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=MJ}return n})();function MJ(){return mB(Si(),Mt())}const IJ=go,pB=class extends IJ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Gd(this._hostTNode,this._hostLView)}get injector(){return new Lr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Kp(this._hostTNode,this._hostLView);if(Ka(e)){const t=pl(e,this._hostLView),i=gu(e);return new Lr(t[Ht].data[i+8],t)}return new Lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gB(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-br}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Ng(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,Lg(this._hostTNode,o)),a}createComponent(e,t,i,r,s){const o=e&&!function Zh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const m=t||{};a=m.index,i=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const c=o?e:new qy(at(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const v=(o?l:this.parentInjector).get(na,null);v&&(s=v)}const u=at(c.componentType??{}),h=Ng(this._lContainer,u?.id??null),g=c.create(l,r,h?.firstChild??null,s);return this.insertImpl(g.hostView,a,Lg(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function pC(n){return us(n[Ri])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Ri],l=new pB(c,c[Yr],c[Ri]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return r0(o,r,s,i),e.attachToViewContainerRef(),Jp(WM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=gB(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=jd(this._lContainer,t);i&&(bu(WM(this._lContainer),t),Mu(i[Ht],i))}detach(e){const t=this._adjustIndex(e,-1),i=jd(this._lContainer,t);return i&&null!=bu(WM(this._lContainer),t)?new Xy(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function gB(n){return n[8]}function WM(n){return n[8]||(n[8]=[])}function mB(n,e){let t;const i=e[n.index];return us(i)?t=i:(t=pk(i,e,null,n),e[n.index]=t,jx(e,t)),_B(t,e,n,i),new pB(t,n,e)}let _B=function vB(n,e,t,i){if(n[Wa])return;let r;r=8&t.type?qi(i):function DJ(n,e){const t=n[Nn],i=t.createComment(""),r=Or(e,n);return Iu(t,Ml(t,r),i,function Ay(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Wa]=r},$M=(n,e,t)=>!1;function mi(n,e,t,i,r,s,o,a){const c=Mt(),l=li(),u=n+On,h=l.firstCreatePass?function NJ(n,e,t,i,r,s,o,a,c){const l=e.consts,u=Eg(e,n,4,o||null,Xa(l,a));vM(e,t,u,Xa(l,c)),zp(e,u);const h=u.tView=yM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];Jo(h,!1);const f=bB(l,c,h,n);Td()&&fg(l,c,f,h),js(f,c);const g=pk(f,c,f,h);return c[u]=g,jx(c,g),function yB(n,e,t){return $M(n,e,t)}(g,h,c),Xr(h)&&mM(l,c,h),null!=o&&_M(c,h,a),mi}let bB=function wB(n,e,t,i){return Ic(!0),e[Nn].createComment("")};function Is(n,e,t){wf("NgControlFlow");const i=Mt(),r=Zo(),s=function YM(n,e){return n[e]}(i,On+n);if(hs(i,r,e)){const a=se(null);try{if(function GM(n,e){const t=jd(n,e);return void 0!==t&&Mu(t[Ht],t),t}(s,0),-1!==e){const c=function XM(n,e){return Uh(n,e)}(i[Ht],On+e),l=Ng(s,c.tView.ssrId);r0(s,n0(i,c,t,{dehydratedView:l}),0,Lg(c,l))}}finally{se(a)}}else{const a=function fB(n,e){const t=br+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Hi]=t)}}function sn(n,e,t,i){const r=Mt(),s=li(),o=On+n,a=r[Nn],c=s.firstCreatePass?function xZ(n,e,t,i,r,s){const o=e.consts,c=Eg(e,n,2,i,Xa(o,r));return vM(e,t,c,Xa(o,s)),null!==c.attrs&&Hx(c,c.attrs,!1),null!==c.mergedAttrs&&Hx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=GB(s,r,c,a,e,n);r[o]=l;const u=Xr(c);return Jo(c,!0),My(a,l,c),32!=(32&c.flags)&&Td()&&fg(s,r,l,c),0===function L_(){return Dn.lFrame.elementDepthCount}()&&js(l,r),function hu(){Dn.lFrame.elementDepthCount++}(),u&&(mM(s,r,c),gM(s,c,r)),null!==i&&_M(r,c),sn}function on(){let n=Si();Cd()?Cc():(n=n.parent,Jo(n,!1));const e=n;(function Zb(n){return Dn.skipHydrationRootTNode===n})(e)&&function gC(){Dn.skipHydrationRootTNode=null}(),function Ko(){Dn.lFrame.elementDepthCount--}();const t=li();return t.firstCreatePass&&(zp(t,n),A_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function W_(n){return 0!=(8&n.flags)}(e)&&NM(t,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function pw(n){return 0!=(16&n.flags)}(e)&&NM(t,e,Mt(),e.stylesWithoutHost,!1),on}function or(n,e,t,i){return sn(n,e,t,i),on(),or}let GB=(n,e,t,i,r,s)=>(Ic(!0),hg(i,r,function V_(){return Dn.lFrame.currentNamespace}()));function c0(n,e,t){const i=Mt(),r=li(),s=n+On,o=r.firstCreatePass?function SZ(n,e,t,i,r){const s=e.consts,o=Xa(s,i),a=Eg(e,n,8,"ng-container",o);return null!==o&&Hx(a,o,!0),vM(e,t,a,Xa(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Jo(o,!0);const a=$B(r,i,o,n);return i[s]=a,Td()&&fg(r,i,a,o),js(a,i),Xr(o)&&(mM(r,i,o),gM(r,o,i)),null!=t&&_M(i,o),c0}function l0(){let n=Si();const e=li();return Cd()?Cc():(n=n.parent,Jo(n,!1)),e.firstCreatePass&&(zp(e,n),A_(n)&&e.queries.elementEnd(n)),l0}let $B=(n,e,t,i)=>(Ic(!0),ec(e[Nn],""));function Hg(){return Mt()}function Xd(n,e,t){const i=Mt();return hs(i,Zo(),e)&&Oa(li(),Li(),i,n,e,i[Nn],t,!0),Xd}const Gg="en-US";let KB=Gg;function Wg(n){return!!n&&"function"==typeof n.then}function x3(n){return!!n&&"function"==typeof n.subscribe}function ai(n,e,t,i){const r=Mt(),s=li(),o=Si();return function A3(n,e,t,i,r,s,o){const a=Xr(i),l=n.firstCreatePass&&_k(n),u=e[Hi],h=mk(e);let f=!0;if(3&i.type||o){const v=Or(i,e),w=o?o(v):v,N=h.length,U=o?re=>o(qi(re[i.index])):i.index;let ce=null;if(!o&&a&&(ce=function AQ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[wd],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==ce)(ce.__ngLastListenerFn__||ce).__ngNextListenerFn__=s,ce.__ngLastListenerFn__=s,f=!1;else{s=C3(i,e,u,s,!1);const re=t.listen(w,r,s);h.push(s,re),l&&l.push(r,U,N,N+1)}}else s=C3(i,e,u,s,!1);const g=i.outputs;let m;if(f&&null!==g&&(m=g[r])){const v=m.length;if(v)for(let w=0;w<v;w+=2){const Me=e[m[w]][m[w+1]].subscribe(s),Ne=h.length;h.push(s,Me),l&&l.push(r,i.index,Ne,-(Ne+1))}}}(s,r,r[Nn],o,n,e,i),ai}function S3(n,e,t,i){try{return $a(6,e,t),!1!==t(i)}catch(r){return Ux(n,r),!1}finally{$a(7,e,t)}}function C3(n,e,t,i,r){return function s(o){if(o===Function)return i;Yy(n.componentOffset>-1?Co(n.index,e):e);let c=S3(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=S3(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function kr(n=1){return function aw(n){return(Dn.lFrame.contextLView=function Xb(n,e){for(;n>0;)e=e[Ao],n--;return e}(n,Dn.lFrame.contextLView))[Hi]}(n)}function SQ(n,e){let t=null;const i=function kb(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Fp(n,s,!0):tC(i,s))return r}else t=r}return t}function oa(n){const e=Mt()[Xi][Yr];if(!e.projection){const i=e.projection=Za(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?SQ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ti(n,e=0,t){const i=Mt(),r=li(),s=Eg(r,On+n,16,null,t||null);null===s.projection&&(s.projection=e),Cc(),(!i[Jn]||fu())&&32!=(32&s.flags)&&function dx(n,e,t){Do(e[Nn],0,e,t,Ey(n,t,e),lx(t.parent||e[Yr],t,e))}(r,i,s)}function sI(n,e,t){return oI(n,"",e,"",t),sI}function oI(n,e,t,i,r){const s=Mt(),o=Sg(s,e,t,i);return o!==zn&&Oa(li(),Li(),s,n,o,s[Nn],r,!1),oI}function Mf(n){return Fs(function ew(){return Dn.lFrame.contextLView}(),On+n)}function ps(n,e=""){const t=Mt(),i=li(),r=n+On,s=i.firstCreatePass?Eg(i,r,1,e,null):i.data[r],o=G3(i,t,s,e,n);t[r]=o,Td()&&fg(i,t,o,s),Jo(s,!1)}let G3=(n,e,t,i,r)=>(Ic(!0),function pr(n,e){return n.createText(e)}(e[Nn],i));function Uc(n){return Pl("",n,""),Uc}function Pl(n,e,t){const i=Mt(),r=Sg(i,n,e,t);return r!==zn&&function Nu(n,e,t){const i=jh(e,n);!function rx(n,e,t){n.setValue(e,t)}(n[Nn],i,t)}(i,As(),r),Pl}function aI(n,e,t,i,r){if(n=D(n),Array.isArray(n))for(let s=0;s<n.length;s++)aI(n[s],e,t,i,r);else{const s=li(),o=Mt(),a=Si();let c=Au(n)?n:D(n.provide);const l=Nw(n),u=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Au(n)||!n.multi){const g=new $h(l,r,rt),m=lI(c,e,r?u:u+f,h);-1===m?($_(Yh(a,o),s,c),cI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=lI(c,e,u+f,h),m=lI(c,e,u,u+f),w=m>=0&&t[m];if(r&&!w||!r&&!(g>=0&&t[g])){$_(Yh(a,o),s,c);const N=function VQ(n,e,t,i,r){const s=new $h(n,t,rt);return s.multi=[],s.index=e,s.componentProviders=0,Q3(s,r,i&&!t),s}(r?UQ:jQ,t.length,r,i,l);!r&&w&&(t[m].providerFactory=N),cI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(N),o.push(N)}else cI(s,n,g>-1?g:m,Q3(t[r?m:g],l,!r&&i));!r&&i&&w&&t[m].componentProviders++}}}function cI(n,e,t,i){const r=Au(e),s=function UC(n){return!!n.useClass}(e);if(r||s){const c=(s?D(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function Q3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function lI(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function jQ(n,e,t,i){return uI(this.multi,[])}function UQ(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ks(t,t[Ht],this.providerFactory.index,i);s=a.slice(0,o),uI(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],uI(r,s);return s}function uI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function vi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function BQ(n,e,t){const i=li();if(i.firstCreatePass){const r=Ca(n);aI(t,i.data,i.blueprint,r,!0),aI(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class If{}class ej{}class dI extends If{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dk(this);const r=function fn(n,e){const t=n[wn]||null;if(!t&&!0===e)throw new Error(`Type ${ri(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Io(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=kw(e,t,[{provide:If,useValue:this},{provide:Il,useValue:this.componentFactoryResolver},...i],ri(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class hI extends ej{constructor(e){super(),this.moduleType=e}create(e){return new dI(this.moduleType,e,[])}}class tj extends If{constructor(e){super(),this.componentFactoryResolver=new Dk(this),this.instance=null;const t=new Ld([...e.providers,{provide:If,useValue:this},{provide:Il,useValue:this.componentFactoryResolver}],e.parent||ng(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let GQ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=ny(0,t.type),r=i.length>0?function nj(n,e,t=null){return new tj({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=It({token:n,providedIn:"environment",factory:()=>new n(ot(na))})}return n})();function $g(n){wf("NgStandalone"),n.getStandaloneInjector=e=>e.get(GQ).getOrCreateStandaloneInjector(n)}function Yg(n,e,t){const i=Gs()+n,r=Mt();return r[i]===zn?Rl(r,i,t?e.call(t):e()):function Ky(n,e){return n[e]}(r,i)}function uj(n,e,t,i,r,s){const o=e+t;return hs(n,o,r)?Rl(n,o+1,s?i.call(s,r):i(r)):function g0(n,e){const t=n[e];return t===zn?void 0:t}(n,o+1)}function Br(n,e){const t=li();let i;const r=n+On;t.firstCreatePass?(i=function uee(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=uu(i.type)),a=oo(rt);try{const c=Rd(!1),l=s();return Rd(c),function CQ(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Mt(),r,l),l}finally{oo(a)}}function jr(n,e,t){const i=n+On,r=Mt(),s=Fs(r,i);return function m0(n,e){return n[Ht].data[e].pure}(r,i)?uj(r,Gs(),e,s.transform,t,s):s.transform(t)}function gee(){return this._results[Symbol.iterator]()}class _0{static#e=Symbol.iterator;get changes(){return this._changes??=new pn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=_0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=gee)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Bs(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Oc(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let oc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=yee}return n})();const mee=oc,_ee=class extends mee{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=n0(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new Xy(r)}};function yee(){return cE(Si(),Mt())}function cE(n,e){return 4&n.type?new _ee(e,n,Gd(n,e)):null}class pI{constructor(e){this.queryList=e,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class gI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new gI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==vj(e,t).matches&&this.queries[t].setDirty()}}class gj{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class mI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new mI(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class _I{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new _I(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,vee(t,s)),this.matchTNodeWithReadOption(e,t,Ss(t,e,s,!1,!1))}else i===oc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ss(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ei||r===go||r===oc&&4&t.type)this.addMatch(t.index,-2);else{const s=Ss(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function vee(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function wee(n,e,t,i){return-1===t?function bee(n,e){return 11&n.type?Gd(n,e):4&n.type?cE(n,e):null}(e,n):-2===t?function xee(n,e,t){return t===ei?Gd(e,n):t===oc?cE(e,n):t===go?mB(e,n):void 0}(n,e,i):ks(n,n[Ht],t,e)}function mj(n,e,t,i){const r=e[Sa].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:wee(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function yI(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=mj(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let h=br;h<u.length;h++){const f=u[h];f[xd]===f[Ri]&&yI(f[Ht],f,l,i)}if(null!==u[Ec]){const h=u[Ec];for(let f=0;f<h.length;f++){const g=h[f];yI(g[Ht],g,l,i)}}}}}return i}function Fi(n){const e=Mt(),t=li(),i=nw();Gh(i+1);const r=vj(t,i);if(n.dirty&&function fC(n){return 4==(4&n[bn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?yI(t,e,i,[]):mj(t,e,r,i);n.reset(s,lM),n.notifyOnChanges()}return!0}return!1}function Ds(n,e,t){const i=li();i.firstCreatePass&&(yj(i,new gj(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),_j(i,Mt(),e)}function ac(n,e,t,i){const r=li();if(r.firstCreatePass){const s=Si();yj(r,new gj(e,t,i),s.index),function Aee(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}_j(r,Mt(),t)}function ki(){return function Eee(n,e){return n[Sa].queries[e].queryList}(Mt(),nw())}function _j(n,e,t){const i=new _0(4==(4&t));(function gq(n,e,t,i){const r=mk(e);r.push(t),n.firstCreatePass&&_k(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Sa]&&(e[Sa]=new gI),e[Sa].queries.push(new pI(i))}function yj(n,e,t){null===n.queries&&(n.queries=new mI),n.queries.track(new _I(e,t))}function vj(n,e){return n.queries.getByIndex(e)}function bj(n,e){return cE(n,e)}let v0=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ui(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vj=new xt(""),dE=new xt("");let CI,AI=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CI||(function yte(n){CI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ot(mn),ot(SI),ot(dE))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),SI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return CI?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const TI=new xt("Application Initializer");let MI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=kt(TI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Wg(s))t.push(s);else if(x3(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hE=new xt("appBootstrapListener");function Gj(n,e){return Array.isArray(e)?e.reduce(Gj,n):{...n,...e}}let Df=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=kt(ZF),this.componentTypes=[],this.components=[],this.isStable=kt(v0).hasPendingTasks.pipe($t(t=>!t)),this._injector=kt(na)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Px;if(!this._injector.get(MI).done)throw!r&&function qt(n){const e=at(n)||At(n)||yt(n);return null!==e&&e.standalone}(t),new Ge(405,!1);let o;o=r?t:this._injector.get(Il).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function bte(n){return n.isBoundToModule}(o)?void 0:this._injector.get(If),l=o.create(Ki.NULL,[],i||o.selector,a),u=l.location.nativeElement,h=l.injector.get(Vj,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),fE(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Ge(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;fE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(hE,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>fE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ge(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let xte=(()=>{class n{constructor(){this.zone=kt(mn),this.applicationRef=kt(Df)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ete(){const n=kt(mn),e=kt(Ra);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Ste=(()=>{class n{constructor(){this.subscription=new _t,this.initialized=!1,this.zone=kt(mn),this.pendingTasks=kt(v0)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{mn.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{mn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Nl=new xt("LocaleId",{providedIn:"root",factory:()=>kt(Nl,si.Optional|si.SkipSelf)||function Cte(){return typeof $localize<"u"&&$localize.locale||Gg}()}),II=new xt("PlatformDestroyListeners");let Xj=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function iK(n="zone.js",e){return"noop"===n?new tK:"zone.js"===n?new mn(e):n}(i?.ngZone,function Yj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function zQ(n,e,t){return new dI(n,e,t)}(t.moduleType,this.injector,function $j(n){return[{provide:mn,useFactory:n},{provide:xl,multi:!0,useFactory:()=>{const e=kt(xte,{optional:!0});return()=>e.initialize()}},{provide:xl,multi:!0,useFactory:()=>{const e=kt(Ste);return()=>{e.initialize()}}},{provide:ZF,useFactory:Ete}]}(()=>r)),o=s.injector.get(Ra,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{fE(this._modules,s),a.unsubscribe()})}),function zj(n,e,t){try{const i=t();return Wg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(MI);return a.runInitializers(),a.donePromise.then(()=>(function JB(n){so(n,"Expected localeId to be defined"),"string"==typeof n&&(KB=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Nl,Gg)||Gg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=Gj({},i);return function vte(n,e,t){const i=new hI(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Df);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ge(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ge(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(II,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ki))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Kd=null;const qj=new xt("AllowMultipleToken");function Kj(n,e,t=[]){const i=`Platform: ${e}`,r=new xt(i);return(s=[])=>{let o=DI();if(!o||o.injector.get(qj,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function Ite(n){if(Kd&&!Kd.get(qj,!1))throw new Ge(400,!1);(function Hj(){!function R(n){Ke=n}(()=>{throw new Ge(600,!1)})})(),Kd=n;const e=n.get(Xj);(function Zj(n){n.get(jw,null)?.forEach(t=>t())})(n)}(function Jj(n=[],e){return Ki.create({name:e,providers:[{provide:sy,useValue:"platform"},{provide:II,useValue:new Set([()=>Kd=null])},...n]})}(a,i))}return function Dte(n){const e=DI();if(!e)throw new Ge(401,!1);return e}()}}function DI(){return Kd?.get(Xj)??null}const Fte=Kj(null,"core",[]);let kte=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Df))};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({})}return n})();function gs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let jI=null;function Jd(){return jI}class dne{}const Zn=new xt("DocumentToken");let wU=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>kt(hne),providedIn:"platform"})}return n})(),hne=(()=>{class n extends wU{constructor(){super(),this._doc=kt(Zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jd().getBaseHref(this._doc)}onPopState(t){const i=Jd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Jd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function xU(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function EU(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Of(n){return n&&"?"!==n[0]?"?"+n:n}let xE=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:()=>kt(pne),providedIn:"root"})}return n})();const fne=new xt("appBaseHref");let pne=(()=>{class n extends xE{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??kt(Zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xU(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Of(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Of(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Of(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(wU),ot(fne,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pf=(()=>{class n{constructor(t){this._subject=new pn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function _ne(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(EU(AU(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Of(i))}normalize(t){return n.stripTrailingSlash(function mne(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,AU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Of(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Of(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Of;static#t=this.joinWithSlash=xU;static#n=this.stripTrailingSlash=EU;static#i=this.\u0275fac=function(i){return new(i||n)(ot(xE))};static#r=this.\u0275prov=It({token:n,factory:()=>function gne(){return new Pf(ot(xE))}(),providedIn:"root"})}return n})();function AU(n){return n.replace(/\/index.html$/,"")}function PU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const qI=/\s+/,NU=[];let LU=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=NU,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(qI):NU}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(qI):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(qI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(rt($n),rt(Kr),rt(ei),rt(Fc))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class nie{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zg=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new nie(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),kU(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{kU(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(rt(go),rt(oc),rt($n))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function kU(n,e){n.context.$implicit=e.item}let KI=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new iie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(rt(go),rt(oc))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class iie{constructor(){this.$implicit=null,this.ngIf=null}}function BU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ri(e)}'.`)}let UU=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,r),get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(go))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[zi]})}return n})();class lie{createSubscription(e,t){return d(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){d(()=>e.unsubscribe())}}class uie{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const die=new uie,hie=new lie;let S0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Wg(t))return die;if(x3(t))return hie;throw function Hc(n,e){return new Ge(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Po,16))};static#t=this.\u0275pipe=$r({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Qg=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({})}return n})();const HU="browser";function Zd(n){return n===HU}function tD(n){return"server"===n}class zU{}class nre extends dne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rD extends nre{static makeCurrent(){!function une(n){jI||(jI=n)}(new rD)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ire(){return T0=T0||document.querySelector("base"),T0?T0.getAttribute("href"):null}();return null==t?null:function rre(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){T0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return PU(document.cookie,e)}}let T0=null,ore=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const sD=new xt("EventManagerPlugins");let YU=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Ge(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ot(sD),ot(mn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();class XU{constructor(e){this._doc=e}}const oD="ng-app-id";let qU=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tD(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${oD}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(oD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(oD,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn),ot(og),ot(dy,8),ot(Ia))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const aD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cD=/%COMP%/g,ure=new xt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function JU(n,e){return e.map(t=>t.replace(cD,n))}let ZU=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=tD(a),this.defaultRenderer=new lD(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Eo.ShadowDom&&(i={...i,encapsulation:Eo.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof eV?r.applyToHost(t):r instanceof uD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Eo.Emulated:s=new eV(c,l,i,this.appId,u,o,a,h);break;case Eo.ShadowDom:return new pre(c,l,t,i,o,a,this.nonce,h);default:s=new uD(c,l,i,u,o,a,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ot(YU),ot(qU),ot(og),ot(ure),ot(Zn),ot(Ia),ot(mn),ot(dy))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();class lD{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(aD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(QU(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(QU(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Ge(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=aD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=aD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Cl.DashCase|Cl.Important)?e.style.setProperty(t,i,r&Cl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Cl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Jd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function QU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class pre extends lD{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=JU(r.id,r.styles);for(const u of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uD extends lD{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?JU(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class eV extends uD{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function dre(n){return"_ngcontent-%COMP%".replace(cD,n)}(l),this.hostAttr=function hre(n){return"_nghost-%COMP%".replace(cD,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let gre=(()=>{class n extends XU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const tV=["alt","control","meta","shift"],mre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_re={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yre=(()=>{class n extends XU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),tV.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=mre[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),tV.forEach(o=>{o!==r&&(0,_re[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const iV=[{provide:Ia,useValue:HU},{provide:jw,useValue:function vre(){rD.makeCurrent()},multi:!0},{provide:Zn,useFactory:function wre(){return function ZC(n){uy=n}(document),document},deps:[]}],xre=Kj(Fte,"browser",iV),Ere=new xt(""),rV=[{provide:dE,useClass:class sre{addToWindow(e){hi.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Ge(5103,!1);return s},hi.getAllAngularTestabilities=()=>e.getAllTestabilities(),hi.getAllAngularRootElements=()=>e.getAllRootElements(),hi.frameworkStabilizers||(hi.frameworkStabilizers=[]),hi.frameworkStabilizers.push(i=>{const r=hi.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Jd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Vj,useClass:AI,deps:[mn,SI,dE]},{provide:AI,useClass:AI,deps:[mn,SI,dE]}],sV=[{provide:sy,useValue:"root"},{provide:Ra,useFactory:function bre(){return new Ra},deps:[]},{provide:sD,useClass:gre,multi:!0,deps:[Zn,mn,Ia]},{provide:sD,useClass:yre,multi:!0,deps:[Zn]},ZU,qU,YU,{provide:Lx,useExisting:ZU},{provide:zU,useClass:ore,deps:[]},[]];let Are=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:og,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ere,12))};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({providers:[...sV,...rV],imports:[Qg,kte]})}return n})();typeof window<"u"&&window;let M0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:function(i){let r=null;return r=i?new(i||n):ot(lV),r},providedIn:"root"})}return n})(),lV=(()=>{class n extends M0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Cs.NONE:return i;case Cs.HTML:return nc(i,"HTML")?Ro(i):Cx(this._doc,String(i)).toString();case Cs.STYLE:return nc(i,"Style")?Ro(i):i;case Cs.SCRIPT:if(nc(i,"Script"))return Ro(i);throw new Ge(5200,!1);case Cs.URL:return nc(i,"URL")?Ro(i):mg(String(i));case Cs.RESOURCE_URL:if(nc(i,"ResourceURL"))return Ro(i);throw new Ge(5201,!1);default:throw new Ge(5202,!1)}}bypassSecurityTrustHtml(t){return function fo(n){return new PT(n)}(t)}bypassSecurityTrustStyle(t){return function FT(n){return new Ry(n)}(t)}bypassSecurityTrustScript(t){return function kT(n){return new NT(n)}(t)}bypassSecurityTrustUrl(t){return function BT(n){return new Oy(n)}(t)}bypassSecurityTrustResourceUrl(t){return function _x(n){return new LT(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:function(i){let r=null;return r=i?new i:function Dre(n){return new lV(n.get(Zn))}(ot(Ki)),r},providedIn:"root"})}return n})();const hD={now:()=>(hD.delegate||Date).now(),delegate:void 0};class Nf extends Zt{constructor(e=1/0,t=1/0,i=hD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function Un(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function gD(n,e){return function(t,i){e(t,i,n)}}function Ft(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function eh(n){return this instanceof eh?(this.v=n,this):new eh(n)}function pV(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function _D(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const yD=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function gV(n){return Re(n?.then)}function mV(n){return Re(n[va])}function _V(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function yV(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vV=function qre(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function bV(n){return Re(n?.[vV])}function wV(n){return function fV(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(g){return new Promise(function(m,v){s.push([f,g,m,v])>1||a(f,g)})})}function a(f,g){try{!function c(f){f.value instanceof eh?Promise.resolve(f.value.v).then(l,u):h(s[0][2],f)}(i[f](g))}catch(m){h(s[0][3],m)}}function l(f){a("next",f)}function u(f){a("throw",f)}function h(f,g){f(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield eh(t.read());if(r)return yield eh(void 0);yield yield eh(i)}}finally{t.releaseLock()}})}function xV(n){return Re(n?.getReader)}function _s(n){if(n instanceof St)return n;if(null!=n){if(mV(n))return function Kre(n){return new St(e=>{const t=n[va]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yD(n))return function Jre(n){return new St(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(gV(n))return function Zre(n){return new St(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,it)})}(n);if(_V(n))return EV(n);if(bV(n))return function Qre(n){return new St(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(xV(n))return function ese(n){return EV(wV(n))}(n)}throw yV(n)}function EV(n){return new St(e=>{(function tse(n,e){var t,i,r,s;return function dV(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=pV(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Bu(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ys(n,e,t=1/0){return Re(e)?ys((i,r)=>$t((s,o)=>e(i,s,r,o))(_s(n(i,r))),t):("number"==typeof e&&(t=e),di((i,r)=>function nse(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},g=v=>l<i?m(v):c.push(v),m=v=>{s&&e.next(v),l++;let w=!1;_s(t(v,u++)).subscribe(hn(e,N=>{r?.(N),s?g(N):e.next(N)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const N=c.shift();o?Bu(e,o,()=>m(N)):m(N)}f()}catch(N){e.error(N)}}))};return n.subscribe(hn(e,g,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function LE(n=1/0){return ys(Hs,n)}const Bo=new St(n=>n.complete());function AV(n){return n&&Re(n.schedule)}function vD(n){return n[n.length-1]}function SV(n){return Re(vD(n))?n.pop():void 0}function I0(n){return AV(vD(n))?n.pop():void 0}function CV(n,e=0){return di((t,i)=>{t.subscribe(hn(i,r=>Bu(i,n,()=>i.next(r),e),()=>Bu(i,n,()=>i.complete(),e),r=>Bu(i,n,()=>i.error(r),e)))})}function TV(n,e=0){return di((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function MV(n,e){if(!n)throw new Error("Iterable cannot be null");return new St(t=>{Bu(t,e,()=>{const i=n[Symbol.asyncIterator]();Bu(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Qr(n,e){return e?function dse(n,e){if(null!=n){if(mV(n))return function ose(n,e){return _s(n).pipe(TV(e),CV(e))}(n,e);if(yD(n))return function cse(n,e){return new St(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(gV(n))return function ase(n,e){return _s(n).pipe(TV(e),CV(e))}(n,e);if(_V(n))return MV(n,e);if(bV(n))return function lse(n,e){return new St(t=>{let i;return Bu(t,e,()=>{i=n[vV](),Bu(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Re(i?.return)&&i.return()})}(n,e);if(xV(n))return function use(n,e){return MV(wV(n),e)}(n,e)}throw yV(n)}(n,e):_s(n)}function zc(...n){const e=I0(n),t=function sse(n,e){return"number"==typeof vD(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?_s(i[0]):LE(t)(Qr(i,e)):Bo}function xr(n,e){return di((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(hn(i,c=>{r?.unsubscribe();let l=0;const u=s++;_s(n(c,u)).subscribe(r=hn(i,h=>i.next(e?e(c,h,u,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const FE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return FE.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return FE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let bD;function bse(n,e,t){let i=t;return function fse(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function gse(n,e){if(!bD){const t=Element.prototype;bD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&bD.call(n,e)}(n,r)||(i=s,0))),i}class xse{constructor(e,t){this.componentFactory=t.get(Il).resolveComponentFactory(e)}create(e){return new Ese(this.componentFactory,e)}}class Ese{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Nf(1),this.events=this.eventEmitters.pipe(xr(i=>zc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(mn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=FE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function mse(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Ki.create({providers:[],parent:this.injector}),i=function vse(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],c=bse(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Po),this.implementsOnChanges=function pse(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Df).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe($t(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=FE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Vb(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Ase extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let Cse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Qg]})}return n})();function IV(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function jt(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){IV(s,i,r,o,a,"next",c)}function a(c){IV(s,i,r,o,a,"throw",c)}o(void 0)})}}function D0(n){return(D0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function we(n,e,t){return(e=function Mse(n){var e=function Tse(n,e){if("object"!==D0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==D0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===D0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DV(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function Ll(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||DV()}const RV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ll();class Dse{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";we(this,"storage",void 0),we(this,"id",void 0),we(this,"config",void 0),this.storage=function Ise(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function wD(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let kE;var n;function OV(n){return"string"==typeof n?kE[n.toUpperCase()]||kE.WHITE:n}function BE(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=kE||(kE={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const th={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},jE=th.window||th.self||th.global,R0=th.process||{};function em(){let n;var e,t;if(Ll&&"performance"in jE)n=null==jE||null===(e=jE.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in R0){var i;const r=null==R0||null===(i=R0.hrtime)||void 0===i?void 0:i.call(R0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const tm={debug:Ll&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},kse={enabled:!0,level:0};function uc(){}const PV={},NV={once:!0};class O0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};we(this,"id",void 0),we(this,"VERSION",RV),we(this,"_startTs",em()),we(this,"_deltaTs",em()),we(this,"_storage",void 0),we(this,"userData",{}),we(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Dse("__probe-".concat(this.id,"__"),kse),this.timeStamp("".concat(this.id," started")),function Fse(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((em()-this._startTs).toPrecision(10))}getDelta(){return Number((em()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){BE(e,t)}warn(e){return this._getLogFunction(0,e,tm.warn,arguments,NV)}error(e){return this._getLogFunction(0,e,tm.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,tm.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,tm.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,t,tm.debug||tm.info,arguments,NV)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||uc,i&&[i],{tag:Vse(t)}):uc}image(e){let{logLevel:t,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(t||i)?Ll?function Use(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=wD(s,t,i);console.log(...o)},s.src=e,uc}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...wD(e,t,i)),uc;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...wD(s,t,i)),s.src=e.toDataURL(),uc}return uc}({image:r,message:s,scale:o}):function jse(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),uc}({image:r,message:s,scale:o}):uc}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||uc)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=FV({logLevel:e,message:t,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||uc)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=LV(e)}_getLogFunction(e,t,i,r,s){if(this._shouldLog(e)){s=FV({logLevel:e,message:t,args:r,opts:s}),BE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=em();const o=s.tag||s.message;if(s.once){if(PV[o])return uc;PV[o]=em()}return t=function Bse(n,e,t){if("string"==typeof e){const i=t.time?function Ose(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function Rse(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function Lse(n,e,t){return!Ll&&"string"==typeof n&&(e&&(e=OV(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=OV(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,s.message,s),i.bind(console,t,...s.args)}return uc}}function LV(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return BE(Number.isFinite(e)&&e>=0),e}function FV(n){const{logLevel:e,message:t}=n;n.logLevel=LV(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return BE("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function Vse(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}we(O0,"VERSION",RV);const ui=new O0({id:"deck"}),P0=new class Hse{constructor(e={}){we(this,"_pool",[]),we(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,u=t*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let h=1/0;c&&(h=c*i+s);const f=this._allocate(l,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.opts.poolSize)&&t.splice(s,0,i),t.length>this.opts.poolSize&&t.shift()}},zse=1/Math.PI*180,Gse=1/180*Math.PI,es={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Wse(n,{precision:e=es.precision}={}){return n=function Kse(n){return Math.round(n/es.EPSILON)*es.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function ju(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kV(n){return function Yse(n,e){return Uu(n,t=>t*Gse,e)}(n)}function $se(n){return function Xse(n,e){return Uu(n,t=>t*zse,e)}(n)}function Pr(n,e,t){return Uu(n,i=>Math.max(e,Math.min(t,i)))}function UE(n,e,t){return ju(n)?n.map((i,r)=>UE(i,e[r],t)):t*e+(1-t)*n}function nm(n,e,t){const i=es.EPSILON;t&&(es.EPSILON=t);try{if(n===e)return!0;if(ju(n)&&ju(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!nm(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=es.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{es.EPSILON=i}}function Uu(n,e,t){if(ju(n)){const i=n;t=t||function Jse(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class VE extends(function Zse(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ju(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(es)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+Wse(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!nm(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(es.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function ti(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function HE(n,e,t=""){if(es.debug&&!function Qse(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function jV(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class UV extends VE{get x(){return this[0]}set x(e){this[0]=ti(e)}get y(){return this[1]}set y(e){this[1]=ti(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return ti(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return ti(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return jV(e>=0&&e<this.ELEMENTS,"index is out of range"),ti(this[e])}setComponent(e,t){return jV(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Fl=1e-6,aa=typeof Float32Array<"u"?Float32Array:Array;function VV(){var n=new aa(3);return aa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function HV(n,e,t){var i=new aa(3);return i[0]=n,i[1]=e,i[2]=t,i}function zV(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function zE(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=r*c-s*a,n[1]=s*o-i*c,n[2]=i*a-r*o,n}function xD(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function GV(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,v=i*h-r*u,w=2*t[3];return h*=w,f*=w,m*=2,v*=2,n[0]=a+(u*=w)+(g*=2),n[1]=c+h+m,n[2]=l+f+v,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function WV(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}VV();const ED=[0,0,0];let GE;class mo extends UV{static get ZERO(){return GE||(GE=new mo(0,0,0),Object.freeze(GE)),GE}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&ju(e)?this.copy(e):(es.debug&&(ti(e),ti(t),ti(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return es.debug&&(ti(e.x),ti(e.y),ti(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ti(e)}angle(e){return function loe(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&zV(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return zE(this,this,e),this.check()}rotateX({radians:e,origin:t=ED}){return function ooe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=ED}){return function aoe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=ED}){return function coe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return xD(this,this,e),this.check()}transformAsVector(e){return WV(this,this,e),this.check()}transformByMatrix3(e){return function soe(n,e,t){var i=e[0],r=e[1],s=e[2];n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function foe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return GV(this,this,e),this.check()}}const $V=new mo;function im(n,e,t,i){$V.set(n,e,t);const r=$V.len();return{distance:i/r,normal:new mo(-n/r,-e/r,-t/r)}}function voe(n){return n-Math.fround(n)}let L0;function AD(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,s=(r-i)/t;L0=P0.allocate(L0,s,{type:Float32Array,size:2*t});let o=i,a=0;for(;o<r;){for(let c=0;c<t;c++){const l=n[o++];L0[a+c]=l,L0[a+c+t]=voe(l)}a+=2*t}return L0.subarray(0,s*t*2)}class boe extends VE{toString(){let e="[";if(es.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=ti(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function SD(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],v=e[13],w=e[14],N=e[15],U=t*a-i*o,ce=t*c-r*o,re=t*l-s*o,Me=i*c-r*a,Ne=i*l-s*a,st=r*l-s*c,dt=u*v-h*m,Xe=u*w-f*m,ht=u*N-g*m,vt=h*w-f*v,Ct=h*N-g*v,ft=f*N-g*w,gt=U*ft-ce*Ct+re*vt+Me*ht-Ne*Xe+st*dt;return gt?(n[0]=(a*ft-c*Ct+l*vt)*(gt=1/gt),n[1]=(r*Ct-i*ft-s*vt)*gt,n[2]=(v*st-w*Ne+N*Me)*gt,n[3]=(f*Ne-h*st-g*Me)*gt,n[4]=(c*ht-o*ft-l*Xe)*gt,n[5]=(t*ft-r*ht+s*Xe)*gt,n[6]=(w*re-m*st-N*ce)*gt,n[7]=(u*st-f*re+g*ce)*gt,n[8]=(o*Ct-a*ht+l*dt)*gt,n[9]=(i*ht-t*Ct-s*dt)*gt,n[10]=(m*Ne-v*re+N*U)*gt,n[11]=(h*re-u*Ne-g*U)*gt,n[12]=(a*Xe-o*vt-c*dt)*gt,n[13]=(t*vt-i*Xe+r*dt)*gt,n[14]=(v*ce-m*Me-w*U)*gt,n[15]=(u*Me-h*ce+f*U)*gt,n):null}function Lf(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],v=e[12],w=e[13],N=e[14],U=e[15],ce=t[0],re=t[1],Me=t[2],Ne=t[3];return n[0]=ce*i+re*a+Me*h+Ne*v,n[1]=ce*r+re*c+Me*f+Ne*w,n[2]=ce*s+re*l+Me*g+Ne*N,n[3]=ce*o+re*u+Me*m+Ne*U,n[4]=(ce=t[4])*i+(re=t[5])*a+(Me=t[6])*h+(Ne=t[7])*v,n[5]=ce*r+re*c+Me*f+Ne*w,n[6]=ce*s+re*l+Me*g+Ne*N,n[7]=ce*o+re*u+Me*m+Ne*U,n[8]=(ce=t[8])*i+(re=t[9])*a+(Me=t[10])*h+(Ne=t[11])*v,n[9]=ce*r+re*c+Me*f+Ne*w,n[10]=ce*s+re*l+Me*g+Ne*N,n[11]=ce*o+re*u+Me*m+Ne*U,n[12]=(ce=t[12])*i+(re=t[13])*a+(Me=t[14])*h+(Ne=t[15])*v,n[13]=ce*r+re*c+Me*f+Ne*w,n[14]=ce*s+re*l+Me*g+Ne*N,n[15]=ce*o+re*u+Me*m+Ne*U,n}function WE(n,e,t){var o,a,c,l,u,h,f,g,m,v,w,N,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],v=e[9],w=e[10],N=e[11],n[0]=o=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=u,n[5]=h,n[6]=f,n[7]=g,n[8]=m,n[9]=v,n[10]=w,n[11]=N,n[12]=o*i+u*r+m*s+e[12],n[13]=a*i+h*r+v*s+e[13],n[14]=c*i+f*r+w*s+e[14],n[15]=l*i+g*r+N*s+e[15]),n}function CD(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function YV(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+l*i,n[5]=o*r+u*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-s*i,n[9]=u*r-o*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function XV(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+l*i,n[1]=o*r+u*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-s*i,n[5]=u*r-o*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function $E(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function qV(n,e){return n[0]=-e[0],n[1]=-e[1],n}function KV(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}function JV(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function F0(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}!function Loe(){var n=new aa(2);aa!=Float32Array&&(n[0]=0,n[1]=0)}(),function koe(){var n=new aa(4);aa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var ZV=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(ZV||{});const Joe=45*Math.PI/180,Zoe=1,TD=.1,MD=500,Qoe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Fn extends boe{static get IDENTITY(){return function tae(){return XE||(XE=new Fn,Object.freeze(XE)),XE}()}static get ZERO(){return function eae(){return YE||(YE=new Fn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(YE)),YE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return ZV}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,c,l,u,h,f,g,m,v,w){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=v,this[15]=w,this.check()}setRowMajor(e,t,i,r,s,o,a,c,l,u,h,f,g,m,v,w){return this[0]=e,this[1]=s,this[2]=l,this[3]=g,this[4]=t,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=v,this[12]=r,this[13]=c,this[14]=f,this[15]=w,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Qoe)}fromObject(e){return this.check()}fromQuaternion(e){return function Moe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,c=r+r,l=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,v=s*o,w=s*a,N=s*c;n[0]=1-h-m,n[1]=u+N,n[2]=f-w,n[3]=0,n[4]=u-N,n[5]=1-l-m,n[6]=g+v,n[7]=0,n[8]=f+w,n[9]=g-v,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:s,near:o=TD,far:a=MD}=e;return a===1/0?function nae(n,e,t,i,r,s){const a=2*s/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*s;n[0]=2*s/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,s,o):function Ioe(n,e,t,i,r,s,o){var a=1/(t-e),c=1/(r-i),l=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(o+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*l,n[15]=0}(this,t,i,r,s,o,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Noe(n,e,t,i){var r,s,o,a,c,l,u,h,f,g,m=e[0],v=e[1],w=e[2],N=i[0],U=i[1],ce=i[2],re=t[0],Me=t[1],Ne=t[2];Math.abs(m-re)<Fl&&Math.abs(v-Me)<Fl&&Math.abs(w-Ne)<Fl?function woe(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-re,h=v-Me,f=w-Ne,r=U*(f*=g=1/Math.hypot(u,h,f))-ce*(h*=g),s=ce*(u*=g)-N*f,o=N*h-U*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,c=f*r-u*o,l=u*s-h*r,(g=Math.hypot(a,c,l))?(a*=g=1/g,c*=g,l*=g):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=c,n[6]=h,n[7]=0,n[8]=o,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*m+s*v+o*w),n[13]=-(a*m+c*v+l*w),n[14]=-(u*m+h*v+f*w),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:s,near:o=TD,far:a=MD}=e;return function Ooe(n,e,t,i,r,s,o){var a=1/(e-t),c=1/(i-r),l=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(o+s)*l,n[15]=1}(this,t,i,r,s,o,a),this.check()}orthographic(e){const{fovy:t=Joe,aspect:i=Zoe,focalDistance:r=1,near:s=TD,far:o=MD}=e;QV(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return QV(t),function Doe(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,s),this.check()}determinant(){return function Eoe(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8],u=n[9],h=n[10],f=n[11],g=n[12],m=n[13],v=n[14],w=n[15];return(e*o-t*s)*(h*w-f*v)-(e*a-i*s)*(u*w-f*m)+(e*c-r*s)*(u*v-h*m)+(t*a-i*o)*(l*w-f*g)-(t*c-r*o)*(l*v-h*g)+(i*c-r*a)*(l*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function xoe(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return SD(this,this),this.check()}multiplyLeft(e){return Lf(this,e,this),this.check()}multiplyRight(e){return Lf(this,this,e),this.check()}rotateX(e){return YV(this,this,e),this.check()}rotateY(e){return function Soe(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-l*i,n[1]=o*r-u*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=s*i+l*r,n[9]=o*i+u*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return XV(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function Aoe(n,e,t,i){var c,l,u,h,f,g,m,v,w,N,U,ce,re,Me,Ne,st,dt,Xe,ht,vt,Ct,ft,gt,Pt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Fl||(r*=a=1/a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],g=e[2],m=e[3],w=e[5],N=e[6],U=e[7],re=e[9],Me=e[10],Ne=e[11],ht=r*s*(u=1-l)-o*c,vt=s*s*u+l,Ct=o*s*u+r*c,ft=r*o*u+s*c,gt=s*o*u-r*c,Pt=o*o*u+l,n[0]=(h=e[0])*(st=r*r*u+l)+(v=e[4])*(dt=s*r*u+o*c)+(ce=e[8])*(Xe=o*r*u-s*c),n[1]=f*st+w*dt+re*Xe,n[2]=g*st+N*dt+Me*Xe,n[3]=m*st+U*dt+Ne*Xe,n[4]=h*ht+v*vt+ce*Ct,n[5]=f*ht+w*vt+re*Ct,n[6]=g*ht+N*vt+Me*Ct,n[7]=m*ht+U*vt+Ne*Ct,n[8]=h*ft+v*gt+ce*Pt,n[9]=f*ft+w*gt+re*Pt,n[10]=g*ft+N*gt+Me*Pt,n[11]=m*ft+U*gt+Ne*Pt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return CD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return WE(this,this,e),this.check()}transform(e,t){return 4===e.length?(HE(t=F0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function Foe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=xD(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return HE(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function hoe(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:i=WV(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return HE(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let YE,XE;function QV(n){if(n>2*Math.PI)throw Error("expected radians")}function rm(n,e){const t=F0([],e,n);return JV(t,t,1/t[3]),t}function eH(n,e){const t=n%e;return t<0?e+t:t}function ID(n,e,t){return n<e?e:n>t?t:n}const DD=Math.log2||function rae(n){return Math.log(n)*Math.LOG2E};function Vu(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Gc=Math.PI,tH=Gc/4,dc=Gc/180,RD=180/Gc,sm=512,qE=4003e4,KE=85.051129,sae=1.5;function JE(n){const[e,t]=n;return Vu(Number.isFinite(e)),Vu(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[sm*(e*dc+Gc)/(2*Gc),sm*(Gc+Math.log(Math.tan(tH+t*dc*.5)))/(2*Gc)]}function om(n){const[e,t]=n,i=e/sm*(2*Gc)-Gc,r=2*(Math.atan(Math.exp(t/sm*(2*Gc)-Gc))-tH);return[i*RD,r*RD]}function OD(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Vu(Number.isFinite(e)&&Number.isFinite(t));const r=sm,s=Math.cos(e*dc),o=r/360,a=o/s,c=r/qE/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const u=dc*Math.tan(e*dc)/s,f=r/qE*u,g=f/a*c;l.unitsPerDegree2=[0,o*u/2,f],l.unitsPerMeter2=[g,0,g]}return l}function nH(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=OD({longitude:t,latitude:i,highPrecision:!0}),u=JE(n);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const h=om(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function ZE(n){return 2*Math.atan(.5/n)*RD}function PD(n){return.5/Math.tan(.5*n*dc)}function rH(n,e){const[t,i,r=0]=n;return Vu(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),rm(e,[t,i,r,1])}function k0(n,e,t=0){const[i,r,s]=n;if(Vu(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return rm(e,[i,r,s,1]);const o=rm(e,[i,r,0,1]),a=rm(e,[i,r,1,1]),c=o[2],l=a[2];return KV([],o,a,c===l?0:((t||0)-c)/(l-c))}function sH(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=n,[[a,c],[l,u]]=i,h=function lae(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Vu(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=JE([a,ID(u,-KE,KE)]),g=JE([l,ID(c,-KE,KE)]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],v=[e-h.left-h.right-2*Math.abs(o[0]),t-h.top-h.bottom-2*Math.abs(o[1])];Vu(v[0]>0&&v[1]>0);const w=v[0]/m[0],N=v[1]/m[1],Me=om([(g[0]+f[0])/2+(h.right-h.left)/2/w,(g[1]+f[1])/2+(h.top-h.bottom)/2/N]),Ne=Math.min(s,DD(Math.abs(Math.min(w,N))));return Vu(Number.isFinite(Ne)),{longitude:Me[0],latitude:Me[1],zoom:Ne}}const oH=Math.PI/180;function aH(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=rm(i,[e,0,1,1]),s=rm(i,[e,n.height,1,1]),l=om(KV([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(t),l}const bi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(bi,"IDENTITY",{get:()=>(ui.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const kl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},QE={common:0,meters:1,pixels:2},hH={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},fae=Math.PI/180,pae=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fH=[0,0,0],gae={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class nh{constructor(e={}){we(this,"id",void 0),we(this,"x",void 0),we(this,"y",void 0),we(this,"width",void 0),we(this,"height",void 0),we(this,"padding",void 0),we(this,"isGeospatial",void 0),we(this,"zoom",void 0),we(this,"focalDistance",void 0),we(this,"position",void 0),we(this,"modelMatrix",void 0),we(this,"distanceScales",void 0),we(this,"scale",void 0),we(this,"center",void 0),we(this,"cameraPosition",void 0),we(this,"projectionMatrix",void 0),we(this,"viewMatrix",void 0),we(this,"viewMatrixUncentered",void 0),we(this,"viewMatrixInverse",void 0),we(this,"viewProjectionMatrix",void 0),we(this,"pixelProjectionMatrix",void 0),we(this,"pixelUnprojectionMatrix",void 0),we(this,"resolution",void 0),we(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||gae,this.focalDistance=e.focalDistance||1,this.position=e.position||fH,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?kl.WEB_MERCATOR:kl.WEB_MERCATOR_AUTO_OFFSET:kl.IDENTITY}equals(e){return e instanceof nh&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&nm(e.projectionMatrix,this.projectionMatrix)&&nm(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=rH(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,s,o]=e,l=k0([r,t?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[u,h,f]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=JE(e);return t[1]=Pr(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?om(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),s=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?OD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function yoe(n){return{left:im(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:im(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:im(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:im(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:im(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:im(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function aae(n){const{latitude:e}=n;Vu(Number.isFinite(e));const t=Math.cos(e*dc);return function oae(n){return DD(n)}(qE*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||OD({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=fH;if(s&&(a=o?new Fn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new mo(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=pae,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Fn).multiplyRight(t).translate(new mo(this.center).negate()),this.projectionMatrix=i||function mae({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=n/e,l=t?(new Fn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new Fn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Pr((u+n-h)/2,0,n)-n/2,v=Pr((f+e-g)/2,0,e)-e/2;l[8]-=2*m/n,l[9]+=2*v/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*fae,focalDistance:u,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Lf(h,h,this.projectionMatrix),Lf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=SD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function _oe(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];CD(f,f,[this.width/2,-this.height/2,1]),WE(f,f,[1,-1,0]),Lf(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=SD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ui.warn("Pixel project matrix not invertible")()}}we(nh,"displayName","Viewport");const _ae=/([0-9]+\.?[0-9]*)(%|px)/;function ih(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=_ae.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function rh(n,e){return n.relative?Math.round(n.position*e):n.position}function am(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&am(i,r)))return!1}return!0}function qs(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}class LD{constructor(e){we(this,"id",void 0),we(this,"viewportInstance",void 0),we(this,"_x",void 0),we(this,"_y",void 0),we(this,"_width",void 0),we(this,"_height",void 0),we(this,"_padding",void 0),we(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};qs(!c||c instanceof nh),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=ih(i),this._y=ih(r),this._width=ih(s),this._height=ih(o),this._padding=a&&{left:ih(a.left||0),right:ih(a.right||0),top:ih(a.top||0),bottom:ih(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&am(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:rh(this._x,e),y:rh(this._y,t),width:rh(this._width,e),height:rh(this._height,t)};return this._padding&&(i.padding={left:rh(this._padding.left,e),top:rh(this._padding.top,t),right:rh(this._padding.right,e),bottom:rh(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const yae=(new Fn).lookAt({eye:[0,0,1]});function vae({width:n,height:e,near:t,far:i,padding:r}){let s=-n/2,o=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:u=0,top:h=0,bottom:f=0}=r,g=Pr((l+n-u)/2,0,n)-n/2,m=Pr((h+e-f)/2,0,e)-e/2;s-=g,o-=g,a+=m,c+=m}return(new Fn).ortho({left:s,right:o,bottom:a,top:c,near:t,far:i})}class bae extends nh{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(u,h),g=Math.pow(2,f);let m;if(u!==h){const v=Math.pow(2,u),w=Math.pow(2,h);m={unitsPerMeter:[v/g,w/g,1],metersPerUnit:[g/v,g/w,1]}}super({...e,longitude:void 0,position:a,viewMatrix:yae.clone().scale([g,g*(l?-1:1),g]),projectionMatrix:vae({width:t||1,height:i||1,padding:c,near:r,far:s}),zoom:f,distanceScales:m})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=k0(t,this.pixelUnprojectionMatrix),s=$E([],this.projectFlat(e),qV([],i)),o=$E([],this.center,s);return{target:this.unprojectFlat(o)}}}class j0{constructor(e){we(this,"_inProgress",void 0),we(this,"_handle",void 0),we(this,"_timeline",void 0),we(this,"time",void 0),we(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const pH=()=>{},wae=n=>n;class Eae{constructor(e){we(this,"getControllerState",void 0),we(this,"props",void 0),we(this,"propsInTransition",void 0),we(this,"transition",void 0),we(this,"onViewStateChange",void 0),we(this,"onStateChange",void 0),we(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=t,l=c(i/a),u=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new j0(e.timeline),this.onViewStateChange=e.onViewStateChange||pH,this.onStateChange=e.onStateChange||pH}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),s=t.transitionInterpolator,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:t.transitionEasing||wae,interpolator:s,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class Aae{constructor(e){we(this,"_propsToCompare",void 0),we(this,"_propsToExtract",void 0),we(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!nm(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const s of this._propsToExtract)(s in e||s in t)&&(i[s]=e[s],r[s]=t[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];qs(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const Sae=["longitude","latitude","zoom","bearing","pitch"],Cae=["longitude","latitude","zoom"];class e1 extends Aae{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Sae,required:Cae},super(i.transitionProps),we(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=UE(e[s]||0,t[s]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...t,...r});Object.assign(r,s.panByPosition(t.aroundPosition,UE(e.around,t.around,i)))}return r}}const sh={transitionDuration:0},t1=n=>1-(1-n)*(1-n),cm_WHEEL=["wheel"],cm_PAN=["panstart","panmove","panend"],cm_PINCH=["pinchstart","pinchmove","pinchend"],cm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],cm_DOUBLE_TAP=["doubletap"],cm_KEYBOARD=["keydown"],Ff={};class kD{constructor(e){we(this,"props",void 0),we(this,"state",{}),we(this,"transitionManager",void 0),we(this,"eventManager",void 0),we(this,"onViewStateChange",void 0),we(this,"onStateChange",void 0),we(this,"makeViewport",void 0),we(this,"_controllerState",void 0),we(this,"_events",{}),we(this,"_interactionState",{isDragging:!1}),we(this,"_customEvents",[]),we(this,"_eventStartBlocked",null),we(this,"_panMove",!1),we(this,"invertPan",!1),we(this,"dragMode","rotate"),we(this,"inertia",0),we(this,"scrollZoom",!0),we(this,"dragPan",!0),we(this,"dragRotate",!0),we(this,"doubleClickZoom",!0),we(this,"touchZoom",!0),we(this,"touchRotate",!1),we(this,"keyboard",!0),this.transitionManager=new Eae({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(cm_WHEEL,u&&i),this.toggleEvents(cm_PAN,u&&(r||s)),this.toggleEvents(cm_PINCH,u&&(a||c)),this.toggleEvents(cm_TRIPLE_PAN,u&&c),this.toggleEvents(cm_DOUBLE_TAP,u&&o),this.toggleEvents(cm_KEYBOARD,u&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,sh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,sh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:t1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,sh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:t1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,sh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,sh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:t1},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Ff._startPinchRotation=e.rotation,Ff._lastPinchEvent=e,this.updateViewport(i,sh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:Ff._startPinchRotation-i})}return this.updateViewport(t,sh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ff._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=Ff;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:t1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ff._startPinchRotation=null,Ff._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new e1({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:sh}}class gH{constructor(e,t){we(this,"_viewportProps",void 0),we(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class mH extends gH{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:v,startZoomPosition:w,startZoom:N}=e;super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:h},{startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:v,startZoomPosition:w,startZoom:N}),we(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),Pr(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Pr(r[0],i,t),Pr(r[1],i,t)]:Pr(r,i,t),e.rotationX=Pr(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function moe(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class Mae extends kD{constructor(...e){super(...e),we(this,"ControllerState",mH),we(this,"transition",{transitionDuration:300,transitionInterpolator:new e1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Iae extends mH{constructor(e){super(e),we(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(t)){let[o,a]=t;switch(this.zoomAxis){case"X":o=Pr(o+s,r,i);break;case"Y":a=Pr(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return Pr(t+s,r,i)}}class Dae extends kD{constructor(...e){super(...e),we(this,"ControllerState",Iae),we(this,"transition",{transitionDuration:300,transitionInterpolator:new e1(["target","zoom"])}),we(this,"dragMode","pan")}_onPanRotate(){return!1}}class BD extends LD{get ViewportType(){return bae}get ControllerType(){return Dae}}we(BD,"displayName","OrthographicView");const jD=Math.PI/180;function Rae({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Fn).lookAt({eye:a,up:o});c.rotateX(i*jD),"Z"===t?c.rotateZ(r*jD):c.rotateY(r*jD);const l=Math.pow(2,s)/n;return c.scale(l),c}class Oae extends nh{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=i?i[5]/2:PD(r);super({...e,longitude:void 0,viewMatrix:Rae({height:t||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:u,position:o,zoom:l}),we(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,c,l]=k0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class _H extends LD{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Oae}get ControllerType(){return Mae}}we(_H,"displayName","OrbitView");const U0="vs";function Na(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const VD={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Nae(n){let e=yH(n);return"object"===e?n?"type"in n?Object.assign({},n,VD[n.type]):"value"in n?(e=yH(n.value),Object.assign({type:e},n,VD[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},VD[e])}function yH(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class HD{constructor(e){let{name:t,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:h,fragmentShader:f}=e;Na("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function kae(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(u),o&&(this.uniforms=function Pae(n){const e={};for(const t in n){const r=Nae(n[t]);e[t]=r}return e}(o))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Na(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Na(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=s.value}return t}}function Bae(n){return function vH(n){const e={},t={};return zD({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(bH(n))}function zD(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<t)&&(r[s.name]=t);for(const s of e)s.dependencies&&zD({modules:s.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function bH(n,e){return n.map(t=>(t instanceof HD||(Na("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Na(t.name,"shader module has no name"),(t=new HD(t)).dependencies=bH(t.dependencies)),t))}const Uae=7936,Vae=7937,Hae=7938,zae=35724,GD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},kf={};function $ae(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(GD).forEach(n=>{kf[n]=n});const WD={};function wH(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=GD[e];if(Na(i,e),!function jae(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in WD)return WD[e];const s=t.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),WD[e]=c,c}function n1(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function Yae(n,e){const t=GD[e];Na(t,e);const i=function Gae(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return Na(!1===r||!0===r),r}(n,t))}const Zae={[U0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},r1="__LUMA_INJECT_DECLARATIONS__",xH=/void\s+main\s*\([^)]*\)\s*\{\n?/,EH=/}\n?[^{}]*$/,$D=[];function AH(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===U0;for(const s in t){const o=t[s];o.sort((c,l)=>c.order-l.order),$D.length=o.length;for(let c=0,l=o.length;c<l;++c)$D[c]=o[c].injection;const a="".concat($D.join("\n"),"\n");switch(s){case"vs:#decl":r&&(n=n.replace(r1,a));break;case"vs:#main-start":r&&(n=n.replace(xH,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(EH,c=>a+c));break;case"fs:#decl":r||(n=n.replace(r1,a));break;case"fs:#main-start":r||(n=n.replace(xH,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(EH,c=>a+c));break;default:n=n.replace(s,c=>c+a)}}return n=n.replace(r1,""),i&&(n=n.replace(/\}\s*$/,s=>s+Zae[e])),n}function YD(n){const e={};return Na(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}function lm(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const SH=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Qae=[...SH,[lm("attribute"),"in $1"],[lm("varying"),"out $1"]],ece=[...SH,[lm("varying"),"in $1"]],CH=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],tce=[...CH,[lm("in"),"attribute $1"],[lm("out"),"varying $1"]],nce=[...CH,[lm("in"),"varying $1"]],XD="gl_FragColor",qD=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ice=/void\s+main\s*\([^)]*\)\s*\{\n?/;function s1(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const ace="\n\n".concat(r1,"\n\n"),TH={[U0]:"vertex",fs:"fragment"};function MH(n,e){let{id:t,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:h}=e;Na("string"==typeof i,"shader source must be a string");const f=r===U0,g=i.split("\n");let m=100,v="",w=i;0===g[0].indexOf("#version ")?(m=300,v=g[0],w=g.slice(1).join("\n")):v="#version ".concat(m);const N={};s.forEach(st=>{Object.assign(N,st.getDefines())}),Object.assign(N,o);let U=u?"".concat(v,"\n").concat(function hce(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(TH[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function dce(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(TH[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Xae(n){switch(function Wae(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Uae),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Vae);return{gpuVendor:$ae(t,i),vendor:t,renderer:i,version:n.getParameter(Hae),shadingLanguageVersion:n.getParameter(zae)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function qae(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return n1(n,kf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),n1(n,kf.GLSL_DERIVATIVES)&&wH(n,kf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),n1(n,kf.GLSL_FRAG_DATA)&&wH(n,kf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),n1(n,kf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function fce(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(N),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(v,"\n");const ce=function gce(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),re={},Me={},Ne={};for(const st in c){const dt="string"==typeof c[st]?{injection:c[st],order:0}:c[st],Xe=st.match(/^(v|f)s:(#)?([\w-]+)$/);Xe?Xe[2]?"decl"===Xe[3]?Me[st]=[dt]:Ne[st]=[dt]:re[st]=[dt]:Ne[st]=[dt]}for(const st of s){h&&st.checkDeprecations(w,h),U+=st.getModuleSource(r,m);const Xe=st.injections[r];for(const ht in Xe){const vt=ht.match(/^(v|f)s:#([\w-]+)$/);if(vt){const ft="decl"===vt[2]?Me:Ne;ft[ht]=ft[ht]||[],ft[ht].push(Xe[ht])}else re[ht]=re[ht]||[],re[ht].push(Xe[ht])}}return U+=ace,U=AH(U,r,Me),U+=function pce(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+="  ".concat(o.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(ce[r],re),U+=w,U=AH(U,r,Ne),U=function rce(n,e,t){switch(e){case 300:return t?s1(n,Qae):function sce(n){const e=(n=s1(n,ece)).match(qD);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(XD,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(ice,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(XD,"\\b"),"g"),t)}return n}(n);case 100:return t?s1(n,tce):function oce(n){const e=(n=s1(n,nce)).match(qD);if(e){const t=e[1];n=n.replace(qD,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),XD)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(U,l?100:m,f),U}function uce(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const an=new O0({id:"luma.gl"});function jo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const _ce="Requires WebGL2";function o1(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function ni(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function a1(n){return jo(o1(n),"Invalid WebGLRenderingContext"),n}function _o(n){return jo(ni(n),_ce),n}const V0={};const H0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(H0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Bf=function(e){const t=this;this.gl=e,function xce(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(V0[i]=!0)}while(0!==i);for(i in V0)if(V0[i])return delete V0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=t.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function bce(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Bf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Bf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new H0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Bf.prototype.createVertexArrayOES=function(){const e=new H0(this);return this.vertexArrayObjects.push(e),e},Bf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Bf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof H0&&e.hasBeenBound&&e.ext===this)},Bf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function wce(n,e){V0[n]=!0,void 0!==e&&function vce(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=r?r.attribs[c]:null;if((!r||l.enabled!==u.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==u.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==u.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const IH="OES_element_index",DH="WEBGL_draw_buffers",RH="WEBGL_debug_renderer_info",_r=n=>ni(n)?void 0:0,Pce={3074:n=>ni(n)?void 0:36064,35723:n=>ni(n)?void 0:4352,35977:_r,32937:_r,36795:(n,e)=>{const t=ni(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(RH);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(RH);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:_r,35071:_r,37447:_r,36063:(n,e)=>{if(!ni(n)){const t=n.getExtension(DH);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:_r,35374:_r,35377:_r,34852:n=>{if(!ni(n)){const e=n.getExtension(DH);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(IH)?2147483647:65535,33001:n=>n.getExtension(IH)?16777216:65535,33e3:n=>16777216,37157:_r,35373:_r,35657:_r,36183:_r,37137:_r,34045:_r,35978:_r,35979:_r,35968:_r,35376:_r,35375:_r,35659:_r,37154:_r,35371:_r,35658:_r,35076:_r,35077:_r,35380:_r},OH="ANGLE_instanced_arrays",PH={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{jo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[OH]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){jo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{jo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{jo(!1)},deleteQuery:()=>{jo(!1)},beginQuery:()=>{jo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},KD={readBuffer:(n,e,t)=>{ni(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function Uce(n,e){return{webgl2:ni(n),ext:n.getExtension(e)}}(n,OH);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!ni(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>ni(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function Nce(n,e,t){const i=Pce[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function Wce(n,e){let{extension:t,target:i,target2:r}=e;const s=PH[t];jo(s);const{meta:o={}}=s,{suffix:a=""}=o,c=n.getExtension(t);for(const l of Object.keys(s)){const u="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[u]?h=function(){return c[u](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Vce(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function Ece(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Bf(this)),this.__OESVertexArrayObject))}}(n),function Hce(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function Gce(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&Wce(n,{extension:t,target:n.luma,target2:n})}(n,PH),function zce(n,e){let{target:t,target2:i}=e;Object.keys(KD).forEach(r=>{if("function"==typeof KD[r]){const s=n[r]?n[r].bind(n):()=>{},o=KD[r].bind(null,n,s);t[r]=o,i[r]=o}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const JD={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},oh=(n,e,t)=>e?n.enable(t):n.disable(t),NH=(n,e,t)=>n.hint(t,e),La=(n,e,t)=>n.pixelStorei(t,e);function z0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Xce={3042:oh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:oh,2885:(n,e)=>n.cullFace(e),2929:oh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:oh,35723:NH,36006:(n,e)=>{const t=ni(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:NH,2849:(n,e)=>n.lineWidth(e),32823:oh,32824:"polygonOffset",10752:"polygonOffset",35977:oh,32938:"sampleCoverage",32939:"sampleCoverage",3089:oh,3088:(n,e)=>n.scissor(...e),2960:oh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:La,3317:La,37440:La,37441:La,37443:La,3330:La,3332:La,3331:La,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:La,32878:La,3316:La,3315:La,32877:La,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=z0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=z0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=z0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=z0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=z0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function Vr(n,e,t){return void 0!==e[n]?e[n]:t[n]}const qce={blendEquation:(n,e,t)=>n.blendEquationSeparate(Vr(32777,e,t),Vr(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Vr(32969,e,t),Vr(32968,e,t),Vr(32971,e,t),Vr(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Vr(32824,e,t),Vr(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Vr(32938,e,t),Vr(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Vr(2962,e,t),Vr(2967,e,t),Vr(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Vr(34816,e,t),Vr(36003,e,t),Vr(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Vr(2964,e,t),Vr(2965,e,t),Vr(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Vr(34817,e,t),Vr(34818,e,t),Vr(34819,e,t))},LH={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Bl=(n,e)=>n.isEnabled(e),FH={3042:Bl,2884:Bl,2929:Bl,3024:Bl,32823:Bl,32926:Bl,32928:Bl,3089:Bl,2960:Bl,35977:Bl};function kH(n){for(const e in n)return!1;return!0}function Kce(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function BH(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Jce(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Qce{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function tle(n,e){if("number"==typeof(e=e||JD)){const r=e,s=FH[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=FH[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},JD),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){jo(this.stateStack.length>0),Hu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){jo(void 0!==s);const o=e[s],a=this.cache[s];Kce(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function jH(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(jo(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new Qce(n,{copyState:i}),function Zce(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in LH)Jce(n,s,LH[s]);BH(n,"getParameter"),BH(n,"isEnabled")}return n.state.enable=t,n}function UH(n){jo(n.state),n.state.pop()}function Hu(n,e){if(jo(o1(n),"setParameters requires a WebGL context"),kH(e))return;const t={};for(const r in e){const s=Number(r),o=Xce[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,qce[r])(n,e,i)}function hc(n,e,t){if(kH(e))return t(n);const{nocatch:i=!0}=e;let r;if(function ele(n){n.state||jH(n,{copyState:!1}),n.state.push()}(n),Hu(n,e),i)r=t(n),UH(n);else try{r=t(n)}finally{UH(n)}return r}function um(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function ZD(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function rle(n,e,t,i,r){const s=VH(n[0],e,t);let o=HH(n[1],e,i,r),a=VH(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=HH(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,um(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function VH(n,e,t){return Math.min(Math.round(n*e),t-1)}function HH(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const QD=Ll(),sle=QD&&typeof document<"u",zH={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function GH(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jo(QD,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},zH,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function lle(n){let s,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(sle&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:t,onError:i});return r=function cle(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,n),r?(r=eR(r,n),function ule(n){const e=ni(n)?"WebGL2":"WebGL1",t=function ole(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";an.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function eR(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function dle(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},zH,e);const{manageState:t,debug:i}=e;return t&&jH(n,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return an.log(1,...s)()}}),QD&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),an.level=Math.max(an.level,1)):an.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function WH(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class $H{constructor(e,t){we(this,"name",void 0),we(this,"type",void 0),we(this,"sampleSize",1),we(this,"time",void 0),we(this,"count",void 0),we(this,"samples",void 0),we(this,"lastTiming",void 0),we(this,"lastSampleTime",void 0),we(this,"lastSampleCount",void 0),we(this,"_count",0),we(this,"_time",0),we(this,"_samples",0),we(this,"_startTime",0),we(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=WH(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(WH()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class tR{constructor(e){we(this,"id",void 0),we(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof $H?e:new $H(t,i)),this.stats[t]}}const G0="8.5.21",jf=new class ple{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new tR({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==G0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(G0));function Xt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function nR(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return Xt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function ah(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(Ll()&&an.log(1,"luma.gl ".concat(G0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:G0,version:G0,log:an,stats:jf,globals:{modules:{},nodeIO:{}}}),globalThis;const iR={};function ca(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";iR[n]=iR[n]||1;const e=iR[n]++;return"".concat(n,"-").concat(e)}function YH(n){return Xt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function dm(n){let e=!0;for(const t in n){e=!1;break}return e}function XH(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw an.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const hm="Resource subclass must define virtual methods";class zu{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a1(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||ca(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt(e=nR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ni(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=ni(this.gl),o={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?ah(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=ah(this.gl,o[h]))}}return o}setParameter(e,t){Xt(e=nR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ni(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=nR(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return XH(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(hm)}_deleteHandle(){throw new Error(hm)}_bindHandle(e){throw new Error(hm)}_getOptsFromHandle(){throw new Error(hm)}_getParameter(e,t){throw new Error(hm)}_setParameter(e,t){throw new Error(hm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=jf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];jf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=jf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=jf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const gle="Failed to deduce GL constant from typed array";function rR(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(gle)}}function W0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function _le(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:o,width:r,height:s}}function sR(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";an.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];an.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];an.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const yle={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},vle={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class la{static getBytesPerElement(e){return W0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Xt(e.size),W0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new la(yle,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return la.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return la.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=sR("Accessor",e,vle),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const KH={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},ble={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:KH},wle={removedProps:KH};class Ji extends zu{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/la.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/la.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=sR("Buffer",e,ble),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=sR("Buffer",e,wle))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new la(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;Xt(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(_o(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return _o(o),o.bindBuffer(36662,t.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_o(this.gl);const s=W0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const u=Math.min(o,c);return r=r||u,Xt(r<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(Xt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Xt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=rR(e);return Xt(s),this.setAccessor(new la(this.accessor,{type:s})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Xt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/W0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new la(this.accessor,{type:rR(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return an.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return an.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return an.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return an.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new la(this.accessor,e),this}}const oR={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},JH={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},ZH={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Ale=[9729,9728],QH=globalThis.WebGLBuffer||function(){};class Uf extends zu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function xle(n,e){const t=oR[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=ni(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function Ele(n,e){const t=oR[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=ca("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(U=>this.initialize(Object.assign({},e,{pixels:U,data:U}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;t||(t=r);let{width:h,height:f,dataFormat:g,type:m,compressed:v=!1,mipmaps:w=!0}=e;const{depth:N=0}=e;return({width:h,height:f,compressed:v,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:v,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=N,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),w&&this._isNPOT()&&(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(c)),this.mipmaps=w,this.setImageData({data:t,width:h,height:f,depth:N,format:s,type:m,dataFormat:g,border:o,mipmaps:w,parameters:l,compressed:v}),w&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),hc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;l||(l=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:l,width:h,height:f}));const{gl:v}=this;v.bindTexture(this.target,this.handle);let w=null;({data:l,dataType:w}=this._getDataType({data:l,compressed:m}));let N,U=0;return hc(this.gl,c,()=>{switch(w){case"null":v.texImage2D(t,r,s,h,f,o,g,u,l);break;case"typed-array":v.texImage2D(t,r,s,h,f,o,g,u,l,a);break;case"buffer":N=_o(v),N.bindBuffer(35052,l.handle||l),N.texImage2D(t,r,s,h,f,o,g,u,a),N.bindBuffer(35052,null);break;case"browser-object":ni(v)?v.texImage2D(t,r,s,h,f,o,g,u,l):v.texImage2D(t,r,s,g,u,l);break;case"compressed":for(const[ce,re]of l.entries())v.compressedTexImage2D(t,ce,re.format,re.width,re.height,o,re.data),U+=re.levelSize;break;default:Xt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===w?U:l&&l.byteLength?l.byteLength:this.width*this.height*(JH[this.dataFormat]||4)*(ZH[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:v=this.border,parameters:w={}}=e;if(({type:h,dataFormat:f,compressed:g,width:a,height:c}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:r,width:a,height:c})),Xt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const N=r;r=N.data,a=N.shape[0],c=N.shape[1]}r instanceof Ji&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),hc(this.gl,w,()=>{if(g)this.gl.compressedTexSubImage2D(t,l,s,o,a,c,u,r);else if(null===r)this.gl.texSubImage2D(t,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,s,o,a,c,f,h,r,m);else if(r instanceof QH){const N=_o(this.gl);N.bindBuffer(35052,r),N.texSubImage2D(t,l,s,o,a,c,f,h,m),N.bindBuffer(35052,null)}else ni(this.gl)?_o(this.gl).texSubImage2D(t,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(t,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return an.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Ji?{data:t.handle,dataType:"buffer"}:t instanceof QH?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=oR[t];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},Xt(r,"Could not deduced texture size"),Xt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Xt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Xt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ni(this.gl)||!this.width||!this.height||YH(this.width)&&YH(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Ale.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Sle(n,e){return Xt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Ks extends Uf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Uf.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a1(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Sle(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Vf="EXT_color_buffer_float",e4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Vf,bpp:2},33327:{gl2:Vf,bpp:4},34842:{gl2:Vf,bpp:8},33326:{gl2:Vf,bpp:4},33328:{gl2:Vf,bpp:8},34836:{gl2:Vf,bpp:16},35898:{gl2:Vf,bpp:4}};class fm extends zu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function Cle(n,e,t){const i=t[e];if(!i)return!1;const r=ni(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,e4)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:s=0}=e;return Xt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&ni(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*e4[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const t4=6144,s4="clear: bad arguments";function cR(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),Xt(0!==o,s4),hc(n,s,()=>{n.clear(o)})}const lR=[34069,34070,34071,34072,34073,34074];let Ole=(()=>{class n extends Uf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a1(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return jt(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t;const{gl:h}=i,f=o||a,g=yield Promise.all(lR.map(m=>{const v=f[m];return Promise.all(Array.isArray(v)?v:[v])}));i.bind(),lR.forEach((m,v)=>{g[v].length>1&&!1!==i.opts.mipmaps&&an.warn("".concat(i.id," has mipmap and multiple LODs."))(),g[v].forEach((w,N)=>{r&&s?h.texImage2D(m,N,l,r,s,c,l,u,w):h.texImage2D(m,N,l,l,u,w)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,u,f):h.texImage2D(i,0,l,l,u,f),this}}return n.FACES=lR,n})();class Ple extends Uf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return ni(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_o(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:u=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),hc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,h),h instanceof Ji&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,u))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(JH[this.dataFormat]||4)*(ZH[this.type]||1),"Texture"),this.loaded=!0,this}}function Lle(n,e){const{gl:t,width:i,height:r,id:s}=n;return new vs(t,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:n}}))}function c1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=$0(n);Xt(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,c=c||u.height,36064===s&&null===g&&(s=1028),Xt(m[s]),l=l||m[s].type,o=function kle(n,e,t,i,r){if(n)return n;const s=W0(e=e||5121,{clamped:!1}),o=function Rle(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Xt(!1),0}}(t);return new s(i*r*o)}(o,l,r,a,c),l=l||rR(o);const v=f.bindFramebuffer(36160,g);return f.readPixels(t,i,a,c,r,l,o),f.bindFramebuffer(36160,v||null),h&&u.delete(),o}function uR(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=c1(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=_le({data:i,width:r,height:s}));!function mle(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:s}=n;const o=t*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function $0(n){return n instanceof vs?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Lle(n),deleteFramebuffer:!0}}const o4={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Ble(n){const e=new Ks(n,{format:6408,type:5126,dataFormat:6408}),t=new vs(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},jle=2;function dR(n,e){return a4(n,e)}function a4(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>c4(n,t))}function c4(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function Vle(n,e){const t=o4[e];let i;Xt(t,e);const r=ni(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!n.getExtension(s)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:Xt(!1);return i}(n,e)),n.luma.caps[e]||an.log(jle,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}const l4="Multiple render targets not supported";class vs extends zu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new vs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=_o(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=_o(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:u}=e;if(Xt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(s,o,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(t,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return Xt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&an.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Xt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof fm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,h=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function zle(n){return(vs.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&cR(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,c)=>{!function Dle(n){let{framebuffer:e=null,buffer:t=t4,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_o(n),hc(n,{framebuffer:e},()=>{switch(t){case t4:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:Xt(!1,s4)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return an.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return an.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return an.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return an.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return an.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return an.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:s,height:o}=e;const a=_o(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ah(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[t?ah(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?ah(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(uR(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>an.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=uR(this,{targetMaxHeight:100});return an.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new Ks(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new fm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new fm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&Xt(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof fm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:_o(o).framebufferTextureLayer(36160,t,i.target,s,r);break;case 34067:const c=function Hle(n){return n<34069?n+34069:n}(r);o.framebufferTexture2D(36160,t,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,t,3553,i.handle,s);break;default:Xt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function yce(n){return ni(n)?n:null}(this.gl);t?t.readBuffer(e):Xt(36064===e||1029===e,l4),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=_o(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Xt(1===e.length&&(36064===e[0]||1029===e[0]),l4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function Ule(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in o4)void 0===n.luma.caps[e]&&(n.luma.caps[e]=c4(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}vs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Wle={5126:Er.bind(null,"uniform1fv",Fa,1,yo),35664:Er.bind(null,"uniform2fv",Fa,2,yo),35665:Er.bind(null,"uniform3fv",Fa,3,yo),35666:Er.bind(null,"uniform4fv",Fa,4,yo),5124:Er.bind(null,"uniform1iv",ch,1,yo),35667:Er.bind(null,"uniform2iv",ch,2,yo),35668:Er.bind(null,"uniform3iv",ch,3,yo),35669:Er.bind(null,"uniform4iv",ch,4,yo),35670:Er.bind(null,"uniform1iv",ch,1,yo),35671:Er.bind(null,"uniform2iv",ch,2,yo),35672:Er.bind(null,"uniform3iv",ch,3,yo),35673:Er.bind(null,"uniform4iv",ch,4,yo),35674:Er.bind(null,"uniformMatrix2fv",Fa,4,Gu),35675:Er.bind(null,"uniformMatrix3fv",Fa,9,Gu),35676:Er.bind(null,"uniformMatrix4fv",Fa,16,Gu),35678:Js,35680:Js,5125:Er.bind(null,"uniform1uiv",l1,1,yo),36294:Er.bind(null,"uniform2uiv",l1,2,yo),36295:Er.bind(null,"uniform3uiv",l1,3,yo),36296:Er.bind(null,"uniform4uiv",l1,4,yo),35685:Er.bind(null,"uniformMatrix2x3fv",Fa,6,Gu),35686:Er.bind(null,"uniformMatrix2x4fv",Fa,8,Gu),35687:Er.bind(null,"uniformMatrix3x2fv",Fa,6,Gu),35688:Er.bind(null,"uniformMatrix3x4fv",Fa,12,Gu),35689:Er.bind(null,"uniformMatrix4x2fv",Fa,8,Gu),35690:Er.bind(null,"uniformMatrix4x3fv",Fa,12,Gu),35678:Js,35680:Js,35679:Js,35682:Js,36289:Js,36292:Js,36293:Js,36298:Js,36299:Js,36300:Js,36303:Js,36306:Js,36307:Js,36308:Js,36311:Js},$le={},Yle={},Xle={},u4=[0];function hR(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(u4[0]=n,n=u4);const r=n.length;if(r%e&&an.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Fa(n,e){return hR(n,e,Float32Array,$le)}function ch(n,e){return hR(n,e,Int32Array,Yle)}function l1(n,e){return hR(n,e,Uint32Array,Xle)}function d4(n,e,t){const i=Wle[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function qle(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function Jle(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function Qle(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Uf||n instanceof fm)||n instanceof vs&&!!n.texture}function Zle(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function Js(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Er(n,e,t,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,t),u=l.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{Xt(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,n,a,l),r.set(l)),h}}function yo(n,e,t,i){n[e](t,i)}function Gu(n,e,t,i){n[e](t,!1,i)}function u1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function f4(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();t+=p4("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function p4(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class Y0 extends zu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Xt(!1),"unknown"}}constructor(e,t){a1(e),Xt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:u1(t.source,null)||t.id||ca("unnamed ".concat(Y0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=u1(t,null);i&&(this.id=ca(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Y0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return u1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function h4(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||u1(e)||"(unnamed)",c="".concat(function nue(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==g?s[m]=h:o[m]=h}const l=function iue(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return p4(a,r-a.length)+t+s})}(e);return{shaderName:c,errors:f4(s,l),warnings:f4(o,l)}}(i,this.source,this.shaderType,this.id);throw an.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),an.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class fR extends Y0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class pR extends Y0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const sue=5120,oue=5121,aue=5122,cue=5123,Os=5126,X0=5124,q0=5125,gR={[Os]:[Os,1,"float"],35664:[Os,2,"vec2"],35665:[Os,3,"vec3"],35666:[Os,4,"vec4"],[X0]:[X0,1,"int"],35667:[X0,2,"ivec2"],35668:[X0,3,"ivec3"],35669:[X0,4,"ivec4"],[q0]:[q0,1,"uint"],36294:[q0,2,"uvec2"],36295:[q0,3,"uvec3"],36296:[q0,4,"uvec4"],35670:[Os,1,"bool"],35671:[Os,2,"bvec2"],35672:[Os,3,"bvec3"],35673:[Os,4,"bvec4"],35674:[Os,8,"mat2"],35685:[Os,8,"mat2x3"],35686:[Os,8,"mat2x4"],35675:[Os,12,"mat3"],35687:[Os,12,"mat3x2"],35688:[Os,12,"mat3x4"],35676:[Os,16,"mat4"],35689:[Os,16,"mat4x2"],35690:[Os,16,"mat4x3"]};function b4(n){const e=gR[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function w4(n,e){switch(n){case sue:case oue:case aue:case cue:n=Os}for(const t in gR){const[i,r,s]=gR[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class Oue{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!ni(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=b4(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new la(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=b4(i),c={location:e,name:t,accessor:new la({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Pue=35981,Nue=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class E4 extends zu{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",Nue),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=Pue}=e;return this.hash=t||"",this.vs="string"==typeof i?new fR(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new pR(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Xt(this.vs instanceof fR),Xt(this.fs instanceof pR),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(_o(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Oue(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:v={},uniforms:w,samplers:N}=e;if((w||N)&&(an.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(w||{})),an.priority>=t){const U=m?m.id:"default",ce="mode=".concat(ah(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(ah(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(U);an.log(t,ce)()}return Xt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===u||(f.bindForDraw(r,u,()=>{if(void 0!==m&&(v=Object.assign({},v,{framebuffer:m})),g){const U=function v4(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Xt(!1),0}}(i);g.begin(U)}this._bindTextures(),hc(this.gl,v,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,u):c&&ni(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),g&&g.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};an.priority>=2&&function Kle(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!Jle(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof vs&&(s=s.texture),s instanceof Uf)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&Zle(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new fR({handle:r});break;case 35632:i.fs=new pR({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=ca(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),an.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),an.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||an.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=qle(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=d4(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=d4(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class K0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new K0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(t),h=this._getHash(i),f=l.map(ce=>this._getHash(ce.name)).sort(),g=o.map(ce=>this._getHash(ce)),m=Object.keys(r).sort(),v=Object.keys(s).sort(),w=[],N=[];for(const ce of m)w.push(this._getHash(ce)),w.push(this._getHash(r[ce]));for(const ce of v)N.push(this._getHash(ce)),N.push(this._getHash(s[ce]));const U="".concat(u,"/").concat(h,"D").concat(w.join("/"),"M").concat(f.join("/"),"I").concat(N.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[U]){const ce=function lce(n,e){const{vs:t,fs:i}=e,r=Bae(e.modules||[]);return{gl:n,vs:MH(n,Object.assign({},e,{source:t,type:U0,modules:r})),fs:MH(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:uce(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[U]=new E4(this.gl,{hash:U,vs:ce.vs,fs:ce.fs,varyings:o,bufferMode:a}),this._getUniforms[U]=ce.getUniforms||(re=>{}),this._useCounts[U]=0}return this._useCounts[U]++,this._programCache[U]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;t[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}const Lue=[255,255,255],Fue=1;let kue=0;class A4{constructor(e={}){we(this,"id",void 0),we(this,"color",void 0),we(this,"intensity",void 0),we(this,"type","ambient");const{color:t=Lue}=e,{intensity:i=Fue}=e;this.id=e.id||"ambient-".concat(kue++),this.color=t,this.intensity=i}}const Bue=[255,255,255],jue=1,Uue=[0,0,-1];let Vue=0;class S4{constructor(e={}){we(this,"id",void 0),we(this,"color",void 0),we(this,"intensity",void 0),we(this,"type","directional"),we(this,"direction",void 0),we(this,"shadow",void 0);const{color:t=Bue}=e,{intensity:i=jue}=e,{direction:r=Uue}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(Vue++),this.color=t,this.intensity=i,this.type="directional",this.direction=new mo(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class Hue{constructor(e,t={id:"pass"}){we(this,"id",void 0),we(this,"gl",void 0),we(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class h1 extends Hue{constructor(...e){super(...e),we(this,"_lastRenderIndex",-1)}render(e){return Hu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function Gue(n){Hu(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const u=[];for(const h of r){const f=s&&s[h.id];o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const v of m){const w=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:v,view:f,pass:e.pass,layers:e.layers},g);u.push(w)}}return u}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=C4(this._lastRenderIndex+1),u={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<t.length;f++){const g=t[f],m=this._shouldDrawLayer(g,u,r,h),v={shouldDrawLayer:m};m&&(v.layerRenderIndex=l(g,m),v.moduleParameters=this._getModuleParameters(g,o,i,a),v.layerParameters=this.getLayerParameters(g,f,e)),c[f]=v}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function zue(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,s=e&&e.devicePixelRatio||um(n);return[i.x*s,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;hc(e,{scissorTest:!0,scissor:l},()=>cR(e,h))}const u={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Hu(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:v,layerParameters:w}=c[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),v.viewport=o;try{f._drawLayer({moduleParameters:v,uniforms:{layerIndex:m},parameters:w})}catch(N){f.raiseError(N,"drawing ".concat(f," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(t))return!1;t.layer=o,o=o.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:um(this.gl)});if(t)for(const c of t){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,t),r)}}function C4(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const u=t[c]=t[c]||C4(e[c],e);l=u(r,s),t[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),t[a]=null):l=n;return s&&l>=n&&(n=l+1),e[a]=l,l};return i}class Wue extends h1{constructor(e,t){super(e,t),we(this,"shadowMap",void 0),we(this,"depthBuffer",void 0),we(this,"fbo",void 0),this.shadowMap=new Ks(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new fm(e,{format:33189,width:1,height:1}),this.fbo=new vs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;hc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=um(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const T4="#define SMOOTH_EDGE_RADIUS 0.5",que={name:"geometry",vs:"\n".concat(T4,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(T4,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Kue=Object.keys(bi).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(bi[n],";")).join(""),Jue=Object.keys(kl).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(kl[n],";")).join(""),Zue=Object.keys(QE).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(QE[n],";")).join(""),Que="".concat(Kue,"\n").concat(Jue,"\n").concat(Zue,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function ede(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function f1(n){let t,e={};return i=>{for(const r in i)if(!ede(i[r],e[r])){t=n(i),e=i;break}return t}}const M4=[0,0,0,0],tde=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],I4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nde=[0,0,0],D4=[0,0,0],ide=f1(function ode({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function rde(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=M4,c=M4,l=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=R4(n,e,t);return f&&(c=n.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=F0([],c,o),s=i||s,o=Lf([],r,s),o=Lf([],o,tde)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(n,t,i),u=n.getDistanceScales(),h=[n.width*e,n.height*e],f=F0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:nde,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:I4,project_uCameraPosition:a};if(l){const m=n.getDistanceScales(l);switch(t){case bi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case bi.LNGLAT:case bi.LNGLAT_OFFSETS:n._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case bi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function R4(n,e,t=D4){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,s=!0;switch(r=e===bi.LNGLAT_OFFSETS||e===bi.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case kl.WEB_MERCATOR:(e===bi.LNGLAT||e===bi.CARTESIAN)&&(r=[0,0,0],s=!1);break;case kl.WEB_MERCATOR_AUTO_OFFSET:e===bi.LNGLAT?i=r:e===bi.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case kl.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case kl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const ade={},mR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},que],vs:Que,getUniforms:function cde(n=ade){return"viewport"in n?function sde({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=bi.DEFAULT,coordinateOrigin:r=D4,autoWrapLongitude:s=!1}){i===bi.DEFAULT&&(i=n.isGeospatial?bi.LNGLAT:bi.CARTESIAN);const o=ide({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||I4,o}(n):{}}},dde=f1(function mde({viewport:n,center:e}){return new Fn(n.viewProjectionMatrix).invert().transform(e)}),hde=f1(function _de({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function gde(n,e){const[t,i,r]=n,s=k0([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new mo(n.center).negate()),c=s.map(u=>a.transform(u)),l=(new Fn).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});t.push(l.multiplyRight(o))}return t}),fde=[0,0,0,1],pde=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],_R={name:"shadow",dependencies:[mR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function yde(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||fde,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=dde({viewport:n.viewport,center:e.project_uCenter}),s=[],o=hde({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new mo(n.viewport.center).negate());e.project_uCoordinateSystem===bi.LNGLAT&&e.project_uProjectionMode===kl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(pde),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},vde={color:[255,255,255],intensity:1},O4=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],bde=[0,0,0,200/255];class yR{constructor(e={}){we(this,"id","lighting-effect"),we(this,"props",null),we(this,"shadowColor",bde),we(this,"shadow",void 0),we(this,"ambientLight",null),we(this,"directionalLights",[]),we(this,"pointLights",[]),we(this,"shadowPasses",[]),we(this,"shadowMaps",[]),we(this,"dummyShadowMap",null),we(this,"programManager",void 0),we(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=K0.getDefaultProgramManager(e),_R&&this.programManager.addDefaultModule(_R)),this.dummyShadowMap||(this.dummyShadowMap=new Ks(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(_R),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Fn).lookAt({eye:new mo(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new Wue(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new A4(vde),this.directionalLights.push(new S4(O4[0]),new S4(O4[1])))}}let wde=1,xde=1;class P4{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=wde++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=xde++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const p1=Symbol.for("component"),_m=Symbol.for("asyncPropDefaults"),Hf=Symbol.for("asyncPropOriginal"),lh=Symbol.for("asyncPropResolved");let vR={};function vo(n,e,t,i){ui.level>0&&vR[n]&&vR[n].call(null,e,t,i)}function bR(n,e=(()=>!0)){return Array.isArray(n)?N4(n,e,[]):e(n)?[n]:[]}function N4(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?N4(r,e,t):e(r)&&t.push(r)}return t}function Ade({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const Wc=n=>"function"==typeof n,uh=n=>null!==n&&"object"==typeof n,F4=n=>uh(n)&&n.constructor==={}.constructor,Sde=n=>n&&"function"==typeof n[Symbol.iterator],Cde=n=>n&&"function"==typeof n[Symbol.asyncIterator],ym=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,vm=n=>typeof Blob<"u"&&n instanceof Blob,Tde=n=>n&&"object"==typeof n&&n.isBuffer,k4=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||uh(n)&&Wc(n.tee)&&Wc(n.cancel)&&Wc(n.getReader))(n)||(n=>uh(n)&&Wc(n.read)&&Wc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function B4(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function wR(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function xR(n){var e,t;let i;return B4(n,"null loader"),B4(wR(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let ER="";const AR={},Pde=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Nde=/^([-\w.]+\/[-\w.+]+)/;function Lde(n){const e=Nde.exec(n);return e?e[1]:n}function j4(n){const e=Pde.exec(n);return e?e[1]:""}const Fde=/\?.*/;function g1(n){if(ym(n)){const e=SR(n.url||"");return{url:e,type:Lde(n.headers.get("content-type")||"")||j4(e)}}return vm(n)?{url:SR(n.name||""),type:n.type||""}:"string"==typeof n?{url:SR(n),type:j4(n)}:{url:"",type:""}}function SR(n){return n.replace(Fde,"")}function U4(n){return CR.apply(this,arguments)}function CR(){return CR=jt(function*(n){if(ym(n))return n;const e={},t=function kde(n){return ym(n)?n.headers["content-length"]||-1:vm(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=g1(n);r&&(e["content-type"]=r);const s=yield function Ude(n){return IR.apply(this,arguments)}(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),CR.apply(this,arguments)}function TR(){return TR=jt(function*(n){if(!n.ok){const e=yield function jde(n){return MR.apply(this,arguments)}(n);throw new Error(e)}}),TR.apply(this,arguments)}function MR(){return MR=jt(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),MR.apply(this,arguments)}function IR(){return IR=jt(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function Vde(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),IR.apply(this,arguments)}function V4(n,e){return DR.apply(this,arguments)}function DR(){return DR=jt(function*(n,e){if("string"==typeof n){n=function Ode(n){for(const e in AR)n.startsWith(e)&&(n=n.replace(e,AR[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(ER).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield U4(n)}),DR.apply(this,arguments)}const H4=new O0({id:"loaders.gl"});class Hde{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const z4=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),G4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),W4=(G4&&parseFloat(G4[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class zde{constructor(){we(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:z4,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Gde={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function RR(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const OR=()=>{const n=RR();return n.globalOptions=n.globalOptions||{...W4},n.globalOptions};function Wde(n,e,t,i){return t=t||[],function $de(n,e){Y4(n,null,W4,Gde,e);for(const t of e)Y4(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function X4(n,e,t){const r={...n.options||{}};return function Xde(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new Hde),q4(r,OR()),q4(r,e),r}(e,n,i)}function $4(n,e){const t=OR(),i=n||t;return"function"==typeof i.fetch?i.fetch:uh(i.fetch)?r=>V4(r,i):null!=e&&e.fetch?e?.fetch:V4}function Y4(n,e,t,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in n){const c=!e&&uh(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)H4.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Yde(a,r);H4.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function Yde(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function q4(n,e){for(const t in e)t in e&&(n[t]=F4(e[t])&&F4(n[t])?{...n[t],...e[t]}:e[t])}function Ul(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const qde="3.2.13",Vl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Jde=Vl.global||Vl.self||Vl.window||{},dh="object"!=typeof process||"[object process]"!==String(process)||process.browser,PR="function"==typeof importScripts,Zde=typeof window<"u"&&typeof window.orientation<"u",K4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);K4&&parseFloat(K4[1]);class NR{}const LR=new Map;function J4(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function Z4(n,e=!0,t){const i=t||new Set;if(n)if(Q4(n))i.add(n);else if(Q4(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)Z4(n[r],e,i);return void 0===t?Array.from(i):[]}function Q4(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const FR=()=>{};class kR{static isSupported(){return typeof Worker<"u"&&dh||typeof NR<"u"&&!dh}constructor(e){we(this,"name",void 0),we(this,"source",void 0),we(this,"url",void 0),we(this,"terminated",!1),we(this,"worker",void 0),we(this,"onMessage",void 0),we(this,"onError",void 0),we(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Ul(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=FR,this.onError=s=>console.log(s),this.worker=dh?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=FR,this.onError=FR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||Z4(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function Qde(n){Ul(n.source&&!n.url||!n.source&&n.url);let e=LR.get(n.source||n.url);return e||(n.url&&(e=function ehe(n){if(!n.startsWith("http"))return n;const e=function the(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return J4(e)}(n.url),LR.set(n.url,e)),n.source&&(e=J4(n.source),LR.set(n.source,e))),Ul(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new NR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new NR(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class ihe{constructor(e,t){we(this,"name",void 0),we(this,"workerThread",void 0),we(this,"isRunning",!0),we(this,"result",void 0),we(this,"_resolve",()=>{}),we(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Ul(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ul(this.isRunning),this.isRunning=!1,this._reject(e)}}class rhe{static isSupported(){return kR.isSupported()}constructor(e){we(this,"name","unnamed"),we(this,"source",void 0),we(this,"url",void 0),we(this,"maxConcurrency",1),we(this,"maxMobileConcurrency",1),we(this,"onDebug",()=>{}),we(this,"reuseWorkers",!0),we(this,"props",{}),we(this,"jobQueue",[]),we(this,"idleQueue",[]),we(this,"count",0),we(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return jt(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return jt(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new ihe(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new kR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Zde?this.maxMobileConcurrency:this.maxConcurrency}}const she={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Wu{static isSupported(){return kR.isSupported()}static getWorkerFarm(e={}){return Wu._workerFarm=Wu._workerFarm||new Wu({}),Wu._workerFarm.setProps(e),Wu._workerFarm}constructor(e){we(this,"props",void 0),we(this,"workerPools",new Map),this.props={...she},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new rhe({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}we(Wu,"_workerFarm",void 0);const ohe="latest";function BR(){return BR=jt(function*(n,e,t,i,r){const s=n.id,o=function ahe(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let s=n.version;"latest"===s&&(s=ohe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(o,"/dist/").concat(i)}return Ul(r),r}(n,t),c=Wu.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",uhe.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),BR.apply(this,arguments)}function uhe(n,e,t,i){return jR.apply(this,arguments)}function jR(){return jR=jt(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),jR.apply(this,arguments)}function UR(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new m1(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function m1(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(m1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new m1(n)}function t8(n){return n&&"object"==typeof n&&n.isBuffer}function n8(n){if(t8(n))return function dhe(n){return t8(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function HR(){return HR=jt(function*(n){const e=[];var r,t=!1,i=!1;try{for(var o,s=UR(n);t=!(o=yield s.next()).done;t=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function fhe(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),HR.apply(this,arguments)}S(643);const ghe=262144,_he=262144;function i8(n,e){this.v=n,this.k=e}function _1(n){return new i8(n,0)}function J0(n){var e,t;function i(s,o){try{var a=n[s](o),c=a.value,l=c instanceof i8;Promise.resolve(l?c.v:c).then(function(u){if(l){var h="return"===s?"return":"next";if(!c.k||u.done)return i(h,u);u=n[h](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}function GR(n){return function(){return new J0(n.apply(this,arguments))}}J0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},J0.prototype.next=function(n){return this._invoke("next",n)},J0.prototype.throw=function(n){return this._invoke("throw",n)},J0.prototype.return=function(n){return this._invoke("return",n)};const vhe=1048576;function WR(){return WR=GR(function*(n,e){const t=e?.chunkSize||vhe;let i=0;for(;i<n.size;){const r=i+t,s=yield _1(n.slice(i,r).arrayBuffer());i=r,yield s}}),WR.apply(this,arguments)}function r8(n,e){return z4?function whe(n,e){return $R.apply(this,arguments)}(n,e):function xhe(n,e){return YR.apply(this,arguments)}(n,e)}function $R(){return $R=GR(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield _1(r);if(s)return;yield n8(o)}}catch{t.releaseLock()}}),$R.apply(this,arguments)}function YR(){return YR=GR(function*(n,e){var r,t=!1,i=!1;try{for(var o,s=UR(n);t=!(o=yield _1(s.next())).done;t=!1){const a=o.value;yield n8(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield _1(s.return()))}finally{if(i)throw r}}}),YR.apply(this,arguments)}const XR="Cannot convert supplied data type";function qR(){return qR=jt(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function Ahe(n,e,t){if(e.text&&"string"==typeof n)return n;if(Tde(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(XR)}(n,e);if(vm(n)&&(n=yield U4(n)),ym(n)){const r=n;return yield function Bde(n){return TR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(k4(n)&&(n=function Ehe(n,e){if("string"==typeof n)return function*mhe(n,e){const t=e?.chunkSize||ghe;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*yhe(n,e={}){const{chunkSize:t=_he}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(vm(n))return function bhe(n,e){return WR.apply(this,arguments)}(n,e);if(k4(n))return r8(n,e);if(ym(n))return r8(n.body,e);throw new Error("makeIterator")}(n,t)),Sde(n)||Cde(n))return function phe(n){return HR.apply(this,arguments)}(n);throw new Error(XR)}),qR.apply(this,arguments)}const Dhe=new O0({id:"loaders.gl"}),s8=()=>{const n=RR();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function o8(n){const e=s8();n=Array.isArray(n)?n:[n];for(const t of n){const i=xR(t);e.find(r=>i===r)||e.unshift(i)}}const Ohe=/\.([^.]+)$/;function ZR(){return ZR=jt(function*(n,e=[],t,i){if(!c8(n))return null;let r=a8(n,e,{...t,nothrow:!0},i);if(r)return r;if(vm(n)&&(r=a8(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(l8(n));return r}),ZR.apply(this,arguments)}function a8(n,e=[],t,i){if(!c8(n))return null;if(e&&!Array.isArray(e))return xR(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function Rhe(){return s8()}()),function Lhe(n){for(const e of n)xR(e)}(r);const s=function Nhe(n,e,t,i){const{url:r,type:s}=g1(n),o=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=QR(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function Fhe(n,e){const t=e&&Ohe.exec(e),i=t&&t[1];return i?function khe(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||QR(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function Bhe(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(jhe(e,t))return t}else if(ArrayBuffer.isView(e)){if(u8(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&u8(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(d8(n)):""),a=a||QR(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&Dhe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(l8(n));return s}function c8(n){return!(n instanceof Response&&204===n.status)}function l8(n){const{url:e,type:t}=g1(n);let i="No valid loader found (";i+=e?"".concat(function Ihe(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?d8(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function QR(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function jhe(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function u8(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function Uhe(n,e,t,i){if(i instanceof ArrayBuffer)return function hhe(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===eO(n,e,i.length);default:return!1}}(n,e,t,r))}function d8(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?eO(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?eO(n,0,e):""}function eO(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function y1(n,e,t,i){return tO.apply(this,arguments)}function tO(){return tO=jt(function*(n,e,t,i){Ul(!i||"object"==typeof i),e&&!Array.isArray(e)&&!wR(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=g1(n),o=function Mhe(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function Phe(n){return ZR.apply(this,arguments)}(n,o,t);return a?(i=function The(n,e,t=null){if(t)return t;const i={fetch:$4(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:y1,loaders:o},t=Wde(t,a,o,r),i),yield function Vhe(n,e,t,i){return nO.apply(this,arguments)}(a,n,t,i)):null}),tO.apply(this,arguments)}function nO(){return nO=jt(function*(n,e,t,i){if(function Kde(n,e=qde){Ul(n,"no worker provided")}(n),ym(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:u}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:u}}if(e=yield function She(n,e,t){return qR.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function che(n,e){return!(!Wu.isSupported()||!(dh||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function lhe(n,e,t,i,r){return BR.apply(this,arguments)}(n,e,t,i,y1);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Ul(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),nO.apply(this,arguments)}function Z0(n,e,t,i){return iO.apply(this,arguments)}function iO(){return iO=jt(function*(n,e,t,i){!Array.isArray(e)&&!wR(e)&&(t=e,e=void 0);const r=$4(t);let s=n;return"string"==typeof n&&(s=yield r(n)),vm(n)&&(s=yield r(n)),yield y1(s,e,t)}),iO.apply(this,arguments)}class Hhe{constructor(e,t,i){we(this,"id",void 0),we(this,"context",void 0),we(this,"isLoaded",void 0),we(this,"persistent",void 0),we(this,"_loadCount",0),we(this,"_subscribers",new Set),we(this,"_data",void 0),we(this,"_loader",void 0),we(this,"_error",void 0),we(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=Z0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class zhe{constructor({gl:e,protocol:t}){we(this,"protocol",void 0),we(this,"_context",void 0),we(this,"_resources",void 0),we(this,"_consumers",void 0),we(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new Hhe(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Ghe=[mR],Whe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function $he(n){const e=K0.getDefaultProgramManager(n);for(const t of Ghe)e.addDefaultModule(t);for(const t of Whe)e.addShaderHook(t);return e}class qhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){we(this,"layers",void 0),we(this,"context",void 0),we(this,"resourceManager",void 0),we(this,"_lastRenderedLayers",[]),we(this,"_needsRedraw",!1),we(this,"_needsUpdate",!1),we(this,"_nextLayers",null),we(this,"_debug",!1),we(this,"activateViewport",o=>{vo("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new zhe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&$he(e),stats:i||new tR({id:"deck.gl"}),viewport:r||new nh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new P4,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){vo("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=bR(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?ui.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&ui.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Khe{constructor(e){we(this,"width",void 0),we(this,"height",void 0),we(this,"views",void 0),we(this,"viewState",void 0),we(this,"controllers",void 0),we(this,"timeline",void 0),we(this,"_viewports",void 0),we(this,"_viewportMap",void 0),we(this,"_isUpdating",void 0),we(this,"_needsRedraw",void 0),we(this,"_needsUpdate",void 0),we(this,"_eventManager",void 0),we(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=bR(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!am(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ui.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const s=e.controller;if(s){const o={...t,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=t[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in t){const s=t[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}const Qhe=Math.PI/180;function h8(n){return 512/4003e4/Math.cos(n*Qhe)}class hh extends nh{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:g=!1}=e;let{width:m,height:v,altitude:w=1.5}=e;const N=Math.pow(2,r);m=m||1,v=v||1;let U,ce=null;u?(w=u[5]/2,U=ZE(w)):(e.fovy?(U=e.fovy,w=PD(U)):U=ZE(w),ce=function iH(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:u=ZE(sae)}=n;void 0!==i&&(u=ZE(i));const h=u*dc,f=r*dc,g=PD(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/t);const v=h*(.5+(s?s[1]:0)/t),w=Math.sin(v)*m/Math.sin(ID(Math.PI/2-f-v,.01,Math.PI-.01)),N=Math.sin(f)*w+m;return{fov:h,aspect:e/t,focalDistance:g,near:c,far:Math.min(N*l,10*m)}}({width:m,height:v,pitch:s,fovy:U,nearZMultiplier:a,farZMultiplier:c}));let re=function cae(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:s,center:o}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];WE(a,a,[0,0,-r]),YV(a,a,-t*dc),XV(a,a,i*dc);const c=s/e;return CD(a,a,[c,c,c]),o&&WE(a,a,function ioe(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],o)),a}({height:v,pitch:s,bearing:o,scale:N,altitude:w});f&&(re=(new Fn).translate([512*f,0,0]).multiplyLeft(re)),super({...e,width:m,height:v,viewMatrix:re,longitude:i,latitude:t,zoom:r,...ce,fovy:U,focalDistance:w}),we(this,"longitude",void 0),we(this,"latitude",void 0),we(this,"pitch",void 0),we(this,"bearing",void 0),we(this,"altitude",void 0),we(this,"fovy",void 0),we(this,"orthographic",void 0),we(this,"_subViewports",void 0),we(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=w,this.fovy=U,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const s=r?new hh({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*h8(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/h8(i)]}addMetersToLngLat(e,t){return nH(e,t)}panByPosition(e,t){const i=k0(t,this.pixelUnprojectionMatrix),s=$E([],this.projectFlat(e),qV([],i)),o=$E([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const t=function uae(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let c,l;return(n.fovy?.5*n.fovy*oH:Math.atan(.5/n.altitude))>(90-n.pitch)*oH-.01?(c=aH(n,0,e),l=aH(n,t,e)):(c=r([0,0],s),l=r([t,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=sH({width:i,height:r,bounds:e,...t});return new hh({width:i,height:r,longitude:s,latitude:o,zoom:a})}}we(hh,"displayName","WebMercatorViewport");class tfe extends gH{constructor(e){const{width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:v,startZoomLngLat:w,startRotatePos:N,startBearing:U,startPitch:ce,startZoom:re,normalize:Me=!0}=e;qs(Number.isFinite(s)),qs(Number.isFinite(r)),qs(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:Me,position:u},{startPanLngLat:v,startZoomLngLat:w,startRotatePos:N,startBearing:U,startPitch:ce,startZoom:re}),we(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Pr(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Pr(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Pr(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function dae(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=n;(r<-180||r>180)&&(r=eH(r+180,360)-180),(a<-180||a>180)&&(a=eH(a+180,360)-180);const c=DD(t/512);if(o<=c)o=c,s=0;else{const l=t/2/Math.pow(2,o),u=om([0,l])[1];if(s<u)s=u;else{const h=om([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:t,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const s=e[0]-t[0],o=e[1]-t[1],a=e[1],c=t[1],{width:l,height:u}=this.getViewportProps(),h=s/l;let f=0;o>0?Math.abs(u-c)>5&&(f=o/(c-u)*1.2):o<0&&c>5&&(f=1-a/c),f=Pr(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps();let w=i;return f>0?w=i+f*(m-i):f<0&&(w=i-f*(g-i)),{pitch:w,bearing:r+180*h}}}class nfe extends kD{constructor(...e){super(...e),we(this,"ControllerState",tfe),we(this,"transition",{transitionDuration:300,transitionInterpolator:new e1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),we(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class p8 extends LD{get ViewportType(){return hh}get ControllerType(){return nfe}}we(p8,"displayName","MapView");class ife extends h1{constructor(e,t){super(e,t),we(this,"maskMap",void 0),we(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new Ks(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new vs(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,hc(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class afe{constructor(){we(this,"id","mask-effect"),we(this,"props",null),we(this,"useInPicking",!0),we(this,"dummyMaskMap",void 0),we(this,"channels",[]),we(this,"masks",null),we(this,"maskPass",void 0),we(this,"maskMap",void 0),we(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new Ks(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new ife(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function rfe({layers:n,viewport:e}){let t=null;for(const s of n){const o=s.getBounds();o&&(t?(t[0]=Math.min(t[0],o[0][0]),t[1]=Math.min(t[1],o[0][1]),t[2]=Math.max(t[2],o[1][0]),t[3]=Math.max(t[3],o[1][1])):t=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!t)return i;const r=function ofe(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:s}),c||!nm(e.bounds,a.bounds))){const{maskPass:l,maskMap:u}=this,h=function sfe({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof hh){const{longitude:a,latitude:c,zoom:l}=sH({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new hh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const s=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],o=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new BD({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:s}=r.root;let o=t[s];if(!o){if(++i>4){ui.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in t))&&(this.channels[r]=null)}for(const r in t){const s=t[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const cfe=new yR;class lfe{constructor(){we(this,"effects",void 0),we(this,"_internalEffects",void 0),we(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!am(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new afe),e.some(t=>t instanceof yR)||this._internalEffects.push(cfe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class ufe extends h1{shouldDrawLayer(e){return"draw"===e.props.operation}}const g8={blendFunc:[1,0,32771,0],blendEquation:32774};class m8 extends h1{constructor(...e){super(...e),we(this,"pickZ",void 0),we(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m}){const v=this.gl;this.pickZ=m;const w=m?null:{byLayer:new Map,byAlpha:[]};this._colors=w;const N=hc(v,{scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...g8,blend:!m},()=>super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(ce=>ce.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:w&&hfe.bind(null,w),stats:N}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,g8),r.blend=!0,r.blendColor=function dfe(n,e,t){const{byLayer:i,byAlpha:r}=n;let s,o=i.get(e);return o?(o.viewports.push(t),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[t]},i.set(e,o),r[s]=o):(ui.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function hfe(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class pfe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new ufe(e),this.pickLayersPass=new m8(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||vs.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,vo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new vs(this.gl),new vs(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const gfe={pickedColor:null,pickedObjectIndex:-1};function mfe({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let u=r*r,h=-1,f=0;for(let g=0;g<l;g++){const m=g+a-i,v=m*m;if(v>u)f+=4*c;else for(let w=0;w<c;w++){if(n[f+3]-1>=0){const U=w+o-t,ce=U*U+v;ce<=u&&(u=ce,h=f)}f+=4}}if(h>=0){const g=n.slice(h,h+4),m=e(g);if(m){const v=Math.floor(h/4/c),w=h/4-v*c;return{...m,pickedColor:g,pickedX:o+w,pickedY:a+v}}ui.error("Picked non-existent layer. Is picking buffer corrupt?")()}return gfe}function _8({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function vfe(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function yfe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const f=t.layerId,g=o?o.props.id:null;if(g!==f||a!==t.index){if(g!==f){const m=r.find(v=>v.props.id===f);m&&c.unshift(m)}t.layerId=g,t.index=a,t.info=null}}const l=_8(n),u=new Map;return u.set(null,l),c.forEach(h=>{let f={...l};h===o&&(f.color=s,f.index=a,f.picked=!0),f=y8({layer:h,info:f,mode:i});const g=f.layer;h===o&&"hover"===i&&(t.info=f),u.set(g.id,f),"hover"===i&&g.updateAutoHighlight(f)}),u}function y8({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class bfe{constructor(e){we(this,"gl",void 0),we(this,"pickingFBO",void 0),we(this,"depthFBO",void 0),we(this,"pickLayersPass",void 0),we(this,"layerFilter",void 0),we(this,"lastPickedInfo",void 0),we(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new m8(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(f=>f.id===o):null,l=a&&r.find(f=>f.id===a)||r[0],u=l&&l.unproject([e-l.x,t-l.y]);return{...s,x:e,y:t,viewport:l,coordinate:u,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new vs(i),vs.isSupported(i,{colorBufferFloat:!0}))){const r=new vs(i);r.attach({36064:new Ks(i,{format:ni(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=um(this.gl);if(!f)return{result:[],emptyInfo:_8({viewports:i,x:r,y:s,pixelRatio:g})};this._resizeBuffer();const m=ZD(this.gl,[r,s],!0),v=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],w=Math.round(o*g),{width:N,height:U}=this.pickingFBO,ce=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:w,deviceWidth:N,deviceHeight:U}),re={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Me;const Ne=[],st=new Set;for(let dt=0;dt<a;dt++){let Xe,ht;Xe=ce?mfe({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:u,deviceRect:ce,cullRect:re,effects:h,pass:"picking:".concat(c)}),deviceX:v[0],deviceY:v[1],deviceRadius:w,deviceRect:ce}):{pickedColor:null,pickedObjectIndex:-1},Xe.pickedLayer&&l&&this.depthFBO&&(ht=this._drawAndSample({layers:[Xe.pickedLayer],views:t,viewports:i,onViewportActive:u,deviceRect:{x:Xe.pickedX,y:Xe.pickedY,width:1,height:1},cullRect:re,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),Xe.pickedLayer&&dt+1<a&&(st.add(Xe.pickedLayer),Xe.pickedLayer.disablePickingIndex(Xe.pickedObjectIndex)),Me=yfe({pickInfo:Xe,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:s,z:ht,pixelRatio:g});for(const vt of Me.values())vt.layer&&Ne.push(vt);if(!Xe.pickedColor)break}for(const dt of st)dt.restorePickingColors();return{result:Ne,emptyInfo:Me.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=um(this.gl),m=ZD(this.gl,[r,s],!0),v=m.x,w=m.y+m.height,N=ZD(this.gl,[r+o,s+a],!0),ce=N.y,Ne=function _fe({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e(s);a?t.set(o,{...a,color:s}):ui.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:u,deviceRect:{x:v,y:ce,width:N.x+N.width-v,height:w-ce},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),st=new Map,dt=Number.isFinite(l);for(let Xe=0;Xe<Ne.length&&!(dt&&l&&st.size>=l);Xe++){const ht=Ne[Xe];let vt={color:ht.pickedColor,layer:null,index:ht.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:g};vt=y8({layer:ht.pickedLayer,info:vt,mode:c}),st.has(vt.object)||st.set(vt.object,vt)}return Array.from(st.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:f,y:g,width:m,height:v}=s,w=new(l?Float32Array:Uint8Array)(m*v*4);return c1(u,{sourceX:f,sourceY:g,sourceWidth:m,sourceHeight:v,target:w}),{pickedColors:w,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,t+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const wfe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class xfe{constructor(e){we(this,"el",null),we(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,wfe),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function v8(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Afe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),b8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Sfe}=(b8&&parseFloat(b8[1]),globalThis),rO=typeof Image<"u",sO=typeof ImageBitmap<"u",oO=!!Afe||!!Sfe;function w8(n){const e=function E8(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Mfe=/^data:image\/svg\+xml/,Ife=/\.svg((\?|#).*)?$/;function aO(n){return n&&(Mfe.test(n)||Ife.test(n))}function A8(n,e){if(aO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function S8(n,e,t){return cO.apply(this,arguments)}function cO(){return cO=jt(function*(n,e,t){const i=function Dfe(n,e){if(aO(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return A8(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function Rfe(n,e){return lO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),cO.apply(this,arguments)}function lO(){return lO=jt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),lO.apply(this,arguments)}const Ofe={};let C8=!0;function uO(){return uO=jt(function*(n,e,t){let i;i=aO(t)?yield S8(n,e,t):A8(n,t);const r=e&&e.imagebitmap;return yield function Nfe(n){return dO.apply(this,arguments)}(i,r)}),uO.apply(this,arguments)}function dO(){return dO=jt(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Lfe(n){for(const e in n||Ofe)return!1;return!0}(e)||!C8)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),C8=!1}return yield createImageBitmap(n)}),dO.apply(this,arguments)}const zl=!1,Q0=!0;function T8(n){const e=ev(n);return function Hfe(n){const e=ev(n);return e.byteLength>=24&&2303741511===e.getUint32(0,zl)?{mimeType:"image/png",width:e.getUint32(16,zl),height:e.getUint32(20,zl)}:null}(e)||function Wfe(n){const e=ev(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,zl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function $fe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,zl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,zl),width:e.getUint16(s+7,zl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,zl)}return null}(e)||function zfe(n){const e=ev(n);return e.byteLength>=10&&1195984440===e.getUint32(0,zl)?{mimeType:"image/gif",width:e.getUint16(6,Q0),height:e.getUint16(8,Q0)}:null}(e)||function Gfe(n){const e=ev(n);return e.byteLength>=14&&16973===e.getUint16(0,zl)&&e.getUint32(2,Q0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Q0),height:e.getUint32(22,Q0)}:null}(e)||function Vfe(n){const t=function Ffe(n){return function Ufe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function jfe(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function kfe(n){switch(function Bfe(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function ev(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function hO(){return hO=jt(function*(n,e){const{mimeType:t}=T8(n)||{},i=globalThis._parseImageNode;return v8(i),yield i(n,t)}),hO.apply(this,arguments)}function fO(){return fO=jt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function qfe(n){switch(n){case"auto":case"data":return function Tfe(){if(sO)return"imagebitmap";if(rO)return"image";if(oO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Cfe(n){switch(n){case"auto":return sO||rO||oO;case"imagebitmap":return sO;case"image":return rO;case"data":return oO;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function Pfe(n,e,t){return uO.apply(this,arguments)}(n,e,s);break;case"image":a=yield S8(n,e,s);break;case"data":a=yield function Yfe(n,e){return hO.apply(this,arguments)}(n,e);break;default:v8(!1)}return"data"===r&&(a=function x8(n){switch(w8(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),fO.apply(this,arguments)}const M8={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Xfe(n,e,t){return fO.apply(this,arguments)},tests:[n=>!!T8(new DataView(n))],options:{image:{type:"auto",decode:!0}}},Jfe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Kfe(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},tv="8.8.27",v1=globalThis.deck&&globalThis.deck.VERSION;if(v1&&v1!==tv)throw new Error("deck.gl - multiple versions detected: ".concat(v1," vs ").concat(tv));v1||(ui.log(1,"deck.gl ".concat(tv))(),globalThis.deck={...globalThis.deck,VERSION:tv,version:tv,log:ui,_registerLoggers:function Ede(n){vR=n}},o8([Jfe,[M8,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Zfe=globalThis.deck,b1=globalThis;function I8(n){if(!n&&!Ll())return"Node";if(DV(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":b1.chrome?"Chrome":b1.safari?"Safari":b1.mozInnerScreenX?"Firefox":"Unknown"}class w1 extends zu{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=ni(e),r=a4(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:Xt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return w1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const D8=Ll()&&typeof document<"u";let cpe=0;class lpe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(w=>GH(w)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=jf.get("animation-loop-".concat(cpe++))}=e;let{useDevicePixels:v=!0}=e;"useDevicePixelRatio"in e&&(an.deprecated("useDevicePixelRatio","useDevicePixels")(),v=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Xt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=w1.isSupported(this.gl,["timers"])?new w1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return jt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return an.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=D8?new Promise((e,t)=>{D8&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function ape(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function ope(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?eR(this.props.gl,e):this.onCreateContext(e),!o1(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function nle(n){Hu(n,JD)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function ale(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function ile(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function hle(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(an.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(an.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new vs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var x1=S(7271);const upe={mousedown:1,mousemove:2,mouseup:4};(function hpe(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function dpe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(x1.PointerEventInput),function fpe(n){n.prototype.handler=function(t){let i=upe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(x1.MouseInput);const ppe=x1.Manager,Gl=x1;class E1{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const gpe=Gl?[[Gl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Gl.Rotate,{enable:!1}],[Gl.Pinch,{enable:!1}],[Gl.Swipe,{enable:!1}],[Gl.Pan,{threshold:0,enable:!1}],[Gl.Press,{enable:!1}],[Gl.Tap,{event:"doubletap",taps:2,enable:!1}],[Gl.Tap,{event:"anytap",enable:!1}],[Gl.Tap,{enable:!1}]]:null,P8={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},mpe={doubletap:["tap"]},_pe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},gO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},ype={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},N8={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},vpe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",bm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let mO=!1;try{bm.addEventListener("test",null,{get passive(){return mO=!0,!0}}),bm.removeEventListener("test",null)}catch{mO=!1}const bpe=-1!==vpe.indexOf("firefox"),{WHEEL_EVENTS:wpe}=gO,F8=4.000244140625;class Ape extends E1{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;bm.WheelEvent&&(bpe&&r.deltaMode===bm.WheelEvent.DOM_DELTA_PIXEL&&(s/=bm.devicePixelRatio),r.deltaMode===bm.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%F8==0&&(s=Math.floor(s/F8)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(wpe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!mO&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:Spe}=gO,k8="pointermove",B8="pointerover",j8="pointerout",U8="pointerenter",V8="pointerleave";class Cpe extends E1{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Spe),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===k8&&(this.enableMoveEvent=t),e===B8&&(this.enableOverEvent=t),e===j8&&(this.enableOutEvent=t),e===U8&&(this.enableEnterEvent=t),e===V8&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(B8,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(j8,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(U8,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(V8,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(k8,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:Tpe}=gO,H8="keydown";class Mpe extends E1{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:H8,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Tpe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===H8&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const G8="contextmenu";class Ipe extends E1{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:G8,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===G8&&(this.options.enable=t)}}const Dpe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Upe(n){const e=Dpe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&t),o=!!(4&t),a=!!(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function Vpe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const vO={srcElement:"root",priority:0};class Hpe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=vO;"string"==typeof i||i&&i.addEventListener?c={...vO,srcElement:i}:i&&(c={...vO,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const u={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=u.priority);)h--;l.splice(h+1,0,u)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:u,once:h}=i[c];if(u({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...Upe(e),...Vpe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const zpe={events:null,recognizers:null,recognizerOptions:{},Manager:ppe,touchAction:"none",tabIndex:0};class Gpe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:s}=r,o=_pe[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...zpe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||gpe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(P8).forEach(r=>{const s=this.manager.get(r);s&&P8[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new Ape(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Cpe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Mpe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Ipe(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=mpe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,c=N8[e]||e;let l=a.get(c);l||(l=new Hpe(this),a.set(c,l),l.recognizerName=ype[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,t,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(N8[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function zf(){}const W8={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:zf,onResize:zf,onViewStateChange:zf,onInteractionStateChange:zf,onBeforeRender:zf,onAfterRender:zf,onLoad:zf,onError:n=>ui.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class bO{constructor(e){we(this,"props",void 0),we(this,"width",0),we(this,"height",0),we(this,"userData",{}),we(this,"canvas",null),we(this,"viewManager",null),we(this,"layerManager",null),we(this,"effectManager",null),we(this,"deckRenderer",null),we(this,"deckPicker",null),we(this,"eventManager",null),we(this,"tooltip",null),we(this,"metrics",void 0),we(this,"animationLoop",void 0),we(this,"stats",void 0),we(this,"viewState",void 0),we(this,"cursorState",void 0),we(this,"_needsRedraw",void 0),we(this,"_pickRequest",void 0),we(this,"_lastPointerDownInfo",null),we(this,"_metricsCounter",void 0),we(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),we(this,"_onEvent",t=>{const i=hH[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let u=!1;c&&(u=c.call(a,o,t)),!u&&l&&l(o,t)}),we(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...W8,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&ui.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===I8()&&ui.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new tR({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&P0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ui.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ui.removed("onLayerClick","onClick")(),e.initialViewState&&!am(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return qs(this.viewManager),this.viewManager.views}getViewports(e){return qs(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){qs(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),qs(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const s=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new lpe({width:t,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:h=>GH({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new p8({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var t;s=a,o=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,eR(e,{enable:!0,copyState:!0})),this.tooltip=new xfe(this.canvas),Hu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new P4;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Gpe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in hH)this.eventManager.on(r,this._onEvent);this.viewManager=new Khe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new qhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new lfe,this.deckRenderer=new pfe(e),this.deckPicker=new bfe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Hu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ui.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=jf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}we(bO,"defaultProps",W8),we(bO,"VERSION",Zfe.VERSION);var Gf=S(1979);function $u(n={}){const{connector:e=(()=>new Zt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=c=void 0,u=h=!1},m=()=>{const v=o;g(),v?.unsubscribe()};return di((v,w)=>{l++,!h&&!u&&f();const N=c=c??e();w.add(()=>{l--,0===l&&!h&&!u&&(a=wO(m,r))}),N.subscribe(w),!o&&l>0&&(o=new Ei({next:U=>N.next(U),error:U=>{h=!0,f(),a=wO(g,t,U),N.error(U)},complete:()=>{u=!0,f(),a=wO(g,i),N.complete()}}),_s(v).subscribe(o))})(s)}}function wO(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Ei({next:()=>{i.unsubscribe(),n()}});return _s(e(...t)).subscribe(i)}class xO{constructor(e,t){we(this,"opts",void 0),we(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function S1(n){return n.stride||n.size*n.bytesPerElement}function $8(n,e){e.offset&&ui.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=S1(n),s=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:s,stride:t}}class Ype{constructor(e,t,i){we(this,"gl",void 0),we(this,"id",void 0),we(this,"size",void 0),we(this,"settings",void 0),we(this,"value",void 0),we(this,"doublePrecision",void 0),we(this,"_buffer",void 0),we(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,s=5130===r;let a,{defaultValue:o}=t;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&t.isIndexed?e&&dR(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function Wpe(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Ji(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*S1(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),P0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function $pe(n,e){const t=$8(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new xO(this,s.high),i["".concat(e,"64Low")]=r?new xO(this,s.low):new Float32Array(this.size),i}if(t){const i=$8(this.getAccessor(),t);return{[e]:new xO(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,s=i*r;if(t&&s&&t.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const u=t[c++];u<o[l]&&(o[l]=u),u>a[l]&&(a[l]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Ji?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),t.constant&&this._areValuesEqual(s,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;t.externalBuffer=s,t.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=S1(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;t.externalBuffer=null,t.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=S1(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=AD(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?AD(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,s=P0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?AD(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&ui.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}const Y8=[],X8=[];function C1(n,e=0,t=1/0){let i=Y8;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(X8.length=n.length,i=X8):i=Y8,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function q8(n){return n&&n[Symbol.asyncIterator]}const qpe=[],T1=[[0,1/0]];function EO(n){const{source:e,target:t,start:i=0,size:r,getData:s}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!s)return;let l=a;for(;l<c;){const u=s(l,e);for(let h=0;h<r;h++)t[i+l]=u[h]||0,l++}}const Zpe={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function K8(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...Zpe[t],...e,...n,type:t}}function J8(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Z8(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function Q8(n){n.push(n.shift())}function AO(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function ez({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,c=t.byteOffset,l=t.startIndices,u=r&&l,h=AO(t,e),f=t.isConstant;if(!u&&i>=h)return;const g=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const N=s;s=(U,ce)=>t.normalizeConstant(N(U,ce))}const m=f?(N,U)=>s(g,U):(N,U)=>s(g.subarray(N,N+a),U),v=n.getData({length:i}),w=new Float32Array(h);(function Jpe({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return EO({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const c=i&&((u,h)=>i(u+a,h)),l=Math.min(r.length,s.length);for(let u=1;u<l;u++){const h=r[u]*t,f=s[u]*t;EO({source:n.subarray(o,h),target:e,start:a,end:f,size:t,getData:c}),o=h,a=f}a<e.length&&EO({source:[],target:e,start:a,size:t,getData:c})})({source:v,target:w,sourceStartIndices:r,targetStartIndices:l,size:a,getData:m}),n.byteLength<w.byteLength+c&&n.reallocate(w.byteLength+c),n.subData({data:w,offset:c})}class SO extends Ype{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:T1}),we(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return K8(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function Kpe(n,e){if(n===T1||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=T1}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=qpe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==T1),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(r,this,{data:t,startRow:l,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,u]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return qs(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Xpe(n,e){const{size:t,stride:i,offset:r,startIndices:s,nested:o}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,u=Math.floor((n.length-l)/c);return(h,{index:f,target:g})=>{if(!s){const N=f*c+l;for(let U=0;U<t;U++)g[U]=n[N+U];return g}const m=s[f],v=s[f+1]||u;let w;if(o){w=new Array(v-m);for(let N=m;N<v;N++){const U=N*c+l;g=new Array(t);for(let ce=0;ce<t;ce++)g[ce]=n[U+ce];w[N-m]=g}}else if(c===t)w=n.subarray(m*t+l,v*t+l);else{w=new n.constructor((v-m)*t);let N=0;for(let U=m;U<v;U++){const ce=U*c+l;for(let re=0;re<t;re++)w[N++]=n[ce+re]}}return w}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:t,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=c.binaryAccessor||("function"==typeof f?f:s[f]);qs("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let v=e.getVertexOffset(i);const{iterable:w,objectInfo:N}=C1(t,i,r);for(const U of w){N.index++;let ce=m(U,N);if(g&&(ce=g.call(this,ce)),h){const re=(N.index<h.length-1?h[N.index+1]:o)-h[N.index];if(ce&&Array.isArray(ce[0])){let Me=v;for(const Ne of ce)e._normalizeValue(Ne,l,Me),Me+=u}else ce&&ce.length>u?l.set(ce,v):(e._normalizeValue(ce,N.target,0),Ade({target:l,source:N.target,start:v,count:re}));v+=re*u}else e._normalizeValue(ce,l,v),v+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const tz="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ege="#version 300 es\n".concat(tz);function nz(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function iz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?ege:e>300?"#version ".concat(e,"\n").concat(tz):"void main() {gl_FragColor = vec4(0);}";const s=function ige(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Na(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class rz extends zu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return ni(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_o(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,dm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,an.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Ji?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class rge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Ji?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Xt(ni(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new rz(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],Xt(i[s]instanceof Ji)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Ji(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function sz(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const sge={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},M1="transform_uSize_",oz="transform_position";const fge={10241:9728,10240:9728,10242:33071,10243:33071};class gge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function cge(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let s,o;t&&(({width:s,height:o}=i),r["".concat(M1).concat(t)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(M1).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=c1(t);if(!e)return i;const r=i.constructor,s=function nge(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Na(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof Ks)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Ji(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new vs(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(fge)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function Nle(n,e){Xt(n instanceof Ks||n instanceof Ole||n instanceof Ple);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function age(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,o=Object.keys(t).length,a=null;const c={};let l=e,u={};if(o>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((g,m,v)=>{if(o>0){const w=function hge(n,e){const t={},i=function lge(n){return nz(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function uge(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(M1).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(s),u=function tge(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Na(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,";\n");return t[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(g,t);if(w){const{updatedLine:N,inject:U}=w;f[m]=N,u=YD([u,U]),Object.assign(c,w.samplerTextureMap),o--}}i&&!a&&(a=function dge(n,e){const t=nz(n,["varying","out"]);return t&&t.name===e?t.type:null}(g,i))}),i){Xt(r);const g="".concat(M1).concat(i),m="uniform vec2 ".concat(g,";\n"),v="     vec2 ".concat(oz," = transform_getPos(").concat(g,");\n     gl_Position = vec4(").concat(oz,", 0, 1.);\n");u=YD([u,{"vs:#decl":m,"vs:#main-start":v}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=YD([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||iz({version:sz(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[sge].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}let I1=null;class ka extends zu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ni(e)||"Chrome"===I8()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ka(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ka.MAX_ATTRIBUTES=ka.MAX_ATTRIBUTES||e.getParameter(34921),ka.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:ka._setConstantFloatArray(e,t,i);break;case Int32Array:ka._setConstantIntArray(e,t,i);break;case Uint32Array:ka._setConstantUintArray(e,t,i);break;default:Xt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ka.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(Xt(ni(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!ka.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Ji(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function _ge(n,e){const t=function mge(n){return(!I1||I1.byteLength<n)&&(I1=new ArrayBuffer(n)),I1}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,s);(function yge(n){let{target:e,source:t,start:i=0,count:r=1}=n;const s=t.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Xt(!1)}}static _setConstantIntArray(e,t,i){switch(Xt(ni(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Xt(!1)}}static _setConstantUintArray(e,t,i){switch(Xt(ni(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Xt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Xt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const wge=/^(.+)__LOCATION_([0-9]+)$/,xge=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Ege{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ka(e),XH(this,"VertexArray","v6.0",xge),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ji(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ji&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Ji&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,an.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=la.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return Xt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=wge.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Ji)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Ji)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Ji))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(ka.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){ka.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Ji){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return an.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function nv(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function Age(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=nv(n[o],e);const s=n.length>t?"...":"]";return"".concat(r).concat(s)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function az(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,u,h,s="NOT PROVIDED",o=1,a=0,c=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Ji){const f=e,{data:g,changed:m}=f.getDebugData();let v;return u=m?"*":"",h=g,c=f.byteLength,a=c/g.BYTES_PER_ELEMENT/o,t?v="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(ah(r,s),")"):(l=!0,v="".concat(c," bytes")),{[i]:"".concat(u).concat(nv(h,{size:o,isInteger:l})),"Format ":v}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(nv(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Cge(n,e){const{type:t,size:i}=e,r=w4(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function cz(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;Xt(t);const o=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let u=0;for(const g of l)!g.match(".*_.*")&&!g.match(o)&&CO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)g.match(o)&&CO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)c[g]||CO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;let h=0;const f={};if(!r)for(const g in i){const m=i[g];c[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:nv(m)})}return{table:c,count:u,unusedTable:f,unusedCount:h}}function CO(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:s}=n;const o=i[r],a=function Tge(n){return null!=n}(o);return!(s&&a||(e[r]={[t]:a?nv(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function lz(n){const{type:e,size:t}=n.accessor,i=w4(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const Ige={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Rge(n,e){const{attributeMap:t=Ige}=e||{};return t&&t[n]||n}function Oge(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Xt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const uz=()=>{},Lge={};class xm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=ca("model")}=t;Xt(o1(e)),this.id=i,this.gl=e,this.id=t.id||ca("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||K0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Xt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Xt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Xt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Dge(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Rge(s,t);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Ji(n,c),l],Oge(s,l)}}if(r){const s=r.value||r;Xt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Ji(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(dm(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return cR(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),an.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&an.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:w}=this,{onBeforeRender:N=uz,onAfterRender:U=uz}=this.props;N(),this.program.setUniforms(this.uniforms);const ce=this.program.draw(Object.assign(Lge,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:v,instanceCount:w,offset:h?g:0}));return U(),an.priority>=2&&this._logDrawCallEnd(l,c,i),ce}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return an.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Xt(t instanceof E4,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Ege(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Ji&&t.delete()}}_setAnimationProps(e){this.animated&&Xt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(dm(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new rz(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),an.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:an.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function Sge(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=az(e,e.elements,null,t));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(Cge(o.name,c))),i[a]=az(e,r[s],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=cz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:u}=cz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&an.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&an.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Mge(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=lz(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=lz(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);an.table(e,s)(),an.table(e,o)(),an.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),an.groupEnd(2)()}}class TO{static isSupported(e){return ni(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Xt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new xm(t,Object.assign({},e,{fs:e.fs||iz({version:sz(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function Fge(n){return!(dm(n.feedbackBuffers)&&dm(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new rge(e,t)),function kge(n){return!(dm(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new gge(e,t)),Xt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}const Wge={interpolation:class Bge{constructor({gl:e,attribute:t,timeline:i}){we(this,"gl",void 0),we(this,"type","interpolation"),we(this,"attributeInTransition",void 0),we(this,"settings",void 0),we(this,"attribute",void 0),we(this,"transition",void 0),we(this,"currentStartIndices",void 0),we(this,"currentLength",void 0),we(this,"transform",void 0),we(this,"buffers",void 0),this.gl=e,this.transition=new j0(i),this.attribute=t,this.attributeInTransition=new SO(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function Uge(n,e){const t=Z8(e.size);return new TO(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Ji(e,r),new Ji(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;Q8(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)ez({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=AO(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:J8(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let s=r/t;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class Vge{constructor({gl:e,attribute:t,timeline:i}){we(this,"gl",void 0),we(this,"type","spring"),we(this,"attributeInTransition",void 0),we(this,"settings",void 0),we(this,"attribute",void 0),we(this,"transition",void 0),we(this,"currentStartIndices",void 0),we(this,"currentLength",void 0),we(this,"texture",void 0),we(this,"framebuffer",void 0),we(this,"transform",void 0),we(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new j0(i),this.attribute=t,this.attributeInTransition=new SO(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function zge(n){return new Ks(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function Gge(n,e){return new vs(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function Hge(n,e,t){const i=Z8(e.size);return new TO(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Ji(e,r),new Ji(e,r),new Ji(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)ez({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=AO(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:J8(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Q8(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),c1(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class $ge{constructor(e,{id:t,timeline:i}){we(this,"id",void 0),we(this,"isSupported",void 0),we(this,"gl",void 0),we(this,"timeline",void 0),we(this,"transitions",void 0),we(this,"needsRedraw",void 0),we(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=TO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void ui.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=Wge[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(ui.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const dz="attributeManager.invalidate";class Zge{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){we(this,"id",void 0),we(this,"gl",void 0),we(this,"attributes",void 0),we(this,"updateTriggers",void 0),we(this,"needsRedraw",void 0),we(this,"userData",void 0),we(this,"stats",void 0),we(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new $ge(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);vo(dz,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);vo(dz,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;vo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],h=u.settings.accessor;u.startIndices=i,u.numInstances=t,s[l]&&ui.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&vo("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new SO(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;vo("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&vo("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,vo("attribute.updateEnd",t,i)))}}function fz(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function pz(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const nme={interpolation:class Qge extends j0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=UE(t,i,o)}},spring:class tme extends j0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function eme(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=fz(n[o],e[o],t[o],i,r);return s}return fz(n,e,t,i,r)}(s,o,t,i,r);const c=pz(a,t),l=pz(a,o);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class ime{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=K8(r)))return;const o=nme[r.type];if(!o)return void ui.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:t,toValue:i}),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function ome(n,e){if(!n.transitions)return!1;const t={},i=IO(n);let r=!1;for(const s in n.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&MO(n[s],e[s],o)&&(t[s]=!0,r=!0)}return!!r&&t}function gz({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=MO(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=MO(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function MO(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function lme(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function mz(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},gz({oldProps:r,newProps:i,triggerName:t})}function IO(n){const e=n[p1],t=e&&e.constructor;return t?t._propTypes:{}}function gme(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function DO(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof hh){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function _z(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=n;switch(t&&([o,a,c]=F0([],[o,a,c,1],t)),i){case bi.LNGLAT:return DO([o,a,c],e,s);case bi.LNGLAT_OFFSETS:return DO([o+r[0],a+r[1],c+(r[2]||0)],e,s);case bi.METER_OFFSETS:return DO(nH(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}const yme={10241:9987,10240:9729,10242:33071,10243:33071},RO={},wme={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||rv(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>OO(n,e)},accessor:{validate(n,e){const t=D1(n);return"function"===t||t===D1(e.value)},equal:(n,e,t)=>"function"==typeof e||OO(n,e)},array:{validate:(n,e)=>e.optional&&!n||rv(n),equal:(n,e,t)=>t.compare?OO(n,e):n===e},object:{equal:(n,e,t)=>t.compare?am(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function vme(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Ks)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new Ks(t,{...e,parameters:{...yme,...i,...n.props.textureParameters}});return RO[r.id]=!0,r}(t,n),release:n=>{!function bme(n){!n||!(n instanceof Ks)||RO[n.id]&&(n.delete(),delete RO[n.id])}(n)}}};function OO(n,e){if(n===e)return!0;if(!rv(n)||!rv(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Eme(n,e){switch(D1(e)){case"object":return iv(n,e);case"array":return iv(n,{type:"array",value:e,compare:!1});case"boolean":return iv(n,{type:"boolean",value:e});case"number":return iv(n,{type:"number",value:e});case"function":return iv(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function iv(n,e){return"type"in e?{name:n,...wme[e.type],...e}:"value"in e?{name:n,type:D1(e.value),...e}:{name:n,type:"object",value:e}}function rv(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function D1(n){return rv(n)?"array":null===n?"null":typeof n}function yz(n){return R1(n,"_mergedDefaultProps")||(function Sme(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=yz(t),s=function xme(n){const e={},t={},i={};for(const[r,s]of Object.entries(n)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=Eme(r,s);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(R1(n,"defaultProps")||{}),o=function Cme(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function Dme(n){const e=R1(n,"layerName")||R1(n,"componentName");return e||ui.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a={...t._propTypes,...s.propTypes};!function Mme(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=Ime(o))}n[_m]=t,n[Hf]={},Object.defineProperties(n,i)}(o,a);const c={...t._deprecatedProps,...s.deprecatedProps};(function Tme(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])vz(this,s)||(this[s]=i);ui.deprecated(r,e[t].join("/"))()}})})(o,c),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function Ime(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||q8(e)?this[Hf][n]=e:this[lh][n]=e},get(){if(this[lh]){if(n in this[lh])return this[lh][n]||this[_m][n];if(n in this[Hf]){const e=this[p1]&&this[p1].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[_m][n]}}return this[_m][n]}}}function vz(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function R1(n,e){return vz(n,e)&&n[e]}let Rme=0;class PO{constructor(...e){we(this,"id",void 0),we(this,"props",void 0),we(this,"count",void 0),this.props=function Ame(n,e){const t=yz(n.constructor),i=Object.create(t);i[p1]=n,i[Hf]={},i[lh]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=Rme++}clone(e){const{props:t}=this,i={};for(const r in t[_m])r in t[lh]?i[r]=t[lh][r]:r in t[Hf]&&(i[r]=t[Hf][r]);return new this.constructor({...t,...i,...e})}}we(PO,"componentName","Component"),we(PO,"defaultProps",{});const Ome=Object.freeze({});class Pme{constructor(e){we(this,"component",void 0),we(this,"onAsyncPropUpdated",void 0),we(this,"asyncProps",void 0),we(this,"oldProps",void 0),we(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Ome}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[lh]||{},i=e[Hf]||e,r=e[_m]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(q8(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,t){var i=this;return jt(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,c=!1,l=!1;try{for(var f,h=UR(t);c=!(f=yield h.next()).done;c=!1){const g=f.value;{const{dataTransform:m}=i.component.props;o=m?m(g,o):o.concat(g),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(g){l=!0,u=g}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class Nme extends Pme{constructor({attributeManager:e,layer:t}){super(t),we(this,"attributeManager",void 0),we(this,"needsRedraw",void 0),we(this,"needsUpdate",void 0),we(this,"subLayers",void 0),we(this,"usesPickingColorCache",void 0),we(this,"changeFlags",void 0),we(this,"viewport",void 0),we(this,"uniformTransitions",void 0),we(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Ume=Object.freeze([]),Vme=f1(({oldViewport:n,viewport:e})=>n.equals(e));let Wl=new Uint8ClampedArray(0);const Hme={data:{type:"data",value:Ume,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(n);return!c&&!r&&(o.add({resourceId:n,data:Z0(n,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:n,onChange:l=>{var u;return null===(u=t.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):Z0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:bi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Wf extends PO{constructor(...e){super(...e),we(this,"internalState",null),we(this,"lifecycle","Awaiting state"),we(this,"context",void 0),we(this,"state",void 0),we(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){qs(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=_z(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=rH(i,t.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return qs(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return qs(this.internalState),function _me(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function mme(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return r===bi.DEFAULT&&(r=e.isGeospatial?bi.LNGLAT:bi.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=R4(t,i,r),h=_z(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function noe(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===bi.DEFAULT||e===bi.LNGLAT||e===bi.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){qs(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function hme(n){if(!function pme(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function fme(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=gme(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,t.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,s,o;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!Vme({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(Wl.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&ui.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Wl=P0.allocate(Wl,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(Wl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Wl[3*o+0]=s[0],Wl[3*o+1]=s[1],Wl[3*o+2]=s[2]}e.value=Wl.subarray(0,3*t)}_setModelAttributes(e,t){const s=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Wl.buffer&&(i.value=Wl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){qs(!this.internalState),qs(Number.isFinite(this.props.coordinateSystem)),vo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Nme({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ui.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new ime(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){vo("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(vo("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){vo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];Hu(s.gl,{polygonOffset:c}),hc(s.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=t[r];o&&Array.isArray(a)&&(t.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}t[r]||(t[r]=e[r],s=!0),s&&vo("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function sme(n,e){const t=gz({newProps:n,oldProps:e,propTypes:IO(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function ame(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function cme(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&mz(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&mz(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:lme(n,e),transitionsChanged:ome(n,e)}}(e,t);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,t[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function rme(n){const e=IO(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Zge(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}we(Wf,"defaultProps",Hme),we(Wf,"layerName","Layer");class NO extends Wf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:v,extensions:w,fetch:N,operation:U,_subLayerProps:ce}=this.props,re={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:v,extensions:w,fetch:N,operation:U},Me=ce&&e.id&&ce[e.id],Ne=Me&&Me.updateTriggers,st=e.id||"sublayer";if(Me){const dt=this.constructor._propTypes,Xe=e.type?e.type._propTypes:{};for(const ht in Me){const vt=Xe[ht]||dt[ht];vt&&"accessor"===vt.type&&(Me[ht]=this.getSubLayerAccessor(Me[ht]))}}Object.assign(re,e,Me),re.id="".concat(this.props.id,"-").concat(st),re.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...Ne};for(const dt of w){const Xe=dt.getSubLayerProps.call(this,dt);Xe&&Object.assign(re,Xe,{updateTriggers:Object.assign(re.updateTriggers,Xe.updateTriggers)})}return re}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=bR(this.renderLayers(),Boolean),this.internalState.subLayers=i),vo("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}we(NO,"layerName","CompositeLayer");const O1={name:"project32",dependencies:[mR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Gme={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},P1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Wme(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gme;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},wz={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class fh{static get DRAW_MODE(){return wz}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("geometry"),drawMode:i=wz.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Xt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Xt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return Xt(Number.isFinite(i)),i}}const xz=()=>{},Ez={10241:9987,10240:9729,10242:33071,10243:33071};function Kme(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Jme(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function sv(n){return n&&(n.id||n.url)}function Az(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[sv(r)]={...r,x:s,y:t}}}class t_e{constructor(e,{onUpdate:t=xz,onError:i=xz}){we(this,"gl",void 0),we(this,"onUpdate",void 0),we(this,"onError",void 0),we(this,"_loadOptions",null),we(this,"_texture",null),we(this,"_externalTexture",null),we(this,"_mapping",{}),we(this,"_textureParameters",null),we(this,"_pendingCount",0),we(this,"_autoPacking",!1),we(this,"_xOffset",0),we(this,"_yOffset",0),we(this,"_rowHeight",0),we(this,"_buffer",4),we(this,"_canvasWidth",1024),we(this,"_canvasHeight",0),we(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?sv(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function e_e(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=C1(n);for(const o of r){s.index++;const a=e(o,s),c=sv(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Qme({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[sv(l)]){const{height:h,width:f}=l;i+f+e>o&&(Az(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&Az(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Kme(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new Ks(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Ez})),this._texture.height!==this._canvasHeight&&(this._texture=function Zme(n,e,t,i){const r=n.width,s=n.height,o=new Ks(n.gl,{width:e,height:t,parameters:i});return function Fle(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:u,height:h}=t;const{framebuffer:f,deleteFramebuffer:g}=$0(n);Xt(f);const{gl:m,handle:v}=f,w=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const N=m.bindFramebuffer(36160,v);Xt(e);let U=null;if(e instanceof Uf&&(U=e,u=Number.isFinite(u)?u:U.width,h=Number.isFinite(h)?h:U.height,U.bind(0),e=U.target),w)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,c,i,r,u,h);break;case 35866:case 32879:_o(m).copyTexSubImage3D(e,s,a,c,l,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);U&&U.unbind(),m.bindFramebuffer(36160,N||null),g&&f.delete()}(n,o,{targetY:0,width:r,height:s}),n.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Ez)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,Z0(i.url,M8,this._loadOptions).then(r=>{const s=sv(i),{x:o,y:a,width:c,height:l}=this._mapping[s],u=Jme(t,r,c,l);this._texture.setSubImageData({data:u,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const Sz=[0,0,0,255],n_e={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:Sz},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class LO extends Wf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[O1,P1]})}initializeState(){this.state={iconManager:new t_e(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Sz},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:u}=t,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:u}),f?i.iconMapping!==t.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:QE[s],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new xm(e,{...this.getShaders(),id:this.props.id,geometry:new fh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):ui.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[t,i,r,s]}}we(LO,"defaultProps",n_e),we(LO,"layerName","IconLayer");const Tz=[];class FO extends LO{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&ui.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):Tz}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):Tz}}we(FO,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),we(FO,"layerName","MultiIconLayer");var s_e=S(822),o_e=S.n(s_e);const a_e=32,c_e=[];function l_e(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Mz(n,e,t,i){let r=0;for(let o=e;o<t;o++){var s;r+=(null===(s=i[n[o]])||void 0===s?void 0:s.width)||0}return r}function Iz(n,e,t,i,r,s){let o=e,a=0;for(let c=e;c<t;c++){const l=Mz(n,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function h_e(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?Iz(n,r,s,t,i,o):function d_e(n,e,t,i,r,s){let o=e,a=e,c=e,l=0;for(let u=e;u<t;u++)if((" "===n[u]||" "===n[u+1]||u+1===t)&&(c=u+1),c>a){let h=Mz(n,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=Iz(n,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(n,r,s,t,i,o),o}function f_e(n,e,t,i,r,s){let o=0,a=0;for(let c=e;c<t;c++){const l=n[c],u=i[l];u?(a||(a=u.height),r[c]=o+u.width/2,o+=u.width):(ui.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=a_e)}s[0]=o,s[1]=a}function Dz(n,e,t,i,r){const s=Array.from(n),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let g=0,m=0,v=0;for(let w=0;w<=o;w++){const N=s[w];if(("\n"===N||w===o)&&(v=w),v>m){const U=u?h_e(s,t,i,r,m,v):c_e;for(let ce=0;ce<=U.length;ce++){const re=0===ce?m:U[ce-1],Me=ce<U.length?U[ce]:v;f_e(s,re,Me,r,a,f);for(let Ne=re;Ne<Me;Ne++)c[Ne]=g+f[1]/2,l[Ne]=f[0];g+=f[1]*e,h[0]=Math.max(h[0],f[0])}m=v}"\n"===N&&(a[m]=0,c[m]=0,l[m]=0,m++)}return h[1]=g,{x:a,y:c,rowWidth:l,size:h}}class Rz{constructor(e=5){we(this,"limit",void 0),we(this,"_cache",{}),we(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const ov={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function g_e(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let N1=new Rz(3);function y_e(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function Lz(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class b_e{constructor(){we(this,"props",{...ov}),we(this,"_key",void 0),we(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function __e(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=N1.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=N1.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,N1.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");Lz(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:v,yOffset:w}=function u_e({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of n)if(!s[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const u=t+2*i;return{mapping:s,xOffset:l,yOffset:a+c*u,canvasHeight:l_e(a+(c+1)*u)}}({getFontWidth:N=>f.measureText(N).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==m){const N=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(N,0,0)}if(Lz(f,r,o,s),c){const N=new(o_e())(o,a,l,u,r,s),U=f.getImageData(0,0,N.size,N.size);for(const ce of t)y_e(N.draw(ce),U),f.putImageData(U,g[ce].x-a,g[ce].y+a)}else for(const N of t)f.fillText(N,g[N].x,g[N].y+.9*o);return{xOffset:v,yOffset:w,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const E_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class kO extends Wf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[O1,P1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:QE[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new xm(e,{...this.getShaders(),id:this.props.id,geometry:new fh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}we(kO,"defaultProps",E_e),we(kO,"layerName","TextBackgroundLayer");const Fz={start:1,middle:0,end:-1},kz={top:1,center:0,bottom:-1},BO=[0,0,0,255],S_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:BO},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ov.characterSet},fontFamily:ov.fontFamily,fontWeight:ov.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:BO},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:BO},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class jO extends NO{constructor(...e){super(...e),we(this,"state",void 0),we(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{size:[f,g]}=Dz(h,c,o,a,r);return[(Fz["function"==typeof l?l(t,i):l]-1)*f/2,(kz["function"==typeof u?u(t,i):u]-1)*g/2,f,g]}),we(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{x:f,y:g,rowWidth:m,size:[v,w]}=Dz(h,c,o,a,r),N=Fz["function"==typeof l?l(t,i):l],U=kz["function"==typeof u?u(t,i):u],ce=f.length,re=new Array(2*ce);let Me=0;for(let Ne=0;Ne<ce;Ne++)re[Me++]=(N-1)*v/2+(1-N)*(v-m[Ne])/2+f[Ne],re[Me++]=(U-1)*w/2+g[Ne];return re})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new b_e}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=t.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:u}=function p_e({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,c=i?i/o:0,l=r[e]||Math.ceil((n.length-c)/a),u=s&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let m=0;m<l;m++)f[m]=n[m*a+c]}for(let g=0;g<e;g++){const w=f.subarray(r[g],r[g+1]||l);h[g]=String.fromCodePoint.apply(null,w),u&&w.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:o,characterSet:c});a=u,s=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:u}=C1(t);o=[0],a=0;for(const h of l){u.index++;const f=Array.from(s(h,u)||"");c&&f.forEach(c.add,c),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,getBackgroundColor:v,getBorderColor:w,getBorderWidth:N,backgroundPadding:U,background:ce,billboard:re,fontSettings:Me,outlineWidth:Ne,outlineColor:st,sizeScale:dt,sizeUnits:Xe,sizeMinPixels:ht,sizeMaxPixels:vt,transitions:Ct,updateTriggers:ft}=this.props,gt=this.getSubLayerClass("characters",FO),Pt=this.getSubLayerClass("background",kO);return[ce&&new Pt({getFillColor:v,getLineColor:w,getLineWidth:N,padding:U,getPosition:u,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:dt/this.state.fontAtlasManager.props.fontSize,sizeUnits:Xe,sizeMinPixels:ht,sizeMaxPixels:vt,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new gt({sdf:Me.sdf,smoothing:Number.isFinite(Me.smoothing)?Me.smoothing:ov.smoothing,outlineWidth:Ne,outlineColor:st,iconAtlas:s,iconMapping:o,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:dt*r,sizeUnits:Xe,sizeMinPixels:ht*r,sizeMaxPixels:vt*r,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function v_e(n){ui.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),N1=new Rz(n)}(e)}}we(jO,"defaultProps",S_e),we(jO,"layerName","TextLayer");const Bz="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",C_e={lightSources:{}};function UO(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const VO={name:"lights",vs:Bz,fs:Bz,getUniforms:function jz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C_e;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function T_e(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?UO(e):[0,0,0],t.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=UO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=UO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return jz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},M_e={};const D_e={name:"phong-lighting",dependencies:[VO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function Vz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M_e;if(!("material"in n))return{};const{material:e}=n;return e?function I_e(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},HO=Math.PI/180,L1=new Float32Array(16),Hz=new Float32Array(12);function zz(n,e,t){const i=e[0]*HO,r=e[1]*HO,s=e[2]*HO,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=t[0],g=t[1],m=t[2];n[0]=f*h*u,n[1]=f*c*u,n[2]=f*-a,n[3]=g*(-c*l+h*a*o),n[4]=g*(h*l+c*a*o),n[5]=g*u*o,n[6]=m*(c*o+h*a*l),n[7]=m*(-h*o+c*a*l),n[8]=m*u*l}function Gz(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const Wz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=l||!c&&!!a(i[0]);n.constant=g?l:h&&u&&f;const m=n.value;if(n.constant){let v;g?(L1.set(a),v=Gz(L1)):(v=Hz,zz(v,r,s),v.set(o,9)),n.value=new Float32Array(v)}else{let v=e*n.size;const{iterable:w,objectInfo:N}=C1(i,e,t);for(const U of w){let ce;N.index++,g?(L1.set(l?a:a(U,N)),ce=Gz(L1)):(ce=Hz,zz(ce,h?r:r(U,N),u?s:s(U,N)),ce.set(f?o:o(U,N),9)),m[v++]=ce[0],m[v++]=ce[1],m[v++]=ce[2],m[v++]=ce[3],m[v++]=ce[4],m[v++]=ce[5],m[v++]=ce[6],m[v++]=ce[7],m[v++]=ce[8],m[v++]=ce[9],m[v++]=ce[10],m[v++]=ce[11]}}}};function $z(n,e){return e===bi.CARTESIAN||e===bi.METER_OFFSETS||e===bi.DEFAULT&&!n.isGeospatial}function Yz(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),ui.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function P_e(n,e){if(n.attributes)return Yz(n.attributes,e),n instanceof fh?n:new fh(n);if(n.positions||n.POSITION)return Yz(n,e),new fh({attributes:n});throw Error("Invalid mesh")}class zO extends Wf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){const e=!ni(this.context.gl),t={};return dR(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[O1,D_e,P1],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Wz}),this.setState({emptyTexture:new Ks(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||$z(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new xm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:P_e(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}we(zO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),we(zO,"layerName","SimpleMeshLayer");const Xz={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[VO]};class Em{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||ca(this.constructor.name),this.display=!0,this.position=new mo,this.rotation=new mo,this.scale=new mo(1,1,1),this.matrix=new Fn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Xt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Xt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Xt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:s=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){Xt(e),t=t||this.matrix;const i=new Fn(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class av extends Em{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;an.assert(t.every(i=>i instanceof Em),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const s=t.getBounds();if(!s)return;const[o,a]=s,c=new mo(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new mo(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let u=0;u<8;u++){const h=new mo(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Fn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Fn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof av?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let F1;class GO extends UV{static get ZERO(){return F1||(F1=new GO(0,0,0,0),Object.freeze(F1)),F1}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),ju(e)&&1===arguments.length?this.copy(e):(es.debug&&(ti(e),ti(t),ti(i),ti(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return es.debug&&(ti(e.x),ti(e.y),ti(e.z),ti(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ti(e)}get w(){return this[3]}set w(e){this[3]=ti(e)}transform(e){return xD(this,this,e),this.check()}transformByMatrix3(e){return function goe(n,e,t){const i=e[0],r=e[1],s=e[2];n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function poe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return GV(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function qz(){var n=new aa(4);return aa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Kz(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function Jz(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+o*a+r*l-s*c,n[1]=r*u+o*c+s*a-i*l,n[2]=s*u+o*l+i*c-r*a,n[3]=o*u-i*a-r*c-s*l,n}var Qz=JV,q_e=function(){var n=VV(),e=HV(1,0,0),t=HV(0,1,0);return function(i,r,s){var o=zV(r,s);return o<-.999999?(zE(n,e,r),function toe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&zE(n,t,r),function roe(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),Kz(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(zE(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function Woe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();qz(),qz(),function L_e(){var n=new aa(9);aa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const K_e=[0,0,0,1];class WO extends VE{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function Zz(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return Kz(this,e,t),this.check()}identity(){return function F_e(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ti(e)}get y(){return this[1]}set y(e){this[1]=ti(e)}get z(){return this[2]}set z(e){this[2]=ti(e)}get w(){return this[3]}set w(e){this[3]=ti(e)}len(){return function zoe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function Goe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function $oe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return q_e(this,e,t),this.check()}add(e){return function Hoe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function U_e(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function G_e(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function z_e(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function Yoe(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return Jz(this,this,e),this.check()}multiplyLeft(e){return Jz(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function k_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+o*a,n[1]=r*c+s*a,n[2]=s*c-r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function B_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-s*a,n[1]=r*c+o*a,n[2]=s*c+i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function j_e(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return Qz(this,this,e),this.check()}slerp(e,t,i){let r,s,o;switch(arguments.length){case 1:({start:r=K_e,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=t;break;default:r=e,s=t,o=i}return function k1(n,e,t,i){var f,g,m,v,w,r=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],h=t[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>Fl?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(v=1-i,w=i),n[0]=v*r+w*c,n[1]=v*s+w*l,n[2]=v*o+w*u,n[3]=v*a+w*h,n}(this,r,s,o),this.check()}transformVector4(e,t=new GO){return function Xoe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;n[0]=u*l+g*-o+h*-c-f*-a,n[1]=h*l+g*-a+f*-o-u*-c,n[2]=f*l+g*-c+u*-a-h*-o,n[3]=e[3]}(t,e,this),HE(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const J_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Z_e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function nG(n){if(!n._animation){const e=Z_e[n.componentType],t=J_e[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=t)a.push(Array.from(o.slice(c,c+t)));n._animation=a}}return n._animation}const Q_e=new Fn,$O=new WO;class sye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function rye(n,e,t,i){let{input:r,interpolation:s,output:o}=e;const c=n%r[r.length-1],l=r.findIndex(g=>g>=c),u=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:an.warn("Bad animation path ".concat(i))()}Xt(t[i].length===o[u].length);const h=r[u],f=r[l];switch(s){case"STEP":!function iye(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,o[u]);break;case"LINEAR":f>h&&function tye(n,e,t,i,r){if("rotation"===e){$O.slerp({start:t,target:i,ratio:r});for(let s=0;s<$O.length;s++)n[e][s]=$O[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(t,i,o[u],o[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function nye(n,e,t){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const u=r[l]*a,h=s[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:an.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function eye(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=Q_e.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(o,o._node)})}}class oye{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),s=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:nG(e.accessors[c]),interpolation:l,output:nG(e.accessors[u])}}),o=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new sye({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class aye extends Em{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof xm?(this.model=e,this._setModelNodeProps(t)):this.model=new xm(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class cye{constructor(e,t){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},dR(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new Ks(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(an.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function iG(n,e){return ni(n)?"#version 300 es\n".concat(e):e}const hye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fye={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class pye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},fye,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new oye(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new av({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new av({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Fn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new av({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){an.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function dye(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new cye(n,e);an.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new aye(n,{id:t,drawMode:i,vertexCount:r,modules:[Xz],parameters:a.parameters,vs:iG(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:iG(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...o,defines:{...a.defines,...o.defines}});return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),an.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Ji(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new la({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:hye[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var cv=S(9125);const yye="3.2.13",YO={};function $f(n){return XO.apply(this,arguments)}function XO(){return XO=jt(function*(n,e=null,t={}){return e&&(n=function vye(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:dh?t.CDN?(Ul(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(yye,"/dist/libs/").concat(n)):PR?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),YO[n]=YO[n]||function bye(n){return qO.apply(this,arguments)}(n),yield YO[n]}),XO.apply(this,arguments)}function qO(){return qO=jt(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!dh)try{return cv&&cv.requireFromFile&&(yield cv.requireFromFile(n))}catch{return null}return PR?importScripts(n):function wye(n,e){if(!dh)return cv.requireFromString&&cv.requireFromString(n,e);if(PR)return eval.call(Jde,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),qO.apply(this,arguments)}const xye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),Eye="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let KO,QO;function sG(n){return JO.apply(this,arguments)}function JO(){return JO=jt(function*(n){const e=n.modules||{};return e.basis?e.basis:(KO=KO||function Aye(n){return ZO.apply(this,arguments)}(n),yield KO)}),JO.apply(this,arguments)}function ZO(){return ZO=jt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield $f("basis_transcoder.js","textures",n),yield $f("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function Sye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,t)}),ZO.apply(this,arguments)}function oG(n){return e2.apply(this,arguments)}function e2(){return e2=jt(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(QO=QO||function Cye(n){return t2.apply(this,arguments)}(n),yield QO)}),e2.apply(this,arguments)}function t2(){return t2=jt(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield $f(Eye,"textures",n),yield $f(xye,"textures",n)]),e=e||globalThis.BASIS,yield function Tye(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,t)}),t2.apply(this,arguments)}const Mye=["","WEBKIT_","MOZ_"],aG={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let B1=null;var n2,j1,r2,U1,lG,s2,uG,dG;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(n2||(n2={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(j1||(j1={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(r2||(r2={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(U1||(U1={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(lG||(lG={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(s2||(s2={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(uG||(uG={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(dG||(dG={}));const Ba=[171,75,84,88,32,50,48,187,13,10,26,10],Nye={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function a2(){return a2=jt(function*(n,e){if("auto"===e.basis.containerFormat){if(function Pye(n){const e=new Uint8Array(n);return!(e.byteLength<Ba.length||e[0]!==Ba[0]||e[1]!==Ba[1]||e[2]!==Ba[2]||e[3]!==Ba[3]||e[4]!==Ba[4]||e[5]!==Ba[5]||e[6]!==Ba[6]||e[7]!==Ba[7]||e[8]!==Ba[8]||e[9]!==Ba[9]||e[10]!==Ba[10]||e[11]!==Ba[11])}(n))return pG((yield oG(e)).KTX2File,n,e);const{BasisFile:t}=yield sG(e);return c2(t,n,e)}if("encoder"===e.basis.module){const t=yield oG(e);return"ktx2"===e.basis.containerFormat?pG(t.KTX2File,n,e):c2(t.BasisFile,n,e)}{const{BasisFile:i}=yield sG(e);return c2(i,n,e)}}),a2.apply(this,arguments)}function c2(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(Fye(i,o,l,t));s.push(c)}return s}finally{i.close(),i.delete()}}function Fye(n,e,t,i){const r=n.getImageWidth(e,t),s=n.getImageHeight(e,t),o=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=gG(i,o),u=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(u);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function pG(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(kye(i,o,t));break}return[s]}finally{i.close(),i.delete()}}function kye(n,e,t){const{alphaFlag:i,height:r,width:s}=n.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=gG(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!n.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function gG(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=mG()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),Nye[t]}function mG(){const n=function Iye(n){if(!B1){n=n||function Dye(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,B1=new Set;for(const e of Mye)for(const t in aG)n&&n.getExtension("".concat(e).concat(t))&&B1.add(aG[t])}return B1}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const Bye={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Lye(n,e){return a2.apply(this,arguments)}};function Yf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const H1=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),_G=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Uye}=(_G&&parseFloat(_G[1]),globalThis),l2=typeof Image<"u",u2=typeof ImageBitmap<"u",d2=!!H1||!!Uye;function yG(n){const e=function bG(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const zye=/^data:image\/svg\+xml/,Gye=/\.svg((\?|#).*)?$/;function h2(n){return n&&(zye.test(n)||Gye.test(n))}function wG(n,e){if(h2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function xG(n,e,t){return f2.apply(this,arguments)}function f2(){return f2=jt(function*(n,e,t){const i=function Wye(n,e){if(h2(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return wG(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function $ye(n,e){return p2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),f2.apply(this,arguments)}function p2(){return p2=jt(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),p2.apply(this,arguments)}const Yye={};let EG=!0;function g2(){return g2=jt(function*(n,e,t){let i;i=h2(t)?yield xG(n,e,t):wG(n,t);const r=e&&e.imagebitmap;return yield function qye(n){return m2.apply(this,arguments)}(i,r)}),g2.apply(this,arguments)}function m2(){return m2=jt(function*(n,e=null){if((function Kye(n){for(const e in n||Yye)return!1;return!0}(e)||!EG)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),EG=!1}return yield createImageBitmap(n)}),m2.apply(this,arguments)}const Yl=!1,uv=!0;function _2(n){const e=dv(n);return function Jye(n){const e=dv(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Yl)?{mimeType:"image/png",width:e.getUint32(16,Yl),height:e.getUint32(20,Yl)}:null}(e)||function e0e(n){const e=dv(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Yl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function t0e(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Yl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Yl),width:e.getUint16(s+7,Yl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Yl)}return null}(e)||function Zye(n){const e=dv(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Yl)?{mimeType:"image/gif",width:e.getUint16(6,uv),height:e.getUint16(8,uv)}:null}(e)||function Qye(n){const e=dv(n);return e.byteLength>=14&&16973===e.getUint16(0,Yl)&&e.getUint32(2,uv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,uv),height:e.getUint32(22,uv)}:null}(e)}function dv(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function y2(){return y2=jt(function*(n,e){const{mimeType:t}=_2(n)||{},i=globalThis._parseImageNode;return Yf(i),yield i(n,t)}),y2.apply(this,arguments)}function v2(){return v2=jt(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function r0e(n){switch(n){case"auto":case"data":return function Hye(){if(u2)return"imagebitmap";if(l2)return"image";if(d2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Vye(n){switch(n){case"auto":return u2||l2||d2;case"imagebitmap":return u2;case"image":return l2;case"data":return d2;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function Xye(n,e,t){return g2.apply(this,arguments)}(n,e,s);break;case"image":a=yield xG(n,e,s);break;case"data":a=yield function n0e(n,e){return y2.apply(this,arguments)}(n,e);break;default:Yf(!1)}return"data"===r&&(a=function vG(n){switch(yG(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),v2.apply(this,arguments)}const s0e={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function i0e(n,e,t){return v2.apply(this,arguments)},tests:[n=>!!_2(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function AG(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function SG(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function ja(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function CG(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function hv(n,e){return Yf(n>=0),Yf(e>0),n+(e-1)&~(e-1)}function c0e(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+hv(i.byteLength,4)}const MG=["SCALAR","VEC2","VEC3","VEC4"],l0e=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],u0e=new Map(l0e),d0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},h0e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},f0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function IG(n){return MG[n-1]||MG[0]}function DG(n){const e=u0e.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function RG(n,e){const t=f0e[n.componentType],i=d0e[n.type],s=n.count*i,o=n.count*i*h0e[n.componentType];return ja(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const p0e={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class fc{constructor(e){we(this,"gltf",void 0),we(this,"sourceBuffers",void 0),we(this,"byteLength",void 0),this.gltf=e||{json:{...p0e},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return ja(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=RG(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return ja(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return ja(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=_2(e),r=t||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;ja(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=hv(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:IG(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:DG(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=c0e(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const m0e="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",_0e="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",y0e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),v0e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),OG={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},b0e={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function E2(){return E2=jt(function*(n,e,t,i,r,s="NONE"){const o=yield function z1(){return S2.apply(this,arguments)}();!function G1(n,e,t,i,r,s,o){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),u=a(s.length),h=new Uint8Array(n.exports.memory.buffer);h.set(s,u);const f=e(l,i,r,u,s.length);if(0===f&&o&&o(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[b0e[r]],n,e,t,i,o.exports[OG[s||"NONE"]])}),E2.apply(this,arguments)}let A2;function S2(){return S2=jt(function*(){return A2||(A2=function x0e(){return C2.apply(this,arguments)}()),A2}),S2.apply(this,arguments)}function C2(){return C2=jt(function*(){let n=m0e;WebAssembly.validate(y0e)&&(n=_0e,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function E0e(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?v0e[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),C2.apply(this,arguments)}const T2="EXT_meshopt_compression",A0e=T2;function S0e(n,e){return M2.apply(this,arguments)}function M2(){return M2=jt(function*(n,e){var t;const i=new fc(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const s of n.json.bufferViews||[])r.push(C0e(i,s));yield Promise.all(r),i.removeExtension(T2)}),M2.apply(this,arguments)}function C0e(n,e){return I2.apply(this,arguments)}function I2(){return I2=jt(function*(n,e){const t=n.getObjectExtension(e,T2);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=t,u=n.gltf.buffers[l],h=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function w0e(n,e,t,i,r){return E2.apply(this,arguments)}(f,o,s,h,a,c),f}return null}),I2.apply(this,arguments)}const T0e=["image/png","image/jpeg","image/gif"],D2={};const Sm="EXT_texture_webp",R0e=Sm;function O0e(n,e){const t=new fc(n);if(!function M0e(n){return void 0===D2[n]&&(D2[n]=function I0e(n){switch(n){case"image/webp":return function D0e(){if(!H1)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return H1;default:if(!H1){const{_parseImageNode:e}=globalThis;return!!e&&T0e.includes(n)}return!0}}(n)),D2[n]}("image/webp")){if(t.getRequiredExtensions().includes(Sm))throw new Error("gltf: Required extension ".concat(Sm," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,Sm);s&&(r.source=s.source),t.removeObjectExtension(r,Sm)}t.removeExtension(Sm)}const W1="KHR_texture_basisu",P0e=W1;function N0e(n,e){const t=new fc(n),{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,W1);s&&(r.source=s.source),t.removeObjectExtension(r,W1)}t.removeExtension(W1)}const NG={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class $1{constructor(e,t,i=!1,r=new Map){we(this,"name",void 0),we(this,"type",void 0),we(this,"nullable",void 0),we(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new $1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Zi,LG,FG,kG,BG,jG,UG,VG,HG;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(Zi||(Zi={}));class Xf{static isNull(e){return e&&e.typeId===Zi.Null}static isInt(e){return e&&e.typeId===Zi.Int}static isFloat(e){return e&&e.typeId===Zi.Float}static isBinary(e){return e&&e.typeId===Zi.Binary}static isUtf8(e){return e&&e.typeId===Zi.Utf8}static isBool(e){return e&&e.typeId===Zi.Bool}static isDecimal(e){return e&&e.typeId===Zi.Decimal}static isDate(e){return e&&e.typeId===Zi.Date}static isTime(e){return e&&e.typeId===Zi.Time}static isTimestamp(e){return e&&e.typeId===Zi.Timestamp}static isInterval(e){return e&&e.typeId===Zi.Interval}static isList(e){return e&&e.typeId===Zi.List}static isStruct(e){return e&&e.typeId===Zi.Struct}static isUnion(e){return e&&e.typeId===Zi.Union}static isFixedSizeBinary(e){return e&&e.typeId===Zi.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Zi.FixedSizeList}static isMap(e){return e&&e.typeId===Zi.Map}static isDictionary(e){return e&&e.typeId===Zi.Dictionary}get typeId(){return Zi.NONE}compareTo(e){return this===e}}Symbol,Symbol,LG=Symbol.toStringTag;class Cm extends Xf{constructor(e,t){super(),we(this,"isSigned",void 0),we(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return Zi.Int}get[LG](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class F0e extends Cm{constructor(){super(!0,8)}}class k0e extends Cm{constructor(){super(!0,16)}}class B0e extends Cm{constructor(){super(!0,32)}}class j0e extends Cm{constructor(){super(!1,8)}}class U0e extends Cm{constructor(){super(!1,16)}}class V0e extends Cm{constructor(){super(!1,32)}}FG=Symbol.toStringTag;class zG extends Xf{constructor(e){super(),we(this,"precision",void 0),this.precision=e}get typeId(){return Zi.Float}get[FG](){return"Float"}toString(){return"Float".concat(this.precision)}}class H0e extends zG{constructor(){super(32)}}class z0e extends zG{constructor(){super(64)}}Symbol,Symbol,kG=Symbol.toStringTag,BG=Symbol.toStringTag,jG=Symbol.toStringTag,UG=Symbol.toStringTag,VG=Symbol.toStringTag;class G0e extends Xf{constructor(e,t){super(),we(this,"listSize",void 0),we(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return Zi.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[VG](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}HG=Symbol.toStringTag;class Tm{constructor(e,t){we(this,"fields",void 0),we(this,"metadata",void 0),function X0e(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function q0e(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Tm(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Tm(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Tm){const o=e;t=o.fields,i=WG(WG(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new Tm(s,i)}}function WG(n,e){return new Map([...n||new Map,...e||new Map])}function $G(n,e,t){return function GG(n,e,t){const i=function W0e(n){switch(n.constructor){case Int8Array:return new F0e;case Uint8Array:return new j0e;case Int16Array:return new k0e;case Uint16Array:return new U0e;case Int32Array:return new B0e;case Uint32Array:return new V0e;case Float32Array:return new H0e;case Float64Array:return new z0e;default:throw new Error("array type not supported")}}(e.value),r=t||function Y0e(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new $1(n,new G0e(e.size,new $1("value",i)),!1,r)}(n,e,t?YG(t.metadata):void 0)}function YG(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const XG={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Z0e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class eve{constructor(e){we(this,"draco",void 0),we(this,"decoder",void 0),we(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,t),c=this._getMeshData(s,a,t),l=function L0e(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],h=a[l+1],f=a[l+2];e=u<e?u:e,t=h<t?h:t,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,t,i],[r,s,o]]}(c.attributes),u=function K0e(n,e,t){const i=YG(e.metadata),r=[],s=function J0e(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const c=$G(o,n[o],s[o]);r.push(c)}if(t){const o=$G("indices",t);r.push(o)}return new Tm(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,t);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(t,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function ive(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=Z0e[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function tve(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,u),l=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in XG)if(this.draco[o]===r)return XG[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function nve(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const Y1="1.4.1",rve="https://www.gstatic.com/draco/versioned/decoders/".concat(Y1,"/draco_decoder.js"),sve="https://www.gstatic.com/draco/versioned/decoders/".concat(Y1,"/draco_wasm_wrapper.js"),ove="https://www.gstatic.com/draco/versioned/decoders/".concat(Y1,"/draco_decoder.wasm");let fv;function N2(){return N2=jt(function*(n){const e=n.modules||{};return fv=e.draco3d?fv||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):fv||function lve(n){return F2.apply(this,arguments)}(n),yield fv}),N2.apply(this,arguments)}function F2(){return F2=jt(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield $f(rve,"draco",n):[e,t]=yield Promise.all([yield $f(sve,"draco",n),yield $f(ove,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function uve(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),F2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(Y1,"/javascript/draco_encoder.js");const B2={...NG,parse:function hve(n,e){return j2.apply(this,arguments)}};function j2(){return j2=jt(function*(n,e){const{draco:t}=yield function cve(n){return N2.apply(this,arguments)}(e),i=new eve(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),j2.apply(this,arguments)}function qG(n){const{buffer:e,size:t,count:i}=function pve(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function gve(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:IG(t),componentType:DG(e)}}const qf="KHR_draco_mesh_compression",mve=qf;function _ve(n,e,t){const i=new fc(n);for(const r of KG(i))i.getObjectExtension(r,qf)}function yve(n,e,t){return U2.apply(this,arguments)}function U2(){return U2=jt(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new fc(n),s=[];for(const o of KG(r))r.getObjectExtension(o,qf)&&s.push(bve(r,o,e,t));yield Promise.all(s),r.removeExtension(qf)}),U2.apply(this,arguments)}function vve(n,e={}){const t=new fc(n);for(const i of t.json.meshes||[])wve(i),t.addRequiredExtension(qf)}function bve(n,e,t,i){return V2.apply(this,arguments)}function V2(){return V2=jt(function*(n,e,t,i){const r=n.getObjectExtension(e,qf);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=SG(s.buffer,s.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(o,B2,c,i),u=function fve(n){const e={};for(const t in n)if("indices"!==t){const r=qG(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=n.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,l.indices&&(e.indices=qG(l.indices)),function xve(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),V2.apply(this,arguments)}function wve(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:t,extensions:{[qf]:{bufferView:l,attributes:c}}}]}}function*KG(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const Kf="KHR_lights_punctual",Eve=Kf;function Ave(n){return H2.apply(this,arguments)}function H2(){return H2=jt(function*(n){const e=new fc(n),{json:t}=e,i=e.getExtension(Kf);i&&(e.json.lights=i.lights,e.removeExtension(Kf));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,Kf);s&&(r.light=s.light),e.removeObjectExtension(r,Kf)}}),H2.apply(this,arguments)}function Sve(n){return z2.apply(this,arguments)}function z2(){return z2=jt(function*(n){const e=new fc(n),{json:t}=e;if(t.lights){const i=e.addExtension(Kf);ja(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Kf,i);delete e.json.lights}}),z2.apply(this,arguments)}const gv="KHR_materials_unlit",Cve=gv;function Tve(n){return G2.apply(this,arguments)}function G2(){return G2=jt(function*(n){const e=new fc(n),{json:t}=e;e.removeExtension(gv);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,gv)}),G2.apply(this,arguments)}function Mve(n){const e=new fc(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,gv,{}),e.addExtension(gv))}const mv="KHR_techniques_webgl",Ive=mv;function Dve(n){return W2.apply(this,arguments)}function W2(){return W2=jt(function*(n){const e=new fc(n),{json:t}=e,i=e.getExtension(mv);if(i){const r=function Ove(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,mv);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=Pve(s.technique,e)),e.removeObjectExtension(s,mv)}e.removeExtension(mv)}}),W2.apply(this,arguments)}function Rve(n,e){return $2.apply(this,arguments)}function $2(){return($2=jt(function*(n,e){})).apply(this,arguments)}function Pve(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const JG=[Q,C,$,z,X,_,E];function Y2(){return Y2=jt(function*(n,e={},t){const i=JG.filter(s=>ZG(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,n,e,t)}}),Y2.apply(this,arguments)}function ZG(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const X2="KHR_binary_glTF",QG={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},kve={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class Bve{constructor(){we(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),we(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Fve(n){const e=new fc(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,X2);r&&Object.assign(i,r),e.removeObjectExtension(i,X2)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(X2)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in QG)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in QG)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=kve[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const s of e.materials){var t,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(t=s.values)||void 0===t?void 0:t.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const Uve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Vve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Hve={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},zve={10240:9729,10241:9986,10242:10497,10243:10497};class $ve{constructor(){we(this,"baseUri",""),we(this,"json",{}),we(this,"buffers",[]),we(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return ja(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Gve(n){return Vve[n]}(e.componentType),e.components=function Wve(n){return Uve[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=RG(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=t+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):zve,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Hve[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const e6=1735152710,q2=12,X1=8,Xve=1313821514,qve=5130562,Kve=0,Jve=1,Zve=0,Mm=!0;function K2(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),hv(i,4)}function J2(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),hv(i,4)}function Z2(){return Z2=jt(function*(n,e,t=0,i,r){var s,o,a,c;(function obe(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function ebe(n,e=0,t={}){const i=new DataView(n),{magic:r=e6}=t,s=i.getUint32(e,!1);return s===r||s===e6}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function a0e(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function o0e(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?AG(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?AG(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};t=function tbe(n,e,t=0,i={}){const r=new DataView(e),s=function Qve(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),o=r.getUint32(t+4,Mm),a=r.getUint32(t+8,Mm);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=q2,n.version){case 1:return function nbe(n,e,t){Yf(n.header.byteLength>q2+X1);const i=e.getUint32(t+0,Mm),r=e.getUint32(t+4,Mm);return t+=X1,Yf(r===Zve),K2(n,e,t,i),(t+=i)+J2(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function ibe(n,e,t,i){return Yf(n.header.byteLength>q2+X1),function rbe(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Mm),s=e.getUint32(t+4,Mm);switch(t+=X1,s){case Xve:K2(n,e,t,r);break;case qve:J2(n,e,t,r);break;case Kve:i.strict||K2(n,e,t,r);break;case Jve:i.strict||J2(n,e,t,r)}t+=hv(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(o,e,t,i.glb),ja("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),n._glb=o,n.json=o.json}else ja(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function jve(n,e={}){(new Bve).normalize(n,e)}(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function Nve(n,e={},t){const i=JG.filter(s=>ZG(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield function abe(n,e,t){return Q2.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function cbe(n,e,t){return eP.apply(this,arguments)}(n,i,r);l.push(h)}const u=function Lve(n){return Y2.apply(this,arguments)}(n,i,r);return l.push(u),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function Yve(n,e){return(new $ve).postProcess(n,e)}(n,i):n}),Z2.apply(this,arguments)}function Q2(){return Q2=jt(function*(n,e,t){const i=n.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=t;ja(c);const l=CG(a.uri,e),u=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);n.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[o]&&(n.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Q2.apply(this,arguments)}function eP(){return eP=jt(function*(n,e,t){const i=function lbe(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],s=[];for(const o of i)s.push(ube(n,r[o],o,e,t));return yield Promise.all(s)}),eP.apply(this,arguments)}function ube(n,e,t,i,r){return tP.apply(this,arguments)}function tP(){return tP=jt(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=CG(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function TG(n,e,t){const i=n.bufferViews[t];ja(i);const s=e[i.buffer];return ja(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=SG(l.buffer,l.byteOffset,l.byteLength)}ja(a,"glTF image has no data");let c=yield o(a,[s0e,Bye],{mimeType:e.mimeType,basis:i.basis||{format:mG()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),tP.apply(this,arguments)}const Im={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function dbe(n){return nP.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function nP(){return nP=jt(function*(n,e={},t){(e={...Im.options,...e}).gltf={...Im.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function sbe(n,e){return Z2.apply(this,arguments)}({},n,i,e,t)}),nP.apply(this,arguments)}function iP(){return iP=jt(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function fbe(n){return rP.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),iP.apply(this,arguments)}function rP(){return rP=jt(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),rP.apply(this,arguments)}const t6=[255,255,255,255],mbe={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:t6},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Im]};class sP extends Wf{constructor(...e){super(...e),we(this,"state",void 0)}getShaders(){const e=[O1,P1];return"pbr"===this.props._lighting&&e.push(Xz),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:t6,transition:!0},instanceModelMatrix:Wz})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof Em)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function gye(n,e,t){const i=new pye(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function hbe(n){return iP.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(ui.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof Em?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&ui.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):ui.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):ui.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Em&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!ni(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(u),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:$z(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}we(sP,"defaultProps",mbe),we(sP,"layerName","ScenegraphLayer");class _be extends fh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("sphere-geometry")}=e,{indices:i,attributes:r}=function ybe(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(t+1);if("number"==typeof i){const N=i;i=(U,ce,re,Me,Ne)=>N}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),v=new(u>65535?Uint32Array:Uint16Array)(e*t*6);for(let N=0;N<=e;N++)for(let U=0;U<=t;U++){const ce=U/t,re=N/e,Me=U+N*(t+1),Ne=2*Me,st=3*Me,dt=l*ce,Xe=o*re,ht=Math.sin(dt),vt=Math.cos(dt),Ct=Math.sin(Xe),gt=vt*Ct,Pt=Math.cos(Xe),Lt=ht*Ct,gn=i(gt,Pt,Lt,ce,re);h[st+0]=gn*gt,h[st+1]=gn*Pt,h[st+2]=gn*Lt,f[st+0]=gt,f[st+1]=Pt,f[st+2]=Lt,g[Ne+0]=ce,g[Ne+1]=1-re}const w=t+1;for(let N=0;N<t;N++)for(let U=0;U<e;U++){const ce=6*(N*e+U);v[ce+0]=U*w+N,v[ce+1]=U*w+N+1,v[ce+2]=(U+1)*w+N,v[ce+3]=(U+1)*w+N,v[ce+4]=U*w+N+1,v[ce+5]=(U+1)*w+N+1}return{indices:{size:1,value:v},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const vbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class n6 extends fh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("truncated-code-geometry")}=e,{indices:i,attributes:r}=function bbe(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),u=(r+1)*(s+1+l),h=Math.atan2(e-t,i),f=Math.sin,g=Math.cos,m=Math.PI,v=g(h),w=f(h),N=a?-2:0,U=s+(c?2:0),ce=r+1,re=new Uint16Array(r*(s+l)*6),Me=vbe[o],Ne=new Float32Array(3*u),st=new Float32Array(3*u),dt=new Float32Array(2*u);let Xe=0,ht=0;for(let vt=N;vt<=U;vt++){let gt,Ct=vt/s,ft=i*Ct;vt<0?(ft=0,Ct=1,gt=e):vt>s?(ft=i,Ct=1,gt=t):gt=e+vt/s*(t-e),(-2===vt||vt===s+2)&&(gt=0,Ct=0),ft-=i/2;for(let Pt=0;Pt<ce;Pt++){const Lt=f(Pt*m*2/r),gn=g(Pt*m*2/r);Ne[Xe+Me[0]]=Lt*gt,Ne[Xe+Me[1]]=ft,Ne[Xe+Me[2]]=gn*gt,st[Xe+Me[0]]=vt<0||vt>s?0:Lt*v,st[Xe+Me[1]]=vt<0?-1:vt>s?1:w,st[Xe+Me[2]]=vt<0||vt>s?0:gn*v,dt[ht+0]=Pt/r,dt[ht+1]=Ct,ht+=2,Xe+=3}}for(let vt=0;vt<s+l;vt++)for(let Ct=0;Ct<r;Ct++){const ft=6*(vt*r+Ct);re[ft+0]=ce*(vt+0)+0+Ct,re[ft+1]=ce*(vt+0)+1+Ct,re[ft+2]=ce*(vt+1)+1+Ct,re[ft+3]=ce*(vt+0)+0+Ct,re[ft+4]=ce*(vt+1)+1+Ct,re[ft+5]=ce*(vt+1)+0+Ct}return{indices:re,attributes:{POSITION:{size:3,value:Ne},NORMAL:{size:3,value:st},TEXCOORD_0:{size:2,value:dt}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class wbe extends n6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class xbe extends n6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const Ebe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Abe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Sbe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Cbe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Tbe={POSITION:{size:3,value:new Float32Array(Abe)},NORMAL:{size:3,value:new Float32Array(Sbe)},TEXCOORD_0:{size:2,value:new Float32Array(Cbe)}};class Mbe extends fh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=ca("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(Ebe)},attributes:{...Tbe,...e.attributes}})}}function q1(n,e,t){e||(e=new Fn(Fn.IDENTITY));const i=new Fn(Fn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new Fn(Fn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new Fn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===q1(s,r,t))return!1;return!0}function i6(){o8([NG,Im])}function r6(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||q1(r,new Fn(Fn.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function s6(n,e){return oP.apply(this,arguments)}function oP(){return oP=jt(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield y1(i,Im,{DracoLoader:B2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),r6(n.scenegraphNode,r)}),oP.apply(this,arguments)}function Ibe(n,e){return aP.apply(this,arguments)}function aP(){return aP=jt(function*(n,e){return r6(n,yield e)}),aP.apply(this,arguments)}class $c{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new ve);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new ve);const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new $c);const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],v=r[0],w=r[1],N=r[2],U=r[3],ce=r[4],re=r[5],Me=r[6],Ne=r[7],st=r[8];return s[0]=o*v+a*U+c*Me,s[1]=o*w+a*ce+c*Ne,s[2]=o*N+a*re+c*st,s[3]=l*v+u*U+h*Me,s[4]=l*w+u*ce+h*Ne,s[5]=l*N+u*re+h*st,s[6]=f*v+g*U+m*Me,s[7]=f*w+g*ce+m*Ne,s[8]=f*N+g*re+m*st,t}scale(e,t){void 0===t&&(t=new $c);const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t){void 0===t&&(t=new ve);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--c);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new $c);const r=Dbe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,c=r+r,l=t*o,u=t*a,h=t*c,f=i*a,g=i*c,m=r*c,v=s*o,w=s*a,N=s*c,U=this.elements;return U[0]=1-(f+m),U[1]=u-N,U[2]=h+w,U[3]=u+N,U[4]=1-(l+m),U[5]=g-v,U[6]=h-w,U[7]=g+v,U[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new $c);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const Dbe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ve{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new ve);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return t.x=a*s-c*r,t.y=c*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new ve(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new ve(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new $c([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ve);const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new ve);const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t){return void 0===t&&(t=new ve),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new ve),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ve),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=Rbe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=Obe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(o6),o6.almostEquals(e,t)}clone(){return new ve(this.x,this.y,this.z)}}ve.ZERO=new ve(0,0,0),ve.UNIT_X=new ve(1,0,0),ve.UNIT_Y=new ve(0,1,0),ve.UNIT_Z=new ve(0,0,1);const Rbe=new ve,Obe=new ve,o6=new ve;class cr{constructor(e){void 0===e&&(e={}),this.lowerBound=new ve,this.upperBound=new ve,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,a6),l=a6),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new cr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),t.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,t){const i=c6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=c6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(h,f));return!(m<0||g>m)}}const a6=new ve,c6=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve];class Pbe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Hr{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new ve),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=Nbe;e.tangents(i,Lbe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new Hr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return t.x=i*u+o*a+r*l-s*c,t.y=r*u+o*c+s*a-i*l,t.z=s*u+o*l+i*c-r*a,t.w=o*u-i*a-r*c-s*l,t}inverse(e){void 0===e&&(e=new Hr);const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Hr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new ve);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;return t.x=u*l+g*-o+h*-c-f*-a,t.y=h*l+g*-a+f*-o-u*-c,t.z=f*l+g*-c+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,s;void 0===t&&(t="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const u=o*a+c*l;if(u>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*g)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===r&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new Hr(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new Hr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,v,w,c=e.x,l=e.y,u=e.z,h=e.w;return g=r*c+s*l+o*u+a*h,g<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-t)*f)/m,w=Math.sin(t*f)/m):(v=1-t,w=t),i.x=v*r+w*c,i.y=v*s+w*l,i.z=v*o+w*u,i.w=v*a+w*h,i}integrate(e,t,i,r){void 0===r&&(r=new Hr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,u=this.z,h=this.w,f=.5*t;return r.x+=f*(s*h+o*u-a*l),r.y+=f*(o*h+a*c-s*u),r.z+=f*(a*h+s*l-o*c),r.w+=f*(-s*c-o*l-a*u),r}}const Nbe=new ve,Lbe=new ve,Fbe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let cn=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=Fbe,n})();class xi{constructor(e){void 0===e&&(e={}),this.position=new ve,this.quaternion=new Hr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return xi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return xi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new ve),i.vsub(e,r),t.conjugate(u6),u6.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new ve),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new ve),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new ve),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const u6=new Hr;class Jf extends cn{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:cn.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ve;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){t[o[c]].vsub(t[o[(c+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new ve;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];Jf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new ve,o=new ve;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,c,l){const u=new ve;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const v=u.dot(o);v>f&&(f=v,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const v=i.vertices[i.faces[h][m]],w=new ve;w.copy(v),s.vmult(w,w),r.vadd(w,w),g.push(w)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,c,l)}findSeparatingAxis(e,t,i,r,s,o,a,c){const l=new ve,u=new ve,h=new ve,f=new ve,g=new ve,m=new ve;let v=Number.MAX_VALUE;const w=this;if(w.uniqueAxes)for(let N=0;N!==w.uniqueAxes.length;N++){i.vmult(w.uniqueAxes[N],l);const U=w.testSepAxis(l,e,t,i,r,s);if(!1===U)return!1;U<v&&(v=U,o.copy(l))}else{const N=a?a.length:w.faces.length;for(let U=0;U<N;U++){l.copy(w.faceNormals[a?a[U]:U]),i.vmult(l,l);const re=w.testSepAxis(l,e,t,i,r,s);if(!1===re)return!1;re<v&&(v=re,o.copy(l))}}if(e.uniqueAxes)for(let N=0;N!==e.uniqueAxes.length;N++){s.vmult(e.uniqueAxes[N],u);const U=w.testSepAxis(u,e,t,i,r,s);if(!1===U)return!1;U<v&&(v=U,o.copy(u))}else{const N=c?c.length:e.faces.length;for(let U=0;U<N;U++){u.copy(e.faceNormals[c?c[U]:U]),s.vmult(u,u);const re=w.testSepAxis(u,e,t,i,r,s);if(!1===re)return!1;re<v&&(v=re,o.copy(u))}}for(let N=0;N!==w.uniqueEdges.length;N++){i.vmult(w.uniqueEdges[N],f);for(let U=0;U!==e.uniqueEdges.length;U++)if(s.vmult(e.uniqueEdges[U],g),f.cross(g,m),!m.almostZero()){m.normalize();const ce=w.testSepAxis(m,e,t,i,r,s);if(!1===ce)return!1;ce<v&&(v=ce,o.copy(m))}}return r.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){Jf.project(this,e,i,r,cP),Jf.project(t,e,s,o,lP);const c=cP[0],l=cP[1],u=lP[0],h=lP[1];if(c<h||u<l)return!1;const f=c-h,g=u-l;return f<g?f:g}calculateLocalInertia(e,t){const i=new ve,r=new ve;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const c=new ve,l=new ve,u=new ve,h=new ve,f=new ve,g=new ve,m=new ve,v=new ve,w=this,U=r,ce=[];let re=-1,Me=Number.MAX_VALUE;for(let ht=0;ht<w.faces.length;ht++){c.copy(w.faceNormals[ht]),i.vmult(c,c);const vt=c.dot(e);vt<Me&&(Me=vt,re=ht)}if(re<0)return;const Ne=w.faces[re];Ne.connectedFaces=[];for(let ht=0;ht<w.faces.length;ht++)for(let vt=0;vt<w.faces[ht].length;vt++)-1!==Ne.indexOf(w.faces[ht][vt])&&ht!==re&&-1===Ne.connectedFaces.indexOf(ht)&&Ne.connectedFaces.push(ht);const st=Ne.length;for(let ht=0;ht<st;ht++){const vt=w.vertices[Ne[ht]];vt.vsub(w.vertices[Ne[(ht+1)%st]],l),u.copy(l),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[re]),i.vmult(h,h),t.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(vt),i.vmult(g,g),t.vadd(g,g);const ft=Ne.connectedFaces[ht];m.copy(this.faceNormals[ft]);const gt=this.getPlaneConstantOfFace(ft);v.copy(m),i.vmult(v,v);const Pt=gt-v.dot(t);for(this.clipFaceAgainstPlane(U,ce,v,Pt);U.length;)U.shift();for(;ce.length;)U.push(ce.shift())}m.copy(this.faceNormals[re]);const dt=this.getPlaneConstantOfFace(re);v.copy(m),i.vmult(v,v);const Xe=dt-v.dot(t);for(let ht=0;ht<U.length;ht++){let vt=v.dot(U[ht])+Xe;vt<=s&&(console.log(`clamped: depth=${vt} to minDist=${s}`),vt=s),vt<=o&&vt<=1e-6&&a.push({point:U[ht],normal:v,depth:vt})}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],o=i.dot(l)+r,s<0)if(o<0){const h=new ve;h.copy(l),t.push(h)}else{const h=new ve;c.lerp(l,s/(s-o),h),t.push(h)}else if(o<0){const h=new ve;c.lerp(l,s/(s-o),h),t.push(h),t.push(l)}c=l,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ve);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new ve);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,c,l,u,h,f=new ve;for(let g=0;g<s.length;g++)f.copy(s[g]),t.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===u||f.y>u)&&(u=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,c),r.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ve);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,o=new ve;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],u=new ve;e.vsub(l,u);const h=c.dot(u),f=new ve;o.vsub(l,f);const g=c.dot(f);if(h<0&&g>0||h>0&&g<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=Bbe;let c=0,l=0;const u=jbe,h=e.vertices;u.setZero(),xi.vectorToLocalFrame(i,r,t,a),xi.pointToLocalFrame(i,r,u,u);const f=u.dot(a);l=c=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>c&&(c=m),m<l&&(l=m)}if(l-=f,c-=f,l>c){const g=l;l=c,c=g}s[0]=c,s[1]=l}}const cP=[],lP=[],Bbe=(new ve,new ve),jbe=new ve;class K1 extends cn{constructor(e){super({type:cn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=ve,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Jf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new ve),K1.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)gh.set(s[o][0],s[o][1],s[o][2]),t.vmult(gh,gh),e.vadd(gh,gh),i(gh.x,gh.y,gh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;Xl[0].set(s.x,s.y,s.z),Xl[1].set(-s.x,s.y,s.z),Xl[2].set(-s.x,-s.y,s.z),Xl[3].set(-s.x,-s.y,-s.z),Xl[4].set(s.x,-s.y,-s.z),Xl[5].set(s.x,s.y,-s.z),Xl[6].set(-s.x,s.y,-s.z),Xl[7].set(s.x,-s.y,s.z);const o=Xl[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Xl[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,h=c.z;l>r.x&&(r.x=l),u>r.y&&(r.y=u),h>r.z&&(r.z=h),l<i.x&&(i.x=l),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const gh=new ve,Xl=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve];class ln extends Pbe{constructor(e){void 0===e&&(e={}),super(),this.id=ln.idCounter++,this.index=-1,this.world=null,this.vlambda=new ve,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ve,this.previousPosition=new ve,this.interpolatedPosition=new ve,this.initPosition=new ve,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ve,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ve,this.force=new ve;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?ln.STATIC:ln.DYNAMIC,typeof e.type==typeof ln.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=ln.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ve,this.quaternion=new Hr,this.initQuaternion=new Hr,this.previousQuaternion=new Hr,this.interpolatedQuaternion=new Hr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ve,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ve,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ve,this.invInertia=new ve,this.invInertiaWorld=new $c,this.invMassSolve=0,this.invInertiaSolve=new ve,this.invInertiaWorldSolve=new $c,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ve(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ve(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new cr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ve,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=ln.AWAKE,this.wakeUpAfterNarrowphase=!1,e===ln.SLEEPING&&this.dispatchEvent(ln.wakeupEvent)}sleep(){this.sleepState=ln.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===ln.AWAKE&&i<r?(this.sleepState=ln.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(ln.sleepyEvent)):t===ln.SLEEPY&&i>r?this.wakeUp():t===ln.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ln.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ln.SLEEPING||this.type===ln.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new ve),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new ve),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new ve,s=new Hr;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=Ube,o=Vbe,a=this.quaternion,c=this.aabb,l=Hbe;for(let u=0;u!==r;u++){const h=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=zbe,r=Gbe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new ve),this.type!==ln.DYNAMIC)return;this.sleepState===ln.SLEEPING&&this.wakeUp();const i=$be;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new ve),this.type!==ln.DYNAMIC)return;const i=Ybe,r=Xbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===ln.DYNAMIC&&(this.sleepState===ln.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new ve),this.type!==ln.DYNAMIC)return;this.sleepState===ln.SLEEPING&&this.wakeUp();const i=t,r=qbe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=Kbe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new ve),this.type!==ln.DYNAMIC)return;const i=Jbe,r=Zbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Qbe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),K1.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new ve;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==ln.DYNAMIC&&this.type!==ln.KINEMATIC||this.sleepState===ln.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,v=this.angularFactor,w=c.x*v.x,N=c.y*v.y,U=c.z*v.z;s.x+=e*(m[0]*w+m[1]*N+m[2]*U),s.y+=e*(m[3]*w+m[4]*N+m[5]*U),s.z+=e*(m[6]*w+m[7]*N+m[8]*U),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ln.idCounter=0,ln.COLLIDE_EVENT_NAME="collide",ln.DYNAMIC=1,ln.STATIC=2,ln.KINEMATIC=4,ln.AWAKE=0,ln.SLEEPY=1,ln.SLEEPING=2,ln.wakeupEvent={type:"wakeup"},ln.sleepyEvent={type:"sleepy"},ln.sleepEvent={type:"sleep"};const Ube=new ve,Vbe=new Hr,Hbe=new cr,zbe=new $c,Gbe=new $c,$be=(new $c,new ve),Ybe=new ve,Xbe=new ve,qbe=new ve,Kbe=new ve,Jbe=new ve,Zbe=new ve,Qbe=new ve;new ve,new ve,new Hr,new ve,new ve,new ve,new ve;class _v{constructor(){this.rayFromWorld=new ve,this.rayToWorld=new ve,this.hitNormalWorld=new ve,this.hitPointWorld=new ve,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let d6,h6,f6,p6,g6,m6,_6;d6=cn.types.SPHERE,h6=cn.types.PLANE,f6=cn.types.BOX,p6=cn.types.CYLINDER,g6=cn.types.CONVEXPOLYHEDRON,m6=cn.types.HEIGHTFIELD,_6=cn.types.TRIMESH;class bs{get[d6](){return this._intersectSphere}get[h6](){return this._intersectPlane}get[f6](){return this._intersectBox}get[p6](){return this._intersectConvex}get[g6](){return this._intersectConvex}get[m6](){return this._intersectHeightfield}get[_6](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new ve),void 0===t&&(t=new ve),this.from=e.clone(),this.to=t.clone(),this.direction=new ve,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=bs.ANY,this.result=new _v,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||bs.ANY,this.result=t.result||new _v,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(y6),fP.length=0,e.broadphase.aabbQuery(e,y6,fP),this.intersectBodies(fP),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=owe,s=awe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function Ewe(n,e,t){t.vsub(n,Zf);const i=Zf.dot(e);return e.scale(i,Z1),Z1.vadd(n,Z1),t.distanceTo(Z1)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new ve(0,0,1);t.vmult(l,l);const u=new ve;o.vsub(i,u);const h=u.dot(l);if(a.vsub(i,u),h*u.dot(l)>0||o.distanceTo(a)<h)return;const g=l.dot(c);if(Math.abs(g)<this.precision)return;const m=new ve,v=new ve,w=new ve;o.vsub(i,m);const N=-l.dot(m)/g;c.scale(N,v),o.vadd(v,w),this.reportIntersection(l,w,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=cwe;o.from.copy(this.from),o.to.copy(this.to),xi.pointToLocalFrame(i,t,o.from,o.from),xi.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=lwe;let c,l,u,h;c=l=0,u=h=e.data.length-1;const f=new cr;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=c;g<u;g++)for(let m=l;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),xi.pointToWorldFrame(i,t,e.pillarOffset,J1),this._intersectConvex(e.pillarConvex,t,J1,r,s,v6),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),xi.pointToWorldFrame(i,t,e.pillarOffset,J1),this._intersectConvex(e.pillarConvex,t,J1,r,s,v6)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=u**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),g=uwe,m=dwe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const v=(-u-Math.sqrt(f))/(2*l),w=(-u+Math.sqrt(f))/(2*l);if(v>=0&&v<=1&&(o.lerp(a,v,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(o.lerp(a,w,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=hwe,c=b6,l=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,w=m.distanceTo(this.to),N=l?l.length:u.length,U=this.result;for(let ce=0;!U.shouldStop&&ce<N;ce++){const re=l?l[ce]:ce,Me=u[re],Ne=f[re],st=t,dt=i;c.copy(h[Me[0]]),st.vmult(c,c),c.vadd(dt,c),c.vsub(m,c),st.vmult(Ne,a);const Xe=g.dot(a);if(Math.abs(Xe)<this.precision)continue;const ht=a.dot(c)/Xe;if(!(ht<0)){g.scale(ht,ua),ua.vadd(m,ua),Yc.copy(h[Me[0]]),st.vmult(Yc,Yc),dt.vadd(Yc,Yc);for(let vt=1;!U.shouldStop&&vt<Me.length-1;vt++){ql.copy(h[Me[vt]]),Kl.copy(h[Me[vt+1]]),st.vmult(ql,ql),st.vmult(Kl,Kl),dt.vadd(ql,ql),dt.vadd(Kl,Kl);const Ct=ua.distanceTo(m);!bs.pointInTriangle(ua,Yc,ql,Kl)&&!bs.pointInTriangle(ua,ql,Yc,Kl)||Ct>w||this.reportIntersection(a,ua,s,r,re)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=gwe,c=wwe,l=xwe,u=b6,h=mwe,f=_we,g=ywe,m=bwe,v=vwe,w=e.indices,N=this.from,U=this.to,ce=this.direction;l.position.copy(i),l.quaternion.copy(t),xi.vectorToLocalFrame(i,t,ce,h),xi.pointToLocalFrame(i,t,N,f),xi.pointToLocalFrame(i,t,U,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const re=f.distanceSquared(g);e.tree.rayQuery(this,l,c);for(let Me=0,Ne=c.length;!this.result.shouldStop&&Me!==Ne;Me++){const st=c[Me];e.getNormal(st,a),e.getVertex(w[3*st],Yc),Yc.vsub(f,u);const dt=h.dot(a),Xe=a.dot(u)/dt;if(Xe<0)continue;h.scale(Xe,ua),ua.vadd(f,ua),e.getVertex(w[3*st+1],ql),e.getVertex(w[3*st+2],Kl);const ht=ua.distanceSquared(f);!bs.pointInTriangle(ua,ql,Yc,Kl)&&!bs.pointInTriangle(ua,Yc,ql,Kl)||ht>re||(xi.vectorToWorldFrame(t,a,v),xi.pointToWorldFrame(i,t,ua,m),this.reportIntersection(v,m,s,r,st))}c.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case bs.ALL:this.hasHit=!0,l.set(o,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case bs.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c));break;case bs.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Zf),i.vsub(t,yv),e.vsub(t,pP);const s=Zf.dot(Zf),o=Zf.dot(yv),a=Zf.dot(pP),c=yv.dot(yv),l=yv.dot(pP);let u,h;return(u=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&u+h<s*c-o*o}}bs.CLOSEST=1,bs.ANY=2,bs.ALL=4;const y6=new cr,fP=[],yv=new ve,pP=new ve,owe=new ve,awe=new Hr,ua=new ve,Yc=new ve,ql=new ve,Kl=new ve;new ve,new _v;const v6={faceList:[0]},J1=new ve,cwe=new bs,lwe=[],uwe=new ve,dwe=new ve,hwe=new ve,b6=(new ve,new ve,new ve),gwe=new ve,mwe=new ve,_we=new ve,ywe=new ve,vwe=new ve,bwe=new ve;new cr;const wwe=[],xwe=new xi,Zf=new ve,Z1=new ve;new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new bs,new ve,new ve,new ve,new ve(1,0,0),new ve(0,1,0),new ve(0,0,1),new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new cr,new ve,new cr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new cr,new ve,new xi,new cr,new ve,new ve,new ve,new ve,new ve,new Hr,new Hr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new cr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new Hr,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve,new cr,new bs;const Ps=globalThis.performance||{};if(!Ps.now){let n=Date.now();Ps.timing&&Ps.timing.navigationStart&&(n=Ps.timing.navigationStart),Ps.now=()=>Date.now()-n}function yP(){return yP=jt(function*(n){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Fn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new cr({lowerBound:new ve(...c.map((u,h)=>Math.min(u,l[h]))),upperBound:new ve(...l.map((u,h)=>Math.max(u,c[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield Z0(o.scenegraph,Im,{DracoLoader:B2,decompress:!0,postProcess:!0});for(const c of a.scenes)q1(c,new Fn(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new cr({lowerBound:new ve(...f.map((m,v)=>Math.min(m,g[v]))),upperBound:new ve(...g.map((m,v)=>Math.max(m,f[v])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of t)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),yP.apply(this,arguments)}function vP(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new _be;break;case"cone":i=new wbe;break;case"cylinder":i=new xbe;break;default:i=new Mbe}return new zO({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:bi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function $6(n,e,t){if(e&&0!==e.length)return new jO({id:n,pickable:!0,data:e.map(i=>({...i,position:new Fn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}new ve;let M1e=(()=>{class n extends NO{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),i6()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of t.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=s6({scenegraph:o.scenegraph},n.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const c of a)s.push(new sP({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:bi.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?Ibe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===o?(s.push($6("text",a.filter(c=>c.unpickable),{pickable:!1})),s.push($6("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===o?s.push(vP(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(vP(o,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(vP(`${o}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return t.doCollisions&&function T1e(n){yP.apply(this,arguments)}(t.data),s.filter(o=>!!o)}getPickingInfo(t){return t.info}}return n})();function Y6(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),Y6(t,e);return e}function bP(){return bP=jt(function*(n,e,t,i){i6();const r=yield s6({scenegraph:n,scenegraphNode:t},i),s={},o=[];e=new Fn(e??Fn.IDENTITY);for(const a of r.scenes)q1(a,e,(c,l)=>{const u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Fn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new Fn(e||Fn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),g=l.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new cr({lowerBound:new ve(...f.map((m,v)=>Math.min(m,g[v]))),upperBound:new ve(...g.map((m,v)=>Math.max(m,f[v])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of Y6(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ve(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Fn(Fn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),bP.apply(this,arguments)}class np{constructor(e){this.deckProps=e,this.bodyUILayer=new M1e({}),this.nodeClickSubject=new Zt,this.nodeHoverStartSubject=new Zt,this.nodeHoverStopSubject=new Zt,this.sceneRotationSubject=new Ui([0,0]),this.nodeDragStartSubject=new Zt,this.nodeDragSubject=new Zt,this.nodeDragEndSubject=new Zt,this.nodeClick$=this.nodeClickSubject.pipe($u()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe($u()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe($u()),this.sceneRotation$=this.sceneRotationSubject.pipe($u()),this.nodeDragStart$=this.nodeDragStartSubject.pipe($u()),this.nodeDrag$=this.nodeDragSubject.pipe($u()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe($u());const t={...e,views:["orthographic"===e.camera?new BD({flipY:!1,near:-1e3}):new _H({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(t.effects=[new yR({ambientLight:new A4({color:[255,255,255],intensity:10})})]),this.deck=new bO(t),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return jt(function*(){for(;!e.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let t=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);t=i?.05:t,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,t):this.bodyUILayer.setState({data:e,zoomOpacity:t})}}debugSceneNodeProcessing(e,t){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new Fn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function I1e(n,e,t,i){return bP.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:t})})}zoomTo(e){const t=new Fn(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:t.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:t}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object?.["@id"]?t!==e.object&&(t&&this.nodeHoverStopSubject.next(t),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):t&&(this.nodeHoverStopSubject.next(t),this.lastHovered=void 0)}_onClick(e,t){e.picked&&e.object?.["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:t?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(e){if(e.interactionState?.isZooming){const t=this.bodyUILayer.state,i=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);t.zoomOpacity!==i&&this.bodyUILayer.setState({data:t.data,zoomOpacity:i})}this.deck.setProps({viewState:{...e.viewState}}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,t){this._dragEvent(e,t,this.nodeDragStartSubject)}_onDrag(e,t){this._dragEvent(e,t,this.nodeDragSubject)}_onDragEnd(e,t){this._dragEvent(e,t,this.nodeDragEndSubject)}_dragEvent(e,t,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:t})}}Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],np.prototype,"_onHover",null),Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,Object]),Ft("design:returntype",void 0)],np.prototype,"_onClick",null),Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],np.prototype,"_onViewStateChange",null),Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],np.prototype,"_onDragStart",null),Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],np.prototype,"_onDrag",null),Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[Object,MouseEvent]),Ft("design:returntype",void 0)],np.prototype,"_onDragEnd",null);const D1e=["bodyCanvas"];let R1e=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new pn,this.nodeDrag=new pn,this.nodeClick=new pn,this.nodeHoverStart=new pn,this.nodeHoverStop=new pn,this.initialized=new pn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t=this;return jt(function*(){const i=t.bodyCanvas.nativeElement,r=new np({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(s=>t.rotationChange.next(s)),t.bodyUI.nodeDrag$.subscribe(s=>t.nodeDrag.emit(s)),t.bodyUI.nodeClick$.subscribe(s=>t.nodeClick.emit(s)),t.bodyUI.nodeHoverStart$.subscribe(s=>t.nodeHoverStart.emit(s)),t.bodyUI.nodeHoverStop$.subscribe(s=>t.nodeHoverStop.emit(s))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Ds(D1e,5,ei),2&i){let s;Fi(s=ki())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&$d(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&or(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),X6=(()=>{class n{constructor(){this.bootstrap$=new Nf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O1e(n,e){return n===e}function wP(n,e=O1e){let t=null,i=null;function r(){return function P1e(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let N1e=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const q6=new xt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>N1e.pop()}),K6=new xt("\u0275NGXS_STATE_FACTORY"),J6=new xt("\u0275NGXS_STATE_CONTEXT_FACTORY");function Kt(...n){return Qr(n,I0(n))}const{isArray:L1e}=Array,{getPrototypeOf:F1e,prototype:k1e,keys:B1e}=Object;function Z6(n){if(1===n.length){const e=n[0];if(L1e(e))return{args:e,keys:null};if(function j1e(n){return n&&"object"==typeof n&&F1e(n)===k1e}(e)){const t=B1e(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:U1e}=Array;function oA(n){return $t(e=>function V1e(n,e){return U1e(e)?n(...e):n(e)}(n,e))}function Q6(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Av(...n){const e=SV(n),{args:t,keys:i}=Z6(n),r=new St(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let h=!1;_s(t[u]).subscribe(hn(s,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?Q6(i,a):a),s.complete())}))}});return e?r.pipe(oA(e)):r}function mh(n,e){const t=Re(n)?n:()=>n,i=r=>r.error(t());return new St(e?r=>e.schedule(i,0,r):i)}function ip(n){return!!n&&(n instanceof St||Re(n.lift)&&Re(n.subscribe))}function wi(n,e){return di((t,i)=>{let r=0;t.subscribe(hn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Uo(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,$u({connector:()=>new Nf(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ir(n){return n<=0?()=>Bo:di((e,t)=>{let i=0;e.subscribe(hn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function e5(n,e){return e?t=>t.pipe(e5((i,r)=>_s(n(i,r)).pipe($t((s,o)=>e(i,s,r,o))))):di((t,i)=>{let r=0,s=null,o=!1;t.subscribe(hn(i,a=>{s||(s=hn(i,void 0,()=>{s=null,o&&i.complete()}),_s(n(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function Pm(n){return di((e,t)=>{let i=!1;e.subscribe(hn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Xc(n){return di((e,t)=>{let s,i=null,r=!1;i=e.subscribe(hn(t,void 0,void 0,o=>{s=_s(n(o,Xc(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function da(n){return di((e,t)=>{_s(n).subscribe(hn(t,()=>t.complete(),ut)),!t.closed&&e.subscribe(t)})}function _h(n,e=Hs){return n=n??H1e,di((t,i)=>{let r,s=!0;t.subscribe(hn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function H1e(n,e){return n===e}function Bi(n,e,t){const i=Re(n)||e||t?{next:n,error:e,complete:t}:n;return i?di((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(hn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Hs}function Sv(...n){return function z1e(){return LE(1)}()(Qr(n,I0(n)))}function Jl(...n){const e=I0(n);return di((t,i)=>{(e?Sv(n,t,e):Sv(n,t)).subscribe(i)})}function rp(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const o5=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},EP=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),AP=n=>n&&"object"==typeof n&&!Array.isArray(n),SP=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(AP(n)&&AP(t))for(const i in t)AP(t[i])?(n[i]||Object.assign(n,{[i]:{}}),SP(n[i],t[i])):Object.assign(n,{[i]:t[i]});return SP(n,...e)};let a5=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return tD(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return mn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return mn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(ot(mn),ot(Ia))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c5=new xt("ROOT_OPTIONS"),l5=new xt("ROOT_STATE_TOKEN"),u5=new xt("FEATURE_STATE_TOKEN"),d5=new xt("NGXS_PLUGINS"),Qu="NGXS_META",h5="NGXS_OPTIONS_META",CP="NGXS_SELECTOR_META";let cA=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=a5}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:function(t){let i=null;return t?i=new t:(r=ot(c5),i=SP(new n,r)),i;var r},providedIn:"root"}),n})();class Q1e{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let eAe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f5=new xt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),tAe=new xt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=kt(Eu),e=n.get(f5);return n.get(e||(typeof hi.Zone<"u"?a5:eAe))}});function TP(n){if(!n.hasOwnProperty(Qu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Qu,{value:e})}return sp(n)}function sp(n){return n[Qu]}function lA(n){return n[CP]}function p5(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function nAe(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function iAe(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}function lAe(...n){return function Nm(n,e,t=hAe){const i=function fAe(n){return n.reduce((e,t)=>(e[rp(t)]=!0,e),{})}(n),r=e&&function pAe(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function uAe(n,e){return wi(t=>{const i=rp(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function hAe(){return $t(n=>n.action)}function uA(n){return e=>new St(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let g5=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(ot(tAe))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m5(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const s=e.pop();s&&n(...s)}t=!1}}}class gAe extends Zt{constructor(){super(...arguments),this._orderedNext=m5(e=>super.next(e))}next(e){this._orderedNext(e)}}class mAe extends Ui{constructor(e){super(e),this._orderedNext=m5(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let _5=(()=>{class n extends gAe{ngOnDestroy(){this.complete()}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Gi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y5=n=>(...e)=>n.shift()(...e,(...i)=>y5(n)(...i));let v5=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(Ra));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(ot(Ki))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IP=(()=>{class n extends mAe{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DP=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(ot(n,12),ot(d5,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),b5=(()=>{class n extends Zt{}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Gi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yAe=(()=>{class n{constructor(t,i,r,s,o,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function _Ae(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new St(r=>(i=!0,t.pipe(uA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?Kt(this._stateStream.getValue()):Av(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return y5([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Uo())}getActionResultStream(t){return this._actionResults.pipe(wi(i=>i.action===t&&"DISPATCHED"!==i.status),Ir(1),Uo())}createDispatchObservable(t){return t.pipe(e5(i=>{switch(i.status){case"SUCCESSFUL":return Kt(this._stateStream.getValue());case"ERRORED":return mh(i.error);default:return Bo}})).pipe(Uo())}}return n.\u0275fac=function(t){return new(t||n)(ot(_5),ot(b5),ot(DP),ot(IP),ot(g5),ot(v5))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cv=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(ot(IP),ot(yAe),ot(cA))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RP=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>A5(i.getState(),t.path),patchState(r){const s=i.getState(),o=function vAe(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(r);return E5(i,s,o,t.path)},setState(r){const s=i.getState();return function aA(n){return"function"==typeof n}(r)?E5(i,s,r,t.path):x5(i,s,r,t.path)},dispatch:r=>i.dispatch(r)}}}return n.\u0275fac=function(t){return new(t||n)(ot(Cv))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x5(n,e,t,i){const r=o5(e,i,t);return n.setState(r),r}function E5(n,e,t,i){return x5(n,e,t(A5(e,i)),i)}function A5(n,e){return EP(n,e)}new RegExp("^[a-zA-Z0-9_]+$");let S5=(()=>{class n{}return n.type="@@INIT",n})(),C5=(()=>{class n{constructor(t){this.addedStates=t}}return n.type="@@UPDATE_STATE",n})();new xt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Lm=(()=>{class n{constructor(t,i,r,s,o,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=wP(()=>{const l=this;function u(f){const g=l.statePaths[f];return g?p5(g.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(t){let i=t;return Array.isArray(t)?i=t.slice():function cAe(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?i=Object.assign({},t):void 0===t&&(i={}),i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function rAe(n){const e=t=>n.find(r=>r===t)[Qu].name;return n.reduce((t,i)=>{const{name:r,children:s}=i[Qu];return t[r]=(s||[]).map(e),t},{})}(i),s=function aAe(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function oAe(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function sAe(n){return n.reduce((e,t)=>(e[t[Qu].name]=t,e),{})}(i),c=[];for(const l of s){const u=a[l],h=o[l],f=u[Qu];this.addRuntimeInfoToMeta(f,h);const g={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:n._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>o5(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new Zt;this._actionsSubscription=this._actions.pipe(wi(i=>"DISPATCHED"===i.status),ys(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe($t(()=>({action:r,status:"SUCCESSFUL"})),Pm({action:r,status:"CANCELED"}),Xc(s=>Kt({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=rp(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const u=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](u,i);h instanceof Promise&&(h=Qr(h)),ip(h)?(h=h.pipe(ys(f=>f instanceof Promise?Qr(f):ip(f)?f:Kt(f)),Pm({})),l.options.cancelUncompleted&&(h=h.pipe(da(t.pipe(lAe(i)))))):h=Kt({}).pipe(Uo()),s.push(h)}catch(h){s.push(mh(h))}o=!0}}return s.length||s.push(Kt({})),Av(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=sp(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==EP(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(ot(Ki),ot(cA),ot(n,12),ot(_5),ot(b5),ot(RP),ot(q6,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function T5(n){const e=lA(n)||sp(n);return e&&e.makeRootSelector||(()=>n)}let ed=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(uA(this._internalExecutionStrategy),Uo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe($t(i),Xc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?Kt(void 0):mh(r)}),_h(),uA(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Ir(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(uA(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return T5(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(ot(IP),ot(Cv),ot(cA),ot(g5),ot(Lm),ot(q6,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hA=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(ot(ed),ot(cA))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M5=(()=>{class n{constructor(t,i,r,s,o){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new Zt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(wi(()=>!!i),Bi(()=>this._invokeInitOnStates(i.states)),ys(()=>this._bootstrapper.appBootstrapped$),wi(r=>!!r),Xc(r=>(this._internalErrorReporter.reportErrorSafely(r),Bo)),da(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>EP(s,i.path)).pipe(Jl(void 0),di((n,e)=>{let t,i=!1;n.subscribe(hn(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))}),da(this._destroy$)).subscribe(([s,o])=>{const a=new Q1e(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(ot(ed),ot(v5),ot(Cv),ot(RP),ot(X6))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OAe=(()=>{class n{constructor(t,i,r,s,o=[],a){const c=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new S5,c)}}return n.\u0275fac=function(t){return new(t||n)(ot(Lm),ot(Cv),ot(ed),ot(hA),ot(l5,8),ot(M5))},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})(),PAe=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new C5(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(ot(ed),ot(Cv),ot(Lm),ot(u5,8),ot(M5))},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})(),NAe=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:OAe,providers:[Lm,DP,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:PAe,providers:[Lm,DP,...t,{provide:u5,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:f5,useValue:i.executionStrategy},{provide:l5,useValue:t},{provide:c5,useValue:i},{provide:hE,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[X6]},{provide:J6,useExisting:RP},{provide:K6,useExisting:Lm}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})();function OP(n,e){return(t,i)=>{const r=TP(t.constructor);Array.isArray(n)||(n=[n]);for(const s of n){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function PP(n){return e=>{const t=e,i=TP(t),r=Object.getPrototypeOf(t),s=function LAe(n,e){return Object.assign(Object.assign({},n[h5]||{}),e)}(r,n);(function FAe(n){const{meta:e,inheritedStateClass:t,optionsWithInheritance:i}=n,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;if(t.hasOwnProperty(Qu)){const c=t[Qu]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),t[h5]=s}}const kAe=36;function fA(n,...e){return function(t,i){const r=i.toString(),s=`__${r}__selector`,o=function jAe(n,e,t=[]){return e=e||function UAe(n){const e=n.length-1;return n.charCodeAt(e)===kAe?n.slice(0,e):n}(n),"string"==typeof e?p5(t.length?[e,...t]:e.split("."),hA.config):e}(r,n,e);Object.defineProperties(t,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function BAe(n){return hA.store||function Z1e(){throw new Error("You have forgotten to import the NGXS module!")}(),hA.store.select(n)}(o))}}})}}const I5="NGXS_SELECTOR_OPTIONS_META",pA={getOptions:n=>n&&n[I5]||{},defineOptions:(n,e)=>{n&&(n[I5]=e)}};function VAe(n,e){const t=function MP(n){return n.hasOwnProperty(CP)||Object.defineProperty(n,CP,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),lA(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function HAe(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},pA.getOptions(n.containerClass)||{}),pA.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function Tv(n,e,t){const i=function IAe(n,e){const t=e&&e.containerClass,r=wP(function(...o){const a=n.apply(t,o);return a instanceof Function?wP.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=VAe(e,t);return r.makeRootSelector=function MAe(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function DAe(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),o=function RAe(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&sp(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>T5(a)(n));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,n,i),i}function Fm(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,s=Tv(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let D5=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Fc),rt(ei))};static#t=this.\u0275dir=Wt({type:n})}return n})(),op=(()=>{class n extends D5{static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})();static#t=this.\u0275dir=Wt({type:n,features:[oi]})}return n})();const gc=new xt("NgValueAccessor"),$Ae={provide:gc,useExisting:ge(()=>mA),multi:!0},XAe=new xt("CompositionEventMode");let mA=(()=>{class n extends D5{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YAe(){const n=Jd()?Jd().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Fc),rt(ei),rt(XAe,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&ai("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[vi([$Ae]),oi]})}return n})();function yh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function O5(n){return null!=n&&"number"==typeof n.length}const Qs=new xt("NgValidators"),vh=new xt("NgAsyncValidators"),qAe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class KAe{static min(e){return function P5(n){return e=>{if(yh(e.value)||yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function N5(n){return e=>{if(yh(e.value)||yh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function L5(n){return yh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function F5(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function k5(n){return yh(n.value)||qAe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function B5(n){return e=>yh(e.value)||!O5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function j5(n){return e=>O5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function U5(n){if(!n)return _A;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(yh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return $5(e)}static composeAsync(e){return Y5(e)}}function _A(n){return null}function V5(n){return null!=n}function H5(n){return Wg(n)?Qr(n):n}function z5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function G5(n,e){return e.map(t=>t(n))}function W5(n){return n.map(e=>function JAe(n){return!n.validate}(e)?e:t=>e.validate(t))}function $5(n){if(!n)return null;const e=n.filter(V5);return 0==e.length?null:function(t){return z5(G5(t,e))}}function NP(n){return null!=n?$5(W5(n)):null}function Y5(n){if(!n)return null;const e=n.filter(V5);return 0==e.length?null:function(t){return Av(G5(t,e).map(H5)).pipe($t(z5))}}function LP(n){return null!=n?Y5(W5(n)):null}function X5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function q5(n){return n._rawValidators}function K5(n){return n._rawAsyncValidators}function FP(n){return n?Array.isArray(n)?n:[n]:[]}function yA(n,e){return Array.isArray(n)?n.includes(e):n===e}function J5(n,e){const t=FP(e);return FP(n).forEach(r=>{yA(t,r)||t.push(r)}),t}function Z5(n,e){return FP(e).filter(t=>!yA(n,t))}class Q5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=NP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vo extends Q5{get formDirective(){return null}get path(){return null}}class td extends Q5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class e9{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let t9=(()=>{class n extends e9{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(td,2))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Wi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[oi]})}return n})(),n9=(()=>{class n extends e9{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Vo,10))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Wi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[oi]})}return n})();const Mv="VALID",bA="INVALID",km="PENDING",Iv="DISABLED";function jP(n){return(wA(n)?n.validators:n)||null}function UP(n,e){return(wA(e)?e.asyncValidators:n)||null}function wA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class o9{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mv}get invalid(){return this.status===bA}get pending(){return this.status==km}get disabled(){return this.status===Iv}get enabled(){return this.status!==Iv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(J5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(J5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Z5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Z5(e,this._rawAsyncValidators))}hasValidator(e){return yA(this._rawValidators,e)}hasAsyncValidator(e){return yA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=km,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Iv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mv,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mv||this.status===km)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iv:Mv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=km,this._hasOwnPendingAsyncValidator=!0;const t=H5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pn,this.statusChanges=new pn}_calculateStatus(){return this._allControlsDisabled()?Iv:this.errors?bA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(km)?km:this._anyControlsHaveStatus(bA)?bA:Mv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function tSe(n){return Array.isArray(n)?NP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function nSe(n){return Array.isArray(n)?LP(n):n||null}(this._rawAsyncValidators)}}class VP extends o9{constructor(e,t,i){super(jP(t),UP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function s9(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new Ge(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function r9(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ge(1e3,"");if(!i[t])throw new Ge(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Dv=new xt("CallSetDisabledState",{providedIn:"root",factory:()=>HP}),HP="always";function Rv(n,e,t=HP){zP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sSe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&a9(n,e)})}(n,e),function aSe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oSe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&a9(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rSe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function EA(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),SA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function AA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zP(n,e){const t=q5(n);null!==e.validator?n.setValidators(X5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=K5(n);null!==e.asyncValidator?n.setAsyncValidators(X5(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();AA(e._rawValidators,r),AA(e._rawAsyncValidators,r)}function SA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=q5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=K5(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return AA(e._rawValidators,i),AA(e._rawAsyncValidators,i),t}function a9(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function c9(n,e){zP(n,e)}function l9(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const hSe={provide:Vo,useExisting:ge(()=>Pv)},Ov=(()=>Promise.resolve())();let Pv=(()=>{class n extends Vo{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new pn,this.form=new VP({},NP(t),LP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ov.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Rv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ov.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ov.then(()=>{const i=this._findContainer(t.path),r=new VP({});c9(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ov.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ov.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,l9(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Qs,10),rt(vh,10),rt(Dv,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&ai("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vi([hSe]),oi]})}return n})();function u9(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function d9(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const YP=class extends o9{constructor(e=null,t,i){super(jP(t),UP(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=d9(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){u9(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){u9(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){d9(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},fSe=YP;let m9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const b9=new xt("NgModelWithFormControlWarning"),xSe={provide:td,useExisting:ge(()=>XP)};let XP=(()=>{class n extends td{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new pn,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=function $P(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===mA?t=s:function uSe(n){return Object.getPrototypeOf(n.constructor)===op}(s)?i=s:r=s}),r||i||t||null}(0,r)}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&EA(i,this,!1),Rv(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function WP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&EA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||n)(rt(Qs,10),rt(vh,10),rt(gc,10),rt(b9,8),rt(Dv,8))};static#n=this.\u0275dir=Wt({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[vi([xSe]),oi,zi]})}return n})();const ESe={provide:Vo,useExisting:ge(()=>CA)};let CA=(()=>{class n extends Vo{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(SA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Rv(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){EA(t.control||null,t,!1),function dSe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,l9(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(EA(i||null,t),(n=>n instanceof YP)(r)&&(Rv(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);c9(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function cSe(n,e){return SA(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zP(this.form,this),this._oldForm&&SA(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Qs,10),rt(vh,10),rt(Dv,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&ai("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vi([ESe]),oi,zi]})}return n})();const Nv=ct(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});let tN;try{tN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{tN=!1}let Bm,Ho=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Zd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!tN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ia))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const P9=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function N9(){if(Bm)return Bm;if("object"!=typeof document||!document)return Bm=new Set(P9),Bm;let n=document.createElement("input");return Bm=new Set(P9.filter(e=>(n.setAttribute("type",e),n.type===e))),Bm}let Lv,cp,nN;function Fv(n){return function zSe(){if(null==Lv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Lv=!0}))}finally{Lv=Lv||!1}return Lv}()?n:!!n.capture}function GSe(){if(null==cp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return cp=!1,cp;if("scrollBehavior"in document.documentElement.style)cp=!0;else{const n=Element.prototype.scrollTo;cp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return cp}function iN(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function nd(n){return n.composedPath?n.composedPath()[0]:n.target}function rN(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bh(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class cCe extends _t{constructor(e,t){super()}schedule(e,t=0){return this}}const IA={setInterval(n,e,...t){const{delegate:i}=IA;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=IA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class aN extends cCe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return IA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&IA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Dt(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class kv{constructor(e,t=kv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}kv.now=hD.now;class cN extends kv{constructor(e,t=kv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const DA=new cN(aN),lCe=DA;function B9(n,e=DA){return di((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(hn(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function lN(n){return wi((e,t)=>n<=t)}function jm(n){return null!=n&&"false"!=`${n}`}function uN(n,e=0){return function uCe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function RA(n){return Array.isArray(n)?n:[n]}function ws(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wh(n){return n instanceof ei?n.nativeElement:n}function Bv(...n){const e=I0(n),t=SV(n),{args:i,keys:r}=Z6(n);if(0===i.length)return Qr([],e);const s=new St(function hCe(n,e,t=Hs){return i=>{j9(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)j9(e,()=>{const l=Qr(n[c],e);let u=!1;l.subscribe(hn(i,h=>{s[c]=h,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Q6(r,o):Hs));return t?s.pipe(oA(t)):s}function j9(n,e,t){n?Bu(t,n,e):e()}const U9=new Set;let lp,fCe=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gCe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function pCe(n,e){if(!U9.has(n))try{lp||(lp=document.createElement("style"),e&&(lp.nonce=e),lp.setAttribute("type","text/css"),document.head.appendChild(lp)),lp.sheet&&(lp.sheet.insertRule(`@media ${n} {body{ }}`,0),U9.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho),ot(dy,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gCe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let mCe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Zt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return V9(RA(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Bv(V9(RA(t)).map(o=>this._registerQuery(o).observable));return s=Sv(s.pipe(Ir(1)),s.pipe(lN(1),B9(0))),s.pipe($t(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new St(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Jl(i),$t(({matches:o})=>({query:t,matches:o})),da(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(ot(fCe),ot(mn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V9(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function z9(n,e,t){const i=G9(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))}function dN(n,e,t){const r=G9(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}function G9(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}class vCe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Zt,this._typeaheadSubscription=_t.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Zt,this.change=new Zt,e instanceof _0&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Bi(t=>this._pressedLetters.push(t)),B9(e),wi(()=>this._pressedLetters.length>0),$t(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||bh(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof _0?this._items.toArray():this._items}}class bCe extends vCe{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let hN=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function xCe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function wCe(n){try{return n.frameElement}catch{return null}}(function DCe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===$9(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=$9(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function MCe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function ICe(n){return!function ACe(n){return function CCe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function ECe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function SCe(n){return function TCe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||W9(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W9(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function $9(n){if(!W9(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class RCe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ir(1)).subscribe(e)}}let Y9=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new RCe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(hN),ot(mn),ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X9(n){return 0===n.buttons||0===n.detail}function q9(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const OCe=new xt("cdk-input-modality-detector-options"),PCe={ignoreKeys:[18,17,224,91,16]},Um=Fv({passive:!0,capture:!0});let NCe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ui(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=nd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(X9(o)?"keyboard":"mouse"),this._mostRecentTarget=nd(o))},this._onTouchstart=o=>{q9(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=nd(o))},this._options={...PCe,...s},this.modalityDetected=this._modality.pipe(lN(1)),this.modalityChanged=this.modalityDetected.pipe(_h()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Um),r.addEventListener("mousedown",this._onMousedown,Um),r.addEventListener("touchstart",this._onTouchstart,Um)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Um),document.removeEventListener("mousedown",this._onMousedown,Um),document.removeEventListener("touchstart",this._onTouchstart,Um))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho),ot(mn),ot(Zn),ot(OCe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const FCe=new xt("cdk-focus-monitor-default-options"),OA=Fv({passive:!0,capture:!0});let PA=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Zt,this._rootNodeFocusAndBlurListener=a=>{for(let l=nd(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=wh(t);if(!this._platform.isBrowser||1!==r.nodeType)return Kt();const s=function $Se(n){if(function WSe(){if(null==nN){const n=typeof document<"u"?document.head:null;nN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return nN}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Zt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=wh(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=wh(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=nd(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,OA),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,OA)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(da(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,OA),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,OA),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ot(mn),ot(Ho),ot(NCe),ot(Zn,8),ot(FCe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const J9="cdk-high-contrast-black-on-white",Z9="cdk-high-contrast-white-on-black",fN="cdk-high-contrast-active";let kCe=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=kt(mCe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(fN,J9,Z9),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(fN,J9):2===i&&t.add(fN,Z9)}}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho),ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const BCe=new xt("cdk-dir-doc",{providedIn:"root",factory:function jCe(){return kt(Zn)}}),UCe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let jv=(()=>{class n{constructor(t){this.value="ltr",this.change=new pn,t&&(this.value=function VCe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?UCe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(ot(BCe,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({})}return n})();const HCe=["text"];function zCe(n,e){if(1&n&&or(0,"mat-pseudo-checkbox",6),2&n){const t=kr();jn("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function GCe(n,e){1&n&&or(0,"mat-pseudo-checkbox",7),2&n&&jn("disabled",kr().disabled)}function WCe(n,e){if(1&n&&(sn(0,"span",8),ps(1),on()),2&n){const t=kr();dn(1),Pl("(",t.group.label,")")}}const $Ce=[[["mat-icon"]],"*"],YCe=["mat-icon","*"],qCe=new xt("mat-sanity-checks",{providedIn:"root",factory:function XCe(){return!0}});let NA=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!rN()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(ot(kCe),ot(qCe,8),ot(Zn))};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Q9,Q9]})}return n})();function KCe(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function JCe(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?uN(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function ZCe(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let eTe=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class tTe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const nW=Fv({passive:!0,capture:!0});class nTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=nd(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nW)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nW)))}}const iW={enterDuration:225,exitDuration:150},rW=Fv({passive:!0,capture:!0}),sW=["mousedown","touchstart"],oW=["mouseup","mouseleave","touchend","touchcancel"];class LA{static#e=this._eventManager=new nTe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wh(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...iW,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function rTe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),g=h.transitionDuration,m="none"===h.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,v=new tTe(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",v.state=0,i.persistent||(this._mostRecentTransientRipple=v);let w=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const N=()=>this._finishRippleTransition(v),U=()=>this._destroyRipple(v);u.addEventListener("transitionend",N),u.addEventListener("transitioncancel",U),w={onTransitionEnd:N,onTransitionCancel:U}}),this._activeRipples.set(v,w),(m||!l)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...iW,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wh(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sW.forEach(i=>{LA._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{oW.forEach(t=>{this._triggerElement.addEventListener(t,this,rW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=X9(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!q9(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(sW.forEach(t=>LA._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&oW.forEach(t=>e.removeEventListener(t,this,rW)))}}const sTe=new xt("mat-ripple-global-options");let aW=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new LA(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(mn),rt(Ho),rt(sTe,8),rt(Qa,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Wi("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),oTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[NA,NA]})}return n})(),aTe=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Qa,8))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&Wi("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})();const cW=new xt("MAT_OPTION_PARENT_COMPONENT"),lW=new xt("MatOptgroup");let cTe=0;class uW{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let dW=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=t}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+cTe++,this.onSelectionChange=new pn,this._stateChanges=new Zt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!bh(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new uW(this,t))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(Po),rt(cW,8),rt(lW,8))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-option"]],viewQuery:function(i,r){if(1&i&&Ds(HCe,7),2&i){let s;Fi(s=ki())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&ai("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(Xd("id",r.id),wr("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Wi("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:["disabled","disabled",gs]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[Ef],ngContentSelectors:YCe,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled"],["class","cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(i,r){1&i&&(oa($Ce),mi(0,zCe,1,2,"mat-pseudo-checkbox",0),Ti(1),sn(2,"span",1,2),Ti(4,1),on(),mi(5,GCe,1,1,"mat-pseudo-checkbox",3)(6,WCe,2,1,"span",4),or(7,"div",5)),2&i&&(Is(0,r.multiple?0:-1),dn(5),Is(5,r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),dn(1),Is(6,r.group&&r.group._inert?6:-1),dn(1),jn("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[aW,aTe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();const dTe=["addListener","removeListener"],hTe=["addEventListener","removeEventListener"],fTe=["on","off"];function up(n,e,t,i){if(Re(t)&&(i=t,t=void 0),i)return up(n,e,t).pipe(oA(i));const[r,s]=function mTe(n){return Re(n.addEventListener)&&Re(n.removeEventListener)}(n)?hTe.map(o=>a=>n[o](e,a,t)):function pTe(n){return Re(n.addListener)&&Re(n.removeListener)}(n)?dTe.map(hW(n,e)):function gTe(n){return Re(n.on)&&Re(n.off)}(n)?fTe.map(hW(n,e)):[];if(!r&&yD(n))return ys(o=>up(o,e,t))(_s(n));if(!r)throw new TypeError("Invalid event target");return new St(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function hW(n,e){return t=>i=>n[t](e,i)}const Vv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Vv;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new _t(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Vv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Vv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class yTe extends cN{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class _Te extends aN{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Vv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Vv.cancelAnimationFrame(t),e._scheduled=void 0)}});let pN,bTe=1;const FA={};function fW(n){return n in FA&&(delete FA[n],!0)}const wTe={setImmediate(n){const e=bTe++;return FA[e]=!0,pN||(pN=Promise.resolve()),pN.then(()=>fW(e)&&n()),e},clearImmediate(n){fW(n)}},{setImmediate:xTe,clearImmediate:ETe}=wTe,kA={setImmediate(...n){const{delegate:e}=kA;return(e?.setImmediate||xTe)(...n)},clearImmediate(n){const{delegate:e}=kA;return(e?.clearImmediate||ETe)(n)},delegate:void 0};new class STe extends cN{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class ATe extends aN{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=kA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(kA.clearImmediate(t),e._scheduled=void 0)}});function gN(n=0,e,t=lCe){let i=-1;return null!=e&&(AV(e)?t=e:i=e),new St(r=>{let s=function MTe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function pW(n,e=DA){return function TTe(n){return di((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(hn(t,l=>{i=!0,r=l,s||_s(n(l)).subscribe(s=hn(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>gN(n,e))}let DTe=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Zt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new St(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(pW(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Kt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(wi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=wh(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>up(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(mn),ot(Ho),ot(Zn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mN=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Zt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(pW(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho),ot(mn),ot(Zn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _N{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class yN extends _N{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class BA extends _N{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class OTe extends _N{constructor(e){super(),this.element=e instanceof ei?e.nativeElement:e}}class vN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof yN?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof BA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof OTe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class PTe extends vN{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ki.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let jA=(()=>{class n extends vN{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new pn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Il),rt(go),rt(Zn))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[oi]})}return n})(),gW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({})}return n})();const mW=GSe();class NTe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ws(-this._previousScrollPosition.left),e.style.top=ws(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),mW&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mW&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class LTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(wi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _W{enable(){}disable(){}attach(){}}function bN(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function yW(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class FTe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bN(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let kTe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new _W,this.close=o=>new LTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new NTe(this._viewportRuler,this._document),this.reposition=o=>new FTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(ot(DTe),ot(mN),ot(mn),ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class wN{constructor(e){if(this.scrollStrategy=new _W,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class BTe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let vW=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jTe=(()=>{class n extends vW{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn),ot(mn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UTe=(()=>{class n extends vW{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=nd(s)},this._clickListener=s=>{const o=nd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn),ot(Ho),ot(mn,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UA=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||rN()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),rN()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn),ot(Ho))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class VA{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Zt,this._attachments=new Zt,this._detachments=new Zt,this._locationChanges=_t.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Zt,this._outsidePointerEvents=new Zt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ir(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ws(this._config.width),e.height=ws(this._config.height),e.minWidth=ws(this._config.minWidth),e.minHeight=ws(this._config.minHeight),e.maxWidth=ws(this._config.maxWidth),e.maxHeight=ws(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=RA(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(da(zc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const bW="cdk-overlay-connected-position-bounding-box",VTe=/([A-Za-z%]+)$/;class HTe{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Zt,this._resizeSubscription=_t.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(bW),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&dp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bW),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=xW(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),v=this._subtractOverflows(s.height,f,g),w=m*v;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:v===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=wW(this._overlayRef.getConfig().minHeight),a=wW(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=xW(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new BTe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ws(i.height),r.top=ws(i.top),r.bottom=ws(i.bottom),r.width=ws(i.width),r.left=ws(i.left),r.right=ws(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ws(s)),o&&(r.maxWidth=ws(o))}this._lastBoundingBoxSize=i,dp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){dp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){dp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();dp(i,this._getExactOverlayY(t,e,u)),dp(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ws(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ws(o.maxWidth):s&&(i.maxWidth="")),dp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ws(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ws(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:yW(e,i),isOriginOutsideView:bN(e,i),isOverlayClipped:yW(t,i),isOverlayOutsideView:bN(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&RA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ei)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function dp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function wW(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(VTe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function xW(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const EW="cdk-global-overlay-wrapper";class zTe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(EW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let g="",m="",v="";c?v="flex-start":"center"===u?(v="center",f?m=h:g=h):f?"left"===u||"end"===u?(v="flex-end",g=h):("right"===u||"start"===u)&&(v="flex-start",m=h):"left"===u||"start"===u?(v="flex-start",g=h):("right"===u||"end"===u)&&(v="flex-end",m=h),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,t.justifyContent=v,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(EW),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let GTe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new zTe}flexibleConnectedTo(t){return new HTe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(mN),ot(Zn),ot(Ho),ot(UA))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WTe=0,qc=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,h,f,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new wN(t);return o.direction=o.direction||this._directionality.value,new VA(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+WTe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Df)),new PTe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(kTe),ot(UA),ot(Il),ot(GTe),ot(jTe),ot(Ki),ot(mn),ot(Zn),ot(jv),ot(Pf),ot(UTe),ot(Qa,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hv(n,e){return{type:7,name:n,definitions:e,options:{}}}function xh(n,e=null){return{type:4,styles:e,timings:n}}function xN(n,e=null){return{type:3,steps:n,options:e}}function ha(n){return{type:6,styles:n,offset:null}}function Eh(n,e,t){return{type:0,name:n,styles:e,options:t}}function hp(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function zv(n){return new St(e=>{_s(n()).subscribe(e)})}class JTe{constructor(e){this._box=e,this._destroyed=new Zt,this._resizeSubject=new Zt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new St(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(wi(t=>t.some(i=>i.target===e)),Uo({bufferSize:1,refCount:!0}),da(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let ZTe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=kt(mn)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new JTe(r)),this._observers.get(r).observe(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QTe=["notch"],eMe=["matFormFieldNotchedOutline",""],tMe=["*"],nMe=["textField"],iMe=["iconPrefixContainer"],rMe=["textPrefixContainer"];function sMe(n,e){1&n&&or(0,"span",16)}function oMe(n,e){if(1&n&&(sn(0,"label",14),Ti(1,1),mi(2,sMe,1,0,"span",15),on()),2&n){const t=kr(2);jn("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),wr("for",t._control.id),dn(2),Is(2,!t.hideRequiredMarker&&t._control.required?2:-1)}}function aMe(n,e){1&n&&mi(0,oMe,3,5,"label",14),2&n&&Is(0,kr()._hasFloatingLabel()?0:-1)}function cMe(n,e){1&n&&or(0,"div",17)}function lMe(n,e){}function uMe(n,e){1&n&&mi(0,lMe,0,0,"ng-template",9),2&n&&(kr(2),jn("ngTemplateOutlet",Mf(1)))}function dMe(n,e){if(1&n&&(sn(0,"div",5),mi(1,uMe,1,1,null,9),on()),2&n){const t=kr();jn("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),dn(1),Is(1,t._forceDisplayInfixLabel()?-1:1)}}function hMe(n,e){1&n&&(sn(0,"div",18,19),Ti(2,2),on())}function fMe(n,e){1&n&&(sn(0,"div",20,21),Ti(2,3),on())}function pMe(n,e){}function gMe(n,e){1&n&&mi(0,pMe,0,0,"ng-template",9),2&n&&(kr(),jn("ngTemplateOutlet",Mf(1)))}function mMe(n,e){1&n&&(sn(0,"div",22),Ti(1,4),on())}function _Me(n,e){1&n&&(sn(0,"div",23),Ti(1,5),on())}function yMe(n,e){1&n&&or(0,"div",12)}function vMe(n,e){1&n&&(sn(0,"div",24),Ti(1,6),on()),2&n&&jn("@transitionMessages",kr()._subscriptAnimationState)}function bMe(n,e){if(1&n&&(sn(0,"mat-hint",26),ps(1),on()),2&n){const t=kr(2);jn("id",t._hintLabelId),dn(1),Uc(t.hintLabel)}}function wMe(n,e){if(1&n&&(sn(0,"div",25),mi(1,bMe,2,2,"mat-hint",26),Ti(2,7),or(3,"div",27),Ti(4,8),on()),2&n){const t=kr();jn("@transitionMessages",t._subscriptAnimationState),dn(1),Is(1,t.hintLabel?1:-1)}}const xMe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],EMe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let CW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["mat-label"]]})}return n})();const AMe=new xt("MatError");let SMe=0,TW=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+SMe++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(Xd("id",r.id),wr("align",null),Wi("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const MW=new xt("MatPrefix");let CMe=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:["matTextPrefix","_isTextSelector"]},features:[vi([{provide:MW,useExisting:n}])]})}return n})();const IW=new xt("MatSuffix");let TMe=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[vi([{provide:IW,useExisting:n}])]})}return n})();const DW=new xt("FloatingLabelParent");let RW=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=kt(ZTe),this._ngZone=kt(mn),this._parent=kt(DW),this._resizeSubscription=new _t}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function MMe(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei))};static#t=this.\u0275dir=Wt({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Wi("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const OW="mdc-line-ripple--active",HA="mdc-line-ripple--deactivating";let PW=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(HA);"opacity"===r.propertyName&&o&&s.remove(OW,HA)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(HA),t.add(OW)}deactivate(){this._elementRef.nativeElement.classList.add(HA)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(mn))};static#t=this.\u0275dir=Wt({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),NW=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(mn))};static#t=this.\u0275cmp=_i({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&Ds(QTe,5),2&i){let s;Fi(s=ki())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Wi("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:eMe,ngContentSelectors:tMe,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(oa(),or(0,"div",0),sn(1,"div",1,2),Ti(3),on(),or(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const IMe={transitionMessages:Hv("transitionMessages",[Eh("enter",ha({opacity:1,transform:"translateY(0%)"})),hp("void => enter",[ha({opacity:0,transform:"translateY(-5px)"}),xh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let LW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n})}return n})();const EN=new xt("MatFormField"),DMe=new xt("MAT_FORM_FIELD_DEFAULT_OPTIONS");let FW=0,PMe=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=jm(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,c,l){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+FW++,this._hintLabelId="mat-mdc-hint-"+FW++,this._subscriptAnimationState="",this._destroyed=new Zt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(da(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),zc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(da(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(da(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(Po),rt(mn),rt(jv),rt(Ho),rt(DMe,8),rt(Qa,8),rt(Zn))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(ac(s,CW,5),ac(s,CW,7),ac(s,LW,5),ac(s,MW,5),ac(s,IW,5),ac(s,AMe,5),ac(s,TW,5)),2&i){let o;Fi(o=ki())&&(r._labelChildNonStatic=o.first),Fi(o=ki())&&(r._labelChildStatic=o.first),Fi(o=ki())&&(r._formFieldControl=o.first),Fi(o=ki())&&(r._prefixChildren=o),Fi(o=ki())&&(r._suffixChildren=o),Fi(o=ki())&&(r._errorChildren=o),Fi(o=ki())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(Ds(nMe,5),Ds(iMe,5),Ds(rMe,5),Ds(RW,5),Ds(NW,5),Ds(PW,5)),2&i){let s;Fi(s=ki())&&(r._textField=s.first),Fi(s=ki())&&(r._iconPrefixContainer=s.first),Fi(s=ki())&&(r._textPrefixContainer=s.first),Fi(s=ki())&&(r._floatingLabel=s.first),Fi(s=ki())&&(r._notchedOutline=s.first),Fi(s=ki())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Wi("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vi([{provide:EN,useExisting:n},{provide:DW,useExisting:n}])],ngContentSelectors:EMe,decls:18,vars:21,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],["class","mat-mdc-form-field-icon-prefix"],["class","mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],["class","mat-mdc-form-field-text-suffix"],["class","mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(1&i&&(oa(xMe),mi(0,aMe,1,1,"ng-template",null,0,bj),sn(2,"div",1,2),ai("click",function(o){return r._control.onContainerClick(o)}),mi(4,cMe,1,0,"div",3),sn(5,"div",4),mi(6,dMe,2,2,"div",5)(7,hMe,3,0,"div",6)(8,fMe,3,0,"div",7),sn(9,"div",8),mi(10,gMe,1,1,null,9),Ti(11),on(),mi(12,mMe,2,0,"div",10)(13,_Me,2,0,"div",11),on(),mi(14,yMe,1,0,"div",12),on(),sn(15,"div",13),mi(16,vMe,2,1)(17,wMe,5,2),on()),2&i){let s;dn(2),Wi("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),dn(2),Is(4,r._hasOutline()||r._control.disabled?-1:4),dn(2),Is(6,r._hasOutline()?6:-1),dn(1),Is(7,r._hasIconPrefix?7:-1),dn(1),Is(8,r._hasTextPrefix?8:-1),dn(2),Is(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),dn(2),Is(12,r._hasTextSuffix?12:-1),dn(1),Is(13,r._hasIconSuffix?13:-1),dn(1),Is(14,r._hasOutline()?-1:14),dn(1),Wi("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),dn(1),Is(16,"error"===(s=r._getDisplayedMessages())?16:"hint"===s?17:-1)}},dependencies:[UU,TW,RW,NW,PW],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[IMe.transitionMessages]},changeDetection:0})}return n})();function AN(n){return $t(()=>n)}function jW(n,e){return e?t=>Sv(e.pipe(Ir(1),function NMe(){return di((n,e)=>{n.subscribe(hn(e,ut))})}()),t.pipe(jW(n))):ys((t,i)=>_s(n(t,i)).pipe(Ir(1),AN(t)))}function UW(n,e=DA){const t=gN(n,e);return jW(()=>t)}const LMe=["panel"];function FMe(n,e){if(1&n){const t=Hg();sn(0,"div",0,1),ai("@panelAnimation.done",function(r){return qa(t),ir(kr()._animationDone.next(r))}),Ti(2),on()}if(2&n){const t=e.id,i=kr();jn("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),wr("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(t))}}const kMe=["*"],BMe=Hv("panelAnimation",[Eh("void, hidden",ha({opacity:0,transform:"scaleY(0.8)"})),hp(":enter, hidden => visible",[xN([xh("0.03s linear",ha({opacity:1})),xh("0.12s cubic-bezier(0, 0, 0.2, 1)",ha({transform:"scaleY(1)"}))])]),hp(":leave, visible => hidden",[xh("0.075s linear",ha({opacity:0}))])]);let jMe=0;class UMe{constructor(e,t){this.source=e,this.option=t}}const VW=new xt("mat-autocomplete-default-options",{providedIn:"root",factory:function VMe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let HMe=(()=>{class n{get isOpen(){return this._isOpen&&this.showPanel}_setColor(t){this._color=t,this._setThemeClasses(this._classList)}set classList(t){this._classList=t&&t.length?function dCe(n,e=/\s+/){const t=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(e);for(const r of i){const s=`${r}`.trim();s&&t.push(s)}}return t}(t).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}constructor(t,i,r,s){this._changeDetectorRef=t,this._elementRef=i,this._defaults=r,this._activeOptionChanges=_t.EMPTY,this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new pn,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new pn,this.opened=new pn,this.closed=new pn,this.optionActivated=new pn,this._classList={},this.id="mat-autocomplete-"+jMe++,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!r.autoActiveFirstOption,this.autoSelectActiveOption=!!r.autoSelectActiveOption,this.requireSelection=!!r.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new bCe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const i=new UMe(this,t);this.optionSelected.emit(i)}_getPanelAriaLabelledby(t){return this.ariaLabel?null:this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_setVisibilityClasses(t){t[this._visibleClass]=this.showPanel,t[this._hiddenClass]=!this.showPanel}_setThemeClasses(t){t["mat-primary"]="primary"===this._color,t["mat-warn"]="warn"===this._color,t["mat-accent"]="accent"===this._color}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Po),rt(ei),rt(VW),rt(Ho))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(ac(s,dW,5),ac(s,lW,5)),2&i){let o;Fi(o=ki())&&(r.options=o),Fi(o=ki())&&(r.optionGroups=o)}},viewQuery:function(i,r){if(1&i&&(Ds(oc,7),Ds(LMe,5)),2&i){let s;Fi(s=ki())&&(r.template=s.first),Fi(s=ki())&&(r.panel=s.first)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:["autoActiveFirstOption","autoActiveFirstOption",gs],autoSelectActiveOption:["autoSelectActiveOption","autoSelectActiveOption",gs],requireSelection:["requireSelection","requireSelection",gs],panelWidth:"panelWidth",disableRipple:["disableRipple","disableRipple",gs],classList:["class","classList"],hideSingleSelectionIndicator:["hideSingleSelectionIndicator","hideSingleSelectionIndicator",gs]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[vi([{provide:cW,useExisting:n}]),Ef],ngContentSelectors:kMe,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(i,r){1&i&&(oa(),mi(0,FMe,3,5,"ng-template"))},dependencies:[LU],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[BMe]},changeDetection:0})}return n})();const zMe={provide:gc,useExisting:ge(()=>zW),multi:!0},HW=new xt("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const n=kt(qc);return()=>n.scrollStrategies.reposition()}});let zW=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,h,f){this._element=t,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=o,this._dir=c,this._formField=l,this._document=u,this._viewportRuler=h,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=_t.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Zt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=zv(()=>{const g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(Jl(g),xr(()=>zc(...g.map(m=>m.onSelectionChange)))):this._zone.onStable.pipe(Ir(1),xr(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(27===g.keyCode&&!bh(g)||38===g.keyCode&&bh(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){const t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel(),this._trackedModal&&z9(this._trackedModal,"aria-owns",this.autocomplete.id)}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&dN(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return zc(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(wi(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(wi(()=>this._overlayAttached)):Kt()).pipe($t(t=>t instanceof uW?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return zc(up(this._document,"click"),up(this._document,"auxclick"),up(this._document,"touchend")).pipe(wi(t=>{const i=nd(t),r=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const i=t.keyCode,r=bh(t);if(27===i&&!r&&t.preventDefault(),this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):o&&this._canOpen()&&this.openPanel(),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let i=t.target,r=i.value;if("number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r){if(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&r!==(this.autocomplete.displayWith?.(s)??s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);this._canOpen()&&this._document.activeElement===t.target&&this.openPanel()}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return zc(this._zone.onStable.pipe(Ir(1)),this.autocomplete.options.changes.pipe(Bi(()=>this._positionStrategy.reapplyLastPosition()),UW(0))).pipe(xr(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),Ir(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(t){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t;null==t&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){const i=this.autocomplete,r=t?t.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Ir(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,i){this.autocomplete?.options?.forEach(r=>{r!==t&&r.selected&&r.deselect(i)})}_attachOverlay(){let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new BA(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=this._element.nativeElement.value,this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new wN({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let o;o="above"===this.position?s:"below"===this.position?i:[...i,...s],t.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const t=this.autocomplete;if(t.autoActiveFirstOption){let i=-1;for(let r=0;r<t.options.length;r++)if(!t.options.get(r).disabled){i=r;break}t._keyManager.setActiveItem(i)}else t._keyManager.setActiveItem(-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(t){const i=this.autocomplete,r=function lTe(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(t,i.options,i.optionGroups);if(0===t&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[t];if(s){const o=s._getHostElement(),a=function uTe(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const i=this.autocomplete.id;this._trackedModal&&dN(this._trackedModal,"aria-owns",i),z9(t,"aria-owns",i),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(dN(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(qc),rt(go),rt(mn),rt(Po),rt(HW),rt(jv,8),rt(EN,9),rt(Zn,8),rt(mN),rt(VW,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&ai("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&i&&wr("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled",gs]},exportAs:["matAutocompleteTrigger"],features:[vi([zMe]),Ef,zi]})}return n})();const GW=Fv({passive:!0});let WMe=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Bo;const i=wh(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Zt,o="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===c.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,GW),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,GW)}}),s}stopMonitoring(t){const i=wh(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ho),ot(mn))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $Me=new xt("MAT_INPUT_VALUE_ACCESSOR"),YMe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let XMe=0;const qMe=ZCe(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Zt}});let KMe=(()=>{class n extends qMe{get disabled(){return this._disabled}set disabled(t){this._disabled=jm(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(KAe.required)??!1}set required(t){this._required=jm(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&N9().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=jm(t)}constructor(t,i,r,s,o,a,c,l,u,h){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=l,this._formField=h,this._uid="mat-input-"+XMe++,this.focused=!1,this.stateChanges=new Zt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>N9().has(m)),this._iOSKeyupListener=m=>{const v=m.target;!v.value&&0===v.selectionStart&&0===v.selectionEnd&&(v.setSelectionRange(1,1),v.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=c||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){YMe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(Ho),rt(td,10),rt(Pv,8),rt(CA,8),rt(eTe),rt($Me,10),rt(WMe),rt(mn),rt(EN,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&ai("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(Xd("id",r.id)("disabled",r.disabled)("required",r.required),wr("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Wi("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[vi([{provide:LW,useExisting:n}]),oi,zi]})}return n})();function WW(n,e){return n>=0&&n<e?n:n>=e?e:n+e<0?0:n+e}function ZMe(n,e){if(1&n&&(sn(0,"span"),ps(1),on()),2&n){const t=e.$implicit;(function kc(n){jc(eB,UK,n,!1)})(t.styles),$d(t.classes),dn(1),Pl(" ",t.text,"\n")}}let QMe=(()=>{class n{constructor(){this.clsName="ccf-decorated-text",this.segments=[]}ngOnChanges(t){("text"in t||"decorations"in t)&&(this.segments=this.createSegments())}createSegments(){const{text:t}=this;if(!t)return[this.makeUndecoratedSegment(t)];const i=this.getNormalizedDecorations();if(0===i.length)return[this.makeUndecoratedSegment(t)];const r=this.createStackOps(i),s=[];let o=[],a=0;0===r[0].index&&(o=this.updateStack(o,r.shift()));for(const c of r)s.push(this.makeDecoratedSegment(t.slice(a,c.index),o)),a=c.index,o=this.updateStack(o,c);return a!==t.length&&s.push(this.makeDecoratedSegment(t.slice(a),o)),s}createStackOps(t){const i={},r=s=>i[s]??={index:s,added:[],removed:[]};for(const s of t)r(s.start).added.push(s),r(s.end).removed.push(s);return Object.entries(i).sort((s,o)=>+s[0]-+o[0]).map(s=>s[1])}updateStack(t,i){return t.filter(r=>!i.removed.includes(r)).concat(i.added)}getNormalizedDecorations(){const{decorations:t=[],text:{length:i}}=this;return t.map(r=>function JMe(n,e){return{start:WW(n.start??0,e),end:WW(n.end??e,e),classes:n.classes??[],styles:n.styles??{}}}(r,i)).filter(r=>r.start<i&&r.start<r.end)}makeUndecoratedSegment(t){return{text:t,classes:[],styles:{}}}makeDecoratedSegment(t,i){return{text:t,classes:i.reduce((o,a)=>o.concat(a.classes),[]),styles:i.reduce((o,a)=>({...o,...a.styles}),{})}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-decorated-text"]],hostVars:2,hostBindings:function(i,r){2&i&&$d(r.clsName)},inputs:{text:"text",decorations:"decorations"},features:[zi],decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&mi(0,ZMe,2,5,"span",0),2&i&&jn("ngForOf",r.segments)},dependencies:[Zg],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})}return n})();function eIe(n,e){if(1&n&&(sn(0,"mat-option"),or(1,"ccf-decorated-text",8),on()),2&n){const t=e.$implicit;dn(1),jn("text",t.label)("decorations",t.decorations)}}const tIe=[[["","matPrefix",""]],[["","matSuffix",""]]],nIe=["[matPrefix]","[matSuffix]"],iIe=new xt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});class zA{get value(){return this.controller.value}set value(e){this.controller.setValue(e,{emitEvent:!1})}constructor(e){this.defaultMaxOptions=e,this.clsName="ccf-text-search",this.placeholder="Search...",this.optionSelected=new pn,this.controller=new fSe,this.options=this.controller.valueChanges.pipe(Jl(""),_h(),xr(this.getOptions)),this.valueChange=this.controller.valueChanges}getOptions(e){var t=this;return jt(function*(){const{autoCompleter:i,maxOptions:r=t.defaultMaxOptions}=t;return!i||r<1?[]:function HSe(n,e){const t="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;n.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):t?i(e.defaultValue):r(new Nv)}})})}(Qr(i(e,r)).pipe(Ir(1),$t(o=>o.length<=r?o:o.slice(0,r))))})()}optionDisplay(e){return e?.label??""}optionId(e,t){return t.id}static#e=this.\u0275fac=function(t){return new(t||zA)(rt(iIe))};static#t=this.\u0275cmp=_i({type:zA,selectors:[["ccf-text-search"]],hostVars:2,hostBindings:function(t,i){2&t&&$d(i.clsName)},inputs:{placeholder:"placeholder",value:"value",maxOptions:"maxOptions",autoCompleter:"autoCompleter"},outputs:{valueChange:"valueChange",optionSelected:"optionSelected"},ngContentSelectors:nIe,decls:11,vars:8,consts:[[1,"form"],["appearance","outline",1,"form-field"],["matPrefix",""],["matInput","","type","search",1,"input",3,"placeholder","formControl","matAutocomplete"],[1,"autocomplete",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[4,"ngFor","ngForOf","ngForTrackBy"],["matSuffix",""],[3,"text","decorations"]],template:function(t,i){if(1&t&&(oa(tIe),sn(0,"form",0)(1,"mat-form-field",1),c0(2,2),Ti(3),l0(),or(4,"input",3),sn(5,"mat-autocomplete",4,5),ai("optionSelected",function(s){return i.optionSelected.emit(s.option.value)}),mi(7,eIe,2,2,"mat-option",6),Br(8,"async"),on(),c0(9,7),Ti(10,1),l0(),on()()),2&t){const r=Mf(6);dn(4),jn("placeholder",i.placeholder)("formControl",i.controller)("matAutocomplete",r),dn(1),jn("displayWith",i.optionDisplay),dn(2),jn("ngForOf",jr(8,6,i.options))("ngForTrackBy",i.optionId)}},dependencies:[Zg,m9,mA,t9,n9,Pv,XP,HMe,dW,zW,PMe,CMe,TMe,KMe,QMe,S0],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex{align-items:center}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{height:3rem;border:none}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{top:0;border:none}"],changeDetection:0})}Un([Gf.ak,Ft("design:type",Function),Ft("design:paramtypes",[String]),Ft("design:returntype",Promise)],zA.prototype,"getOptions",null),S(1563);const $W=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));function Vm(n){return!0===n}function fa(n){return null===n||typeof n>"u"}function bo(n){return!fa(n)}function SN(n){return!!n}function JW(n){return fa(n)?n:JSON.parse(JSON.stringify(n))}function ZW(n){return bo(n)&&"object"==typeof n&&function CN(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}$W.filter(n=>!0!==n.disabled);const MIe="NGXS_COMPUTED_OPTION",t7="NGXS_DATA_META",TN="NGXS_META",n7="NGXS_ARGUMENT_REGISTRY_META";function i7(n=DIe){return di((e,t)=>{let i=!1;e.subscribe(hn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function DIe(){return new Nv}let r7=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new Ui(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(ot(ed,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();function Wv(n){return n[t7]}let mc=(()=>{class n{constructor(t,i,r){n.store=t.get(ed),n.ngZone=t.get(mn),n.factory=i,n.context=r,n.computed=t.get(r7),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(ot(Ki),ot(K6),ot(J6))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();class ts{constructor(){ts.statesCachedMeta.clear()}static createStateContext(e){return mc.context.createStateContext(e)}static ensureMappedState(e){if(fa(mc.factory)||fa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(bo(e.name)?ts.statesCachedMeta.get(e.name):null)||ts.ensureMeta(e)}static getRepositoryByInstance(e){const i=Wv(ts.getStateClassByInstance(e))??null;if(fa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=ts.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=t?.getPayloadTypeByIndex(s);bo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=ts.createPayload(t,i),s=function PIe(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new s(r)}static ensureMeta(e){const t=bo(e.name)?mc.factory.states?.find(i=>i.name===e.name):null;return bo(t)&&bo(e.name)&&ts.statesCachedMeta.set(e.name,t),t}}ts.statesCachedMeta=new Map,ts.\u0275fac=function(e){return new(e||ts)},ts.\u0275prov=It({token:ts,factory:ts.\u0275fac}),new class NIe{constructor(){this.subject=new Nf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function id(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wi((r,s)=>n(r,s,i)):Hs,Ir(1),t?Pm(e):i7(()=>new Nv))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Nf(1)}};class FIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${bo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function s7(n){return n.NGXS_OPTIONS_META??{name:""}}function o7(n){const e=s7(n),t=e.children??[],r=JW(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(ZW(r))return function kIe(n,e){return e.reduce((t,i)=>{const r=s7(i);if(function Gv(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=o7(i),t},n??{})}(r,t);throw new FIe(r)}return r}function a7(){return`__${MIe}__`}function c7(n){return n[a7()]??null}function l7(){return mc?.computed?.sequenceValue??0}function UIe(n){let e=!1;return ip(n)&&(e=!0),e}function MN(n){return n[n7]}class VIe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class HIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(SN(this.argumentMap.has(e))||SN(this.payloadMap.has(e)))throw new VIe(e,t)}}function XIe(n){return{enumerable:!0,configurable:!0,get(){const e=Wv(n),t=ts.ensureMappedState(e.stateMeta);return ts.createStateContext(t)}}}const eDe={dataActionSubscribeRequired:!0},tDe=new xt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>eDe});let nDe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[ts,mc,r7,...t]}}}return n.\u0275fac=function(t){return new(t||n)(ot(ts,2),ot(mc,2))},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})();function u7(){return(n,e,t)=>{!function OIe(n,e){if(!function wIe(n,e){let t=n,i=!1;if(ZW(t))for(;null!==t;){if(Vm(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function jIe(n){return fa(c7(n))&&Object.defineProperties(n,{[a7()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),c7(n)}(this),o=s?.get(i);if(Vm(o?.isObservable))return o?.value;if(fa(o)||o.sequenceId!==l7()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:l7(),isObservable:UIe(c)}),c}return o?.value},t}}const iDe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function XA(n={}){const e=function rDe(n){const e=mc?.injector?.get(tDe,void 0,si.Optional),t={...iDe};return bo(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function RIe(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const u=ts.getRepositoryByInstance(c),h=u.operations;let f=h[o];const g=u.stateMeta,m=MN(s);if(fa(f)){const ce=function QIe(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),re=function LIe(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)bo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):bo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:g.path,methodName:o,argumentsNames:ce,argumentRegistry:m});f=h[o]={type:re,options:{cancelUncompleted:e.cancelUncompleted??!1}},bo(f)&&(g.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}ts.ensureMappedState(g).instance[f.type]=()=>(Vm(e.insideZone)?mc.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),ip(l)&&Vm(e.subscribeRequired)?Kt(null).pipe($t(()=>l)):l);const N=ts.createAction(f,a,m),U=mc.store.dispatch(N);return ip(l)?function BIe(n,e){return Av([n,e]).pipe($t(t=>t.pop()))}(U,l):l},r}}function d7(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function zIe(n,e){const t=n[e];return fa(MN(t))&&Object.defineProperties(t,{[n7]:{enumerable:!0,configurable:!0,value:new HIe}}),MN(t)})(e,t).createPayloadType(r,t,i)}}function h7(){return n=>{const e=function ZIe(n){if(function uIe(n){return!SN(n)}(n.hasOwnProperty(TN))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,TN,{value:e})}return function JIe(n){return n?.[TN]}(n)}(n);if(fa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function $Ie(n,e){(function WIe(n){const e=Wv(n)??null;return(fa(e)||e?.stateClass!==n)&&function GIe(n){Object.defineProperty(n,t7,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Wv(n)}(n)).stateMeta=e}(n,e),function oDe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>JW(t)},context:XIe(n)})}(n,e,o7(n)),function qIe(n){const t=Wv(n)?.stateMeta?.name??null;if(bo(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(bo(this[i]))return this[i];if(fa(mc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=mc.store.select(n).pipe($t(r=>r),Uo({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let aDe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new Zt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})(),f7=(()=>{class n extends aDe{get snapshot(){return this.getState()}get ctx(){return function KIe(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=(()=>{let e;return function(i){return(e||(e=Gi(n)))(i||n)}})(),n.\u0275prov=It({token:n,factory:n.\u0275fac}),Un([u7(),Ft("design:type",Object),Ft("design:paramtypes",[])],n.prototype,"snapshot",null),Un([XA(),gD(0,d7("patchValue")),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],n.prototype,"patchState",null),Un([XA(),gD(0,d7("stateValue")),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],n.prototype,"setState",null),Un([XA(),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",void 0)],n.prototype,"reset",null),n})();function p7(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return $t(t=>{let i=t;for(let r=0;r<e;r++){const s=i?.[n[r]];if(!(typeof s<"u"))return;i=s}return i})}let rd=class Cb extends f7{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function cDe(){return wi(n=>null!=n)}(),Uo(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(p7(...e),_h(),Uo(1))}getOption(...e){const t=this.getPathKey(e);if(this.optionCache.has(t))return this.optionCache.get(t)??Kt();const i=this.config$.pipe(p7(...e),_h(),Uo(1));return this.optionCache.set(t,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Gi(Cb)))(i||Cb)}})();static#t=this.\u0275prov=It({token:Cb,factory:Cb.\u0275fac})};Un([u7(),Ft("design:type",St),Ft("design:paramtypes",[])],rd.prototype,"config$",null),rd=Un([h7(),PP({name:"globalConfig",defaults:null})],rd);const g7="ALLOW_TELEMETRY",uDe=m7();function m7(){const n=localStorage.getItem(g7);return null===n?void 0:"true"===n.toLowerCase()}let IN=class Tb extends f7{setAllowTelemetry(e){const t=m7();localStorage.setItem(g7,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==t||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Gi(Tb)))(i||Tb)}})();static#t=this.\u0275prov=It({token:Tb,factory:Tb.\u0275fac})};function qA(){return di((n,e)=>{let t=null;n._refCount++;const i=hn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}Un([XA(),Ft("design:type",Function),Ft("design:paramtypes",[Boolean]),Ft("design:returntype",void 0)],IN.prototype,"setAllowTelemetry",null),IN=Un([h7(),PP({name:"tracking",defaults:{allowTelemetry:uDe}})],IN);class DN extends St{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _t;const t=this.getSubject();e.add(this.source.subscribe(hn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_t.EMPTY)}return e}refCount(){return qA()(this)}}function fp(n){return di((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}Error;let p$=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Wt({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const cb=new xt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),sL=new xt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=kt(Zn);if(!n)throw new Error("Window is not available");return n}}),TOe=new xt("ngx-data-layer",{providedIn:"root",factory:()=>function COe(n){return n?n.dataLayer=n.dataLayer||[]:null}(kt(sL))}),g$=new xt("ngx-gtag-fn",{providedIn:"root",factory:()=>function MOe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(kt(sL),kt(TOe))});let Jm=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([u,h])=>c.set(u,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(ot(cb),ot(Zn),ot(g$))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IOe=(()=>{class n{constructor(t,i,r,s){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=up(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){this.settings.enableTracing&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(rt(p$,8),rt(Jm),rt(cb),rt(ei))},n.\u0275dir=Wt({type:n,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),n})();const ROe={provide:TI,multi:!0,useFactory:function OOe(n,e,t){return jt(function*(){if(!n.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");t||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[cb,g$,Zn]};new xt("ngx-google-analytics-routing-settings",{factory:()=>({})});let oL=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:cb,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},ROe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})(),aL=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Nf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),LOe=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new _t,this.token=r,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(aL),ot(sL),ot(cb))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const FOe=new xt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),_$=[aL,LOe,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new _t;try{this.storage=localStorage}catch{}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const t=this.storage?.getItem?.(this.key);if(null==t)return"not-set";const i=t.trim().toLowerCase();switch(i){case"given":case"rescinded":return i;default:return"not-set"}}saveConsent(t){this.storage?.setItem?.(this.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(aL),ot(FOe))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})()];function kOe(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let jOe=(()=>{class n{static forRoot(t){const{providers:i=[]}=oL.forRoot(t.gaToken,function BOe(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[kOe({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({providers:[..._$,{provide:TI,multi:!0,useFactory:()=>()=>{},deps:_$}],imports:[oL]})}return n})(),y$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const VOe={connector:()=>new Zt};function GOe(n,e,t,i){t&&!Re(t)&&(i=t);const r=Re(t)?t:void 0;return s=>function zOe(n,e){const t=Re(n)?n:()=>n;return Re(e)?function HOe(n,e=VOe){const{connector:t}=e;return di((i,r)=>{const s=t();_s(n(function UOe(n){return new St(e=>n.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:t}):i=>new DN(i,t)}(new Nf(n,e,i),r)(s)}class WOe{}const YOe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),XOe=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Jc={storageStrategy:class $Oe extends WOe{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},qOe=new Zt;function Ua(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,s=i.value;if(i&&i.value){let o=n.storageStrategy?new n.storageStrategy:new Jc.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),zc(qOe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:function ise(n){return n?function rse(n){return new St(e=>n.schedule(()=>e.complete()))}(n):Bo}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||Jc.cacheResolver||YOe,n.cacheHasher=n.cacheHasher||Jc.cacheHasher||XOe,i.value=function(...u){const h=o.getAll(r,this);let f=n.cacheHasher(u),g=h.find(v=>n.cacheResolver(v.parameters,f));const m=a.find(v=>n.cacheResolver(v.parameters,f));if((n.maxAge||Jc.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(n.maxAge||Jc.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(n.slidingExpiration||Jc.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const v=Kt(g.response);return n.async?v.pipe(UW(0)):v}if(m)return m.response;{const v=s.call(this,...u).pipe(fp(()=>{const w=a.find(N=>n.cacheResolver(N.parameters,f));a.splice(a.indexOf(w),1)}),Bi(w=>{(!n.shouldCacheDecider||n.shouldCacheDecider(w))&&((!(n.maxCacheCount||Jc.maxCacheCount)||1===(n.maxCacheCount||Jc.maxCacheCount)||(n.maxCacheCount||Jc.maxCacheCount)&&(n.maxCacheCount||Jc.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:w,created:n.maxAge||Jc.maxAge?new Date:null},r,this))}),GOe(1),qA());return a.push({parameters:f,response:v,created:new Date}),v}}}return i}}class lS{}class uS{}class Va{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Va?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Va;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Va?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class KOe{encodeKey(e){return v$(e)}encodeValue(e){return v$(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ZOe=/%(\d[a-f0-9])/gi,QOe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function v$(n){return encodeURIComponent(n).replace(ZOe,(e,t)=>QOe[t]??e)}function dS(n){return`${n}`}class lr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new KOe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function JOe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(dS):[dS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(dS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ns{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function b$(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function w$(n){return typeof Blob<"u"&&n instanceof Blob}function x$(n){return typeof FormData<"u"&&n instanceof FormData}class lb{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function e2e(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new Va),this.context||(this.context=new ns),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new lr,this.urlWithParams=t}serializeBody(){return null===this.body?null:b$(this.body)||w$(this.body)||x$(this.body)||function t2e(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||x$(this.body)?null:w$(this.body)?this.body.type||null:b$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new lb(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Ch=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ch||{});class cL{constructor(e,t=200,i="OK"){this.headers=e.headers||new Va,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hS extends cL{constructor(e={}){super(e),this.type=Ch.ResponseHeader}clone(e={}){return new hS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class mp extends cL{constructor(e={}){super(e),this.type=Ch.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new mp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Zm extends cL{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function lL(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let sd=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof lb)s=t;else{let c,l;c=r.headers instanceof Va?r.headers:new Va(r.headers),r.params&&(l=r.params instanceof lr?r.params:new lr({fromObject:r.params})),s=new lb(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=Kt(s).pipe(function $v(n,e){return Re(e)?ys(n,e,1):ys(n,1)}(c=>this.handler.handle(c)));if(t instanceof lb||"events"===r.observe)return o;const a=o.pipe(wi(c=>c instanceof mp));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($t(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($t(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($t(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new lr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,lL(r,i))}post(t,i,r={}){return this.request("POST",t,lL(r,i))}put(t,i,r={}){return this.request("PUT",t,lL(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(lS))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();function A$(n,e){return e(n)}function o2e(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const c2e=new xt(""),ub=new xt(""),S$=new xt(""),C$=new xt("");function l2e(){let n=null;return(e,t)=>{null===n&&(n=(kt(c2e,{optional:!0})??[]).reduceRight(o2e,A$));const i=kt(v0),r=i.add();return n(e,t).pipe(fp(()=>i.remove(r)))}}let T$=(()=>{class n extends lS{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=kt(v0);const r=kt(C$,{optional:!0});this.backend=r??t}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(ub),...this.injector.get(S$,[])]));this.chain=r.reduceRight((s,o)=>function a2e(n,e,t){return(i,r)=>function Su(n,e){n instanceof Ld&&n.assertNotDestroyed();const i=al(n),r=oo(void 0);try{return e()}finally{al(i),oo(r)}}(t,()=>e(i,s=>n(s,r)))}(s,o,this.injector),A$)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(fp(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(uS),ot(na))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const p2e=/^\)\]\}',?\n/;let I$=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Ge(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Qr(i.\u0275loadImpl()):Kt(null)).pipe(xr(()=>new St(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((v,w)=>o.setRequestHeader(v,w.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const v=t.detectContentTypeHeader();null!==v&&o.setRequestHeader("Content-Type",v)}if(t.responseType){const v=t.responseType.toLowerCase();o.responseType="json"!==v?v:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const v=o.statusText||"OK",w=new Va(o.getAllResponseHeaders()),N=function g2e(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new hS({headers:w,status:o.status,statusText:v,url:N}),c},u=()=>{let{headers:v,status:w,statusText:N,url:U}=l(),ce=null;204!==w&&(ce=typeof o.response>"u"?o.responseText:o.response),0===w&&(w=ce?200:0);let re=w>=200&&w<300;if("json"===t.responseType&&"string"==typeof ce){const Me=ce;ce=ce.replace(p2e,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Ne){ce=Me,re&&(re=!1,ce={error:Ne,text:ce})}}re?(s.next(new mp({body:ce,headers:v,status:w,statusText:N,url:U||void 0})),s.complete()):s.error(new Zm({error:ce,headers:v,status:w,statusText:N,url:U||void 0}))},h=v=>{const{url:w}=l(),N=new Zm({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:w||void 0});s.error(N)};let f=!1;const g=v=>{f||(s.next(l()),f=!0);let w={type:Ch.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(w.total=v.total),"text"===t.responseType&&o.responseText&&(w.partialText=o.responseText),s.next(w)},m=v=>{let w={type:Ch.UploadProgress,loaded:v.loaded};v.lengthComputable&&(w.total=v.total),s.next(w)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",g),null!==a&&o.upload&&o.upload.addEventListener("progress",m)),o.send(a),s.next({type:Ch.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",g),null!==a&&o.upload&&o.upload.removeEventListener("progress",m)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(zU))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();const hL=new xt("XSRF_ENABLED"),D$=new xt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),R$=new xt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class O${}let y2e=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=PU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Zn),ot(Ia),ot(D$))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();function v2e(n,e){const t=n.url.toLowerCase();if(!kt(hL)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=kt(O$).getToken(),r=kt(R$);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Th=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Th||{});function b2e(...n){const e=[sd,I$,T$,{provide:lS,useExisting:T$},{provide:uS,useExisting:I$},{provide:ub,useValue:v2e,multi:!0},{provide:hL,useValue:!0},{provide:O$,useClass:y2e}];for(const t of n)e.push(...t.\u0275providers);return function Pc(n){return{\u0275providers:n}}(e)}const P$=new xt("LEGACY_INTERCEPTOR_FN");function w2e(){return function _p(n,e){return{\u0275kind:n,\u0275providers:e}}(Th.LegacyInterceptors,[{provide:P$,useFactory:l2e},{provide:ub,useExisting:P$,multi:!0}])}let x2e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({providers:[b2e(w2e())]})}return n})();class M2e{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const I2e=new xt("basePath");class pS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:t=>this.defaultEncodeParam(t),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}defaultEncodeParam(e){const t="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(t))}}let U$=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Va,this.configuration=new pS,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new M2e}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>t=this.addToHttpParamsRecursive(t,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>t=this.addToHttpParamsRecursive(t,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}biomarkerTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}biomarkerTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,s){const o=t.token;let a=new lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new ns);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,s){const o=t.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new ns);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,s){const o=t.cache;let a=new lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new ns);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,u=t.bmiRange,h=t.cache,f=t.ontologyTerms,g=t.cellTypeTerms,m=t.biomarkerTerms,v=t.consortiums,w=t.providers,N=t.sex,U=t.spatial,ce=t.technologies,re=t.token;let Me=new lr({encoder:this.encoder});null!=a&&(Me=this.addToHttpParams(Me,a,"age")),null!=c&&(Me=this.addToHttpParams(Me,c,"age-range")),null!=l&&(Me=this.addToHttpParams(Me,l,"bmi")),null!=u&&(Me=this.addToHttpParams(Me,u,"bmi-range")),null!=h&&(Me=this.addToHttpParams(Me,h,"cache")),f&&f.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"ontology-terms")}),g&&g.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"cell-type-terms")}),m&&m.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"biomarker-terms")}),null!=o&&(Me=this.addToHttpParams(Me,o,"organ-iri")),v&&v.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"consortiums")}),w&&w.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"providers")}),null!=N&&(Me=this.addToHttpParams(Me,N,"sex")),U&&U.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"spatial")}),ce&&ce.forEach(ht=>{Me=this.addToHttpParams(Me,ht,"technologies")}),null!=re&&(Me=this.addToHttpParams(Me,re,"token"));let Ne=this.defaultHeaders,st=s&&s.httpHeaderAccept;void 0===st&&(st=this.configuration.selectHeaderAccept(["application/json"])),void 0!==st&&(Ne=Ne.set("Accept",st));let dt=s&&s.context;void 0===dt&&(dt=new ns);let Xe="json";return st&&(Xe=st.startsWith("text")?"text":this.configuration.isJsonMime(st)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:dt,params:Me,responseType:Xe,withCredentials:this.configuration.withCredentials,headers:Ne,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}sennetRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,s){const o=t.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,c=t.format;let l=new lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ns);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,s){const o=t.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,c=t.format;let l=new lr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ns);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let v="json";return h&&(v=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:l,responseType:v,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ns);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.biomarkerTerms,m=t.consortiums,v=t.providers,w=t.sex,N=t.spatial,U=t.technologies,ce=t.token;let re=new lr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"ontology-terms")}),f&&f.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"cell-type-terms")}),g&&g.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"biomarker-terms")}),m&&m.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"consortiums")}),v&&v.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),N&&N.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"spatial")}),U&&U.forEach(Xe=>{re=this.addToHttpParams(re,Xe,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Me=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Me=Me.set("Accept",Ne));let st=s&&s.context;void 0===st&&(st=new ns);let dt="json";return Ne&&(dt=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:st,params:re,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Me,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(ot(sd),ot(I2e,8),ot(pS,8))},n.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D2e=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:pS,useFactory:t}]}}constructor(t,i){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return n.\u0275fac=function(t){return new(t||n)(ot(n,12),ot(sd,8))},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})();const fL=new Zt,Qm={cacheBusterObserver:fL},yp={cacheBusterObserver:fL,maxCacheCount:4};function V$(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function R2e(n){return{age:V$(n?.ageRange,1,110),bmi:V$(n?.bmiRange,13,83),sex:n?.sex?.toLowerCase?.(),ontologyTerms:n?.ontologyTerms,cellTypeTerms:n?.cellTypeTerms,biomarkerTerms:n?.biomarkerTerms,consortiums:n?.consortiums,providers:n?.tmc,technologies:n?.technologies,spatial:n?.spatialSearches}}function H$(n){return n.map(e=>({...e,transformMatrix:new Fn(e.transformMatrix??[])}))}class Us{constructor(e,t){this.api=e,this.globalConfig=t,t.getOption("hubmapToken").subscribe(fL)}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},n=>n)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},n=>n)}getTissueBlockResults(e){return this.doRequest(t=>this.api.tissueBlocks(t),e,{},n=>n)}getAggregateResults(e){return this.doRequest(t=>this.api.aggregateResults(t),e)}getOntologyTermOccurences(e){return this.doRequest(t=>this.api.ontologyTermOccurences(t),e)}getCellTypeTermOccurences(e){return this.doRequest(t=>this.api.cellTypeTermOccurences(t),e)}getBiomarkerTermOccurences(e){return this.doRequest(t=>this.api.biomarkerTermOccurences(t),e)}getScene(e){return this.doRequest(t=>this.api.scene(t),e,{},H$)}getReferenceOrganScene(e,t){return this.doRequest(i=>this.api.referenceOrganScene(i),t,{organIri:e},H$)}doRequest(e,t,i,r){const{api:s,globalConfig:o}=this,a={...R2e(t),...i};return Bv([o.getOption("remoteApiEndpoint"),o.getOption("hubmapToken")]).pipe(Ir(1),Bi(([c,l])=>{s.configuration.basePath=c,l&&(a.token=l)}),xr(()=>e(a)),$t(c=>r?r(c):c))}static#e=this.\u0275fac=function(t){return new(t||Us)(ot(U$),ot(rd))};static#t=this.\u0275prov=It({token:Us,factory:Us.\u0275fac,providedIn:"root"})}function pa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let pL;function Zc(){return pL||(pL=function O2e(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=pa(t);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),pL}function P2e(n,e=Zc()){return e("readonly",t=>pa(t.get(n)))}function N2e(n,e=Zc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),pa(t.transaction)))}function L2e(n,e=Zc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),pa(t.transaction)))}Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getProviderNames",null),Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getDatasetTechnologyNames",null),Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getOntologyTreeModel",null),Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getCellTypeTreeModel",null),Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getBiomarkerTreeModel",null),Un([Ua(Qm),Ft("design:type",Function),Ft("design:paramtypes",[]),Ft("design:returntype",St)],Us.prototype,"getReferenceOrgans",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getTissueBlockResults",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getAggregateResults",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getOntologyTermOccurences",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getCellTypeTermOccurences",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getBiomarkerTermOccurences",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],Us.prototype,"getScene",null),Un([Ua(yp),Ft("design:type",Function),Ft("design:paramtypes",[String,Object]),Ft("design:returntype",St)],Us.prototype,"getReferenceOrganScene",null);var F2e=S(5020);const hb="http://www.w3.org/1999/02/22-rdf-syntax-ns#",fb="http://www.w3.org/2001/XMLSchema#",mL="http://www.w3.org/2000/10/swap/",wo={xsd:{decimal:`${fb}decimal`,boolean:`${fb}boolean`,double:`${fb}double`,integer:`${fb}integer`,string:`${fb}string`},rdf:{type:`${hb}type`,nil:`${hb}nil`,first:`${hb}first`,rest:`${hb}rest`,langString:`${hb}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${mL}reify#forSome`,forAll:`${mL}reify#forAll`},log:{implies:`${mL}log#implies`}};var k2e=S(3410),B2e=S.n(k2e);const{xsd:gS}=wo,j2e=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,z$={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},U2e=/[\x00-\x20<>\\"\{\}\|\^\`]/,V2e={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},H2e=/$0^/;class G${constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in V2e)&&this[t]instanceof RegExp&&(this[t]=H2e)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,u=i[0];let h="",f="",g="",m=null,v=0,w=!1;switch(u){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(v=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){w=!0;break}case"<":if(m=this._unescapedIri.exec(i))h="IRI",f=m[1];else if(m=this._iri.exec(i)){if(f=this._unescape(m[1]),null===f||U2e.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",v=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",v=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",v=2);break;case"_":((m=this._blank.exec(i))||t&&(m=this._blank.exec(`${i} `)))&&(h="blank",g="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(i))f=m[1];else if(({value:f,matchLength:v}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==v)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(i))f=m[1];else if(({value:f,matchLength:v}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==v)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(i))&&(h="var",f=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(i))?(h="langcode",f=m[1]):(m=this._keyword.exec(i))&&(h=m[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",v=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(i)||t&&(m=this._number.exec(`${i} `)))&&(h="literal",f=m[0],g="string"==typeof m[1]?gS.double:"string"==typeof m[2]?gS.decimal:gS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(i))?h=m[0].toUpperCase():w=!0;break;case"f":case"t":(m=this._boolean.exec(i))?(h="literal",f=m[0],g=gS.boolean):w=!0;break;case"a":(m=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):w=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(v=1,f="="):(v=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(v=1,h=u);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",v=2):(h=u,v=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",v=2);break;default:w=!0}if(w&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(i))?((m=this._prefixed.exec(i))||t&&(m=this._prefixed.exec(`${i} `)))&&(h="prefixed",g=m[1]||"",f=this._unescape(m[2])):(h="prefix",f=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const N=v||m[0].length,U=s(h,f,g,l,N);this.previousToken=U,this._previousMarker=h,i=i.substr(N,i.length)}function s(a,c,l,u,h){const f=i?r-i.length:r,m={type:a,value:c,prefix:l,line:u,start:f,end:f+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(j2e,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in z$?z$[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}B2e()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}function z2e(n){return!!n&&"NamedNode"===n.termType}function G2e(n){return!!n&&"BlankNode"===n.termType}function W2e(n){return!!n&&"Literal"===n.termType}function $2e(n){return!!n&&"Variable"===n.termType}function e_(n){return!!n&&"DefaultGraph"===n.termType}function Y2e(n){return e_(n.graph)}function X2e(n,e){return _L({"":n.value||n},e)("")}function _L(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);t[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||vr,i}const{rdf:q2e,xsd:vp}=wo;let pb,K2e=0;const yL={namedNode:function J2e(n){return new vL(n)},blankNode:function Z2e(n){return new Y$(n||"n3-"+K2e++)},variable:function ePe(n){return new X$(n)},literal:function Q2e(n,e){if("string"==typeof e)return new bp(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=vp.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?vp.integer:vp.double:(t=vp.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new bp(""===t||t===vp.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function tPe(){return pb},quad:K$,triple:K$},vr=yL;class Qc{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Qc?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class vL extends Qc{get termType(){return"NamedNode"}}class bp extends Qc{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new vL(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?vp.string:q2e.langString}equals(e){return e instanceof bp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Y$ extends Qc{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class X$ extends Qc{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function t_(n,e,t){if(e=e||yL,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===yL)return new bp(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const i=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,i-1),"@"===n[i+1]?n.substr(i+2):e.namedNode(n.substr(i+3)));case"[":n=JSON.parse(n);break;default:if(!t||!Array.isArray(n))return e.namedNode(n)}return e.quad(t_(n[0],e,!0),t_(n[1],e,!0),t_(n[2],e,!0),n[3]&&t_(n[3],e,!0))}function ga(n,e){if("string"==typeof n)return n;if(n instanceof Qc&&"Quad"!==n.termType)return n.id;if(!n)return pb.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==vp.string?`^^${n.datatype.value}`:""}`;case"Quad":const t=[ga(n.subject,!0),ga(n.predicate,!0),ga(n.object,!0)];return e_(n.graph)||t.push(ga(n.graph,!0)),e?t:JSON.stringify(t);default:throw new Error(`Unexpected termType: ${n.termType}`)}}pb=new class q$ extends Qc{constructor(){return super(""),pb||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class bL extends Qc{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||pb}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function K$(n,e,t,i){return new bL(n,e,t,i)}let J$=0;class mS{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&Z$(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),s=/triple/.test(t),o=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new G$({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){J$=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=wL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<t;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<t&&"/"!==e[s];)r=s;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${J$++}_`,this._prefixCallback=i||wL,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=t,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=wL):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function wL(){}function Z$(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(wo.rdf.first),n.RDF_REST=t(wo.rdf.rest),n.RDF_NIL=t(wo.rdf.nil),n.N3_FORALL=t(wo.r.forAll),n.N3_FORSOME=t(wo.r.forSome),n.ABBREVIATIONS={a:t(wo.rdf.type),"=":t(wo.owl.sameAs),">":t(wo.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}Z$(mS.prototype,vr),vr.defaultGraph();var _b=S(8905);class _S{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||vr,e&&this.addQuads(e)}_termFromId(e,t){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return t_(e,t)}_termToNumericId(e){if("Quad"===e.termType){const t=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let s;return t&&i&&r&&(e_(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${t}.${i}.${r}.${s}`:`.${t}.${i}.${r}`]}return this._ids[ga(e)]}_termToNewNumericId(e){const t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${e_(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:ga(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const s in t)for(const o in i=t[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const s=e[t]||(e[t]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,t,i,r){const s=e[t],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[t]}*_findInIndex(e,t,i,r,s,o,a,c){let l,u,h;const f=this._entities,g=this._termFromId(c,this._factory),m={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const v in e)if(u=e[v]){m[s]=this._termFromId(f[v],this._factory),i&&((l=u,u={})[i]=l[i]);for(const w in u)if(h=u[w]){m[o]=this._termFromId(f[w],this._factory);const N=r?r in h?[r]:[]:Object.keys(h);for(let U=0;U<N.length;U++)m[a]=this._termFromId(f[N[U]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,g)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,s;if(r=e[t])for(s in r)i(s)}_loopByKey1(e,t,i){let r,s;for(r in e)s=e[r],s[t]&&i(r)}_loopBy2Keys(e,t,i,r){let s,o,a;if((s=e[t])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,t,i,r){let o,a,c,s=0;t&&((o=e,e={})[t]=o[t]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const u in a)(c=a[u])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!function rPe(n){return"string"==typeof n||n instanceof String}(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=ga(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),i=this._termToNewNumericId(i);const o=this._addToIndex(s.subjects,e,t,i);return this._addToIndex(s.predicates,t,i,e),this._addToIndex(s.objects,i,e,t),this._size=null,o}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),r=ga(r);const s=this._graphs;let o,a,c;if(!((e=e&&this._termToNumericId(e))&&(t=t&&this._termToNumericId(t))&&(i=i&&this._termToNumericId(i))&&(o=s[r])&&(a=o.subjects[e])&&(c=a[t])&&i in c))return!1;for(e in this._removeFromIndex(o.subjects,e,t,i),this._removeFromIndex(o.predicates,t,i,e),this._removeFromIndex(o.objects,i,e,t),null!==this._size&&this._size--,o.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const s=new _b.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,t,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){r=r&&ga(r);const s=this._getGraphs(r);let o,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||t&&!(c=this._termToNumericId(t))||i&&!(l=this._termToNumericId(i))))for(const u in s)(o=s[u])&&(a?l?yield*this._findInIndex(o.objects,l,a,c,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,a,c,null,"subject","predicate","object",u):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",u):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",u))}match(e,t,i,r){return new xL(this,e,t,i,r)}countQuads(e,t,i,r){r=r&&ga(r);const s=this._getGraphs(r);let a,c,l,u,o=0;if(e&&!(c=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||i&&!(u=this._termToNumericId(i)))return 0;for(const h in s)(a=s[h])&&(o+=e?i?this._countInIndex(a.objects,u,c,l):this._countInIndex(a.subjects,c,l,u):t?this._countInIndex(a.predicates,l,u,c):this._countInIndex(a.objects,u,c,l));return o}forEach(e,t,i,r,s){this.some(o=>(e(o),!1),t,i,r,s)}every(e,t,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),t,i,r,s);return o&&a}some(e,t,i,r,s){for(const o of this.readQuads(t,i,r,s))if(e(o))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,t,i),r}forSubjects(e,t,i,r){r=r&&ga(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.predicates,a,c,e):this._loopByKey1(o.subjects,a,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,t,i),r}forPredicates(e,t,i,r){r=r&&ga(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.objects,c,a,e):this._loopByKey0(o.subjects,a,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(s=>{r.push(s)},e,t,i),r}forObjects(e,t,i,r){r=r&&ga(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(t&&!(a=this._termToNumericId(t))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.subjects,a,c,e):this._loopByKey1(o.objects,a,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,t,i),r}forGraphs(e,t,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),t,i,r,s)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,wo.rdf.rest,wo.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let u,h,l=!1;const f=a.graph;let g=a.subject;for(;g&&!l;){const m=this.getQuads(null,null,g,null),v=this.getQuads(g,null,null,null);let w,N=null,U=null,ce=null;for(let re=0;re<v.length&&!l;re++)w=v[re],w.graph.equals(f)?u?l=r(g,"has non-list arcs out"):w.predicate.value===wo.rdf.first?N?l=r(g,"has multiple rdf:first arcs"):o.push(N=w):w.predicate.value===wo.rdf.rest?U?l=r(g,"has multiple rdf:rest arcs"):o.push(U=w):m.length?l=r(g,"can't be subject and object"):(u=w,h="subject"):l=r(g,"not confined to single graph");for(let re=0;re<m.length&&!l;++re)w=m[re],u?l=r(g,"can't have coreferences"):w.predicate.value===wo.rdf.rest?ce?l=r(g,"has incoming rdf:rest arcs"):ce=w:(u=w,h="object");N?c.unshift(N.object):l=r(g,"has no list head"),g=ce&&ce.subject}l?e=!1:u&&(i[u[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}class xL extends _b.Readable{constructor(e,t,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:s}=this,o=this._filtered=new _S({factory:e._factory});for(const a of e.readQuads(s,r,i,t))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new xL(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var aPe=S(7661),cPe=S(2821);function Dr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function rY(n){const e=n.length;let t=0;return new _b.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function EL(n,e){return AL.apply(this,arguments)}function AL(){return AL=jt(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield(0,aPe.toRDF)(t);e.import(rY(i))}return e}),AL.apply(this,arguments)}function SL(){return SL=jt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new cPe.RdfXmlParser({dataFactory:vr,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(t),i.end(),r}return e}),SL.apply(this,arguments)}function CL(){return CL=jt(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new mS({format:"n3"}).parse(t);e.import(rY(i))}return e}),CL.apply(this,arguments)}function TL(n,e){const t=JSON.parse(n),i=new _S;return Object.assign(i,t,{_factory:e??vr}),i}const yS="Unknown Euler angle order",i_=.99999;var Vs=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(Vs||{});class is extends VE{static get ZYX(){return Vs.ZYX}static get YXZ(){return Vs.YXZ}static get XZY(){return Vs.XZY}static get ZXY(){return Vs.ZXY}static get YZX(){return Vs.YZX}static get XYZ(){return Vs.XYZ}static get RollPitchYaw(){return Vs.ZYX}static get DefaultOrder(){return Vs.ZYX}static get RotationOrders(){return Vs}static rotationOrder(e){return Vs[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=is.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(t*i+s*r);let l=-2*(t*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+s*t),-2*(t*t+o)+1),g=Math.asin(l),m=Math.atan2(c,a);return this.set(f,g,m,is.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function hPe(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=ti(e)}get y(){return this[1]}set y(e){this[1]=ti(e)}get z(){return this[2]}set z(e){this[2]=ti(e)}get alpha(){return this[0]}set alpha(e){this[0]=ti(e)}get beta(){return this[1]}set beta(e){this[1]=ti(e)}get gamma(){return this[2]}set gamma(e){this[2]=ti(e)}get phi(){return this[0]}set phi(e){this[0]=ti(e)}get theta(){return this[1]}set theta(e){this[1]=ti(e)}get psi(){return this[2]}set psi(e){this[2]=ti(e)}get roll(){return this[0]}set roll(e){this[0]=ti(e)}get pitch(){return this[1]}set pitch(e){this[1]=ti(e)}get yaw(){return this[2]}set yaw(e){this[2]=ti(e)}get order(){return this[3]}set order(e){this[3]=function fPe(n){if(n<0&&n>=6)throw new Error(yS);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Vs.ZYX)}fromRotationMatrix(e,t=is.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new WO;switch(this[4]){case Vs.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Vs.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Vs.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Vs.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Vs.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Vs.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(yS)}}_fromRotationMatrix(e,t=is.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],u=e[6],h=e[10];switch(t=t||this[3]){case is.XYZ:this[1]=Math.asin(Pr(s,-1,1)),Math.abs(s)<i_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,a),this[2]=0);break;case is.YXZ:this[0]=Math.asin(-Pr(c,-1,1)),Math.abs(c)<i_?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case is.ZXY:this[0]=Math.asin(Pr(u,-1,1)),Math.abs(u)<i_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case is.ZYX:this[1]=Math.asin(-Pr(l,-1,1)),Math.abs(l)<i_?(this[0]=Math.atan2(u,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case is.YZX:this[2]=Math.asin(Pr(o,-1,1)),Math.abs(o)<i_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case is.XZY:this[2]=Math.asin(-Pr(r,-1,1)),Math.abs(r)<i_?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(yS)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case is.XYZ:{const f=o*c,g=o*h,m=l*c,v=l*h;t[0]=a*c,t[4]=-a*h,t[8]=u,t[1]=g+m*u,t[5]=f-v*u,t[9]=-l*a,t[2]=v-f*u,t[6]=m+g*u,t[10]=o*a;break}case is.YXZ:{const f=a*c,g=a*h,m=u*c,v=u*h;t[0]=f+v*l,t[4]=m*l-g,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-l,t[2]=g*l-m,t[6]=v+f*l,t[10]=o*a;break}case is.ZXY:{const f=a*c,g=a*h,m=u*c,v=u*h;t[0]=f-v*l,t[4]=-o*h,t[8]=m+g*l,t[1]=g+m*l,t[5]=o*c,t[9]=v-f*l,t[2]=-o*u,t[6]=l,t[10]=o*a;break}case is.ZYX:{const f=o*c,g=o*h,m=l*c,v=l*h;t[0]=a*c,t[4]=m*u-g,t[8]=f*u+v,t[1]=a*h,t[5]=v*u+f,t[9]=g*u-m,t[2]=-u,t[6]=l*a,t[10]=o*a;break}case is.YZX:{const f=o*a,g=o*u,m=l*a,v=l*u;t[0]=a*c,t[4]=v-f*h,t[8]=m*h+g,t[1]=h,t[5]=o*c,t[9]=-l*c,t[2]=-u*c,t[6]=g*h+m,t[10]=f-v*h;break}case is.XZY:{const f=o*a,g=o*u,m=l*a,v=l*u;t[0]=a*c,t[4]=-h,t[8]=u*c,t[1]=f*h+v,t[5]=o*c,t[9]=g*h-m,t[2]=m*h-g,t[6]=l*c,t[10]=v*h+f;break}default:throw new Error(yS)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new WO(e*r*s-t*i*o,e*i*o+t*r*s,t*i*s-e*r*o,e*i*s+t*r*o)}}var sY=S(4938),pPe=S.n(sY),gPe=S(7991),mPe=S.n(gPe),er=S(6990);const oY={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vS;const _Pe=new Uint8Array(16);function yPe(){if(!vS&&(vS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vS(_Pe)}const eo=[];for(let n=0;n<256;++n)eo.push((n+256).toString(16).slice(1));const bPe=function vPe(n,e,t){if(oY.randomUUID&&!e&&!n)return oY.randomUUID();const i=(n=n||{}).random||(n.rng||yPe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function aY(n,e=0){return eo[n[e+0]]+eo[n[e+1]]+eo[n[e+2]]+eo[n[e+3]]+"-"+eo[n[e+4]]+eo[n[e+5]]+"-"+eo[n[e+6]]+eo[n[e+7]]+"-"+eo[n[e+8]]+eo[n[e+9]]+"-"+eo[n[e+10]]+eo[n[e+11]]+eo[n[e+12]]+eo[n[e+13]]+eo[n[e+14]]+eo[n[e+15]]}(i)};var bS=S(9689);function*wS(n,e,t){for(const[i,r]of Object.entries(t))for(const s of Dr(n,e,i,null,null)){const o="Literal"===s.object.termType?(0,bS.fromRdf)(s.object):s.object.id;yield[r,o]}}function wp(n,e,t,i){const r={"@id":e,"@type":t};for(const[s,o]of Object.entries(i))for(const a of Dr(n,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,bS.fromRdf)(a.object):a.object.id;r[o]=c}return r}const $i=_L({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},vr),cY={x:$i("rdf"),type:$i("rdf")("type")},wPe_label=($i("rdfs"),$i("rdfs")("label")),Jt=($i("rdfs")("comment"),$i("rdfs")("isDefinedBy"),$i("rdfs")("seeAlso"),$i("ccf")),Yn={id:$i("ccf")("has_registration_location"),label:$i("rdfs")("label"),description:$i("rdfs")("comment"),link:Jt("url"),sex:Jt("sex"),age:Jt("age"),bmi:Jt("bmi"),Male:vr.literal("Male"),Female:vr.literal("Female"),consortiumName:Jt("consortium_name"),providerName:Jt("tissue_provider_name"),providerUUID:Jt("tissue_provider_uuid"),donor:Jt("comes_from"),sections:Jt("subdivided_into_sections"),datasets:Jt("generates_dataset"),sampleType:Jt("sample_type"),TissueBlock:vr.literal("Tissue Block"),TissueSection:vr.literal("Tissue Section"),NonStandard:vr.literal("Non-standard"),sectionCount:Jt("section_count"),sectionSize:Jt("section_size"),sectionUnits:Jt("section_size_unit"),sectionNumber:Jt("section_number"),spatialEntity:Jt("has_registration_location"),ontologyTerms:Jt("has_ontology_term"),cellTypeTerms:Jt("has_cell_type_term"),biomarkerTerms:Jt("has_biomarker_term"),technology:Jt("technology"),thumbnail:Jt("thumbnail")},ii={x:Jt,base:$i("base"),ontologyNode:{label:Jt("ccf_pref_label"),parent:Jt("ccf_part_of"),children:Jt("ccf_part_of"),rui_rank:Jt("rui_rank"),synonymLabels:vr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Jt("ccf_part_of"),ct_is_a:Jt("ccf_ct_isa"),located_in:Jt("ccf_located_in"),characterizes:Jt("ccf_characterizes"),bm_located_in:Jt("ccf_bm_located_in")},spatial:{Female:$i("base")("VHFemale"),Male:$i("base")("VHMale"),BothSexes:$i("base")("VHBothSexes"),FemaleOrgans:$i("base")("VHFemaleOrgans"),MaleOrgans:$i("base")("VHMaleOrgans")},SpatialObjectReference:Jt("spatial_object_reference"),SpatialEntity:Jt("spatial_entity"),SpatialPlacement:Jt("spatial_placement"),spatialObjectReference:{file:Jt("file_url"),file_format:Jt("file_format"),file_subpath:Jt("file_subpath")},extractionSet:{label:$i("rdfs")("label"),rui_rank:Jt("rui_rank")},spatialEntity:{label:$i("rdfs")("label"),description:$i("rdfs")("comment"),creator:$i("dcterms")("creator"),creator_first_name:Jt("creator_first_name"),creator_last_name:Jt("creator_last_name"),creator_middle_name:Jt("creator_middle_name"),creator_orcid:Jt("creator_orcid"),creation_date:$i("dcterms")("created"),updated_date:Jt("updated_date"),ccf_annotations:Jt("collides_with"),representation_of:Jt("representation_of"),reference_organ:Jt("has_reference_organ"),extraction_set_for:Jt("extraction_set_for"),extraction_set:Jt("has_extraction_set"),sex:Jt("organ_owner_sex"),side:Jt("organ_side"),rui_rank:Jt("rui_rank"),slice_thickness:Jt("slice_thickness"),slice_count:Jt("slice_count"),x_dimension:Jt("x_dimension"),y_dimension:Jt("y_dimension"),z_dimension:Jt("z_dimension"),dimension_units:Jt("dimension_unit"),object:Jt("has_object_reference")},spatialPlacement:{source:Jt("placement_for"),target:Jt("placement_relative_to"),placement_date:$i("dcterms")("created"),x_scaling:Jt("x_scaling"),y_scaling:Jt("y_scaling"),z_scaling:Jt("z_scaling"),scaling_units:Jt("scaling_unit"),x_rotation:Jt("x_rotation"),y_rotation:Jt("y_rotation"),z_rotation:Jt("z_rotation"),w_rotation:Jt("theta_rotation"),rotation_order:Jt("rotation_order"),rotation_units:Jt("rotation_unit"),x_translation:Jt("x_translation"),y_translation:Jt("y_translation"),z_translation:Jt("z_translation"),translation_units:Jt("translation_unit")}},Xn={x:$i("uberon"),body:$i("uberon")("0013702")},xPe={x:$i("cl"),cell:$i("cl")("0000000")},yb={x:$i("fma")},el=($i("lmha"),{body:Xn.body,cell:xPe.cell,respiratory_system:Xn.x("0001004"),colon:Xn.x("0001155"),left_lung:Xn.x("0002168"),right_lung:Xn.x("0002167"),left_bronchus:Xn.x("0002178"),right_bronchus:Xn.x("0002177"),kidney:Xn.x("0002113"),ureter:Xn.x("0000056"),eye:Xn.x("0000970"),fallopian_tube:Xn.x("0003889"),knee:Xn.x("0001465"),ovary:Xn.x("0000992"),trachea:Xn.x("0003126"),aorta:Xn.x("0000947"),blood:Xn.x("0000178"),bone_marrow:Xn.x("0002371"),male_reproductive_system:Xn.x("0000079"),lymph_node:Xn.x("0000029"),blood_vasculature:Xn.x("0004537"),brain:Xn.x("0000955"),eye_left:Xn.x("0004548"),eye_right:yb.x("54449"),fallopian_tube_left:Xn.x("0001303"),fallopian_tube_right:Xn.x("0001302"),heart:Xn.x("0000948"),kidney_left:Xn.x("0004538"),kidney_right:Xn.x("0004539"),knee_left:yb.x("24978"),knee_right:yb.x("24977"),large_intestine:Xn.x("0000059"),liver:Xn.x("0002107"),lungs:Xn.x("0002048"),mesenteric_lymph_node:Xn.x("0002509"),ovary_left:yb.x("7214"),ovary_right:yb.x("7213"),pancreas:Xn.x("0001264"),pelvis:Xn.x("0001270"),prostate_gland:Xn.x("0002367"),skin:Xn.x("0002097"),small_intestine:Xn.x("0002108"),spleen:Xn.x("0002106"),thymus:Xn.x("0002370"),ureter_left:Xn.x("0001223"),ureter_right:Xn.x("0001222"),urinary_bladder:Xn.x("0001255"),uterus:Xn.x("0000995")});function ML(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const xS={spatialObjectReference:ML(ii.spatialObjectReference),spatialEntity:ML(ii.spatialEntity),spatialPlacement:ML(ii.spatialPlacement)};function lY(n,e){const t=wp(n,e,"ExtractionSet",xS.spatialEntity);return t.extractionSites=(0,er.sortBy)(n.getSubjects(ii.spatialEntity.extraction_set,e,null).map(i=>xp(n,i.id)),["rui_rank"]),t}function xp(n,e){const t=wp(n,e,"SpatialEntity",xS.spatialEntity);return t.object&&(t.object=function EPe(n,e){return wp(n,e,"SpatialObjectReference",xS.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,ii.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,Yn.spatialEntity,e,null),t}function TPe(n,e){const t=wp(n,e,"SpatialPlacement",xS.spatialPlacement);return t.source&&(t.source=xp(n,t.source)),t.target&&(t.target=xp(n,t.target)),t}const IPe=(pPe()||sY).DirectedGraph;function uY(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(kV),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}class dY{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new IPe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},cY.type,ii.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},cY.type,ii.SpatialEntity,null);const t={};for(const i of Dr(e,null,ii.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of Dr(e,null,ii.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new Fn(Fn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new Fn(Fn.IDENTITY),s=mPe()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&uY(r,TPe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,er.get)(e,"placement[0]",(0,er.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,t),s&&(s=uY(s,r))):i&&(s=this.getTransformationMatrix(i,t)),s){const o=(new is).fromRotationMatrix(s,is.XYZ),a=s.getTranslation().map(u=>1e3*u),c=o.toVector3().map($se),l=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${bPe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class hY{constructor(e){this.db=e}getSpatialEntity(e){return xp(this.db.store,e)}getExtractionSets(e){return function APe(n,e){return(0,er.sortBy)(n.getSubjects(ii.spatialEntity.extraction_set_for,e,null).map(t=>lY(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return lY(this.db.store,e)}getAnatomicalStructures(e){return function SPe(n,e){return(0,er.sortBy)(n.getSubjects(ii.spatialEntity.reference_organ,e,null).map(t=>xp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function CPe(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(xp(n,t.subject.id))},null,ii.spatialEntity.reference_organ,null,null),(0,er.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=ii.spatial.Male.id;break;case"Female":t=ii.spatial.Female.id;break;default:t=ii.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ii.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ii.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ii.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ii.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ii.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===t?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(o){if(r)o=new Fn(Fn.IDENTITY).rotateX(kV(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function vb(n,e,t){const i=new Set;for(const r of e)for(const s of Dr(n,r,t,null,null))i.add(s.object.id);return i}const r_=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Sr=(Math,Math,{});function FPe(n,{precision:e=Sr.precision||4}={}){return n=function LPe(n){return Math.round(n/Sr.EPSILON)*Sr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Mh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bb(n,e,t){const i=Sr.EPSILON;t&&(Sr.EPSILON=t);try{if(n===e)return!0;if(Mh(n)&&Mh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!bb(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Sr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Sr.EPSILON=i}}function tl(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}Sr.EPSILON=1e-12,Sr.debug=!1,Sr.precision=4,Sr.printTypes=!1,Sr.printDegrees=!1,Sr.printRowMajor=!0;class IL extends(function HPe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return tl(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Mh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Sr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+FPe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!bb(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Sr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function to(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function fY(n,e,t=""){if(Sr.debug&&!function zPe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const pY={};function DL(n,e){pY[n]||(pY[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class GPe extends IL{get ELEMENTS(){return tl(!1),0}copy(e){return tl(!1),this}get x(){return this[0]}set x(e){this[0]=to(e)}get y(){return this[1]}set y(e){this[1]=to(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return to(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return to(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return tl(e>=0&&e<this.ELEMENTS,"index is out of range"),to(this[e])}setComponent(e,t){return tl(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var ma=typeof Float32Array<"u"?Float32Array:Array;function gY(){var n=new ma(3);return ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function mY(n,e,t){var i=new ma(3);return i[0]=n,i[1]=e,i[2]=t,i}function _Y(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function ES(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=r*c-s*a,n[1]=s*o-i*c,n[2]=i*a-r*o,n}function yY(n,e,t){var i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});gY();const RL=[0,0,0],vY={};class Cn extends GPe{static get ZERO(){return vY.ZERO=vY.ZERO||Object.freeze(new Cn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Mh(e)?this.copy(e):(Sr.debug&&(to(e),to(t),to(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Sr.debug&&(to(e.x),to(e.y),to(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=to(e)}angle(e){return function QPe(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&_Y(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return ES(this,this,e),this.check()}rotateX({radians:e,origin:t=RL}){return function KPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=RL}){return function JPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=RL}){return function ZPe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function XPe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o}(this,this,e),this.check()}transformAsVector(e){return function tNe(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return yY(this,this,e),this.check()}transformByMatrix2(e){return function nNe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function qPe(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,v=i*h-r*u,w=2*t[3];h*=w,f*=w,m*=2,v*=2,n[0]=a+(u*=w)+(g*=2),n[1]=c+h+m,n[2]=l+f+v}(this,this,e),this.check()}}new Cn,new Cn;const wb=new Cn,EY=new Cn;class OL{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new Cn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=wb.from(t),this.center=(new Cn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new OL(this.center,this.radius)}union(e){const t=this.center,i=this.radius,s=e.radius,o=wb.copy(e.center).subtract(t),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return EY.copy(o).scale((-i+c)/a).add(t),this.center.copy(EY),this.radius=c,this}expand(e){const t=(e=wb.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function xY(n,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(s,o,a),n[2]=Math.hypot(c,l,u),n}(wb,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=wb.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?r_.OUTSIDE:s<i?r_.INTERSECTING:r_.INSIDE}}class aNe extends IL{get ELEMENTS(){return tl(!1),0}get RANK(){return tl(!1),0}toString(){let e="[";if(Sr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=to(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function AY(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=t[0],g=t[1],m=t[2],v=t[3],w=t[4],N=t[5],U=t[6],ce=t[7],re=t[8];return n[0]=f*i+g*o+m*l,n[1]=f*r+g*a+m*u,n[2]=f*s+g*c+m*h,n[3]=v*i+w*o+N*l,n[4]=v*r+w*a+N*u,n[5]=v*s+w*c+N*h,n[6]=U*i+ce*o+re*l,n[7]=U*r+ce*a+re*u,n[8]=U*s+ce*c+re*h,n}function SY(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function gNe(){var n=new ma(2);ma!=Float32Array&&(n[0]=0,n[1]=0)}();const CY=Object.freeze([1,0,0,0,1,0,0,0,1]),_Ne=Object.freeze([0,0,0,0,0,0,0,0,0]),yNe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),o_={};class zo extends aNe{static get IDENTITY(){return o_.IDENTITY=o_.IDENTITY||Object.freeze(new zo(CY)),o_.IDENTITY}static get ZERO(){return o_.ZERO=o_.ZERO||Object.freeze(new zo(_Ne)),o_.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return yNe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,s,o,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function dNe(n){var r=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*s-o*c)+n[1]*(-l*r+o*a)+n[2]*(c*r-s*a)}(this)}identity(){return this.copy(CY)}fromQuaternion(e){return function pNe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,c=r+r,l=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,v=s*o,w=s*a,N=s*c;n[0]=1-h-m,n[3]=u-N,n[6]=f+w,n[1]=u+N,n[4]=1-l-m,n[7]=g-v,n[2]=f-w,n[5]=g+v,n[8]=1-l-h}(this,e),this.check()}transpose(){return function lNe(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function uNe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=-u*s+a*c,g=l*s-o*c,m=t*h+i*f+r*g;m&&(n[0]=h*(m=1/m),n[1]=(-u*i+r*l)*m,n[2]=(a*i-r*o)*m,n[3]=f*m,n[4]=(u*t-r*c)*m,n[5]=(-a*t+r*s)*m,n[6]=g*m,n[7]=(-l*t+i*c)*m,n[8]=(o*t-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return AY(this,e,this),this.check()}multiplyRight(e){return AY(this,this,e),this.check()}rotate(e){return function fNe(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=Math.sin(t),g=Math.cos(t);n[0]=g*i+f*o,n[1]=g*r+f*a,n[2]=g*s+f*c,n[3]=g*o-f*i,n[4]=g*a-f*r,n[5]=g*c-f*s,n[6]=l,n[7]=u,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?SY(this,this,e):SY(this,this,[e,e,e]),this.check()}translate(e){return function hNe(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=t[0],g=t[1];n[0]=i,n[1]=r,n[2]=s,n[3]=o,n[4]=a,n[5]=c,n[6]=f*i+g*o+l,n[7]=f*r+g*a+u,n[8]=f*s+g*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function mNe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=yY(t||[-0,-0,-0],e,this);break;case 4:t=function iNe(n,e,t){const i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return fY(t,e.length),t}transformVector(e,t){return DL("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return DL("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return DL("Matrix3.transformVector"),this.transform(e,t)}}function TY(){var n=new ma(4);return ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function MY(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function IY(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+o*a+r*l-s*c,n[1]=r*u+o*c+s*a-i*l,n[2]=s*u+o*l+i*c-r*a,n[3]=o*u-i*a-r*c-s*l,n}!function vNe(){var n=new ma(4);ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var YNe=function(){var n=gY(),e=mY(1,0,0),t=mY(0,1,0);return function(i,r,s){var o=_Y(r,s);return o<-.999999?(ES(n,e,r),function $Pe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&ES(n,t,r),function YPe(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),MY(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(ES(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function MNe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();TY(),TY(),function cNe(){var n=new ma(9);ma!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const XNe=[0,0,0,1];class NY extends IL{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function DY(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}(this,e),this.check()}identity(){return function NNe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return MY(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=to(e)}get y(){return this[1]}set y(e){this[1]=to(e)}get z(){return this[2]}set z(e){this[2]=to(e)}get w(){return this[3]}set w(e){this[3]=to(e)}len(){return function CNe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function TNe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function INe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return YNe(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function ANe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function BNe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function HNe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function VNe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return function DNe(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return tl(!t),IY(this,this,e),this.check()}multiplyLeft(e,t){return tl(!t),IY(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function LNe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+o*a,n[1]=r*c+s*a,n[2]=s*c-r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function FNe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-s*a,n[1]=r*c+o*a,n[2]=s*c+i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function kNe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return function SNe(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=XNe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function AS(n,e,t,i){var f,g,m,v,w,r=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],h=t[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),v=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(v=1-i,w=i),n[0]=v*r+w*c,n[1]=v*s+w*l,n[2]=v*o+w*u,n[3]=v*a+w*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function RNe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;n[0]=u*l+g*-o+h*-c-f*-a,n[1]=h*l+g*-a+f*-o-u*-c,n[2]=f*l+g*-c+u*-a-h*-o,n[3]=e[3]}(t,e,this),fY(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const qNe=new Cn,KNe=new Cn,SS=new Cn,CS=new Cn,TS=new Cn,JNe=new Cn,ZNe=new Cn;class PL{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new Cn).from(e),this.halfAxes=new zo(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Cn(e).len(),new Cn(t).len(),new Cn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Cn(e).normalize(),s=new Cn(t).normalize(),o=new Cn(i).normalize();return(new NY).fromMatrix3(new zo([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new NY(i),s=(new zo).fromQuaternion(r);return s[0]=s[0]*t[0],s[1]=s[1]*t[0],s[2]=s[2]*t[0],s[3]=s[3]*t[1],s[4]=s[4]*t[1],s[5]=s[5]*t[1],s[6]=s[6]*t[2],s[7]=s[7]*t[2],s[8]=s[8]*t[2],this.center=(new Cn).from(e),this.halfAxes=s,this}clone(){return new PL(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new OL){const t=this.halfAxes,i=t.getColumn(0,SS),r=t.getColumn(1,CS),s=t.getColumn(2,TS),o=qNe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?r_.OUTSIDE:l>=c?r_.INSIDE:r_.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=KNe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,SS),s=i.getColumn(1,CS),o=i.getColumn(2,TS),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(t.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(t.dot(s))-c,h>0&&(u+=h*h),h=Math.abs(t.dot(o))-l,h>0&&(u+=h*h),u}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,SS),l=a.getColumn(1,CS),u=a.getColumn(2,TS),h=JNe.copy(c).add(l).add(u).add(o),f=ZNe.copy(h).subtract(e);let g=t.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).add(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,SS);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,CS);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,TS);return r.transformAsPoint(e),this.halfAxes=new zo([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const LY=new Cn,FY=new Cn;class NL{constructor(e=[0,0,1],t=0){this.normal=new Cn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return tl(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=LY.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),tl(bb(this.normal.len(),1)),this.distance=r,this}clone(e){return new NL(this.normal,this.distance)}equals(e){return bb(this.distance,e.distance)&&bb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=FY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=LY.from(e);const i=this.getPointDistance(e),r=FY.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new Cn([1,0,0]),new Cn([0,1,0]),new Cn([0,0,1]),new Cn,new Cn,new NL(new Cn(1,0,0),0),new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,new Cn,Math,new zo,new zo,new zo,new zo,new zo,new Cn,new Cn,new Cn,new Cn,new Cn,new zo,new zo,new zo;const MLe={[ii.spatialEntity.x_dimension.id]:"x",[ii.spatialEntity.y_dimension.id]:"y",[ii.spatialEntity.z_dimension.id]:"z"};function DLe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let s;if(r){const o=r.getTranslation(),a=function ILe(n,e){const t=wp(n,e,"Dimensions",MLe);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new is).fromRotationMatrix(r,is.XYZ).toQuaternion().normalize().calculateW();s=(new PL).fromCenterHalfSizeQuaternion(o,a,c)}return s}function RLe(n,e,t,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,u=a/1e3*(a/1e3);for(const h of t){const f=DLe(n,e,h,c);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&l.add(h)}return l}function Eb(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Dr(n,a,Yn.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=t(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function IS(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of Dr(n,a,Yn.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=t(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function c_(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function UL(n,e,t){const i=new Set;for(const r of t){const s=vr.namedNode(r);n.forSubjects(c_(e,i),ii.spatialEntity.ccf_annotations,s,null)}return i}function VL(n,e){const t=function WLe(n,e){const t=new Map;for(const i of n)for(const r of Dr(e,i,Yn.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id)?.add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const s=t.get(r);for(const o of Dr(e,r,ii.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s?.forEach(c=>a?.add(c))}else i.set(o.object.id,new Set(s))}return i}function qLe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ii.ontologyNode.label.id]:"label",[t]:"parent",[ii.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of wS(n,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=n.getSubjects(t,e,null).map(s=>s.id),i}function UY(n,e,t,i){const r={root:e,nodes:{}},s=new Set;for(const a of Dr(n,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=qLe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const o=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,VY(r),r}function VY(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)VY(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const HY=(0,er.memoize)(function KLe(n){const e=UY(n,el.body.id,"body",ii.asctb.part_of.id);return e.nodes[el.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function HL(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const DS={[Yn.label.id]:"label",[Yn.description.id]:"description",[Yn.link.id]:"link"},QLe={...DS,[Yn.providerName.id]:"providerName"},eFe={...DS,[Yn.technology.id]:"technology",[Yn.thumbnail.id]:"thumbnail"},tFe={...DS,[Yn.sampleType.id]:"sampleType",[Yn.sectionNumber.id]:"sectionNumber",[Yn.datasets.id]:"datasets"},nFe={...DS,[Yn.sampleType.id]:"sampleType",[Yn.sectionCount.id]:"sectionCount",[Yn.sectionSize.id]:"sectionSize",[Yn.sectionUnits.id]:"sectionUnits",[Yn.donor.id]:"donor",[Yn.spatialEntity.id]:"spatialEntityId",[Yn.sections.id]:"sections",[Yn.datasets.id]:"datasets"};function iFe(n,e){return wp(n,e,"Donor",QLe)}function zY(n,e){return wp(n,e,"Dataset",eFe)}function rFe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of wS(n,e,tFe))if("datasets"===i){const s=zY(n,r);t[i].push(s)}else t[i]=r;return t}class oFe{constructor(e){this.database=e,this.status="Loading",this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;return jt(function*(){e.status="Loading",e.message="Loading database";const t=Date.now();return e.database.connect().then(function(){var i=jt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{e.status="Error",e.message=i?.message??"Unknown error while loading database",e.timestamp=(new Date).toISOString()}).finally(()=>{e.loadTime=Date.now()-t})})()}}function zL(){return zL=jt(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),zL.apply(this,arguments)}const GL="http://purl.org/ccf/",dFe={"@context":{"@base":GL,"@vocab":GL,ccf:GL,rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function RS(n,e=dFe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const GY={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},hFe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},WY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),fFe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},l_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},WL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class mFe{constructor(e,t){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=hFe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=GY}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const o=this.getRuiLocation(e,this.donor);o?this.rui_location=o:this.bad=!0,l_[e.group_uuid]||(l_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=l_[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const u={},h=[];this.sections=h;const f=[];this.datasets=f;for(const N of r.filter(U=>"Sample"===U.entity_type)){const U=this.getSection(N,e);u[N.submission_id]=U,h.push(U),U.section_number=U.section_number??h.length}for(const N of r)if("Dataset"===N.entity_type){const U=this.getDataset(N,t),ce=(0,er.get)(N,["ingest_metadata","metadata","tissue_id"]);u[ce]?u[ce].datasets?.push(U):f.push(U)}const g=o??{},m=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const v=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=v;const w=g.dimension_units||"millimeter";this.section_units=w,this.description=`${m}, ${v} ${w}, ${this.section_count} Sections`,h.forEach((N,U)=>{N.description=`${g.x_dimension} x ${g.y_dimension} x ${v} ${w}, ${v} ${w}, ${N.description}`,N.section_number=U+1})}getSection(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${l_[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=l_[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,o=e.dataset_type??"",a=o.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":o.split(/ \[/)[0],l=this.getDatasetThumbnail(e,t)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${s}, ${r}`,description:`Dataset Type: ${o}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,t){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(t?`?token=${t}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,er.get)(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>WY.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(t?`?token=${t}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(WY.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=fFe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const t=(e.description||"").toLowerCase();let i;t.includes("female")?i="Female":t.includes("male")&&(i="Male");const r=t.match(/age ([0-9]+)/)??t.match(/ ([0-9]+) years/);let s,o,a;r&&(s=(0,er.toNumber)(r[1]));const c=(0,er.get)(e,"mapped_metadata",(0,er.get)(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!s&&c.age_value?.length>0&&(s=c.age_value[0]),!o&&c.body_mass_index_value?.length>0&&(o=c.body_mass_index_value[0]);for(const g of(0,er.get)(e,"metadata.organ_donor_data",(0,er.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===g.preferred_term||"Female"===g.preferred_term?i="Female":"Masculine gender"===g.preferred_term||"Male"===g.preferred_term?i="Male":"Current chronological age"===g.preferred_term||"Age"===g.preferred_term?s=(0,er.toNumber)(g.data_value):"Body mass index"===g.preferred_term?o=(0,er.toNumber)(g.data_value):"Race"===g.grouping_concept_preferred_term&&(a=g.preferred_term);let l="";i&&s?(l+=`${i}, Age ${s}`,o&&(l+=`, BMI ${o.toFixed(1)}`)):i&&(l=i);const u=new Date(e.last_modified_timestamp).toLocaleDateString(),h=l_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${u}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:s,sex:i,bmi:o,race:a,consortium_name:this.portal===GY?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=(0,er.get)(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,er.set)(i,["placement","target"],s.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&(0,er.set)(i,["placement","target"],"Male"===t.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,er.omit)({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const _Fe=1e4,yFe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],vFe={exists:{field:"rui_location"}};function $Y(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??vFe,_source:{includes:yFe}})}function $L(n,e){return YL.apply(this,arguments)}function YL(){return YL=jt(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),YL.apply(this,arguments)}function XL(){return XL=jt(function*(n,e,t){const i=_Fe,r=function bFe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=$Y(0,i,t),o=yield $L(n,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push($L(n,{method:"POST",headers:r,body:$Y(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const u=l.map(h=>h?.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...u)}}}),XL.apply(this,arguments)}function qL(){return qL=jt(function*(n,e,t,i,r="",s=""){let o;if("static"===e?o=yield $L(n):"search-api"===e&&(o=yield function wFe(n,e,t){return XL.apply(this,arguments)}(n,i,t)),o)return function pFe(n,e,t=!1){const r={},s=(0,er.get)(n,"hits.hits",[]).map(a=>(0,er.get)(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new mFe(a,e).toJsonLd());for(const a of s){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const o=Object.values(r);return t&&(function gFe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,t++)}i.samples=r.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(o),console.log(o.map(a=>({"@context":WL,...a})))),RS(JSON.stringify({"@context":WL,"@graph":o}),WL)}(o,i);console.warn(`Unable to load ${n}`)}),qL.apply(this,arguments)}const{delMany:EFe,get:YY,setMany:AFe}=L,SFe={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class CFe{constructor(e=SFe){this.options=e,this.store=new _S(void 0,{factory:vr}),this.graph=new dY(this),this.scene=new hY(this)}connect(e,t=!1){var i=this;return jt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return jt(function*(){const t=(new Date).getTime(),i=F2e(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield YY(r).catch(()=>{});let a;o&&t-new Date(+o).getTime()>36e5?yield EFe([s,r]).catch(()=>{}):a=yield YY(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),AFe([[s,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return jt(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=TL(r,vr);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=TL(s,vr))}else r?.length>0&&i.push(r);i.push(yield function lFe(){return zL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function xFe(n,e,t,i){return qL.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(s=>{if(s)return e.addDataSources([s])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return jt(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var s=jt(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=RS(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield EL(o,r)}else o.endsWith("n3")?yield function uPe(n,e){return CL.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function lPe(n,e){return SL.apply(this,arguments)}(o,r):(o=RS(o),yield EL(o,r));else o=RS(JSON.stringify(o)),yield EL(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return jt(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function uFe(n){const e=HY(n),t=new Map;for(const{subject:i,object:r}of Dr(n,null,ii.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;t.set(i.id,[...s].map(a=>vr.namedNode(a)))}for(const{object:i}of Dr(n,null,Yn.spatialEntity,null,null))for(const{subject:r}of Dr(n,null,ii.spatialPlacement.source,i,null))for(const{object:s}of Dr(n,r,ii.spatialPlacement.target,null,null))for(const o of t.get(s.id)??[])n.addQuad(vr.namedNode(i.id),ii.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function dPe(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return jt(function*(){t.store=TL(e,vr),t.graph=new dY(t),t.scene=new hY(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function PLe(n,e,t){let i=function NLe(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),Yn.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function zLe(n,e,t=!0){const i=new Set;if(n.forSubjects(c_(e,i),Yn.spatialEntity,null,null),!t){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=Eb(n,i,s=>function LLe(n,e,t){const i=new Set;return n.forSubjects(c_(e,i),Yn.sex,Yn[t],null),i}(n,s,r))}if(i.size>0&&t.consortiums?.length>0&&(i=Eb(n,i,r=>function FLe(n,e,t){const i=new Set;for(const r of t){const s=vr.literal(r);n.forSubjects(c_(e,i),Yn.consortiumName,s,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=Eb(n,i,r=>function kLe(n,e,t){const i=new Set;for(const r of t){const s=vr.literal(r);n.forSubjects(c_(e,i),Yn.providerName,s,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function OLe(n,e,t){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of Dr(n,c,Yn.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of Dr(n,c,Yn.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=t(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function BLe(n,e,t){const i=new Set;for(const r of t){const s=vr.literal(r);n.forSubjects(c_(e,i),Yn.technology,s,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=IS(n,i,r=>function GLe(n,e,t,i){const r=new Set;for(const s of i)RLe(n,e,t,s).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(el.body.id)&&(i=IS(n,i,s=>UL(n,s,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(el.cell.id)&&(i=IS(n,i,s=>function jLe(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ii.asctb.located_in,null),r===el.cell.id&&i.add(el.body.id);return UL(n,e,[...i])}(n,s,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=IS(n,i,s=>function ULe(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ii.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(el.body.id);return UL(n,e,[...i])}(n,s,r)))}if(i.size>0&&2===t.ageRange?.length&&(0,er.isFinite)(t.ageRange[0])&&(0,er.isFinite)(t.ageRange[1])){const r=Math.max(...t.ageRange),s=Math.min(...t.ageRange);1===s&&110===r||(i=Eb(n,i,o=>function VLe(n,e,t,i){const r=new Set;for(const s of e)for(const o of Dr(n,s,Yn.age,null,null)){const a=(0,bS.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,o,s,r)))}if(i.size>0&&2===t.bmiRange?.length&&(0,er.isFinite)(t.bmiRange[0])&&(0,er.isFinite)(t.bmiRange[1])){const r=Math.max(...t.bmiRange),s=Math.min(...t.bmiRange);13===s&&83===r||(i=Eb(n,i,o=>function HLe(n,e,t,i){const r=new Set;for(const s of e)for(const o of Dr(n,s,Yn.bmi,null,null)){const a=(0,bS.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(vr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function MPe(n,e){const t=n.getObjects(vr.namedNode(e),Yn.spatialEntity,null);if(t.length>0)return xp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return jt(function*(){return e.status||(e.status=new oFe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return jt(function*(){return function RPe(n){const e=new Set;for(const t of Dr(n,null,Yn.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return jt(function*(){return function OPe(n){const e=new Set;for(const t of Dr(n,null,Yn.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return jt(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function sFe(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of wS(n,e,nFe))if("sections"===i){const s=rFe(n,r);t[i].push(s)}else if("datasets"===i){const s=zY(n,r);t[i].push(s)}else t[i]="donor"===i?iFe(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return jt(function*(){return function DPe(n,e){const t=vb(e,n,Yn.donor.id),i=vb(e,t,Yn.providerUUID.id),r=new Set;for(const c of n)for(const l of Dr(e,c,Yn.spatialEntity,null,null))r.add(l.subject.id);const s=vb(e,r,Yn.sections.id),o=new Set([...vb(e,r,Yn.datasets.id),...vb(e,s,Yn.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return jt(function*(){return function $Le(n,e){const t={};return VL(n,e).forEach((r,s)=>{t[s]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return jt(function*(){return function XLe(n,e){const t=VL(n,e),i=new Map;for(const s of t.keys()){const o=t.get(s);for(const a of Dr(e,null,ii.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[el.cell.id]=t.get(el.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return jt(function*(){return function YLe(n,e){const t=VL(n,e),i=new Map;for(const s of t.keys()){const o=t.get(s);for(const a of Dr(e,null,ii.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=t.get(el.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return jt(function*(){return HY(e.store)})()}getCellTypeTreeModel(){var e=this;return jt(function*(){return function JLe(n){return UY(n,el.cell.id,"cell",ii.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return jt(function*(){return function ZLe(n){const e=ii.x("ccf_biomarker_type"),t={biomarkers:HL("biomarkers","Biomarkers","",[])};for(const i of Dr(n,null,e,null,null)){const r=i.object.value,s=i.subject.id;t[r]||(t[r]=HL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(s);const o=HL(s,"",r,[]),a={[ii.ontologyNode.label.id]:"label",[wPe_label.id]:"synonymLabels"};for(const[c,l]of wS(n,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,u)=>t[l]?.label.localeCompare(t[u]?.label));t[s]=o}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return jt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return jt(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return jt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return jt(function*(){return i.graph.getSpatialPlacement(e,t)})()}}class MFe{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}class XY extends MFe{forwardCall(e,...t){return this.impl$.pipe(xr(i=>i[e](...t)))}}let IFe=(()=>{class n extends XY{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(i=>i,wi(i=>Object.keys(i).length>0),xr(i=>function TFe(n,e){return new St(t=>{const i=n(),r=e(i);return(r?_s(r):Bo).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),$t(i=>i.database),Uo(1))}connectDatabase(t,i){return jt(function*(){return yield t.database.connect(i,!0),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(ot(rd))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),DFe=(()=>{class n extends IFe{createDatabase(t){return{database:new CFe(t),unsubscribe:()=>{}}}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})();static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RFe=(()=>{class n extends XY{constructor(t,i){super(),this.impl$=t.config$.pipe(r=>r,$t(r=>this.selectToken(r)),_h(),$t(r=>i.get(r)),Uo(1))}static#e=this.\u0275fac=function(i){return new(i||n)(ot(rd),ot(Ki))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})();class qY extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class kFe{constructor(){this.cancelUncompleted$=new Zt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const KL="\u0275fac",KY=Symbol("InjectorInstance"),JY=Symbol("FactoryHasBeenDecorated");function ZY(n,e){const t=n[KY];return t?t.get(e):null}const UFe={cancelUncompleted:!1};function QY(n=UFe){return(e,t,i)=>{let r;const s=function BFe(n){return n?new kFe:null}(n.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=ZY(this,ed)||function LFe(){throw new qY}(),c=ZY(this,mn)||function FFe(){throw new qY}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function NFe(n,e,t){return Wg(e)?function PFe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):ip(e)?function OFe(n,e,t){return null!==t&&(e=e.pipe(da(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,t,{set:a=>r=a,get:()=>o}),function jFe(n){if(JY in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[KL]&&function JL(n){const e=n[KL];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[KY]=rt(Eu),r};t&&(t.factory=i),Object.defineProperty(n,KL,{get:()=>i})}(e),n.constructor.prototype[JY]=!0}(e)}}let eX=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),tX=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),nX=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();function VFe(n,e){}class OS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let iX=(()=>{class n extends vN{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=iN(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=iN();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=iN())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(Y9),rt(Zn,8),rt(OS),rt(hN),rt(mn),rt(VA),rt(PA))};static#t=this.\u0275cmp=_i({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Ds(jA,7),2&i){let s;Fi(s=ki())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&wr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[oi,$g],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&mi(0,VFe,0,0,"ng-template",0)},dependencies:[gW,jA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class ZL{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Zt,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!bh(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const rX=new xt("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=kt(qc);return()=>n.scrollStrategies.block()}}),HFe=new xt("DialogData"),zFe=new xt("DefaultDialogConfig");let WFe=0,$Fe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Zt,this._afterOpenedAtThisLevel=new Zt,this._ariaHiddenElements=new Map,this.afterAllClosed=zv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Jl(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new OS,...i}).id=i.id||"cdk-dialog-"+WFe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new ZL(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){QL(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){QL(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),QL(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new wN({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:OS,useValue:r},{provide:ZL,useValue:i},{provide:VA,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=iX;const c=new yN(a,r.viewContainerRef,Ki.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof oc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new BA(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new yN(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:HFe,useValue:t.data},{provide:ZL,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(jv,null,{optional:!0}))&&a.push({provide:jv,useValue:{value:t.direction,change:Kt()}}),Ki.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(ot(qc),ot(Ki),ot(zFe,8),ot(n,12),ot(UA),ot(rX))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QL(n,e){let t=n.length;for(;t--;)e(n[t])}function YFe(n,e){}class eF{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const tF="mdc-dialog--open",sX="mdc-dialog--opening",oX="mdc-dialog--closing";let aX=(()=>{class n extends iX{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._animationMode=l,this._animationStateChanged=new pn,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?lX(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?lX(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(cX,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(sX,tF)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(tF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(tF),this._animationsEnabled?(this._hostElement.style.setProperty(cX,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(oX)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(sX,oX)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(Y9),rt(Zn,8),rt(eF),rt(hN),rt(mn),rt(VA),rt(Qa,8),rt(PA))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(Xd("id",r._config.id),wr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Wi("_mat-animation-noopable",!r._animationsEnabled))},standalone:!0,features:[oi,$g],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(sn(0,"div",0)(1,"div",1),mi(2,YFe,0,0,"ng-template",2),on()())},dependencies:[gW,jA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();const cX="--mat-dialog-transition-duration";function lX(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?uN(n.substring(0,n.length-2)):n.endsWith("s")?1e3*uN(n.substring(0,n.length-1)):"0"===n?0:null}class PS{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Zt,this._beforeClosed=new Zt,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(wi(r=>"opened"===r.state),Ir(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(wi(r=>"closed"===r.state),Ir(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),zc(this.backdropClick(),this.keydownEvents().pipe(wi(r=>27===r.keyCode&&!this.disableClose&&!bh(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function uX(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(wi(t=>"closing"===t.state),Ir(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const dX=new xt("MatMdcDialogData"),KFe=new xt("mat-mdc-dialog-default-options"),hX=new xt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=kt(qc);return()=>n.scrollStrategies.block()}});let ZFe=0,NS=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,a,c,l){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Zt,this._afterOpenedAtThisLevel=new Zt,this.dialogConfigClass=eF,this.afterAllClosed=zv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Jl(void 0))),this._dialog=i.get($Fe),this._dialogRefConstructor=PS,this._dialogContainerType=aX,this._dialogDataToken=dX}open(t,i){let r;(i={...this._defaultOptions||new eF,...i}).id=i.id||"mat-mdc-dialog-"+ZFe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:OS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){return new(i||n)(ot(qc),ot(Ki),ot(Pf,8),ot(KFe,8),ot(hX),ot(n,12),ot(UA),ot(Qa,8))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QFe=0,nF=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+QFe++}ngOnInit(){this._dialogRef||(this._dialogRef=function fX(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(PS,8),rt(ei),rt(NS))};static#t=this.\u0275dir=Wt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Xd("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0})}return n})(),iF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return n})();let gX=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Ui({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(ot(sd))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const nke=["*"];let LS;function Sb(n){return function ike(){if(void 0===LS&&(LS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(LS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return LS}()?.createHTML(n)||n}function mX(n){return Error(`Unable to find icon with the name "${n}"`)}function _X(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function yX(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ep{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let FS=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Ep(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Cs.HTML,r);if(!o)throw yX(r);const a=Sb(o);return this._addSvgIconConfig(t,i,new Ep("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ep(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Cs.HTML,i);if(!s)throw yX(i);const o=Sb(s);return this._addSvgIconSetConfig(t,new Ep("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Cs.RESOURCE_URL,t);if(!i)throw _X(t);const r=this._cachedIconsByUrl.get(i);return r?Kt(kS(r)):this._loadSvgIconFromConfig(new Ep(t,null)).pipe(Bi(s=>this._cachedIconsByUrl.set(i,s)),$t(s=>kS(s)))}getNamedSvgIcon(t,i=""){const r=vX(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):mh(mX(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Kt(kS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($t(i=>kS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Kt(r):Av(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Xc(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Cs.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),Kt(null)})))).pipe($t(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw mX(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Bi(i=>t.svgText=i),$t(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Kt(null):this._fetchIcon(t).pipe(Bi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Sb("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Sb("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function rke(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Cs.RESOURCE_URL,i);if(!o)throw _X(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe($t(l=>Sb(l)),fp(()=>this._inProgressUrlFetches.delete(o)),$u());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(vX(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return oke(s)?new Ep(s.url,null,s.options):new Ep(s,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(ot(sd,8),ot(M0),ot(Zn,8),ot(Ra))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kS(n){return n.cloneNode(!0)}function vX(n,e){return n+":"+e}function oke(n){return!(!n.url||!n.options)}const ake=KCe(class{constructor(n){this._elementRef=n}}),cke=new xt("MAT_ICON_DEFAULT_OPTIONS"),lke=new xt("mat-icon-location",{providedIn:"root",factory:function uke(){const n=kt(Zn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),bX=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],dke=bX.map(n=>`[${n}]`).join(", "),hke=/^url\(['"]?#(.*?)['"]?\)$/;let wX=(()=>{class n extends ake{get inline(){return this._inline}set inline(t){this._inline=jm(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=_t.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(dke),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)bX.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(hke):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Ir(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(FS),yl("aria-hidden"),rt(lke),rt(Ra),rt(cke,8))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(wr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Wi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[oi],ngContentSelectors:nke,decls:1,vars:0,template:function(i,r){1&i&&(oa(),Ti(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),xX=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const EX=new xt("CdkAccordion");let fke=0,pke=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=_t.EMPTY,this.closed=new pn,this.opened=new pn,this.destroyed=new pn,this.expandedChange=new pn,this.id="cdk-accordion-child-"+fke++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(rt(EX,12),rt(Po),rt(xX))};static#t=this.\u0275dir=Wt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:["expanded","expanded",gs],disabled:["disabled","disabled",gs]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[vi([{provide:EX,useValue:void 0}]),Ef]})}return n})();const gke=["body"];function mke(n,e){}const _ke=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],yke=["mat-expansion-panel-header","*","mat-action-row"];function vke(n,e){1&n&&or(0,"span",2),2&n&&jn("@indicatorRotate",kr()._getExpandedState())}const bke=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],wke=["mat-panel-title","mat-panel-description","*"],AX=new xt("MAT_ACCORDION"),SX="225ms cubic-bezier(0.4,0.0,0.2,1)",CX={indicatorRotate:Hv("indicatorRotate",[Eh("collapsed, void",ha({transform:"rotate(0deg)"})),Eh("expanded",ha({transform:"rotate(180deg)"})),hp("expanded <=> collapsed, void => collapsed",xh(SX))]),bodyExpansion:Hv("bodyExpansion",[Eh("collapsed, void",ha({height:"0px",visibility:"hidden"})),Eh("expanded",ha({height:"*",visibility:""})),hp("expanded <=> collapsed, void => collapsed",xh(SX))])},TX=new xt("MAT_EXPANSION_PANEL");let xke=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(oc),rt(TX,8))};static#t=this.\u0275dir=Wt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),Eke=0;const MX=new xt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let IX=(()=>{class n extends pke{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=jm(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,a,c){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new pn,this.afterCollapse=new pn,this._inputChanges=new Zt,this._headerId="mat-expansion-panel-header-"+Eke++,this._bodyAnimationDone=new Zt,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(_h((l,u)=>l.fromState===u.fromState&&l.toState===u.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Jl(null),wi(()=>this.expanded&&!this._portal),Ir(1)).subscribe(()=>{this._portal=new BA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(rt(AX,12),rt(Po),rt(xX),rt(go),rt(Zn),rt(Qa,8),rt(MX,8))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&ac(s,xke,5),2&i){let o;Fi(o=ki())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Ds(gke,5),2&i){let s;Fi(s=ki())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Wi("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[vi([{provide:AX,useValue:void 0},{provide:TX,useExisting:n}]),oi,zi],ngContentSelectors:yke,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(oa(_ke),Ti(0),sn(1,"div",0,1),ai("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),sn(3,"div",2),Ti(4,1),mi(5,mke,0,0,"ng-template",3),on(),Ti(6,2),on()),2&i&&(dn(1),jn("@bodyExpansion",r._getExpandedState())("id",r.id),wr("aria-labelledby",r._headerId),dn(4),jn("cdkPortalOutlet",r._portal))},dependencies:[jA],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[CX.bodyExpansion]},changeDetection:0})}return n})();class Ake{}const Ske=JCe(Ake);let Cke=(()=>{class n extends Ske{constructor(t,i,r,s,o,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=_t.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(wi(u=>!(!u.hideToggle&&!u.togglePosition))):Bo;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=zc(t.opened,t.closed,l,t._inputChanges.pipe(wi(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(wi(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:bh(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(IX,1),rt(ei),rt(PA),rt(Po),rt(MX,8),rt(Qa,8),yl("tabindex"))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&ai("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(wr("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),LM("height",r._getHeaderHeight()),Wi("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[oi],ngContentSelectors:wke,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(oa(bke),sn(0,"span",0),Ti(1),Ti(2,1),Ti(3,2),on(),mi(4,vke,1,1,"span",1)),2&i&&(Wi("mat-content-hide-toggle",!r._showToggle()),dn(4),Is(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[CX.indicatorRotate]},changeDetection:0})}return n})();function DX(n,e,t){return t?DX(n,e).pipe(oA(t)):new St(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=n(r);return Re(e)?()=>e(r,s):void 0})}const Tke=["youtubeContainer"];let PX=(()=>{class n{get height(){return this._height}set height(t){this._height=t||390}get width(){return this._width}set width(t){this._width=t||640}constructor(t,i){this._ngZone=t,this._destroyed=new Zt,this._playerChanges=new Ui(void 0),this._height=390,this._width=640,this.disableCookies=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Zd(i)}ngAfterViewInit(){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer():(this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer())}))}ngOnChanges(t){this._shouldRecreatePlayer(t)?this._createPlayer():this._player&&((t.width||t.height)&&this._setSize(),t.suggestedQuality&&this._setQuality(),(t.startSeconds||t.endSeconds||t.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(t){const i=t.videoId||t.playerVars||t.disableCookies;return!!i&&!i.isFirstChange()}_createPlayer(){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const t=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:this.playerVars})),i=()=>{this._player=t,this._pendingPlayer=void 0,t.removeEventListener("onReady",i),this._playerChanges.next(t),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(t,this._pendingPlayerState),this._pendingPlayerState=void 0);const r=t.getPlayerState();(r===YT.PlayerState.UNSTARTED||r===YT.PlayerState.CUED||null==r)&&this._cuePlayer()};this._pendingPlayer=t,t.addEventListener("onReady",i)}_applyPendingPlayerState(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(t){return this._playerChanges.pipe(xr(i=>i?DX(r=>{i.addEventListener(t,r)},r=>{try{i?.removeEventListener?.(t,r)}catch{}}):Kt()),i=>new St(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),da(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(mn),rt(Ia))};static#t=this.\u0275cmp=_i({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Ds(Tke,7),2&i){let s;Fi(s=ki())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[zi],decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&or(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();let Ap={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function NX(n){Ap=n}const LX=/[&<>"']/,Mke=new RegExp(LX.source,"g"),FX=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ike=new RegExp(FX.source,"g"),Dke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kX=n=>Dke[n];function Ha(n,e){if(e){if(LX.test(n))return n.replace(Mke,kX)}else if(FX.test(n))return n.replace(Ike,kX);return n}const Rke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Oke(n){return n.replace(Rke,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Pke=/(^|[^\[])\^/g;function ji(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(Pke,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}function BX(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const BS={exec:()=>null};function jX(n,e){const i=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function jS(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s!==e||t){if(s===e||!t)break;r++}else r++}return n.slice(0,i-r)}function UX(n,e,t,i){const r=e.href,s=e.title?Ha(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:s,text:Ha(o)}}class US{options;rules;lexer;constructor(e){this.options=e||Ap}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jS(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function Lke(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=jS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=jS(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split("\n",1)[0].replace(/^\t+/,N=>" ".repeat(3*N.length)),f=e.split("\n",1)[0],g=0;this.options.pedantic?(g=2,c=h.trimStart()):(g=t[2].search(/[^ ]/),g=g>4?1:g,c=h.slice(g),g+=t[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),u=!0),!u){const N=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),U=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ce=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const Me=e.split("\n",1)[0];if(f=Me,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ce.test(f)||re.test(f)||N.test(f)||U.test(e))break;if(f.search(/[^ ]/)>=g||!f.trim())c+="\n"+f.slice(g);else{if(m||h.search(/[^ ]/)>=4||ce.test(h)||re.test(h)||U.test(h))break;c+="\n"+f}!m&&!f.trim()&&(m=!0),a+=Me+"\n",e=e.substring(Me.length+1),h=f.slice(g)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let w,v=null;this.options.gfm&&(v=/^\[[ xX]\] /.exec(c),v&&(w="[ ] "!==v[0],c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!v,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(g=>"space"===g.type),f=h.length>0&&h.some(g=>/\n.*\n/.test(g.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const i={type:"table",raw:t[0],header:jX(t[1]).map(r=>({text:r,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let s,o,a,c,r=i.align.length;for(s=0;s<r;s++){const l=i.align[s];l&&(i.align[s]=/^ *-+: *$/.test(l)?"right":/^ *:-+: *$/.test(l)?"center":/^ *:-+ *$/.test(l)?"left":null)}for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=jX(i.rows[s],i.header.length).map(l=>({text:l,tokens:[]}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ha(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=jS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function Nke(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(o>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),UX(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return UX(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,c,l=o,u=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const v=g.slice(1,-1);return{type:"em",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ha(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return"@"===t[2]?(i=Ha(t[1]),r="mailto:"+i):(i=Ha(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if("@"===t[2])i=Ha(t[0]),r="mailto:"+i;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(s!==t[0]);i=Ha(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:Ha(t[0]),{type:"text",raw:t[0],text:i}}}}const En={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:BS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};En.def=ji(En.def).replace("label",En._label).replace("title",En._title).getRegex(),En.bullet=/(?:[*+-]|\d{1,9}[.)])/,En.listItemStart=ji(/^( *)(bull) */).replace("bull",En.bullet).getRegex(),En.list=ji(En.list).replace(/bull/g,En.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+En.def.source+")").getRegex(),En._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",En._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,En.html=ji(En.html,"i").replace("comment",En._comment).replace("tag",En._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),En.lheading=ji(En.lheading).replace(/bull/g,En.bullet).getRegex(),En.paragraph=ji(En._paragraph).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.blockquote=ji(En.blockquote).replace("paragraph",En.paragraph).getRegex(),En.normal={...En},En.gfm={...En.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},En.gfm.table=ji(En.gfm.table).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.gfm.paragraph=ji(En._paragraph).replace("hr",En.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",En.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",En._tag).getRegex(),En.pedantic={...En.normal,html:ji("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",En._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:BS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ji(En.normal._paragraph).replace("hr",En.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",En.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const en={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:BS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:BS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};en.punctuation=ji(en.punctuation,"u").replace(/punctuation/g,en._punctuation).getRegex(),en.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,en.anyPunctuation=/\\[punct]/g,en._escapes=/\\([punct])/g,en._comment=ji(En._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),en.emStrong.lDelim=ji(en.emStrong.lDelim,"u").replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimAst=ji(en.emStrong.rDelimAst,"gu").replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimUnd=ji(en.emStrong.rDelimUnd,"gu").replace(/punct/g,en._punctuation).getRegex(),en.anyPunctuation=ji(en.anyPunctuation,"gu").replace(/punct/g,en._punctuation).getRegex(),en._escapes=ji(en._escapes,"gu").replace(/punct/g,en._punctuation).getRegex(),en._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,en._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,en.autolink=ji(en.autolink).replace("scheme",en._scheme).replace("email",en._email).getRegex(),en._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,en.tag=ji(en.tag).replace("comment",en._comment).replace("attribute",en._attribute).getRegex(),en._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,en._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,en._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,en.link=ji(en.link).replace("label",en._label).replace("href",en._href).replace("title",en._title).getRegex(),en.reflink=ji(en.reflink).replace("label",en._label).replace("ref",En._label).getRegex(),en.nolink=ji(en.nolink).replace("ref",En._label).getRegex(),en.reflinkSearch=ji(en.reflinkSearch,"g").replace("reflink",en.reflink).replace("nolink",en.nolink).getRegex(),en.normal={...en},en.pedantic={...en.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ji(/^!?\[(label)\]\((.*?)\)/).replace("label",en._label).getRegex(),reflink:ji(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",en._label).getRegex()},en.gfm={...en.normal,escape:ji(en.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},en.gfm.url=ji(en.gfm.url,"i").replace("email",en.gfm._extended_email).getRegex(),en.breaks={...en.gfm,br:ji(en.br).replace("{2,}","*").getRegex(),text:ji(en.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class ru{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ap,this.options.tokenizer=this.options.tokenizer||new US,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:En.normal,inline:en.normal};this.options.pedantic?(t.block=En.pedantic,t.inline=en.pedantic):this.options.gfm&&(t.block=En.gfm,t.inline=this.options.breaks?en.breaks:en.gfm),this.tokenizer.rules=t}static get rules(){return{block:En,inline:en}}static lex(e,t){return new ru(t).lex(e)}static lexInline(e,t){return new ru(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),"number"==typeof f&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return t}}class u_{options;constructor(e){this.options=e||Ap}code(e,t,i){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Ha(r)+'">'+(i?e:Ha(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Ha(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const r=BX(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>",s}image(e,t,i){const r=BX(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class sF{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class su{options;renderer;textRenderer;constructor(e){this.options=e||Ap,this.options.renderer=this.options.renderer||new u_,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new sF}static parse(e,t){return new su(t).parse(e)}static parseInline(e,t){return new su(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Oke(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",c="";for(let u=0;u<o.header.length;u++)c+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(c);let l="";for(let u=0;u<o.rows.length;u++){const h=o.rows[u];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,c=o.start,l=o.loose;let u="";for(let h=0;h<o.items.length;h++){const f=o.items[h],g=f.checked,m=f.task;let v="";if(f.task){const w=this.renderer.checkbox(!!g);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=w+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=w+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:w+" "}):v+=w+" "}v+=this.parse(f.tokens,l),u+=this.renderer.listitem(v,m,!!g)}i+=this.renderer.list(u,a,c);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=t.text(s.text);break;case"html":i+=t.html(s.text);break;case"link":i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":i+=t.image(s.href,s.title,s.text);break;case"strong":i+=t.strong(this.parseInline(s.tokens,t));break;case"em":i+=t.em(this.parseInline(s.tokens,t));break;case"codespan":i+=t.codespan(s.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(s.tokens,t));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class VS{options;constructor(e){this.options=e||Ap}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const Sp=new class Fke{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(ru.lex,su.parse);parseInline=this.#e(ru.lexInline,su.parseInline);Parser=su;Renderer=u_;TextRenderer=sF;Lexer=ru;Tokenizer=US;Hooks=VS;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,t));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(r.items,t));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{i=i.concat(this.walkTokens(s[o],t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];t.renderers[s.name]=o?function(...a){let c=s.renderer.apply(this,a);return!1===c&&(c=o.apply(this,a)),c}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&("block"===s.level?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:"inline"===s.level&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new u_(this.defaults);for(const o in i.renderer){const a=i.renderer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new US(this.defaults);for(const o in i.tokenizer){const a=i.tokenizer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new VS;for(const o in i.hooks){const a=i.hooks[o],l=s[o];s[o]=VS.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>l.call(s,f));const h=a.call(s,u);return l.call(s,h)}:(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ru.lex(e,t??this.defaults)}parser(e,t){return su.parse(e,t??this.defaults)}#e(e,t){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));const c=e(i,o);o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Ha(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}};function Mi(n,e){return Sp.parse(n,e)}Mi.options=Mi.setOptions=function(n){return Sp.setOptions(n),NX(Mi.defaults=Sp.defaults),Mi},Mi.getDefaults=function rF(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Mi.defaults=Ap,Mi.use=function(...n){return Sp.use(...n),NX(Mi.defaults=Sp.defaults),Mi},Mi.walkTokens=function(n,e){return Sp.walkTokens(n,e)},Mi.parseInline=Sp.parseInline,Mi.Parser=su,Mi.parser=su.parse,Mi.Renderer=u_,Mi.TextRenderer=sF,Mi.Lexer=ru,Mi.lexer=ru.lex,Mi.Tokenizer=US,Mi.Hooks=VS,Mi.parse=Mi;const kke=["*"];let VX=(()=>{class n{constructor(){this._buttonClick$=new Zt,this.copied$=this._buttonClick$.pipe(xr(()=>zc(Kt(!0),gN(3e3).pipe(AN(!1)))),_h(),Uo(1)),this.copiedText$=this.copied$.pipe(Jl(!1),$t(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[$g],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(sn(0,"button",0),ai("click",function(){return r.onCopyToClipboardClick()}),Br(1,"async"),ps(2),Br(3,"async"),on()),2&i&&(Wi("copied",jr(1,3,r.copied$)),dn(2),Uc(jr(3,5,r.copiedText$)))},dependencies:[S0],encapsulation:2,changeDetection:0})}return n})();const Uke=new xt("CLIPBOARD_OPTIONS");var oF=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(oF||{});const HX=new xt("MARKED_EXTENSIONS"),Hke=new xt("MARKED_OPTIONS"),zX=new xt("SECURITY_CONTEXT");let aF=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,s,o,a,c){this.clipboardOptions=t,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new u_},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Zt,this.reload$=this._reload$.asObservable(),this.options=r}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},u=l.renderer||this.renderer||new u_;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const h=this.trimIndentation(t),f=r?this.decodeHtml(h):h,g=o?this.parseEmoji(f):f,m=this.parseMarked(g,l,s);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:c,mermaid:l,mermaidOptions:u}=i;s&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...u}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe($t(i=>this.handleExtension(t,i)))}highlight(t){if(!Zd(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!Zd(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Mi.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const r=t.code;return t.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),s=r>-1?t.substring(r+4):t,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return i.renderer&&(Mi.use({renderer:i.renderer}),delete i.renderer),r?Mi.parseInline(t,i):Mi.parse(t,i)}parseEmoji(t){if(!Zd(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(Zd(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!Zd(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),u=document.createElement("div");u.style.position="relative",l.parentNode.insertBefore(u,l),u.appendChild(l);const h=document.createElement("div");let f,g;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",u.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=s?i.createComponent(s).hostView:o?i.createEmbeddedView(o):i.createComponent(VX).hostView,f.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),g=new ClipboardJS(m,{text:()=>l.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!Zd(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Uke,8),ot(HX,8),ot(Hke,8),ot(Ia),ot(zX),ot(sd,8),ot(M0))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac})}return n})(),GX=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new pn,this.load=new pn,this.ready=new pn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Zt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(da(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){var r=this;return jt(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(t,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,oF.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,oF.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const c=this.toLispCase(o);r.item(s).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(aF),rt(go))};static#t=this.\u0275cmp=_i({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[zi,$g],ngContentSelectors:kke,decls:1,vars:0,template:function(i,r){1&i&&(oa(),Ti(0))},encapsulation:2})}return n})();var WX;function Kke(n,e){if(1&n&&(sn(0,"div",16),or(1,"youtube-player",17),on()),2&n){const t=kr(3);dn(1),sI("videoId",t.videoID)}}function Jke(n,e){if(1&n&&(sn(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),ps(3),on()(),sn(4,"div",13),or(5,"markdown",14),mi(6,Kke,2,1,"div",15),on()()),2&n){const t=kr(),i=t.index,r=t.$implicit;jn("expanded",0===i),dn(3),Uc(r.title),dn(2),Wi("first",0===i),jn("data",r.content),dn(1),jn("ngIf",0===i)}}function Zke(n,e){if(1&n&&(sn(0,"div",9),mi(1,Jke,7,6,"mat-expansion-panel",10),on()),2&n){const t=e.$implicit;dn(1),jn("ngIf",t)}}!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(WX||(WX={}));let Qke=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(PS),rt(dX))};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(sn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ps(5),on(),sn(6,"div",5)(7,"mat-icon",6),ai("click",function(){return r.close()}),ps(8,"clear"),on()()(),sn(9,"mat-dialog-content",7),mi(10,Zke,2,1,"div",8),on()()()()),2&i&&(dn(5),Uc(r.infoTitle),dn(5),jn("ngForOf",r.documentationContents))},dependencies:[Zg,KI,nF,iF,wX,IX,Cke,PX,GX],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})();class _c{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return _c.storage?.length??0}key(e){return _c.storage?.key(e)??null}getItem(e,t){return _c.storage?.getItem(e)??t??null}setItem(e,t){try{return _c.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){_c.storage?.removeItem(e)}clear(){_c.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||_c)};static#n=this.\u0275prov=It({token:_c,factory:_c.\u0275fac,providedIn:"root"})}var cF;const $X="callToActionPopupShown";let nl=class zS{static#e=cF=this;static ctaDatePassed(e,t=Date.now){return+t()>+new Date(e)}constructor(e,t,i,r,s){this.dialog=e,this.ga=t,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:t,popupShown:i}=e.getState(),r=this.storage.getItem($X,`${i}`),s=cF.ctaDatePassed(t);"true"!==r&&!s&&e.dispatch(new tX)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe($t(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(Qke,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Bi(t=>this.launchLearnMore(t)))}open(e){this.dialog.open(au,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem($X,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(t){return new(t||zS)(ot(NS),ot(Jm),ot(_c),ot(gX),ot(sd))};static#n=this.\u0275prov=It({token:zS,factory:zS.\u0275fac})};Un([OP(eX),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",St)],nl.prototype,"learnMore",null),Un([OP(tX),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],nl.prototype,"open",null),Un([OP(nX),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",void 0)],nl.prototype,"close",null),nl=cF=Un([PP({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),Ft("design:paramtypes",[NS,Jm,_c,gX,sd])],nl);class ou{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],ou,"title",null),Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],ou,"message",null),Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],ou,"callToAction",null),Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],ou,"imageUrl",null),Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",String)],ou,"expirationDate",null),Un([Fm([nl]),Ft("design:type",Function),Ft("design:paramtypes",[Object]),Ft("design:returntype",Boolean)],ou,"popupShown",null);let YX=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Wt({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})(),mBe=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new pn,this.closeClicked=new pn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&$d(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(sn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),ps(5),on(),sn(6,"mat-icon",5),ai("click",function(){return r.close()}),ps(7,"clear"),on()(),or(8,"img",6),sn(9,"mat-dialog-content",7)(10,"div",8),ps(11),on(),sn(12,"a",9),ai("click",function(){return r.onDialogButtonClick()}),on()()()()()),2&i&&(dn(5),Uc(r.infoTitle),dn(3),jn("src",r.imageUrl,ky),dn(3),Uc(r.message),dn(1),jn("text",r.callToAction))},dependencies:[wX,nF,iF,YX],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})();class au{constructor(){this.close=()=>new nX,this.learnMore=()=>new eX}static#e=this.\u0275fac=function(t){return new(t||au)};static#t=this.\u0275cmp=_i({type:au,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(t,i){if(1&t&&(sn(0,"ccf-call-to-action",0),ai("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Br(1,"async"),Br(2,"async"),Br(3,"async"),Br(4,"async"),on()),2&t){let r,s,o,a;jn("infoTitle",null!==(r=jr(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=jr(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=jr(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=jr(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[mBe,S0],changeDetection:0})}Un([fA(ou.title),Ft("design:type",St)],au.prototype,"title$",void 0),Un([fA(ou.message),Ft("design:type",St)],au.prototype,"message$",void 0),Un([fA(ou.callToAction),Ft("design:type",St)],au.prototype,"callToAction$",void 0),Un([fA(ou.imageUrl),Ft("design:type",St)],au.prototype,"imageUrl$",void 0),Un([QY(),Ft("design:type",Object)],au.prototype,"close",void 0),Un([QY(),Ft("design:type",Object)],au.prototype,"learnMore",void 0);const _Be={initialConfig:{},parse:{},rename:{}};class yBe{constructor(e,t){this.configState=e,this.storedChanges={},this.options={..._Be,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,t,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=t.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[o]=a}}let vBe=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new yBe(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function sk(){throw new Error("invalid")}()};static#t=this.\u0275dir=Wt({type:n,features:[zi]})}return n})();const lF={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,stringArray:n=>"string"==typeof n?Array.from(n).filter(e=>!"[], ".includes(e)):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}},Cp_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};let bBe=(()=>{class n{constructor(t){this.source=t,this.organs=$W}getOrganInfo(t,i,r="Female"){let s=this.organs.find(a=>a.id===t);if(!s)return Kt(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),s?.side&&i&&s.side!==i&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===i)),Kt(s)}getOrgan(t,i="Both"){return this.source.getReferenceOrgans().pipe($t(r=>r.find(s=>s.representation_of===t.id&&("Both"===i||s.sex===i))))}getOrganScene(t,i="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):Kt([])}getOrganStats(t,i="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):Kt([])}getBlocks(t,i="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):Kt([])}static#e=this.\u0275fac=function(i){return new(i||n)(ot(y$))};static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wBe(n,e){if(1&n){const t=Hg();sn(0,"div",6)(1,"div",7)(2,"div",8),ps(3),on(),sn(4,"div",9),ai("click",function(){const s=qa(t).$implicit;return ir(kr().goToURL(s.buttonUrl))}),ps(5),on()()()}if(2&n){const t=e.$implicit;dn(3),Uc(t.body),dn(1),jn("gaLabel",t.buttonUrl),dn(1),Pl(" ",t.buttonTitle," ")}}function xBe(n,e){if(1&n){const t=Hg();sn(0,"div",10),ai("click",function(){const s=qa(t).$implicit;return ir(kr().goToURL(s.buttonUrl))}),ps(1),on()}if(2&n){const t=e.$implicit;jn("gaLabel",t.buttonUrl),dn(1),Pl(" ",t.buttonTitle," ")}}let EBe=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}ngOnInit(){const t=[this.ruiUrl,this.euiUrl,this.asctbUrl],i=[this.hraPortalUrl,this.onlineCourseUrl,this.paperUrl];this.linkCards=this.linkCards.map((r,s)=>({...r,buttonUrl:t[s]??r.buttonUrl})),this.deepDives=this.deepDives.map((r,s)=>({...r,buttonUrl:i[s]??r.buttonUrl}))}goToURL(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-link-cards"]],inputs:{ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(sn(0,"div",0),mi(1,wBe,6,3,"div",1),on(),sn(2,"div",2)(3,"div",3),ps(4,"Human Reference Atlas (HRA) Deep Dive"),on(),sn(5,"div",4),mi(6,xBe,2,2,"div",5),on()()),2&i&&(dn(1),jn("ngForOf",r.linkCards),dn(5),jn("ngForOf",r.deepDives))},dependencies:[Zg,IOe,p$],styles:['.link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444a65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444a65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,Helvetica,Arial,sans-serif}'],changeDetection:0})}return n})();function ABe(n,e){if(1&n&&(sn(0,"div",3)(1,"div",4),ps(2),on(),sn(3,"div",5),ps(4),on()()),2&n){const t=e.$implicit;dn(2),Uc(t.count),dn(2),Uc(t.label)}}let SBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(sn(0,"div",0)(1,"div",1),ps(2),on(),mi(3,ABe,5,2,"div",2),on()),2&i&&(dn(2),Pl(" ",r.statsLabel," "),dn(1),jn("ngForOf",r.stats))},dependencies:[Zg],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0})}return n})();const CBe=["switch"];function TBe(n,e){1&n&&(sn(0,"div",12),function cw(){Dn.lFrame.currentNamespace=Wb}(),sn(1,"svg",13),or(2,"path",14),on(),sn(3,"svg",15),or(4,"path",16),on()())}const MBe=["*"],IBe=new xt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),DBe={provide:gc,useExisting:ge(()=>qX),multi:!0};class XX{constructor(e,t){this.source=e,this.checked=t}}let RBe=0,qX=(()=>{class n{_createChangeEvent(t){return new XX(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,s,o,a){this._elementRef=t,this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new pn,this.toggleChange=new pn,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++RBe,this.hideIcon=o.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new XX(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ei),rt(PA),rt(Po),yl("tabindex"),rt(IBe),rt(Qa,8))};static#t=this.\u0275cmp=_i({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Ds(CBe,5),2&i){let s;Fi(s=ki())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){2&i&&(Xd("id",r.id),wr("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),$d(r.color?"mat-"+r.color:""),Wi("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:["disabled","disabled",gs],disableRipple:["disableRipple","disableRipple",gs],color:"color",tabIndex:["tabIndex","tabIndex",t=>null==t?0:function cne(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}(t)],name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:["required","required",gs],checked:["checked","checked",gs],hideIcon:["hideIcon","hideIcon",gs]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[vi([DBe]),Ef],ngContentSelectors:MBe,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(oa(),sn(0,"div",0)(1,"button",1,2),ai("click",function(){return r._handleClick()}),or(3,"div",3),sn(4,"div",4)(5,"div",5)(6,"div",6),or(7,"div",7),on(),sn(8,"div",8),or(9,"div",9),on(),mi(10,TBe,5,0,"div",10),on()()(),sn(11,"label",11),ai("click",function(o){return o.stopPropagation()}),Ti(12),on()()),2&i){const s=Mf(2);Wi("mdc-form-field--align-end","before"==r.labelPosition),dn(1),Wi("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),jn("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled),wr("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),dn(8),jn("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),dn(1),Is(10,r.hideIcon?-1:10),dn(1),jn("for",r.buttonId),wr("id",r._labelId)}},dependencies:[aW],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}return n})(),KX=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({})}return n})(),NBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[KX,NA,oTe,KX,NA]})}return n})(),LBe=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new pn}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&$d(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const s=Hg();sn(0,"span",0),ai("click",function(){qa(s);const a=Mf(3);return r.left||a.toggle(),ir(r.updateToggle(!0))}),ps(1),on(),sn(2,"mat-slide-toggle",1,2),ai("change",function(a){return r.updateToggle(!a.checked)}),on(),sn(4,"span",0),ai("click",function(){qa(s);const a=Mf(3);return r.left&&a.toggle(),ir(r.updateToggle(!1))}),ps(5),on()}2&i&&(Wi("disabled",r.disabled)("highlighted",r.left),dn(1),Pl(" ",r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1),"\n"),dn(1),jn("disabled",r.disabled)("checked",!r.left),dn(2),Wi("disabled",r.disabled)("highlighted",!r.left),dn(1),Pl(" ",r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1),"\n"))},dependencies:[qX],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0})}return n})();const FBe=["bodyUI"],kBe=()=>["Male","Female"],BBe=()=>["Left","Right"];let jBe=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new pn,this.sideChange=new pn,this.nodeClick=new pn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const t=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(i=>t.has(i.donor.providerName)).map(i=>i["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(i=>({...i,color:i.entityId&&this.highlightedNodeId===i["@id"]?[30,136,229,255]:this.filteredBlocks.includes(i.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:s,z_dimension:o}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[r/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"],this.nodeClick.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Jm))};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Ds(FBe,7),2&i){let s;Fi(s=ki())&&(r.bodyUI=s.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClick:"nodeClick"},features:[zi],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(sn(0,"ccf-body-ui",0,1),ai("nodeClick",function(o){return r.nodeClicked(o)})("initialized",function(){return r.zoomToFitOrgan()}),on(),sn(2,"div",2)(3,"ccf-slide-toggle",3),ai("valueChange",function(o){return r.updateSex(o)}),on(),sn(4,"ccf-slide-toggle",3),ai("valueChange",function(o){return r.updateSide(o)}),on()()),2&i&&(jn("scene",r.scene)("interactive",!0),dn(3),jn("labels",Yg(8,kBe))("value",r.sex)("hidden",!r.sex),dn(1),jn("labels",Yg(9,BBe))("value",r.side)("hidden",!r.side))},dependencies:[R1e,LBe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0})}return n})();const UBe=["left"],VBe=["right"],uF=()=>[],HBe=[{color:[0,0,0,0],opacity:.001}];let zBe=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sexChange=new pn,this.sideChange=new pn,this.nodeClicked=new pn,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe($t(s=>({tmc:s??[]}))),this.donorLabel$=this.configState.getOption("donorLabel"),this.ruiUrl$=this.configState.getOption("ruiUrl"),this.euiUrl$=this.configState.getOption("euiUrl"),this.asctbUrl$=this.configState.getOption("asctbUrl"),this.hraPortalUrl$=this.configState.getOption("hraPortalUrl"),this.onlineCourseUrl$=this.configState.getOption("onlineCourseUrl"),this.paperUrl$=this.configState.getOption("paperUrl"),this.stats=[],this.latestConfig={},this.organInfo$=r.config$.pipe(Bi(s=>this.latestConfig=s),xr(s=>t.getOrganInfo(s.organIri??"",s.side?.toLowerCase?.(),s.sex)),Bi(s=>this.logOrganLookup(s)),Bi(s=>this.latestOrganInfo=s),Uo(1)),this.organ$=this.organInfo$.pipe(xr(s=>s?t.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):Kt(void 0)),Bi(s=>{if(s&&this.latestOrganInfo){const o=this.latestOrganInfo?.hasSex?s.sex:void 0;o!==this.latestConfig.sex&&this.updateInput("sex",o),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Uo(1)),this.scene$=this.organ$.pipe(xr(s=>s&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,s.sex):Kt(HBe))),this.stats$=Bv([this.organ$,this.donorLabel$]).pipe(xr(([s,o])=>s&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,s.sex).pipe($t(a=>a.map(c=>o&&"Donors"===c.label?{...c,label:o}:c))):Kt([]))),this.statsLabel$=this.organ$.pipe($t(s=>this.makeStatsLabel(this.latestOrganInfo,s?.sex)),Jl("Loading...")),this.blocks$=this.organ$.pipe(xr(s=>s&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,s.sex):Kt([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const s=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,s]}return r.filter(s=>!!s).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(bBe),rt(Jm),rt(rd))};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Ds(UBe,7,ei),Ds(VBe,7,ei)),2&i){let s;Fi(s=ki())&&(r.left=s.first),Fi(s=ki())&&(r.right=s.first)}},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},decls:22,vars:45,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","nodeClick","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"],[3,"ruiUrl","euiUrl","asctbUrl","hraPortalUrl","onlineCourseUrl","paperUrl"]],template:function(i,r){if(1&i&&(sn(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),ai("sexChange",function(o){return r.updateInput("sex",o),r.sexChange.emit(o)})("nodeClick",function(o){return r.nodeClicked.emit(o)})("sideChange",function(o){return r.updateInput("side",o),r.sideChange.emit(o)}),Br(4,"async"),Br(5,"async"),Br(6,"async"),Br(7,"async"),Br(8,"async"),Br(9,"async"),on()(),sn(10,"div",4,5),or(12,"ccf-stats-list",6),Br(13,"async"),Br(14,"async"),or(15,"ccf-link-cards",7),Br(16,"async"),Br(17,"async"),Br(18,"async"),Br(19,"async"),Br(20,"async"),Br(21,"async"),on()()),2&i){let s,o,a,c,l,u,h,f,g,m,v;dn(3),jn("blocks",null!==(s=jr(4,14,r.blocks$))&&void 0!==s?s:Yg(42,uF))("filter",jr(5,16,r.filter$))("sex",jr(6,18,r.sex$))("side",jr(7,20,r.side$))("organ",null!==(o=jr(8,22,r.organ$))&&void 0!==o?o:void 0)("scene",null!==(a=jr(9,24,r.scene$))&&void 0!==a?a:Yg(43,uF)),dn(9),jn("statsLabel",null!==(c=jr(13,26,r.statsLabel$))&&void 0!==c?c:"")("stats",null!==(l=jr(14,28,r.stats$))&&void 0!==l?l:Yg(44,uF)),dn(3),jn("ruiUrl",null!==(u=jr(16,30,r.ruiUrl$))&&void 0!==u?u:"")("euiUrl",null!==(h=jr(17,32,r.euiUrl$))&&void 0!==h?h:"")("asctbUrl",null!==(f=jr(18,34,r.asctbUrl$))&&void 0!==f?f:"")("hraPortalUrl",null!==(g=jr(19,36,r.hraPortalUrl$))&&void 0!==g?g:"")("onlineCourseUrl",null!==(m=jr(20,38,r.onlineCourseUrl$))&&void 0!==m?m:"")("paperUrl",null!==(v=jr(21,40,r.paperUrl$))&&void 0!==v?v:"")}},dependencies:[EBe,SBe,jBe,S0],styles:['.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,sans-serif;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}'],changeDetection:0})}return n})();function GBe(n,e){if(1&n){const t=Hg();sn(0,"ccf-root",1),ai("sexChange",function(r){return qa(t),ir(kr().sexChange.emit(r))})("nodeClick",function(r){return qa(t),ir(kr().nodeClicked.emit(r))})("sideChange",function(r){return qa(t),ir(kr().sideChange.emit(r))}),on()}}function WBe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=lF.json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function $Be(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!n?.startsWith("["))return[n];{const i=lF.json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let YBe=(()=>{class n extends vBe{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...Cp_dbOptions,...globalThis.dbOptions},parse:{dataSources:WBe,highlightProviders:$Be,useRemoteApi:lF.boolean}}),this.sex="Female",this.side="Left",this.sexChange=new pn,this.sideChange=new pn,this.nodeClicked=new pn}static#e=this.\u0275fac=function(i){return new(i||n)(rt(rd),rt(Po))};static#t=this.\u0275cmp=_i({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint",donorLabel:"donorLabel",ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},features:[oi],decls:1,vars:1,consts:[[3,"sexChange","nodeClick","sideChange",4,"ngIf"],[3,"sexChange","nodeClick","sideChange"]],template:function(i,r){1&i&&mi(0,GBe,1,0,"ccf-root",0),2&i&&jn("ngIf",r.initialized)},dependencies:[KI,zBe],encapsulation:2,changeDetection:0})}return n})(),XBe=(()=>{class n extends RFe{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?Us:DFe}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})();static#t=this.\u0275prov=It({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const HS=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class JBe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=rp(this.action),i=function KBe(n){return HS(n.getHours(),2)+":"+HS(n.getMinutes(),2)+":"+HS(n.getSeconds(),2)+"."+HS(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class ZBe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const JX=new xt("NGXS_LOGGER_PLUGIN_OPTIONS");let QBe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new ZBe(this._options),this._store=this._store||this._injector.get(ed);const s=new JBe(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(Bi(o=>{s.completed(o)}),Xc(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(ot(JX),ot(Ki))},n.\u0275prov=It({token:n,factory:n.\u0275fac}),n})();const ZX=new xt("LOGGER_USER_OPTIONS");function e3e(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let t3e=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:d5,useClass:QBe,multi:!0},{provide:ZX,useValue:t},{provide:JX,useFactory:e3e,deps:[ZX]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ni({type:n}),n.\u0275inj=Ii({}),n})();const n3e=[rd];let i3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[nDe.forRoot(),NAe.forRoot(n3e,{developmentMode:!1}),t3e.forRoot({disabled:true})]})}return n})(),r3e=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}static#e=this.\u0275fac=function(i){return new(i||n)(ot(n,12))};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({providers:[{provide:y$,useExisting:XBe}],imports:[x2e,jOe.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),D2e.forRoot(()=>new pS({basePath:Cp_dbOptions.remoteApiEndpoint})),i3e]})}return n})(),s3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Qg,NBe]})}return n})(),o3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Qg,Cse,s3e]})}return n})(),a3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Qg,oL]})}return n})(),c3e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Qg]})}return n})(),l3e=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function Sse(n,e){const t=function yse(n,e){return e.get(Il).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new xse(n,e.injector),r=function _se(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function hse(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class s extends Ase{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,a)},configurable:!0,enumerable:!0})}),s}(YBe,{injector:this.injector});customElements.define("ccf-organ-info",t)}static#e=this.\u0275fac=function(i){return new(i||n)(ot(Ki))};static#t=this.\u0275mod=Ni({type:n});static#n=this.\u0275inj=Ii({imports:[Are,r3e,a3e,c3e,o3e]})}return n})();xre().bootstrapModule(l3e).catch(n=>console.error(n))},2323:Ue=>{Ue.exports=function(S,Q){var C=Q.length;if(0!==C){var $=S.length;S.length+=C;for(var z=0;z<C;z++)S[$+z]=Q[z]}}},3982:Ue=>{"use strict";const{AbortController:_e,AbortSignal:S}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ue.exports=_e,Ue.exports.AbortSignal=S,Ue.exports.default=_e},9919:(Ue,_e)=>{"use strict";_e.byteLength=function E(x){var k=_(x),Y=k[1];return 3*(k[0]+Y)/4-Y},_e.toByteArray=function G(x){var k,b,se=_(x),Y=se[0],J=se[1],ee=new C(function L(x,k,se){return 3*(k+se)/4-se}(0,Y,J)),W=0,B=J>0?Y-4:Y;for(b=0;b<B;b+=4)k=Q[x.charCodeAt(b)]<<18|Q[x.charCodeAt(b+1)]<<12|Q[x.charCodeAt(b+2)]<<6|Q[x.charCodeAt(b+3)],ee[W++]=k>>16&255,ee[W++]=k>>8&255,ee[W++]=255&k;return 2===J&&(k=Q[x.charCodeAt(b)]<<2|Q[x.charCodeAt(b+1)]>>4,ee[W++]=255&k),1===J&&(k=Q[x.charCodeAt(b)]<<10|Q[x.charCodeAt(b+1)]<<4|Q[x.charCodeAt(b+2)]>>2,ee[W++]=k>>8&255,ee[W++]=255&k),ee},_e.fromByteArray=function oe(x){for(var k,se=x.length,Y=se%3,J=[],W=0,B=se-Y;W<B;W+=16383)J.push(F(x,W,W+16383>B?B:W+16383));return 1===Y?J.push(S[(k=x[se-1])>>2]+S[k<<4&63]+"=="):2===Y&&J.push(S[(k=(x[se-2]<<8)+x[se-1])>>10]+S[k>>4&63]+S[k<<2&63]+"="),J.join("")};for(var S=[],Q=[],C=typeof Uint8Array<"u"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=0;z<64;++z)S[z]=$[z],Q[$.charCodeAt(z)]=z;function _(x){var k=x.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=x.indexOf("=");return-1===se&&(se=k),[se,se===k?0:4-se%4]}function P(x){return S[x>>18&63]+S[x>>12&63]+S[x>>6&63]+S[63&x]}function F(x,k,se){for(var J=[],ee=k;ee<se;ee+=3)J.push(P((x[ee]<<16&16711680)+(x[ee+1]<<8&65280)+(255&x[ee+2])));return J.join("")}Q["-".charCodeAt(0)]=62,Q["_".charCodeAt(0)]=63},1979:(Ue,_e)=>{"use strict";var Q=function($){return $.typeOfFunction="function",$.boolTrue=!0,$}(Q||{});_e.ak=function C($,z,X){if(!X||typeof X.value!==Q.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+z+"> is not a method!");return{configurable:Q.boolTrue,get:function(){var _=X.value.bind(this);return Object.defineProperty(this,z,{value:_,configurable:Q.boolTrue,writable:Q.boolTrue}),_}}}},9007:(Ue,_e,S)=>{"use strict";var Q=S(9919),C=S(2601);_e.Buffer=_,_e.SlowBuffer=function Y(V){return+V!=V&&(V=0),_.alloc(+V)},_e.INSPECT_MAX_BYTES=50;var $=2147483647;function X(V){if(V>$)throw new RangeError('The value "'+V+'" is invalid for option "size"');var M=new Uint8Array(V);return M.__proto__=_.prototype,M}function _(V,M,O){if("number"==typeof V){if("string"==typeof M)throw new TypeError('The "string" argument must be of type string. Received type number');return P(V)}return E(V,M,O)}function E(V,M,O){if("string"==typeof V)return function F(V,M){if(("string"!=typeof M||""===M)&&(M="utf8"),!_.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var O=0|J(V,M),he=X(O),We=he.write(V,M);return We!==O&&(he=he.slice(0,We)),he}(V,M);if(ArrayBuffer.isView(V))return oe(V);if(null==V)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(ue(V,ArrayBuffer)||V&&ue(V.buffer,ArrayBuffer))return function x(V,M,O){if(M<0||V.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<M+(O||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===M&&void 0===O?new Uint8Array(V):void 0===O?new Uint8Array(V,M):new Uint8Array(V,M,O)).__proto__=_.prototype,he}(V,M,O);if("number"==typeof V)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=V.valueOf&&V.valueOf();if(null!=he&&he!==V)return _.from(he,M,O);var We=function k(V){if(_.isBuffer(V)){var M=0|se(V.length),O=X(M);return 0===O.length||V.copy(O,0,0,M),O}return void 0!==V.length?"number"!=typeof V.length||ne(V.length)?X(0):oe(V):"Buffer"===V.type&&Array.isArray(V.data)?oe(V.data):void 0}(V);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof V[Symbol.toPrimitive])return _.from(V[Symbol.toPrimitive]("string"),M,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function L(V){if("number"!=typeof V)throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function P(V){return L(V),X(V<0?0:0|se(V))}function oe(V){for(var M=V.length<0?0:0|se(V.length),O=X(M),he=0;he<M;he+=1)O[he]=255&V[he];return O}function se(V){if(V>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|V}function J(V,M){if(_.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||ue(V,ArrayBuffer))return V.byteLength;if("string"!=typeof V)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var O=V.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===O)return 0;for(var We=!1;;)switch(M){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return A(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return Ve(V).length;default:if(We)return he?-1:A(V).length;M=(""+M).toLowerCase(),We=!0}}function ee(V,M,O){var he=!1;if((void 0===M||M<0)&&(M=0),M>this.length||((void 0===O||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(M>>>=0))return"";for(V||(V="utf8");;)switch(V){case"hex":return je(this,M,O);case"utf8":case"utf-8":return Pe(this,M,O);case"ascii":return qe(this,M,O);case"latin1":case"binary":return Ce(this,M,O);case"base64":return xe(this,M,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,M,O);default:if(he)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),he=!0}}function W(V,M,O){var he=V[M];V[M]=V[O],V[O]=he}function B(V,M,O,he,We){if(0===V.length)return-1;if("string"==typeof O?(he=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),ne(O=+O)&&(O=We?0:V.length-1),O<0&&(O=V.length+O),O>=V.length){if(We)return-1;O=V.length-1}else if(O<0){if(!We)return-1;O=0}if("string"==typeof M&&(M=_.from(M,he)),_.isBuffer(M))return 0===M.length?-1:b(V,M,O,he,We);if("number"==typeof M)return M&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(V,M,O):Uint8Array.prototype.lastIndexOf.call(V,M,O):b(V,[M],O,he,We);throw new TypeError("val must be string, number or Buffer")}function b(V,M,O,he,We){var Dt,Ee=1,Re=V.length,ct=M.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(V.length<2||M.length<2)return-1;Ee=2,Re/=2,ct/=2,O/=2}function bt(H,te){return 1===Ee?H[te]:H.readUInt16BE(te*Ee)}if(We){var _t=-1;for(Dt=O;Dt<Re;Dt++)if(bt(V,Dt)===bt(M,-1===_t?0:Dt-_t)){if(-1===_t&&(_t=Dt),Dt-_t+1===ct)return _t*Ee}else-1!==_t&&(Dt-=Dt-_t),_t=-1}else for(O+ct>Re&&(O=Re-ct),Dt=O;Dt>=0;Dt--){for(var Gt=!0,pe=0;pe<ct;pe++)if(bt(V,Dt+pe)!==bt(M,pe)){Gt=!1;break}if(Gt)return Dt}return-1}function I(V,M,O,he){O=Number(O)||0;var We=V.length-O;he?(he=Number(he))>We&&(he=We):he=We;var Ee=M.length;he>Ee/2&&(he=Ee/2);for(var Re=0;Re<he;++Re){var ct=parseInt(M.substr(2*Re,2),16);if(ne(ct))return Re;V[O+Re]=ct}return Re}function T(V,M,O,he){return Je(A(M,V.length-O),V,O,he)}function le(V,M,O,he){return Je(function ie(V){for(var M=[],O=0;O<V.length;++O)M.push(255&V.charCodeAt(O));return M}(M),V,O,he)}function j(V,M,O,he){return le(V,M,O,he)}function Ie(V,M,O,he){return Je(Ve(M),V,O,he)}function ae(V,M,O,he){return Je(function Z(V,M){for(var O,he,Ee=[],Re=0;Re<V.length&&!((M-=2)<0);++Re)he=(O=V.charCodeAt(Re))>>8,Ee.push(O%256),Ee.push(he);return Ee}(M,V.length-O),V,O,he)}function xe(V,M,O){return Q.fromByteArray(0===M&&O===V.length?V:V.slice(M,O))}function Pe(V,M,O){O=Math.min(V.length,O);for(var he=[],We=M;We<O;){var bt,Dt,_t,Gt,Ee=V[We],Re=null,ct=Ee>239?4:Ee>223?3:Ee>191?2:1;if(We+ct<=O)switch(ct){case 1:Ee<128&&(Re=Ee);break;case 2:128==(192&(bt=V[We+1]))&&(Gt=(31&Ee)<<6|63&bt)>127&&(Re=Gt);break;case 3:Dt=V[We+2],128==(192&(bt=V[We+1]))&&128==(192&Dt)&&(Gt=(15&Ee)<<12|(63&bt)<<6|63&Dt)>2047&&(Gt<55296||Gt>57343)&&(Re=Gt);break;case 4:Dt=V[We+2],_t=V[We+3],128==(192&(bt=V[We+1]))&&128==(192&Dt)&&128==(192&_t)&&(Gt=(15&Ee)<<18|(63&bt)<<12|(63&Dt)<<6|63&_t)>65535&&Gt<1114112&&(Re=Gt)}null===Re?(Re=65533,ct=1):Re>65535&&(he.push((Re-=65536)>>>10&1023|55296),Re=56320|1023&Re),he.push(Re),We+=ct}return function Qe(V){var M=V.length;if(M<=He)return String.fromCharCode.apply(String,V);for(var O="",he=0;he<M;)O+=String.fromCharCode.apply(String,V.slice(he,he+=He));return O}(he)}_e.kMaxLength=$,!(_.TYPED_ARRAY_SUPPORT=function z(){try{var V=new Uint8Array(1);return V.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===V.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(V,M,O){return E(V,M,O)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(V,M,O){return function G(V,M,O){return L(V),V<=0?X(V):void 0!==M?"string"==typeof O?X(V).fill(M,O):X(V).fill(M):X(V)}(V,M,O)},_.allocUnsafe=function(V){return P(V)},_.allocUnsafeSlow=function(V){return P(V)},_.isBuffer=function(M){return null!=M&&!0===M._isBuffer&&M!==_.prototype},_.compare=function(M,O){if(ue(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),ue(O,Uint8Array)&&(O=_.from(O,O.offset,O.byteLength)),!_.isBuffer(M)||!_.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===O)return 0;for(var he=M.length,We=O.length,Ee=0,Re=Math.min(he,We);Ee<Re;++Ee)if(M[Ee]!==O[Ee]){he=M[Ee],We=O[Ee];break}return he<We?-1:We<he?1:0},_.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(M,O){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return _.alloc(0);var he;if(void 0===O)for(O=0,he=0;he<M.length;++he)O+=M[he].length;var We=_.allocUnsafe(O),Ee=0;for(he=0;he<M.length;++he){var Re=M[he];if(ue(Re,Uint8Array)&&(Re=_.from(Re)),!_.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(We,Ee),Ee+=Re.length}return We},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<M;O+=2)W(this,O,O+1);return this},_.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<M;O+=4)W(this,O,O+3),W(this,O+1,O+2);return this},_.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<M;O+=8)W(this,O,O+7),W(this,O+1,O+6),W(this,O+2,O+5),W(this,O+3,O+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var M=this.length;return 0===M?"":0===arguments.length?Pe(this,0,M):ee.apply(this,arguments)},_.prototype.equals=function(M){if(!_.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||0===_.compare(this,M)},_.prototype.inspect=function(){var M="",O=_e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(M+=" ... "),"<Buffer "+M+">"},_.prototype.compare=function(M,O,he,We,Ee){if(ue(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),!_.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(void 0===O&&(O=0),void 0===he&&(he=M?M.length:0),void 0===We&&(We=0),void 0===Ee&&(Ee=this.length),O<0||he>M.length||We<0||Ee>this.length)throw new RangeError("out of range index");if(We>=Ee&&O>=he)return 0;if(We>=Ee)return-1;if(O>=he)return 1;if(this===M)return 0;for(var Re=(Ee>>>=0)-(We>>>=0),ct=(he>>>=0)-(O>>>=0),bt=Math.min(Re,ct),Dt=this.slice(We,Ee),_t=M.slice(O,he),Gt=0;Gt<bt;++Gt)if(Dt[Gt]!==_t[Gt]){Re=Dt[Gt],ct=_t[Gt];break}return Re<ct?-1:ct<Re?1:0},_.prototype.includes=function(M,O,he){return-1!==this.indexOf(M,O,he)},_.prototype.indexOf=function(M,O,he){return B(this,M,O,he,!0)},_.prototype.lastIndexOf=function(M,O,he){return B(this,M,O,he,!1)},_.prototype.write=function(M,O,he,We){if(void 0===O)We="utf8",he=this.length,O=0;else if(void 0===he&&"string"==typeof O)We=O,he=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(he)?(he>>>=0,void 0===We&&(We="utf8")):(We=he,he=void 0)}var Ee=this.length-O;if((void 0===he||he>Ee)&&(he=Ee),M.length>0&&(he<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var Re=!1;;)switch(We){case"hex":return I(this,M,O,he);case"utf8":case"utf-8":return T(this,M,O,he);case"ascii":return le(this,M,O,he);case"latin1":case"binary":return j(this,M,O,he);case"base64":return Ie(this,M,O,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,M,O,he);default:if(Re)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Re=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var He=4096;function qe(V,M,O){var he="";O=Math.min(V.length,O);for(var We=M;We<O;++We)he+=String.fromCharCode(127&V[We]);return he}function Ce(V,M,O){var he="";O=Math.min(V.length,O);for(var We=M;We<O;++We)he+=String.fromCharCode(V[We]);return he}function je(V,M,O){var he=V.length;(!M||M<0)&&(M=0),(!O||O<0||O>he)&&(O=he);for(var We="",Ee=M;Ee<O;++Ee)We+=R(V[Ee]);return We}function Se(V,M,O){for(var he=V.slice(M,O),We="",Ee=0;Ee<he.length;Ee+=2)We+=String.fromCharCode(he[Ee]+256*he[Ee+1]);return We}function Be(V,M,O){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(V+M>O)throw new RangeError("Trying to access beyond buffer length")}function de(V,M,O,he,We,Ee){if(!_.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>We||M<Ee)throw new RangeError('"value" argument is out of bounds');if(O+he>V.length)throw new RangeError("Index out of range")}function Ae(V,M,O,he,We,Ee){if(O+he>V.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function nt(V,M,O,he,We){return M=+M,O>>>=0,We||Ae(V,0,O,4),C.write(V,M,O,he,23,4),O+4}function mt(V,M,O,he,We){return M=+M,O>>>=0,We||Ae(V,0,O,8),C.write(V,M,O,he,52,8),O+8}_.prototype.slice=function(M,O){var he=this.length;(M=~~M)<0?(M+=he)<0&&(M=0):M>he&&(M=he),(O=void 0===O?he:~~O)<0?(O+=he)<0&&(O=0):O>he&&(O=he),O<M&&(O=M);var We=this.subarray(M,O);return We.__proto__=_.prototype,We},_.prototype.readUIntLE=function(M,O,he){M>>>=0,O>>>=0,he||Be(M,O,this.length);for(var We=this[M],Ee=1,Re=0;++Re<O&&(Ee*=256);)We+=this[M+Re]*Ee;return We},_.prototype.readUIntBE=function(M,O,he){M>>>=0,O>>>=0,he||Be(M,O,this.length);for(var We=this[M+--O],Ee=1;O>0&&(Ee*=256);)We+=this[M+--O]*Ee;return We},_.prototype.readUInt8=function(M,O){return M>>>=0,O||Be(M,1,this.length),this[M]},_.prototype.readUInt16LE=function(M,O){return M>>>=0,O||Be(M,2,this.length),this[M]|this[M+1]<<8},_.prototype.readUInt16BE=function(M,O){return M>>>=0,O||Be(M,2,this.length),this[M]<<8|this[M+1]},_.prototype.readUInt32LE=function(M,O){return M>>>=0,O||Be(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},_.prototype.readUInt32BE=function(M,O){return M>>>=0,O||Be(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},_.prototype.readIntLE=function(M,O,he){M>>>=0,O>>>=0,he||Be(M,O,this.length);for(var We=this[M],Ee=1,Re=0;++Re<O&&(Ee*=256);)We+=this[M+Re]*Ee;return We>=(Ee*=128)&&(We-=Math.pow(2,8*O)),We},_.prototype.readIntBE=function(M,O,he){M>>>=0,O>>>=0,he||Be(M,O,this.length);for(var We=O,Ee=1,Re=this[M+--We];We>0&&(Ee*=256);)Re+=this[M+--We]*Ee;return Re>=(Ee*=128)&&(Re-=Math.pow(2,8*O)),Re},_.prototype.readInt8=function(M,O){return M>>>=0,O||Be(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},_.prototype.readInt16LE=function(M,O){M>>>=0,O||Be(M,2,this.length);var he=this[M]|this[M+1]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt16BE=function(M,O){M>>>=0,O||Be(M,2,this.length);var he=this[M+1]|this[M]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt32LE=function(M,O){return M>>>=0,O||Be(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},_.prototype.readInt32BE=function(M,O){return M>>>=0,O||Be(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},_.prototype.readFloatLE=function(M,O){return M>>>=0,O||Be(M,4,this.length),C.read(this,M,!0,23,4)},_.prototype.readFloatBE=function(M,O){return M>>>=0,O||Be(M,4,this.length),C.read(this,M,!1,23,4)},_.prototype.readDoubleLE=function(M,O){return M>>>=0,O||Be(M,8,this.length),C.read(this,M,!0,52,8)},_.prototype.readDoubleBE=function(M,O){return M>>>=0,O||Be(M,8,this.length),C.read(this,M,!1,52,8)},_.prototype.writeUIntLE=function(M,O,he,We){M=+M,O>>>=0,he>>>=0,We||de(this,M,O,he,Math.pow(2,8*he)-1,0);var Re=1,ct=0;for(this[O]=255&M;++ct<he&&(Re*=256);)this[O+ct]=M/Re&255;return O+he},_.prototype.writeUIntBE=function(M,O,he,We){M=+M,O>>>=0,he>>>=0,We||de(this,M,O,he,Math.pow(2,8*he)-1,0);var Re=he-1,ct=1;for(this[O+Re]=255&M;--Re>=0&&(ct*=256);)this[O+Re]=M/ct&255;return O+he},_.prototype.writeUInt8=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,1,255,0),this[O]=255&M,O+1},_.prototype.writeUInt16LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,65535,0),this[O]=255&M,this[O+1]=M>>>8,O+2},_.prototype.writeUInt16BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,65535,0),this[O]=M>>>8,this[O+1]=255&M,O+2},_.prototype.writeUInt32LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,4294967295,0),this[O+3]=M>>>24,this[O+2]=M>>>16,this[O+1]=M>>>8,this[O]=255&M,O+4},_.prototype.writeUInt32BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,4294967295,0),this[O]=M>>>24,this[O+1]=M>>>16,this[O+2]=M>>>8,this[O+3]=255&M,O+4},_.prototype.writeIntLE=function(M,O,he,We){if(M=+M,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,M,O,he,Ee-1,-Ee)}var Re=0,ct=1,bt=0;for(this[O]=255&M;++Re<he&&(ct*=256);)M<0&&0===bt&&0!==this[O+Re-1]&&(bt=1),this[O+Re]=(M/ct>>0)-bt&255;return O+he},_.prototype.writeIntBE=function(M,O,he,We){if(M=+M,O>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,M,O,he,Ee-1,-Ee)}var Re=he-1,ct=1,bt=0;for(this[O+Re]=255&M;--Re>=0&&(ct*=256);)M<0&&0===bt&&0!==this[O+Re+1]&&(bt=1),this[O+Re]=(M/ct>>0)-bt&255;return O+he},_.prototype.writeInt8=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,1,127,-128),M<0&&(M=255+M+1),this[O]=255&M,O+1},_.prototype.writeInt16LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,32767,-32768),this[O]=255&M,this[O+1]=M>>>8,O+2},_.prototype.writeInt16BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,2,32767,-32768),this[O]=M>>>8,this[O+1]=255&M,O+2},_.prototype.writeInt32LE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,2147483647,-2147483648),this[O]=255&M,this[O+1]=M>>>8,this[O+2]=M>>>16,this[O+3]=M>>>24,O+4},_.prototype.writeInt32BE=function(M,O,he){return M=+M,O>>>=0,he||de(this,M,O,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[O]=M>>>24,this[O+1]=M>>>16,this[O+2]=M>>>8,this[O+3]=255&M,O+4},_.prototype.writeFloatLE=function(M,O,he){return nt(this,M,O,!0,he)},_.prototype.writeFloatBE=function(M,O,he){return nt(this,M,O,!1,he)},_.prototype.writeDoubleLE=function(M,O,he){return mt(this,M,O,!0,he)},_.prototype.writeDoubleBE=function(M,O,he){return mt(this,M,O,!1,he)},_.prototype.copy=function(M,O,he,We){if(!_.isBuffer(M))throw new TypeError("argument should be a Buffer");if(he||(he=0),!We&&0!==We&&(We=this.length),O>=M.length&&(O=M.length),O||(O=0),We>0&&We<he&&(We=he),We===he||0===M.length||0===this.length)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),M.length-O<We-he&&(We=M.length-O+he);var Ee=We-he;if(this===M&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(O,he,We);else if(this===M&&he<O&&O<We)for(var Re=Ee-1;Re>=0;--Re)M[Re+O]=this[Re+he];else Uint8Array.prototype.set.call(M,this.subarray(he,We),O);return Ee},_.prototype.fill=function(M,O,he,We){if("string"==typeof M){if("string"==typeof O?(We=O,O=0,he=this.length):"string"==typeof he&&(We=he,he=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!_.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===M.length){var Ee=M.charCodeAt(0);("utf8"===We&&Ee<128||"latin1"===We)&&(M=Ee)}}else"number"==typeof M&&(M&=255);if(O<0||this.length<O||this.length<he)throw new RangeError("Out of range index");if(he<=O)return this;var Re;if(O>>>=0,he=void 0===he?this.length:he>>>0,M||(M=0),"number"==typeof M)for(Re=O;Re<he;++Re)this[Re]=M;else{var ct=_.isBuffer(M)?M:_.from(M,We),bt=ct.length;if(0===bt)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Re=0;Re<he-O;++Re)this[Re+O]=ct[Re%bt]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function R(V){return V<16?"0"+V.toString(16):V.toString(16)}function A(V,M){M=M||1/0;for(var O,he=V.length,We=null,Ee=[],Re=0;Re<he;++Re){if((O=V.charCodeAt(Re))>55295&&O<57344){if(!We){if(O>56319){(M-=3)>-1&&Ee.push(239,191,189);continue}if(Re+1===he){(M-=3)>-1&&Ee.push(239,191,189);continue}We=O;continue}if(O<56320){(M-=3)>-1&&Ee.push(239,191,189),We=O;continue}O=65536+(We-55296<<10|O-56320)}else We&&(M-=3)>-1&&Ee.push(239,191,189);if(We=null,O<128){if((M-=1)<0)break;Ee.push(O)}else if(O<2048){if((M-=2)<0)break;Ee.push(O>>6|192,63&O|128)}else if(O<65536){if((M-=3)<0)break;Ee.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;Ee.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return Ee}function Ve(V){return Q.toByteArray(function fe(V){if((V=(V=V.split("=")[0]).trim().replace(Ke,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(V))}function Je(V,M,O,he){for(var We=0;We<he&&!(We+O>=M.length||We>=V.length);++We)M[We+O]=V[We];return We}function ue(V,M){return V instanceof M||null!=V&&null!=V.constructor&&null!=V.constructor.name&&V.constructor.name===M.name}function ne(V){return V!=V}},1563:(Ue,_e,S)=>{Ue.exports={ResizeSensor:S(884),ElementQueries:S(8381)}},8381:function(Ue,_e,S){"use strict";var Q,C,$;typeof window<"u"&&window,C=[S(884)],void 0!==($="function"==typeof(Q=function(z){var X=function(){var E,L={},G=[];function P(j){j||(j=document.documentElement);var Ie=window.getComputedStyle(j,null).fontSize;return parseFloat(Ie)||16}function oe(j,Ie){var ae=Ie.split(/\d/),xe=ae[ae.length-1];switch(Ie=parseFloat(Ie),xe){case"px":default:return Ie;case"em":return Ie*P(j);case"rem":return Ie*P();case"vw":return Ie*document.documentElement.clientWidth/100;case"vh":return Ie*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Pe=document.documentElement.clientWidth/100,He=document.documentElement.clientHeight/100;return Ie*(0,Math["vmin"===xe?"min":"max"])(Pe,He)}}function x(j,Ie){this.element=j;var ae,xe,Pe,He,Qe,qe,Ce,je,Se=["min-width","min-height","max-width","max-height"];this.call=function(){for(ae in Pe=function F(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var Ie=j.getBoundingClientRect();return{width:Math.round(Ie.width),height:Math.round(Ie.height)}}(this.element),qe={},L[Ie])L[Ie].hasOwnProperty(ae)&&(He=oe(this.element,(xe=L[Ie][ae]).value),Qe="width"===xe.property?Pe.width:Pe.height,Ce="","min"===xe.mode&&Qe>=He&&(Ce+=xe.value),"max"===xe.mode&&Qe<=He&&(Ce+=xe.value),qe[je=xe.mode+"-"+xe.property]||(qe[je]=""),Ce&&-1===(" "+qe[je]+" ").indexOf(" "+Ce+" ")&&(qe[je]+=" "+Ce));for(var Be in Se)Se.hasOwnProperty(Be)&&(qe[Se[Be]]?this.element.setAttribute(Se[Be],qe[Se[Be]].substr(1)):this.element.removeAttribute(Se[Be]))}}function k(j,Ie){j.elementQueriesSetupInformation||(j.elementQueriesSetupInformation=new x(j,Ie)),j.elementQueriesSensor||(j.elementQueriesSensor=new z(j,function(){j.elementQueriesSetupInformation.call()}))}function se(j,Ie,ae,xe){if(typeof L[j]>"u"){L[j]=[];var Pe=G.length;E.innerHTML+="\n"+j+" {animation: 0.1s element-queries;}",E.innerHTML+="\n"+j+" > .resize-sensor {min-width: "+Pe+"px;}",G.push(j)}L[j].push({mode:Ie,property:ae,value:xe})}function Y(j){var Ie;if(document.querySelectorAll&&(Ie=j?j.querySelectorAll.bind(j):document.querySelectorAll.bind(document)),!Ie&&typeof $$<"u"&&(Ie=$$),!Ie&&typeof jQuery<"u"&&(Ie=jQuery),!Ie)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ie}function ee(j){var Ie=[],ae=[],xe=[],Pe=0,He=-1,Qe=[];for(var qe in j.children)if(j.children.hasOwnProperty(qe)&&j.children[qe].tagName&&"img"===j.children[qe].tagName.toLowerCase()){Ie.push(j.children[qe]);var Ce=j.children[qe].getAttribute("min-width")||j.children[qe].getAttribute("data-min-width"),je=j.children[qe].getAttribute("data-src")||j.children[qe].getAttribute("url");xe.push(je),ae.push({minWidth:Ce}),Ce?j.children[qe].style.display="none":(Pe=Ie.length-1,j.children[qe].style.display="block")}function Be(){var Ae,de=!1;for(Ae in Ie)Ie.hasOwnProperty(Ae)&&ae[Ae].minWidth&&j.offsetWidth>ae[Ae].minWidth&&(de=Ae);if(de||(de=Pe),He!==de)if(Qe[de])Ie[He].style.display="none",Ie[de].style.display="block",He=de;else{var nt=new Image;nt.onload=function(){Ie[de].src=xe[de],Ie[He].style.display="none",Ie[de].style.display="block",Qe[de]=!0,He=de},nt.src=xe[de]}else Ie[de].src=xe[de]}He=Pe,j.resizeSensorInstance=new z(j,Be),Be()}var B=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,b=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function I(j){var Ie,ae,xe,Pe;for(j=j.replace(/'/g,'"');null!==(Ie=B.exec(j));)for(ae=Ie[1]+Ie[3],xe=Ie[2];null!==(Pe=b.exec(xe));)se(ae,Pe[1],Pe[2],Pe[3])}function T(j){var Ie="";if(j)if("string"==typeof j)(-1!==(j=j.toLowerCase()).indexOf("min-width")||-1!==j.indexOf("max-width"))&&I(j);else for(var ae=0,xe=j.length;ae<xe;ae++)1===j[ae].type?(-1!==(Ie=j[ae].selectorText||j[ae].cssText).indexOf("min-height")||-1!==Ie.indexOf("max-height")||-1!==Ie.indexOf("min-width")||-1!==Ie.indexOf("max-width"))&&I(Ie):4===j[ae].type?T(j[ae].cssRules||j[ae].rules):3===j[ae].type&&j[ae].styleSheet.hasOwnProperty("cssRules")&&T(j[ae].styleSheet.cssRules)}var le=!1;this.init=function(){var j="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?j="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?j="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(j="oanimationstart"),document.body.addEventListener(j,function(xe){var Pe=xe.target,He=Pe&&window.getComputedStyle(Pe,null),Qe=He&&He.getPropertyValue("animation-name");if(Qe&&-1!==Qe.indexOf("element-queries")){Pe.elementQueriesSensor=new z(Pe,function(){Pe.elementQueriesSetupInformation&&Pe.elementQueriesSetupInformation.call()});var je=window.getComputedStyle(Pe.resizeSensor,null).getPropertyValue("min-width");je=parseInt(je.replace("px","")),k(xe.target,G[je])}}),le||((E=document.createElement("style")).type="text/css",E.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",E.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(E),le=!0);for(var Ie=0,ae=document.styleSheets.length;Ie<ae;Ie++)try{document.styleSheets[Ie].href&&0===document.styleSheets[Ie].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ie].href),T(document.styleSheets[Ie].cssRules||document.styleSheets[Ie].rules||document.styleSheets[Ie].cssText)}catch{}!function W(){for(var Ie=Y()("[data-responsive-image],[responsive-image]"),ae=0,xe=Ie.length;ae<xe;ae++)ee(Ie[ae])}()},this.findElementQueriesElements=function(j){!function J(j){var Ie=Y(j);for(var ae in L)if(L.hasOwnProperty(ae))for(var xe=Ie(ae,j),Pe=0,He=xe.length;Pe<He;Pe++)k(xe[Pe],ae)}(j)},this.update=function(){this.init()}};X.update=function(){X.instance.update()},X.detach=function(E){E.elementQueriesSetupInformation?(E.elementQueriesSensor.detach(),delete E.elementQueriesSetupInformation,delete E.elementQueriesSensor):E.resizeSensorInstance&&(E.resizeSensorInstance.detach(),delete E.resizeSensorInstance)},X.init=function(){X.instance||(X.instance=new X),X.instance.init()};return X.findElementQueriesElements=function(E){X.instance.findElementQueriesElements(E)},X.listen=function(){!function(E){if(document.addEventListener)document.addEventListener("DOMContentLoaded",E,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var L=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(E(),clearInterval(L))},10);else window.onload=E}(X.init)},X})?Q.apply(_e,C):Q)&&(Ue.exports=$)},884:function(Ue,_e,S){"use strict";var Q,C;typeof window<"u"&&window,void 0!==(C="function"==typeof(Q=function(){if(typeof window>"u")return null;var $=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),z=$.requestAnimationFrame||$.mozRequestAnimationFrame||$.webkitRequestAnimationFrame||function(F){return $.setTimeout(F,20)},X=$.cancelAnimationFrame||$.mozCancelAnimationFrame||$.webkitCancelAnimationFrame||function(F){$.clearTimeout(F)};function _(F,oe){var x=Object.prototype.toString.call(F),k="[object Array]"===x||"[object NodeList]"===x||"[object HTMLCollection]"===x||"[object Object]"===x||typeof jQuery<"u"&&F instanceof jQuery||typeof Elements<"u"&&F instanceof Elements,se=0,Y=F.length;if(k)for(;se<Y;se++)oe(F[se]);else oe(F)}function E(F){if(!F.getBoundingClientRect)return{width:F.offsetWidth,height:F.offsetHeight};var oe=F.getBoundingClientRect();return{width:Math.round(oe.width),height:Math.round(oe.height)}}function L(F,oe){Object.keys(oe).forEach(function(x){F.style[x]=oe[x]})}var G=function(F,oe){var x=0;function k(){var J,ee,Y=[];this.add=function(W){Y.push(W)},this.call=function(W){for(J=0,ee=Y.length;J<ee;J++)Y[J].call(this,W)},this.remove=function(W){var B=[];for(J=0,ee=Y.length;J<ee;J++)Y[J]!==W&&B.push(Y[J]);Y=B},this.length=function(){return Y.length}}function se(Y,J){if(Y){if(Y.resizedAttached)return void Y.resizedAttached.add(J);Y.resizedAttached=new k,Y.resizedAttached.add(J),Y.resizeSensor=document.createElement("div"),Y.resizeSensor.dir="ltr",Y.resizeSensor.className="resize-sensor";var ee={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},W={position:"absolute",left:"0px",top:"0px",transition:"0s"};L(Y.resizeSensor,ee);var B=document.createElement("div");B.className="resize-sensor-expand",L(B,ee);var b=document.createElement("div");L(b,W),B.appendChild(b);var I=document.createElement("div");I.className="resize-sensor-shrink",L(I,ee);var T=document.createElement("div");L(T,W),L(T,{width:"200%",height:"200%"}),I.appendChild(T),Y.resizeSensor.appendChild(B),Y.resizeSensor.appendChild(I),Y.appendChild(Y.resizeSensor);var le=window.getComputedStyle(Y),j=le?le.getPropertyValue("position"):null;"absolute"!==j&&"relative"!==j&&"fixed"!==j&&"sticky"!==j&&(Y.style.position="relative");var Ie=!1,ae=0,xe=E(Y),Pe=0,He=0,Qe=!0;x=0;var Ce=function(){if(Qe){if(0===Y.offsetWidth&&0===Y.offsetHeight)return void(x||(x=z(function(){x=0,Ce()})));Qe=!1}var de,Ae;Ae=Y.offsetHeight,b.style.width=(de=Y.offsetWidth)+10+"px",b.style.height=Ae+10+"px",B.scrollLeft=de+10,B.scrollTop=Ae+10,I.scrollLeft=de+10,I.scrollTop=Ae+10};Y.resizeSensor.resetSensor=Ce;var je=function(){ae=0,Ie&&(Pe=xe.width,He=xe.height,Y.resizedAttached&&Y.resizedAttached.call(xe))},Se=function(){xe=E(Y),(Ie=xe.width!==Pe||xe.height!==He)&&!ae&&(ae=z(je)),Ce()},Be=function(de,Ae,nt){de.attachEvent?de.attachEvent("on"+Ae,nt):de.addEventListener(Ae,nt)};Be(B,"scroll",Se),Be(I,"scroll",Se),x=z(function(){x=0,Ce()})}}_(F,function(Y){se(Y,oe)}),this.detach=function(Y){x||(X(x),x=0),G.detach(F,Y)},this.reset=function(){F.resizeSensor.resetSensor()}};if(G.reset=function(F){_(F,function(oe){oe.resizeSensor.resetSensor()})},G.detach=function(F,oe){_(F,function(x){x&&(x.resizedAttached&&"function"==typeof oe&&(x.resizedAttached.remove(oe),x.resizedAttached.length())||x.resizeSensor&&(x.contains(x.resizeSensor)&&x.removeChild(x.resizeSensor),delete x.resizeSensor,delete x.resizedAttached))})},typeof MutationObserver<"u"){var P=new MutationObserver(function(F){for(var oe in F)if(F.hasOwnProperty(oe))for(var x=F[oe].addedNodes,k=0;k<x.length;k++)x[k].resizeSensor&&G.reset(x[k])});document.addEventListener("DOMContentLoaded",function(F){P.observe(document.body,{childList:!0,subtree:!0})})}return G})?Q.call(_e,S,_e,Ue):Q)&&(Ue.exports=C)},2016:Ue=>{"use strict";var Q,_e="object"==typeof Reflect?Reflect:null,S=_e&&"function"==typeof _e.apply?_e.apply:function(B,b,I){return Function.prototype.apply.call(B,b,I)};Q=_e&&"function"==typeof _e.ownKeys?_e.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var $=Number.isNaN||function(B){return B!=B};function z(){z.init.call(this)}Ue.exports=z,Ue.exports.once=function Y(W,B){return new Promise(function(b,I){function T(j){W.removeListener(B,le),I(j)}function le(){"function"==typeof W.removeListener&&W.removeListener("error",T),b([].slice.call(arguments))}ee(W,B,le,{once:!0}),"error"!==B&&function J(W,B,b){"function"==typeof W.on&&ee(W,"error",B,b)}(W,T,{once:!0})})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var X=10;function _(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function E(W){return void 0===W._maxListeners?z.defaultMaxListeners:W._maxListeners}function L(W,B,b,I){var T,le,j;if(_(b),void 0===(le=W._events)?(le=W._events=Object.create(null),W._eventsCount=0):(void 0!==le.newListener&&(W.emit("newListener",B,b.listener?b.listener:b),le=W._events),j=le[B]),void 0===j)j=le[B]=b,++W._eventsCount;else if("function"==typeof j?j=le[B]=I?[b,j]:[j,b]:I?j.unshift(b):j.push(b),(T=E(W))>0&&j.length>T&&!j.warned){j.warned=!0;var Ie=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ie.name="MaxListenersExceededWarning",Ie.emitter=W,Ie.type=B,Ie.count=j.length,function C(W){console&&console.warn&&console.warn(W)}(Ie)}return W}function G(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(W,B,b){var I={fired:!1,wrapFn:void 0,target:W,type:B,listener:b},T=G.bind(I);return T.listener=b,I.wrapFn=T,T}function F(W,B,b){var I=W._events;if(void 0===I)return[];var T=I[B];return void 0===T?[]:"function"==typeof T?b?[T.listener||T]:[T]:b?function se(W){for(var B=new Array(W.length),b=0;b<B.length;++b)B[b]=W[b].listener||W[b];return B}(T):x(T,T.length)}function oe(W){var B=this._events;if(void 0!==B){var b=B[W];if("function"==typeof b)return 1;if(void 0!==b)return b.length}return 0}function x(W,B){for(var b=new Array(B),I=0;I<B;++I)b[I]=W[I];return b}function ee(W,B,b,I){if("function"==typeof W.on)I.once?W.once(B,b):W.on(B,b);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(B,function T(le){I.once&&W.removeEventListener(B,T),b(le)})}}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(W){if("number"!=typeof W||W<0||$(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");X=W}}),z.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||$(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},z.prototype.getMaxListeners=function(){return E(this)},z.prototype.emit=function(B){for(var b=[],I=1;I<arguments.length;I++)b.push(arguments[I]);var T="error"===B,le=this._events;if(void 0!==le)T=T&&void 0===le.error;else if(!T)return!1;if(T){var j;if(b.length>0&&(j=b[0]),j instanceof Error)throw j;var Ie=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw Ie.context=j,Ie}var ae=le[B];if(void 0===ae)return!1;if("function"==typeof ae)S(ae,this,b);else{var xe=ae.length,Pe=x(ae,xe);for(I=0;I<xe;++I)S(Pe[I],this,b)}return!0},z.prototype.on=z.prototype.addListener=function(B,b){return L(this,B,b,!1)},z.prototype.prependListener=function(B,b){return L(this,B,b,!0)},z.prototype.once=function(B,b){return _(b),this.on(B,P(this,B,b)),this},z.prototype.prependOnceListener=function(B,b){return _(b),this.prependListener(B,P(this,B,b)),this},z.prototype.off=z.prototype.removeListener=function(B,b){var I,T,le,j,Ie;if(_(b),void 0===(T=this._events))return this;if(void 0===(I=T[B]))return this;if(I===b||I.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete T[B],T.removeListener&&this.emit("removeListener",B,I.listener||b));else if("function"!=typeof I){for(le=-1,j=I.length-1;j>=0;j--)if(I[j]===b||I[j].listener===b){Ie=I[j].listener,le=j;break}if(le<0)return this;0===le?I.shift():function k(W,B){for(;B+1<W.length;B++)W[B]=W[B+1];W.pop()}(I,le),1===I.length&&(T[B]=I[0]),void 0!==T.removeListener&&this.emit("removeListener",B,Ie||b)}return this},z.prototype.removeAllListeners=function(B){var b,I,T;if(void 0===(I=this._events))return this;if(void 0===I.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==I[B]&&(0==--this._eventsCount?this._events=Object.create(null):delete I[B]),this;if(0===arguments.length){var j,le=Object.keys(I);for(T=0;T<le.length;++T)"removeListener"!==(j=le[T])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=I[B]))this.removeListener(B,b);else if(void 0!==b)for(T=b.length-1;T>=0;T--)this.removeListener(B,b[T]);return this},z.prototype.listeners=function(B){return F(this,B,!0)},z.prototype.rawListeners=function(B){return F(this,B,!1)},z.listenerCount=function(W,B){return"function"==typeof W.listenerCount?W.listenerCount(B):oe.call(W,B)},z.prototype.listenerCount=oe,z.prototype.eventNames=function(){return this._eventsCount>0?Q(this._events):[]}},7991:(Ue,_e,S)=>{var Q=S(6943),C=S(9151),$=S(2323);function z(F,oe,x){if(!Q(F))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!F.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');if(!F.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" target node does not exist in the given graph.');if((oe=""+oe)==(x=""+x))return[oe];var k=F.inboundNeighbors.bind(F),se=F.outboundNeighbors.bind(F),Y={},J={};Y[oe]=null,J[x]=null;var B,b,I,T,le,j,Ie,ae,ee=[oe],W=[x],xe=!1;e:for(;ee.length&&W.length;)if(ee.length<=W.length){for(B=ee,ee=[],le=0,Ie=B.length;le<Ie;le++)for(j=0,ae=(I=se(b=B[le])).length;j<ae;j++)if((T=I[j])in Y||(ee.push(T),Y[T]=b),T in J){xe=!0;break e}}else for(B=W,W=[],le=0,Ie=B.length;le<Ie;le++)for(b=B[le],I=k(b),j=0,ae=I.length;j<ae;j++)if(T=I[j],T in J||(W.push(T),J[T]=b),T in Y){xe=!0;break e}if(!xe)return null;for(var Pe=[];T;)Pe.unshift(T),T=Y[T];for(T=J[Pe[Pe.length-1]];T;)Pe.push(T),T=J[T];return Pe.length?Pe:null}function X(F,oe){if(!Q(F))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!F.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');var se,Y,J,ee,W,B,x={},k={};for(x[oe=""+oe]=!0,k[oe]=[oe];Object.keys(x).length;)for(J in se=x,x={},se)for(W=0,B=(Y=F.outboundNeighbors(J)).length;W<B;W++)k[ee=Y[W]]||(k[ee]=k[J].concat(ee),x[ee]=!0);return k}function _(F,oe,x){if(!Q(oe))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!oe.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" source node does not exist in the given graph.');x=""+x;var k=new Set,se={},Y=0;se[x]=0;for(var ee,W,B,J=[x];0!==J.length;){var b=[];for(ee=0,W=J.length;ee<W;ee++)!k.has(B=J[ee])&&(k.add(B),$(b,oe[F](B)),se[B]=Y);Y++,J=b}return se}var E=_.bind(null,"outboundNeighbors"),L=_.bind(null,"neighbors");function G(F,oe,x){return arguments.length<3?X(F,oe):z(F,oe,x)}G.bidirectional=z,G.singleSource=X,G.singleSourceLength=E,G.undirectedSingleSourceLength=L,G.brandes=function P(F,oe){oe=""+oe;var J,ee,W,B,b,I,T,le,j,x=[],k={},se={},Y=F.nodes();for(I=0,le=Y.length;I<le;I++)k[B=Y[I]]=[],se[B]=0;var Ie={};se[oe]=1,Ie[oe]=0;for(var ae=C.of(oe);ae.size;)for(B=ae.dequeue(),x.push(B),J=Ie[B],ee=se[B],T=0,j=(W=F.outboundNeighbors(B)).length;T<j;T++)(b=W[T])in Ie||(ae.enqueue(b),Ie[b]=J+1),Ie[b]===J+1&&(se[b]+=ee,k[b].push(B));return[x,k,se]},Ue.exports=G},6943:Ue=>{Ue.exports=function(S){return null!==S&&"object"==typeof S&&"function"==typeof S.addUndirectedEdgeWithKey&&"function"==typeof S.dropNode&&"boolean"==typeof S.multi}},4938:function(Ue){Ue.exports=function(){"use strict";function _e(ye){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(ye)}function S(ye,Te){ye.prototype=Object.create(Te.prototype),ye.prototype.constructor=ye,C(ye,Te)}function Q(ye){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(ye)}function C(ye,Te){return(C=Object.setPrototypeOf||function(ge,D){return ge.__proto__=D,ge})(ye,Te)}function z(ye,Te,ge){return(z=function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(D,q,me){var Fe=[null];Fe.push.apply(Fe,q);var Ye=new(Function.bind.apply(D,Fe));return me&&C(Ye,me.prototype),Ye}).apply(null,arguments)}function X(ye){var Te="function"==typeof Map?new Map:void 0;return(X=function(ge){if(null===ge||-1===Function.toString.call(ge).indexOf("[native code]"))return ge;if("function"!=typeof ge)throw new TypeError("Super expression must either be null or a function");if(void 0!==Te){if(Te.has(ge))return Te.get(ge);Te.set(ge,q)}function q(){return z(ge,arguments,Q(this).constructor)}return q.prototype=Object.create(ge.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),C(q,ge)})(ye)}function _(ye){if(void 0===ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}var E=function(){for(var ye=arguments[0],Te=1,ge=arguments.length;Te<ge;Te++)if(arguments[Te])for(var D in arguments[Te])ye[D]=arguments[Te][D];return ye};function L(ye,Te,ge,D){var q=ye._nodes.get(Te),me=null;return q?me="mixed"===D?q.out&&q.out[ge]||q.undirected&&q.undirected[ge]:"directed"===D?q.out&&q.out[ge]:q.undirected&&q.undirected[ge]:me}function P(ye){return"object"===_e(ye)&&null!==ye&&ye.constructor===Object}function F(ye){var Te;for(Te in ye)return!1;return!0}function oe(ye,Te,ge){Object.defineProperty(ye,Te,{enumerable:!1,configurable:!1,writable:!0,value:ge})}function x(ye,Te,ge){var D={enumerable:!0,configurable:!0};"function"==typeof ge?D.get=ge:(D.value=ge,D.writable=!1),Object.defineProperty(ye,Te,D)}function k(ye){return!(!P(ye)||ye.attributes&&!Array.isArray(ye.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var se,Y={exports:{}},J="object"==typeof Reflect?Reflect:null,ee=J&&"function"==typeof J.apply?J.apply:function(ye,Te,ge){return Function.prototype.apply.call(ye,Te,ge)};se=J&&"function"==typeof J.ownKeys?J.ownKeys:Object.getOwnPropertySymbols?function(ye){return Object.getOwnPropertyNames(ye).concat(Object.getOwnPropertySymbols(ye))}:function(ye){return Object.getOwnPropertyNames(ye)};var W=Number.isNaN||function(ye){return ye!=ye};function B(){B.init.call(this)}Y.exports=B,Y.exports.once=function(ye,Te){return new Promise(function(ge,D){function q(Fe){ye.removeListener(Te,me),D(Fe)}function me(){"function"==typeof ye.removeListener&&ye.removeListener("error",q),ge([].slice.call(arguments))}var Fe;He(ye,Te,me,{once:!0}),"error"!==Te&&("function"==typeof(Fe=ye).on&&He(Fe,"error",q,{once:!0}))})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var b=10;function I(ye){if("function"!=typeof ye)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ye)}function T(ye){return void 0===ye._maxListeners?B.defaultMaxListeners:ye._maxListeners}function le(ye,Te,ge,D){var q,me,Fe;if(I(ge),void 0===(me=ye._events)?(me=ye._events=Object.create(null),ye._eventsCount=0):(void 0!==me.newListener&&(ye.emit("newListener",Te,ge.listener?ge.listener:ge),me=ye._events),Fe=me[Te]),void 0===Fe)Fe=me[Te]=ge,++ye._eventsCount;else if("function"==typeof Fe?Fe=me[Te]=D?[ge,Fe]:[Fe,ge]:D?Fe.unshift(ge):Fe.push(ge),(q=T(ye))>0&&Fe.length>q&&!Fe.warned){Fe.warned=!0;var Ge=new Error("Possible EventEmitter memory leak detected. "+Fe.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ge.name="MaxListenersExceededWarning",Ge.emitter=ye,Ge.type=Te,Ge.count=Fe.length,console&&console.warn&&console.warn(Ge)}return ye}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ie(ye,Te,ge){var D={fired:!1,wrapFn:void 0,target:ye,type:Te,listener:ge},q=j.bind(D);return q.listener=ge,D.wrapFn=q,q}function ae(ye,Te,ge){var D=ye._events;if(void 0===D)return[];var q=D[Te];return void 0===q?[]:"function"==typeof q?ge?[q.listener||q]:[q]:ge?function(me){for(var Fe=new Array(me.length),Ye=0;Ye<Fe.length;++Ye)Fe[Ye]=me[Ye].listener||me[Ye];return Fe}(q):Pe(q,q.length)}function xe(ye){var Te=this._events;if(void 0!==Te){var ge=Te[ye];if("function"==typeof ge)return 1;if(void 0!==ge)return ge.length}return 0}function Pe(ye,Te){for(var ge=new Array(Te),D=0;D<Te;++D)ge[D]=ye[D];return ge}function He(ye,Te,ge,D){if("function"==typeof ye.on)D.once?ye.once(Te,ge):ye.on(Te,ge);else{if("function"!=typeof ye.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ye);ye.addEventListener(Te,function q(me){D.once&&ye.removeEventListener(Te,q),ge(me)})}}function Qe(ye){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ye}),this.done=!1}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(ye){if("number"!=typeof ye||ye<0||W(ye))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ye+".");b=ye}}),B.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(ye){if("number"!=typeof ye||ye<0||W(ye))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ye+".");return this._maxListeners=ye,this},B.prototype.getMaxListeners=function(){return T(this)},B.prototype.emit=function(ye){for(var Te=[],ge=1;ge<arguments.length;ge++)Te.push(arguments[ge]);var D="error"===ye,q=this._events;if(void 0!==q)D=D&&void 0===q.error;else if(!D)return!1;if(D){var me;if(Te.length>0&&(me=Te[0]),me instanceof Error)throw me;var Fe=new Error("Unhandled error."+(me?" ("+me.message+")":""));throw Fe.context=me,Fe}var Ye=q[ye];if(void 0===Ye)return!1;if("function"==typeof Ye)ee(Ye,this,Te);else{var Ge=Ye.length,Tt=Pe(Ye,Ge);for(ge=0;ge<Ge;++ge)ee(Tt[ge],this,Te)}return!0},B.prototype.addListener=function(ye,Te){return le(this,ye,Te,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(ye,Te){return le(this,ye,Te,!0)},B.prototype.once=function(ye,Te){return I(Te),this.on(ye,Ie(this,ye,Te)),this},B.prototype.prependOnceListener=function(ye,Te){return I(Te),this.prependListener(ye,Ie(this,ye,Te)),this},B.prototype.removeListener=function(ye,Te){var ge,D,q,me,Fe;if(I(Te),void 0===(D=this._events))return this;if(void 0===(ge=D[ye]))return this;if(ge===Te||ge.listener===Te)0==--this._eventsCount?this._events=Object.create(null):(delete D[ye],D.removeListener&&this.emit("removeListener",ye,ge.listener||Te));else if("function"!=typeof ge){for(q=-1,me=ge.length-1;me>=0;me--)if(ge[me]===Te||ge[me].listener===Te){Fe=ge[me].listener,q=me;break}if(q<0)return this;0===q?ge.shift():function(Ye,Ge){for(;Ge+1<Ye.length;Ge++)Ye[Ge]=Ye[Ge+1];Ye.pop()}(ge,q),1===ge.length&&(D[ye]=ge[0]),void 0!==D.removeListener&&this.emit("removeListener",ye,Fe||Te)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(ye){var Te,ge,D;if(void 0===(ge=this._events))return this;if(void 0===ge.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ge[ye]&&(0==--this._eventsCount?this._events=Object.create(null):delete ge[ye]),this;if(0===arguments.length){var q,me=Object.keys(ge);for(D=0;D<me.length;++D)"removeListener"!==(q=me[D])&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Te=ge[ye]))this.removeListener(ye,Te);else if(void 0!==Te)for(D=Te.length-1;D>=0;D--)this.removeListener(ye,Te[D]);return this},B.prototype.listeners=function(ye){return ae(this,ye,!0)},B.prototype.rawListeners=function(ye){return ae(this,ye,!1)},B.listenerCount=function(ye,Te){return"function"==typeof ye.listenerCount?ye.listenerCount(Te):xe.call(ye,Te)},B.prototype.listenerCount=xe,B.prototype.eventNames=function(){return this._eventsCount>0?se(this._events):[]},Qe.prototype.next=function(){if(this.done)return{done:!0};var ye=this._next();return ye.done&&(this.done=!0),ye},typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this}),Qe.of=function(){var ye=arguments,Te=ye.length,ge=0;return new Qe(function(){return ge>=Te?{done:!0}:{done:!1,value:ye[ge++]}})},Qe.empty=function(){var ye=new Qe(null);return ye.done=!0,ye},Qe.is=function(ye){return ye instanceof Qe||"object"==typeof ye&&null!==ye&&"function"==typeof ye.next};var qe=Qe,Ce=function(ye,Te){for(var ge,D=arguments.length>1?Te:1/0,q=D!==1/0?new Array(D):[],me=0;;){if(me===D)return q;if((ge=ye.next()).done)return me!==Te?q.slice(0,me):q;q[me++]=ge.value}},je=function(ye){function Te(ge,D){var q;return(q=ye.call(this)||this).name="GraphError",q.message=ge||"",q.data=D||{},q}return S(Te,ye),Te}(X(Error)),Se=function(ye){function Te(ge,D){var q;return(q=ye.call(this,ge,D)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(q),Te.prototype.constructor),q}return S(Te,ye),Te}(je),Be=function(ye){function Te(ge,D){var q;return(q=ye.call(this,ge,D)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(q),Te.prototype.constructor),q}return S(Te,ye),Te}(je),de=function(ye){function Te(ge,D){var q;return(q=ye.call(this,ge,D)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(q),Te.prototype.constructor),q}return S(Te,ye),Te}(je);function Ae(ye,Te){this.key=ye,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function nt(ye,Te){this.key=ye,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function mt(ye,Te){this.key=ye,this.attributes=Te,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ke(ye,Te,ge,D,q,me){this.key=Te,this.attributes=me,this.undirected=ye,this.source=D,this.target=q,this.generatedKey=ge}function fe(ye,Te,ge,D,q,me,Fe){var Ye,Ge,Tt="out",Nt="in";if(Te&&(Tt=Nt="undirected"),ye.multi){if(void 0===(Ge=(Ye=me[Tt])[q])&&(Ye[q]=Ge=new Set),Ge.add(ge),D===q&&Te)return;void 0===(Ye=Fe[Nt])[D]&&(Ye[D]=Ge)}else{if(me[Tt][q]=ge,D===q&&Te)return;Fe[Nt][D]=ge}}nt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},mt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var A=[{name:function(ye){return"get".concat(ye,"Attribute")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q){var me;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+q;if(q=arguments[2],!(me=L(this,Fe,Ye,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(me=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==ge&&me.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return me.attributes[q]}}},{name:function(ye){return"get".concat(ye,"Attributes")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D){var q;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var me=""+D,Fe=""+arguments[1];if(!(q=L(this,me,Fe,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(me,'" - "').concat(Fe,'").'))}else if(!(q=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==ge&&q.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return q.attributes}}},{name:function(ye){return"has".concat(ye,"Attribute")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q){var me;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+q;if(q=arguments[2],!(me=L(this,Fe,Ye,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(me=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==ge&&me.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return me.attributes.hasOwnProperty(q)}}},{name:function(ye){return"set".concat(ye,"Attribute")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q,me){var Fe;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ye=""+D,Ge=""+q;if(q=arguments[2],me=arguments[3],!(Fe=L(this,Ye,Ge,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Ye,'" - "').concat(Ge,'").'))}else if(!(Fe=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==ge&&Fe.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return Fe.attributes[q]=me,this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:q}),this}}},{name:function(ye){return"update".concat(ye,"Attribute")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q,me){var Fe;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ye=""+D,Ge=""+q;if(q=arguments[2],me=arguments[3],!(Fe=L(this,Ye,Ge,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Ye,'" - "').concat(Ge,'").'))}else if(!(Fe=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("function"!=typeof me)throw new Se("Graph.".concat(Te,": updater should be a function."));if("mixed"!==ge&&Fe.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return Fe.attributes[q]=me(Fe.attributes[q]),this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:q}),this}}},{name:function(ye){return"remove".concat(ye,"Attribute")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q){var me;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+q;if(q=arguments[2],!(me=L(this,Fe,Ye,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(me=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if("mixed"!==ge&&me.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return delete me.attributes[q],this.emit("edgeAttributesUpdated",{key:me.key,type:"remove",attributes:me.attributes,name:q}),this}}},{name:function(ye){return"replace".concat(ye,"Attributes")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q){var me;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+q;if(q=arguments[2],!(me=L(this,Fe,Ye,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(me=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if(!P(q))throw new Se("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ge&&me.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return me.attributes=q,this.emit("edgeAttributesUpdated",{key:me.key,type:"replace",attributes:me.attributes}),this}}},{name:function(ye){return"merge".concat(ye,"Attributes")},attacher:function(ye,Te,ge){ye.prototype[Te]=function(D,q){var me;if("mixed"!==this.type&&"mixed"!==ge&&ge!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+D,Ye=""+q;if(q=arguments[2],!(me=L(this,Fe,Ye,ge)))throw new Be("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(Ye,'").'))}else if(!(me=this._edges.get(D=""+D)))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" edge in the graph.'));if(!P(q))throw new Se("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ge&&me.undirected!==("undirected"===ge))throw new Be("Graph.".concat(Te,': could not find the "').concat(D,'" ').concat(ge," edge in the graph."));return E(me.attributes,q),this.emit("edgeAttributesUpdated",{key:me.key,type:"merge",attributes:me.attributes,data:q}),this}}}],ie=qe,Z=function(){var ye,Te=arguments,ge=-1;return new ie(function D(){if(!ye){if(++ge>=Te.length)return{done:!0};ye=Te[ge]}var q=ye.next();return q.done?(ye=null,D()):q})},Ve=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Je(ye,Te){for(var ge in Te)ye.push(Te[ge].key)}function ue(ye,Te){for(var ge in Te)Te[ge].forEach(function(D){return ye.push(D.key)})}function ne(ye,Te,ge){for(var D in ye)if(D!==ge){var q=ye[D];Te(q.key,q.attributes,q.source.key,q.target.key,q.source.attributes,q.target.attributes,q.undirected,q.generatedKey)}}function V(ye,Te,ge){for(var D in ye)D!==ge&&ye[D].forEach(function(q){return Te(q.key,q.attributes,q.source.key,q.target.key,q.source.attributes,q.target.attributes,q.undirected,q.generatedKey)})}function M(ye,Te,ge){for(var D in ye)if(D!==ge){var q=ye[D];if(Te(q.key,q.attributes,q.source.key,q.target.key,q.source.attributes,q.target.attributes,q.undirected,q.generatedKey))return!0}return!1}function O(ye,Te,ge){var D,q,me,Fe,Ye;for(var Ge in ye)if(Ge!==ge)for(D=ye[Ge].values();!0!==(q=D.next()).done;)if(Fe=(me=q.value).source,Te(me.key,me.attributes,Fe.key,(Ye=me.target).key,Fe.attributes,Ye.attributes,me.undirected,me.generatedKey))return!0;return!1}function he(ye,Te){var ge=Object.keys(ye),D=ge.length,q=null,me=0;return new qe(function Fe(){var Ye;if(q){var Ge=q.next();if(Ge.done)return q=null,me++,Fe();Ye=Ge.value}else{if(me>=D)return{done:!0};var Tt=ge[me];if(Tt===Te)return me++,Fe();if((Ye=ye[Tt])instanceof Set)return q=Ye.values(),Fe();me++}return{done:!1,value:[Ye.key,Ye.attributes,Ye.source.key,Ye.target.key,Ye.source.attributes,Ye.target.attributes]}})}function We(ye,Te,ge){var D=Te[ge];D&&ye.push(D.key)}function Ee(ye,Te,ge){var D=Te[ge];D&&D.forEach(function(q){return ye.push(q.key)})}function Re(ye,Te,ge){var D=ye[Te];if(D){var q=D.source,me=D.target;ge(D.key,D.attributes,q.key,me.key,q.attributes,me.attributes,D.undirected,D.generatedKey)}}function ct(ye,Te,ge){var D=ye[Te];D&&D.forEach(function(q){return ge(q.key,q.attributes,q.source.key,q.target.key,q.source.attributes,q.target.attributes,q.undirected,q.generatedKey)})}function bt(ye,Te,ge){var D=ye[Te];if(D){var q=D.source,me=D.target;return ge(D.key,D.attributes,q.key,me.key,q.attributes,me.attributes,D.undirected,D.generatedKey)}}function Dt(ye,Te,ge){var D=ye[Te];if(D){for(var q,me,Fe=D.values();!0!==(q=Fe.next()).done;)if(ge((me=q.value).key,me.attributes,me.source.key,me.target.key,me.source.attributes,me.target.attributes,me.undirected,me.generatedKey))return!0;return!1}}function _t(ye,Te){var ge=ye[Te];if(ge instanceof Set){var D=ge.values();return new qe(function(){var q=D.next();if(q.done)return q;var me=q.value;return{done:!1,value:[me.key,me.attributes,me.source.key,me.target.key,me.source.attributes,me.target.attributes]}})}return qe.of([ge.key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes])}var An=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Yi(ye,Te){if(void 0!==Te)for(var ge in Te)ye.add(ge)}function Tr(ye,Te,ge){for(var D in Te){var q=Te[D];q instanceof Set&&(q=q.values().next().value);var me=q.source,Ye=me===ye?q.target:me;ge(Ye.key,Ye.attributes)}}function rs(ye,Te,ge,D){for(var q in ge){var me=ge[q];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,Ge=Fe===Te?me.target:Fe;ye.has(Ge.key)||(ye.add(Ge.key),D(Ge.key,Ge.attributes))}}function Wo(ye,Te,ge){for(var D in Te){var q=Te[D];q instanceof Set&&(q=q.values().next().value);var me=q.source,Ye=me===ye?q.target:me;if(ge(Ye.key,Ye.attributes))return!0}return!1}function Ei(ye,Te,ge,D){for(var q in ge){var me=ge[q];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,Ge=Fe===Te?me.target:Fe;if(!ye.has(Ge.key)&&(ye.add(Ge.key),D(Ge.key,Ge.attributes)))return!0}return!1}function zr(ye,Te){var ge=Object.keys(Te),D=ge.length,q=0;return new qe(function(){if(q>=D)return{done:!0};var me=Te[ge[q++]];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,Ge=Fe===ye?me.target:Fe;return{done:!1,value:[Ge.key,Ge.attributes]}})}function ya(ye,Te,ge){var D=Object.keys(ge),q=D.length,me=0;return new qe(function Fe(){if(me>=q)return{done:!0};var Ye=ge[D[me++]];Ye instanceof Set&&(Ye=Ye.values().next().value);var Ge=Ye.source,Nt=Ge===Te?Ye.target:Ge;return ye.has(Nt.key)?Fe():(ye.add(Nt.key),{done:!1,value:[Nt.key,Nt.attributes]})})}function $e(ye,Te,ge){for(var D,q,me,Fe,Ye,Ge,Tt,Nt=Te._nodes.values(),Vt=Te.type;!0!==(D=Nt.next()).done;){if(q=D.value,"undirected"!==Vt)for(me in Fe=q.out)if(Ge=(Ye=Fe[me]).target,Tt=ge(q.key,Ge.key,q.attributes,Ge.attributes,Ye.key,Ye.attributes,Ye.undirected,Ye.generatedKey),ye&&Tt)return;if("directed"!==Vt)for(me in Fe=q.undirected)if((Ge=(Ye=Fe[me]).target).key!==me&&(Ge=Ye.source),Tt=ge(q.key,Ge.key,q.attributes,Ge.attributes,Ye.key,Ye.attributes,Ye.undirected,Ye.generatedKey),ye&&Tt)return}}function Ze(ye,Te,ge){for(var D,q,me,Fe,Ye,Ge,Tt,Nt,Vt,rn=Te._nodes.values(),wn=Te.type;!0!==(D=rn.next()).done;){if(q=D.value,"undirected"!==wn)for(me in Ge=q.out)for(Fe=Ge[me].values();!0!==(Ye=Fe.next()).done;)if(Nt=(Tt=Ye.value).target,Vt=ge(q.key,Nt.key,q.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ye&&Vt)return;if("directed"!==wn)for(me in Ge=q.undirected)for(Fe=Ge[me].values();!0!==(Ye=Fe.next()).done;)if((Nt=(Tt=Ye.value).target).key!==me&&(Nt=Tt.source),Vt=ge(q.key,Nt.key,q.attributes,Nt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),ye&&Vt)return}}function St(ye,Te){var ge={key:ye};return F(Te.attributes)||(ge.attributes=E({},Te.attributes)),ge}function zt(ye,Te){var ge={source:Te.source.key,target:Te.target.key};return Te.generatedKey||(ge.key=ye),F(Te.attributes)||(ge.attributes=E({},Te.attributes)),Te.undirected&&(ge.undirected=!0),ge}var ss=new Set(["directed","undirected","mixed"]),Zt=new Set(["domain","_events","_eventsCount","_maxListeners"]),ro={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ui(ye,Te,ge){var D=new ye.NodeDataClass(Te,ge);return ye._nodes.set(Te,D),ye.emit("nodeAdded",{key:Te,attributes:ge}),D}function yc(ye,Te,ge,D,q,me,Fe,Ye){if(!D&&"undirected"===ye.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(D&&"directed"===ye.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Ye&&!P(Ye))throw new Se("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat(Ye,'"'));if(me=""+me,Fe=""+Fe,Ye=Ye||{},!ye.allowSelfLoops&&me===Fe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(me,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Ge=ye._nodes.get(me),Tt=ye._nodes.get(Fe);if(!Ge)throw new Be("Graph.".concat(Te,': source node "').concat(me,'" not found.'));if(!Tt)throw new Be("Graph.".concat(Te,': target node "').concat(Fe,'" not found.'));var Nt={key:null,undirected:D,source:me,target:Fe,attributes:Ye};if(ge&&(q=ye._edgeKeyGenerator(Nt)),ye._edges.has(q=""+q))throw new de("Graph.".concat(Te,': the "').concat(q,'" edge already exists in the graph.'));if(!ye.multi&&(D?void 0!==Ge.undirected[Fe]:void 0!==Ge.out[Fe]))throw new de("Graph.".concat(Te,': an edge linking "').concat(me,'" to "').concat(Fe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Vt=new Ke(D,q,ge,Ge,Tt,Ye);return ye._edges.set(q,Vt),me===Fe?D?(Ge.undirectedSelfLoops++,ye._undirectedSelfLoopCount++):(Ge.directedSelfLoops++,ye._directedSelfLoopCount++):D?(Ge.undirectedDegree++,Tt.undirectedDegree++):(Ge.outDegree++,Tt.inDegree++),fe(ye,D,Vt,me,Fe,Ge,Tt),D?ye._undirectedSize++:ye._directedSize++,Nt.key=q,ye.emit("edgeAdded",Nt),q}function di(ye,Te,ge,D,q,me,Fe,Ye,Ge){if(!D&&"undirected"===ye.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(D&&"directed"===ye.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Ye)if(Ge){if("function"!=typeof Ye)throw new Se("Graph.".concat(Te,': invalid updater function. Expecting a function but got "').concat(Ye,'"'))}else if(!P(Ye))throw new Se("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat(Ye,'"'));var Tt;if(me=""+me,Fe=""+Fe,Ge&&(Tt=Ye,Ye=void 0),!ye.allowSelfLoops&&me===Fe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(me,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Nt,Vt,rn=ye._nodes.get(me),wn=ye._nodes.get(Fe);if(!ge&&(Nt=ye._edges.get(q))){if(Nt.source.key!==me||Nt.target.key!==Fe||D&&(Nt.source.key!==Fe||Nt.target.key!==me))throw new de("Graph.".concat(Te,': inconsistency detected when attempting to merge the "').concat(q,'" edge with "').concat(me,'" source & "').concat(Fe,'" target vs. ("').concat(Nt.source.key,'", "').concat(Nt.target.key,'").'));Vt=Nt}if(Vt||ye.multi||!rn||(Vt=D?rn.undirected[Fe]:rn.out[Fe]),Vt)return(Ge?Tt:Ye)?(Ge?(Vt.attributes=Tt(Vt.attributes),ye.emit("edgeAttributesUpdated",{type:"replace",key:Vt.key,attributes:Vt.attributes})):(E(Vt.attributes,Ye),ye.emit("edgeAttributesUpdated",{type:"merge",key:Vt.key,attributes:Vt.attributes,data:Ye})),Vt.key):Vt.key;Ye=Ye||{},Ge&&Tt&&(Ye=Tt(Ye));var hr={key:null,undirected:D,source:me,target:Fe,attributes:Ye};if(ge&&(q=ye._edgeKeyGenerator(hr)),ye._edges.has(q=""+q))throw new de("Graph.".concat(Te,': the "').concat(q,'" edge already exists in the graph.'));return rn||(rn=Ui(ye,me,{}),me===Fe&&(wn=rn)),wn||(wn=Ui(ye,Fe,{})),Nt=new Ke(D,q,ge,rn,wn,Ye),ye._edges.set(q,Nt),me===Fe?D?(rn.undirectedSelfLoops++,ye._undirectedSelfLoopCount++):(rn.directedSelfLoops++,ye._directedSelfLoopCount++):D?(rn.undirectedDegree++,wn.undirectedDegree++):(rn.outDegree++,wn.inDegree++),fe(ye,D,Nt,me,Fe,rn,wn),D?ye._undirectedSize++:ye._directedSize++,hr.key=q,ye.emit("edgeAdded",hr),q}var ye,hn=function(ye){function Te(D){var q;if(q=ye.call(this)||this,(D=E({},ro,D)).edgeKeyGenerator&&"function"!=typeof D.edgeKeyGenerator)throw new Se("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(D.edgeKeyGenerator,'".'));if("boolean"!=typeof D.multi)throw new Se("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(D.multi,'".'));if(!ss.has(D.type))throw new Se('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(D.type,'".'));if("boolean"!=typeof D.allowSelfLoops)throw new Se("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(D.allowSelfLoops,'".'));var me,Fe="mixed"===D.type?Ae:"directed"===D.type?nt:mt;return oe(_(q),"NodeDataClass",Fe),oe(_(q),"_attributes",{}),oe(_(q),"_nodes",new Map),oe(_(q),"_edges",new Map),oe(_(q),"_directedSize",0),oe(_(q),"_undirectedSize",0),oe(_(q),"_directedSelfLoopCount",0),oe(_(q),"_undirectedSelfLoopCount",0),oe(_(q),"_edgeKeyGenerator",D.edgeKeyGenerator||(me=0,function(){return me++})),oe(_(q),"_options",D),Zt.forEach(function(Ye){return oe(_(q),Ye,q[Ye])}),x(_(q),"order",function(){return q._nodes.size}),x(_(q),"size",function(){return q._edges.size}),x(_(q),"directedSize",function(){return q._directedSize}),x(_(q),"undirectedSize",function(){return q._undirectedSize}),x(_(q),"selfLoopCount",function(){return q._directedSelfLoopCount+q._undirectedSelfLoopCount}),x(_(q),"directedSelfLoopCount",function(){return q._directedSelfLoopCount}),x(_(q),"undirectedSelfLoopCount",function(){return q._undirectedSelfLoopCount}),x(_(q),"multi",q._options.multi),x(_(q),"type",q._options.type),x(_(q),"allowSelfLoops",q._options.allowSelfLoops),x(_(q),"implementation",function(){return"graphology"}),q}S(Te,ye);var ge=Te.prototype;return ge.hasNode=function(D){return this._nodes.has(""+D)},ge.hasDirectedEdge=function(D,q){if("undirected"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+D);return!!Fe&&!Fe.undirected}if(2===arguments.length){q=""+q;var Ye=this._nodes.get(D=""+D);if(!Ye)return!1;var Ge=Ye.out[q];return!(!Ge||this.multi&&!Ge.size)}throw new Se("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ge.hasUndirectedEdge=function(D,q){if("directed"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+D);return!!Fe&&Fe.undirected}if(2===arguments.length){q=""+q;var Ye=this._nodes.get(D=""+D);if(!Ye)return!1;var Ge=Ye.undirected[q];return!(!Ge||this.multi&&!Ge.size)}throw new Se("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ge.hasEdge=function(D,q){if(1===arguments.length)return this._edges.has(""+D);if(2===arguments.length){q=""+q;var Fe=this._nodes.get(D=""+D);if(!Fe)return!1;var Ye=void 0!==Fe.out&&Fe.out[q];return Ye||(Ye=void 0!==Fe.undirected&&Fe.undirected[q]),!(!Ye||this.multi&&!Ye.size)}throw new Se("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ge.directedEdge=function(D,q){if("undirected"!==this.type){if(D=""+D,q=""+q,this.multi)throw new de("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var me=this._nodes.get(D);if(!me)throw new Be('Graph.directedEdge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(q))throw new Be('Graph.directedEdge: could not find the "'.concat(q,'" target node in the graph.'));var Fe=me.out&&me.out[q]||void 0;return Fe?Fe.key:void 0}},ge.undirectedEdge=function(D,q){if("directed"!==this.type){if(D=""+D,q=""+q,this.multi)throw new de("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var me=this._nodes.get(D);if(!me)throw new Be('Graph.undirectedEdge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(q))throw new Be('Graph.undirectedEdge: could not find the "'.concat(q,'" target node in the graph.'));var Fe=me.undirected&&me.undirected[q]||void 0;return Fe?Fe.key:void 0}},ge.edge=function(D,q){if(this.multi)throw new de("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");q=""+q;var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.edge: could not find the "'.concat(D,'" source node in the graph.'));if(!this._nodes.has(q))throw new Be('Graph.edge: could not find the "'.concat(q,'" target node in the graph.'));var Fe=me.out&&me.out[q]||me.undirected&&me.undirected[q]||void 0;if(Fe)return Fe.key},ge.inDegree=function(D){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof q)throw new Se('Graph.inDegree: Expecting a boolean but got "'.concat(q,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.inDegree: could not find the "'.concat(D,'" node in the graph.'));return"undirected"===this.type?0:me.inDegree+(q?me.directedSelfLoops:0)},ge.outDegree=function(D){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof q)throw new Se('Graph.outDegree: Expecting a boolean but got "'.concat(q,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.outDegree: could not find the "'.concat(D,'" node in the graph.'));return"undirected"===this.type?0:me.outDegree+(q?me.directedSelfLoops:0)},ge.directedDegree=function(D){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof q)throw new Se('Graph.directedDegree: Expecting a boolean but got "'.concat(q,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.directedDegree: could not find the "'.concat(D,'" node in the graph.'));if("undirected"===this.type)return 0;var Fe=q?me.directedSelfLoops:0;return me.inDegree+Fe+(me.outDegree+Fe)},ge.undirectedDegree=function(D){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof q)throw new Se('Graph.undirectedDegree: Expecting a boolean but got "'.concat(q,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.undirectedDegree: could not find the "'.concat(D,'" node in the graph.'));return"directed"===this.type?0:me.undirectedDegree+2*(q?me.undirectedSelfLoops:0)},ge.degree=function(D){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof q)throw new Se('Graph.degree: Expecting a boolean but got "'.concat(q,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.degree: could not find the "'.concat(D,'" node in the graph.'));var Fe=0,Ye=0;return"directed"!==this.type&&(q&&(Ye=me.undirectedSelfLoops),Fe+=me.undirectedDegree+2*Ye),"undirected"!==this.type&&(q&&(Ye=me.directedSelfLoops),Fe+=me.inDegree+me.outDegree+2*Ye),Fe},ge.source=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.source: could not find the "'.concat(D,'" edge in the graph.'));return q.source.key},ge.target=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.target: could not find the "'.concat(D,'" edge in the graph.'));return q.target.key},ge.extremities=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.extremities: could not find the "'.concat(D,'" edge in the graph.'));return[q.source.key,q.target.key]},ge.opposite=function(D,q){D=""+D;var me=this._edges.get(q=""+q);if(!me)throw new Be('Graph.opposite: could not find the "'.concat(q,'" edge in the graph.'));var Fe=me.source.key,Ye=me.target.key;if(D!==Fe&&D!==Ye)throw new Be('Graph.opposite: the "'.concat(D,'" node is not attached to the "').concat(q,'" edge (').concat(Fe,", ").concat(Ye,")."));return D===Fe?Ye:Fe},ge.hasExtremity=function(D,q){q=""+q;var me=this._edges.get(D=""+D);if(!me)throw new Be('Graph.hasExtremity: could not find the "'.concat(D,'" edge in the graph.'));return me.source.key===q||me.target.key===q},ge.isUndirected=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.isUndirected: could not find the "'.concat(D,'" edge in the graph.'));return q.undirected},ge.isDirected=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.isDirected: could not find the "'.concat(D,'" edge in the graph.'));return!q.undirected},ge.isSelfLoop=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.isSelfLoop: could not find the "'.concat(D,'" edge in the graph.'));return q.source===q.target},ge.hasGeneratedKey=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.hasGeneratedKey: could not find the "'.concat(D,'" edge in the graph.'));return q.generatedKey},ge.addNode=function(D,q){return function(me,Fe,Ye){if(Ye&&!P(Ye))throw new Se('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Ye,'"'));if(Ye=Ye||{},me._nodes.has(Fe=""+Fe))throw new de('Graph.addNode: the "'.concat(Fe,'" node already exist in the graph.'));var Ge=new me.NodeDataClass(Fe,Ye);return me._nodes.set(Fe,Ge),me.emit("nodeAdded",{key:Fe,attributes:Ye}),Ge}(this,D,q).key},ge.mergeNode=function(D,q){if(q&&!P(q))throw new Se('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(q,'"'));q=q||{};var me=this._nodes.get(D=""+D);return me?(q&&(E(me.attributes,q),this.emit("nodeAttributesUpdated",{type:"merge",key:D,attributes:me.attributes,data:q})),D):(me=new this.NodeDataClass(D,q),this._nodes.set(D,me),this.emit("nodeAdded",{key:D,attributes:q}),D)},ge.updateNode=function(D,q){if(q&&"function"!=typeof q)throw new Se('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(q,'"'));var me=this._nodes.get(D=""+D);if(me)return q&&(me.attributes=q(me.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:D,attributes:me.attributes})),D;var Ye=q?q({}):{};return me=new this.NodeDataClass(D,Ye),this._nodes.set(D,me),this.emit("nodeAdded",{key:D,attributes:Ye}),D},ge.dropNode=function(D){var q=this,me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.dropNode: could not find the "'.concat(D,'" node in the graph.'));this.forEachEdge(D,function(Fe){q.dropEdge(Fe)}),this._nodes.delete(D),this.emit("nodeDropped",{key:D,attributes:me.attributes})},ge.dropEdge=function(D){var q;if(arguments.length>1){var me=""+arguments[0],Fe=""+arguments[1];if(!(q=L(this,me,Fe,this.type)))throw new Be('Graph.dropEdge: could not find the "'.concat(me,'" -> "').concat(Fe,'" edge in the graph.'))}else if(!(q=this._edges.get(D=""+D)))throw new Be('Graph.dropEdge: could not find the "'.concat(D,'" edge in the graph.'));this._edges.delete(q.key);var Ge=q.source,Tt=q.target,Nt=q.attributes,Vt=q.undirected;return Ge===Tt?Vt?(Ge.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(Ge.directedSelfLoops--,this._directedSelfLoopCount--):Vt?(Ge.undirectedDegree--,Tt.undirectedDegree--):(Ge.outDegree--,Tt.inDegree--),function R(ye,Te,ge){var D=ye.multi,q=ge.source,me=ge.target,Fe=q.key,Ye=me.key,Ge=q[Te?"undirected":"out"],Tt=Te?"undirected":"in";if(Ye in Ge)if(D){var Nt=Ge[Ye];1===Nt.size?(delete Ge[Ye],delete me[Tt][Fe]):Nt.delete(ge)}else delete Ge[Ye];D||delete me[Tt][Fe]}(this,Vt,q),Vt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:D,attributes:Nt,source:Ge.key,target:Tt.key,undirected:Vt}),this},ge.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ge.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ge.getAttribute=function(D){return this._attributes[D]},ge.getAttributes=function(){return this._attributes},ge.hasAttribute=function(D){return this._attributes.hasOwnProperty(D)},ge.setAttribute=function(D,q){return this._attributes[D]=q,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:D}),this},ge.updateAttribute=function(D,q){if("function"!=typeof q)throw new Se("Graph.updateAttribute: updater should be a function.");return this._attributes[D]=q(this._attributes[D]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:D}),this},ge.removeAttribute=function(D){return delete this._attributes[D],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:D}),this},ge.replaceAttributes=function(D){if(!P(D))throw new Se("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=D,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ge.mergeAttributes=function(D){if(!P(D))throw new Se("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,D),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:D}),this},ge.getNodeAttribute=function(D,q){var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.getNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return me.attributes[q]},ge.getNodeAttributes=function(D){var q=this._nodes.get(D=""+D);if(!q)throw new Be('Graph.getNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));return q.attributes},ge.hasNodeAttribute=function(D,q){var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.hasNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return me.attributes.hasOwnProperty(q)},ge.setNodeAttribute=function(D,q,me){var Fe=this._nodes.get(D=""+D);if(!Fe)throw new Be('Graph.setNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));if(arguments.length<3)throw new Se("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Fe.attributes[q]=me,this.emit("nodeAttributesUpdated",{key:D,type:"set",attributes:Fe.attributes,name:q}),this},ge.updateNodeAttribute=function(D,q,me){var Fe=this._nodes.get(D=""+D);if(!Fe)throw new Be('Graph.updateNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));if(arguments.length<3)throw new Se("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof me)throw new Se("Graph.updateAttribute: updater should be a function.");var Ye=Fe.attributes,Ge=me(Ye[q]);return Ye[q]=Ge,this.emit("nodeAttributesUpdated",{key:D,type:"set",attributes:Fe.attributes,name:q}),this},ge.removeNodeAttribute=function(D,q){var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.hasNodeAttribute: could not find the "'.concat(D,'" node in the graph.'));return delete me.attributes[q],this.emit("nodeAttributesUpdated",{key:D,type:"remove",attributes:me.attributes,name:q}),this},ge.replaceNodeAttributes=function(D,q){var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.replaceNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));if(!P(q))throw new Se("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return me.attributes=q,this.emit("nodeAttributesUpdated",{key:D,type:"replace",attributes:me.attributes}),this},ge.mergeNodeAttributes=function(D,q){var me=this._nodes.get(D=""+D);if(!me)throw new Be('Graph.mergeNodeAttributes: could not find the "'.concat(D,'" node in the graph.'));if(!P(q))throw new Se("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return E(me.attributes,q),this.emit("nodeAttributesUpdated",{key:D,type:"merge",attributes:me.attributes,data:q}),this},ge.updateEachNodeAttributes=function(D,q){if("function"!=typeof D)throw new Se("Graph.updateEachNodeAttributes: expecting an updater function.");if(q&&!k(q))throw new Se("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var me,Fe,Ye=this._nodes.values();!0!==(me=Ye.next()).done;)(Fe=me.value).attributes=D(Fe.key,Fe.attributes);this.emit("eachNodeAttributesUpdated",{hints:q||null})},ge.updateEachEdgeAttributes=function(D,q){if("function"!=typeof D)throw new Se("Graph.updateEachEdgeAttributes: expecting an updater function.");if(q&&!k(q))throw new Se("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var me,Fe,Ye=this._edges.values();!0!==(me=Ye.next()).done;)(Fe=me.value).attributes=D(Fe.key,Fe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:q||null})},ge.forEach=function(D){if("function"!=typeof D)throw new Se("Graph.forEach: expecting a callback.");this.multi?Ze(!1,this,D):$e(!1,this,D)},ge.forEachUntil=function(D){if("function"!=typeof D)throw new Se("Graph.forEach: expecting a callback.");this.multi?Ze(!0,this,D):$e(!0,this,D)},ge.adjacency=function(){return this.multi?(Ge=(D=this)._nodes.values(),Tt=D.type,Nt="outer",Vt=null,new qe(function rn(){var wn;if("outer"===Nt)return!0===(wn=Ge.next()).done?wn:(q=wn.value,Nt="directed",rn());if("directed"===Nt)return"undirected"===Tt?(Nt="undirected",rn()):(Fe=q.out,me=Object.keys(q.out),Ye=0,Nt="inner-directed",rn());if("undirected"===Nt){if("directed"===Tt)return Nt="outer",rn();Fe=q.undirected,me=Object.keys(q.undirected),Ye=0,Nt="inner-undirected"}if(!Vt&&Ye>=me.length)return Nt="inner-undirected"===Nt?"outer":"undirected",rn();if(!Vt){var dr=me[Ye++];return Vt=Fe[dr].values(),rn()}if((wn=Vt.next()).done)return Vt=null,rn();var hr=wn.value,Ns=hr.target;return"inner-undirected"===Nt&&Ns.key===q.key&&(Ns=hr.source),{done:!1,value:[q.key,Ns.key,q.attributes,Ns.attributes,hr.key,hr.attributes]}})):(Sn=(rn=this)._nodes.values(),Gn=rn.type,os="outer",new qe(function zs(){var rl;if("outer"===os)return!0===(rl=Sn.next()).done?rl:(wn=rl.value,os="directed",zs());if("directed"===os)return"undirected"===Gn?(os="undirected",zs()):(hr=wn.out,dr=Object.keys(wn.out),Ns=0,os="inner-directed",zs());if("undirected"===os){if("directed"===Gn)return os="outer",zs();hr=wn.undirected,dr=Object.keys(wn.undirected),Ns=0,os="inner-undirected"}if(Ns>=dr.length)return os="inner-undirected"===os?"outer":"undirected",zs();var hd=dr[Ns++],Yo=hr[hd],ba=Yo.target;return"inner-undirected"===os&&ba.key===wn.key&&(ba=Yo.source),{done:!1,value:[wn.key,ba.key,wn.attributes,ba.attributes,Yo.key,Yo.attributes]}}));var rn,wn,dr,hr,Ns,Sn,Gn,os,D,q,me,Fe,Ye,Ge,Tt,Nt,Vt},ge.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ce(this._nodes.keys(),this._nodes.size)},ge.forEachNode=function(D){if("function"!=typeof D)throw new Se("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(q,me){D(me,q.attributes)})},ge.forEachNodeUntil=function(D){if("function"!=typeof D)throw new Se("Graph.forEachNode: expecting a callback.");for(var q,me,Fe=this._nodes.values();!0!==(q=Fe.next())&&!D((me=q.value).key,me.attributes););},ge.nodeEntries=function(){var D=this._nodes.values();return new qe(function(){var q=D.next();if(q.done)return q;var me=q.value;return{value:[me.key,me.attributes],done:!1}})},ge.exportNode=function(D){var q=this._nodes.get(D=""+D);if(!q)throw new Be('Graph.exportNode: could not find the "'.concat(D,'" node in the graph.'));return St(D,q)},ge.exportEdge=function(D){var q=this._edges.get(D=""+D);if(!q)throw new Be('Graph.exportEdge: could not find the "'.concat(D,'" edge in the graph.'));return zt(D,q)},ge.export=function(){var D=new Array(this._nodes.size),q=0;this._nodes.forEach(function(Fe,Ye){D[q++]=St(Ye,Fe)});var me=new Array(this._edges.size);return q=0,this._edges.forEach(function(Fe,Ye){me[q++]=zt(Ye,Fe)}),{attributes:this.getAttributes(),nodes:D,edges:me,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ge.importNode=function(D){var q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],me=function nn(ye){return P(ye)?"key"in ye?!("attributes"in ye)||P(ye.attributes)&&null!==ye.attributes?null:"invalid-attributes":"no-key":"not-object"}(D);if(me){if("not-object"===me)throw new Se('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===me)throw new Se("Graph.importNode: no key provided.");if("invalid-attributes"===me)throw new Se("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Fe=D.key,Ye=D.attributes,Ge=void 0===Ye?{}:Ye;return q?this.mergeNode(Fe,Ge):this.addNode(Fe,Ge),this},ge.importEdge=function(D){var q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],me=function ur(ye){return P(ye)?"source"in ye?"target"in ye?!("attributes"in ye)||P(ye.attributes)&&null!==ye.attributes?"undirected"in ye&&"boolean"!=typeof ye.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(D);if(me){if("not-object"===me)throw new Se('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===me)throw new Se("Graph.importEdge: missing souce.");if("no-target"===me)throw new Se("Graph.importEdge: missing target.");if("invalid-attributes"===me)throw new Se("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===me)throw new Se("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Fe=D.source,Ye=D.target,Ge=D.attributes,Tt=void 0===Ge?{}:Ge,Nt=D.undirected,Vt=void 0!==Nt&&Nt;return"key"in D?(q?Vt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Vt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,D.key,Fe,Ye,Tt):(q?Vt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Vt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Fe,Ye,Tt),this},ge.import=function(D){var q,me,Fe,Ye=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function G(ye){return null!==ye&&"object"===_e(ye)&&"function"==typeof ye.addUndirectedEdgeWithKey&&"function"==typeof ye.dropNode}(D))return this.import(D.export(),Ye),this;if(!P(D))throw new Se("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(D.attributes){if(!P(D.attributes))throw new Se("Graph.import: invalid attributes. Expecting a plain object.");Ye?this.mergeAttributes(D.attributes):this.replaceAttributes(D.attributes)}if(D.nodes){if(Fe=D.nodes,!Array.isArray(Fe))throw new Se("Graph.import: invalid nodes. Expecting an array.");for(q=0,me=Fe.length;q<me;q++)this.importNode(Fe[q],Ye)}if(D.edges){if(Fe=D.edges,!Array.isArray(Fe))throw new Se("Graph.import: invalid edges. Expecting an array.");for(q=0,me=Fe.length;q<me;q++)this.importEdge(Fe[q],Ye)}return this},ge.nullCopy=function(D){return new Te(E({},this._options,D))},ge.emptyCopy=function(D){var q=this.nullCopy(D);return this._nodes.forEach(function(me,Fe){var Ye=E({},me.attributes);me=new q.NodeDataClass(Fe,Ye),q._nodes.set(Fe,me)}),q},ge.copy=function(){var D=new Te(this._options);return D.import(this),D},ge.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(D){return D.upgradeToMixed()}),this._options.type="mixed",x(this,"type",this._options.type),oe(this,"NodeDataClass",Ae)),this},ge.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,x(this,"multi",!0),(D=this)._nodes.forEach(function(q,me){if(q.out)for(var Fe in q.out){var Ye=new Set;Ye.add(q.out[Fe]),q.out[Fe]=Ye,D._nodes.get(Fe).in[me]=Ye}if(q.undirected)for(var Ge in q.undirected)if(!(Ge>me)){var Tt=new Set;Tt.add(q.undirected[Ge]),q.undirected[Ge]=Tt,D._nodes.get(Ge).undirected[me]=Tt}})),this;var D},ge.clearIndex=function(){return this._nodes.forEach(function(D){void 0!==D.in&&(D.in={},D.out={}),void 0!==D.undirected&&(D.undirected={})}),this},ge.toJSON=function(){return this.export()},ge.toString=function(){return"[object Graph]"},ge.inspect=function(){var D=this,q={};this._nodes.forEach(function(Tt,Nt){q[Nt]=Tt.attributes});var me={},Fe={};this._edges.forEach(function(Tt,Nt){var Vt=Tt.undirected?"--":"->",rn="",wn="(".concat(Tt.source.key,")").concat(Vt,"(").concat(Tt.target.key,")");Tt.generatedKey?D.multi&&(void 0===Fe[wn]?Fe[wn]=0:Fe[wn]++,rn+="".concat(Fe[wn],". ")):rn+="[".concat(Nt,"]: "),me[rn+=wn]=Tt.attributes});var Ye={};for(var Ge in this)this.hasOwnProperty(Ge)&&!Zt.has(Ge)&&"function"!=typeof this[Ge]&&(Ye[Ge]=this[Ge]);return Ye.attributes=this._attributes,Ye.nodes=q,Ye.edges=me,oe(Ye,"constructor",this.constructor),Ye},Te}(Y.exports.EventEmitter);typeof Symbol<"u"&&(hn.prototype[Symbol.for("nodejs.util.inspect.custom")]=hn.prototype.inspect),[{name:function(ye){return"".concat(ye,"Edge")},generateKey:!0},{name:function(ye){return"".concat(ye,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ye){return"".concat(ye,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ye){return"".concat(ye,"EdgeWithKey")}},{name:function(ye){return"".concat(ye,"DirectedEdgeWithKey")},type:"directed"},{name:function(ye){return"".concat(ye,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ye){["add","merge","update"].forEach(function(Te){var ge=ye.name(Te),D="add"===Te?yc:di;hn.prototype[ge]=ye.generateKey?function(q,me,Fe){return D(this,ge,!0,"undirected"===(ye.type||this.type),null,q,me,Fe,"update"===Te)}:function(q,me,Fe,Ye){return D(this,ge,!1,"undirected"===(ye.type||this.type),q,me,Fe,Ye,"update"===Te)}})}),typeof Symbol<"u"&&(hn.prototype[Symbol.iterator]=hn.prototype.adjacency),ye=hn,A.forEach(function(Te){var ge=Te.name,D=Te.attacher;D(ye,ge("Edge"),"mixed"),D(ye,ge("DirectedEdge"),"directed"),D(ye,ge("UndirectedEdge"),"undirected")}),function(ye){Ve.forEach(function(Te){var D,q,me,Fe;me=(D=Te).type,Fe=D.direction,ye.prototype[q=D.name]=function(Ye,Ge){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return[];if(!arguments.length)return function Gt(ye,Te){if(0===ye.size)return[];if("mixed"===Te||Te===ye.type)return"function"==typeof Array.from?Array.from(ye._edges.keys()):Ce(ye._edges.keys(),ye._edges.size);for(var ge,D,me=new Array("undirected"===Te?ye.undirectedSize:ye.directedSize),Fe="undirected"===Te,Ye=ye._edges.values(),Ge=0;!0!==(ge=Ye.next()).done;)(D=ge.value).undirected===Fe&&(me[Ge++]=D.key);return me}(this,me);if(1===arguments.length){var Tt=this._nodes.get(Ye=""+Ye);if(void 0===Tt)throw new Be("Graph.".concat(q,': could not find the "').concat(Ye,'" node in the graph.'));return function Le(ye,Te,ge,D){var q=[],me=ye?ue:Je;return"undirected"!==Te&&("out"!==ge&&me(q,D.in),"in"!==ge&&me(q,D.out),!ge&&D.directedSelfLoops>0&&q.splice(q.lastIndexOf(D.key),1)),"directed"!==Te&&me(q,D.undirected),q}(this.multi,"mixed"===me?this.type:me,Fe,Tt)}if(2===arguments.length){Ge=""+Ge;var Nt=this._nodes.get(Ye=""+Ye);if(!Nt)throw new Be("Graph.".concat(q,':  could not find the "').concat(Ye,'" source node in the graph.'));if(!this._nodes.has(Ge))throw new Be("Graph.".concat(q,':  could not find the "').concat(Ge,'" target node in the graph.'));return function tn(ye,Te,ge,D,q){var me=Te?Ee:We,Fe=[];return"undirected"!==ye&&(void 0!==D.in&&"out"!==ge&&me(Fe,D.in,q),void 0!==D.out&&"in"!==ge&&me(Fe,D.out,q),!ge&&D.directedSelfLoops>0&&Fe.splice(Fe.lastIndexOf(D.key),1)),"directed"!==ye&&void 0!==D.undirected&&me(Fe,D.undirected,q),Fe}(me,this.multi,Fe,Nt,Ge)}throw new Se("Graph.".concat(q,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ge,D){var q=D.name,me=D.type,Fe=D.direction,Ye="forEach"+q[0].toUpperCase()+q.slice(1,-1);ge.prototype[Ye]=function(Ge,Tt,Nt){if("mixed"===me||"mixed"===this.type||me===this.type){if(1===arguments.length)return function pe(ye,Te,ge){if(0!==ye.size)for(var D,q,me="mixed"!==Te&&Te!==ye.type,Fe="undirected"===Te,Ye=ye._edges.values();!0!==(D=Ye.next()).done;)if(q=D.value,!me||q.undirected===Fe){var Vt=q.source,rn=q.target;ge(q.key,q.attributes,Vt.key,rn.key,Vt.attributes,rn.attributes,q.undirected,q.generatedKey)}}(this,me,Nt=Ge);if(2===arguments.length){Nt=Tt;var Vt=this._nodes.get(Ge=""+Ge);if(void 0===Vt)throw new Be("Graph.".concat(Ye,': could not find the "').concat(Ge,'" node in the graph.'));return function it(ye,Te,ge,D,q){var me=ye?V:ne;"undirected"!==Te&&("out"!==ge&&me(D.in,q),"in"!==ge&&me(D.out,q,ge?null:D.key)),"directed"!==Te&&me(D.undirected,q)}(this.multi,"mixed"===me?this.type:me,Fe,Vt,Nt)}if(3===arguments.length){Tt=""+Tt;var rn=this._nodes.get(Ge=""+Ge);if(!rn)throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Ge,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Pn(ye,Te,ge,D,q,me){var Fe=Te?ct:Re;"undirected"!==ye&&(void 0!==D.in&&"out"!==ge&&Fe(D.in,q,me),D.key!==q&&void 0!==D.out&&"in"!==ge&&Fe(D.out,q,me)),"directed"!==ye&&void 0!==D.undirected&&Fe(D.undirected,q,me)}(me,this.multi,Fe,rn,Tt,Nt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ye,Te),function(ge,D){var q=D.name,me=D.type,Fe=D.direction,Ye="forEach"+q[0].toUpperCase()+q.slice(1,-1)+"Until";ge.prototype[Ye]=function(Ge,Tt,Nt){if("mixed"===me||"mixed"===this.type||me===this.type){if(1===arguments.length)return function H(ye,Te,ge){if(0!==ye.size)for(var D,q,me="mixed"!==Te&&Te!==ye.type,Fe="undirected"===Te,Ye=ye._edges.values();!0!==(D=Ye.next()).done;)if(q=D.value,!me||q.undirected===Fe){var Vt=q.source,rn=q.target;if(ge(q.key,q.attributes,Vt.key,rn.key,Vt.attributes,rn.attributes,q.undirected,q.generatedKey))break}}(this,me,Nt=Ge);if(2===arguments.length){Nt=Tt;var Vt=this._nodes.get(Ge=""+Ge);if(void 0===Vt)throw new Be("Graph.".concat(Ye,': could not find the "').concat(Ge,'" node in the graph.'));return function ut(ye,Te,ge,D,q){var me=ye?O:M;"undirected"!==Te&&("out"!==ge&&me(D.in,q)||"in"!==ge&&me(D.out,q,ge?null:D.key))||"directed"===Te||me(D.undirected,q)}(this.multi,"mixed"===me?this.type:me,Fe,Vt,Nt)}if(3===arguments.length){Tt=""+Tt;var rn=this._nodes.get(Ge=""+Ge);if(!rn)throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Ge,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function kn(ye,Te,ge,D,q,me){var Fe=Te?Dt:bt;"undirected"!==ye&&(void 0!==D.in&&"out"!==ge&&Fe(D.in,q,me)||D.key!==q&&void 0!==D.out&&"in"!==ge&&Fe(D.out,q,me,ge?null:D.key))||"directed"===ye||void 0===D.undirected||Fe(D.undirected,q,me)}(me,this.multi,Fe,rn,Tt,Nt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ye,Te),function(ge,D){var me=D.type,Fe=D.direction,Ye=D.name.slice(0,-1)+"Entries";ge.prototype[Ye]=function(Ge,Tt){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return qe.empty();if(!arguments.length)return function te(ye,Te){if(0===ye.size)return qe.empty();var ge="mixed"!==Te&&Te!==ye.type,D="undirected"===Te,q=ye._edges.values();return new qe(function(){for(var me,Fe;;){if((me=q.next()).done)return me;if(Fe=me.value,!ge||Fe.undirected===D)break}return{value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes],done:!1}})}(this,me);if(1===arguments.length){var Nt=this._nodes.get(Ge=""+Ge);if(!Nt)throw new Be("Graph.".concat(Ye,': could not find the "').concat(Ge,'" node in the graph.'));return function Et(ye,Te,ge){var D=qe.empty();return"undirected"!==ye&&("out"!==Te&&void 0!==ge.in&&(D=Z(D,he(ge.in))),"in"!==Te&&void 0!==ge.out&&(D=Z(D,he(ge.out,Te?null:ge.key)))),"directed"!==ye&&void 0!==ge.undirected&&(D=Z(D,he(ge.undirected))),D}(me,Fe,Nt)}if(2===arguments.length){Tt=""+Tt;var Vt=this._nodes.get(Ge=""+Ge);if(!Vt)throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Ge,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat(Ye,':  could not find the "').concat(Tt,'" target node in the graph.'));return function vn(ye,Te,ge,D){var q=qe.empty();return"undirected"!==ye&&(void 0!==ge.in&&"out"!==Te&&D in ge.in&&(q=Z(q,_t(ge.in,D))),void 0!==ge.out&&"in"!==Te&&D in ge.out&&(q=Z(q,_t(ge.out,D)))),"directed"!==ye&&void 0!==ge.undirected&&D in ge.undirected&&(q=Z(q,_t(ge.undirected,D))),q}(me,Fe,Vt,Tt)}throw new Se("Graph.".concat(Ye,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ye,Te)})}(hn),function(ye){An.forEach(function(Te){var D,q,me,Fe;me=(D=Te).type,Fe=D.direction,ye.prototype[q=D.name]=function(Ye){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return[];if(2===arguments.length){var Ge=""+arguments[0],Tt=""+arguments[1];if(!this._nodes.has(Ge))throw new Be("Graph.".concat(q,': could not find the "').concat(Ge,'" node in the graph.'));if(!this._nodes.has(Tt))throw new Be("Graph.".concat(q,': could not find the "').concat(Tt,'" node in the graph.'));return function za(ye,Te,ge,D,q){var me=ye._nodes.get(D);if("undirected"!==Te){if("out"!==ge&&void 0!==me.in)for(var Fe in me.in)if(Fe===q)return!0;if("in"!==ge&&void 0!==me.out)for(var Ye in me.out)if(Ye===q)return!0}if("directed"!==Te&&void 0!==me.undirected)for(var Ge in me.undirected)if(Ge===q)return!0;return!1}(this,me,Fe,Ge,Tt)}if(1===arguments.length){var Nt=this._nodes.get(Ye=""+Ye);if(void 0===Nt)throw new Be("Graph.".concat(q,': could not find the "').concat(Ye,'" node in the graph.'));return function io(ye,Te,ge){if("mixed"!==ye){if("undirected"===ye)return Object.keys(ge.undirected);if("string"==typeof Te)return Object.keys(ge[Te])}var D=new Set;return"undirected"!==ye&&("out"!==Te&&Yi(D,ge.in),"in"!==Te&&Yi(D,ge.out)),"directed"!==ye&&Yi(D,ge.undirected),Ce(D.values(),D.size)}("mixed"===me?this.type:me,Fe,Nt)}throw new Se("Graph.".concat(q,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function il(ye,Te){var ge=Te.name,D=Te.type,q=Te.direction,me="forEach"+ge[0].toUpperCase()+ge.slice(1,-1);ye.prototype[me]=function(Fe,Ye){if("mixed"===D||"mixed"===this.type||D===this.type){var Ge=this._nodes.get(Fe=""+Fe);if(void 0===Ge)throw new Be("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));!function(Tt,Nt,Vt,rn){if("mixed"!==Tt){if("undirected"===Tt)return Tr(Vt,Vt.undirected,rn);if("string"==typeof Nt)return Tr(Vt,Vt[Nt],rn)}var wn=new Set;"undirected"!==Tt&&("out"!==Nt&&rs(wn,Vt,Vt.in,rn),"in"!==Nt&&rs(wn,Vt,Vt.out,rn)),"directed"!==Tt&&rs(wn,Vt,Vt.undirected,rn)}("mixed"===D?this.type:D,q,Ge,Ye)}}}(ye,Te),function va(ye,Te){var ge=Te.name,D=Te.type,q=Te.direction,me="forEach"+ge[0].toUpperCase()+ge.slice(1,-1)+"Until";ye.prototype[me]=function(Fe,Ye){if("mixed"===D||"mixed"===this.type||D===this.type){var Ge=this._nodes.get(Fe=""+Fe);if(void 0===Ge)throw new Be("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));!function(Tt,Nt,Vt,rn){if("mixed"!==Tt){if("undirected"===Tt)return Wo(Vt,Vt.undirected,rn);if("string"==typeof Nt)return Wo(Vt,Vt[Nt],rn)}var wn=new Set;"undirected"!==Tt&&("out"!==Nt&&Ei(wn,Vt,Vt.in,rn)||"in"!==Nt&&Ei(wn,Vt,Vt.out,rn))||"directed"===Tt||Ei(wn,Vt,Vt.undirected,rn)}("mixed"===D?this.type:D,q,Ge,Ye)}}}(ye,Te),function Hs(ye,Te){var D=Te.type,q=Te.direction,me=Te.name.slice(0,-1)+"Entries";ye.prototype[me]=function(Fe){if("mixed"!==D&&"mixed"!==this.type&&D!==this.type)return qe.empty();var Ye=this._nodes.get(Fe=""+Fe);if(void 0===Ye)throw new Be("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));return function(Ge,Tt,Nt){if("mixed"!==Ge){if("undirected"===Ge)return zr(Nt,Nt.undirected);if("string"==typeof Tt)return zr(Nt,Nt[Tt])}var Vt=qe.empty(),rn=new Set;return"undirected"!==Ge&&("out"!==Tt&&(Vt=Z(Vt,ya(rn,Nt,Nt.in))),"in"!==Tt&&(Vt=Z(Vt,ya(rn,Nt,Nt.out)))),"directed"!==Ge&&(Vt=Z(Vt,ya(rn,Nt,Nt.undirected))),Vt}("mixed"===D?this.type:D,q,Ye)}}(ye,Te)})}(hn);var $o=function(ye){function Te(ge){var D=E({type:"directed"},ge);if("multi"in D&&!1!==D.multi)throw new Se("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==D.type)throw new Se('DirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(hn),$t=function(ye){function Te(ge){var D=E({type:"undirected"},ge);if("multi"in D&&!1!==D.multi)throw new Se("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==D.type)throw new Se('UndirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(hn),Vn=function(ye){function Te(ge){var D=E({multi:!0},ge);if("multi"in D&&!0!==D.multi)throw new Se("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ye.call(this,D)||this}return S(Te,ye),Te}(hn),Gr=function(ye){function Te(ge){var D=E({type:"directed",multi:!0},ge);if("multi"in D&&!0!==D.multi)throw new Se("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==D.type)throw new Se('MultiDirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(hn),ri=function(ye){function Te(ge){var D=E({type:"undirected",multi:!0},ge);if("multi"in D&&!0!==D.multi)throw new Se("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==D.type)throw new Se('MultiUndirectedGraph.from: inconsistent "'+D.type+'" type in given options!');return ye.call(this,D)||this}return S(Te,ye),Te}(hn);function Vi(ye){ye.from=function(Te,ge){var D=E({},Te.options,ge),q=new ye(D);return q.import(Te),q}}return Vi(hn),Vi($o),Vi($t),Vi(Vn),Vi(Gr),Vi(ri),hn.Graph=hn,hn.DirectedGraph=$o,hn.UndirectedGraph=$t,hn.MultiGraph=Vn,hn.MultiDirectedGraph=Gr,hn.MultiUndirectedGraph=ri,hn.InvalidArgumentsGraphError=Se,hn.NotFoundGraphError=Be,hn.UsageGraphError=de,hn}()},7271:(Ue,_e,S)=>{var Q;!function(C,$,z,X){"use strict";var Y,_=["","webkit","Moz","MS","ms","o"],E=$.createElement("div"),L="function",G=Math.round,P=Math.abs,F=Date.now;function oe(De,ze,tt){return setTimeout(B(De,tt),ze)}function x(De,ze,tt){return!!Array.isArray(De)&&(k(De,tt[ze],tt),!0)}function k(De,ze,tt){var wt;if(De)if(De.forEach)De.forEach(ze,tt);else if(De.length!==X)for(wt=0;wt<De.length;)ze.call(tt,De[wt],wt,De),wt++;else for(wt in De)De.hasOwnProperty(wt)&&ze.call(tt,De[wt],wt,De)}function se(De,ze,tt){var wt="DEPRECATED METHOD: "+ze+"\n"+tt+" AT \n";return function(){var Ut=new Error("get-stack-trace"),Qt=Ut&&Ut.stack?Ut.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Kn=C.console&&(C.console.warn||C.console.log);return Kn&&Kn.call(C.console,wt,Qt),De.apply(this,arguments)}}Y="function"!=typeof Object.assign?function(ze){if(ze===X||null===ze)throw new TypeError("Cannot convert undefined or null to object");for(var tt=Object(ze),wt=1;wt<arguments.length;wt++){var Ut=arguments[wt];if(Ut!==X&&null!==Ut)for(var Qt in Ut)Ut.hasOwnProperty(Qt)&&(tt[Qt]=Ut[Qt])}return tt}:Object.assign;var J=se(function(ze,tt,wt){for(var Ut=Object.keys(tt),Qt=0;Qt<Ut.length;)(!wt||wt&&ze[Ut[Qt]]===X)&&(ze[Ut[Qt]]=tt[Ut[Qt]]),Qt++;return ze},"extend","Use `assign`."),ee=se(function(ze,tt){return J(ze,tt,!0)},"merge","Use `assign`.");function W(De,ze,tt){var Ut,wt=ze.prototype;(Ut=De.prototype=Object.create(wt)).constructor=De,Ut._super=wt,tt&&Y(Ut,tt)}function B(De,ze){return function(){return De.apply(ze,arguments)}}function b(De,ze){return typeof De==L?De.apply(ze&&ze[0]||X,ze):De}function I(De,ze){return De===X?ze:De}function T(De,ze,tt){k(ae(ze),function(wt){De.addEventListener(wt,tt,!1)})}function le(De,ze,tt){k(ae(ze),function(wt){De.removeEventListener(wt,tt,!1)})}function j(De,ze){for(;De;){if(De==ze)return!0;De=De.parentNode}return!1}function Ie(De,ze){return De.indexOf(ze)>-1}function ae(De){return De.trim().split(/\s+/g)}function xe(De,ze,tt){if(De.indexOf&&!tt)return De.indexOf(ze);for(var wt=0;wt<De.length;){if(tt&&De[wt][tt]==ze||!tt&&De[wt]===ze)return wt;wt++}return-1}function Pe(De){return Array.prototype.slice.call(De,0)}function He(De,ze,tt){for(var wt=[],Ut=[],Qt=0;Qt<De.length;){var Kn=ze?De[Qt][ze]:De[Qt];xe(Ut,Kn)<0&&wt.push(De[Qt]),Ut[Qt]=Kn,Qt++}return tt&&(wt=ze?wt.sort(function(Wr,Es){return Wr[ze]>Es[ze]}):wt.sort()),wt}function Qe(De,ze){for(var tt,wt,Ut=ze[0].toUpperCase()+ze.slice(1),Qt=0;Qt<_.length;){if((wt=(tt=_[Qt])?tt+Ut:ze)in De)return wt;Qt++}return X}var qe=1;function je(De){var ze=De.ownerDocument||De;return ze.defaultView||ze.parentWindow||C}var Be="ontouchstart"in C,de=Qe(C,"PointerEvent")!==X,Ae=Be&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",Ke="mouse",R=25,A=1,Z=4,Ve=8,Je=1,ue=2,ne=4,V=8,M=16,O=ue|ne,he=V|M,We=O|he,Ee=["x","y"],Re=["clientX","clientY"];function ct(De,ze){var tt=this;this.manager=De,this.callback=ze,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(wt){b(De.options.enable,[De])&&tt.handler(wt)},this.init()}function Dt(De,ze,tt){var wt=tt.pointers.length,Ut=tt.changedPointers.length,Qt=ze&A&&wt-Ut==0,Kn=ze&(Z|Ve)&&wt-Ut==0;tt.isFirst=!!Qt,tt.isFinal=!!Kn,Qt&&(De.session={}),tt.eventType=ze,function _t(De,ze){var tt=De.session,wt=ze.pointers,Ut=wt.length;tt.firstInput||(tt.firstInput=H(ze)),Ut>1&&!tt.firstMultiple?tt.firstMultiple=H(ze):1===Ut&&(tt.firstMultiple=!1);var Qt=tt.firstInput,Kn=tt.firstMultiple,Rr=Kn?Kn.center:Qt.center,Wr=ze.center=te(wt);ze.timeStamp=F(),ze.deltaTime=ze.timeStamp-Qt.timeStamp,ze.angle=Et(Rr,Wr),ze.distance=ut(Rr,Wr),function Gt(De,ze){var tt=ze.center,wt=De.offsetDelta||{},Ut=De.prevDelta||{},Qt=De.prevInput||{};(ze.eventType===A||Qt.eventType===Z)&&(Ut=De.prevDelta={x:Qt.deltaX||0,y:Qt.deltaY||0},wt=De.offsetDelta={x:tt.x,y:tt.y}),ze.deltaX=Ut.x+(tt.x-wt.x),ze.deltaY=Ut.y+(tt.y-wt.y)}(tt,ze),ze.offsetDirection=it(ze.deltaX,ze.deltaY);var Es=Le(ze.deltaTime,ze.deltaX,ze.deltaY);ze.overallVelocityX=Es.x,ze.overallVelocityY=Es.y,ze.overallVelocity=P(Es.x)>P(Es.y)?Es.x:Es.y,ze.scale=Kn?function Pn(De,ze){return ut(ze[0],ze[1],Re)/ut(De[0],De[1],Re)}(Kn.pointers,wt):1,ze.rotation=Kn?function tn(De,ze){return Et(ze[1],ze[0],Re)+Et(De[1],De[0],Re)}(Kn.pointers,wt):0,ze.maxPointers=tt.prevInput?ze.pointers.length>tt.prevInput.maxPointers?ze.pointers.length:tt.prevInput.maxPointers:ze.pointers.length,function pe(De,ze){var Ut,Qt,Kn,Rr,tt=De.lastInterval||ze,wt=ze.timeStamp-tt.timeStamp;if(ze.eventType!=Ve&&(wt>R||tt.velocity===X)){var Wr=ze.deltaX-tt.deltaX,Es=ze.deltaY-tt.deltaY,wa=Le(wt,Wr,Es);Qt=wa.x,Kn=wa.y,Ut=P(wa.x)>P(wa.y)?wa.x:wa.y,Rr=it(Wr,Es),De.lastInterval=ze}else Ut=tt.velocity,Qt=tt.velocityX,Kn=tt.velocityY,Rr=tt.direction;ze.velocity=Ut,ze.velocityX=Qt,ze.velocityY=Kn,ze.direction=Rr}(tt,ze);var wa=De.element;j(ze.srcEvent.target,wa)&&(wa=ze.srcEvent.target),ze.target=wa}(De,tt),De.emit("hammer.input",tt),De.recognize(tt),De.session.prevInput=tt}function H(De){for(var ze=[],tt=0;tt<De.pointers.length;)ze[tt]={clientX:G(De.pointers[tt].clientX),clientY:G(De.pointers[tt].clientY)},tt++;return{timeStamp:F(),pointers:ze,center:te(ze),deltaX:De.deltaX,deltaY:De.deltaY}}function te(De){var ze=De.length;if(1===ze)return{x:G(De[0].clientX),y:G(De[0].clientY)};for(var tt=0,wt=0,Ut=0;Ut<ze;)tt+=De[Ut].clientX,wt+=De[Ut].clientY,Ut++;return{x:G(tt/ze),y:G(wt/ze)}}function Le(De,ze,tt){return{x:ze/De||0,y:tt/De||0}}function it(De,ze){return De===ze?Je:P(De)>=P(ze)?De<0?ue:ne:ze<0?V:M}function ut(De,ze,tt){tt||(tt=Ee);var wt=ze[tt[0]]-De[tt[0]],Ut=ze[tt[1]]-De[tt[1]];return Math.sqrt(wt*wt+Ut*Ut)}function Et(De,ze,tt){return tt||(tt=Ee),180*Math.atan2(ze[tt[1]]-De[tt[1]],ze[tt[0]]-De[tt[0]])/Math.PI}ct.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(je(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(je(this.element),this.evWin,this.domHandler)}};var kn={mousedown:A,mousemove:2,mouseup:Z},vn="mousedown",An="mousemove mouseup";function Yi(){this.evEl=vn,this.evWin=An,this.pressed=!1,ct.apply(this,arguments)}W(Yi,ct,{handler:function(ze){var tt=kn[ze.type];tt&A&&0===ze.button&&(this.pressed=!0),2&tt&&1!==ze.which&&(tt=Z),this.pressed&&(tt&Z&&(this.pressed=!1),this.callback(this.manager,tt,{pointers:[ze],changedPointers:[ze],pointerType:Ke,srcEvent:ze}))}});var io={pointerdown:A,pointermove:2,pointerup:Z,pointercancel:Ve,pointerout:Ve},Tr={2:nt,3:"pen",4:Ke,5:"kinect"},rs="pointerdown",Wo="pointermove pointerup pointercancel";function Ei(){this.evEl=rs,this.evWin=Wo,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C.MSPointerEvent&&!C.PointerEvent&&(rs="MSPointerDown",Wo="MSPointerMove MSPointerUp MSPointerCancel"),W(Ei,ct,{handler:function(ze){var tt=this.store,wt=!1,Ut=ze.type.toLowerCase().replace("ms",""),Qt=io[Ut],Kn=Tr[ze.pointerType]||ze.pointerType,Rr=Kn==nt,Wr=xe(tt,ze.pointerId,"pointerId");Qt&A&&(0===ze.button||Rr)?Wr<0&&(tt.push(ze),Wr=tt.length-1):Qt&(Z|Ve)&&(wt=!0),!(Wr<0)&&(tt[Wr]=ze,this.callback(this.manager,Qt,{pointers:tt,changedPointers:[ze],pointerType:Kn,srcEvent:ze}),wt&&tt.splice(Wr,1))}});var zr={touchstart:A,touchmove:2,touchend:Z,touchcancel:Ve};function il(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ct.apply(this,arguments)}function va(De,ze){var tt=Pe(De.touches),wt=Pe(De.changedTouches);return ze&(Z|Ve)&&(tt=He(tt.concat(wt),"identifier",!0)),[tt,wt]}W(il,ct,{handler:function(ze){var tt=zr[ze.type];if(tt===A&&(this.started=!0),this.started){var wt=va.call(this,ze,tt);tt&(Z|Ve)&&wt[0].length-wt[1].length==0&&(this.started=!1),this.callback(this.manager,tt,{pointers:wt[0],changedPointers:wt[1],pointerType:nt,srcEvent:ze})}}});var Hs={touchstart:A,touchmove:2,touchend:Z,touchcancel:Ve},$e="touchstart touchmove touchend touchcancel";function Ze(){this.evTarget=$e,this.targetIds={},ct.apply(this,arguments)}function St(De,ze){var tt=Pe(De.touches),wt=this.targetIds;if(ze&(2|A)&&1===tt.length)return wt[tt[0].identifier]=!0,[tt,tt];var Ut,Qt,Kn=Pe(De.changedTouches),Rr=[],Wr=this.target;if(Qt=tt.filter(function(Es){return j(Es.target,Wr)}),ze===A)for(Ut=0;Ut<Qt.length;)wt[Qt[Ut].identifier]=!0,Ut++;for(Ut=0;Ut<Kn.length;)wt[Kn[Ut].identifier]&&Rr.push(Kn[Ut]),ze&(Z|Ve)&&delete wt[Kn[Ut].identifier],Ut++;return Rr.length?[He(Qt.concat(Rr),"identifier",!0),Rr]:void 0}W(Ze,ct,{handler:function(ze){var tt=Hs[ze.type],wt=St.call(this,ze,tt);wt&&this.callback(this.manager,tt,{pointers:wt[0],changedPointers:wt[1],pointerType:nt,srcEvent:ze})}});var zt=2500;function ur(){ct.apply(this,arguments);var De=B(this.handler,this);this.touch=new Ze(this.manager,De),this.mouse=new Yi(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function ss(De,ze){De&A?(this.primaryTouch=ze.changedPointers[0].identifier,Zt.call(this,ze)):De&(Z|Ve)&&Zt.call(this,ze)}function Zt(De){var ze=De.changedPointers[0];if(ze.identifier===this.primaryTouch){var tt={x:ze.clientX,y:ze.clientY};this.lastTouches.push(tt);var wt=this.lastTouches;setTimeout(function(){var Qt=wt.indexOf(tt);Qt>-1&&wt.splice(Qt,1)},zt)}}function ro(De){for(var ze=De.srcEvent.clientX,tt=De.srcEvent.clientY,wt=0;wt<this.lastTouches.length;wt++){var Ut=this.lastTouches[wt],Qt=Math.abs(ze-Ut.x),Kn=Math.abs(tt-Ut.y);if(Qt<=25&&Kn<=25)return!0}return!1}W(ur,ct,{handler:function(ze,tt,wt){var Qt=wt.pointerType==Ke;if(!(Qt&&wt.sourceCapabilities&&wt.sourceCapabilities.firesTouchEvents)){if(wt.pointerType==nt)ss.call(this,tt,wt);else if(Qt&&ro.call(this,wt))return;this.callback(ze,tt,wt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ui=Qe(E.style,"touchAction"),yc=Ui!==X,di="compute",$o="manipulation",$t="none",Vn="pan-x",Gr="pan-y",ri=function Te(){if(!yc)return!1;var De={},ze=C.CSS&&C.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(tt){De[tt]=!ze||C.CSS.supports("touch-action",tt)}),De}();function Vi(De,ze){this.manager=De,this.set(ze)}Vi.prototype={set:function(De){De==di&&(De=this.compute()),yc&&this.manager.element.style&&ri[De]&&(this.manager.element.style[Ui]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return k(this.manager.recognizers,function(ze){b(ze.options.enable,[ze])&&(De=De.concat(ze.getTouchAction()))}),function ye(De){if(Ie(De,$t))return $t;var ze=Ie(De,Vn),tt=Ie(De,Gr);return ze&&tt?$t:ze||tt?ze?Vn:Gr:Ie(De,$o)?$o:"auto"}(De.join(" "))},preventDefaults:function(De){var ze=De.srcEvent,tt=De.offsetDirection;if(!this.manager.session.prevented){var wt=this.actions,Ut=Ie(wt,$t)&&!ri[$t],Qt=Ie(wt,Gr)&&!ri[Gr],Kn=Ie(wt,Vn)&&!ri[Vn];if(Ut&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return Kn&&Qt||!(Ut||Qt&&tt&O||Kn&&tt&he)?void 0:this.preventSrc(ze)}ze.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}};var ge=1;function Tt(De){this.options=Y({},this.defaults,De||{}),this.id=function Ce(){return qe++}(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=ge,this.simultaneous={},this.requireFail=[]}function Nt(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function Vt(De){return De==M?"down":De==V?"up":De==ue?"left":De==ne?"right":""}function rn(De,ze){var tt=ze.manager;return tt?tt.get(De):De}function wn(){Tt.apply(this,arguments)}function dr(){wn.apply(this,arguments),this.pX=null,this.pY=null}function hr(){wn.apply(this,arguments)}function Ns(){Tt.apply(this,arguments),this._timer=null,this._input=null}function Sn(){wn.apply(this,arguments)}function Gn(){wn.apply(this,arguments)}function os(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function zs(De,ze){return(ze=ze||{}).recognizers=I(ze.recognizers,zs.defaults.preset),new Yo(De,ze)}function Yo(De,ze){this.options=Y({},zs.defaults,ze||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function bt(De){return new(De.options.inputClass||(de?Ei:Ae?Ze:Be?ur:Yi))(De,Dt)}(this),this.touchAction=new Vi(this,this.options.touchAction),ba(this,!0),k(this.options.recognizers,function(tt){var wt=this.add(new tt[0](tt[1]));tt[2]&&wt.recognizeWith(tt[2]),tt[3]&&wt.requireFailure(tt[3])},this)}function ba(De,ze){var wt,tt=De.element;tt.style&&(k(De.options.cssProps,function(Ut,Qt){wt=Qe(tt.style,Qt),ze?(De.oldCssProps[wt]=tt.style[wt],tt.style[wt]=Ut):tt.style[wt]=De.oldCssProps[wt]||""}),ze||(De.oldCssProps={}))}Tt.prototype={defaults:{},set:function(De){return Y(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(x(De,"recognizeWith",this))return this;var ze=this.simultaneous;return ze[(De=rn(De,this)).id]||(ze[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return x(De,"dropRecognizeWith",this)||(De=rn(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(x(De,"requireFailure",this))return this;var ze=this.requireFail;return-1===xe(ze,De=rn(De,this))&&(ze.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(x(De,"dropRequireFailure",this))return this;De=rn(De,this);var ze=xe(this.requireFail,De);return ze>-1&&this.requireFail.splice(ze,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var ze=this,tt=this.state;function wt(Ut){ze.manager.emit(Ut,De)}tt<8&&wt(ze.options.event+Nt(tt)),wt(ze.options.event),De.additionalEvent&&wt(De.additionalEvent),tt>=8&&wt(ze.options.event+Nt(tt))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(this.requireFail[De].state&(32|ge)))return!1;De++}return!0},recognize:function(De){var ze=Y({},De);if(!b(this.options.enable,[this,ze]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ge),this.state=this.process(ze),30&this.state&&this.tryEmit(ze)},process:function(De){},getTouchAction:function(){},reset:function(){}},W(wn,Tt,{defaults:{pointers:1},attrTest:function(De){var ze=this.options.pointers;return 0===ze||De.pointers.length===ze},process:function(De){var ze=this.state,tt=De.eventType,wt=6&ze,Ut=this.attrTest(De);return wt&&(tt&Ve||!Ut)?16|ze:wt||Ut?tt&Z?8|ze:2&ze?4|ze:2:32}}),W(dr,wn,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var De=this.options.direction,ze=[];return De&O&&ze.push(Gr),De&he&&ze.push(Vn),ze},directionTest:function(De){var ze=this.options,tt=!0,wt=De.distance,Ut=De.direction,Qt=De.deltaX,Kn=De.deltaY;return Ut&ze.direction||(ze.direction&O?(Ut=0===Qt?Je:Qt<0?ue:ne,tt=Qt!=this.pX,wt=Math.abs(De.deltaX)):(Ut=0===Kn?Je:Kn<0?V:M,tt=Kn!=this.pY,wt=Math.abs(De.deltaY))),De.direction=Ut,tt&&wt>ze.threshold&&Ut&ze.direction},attrTest:function(De){return wn.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var ze=Vt(De.direction);ze&&(De.additionalEvent=this.options.event+ze),this._super.emit.call(this,De)}}),W(hr,wn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),W(Ns,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var ze=this.options,tt=De.pointers.length===ze.pointers,wt=De.distance<ze.threshold,Ut=De.deltaTime>ze.time;if(this._input=De,!wt||!tt||De.eventType&(Z|Ve)&&!Ut)this.reset();else if(De.eventType&A)this.reset(),this._timer=oe(function(){this.state=8,this.tryEmit()},ze.time,this);else if(De.eventType&Z)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&De.eventType&Z?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=F(),this.manager.emit(this.options.event,this._input)))}}),W(Sn,wn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),W(Gn,wn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|he,pointers:1},getTouchAction:function(){return dr.prototype.getTouchAction.call(this)},attrTest:function(De){var tt,ze=this.options.direction;return ze&(O|he)?tt=De.overallVelocity:ze&O?tt=De.overallVelocityX:ze&he&&(tt=De.overallVelocityY),this._super.attrTest.call(this,De)&&ze&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&P(tt)>this.options.velocity&&De.eventType&Z},emit:function(De){var ze=Vt(De.offsetDirection);ze&&this.manager.emit(this.options.event+ze,De),this.manager.emit(this.options.event,De)}}),W(os,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$o]},process:function(De){var ze=this.options,tt=De.pointers.length===ze.pointers,wt=De.distance<ze.threshold,Ut=De.deltaTime<ze.time;if(this.reset(),De.eventType&A&&0===this.count)return this.failTimeout();if(wt&&Ut&&tt){if(De.eventType!=Z)return this.failTimeout();var Qt=!this.pTime||De.timeStamp-this.pTime<ze.interval,Kn=!this.pCenter||ut(this.pCenter,De.center)<ze.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,Kn&&Qt?this.count+=1:this.count=1,this._input=De,0==this.count%ze.taps)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=8,this.tryEmit()},ze.interval,this),2):8}return 32},failTimeout:function(){return this._timer=oe(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),zs.VERSION="2.0.7",zs.defaults={domEvents:!1,touchAction:di,enable:!0,inputTarget:null,inputClass:null,preset:[[Sn,{enable:!1}],[hr,{enable:!1},["rotate"]],[Gn,{direction:O}],[dr,{direction:O},["swipe"]],[os],[os,{event:"doubletap",taps:2},["tap"]],[Ns]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Yo.prototype={set:function(De){return Y(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var ze=this.session;if(!ze.stopped){this.touchAction.preventDefaults(De);var tt,wt=this.recognizers,Ut=ze.curRecognizer;(!Ut||Ut&&8&Ut.state)&&(Ut=ze.curRecognizer=null);for(var Qt=0;Qt<wt.length;)tt=wt[Qt],2===ze.stopped||Ut&&tt!=Ut&&!tt.canRecognizeWith(Ut)?tt.reset():tt.recognize(De),!Ut&&14&tt.state&&(Ut=ze.curRecognizer=tt),Qt++}},get:function(De){if(De instanceof Tt)return De;for(var ze=this.recognizers,tt=0;tt<ze.length;tt++)if(ze[tt].options.event==De)return ze[tt];return null},add:function(De){if(x(De,"add",this))return this;var ze=this.get(De.options.event);return ze&&this.remove(ze),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(x(De,"remove",this))return this;if(De=this.get(De)){var ze=this.recognizers,tt=xe(ze,De);-1!==tt&&(ze.splice(tt,1),this.touchAction.update())}return this},on:function(De,ze){if(De!==X&&ze!==X){var tt=this.handlers;return k(ae(De),function(wt){tt[wt]=tt[wt]||[],tt[wt].push(ze)}),this}},off:function(De,ze){if(De!==X){var tt=this.handlers;return k(ae(De),function(wt){ze?tt[wt]&&tt[wt].splice(xe(tt[wt],ze),1):delete tt[wt]}),this}},emit:function(De,ze){this.options.domEvents&&function Ls(De,ze){var tt=$.createEvent("Event");tt.initEvent(De,!0,!0),tt.gesture=ze,ze.target.dispatchEvent(tt)}(De,ze);var tt=this.handlers[De]&&this.handlers[De].slice();if(tt&&tt.length){ze.type=De,ze.preventDefault=function(){ze.srcEvent.preventDefault()};for(var wt=0;wt<tt.length;)tt[wt](ze),wt++}},destroy:function(){this.element&&ba(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Y(zs,{INPUT_START:A,INPUT_MOVE:2,INPUT_END:Z,INPUT_CANCEL:Ve,STATE_POSSIBLE:ge,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Je,DIRECTION_LEFT:ue,DIRECTION_RIGHT:ne,DIRECTION_UP:V,DIRECTION_DOWN:M,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:he,DIRECTION_ALL:We,Manager:Yo,Input:ct,TouchAction:Vi,TouchInput:Ze,MouseInput:Yi,PointerEventInput:Ei,TouchMouseInput:ur,SingleTouchInput:il,Recognizer:Tt,AttrRecognizer:wn,Tap:os,Pan:dr,Swipe:Gn,Pinch:hr,Rotate:Sn,Press:Ns,on:T,off:le,each:k,merge:ee,extend:J,assign:Y,inherit:W,bindFn:B,prefixed:Qe}),(typeof C<"u"?C:typeof self<"u"?self:{}).Hammer=zs,(Q=function(){return zs}.call(_e,S,_e,Ue))!==X&&(Ue.exports=Q)}(window,document)},2601:(Ue,_e)=>{_e.read=function(S,Q,C,$,z){var X,_,E=8*z-$-1,L=(1<<E)-1,G=L>>1,P=-7,F=C?z-1:0,oe=C?-1:1,x=S[Q+F];for(F+=oe,X=x&(1<<-P)-1,x>>=-P,P+=E;P>0;X=256*X+S[Q+F],F+=oe,P-=8);for(_=X&(1<<-P)-1,X>>=-P,P+=$;P>0;_=256*_+S[Q+F],F+=oe,P-=8);if(0===X)X=1-G;else{if(X===L)return _?NaN:1/0*(x?-1:1);_+=Math.pow(2,$),X-=G}return(x?-1:1)*_*Math.pow(2,X-$)},_e.write=function(S,Q,C,$,z,X){var _,E,L,G=8*X-z-1,P=(1<<G)-1,F=P>>1,oe=23===z?Math.pow(2,-24)-Math.pow(2,-77):0,x=$?0:X-1,k=$?1:-1,se=Q<0||0===Q&&1/Q<0?1:0;for(Q=Math.abs(Q),isNaN(Q)||Q===1/0?(E=isNaN(Q)?1:0,_=P):(_=Math.floor(Math.log(Q)/Math.LN2),Q*(L=Math.pow(2,-_))<1&&(_--,L*=2),(Q+=_+F>=1?oe/L:oe*Math.pow(2,1-F))*L>=2&&(_++,L/=2),_+F>=P?(E=0,_=P):_+F>=1?(E=(Q*L-1)*Math.pow(2,z),_+=F):(E=Q*Math.pow(2,F-1)*Math.pow(2,z),_=0));z>=8;S[C+x]=255&E,x+=k,E/=256,z-=8);for(_=_<<z|E,G+=z;G>0;S[C+x]=255&_,x+=k,_/=256,G-=8);S[C+x-k]|=128*se}},6698:Ue=>{Ue.exports="function"==typeof Object.create?function(S,Q){Q&&(S.super_=Q,S.prototype=Object.create(Q.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,Q){if(Q){S.super_=Q;var C=function(){};C.prototype=Q.prototype,S.prototype=new C,S.prototype.constructor=S}}},4198:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{isArray:C,isObject:$,isString:z}=S(8254),{asArray:X}=S(3521),{prependBase:_}=S(2651),E=S(1874),L=S(1252);function P(oe){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:oe})}function F({context:oe,base:x}){if(!oe)return;const k=oe["@context"];if(z(k))oe["@context"]=_(x,k);else if(C(k))for(let se=0;se<k.length;++se){const Y=k[se];z(Y)?k[se]=_(x,Y):$(Y)&&F({context:{"@context":Y},base:x})}else if($(k))for(const se in k)F({context:k[se],base:x})}Ue.exports=class{constructor({sharedCache:x}){this.perOpCache=new Map,this.sharedCache=x}resolve({activeCtx:x,context:k,documentLoader:se,base:Y,cycles:J=new Set}){var ee=this;return Q(function*(){k&&$(k)&&k["@context"]&&(k=k["@context"]),k=X(k);const W=[];for(const B of k){if(z(B)){let T=ee._get(B);T||(T=yield ee._resolveRemoteContext({activeCtx:x,url:B,documentLoader:se,base:Y,cycles:J})),C(T)?W.push(...T):W.push(T);continue}if(null===B){W.push(new L({document:null}));continue}$(B)||P(k);const b=JSON.stringify(B);let I=ee._get(b);I||(I=new L({document:B}),ee._cacheResolvedContext({key:b,resolved:I,tag:"static"})),W.push(I)}return W})()}_get(x){let k=this.perOpCache.get(x);if(!k){const se=this.sharedCache.get(x);se&&(k=se.get("static"),k&&this.perOpCache.set(x,k))}return k}_cacheResolvedContext({key:x,resolved:k,tag:se}){if(this.perOpCache.set(x,k),void 0!==se){let Y=this.sharedCache.get(x);Y||(Y=new Map,this.sharedCache.set(x,Y)),Y.set(se,k)}return k}_resolveRemoteContext({activeCtx:x,url:k,documentLoader:se,base:Y,cycles:J}){var ee=this;return Q(function*(){k=_(Y,k);const{context:W,remoteDoc:B}=yield ee._fetchContext({activeCtx:x,url:k,documentLoader:se,cycles:J});F({context:W,base:Y=B.documentUrl||k});const b=yield ee.resolve({activeCtx:x,context:W,documentLoader:se,base:Y,cycles:J});return ee._cacheResolvedContext({key:k,resolved:b,tag:B.tag}),b})()}_fetchContext({activeCtx:x,url:k,documentLoader:se,cycles:Y}){return Q(function*(){if(Y.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"loading remote context failed":"context overflow",max:10});if(Y.has(k))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"recursive context inclusion":"context overflow",url:k});let J,ee;Y.add(k);try{ee=yield se(k),J=ee.document||null,z(J)&&(J=JSON.parse(J))}catch(W){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:k,cause:W})}if(!$(J))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:k});return J="@context"in J?{"@context":J["@context"]}:{"@context":{}},ee.contextUrl&&(C(J["@context"])||(J["@context"]=[J["@context"]]),J["@context"].push(ee.contextUrl)),{context:J,remoteDoc:ee}})()}}},1874:Ue=>{"use strict";Ue.exports=class extends Error{constructor(S="An unspecified JSON-LD error occurred.",Q="jsonld.Error",C={}){super(S),this.name=Q,this.message=S,this.details=C}}},1828:Ue=>{"use strict";Ue.exports=_e=>{class S{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(S,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(S.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:S}),S.compact=function(Q,C){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):_e.compact(Q,C)},S.expand=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):_e.expand(Q)},S.flatten=function(Q){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):_e.flatten(Q)},S}},7260:(Ue,_e,S)=>{"use strict";Ue.exports=S(1986).NQuads},4044:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;Ue.exports=class{constructor(){this._requests={}}wrapLoader($){const z=this;return z._loader=$,function(){return z.add.apply(z,arguments)}}add($){var z=this;return Q(function*(){let X=z._requests[$];if(X)return Promise.resolve(X);X=z._requests[$]=z._loader($);try{return yield X}finally{delete z._requests[$]}})()}}},1252:(Ue,_e,S)=>{"use strict";const Q=S(1072);Ue.exports=class{constructor({document:z}){this.document=z,this.cache=new Q({max:10})}getProcessed(z){return this.cache.get(z)}setProcessed(z,X){this.cache.set(z,X)}}},8809:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),{isArray:$,isObject:z,isString:X,isUndefined:_}=S(8254),{isList:E,isValue:L,isGraph:G,isSimpleGraph:P,isSubjectReference:F}=S(543),{expandIri:oe,getContextValue:x,isKeyword:k,process:se,processingMode:Y}=S(9611),{removeBase:J,prependBase:ee}=S(2651),{REGEX_KEYWORD:W,addValue:B,asArray:b,compareShortestLeast:I}=S(3521),T={};function j(Ie,ae,xe){if("@nest"!==oe(Ie,ae,{vocab:!0},xe))throw new C("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ue.exports=T,T.compact=function(){var Ie=Q(function*({activeCtx:ae,activeProperty:xe=null,element:Pe,options:He={}}){if($(Pe)){let qe=[];for(let Ce=0;Ce<Pe.length;++Ce){const je=yield T.compact({activeCtx:ae,activeProperty:xe,element:Pe[Ce],options:He});null!==je&&qe.push(je)}return He.compactArrays&&1===qe.length&&0===(x(ae,xe,"@container")||[]).length&&(qe=qe[0]),qe}const Qe=x(ae,xe,"@context");if(_(Qe)||(ae=yield se({activeCtx:ae,localCtx:Qe,propagate:!0,overrideProtected:!0,options:He})),z(Pe)){if(He.link&&"@id"in Pe&&He.link.hasOwnProperty(Pe["@id"])){const nt=He.link[Pe["@id"]];for(let mt=0;mt<nt.length;++mt)if(nt[mt].expanded===Pe)return nt[mt].compacted}if(L(Pe)||F(Pe)){const nt=T.compactValue({activeCtx:ae,activeProperty:xe,value:Pe,options:He});return He.link&&F(Pe)&&(He.link.hasOwnProperty(Pe["@id"])||(He.link[Pe["@id"]]=[]),He.link[Pe["@id"]].push({expanded:Pe,compacted:nt})),nt}if(E(Pe)&&(x(ae,xe,"@container")||[]).includes("@list"))return T.compact({activeCtx:ae,activeProperty:xe,element:Pe["@list"],options:He});const qe="@reverse"===xe,Ce={},je=ae;!L(Pe)&&!F(Pe)&&(ae=ae.revertToPreviousContext());const Se=x(je,xe,"@context");_(Se)||(ae=yield se({activeCtx:ae,localCtx:Se,propagate:!0,overrideProtected:!0,options:He})),He.link&&"@id"in Pe&&(He.link.hasOwnProperty(Pe["@id"])||(He.link[Pe["@id"]]=[]),He.link[Pe["@id"]].push({expanded:Pe,compacted:Ce}));let Be=Pe["@type"]||[];Be.length>1&&(Be=Array.from(Be).sort());const de=ae;for(const nt of Be){const mt=T.compactIri({activeCtx:de,iri:nt,relativeTo:{vocab:!0}}),Ke=x(je,mt,"@context");_(Ke)||(ae=yield se({activeCtx:ae,localCtx:Ke,options:He,propagate:!1}))}const Ae=Object.keys(Pe).sort();for(const nt of Ae){const mt=Pe[nt];if("@id"!==nt)if("@type"!==nt)if("@reverse"!==nt)if("@preserve"!==nt)if("@index"!==nt)if("@graph"!==nt&&"@list"!==nt&&"@included"!==nt&&k(nt)){const Ke=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});B(Ce,Ke,mt)}else{if(!$(mt))throw new C("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===mt.length){const Ke=T.compactIri({activeCtx:ae,iri:nt,value:mt,relativeTo:{vocab:!0},reverse:qe}),fe=ae.mappings.has(Ke)?ae.mappings.get(Ke)["@nest"]:null;let R=Ce;fe&&(j(ae,fe,He),z(Ce[fe])||(Ce[fe]={}),R=Ce[fe]),B(R,Ke,mt,{propertyIsArray:!0})}for(const Ke of mt){const fe=T.compactIri({activeCtx:ae,iri:nt,value:Ke,relativeTo:{vocab:!0},reverse:qe}),R=ae.mappings.has(fe)?ae.mappings.get(fe)["@nest"]:null;let A=Ce;R&&(j(ae,R,He),z(Ce[R])||(Ce[R]={}),A=Ce[R]);const ie=x(ae,fe,"@container")||[],Z=G(Ke),Ve=E(Ke);let Je;Ve?Je=Ke["@list"]:Z&&(Je=Ke["@graph"]);let ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:Ve||Z?Je:Ke,options:He});if(Ve){if($(ue)||(ue=[ue]),ie.includes("@list")){B(A,fe,ue,{valueIsArray:!0,allowDuplicate:!0});continue}ue={[T.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ue},"@index"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ke["@index"])}if(Z)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&P(Ke))){let ne;A.hasOwnProperty(fe)?ne=A[fe]:A[fe]=ne={};const V=(ie.includes("@id")?Ke["@id"]:Ke["@index"])||T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});B(ne,V,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&P(Ke)?($(ue)&&ue.length>1&&(ue={"@included":ue}),B(A,fe,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")})):($(ue)&&1===ue.length&&He.compactArrays&&(ue=ue[0]),ue={[T.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ue},"@id"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ke["@id"]),"@index"in Ke&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=Ke["@index"]),B(A,fe,ue,{propertyIsArray:!He.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let ne,V;if(A.hasOwnProperty(fe)?ne=A[fe]:A[fe]=ne={},ie.includes("@language"))L(ue)&&(ue=ue["@value"]),V=Ke["@language"];else if(ie.includes("@index")){const M=x(ae,fe,"@index")||"@index",O=T.compactIri({activeCtx:ae,iri:M,relativeTo:{vocab:!0}});if("@index"===M)V=Ke["@index"],delete ue[O];else{let he;if([V,...he]=b(ue[M]||[]),X(V))switch(he.length){case 0:delete ue[M];break;case 1:ue[M]=he[0];break;default:ue[M]=he}else V=null}}else if(ie.includes("@id")){const M=T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});V=ue[M],delete ue[M]}else if(ie.includes("@type")){const M=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let O;switch([V,...O]=b(ue[M]||[]),O.length){case 0:delete ue[M];break;case 1:ue[M]=O[0];break;default:ue[M]=O}1===Object.keys(ue).length&&"@id"in Ke&&(ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:{"@id":Ke["@id"]},options:He}))}V||(V=T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),B(ne,V,ue,{propertyIsArray:ie.includes("@set")})}else{const ne=!He.compactArrays||ie.includes("@set")||ie.includes("@list")||$(ue)&&0===ue.length||"@list"===nt||"@graph"===nt;B(A,fe,ue,{propertyIsArray:ne})}}}else{if((x(ae,xe,"@container")||[]).includes("@index"))continue;const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});B(Ce,fe,mt)}else{const Ke=yield T.compact({activeCtx:ae,activeProperty:xe,element:mt,options:He});$(Ke)&&0===Ke.length||B(Ce,nt,Ke)}else{const Ke=yield T.compact({activeCtx:ae,activeProperty:"@reverse",element:mt,options:He});for(const fe in Ke)if(ae.mappings.has(fe)&&ae.mappings.get(fe).reverse){const R=Ke[fe],ie=(x(ae,fe,"@container")||[]).includes("@set")||!He.compactArrays;B(Ce,fe,R,{propertyIsArray:ie}),delete Ke[fe]}if(Object.keys(Ke).length>0){const fe=T.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});B(Ce,fe,Ke)}}else{let Ke=b(mt).map(Z=>T.compactIri({activeCtx:je,iri:Z,relativeTo:{vocab:!0}}));1===Ke.length&&(Ke=Ke[0]);const fe=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),ie=(x(ae,fe,"@container")||[]).includes("@set")&&Y(ae,1.1)||$(Ke)&&0===mt.length;B(Ce,fe,Ke,{propertyIsArray:ie})}else{let Ke=b(mt).map(R=>T.compactIri({activeCtx:ae,iri:R,relativeTo:{vocab:!1},base:He.base}));1===Ke.length&&(Ke=Ke[0]),Ce[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=Ke}}return Ce}return Pe});return function(ae){return Ie.apply(this,arguments)}}(),T.compactIri=({activeCtx:Ie,iri:ae,value:xe=null,relativeTo:Pe={vocab:!1},reverse:He=!1,base:Qe=null})=>{if(null===ae)return ae;Ie.isPropertyTermScoped&&Ie.previousContext&&(Ie=Ie.previousContext);const qe=Ie.getInverse();if(k(ae)&&ae in qe&&"@none"in qe[ae]&&"@type"in qe[ae]["@none"]&&"@none"in qe[ae]["@none"]["@type"])return qe[ae]["@none"]["@type"]["@none"];if(Pe.vocab&&ae in qe){const de=Ie["@language"]||"@none",Ae=[];z(xe)&&"@index"in xe&&!("@graph"in xe)&&Ae.push("@index","@index@set"),z(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),G(xe)?("@index"in xe&&Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Ae.push("@graph@id","@graph@id@set"),Ae.push("@graph","@graph@set","@set"),"@index"in xe||Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Ae.push("@graph@id","@graph@id@set")):z(xe)&&!L(xe)&&Ae.push("@id","@id@set","@type","@set@type");let nt="@language",mt="@null";if(He)nt="@type",mt="@reverse",Ae.push("@set");else if(E(xe)){"@index"in xe||Ae.push("@list");const fe=xe["@list"];if(0===fe.length)nt="@any",mt="@none";else{let R=0===fe.length?de:null,A=null;for(let ie=0;ie<fe.length;++ie){const Z=fe[ie];let Ve="@none",Je="@none";if(L(Z)?"@direction"in Z?Ve=`${(Z["@language"]||"").toLowerCase()}_${Z["@direction"]}`:"@language"in Z?Ve=Z["@language"].toLowerCase():"@type"in Z?Je=Z["@type"]:Ve="@null":Je="@id",null===R?R=Ve:Ve!==R&&L(Z)&&(R="@none"),null===A?A=Je:Je!==A&&(A="@none"),"@none"===R&&"@none"===A)break}R=R||"@none",A=A||"@none","@none"!==A?(nt="@type",mt=A):mt=R}}else{if(L(xe))if("@language"in xe&&!("@index"in xe)){Ae.push("@language","@language@set"),mt=xe["@language"];const fe=xe["@direction"];fe&&(mt=`${mt}_${fe}`)}else"@direction"in xe&&!("@index"in xe)?mt=`_${xe["@direction"]}`:"@type"in xe&&(nt="@type",mt=xe["@type"]);else nt="@type",mt="@id";Ae.push("@set")}Ae.push("@none"),z(xe)&&!("@index"in xe)&&Ae.push("@index","@index@set"),L(xe)&&1===Object.keys(xe).length&&Ae.push("@language","@language@set");const Ke=function le(Ie,ae,xe,Pe,He,Qe){null===Qe&&(Qe="@null");const qe=[];if(("@id"===Qe||"@reverse"===Qe)&&z(xe)&&"@id"in xe){"@reverse"===Qe&&qe.push("@reverse");const je=T.compactIri({activeCtx:Ie,iri:xe["@id"],relativeTo:{vocab:!0}});Ie.mappings.has(je)&&Ie.mappings.get(je)&&Ie.mappings.get(je)["@id"]===xe["@id"]?qe.push.apply(qe,["@vocab","@id"]):qe.push.apply(qe,["@id","@vocab"])}else{qe.push(Qe);const je=qe.find(Se=>Se.includes("_"));je&&qe.push(je.replace(/^[^_]+_/,"_"))}qe.push("@none");const Ce=Ie.inverse[ae];for(const je of Pe){if(!(je in Ce))continue;const Se=Ce[je][He];for(const Be of qe)if(Be in Se)return Se[Be]}return null}(Ie,ae,xe,Ae,nt,mt);if(null!==Ke)return Ke}if(Pe.vocab&&"@vocab"in Ie){const de=Ie["@vocab"];if(0===ae.indexOf(de)&&ae!==de){const Ae=ae.substr(de.length);if(!Ie.mappings.has(Ae))return Ae}}let Ce=null;const je=[];let Se=Ie.fastCurieMap;const Be=ae.length-1;for(let de=0;de<Be&&ae[de]in Se;++de)Se=Se[ae[de]],""in Se&&je.push(Se[""][0]);for(let de=je.length-1;de>=0;--de){const Ae=je[de],nt=Ae.terms;for(const mt of nt){const Ke=mt+":"+ae.substr(Ae.iri.length);Ie.mappings.get(mt)._prefix&&(!Ie.mappings.has(Ke)||null===xe&&Ie.mappings.get(Ke)["@id"]===ae)&&(null===Ce||I(Ke,Ce)<0)&&(Ce=Ke)}}if(null!==Ce)return Ce;for(const[de,Ae]of Ie.mappings)if(Ae&&Ae._prefix&&ae.startsWith(de+":"))throw new C(`Absolute IRI "${ae}" confused with prefix "${de}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ie});if(!Pe.vocab){if("@base"in Ie){if(Ie["@base"]){const de=J(ee(Qe,Ie["@base"]),ae);return W.test(de)?`./${de}`:de}return ae}return J(Qe,ae)}return ae},T.compactValue=({activeCtx:Ie,activeProperty:ae,value:xe,options:Pe})=>{if(L(xe)){const Ce=x(Ie,ae,"@type"),je=x(Ie,ae,"@language"),Se=x(Ie,ae,"@direction"),Be=x(Ie,ae,"@container")||[],de="@index"in xe&&!Be.includes("@index");if(!de&&"@none"!==Ce&&(xe["@type"]===Ce||"@language"in xe&&xe["@language"]===je&&"@direction"in xe&&xe["@direction"]===Se||"@language"in xe&&xe["@language"]===je||"@direction"in xe&&xe["@direction"]===Se))return xe["@value"];const Ae=Object.keys(xe).length,nt=1===Ae||2===Ae&&"@index"in xe&&!de,mt="@language"in Ie,Ke=X(xe["@value"]),fe=Ie.mappings.has(ae)&&null===Ie.mappings.get(ae)["@language"];if(nt&&"@none"!==Ce&&(!mt||!Ke||fe))return xe["@value"];const R={};return de&&(R[T.compactIri({activeCtx:Ie,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?R[T.compactIri({activeCtx:Ie,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Ie,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(R[T.compactIri({activeCtx:Ie,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(R[T.compactIri({activeCtx:Ie,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),R[T.compactIri({activeCtx:Ie,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],R}const He=oe(Ie,ae,{vocab:!0},Pe),Qe=x(Ie,ae,"@type"),qe=T.compactIri({activeCtx:Ie,iri:xe["@id"],relativeTo:{vocab:"@vocab"===Qe},base:Pe.base});return"@id"===Qe||"@vocab"===Qe||"@graph"===He?qe:{[T.compactIri({activeCtx:Ie,iri:"@id",relativeTo:{vocab:!0}})]:qe}}},6982:Ue=>{"use strict";const _e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",S="http://www.w3.org/2001/XMLSchema#";Ue.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:_e,RDF_LIST:_e+"List",RDF_FIRST:_e+"first",RDF_REST:_e+"rest",RDF_NIL:_e+"nil",RDF_TYPE:_e+"type",RDF_PLAIN_LITERAL:_e+"PlainLiteral",RDF_XML_LITERAL:_e+"XMLLiteral",RDF_JSON_LITERAL:_e+"JSON",RDF_OBJECT:_e+"object",RDF_LANGSTRING:_e+"langString",XSD:S,XSD_BOOLEAN:S+"boolean",XSD_DOUBLE:S+"double",XSD_INTEGER:S+"integer",XSD_STRING:S+"string"}},9611:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(3521),$=S(1874),{isArray:z,isObject:X,isString:_,isUndefined:E}=S(8254),{isAbsolute:L,isRelative:G,prependBase:P}=S(2651),{handleEvent:F}=S(3855),{REGEX_BCP47:oe,REGEX_KEYWORD:x,asArray:k,compareShortestLeast:se}=S(3521),Y=new Map,ee={};function W(b,I,T,le,j,Ie){if(null===I||!_(I)||ee.isKeyword(I))return I;if(I.match(x))return null;if(le&&le.hasOwnProperty(I)&&!0!==j.get(I)&&ee.createTermDefinition({activeCtx:b,localCtx:le,term:I,defined:j,options:Ie}),(T=T||{}).vocab){const xe=b.mappings.get(I);if(null===xe)return null;if(X(xe)&&"@id"in xe)return xe["@id"]}const ae=I.indexOf(":");if(ae>0){const xe=I.substr(0,ae),Pe=I.substr(ae+1);if("_"===xe||0===Pe.indexOf("//"))return I;le&&le.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:b,localCtx:le,term:xe,defined:j,options:Ie});const He=b.mappings.get(xe);if(He&&He._prefix)return He["@id"]+Pe;if(L(I))return I}if(T.vocab&&"@vocab"in b)I=b["@vocab"]+I;else if(T.base){let xe,Pe;"@base"in b?b["@base"]?(Pe=P(Ie.base,b["@base"]),xe=P(Pe,I)):(Pe=b["@base"],xe=I):(Pe=Ie.base,xe=P(Ie.base,I)),I=xe}return I}function B(b,I){if(!b||"object"!=typeof b||!I||"object"!=typeof I)return b===I;const T=Array.isArray(b);if(T!==Array.isArray(I))return!1;if(T){if(b.length!==I.length)return!1;for(let Ie=0;Ie<b.length;++Ie)if(!B(b[Ie],I[Ie]))return!1;return!0}const le=Object.keys(b),j=Object.keys(I);if(le.length!==j.length)return!1;for(const Ie in b){let ae=b[Ie],xe=I[Ie];if("@container"===Ie&&Array.isArray(ae)&&Array.isArray(xe)&&(ae=ae.slice().sort(),xe=xe.slice().sort()),!B(ae,xe))return!1}return!0}Ue.exports=ee,ee.process=function(){var b=Q(function*({activeCtx:I,localCtx:T,options:le,propagate:j=!0,overrideProtected:Ie=!1,cycles:ae=new Set}){if(X(T)&&"@context"in T&&z(T["@context"])&&(T=T["@context"]),0===k(T).length)return I;const Pe=[],He=[({event:je,next:Se})=>{Pe.push(je),Se()}];le.eventHandler&&He.push(le.eventHandler);const Qe=le;le={...le,eventHandler:He};const qe=yield le.contextResolver.resolve({activeCtx:I,context:T,documentLoader:le.documentLoader,base:le.base});X(qe[0].document)&&"boolean"==typeof qe[0].document["@propagate"]&&(j=qe[0].document["@propagate"]);let Ce=I;!j&&!Ce.previousContext&&(Ce=Ce.clone(),Ce.previousContext=I);for(const je of qe){let{document:Se}=je;if(I=Ce,null===Se){if(!Ie&&0!==Object.keys(I.protected).length)throw new $("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ce=I=ee.getInitialContext(le).clone();continue}const Be=je.getProcessed(I);if(Be){if(Qe.eventHandler)for(const Ae of Be.events)F({event:Ae,options:Qe});Ce=I=Be.context;continue}if(X(Se)&&"@context"in Se&&(Se=Se["@context"]),!X(Se))throw new $("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Se});Ce=Ce.clone();const de=new Map;if("@version"in Se){if(1.1!==Se["@version"])throw new $("Unsupported JSON-LD version: "+Se["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Se});if(I.processingMode&&"json-ld-1.0"===I.processingMode)throw new $("@version: "+Se["@version"]+" not compatible with "+I.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Se});Ce.processingMode="json-ld-1.1",Ce["@version"]=Se["@version"],de.set("@version",!0)}if(Ce.processingMode=Ce.processingMode||I.processingMode,"@base"in Se){let Ae=Se["@base"];if(null!==Ae&&!L(Ae)){if(!G(Ae))throw new $('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Se});Ae=P(Ce["@base"],Ae)}Ce["@base"]=Ae,de.set("@base",!0)}if("@vocab"in Se){const Ae=Se["@vocab"];if(null===Ae)delete Ce["@vocab"];else{if(!_(Ae))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Se});if(!L(Ae)&&ee.processingMode(Ce,1))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Se});{const nt=W(Ce,Ae,{vocab:!0,base:!0},void 0,void 0,le);L(nt)||le.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:nt}},options:le}),Ce["@vocab"]=nt}}de.set("@vocab",!0)}if("@language"in Se){const Ae=Se["@language"];if(null===Ae)delete Ce["@language"];else{if(!_(Ae))throw new $('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Se});Ae.match(oe)||le.eventHandler&&F({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ae}},options:le}),Ce["@language"]=Ae.toLowerCase()}de.set("@language",!0)}if("@direction"in Se){const Ae=Se["@direction"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @direction not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Se});if(null===Ae)delete Ce["@direction"];else{if("ltr"!==Ae&&"rtl"!==Ae)throw new $('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Se});Ce["@direction"]=Ae}de.set("@direction",!0)}if("@propagate"in Se){const Ae=Se["@propagate"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @propagate not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Se});if("boolean"!=typeof Ae)throw new $("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});de.set("@propagate",!0)}if("@import"in Se){const Ae=Se["@import"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @import not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Se});if(!_(Ae))throw new $("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const nt=yield le.contextResolver.resolve({activeCtx:I,context:Ae,documentLoader:le.documentLoader,base:le.base});if(1!==nt.length)throw new $("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const mt=nt[0].getProcessed(I);if(mt)Se=mt;else{const Ke=nt[0].document;if("@import"in Ke)throw new $("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const fe in Ke)Se.hasOwnProperty(fe)||(Se[fe]=Ke[fe]);nt[0].setProcessed(I,Se)}de.set("@import",!0)}de.set("@protected",Se["@protected"]||!1);for(const Ae in Se)if(ee.createTermDefinition({activeCtx:Ce,localCtx:Se,term:Ae,defined:de,options:le,overrideProtected:Ie}),X(Se[Ae])&&"@context"in Se[Ae]){const nt=Se[Ae]["@context"];let mt=!0;if(_(nt)){const Ke=P(le.base,nt);ae.has(Ke)?mt=!1:ae.add(Ke)}if(mt)try{yield ee.process({activeCtx:Ce.clone(),localCtx:Se[Ae]["@context"],overrideProtected:!0,options:le,cycles:ae})}catch{throw new $("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Se[Ae]["@context"],term:Ae})}}je.setProcessed(I,{context:Ce,events:Pe})}return Ce});return function(I){return b.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:b,localCtx:I,term:T,defined:le,options:j,overrideProtected:Ie=!1})=>{if(le.has(T)){if(le.get(T))return;throw new $("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:I,term:T})}let ae;if(le.set(T,!1),I.hasOwnProperty(T)&&(ae=I[T]),"@type"===T&&X(ae)&&"@set"===(ae["@container"]||"@set")&&ee.processingMode(b,1.1)){const je=["@container","@id","@protected"],Se=Object.keys(ae);if(0===Se.length||Se.some(Be=>!je.includes(Be)))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:T})}else{if(ee.isKeyword(T))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:T});if(T.match(x))return void(j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:j}));if(""===T)throw new $("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:I})}const xe=b.mappings.get(T);b.mappings.has(T)&&b.mappings.delete(T);let Pe=!1;if((_(ae)||null===ae)&&(Pe=!0,ae={"@id":ae}),!X(ae))throw new $("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:I});const He={};b.mappings.set(T,He),He.reverse=!1;const Qe=["@container","@id","@language","@reverse","@type"];ee.processingMode(b,1.1)&&Qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const je in ae)if(!Qe.includes(je))throw new $("Invalid JSON-LD syntax; a term definition must not contain "+je,"jsonld.SyntaxError",{code:"invalid term definition",context:I});const qe=T.indexOf(":");if(He._termHasColon=qe>0,"@reverse"in ae){if("@id"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});if("@nest"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});const je=ae["@reverse"];if(!_(je))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(je.match(x))return j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:je}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));const Se=W(b,je,{vocab:!0,base:!1},I,le,j);if(!L(Se))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});He["@id"]=Se,He.reverse=!0}else if("@id"in ae){let je=ae["@id"];if(je&&!_(je))throw new $("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(null===je)He["@id"]=null;else{if(!ee.isKeyword(je)&&je.match(x))return j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:je}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));if(je!==T){if(je=W(b,je,{vocab:!0,base:!1},I,le,j),!L(je)&&!ee.isKeyword(je))throw new $("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(T.match(/(?::[^:])|\//)&&W(b,T,{vocab:!0,base:!1},I,new Map(le).set(T,!0),j)!==je)throw new $("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});He["@id"]=je,He._prefix=Pe&&!He._termHasColon&&null!==je.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in He))if(He._termHasColon){const je=T.substr(0,qe);if(I.hasOwnProperty(je)&&ee.createTermDefinition({activeCtx:b,localCtx:I,term:je,defined:le,options:j}),b.mappings.has(je)){const Se=T.substr(qe+1);He["@id"]=b.mappings.get(je)["@id"]+Se}else He["@id"]=T}else if("@type"===T)He["@id"]=T;else{if(!("@vocab"in b))throw new $("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I,term:T});He["@id"]=b["@vocab"]+T}if((!0===ae["@protected"]||!0===le.get("@protected")&&!1!==ae["@protected"])&&(b.protected[T]=!0,He.protected=!0),le.set(T,!0),"@type"in ae){let je=ae["@type"];if(!_(je))throw new $("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if("@json"===je||"@none"===je){if(ee.processingMode(b,1))throw new $(`Invalid JSON-LD syntax; an @context @type value must not be "${je}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else if("@id"!==je&&"@vocab"!==je){if(je=W(b,je,{vocab:!0,base:!1},I,le,j),!L(je))throw new $("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if(0===je.indexOf("_:"))throw new $("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}He["@type"]=je}if("@container"in ae){const je=_(ae["@container"])?[ae["@container"]]:ae["@container"]||[],Se=["@list","@set","@index","@language"];let Be=!0;const de=je.includes("@set");if(ee.processingMode(b,1.1)){if(Se.push("@graph","@id","@type"),je.includes("@list")){if(1!==je.length)throw new $("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else if(je.includes("@graph")){if(je.some(Ae=>"@graph"!==Ae&&"@id"!==Ae&&"@index"!==Ae&&"@set"!==Ae))throw new $("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else Be&=je.length<=(de?2:1);if(je.includes("@type")&&(He["@type"]=He["@type"]||"@id",!["@id","@vocab"].includes(He["@type"])))throw new $("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else Be&=!z(ae["@container"]),Be&=je.length<=1;if(Be&=je.every(Ae=>Se.includes(Ae)),Be&=!(de&&je.includes("@list")),!Be)throw new $("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Se.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:I});if(He.reverse&&!je.every(Ae=>["@index","@set"].includes(Ae)))throw new $("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});He["@container"]=je}if("@index"in ae){if(!("@container"in ae)||!He["@container"].includes("@index"))throw new $(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});if(!_(ae["@index"])||0===ae["@index"].indexOf("@"))throw new $(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});He["@index"]=ae["@index"]}if("@context"in ae&&(He["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let je=ae["@language"];if(null!==je&&!_(je))throw new $("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:I});null!==je&&(je=je.toLowerCase()),He["@language"]=je}if("@prefix"in ae){if(T.match(/:|\//))throw new $("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:I});if(ee.isKeyword(He["@id"]))throw new $("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:I});if("boolean"!=typeof ae["@prefix"])throw new $("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:I});He._prefix=!0===ae["@prefix"]}if("@direction"in ae){const je=ae["@direction"];if(null!==je&&"ltr"!==je&&"rtl"!==je)throw new $('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:I});He["@direction"]=je}if("@nest"in ae){const je=ae["@nest"];if(!_(je)||"@nest"!==je&&0===je.indexOf("@"))throw new $("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:I});He["@nest"]=je}const Ce=He["@id"];if("@context"===Ce||"@preserve"===Ce)throw new $("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:I});if(xe&&xe.protected&&!Ie&&(b.protected[T]=!0,He.protected=!0,!B(xe,He)))throw new $("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:I,term:T})},ee.expandIri=(b,I,T,le)=>W(b,I,T,void 0,void 0,le),ee.getInitialContext=b=>{const I=JSON.stringify({processingMode:b.processingMode}),T=Y.get(I);if(T)return T;const le={processingMode:b.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const He=this;if(He.inverse)return He.inverse;const Qe=He.inverse={},qe=He.fastCurieMap={},Ce={},je=(He["@language"]||"@none").toLowerCase(),Se=He["@direction"],Be=He.mappings,de=[...Be.keys()].sort(se);for(const Ae of de){const nt=Be.get(Ae);if(null===nt)continue;let mt=nt["@container"]||"@none";if(mt=[].concat(mt).sort().join(""),null===nt["@id"])continue;const Ke=k(nt["@id"]);for(const fe of Ke){let R=Qe[fe];const A=ee.isKeyword(fe);if(R)!A&&!nt._termHasColon&&Ce[fe].push(Ae);else if(Qe[fe]=R={},!A&&!nt._termHasColon){Ce[fe]=[Ae];const ie={iri:fe,terms:Ce[fe]};fe[0]in qe?qe[fe[0]].push(ie):qe[fe[0]]=[ie]}if(R[mt]||(R[mt]={"@language":{},"@type":{},"@any":{}}),R=R[mt],ae(Ae,R["@any"],"@none"),nt.reverse)ae(Ae,R["@type"],"@reverse");else if("@none"===nt["@type"])ae(Ae,R["@any"],"@none"),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none");else if("@type"in nt)ae(Ae,R["@type"],nt["@type"]);else if("@language"in nt&&"@direction"in nt){const ie=nt["@language"],Z=nt["@direction"];ae(Ae,R["@language"],ie&&Z?`${ie}_${Z}`.toLowerCase():ie?ie.toLowerCase():Z?`_${Z}`:"@null")}else"@language"in nt?ae(Ae,R["@language"],(nt["@language"]||"@null").toLowerCase()):"@direction"in nt?ae(Ae,R["@language"],nt["@direction"]?`_${nt["@direction"]}`:"@none"):Se?(ae(Ae,R["@language"],`_${Se}`),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none")):(ae(Ae,R["@language"],je),ae(Ae,R["@language"],"@none"),ae(Ae,R["@type"],"@none"))}}for(const Ae in qe)Ie(qe,Ae,1);return Qe},clone:function xe(){const He={};return He.mappings=C.clone(this.mappings),He.clone=this.clone,He.inverse=null,He.getInverse=this.getInverse,He.protected=C.clone(this.protected),this.previousContext&&(He.previousContext=this.previousContext.clone()),He.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(He["@base"]=this["@base"]),"@language"in this&&(He["@language"]=this["@language"]),"@vocab"in this&&(He["@vocab"]=this["@vocab"]),He},revertToPreviousContext:function Pe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Y.size&&Y.clear(),Y.set(I,le),le;function Ie(He,Qe,qe){const Ce=He[Qe],je=He[Qe]={};let Se,Be;for(const de of Ce)Se=de.iri,Be=qe>=Se.length?"":Se[qe],Be in je?je[Be].push(de):je[Be]=[de];for(const de in je)""!==de&&Ie(je,de,qe+1)}function ae(He,Qe,qe){Qe.hasOwnProperty(qe)||(Qe[qe]=He)}},ee.getContextValue=(b,I,T)=>{if(null===I)return"@context"===T?void 0:null;if(b.mappings.has(I)){const le=b.mappings.get(I);if(E(T))return le;if(le.hasOwnProperty(T))return le[T]}return"@language"===T&&T in b||"@direction"===T&&T in b?b[T]:"@context"!==T?null:void 0},ee.processingMode=(b,I)=>I.toString()>="1.1"?!b.processingMode||b.processingMode>="json-ld-"+I.toString():"json-ld-1.0"===b.processingMode,ee.isKeyword=b=>{if(!_(b)||"@"!==b[0])return!1;switch(b){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{parseLinkHeader:C,buildHeaders:$}=S(3521),{LINK_HEADER_CONTEXT:z}=S(6982),X=S(1874),_=S(4044),{prependBase:E}=S(2651),L=/(^|(\r\n))link:/i;Ue.exports=({secure:P,headers:F={},xhr:oe}={headers:{}})=>{return F=$(F),(new _).wrapLoader(k);function k(Y){return se.apply(this,arguments)}function se(){return se=Q(function*(Y){if(0!==Y.indexOf("http:")&&0!==Y.indexOf("https:"))throw new X('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});if(P&&0!==Y.indexOf("https"))throw new X('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});let J;try{J=yield function G(P,F,oe){const x=new(P=P||XMLHttpRequest);return new Promise((k,se)=>{x.onload=()=>k(x),x.onerror=Y=>se(Y),x.open("GET",F,!0);for(const Y in oe)x.setRequestHeader(Y,oe[Y]);x.send()})}(oe,Y,F)}catch(I){throw new X("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Y,cause:I})}if(J.status>=400)throw new X("URL could not be dereferenced: "+J.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Y,httpStatusCode:J.status});let ee={contextUrl:null,documentUrl:Y,document:J.response},W=null;const B=J.getResponseHeader("Content-Type");let b;if(L.test(J.getAllResponseHeaders())&&(b=J.getResponseHeader("Link")),b&&"application/ld+json"!==B){const I=C(b),T=I[z];if(Array.isArray(T))throw new X("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Y});T&&(ee.contextUrl=T.target),W=I.alternate,W&&"application/ld+json"==W.type&&!(B||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield k(E(Y,W.target)))}return ee}),se.apply(this,arguments)}}},3855:(Ue,_e,S)=>{"use strict";const Q=S(1874),{isArray:C}=S(8254),{asArray:$}=S(3521),z={};function X({event:E,handlers:L}){let G=!0;for(let P=0;G&&P<L.length;++P){G=!1;const F=L[P];if(C(F))G=X({event:E,handlers:F});else if("function"==typeof F)F({event:E,next:()=>{G=!0}});else{if("object"!=typeof F)throw new Q("Invalid event handler.","jsonld.InvalidEventHandler",{event:E});E.code in F?F[E.code]({event:E,next:()=>{G=!0}}):G=!0}}return G}Ue.exports=z,z.defaultEventHandler=null,z.setupEventHandler=({options:E={}})=>{const L=[].concat(E.safe?z.safeEventHandler:[],E.eventHandler?$(E.eventHandler):[],z.defaultEventHandler?z.defaultEventHandler:[]);return 0===L.length?null:L},z.handleEvent=({event:E,options:L})=>{X({event:E,handlers:L.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);z.safeEventHandler=function({event:L,next:G}){if("warning"===L.level&&_.has(L.code))throw new Q("Safe mode validation error.","jsonld.ValidationError",{event:L});G()},z.logEventHandler=function({event:L,next:G}){console.log(`EVENT: ${L.message}`,{event:L}),G()},z.logWarningEventHandler=function({event:L,next:G}){"warning"===L.level&&console.warn(`WARNING: ${L.message}`,{event:L}),G()},z.unhandledEventHandler=function({event:L}){throw new Q("No handler for event.","jsonld.UnhandledEvent",{event:L})},z.setDefaultEventHandler=function({eventHandler:E}={}){z.defaultEventHandler=E?$(E):null}},3860:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),{isArray:$,isObject:z,isEmptyObject:X,isString:_,isUndefined:E}=S(8254),{isList:L,isValue:G,isGraph:P,isSubject:F}=S(543),{expandIri:oe,getContextValue:x,isKeyword:k,process:se,processingMode:Y}=S(9611),{isAbsolute:J}=S(2651),{REGEX_BCP47:ee,REGEX_KEYWORD:W,addValue:B,asArray:b,getValues:I,validateTypeValue:T}=S(3521),{handleEvent:le}=S(3855),j={};function Ie({value:Ce,count:je,options:Se}){if(0===je||"@value"in Ce||"@list"in Ce||1===je&&"@id"in Ce){if(Se.eventHandler){let Be,de;0===je?(Be="empty object",de="Dropping empty object."):"@value"in Ce?(Be="object with only @value",de="Dropping object with only @value."):"@list"in Ce?(Be="object with only @list",de="Dropping object with only @list."):1===je&&"@id"in Ce&&(Be="object with only @id",de="Dropping object with only @id."),le({event:{type:["JsonLdEvent"],code:Be,level:"warning",message:de,details:{value:Ce}},options:Se})}return null}return Ce}function ae(Ce){return xe.apply(this,arguments)}function xe(){return(xe=Q(function*({activeCtx:Ce,activeProperty:je,expandedActiveProperty:Se,element:Be,expandedParent:de,options:Ae={},insideList:nt,typeKey:mt,typeScopedContext:Ke}){const fe=Object.keys(Be).sort(),R=[];let A;const ie=Be[mt]&&"@json"===oe(Ce,$(Be[mt])?Be[mt][0]:Be[mt],{vocab:!0},{...Ae,typeExpansion:!0});for(const Z of fe){let Je,Ve=Be[Z];if("@context"===Z)continue;const ue=oe(Ce,Z,{vocab:!0},Ae);if(null===ue||!J(ue)&&!k(ue)){Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Z,expandedProperty:ue}},options:Ae});continue}if(k(ue)){if("@reverse"===Se)throw new C("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ve});if(ue in de&&"@included"!==ue&&"@type"!==ue)throw new C("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ue})}if("@id"===ue){if(!_(Ve)){if(!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve});if(z(Ve)){if(!X(Ve))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve})}else{if(!$(Ve))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve});if(!Ve.every(O=>_(O)))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ve})}}B(de,"@id",b(Ve).map(O=>{if(_(O)){const he=oe(Ce,O,{base:!0},Ae);return Ae.eventHandler&&(null===he?le(null===O?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:Ae}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:Ae}):J(he)||le({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:he}},options:Ae})),he}return O}),{propertyIsArray:Ae.isFrame});continue}if("@type"===ue){z(Ve)&&(Ve=Object.fromEntries(Object.entries(Ve).map(([O,he])=>[oe(Ke,O,{vocab:!0}),b(he).map(We=>oe(Ke,We,{base:!0,vocab:!0},{...Ae,typeExpansion:!0}))]))),T(Ve,Ae.isFrame),B(de,"@type",b(Ve).map(O=>{if(_(O)){const he=oe(Ke,O,{base:!0,vocab:!0},{...Ae,typeExpansion:!0});return"@json"!==he&&!J(he)&&Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:Ae}),he}return O}),{propertyIsArray:!!Ae.isFrame});continue}if("@included"===ue&&Y(Ce,1.1)){const O=b(yield j.expand({activeCtx:Ce,activeProperty:je,element:Ve,options:Ae}));if(!O.every(he=>F(he)))throw new C("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Ve});B(de,"@included",O,{propertyIsArray:!0});continue}if("@graph"===ue&&!z(Ve)&&!$(Ve))throw new C('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ve});if("@value"===ue){A=Ve,ie&&Y(Ce,1.1)?de["@value"]=Ve:B(de,"@value",Ve,{propertyIsArray:Ae.isFrame});continue}if("@language"===ue){if(null===Ve)continue;if(!_(Ve)&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ve});Ve=b(Ve).map(O=>_(O)?O.toLowerCase():O);for(const O of Ve)_(O)&&!O.match(ee)&&Ae.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:Ae});B(de,"@language",Ve,{propertyIsArray:Ae.isFrame});continue}if("@direction"===ue){if(!_(Ve)&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Ve});Ve=b(Ve);for(const O of Ve)if(_(O)&&"ltr"!==O&&"rtl"!==O)throw new C('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Ve});B(de,"@direction",Ve,{propertyIsArray:Ae.isFrame});continue}if("@index"===ue){if(!_(Ve))throw new C('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ve});B(de,"@index",Ve);continue}if("@reverse"===ue){if(!z(Ve))throw new C('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ve});if(Je=yield j.expand({activeCtx:Ce,activeProperty:"@reverse",element:Ve,options:Ae}),"@reverse"in Je)for(const he in Je["@reverse"])B(de,he,Je["@reverse"][he],{propertyIsArray:!0});let O=de["@reverse"]||null;for(const he in Je){if("@reverse"===he)continue;null===O&&(O=de["@reverse"]={}),B(O,he,[],{propertyIsArray:!0});const We=Je[he];for(let Ee=0;Ee<We.length;++Ee){const Re=We[Ee];if(G(Re)||L(Re))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});B(O,he,Re,{propertyIsArray:!0})}}continue}if("@nest"===ue){R.push(Z);continue}let ne=Ce;const V=x(Ce,Z,"@context");E(V)||(ne=yield se({activeCtx:Ce,localCtx:V,propagate:!0,overrideProtected:!0,options:Ae}));const M=x(Ce,Z,"@container")||[];if(M.includes("@language")&&z(Ve))Je=He(ne,Ve,x(ne,Z,"@direction"),Ae);else if(M.includes("@index")&&z(Ve)){const O=M.includes("@graph"),he=x(ne,Z,"@index")||"@index",We="@index"!==he&&oe(Ce,he,{vocab:!0},Ae);Je=yield Qe({activeCtx:ne,options:Ae,activeProperty:Z,value:Ve,asGraph:O,indexKey:he,propertyIndex:We})}else if(M.includes("@id")&&z(Ve)){const O=M.includes("@graph");Je=yield Qe({activeCtx:ne,options:Ae,activeProperty:Z,value:Ve,asGraph:O,indexKey:"@id"})}else if(M.includes("@type")&&z(Ve))Je=yield Qe({activeCtx:ne.revertToPreviousContext(),options:Ae,activeProperty:Z,value:Ve,asGraph:!1,indexKey:"@type"});else{const O="@list"===ue;if(O||"@set"===ue){let he=je;O&&"@graph"===Se&&(he=null),Je=yield j.expand({activeCtx:ne,activeProperty:he,element:Ve,options:Ae,insideList:O})}else Je="@json"===x(Ce,Z,"@type")?{"@type":"@json","@value":Ve}:yield j.expand({activeCtx:ne,activeProperty:Z,element:Ve,options:Ae,insideList:!1})}if(null!==Je||"@value"===ue){if("@list"!==ue&&!L(Je)&&M.includes("@list")&&(Je={"@list":b(Je)}),M.includes("@graph")&&!M.some(O=>"@id"===O||"@index"===O)){if(Je=b(Je),Ae.isFrame||(Je=Je.filter(O=>null!==Ie({value:O,count:Object.keys(O).length,options:Ae}))),0===Je.length)continue;Je=Je.map(O=>({"@graph":b(O)}))}if(ne.mappings.has(Z)&&ne.mappings.get(Z).reverse){const O=de["@reverse"]=de["@reverse"]||{};Je=b(Je);for(let he=0;he<Je.length;++he){const We=Je[he];if(G(We)||L(We))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Je});B(O,ue,We,{propertyIsArray:!0})}continue}B(de,ue,Je,{propertyIsArray:!0})}}if("@value"in de&&("@json"!==de["@type"]||!Y(Ce,1.1))&&(z(A)||$(A))&&!Ae.isFrame)throw new C('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:A});for(const Z of R){const Ve=$(Be[Z])?Be[Z]:[Be[Z]];for(const Je of Ve){if(!z(Je)||Object.keys(Je).some(ue=>"@value"===oe(Ce,ue,{vocab:!0},Ae)))throw new C("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Je});yield ae({activeCtx:Ce,activeProperty:je,expandedActiveProperty:Se,element:Je,expandedParent:de,options:Ae,insideList:nt,typeScopedContext:Ke,typeKey:mt})}}})).apply(this,arguments)}function Pe({activeCtx:Ce,activeProperty:je,value:Se,options:Be}){if(null==Se)return null;const de=oe(Ce,je,{vocab:!0},Be);if("@id"===de)return oe(Ce,Se,{base:!0},Be);if("@type"===de)return oe(Ce,Se,{vocab:!0,base:!0},{...Be,typeExpansion:!0});const Ae=x(Ce,je,"@type");if(("@id"===Ae||"@graph"===de)&&_(Se)){const mt=oe(Ce,Se,{base:!0},Be);return null===mt&&Se.match(W)&&Be.eventHandler&&le({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:je}},options:Be}),{"@id":mt}}if("@vocab"===Ae&&_(Se))return{"@id":oe(Ce,Se,{vocab:!0,base:!0},Be)};if(k(de))return Se;const nt={};if(Ae&&!["@id","@vocab","@none"].includes(Ae))nt["@type"]=Ae;else if(_(Se)){const mt=x(Ce,je,"@language");null!==mt&&(nt["@language"]=mt);const Ke=x(Ce,je,"@direction");null!==Ke&&(nt["@direction"]=Ke)}return["boolean","number","string"].includes(typeof Se)||(Se=Se.toString()),nt["@value"]=Se,nt}function He(Ce,je,Se,Be){const de=[],Ae=Object.keys(je).sort();for(const nt of Ae){const mt=oe(Ce,nt,{vocab:!0},Be);let Ke=je[nt];$(Ke)||(Ke=[Ke]);for(const fe of Ke){if(null===fe)continue;if(!_(fe))throw new C("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:je});const R={"@value":fe};"@none"!==mt&&(nt.match(ee)||Be.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt}},options:Be}),R["@language"]=nt.toLowerCase()),Se&&(R["@direction"]=Se),de.push(R)}}return de}function Qe(Ce){return qe.apply(this,arguments)}function qe(){return(qe=Q(function*({activeCtx:Ce,options:je,activeProperty:Se,value:Be,asGraph:de,indexKey:Ae,propertyIndex:nt}){const mt=[],Ke=Object.keys(Be).sort(),fe="@type"===Ae;for(let R of Ke){if(fe){const Z=x(Ce,R,"@context");E(Z)||(Ce=yield se({activeCtx:Ce,localCtx:Z,propagate:!1,options:je}))}let ie,A=Be[R];$(A)||(A=[A]),A=yield j.expand({activeCtx:Ce,activeProperty:Se,element:A,options:je,insideList:!1,insideIndex:!0}),ie=nt?"@none"===R?"@none":Pe({activeCtx:Ce,activeProperty:Ae,value:R,options:je}):oe(Ce,R,{vocab:!0},je),"@id"===Ae?R=oe(Ce,R,{base:!0},je):fe&&(R=ie);for(let Z of A){if(de&&!P(Z)&&(Z={"@graph":[Z]}),"@type"===Ae)"@none"===ie||(Z["@type"]=Z["@type"]?[R].concat(Z["@type"]):[R]);else{if(G(Z)&&!["@language","@type","@index"].includes(Ae))throw new C(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Z});nt?"@none"!==ie&&B(Z,nt,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Ae in Z)&&(Z[Ae]=R)}mt.push(Z)}}return mt})).apply(this,arguments)}Ue.exports=j,j.expand=function(){var Ce=Q(function*({activeCtx:je,activeProperty:Se=null,element:Be,options:de={},insideList:Ae=!1,insideIndex:nt=!1,typeScopedContext:mt=null}){if(null==Be)return null;if("@default"===Se&&(de=Object.assign({},de,{isFrame:!1})),!$(Be)&&!z(Be))return Ae||null!==Se&&"@graph"!==oe(je,Se,{vocab:!0},de)?Pe({activeCtx:je,activeProperty:Se,value:Be,options:de}):(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Be}},options:de}),null);if($(Be)){let Je=[];const ue=x(je,Se,"@container")||[];Ae=Ae||ue.includes("@list");for(let ne=0;ne<Be.length;++ne){let V=yield j.expand({activeCtx:je,activeProperty:Se,element:Be[ne],options:de,insideIndex:nt,typeScopedContext:mt});Ae&&$(V)&&(V={"@list":V}),null!==V&&($(V)?Je=Je.concat(V):Je.push(V))}return Je}const Ke=oe(je,Se,{vocab:!0},de),fe=x(je,Se,"@context");mt=mt||(je.previousContext?je:null);let R=Object.keys(Be).sort(),A=!nt;if(A&&mt&&R.length<=2&&!R.includes("@context"))for(const Je of R){const ue=oe(mt,Je,{vocab:!0},de);if("@value"===ue){A=!1,je=mt;break}if("@id"===ue&&1===R.length){A=!1;break}}A&&(je=je.revertToPreviousContext()),E(fe)||(je=yield se({activeCtx:je,localCtx:fe,propagate:!0,overrideProtected:!0,options:de})),"@context"in Be&&(je=yield se({activeCtx:je,localCtx:Be["@context"],options:de})),mt=je;let ie=null;for(const Je of R)if("@type"===oe(je,Je,{vocab:!0},de)){ie=ie||Je;const ne=Be[Je],V=Array.isArray(ne)?ne.length>1?ne.slice().sort():ne:[ne];for(const M of V){const O=x(mt,M,"@context");E(O)||(je=yield se({activeCtx:je,localCtx:O,options:de,propagate:!1}))}}let Z={};yield ae({activeCtx:je,activeProperty:Se,expandedActiveProperty:Ke,element:Be,expandedParent:Z,options:de,insideList:Ae,typeKey:ie,typeScopedContext:mt}),R=Object.keys(Z);let Ve=R.length;if("@value"in Z){if("@type"in Z&&("@language"in Z||"@direction"in Z))throw new C('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});let Je=Ve-1;if("@type"in Z&&(Je-=1),"@index"in Z&&(Je-=1),"@language"in Z&&(Je-=1),"@direction"in Z&&(Je-=1),0!==Je)throw new C('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});const ue=null===Z["@value"]?[]:b(Z["@value"]),ne=I(Z,"@type");if(!Y(je,1.1)||!ne.includes("@json")||1!==ne.length)if(0===ue.length)de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Z}},options:de}),Z=null;else{if(!ue.every(V=>_(V)||X(V))&&"@language"in Z)throw new C("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Z});if(!ne.every(V=>J(V)&&!(_(V)&&0===V.indexOf("_:"))||X(V)))throw new C('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Z})}}else if("@type"in Z&&!$(Z["@type"]))Z["@type"]=[Z["@type"]];else if("@set"in Z||"@list"in Z){if(Ve>1&&(2!==Ve||!("@index"in Z)))throw new C('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Z});"@set"in Z&&(Z=Z["@set"],R=Object.keys(Z),Ve=R.length)}else 1===Ve&&"@language"in Z&&(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Z}},options:de}),Z=null);return z(Z)&&!de.keepFreeFloatingNodes&&!Ae&&(null===Se||"@graph"===Ke||(x(je,Se,"@container")||[]).includes("@graph"))&&(Z=Ie({value:Z,count:Ve,options:de})),Z});return function(je){return Ce.apply(this,arguments)}}()},8295:(Ue,_e,S)=>{"use strict";const{isSubjectReference:Q}=S(543),{createMergedNodeMap:C}=S(9783),$={};Ue.exports=$,$.flatten=z=>{const X=C(z),_=[],E=Object.keys(X).sort();for(let L=0;L<E.length;++L){const G=X[E[L]];Q(G)||_.push(G)}return _}},9193:(Ue,_e,S)=>{"use strict";const{isKeyword:Q}=S(9611),C=S(543),$=S(8254),z=S(3521),X=S(2651),_=S(1874),{createNodeMap:E,mergeNodeMapGraphs:L}=S(9783),G={};function P(b){const I={};for(const T in b)void 0!==b[T]&&(I["@"+T]=[b[T]]);return[I]}function F(b,I,T){for(let le=T.length-1;le>=0;--le){const j=T[le];if(j.graph===I&&j.subject["@id"]===b["@id"])return!0}return!1}function oe(b,I,T){const le="@"+T;let j=le in b?b[le][0]:I[T];if("embed"===T)if(!0===j)j="@once";else if(!1===j)j="@never";else if("@always"!==j&&"@never"!==j&&"@link"!==j&&"@first"!==j&&"@last"!==j&&"@once"!==j)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:b});return j}function x(b){if(!$.isArray(b)||1!==b.length||!$.isObject(b[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:b});if("@id"in b[0])for(const I of z.asArray(b[0]["@id"]))if(!$.isObject(I)&&!X.isAbsolute(I)||$.isString(I)&&0===I.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b});if("@type"in b[0])for(const I of z.asArray(b[0]["@type"]))if(!$.isObject(I)&&!X.isAbsolute(I)&&"@json"!==I||$.isString(I)&&0===I.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b})}function se(b,I,T,le){let j=!0,Ie=!1;for(const ae in T){let xe=!1;const Pe=z.getValues(I,ae),He=0===z.getValues(T,ae).length;if("@id"===ae){if($.isEmptyObject(T["@id"][0]||{})?xe=!0:T["@id"].length>=0&&(xe=T["@id"].includes(Pe[0])),!le.requireAll)return xe}else if("@type"===ae){if(j=!1,He){if(Pe.length>0)return!1;xe=!0}else if(1===T["@type"].length&&$.isEmptyObject(T["@type"][0]))xe=Pe.length>0;else for(const Qe of T["@type"])xe=!(!$.isObject(Qe)||!("@default"in Qe))||xe||Pe.some(qe=>qe===Qe);if(!le.requireAll)return xe}else{if(Q(ae))continue;{const Qe=z.getValues(T,ae)[0];let qe=!1;if(Qe&&(x([Qe]),qe="@default"in Qe),j=!1,0===Pe.length&&qe)continue;if(Pe.length>0&&He)return!1;if(void 0===Qe){if(Pe.length>0)return!1;xe=!0}else if(C.isList(Qe)){const Ce=Qe["@list"][0];if(C.isList(Pe[0])){const je=Pe[0]["@list"];C.isValue(Ce)?xe=je.some(Se=>B(Ce,Se)):(C.isSubject(Ce)||C.isSubjectReference(Ce))&&(xe=je.some(Se=>W(b,Ce,Se,le)))}}else xe=C.isValue(Qe)?Pe.some(Ce=>B(Qe,Ce)):C.isSubjectReference(Qe)?Pe.some(Ce=>W(b,Qe,Ce,le)):!!$.isObject(Qe)&&Pe.length>0}}if(!xe&&le.requireAll)return!1;Ie=Ie||xe}return j||Ie}function Y(b,I){const T=b.uniqueEmbeds[b.graph],le=T[I],j=le.parent,Ie=le.property,ae={"@id":I};if($.isArray(j)){for(let Pe=0;Pe<j.length;++Pe)if(z.compareValues(j[Pe],ae)){j[Pe]=ae;break}}else{const Pe=$.isArray(j[Ie]);z.removeValue(j,Ie,ae,{propertyIsArray:Pe}),z.addValue(j,Ie,ae,{propertyIsArray:Pe})}const xe=Pe=>{const He=Object.keys(T);for(const Qe of He)Qe in T&&$.isObject(T[Qe].parent)&&T[Qe].parent["@id"]===Pe&&(delete T[Qe],xe(Qe))};xe(I)}function J(b,I){if($.isArray(b))return b.map(T=>J(T,I));if($.isObject(b)){if("@preserve"in b)return b["@preserve"][0];if(C.isValue(b))return b;if(C.isList(b))return b["@list"]=J(b["@list"],I),b;if("@id"in b){const T=b["@id"];if(I.link.hasOwnProperty(T)){const le=I.link[T].indexOf(b);if(-1!==le)return I.link[T][le];I.link[T].push(b)}else I.link[T]=[b]}for(const T in b)"@id"===T&&I.bnodesToClear.includes(b[T])?delete b["@id"]:b[T]=J(b[T],I)}return b}function ee(b,I,T){$.isObject(b)?z.addValue(b,I,T,{propertyIsArray:!0}):b.push(T)}function W(b,I,T,le){if(!("@id"in T))return!1;const j=b.subjects[T["@id"]];return j&&se(b,j,I,le)}function B(b,I){const T=I["@value"],le=I["@type"],j=I["@language"],Ie=b["@value"]?$.isArray(b["@value"])?b["@value"]:[b["@value"]]:[],ae=b["@type"]?$.isArray(b["@type"])?b["@type"]:[b["@type"]]:[],xe=b["@language"]?$.isArray(b["@language"])?b["@language"]:[b["@language"]]:[];return 0===Ie.length&&0===ae.length&&0===xe.length||!(!Ie.includes(T)&&!$.isEmptyObject(Ie[0])||!(!le&&0===ae.length||ae.includes(le)||le&&$.isEmptyObject(ae[0]))||!(!j&&0===xe.length||xe.includes(j)||j&&$.isEmptyObject(xe[0])))}Ue.exports=G,G.frameMergedOrDefault=(b,I,T)=>{const le={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},j=new z.IdentifierIssuer("_:b");E(b,le.graphMap,"@default",j),T.merged&&(le.graphMap["@merged"]=L(le.graphMap),le.graph="@merged"),le.subjects=le.graphMap[le.graph];const Ie=[];return G.frame(le,Object.keys(le.subjects).sort(),I,Ie),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(le.bnodeMap).filter(ae=>1===le.bnodeMap[ae].length)),T.link={},J(Ie,T)},G.frame=(b,I,T,le,j=null)=>{x(T);const Ie=b.options,ae={embed:oe(T=T[0],Ie,"embed"),explicit:oe(T,Ie,"explicit"),requireAll:oe(T,Ie,"requireAll")};b.link.hasOwnProperty(b.graph)||(b.link[b.graph]={});const xe=b.link[b.graph],Pe=function k(b,I,T,le){const j={};for(const Ie of I){const ae=b.graphMap[b.graph][Ie];se(b,ae,T,le)&&(j[Ie]=ae)}return j}(b,I,T,ae),He=Object.keys(Pe).sort();for(const Qe of He){const qe=Pe[Qe];if(null===j?b.uniqueEmbeds={[b.graph]:{}}:b.uniqueEmbeds[b.graph]=b.uniqueEmbeds[b.graph]||{},"@link"===ae.embed&&Qe in xe){ee(le,j,xe[Qe]);continue}const Ce={"@id":Qe};if(0===Qe.indexOf("_:")&&z.addValue(b.bnodeMap,Qe,Ce,{propertyIsArray:!0}),xe[Qe]=Ce,("@first"===ae.embed||"@last"===ae.embed)&&b.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(b.embedded||!b.uniqueEmbeds[b.graph].hasOwnProperty(Qe)){if(b.embedded&&("@never"===ae.embed||F(qe,b.graph,b.subjectStack))){ee(le,j,Ce);continue}if(b.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&b.uniqueEmbeds[b.graph].hasOwnProperty(Qe)){ee(le,j,Ce);continue}if("@last"===ae.embed&&Qe in b.uniqueEmbeds[b.graph]&&Y(b,Qe),b.uniqueEmbeds[b.graph][Qe]={parent:le,property:j},b.subjectStack.push({subject:qe,graph:b.graph}),Qe in b.graphMap){let je=!1,Se=null;"@graph"in T?(Se=T["@graph"][0],je=!("@merged"===Qe||"@default"===Qe),$.isObject(Se)||(Se={})):(je="@merged"!==b.graph,Se={}),je&&G.frame({...b,graph:Qe,embedded:!1},Object.keys(b.graphMap[Qe]).sort(),[Se],Ce,"@graph")}"@included"in T&&G.frame({...b,embedded:!1},I,T["@included"],Ce,"@included");for(const je of Object.keys(qe).sort())if(Q(je)){if(Ce[je]=z.clone(qe[je]),"@type"===je)for(const Se of qe["@type"])0===Se.indexOf("_:")&&z.addValue(b.bnodeMap,Se,Ce,{propertyIsArray:!0})}else if(!ae.explicit||je in T)for(const Se of qe[je]){const Be=je in T?T[je]:P(ae);if(C.isList(Se)){const de=T[je]&&T[je][0]&&T[je][0]["@list"]?T[je][0]["@list"]:P(ae),Ae={"@list":[]};ee(Ce,je,Ae);const nt=Se["@list"];for(const mt of nt)C.isSubjectReference(mt)?G.frame({...b,embedded:!0},[mt["@id"]],de,Ae,"@list"):ee(Ae,"@list",z.clone(mt))}else C.isSubjectReference(Se)?G.frame({...b,embedded:!0},[Se["@id"]],Be,Ce,je):B(Be[0],Se)&&ee(Ce,je,z.clone(Se))}for(const je of Object.keys(T).sort()){if("@type"===je){if(!$.isObject(T[je][0])||!("@default"in T[je][0]))continue}else if(Q(je))continue;const Se=T[je][0]||{};if(!oe(Se,Ie,"omitDefault")&&!(je in Ce)){let de="@null";"@default"in Se&&(de=z.clone(Se["@default"])),$.isArray(de)||(de=[de]),Ce[je]=[{"@preserve":de}]}}for(const je of Object.keys(T["@reverse"]||{}).sort()){const Se=T["@reverse"][je];for(const Be of Object.keys(b.subjects))z.getValues(b.subjects[Be],je).some(Ae=>Ae["@id"]===Qe)&&(Ce["@reverse"]=Ce["@reverse"]||{},z.addValue(Ce["@reverse"],je,[],{propertyIsArray:!0}),G.frame({...b,embedded:!0},[Be],Se,Ce["@reverse"][je],j))}ee(le,j,Ce),b.subjectStack.pop()}}},G.cleanupNull=(b,I)=>{if($.isArray(b))return b.map(le=>G.cleanupNull(le,I)).filter(le=>le);if("@null"===b)return null;if($.isObject(b)){if("@id"in b){const T=b["@id"];if(I.link.hasOwnProperty(T)){const le=I.link[T].indexOf(b);if(-1!==le)return I.link[T][le];I.link[T].push(b)}else I.link[T]=[b]}for(const T in b)b[T]=G.cleanupNull(b[T],I)}return b}},9767:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1874),$=S(543),z=S(8254),{REGEX_BCP47:X,addValue:_}=S(3521),{handleEvent:E}=S(3855),{RDF_LIST:L,RDF_FIRST:G,RDF_REST:P,RDF_NIL:F,RDF_TYPE:oe,RDF_JSON_LITERAL:x,XSD_BOOLEAN:k,XSD_DOUBLE:se,XSD_INTEGER:Y,XSD_STRING:J}=S(6982),ee={};function W(B,b,I,T){if(B.termType.endsWith("Node"))return{"@id":B.value};const le={"@value":B.value};if(B.language)B.language.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:B.language}},options:T}),le["@language"]=B.language;else{let j=B.datatype.value;if(j||(j=J),j===x){j="@json";try{le["@value"]=JSON.parse(le["@value"])}catch(Ie){throw new C("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:le["@value"],cause:Ie})}}if(b){if(j===k)"true"===le["@value"]?le["@value"]=!0:"false"===le["@value"]&&(le["@value"]=!1);else if(z.isNumeric(le["@value"]))if(j===Y){const Ie=parseInt(le["@value"],10);Ie.toFixed(0)===le["@value"]&&(le["@value"]=Ie)}else j===se&&(le["@value"]=parseFloat(le["@value"]));[k,Y,se,J].includes(j)||(le["@type"]=j)}else if("i18n-datatype"===I&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,Ie,ae]=j.split(/[#_]/);Ie.length>0&&(le["@language"]=Ie,Ie.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ie}},options:T})),le["@direction"]=ae}else j!==J&&(le["@type"]=j)}return le}Ue.exports=ee,ee.fromRDF=function(){var B=Q(function*(b,I){const{useRdfType:T=!1,useNativeTypes:le=!1,rdfDirection:j=null}=I,Ie={},ae={"@default":Ie},xe={};if(j){if("compound-literal"===j)throw new C("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:j});if("i18n-datatype"!==j)throw new C("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:j})}for(const Qe of b){const qe="DefaultGraph"===Qe.graph.termType?"@default":Qe.graph.value;qe in ae||(ae[qe]={}),"@default"!==qe&&!(qe in Ie)&&(Ie[qe]={"@id":qe});const Ce=ae[qe],je=Qe.subject.value,Se=Qe.predicate.value,Be=Qe.object;je in Ce||(Ce[je]={"@id":je});const de=Ce[je],Ae=Be.termType.endsWith("Node");if(Ae&&!(Be.value in Ce)&&(Ce[Be.value]={"@id":Be.value}),Se===oe&&!T&&Ae){_(de,"@type",Be.value,{propertyIsArray:!0});continue}const nt=W(Be,le,j,I);if(_(de,Se,nt,{propertyIsArray:!0}),Ae)if(Be.value===F){const mt=Ce[Be.value];"usages"in mt||(mt.usages=[]),mt.usages.push({node:de,property:Se,value:nt})}else xe[Be.value]=!(Be.value in xe)&&{node:de,property:Se,value:nt}}for(const Qe in ae){const qe=ae[Qe];if(!(F in qe))continue;const Ce=qe[F];if(Ce.usages){for(let je of Ce.usages){let Se=je.node,Be=je.property,de=je.value;const Ae=[],nt=[];let mt=Object.keys(Se).length;for(;Be===P&&z.isObject(xe[Se["@id"]])&&z.isArray(Se[G])&&1===Se[G].length&&z.isArray(Se[P])&&1===Se[P].length&&(3===mt||4===mt&&z.isArray(Se["@type"])&&1===Se["@type"].length&&Se["@type"][0]===L)&&(Ae.push(Se[G][0]),nt.push(Se["@id"]),je=xe[Se["@id"]],Se=je.node,Be=je.property,de=je.value,mt=Object.keys(Se).length,$.isBlankNode(Se)););delete de["@id"],de["@list"]=Ae.reverse();for(const Ke of nt)delete qe[Ke]}delete Ce.usages}}const Pe=[],He=Object.keys(Ie).sort();for(const Qe of He){const qe=Ie[Qe];if(Qe in ae){const Ce=qe["@graph"]=[],je=ae[Qe],Se=Object.keys(je).sort();for(const Be of Se){const de=je[Be];$.isSubjectReference(de)||Ce.push(de)}}$.isSubjectReference(qe)||Pe.push(qe)}return Pe});return function(b,I){return B.apply(this,arguments)}}()},543:(Ue,_e,S)=>{"use strict";const Q=S(8254),C={};Ue.exports=C,C.isSubject=$=>!(!Q.isObject($)||"@value"in $||"@set"in $||"@list"in $)&&(Object.keys($).length>1||!("@id"in $)),C.isSubjectReference=$=>Q.isObject($)&&1===Object.keys($).length&&"@id"in $,C.isValue=$=>Q.isObject($)&&"@value"in $,C.isList=$=>Q.isObject($)&&"@list"in $,C.isGraph=$=>Q.isObject($)&&"@graph"in $&&1===Object.keys($).filter(z=>"@id"!==z&&"@index"!==z).length,C.isSimpleGraph=$=>C.isGraph($)&&!("@id"in $),C.isBlankNode=$=>{if(Q.isObject($)){if("@id"in $){const z=$["@id"];return!Q.isString(z)||0===z.indexOf("_:")}return 0===Object.keys($).length||!("@value"in $||"@set"in $||"@list"in $)}return!1}},7661:(Ue,_e,S)=>{var Q=S(7156).default;const C=S(1986),$=S(8924),z=S(3521),X=S(4198),_=z.IdentifierIssuer,E=S(1874),L=S(1072),G=S(7260),{expand:P}=S(3860),{flatten:F}=S(8295),{fromRDF:oe}=S(9767),{toRDF:x}=S(240),{frameMergedOrDefault:k,cleanupNull:se}=S(9193),{isArray:Y,isObject:J,isString:ee}=S(8254),{isSubjectReference:W}=S(543),{expandIri:B,getInitialContext:b,process:I,processingMode:T}=S(9611),{compact:le,compactIri:j}=S(8809),{createNodeMap:Ie,createMergedNodeMap:ae,mergeNodeMaps:xe}=S(9783),{logEventHandler:Pe,logWarningEventHandler:He,safeEventHandler:Qe,setDefaultEventHandler:qe,setupEventHandler:Ce,strictEventHandler:je,unhandledEventHandler:Se}=S(3855),Be=function(Ae){const nt={},Ke=new L({max:100});function fe(R,{documentLoader:A=Ae.documentLoader,...ie}){if(R&&"compactionMap"in R)throw new E('"compactionMap" not supported.',"jsonld.OptionsError");if(R&&"expansionMap"in R)throw new E('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:A},ie,R,{eventHandler:Ce({options:R})})}return Ae.compact=function(){var R=Q(function*(A,ie,Z){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===A)return null;let Ve;(Z=fe(Z,{base:ee(A)?A:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new X({sharedCache:Ke})})).link&&(Z.skipExpansion=!0),Z.compactToRelative||delete Z.base,Ve=Z.skipExpansion?A:yield Ae.expand(A,Z);const Je=yield Ae.processContext(b(Z),ie,Z);let ue=yield le({activeCtx:Je,element:Ve,options:Z});Z.compactArrays&&!Z.graph&&Y(ue)?1===ue.length?ue=ue[0]:0===ue.length&&(ue={}):Z.graph&&J(ue)&&(ue=[ue]),J(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=z.clone(ie),Y(ie)||(ie=[ie]);const ne=ie;ie=[];for(let M=0;M<ne.length;++M)(!J(ne[M])||Object.keys(ne[M]).length>0)&&ie.push(ne[M]);const V=ie.length>0;if(1===ie.length&&(ie=ie[0]),Y(ue)){const M=j({activeCtx:Je,iri:"@graph",relativeTo:{vocab:!0}}),O=ue;ue={},V&&(ue["@context"]=ie),ue[M]=O}else if(J(ue)&&V){const M=ue;ue={"@context":ie};for(const O in M)ue[O]=M[O]}return ue});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.expand=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Z={},Ve=[];if("expandContext"in(ie=fe(ie,{keepFreeFloatingNodes:!1,contextResolver:new X({sharedCache:Ke})}))){const V=z.clone(ie.expandContext);Z.expandContext=J(V)&&"@context"in V?V:{"@context":V},Ve.push(Z.expandContext)}let Je;if(ee(A)){const V=yield Ae.get(A,ie);Je=V.documentUrl,Z.input=V.document,V.contextUrl&&(Z.remoteContext={"@context":V.contextUrl},Ve.push(Z.remoteContext))}else Z.input=z.clone(A);"base"in ie||(ie.base=Je||"");let ue=b(ie);for(const V of Ve)ue=yield I({activeCtx:ue,localCtx:V,options:ie});let ne=yield P({activeCtx:ue,element:Z.input,options:ie});return J(ne)&&"@graph"in ne&&1===Object.keys(ne).length?ne=ne["@graph"]:null===ne&&(ne=[]),Y(ne)||(ne=[ne]),ne});return function(A,ie){return R.apply(this,arguments)}}(),Ae.flatten=function(){var R=Q(function*(A,ie,Z){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,Z=fe(Z,{base:ee(A)?A:"",contextResolver:new X({sharedCache:Ke})});const Ve=yield Ae.expand(A,Z),Je=F(Ve);return null===ie?Je:(Z.graph=!0,Z.skipExpansion=!0,yield Ae.compact(Je,ie,Z))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.frame=function(){var R=Q(function*(A,ie,Z){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Z=fe(Z,{base:ee(A)?A:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new X({sharedCache:Ke})}),ee(ie)){const We=yield Ae.get(ie,Z);if(ie=We.document,We.contextUrl){let Ee=ie["@context"];Ee?Y(Ee)?Ee.push(We.contextUrl):Ee=[Ee,We.contextUrl]:Ee=We.contextUrl,ie["@context"]=Ee}}const Ve=ie&&ie["@context"]||{},Je=yield Ae.processContext(b(Z),Ve,Z);Z.hasOwnProperty("omitGraph")||(Z.omitGraph=T(Je,1.1)),Z.hasOwnProperty("pruneBlankNodeIdentifiers")||(Z.pruneBlankNodeIdentifiers=T(Je,1.1));const ue=yield Ae.expand(A,Z),ne={...Z};ne.isFrame=!0,ne.keepFreeFloatingNodes=!0;const V=yield Ae.expand(ie,ne),M=Object.keys(ie).map(We=>B(Je,We,{vocab:!0}));ne.merged=!M.includes("@graph"),ne.is11=T(Je,1.1);const O=k(ue,V,ne);ne.graph=!Z.omitGraph,ne.skipExpansion=!0,ne.link={},ne.framing=!0;let he=yield Ae.compact(O,Ve,ne);return ne.link={},he=se(he,ne),he});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.link=function(){var R=Q(function*(A,ie,Z){const Ve={};return ie&&(Ve["@context"]=ie),Ve["@embed"]="@link",Ae.frame(A,Ve,Z)});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.normalize=Ae.canonize=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=fe(ie,{base:ee(A)?A:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new X({sharedCache:Ke})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Je=G.parse(A);return C.canonize(Je,ie)}const Z={...ie};delete Z.format,Z.produceGeneralizedRdf=!1;const Ve=yield Ae.toRDF(A,Z);return C.canonize(Ve,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.fromRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=fe(ie,{format:ee(A)?"application/n-quads":void 0});const{format:Z}=ie;let{rdfParser:Ve}=ie;if(Z){if(Ve=Ve||nt[Z],!Ve)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:Z})}else Ve=()=>A;const Je=yield Ve(A);return oe(Je,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.toRDF=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Z;Z=(ie=fe(ie,{base:ee(A)?A:"",skipExpansion:!1,contextResolver:new X({sharedCache:Ke})})).skipExpansion?A:yield Ae.expand(A,ie);const Ve=x(Z,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return G.serialize(Ve);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return Ve});return function(A,ie){return R.apply(this,arguments)}}(),Ae.createNodeMap=function(){var R=Q(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=fe(ie,{base:ee(A)?A:"",contextResolver:new X({sharedCache:Ke})});const Z=yield Ae.expand(A,ie);return ae(Z,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Ae.merge=function(){var R=Q(function*(A,ie,Z){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Y(A))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,Z=fe(Z,{contextResolver:new X({sharedCache:Ke})});const Ve=yield Promise.all(A.map(We=>{const Ee={...Z};return Ae.expand(We,Ee)}));let Je=!0;"mergeNodes"in Z&&(Je=Z.mergeNodes);const ue=Z.issuer||new _("_:b"),ne={"@default":{}};for(let We=0;We<Ve.length;++We){const Ee=z.relabelBlankNodes(Ve[We],{issuer:new _("_:b"+We+"-")}),Re=Je||0===We?ne:{"@default":{}};if(Ie(Ee,Re,"@default",ue),Re!==ne)for(const ct in Re){const bt=Re[ct];if(!(ct in ne)){ne[ct]=bt;continue}const Dt=ne[ct];for(const _t in bt)_t in Dt||(Dt[_t]=bt[_t])}}const V=xe(ne),M=[],O=Object.keys(V).sort();for(let We=0;We<O.length;++We){const Ee=V[O[We]];W(Ee)||M.push(Ee)}return null===ie?M:(Z.graph=!0,Z.skipExpansion=!0,yield Ae.compact(M,ie,Z))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Object.defineProperty(Ae,"documentLoader",{get:()=>Ae._documentLoader,set:R=>Ae._documentLoader=R}),Ae.documentLoader=function(){var R=Q(function*(A){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:A})});return function(A){return R.apply(this,arguments)}}(),Ae.get=function(){var R=Q(function*(A,ie){let Z;Z="function"==typeof ie.documentLoader?ie.documentLoader:Ae.documentLoader;const Ve=yield Z(A);try{if(!Ve.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(Ve.document)&&(Ve.document=JSON.parse(Ve.document))}catch(Je){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Je,remoteDoc:Ve})}return Ve});return function(A,ie){return R.apply(this,arguments)}}(),Ae.processContext=function(){var R=Q(function*(A,ie,Z){return Z=fe(Z,{base:"",contextResolver:new X({sharedCache:Ke})}),null===ie?b(Z):(ie=z.clone(ie),J(ie)&&"@context"in ie||(ie={"@context":ie}),I({activeCtx:A,localCtx:ie,options:Z}))});return function(A,ie,Z){return R.apply(this,arguments)}}(),Ae.getContextValue=S(9611).getContextValue,Ae.documentLoaders={},Ae.useDocumentLoader=function(R){if(!(R in Ae.documentLoaders))throw new E('Unknown document loader type: "'+R+'"',"jsonld.UnknownDocumentLoader",{type:R});Ae.documentLoader=Ae.documentLoaders[R].apply(Ae,Array.prototype.slice.call(arguments,1))},Ae.registerRDFParser=function(R,A){nt[R]=A},Ae.unregisterRDFParser=function(R){delete nt[R]},Ae.registerRDFParser("application/n-quads",G.parse),Ae.registerRDFParser("application/nquads",G.parse),Ae.url=S(2651),Ae.logEventHandler=Pe,Ae.logWarningEventHandler=He,Ae.safeEventHandler=Qe,Ae.setDefaultEventHandler=qe,Ae.strictEventHandler=je,Ae.unhandledEventHandler=Se,Ae.util=z,Object.assign(Ae,z),Ae.promises=Ae,Ae.RequestQueue=S(4044),Ae.JsonLdProcessor=S(1828)(Ae),$.setupGlobals(Ae),$.setupDocumentLoaders(Ae),Ae},de=function(){return Be(function(){return de()})};Be(de),Ue.exports=de},9783:(Ue,_e,S)=>{"use strict";const{isKeyword:Q}=S(9611),C=S(543),$=S(8254),z=S(3521),X=S(1874),_={};Ue.exports=_,_.createMergedNodeMap=(E,L)=>{const G=(L=L||{}).issuer||new z.IdentifierIssuer("_:b"),P={"@default":{}};return _.createNodeMap(E,P,"@default",G),_.mergeNodeMaps(P)},_.createNodeMap=(E,L,G,P,F,oe)=>{if($.isArray(E)){for(const Y of E)_.createNodeMap(Y,L,G,P,void 0,oe);return}if(!$.isObject(E))return void(oe&&oe.push(E));if(C.isValue(E)){if("@type"in E){let Y=E["@type"];0===Y.indexOf("_:")&&(E["@type"]=Y=P.getId(Y))}return void(oe&&oe.push(E))}if(oe&&C.isList(E)){const Y=[];return _.createNodeMap(E["@list"],L,G,P,F,Y),void oe.push({"@list":Y})}if("@type"in E){const Y=E["@type"];for(const J of Y)0===J.indexOf("_:")&&P.getId(J)}$.isUndefined(F)&&(F=C.isBlankNode(E)?P.getId(E["@id"]):E["@id"]),oe&&oe.push({"@id":F});const x=L[G],k=x[F]=x[F]||{};k["@id"]=F;const se=Object.keys(E).sort();for(let Y of se){if("@id"===Y)continue;if("@reverse"===Y){const ee={"@id":F},W=E["@reverse"];for(const B in W){const b=W[B];for(const I of b){let T=I["@id"];C.isBlankNode(I)&&(T=P.getId(T)),_.createNodeMap(I,L,G,P,T),z.addValue(x[T],B,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Y){F in L||(L[F]={}),_.createNodeMap(E[Y],L,F,P);continue}if("@included"===Y){_.createNodeMap(E[Y],L,G,P);continue}if("@type"!==Y&&Q(Y)){if("@index"===Y&&Y in k&&(E[Y]!==k[Y]||E[Y]["@id"]!==k[Y]["@id"]))throw new X("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:k});k[Y]=E[Y];continue}const J=E[Y];if(0===Y.indexOf("_:")&&(Y=P.getId(Y)),0!==J.length)for(let ee of J)if("@type"===Y&&(ee=0===ee.indexOf("_:")?P.getId(ee):ee),C.isSubject(ee)||C.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const W=C.isBlankNode(ee)?P.getId(ee["@id"]):ee["@id"];z.addValue(k,Y,{"@id":W},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ee,L,G,P,W)}else if(C.isValue(ee))z.addValue(k,Y,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(C.isList(ee)){const W=[];_.createNodeMap(ee["@list"],L,G,P,F,W),ee={"@list":W},z.addValue(k,Y,ee,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ee,L,G,P,F),z.addValue(k,Y,ee,{propertyIsArray:!0,allowDuplicate:!1});else z.addValue(k,Y,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=E=>{const L={};for(const G of Object.keys(E).sort())for(const P of Object.keys(E[G]).sort()){const F=E[G][P];P in L||(L[P]={"@id":P});const oe=L[P];for(const x of Object.keys(F).sort())if(Q(x)&&"@type"!==x)oe[x]=z.clone(F[x]);else for(const k of F[x])z.addValue(oe,x,z.clone(k),{propertyIsArray:!0,allowDuplicate:!1})}return L},_.mergeNodeMaps=E=>{const L=E["@default"],G=Object.keys(E).sort();for(const P of G){if("@default"===P)continue;const F=E[P];let oe=L[P];oe?"@graph"in oe||(oe["@graph"]=[]):L[P]=oe={"@id":P,"@graph":[]};const x=oe["@graph"];for(const k of Object.keys(F).sort()){const se=F[k];C.isSubjectReference(se)||x.push(se)}}return L}},8924:(Ue,_e,S)=>{"use strict";const Q=S(627),C={};Ue.exports=C,C.setupDocumentLoaders=function($){typeof XMLHttpRequest<"u"&&($.documentLoaders.xhr=Q,$.useDocumentLoader("xhr"))},C.setupGlobals=function($){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:$.JsonLdProcessor})}},240:(Ue,_e,S)=>{"use strict";const{createNodeMap:Q}=S(9783),{isKeyword:C}=S(9611),$=S(543),z=S(5041),X=S(1874),_=S(8254),E=S(3521),{handleEvent:L}=S(3855),{RDF_FIRST:G,RDF_REST:P,RDF_NIL:F,RDF_TYPE:oe,RDF_JSON_LITERAL:x,RDF_LANGSTRING:k,XSD_BOOLEAN:se,XSD_DOUBLE:Y,XSD_INTEGER:J,XSD_STRING:ee}=S(6982),{isAbsolute:W}=S(2651),B={};function b(le,j,Ie,ae,xe){const Pe=Object.keys(j).sort();for(const He of Pe){const Qe=j[He],qe=Object.keys(Qe).sort();for(let Ce of qe){const je=Qe[Ce];if("@type"===Ce)Ce=oe;else if(C(Ce))continue;for(const Se of je){const Be={termType:He.startsWith("_:")?"BlankNode":"NamedNode",value:He};if(!W(He)){xe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:He}},options:xe});continue}const de={termType:Ce.startsWith("_:")?"BlankNode":"NamedNode",value:Ce};if(!W(Ce)){xe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ce}},options:xe});continue}if("BlankNode"===de.termType&&!xe.produceGeneralizedRdf){xe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ae.getOldIds().find(nt=>ae.getId(nt)===Ce)}},options:xe});continue}const Ae=T(Se,ae,le,Ie,xe.rdfDirection,xe);Ae&&le.push({subject:Be,predicate:de,object:Ae,graph:Ie})}}}}function T(le,j,Ie,ae,xe,Pe){const He={};if($.isValue(le)){He.termType="Literal",He.value=void 0,He.datatype={termType:"NamedNode"};let Qe=le["@value"];const qe=le["@type"]||null;if("@json"===qe)He.value=z(Qe),He.datatype.value=x;else if(_.isBoolean(Qe))He.value=Qe.toString(),He.datatype.value=qe||se;else if(_.isDouble(Qe)||qe===Y)_.isDouble(Qe)||(Qe=parseFloat(Qe)),He.value=Qe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),He.datatype.value=qe||Y;else if(_.isNumber(Qe))He.value=Qe.toFixed(0),He.datatype.value=qe||J;else if("@direction"in le&&"i18n-datatype"===xe){const Ce=(le["@language"]||"").toLowerCase();He.datatype.value=`https://www.w3.org/ns/i18n#${Ce}_${le["@direction"]}`,He.value=Qe}else{if("@direction"in le&&"compound-literal"===xe)throw new X("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});if("@direction"in le&&xe)throw new X("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});"@language"in le?("@direction"in le&&!xe&&Pe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:He.value}},options:Pe}),He.value=Qe,He.datatype.value=qe||k,He.language=le["@language"]):("@direction"in le&&!xe&&Pe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:He.value}},options:Pe}),He.value=Qe,He.datatype.value=qe||ee)}}else if($.isList(le)){const Qe=function I(le,j,Ie,ae,xe,Pe){const He={termType:"NamedNode",value:G},Qe={termType:"NamedNode",value:P},qe={termType:"NamedNode",value:F},Ce=le.pop(),je=Ce?{termType:"BlankNode",value:j.getId()}:qe;let Se=je;for(const Be of le){const de=T(Be,j,Ie,ae,xe,Pe),Ae={termType:"BlankNode",value:j.getId()};Ie.push({subject:Se,predicate:He,object:de,graph:ae}),Ie.push({subject:Se,predicate:Qe,object:Ae,graph:ae}),Se=Ae}if(Ce){const Be=T(Ce,j,Ie,ae,xe,Pe);Ie.push({subject:Se,predicate:He,object:Be,graph:ae}),Ie.push({subject:Se,predicate:Qe,object:qe,graph:ae})}return je}(le["@list"],j,Ie,ae,xe,Pe);He.termType=Qe.termType,He.value=Qe.value}else{const Qe=_.isObject(le)?le["@id"]:le;He.termType=Qe.startsWith("_:")?"BlankNode":"NamedNode",He.value=Qe}return"NamedNode"!==He.termType||W(He.value)?He:(Pe.eventHandler&&L({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:He.value}},options:Pe}),null)}Ue.exports=B,B.toRDF=(le,j)=>{const Ie=new E.IdentifierIssuer("_:b"),ae={"@default":{}};Q(le,ae,"@default",Ie);const xe=[],Pe=Object.keys(ae).sort();for(const He of Pe){let Qe;if("@default"===He)Qe={termType:"DefaultGraph",value:""};else{if(!W(He)){j.eventHandler&&L({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:He}},options:j});continue}Qe=He.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Qe.value=He}b(xe,ae[He],Qe,Ie,j)}return xe}},8254:Ue=>{"use strict";const _e={};Ue.exports=_e,_e.isArray=Array.isArray,_e.isBoolean=S=>"boolean"==typeof S||"[object Boolean]"===Object.prototype.toString.call(S),_e.isDouble=S=>_e.isNumber(S)&&(-1!==String(S).indexOf(".")||Math.abs(S)>=1e21),_e.isEmptyObject=S=>_e.isObject(S)&&0===Object.keys(S).length,_e.isNumber=S=>"number"==typeof S||"[object Number]"===Object.prototype.toString.call(S),_e.isNumeric=S=>!isNaN(parseFloat(S))&&isFinite(S),_e.isObject=S=>"[object Object]"===Object.prototype.toString.call(S),_e.isString=S=>"string"==typeof S||"[object String]"===Object.prototype.toString.call(S),_e.isUndefined=S=>typeof S>"u"},2651:(Ue,_e,S)=>{"use strict";const Q=S(8254),C={};Ue.exports=C,C.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},C.parse=(z,X)=>{const _={},E=C.parsers[X||"full"],L=E.regex.exec(z);let G=E.keys.length;for(;G--;)_[E.keys[G]]=void 0===L[G]?null:L[G];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=C.removeDotSegments(_.path),_},C.prependBase=(z,X)=>{if(null===z||C.isAbsolute(X))return X;(!z||Q.isString(z))&&(z=C.parse(z||""));const _=C.parse(X),E={protocol:z.protocol||""};if(null!==_.authority)E.authority=_.authority,E.path=_.path,E.query=_.query;else if(E.authority=z.authority,""===_.path)E.path=z.path,E.query=null!==_.query?_.query:z.query;else{if(0===_.path.indexOf("/"))E.path=_.path;else{let G=z.path;G=G.substr(0,G.lastIndexOf("/")+1),(G.length>0||z.authority)&&"/"!==G.substr(-1)&&(G+="/"),G+=_.path,E.path=G}E.query=_.query}""!==_.path&&(E.path=C.removeDotSegments(E.path));let L=E.protocol;return null!==E.authority&&(L+="//"+E.authority),L+=E.path,null!==E.query&&(L+="?"+E.query),null!==_.fragment&&(L+="#"+_.fragment),""===L&&(L="./"),L},C.removeBase=(z,X)=>{if(null===z)return X;(!z||Q.isString(z))&&(z=C.parse(z||""));let _="";if(""!==z.href?_+=(z.protocol||"")+"//"+(z.authority||""):X.indexOf("//")&&(_+="//"),0!==X.indexOf(_))return X;const E=C.parse(X.substr(_.length)),L=z.normalizedPath.split("/"),G=E.normalizedPath.split("/"),P=E.fragment||E.query?0:1;for(;L.length>0&&G.length>P&&L[0]===G[0];)L.shift(),G.shift();let F="";if(L.length>0){L.pop();for(let oe=0;oe<L.length;++oe)F+="../"}return F+=G.join("/"),null!==E.query&&(F+="?"+E.query),null!==E.fragment&&(F+="#"+E.fragment),""===F&&(F="./"),F},C.removeDotSegments=z=>{if(0===z.length)return"";const X=z.split("/"),_=[];for(;X.length>0;){const E=X.shift(),L=0===X.length;"."!==E?".."!==E?_.push(E):(_.pop(),L&&_.push("")):L&&_.push("")}return"/"===z[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const $=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;C.isAbsolute=z=>Q.isString(z)&&$.test(z),C.isRelative=z=>Q.isString(z)},3521:(Ue,_e,S)=>{"use strict";const Q=S(543),C=S(8254),$=S(1986).IdentifierIssuer,z=S(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,L=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers_accept="application/ld+json, application/json",F={};function oe(x,k){if(C.isArray(k))for(let se=0;se<k.length;++se)k[se]=oe(x,k[se]);else if(Q.isList(k))k["@list"]=oe(x,k["@list"]);else if(C.isObject(k)){Q.isBlankNode(k)&&(k["@id"]=x.getId(k["@id"]));const se=Object.keys(k).sort();for(let Y=0;Y<se.length;++Y){const J=se[Y];"@id"!==J&&(k[J]=oe(x,k[J]))}}return k}Ue.exports=F,F.IdentifierIssuer=$,F.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,F.REGEX_KEYWORD=/^@[a-zA-Z]+$/,F.clone=function(x){if(x&&"object"==typeof x){let k;if(C.isArray(x)){k=[];for(let se=0;se<x.length;++se)k[se]=F.clone(x[se])}else if(x instanceof Map){k=new Map;for(const[se,Y]of x)k.set(se,F.clone(Y))}else if(x instanceof Set){k=new Set;for(const se of x)k.add(F.clone(se))}else if(C.isObject(x)){k={};for(const se in x)k[se]=F.clone(x[se])}else k=x.toString();return k}return x},F.asArray=function(x){return Array.isArray(x)?x:[x]},F.buildHeaders=(x={})=>{if(Object.keys(x).some(se=>"accept"===se.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers_accept+'" is supported.');return Object.assign({Accept:P_headers_accept},x)},F.parseLinkHeader=x=>{const k={},se=x.match(_);for(let Y=0;Y<se.length;++Y){let J=se[Y].match(E);if(!J)continue;const ee={target:J[1]},W=J[2];for(;J=L.exec(W);)ee[J[1]]=void 0===J[2]?J[3]:J[2];const B=ee.rel||"";Array.isArray(k[B])?k[B].push(ee):k[B]=k.hasOwnProperty(B)?[k[B],ee]:ee}return k},F.validateTypeValue=(x,k)=>{if(!(C.isString(x)||C.isArray(x)&&x.every(se=>C.isString(se)))){if(k&&C.isObject(x))switch(Object.keys(x).length){case 0:return;case 1:if("@default"in x&&F.asArray(x["@default"]).every(se=>C.isString(se)))return}throw new z('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:x})}},F.hasProperty=(x,k)=>{if(x.hasOwnProperty(k)){const se=x[k];return!C.isArray(se)||se.length>0}return!1},F.hasValue=(x,k,se)=>{if(F.hasProperty(x,k)){let Y=x[k];const J=Q.isList(Y);if(C.isArray(Y)||J){J&&(Y=Y["@list"]);for(let ee=0;ee<Y.length;++ee)if(F.compareValues(se,Y[ee]))return!0}else if(!C.isArray(se))return F.compareValues(se,Y)}return!1},F.addValue=(x,k,se,Y)=>{if("propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1),"valueIsArray"in Y||(Y.valueIsArray=!1),"allowDuplicate"in Y||(Y.allowDuplicate=!0),"prependValue"in Y||(Y.prependValue=!1),Y.valueIsArray)x[k]=se;else if(C.isArray(se)){0===se.length&&Y.propertyIsArray&&!x.hasOwnProperty(k)&&(x[k]=[]),Y.prependValue&&(se=se.concat(x[k]),x[k]=[]);for(let J=0;J<se.length;++J)F.addValue(x,k,se[J],Y)}else if(x.hasOwnProperty(k)){const J=!Y.allowDuplicate&&F.hasValue(x,k,se);!C.isArray(x[k])&&(!J||Y.propertyIsArray)&&(x[k]=[x[k]]),J||(Y.prependValue?x[k].unshift(se):x[k].push(se))}else x[k]=Y.propertyIsArray?[se]:se},F.getValues=(x,k)=>[].concat(x[k]||[]),F.removeProperty=(x,k)=>{delete x[k]},F.removeValue=(x,k,se,Y)=>{"propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1);const J=F.getValues(x,k).filter(ee=>!F.compareValues(ee,se));0===J.length?F.removeProperty(x,k):x[k]=1!==J.length||Y.propertyIsArray?J:J[0]},F.relabelBlankNodes=(x,k)=>oe((k=k||{}).issuer||new $("_:b"),x),F.compareValues=(x,k)=>!!(x===k||Q.isValue(x)&&Q.isValue(k)&&x["@value"]===k["@value"]&&x["@type"]===k["@type"]&&x["@language"]===k["@language"]&&x["@index"]===k["@index"])||!!(C.isObject(x)&&"@id"in x&&C.isObject(k)&&"@id"in k)&&x["@id"]===k["@id"],F.compareShortestLeast=(x,k)=>x.length<k.length?-1:k.length<x.length?1:x===k?0:x<k?-1:1},5041:Ue=>{"use strict";Ue.exports=function _e(S){return null===S||"object"!=typeof S||null!=S.toJSON?JSON.stringify(S):Array.isArray(S)?"["+S.reduce((Q,C,$)=>Q+(0===$?"":",")+_e(void 0===C||"symbol"==typeof C?null:C),"")+"]":"{"+Object.keys(S).sort().reduce((Q,C,$)=>void 0===S[C]||"symbol"==typeof S[C]?Q:Q+(0===Q.length?"":",")+_e(C)+":"+_e(S[C]),"")+"}"}},1072:(Ue,_e,S)=>{"use strict";const Q=S(4439),C=Symbol("max"),$=Symbol("length"),z=Symbol("lengthCalculator"),X=Symbol("allowStale"),_=Symbol("maxAge"),E=Symbol("dispose"),L=Symbol("noDisposeOnSet"),G=Symbol("lruList"),P=Symbol("cache"),F=Symbol("updateAgeOnGet"),oe=()=>1,k=(B,b,I)=>{const T=B[P].get(b);if(T){const le=T.value;if(se(B,le)){if(J(B,T),!B[X])return}else I&&(B[F]&&(T.value.now=Date.now()),B[G].unshiftNode(T));return le.value}},se=(B,b)=>{if(!b||!b.maxAge&&!B[_])return!1;const I=Date.now()-b.now;return b.maxAge?I>b.maxAge:B[_]&&I>B[_]},Y=B=>{if(B[$]>B[C])for(let b=B[G].tail;B[$]>B[C]&&null!==b;){const I=b.prev;J(B,b),b=I}},J=(B,b)=>{if(b){const I=b.value;B[E]&&B[E](I.key,I.value),B[$]-=I.length,B[P].delete(I.key),B[G].removeNode(b)}};class ee{constructor(b,I,T,le,j){this.key=b,this.value=I,this.length=T,this.now=le,this.maxAge=j||0}}const W=(B,b,I,T)=>{let le=I.value;se(B,le)&&(J(B,I),B[X]||(le=void 0)),le&&b.call(T,le.value,le.key,B)};Ue.exports=class x{constructor(b){if("number"==typeof b&&(b={max:b}),b||(b={}),b.max&&("number"!=typeof b.max||b.max<0))throw new TypeError("max must be a non-negative number");this[C]=b.max||1/0;const T=b.length||oe;if(this[z]="function"!=typeof T?oe:T,this[X]=b.stale||!1,b.maxAge&&"number"!=typeof b.maxAge)throw new TypeError("maxAge must be a number");this[_]=b.maxAge||0,this[E]=b.dispose,this[L]=b.noDisposeOnSet||!1,this[F]=b.updateAgeOnGet||!1,this.reset()}set max(b){if("number"!=typeof b||b<0)throw new TypeError("max must be a non-negative number");this[C]=b||1/0,Y(this)}get max(){return this[C]}set allowStale(b){this[X]=!!b}get allowStale(){return this[X]}set maxAge(b){if("number"!=typeof b)throw new TypeError("maxAge must be a non-negative number");this[_]=b,Y(this)}get maxAge(){return this[_]}set lengthCalculator(b){"function"!=typeof b&&(b=oe),b!==this[z]&&(this[z]=b,this[$]=0,this[G].forEach(I=>{I.length=this[z](I.value,I.key),this[$]+=I.length})),Y(this)}get lengthCalculator(){return this[z]}get length(){return this[$]}get itemCount(){return this[G].length}rforEach(b,I){I=I||this;for(let T=this[G].tail;null!==T;){const le=T.prev;W(this,b,T,I),T=le}}forEach(b,I){I=I||this;for(let T=this[G].head;null!==T;){const le=T.next;W(this,b,T,I),T=le}}keys(){return this[G].toArray().map(b=>b.key)}values(){return this[G].toArray().map(b=>b.value)}reset(){this[E]&&this[G]&&this[G].length&&this[G].forEach(b=>this[E](b.key,b.value)),this[P]=new Map,this[G]=new Q,this[$]=0}dump(){return this[G].map(b=>!se(this,b)&&{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[G]}set(b,I,T){if((T=T||this[_])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const le=T?Date.now():0,j=this[z](I,b);if(this[P].has(b)){if(j>this[C])return J(this,this[P].get(b)),!1;const xe=this[P].get(b).value;return this[E]&&(this[L]||this[E](b,xe.value)),xe.now=le,xe.maxAge=T,xe.value=I,this[$]+=j-xe.length,xe.length=j,this.get(b),Y(this),!0}const Ie=new ee(b,I,j,le,T);return Ie.length>this[C]?(this[E]&&this[E](b,I),!1):(this[$]+=Ie.length,this[G].unshift(Ie),this[P].set(b,this[G].head),Y(this),!0)}has(b){if(!this[P].has(b))return!1;const I=this[P].get(b).value;return!se(this,I)}get(b){return k(this,b,!0)}peek(b){return k(this,b,!1)}pop(){const b=this[G].tail;return b?(J(this,b),b.value):null}del(b){J(this,this[P].get(b))}load(b){this.reset();const I=Date.now();for(let T=b.length-1;T>=0;T--){const le=b[T],j=le.e||0;if(0===j)this.set(le.k,le.v);else{const Ie=j-I;Ie>0&&this.set(le.k,le.v,Ie)}}}prune(){this[P].forEach((b,I)=>k(this,I,!1))}}},6990:function(Ue,_e,S){var Q;Ue=S.nmd(Ue),function(){var C,_="Expected a function",L="__lodash_hash_undefined__",P="__lodash_placeholder__",b=32,T=128,Ce=1/0,je=9007199254740991,de=4294967295,mt=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",b],["partialRight",64],["rearg",256]],Ke="[object Arguments]",fe="[object Array]",A="[object Boolean]",ie="[object Date]",Ve="[object Error]",Je="[object Function]",ue="[object GeneratorFunction]",ne="[object Map]",V="[object Number]",O="[object Object]",he="[object Promise]",Ee="[object RegExp]",Re="[object Set]",ct="[object String]",bt="[object Symbol]",_t="[object WeakMap]",pe="[object ArrayBuffer]",H="[object DataView]",te="[object Float32Array]",Le="[object Float64Array]",it="[object Int8Array]",ut="[object Int16Array]",Et="[object Int32Array]",tn="[object Uint8Array]",Pn="[object Uint8ClampedArray]",kn="[object Uint16Array]",vn="[object Uint32Array]",An=/\b__p \+= '';/g,Yi=/\b(__p \+=) '' \+/g,io=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tr=/&(?:amp|lt|gt|quot|#39);/g,rs=/[&<>"']/g,Wo=RegExp(Tr.source),Ei=RegExp(rs.source),zr=/<%-([\s\S]+?)%>/g,ya=/<%([\s\S]+?)%>/g,za=/<%=([\s\S]+?)%>/g,il=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,va=/^\w*$/,Hs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,Ze=RegExp($e.source),St=/^\s+/,zt=/\s/,nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ur=/\{\n\/\* \[wrapped with (.+)\] \*/,ss=/,? & /,Zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ro=/[()=,{}\[\]\/\s]/,Ui=/\\(\\)?/g,yc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,di=/\w*$/,hn=/^[-+]0x[0-9a-f]+$/i,$o=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,Vn=/^0o[0-7]+$/i,Gr=/^(?:0|[1-9]\d*)$/,ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vi=/($^)/,ye=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",me="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\u2700-\\u27bf",Ye="a-z\\xdf-\\xf6\\xf8-\\xff",rn="A-Z\\xc0-\\xd6\\xd8-\\xde",wn="\\ufe0e\\ufe0f",dr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ns="["+Te+"]",Sn="["+dr+"]",Gn="["+me+"]",os="\\d+",zs="["+Fe+"]",rl="["+Ye+"]",hd="[^"+Te+dr+os+Fe+Ye+rn+"]",Yo="\\ud83c[\\udffb-\\udfff]",Ls="[^"+Te+"]",Tp="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+rn+"]",wt="(?:"+rl+"|"+hd+")",Ut="(?:"+ze+"|"+hd+")",Qt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Rr="(?:"+Gn+"|"+Yo+")?",Wr="["+wn+"]?",Mn=Wr+Rr+"(?:\\u200d(?:"+[Ls,Tp,De].join("|")+")"+Wr+Rr+")*",dF="(?:"+[zs,Tp,De].join("|")+")"+Mn,hF="(?:"+[Ls+Gn+"?",Gn,Tp,De,Ns].join("|")+")",fF=RegExp("['\u2019]","g"),pF=RegExp(Gn,"g"),It=RegExp(Yo+"(?="+Yo+")|"+hF+Mn,"g"),gF=RegExp([ze+"?"+rl+"+"+Qt+"(?="+[Sn,ze,"$"].join("|")+")",Ut+"+"+Kn+"(?="+[Sn,ze+wt,"$"].join("|")+")",ze+"?"+wt+"+"+Qt,ze+"+"+Kn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",os,dF].join("|"),"g"),Ii=RegExp("[\\u200d"+Te+me+wn+"]"),Mp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,WS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mb=-1,tr={};tr[te]=tr[Le]=tr[it]=tr[ut]=tr[Et]=tr[tn]=tr[Pn]=tr[kn]=tr[vn]=!0,tr[Ke]=tr[fe]=tr[pe]=tr[A]=tr[H]=tr[ie]=tr[Ve]=tr[Je]=tr[ne]=tr[V]=tr[O]=tr[Ee]=tr[Re]=tr[ct]=tr[_t]=!1;var Di={};Di[Ke]=Di[fe]=Di[pe]=Di[H]=Di[A]=Di[ie]=Di[te]=Di[Le]=Di[it]=Di[ut]=Di[Et]=Di[ne]=Di[V]=Di[O]=Di[Ee]=Di[Re]=Di[ct]=Di[bt]=Di[tn]=Di[Pn]=Di[kn]=Di[vn]=!0,Di[Ve]=Di[Je]=Di[_t]=!1;var $S={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},si=parseFloat,g_=parseInt,m_="object"==typeof global&&global&&global.Object===Object&&global,oo="object"==typeof self&&self&&self.Object===Object&&self,as=m_||oo||Function("return this")(),YS=_e&&!_e.nodeType&&_e,hi=YS&&Ue&&!Ue.nodeType&&Ue,XS=hi&&hi.exports===YS,Db=XS&&m_.process,xt=function(){try{return hi&&hi.require&&hi.require("util").types||Db&&Db.binding&&Db.binding("util")}catch{}}(),Dp=xt&&xt.isArrayBuffer,Rp=xt&&xt.isDate,__=xt&&xt.isMap,Op=xt&&xt.isRegExp,Rb=xt&&xt.isSet,Pp=xt&&xt.isTypedArray;function Xo(at,At,yt){switch(yt.length){case 0:return at.call(At);case 1:return at.call(At,yt[0]);case 2:return at.call(At,yt[0],yt[1]);case 3:return at.call(At,yt[0],yt[1],yt[2])}return at.apply(At,yt)}function mF(at,At,yt,qt){for(var fn=-1,yi=null==at?0:at.length;++fn<yi;){var Nr=at[fn];At(qt,Nr,yt(Nr),at)}return qt}function xa(at,At){for(var yt=-1,qt=null==at?0:at.length;++yt<qt&&!1!==At(at[yt],yt,at););return at}function _F(at,At){for(var yt=null==at?0:at.length;yt--&&!1!==At(at[yt],yt,at););return at}function qS(at,At){for(var yt=-1,qt=null==at?0:at.length;++yt<qt;)if(!At(at[yt],yt,at))return!1;return!0}function qo(at,At){for(var yt=-1,qt=null==at?0:at.length,fn=0,yi=[];++yt<qt;){var Nr=at[yt];At(Nr,yt,at)&&(yi[fn++]=Nr)}return yi}function fd(at,At){return!(null==at||!at.length)&&kt(at,At,0)>-1}function pd(at,At,yt){for(var qt=-1,fn=null==at?0:at.length;++qt<fn;)if(yt(At,at[qt]))return!0;return!1}function fr(at,At){for(var yt=-1,qt=null==at?0:at.length,fn=Array(qt);++yt<qt;)fn[yt]=At(at[yt],yt,at);return fn}function sl(at,At){for(var yt=-1,qt=At.length,fn=at.length;++yt<qt;)at[fn+yt]=At[yt];return at}function y_(at,At,yt,qt){var fn=-1,yi=null==at?0:at.length;for(qt&&yi&&(yt=at[++fn]);++fn<yi;)yt=At(yt,at[fn],fn,at);return yt}function Ob(at,At,yt,qt){var fn=null==at?0:at.length;for(qt&&fn&&(yt=at[--fn]);fn--;)yt=At(yt,at[fn],fn,at);return yt}function ol(at,At){for(var yt=-1,qt=null==at?0:at.length;++yt<qt;)if(At(at[yt],yt,at))return!0;return!1}var KS=v_("length");function ot(at,At,yt){var qt;return yt(at,function(fn,yi,Nr){if(At(fn,yi,Nr))return qt=yi,!1}),qt}function Rh(at,At,yt,qt){for(var fn=at.length,yi=yt+(qt?1:-1);qt?yi--:++yi<fn;)if(At(at[yi],yi,at))return yi;return-1}function kt(at,At,yt){return At==At?function Bb(at,At,yt){for(var qt=yt-1,fn=at.length;++qt<fn;)if(at[qt]===At)return qt;return-1}(at,At,yt):Rh(at,Lp,yt)}function Np(at,At,yt,qt){for(var fn=yt-1,yi=at.length;++fn<yi;)if(qt(at[fn],At))return fn;return-1}function Lp(at){return at!=at}function gd(at,At){var yt=null==at?0:at.length;return yt?md(at,At)/yt:NaN}function v_(at){return function(At){return null==At?C:At[at]}}function b_(at){return function(At){return null==at?C:at[At]}}function Pb(at,At,yt,qt,fn){return fn(at,function(yi,Nr,Ai){yt=qt?(qt=!1,yi):At(yt,yi,Nr,Ai)}),yt}function md(at,At){for(var yt,qt=-1,fn=at.length;++qt<fn;){var yi=At(at[qt]);yi!==C&&(yt=yt===C?yi:yt+yi)}return yt}function Eo(at,At){for(var yt=-1,qt=Array(at);++yt<at;)qt[yt]=At(yt);return qt}function pi(at){return at&&at.slice(0,_i(at)+1).replace(St,"")}function ao(at){return function(At){return at(At)}}function Oh(at,At){return fr(At,function(yt){return at[yt]})}function _d(at,At){return at.has(At)}function w_(at,At){for(var yt=-1,qt=at.length;++yt<qt&&kt(At,at[yt],0)>-1;);return yt}function yd(at,At){for(var yt=at.length;yt--&&kt(At,at[yt],0)>-1;);return yt}var Lb=b_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ZS=b_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fb(at){return"\\"+$S[at]}function vd(at){return Ii.test(at)}function Fp(at){var At=-1,yt=Array(at.size);return at.forEach(function(qt,fn){yt[++At]=[fn,qt]}),yt}function kb(at,At){return function(yt){return at(At(yt))}}function cl(at,At){for(var yt=-1,qt=at.length,fn=0,yi=[];++yt<qt;){var Nr=at[yt];(Nr===At||Nr===P)&&(at[yt]=P,yi[fn++]=yt)}return yi}function kp(at){var At=-1,yt=Array(at.size);return at.forEach(function(qt){yt[++At]=qt}),yt}function bd(at){return vd(at)?function rC(at){for(var At=It.lastIndex=0;It.test(at);)++At;return At}(at):KS(at)}function Aa(at){return vd(at)?function Ni(at){return at.match(It)||[]}(at):function al(at){return at.split("")}(at)}function _i(at){for(var At=at.length;At--&&zt.test(at.charAt(At)););return At}var iC=b_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),$r=function at(At){var d,yt=(At=null==At?as:$r.defaults(as.Object(),At,$r.pick(as,WS))).Array,qt=At.Date,fn=At.Error,yi=At.Function,Nr=At.Math,Ai=At.Object,x_=At.RegExp,sC=At.String,gi=At.TypeError,Ht=yt.prototype,Ri=Ai.prototype,co=At["__core-js_shared__"],Yr=yi.prototype.toString,Jn=Ri.hasOwnProperty,wd=0,Hi=(d=/[^.]+$/.exec(co&&co.keys&&co.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",cs=Ri.toString,bc=Yr.call(Ai),Nn=as._,Ph=x_("^"+Yr.call(Jn).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nh=XS?At.Buffer:C,Ao=At.Symbol,Xi=At.Uint8Array,xd=Nh?Nh.allocUnsafe:C,wc=kb(Ai.getPrototypeOf,Ai),Sa=Ai.create,Ed=Ri.propertyIsEnumerable,Lh=Ht.splice,xc=Ao?Ao.isConcatSpreadable:C,ll=Ao?Ao.iterator:C,So=Ao?Ao.toStringTag:C,On=function(){try{var d=Od(Ai,"defineProperty");return d({},"",{}),d}catch{}}(),E_=At.clearTimeout!==as.clearTimeout&&At.clearTimeout,Fh=qt&&qt.now!==as.Date.now&&qt.now,Wa=At.setTimeout!==as.setTimeout&&At.setTimeout,cu=Nr.ceil,Ec=Nr.floor,br=Ai.getOwnPropertySymbols,Ad=Nh?Nh.isBuffer:C,ls=At.isFinite,us=Ht.join,A_=kb(Ai.keys,Ai),nr=Nr.max,Xr=Nr.min,Ca=qt.now,S_=At.parseInt,Ub=Nr.random,oC=Ht.reverse,kh=Od(At,"DataView"),Sd=Od(At,"Map"),C_=Od(At,"Promise"),ul=Od(At,"Set"),Bp=Od(At,"WeakMap"),jp=Od(Ai,"create"),T_=Bp&&new Bp,Bh={},yF=Pc(kh),vF=Pc(Sd),bF=Pc(C_),wF=Pc(ul),xF=Pc(Bp),M_=Ao?Ao.prototype:C,Up=M_?M_.valueOf:C,aC=M_?M_.toString:C;function Oe(d){if(Mr(d)&&!Bn(d)&&!(d instanceof ci)){if(d instanceof Ta)return d;if(Jn.call(d,"__wrapped__"))return ny(d)}return new Ta(d)}var lu=function(){function d(){}return function(p){if(!rr(p))return{};if(Sa)return Sa(p);d.prototype=p;var y=new d;return d.prototype=C,y}}();function I_(){}function Ta(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=C}function ci(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function zi(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Ac(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Ya(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var K=d[p];this.set(K[0],K[1])}}function Or(d){var p=-1,y=null==d?0:d.length;for(this.__data__=new Ya;++p<y;)this.add(d[p])}function Fs(d){var p=this.__data__=new Ac(d);this.size=p.size}function P_(d,p){var y=Bn(d),K=!y&&Tl(d),be=!y&&!K&&ec(d),ke=!y&&!K&&!be&&Du(d),et=y||K||be||ke,lt=et?Eo(d.length,sC):[],pt=lt.length;for(var Rt in d)(p||Jn.call(d,Rt))&&(!et||!("length"==Rt||be&&("offset"==Rt||"parent"==Rt)||ke&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||ta(Rt,pt)))&&lt.push(Rt);return lt}function Yb(d){var p=d.length;return p?d[H_(0,p-1)]:C}function Xb(d,p){return Eu(Ss(d),hu(p,0,d.length))}function qb(d){return Eu(Ss(d))}function Vh(d,p,y){(y!==C&&!Ys(d[p],y)||y===C&&!(p in d))&&dl(d,p,y)}function Sc(d,p,y){var K=d[p];(!Jn.call(d,p)||!Ys(K,y)||y===C&&!(p in d))&&dl(d,p,y)}function du(d,p){for(var y=d.length;y--;)if(Ys(d[y][0],p))return y;return-1}function N_(d,p,y,K){return hl(d,function(be,ke,et){p(K,be,y(be),et)}),K}function Dn(d,p){return d&&ks(p,ds(p),d)}function dl(d,p,y){"__proto__"==p&&On?On(d,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):d[p]=y}function L_(d,p){for(var y=-1,K=p.length,be=yt(K),ke=null==d;++y<K;)be[y]=ke?C:Ry(d,p[y]);return be}function hu(d,p,y){return d==d&&(y!==C&&(d=d<=y?d:y),p!==C&&(d=d>=p?d:p)),d}function Ko(d,p,y,K,be,ke){var et,lt=1&p,pt=2&p,Rt=4&p;if(y&&(et=be?y(d,K,be,ke):y(d)),et!==C)return et;if(!rr(d))return d;var Ot=Bn(d);if(Ot){if(et=function IC(d){var p=d.length,y=new d.constructor(p);return p&&"string"==typeof d[0]&&Jn.call(d,"index")&&(y.index=d.index,y.input=d.input),y}(d),!lt)return Ss(d,et)}else{var Bt=Ws(d),Yt=Bt==Je||Bt==ue;if(ec(d))return Xp(d,lt);if(Bt==O||Bt==Ke||Yt&&!be){if(et=pt||Yt?{}:Sw(d),!lt)return pt?function yw(d,p){return ks(d,wu(d),p)}(d,function Kb(d,p){return d&&ks(p,fo(p),d)}(et,d)):function xC(d,p){return ks(d,Qh(d),p)}(d,Dn(et,d))}else{if(!Di[Bt])return be?d:{};et=function DC(d,p,y){var K=d.constructor;switch(p){case pe:return qp(d);case A:case ie:return new K(+d);case H:return function Kp(d,p){var y=p?qp(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.byteLength)}(d,y);case te:case Le:case it:case ut:case Et:case tn:case Pn:case kn:case vn:return Y_(d,y);case ne:return new K;case V:case ct:return new K(d);case Ee:return function $_(d){var p=new d.constructor(d.source,di.exec(d));return p.lastIndex=d.lastIndex,p}(d);case Re:return new K;case bt:return function wC(d){return Up?Ai(Up.call(d)):{}}(d)}}(d,Bt,lt)}}ke||(ke=new Fs);var un=ke.get(d);if(un)return un;ke.set(d,et),Sy(d)?d.forEach(function(Tn){et.add(Ko(Tn,p,y,Tn,d,ke))}):sx(d)&&d.forEach(function(Tn,$n){et.set($n,Ko(Tn,p,y,$n,d,ke))});var Wn=Ot?C:(Rt?pt?bl:Bs:pt?fo:ds)(d);return xa(Wn||d,function(Tn,$n){Wn&&(Tn=d[$n=Tn]),Sc(et,$n,Ko(Tn,p,y,$n,d,ke))}),et}function fu(d,p,y){var K=y.length;if(null==d)return!K;for(d=Ai(d);K--;){var be=y[K],et=d[be];if(et===C&&!(be in d)||!(0,p[be])(et))return!1}return!0}function Zb(d,p,y){if("function"!=typeof d)throw new gi(_);return nf(function(){d.apply(C,y)},p)}function Hh(d,p,y,K){var be=-1,ke=fd,et=!0,lt=d.length,pt=[],Rt=p.length;if(!lt)return pt;y&&(p=fr(p,ao(y))),K?(ke=pd,et=!1):p.length>=200&&(ke=_d,et=!1,p=new Or(p));e:for(;++be<lt;){var Ot=d[be],Bt=null==y?Ot:y(Ot);if(Ot=K||0!==Ot?Ot:0,et&&Bt==Bt){for(var Yt=Rt;Yt--;)if(p[Yt]===Bt)continue e;pt.push(Ot)}else ke(p,Bt,K)||pt.push(Ot)}return pt}Oe.templateSettings={escape:zr,evaluate:ya,interpolate:za,variable:"",imports:{_:Oe}},(Oe.prototype=I_.prototype).constructor=Oe,(Ta.prototype=lu(I_.prototype)).constructor=Ta,(ci.prototype=lu(I_.prototype)).constructor=ci,zi.prototype.clear=function Hb(){this.__data__=jp?jp(null):{},this.size=0},zi.prototype.delete=function cC(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},zi.prototype.get=function lC(d){var p=this.__data__;if(jp){var y=p[d];return y===L?C:y}return Jn.call(p,d)?p[d]:C},zi.prototype.has=function zb(d){var p=this.__data__;return jp?p[d]!==C:Jn.call(p,d)},zi.prototype.set=function Gb(d,p){var y=this.__data__;return this.size+=this.has(d)?0:1,y[d]=jp&&p===C?L:p,this},Ac.prototype.clear=function D_(){this.__data__=[],this.size=0},Ac.prototype.delete=function uC(d){var p=this.__data__,y=du(p,d);return!(y<0||(y==p.length-1?p.pop():Lh.call(p,y,1),--this.size,0))},Ac.prototype.get=function $a(d){var p=this.__data__,y=du(p,d);return y<0?C:p[y][1]},Ac.prototype.has=function Wb(d){return du(this.__data__,d)>-1},Ac.prototype.set=function $b(d,p){var y=this.__data__,K=du(y,d);return K<0?(++this.size,y.push([d,p])):y[K][1]=p,this},Ya.prototype.clear=function dC(){this.size=0,this.__data__={hash:new zi,map:new(Sd||Ac),string:new zi}},Ya.prototype.delete=function AF(d){var p=J_(this,d).delete(d);return this.size-=p?1:0,p},Ya.prototype.get=function qi(d){return J_(this,d).get(d)},Ya.prototype.has=function R_(d){return J_(this,d).has(d)},Ya.prototype.set=function jh(d,p){var y=J_(this,d),K=y.size;return y.set(d,p),this.size+=y.size==K?0:1,this},Or.prototype.add=Or.prototype.push=function hC(d){return this.__data__.set(d,L),this},Or.prototype.has=function Uh(d){return this.__data__.has(d)},Fs.prototype.clear=function Co(){this.__data__=new Ac,this.size=0},Fs.prototype.delete=function fC(d){var p=this.__data__,y=p.delete(d);return this.size=p.size,y},Fs.prototype.get=function O_(d){return this.__data__.get(d)},Fs.prototype.has=function pC(d){return this.__data__.has(d)},Fs.prototype.set=function Xa(d,p){var y=this.__data__;if(y instanceof Ac){var K=y.__data__;if(!Sd||K.length<199)return K.push([d,p]),this.size=++y.size,this;y=this.__data__=new Ya(K)}return y.set(d,p),this.size=y.size,this};var hl=mu(lo),Qb=mu(Jo,!0);function gC(d,p){var y=!0;return hl(d,function(K,be,ke){return y=!!p(K,be,ke)}),y}function Mt(d,p,y){for(var K=-1,be=d.length;++K<be;){var ke=d[K],et=p(ke);if(null!=et&&(lt===C?et==et&&!Xs(et):y(et,lt)))var lt=et,pt=ke}return pt}function qa(d,p){var y=[];return hl(d,function(K,be,ke){p(K,be,ke)&&y.push(K)}),y}function ir(d,p,y,K,be){var ke=-1,et=d.length;for(y||(y=Z_),be||(be=[]);++ke<et;){var lt=d[ke];p>0&&y(lt)?p>1?ir(lt,p-1,y,K,be):sl(be,lt):K||(be[be.length]=lt)}return be}var Si=Lr(),F_=Lr(!0);function lo(d,p){return d&&Si(d,p,ds)}function Jo(d,p){return d&&F_(d,p,ds)}function Cd(d,p){return qo(p,function(y){return tc(d[y])})}function Cc(d,p){for(var y=0,K=(p=gl(p,d)).length;null!=d&&y<K;)d=d[Mo(p[y++])];return y&&y==K?d:C}function ew(d,p,y){var K=p(d);return Bn(d)?K:sl(K,y(d))}function uo(d){return null==d?d===C?"[object Undefined]":"[object Null]":So&&So in Ai(d)?function To(d){var p=Jn.call(d,So),y=d[So];try{d[So]=C;var K=!0}catch{}var be=cs.call(d);return K&&(p?d[So]=y:delete d[So]),be}(d):function tf(d){return cs.call(d)}(d)}function Vp(d,p){return d>p}function Gs(d,p){return null!=d&&Jn.call(d,p)}function Tc(d,p){return null!=d&&p in Ai(d)}function Zo(d,p,y){for(var K=y?pd:fd,be=d[0].length,ke=d.length,et=ke,lt=yt(ke),pt=1/0,Rt=[];et--;){var Ot=d[et];et&&p&&(Ot=fr(Ot,ao(p))),pt=Xr(Ot.length,pt),lt[et]=!y&&(p||be>=120&&Ot.length>=120)?new Or(et&&Ot):C}Ot=d[0];var Bt=-1,Yt=lt[0];e:for(;++Bt<be&&Rt.length<pt;){var un=Ot[Bt],In=p?p(un):un;if(un=y||0!==un?un:0,!(Yt?_d(Yt,In):K(Rt,In,y))){for(et=ke;--et;){var Wn=lt[et];if(!(Wn?_d(Wn,In):K(d[et],In,y)))continue e}Yt&&Yt.push(In),Rt.push(un)}}return Rt}function zh(d,p,y){var K=null==(d=FC(d,p=gl(p,d)))?d:d[Mo(ia(p))];return null==K?C:Xo(K,d,y)}function k_(d){return Mr(d)&&uo(d)==Ke}function pu(d,p,y,K,be){return d===p||(null==d||null==p||!Mr(d)&&!Mr(p)?d!=d&&p!=p:function B_(d,p,y,K,be,ke){var et=Bn(d),lt=Bn(p),pt=et?fe:Ws(d),Rt=lt?fe:Ws(p),Ot=(pt=pt==Ke?O:pt)==O,Bt=(Rt=Rt==Ke?O:Rt)==O,Yt=pt==Rt;if(Yt&&ec(d)){if(!ec(p))return!1;et=!0,Ot=!1}if(Yt&&!Ot)return ke||(ke=new Fs),et||Du(d)?Fr(d,p,y,K,be,ke):function TC(d,p,y,K,be,ke,et){switch(y){case H:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case pe:return!(d.byteLength!=p.byteLength||!ke(new Xi(d),new Xi(p)));case A:case ie:case V:return Ys(+d,+p);case Ve:return d.name==p.name&&d.message==p.message;case Ee:case ct:return d==p+"";case ne:var lt=Fp;case Re:if(lt||(lt=kp),d.size!=p.size&&!(1&K))return!1;var Rt=et.get(d);if(Rt)return Rt==p;K|=2,et.set(d,p);var Ot=Fr(lt(d),lt(p),K,be,ke,et);return et.delete(d),Ot;case bt:if(Up)return Up.call(d)==Up.call(p)}return!1}(d,p,pt,y,K,be,ke);if(!(1&y)){var un=Ot&&Jn.call(d,"__wrapped__"),In=Bt&&Jn.call(p,"__wrapped__");if(un||In){var Wn=un?d.value():d,Tn=In?p.value():p;return ke||(ke=new Fs),be(Wn,Tn,y,K,ke)}}return!!Yt&&(ke||(ke=new Fs),function Zh(d,p,y,K,be,ke){var et=1&y,lt=Bs(d),pt=lt.length;if(pt!=Bs(p).length&&!et)return!1;for(var Bt=pt;Bt--;){var Yt=lt[Bt];if(!(et?Yt in p:Jn.call(p,Yt)))return!1}var un=ke.get(d),In=ke.get(p);if(un&&In)return un==p&&In==d;var Wn=!0;ke.set(d,p),ke.set(p,d);for(var Tn=et;++Bt<pt;){var $n=d[Yt=lt[Bt]],fi=p[Yt];if(K)var po=et?K(fi,$n,Yt,p,d,ke):K($n,fi,Yt,d,p,ke);if(!(po===C?$n===fi||be($n,fi,y,K,ke):po)){Wn=!1;break}Tn||(Tn="constructor"==Yt)}if(Wn&&!Tn){var Kr=d.constructor,Oo=p.constructor;Kr!=Oo&&"constructor"in d&&"constructor"in p&&!("function"==typeof Kr&&Kr instanceof Kr&&"function"==typeof Oo&&Oo instanceof Oo)&&(Wn=!1)}return ke.delete(d),ke.delete(p),Wn}(d,p,y,K,be,ke))}(d,p,y,K,pu,be))}function Gh(d,p,y,K){var be=y.length,ke=be,et=!K;if(null==d)return!ke;for(d=Ai(d);be--;){var lt=y[be];if(et&&lt[2]?lt[1]!==d[lt[0]]:!(lt[0]in d))return!1}for(;++be<ke;){var pt=(lt=y[be])[0],Rt=d[pt],Ot=lt[1];if(et&&lt[2]){if(Rt===C&&!(pt in d))return!1}else{var Bt=new Fs;if(K)var Yt=K(Rt,Ot,pt,d,p,Bt);if(!(Yt===C?pu(Ot,Rt,3,K,Bt):Yt))return!1}}return!0}function iw(d){return!(!rr(d)||function PC(d){return!!Hi&&Hi in d}(d))&&(tc(d)?Ph:$t).test(Pc(d))}function U_(d){return"function"==typeof d?d:null==d?Ts:"object"==typeof d?Bn(d)?fl(d[0],d[1]):As(d):Ox(d)}function Hp(d){if(!xu(d))return A_(d);var p=[];for(var y in Ai(d))Jn.call(d,y)&&"constructor"!=y&&p.push(y);return p}function Wh(d,p){return d<p}function aw(d,p){var y=-1,K=qr(d)?yt(d.length):[];return hl(d,function(be,ke,et){K[++y]=p(be,ke,et)}),K}function As(d){var p=Zp(d);return 1==p.length&&p[0][2]?Q_(p[0][0],p[0][1]):function(y){return y===d||Gh(y,d,p)}}function fl(d,p){return wl(d)&&ef(p)?Q_(Mo(d),p):function(y){var K=Ry(y,d);return K===C&&K===p?Oy(y,d):pu(p,K,3)}}function Li(d,p,y,K,be){d!==p&&Si(p,function(ke,et){if(be||(be=new Fs),rr(ke))!function cw(d,p,y,K,be,ke,et){var lt=ey(d,y),pt=ey(p,y),Rt=et.get(pt);if(Rt)Vh(d,y,Rt);else{var Ot=ke?ke(lt,pt,y+"",d,p,et):C,Bt=Ot===C;if(Bt){var Yt=Bn(pt),un=!Yt&&ec(pt),In=!Yt&&!un&&Du(pt);Ot=pt,Yt||un||In?Bn(lt)?Ot=lt:pr(lt)?Ot=Ss(lt):un?(Bt=!1,Ot=Xp(pt,!0)):In?(Bt=!1,Ot=Y_(pt,!0)):Ot=[]:Ml(pt)||Tl(pt)?(Ot=lt,Tl(lt)?Ot=hx(lt):(!rr(lt)||tc(lt))&&(Ot=Sw(pt))):Bt=!1}Bt&&(et.set(pt,Ot),be(Ot,pt,K,ke,et),et.delete(pt)),Vh(d,y,Ot)}}(d,p,et,y,Li,K,be);else{var lt=K?K(ey(d,et),ke,et+"",d,p,be):C;lt===C&&(lt=ke),Vh(d,et,lt)}},fo)}function lw(d,p){var y=d.length;if(y)return ta(p+=p<0?y:0,y)?d[p]:C}function uw(d,p,y){p=p.length?fr(p,function(ke){return Bn(ke)?function(et){return Cc(et,1===ke.length?ke[0]:ke)}:ke}):[Ts];var K=-1;return p=fr(p,ao(xn())),function vc(at,At){var yt=at.length;for(at.sort(At);yt--;)at[yt]=at[yt].value;return at}(aw(d,function(ke,et,lt){return{criteria:fr(p,function(Rt){return Rt(ke)}),index:++K,value:ke}}),function(ke,et){return function mw(d,p,y){for(var K=-1,be=d.criteria,ke=p.criteria,et=be.length,lt=y.length;++K<et;){var pt=X_(be[K],ke[K]);if(pt)return K>=lt?pt:pt*("desc"==y[K]?-1:1)}return d.index-p.index}(ke,et,y)})}function V_(d,p,y){for(var K=-1,be=p.length,ke={};++K<be;){var et=p[K],lt=Cc(d,et);y(lt,et)&&Id(ke,gl(et,d),lt)}return ke}function Td(d,p,y,K){var be=K?Np:kt,ke=-1,et=p.length,lt=d;for(d===p&&(p=Ss(p)),y&&(lt=fr(d,ao(y)));++ke<et;)for(var pt=0,Rt=p[ke],Ot=y?y(Rt):Rt;(pt=be(lt,Ot,pt,K))>-1;)lt!==d&&Lh.call(lt,pt,1),Lh.call(d,pt,1);return d}function Ic(d,p){for(var y=d?p.length:0,K=y-1;y--;){var be=p[y];if(y==K||be!==ke){var ke=be;ta(be)?Lh.call(d,be,1):gu(d,be)}}return d}function H_(d,p){return d+Ec(Ub()*(p-d+1))}function Md(d,p){var y="";if(!d||p<1||p>je)return y;do{p%2&&(y+=d),(p=Ec(p/2))&&(d+=d)}while(p);return y}function Hn(d,p){return ty(Tw(d,p,Ts),d+"")}function z_(d){return Yb(pf(d))}function hw(d,p){var y=pf(d);return Eu(y,hu(p,0,y.length))}function Id(d,p,y,K){if(!rr(d))return d;for(var be=-1,ke=(p=gl(p,d)).length,et=ke-1,lt=d;null!=lt&&++be<ke;){var pt=Mo(p[be]),Rt=y;if("__proto__"===pt||"constructor"===pt||"prototype"===pt)return d;if(be!=et){var Ot=lt[pt];(Rt=K?K(Ot,pt,lt):C)===C&&(Rt=rr(Ot)?Ot:ta(p[be+1])?[]:{})}Sc(lt,pt,Rt),lt=lt[pt]}return d}var fw=T_?function(d,p){return T_.set(d,p),d}:Ts,Dd=On?function(d,p){return On(d,"toString",{configurable:!0,enumerable:!1,value:Hd(p),writable:!0})}:Ts;function $h(d){return Eu(pf(d))}function Qo(d,p,y){var K=-1,be=d.length;p<0&&(p=-p>be?0:be+p),(y=y>be?be:y)<0&&(y+=be),be=p>y?0:y-p>>>0,p>>>=0;for(var ke=yt(be);++K<be;)ke[K]=d[K+p];return ke}function G_(d,p){var y;return hl(d,function(K,be,ke){return!(y=p(K,be,ke))}),!!y}function Gp(d,p,y){var K=0,be=null==d?K:d.length;if("number"==typeof p&&p==p&&be<=2147483647){for(;K<be;){var ke=K+be>>>1,et=d[ke];null!==et&&!Xs(et)&&(y?et<=p:et<p)?K=ke+1:be=ke}return be}return W_(d,p,Ts,y)}function W_(d,p,y,K){var be=0,ke=null==d?0:d.length;if(0===ke)return 0;for(var et=(p=y(p))!=p,lt=null===p,pt=Xs(p),Rt=p===C;be<ke;){var Ot=Ec((be+ke)/2),Bt=y(d[Ot]),Yt=Bt!==C,un=null===Bt,In=Bt==Bt,Wn=Xs(Bt);if(et)var Tn=K||In;else Tn=Rt?In&&(K||Yt):lt?In&&Yt&&(K||!un):pt?In&&Yt&&!un&&(K||!Wn):!un&&!Wn&&(K?Bt<=p:Bt<p);Tn?be=Ot+1:ke=Ot}return Xr(ke,4294967294)}function pw(d,p){for(var y=-1,K=d.length,be=0,ke=[];++y<K;){var et=d[y],lt=p?p(et):et;if(!y||!Ys(lt,pt)){var pt=lt;ke[be++]=0===et?0:et}}return ke}function vC(d){return"number"==typeof d?d:Xs(d)?NaN:+d}function ea(d){if("string"==typeof d)return d;if(Bn(d))return fr(d,ea)+"";if(Xs(d))return aC?aC.call(d):"";var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function Ka(d,p,y){var K=-1,be=fd,ke=d.length,et=!0,lt=[],pt=lt;if(y)et=!1,be=pd;else if(ke>=200){var Rt=p?null:CF(d);if(Rt)return kp(Rt);et=!1,be=_d,pt=new Or}else pt=p?[]:lt;e:for(;++K<ke;){var Ot=d[K],Bt=p?p(Ot):Ot;if(Ot=y||0!==Ot?Ot:0,et&&Bt==Bt){for(var Yt=pt.length;Yt--;)if(pt[Yt]===Bt)continue e;p&&pt.push(Bt),lt.push(Ot)}else be(pt,Bt,y)||(pt!==lt&&pt.push(Bt),lt.push(Ot))}return lt}function gu(d,p){return null==(d=FC(d,p=gl(p,d)))||delete d[Mo(ia(p))]}function gw(d,p,y,K){return Id(d,p,y(Cc(d,p)),K)}function pl(d,p,y,K){for(var be=d.length,ke=K?be:-1;(K?ke--:++ke<be)&&p(d[ke],ke,d););return y?Qo(d,K?0:ke,K?ke+1:be):Qo(d,K?ke+1:0,K?be:ke)}function Wp(d,p){var y=d;return y instanceof ci&&(y=y.value()),y_(p,function(K,be){return be.func.apply(be.thisArg,sl([K],be.args))},y)}function Rd(d,p,y){var K=d.length;if(K<2)return K?Ka(d[0]):[];for(var be=-1,ke=yt(K);++be<K;)for(var et=d[be],lt=-1;++lt<K;)lt!=be&&(ke[be]=Hh(ke[be]||et,d[lt],p,y));return Ka(ir(ke,1),p,y)}function bC(d,p,y){for(var K=-1,be=d.length,ke=p.length,et={};++K<be;)y(et,d[K],K<ke?p[K]:C);return et}function $p(d){return pr(d)?d:[]}function Yp(d){return"function"==typeof d?d:Ts}function gl(d,p){return Bn(d)?d:wl(d,p)?[d]:Qp(Ci(d))}var Ja=Hn;function ml(d,p,y){var K=d.length;return y=y===C?K:y,!p&&y>=K?d:Qo(d,p,y)}var Yh=E_||function(d){return as.clearTimeout(d)};function Xp(d,p){if(p)return d.slice();var y=d.length,K=xd?xd(y):new d.constructor(y);return d.copy(K),K}function qp(d){var p=new d.constructor(d.byteLength);return new Xi(p).set(new Xi(d)),p}function Y_(d,p){var y=p?qp(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.length)}function X_(d,p){if(d!==p){var y=d!==C,K=null===d,be=d==d,ke=Xs(d),et=p!==C,lt=null===p,pt=p==p,Rt=Xs(p);if(!lt&&!Rt&&!ke&&d>p||ke&&et&&pt&&!lt&&!Rt||K&&et&&pt||!y&&pt||!be)return 1;if(!K&&!ke&&!Rt&&d<p||Rt&&y&&be&&!K&&!ke||lt&&y&&be||!et&&be||!pt)return-1}return 0}function q_(d,p,y,K){for(var be=-1,ke=d.length,et=y.length,lt=-1,pt=p.length,Rt=nr(ke-et,0),Ot=yt(pt+Rt),Bt=!K;++lt<pt;)Ot[lt]=p[lt];for(;++be<et;)(Bt||be<ke)&&(Ot[y[be]]=d[be]);for(;Rt--;)Ot[lt++]=d[be++];return Ot}function _w(d,p,y,K){for(var be=-1,ke=d.length,et=-1,lt=y.length,pt=-1,Rt=p.length,Ot=nr(ke-lt,0),Bt=yt(Ot+Rt),Yt=!K;++be<Ot;)Bt[be]=d[be];for(var un=be;++pt<Rt;)Bt[un+pt]=p[pt];for(;++et<lt;)(Yt||be<ke)&&(Bt[un+y[et]]=d[be++]);return Bt}function Ss(d,p){var y=-1,K=d.length;for(p||(p=yt(K));++y<K;)p[y]=d[y];return p}function ks(d,p,y,K){var be=!y;y||(y={});for(var ke=-1,et=p.length;++ke<et;){var lt=p[ke],pt=K?K(y[lt],d[lt],lt,y,d):C;pt===C&&(pt=d[lt]),be?dl(y,lt,pt):Sc(y,lt,pt)}return y}function Xh(d,p){return function(y,K){var be=Bn(y)?mF:N_,ke=p?p():{};return be(y,d,xn(K,2),ke)}}function Ma(d){return Hn(function(p,y){var K=-1,be=y.length,ke=be>1?y[be-1]:C,et=be>2?y[2]:C;for(ke=d.length>3&&"function"==typeof ke?(be--,ke):C,et&&$s(y[0],y[1],et)&&(ke=be<3?C:ke,be=1),p=Ai(p);++K<be;){var lt=y[K];lt&&d(p,lt,K,ke)}return p})}function mu(d,p){return function(y,K){if(null==y)return y;if(!qr(y))return d(y,K);for(var be=y.length,ke=p?be:-1,et=Ai(y);(p?ke--:++ke<be)&&!1!==K(et[ke],ke,et););return y}}function Lr(d){return function(p,y,K){for(var be=-1,ke=Ai(p),et=K(p),lt=et.length;lt--;){var pt=et[d?lt:++be];if(!1===y(ke[pt],pt,ke))break}return p}}function Gi(d){return function(p){var y=vd(p=Ci(p))?Aa(p):C,K=y?y[0]:p.charAt(0),be=y?ml(y,1).join(""):p.slice(1);return K[d]()+be}}function _l(d){return function(p){return y_(vg(Ax(p).replace(fF,"")),d,"")}}function qh(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=lu(d.prototype),K=d.apply(y,p);return rr(K)?K:y}}function yl(d){return function(p,y,K){var be=Ai(p);if(!qr(p)){var ke=xn(y,3);p=ds(p),y=function(lt){return ke(be[lt],lt,be)}}var et=d(p,y,K);return et>-1?be[ke?p[et]:et]:C}}function _u(d){return Oc(function(p){var y=p.length,K=y,be=Ta.prototype.thru;for(d&&p.reverse();K--;){var ke=p[K];if("function"!=typeof ke)throw new gi(_);if(be&&!et&&"wrapper"==bu(ke))var et=new Ta([],!0)}for(K=et?K:y;++K<y;){var lt=bu(ke=p[K]),pt="wrapper"==lt?Jp(ke):C;et=pt&&Pd(pt[0])&&424==pt[1]&&!pt[4].length&&1==pt[9]?et[bu(pt[0])].apply(et,pt[3]):1==ke.length&&Pd(ke)?et[lt]():et.thru(ke)}return function(){var Rt=arguments,Ot=Rt[0];if(et&&1==Rt.length&&Bn(Ot))return et.plant(Ot).value();for(var Bt=0,Yt=y?p[Bt].apply(this,Rt):Ot;++Bt<y;)Yt=p[Bt].call(this,Yt);return Yt}})}function Dc(d,p,y,K,be,ke,et,lt,pt,Rt){var Ot=p&T,Bt=1&p,Yt=2&p,un=24&p,In=512&p,Wn=Yt?C:qh(d);return function Tn(){for(var $n=arguments.length,fi=yt($n),po=$n;po--;)fi[po]=arguments[po];if(un)var Kr=Za(Tn),Oo=function Nb(at,At){for(var yt=at.length,qt=0;yt--;)at[yt]===At&&++qt;return qt}(fi,Kr);if(K&&(fi=q_(fi,K,be,un)),ke&&(fi=_w(fi,ke,et,un)),$n-=Oo,un&&$n<Rt){var sr=cl(fi,Kr);return AC(d,p,Dc,Tn.placeholder,y,fi,sr,lt,pt,Rt-$n)}var ra=Bt?y:this,ic=Yt?ra[d]:d;return $n=fi.length,lt?fi=function Mw(d,p){for(var y=d.length,K=Xr(p.length,y),be=Ss(d);K--;){var ke=p[K];d[K]=ta(ke,y)?be[ke]:C}return d}(fi,lt):In&&$n>1&&fi.reverse(),Ot&&pt<$n&&(fi.length=pt),this&&this!==as&&this instanceof Tn&&(ic=Wn||qh(ic)),ic.apply(ra,fi)}}function yu(d,p){return function(y,K){return function Mc(d,p,y,K){return lo(d,function(be,ke,et){p(K,y(be),ke,et)}),K}(y,d,p(K),{})}}function Kh(d,p){return function(y,K){var be;if(y===C&&K===C)return p;if(y!==C&&(be=y),K!==C){if(be===C)return K;"string"==typeof y||"string"==typeof K?(y=ea(y),K=ea(K)):(y=vC(y),K=vC(K)),be=d(y,K)}return be}}function Jh(d){return Oc(function(p){return p=fr(p,ao(xn())),Hn(function(y){var K=this;return d(p,function(be){return Xo(be,K,y)})})})}function Rc(d,p){var y=(p=p===C?" ":ea(p)).length;if(y<2)return y?Md(p,d):p;var K=Md(p,cu(d/bd(p)));return vd(p)?ml(Aa(K),0,d).join(""):K.slice(0,d)}function bw(d){return function(p,y,K){return K&&"number"!=typeof K&&$s(p,y,K)&&(y=K=C),p=Da(p),y===C?(y=p,p=0):y=Da(y),function zp(d,p,y,K){for(var be=-1,ke=nr(cu((p-d)/(y||1)),0),et=yt(ke);ke--;)et[K?ke:++be]=d,d+=y;return et}(p,y,K=K===C?p<y?1:-1:Da(K),d)}}function K_(d){return function(p,y){return"string"==typeof p&&"string"==typeof y||(p=Do(p),y=Do(y)),d(p,y)}}function AC(d,p,y,K,be,ke,et,lt,pt,Rt){var Ot=8&p;p|=Ot?b:64,4&(p&=~(Ot?64:b))||(p&=-4);var Wn=[d,p,be,Ot?ke:C,Ot?et:C,Ot?C:ke,Ot?C:et,lt,pt,Rt],Tn=y.apply(C,Wn);return Pd(d)&&kC(Tn,Wn),Tn.placeholder=K,Iw(Tn,d,p)}function ww(d){var p=Nr[d];return function(y,K){if(y=Do(y),(K=null==K?0:Xr(Ln(K),292))&&ls(y)){var be=(Ci(y)+"e").split("e");return+((be=(Ci(p(be[0]+"e"+(+be[1]+K)))+"e").split("e"))[0]+"e"+(+be[1]-K))}return p(y)}}var CF=ul&&1/kp(new ul([,-0]))[1]==Ce?function(d){return new ul(d)}:vf;function SC(d){return function(p){var y=Ws(p);return y==ne?Fp(p):y==Re?function tC(at){var At=-1,yt=Array(at.size);return at.forEach(function(qt){yt[++At]=[qt,qt]}),yt}(p):function Ga(at,At){return fr(At,function(yt){return[yt,at[yt]]})}(p,d(p))}}function vl(d,p,y,K,be,ke,et,lt){var pt=2&p;if(!pt&&"function"!=typeof d)throw new gi(_);var Rt=K?K.length:0;if(Rt||(p&=-97,K=be=C),et=et===C?et:nr(Ln(et),0),lt=lt===C?lt:Ln(lt),Rt-=be?be.length:0,64&p){var Ot=K,Bt=be;K=be=C}var Yt=pt?C:Jp(d),un=[d,p,y,K,be,Ot,Bt,ke,et,lt];if(Yt&&function LC(d,p){var y=d[1],K=p[1],be=y|K;if(!(be<131)&&!(K==T&&8==y||K==T&&256==y&&d[7].length<=p[8]||384==K&&p[7].length<=p[8]&&8==y))return d;1&K&&(d[2]=p[2],be|=1&y?0:4);var lt=p[3];if(lt){var pt=d[3];d[3]=pt?q_(pt,lt,p[4]):lt,d[4]=pt?cl(d[3],P):p[4]}(lt=p[5])&&(d[5]=(pt=d[5])?_w(pt,lt,p[6]):lt,d[6]=pt?cl(d[5],P):p[6]),(lt=p[7])&&(d[7]=lt),K&T&&(d[8]=null==d[8]?p[8]:Xr(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=be}(un,Yt),d=un[0],p=un[1],y=un[2],K=un[3],be=un[4],!(lt=un[9]=un[9]===C?pt?0:d.length:nr(un[9]-Rt,0))&&24&p&&(p&=-25),p&&1!=p)In=8==p||16==p?function vw(d,p,y){var K=qh(d);return function be(){for(var ke=arguments.length,et=yt(ke),lt=ke,pt=Za(be);lt--;)et[lt]=arguments[lt];var Rt=ke<3&&et[0]!==pt&&et[ke-1]!==pt?[]:cl(et,pt);return(ke-=Rt.length)<y?AC(d,p,Dc,be.placeholder,C,et,Rt,C,C,y-ke):Xo(this&&this!==as&&this instanceof be?K:d,this,et)}}(d,p,lt):p!=b&&33!=p||be.length?Dc.apply(C,un):function SF(d,p,y,K){var be=1&p,ke=qh(d);return function et(){for(var lt=-1,pt=arguments.length,Rt=-1,Ot=K.length,Bt=yt(Ot+pt),Yt=this&&this!==as&&this instanceof et?ke:d;++Rt<Ot;)Bt[Rt]=K[Rt];for(;pt--;)Bt[Rt++]=arguments[++lt];return Xo(Yt,be?y:this,Bt)}}(d,p,y,K);else var In=function EC(d,p,y){var K=1&p,be=qh(d);return function ke(){return(this&&this!==as&&this instanceof ke?be:d).apply(K?y:this,arguments)}}(d,p,y);return Iw((Yt?fw:kC)(In,un),d,p)}function vu(d,p,y,K){return d===C||Ys(d,Ri[y])&&!Jn.call(K,y)?p:d}function xw(d,p,y,K,be,ke){return rr(d)&&rr(p)&&(ke.set(p,d),Li(d,p,C,xw,ke),ke.delete(p)),d}function CC(d){return Ml(d)?C:d}function Fr(d,p,y,K,be,ke){var et=1&y,lt=d.length,pt=p.length;if(lt!=pt&&!(et&&pt>lt))return!1;var Rt=ke.get(d),Ot=ke.get(p);if(Rt&&Ot)return Rt==p&&Ot==d;var Bt=-1,Yt=!0,un=2&y?new Or:C;for(ke.set(d,p),ke.set(p,d);++Bt<lt;){var In=d[Bt],Wn=p[Bt];if(K)var Tn=et?K(Wn,In,Bt,p,d,ke):K(In,Wn,Bt,d,p,ke);if(Tn!==C){if(Tn)continue;Yt=!1;break}if(un){if(!ol(p,function($n,fi){if(!_d(un,fi)&&(In===$n||be(In,$n,y,K,ke)))return un.push(fi)})){Yt=!1;break}}else if(In!==Wn&&!be(In,Wn,y,K,ke)){Yt=!1;break}}return ke.delete(d),ke.delete(p),Yt}function Oc(d){return ty(Tw(d,C,tg),d+"")}function Bs(d){return ew(d,ds,Qh)}function bl(d){return ew(d,fo,wu)}var Jp=T_?function(d){return T_.get(d)}:vf;function bu(d){for(var p=d.name+"",y=Bh[p],K=Jn.call(Bh,p)?y.length:0;K--;){var be=y[K],ke=be.func;if(null==ke||ke==d)return be.name}return p}function Za(d){return(Jn.call(Oe,"placeholder")?Oe:d).placeholder}function xn(){var d=Oe.iteratee||Ix;return d=d===Ix?U_:d,arguments.length?d(arguments[0],arguments[1]):d}function J_(d,p){var y=d.__data__;return function OC(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?y["string"==typeof p?"string":"hash"]:y.map}function Zp(d){for(var p=ds(d),y=p.length;y--;){var K=p[y],be=d[K];p[y]=[K,be,ef(be)]}return p}function Od(d,p){var y=function QS(at,At){return null==at?C:at[At]}(d,p);return iw(y)?y:C}var Qh=br?function(d){return null==d?[]:(d=Ai(d),qo(br(d),function(p){return Ed.call(d,p)}))}:wg,wu=br?function(d){for(var p=[];d;)sl(p,Qh(d)),d=wc(d);return p}:wg,Ws=uo;function Aw(d,p,y){for(var K=-1,be=(p=gl(p,d)).length,ke=!1;++K<be;){var et=Mo(p[K]);if(!(ke=null!=d&&y(d,et)))break;d=d[et]}return ke||++K!=be?ke:!!(be=null==d?0:d.length)&&Mu(be)&&ta(et,be)&&(Bn(d)||Tl(d))}function Sw(d){return"function"!=typeof d.constructor||xu(d)?{}:lu(wc(d))}function Z_(d){return Bn(d)||Tl(d)||!!(xc&&d&&d[xc])}function ta(d,p){var y=typeof d;return!!(p=p??je)&&("number"==y||"symbol"!=y&&Gr.test(d))&&d>-1&&d%1==0&&d<p}function $s(d,p,y){if(!rr(y))return!1;var K=typeof p;return!!("number"==K?qr(y)&&ta(p,y.length):"string"==K&&p in y)&&Ys(y[p],d)}function wl(d,p){if(Bn(d))return!1;var y=typeof d;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=d&&!Xs(d))||va.test(d)||!il.test(d)||null!=p&&d in Ai(p)}function Pd(d){var p=bu(d),y=Oe[p];if("function"!=typeof y||!(p in ci.prototype))return!1;if(d===y)return!0;var K=Jp(y);return!!K&&d===K[0]}(kh&&Ws(new kh(new ArrayBuffer(1)))!=H||Sd&&Ws(new Sd)!=ne||C_&&Ws(C_.resolve())!=he||ul&&Ws(new ul)!=Re||Bp&&Ws(new Bp)!=_t)&&(Ws=function(d){var p=uo(d),y=p==O?d.constructor:C,K=y?Pc(y):"";if(K)switch(K){case yF:return H;case vF:return ne;case bF:return he;case wF:return Re;case xF:return _t}return p});var Cw=co?tc:bf;function xu(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||Ri)}function ef(d){return d==d&&!rr(d)}function Q_(d,p){return function(y){return null!=y&&y[d]===p&&(p!==C||d in Ai(y))}}function Tw(d,p,y){return p=nr(p===C?d.length-1:p,0),function(){for(var K=arguments,be=-1,ke=nr(K.length-p,0),et=yt(ke);++be<ke;)et[be]=K[p+be];be=-1;for(var lt=yt(p+1);++be<p;)lt[be]=K[be];return lt[p]=y(et),Xo(d,this,lt)}}function FC(d,p){return p.length<2?d:Cc(d,Qo(p,0,-1))}function ey(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var kC=xl(fw),nf=Wa||function(d,p){return as.setTimeout(d,p)},ty=xl(Dd);function Iw(d,p,y){var K=p+"";return ty(d,function RC(d,p){var y=p.length;if(!y)return d;var K=y-1;return p[K]=(y>1?"& ":"")+p[K],p=p.join(y>2?", ":" "),d.replace(nn,"{\n/* [wrapped with "+p+"] */\n")}(K,function BC(d,p){return xa(mt,function(y){var K="_."+y[0];p&y[1]&&!fd(d,K)&&d.push(K)}),d.sort()}(function MC(d){var p=d.match(ur);return p?p[1].split(ss):[]}(K),y)))}function xl(d){var p=0,y=0;return function(){var K=Ca(),be=16-(K-y);if(y=K,be>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(C,arguments)}}function Eu(d,p){var y=-1,K=d.length,be=K-1;for(p=p===C?K:p;++y<p;){var ke=H_(y,be),et=d[ke];d[ke]=d[y],d[y]=et}return d.length=p,d}var Qp=function NC(d){var p=Bd(d,function(K){return 500===y.size&&y.clear(),K}),y=p.cache;return p}(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(Hs,function(y,K,be,ke){p.push(be?ke.replace(Ui,"$1"):K||y)}),p});function Mo(d){if("string"==typeof d||Xs(d))return d;var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function Pc(d){if(null!=d){try{return Yr.call(d)}catch{}try{return d+""}catch{}}return""}function ny(d){if(d instanceof ci)return d.clone();var p=new Ta(d.__wrapped__,d.__chain__);return p.__actions__=Ss(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var iy=Hn(function(d,p){return pr(d)?Hh(d,ir(p,1,pr,!0)):[]}),jC=Hn(function(d,p){var y=ia(p);return pr(y)&&(y=C),pr(d)?Hh(d,ir(p,1,pr,!0),xn(y,2)):[]}),ry=Hn(function(d,p){var y=ia(p);return pr(y)&&(y=C),pr(d)?Hh(d,ir(p,1,pr,!0),C,y):[]});function rf(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=null==y?0:Ln(y);return be<0&&(be=nr(K+be,0)),Rh(d,xn(p,3),be)}function Pw(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=K-1;return y!==C&&(be=Ln(y),be=y<0?nr(K+be,0):Xr(be,K-1)),Rh(d,xn(p,3),be,!0)}function tg(d){return null!=d&&d.length?ir(d,1):[]}function ig(d){return d&&d.length?d[0]:C}var Nw=Hn(function(d){var p=fr(d,$p);return p.length&&p[0]===d[0]?Zo(p):[]}),Fd=Hn(function(d){var p=ia(d),y=fr(d,$p);return p===ia(y)?p=C:y.pop(),y.length&&y[0]===d[0]?Zo(y,xn(p,2)):[]}),zC=Hn(function(d){var p=ia(d),y=fr(d,$p);return(p="function"==typeof p?p:C)&&y.pop(),y.length&&y[0]===d[0]?Zo(y,C,p):[]});function ia(d){var p=null==d?0:d.length;return p?d[p-1]:C}var ay=Hn(cy);function cy(d,p){return d&&d.length&&p&&p.length?Td(d,p):d}var Lw=Oc(function(d,p){var y=null==d?0:d.length,K=L_(d,p);return Ic(d,fr(p,function(be){return ta(be,y)?+be:be}).sort(X_)),K});function rg(d){return null==d?d:oC.call(d)}var ZC=Hn(function(d){return Ka(ir(d,1,pr,!0))}),Al=Hn(function(d){var p=ia(d);return pr(p)&&(p=C),Ka(ir(d,1,pr,!0),xn(p,2))}),og=Hn(function(d){var p=ia(d);return p="function"==typeof p?p:C,Ka(ir(d,1,pr,!0),C,p)});function Uw(d){if(!d||!d.length)return[];var p=0;return d=qo(d,function(y){if(pr(y))return p=nr(y.length,p),!0}),Eo(p,function(y){return fr(d,v_(y))})}function Qa(d,p){if(!d||!d.length)return[];var y=Uw(d);return null==p?y:fr(y,function(K){return Xo(p,C,K)})}var dy=Hn(function(d,p){return pr(d)?Hh(d,p):[]}),eT=Hn(function(d){return Rd(qo(d,pr))}),tT=Hn(function(d){var p=ia(d);return pr(p)&&(p=C),Rd(qo(d,pr),xn(p,2))}),nT=Hn(function(d){var p=ia(d);return p="function"==typeof p?p:C,Rd(qo(d,pr),C,p)}),iT=Hn(Uw),Io=Hn(function(d){var p=d.length,y=p>1?d[p-1]:C;return y="function"==typeof y?(d.pop(),y):C,Qa(d,y)});function Nc(d){var p=Oe(d);return p.__chain__=!0,p}function af(d,p){return p(d)}var Sl=Oc(function(d){var p=d.length,y=p?d[0]:0,K=this.__wrapped__,be=function(ke){return L_(ke,d)};return!(p>1||this.__actions__.length)&&K instanceof ci&&ta(y)?((K=K.slice(y,+y+(p?1:0))).__actions__.push({func:af,args:[be],thisArg:C}),new Ta(K,this.__chain__).thru(function(ke){return p&&!ke.length&&ke.push(C),ke})):this.thru(be)}),Gw=Xh(function(d,p,y){Jn.call(d,y)?++d[y]:dl(d,y,1)}),oT=yl(rf),fy=yl(Pw);function aT(d,p){return(Bn(d)?xa:hl)(d,xn(p,3))}function cT(d,p){return(Bn(d)?_F:Qb)(d,xn(p,3))}var NF=Xh(function(d,p,y){Jn.call(d,y)?d[y].push(p):dl(d,y,[p])}),FF=Hn(function(d,p,y){var K=-1,be="function"==typeof p,ke=qr(d)?yt(d.length):[];return hl(d,function(et){ke[++K]=be?Xo(p,et,y):zh(et,p,y)}),ke}),lT=Xh(function(d,p,y){dl(d,y,p)});function Cu(d,p){return(Bn(d)?fr:aw)(d,xn(p,3))}var gy=Xh(function(d,p,y){d[y?0:1].push(p)},function(){return[[],[]]}),Cl=Hn(function(d,p){if(null==d)return[];var y=p.length;return y>1&&$s(d,p[0],p[1])?p=[]:y>2&&$s(p[0],p[1],p[2])&&(p=[p[0]]),uw(d,ir(p,1),[])}),dg=Fh||function(){return as.Date.now()};function qw(d,p,y){return p=y?C:p,vl(d,T,C,C,C,C,p=d&&null==p?d.length:p)}function my(d,p){var y;if("function"!=typeof p)throw new gi(_);return d=Ln(d),function(){return--d>0&&(y=p.apply(this,arguments)),d<=1&&(p=C),y}}var uf=Hn(function(d,p,y){var K=1;if(y.length){var be=cl(y,Za(uf));K|=b}return vl(d,K,p,y,be)}),Kw=Hn(function(d,p,y){var K=3;if(y.length){var be=cl(y,Za(Kw));K|=b}return vl(p,K,d,y,be)});function _y(d,p,y){var K,be,ke,et,lt,pt,Rt=0,Ot=!1,Bt=!1,Yt=!0;if("function"!=typeof d)throw new gi(_);function un(sr){var ra=K,ic=be;return K=be=C,Rt=sr,et=d.apply(ic,ra)}function Tn(sr){var ra=sr-pt;return pt===C||ra>=p||ra<0||Bt&&sr-Rt>=ke}function $n(){var sr=dg();if(Tn(sr))return fi(sr);lt=nf($n,function Wn(sr){var Fx=p-(sr-pt);return Bt?Xr(Fx,ke-(sr-Rt)):Fx}(sr))}function fi(sr){return lt=C,Yt&&K?un(sr):(K=be=C,et)}function Oo(){var sr=dg(),ra=Tn(sr);if(K=arguments,be=this,pt=sr,ra){if(lt===C)return function In(sr){return Rt=sr,lt=nf($n,p),Ot?un(sr):et}(pt);if(Bt)return Yh(lt),lt=nf($n,p),un(pt)}return lt===C&&(lt=nf($n,p)),et}return p=Do(p)||0,rr(y)&&(Ot=!!y.leading,ke=(Bt="maxWait"in y)?nr(Do(y.maxWait)||0,p):ke,Yt="trailing"in y?!!y.trailing:Yt),Oo.cancel=function po(){lt!==C&&Yh(lt),Rt=0,K=pt=be=lt=C},Oo.flush=function Kr(){return lt===C?et:fi(dg())},Oo}var hT=Hn(function(d,p){return Zb(d,1,p)}),fT=Hn(function(d,p,y){return Zb(d,Do(p)||0,y)});function Bd(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new gi(_);var y=function(){var K=arguments,be=p?p.apply(this,K):K[0],ke=y.cache;if(ke.has(be))return ke.get(be);var et=d.apply(this,K);return y.cache=ke.set(be,et)||ke,et};return y.cache=new(Bd.Cache||Ya),y}function df(d){if("function"!=typeof d)throw new gi(_);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}Bd.Cache=Ya;var js=Ja(function(d,p){var y=(p=1==p.length&&Bn(p[0])?fr(p[0],ao(xn())):fr(ir(p,1),ao(xn()))).length;return Hn(function(K){for(var be=-1,ke=Xr(K.length,y);++be<ke;)K[be]=p[be].call(this,K[be]);return Xo(d,this,K)})}),Tu=Hn(function(d,p){var y=cl(p,Za(Tu));return vl(d,b,C,p,y)}),vy=Hn(function(d,p){var y=cl(p,Za(vy));return vl(d,64,C,p,y)}),Qw=Oc(function(d,p){return vl(d,256,C,C,C,p)});function Ys(d,p){return d===p||d!=d&&p!=p}var bT=K_(Vp),wT=K_(function(d,p){return d>=p}),Tl=k_(function(){return arguments}())?k_:function(d){return Mr(d)&&Jn.call(d,"callee")&&!Ed.call(d,"callee")},Bn=yt.isArray,ix=Dp?ao(Dp):function mC(d){return Mr(d)&&uo(d)==pe};function qr(d){return null!=d&&Mu(d.length)&&!tc(d)}function pr(d){return Mr(d)&&qr(d)}var ec=Ad||bf,hg=Rp?ao(Rp):function _C(d){return Mr(d)&&uo(d)==ie};function xy(d){if(!Mr(d))return!1;var p=uo(d);return p==Ve||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!Ml(d)}function tc(d){if(!rr(d))return!1;var p=uo(d);return p==Je||p==ue||"[object AsyncFunction]"==p||"[object Proxy]"==p}function jd(d){return"number"==typeof d&&d==Ln(d)}function Mu(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=je}function rr(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Mr(d){return null!=d&&"object"==typeof d}var sx=__?ao(__):function nw(d){return Mr(d)&&Ws(d)==ne};function MT(d){return"number"==typeof d||Mr(d)&&uo(d)==V}function Ml(d){if(!Mr(d)||uo(d)!=O)return!1;var p=wc(d);if(null===p)return!0;var y=Jn.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&Yr.call(y)==bc}var Ay=Op?ao(Op):function rw(d){return Mr(d)&&uo(d)==Ee},Sy=Rb?ao(Rb):function j_(d){return Mr(d)&&Ws(d)==Re};function hf(d){return"string"==typeof d||!Bn(d)&&Mr(d)&&uo(d)==ct}function Xs(d){return"symbol"==typeof d||Mr(d)&&uo(d)==bt}var Du=Pp?ao(Pp):function sw(d){return Mr(d)&&Mu(d.length)&&!!tr[uo(d)]},Cy=K_(Wh),pg=K_(function(d,p){return d<=p});function Ty(d){if(!d)return[];if(qr(d))return hf(d)?Aa(d):Ss(d);if(ll&&d[ll])return function eC(at){for(var At,yt=[];!(At=at.next()).done;)yt.push(At.value);return yt}(d[ll]());var p=Ws(d);return(p==ne?Fp:p==Re?kp:pf)(d)}function Da(d){return d?(d=Do(d))===Ce||d===-Ce?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Ln(d){var p=Da(d),y=p%1;return p==p?y?p-y:p:0}function dx(d){return d?hu(Ln(d),0,de):0}function Do(d){if("number"==typeof d)return d;if(Xs(d))return NaN;if(rr(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=rr(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=pi(d);var y=$o.test(d);return y||Vn.test(d)?g_(d.slice(2),y?2:8):hn.test(d)?NaN:+d}function hx(d){return ks(d,fo(d))}function Ci(d){return null==d?"":ea(d)}var fx=Ma(function(d,p){if(xu(p)||qr(p))ks(p,ds(p),d);else for(var y in p)Jn.call(p,y)&&Sc(d,y,p[y])}),My=Ma(function(d,p){ks(p,fo(p),d)}),Ru=Ma(function(d,p,y,K){ks(p,fo(p),d,K)}),Iy=Ma(function(d,p,y,K){ks(p,ds(p),d,K)}),Ud=Oc(L_),RT=Hn(function(d,p){d=Ai(d);var y=-1,K=p.length,be=K>2?p[2]:C;for(be&&$s(p[0],p[1],be)&&(K=1);++y<K;)for(var ke=p[y],et=fo(ke),lt=-1,pt=et.length;++lt<pt;){var Rt=et[lt],Ot=d[Rt];(Ot===C||Ys(Ot,Ri[Rt])&&!Jn.call(d,Rt))&&(d[Rt]=ke[Rt])}return d}),kF=Hn(function(d){return d.push(C,xw),Xo(_x,C,d)});function Ry(d,p,y){var K=null==d?C:Cc(d,p);return K===C?y:K}function Oy(d,p){return null!=d&&Aw(d,p,Tc)}var LT=yu(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=cs.call(p)),d[p]=y},Hd(Ts)),Ro=yu(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=cs.call(p)),Jn.call(d,p)?d[p].push(y):d[p]=[y]},xn),nc=Hn(zh);function ds(d){return qr(d)?P_(d):Hp(d)}function fo(d){return qr(d)?P_(d,!0):function ow(d){if(!rr(d))return function Nd(d){var p=[];if(null!=d)for(var y in Ai(d))p.push(y);return p}(d);var p=xu(d),y=[];for(var K in d)"constructor"==K&&(p||!Jn.call(d,K))||y.push(K);return y}(d)}var BT=Ma(function(d,p,y){Li(d,p,y)}),_x=Ma(function(d,p,y,K){Li(d,p,y,K)}),yx=Oc(function(d,p){var y={};if(null==d)return y;var K=!1;p=fr(p,function(ke){return ke=gl(ke,d),K||(K=ke.length>1),ke}),ks(d,bl(d),y),K&&(y=Ko(y,7,CC));for(var be=p.length;be--;)gu(y,p[be]);return y}),UT=Oc(function(d,p){return null==d?{}:function yC(d,p){return V_(d,p,function(y,K){return Oy(d,K)})}(d,p)});function vx(d,p){if(null==d)return{};var y=fr(bl(d),function(K){return[K]});return p=xn(p),V_(d,y,function(K,be){return p(K,be[0])})}var Vd=SC(ds),Py=SC(fo);function pf(d){return null==d?[]:Oh(d,ds(d))}var xx=_l(function(d,p,y){return p=p.toLowerCase(),d+(y?Ex(p):p)});function Ex(d){return mf(Ci(d).toLowerCase())}function Ax(d){return(d=Ci(d))&&d.replace(ri,Lb).replace(pF,"")}var _g=_l(function(d,p,y){return d+(y?"-":"")+p.toLowerCase()}),Cx=_l(function(d,p,y){return d+(y?" ":"")+p.toLowerCase()}),Fy=Gi("toLowerCase"),XT=_l(function(d,p,y){return d+(y?"_":"")+p.toLowerCase()}),KT=_l(function(d,p,y){return d+(y?" ":"")+mf(p)}),QT=_l(function(d,p,y){return d+(y?" ":"")+p.toUpperCase()}),mf=Gi("toUpperCase");function vg(d,p,y){return d=Ci(d),(p=y?C:p)===C?function Ea(at){return Mp.test(at)}(d)?function jb(at){return at.match(gF)||[]}(d):function JS(at){return at.match(Zt)||[]}(d):d.match(p)||[]}var Pu=Hn(function(d,p){try{return Xo(d,C,p)}catch(y){return xy(y)?y:new fn(y)}}),By=Oc(function(d,p){return xa(p,function(y){y=Mo(y),dl(d,y,uf(d[y],d))}),d});function Hd(d){return function(){return d}}var Uy=_u(),Vy=_u(!0);function Ts(d){return d}function Ix(d){return U_("function"==typeof d?d:Ko(d,1))}var eM=Hn(function(d,p){return function(y){return zh(y,d,p)}}),Dx=Hn(function(d,p){return function(y){return zh(d,y,p)}});function zy(d,p,y){var K=ds(p),be=Cd(p,K);null==y&&(!rr(p)||!be.length&&K.length)&&(y=p,p=d,d=this,be=Cd(p,ds(p)));var ke=!(rr(y)&&"chain"in y&&!y.chain),et=tc(d);return xa(be,function(lt){var pt=p[lt];d[lt]=pt,et&&(d.prototype[lt]=function(){var Rt=this.__chain__;if(ke||Rt){var Ot=d(this.__wrapped__);return(Ot.__actions__=Ss(this.__actions__)).push({func:pt,args:arguments,thisArg:d}),Ot.__chain__=Rt,Ot}return pt.apply(d,sl([this.value()],arguments))})}),d}function vf(){}var nM=Jh(fr),iM=Jh(qS),$F=Jh(ol);function Ox(d){return wl(d)?v_(Mo(d)):function dw(d){return function(p){return Cc(p,d)}}(d)}var Gy=bw(),rM=bw(!0);function wg(){return[]}function bf(){return!1}var aM=Kh(function(d,p){return d+p},0),Il=ww("ceil"),cM=Kh(function(d,p){return d/p},1),Gd=ww("floor"),Wy=Kh(function(d,p){return d*p},1),XF=ww("round"),qF=Kh(function(d,p){return d-p},0);return Oe.after=function dT(d,p){if("function"!=typeof p)throw new gi(_);return d=Ln(d),function(){if(--d<1)return p.apply(this,arguments)}},Oe.ary=qw,Oe.assign=fx,Oe.assignIn=My,Oe.assignInWith=Ru,Oe.assignWith=Iy,Oe.at=Ud,Oe.before=my,Oe.bind=uf,Oe.bindAll=By,Oe.bindKey=Kw,Oe.castArray=function nx(){if(!arguments.length)return[];var d=arguments[0];return Bn(d)?d:[d]},Oe.chain=Nc,Oe.chunk=function Dw(d,p,y){p=(y?$s(d,p,y):p===C)?1:nr(Ln(p),0);var K=null==d?0:d.length;if(!K||p<1)return[];for(var be=0,ke=0,et=yt(cu(K/p));be<K;)et[ke++]=Qo(d,be,be+=p);return et},Oe.compact=function eg(d){for(var p=-1,y=null==d?0:d.length,K=0,be=[];++p<y;){var ke=d[p];ke&&(be[K++]=ke)}return be},Oe.concat=function TF(){var d=arguments.length;if(!d)return[];for(var p=yt(d-1),y=arguments[0],K=d;K--;)p[K-1]=arguments[K];return sl(Bn(y)?Ss(y):[y],ir(p,1))},Oe.cond=function jy(d){var p=null==d?0:d.length,y=xn();return d=p?fr(d,function(K){if("function"!=typeof K[1])throw new gi(_);return[y(K[0]),K[1]]}):[],Hn(function(K){for(var be=-1;++be<p;){var ke=d[be];if(Xo(ke[0],this,K))return Xo(ke[1],this,K)}})},Oe.conforms=function _f(d){return function Jb(d){var p=ds(d);return function(y){return fu(y,d,p)}}(Ko(d,1))},Oe.constant=Hd,Oe.countBy=Gw,Oe.create=function DT(d,p){var y=lu(d);return null==p?y:Dn(y,p)},Oe.curry=function Jw(d,p,y){var K=vl(d,8,C,C,C,C,C,p=y?C:p);return K.placeholder=Jw.placeholder,K},Oe.curryRight=function Zw(d,p,y){var K=vl(d,16,C,C,C,C,C,p=y?C:p);return K.placeholder=Zw.placeholder,K},Oe.debounce=_y,Oe.defaults=RT,Oe.defaultsDeep=kF,Oe.defer=hT,Oe.delay=fT,Oe.difference=iy,Oe.differenceBy=jC,Oe.differenceWith=ry,Oe.drop=function Rw(d,p,y){var K=null==d?0:d.length;return K?Qo(d,(p=y||p===C?1:Ln(p))<0?0:p,K):[]},Oe.dropRight=function Ow(d,p,y){var K=null==d?0:d.length;return K?Qo(d,0,(p=K-(p=y||p===C?1:Ln(p)))<0?0:p):[]},Oe.dropRightWhile=function Au(d,p){return d&&d.length?pl(d,xn(p,3),!0,!0):[]},Oe.dropWhile=function UC(d,p){return d&&d.length?pl(d,xn(p,3),!0):[]},Oe.fill=function sy(d,p,y,K){var be=null==d?0:d.length;return be?(y&&"number"!=typeof y&&$s(d,p,y)&&(y=0,K=be),function li(d,p,y,K){var be=d.length;for((y=Ln(y))<0&&(y=-y>be?0:be+y),(K=K===C||K>be?be:Ln(K))<0&&(K+=be),K=y>K?0:dx(K);y<K;)d[y++]=p;return d}(d,p,y,K)):[]},Oe.filter=function sT(d,p){return(Bn(d)?qo:qa)(d,xn(p,3))},Oe.flatMap=function OF(d,p){return ir(Cu(d,p),1)},Oe.flatMapDeep=function PF(d,p){return ir(Cu(d,p),Ce)},Oe.flatMapDepth=function py(d,p,y){return y=y===C?1:Ln(y),ir(Cu(d,p),y)},Oe.flatten=tg,Oe.flattenDeep=function ng(d){return null!=d&&d.length?ir(d,Ce):[]},Oe.flattenDepth=function na(d,p){return null!=d&&d.length?ir(d,p=p===C?1:Ln(p)):[]},Oe.flip=function ho(d){return vl(d,512)},Oe.flow=Uy,Oe.flowRight=Vy,Oe.fromPairs=function Ld(d){for(var p=-1,y=null==d?0:d.length,K={};++p<y;){var be=d[p];K[be[0]]=be[1]}return K},Oe.functions=function Ou(d){return null==d?[]:Cd(d,ds(d))},Oe.functionsIn=function PT(d){return null==d?[]:Cd(d,fo(d))},Oe.groupBy=NF,Oe.initial=function HC(d){return null!=d&&d.length?Qo(d,0,-1):[]},Oe.intersection=Nw,Oe.intersectionBy=Fd,Oe.intersectionWith=zC,Oe.invert=LT,Oe.invertBy=Ro,Oe.invokeMap=FF,Oe.iteratee=Ix,Oe.keyBy=lT,Oe.keys=ds,Oe.keysIn=fo,Oe.map=Cu,Oe.mapKeys=function FT(d,p){var y={};return p=xn(p,3),lo(d,function(K,be,ke){dl(y,p(K,be,ke),K)}),y},Oe.mapValues=function kT(d,p){var y={};return p=xn(p,3),lo(d,function(K,be,ke){dl(y,be,p(K,be,ke))}),y},Oe.matches=function Hy(d){return As(Ko(d,1))},Oe.matchesProperty=function yf(d,p){return fl(d,Ko(p,1))},Oe.memoize=Bd,Oe.merge=BT,Oe.mergeWith=_x,Oe.method=eM,Oe.methodOf=Dx,Oe.mixin=zy,Oe.negate=df,Oe.nthArg=function Rx(d){return d=Ln(d),Hn(function(p){return lw(p,d)})},Oe.omit=yx,Oe.omitBy=function jT(d,p){return vx(d,df(xn(p)))},Oe.once=function yy(d){return my(2,d)},Oe.orderBy=function cg(d,p,y,K){return null==d?[]:(Bn(p)||(p=null==p?[]:[p]),Bn(y=K?C:y)||(y=null==y?[]:[y]),uw(d,p,y))},Oe.over=nM,Oe.overArgs=js,Oe.overEvery=iM,Oe.overSome=$F,Oe.partial=Tu,Oe.partialRight=vy,Oe.partition=gy,Oe.pick=UT,Oe.pickBy=vx,Oe.property=Ox,Oe.propertyOf=function bg(d){return function(p){return null==d?C:Cc(d,p)}},Oe.pull=ay,Oe.pullAll=cy,Oe.pullAllBy=function WC(d,p,y){return d&&d.length&&p&&p.length?Td(d,p,xn(y,2)):d},Oe.pullAllWith=function $C(d,p,y){return d&&d.length&&p&&p.length?Td(d,p,C,y):d},Oe.pullAt=Lw,Oe.range=Gy,Oe.rangeRight=rM,Oe.rearg=Qw,Oe.reject=function lf(d,p){return(Bn(d)?qo:qa)(d,df(xn(p,3)))},Oe.remove=function YC(d,p){var y=[];if(!d||!d.length)return y;var K=-1,be=[],ke=d.length;for(p=xn(p,3);++K<ke;){var et=d[K];p(et,K,d)&&(y.push(et),be.push(K))}return Ic(d,be),y},Oe.rest=function pT(d,p){if("function"!=typeof d)throw new gi(_);return Hn(d,p=p===C?p:Ln(p))},Oe.reverse=rg,Oe.sampleSize=function Yw(d,p,y){return p=(y?$s(d,p,y):p===C)?1:Ln(p),(Bn(d)?Xb:hw)(d,p)},Oe.set=function mg(d,p,y){return null==d?d:Id(d,p,y)},Oe.setWith=function Lc(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:Id(d,p,y,K)},Oe.shuffle=function Xw(d){return(Bn(d)?qb:$h)(d)},Oe.slice=function XC(d,p,y){var K=null==d?0:d.length;return K?(y&&"number"!=typeof y&&$s(d,p,y)?(p=0,y=K):(p=null==p?0:Ln(p),y=y===C?K:Ln(y)),Qo(d,p,y)):[]},Oe.sortBy=Cl,Oe.sortedUniq=function El(d){return d&&d.length?pw(d):[]},Oe.sortedUniqBy=function sg(d,p){return d&&d.length?pw(d,xn(p,2)):[]},Oe.split=function qT(d,p,y){return y&&"number"!=typeof y&&$s(d,p,y)&&(p=y=C),(y=y===C?de:y>>>0)?(d=Ci(d))&&("string"==typeof p||null!=p&&!Ay(p))&&!(p=ea(p))&&vd(d)?ml(Aa(d),0,y):d.split(p,y):[]},Oe.spread=function ex(d,p){if("function"!=typeof d)throw new gi(_);return p=null==p?0:nr(Ln(p),0),Hn(function(y){var K=y[p],be=ml(y,0,p);return K&&sl(be,K),Xo(d,this,be)})},Oe.tail=function Bw(d){var p=null==d?0:d.length;return p?Qo(d,1,p):[]},Oe.take=function sf(d,p,y){return d&&d.length?Qo(d,0,(p=y||p===C?1:Ln(p))<0?0:p):[]},Oe.takeRight=function KC(d,p,y){var K=null==d?0:d.length;return K?Qo(d,(p=K-(p=y||p===C?1:Ln(p)))<0?0:p,K):[]},Oe.takeRightWhile=function JC(d,p){return d&&d.length?pl(d,xn(p,3),!1,!0):[]},Oe.takeWhile=function uy(d,p){return d&&d.length?pl(d,xn(p,3)):[]},Oe.tap=function hy(d,p){return p(d),d},Oe.throttle=function gT(d,p,y){var K=!0,be=!0;if("function"!=typeof d)throw new gi(_);return rr(y)&&(K="leading"in y?!!y.leading:K,be="trailing"in y?!!y.trailing:be),_y(d,p,{leading:K,maxWait:p,trailing:be})},Oe.thru=af,Oe.toArray=Ty,Oe.toPairs=Vd,Oe.toPairsIn=Py,Oe.toPath=function Nx(d){return Bn(d)?fr(d,Mo):Xs(d)?[d]:Ss(Qp(Ci(d)))},Oe.toPlainObject=hx,Oe.transform=function bx(d,p,y){var K=Bn(d),be=K||ec(d)||Du(d);if(p=xn(p,4),null==y){var ke=d&&d.constructor;y=be?K?new ke:[]:rr(d)&&tc(ke)?lu(wc(d)):{}}return(be?xa:lo)(d,function(et,lt,pt){return p(y,et,lt,pt)}),y},Oe.unary=function tx(d){return qw(d,1)},Oe.union=ZC,Oe.unionBy=Al,Oe.unionWith=og,Oe.uniq=function QC(d){return d&&d.length?Ka(d):[]},Oe.uniqBy=function jw(d,p){return d&&d.length?Ka(d,xn(p,2)):[]},Oe.uniqWith=function Ia(d,p){return p="function"==typeof p?p:C,d&&d.length?Ka(d,C,p):[]},Oe.unset=function wx(d,p){return null==d||gu(d,p)},Oe.unzip=Uw,Oe.unzipWith=Qa,Oe.update=function BF(d,p,y){return null==d?d:gw(d,p,Yp(y))},Oe.updateWith=function jF(d,p,y,K){return K="function"==typeof K?K:C,null==d?d:gw(d,p,Yp(y),K)},Oe.values=pf,Oe.valuesIn=function Ny(d){return null==d?[]:Oh(d,fo(d))},Oe.without=dy,Oe.words=vg,Oe.wrap=function mT(d,p){return Tu(Yp(p),d)},Oe.xor=eT,Oe.xorBy=tT,Oe.xorWith=nT,Oe.zip=iT,Oe.zipObject=function Vw(d,p){return bC(d||[],p||[],Sc)},Oe.zipObjectDeep=function kd(d,p){return bC(d||[],p||[],Id)},Oe.zipWith=Io,Oe.entries=Vd,Oe.entriesIn=Py,Oe.extend=My,Oe.extendWith=Ru,zy(Oe,Oe),Oe.add=aM,Oe.attempt=Pu,Oe.camelCase=xx,Oe.capitalize=Ex,Oe.ceil=Il,Oe.clamp=function Ly(d,p,y){return y===C&&(y=p,p=C),y!==C&&(y=(y=Do(y))==y?y:0),p!==C&&(p=(p=Do(p))==p?p:0),hu(Do(d),p,y)},Oe.clone=function _T(d){return Ko(d,4)},Oe.cloneDeep=function by(d){return Ko(d,5)},Oe.cloneDeepWith=function wy(d,p){return Ko(d,5,p="function"==typeof p?p:C)},Oe.cloneWith=function yT(d,p){return Ko(d,4,p="function"==typeof p?p:C)},Oe.conformsTo=function vT(d,p){return null==p||fu(d,p,ds(p))},Oe.deburr=Ax,Oe.defaultTo=function zd(d,p){return null==d||d!=d?p:d},Oe.divide=cM,Oe.endsWith=function HT(d,p,y){d=Ci(d),p=ea(p);var K=d.length,be=y=y===C?K:hu(Ln(y),0,K);return(y-=p.length)>=0&&d.slice(y,be)==p},Oe.eq=Ys,Oe.escape=function zT(d){return(d=Ci(d))&&Ei.test(d)?d.replace(rs,ZS):d},Oe.escapeRegExp=function Sx(d){return(d=Ci(d))&&Ze.test(d)?d.replace($e,"\\$&"):d},Oe.every=function RF(d,p,y){var K=Bn(d)?qS:gC;return y&&$s(d,p,y)&&(p=C),K(d,xn(p,3))},Oe.find=oT,Oe.findIndex=rf,Oe.findKey=function OT(d,p){return ot(d,xn(p,3),lo)},Oe.findLast=fy,Oe.findLastIndex=Pw,Oe.findLastKey=function gg(d,p){return ot(d,xn(p,3),Jo)},Oe.floor=Gd,Oe.forEach=aT,Oe.forEachRight=cT,Oe.forIn=function Dy(d,p){return null==d?d:Si(d,xn(p,3),fo)},Oe.forInRight=function px(d,p){return null==d?d:F_(d,xn(p,3),fo)},Oe.forOwn=function gx(d,p){return d&&lo(d,xn(p,3))},Oe.forOwnRight=function mx(d,p){return d&&Jo(d,xn(p,3))},Oe.get=Ry,Oe.gt=bT,Oe.gte=wT,Oe.has=function NT(d,p){return null!=d&&Aw(d,p,Gs)},Oe.hasIn=Oy,Oe.head=ig,Oe.identity=Ts,Oe.includes=function LF(d,p,y,K){d=qr(d)?d:pf(d),y=y&&!K?Ln(y):0;var be=d.length;return y<0&&(y=nr(be+y,0)),hf(d)?y<=be&&d.indexOf(p,y)>-1:!!be&&kt(d,p,y)>-1},Oe.indexOf=function VC(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=null==y?0:Ln(y);return be<0&&(be=nr(K+be,0)),kt(d,p,be)},Oe.inRange=function UF(d,p,y){return p=Da(p),y===C?(y=p,p=0):y=Da(y),function tw(d,p,y){return d>=Xr(p,y)&&d<nr(p,y)}(d=Do(d),p,y)},Oe.invoke=nc,Oe.isArguments=Tl,Oe.isArray=Bn,Oe.isArrayBuffer=ix,Oe.isArrayLike=qr,Oe.isArrayLikeObject=pr,Oe.isBoolean=function rx(d){return!0===d||!1===d||Mr(d)&&uo(d)==A},Oe.isBuffer=ec,Oe.isDate=hg,Oe.isElement=function xT(d){return Mr(d)&&1===d.nodeType&&!Ml(d)},Oe.isEmpty=function ET(d){if(null==d)return!0;if(qr(d)&&(Bn(d)||"string"==typeof d||"function"==typeof d.splice||ec(d)||Du(d)||Tl(d)))return!d.length;var p=Ws(d);if(p==ne||p==Re)return!d.size;if(xu(d))return!Hp(d).length;for(var y in d)if(Jn.call(d,y))return!1;return!0},Oe.isEqual=function AT(d,p){return pu(d,p)},Oe.isEqualWith=function ST(d,p,y){var K=(y="function"==typeof y?y:C)?y(d,p):C;return K===C?pu(d,p,C,y):!!K},Oe.isError=xy,Oe.isFinite=function CT(d){return"number"==typeof d&&ls(d)},Oe.isFunction=tc,Oe.isInteger=jd,Oe.isLength=Mu,Oe.isMap=sx,Oe.isMatch=function Ey(d,p){return d===p||Gh(d,p,Zp(p))},Oe.isMatchWith=function ox(d,p,y){return y="function"==typeof y?y:C,Gh(d,p,Zp(p),y)},Oe.isNaN=function Iu(d){return MT(d)&&d!=+d},Oe.isNative=function ax(d){if(Cw(d))throw new fn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return iw(d)},Oe.isNil=function TT(d){return null==d},Oe.isNull=function cx(d){return null===d},Oe.isNumber=MT,Oe.isObject=rr,Oe.isObjectLike=Mr,Oe.isPlainObject=Ml,Oe.isRegExp=Ay,Oe.isSafeInteger=function lx(d){return jd(d)&&d>=-je&&d<=je},Oe.isSet=Sy,Oe.isString=hf,Oe.isSymbol=Xs,Oe.isTypedArray=Du,Oe.isUndefined=function fg(d){return d===C},Oe.isWeakMap=function ff(d){return Mr(d)&&Ws(d)==_t},Oe.isWeakSet=function ux(d){return Mr(d)&&"[object WeakSet]"==uo(d)},Oe.join=function GC(d,p){return null==d?"":us.call(d,p)},Oe.kebabCase=_g,Oe.last=ia,Oe.lastIndexOf=function oy(d,p,y){var K=null==d?0:d.length;if(!K)return-1;var be=K;return y!==C&&(be=(be=Ln(y))<0?nr(K+be,0):Xr(be,K-1)),p==p?function nC(at,At,yt){for(var qt=yt+1;qt--;)if(at[qt]===At)return qt;return qt}(d,p,be):Rh(d,Lp,be,!0)},Oe.lowerCase=Cx,Oe.lowerFirst=Fy,Oe.lt=Cy,Oe.lte=pg,Oe.max=function ei(d){return d&&d.length?Mt(d,Ts,Vp):C},Oe.maxBy=function lM(d,p){return d&&d.length?Mt(d,xn(p,2),Vp):C},Oe.mean=function Lx(d){return gd(d,Ts)},Oe.meanBy=function Fc(d,p){return gd(d,xn(p,2))},Oe.min=function uM(d){return d&&d.length?Mt(d,Ts,Wh):C},Oe.minBy=function dM(d,p){return d&&d.length?Mt(d,xn(p,2),Wh):C},Oe.stubArray=wg,Oe.stubFalse=bf,Oe.stubObject=function xg(){return{}},Oe.stubString=function sM(){return""},Oe.stubTrue=function Px(){return!0},Oe.multiply=Wy,Oe.nth=function Su(d,p){return d&&d.length?lw(d,Ln(p)):C},Oe.noConflict=function tM(){return as._===this&&(as._=Nn),this},Oe.noop=vf,Oe.now=dg,Oe.pad=function GT(d,p,y){d=Ci(d);var K=(p=Ln(p))?bd(d):0;if(!p||K>=p)return d;var be=(p-K)/2;return Rc(Ec(be),y)+d+Rc(cu(be),y)},Oe.padEnd=function Cs(d,p,y){d=Ci(d);var K=(p=Ln(p))?bd(d):0;return p&&K<p?d+Rc(p-K,y):d},Oe.padStart=function WT(d,p,y){d=Ci(d);var K=(p=Ln(p))?bd(d):0;return p&&K<p?Rc(p-K,y)+d:d},Oe.parseInt=function $T(d,p,y){return y||null==p?p=0:p&&(p=+p),S_(Ci(d).replace(St,""),p||0)},Oe.random=function VF(d,p,y){if(y&&"boolean"!=typeof y&&$s(d,p,y)&&(p=y=C),y===C&&("boolean"==typeof p?(y=p,p=C):"boolean"==typeof d&&(y=d,d=C)),d===C&&p===C?(d=0,p=1):(d=Da(d),p===C?(p=d,d=0):p=Da(p)),d>p){var K=d;d=p,p=K}if(y||d%1||p%1){var be=Ub();return Xr(d+be*(p-d+si("1e-"+((be+"").length-1))),p)}return H_(d,p)},Oe.reduce=function Ww(d,p,y){var K=Bn(d)?y_:Pb,be=arguments.length<3;return K(d,xn(p,4),y,be,hl)},Oe.reduceRight=function $w(d,p,y){var K=Bn(d)?Ob:Pb,be=arguments.length<3;return K(d,xn(p,4),y,be,Qb)},Oe.repeat=function ky(d,p,y){return p=(y?$s(d,p,y):p===C)?1:Ln(p),Md(Ci(d),p)},Oe.replace=function Tx(){var d=arguments,p=Ci(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Oe.result=function VT(d,p,y){var K=-1,be=(p=gl(p,d)).length;for(be||(be=1,d=C);++K<be;){var ke=null==d?C:d[Mo(p[K])];ke===C&&(K=be,ke=y),d=tc(ke)?ke.call(d):ke}return d},Oe.round=XF,Oe.runInContext=at,Oe.sample=function uT(d){return(Bn(d)?Yb:z_)(d)},Oe.size=function lg(d){if(null==d)return 0;if(qr(d))return hf(d)?bd(d):d.length;var p=Ws(d);return p==ne||p==Re?d.size:Hp(d).length},Oe.snakeCase=XT,Oe.some=function ug(d,p,y){var K=Bn(d)?ol:G_;return y&&$s(d,p,y)&&(p=C),K(d,xn(p,3))},Oe.sortedIndex=function qC(d,p){return Gp(d,p)},Oe.sortedIndexBy=function MF(d,p,y){return W_(d,p,xn(y,2))},Oe.sortedIndexOf=function Fw(d,p){var y=null==d?0:d.length;if(y){var K=Gp(d,p);if(K<y&&Ys(d[K],p))return K}return-1},Oe.sortedLastIndex=function kw(d,p){return Gp(d,p,!0)},Oe.sortedLastIndexBy=function Ki(d,p,y){return W_(d,p,xn(y,2),!0)},Oe.sortedLastIndexOf=function ly(d,p){if(null!=d&&d.length){var K=Gp(d,p,!0)-1;if(Ys(d[K],p))return K}return-1},Oe.startCase=KT,Oe.startsWith=function JT(d,p,y){return d=Ci(d),y=null==y?0:hu(Ln(y),0,d.length),p=ea(p),d.slice(y,y+p.length)==p},Oe.subtract=qF,Oe.sum=function KF(d){return d&&d.length?md(d,Ts):0},Oe.sumBy=function hM(d,p){return d&&d.length?md(d,xn(p,2)):0},Oe.template=function Mx(d,p,y){var K=Oe.templateSettings;y&&$s(d,p,y)&&(p=C),d=Ci(d),p=Ru({},p,K,vu);var lt,pt,be=Ru({},p.imports,K.imports,vu),ke=ds(be),et=Oh(be,ke),Rt=0,Ot=p.interpolate||Vi,Bt="__p += '",Yt=x_((p.escape||Vi).source+"|"+Ot.source+"|"+(Ot===za?yc:Vi).source+"|"+(p.evaluate||Vi).source+"|$","g"),un="//# sourceURL="+(Jn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mb+"]")+"\n";d.replace(Yt,function(Tn,$n,fi,po,Kr,Oo){return fi||(fi=po),Bt+=d.slice(Rt,Oo).replace(ye,Fb),$n&&(lt=!0,Bt+="' +\n__e("+$n+") +\n'"),Kr&&(pt=!0,Bt+="';\n"+Kr+";\n__p += '"),fi&&(Bt+="' +\n((__t = ("+fi+")) == null ? '' : __t) +\n'"),Rt=Oo+Tn.length,Tn}),Bt+="';\n";var In=Jn.call(p,"variable")&&p.variable;if(In){if(ro.test(In))throw new fn("Invalid `variable` option passed into `_.template`")}else Bt="with (obj) {\n"+Bt+"\n}\n";Bt=(pt?Bt.replace(An,""):Bt).replace(Yi,"$1").replace(io,"$1;"),Bt="function("+(In||"obj")+") {\n"+(In?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(lt?", __e = _.escape":"")+(pt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Bt+"return __p\n}";var Wn=Pu(function(){return yi(ke,un+"return "+Bt).apply(C,et)});if(Wn.source=Bt,xy(Wn))throw Wn;return Wn},Oe.times=function oM(d,p){if((d=Ln(d))<1||d>je)return[];var y=de,K=Xr(d,de);p=xn(p),d-=de;for(var be=Eo(K,p);++y<d;)p(y);return be},Oe.toFinite=Da,Oe.toInteger=Ln,Oe.toLength=dx,Oe.toLower=function HF(d){return Ci(d).toLowerCase()},Oe.toNumber=Do,Oe.toSafeInteger=function IT(d){return d?hu(Ln(d),-je,je):0===d?d:0},Oe.toString=Ci,Oe.toUpper=function zF(d){return Ci(d).toUpperCase()},Oe.trim=function gf(d,p,y){if((d=Ci(d))&&(y||p===C))return pi(d);if(!d||!(p=ea(p)))return d;var K=Aa(d),be=Aa(p);return ml(K,w_(K,be),yd(K,be)+1).join("")},Oe.trimEnd=function ZT(d,p,y){if((d=Ci(d))&&(y||p===C))return d.slice(0,_i(d)+1);if(!d||!(p=ea(p)))return d;var K=Aa(d);return ml(K,0,yd(K,Aa(p))+1).join("")},Oe.trimStart=function GF(d,p,y){if((d=Ci(d))&&(y||p===C))return d.replace(St,"");if(!d||!(p=ea(p)))return d;var K=Aa(d);return ml(K,w_(K,Aa(p))).join("")},Oe.truncate=function WF(d,p){var y=30,K="...";if(rr(p)){var be="separator"in p?p.separator:be;y="length"in p?Ln(p.length):y,K="omission"in p?ea(p.omission):K}var ke=(d=Ci(d)).length;if(vd(d)){var et=Aa(d);ke=et.length}if(y>=ke)return d;var lt=y-bd(K);if(lt<1)return K;var pt=et?ml(et,0,lt).join(""):d.slice(0,lt);if(be===C)return pt+K;if(et&&(lt+=pt.length-lt),Ay(be)){if(d.slice(lt).search(be)){var Rt,Ot=pt;for(be.global||(be=x_(be.source,Ci(di.exec(be))+"g")),be.lastIndex=0;Rt=be.exec(Ot);)var Bt=Rt.index;pt=pt.slice(0,Bt===C?lt:Bt)}}else if(d.indexOf(ea(be),lt)!=lt){var Yt=pt.lastIndexOf(be);Yt>-1&&(pt=pt.slice(0,Yt))}return pt+K},Oe.unescape=function yg(d){return(d=Ci(d))&&Wo.test(d)?d.replace(Tr,iC):d},Oe.uniqueId=function YF(d){var p=++wd;return Ci(d)+p},Oe.upperCase=QT,Oe.upperFirst=mf,Oe.each=aT,Oe.eachRight=cT,Oe.first=ig,zy(Oe,function(){var d={};return lo(Oe,function(p,y){Jn.call(Oe.prototype,y)||(d[y]=p)}),d}(),{chain:!1}),Oe.VERSION="4.17.21",xa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Oe[d].placeholder=Oe}),xa(["drop","take"],function(d,p){ci.prototype[d]=function(y){y=y===C?1:nr(Ln(y),0);var K=this.__filtered__&&!p?new ci(this):this.clone();return K.__filtered__?K.__takeCount__=Xr(y,K.__takeCount__):K.__views__.push({size:Xr(y,de),type:d+(K.__dir__<0?"Right":"")}),K},ci.prototype[d+"Right"]=function(y){return this.reverse()[d](y).reverse()}}),xa(["filter","map","takeWhile"],function(d,p){var y=p+1,K=1==y||3==y;ci.prototype[d]=function(be){var ke=this.clone();return ke.__iteratees__.push({iteratee:xn(be,3),type:y}),ke.__filtered__=ke.__filtered__||K,ke}}),xa(["head","last"],function(d,p){var y="take"+(p?"Right":"");ci.prototype[d]=function(){return this[y](1).value()[0]}}),xa(["initial","tail"],function(d,p){var y="drop"+(p?"":"Right");ci.prototype[d]=function(){return this.__filtered__?new ci(this):this[y](1)}}),ci.prototype.compact=function(){return this.filter(Ts)},ci.prototype.find=function(d){return this.filter(d).head()},ci.prototype.findLast=function(d){return this.reverse().find(d)},ci.prototype.invokeMap=Hn(function(d,p){return"function"==typeof d?new ci(this):this.map(function(y){return zh(y,d,p)})}),ci.prototype.reject=function(d){return this.filter(df(xn(d)))},ci.prototype.slice=function(d,p){d=Ln(d);var y=this;return y.__filtered__&&(d>0||p<0)?new ci(y):(d<0?y=y.takeRight(-d):d&&(y=y.drop(d)),p!==C&&(y=(p=Ln(p))<0?y.dropRight(-p):y.take(p-d)),y)},ci.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},ci.prototype.toArray=function(){return this.take(de)},lo(ci.prototype,function(d,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),K=/^(?:head|last)$/.test(p),be=Oe[K?"take"+("last"==p?"Right":""):p],ke=K||/^find/.test(p);be&&(Oe.prototype[p]=function(){var et=this.__wrapped__,lt=K?[1]:arguments,pt=et instanceof ci,Rt=lt[0],Ot=pt||Bn(et),Bt=function($n){var fi=be.apply(Oe,sl([$n],lt));return K&&Yt?fi[0]:fi};Ot&&y&&"function"==typeof Rt&&1!=Rt.length&&(pt=Ot=!1);var Yt=this.__chain__,In=ke&&!Yt,Wn=pt&&!this.__actions__.length;if(!ke&&Ot){et=Wn?et:new ci(this);var Tn=d.apply(et,lt);return Tn.__actions__.push({func:af,args:[Bt],thisArg:C}),new Ta(Tn,Yt)}return In&&Wn?d.apply(this,lt):(Tn=this.thru(Bt),In?K?Tn.value()[0]:Tn.value():Tn)})}),xa(["pop","push","shift","sort","splice","unshift"],function(d){var p=Ht[d],y=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",K=/^(?:pop|shift)$/.test(d);Oe.prototype[d]=function(){var be=arguments;if(K&&!this.__chain__){var ke=this.value();return p.apply(Bn(ke)?ke:[],be)}return this[y](function(et){return p.apply(Bn(et)?et:[],be)})}}),lo(ci.prototype,function(d,p){var y=Oe[p];if(y){var K=y.name+"";Jn.call(Bh,K)||(Bh[K]=[]),Bh[K].push({name:p,func:y})}}),Bh[Dc(C,2).name]=[{name:"wrapper",func:C}],ci.prototype.clone=function EF(){var d=new ci(this.__wrapped__);return d.__actions__=Ss(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Ss(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Ss(this.__views__),d},ci.prototype.reverse=function uu(){if(this.__filtered__){var d=new ci(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},ci.prototype.value=function Vb(){var d=this.__wrapped__.value(),p=this.__dir__,y=Bn(d),K=p<0,be=y?d.length:0,ke=function Ew(d,p,y){for(var K=-1,be=y.length;++K<be;){var ke=y[K],et=ke.size;switch(ke.type){case"drop":d+=et;break;case"dropRight":p-=et;break;case"take":p=Xr(p,d+et);break;case"takeRight":d=nr(d,p-et)}}return{start:d,end:p}}(0,be,this.__views__),et=ke.start,lt=ke.end,pt=lt-et,Rt=K?lt:et-1,Ot=this.__iteratees__,Bt=Ot.length,Yt=0,un=Xr(pt,this.__takeCount__);if(!y||!K&&be==pt&&un==pt)return Wp(d,this.__actions__);var In=[];e:for(;pt--&&Yt<un;){for(var Wn=-1,Tn=d[Rt+=p];++Wn<Bt;){var $n=Ot[Wn],po=$n.type,Kr=(0,$n.iteratee)(Tn);if(2==po)Tn=Kr;else if(!Kr){if(1==po)continue e;break e}}In[Yt++]=Tn}return In},Oe.prototype.at=Sl,Oe.prototype.chain=function cf(){return Nc(this)},Oe.prototype.commit=function IF(){return new Ta(this.value(),this.__chain__)},Oe.prototype.next=function ag(){this.__values__===C&&(this.__values__=Ty(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?C:this.__values__[this.__index__++]}},Oe.prototype.plant=function rT(d){for(var p,y=this;y instanceof I_;){var K=ny(y);K.__index__=0,K.__values__=C,p?be.__wrapped__=K:p=K;var be=K;y=y.__wrapped__}return be.__wrapped__=d,p},Oe.prototype.reverse=function zw(){var d=this.__wrapped__;if(d instanceof ci){var p=d;return this.__actions__.length&&(p=new ci(this)),(p=p.reverse()).__actions__.push({func:af,args:[rg],thisArg:C}),new Ta(p,this.__chain__)}return this.thru(rg)},Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=function DF(){return Wp(this.__wrapped__,this.__actions__)},Oe.prototype.first=Oe.prototype.head,ll&&(Oe.prototype[ll]=function Hw(){return this}),Oe}();as._=$r,(Q=function(){return $r}.call(_e,S,_e,Ue))!==C&&(Ue.exports=Q)}.call(this)},5249:(Ue,_e,S)=>{var Q=S(549),C=Q.ARRAY_BUFFER_SUPPORT,$=Q.SYMBOL_SUPPORT;Ue.exports=function(X,_){var E,L,G,P,F;if(!X)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(X)||C&&ArrayBuffer.isView(X)||"string"==typeof X||"[object Arguments]"===X.toString())for(G=0,P=X.length;G<P;G++)_(X[G],G);else if("function"!=typeof X.forEach)if($&&Symbol.iterator in X&&"function"!=typeof X.next&&(X=X[Symbol.iterator]()),"function"!=typeof X.next)for(L in X)X.hasOwnProperty(L)&&_(X[L],L);else for(E=X,G=0;!0!==(F=E.next()).done;)_(F.value,G),G++;else X.forEach(_)}},2508:Ue=>{function _e(S){if("function"!=typeof S)throw new Error("obliterator/iterator: expecting a function!");this.next=S}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this}),_e.of=function(){var S=arguments,Q=S.length,C=0;return new _e(function(){return C>=Q?{done:!0}:{done:!1,value:S[C++]}})},_e.empty=function(){return new _e(function(){return{done:!0}})},_e.fromSequence=function(S){var Q=0,C=S.length;return new _e(function(){return Q>=C?{done:!0}:{done:!1,value:S[Q++]}})},_e.is=function(S){return S instanceof _e||"object"==typeof S&&null!==S&&"function"==typeof S.next},Ue.exports=_e},549:(Ue,_e)=>{_e.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",_e.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(Ue,_e,S)=>{var Q=S(2508),C=S(5249);function $(){this.clear()}$.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},$.prototype.enqueue=function(z){return this.items.push(z),++this.size},$.prototype.dequeue=function(){if(this.size){var z=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,z}},$.prototype.peek=function(){if(this.size)return this.items[this.offset]},$.prototype.forEach=function(z,X){X=arguments.length>1?X:this;for(var _=this.offset,E=0,L=this.items.length;_<L;_++,E++)z.call(X,this.items[_],E,this)},$.prototype.toArray=function(){return this.items.slice(this.offset)},$.prototype.values=function(){var z=this.items,X=this.offset;return new Q(function(){if(X>=z.length)return{done:!0};var _=z[X];return X++,{value:_,done:!1}})},$.prototype.entries=function(){var z=this.items,X=this.offset,_=0;return new Q(function(){if(X>=z.length)return{done:!0};var E=z[X];return X++,{value:[_++,E],done:!1}})},typeof Symbol<"u"&&($.prototype[Symbol.iterator]=$.prototype.values),$.prototype.toString=function(){return this.toArray().join(",")},$.prototype.toJSON=function(){return this.toArray()},$.prototype.inspect=function(){var z=this.toArray();return Object.defineProperty(z,"constructor",{value:$,enumerable:!1}),z},typeof Symbol<"u"&&($.prototype[Symbol.for("nodejs.util.inspect.custom")]=$.prototype.inspect),$.from=function(z){var X=new $;return C(z,function(_){X.enqueue(_)}),X},$.of=function(){return $.from(arguments)},Ue.exports=$},5020:Ue=>{Ue.exports=function _e(S,Q,C){function $(_,E){if(!Q[_]){if(!S[_]){if(z)return z(_,!0);throw new Error("Cannot find module '"+_+"'")}E=Q[_]={exports:{}},S[_][0].call(E.exports,function(G){return $(S[_][1][G]||G)},E,E.exports,_e,S,Q,C)}return Q[_].exports}for(var z=void 0,X=0;X<C.length;X++)$(C[X]);return $}({1:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){"use strict";var F=_e("crypto");function oe(W,B){var b;return void 0===(b="passthrough"!==(B=se(W,B)).algorithm?F.createHash(B.algorithm):new ee).write&&(b.write=b.update,b.end=b.update),J(B,b).dispatch(W),b.update||b.end(""),b.digest?b.digest("buffer"===B.encoding?void 0:B.encoding):(W=b.read(),"buffer"!==B.encoding?W.toString(B.encoding):W)}(Q=S.exports=oe).sha1=function(W){return oe(W)},Q.keys=function(W){return oe(W,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},Q.MD5=function(W){return oe(W,{algorithm:"md5",encoding:"hex"})},Q.keysMD5=function(W){return oe(W,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=F.getHashes?F.getHashes().slice():["sha1","md5"],k=(x.push("passthrough"),["buffer","hex","binary","base64"]);function se(W,B){var b={};if(b.algorithm=(B=B||{}).algorithm||"sha1",b.encoding=B.encoding||"hex",b.excludeValues=!!B.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=!0===B.ignoreUnknown,b.respectType=!1!==B.respectType,b.respectFunctionNames=!1!==B.respectFunctionNames,b.respectFunctionProperties=!1!==B.respectFunctionProperties,b.unorderedArrays=!0===B.unorderedArrays,b.unorderedSets=!1!==B.unorderedSets,b.unorderedObjects=!1!==B.unorderedObjects,b.replacer=B.replacer||void 0,b.excludeKeys=B.excludeKeys||void 0,void 0===W)throw new Error("Object argument required.");for(var I=0;I<x.length;++I)x[I].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=x[I]);if(-1===x.indexOf(b.algorithm))throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+x.join(", "));if(-1===k.indexOf(b.encoding)&&"passthrough"!==b.algorithm)throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+k.join(", "));return b}function Y(W){if("function"==typeof W)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(W))}function J(W,B,b){function I(T){return B.update?B.update(T,"utf8"):B.write(T,"utf8")}return b=b||[],{dispatch:function(T){return this["_"+(null===(T=W.replacer?W.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var le,j=Object.prototype.toString.call(T),Ie=/\[object (.*)\]/i.exec(j);if(Ie=(Ie=Ie?Ie[1]:"unknown:["+j+"]").toLowerCase(),0<=(j=b.indexOf(T)))return this.dispatch("[CIRCULAR:"+j+"]");if(b.push(T),void 0!==z&&z.isBuffer&&z.isBuffer(T))return I("buffer:"),I(T);if("object"===Ie||"function"===Ie||"asyncfunction"===Ie)return j=Object.keys(T),W.unorderedObjects&&(j=j.sort()),!1===W.respectType||Y(T)||j.splice(0,0,"prototype","__proto__","constructor"),W.excludeKeys&&(j=j.filter(function(ae){return!W.excludeKeys(ae)})),I("object:"+j.length+":"),le=this,j.forEach(function(ae){le.dispatch(ae),I(":"),W.excludeValues||le.dispatch(T[ae]),I(",")});if(!this["_"+Ie]){if(W.ignoreUnknown)return I("["+Ie+"]");throw new Error('Unknown object type "'+Ie+'"')}this["_"+Ie](T)},_array:function(T,ae){ae=void 0!==ae?ae:!1!==W.unorderedArrays;var j=this;if(I("array:"+T.length+":"),!ae||T.length<=1)return T.forEach(function(xe){return j.dispatch(xe)});var Ie=[];return ae=T.map(function(xe){var Pe=new ee,He=b.slice();return J(W,Pe,He).dispatch(xe),Ie=Ie.concat(He.slice(b.length)),Pe.read().toString()}),b=b.concat(Ie),ae.sort(),this._array(ae,!1)},_date:function(T){return I("date:"+T.toJSON())},_symbol:function(T){return I("symbol:"+T.toString())},_error:function(T){return I("error:"+T.toString())},_boolean:function(T){return I("bool:"+T.toString())},_string:function(T){I("string:"+T.length+":"),I(T.toString())},_function:function(T){I("fn:"),Y(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==W.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),W.respectFunctionProperties&&this._object(T)},_number:function(T){return I("number:"+T.toString())},_xml:function(T){return I("xml:"+T.toString())},_null:function(){return I("Null")},_undefined:function(){return I("Undefined")},_regexp:function(T){return I("regex:"+T.toString())},_uint8array:function(T){return I("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return I("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return I("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return I("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return I("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return I("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return I("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return I("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return I("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return I("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return I("url:"+T.toString())},_map:function(T){return I("map:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_set:function(T){return I("set:"),T=Array.from(T),this._array(T,!1!==W.unorderedSets)},_file:function(T){return I("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(W.ignoreUnknown)return I("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return I("domwindow")},_bigint:function(T){return I("bigint:"+T.toString())},_process:function(){return I("process")},_timer:function(){return I("timer")},_pipe:function(){return I("pipe")},_tcp:function(){return I("tcp")},_udp:function(){return I("udp")},_tty:function(){return I("tty")},_statwatcher:function(){return I("statwatcher")},_securecontext:function(){return I("securecontext")},_connection:function(){return I("connection")},_zlib:function(){return I("zlib")},_context:function(){return I("context")},_nodescript:function(){return I("nodescript")},_httpparser:function(){return I("httpparser")},_dataview:function(){return I("dataview")},_signal:function(){return I("signal")},_fsevent:function(){return I("fsevent")},_tlswrap:function(){return I("tlswrap")}}}function ee(){return{buf:"",write:function(W){this.buf+=W},end:function(W){this.buf+=W},read:function(){return this.buf}}}Q.writeToStream=function(W,B,b){return void 0===b&&(b=B,B={}),J(B=se(W,B),b).dispatch(W)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){!function(F){"use strict";var oe=typeof Uint8Array<"u"?Uint8Array:Array,x="+".charCodeAt(0),k="/".charCodeAt(0),se="0".charCodeAt(0),Y="a".charCodeAt(0),J="A".charCodeAt(0),ee="-".charCodeAt(0),W="_".charCodeAt(0);function B(b){return(b=b.charCodeAt(0))===x||b===ee?62:b===k||b===W?63:b<se?-1:b<se+10?b-se+26+26:b<J+26?b-J:b<Y+26?b-Y+26:void 0}F.toByteArray=function(b){var I,T;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var le="="===b.charAt((le=b.length)-2)?2:"="===b.charAt(le-1)?1:0,j=new oe(3*b.length/4-le),Ie=0<le?b.length-4:b.length,ae=0;function xe(Pe){j[ae++]=Pe}for(I=0;I<Ie;I+=4,0)xe((16711680&(T=B(b.charAt(I))<<18|B(b.charAt(I+1))<<12|B(b.charAt(I+2))<<6|B(b.charAt(I+3))))>>16),xe((65280&T)>>8),xe(255&T);return 2==le?xe(255&(T=B(b.charAt(I))<<2|B(b.charAt(I+1))>>4)):1==le&&(xe((T=B(b.charAt(I))<<10|B(b.charAt(I+1))<<4|B(b.charAt(I+2))>>2)>>8&255),xe(255&T)),j},F.fromByteArray=function(b){var I,T,le,j,Ie=b.length%3,ae="";function xe(Pe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Pe)}for(I=0,le=b.length-Ie;I<le;I+=3)ae+=xe((j=T=(b[I]<<16)+(b[I+1]<<8)+b[I+2])>>18&63)+xe(j>>12&63)+xe(j>>6&63)+xe(63&j);switch(Ie){case 1:ae=(ae+=xe((T=b[b.length-1])>>2))+xe(T<<4&63)+"==";break;case 2:ae=(ae=(ae+=xe((T=(b[b.length-2]<<8)+b[b.length-1])>>10))+xe(T>>4&63))+xe(T<<2&63)+"="}return ae}}(void 0===Q?this.base64js={}:Q)}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(_e,S,Q){(function(C,$,x,X,_,E,L,G,P){var F=_e("base64-js"),oe=_e("ieee754");function x(fe,R,A){if(!(this instanceof x))return new x(fe,R,A);var ie,Z,Ve,Je,ue=typeof fe;if("base64"===R&&"string"==ue)for(fe=(Je=fe).trim?Je.trim():Je.replace(/^\s+|\s+$/g,"");fe.length%4!=0;)fe+="=";if("number"==ue)ie=Qe(fe);else if("string"==ue)ie=x.byteLength(fe,R);else{if("object"!=ue)throw new Error("First argument needs to be a number, array or string.");ie=Qe(fe.length)}if(x._useTypedArrays?Z=x._augment(new Uint8Array(ie)):((Z=this).length=ie,Z._isBuffer=!0),x._useTypedArrays&&"number"==typeof fe.byteLength)Z._set(fe);else if(qe(Je=fe)||x.isBuffer(Je)||Je&&"object"==typeof Je&&"number"==typeof Je.length)for(Ve=0;Ve<ie;Ve++)Z[Ve]=x.isBuffer(fe)?fe.readUInt8(Ve):fe[Ve];else if("string"==ue)Z.write(fe,0,R);else if("number"==ue&&!x._useTypedArrays&&!A)for(Ve=0;Ve<ie;Ve++)Z[Ve]=0;return Z}function J(fe,R,A,Ve){var Z;if(Ve||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+1<fe.length,"Trying to read beyond buffer length")),!((Ve=fe.length)<=R))return A?(Z=fe[R],R+1<Ve&&(Z|=fe[R+1]<<8)):(Z=fe[R]<<8,R+1<Ve&&(Z|=fe[R+1])),Z}function ee(fe,R,A,Ve){var Z;if(Ve||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),!((Ve=fe.length)<=R))return A?(R+2<Ve&&(Z=fe[R+2]<<16),R+1<Ve&&(Z|=fe[R+1]<<8),Z|=fe[R],R+3<Ve&&(Z+=fe[R+3]<<24>>>0)):(R+1<Ve&&(Z=fe[R+1]<<16),R+2<Ve&&(Z|=fe[R+2]<<8),R+3<Ve&&(Z|=fe[R+3]),Z+=fe[R]<<24>>>0),Z}function W(fe,R,A,ie){if(ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+1<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 32768&(ie=J(fe,R,A,!0))?-1*(65535-ie+1):ie}function B(fe,R,A,ie){if(ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(null!=R,"missing offset"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 2147483648&(ie=ee(fe,R,A,!0))?-1*(4294967295-ie+1):ie}function b(fe,R,A,ie){return ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(R+3<fe.length,"Trying to read beyond buffer length")),oe.read(fe,R,A,23,4)}function I(fe,R,A,ie){return ie||(Ke("boolean"==typeof A,"missing or invalid endian"),Ke(R+7<fe.length,"Trying to read beyond buffer length")),oe.read(fe,R,A,52,8)}function T(fe,R,A,ie,Z){if(Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+1<fe.length,"trying to write beyond buffer length"),Ae(R,65535)),!((Z=fe.length)<=A))for(var Ve=0,Je=Math.min(Z-A,2);Ve<Je;Ve++)fe[A+Ve]=(R&255<<8*(ie?Ve:1-Ve))>>>8*(ie?Ve:1-Ve)}function le(fe,R,A,ie,Z){if(Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"trying to write beyond buffer length"),Ae(R,4294967295)),!((Z=fe.length)<=A))for(var Ve=0,Je=Math.min(Z-A,4);Ve<Je;Ve++)fe[A+Ve]=R>>>8*(ie?Ve:3-Ve)&255}function j(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+1<fe.length,"Trying to write beyond buffer length"),nt(R,32767,-32768)),fe.length<=A||T(fe,0<=R?R:65535+R+1,A,ie,Z)}function Ie(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"Trying to write beyond buffer length"),nt(R,2147483647,-2147483648)),fe.length<=A||le(fe,0<=R?R:4294967295+R+1,A,ie,Z)}function ae(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+3<fe.length,"Trying to write beyond buffer length"),mt(R,34028234663852886e22,-34028234663852886e22)),fe.length<=A||oe.write(fe,R,A,ie,23,4)}function xe(fe,R,A,ie,Z){Z||(Ke(null!=R,"missing value"),Ke("boolean"==typeof ie,"missing or invalid endian"),Ke(null!=A,"missing offset"),Ke(A+7<fe.length,"Trying to write beyond buffer length"),mt(R,17976931348623157e292,-17976931348623157e292)),fe.length<=A||oe.write(fe,R,A,ie,52,8)}Q.Buffer=x,Q.SlowBuffer=x,Q.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var fe=new ArrayBuffer(0),R=new Uint8Array(fe);return R.foo=function(){return 42},42===R.foo()&&"function"==typeof R.subarray}catch{return!1}}(),x.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(fe){return!(null==fe||!fe._isBuffer)},x.byteLength=function(fe,R){var A;switch(fe+="",R||"utf8"){case"hex":A=fe.length/2;break;case"utf8":case"utf-8":A=je(fe).length;break;case"ascii":case"binary":case"raw":A=fe.length;break;case"base64":A=Se(fe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=2*fe.length;break;default:throw new Error("Unknown encoding")}return A},x.concat=function(fe,R){if(Ke(qe(fe),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===fe.length)return new x(0);if(1===fe.length)return fe[0];if("number"!=typeof R)for(Z=R=0;Z<fe.length;Z++)R+=fe[Z].length;for(var A=new x(R),ie=0,Z=0;Z<fe.length;Z++){var Ve=fe[Z];Ve.copy(A,ie),ie+=Ve.length}return A},x.prototype.write=function(fe,R,A,ie){isFinite(R)?isFinite(A)||(ie=A,A=void 0):(ne=ie,ie=R,R=A,A=ne),R=Number(R)||0;var Z,Ve,Je,ue,ne=this.length-R;switch((!A||ne<(A=Number(A)))&&(A=ne),ie=String(ie||"utf8").toLowerCase()){case"hex":Z=function(V,M,O,he){O=Number(O)||0;var We=V.length-O;(!he||We<(he=Number(he)))&&(he=We),Ke((We=M.length)%2==0,"Invalid hex string"),We/2<he&&(he=We/2);for(var Ee=0;Ee<he;Ee++){var Re=parseInt(M.substr(2*Ee,2),16);Ke(!isNaN(Re),"Invalid hex string"),V[O+Ee]=Re}return x._charsWritten=2*Ee,Ee}(this,fe,R,A);break;case"utf8":case"utf-8":Ve=this,Je=R,ue=A,Z=x._charsWritten=Be(je(fe),Ve,Je,ue);break;case"ascii":case"binary":Z=function k(fe,R,A,ie){return x._charsWritten=Be(function(Z){for(var Ve=[],Je=0;Je<Z.length;Je++)Ve.push(255&Z.charCodeAt(Je));return Ve}(R),fe,A,ie)}(this,fe,R,A);break;case"base64":Ve=this,Je=R,ue=A,Z=x._charsWritten=Be(Se(fe),Ve,Je,ue);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Z=function se(fe,R,A,ie){return x._charsWritten=Be(function(Z){for(var Ve,Je,ue=[],ne=0;ne<Z.length;ne++)Ve=(Je=Z.charCodeAt(ne))>>8,ue.push(Je%=256),ue.push(Ve);return ue}(R),fe,A,ie)}(this,fe,R,A);break;default:throw new Error("Unknown encoding")}return Z},x.prototype.toString=function(fe,R,A){var ie,Z,Ve,Je,ue=this;if(fe=String(fe||"utf8").toLowerCase(),R=Number(R)||0,(A=void 0!==A?Number(A):ue.length)===R)return"";switch(fe){case"hex":ie=function(ne,V,M){var O=ne.length;(!V||V<0)&&(V=0),(!M||M<0||O<M)&&(M=O);for(var he="",We=V;We<M;We++)he+=Ce(ne[We]);return he}(ue,R,A);break;case"utf8":case"utf-8":ie=function(ne,V,M){var O="",he="";M=Math.min(ne.length,M);for(var We=V;We<M;We++)ne[We]<=127?(O+=de(he)+String.fromCharCode(ne[We]),he=""):he+="%"+ne[We].toString(16);return O+de(he)}(ue,R,A);break;case"ascii":case"binary":ie=function Y(fe,R,A){var ie="";A=Math.min(fe.length,A);for(var Z=R;Z<A;Z++)ie+=String.fromCharCode(fe[Z]);return ie}(ue,R,A);break;case"base64":Z=ue,Je=A,ie=0===(Ve=R)&&Je===Z.length?F.fromByteArray(Z):F.fromByteArray(Z.slice(Ve,Je));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(ne,V,M){for(var O=ne.slice(V,M),he="",We=0;We<O.length;We+=2)he+=String.fromCharCode(O[We]+256*O[We+1]);return he}(ue,R,A);break;default:throw new Error("Unknown encoding")}return ie},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(fe,R,A,ie){if(R=R||0,(ie=ie||0===ie?ie:this.length)!==(A=A||0)&&0!==fe.length&&0!==this.length){Ke(A<=ie,"sourceEnd < sourceStart"),Ke(0<=R&&R<fe.length,"targetStart out of bounds"),Ke(0<=A&&A<this.length,"sourceStart out of bounds"),Ke(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var Z=(ie=fe.length-R<ie-A?fe.length-R+A:ie)-A;if(Z<100||!x._useTypedArrays)for(var Ve=0;Ve<Z;Ve++)fe[Ve+R]=this[Ve+A];else fe._set(this.subarray(A,A+Z),R)}},x.prototype.slice=function(fe,R){var A=this.length;if(fe=He(fe,A,0),R=He(R,A,A),x._useTypedArrays)return x._augment(this.subarray(fe,R));for(var ie=R-fe,Z=new x(ie,void 0,!0),Ve=0;Ve<ie;Ve++)Z[Ve]=this[Ve+fe];return Z},x.prototype.get=function(fe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(fe)},x.prototype.set=function(fe,R){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(fe,R)},x.prototype.readUInt8=function(fe,R){if(R||(Ke(null!=fe,"missing offset"),Ke(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return this[fe]},x.prototype.readUInt16LE=function(fe,R){return J(this,fe,!0,R)},x.prototype.readUInt16BE=function(fe,R){return J(this,fe,!1,R)},x.prototype.readUInt32LE=function(fe,R){return ee(this,fe,!0,R)},x.prototype.readUInt32BE=function(fe,R){return ee(this,fe,!1,R)},x.prototype.readInt8=function(fe,R){if(R||(Ke(null!=fe,"missing offset"),Ke(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return 128&this[fe]?-1*(255-this[fe]+1):this[fe]},x.prototype.readInt16LE=function(fe,R){return W(this,fe,!0,R)},x.prototype.readInt16BE=function(fe,R){return W(this,fe,!1,R)},x.prototype.readInt32LE=function(fe,R){return B(this,fe,!0,R)},x.prototype.readInt32BE=function(fe,R){return B(this,fe,!1,R)},x.prototype.readFloatLE=function(fe,R){return b(this,fe,!0,R)},x.prototype.readFloatBE=function(fe,R){return b(this,fe,!1,R)},x.prototype.readDoubleLE=function(fe,R){return I(this,fe,!0,R)},x.prototype.readDoubleBE=function(fe,R){return I(this,fe,!1,R)},x.prototype.writeUInt8=function(fe,R,A){A||(Ke(null!=fe,"missing value"),Ke(null!=R,"missing offset"),Ke(R<this.length,"trying to write beyond buffer length"),Ae(fe,255)),R>=this.length||(this[R]=fe)},x.prototype.writeUInt16LE=function(fe,R,A){T(this,fe,R,!0,A)},x.prototype.writeUInt16BE=function(fe,R,A){T(this,fe,R,!1,A)},x.prototype.writeUInt32LE=function(fe,R,A){le(this,fe,R,!0,A)},x.prototype.writeUInt32BE=function(fe,R,A){le(this,fe,R,!1,A)},x.prototype.writeInt8=function(fe,R,A){A||(Ke(null!=fe,"missing value"),Ke(null!=R,"missing offset"),Ke(R<this.length,"Trying to write beyond buffer length"),nt(fe,127,-128)),R>=this.length||this.writeUInt8(0<=fe?fe:255+fe+1,R,A)},x.prototype.writeInt16LE=function(fe,R,A){j(this,fe,R,!0,A)},x.prototype.writeInt16BE=function(fe,R,A){j(this,fe,R,!1,A)},x.prototype.writeInt32LE=function(fe,R,A){Ie(this,fe,R,!0,A)},x.prototype.writeInt32BE=function(fe,R,A){Ie(this,fe,R,!1,A)},x.prototype.writeFloatLE=function(fe,R,A){ae(this,fe,R,!0,A)},x.prototype.writeFloatBE=function(fe,R,A){ae(this,fe,R,!1,A)},x.prototype.writeDoubleLE=function(fe,R,A){xe(this,fe,R,!0,A)},x.prototype.writeDoubleBE=function(fe,R,A){xe(this,fe,R,!1,A)},x.prototype.fill=function(fe,R,A){if(R=R||0,A=A||this.length,Ke("number"==typeof(fe="string"==typeof(fe=fe||0)?fe.charCodeAt(0):fe)&&!isNaN(fe),"value is not a number"),Ke(R<=A,"end < start"),A!==R&&0!==this.length){Ke(0<=R&&R<this.length,"start out of bounds"),Ke(0<=A&&A<=this.length,"end out of bounds");for(var ie=R;ie<A;ie++)this[ie]=fe}},x.prototype.inspect=function(){for(var fe=[],R=this.length,A=0;A<R;A++)if(fe[A]=Ce(this[A]),A===Q.INSPECT_MAX_BYTES){fe[A+1]="...";break}return"<Buffer "+fe.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var fe=new Uint8Array(this.length),R=0,A=fe.length;R<A;R+=1)fe[R]=this[R];return fe.buffer};var Pe=x.prototype;function He(fe,R,A){return"number"!=typeof fe?A:R<=(fe=~~fe)?R:0<=fe||0<=(fe+=R)?fe:0}function Qe(fe){return(fe=~~Math.ceil(+fe))<0?0:fe}function qe(fe){return(Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)})(fe)}function Ce(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function je(fe){for(var R=[],A=0;A<fe.length;A++){var ie=fe.charCodeAt(A);if(ie<=127)R.push(fe.charCodeAt(A));else for(var Z=A,Ve=(55296<=ie&&ie<=57343&&A++,encodeURIComponent(fe.slice(Z,A+1)).substr(1).split("%")),Je=0;Je<Ve.length;Je++)R.push(parseInt(Ve[Je],16))}return R}function Se(fe){return F.toByteArray(fe)}function Be(fe,R,A,ie){for(var Z=0;Z<ie&&!(Z+A>=R.length||Z>=fe.length);Z++)R[Z+A]=fe[Z];return Z}function de(fe){try{return decodeURIComponent(fe)}catch{return String.fromCharCode(65533)}}function Ae(fe,R){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(0<=fe,"specified a negative value for writing an unsigned value"),Ke(fe<=R,"value is larger than maximum value for type"),Ke(Math.floor(fe)===fe,"value has a fractional component")}function nt(fe,R,A){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(fe<=R,"value larger than maximum allowed value"),Ke(A<=fe,"value smaller than minimum allowed value"),Ke(Math.floor(fe)===fe,"value has a fractional component")}function mt(fe,R,A){Ke("number"==typeof fe,"cannot write a non-number as a number"),Ke(fe<=R,"value larger than maximum allowed value"),Ke(A<=fe,"value smaller than minimum allowed value")}function Ke(fe,R){if(!fe)throw new Error(R||"Failed assertion")}x._augment=function(fe){return fe._isBuffer=!0,fe._get=fe.get,fe._set=fe.set,fe.get=Pe.get,fe.set=Pe.set,fe.write=Pe.write,fe.toString=Pe.toString,fe.toLocaleString=Pe.toString,fe.toJSON=Pe.toJSON,fe.copy=Pe.copy,fe.slice=Pe.slice,fe.readUInt8=Pe.readUInt8,fe.readUInt16LE=Pe.readUInt16LE,fe.readUInt16BE=Pe.readUInt16BE,fe.readUInt32LE=Pe.readUInt32LE,fe.readUInt32BE=Pe.readUInt32BE,fe.readInt8=Pe.readInt8,fe.readInt16LE=Pe.readInt16LE,fe.readInt16BE=Pe.readInt16BE,fe.readInt32LE=Pe.readInt32LE,fe.readInt32BE=Pe.readInt32BE,fe.readFloatLE=Pe.readFloatLE,fe.readFloatBE=Pe.readFloatBE,fe.readDoubleLE=Pe.readDoubleLE,fe.readDoubleBE=Pe.readDoubleBE,fe.writeUInt8=Pe.writeUInt8,fe.writeUInt16LE=Pe.writeUInt16LE,fe.writeUInt16BE=Pe.writeUInt16BE,fe.writeUInt32LE=Pe.writeUInt32LE,fe.writeUInt32BE=Pe.writeUInt32BE,fe.writeInt8=Pe.writeInt8,fe.writeInt16LE=Pe.writeInt16LE,fe.writeInt16BE=Pe.writeInt16BE,fe.writeInt32LE=Pe.writeInt32LE,fe.writeInt32BE=Pe.writeInt32BE,fe.writeFloatLE=Pe.writeFloatLE,fe.writeFloatBE=Pe.writeFloatBE,fe.writeDoubleLE=Pe.writeDoubleLE,fe.writeDoubleBE=Pe.writeDoubleBE,fe.fill=Pe.fill,fe.inspect=Pe.inspect,fe.toArrayBuffer=Pe.toArrayBuffer,fe}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(_e,S,Q){(function(C,$,F,X,_,E,L,G,P){F=_e("buffer").Buffer;var x=new F(4);x.fill(0),S.exports={hash:function(k,se,Y,J){for(var ee=se(function(T,le){T.length%4!=0&&(T=F.concat([T,x],T.length+(4-T.length%4)));for(var Ie=[],ae=le?T.readInt32BE:T.readInt32LE,xe=0;xe<T.length;xe+=4)Ie.push(ae.call(T,xe));return Ie}(k=F.isBuffer(k)?k:new F(k),J),8*k.length),W=(se=J,new F(Y)),B=se?W.writeInt32BE:W.writeInt32LE,b=0;b<ee.length;b++)B.call(W,ee[b],4*b,!0);return W}}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(_e,S,Q){(function(C,$,F,X,_,E,L,G,P){F=_e("buffer").Buffer;var oe=_e("./sha"),x=_e("./sha256"),k=_e("./rng"),se={sha1:oe,sha256:x,md5:_e("./md5")},Y=64,J=new F(Y);function ee(T,le){var j=se[T=T||"sha1"],Ie=[];return j||W("algorithm:",T,"is not yet supported"),{update:function(ae){return F.isBuffer(ae)||(ae=new F(ae)),Ie.push(ae),this},digest:function(ae){var xe=F.concat(Ie);return xe=le?function(Pe,He,Qe){F.isBuffer(He)||(He=new F(He)),F.isBuffer(Qe)||(Qe=new F(Qe)),He.length>Y?He=Pe(He):He.length<Y&&(He=F.concat([He,J],Y));for(var qe=new F(Y),Ce=new F(Y),je=0;je<Y;je++)qe[je]=54^He[je],Ce[je]=92^He[je];return Qe=Pe(F.concat([qe,Qe])),Pe(F.concat([Ce,Qe]))}(j,le,xe):j(xe),Ie=null,ae?xe.toString(ae):xe}}}function W(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}J.fill(0),Q.createHash=function(T){return ee(T)},Q.createHmac=ee,Q.randomBytes=function(T,le){if(!le||!le.call)return new F(k(T));try{le.call(this,void 0,new F(k(T)))}catch(j){le(j)}};var B,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],I=function(T){Q[T]=function(){W("sorry,",T,"is not implemented yet")}};for(B in b)I(b[B])}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){var F=_e("./helpers");function oe(W,B){W[B>>5]|=128<<B%32,W[14+(B+64>>>9<<4)]=B;for(var b=1732584193,I=-271733879,T=-1732584194,le=271733878,j=0;j<W.length;j+=16){var Ie=b,ae=I,xe=T,Pe=le;b=k(b,I,T,le,W[j+0],7,-680876936),le=k(le,b,I,T,W[j+1],12,-389564586),T=k(T,le,b,I,W[j+2],17,606105819),I=k(I,T,le,b,W[j+3],22,-1044525330),b=k(b,I,T,le,W[j+4],7,-176418897),le=k(le,b,I,T,W[j+5],12,1200080426),T=k(T,le,b,I,W[j+6],17,-1473231341),I=k(I,T,le,b,W[j+7],22,-45705983),b=k(b,I,T,le,W[j+8],7,1770035416),le=k(le,b,I,T,W[j+9],12,-1958414417),T=k(T,le,b,I,W[j+10],17,-42063),I=k(I,T,le,b,W[j+11],22,-1990404162),b=k(b,I,T,le,W[j+12],7,1804603682),le=k(le,b,I,T,W[j+13],12,-40341101),T=k(T,le,b,I,W[j+14],17,-1502002290),b=se(b,I=k(I,T,le,b,W[j+15],22,1236535329),T,le,W[j+1],5,-165796510),le=se(le,b,I,T,W[j+6],9,-1069501632),T=se(T,le,b,I,W[j+11],14,643717713),I=se(I,T,le,b,W[j+0],20,-373897302),b=se(b,I,T,le,W[j+5],5,-701558691),le=se(le,b,I,T,W[j+10],9,38016083),T=se(T,le,b,I,W[j+15],14,-660478335),I=se(I,T,le,b,W[j+4],20,-405537848),b=se(b,I,T,le,W[j+9],5,568446438),le=se(le,b,I,T,W[j+14],9,-1019803690),T=se(T,le,b,I,W[j+3],14,-187363961),I=se(I,T,le,b,W[j+8],20,1163531501),b=se(b,I,T,le,W[j+13],5,-1444681467),le=se(le,b,I,T,W[j+2],9,-51403784),T=se(T,le,b,I,W[j+7],14,1735328473),b=Y(b,I=se(I,T,le,b,W[j+12],20,-1926607734),T,le,W[j+5],4,-378558),le=Y(le,b,I,T,W[j+8],11,-2022574463),T=Y(T,le,b,I,W[j+11],16,1839030562),I=Y(I,T,le,b,W[j+14],23,-35309556),b=Y(b,I,T,le,W[j+1],4,-1530992060),le=Y(le,b,I,T,W[j+4],11,1272893353),T=Y(T,le,b,I,W[j+7],16,-155497632),I=Y(I,T,le,b,W[j+10],23,-1094730640),b=Y(b,I,T,le,W[j+13],4,681279174),le=Y(le,b,I,T,W[j+0],11,-358537222),T=Y(T,le,b,I,W[j+3],16,-722521979),I=Y(I,T,le,b,W[j+6],23,76029189),b=Y(b,I,T,le,W[j+9],4,-640364487),le=Y(le,b,I,T,W[j+12],11,-421815835),T=Y(T,le,b,I,W[j+15],16,530742520),b=J(b,I=Y(I,T,le,b,W[j+2],23,-995338651),T,le,W[j+0],6,-198630844),le=J(le,b,I,T,W[j+7],10,1126891415),T=J(T,le,b,I,W[j+14],15,-1416354905),I=J(I,T,le,b,W[j+5],21,-57434055),b=J(b,I,T,le,W[j+12],6,1700485571),le=J(le,b,I,T,W[j+3],10,-1894986606),T=J(T,le,b,I,W[j+10],15,-1051523),I=J(I,T,le,b,W[j+1],21,-2054922799),b=J(b,I,T,le,W[j+8],6,1873313359),le=J(le,b,I,T,W[j+15],10,-30611744),T=J(T,le,b,I,W[j+6],15,-1560198380),I=J(I,T,le,b,W[j+13],21,1309151649),b=J(b,I,T,le,W[j+4],6,-145523070),le=J(le,b,I,T,W[j+11],10,-1120210379),T=J(T,le,b,I,W[j+2],15,718787259),I=J(I,T,le,b,W[j+9],21,-343485551),b=ee(b,Ie),I=ee(I,ae),T=ee(T,xe),le=ee(le,Pe)}return Array(b,I,T,le)}function x(W,B,b,I,T,le){return ee((B=ee(ee(B,W),ee(I,le)))<<T|B>>>32-T,b)}function k(W,B,b,I,T,le,j){return x(B&b|~B&I,W,B,T,le,j)}function se(W,B,b,I,T,le,j){return x(B&I|b&~I,W,B,T,le,j)}function Y(W,B,b,I,T,le,j){return x(B^b^I,W,B,T,le,j)}function J(W,B,b,I,T,le,j){return x(b^(B|~I),W,B,T,le,j)}function ee(W,B){var b=(65535&W)+(65535&B);return(W>>16)+(B>>16)+(b>>16)<<16|65535&b}S.exports=function(W){return F.hash(W,oe,16)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){S.exports=function(oe){for(var x,k=new Array(oe),se=0;se<oe;se++)!(3&se)&&(x=4294967296*Math.random()),k[se]=x>>>((3&se)<<3)&255;return k}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){var F=_e("./helpers");function oe(se,Y){se[Y>>5]|=128<<24-Y%32,se[15+(Y+64>>9<<4)]=Y;for(var J,ee,W,B=Array(80),b=1732584193,I=-271733879,T=-1732584194,le=271733878,j=-1009589776,Ie=0;Ie<se.length;Ie+=16){for(var ae=b,xe=I,Pe=T,He=le,Qe=j,qe=0;qe<80;qe++){B[qe]=qe<16?se[Ie+qe]:k(B[qe-3]^B[qe-8]^B[qe-14]^B[qe-16],1);var Ce=x(x(k(b,5),(Ce=I,ee=T,W=le,(J=qe)<20?Ce&ee|~Ce&W:!(J<40)&&J<60?Ce&ee|Ce&W|ee&W:Ce^ee^W)),x(x(j,B[qe]),(J=qe)<20?1518500249:J<40?1859775393:J<60?-1894007588:-899497514));j=le,le=T,T=k(I,30),I=b,b=Ce}b=x(b,ae),I=x(I,xe),T=x(T,Pe),le=x(le,He),j=x(j,Qe)}return Array(b,I,T,le,j)}function x(se,Y){var J=(65535&se)+(65535&Y);return(se>>16)+(Y>>16)+(J>>16)<<16|65535&J}function k(se,Y){return se<<Y|se>>>32-Y}S.exports=function(se){return F.hash(se,oe,20,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){function F(Y,J){var ee=(65535&Y)+(65535&J);return(Y>>16)+(J>>16)+(ee>>16)<<16|65535&ee}function oe(Y,J){var ee,W=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),B=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);Y[J>>5]|=128<<24-J%32,Y[15+(J+64>>9<<4)]=J;for(var I,T,le=0;le<Y.length;le+=16){for(var j=B[0],Ie=B[1],ae=B[2],xe=B[3],Pe=B[4],He=B[5],Qe=B[6],qe=B[7],Ce=0;Ce<64;Ce++)b[Ce]=Ce<16?Y[Ce+le]:F(F(F(k(T=b[Ce-2],17)^k(T,19)^se(T,10),b[Ce-7]),k(T=b[Ce-15],7)^k(T,18)^se(T,3)),b[Ce-16]),ee=F(F(F(F(qe,k(T=Pe,6)^k(T,11)^k(T,25)),Pe&He^~Pe&Qe),W[Ce]),b[Ce]),I=F(k(I=j,2)^k(I,13)^k(I,22),j&Ie^j&ae^Ie&ae),qe=Qe,Qe=He,He=Pe,Pe=F(xe,ee),xe=ae,ae=Ie,Ie=j,j=F(ee,I);B[0]=F(j,B[0]),B[1]=F(Ie,B[1]),B[2]=F(ae,B[2]),B[3]=F(xe,B[3]),B[4]=F(Pe,B[4]),B[5]=F(He,B[5]),B[6]=F(Qe,B[6]),B[7]=F(qe,B[7])}return B}var x=_e("./helpers"),k=function(Y,J){return Y>>>J|Y<<32-J},se=function(Y,J){return Y>>>J};S.exports=function(Y){return x.hash(Y,oe,32,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){Q.read=function(F,oe,x,k,le){var Y,J,ee=8*le-k-1,W=(1<<ee)-1,B=W>>1,b=-7,I=x?le-1:0,T=x?-1:1;for(le=F[oe+I],I+=T,Y=le&(1<<-b)-1,le>>=-b,b+=ee;0<b;Y=256*Y+F[oe+I],I+=T,b-=8);for(J=Y&(1<<-b)-1,Y>>=-b,b+=k;0<b;J=256*J+F[oe+I],I+=T,b-=8);if(0===Y)Y=1-B;else{if(Y===W)return J?NaN:1/0*(le?-1:1);J+=Math.pow(2,k),Y-=B}return(le?-1:1)*J*Math.pow(2,Y-k)},Q.write=function(F,oe,x,k,se,j){var J,ee,W=8*j-se-1,B=(1<<W)-1,b=B>>1,I=23===se?Math.pow(2,-24)-Math.pow(2,-77):0,T=k?0:j-1,le=k?1:-1;for(j=oe<0||0===oe&&1/oe<0?1:0,oe=Math.abs(oe),isNaN(oe)||oe===1/0?(ee=isNaN(oe)?1:0,J=B):(J=Math.floor(Math.log(oe)/Math.LN2),oe*(k=Math.pow(2,-J))<1&&(J--,k*=2),2<=(oe+=1<=J+b?I/k:I*Math.pow(2,1-b))*k&&(J++,k/=2),B<=J+b?(ee=0,J=B):1<=J+b?(ee=(oe*k-1)*Math.pow(2,se),J+=b):(ee=oe*Math.pow(2,b-1)*Math.pow(2,se),J=0));8<=se;F[x+T]=255&ee,T+=le,ee/=256,se-=8);for(J=J<<se|ee,W+=se;0<W;F[x+T]=255&J,T+=le,J/=256,W-=8);F[x+T-le]|=128*j}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(_e,S,Q){(function(C,$,z,X,_,E,L,G,P){var F,oe,x;function k(){}(C=S.exports={}).nextTick=(oe=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,oe?function(se){return window.setImmediate(se)}:x?(F=[],window.addEventListener("message",function(se){var Y=se.source;Y!==window&&null!==Y||"process-tick"!==se.data||(se.stopPropagation(),0<F.length&&F.shift()())},!0),function(se){F.push(se),window.postMessage("process-tick","*")}):function(se){setTimeout(se,0)}),C.title="browser",C.browser=!0,C.env={},C.argv=[],C.on=k,C.addListener=k,C.once=k,C.off=k,C.removeListener=k,C.removeAllListeners=k,C.emit=k,C.binding=function(se){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(se){throw new Error("process.chdir is not supported")}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:Ue=>{var S,Q,_e=Ue.exports={};function C(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}function z(k){if(S===setTimeout)return setTimeout(k,0);if((S===C||!S)&&setTimeout)return S=setTimeout,setTimeout(k,0);try{return S(k,0)}catch{try{return S.call(null,k,0)}catch{return S.call(this,k,0)}}}!function(){try{S="function"==typeof setTimeout?setTimeout:C}catch{S=C}try{Q="function"==typeof clearTimeout?clearTimeout:$}catch{Q=$}}();var L,_=[],E=!1,G=-1;function P(){!E||!L||(E=!1,L.length?_=L.concat(_):G=-1,_.length&&F())}function F(){if(!E){var k=z(P);E=!0;for(var se=_.length;se;){for(L=_,_=[];++G<se;)L&&L[G].run();G=-1,se=_.length}L=null,E=!1,function X(k){if(Q===clearTimeout)return clearTimeout(k);if((Q===$||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(k);try{return Q(k)}catch{try{return Q.call(null,k)}catch{return Q.call(this,k)}}}(k)}}function oe(k,se){this.fun=k,this.array=se}function x(){}_e.nextTick=function(k){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)se[Y-1]=arguments[Y];_.push(new oe(k,se)),1===_.length&&!E&&z(F)},oe.prototype.run=function(){this.fun.apply(null,this.array)},_e.title="browser",_e.browser=!0,_e.env={},_e.argv=[],_e.version="",_e.versions={},_e.on=x,_e.addListener=x,_e.once=x,_e.off=x,_e.removeListener=x,_e.removeAllListeners=x,_e.emit=x,_e.prependListener=x,_e.prependOnceListener=x,_e.listeners=function(k){return[]},_e.binding=function(k){throw new Error("process.binding is not supported")},_e.cwd=function(){return"/"},_e.chdir=function(k){throw new Error("process.chdir is not supported")},_e.umask=function(){return 0}},3410:Ue=>{let _e;Ue.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):S=>(_e||(_e=Promise.resolve())).then(S).catch(Q=>setTimeout(()=>{throw Q},0))},1986:(Ue,_e,S)=>{Ue.exports=S(7842)},5327:Ue=>{"use strict";Ue.exports=class eq{constructor(S,Q=new Map,C=0){this.prefix=S,this._existing=Q,this.counter=C}clone(){const{prefix:S,_existing:Q,counter:C}=this;return new eq(S,new Map(Q),C)}getId(S){const Q=S&&this._existing.get(S);if(Q)return Q;const C=this.prefix+this.counter;return this.counter++,S&&this._existing.set(S,C),C}hasId(S){return this._existing.has(S)}getOldIds(){return[...this._existing.keys()]}}},7475:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;S(8280);const C=self.crypto||self.msCrypto;Ue.exports=class{constructor(z){if(!C||!C.subtle)throw new Error("crypto.subtle not found.");if("sha256"===z)this.algorithm={name:"SHA-256"};else{if("sha1"!==z)throw new Error(`Unsupported algorithm "${z}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(z){this._content+=z}digest(){var z=this;return Q(function*(){const X=(new TextEncoder).encode(z._content),_=new Uint8Array(yield C.subtle.digest(z.algorithm,X));let E="";for(let L=0;L<_.length;++L)E+=_[L].toString(16).padStart(2,"0");return E})()}}},8003:Ue=>{"use strict";const Q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",C="http://www.w3.org/2001/XMLSchema#string",$="NamedNode",z="BlankNode",X="Literal",_="DefaultGraph",E={};function L(x,k){return x.subject.termType===k.subject.termType&&x.object.termType===k.object.termType&&x.subject.value===k.subject.value&&x.predicate.value===k.predicate.value&&x.object.value===k.object.value&&(x.object.termType!==X||x.object.datatype.termType===k.object.datatype.termType&&x.object.language===k.object.language&&x.object.datatype.value===k.object.datatype.value)}(()=>{const x="(?:<([^:]+:[^>]*)>)",se="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Y=se+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+se+"0-9])(?:(?:["+Y+".])*(?:["+Y+"]))?)",T="[ \\t]+",le="[ \\t]*",j="(?:"+x+"|"+ee+")"+T,Ie=x+T,ae="(?:"+x+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+x+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+le,xe="(?:\\.|(?:(?:"+x+"|"+ee+")"+le+"\\.))";E.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,E.empty=new RegExp("^[ \\t]*$"),E.quad=new RegExp("^"+le+j+Ie+ae+xe+le+"$")})(),Ue.exports=class GS{static parse(k){const se=[],Y={},J=k.split(E.eoln);let ee=0;for(const W of J){if(ee++,E.empty.test(W))continue;const B=W.match(E.quad);if(null===B)throw new Error("N-Quads parse error on line "+ee+".");const b={subject:null,predicate:null,object:null,graph:null};if(b.subject=void 0!==B[1]?{termType:$,value:B[1]}:{termType:z,value:B[2]},b.predicate={termType:$,value:B[3]},void 0!==B[4]?b.object={termType:$,value:B[4]}:void 0!==B[5]?b.object={termType:z,value:B[5]}:(b.object={termType:X,value:void 0,datatype:{termType:$}},void 0!==B[7]?b.object.datatype.value=B[7]:void 0!==B[8]?(b.object.datatype.value=Q,b.object.language=B[8]):b.object.datatype.value=C,b.object.value=B[6].replace(F,function(k,se,Y,J){if(se)switch(se){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Y)return String.fromCharCode(parseInt(Y,16));if(J)throw new Error("Unsupported U escape")})),b.graph=void 0!==B[9]?{termType:$,value:B[9]}:void 0!==B[10]?{termType:z,value:B[10]}:{termType:_,value:""},b.graph.value in Y){let I=!0;const T=Y[b.graph.value];for(const le of T)if(L(le,b)){I=!1;break}I&&(T.push(b),se.push(b))}else Y[b.graph.value]=[b],se.push(b)}return se}static serialize(k){Array.isArray(k)||(k=GS.legacyDatasetToQuads(k));const se=[];for(const Y of k)se.push(GS.serializeQuad(Y));return se.sort().join("")}static serializeQuadComponents(k,se,Y,J){let ee="";return ee+=k.termType===$?`<${k.value}>`:`${k.value}`,ee+=` <${se.value}> `,Y.termType===$?ee+=`<${Y.value}>`:Y.termType===z?ee+=Y.value:(ee+=`"${function P(x){return x.replace(G,function(k){switch(k){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Y.value)}"`,Y.datatype.value===Q?Y.language&&(ee+=`@${Y.language}`):Y.datatype.value!==C&&(ee+=`^^<${Y.datatype.value}>`)),J.termType===$?ee+=` <${J.value}>`:J.termType===z&&(ee+=` ${J.value}`),ee+=" .\n",ee}static serializeQuad(k){return GS.serializeQuadComponents(k.subject,k.predicate,k.object,k.graph)}static legacyDatasetToQuads(k){const se=[],Y={"blank node":z,IRI:$,literal:X};for(const J in k)k[J].forEach(W=>{const B={};for(const b in W){const I=W[b],T={termType:Y[I.type],value:I.value};T.termType===X&&(T.datatype={termType:$},"datatype"in I&&(T.datatype.value=I.datatype),"language"in I?("datatype"in I||(T.datatype.value=Q),T.language=I.language):"datatype"in I||(T.datatype.value=C)),B[b]=T}B.graph="@default"===J?{termType:_,value:""}:{termType:J.startsWith("_:")?z:$,value:J},se.push(B)});return se}};const G=/["\\\n\r]/g,F=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:Ue=>{"use strict";Ue.exports=class{constructor(S){this.current=S.sort(),this.done=!1,this.dir=new Map;for(let Q=0;Q<S.length;++Q)this.dir.set(S[Q],!0)}hasNext(){return!this.done}next(){const{current:S,dir:Q}=this,C=S.slice();let $=null,z=0;const X=S.length;for(let _=0;_<X;++_){const E=S[_],L=Q.get(E);(null===$||E>$)&&(L&&_>0&&E>S[_-1]||!L&&_<X-1&&E>S[_+1])&&($=E,z=_)}if(null===$)this.done=!0;else{const _=Q.get($)?z-1:z+1;S[z]=S[_],S[_]=$;for(const E of S)E>$&&Q.set(E,!Q.get(E))}return C}}},7218:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(5327),$=S(7475),z=S(7790),X=S(8003);function _(E,L){return E.hash<L.hash?-1:E.hash>L.hash?1:0}Ue.exports=class{constructor({createMessageDigest:L=(()=>new $("sha256")),canonicalIdMap:G=new Map,maxDeepIterations:P=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n",G),this.createMessageDigest=L,this.maxDeepIterations=P,this.quads=null,this.deepIterations=null}main(L){var G=this;return Q(function*(){G.deepIterations=new Map,G.quads=L;for(const Y of L)G._addBlankNodeQuadInfo({quad:Y,component:Y.subject}),G._addBlankNodeQuadInfo({quad:Y,component:Y.object}),G._addBlankNodeQuadInfo({quad:Y,component:Y.graph});const P=new Map,F=[...G.blankNodeInfo.keys()];let oe=0;for(const Y of F)++oe%100==0&&(yield G._yield()),yield G._hashAndTrackBlankNode({id:Y,hashToBlankNodes:P});const x=[...P.keys()].sort(),k=[];for(const Y of x){const J=P.get(Y);J.length>1?k.push(J):G.canonicalIssuer.getId(J[0])}for(const Y of k){const J=[];for(const ee of Y){if(G.canonicalIssuer.hasId(ee))continue;const W=new C("_:b");W.getId(ee);const B=yield G.hashNDegreeQuads(ee,W);J.push(B)}J.sort(_);for(const ee of J){const W=ee.issuer.getOldIds();for(const B of W)G.canonicalIssuer.getId(B)}}const se=[];for(const Y of G.quads){const J=X.serializeQuadComponents(G._componentWithCanonicalId(Y.subject),Y.predicate,G._componentWithCanonicalId(Y.object),G._componentWithCanonicalId(Y.graph));se.push(J)}return se.sort(),se.join("")})()}hashFirstDegreeQuads(L){var G=this;return Q(function*(){const P=[],F=G.blankNodeInfo.get(L),oe=F.quads;for(const k of oe){const se={subject:null,predicate:k.predicate,object:null,graph:null};se.subject=G.modifyFirstDegreeComponent(L,k.subject,"subject"),se.object=G.modifyFirstDegreeComponent(L,k.object,"object"),se.graph=G.modifyFirstDegreeComponent(L,k.graph,"graph"),P.push(X.serializeQuad(se))}P.sort();const x=G.createMessageDigest();for(const k of P)x.update(k);return F.hash=yield x.digest(),F.hash})()}hashRelatedBlankNode(L,G,P,F){var oe=this;return Q(function*(){let x;x=oe.canonicalIssuer.hasId(L)?oe.canonicalIssuer.getId(L):P.hasId(L)?P.getId(L):oe.blankNodeInfo.get(L).hash;const k=oe.createMessageDigest();return k.update(F),"g"!==F&&k.update(oe.getRelatedPredicate(G)),k.update(x),k.digest()})()}hashNDegreeQuads(L,G){var P=this;return Q(function*(){const F=P.deepIterations.get(L)||0;if(F>P.maxDeepIterations)throw new Error(`Maximum deep iterations (${P.maxDeepIterations}) exceeded.`);P.deepIterations.set(L,F+1);const oe=P.createMessageDigest(),x=yield P.createHashToRelated(L,G),k=[...x.keys()].sort();for(const se of k){oe.update(se);let J,Y="";const ee=new z(x.get(se));let W=0;for(;ee.hasNext();){const B=ee.next();++W%3==0&&(yield P._yield());let b=G.clone(),I="";const T=[];let le=!1;for(const j of B)if(P.canonicalIssuer.hasId(j)?I+=P.canonicalIssuer.getId(j):(b.hasId(j)||T.push(j),I+=b.getId(j)),0!==Y.length&&I>Y){le=!0;break}if(!le){for(const j of T){const Ie=yield P.hashNDegreeQuads(j,b);if(I+=b.getId(j),I+=`<${Ie.hash}>`,b=Ie.issuer,0!==Y.length&&I>Y){le=!0;break}}le||(0===Y.length||I<Y)&&(Y=I,J=b)}}oe.update(Y),G=J}return{hash:yield oe.digest(),issuer:G}})()}modifyFirstDegreeComponent(L,G){return"BlankNode"!==G.termType?G:{termType:"BlankNode",value:G.value===L?"_:a":"_:z"}}getRelatedPredicate(L){return`<${L.predicate.value}>`}createHashToRelated(L,G){var P=this;return Q(function*(){const F=new Map,oe=P.blankNodeInfo.get(L).quads;let x=0;for(const k of oe)++x%100==0&&(yield P._yield()),yield Promise.all([P._addRelatedBlankNodeHash({quad:k,component:k.subject,position:"s",id:L,issuer:G,hashToRelated:F}),P._addRelatedBlankNodeHash({quad:k,component:k.object,position:"o",id:L,issuer:G,hashToRelated:F}),P._addRelatedBlankNodeHash({quad:k,component:k.graph,position:"g",id:L,issuer:G,hashToRelated:F})]);return F})()}_hashAndTrackBlankNode({id:L,hashToBlankNodes:G}){var P=this;return Q(function*(){const F=yield P.hashFirstDegreeQuads(L),oe=G.get(F);oe?oe.push(L):G.set(F,[L])})()}_addBlankNodeQuadInfo({quad:L,component:G}){if("BlankNode"!==G.termType)return;const P=G.value,F=this.blankNodeInfo.get(P);F?F.quads.add(L):this.blankNodeInfo.set(P,{quads:new Set([L]),hash:null})}_addRelatedBlankNodeHash({quad:L,component:G,position:P,id:F,issuer:oe,hashToRelated:x}){var k=this;return Q(function*(){if("BlankNode"!==G.termType||G.value===F)return;const se=G.value,Y=yield k.hashRelatedBlankNode(se,L,oe,P),J=x.get(Y);J?J.push(se):x.set(Y,[se])})()}_componentWithCanonicalId(L){return"BlankNode"!==L.termType||L.value.startsWith(this.canonicalIssuer.prefix)?L:{termType:"BlankNode",value:this.canonicalIssuer.getId(L.value)}}_yield(){return Q(function*(){return new Promise(L=>setImmediate(L))})()}}},9123:(Ue,_e,S)=>{"use strict";const Q=S(5327),C=S(7475),$=S(7790),z=S(8003);function X(_,E){return _.hash<E.hash?-1:_.hash>E.hash?1:0}Ue.exports=class{constructor({createMessageDigest:E=(()=>new C("sha256")),canonicalIdMap:L=new Map,maxDeepIterations:G=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Q("_:c14n",L),this.createMessageDigest=E,this.maxDeepIterations=G,this.quads=null,this.deepIterations=null}main(E){this.deepIterations=new Map,this.quads=E;for(const x of E)this._addBlankNodeQuadInfo({quad:x,component:x.subject}),this._addBlankNodeQuadInfo({quad:x,component:x.object}),this._addBlankNodeQuadInfo({quad:x,component:x.graph});const L=new Map,G=[...this.blankNodeInfo.keys()];for(const x of G)this._hashAndTrackBlankNode({id:x,hashToBlankNodes:L});const P=[...L.keys()].sort(),F=[];for(const x of P){const k=L.get(x);k.length>1?F.push(k):this.canonicalIssuer.getId(k[0])}for(const x of F){const k=[];for(const se of x){if(this.canonicalIssuer.hasId(se))continue;const Y=new Q("_:b");Y.getId(se);const J=this.hashNDegreeQuads(se,Y);k.push(J)}k.sort(X);for(const se of k){const Y=se.issuer.getOldIds();for(const J of Y)this.canonicalIssuer.getId(J)}}const oe=[];for(const x of this.quads){const k=z.serializeQuadComponents(this._componentWithCanonicalId({component:x.subject}),x.predicate,this._componentWithCanonicalId({component:x.object}),this._componentWithCanonicalId({component:x.graph}));oe.push(k)}return oe.sort(),oe.join("")}hashFirstDegreeQuads(E){const L=[],G=this.blankNodeInfo.get(E),P=G.quads;for(const oe of P){const x={subject:null,predicate:oe.predicate,object:null,graph:null};x.subject=this.modifyFirstDegreeComponent(E,oe.subject,"subject"),x.object=this.modifyFirstDegreeComponent(E,oe.object,"object"),x.graph=this.modifyFirstDegreeComponent(E,oe.graph,"graph"),L.push(z.serializeQuad(x))}L.sort();const F=this.createMessageDigest();for(const oe of L)F.update(oe);return G.hash=F.digest(),G.hash}hashRelatedBlankNode(E,L,G,P){let F;F=this.canonicalIssuer.hasId(E)?this.canonicalIssuer.getId(E):G.hasId(E)?G.getId(E):this.blankNodeInfo.get(E).hash;const oe=this.createMessageDigest();return oe.update(P),"g"!==P&&oe.update(this.getRelatedPredicate(L)),oe.update(F),oe.digest()}hashNDegreeQuads(E,L){const G=this.deepIterations.get(E)||0;if(G>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(E,G+1);const P=this.createMessageDigest(),F=this.createHashToRelated(E,L),oe=[...F.keys()].sort();for(const x of oe){P.update(x);let se,k="";const Y=new $(F.get(x));for(;Y.hasNext();){const J=Y.next();let ee=L.clone(),W="";const B=[];let b=!1;for(const I of J)if(this.canonicalIssuer.hasId(I)?W+=this.canonicalIssuer.getId(I):(ee.hasId(I)||B.push(I),W+=ee.getId(I)),0!==k.length&&W>k){b=!0;break}if(!b){for(const I of B){const T=this.hashNDegreeQuads(I,ee);if(W+=ee.getId(I),W+=`<${T.hash}>`,ee=T.issuer,0!==k.length&&W>k){b=!0;break}}b||(0===k.length||W<k)&&(k=W,se=ee)}}P.update(k),L=se}return{hash:P.digest(),issuer:L}}modifyFirstDegreeComponent(E,L){return"BlankNode"!==L.termType?L:{termType:"BlankNode",value:L.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return`<${E.predicate.value}>`}createHashToRelated(E,L){const G=new Map,P=this.blankNodeInfo.get(E).quads;for(const F of P)this._addRelatedBlankNodeHash({quad:F,component:F.subject,position:"s",id:E,issuer:L,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:F,component:F.object,position:"o",id:E,issuer:L,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:F,component:F.graph,position:"g",id:E,issuer:L,hashToRelated:G});return G}_hashAndTrackBlankNode({id:E,hashToBlankNodes:L}){const G=this.hashFirstDegreeQuads(E),P=L.get(G);P?P.push(E):L.set(G,[E])}_addBlankNodeQuadInfo({quad:E,component:L}){if("BlankNode"!==L.termType)return;const G=L.value,P=this.blankNodeInfo.get(G);P?P.quads.add(E):this.blankNodeInfo.set(G,{quads:new Set([E]),hash:null})}_addRelatedBlankNodeHash({quad:E,component:L,position:G,id:P,issuer:F,hashToRelated:oe}){if("BlankNode"!==L.termType||L.value===P)return;const x=L.value,k=this.hashRelatedBlankNode(x,E,F,G),se=oe.get(k);se?se.push(x):oe.set(k,[x])}_componentWithCanonicalId({component:E}){return"BlankNode"!==E.termType||E.value.startsWith(this.canonicalIssuer.prefix)?E:{termType:"BlankNode",value:this.canonicalIssuer.getId(E.value)}}}},1326:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(7475),$=S(7218);Ue.exports=class extends ${constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new C("sha1")}modifyFirstDegreeComponent(X,_,E){return"BlankNode"!==_.termType?_:"graph"===E?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===X?"_:a":"_:z"}}getRelatedPredicate(X){return X.predicate.value}createHashToRelated(X,_){var E=this;return Q(function*(){const L=new Map,G=E.blankNodeInfo.get(X).quads;let P=0;for(const F of G){let oe,x;if("BlankNode"===F.subject.termType&&F.subject.value!==X)x=F.subject.value,oe="p";else{if("BlankNode"!==F.object.termType||F.object.value===X)continue;x=F.object.value,oe="r"}++P%100==0&&(yield E._yield());const k=yield E.hashRelatedBlankNode(x,F,_,oe),se=L.get(k);se?se.push(x):L.set(k,[x])}return L})()}}},9869:(Ue,_e,S)=>{"use strict";const Q=S(7475),C=S(9123);Ue.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Q("sha1")}modifyFirstDegreeComponent(z,X,_){return"BlankNode"!==X.termType?X:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:X.value===z?"_:a":"_:z"}}getRelatedPredicate(z){return z.predicate.value}createHashToRelated(z,X){const _=new Map,E=this.blankNodeInfo.get(z).quads;for(const L of E){let G,P;if("BlankNode"===L.subject.termType&&L.subject.value!==z)P=L.subject.value,G="p";else{if("BlankNode"!==L.object.termType||L.object.value===z)continue;P=L.object.value,G="r"}const F=this.hashRelatedBlankNode(P,L,X,G),oe=_.get(F);oe?oe.push(P):_.set(F,[P])}return _}}},7842:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(7218),$=S(1326),z=S(9123),X=S(9869);let _;try{_=S(7670)}catch{}function E(L){return Array.isArray(L)?L:_e.NQuads.legacyDatasetToQuads(L)}_e.NQuads=S(8003),_e.IdentifierIssuer=S(5327),_e._rdfCanonizeNative=function(L){return L&&(_=L),_},_e.canonize=function(){var L=Q(function*(G,P){const F=E(G);if(P.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((oe,x)=>_.canonize(F,P,(k,se)=>k?x(k):oe(se)))}if("URDNA2015"===P.algorithm)return new C(P).main(F);if("URGNA2012"===P.algorithm){if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new $(P).main(F)}throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(G,P){return L.apply(this,arguments)}}(),_e._canonizeSync=function(L,G){const P=E(L);if(G.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(P,G)}if("URDNA2015"===G.algorithm)return new z(G).main(P);if("URGNA2012"===G.algorithm){if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new X(G).main(P)}throw"algorithm"in G?new Error("Invalid RDF Dataset Canonicalization algorithm: "+G.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,z,X,_){void 0===_&&(_=X),Object.defineProperty($,_,{enumerable:!0,get:function(){return z[X]}})}:function($,z,X,_){void 0===_&&(_=X),$[_]=z[X]}),C=this&&this.__exportStar||function($,z){for(var X in $)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,$,X)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(4740),_e),C(S(3613),_e),C(S(9379),_e),C(S(5565),_e),C(S(3283),_e),C(S(3905),_e),C(S(2234),_e)},4740:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.BlankNode=void 0,_e.BlankNode=class S{constructor(C){this.termType="BlankNode",this.value=C}equals(C){return!!C&&"BlankNode"===C.termType&&C.value===this.value}}},3613:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DataFactory=void 0;const Q=S(4740),C=S(9379),$=S(5565),z=S(3283),X=S(3905),_=S(2234);let E=0;_e.DataFactory=class L{constructor(P){this.blankNodeCounter=0,this.blankNodePrefix=(P=P||{}).blankNodePrefix||`df_${E++}_`}namedNode(P){return new z.NamedNode(P)}blankNode(P){return new Q.BlankNode(P||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(P,F){return new $.Literal(P,F)}variable(P){return new _.Variable(P)}defaultGraph(){return C.DefaultGraph.INSTANCE}quad(P,F,oe,x){return new X.Quad(P,F,oe,x||this.defaultGraph())}fromTerm(P){switch(P.termType){case"NamedNode":return this.namedNode(P.value);case"BlankNode":return this.blankNode(P.value);case"Literal":return P.language?this.literal(P.value,P.language):P.datatype.equals($.Literal.XSD_STRING)?this.literal(P.value):this.literal(P.value,this.fromTerm(P.datatype));case"Variable":return this.variable(P.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(P.subject),this.fromTerm(P.predicate),this.fromTerm(P.object),this.fromTerm(P.graph))}}fromQuad(P){return this.fromTerm(P)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DefaultGraph=void 0;class S{constructor(){this.termType="DefaultGraph",this.value=""}equals(C){return!!C&&"DefaultGraph"===C.termType}}_e.DefaultGraph=S,S.INSTANCE=new S},5565:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Literal=void 0;const Q=S(3283);class C{constructor(z,X){this.termType="Literal",this.value=z,"string"==typeof X?(this.language=X,this.datatype=C.RDF_LANGUAGE_STRING):X?(this.language="",this.datatype=X):(this.language="",this.datatype=C.XSD_STRING)}equals(z){return!!z&&"Literal"===z.termType&&z.value===this.value&&z.language===this.language&&this.datatype.equals(z.datatype)}}_e.Literal=C,C.RDF_LANGUAGE_STRING=new Q.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),C.XSD_STRING=new Q.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.NamedNode=void 0,_e.NamedNode=class S{constructor(C){this.termType="NamedNode",this.value=C}equals(C){return!!C&&"NamedNode"===C.termType&&C.value===this.value}}},3905:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Quad=void 0,_e.Quad=class S{constructor(C,$,z,X){this.termType="Quad",this.value="",this.subject=C,this.predicate=$,this.object=z,this.graph=X}equals(C){return!!C&&("Quad"===C.termType||!C.termType)&&this.subject.equals(C.subject)&&this.predicate.equals(C.predicate)&&this.object.equals(C.object)&&this.graph.equals(C.graph)}}},2234:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Variable=void 0,_e.Variable=class S{constructor(C){this.termType="Variable",this.value=C}equals(C){return!!C&&"Variable"===C.termType&&C.value===this.value}}},9689:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function(x,k,se,Y){void 0===Y&&(Y=se);var J=Object.getOwnPropertyDescriptor(k,se);(!J||("get"in J?!k.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return k[se]}}),Object.defineProperty(x,Y,J)}:function(x,k,se,Y){void 0===Y&&(Y=se),x[Y]=k[se]}),C=this&&this.__exportStar||function(x,k){for(var se in x)"default"!==se&&!Object.prototype.hasOwnProperty.call(k,se)&&Q(k,x,se)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.getSupportedJavaScriptPrimitives=_e.getSupportedRdfDatatypes=_e.getTermRaw=_e.toRdf=_e.fromRdf=void 0;const $=S(2633),z=S(2538),X=S(6374);C(S(2538),_e),C(S(1815),_e),C(S(6374),_e);const _=new $.DataFactory,E=new X.Translator;function L(x,k){return E.fromRdf(x,k)}E.registerHandler(new z.TypeHandlerString,z.TypeHandlerString.TYPES.map(x=>_.namedNode(x)),["string"]),E.registerHandler(new z.TypeHandlerBoolean,[z.TypeHandlerBoolean.TYPE].map(x=>_.namedNode(x)),["boolean"]),E.registerHandler(new z.TypeHandlerNumberDouble,z.TypeHandlerNumberDouble.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new z.TypeHandlerNumberInteger,z.TypeHandlerNumberInteger.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new z.TypeHandlerDate,z.TypeHandlerDate.TYPES.map(x=>_.namedNode(x)),["object"]),_e.fromRdf=L,_e.toRdf=function G(x,k){return k&&"namedNode"in k&&(k={dataFactory:k}),(k=k||{})&&!k.dataFactory&&(k.dataFactory=_),E.toRdf(x,k)},_e.getTermRaw=function P(x,k){return"Literal"===x.termType?L(x,k):x.value},_e.getSupportedRdfDatatypes=function F(){return E.getSupportedRdfDatatypes()},_e.getSupportedJavaScriptPrimitives=function oe(){return E.getSupportedJavaScriptPrimitives()}},1815:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0})},6374:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Translator=void 0,_e.Translator=class S{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(C){throw new Error(`Invalid RDF ${C.datatype.value} value: '${C.value}'`)}registerHandler(C,$,z){for(const X of $)this.supportedRdfDatatypes.push(X),this.fromRdfHandlers[X.value]=C;for(const X of z){let _=this.toRdfHandlers[X];_||(this.toRdfHandlers[X]=_=[]),_.push(C)}}fromRdf(C,$){const z=this.fromRdfHandlers[C.datatype.value];return z?z.fromRdf(C,$):C.value}toRdf(C,$){const z=this.toRdfHandlers[typeof C];if(z)for(const X of z){const _=X.toRdf(C,$);if(_)return _}throw new Error(`Invalid JavaScript value: '${C}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerBoolean=void 0;const Q=S(6374);_e.TypeHandlerBoolean=(()=>{class ${fromRdf(X,_){switch(X.value){case"true":case"1":return!0;case"false":case"0":return!1}return _&&Q.Translator.incorrectRdfDataType(X),!1}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(X?"true":"false",_||E.namedNode($.TYPE))}}return $.TYPE="http://www.w3.org/2001/XMLSchema#boolean",$})()},1600:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerDate=void 0;const Q=S(6374);_e.TypeHandlerDate=(()=>{class ${fromRdf(X,_){switch(_&&!X.value.match($.VALIDATORS[X.datatype.value.substr(33,X.datatype.value.length)])&&Q.Translator.incorrectRdfDataType(X),X.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(X.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const E=X.value.split("-");return new Date(0,parseInt(E[0],10)-1,parseInt(E[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(X.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(X.value+"-01");default:return new Date(X.value)}}toRdf(X,{datatype:_,dataFactory:E}){if(_=_||E.namedNode($.TYPES[0]),!(X instanceof Date))return null;const L=X;let G;switch(_.value){case"http://www.w3.org/2001/XMLSchema#gDay":G=String(L.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":G=L.getUTCMonth()+1+"-"+L.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":G=String(L.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":G=L.getUTCFullYear()+"-"+(L.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":G=L.toISOString().replace(/T.*$/,"");break;default:G=L.toISOString()}return E.literal(G,_)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],$.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},$})()},1511:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberDouble=void 0;const Q=S(6374);_e.TypeHandlerNumberDouble=(()=>{class ${fromRdf(X,_){const E=parseFloat(X.value);return _&&isNaN(E)&&Q.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return _=_||E.namedNode($.TYPES[0]),isNaN(X)?E.literal("NaN",_):isFinite(X)?X%1==0?null:E.literal(X.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),_):E.literal(X>0?"INF":"-INF",_)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],$})()},9199:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberInteger=void 0;const Q=S(6374);_e.TypeHandlerNumberInteger=(()=>{class ${fromRdf(X,_){const E=parseInt(X.value,10);return _&&(isNaN(E)||X.value.indexOf(".")>=0)&&Q.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(String(X),_||E.namedNode(X<=$.MAX_INT&&X>=$.MIN_INT?$.TYPES[0]:$.TYPES[1]))}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],$.MAX_INT=2147483647,$.MIN_INT=-2147483648,$})()},2210:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerString=void 0,_e.TypeHandlerString=(()=>{class Q{fromRdf($){return $.value}toRdf($,{datatype:z,dataFactory:X}){return X.literal($,z)}}return Q.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Q})()},2538:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,z,X,_){void 0===_&&(_=X);var E=Object.getOwnPropertyDescriptor(z,X);(!E||("get"in E?!z.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return z[X]}}),Object.defineProperty($,_,E)}:function($,z,X,_){void 0===_&&(_=X),$[_]=z[X]}),C=this&&this.__exportStar||function($,z){for(var X in $)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,$,X)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(88),_e),C(S(1600),_e),C(S(1511),_e),C(S(9199),_e),C(S(2210),_e)},2821:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,z,X,_){void 0===_&&(_=X),Object.defineProperty($,_,{enumerable:!0,get:function(){return z[X]}})}:function($,z,X,_){void 0===_&&(_=X),$[_]=z[X]}),C=this&&this.__exportStar||function($,z){for(var X in $)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,$,X)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(5664),_e)},758:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseError=void 0;class S extends Error{constructor(C,$){const z=C.saxStream._parser;super(C.trackPosition?`Line ${z.line+1} column ${z.column+1}: ${$}`:$)}}_e.ParseError=S},5664:(Ue,_e,S)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseType=_e.RdfXmlParser=void 0;const Q=S(7054),C=S(9528),$=S(1793),z=S(758),X=S(2633);class _ extends $.Transform{constructor(G){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},G&&(Object.assign(this,G),this.options=G),this.dataFactory||(this.dataFactory=new X.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=C.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(G,P){const F={};let oe=!1;for(const k in G.attributes)k.startsWith("xmlns")&&(5===k.length?(oe=!0,F[""]=G.attributes[k]):":"===k.charAt(5)&&(oe=!0,F[k.substr(6)]=G.attributes[k]));const x=P&&P.ns?P.ns:[_.DEFAULT_NS];return oe?x.concat([F]):x}static expandPrefixedTerm(G,P,F){const oe=G.indexOf(":");let x,k;oe>=0?(x=G.substr(0,oe),k=G.substr(oe+1)):(x="",k=G);let se=null,Y=null;for(let J=P.length-1;J>=0;J--){const ee=P[J][x];if(ee){se=ee;break}Y||(Y=P[J][""])}if(!se){if(x&&"xmlns"!==x)throw new z.ParseError(F,`The prefix '${x}' in term '${G}' was not bound.`);se=Y||""}return{prefix:x,local:k,uri:se}}static isValidIri(G){return _.IRI_REGEX.test(G)}import(G){const P=new $.PassThrough({readableObjectMode:!0});G.on("error",oe=>F.emit("error",oe)),G.on("data",oe=>P.push(oe)),G.on("end",()=>P.push(null));const F=P.pipe(new _(this.options));return F}_transform(G,P,F){try{this.saxStream.write(G,P)}catch(oe){return F(oe)}F()}newParseError(G){return new z.ParseError(this,G)}valueToUri(G,P){return this.uriToNamedNode(Q.resolve(G,P.baseIRI))}uriToNamedNode(G){if(!_.isValidIri(G))throw this.newParseError(`Invalid URI: ${G}`);return this.dataFactory.namedNode(G)}validateNcname(G){if(!_.NCNAME_MATCHER.test(G))throw this.newParseError(`Not a valid NCName: ${G}`)}attachSaxListeners(){this.saxStream.on("error",G=>this.emit("error",G)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(G){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let F=E.RESOURCE;if(P&&(P.hadChildren=!0,F=P.childrenParseType),P&&P.childrenStringTags){const x=G.name;let k="";for(const ee in G.attributes)k+=` ${ee}="${G.attributes[ee]}"`;P.childrenStringTags.push(`<${x}${k}>`);const J={childrenStringTags:P.childrenStringTags};return J.childrenStringEmitClosingTag=`</${x}>`,void this.activeTagStack.push(J)}const oe={};P?(oe.language=P.language,oe.baseIRI=P.baseIRI):oe.baseIRI=this.baseIRI,this.activeTagStack.push(oe),oe.ns=_.parseNamespace(G,P),F===E.RESOURCE?this.onTagResource(G,oe,P,!P):this.onTagProperty(G,oe,P)}onTagResource(G,P,F,oe){const x=_.expandPrefixedTerm(G.name,P.ns,this);P.childrenParseType=E.PROPERTY;let k=!0;if(x.uri===_.RDF){if(!oe&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(x.local)>=0)throw this.newParseError(`Illegal node element name: ${x.local}`);switch(x.local){case"RDF":P.childrenParseType=E.RESOURCE;case"Description":k=!1}}const se=[],Y=[];let J=null,ee=!1,W=!1,B=null;for(const b in G.attributes){const I=G.attributes[b],T=_.expandPrefixedTerm(b,P.ns,this);if(F&&T.uri===_.RDF)switch(T.local){case"about":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);J=I;continue;case"ID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);this.validateNcname(I),J="#"+I,ee=!0;continue;case"nodeID":if(J)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I} and ${J} where found.`);this.validateNcname(I),J=I,W=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":B=I;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===_.XML){if("lang"===T.local){P.language=""===I?null:I.toLowerCase();continue}if("base"===T.local){P.baseIRI=Q.resolve(I,P.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(se.push(this.uriToNamedNode(T.uri+T.local)),Y.push(I))}if(null!==J&&(P.subject=W?this.dataFactory.blankNode(J):this.valueToUri(J,P),ee&&this.claimNodeId(P.subject)),P.subject||(P.subject=this.dataFactory.blankNode()),k){const b=this.uriToNamedNode(x.uri+x.local);this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),b,F?F.reifiedStatementId:null)}if(F){if(F.predicate)if(F.childrenCollectionSubject){const b=this.dataFactory.blankNode();this.emitTriple(F.childrenCollectionSubject,F.childrenCollectionPredicate,b,F.reifiedStatementId),this.emitTriple(b,this.dataFactory.namedNode(_.RDF+"first"),P.subject,P.reifiedStatementId),F.childrenCollectionSubject=b,F.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(F.subject,F.predicate,P.subject,F.reifiedStatementId);for(let b=0;b<F.predicateSubPredicates.length;b++)this.emitTriple(P.subject,F.predicateSubPredicates[b],F.predicateSubObjects[b],null);F.predicateSubPredicates=[],F.predicateSubObjects=[],F.predicateEmitted=!0}for(let b=0;b<se.length;b++){const I=this.dataFactory.literal(Y[b],P.datatype||P.language);this.emitTriple(P.subject,se[b],I,F.reifiedStatementId)}B&&this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(B),null)}}onTagProperty(G,P,F){const oe=_.expandPrefixedTerm(G.name,P.ns,this);if(P.childrenParseType=E.RESOURCE,P.subject=F.subject,oe.uri===_.RDF&&"li"===oe.local?(F.listItemCounter||(F.listItemCounter=1),P.predicate=this.uriToNamedNode(oe.uri+"_"+F.listItemCounter++)):P.predicate=this.uriToNamedNode(oe.uri+oe.local),oe.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(oe.local)>=0)throw this.newParseError(`Illegal property element name: ${oe.local}`);P.predicateSubPredicates=[],P.predicateSubObjects=[];let x=!1,k=!1,se=null,Y=!0;const J=[],ee=[];for(const W in G.attributes){const B=G.attributes[W],b=_.expandPrefixedTerm(W,P.ns,this);if(b.uri===_.RDF)switch(b.local){case"resource":if(se)throw this.newParseError(`Found both rdf:resource (${B}) and rdf:nodeID (${se}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${B})`);P.hadChildren=!0,se=B,Y=!1;continue;case"datatype":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${B}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${B})`);P.datatype=this.valueToUri(B,P);continue;case"nodeID":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${B}).`);if(P.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${B}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${B})`);this.validateNcname(B),P.hadChildren=!0,se=B,Y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(k)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(P.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${P.datatype.value})`);if(se)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${se})`);if("Resource"===B){x=!0,P.childrenParseType=E.PROPERTY;const I=this.dataFactory.blankNode();this.emitTriple(P.subject,P.predicate,I,P.reifiedStatementId),P.subject=I,P.predicate=null}else"Collection"===B?(x=!0,P.hadChildren=!0,P.childrenCollectionSubject=P.subject,P.childrenCollectionPredicate=P.predicate,Y=!1):"Literal"===B&&(x=!0,P.childrenTagsToString=!0,P.childrenStringTags=[]);continue;case"ID":this.validateNcname(B),P.reifiedStatementId=this.valueToUri("#"+B,P),this.claimNodeId(P.reifiedStatementId);continue}else if(b.uri===_.XML&&"lang"===b.local){P.language=""===B?null:B.toLowerCase();continue}if("xml"!==b.prefix&&"xmlns"!==b.prefix&&b.uri){if(x||P.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${B}`);P.hadChildren=!0,k=!0,J.push(this.uriToNamedNode(b.uri+b.local)),ee.push(this.dataFactory.literal(B,P.datatype||P.language))}}if(null!==se){const W=P.subject;P.subject=Y?this.dataFactory.blankNode(se):this.valueToUri(se,P),this.emitTriple(W,P.predicate,P.subject,P.reifiedStatementId);for(let B=0;B<J.length;B++)this.emitTriple(P.subject,J[B],ee[B],null);P.predicateEmitted=!0}else Y&&(P.predicateSubPredicates=J,P.predicateSubObjects=ee,P.predicateEmitted=!1)}emitTriple(G,P,F,oe){this.push(this.dataFactory.quad(G,P,F,this.defaultGraph)),oe&&(this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"subject"),G,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"predicate"),P,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"object"),F,this.defaultGraph)))}claimNodeId(G){if(!this.allowDuplicateRdfIds){if(this.nodeIds[G.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${G.value}'.`);this.nodeIds[G.value]=!0}}onText(G){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;P&&(P.childrenStringTags?P.childrenStringTags.push(G):P.predicate&&(P.text=G))}onCloseTag(){const G=this.activeTagStack.pop();if(G.childrenStringEmitClosingTag&&G.childrenStringTags.push(G.childrenStringEmitClosingTag),G.childrenTagsToString&&(G.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),G.text=G.childrenStringTags.join(""),G.hadChildren=!1),G.childrenCollectionSubject)this.emitTriple(G.childrenCollectionSubject,G.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),G.reifiedStatementId);else if(G.predicate)if(G.hadChildren||G.childrenParseType===E.PROPERTY){if(!G.predicateEmitted){const P=this.dataFactory.blankNode();this.emitTriple(G.subject,G.predicate,P,G.reifiedStatementId);for(let F=0;F<G.predicateSubPredicates.length;F++)this.emitTriple(P,G.predicateSubPredicates[F],G.predicateSubObjects[F],null)}}else this.emitTriple(G.subject,G.predicate,this.dataFactory.literal(G.text||"",G.datatype||G.language),G.reifiedStatementId)}onDoctype(G){G.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(P,F,oe)=>(this.saxStream._parser.ENTITIES[F]=oe,""))}}var E,L;_e.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(L=E=_e.ParseType||(_e.ParseType={}))[L.RESOURCE=0]="RESOURCE",L[L.PROPERTY=1]="PROPERTY"},9987:(Ue,_e,S)=>{"use strict";const{SymbolDispose:Q}=S(6305),{AbortError:C,codes:$}=S(4370),{isNodeStream:z,isWebStream:X,kControllerErrorFunction:_}=S(5428),E=S(4618),{ERR_INVALID_ARG_TYPE:L}=$;let G;Ue.exports.addAbortSignal=function(oe,x){if(((F,oe)=>{if("object"!=typeof F||!("aborted"in F))throw new L("signal","AbortSignal",F)})(oe),!z(x)&&!X(x))throw new L("stream",["ReadableStream","WritableStream","Stream"],x);return Ue.exports.addAbortSignalNoValidate(oe,x)},Ue.exports.addAbortSignalNoValidate=function(F,oe){if("object"!=typeof F||!("aborted"in F))return oe;const x=z(oe)?()=>{oe.destroy(new C(void 0,{cause:F.reason}))}:()=>{oe[_](new C(void 0,{cause:F.reason}))};if(F.aborted)x();else{G=G||S(2656).addAbortListener;const k=G(F,x);E(oe,k[Q])}return oe}},2960:(Ue,_e,S)=>{"use strict";const{StringPrototypeSlice:Q,SymbolIterator:C,TypedArrayPrototypeSet:$,Uint8Array:z}=S(6305),{Buffer:X}=S(1657),{inspect:_}=S(2656);Ue.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(L){const G={data:L,next:null};this.length>0?this.tail.next=G:this.head=G,this.tail=G,++this.length}unshift(L){const G={data:L,next:this.head};0===this.length&&(this.tail=G),this.head=G,++this.length}shift(){if(0===this.length)return;const L=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,L}clear(){this.head=this.tail=null,this.length=0}join(L){if(0===this.length)return"";let G=this.head,P=""+G.data;for(;null!==(G=G.next);)P+=L+G.data;return P}concat(L){if(0===this.length)return X.alloc(0);const G=X.allocUnsafe(L>>>0);let P=this.head,F=0;for(;P;)$(G,P.data,F),F+=P.data.length,P=P.next;return G}consume(L,G){const P=this.head.data;if(L<P.length){const F=P.slice(0,L);return this.head.data=P.slice(L),F}return L===P.length?this.shift():G?this._getString(L):this._getBuffer(L)}first(){return this.head.data}*[C](){for(let L=this.head;L;L=L.next)yield L.data}_getString(L){let G="",P=this.head,F=0;do{const oe=P.data;if(!(L>oe.length)){L===oe.length?(G+=oe,++F,this.head=P.next?P.next:this.tail=null):(G+=Q(oe,0,L),this.head=P,P.data=Q(oe,L));break}G+=oe,L-=oe.length,++F}while(null!==(P=P.next));return this.length-=F,G}_getBuffer(L){const G=X.allocUnsafe(L),P=L;let F=this.head,oe=0;do{const x=F.data;if(!(L>x.length)){L===x.length?($(G,x,P-L),++oe,this.head=F.next?F.next:this.tail=null):($(G,new z(x.buffer,x.byteOffset,L),P-L),this.head=F,F.data=x.slice(L));break}$(G,x,P-L),L-=x.length,++oe}while(null!==(F=F.next));return this.length-=oe,G}[Symbol.for("nodejs.util.inspect.custom")](L,G){return _(this,{...G,depth:0,customInspect:!1})}}},7721:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const{pipeline:C}=S(4514),$=S(5931),{destroyer:z}=S(5601),{isNodeStream:X,isReadable:_,isWritable:E,isWebStream:L,isTransformStream:G,isWritableStream:P,isReadableStream:F}=S(5428),{AbortError:oe,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:k}}=S(4370),se=S(4618);Ue.exports=function(...J){if(0===J.length)throw new k("streams");if(1===J.length)return $.from(J[0]);const ee=[...J];if("function"==typeof J[0]&&(J[0]=$.from(J[0])),"function"==typeof J[J.length-1]){const Pe=J.length-1;J[Pe]=$.from(J[Pe])}for(let Pe=0;Pe<J.length;++Pe)if(X(J[Pe])||L(J[Pe])){if(Pe<J.length-1&&!(_(J[Pe])||F(J[Pe])||G(J[Pe])))throw new x(`streams[${Pe}]`,ee[Pe],"must be readable");if(Pe>0&&!(E(J[Pe])||P(J[Pe])||G(J[Pe])))throw new x(`streams[${Pe}]`,ee[Pe],"must be writable")}let W,B,b,I,T;const j=J[0],Ie=C(J,function le(Pe){const He=I;I=null,He?He(Pe):Pe?T.destroy(Pe):!xe&&!ae&&T.destroy()}),ae=!!(E(j)||P(j)||G(j)),xe=!!(_(Ie)||F(Ie)||G(Ie));if(T=new $({writableObjectMode:!(null==j||!j.writableObjectMode),readableObjectMode:!(null==Ie||!Ie.readableObjectMode),writable:ae,readable:xe}),ae){if(X(j))T._write=function(He,Qe,qe){j.write(He,Qe)?qe():W=qe},T._final=function(He){j.end(),B=He},j.on("drain",function(){if(W){const He=W;W=null,He()}});else if(L(j)){const Qe=(G(j)?j.writable:j).getWriter();T._write=function(){var qe=Q(function*(Ce,je,Se){try{yield Qe.ready,Qe.write(Ce).catch(()=>{}),Se()}catch(Be){Se(Be)}});return function(Ce,je,Se){return qe.apply(this,arguments)}}(),T._final=function(){var qe=Q(function*(Ce){try{yield Qe.ready,Qe.close().catch(()=>{}),B=Ce}catch(je){Ce(je)}});return function(Ce){return qe.apply(this,arguments)}}()}const Pe=G(Ie)?Ie.readable:Ie;se(Pe,()=>{if(B){const He=B;B=null,He()}})}if(xe)if(X(Ie))Ie.on("readable",function(){if(b){const Pe=b;b=null,Pe()}}),Ie.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Pe=Ie.read();if(null===Pe)return void(b=T._read);if(!T.push(Pe))return}};else if(L(Ie)){const He=(G(Ie)?Ie.readable:Ie).getReader();T._read=Q(function*(){for(;;)try{const{value:Qe,done:qe}=yield He.read();if(!T.push(Qe))return;if(qe)return void T.push(null)}catch{return}})}return T._destroy=function(Pe,He){!Pe&&null!==I&&(Pe=new oe),b=null,W=null,B=null,null===I?He(Pe):(I=He,X(Ie)&&z(Ie,Pe))},T}},5601:(Ue,_e,S)=>{"use strict";const Q=S(42),{aggregateTwoErrors:C,codes:{ERR_MULTIPLE_CALLBACK:$},AbortError:z}=S(4370),{Symbol:X}=S(6305),{kIsDestroyed:_,isDestroyed:E,isFinished:L,isServerRequest:G}=S(5428),P=X("kDestroy"),F=X("kConstruct");function oe(ae,xe,Pe){ae&&(xe&&!xe.errored&&(xe.errored=ae),Pe&&!Pe.errored&&(Pe.errored=ae))}function k(ae,xe,Pe){let He=!1;function Qe(qe){if(He)return;He=!0;const Ce=ae._readableState,je=ae._writableState;oe(qe,je,Ce),je&&(je.closed=!0),Ce&&(Ce.closed=!0),"function"==typeof Pe&&Pe(qe),qe?Q.nextTick(se,ae,qe):Q.nextTick(Y,ae)}try{ae._destroy(xe||null,Qe)}catch(qe){Qe(qe)}}function se(ae,xe){J(ae,xe),Y(ae)}function Y(ae){const xe=ae._readableState,Pe=ae._writableState;Pe&&(Pe.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Pe&&Pe.emitClose||null!=xe&&xe.emitClose)&&ae.emit("close")}function J(ae,xe){const Pe=ae._readableState,He=ae._writableState;null!=He&&He.errorEmitted||null!=Pe&&Pe.errorEmitted||(He&&(He.errorEmitted=!0),Pe&&(Pe.errorEmitted=!0),ae.emit("error",xe))}function W(ae,xe,Pe){const He=ae._readableState,Qe=ae._writableState;if(null!=Qe&&Qe.destroyed||null!=He&&He.destroyed)return this;null!=He&&He.autoDestroy||null!=Qe&&Qe.autoDestroy?ae.destroy(xe):xe&&(Qe&&!Qe.errored&&(Qe.errored=xe),He&&!He.errored&&(He.errored=xe),Pe?Q.nextTick(J,ae,xe):J(ae,xe))}function b(ae){let xe=!1;function Pe(He){if(xe)return void W(ae,He??new $);xe=!0;const Qe=ae._readableState,qe=ae._writableState,Ce=qe||Qe;Qe&&(Qe.constructed=!0),qe&&(qe.constructed=!0),Ce.destroyed?ae.emit(P,He):He?W(ae,He,!0):Q.nextTick(I,ae)}try{ae._construct(He=>{Q.nextTick(Pe,He)})}catch(He){Q.nextTick(Pe,He)}}function I(ae){ae.emit(F)}function T(ae){return ae?.setHeader&&"function"==typeof ae.abort}function le(ae){ae.emit("close")}function j(ae,xe){ae.emit("error",xe),Q.nextTick(le,ae)}Ue.exports={construct:function B(ae,xe){if("function"!=typeof ae._construct)return;const Pe=ae._readableState,He=ae._writableState;Pe&&(Pe.constructed=!1),He&&(He.constructed=!1),ae.once(F,xe),!(ae.listenerCount(F)>1)&&Q.nextTick(b,ae)},destroyer:function Ie(ae,xe){!ae||E(ae)||(!xe&&!L(ae)&&(xe=new z),G(ae)?(ae.socket=null,ae.destroy(xe)):T(ae)?ae.abort():T(ae.req)?ae.req.abort():"function"==typeof ae.destroy?ae.destroy(xe):"function"==typeof ae.close?ae.close():xe?Q.nextTick(j,ae,xe):Q.nextTick(le,ae),ae.destroyed||(ae[_]=!0))},destroy:function x(ae,xe){const Pe=this._readableState,He=this._writableState,Qe=He||Pe;return null!=He&&He.destroyed||null!=Pe&&Pe.destroyed?("function"==typeof xe&&xe(),this):(oe(ae,He,Pe),He&&(He.destroyed=!0),Pe&&(Pe.destroyed=!0),Qe.constructed?k(this,ae,xe):this.once(P,function(qe){k(this,C(qe,ae),xe)}),this)},undestroy:function ee(){const ae=this._readableState,xe=this._writableState;ae&&(ae.constructed=!0,ae.closed=!1,ae.closeEmitted=!1,ae.destroyed=!1,ae.errored=null,ae.errorEmitted=!1,ae.reading=!1,ae.ended=!1===ae.readable,ae.endEmitted=!1===ae.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:W}},5931:(Ue,_e,S)=>{"use strict";const{ObjectDefineProperties:Q,ObjectGetOwnPropertyDescriptor:C,ObjectKeys:$,ObjectSetPrototypeOf:z}=S(6305);Ue.exports=E;const X=S(8383),_=S(9764);z(E.prototype,X.prototype),z(E,X);{const F=$(_.prototype);for(let oe=0;oe<F.length;oe++){const x=F[oe];E.prototype[x]||(E.prototype[x]=_.prototype[x])}}function E(F){if(!(this instanceof E))return new E(F);X.call(this,F),_.call(this,F),F?(this.allowHalfOpen=!1!==F.allowHalfOpen,!1===F.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===F.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let L,P;function G(){return void 0===L&&(L={}),L}Q(E.prototype,{writable:{__proto__:null,...C(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...C(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...C(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...C(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...C(_.prototype,"writableLength")},writableFinished:{__proto__:null,...C(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...C(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...C(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...C(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(F){this._readableState&&this._writableState&&(this._readableState.destroyed=F,this._writableState.destroyed=F)}}}),E.fromWeb=function(F,oe){return G().newStreamDuplexFromReadableWritablePair(F,oe)},E.toWeb=function(F){return G().newReadableWritablePairFromDuplex(F)},E.from=function(F){return P||(P=S(8078)),P(F,"body")}},8078:(Ue,_e,S)=>{var Q=S(7156).default,C=S(6737).default,$=S(8186).default;const z=S(42),X=S(1657),{isReadable:_,isWritable:E,isIterable:L,isNodeStream:G,isReadableNodeStream:P,isWritableNodeStream:F,isDuplexNodeStream:oe,isReadableStream:x,isWritableStream:k}=S(5428),se=S(4618),{AbortError:Y,codes:{ERR_INVALID_ARG_TYPE:J,ERR_INVALID_RETURN_VALUE:ee}}=S(4370),{destroyer:W}=S(5601),B=S(5931),b=S(8383),I=S(9764),{createDeferredPromise:T}=S(2656),le=S(55),j=globalThis.Blob||X.Blob,Ie=typeof j<"u"?function(Ce){return Ce instanceof j}:function(Ce){return!1},ae=globalThis.AbortController||S(3982).AbortController,{FunctionPrototypeCall:xe}=S(6305);class Pe extends B{constructor(Ce){super(Ce),!1===Ce?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Ce?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Qe(qe){const Ce=qe.readable&&"function"!=typeof qe.readable.read?b.wrap(qe.readable):qe.readable,je=qe.writable;let de,Ae,nt,mt,Ke,Se=!!_(Ce),Be=!!E(je);function fe(R){const A=mt;mt=null,A?A(R):R&&Ke.destroy(R)}return Ke=new Pe({readableObjectMode:!(null==Ce||!Ce.readableObjectMode),writableObjectMode:!(null==je||!je.writableObjectMode),readable:Se,writable:Be}),Be&&(se(je,R=>{Be=!1,R&&W(Ce,R),fe(R)}),Ke._write=function(R,A,ie){je.write(R,A)?ie():de=ie},Ke._final=function(R){je.end(),Ae=R},je.on("drain",function(){if(de){const R=de;de=null,R()}}),je.on("finish",function(){if(Ae){const R=Ae;Ae=null,R()}})),Se&&(se(Ce,R=>{Se=!1,R&&W(Ce,R),fe(R)}),Ce.on("readable",function(){if(nt){const R=nt;nt=null,R()}}),Ce.on("end",function(){Ke.push(null)}),Ke._read=function(){for(;;){const R=Ce.read();if(null===R)return void(nt=Ke._read);if(!Ke.push(R))return}}),Ke._destroy=function(R,A){!R&&null!==mt&&(R=new Y),nt=null,de=null,Ae=null,null===mt?A(R):(mt=A,W(je,R),W(Ce,R))},Ke}Ue.exports=function qe(Ce,je){if(oe(Ce))return Ce;if(P(Ce))return Qe({readable:Ce});if(F(Ce))return Qe({writable:Ce});if(G(Ce))return Qe({writable:!1,readable:!1});if(x(Ce))return Qe({readable:b.fromWeb(Ce)});if(k(Ce))return Qe({writable:I.fromWeb(Ce)});if("function"==typeof Ce){const{value:Be,write:de,final:Ae,destroy:nt}=function He(qe){let{promise:Ce,resolve:je}=T();const Se=new ae,Be=Se.signal;return{value:qe($(function*(){for(;;){const Ae=Ce;Ce=null;const{chunk:nt,done:mt,cb:Ke}=yield C(Ae);if(z.nextTick(Ke),mt)return;if(Be.aborted)throw new Y(void 0,{cause:Be.reason});({promise:Ce,resolve:je}=T()),yield nt}})(),{signal:Be}),write(Ae,nt,mt){const Ke=je;je=null,Ke({chunk:Ae,done:!1,cb:mt})},final(Ae){const nt=je;je=null,nt({done:!0,cb:Ae})},destroy(Ae,nt){Se.abort(),nt(Ae)}}}(Ce);if(L(Be))return le(Pe,Be,{objectMode:!0,write:de,final:Ae,destroy:nt});const mt=Be?.then;if("function"==typeof mt){let Ke;const fe=xe(mt,Be,R=>{if(null!=R)throw new ee("nully","body",R)},R=>{W(Ke,R)});return Ke=new Pe({objectMode:!0,readable:!1,write:de,final(R){Ae(Q(function*(){try{yield fe,z.nextTick(R,null)}catch(A){z.nextTick(R,A)}}))},destroy:nt})}throw new ee("Iterable, AsyncIterable or AsyncFunction",je,Be)}if(Ie(Ce))return qe(Ce.arrayBuffer());if(L(Ce))return le(Pe,Ce,{objectMode:!0,writable:!1});if(x(Ce?.readable)&&k(Ce?.writable))return Pe.fromWeb(Ce);if("object"==typeof Ce?.writable||"object"==typeof Ce?.readable)return Qe({readable:null!=Ce&&Ce.readable?P(Ce?.readable)?Ce?.readable:qe(Ce.readable):void 0,writable:null!=Ce&&Ce.writable?F(Ce?.writable)?Ce?.writable:qe(Ce.writable):void 0});const Se=Ce?.then;if("function"==typeof Se){let Be;return xe(Se,Ce,de=>{null!=de&&Be.push(de),Be.push(null)},de=>{W(Be,de)}),Be=new Pe({objectMode:!0,writable:!1,read(){}})}throw new J(je,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Ce)}},4618:(Ue,_e,S)=>{const Q=S(42),{AbortError:C,codes:$}=S(4370),{ERR_INVALID_ARG_TYPE:z,ERR_STREAM_PREMATURE_CLOSE:X}=$,{kEmptyObject:_,once:E}=S(2656),{validateAbortSignal:L,validateFunction:G,validateObject:P,validateBoolean:F}=S(2120),{Promise:oe,PromisePrototypeThen:x,SymbolDispose:k}=S(6305),{isClosed:se,isReadable:Y,isReadableNodeStream:J,isReadableStream:ee,isReadableFinished:W,isReadableErrored:B,isWritable:b,isWritableNodeStream:I,isWritableStream:T,isWritableFinished:le,isWritableErrored:j,isNodeStream:Ie,willEmitClose:ae,kIsClosedPromise:xe}=S(5428);let Pe;const Qe=()=>{};function qe(Se,Be,de){var Ae,nt;if(2===arguments.length?(de=Be,Be=_):null==Be?Be=_:P(Be,"options"),G(de,"callback"),L(Be.signal,"options.signal"),de=E(de),ee(Se)||T(Se))return function Ce(Se,Be,de){let Ae=!1,nt=Qe;if(Be.signal)if(nt=()=>{Ae=!0,de.call(Se,new C(void 0,{cause:Be.signal.reason}))},Be.signal.aborted)Q.nextTick(nt);else{Pe=Pe||S(2656).addAbortListener;const Ke=Pe(Be.signal,nt),fe=de;de=E((...R)=>{Ke[k](),fe.apply(Se,R)})}const mt=(...Ke)=>{Ae||Q.nextTick(()=>de.apply(Se,Ke))};return x(Se[xe].promise,mt,mt),Qe}(Se,Be,de);if(!Ie(Se))throw new z("stream",["ReadableStream","WritableStream","Stream"],Se);const mt=null!==(Ae=Be.readable)&&void 0!==Ae?Ae:J(Se),Ke=null!==(nt=Be.writable)&&void 0!==nt?nt:I(Se),fe=Se._writableState,R=Se._readableState,A=()=>{Se.writable||Ve()};let ie=ae(Se)&&J(Se)===mt&&I(Se)===Ke,Z=le(Se,!1);const Ve=()=>{Z=!0,Se.destroyed&&(ie=!1),(!ie||Se.readable&&!mt)&&(!mt||Je)&&de.call(Se)};let Je=W(Se,!1);const ue=()=>{Je=!0,Se.destroyed&&(ie=!1),(!ie||Se.writable&&!Ke)&&(!Ke||Z)&&de.call(Se)},ne=Ee=>{de.call(Se,Ee)};let V=se(Se);const M=()=>{V=!0;const Ee=j(Se)||B(Se);return Ee&&"boolean"!=typeof Ee?de.call(Se,Ee):mt&&!Je&&J(Se,!0)&&!W(Se,!1)?de.call(Se,new X):!Ke||Z||le(Se,!1)?void de.call(Se):de.call(Se,new X)},O=()=>{V=!0;const Ee=j(Se)||B(Se);if(Ee&&"boolean"!=typeof Ee)return de.call(Se,Ee);de.call(Se)},he=()=>{Se.req.on("finish",Ve)};!function He(Se){return Se.setHeader&&"function"==typeof Se.abort}(Se)?Ke&&!fe&&(Se.on("end",A),Se.on("close",A)):(Se.on("complete",Ve),ie||Se.on("abort",M),Se.req?he():Se.on("request",he)),!ie&&"boolean"==typeof Se.aborted&&Se.on("aborted",M),Se.on("end",ue),Se.on("finish",Ve),!1!==Be.error&&Se.on("error",ne),Se.on("close",M),V?Q.nextTick(M):null!=fe&&fe.errorEmitted||null!=R&&R.errorEmitted?ie||Q.nextTick(O):(!mt&&(!ie||Y(Se))&&(Z||!1===b(Se))||!Ke&&(!ie||b(Se))&&(Je||!1===Y(Se))||R&&Se.req&&Se.aborted)&&Q.nextTick(O);const We=()=>{de=Qe,Se.removeListener("aborted",M),Se.removeListener("complete",Ve),Se.removeListener("abort",M),Se.removeListener("request",he),Se.req&&Se.req.removeListener("finish",Ve),Se.removeListener("end",A),Se.removeListener("close",A),Se.removeListener("finish",Ve),Se.removeListener("end",ue),Se.removeListener("error",ne),Se.removeListener("close",M)};if(Be.signal&&!V){const Ee=()=>{const Re=de;We(),Re.call(Se,new C(void 0,{cause:Be.signal.reason}))};if(Be.signal.aborted)Q.nextTick(Ee);else{Pe=Pe||S(2656).addAbortListener;const Re=Pe(Be.signal,Ee),ct=de;de=E((...bt)=>{Re[k](),ct.apply(Se,bt)})}}return We}Ue.exports=qe,Ue.exports.finished=function je(Se,Be){var de;let Ae=!1;return null===Be&&(Be=_),null!==(de=Be)&&void 0!==de&&de.cleanup&&(F(Be.cleanup,"cleanup"),Ae=Be.cleanup),new oe((nt,mt)=>{const Ke=qe(Se,Be,fe=>{Ae&&Ke(),fe?mt(fe):nt()})})}},55:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(42),{PromisePrototypeThen:$,SymbolAsyncIterator:z,SymbolIterator:X}=S(6305),{Buffer:_}=S(1657),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:L}=S(4370).codes;Ue.exports=function G(P,F,oe){let x,k;if("string"==typeof F||F instanceof _)return new P({objectMode:!0,...oe,read(){this.push(F),this.push(null)}});if(F&&F[z])k=!0,x=F[z]();else{if(!F||!F[X])throw new E("iterable",["Iterable"],F);k=!1,x=F[X]()}const se=new P({objectMode:!0,highWaterMark:1,...oe});let Y=!1;function ee(){return(ee=Q(function*(b){if(null!=b&&"function"==typeof x.throw){const{value:le,done:j}=yield x.throw(b);if(yield le,j)return}if("function"==typeof x.return){const{value:le}=yield x.return();yield le}})).apply(this,arguments)}function B(){return(B=Q(function*(){for(;;){try{const{value:b,done:I}=k?yield x.next():x.next();if(I)se.push(null);else{const T=b&&"function"==typeof b.then?yield b:b;if(null===T)throw Y=!1,new L;if(se.push(T))continue;Y=!1}}catch(b){se.destroy(b)}break}})).apply(this,arguments)}return se._read=function(){Y||(Y=!0,function W(){B.apply(this,arguments)}())},se._destroy=function(b,I){$(function J(b){return ee.apply(this,arguments)}(b),()=>C.nextTick(I,b),T=>C.nextTick(I,T||b))},se}},900:(Ue,_e,S)=>{"use strict";const{ArrayIsArray:Q,ObjectSetPrototypeOf:C}=S(6305),{EventEmitter:$}=S(2016);function z(_){$.call(this,_)}function X(_,E,L){if("function"==typeof _.prependListener)return _.prependListener(E,L);_._events&&_._events[E]?Q(_._events[E])?_._events[E].unshift(L):_._events[E]=[L,_._events[E]]:_.on(E,L)}C(z.prototype,$.prototype),C(z,$),z.prototype.pipe=function(_,E){const L=this;function G(Y){_.writable&&!1===_.write(Y)&&L.pause&&L.pause()}function P(){L.readable&&L.resume&&L.resume()}L.on("data",G),_.on("drain",P),!_._isStdio&&(!E||!1!==E.end)&&(L.on("end",oe),L.on("close",x));let F=!1;function oe(){F||(F=!0,_.end())}function x(){F||(F=!0,"function"==typeof _.destroy&&_.destroy())}function k(Y){se(),0===$.listenerCount(this,"error")&&this.emit("error",Y)}function se(){L.removeListener("data",G),_.removeListener("drain",P),L.removeListener("end",oe),L.removeListener("close",x),L.removeListener("error",k),_.removeListener("error",k),L.removeListener("end",se),L.removeListener("close",se),_.removeListener("close",se)}return X(L,"error",k),X(_,"error",k),L.on("end",se),L.on("close",se),_.on("close",se),_.emit("pipe",L),_},Ue.exports={Stream:z,prependListener:X}},7624:(Ue,_e,S)=>{"use strict";var Q=S(7156).default,C=S(8131).default,$=S(8237).default,z=S(6737).default,X=S(8186).default;const _=globalThis.AbortController||S(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:E,ERR_INVALID_ARG_TYPE:L,ERR_MISSING_ARGS:G,ERR_OUT_OF_RANGE:P},AbortError:F}=S(4370),{validateAbortSignal:oe,validateInteger:x,validateObject:k}=S(2120),se=S(6305).Symbol("kWeak"),Y=S(6305).Symbol("kResistStopPropagation"),{finished:J}=S(4618),ee=S(7721),{addAbortSignalNoValidate:W}=S(9987),{isWritable:B,isNodeStream:b}=S(5428),{deprecate:I}=S(2656),{ArrayPrototypePush:T,Boolean:le,MathFloor:j,Number:Ie,NumberIsNaN:ae,Promise:xe,PromiseReject:Pe,PromiseResolve:He,PromisePrototypeThen:Qe,Symbol:qe}=S(6305),Ce=qe("kEmpty"),je=qe("kEof");function Be(Ee,Re){if("function"!=typeof Ee)throw new L("fn",["Function","AsyncFunction"],Ee);null!=Re&&k(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal");let ct=1;null!=Re?.concurrency&&(ct=j(Re.concurrency));let bt=ct-1;return null!=Re?.highWaterMark&&(bt=j(Re.highWaterMark)),x(ct,"options.concurrency",1),x(bt,"options.highWaterMark",0),bt+=ct,function(){var Dt=X(function*(){const Gt=S(2656).AbortSignalAny([Re?.signal].filter(le)),pe=this,H=[],te={signal:Gt};let Le,it,ut=!1,Et=0;function tn(){ut=!0,Pn()}function Pn(){Et-=1,kn()}function kn(){it&&!ut&&Et<ct&&H.length<bt&&(it(),it=null)}function An(){return(An=Q(function*(){try{var Tr,Yi=!1,io=!1;try{for(var Wo,rs=$(pe);Yi=!(Wo=yield rs.next()).done;Yi=!1){let Ei=Wo.value;if(ut)return;if(Gt.aborted)throw new F;try{if(Ei=Ee(Ei,te),Ei===Ce)continue;Ei=He(Ei)}catch(zr){Ei=Pe(zr)}Et+=1,Qe(Ei,Pn,tn),H.push(Ei),Le&&(Le(),Le=null),!ut&&(H.length>=bt||Et>=ct)&&(yield new xe(zr=>{it=zr}))}}catch(Ei){io=!0,Tr=Ei}finally{try{Yi&&null!=rs.return&&(yield rs.return())}finally{if(io)throw Tr}}H.push(je)}catch(Ei){const zr=Pe(Ei);Qe(zr,Pn,tn),H.push(zr)}finally{ut=!0,Le&&(Le(),Le=null)}})).apply(this,arguments)}!function vn(){An.apply(this,arguments)}();try{for(;;){for(;H.length>0;){const Yi=yield z(H[0]);if(Yi===je)return;if(Gt.aborted)throw new F;Yi!==Ce&&(yield Yi),H.shift(),kn()}yield z(new xe(Yi=>{Le=Yi}))}}finally{ut=!0,it&&(it(),it=null)}});return function _t(){return Dt.apply(this,arguments)}}().call(this)}function Ae(Ee){return nt.apply(this,arguments)}function nt(){return(nt=Q(function*(Ee,Re=void 0){var Dt,ct=!1,bt=!1;try{for(var _t=$(Z.call(this,Ee,Re));ct=!(yield _t.next()).done;ct=!1)return!0}catch(pe){bt=!0,Dt=pe}finally{try{ct&&null!=_t.return&&(yield _t.return())}finally{if(bt)throw Dt}}return!1})).apply(this,arguments)}function Ke(){return(Ke=Q(function*(Ee,Re=void 0){if("function"!=typeof Ee)throw new L("fn",["Function","AsyncFunction"],Ee);return!(yield Ae.call(this,Q(function*(...ct){return!(yield Ee(...ct))}),Re))})).apply(this,arguments)}function R(){return(R=Q(function*(Ee,Re){var Dt,ct=!1,bt=!1;try{for(var Gt,_t=$(Z.call(this,Ee,Re));ct=!(Gt=yield _t.next()).done;ct=!1)return Gt.value}catch(pe){bt=!0,Dt=pe}finally{try{ct&&null!=_t.return&&(yield _t.return())}finally{if(bt)throw Dt}}})).apply(this,arguments)}function ie(){return ie=Q(function*(Ee,Re){if("function"!=typeof Ee)throw new L("fn",["Function","AsyncFunction"],Ee);function bt(){return(bt=Q(function*(te,Le){return yield Ee(te,Le),Ce})).apply(this,arguments)}var Gt,Dt=!1,_t=!1;try{for(var pe=$(Be.call(this,function ct(te,Le){return bt.apply(this,arguments)},Re));Dt=!(yield pe.next()).done;Dt=!1);}catch(te){_t=!0,Gt=te}finally{try{Dt&&null!=pe.return&&(yield pe.return())}finally{if(_t)throw Gt}}}),ie.apply(this,arguments)}function Z(Ee,Re){if("function"!=typeof Ee)throw new L("fn",["Function","AsyncFunction"],Ee);function bt(){return(bt=Q(function*(Dt,_t){return(yield Ee(Dt,_t))?Dt:Ce})).apply(this,arguments)}return Be.call(this,function ct(Dt,_t){return bt.apply(this,arguments)},Re)}class Ve extends G{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ue(){return ue=Q(function*(Ee,Re,ct){var bt;if("function"!=typeof Ee)throw new L("reducer",["Function","AsyncFunction"],Ee);null!=ct&&k(ct,"options"),null!=ct?.signal&&oe(ct.signal,"options.signal");let Dt=arguments.length>1;if(null!=ct&&null!==(bt=ct.signal)&&void 0!==bt&&bt.aborted){const tn=new F(void 0,{cause:ct.signal.reason});throw this.once("error",()=>{}),yield J(this.destroy(tn)),tn}const _t=new _,Gt=_t.signal;null!=ct&&ct.signal&&ct.signal.addEventListener("abort",()=>_t.abort(),{once:!0,[se]:this,[Y]:!0});let pe=!1;try{var Le,H=!1,te=!1;try{for(var ut,it=$(this);H=!(ut=yield it.next()).done;H=!1){const tn=ut.value;var Et;if(pe=!0,null!=ct&&null!==(Et=ct.signal)&&void 0!==Et&&Et.aborted)throw new F;Dt?Re=yield Ee(Re,tn,{signal:Gt}):(Re=tn,Dt=!0)}}catch(tn){te=!0,Le=tn}finally{try{H&&null!=it.return&&(yield it.return())}finally{if(te)throw Le}}if(!pe&&!Dt)throw new Ve}finally{_t.abort()}return Re}),ue.apply(this,arguments)}function V(){return(V=Q(function*(Ee){null!=Ee&&k(Ee,"options"),null!=Ee?.signal&&oe(Ee.signal,"options.signal");const Re=[];var Dt,ct=!1,bt=!1;try{for(var Gt,_t=$(this);ct=!(Gt=yield _t.next()).done;ct=!1){const H=Gt.value;var pe;if(null!=Ee&&null!==(pe=Ee.signal)&&void 0!==pe&&pe.aborted)throw new F(void 0,{cause:Ee.signal.reason});T(Re,H)}}catch(H){bt=!0,Dt=H}finally{try{ct&&null!=_t.return&&(yield _t.return())}finally{if(bt)throw Dt}}return Re})).apply(this,arguments)}function O(Ee){if(Ee=Ie(Ee),ae(Ee))return 0;if(Ee<0)throw new P("number",">= 0",Ee);return Ee}Ue.exports.streamReturningOperators={asIndexedPairs:I(function de(Ee=void 0){return null!=Ee&&k(Ee,"options"),null!=Ee?.signal&&oe(Ee.signal,"options.signal"),function(){var Re=X(function*(){let bt=0;var Gt,Dt=!1,_t=!1;try{for(var H,pe=$(this);Dt=!(H=yield z(pe.next())).done;Dt=!1){const Le=H.value;var te;if(null!=Ee&&null!==(te=Ee.signal)&&void 0!==te&&te.aborted)throw new F({cause:Ee.signal.reason});yield[bt++,Le]}}catch(Le){_t=!0,Gt=Le}finally{try{Dt&&null!=pe.return&&(yield z(pe.return()))}finally{if(_t)throw Gt}}});return function ct(){return Re.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function he(Ee,Re=void 0){return null!=Re&&k(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),Ee=O(Ee),function(){var ct=X(function*(){var Dt;if(null!=Re&&null!==(Dt=Re.signal)&&void 0!==Dt&&Dt.aborted)throw new F;var pe,_t=!1,Gt=!1;try{for(var te,H=$(this);_t=!(te=yield z(H.next())).done;_t=!1){const it=te.value;var Le;if(null!=Re&&null!==(Le=Re.signal)&&void 0!==Le&&Le.aborted)throw new F;Ee--<=0&&(yield it)}}catch(it){Gt=!0,pe=it}finally{try{_t&&null!=H.return&&(yield z(H.return()))}finally{if(Gt)throw pe}}});return function bt(){return ct.apply(this,arguments)}}().call(this)},filter:Z,flatMap:function M(Ee,Re){const ct=Be.call(this,Ee,Re);return function(){var bt=X(function*(){var pe,_t=!1,Gt=!1;try{for(var te,H=$(ct);_t=!(te=yield z(H.next())).done;_t=!1){const Le=te.value;yield*C($(Le),z)}}catch(Le){Gt=!0,pe=Le}finally{try{_t&&null!=H.return&&(yield z(H.return()))}finally{if(Gt)throw pe}}});return function Dt(){return bt.apply(this,arguments)}}().call(this)},map:Be,take:function We(Ee,Re=void 0){return null!=Re&&k(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),Ee=O(Ee),function(){var ct=X(function*(){var Dt;if(null!=Re&&null!==(Dt=Re.signal)&&void 0!==Dt&&Dt.aborted)throw new F;var pe,_t=!1,Gt=!1;try{for(var te,H=$(this);_t=!(te=yield z(H.next())).done;_t=!1){const it=te.value;var Le;if(null!=Re&&null!==(Le=Re.signal)&&void 0!==Le&&Le.aborted)throw new F;if(Ee-- >0&&(yield it),Ee<=0)return}}catch(it){Gt=!0,pe=it}finally{try{_t&&null!=H.return&&(yield z(H.return()))}finally{if(Gt)throw pe}}});return function bt(){return ct.apply(this,arguments)}}().call(this)},compose:function Se(Ee,Re){if(null!=Re&&k(Re,"options"),null!=Re?.signal&&oe(Re.signal,"options.signal"),b(Ee)&&!B(Ee))throw new E("stream",Ee,"must be writable");const ct=ee(this,Ee);return null!=Re&&Re.signal&&W(Re.signal,ct),ct}},Ue.exports.promiseReturningOperators={every:function mt(Ee){return Ke.apply(this,arguments)},forEach:function A(Ee,Re){return ie.apply(this,arguments)},reduce:function Je(Ee,Re,ct){return ue.apply(this,arguments)},toArray:function ne(Ee){return V.apply(this,arguments)},some:Ae,find:function fe(Ee,Re){return R.apply(this,arguments)}}},6973:(Ue,_e,S)=>{"use strict";const{ObjectSetPrototypeOf:Q}=S(6305);Ue.exports=$;const C=S(123);function $(z){if(!(this instanceof $))return new $(z);C.call(this,z)}Q($.prototype,C.prototype),Q($,C),$.prototype._transform=function(z,X,_){_(null,z)}},4514:(Ue,_e,S)=>{var Q=S(7156).default,C=S(8186).default,$=S(6737).default,z=S(8131).default,X=S(8237).default;const _=S(42),{ArrayIsArray:E,Promise:L,SymbolAsyncIterator:G,SymbolDispose:P}=S(6305),F=S(4618),{once:oe}=S(2656),x=S(5601),k=S(5931),{aggregateTwoErrors:se,codes:{ERR_INVALID_ARG_TYPE:Y,ERR_INVALID_RETURN_VALUE:J,ERR_MISSING_ARGS:ee,ERR_STREAM_DESTROYED:W,ERR_STREAM_PREMATURE_CLOSE:B},AbortError:b}=S(4370),{validateFunction:I,validateAbortSignal:T}=S(2120),{isIterable:le,isReadable:j,isReadableNodeStream:Ie,isNodeStream:ae,isTransformStream:xe,isWebStream:Pe,isReadableStream:He,isReadableFinished:Qe}=S(5428),qe=globalThis.AbortController||S(3982).AbortController;let Ce,je,Se;function Be(Je,ue,ne){let V=!1;return Je.on("close",()=>{V=!0}),{destroy:O=>{V||(V=!0,x.destroyer(Je,O||new W("pipe")))},cleanup:F(Je,{readable:ue,writable:ne},O=>{V=!O})}}function Ae(Je){if(le(Je))return Je;if(Ie(Je))return function nt(Je){return mt.apply(this,arguments)}(Je);throw new Y("val",["Readable","Iterable","AsyncIterable"],Je)}function mt(){return(mt=C(function*(Je){je||(je=S(8383)),yield*z(X(je.prototype[G].call(Je)),$)})).apply(this,arguments)}function Ke(Je,ue,ne,V){return fe.apply(this,arguments)}function fe(){return(fe=Q(function*(Je,ue,ne,{end:V}){let M,O=null;const he=Gt=>{if(Gt&&(M=Gt),O){const pe=O;O=null,pe()}},We=()=>new L((Gt,pe)=>{M?pe(M):O=()=>{M?pe(M):Gt()}});ue.on("drain",he);const Ee=F(ue,{readable:!1},he);try{ue.writableNeedDrain&&(yield We());var bt,Re=!1,ct=!1;try{for(var _t,Dt=X(Je);Re=!(_t=yield Dt.next()).done;Re=!1)ue.write(_t.value)||(yield We())}catch(Gt){ct=!0,bt=Gt}finally{try{Re&&null!=Dt.return&&(yield Dt.return())}finally{if(ct)throw bt}}V&&(ue.end(),yield We()),ne()}catch(Gt){ne(M!==Gt?se(M,Gt):Gt)}finally{Ee(),ue.off("drain",he)}})).apply(this,arguments)}function R(Je,ue,ne,V){return A.apply(this,arguments)}function A(){return(A=Q(function*(Je,ue,ne,{end:V}){xe(ue)&&(ue=ue.writable);const M=ue.getWriter();try{var We,O=!1,he=!1;try{for(var Re,Ee=X(Je);O=!(Re=yield Ee.next()).done;O=!1){const ct=Re.value;yield M.ready,M.write(ct).catch(()=>{})}}catch(ct){he=!0,We=ct}finally{try{O&&null!=Ee.return&&(yield Ee.return())}finally{if(he)throw We}}yield M.ready,V&&(yield M.close()),ne()}catch(ct){try{yield M.abort(ct),ne(ct)}catch(bt){ne(bt)}}})).apply(this,arguments)}function Z(Je,ue,ne){if(1===Je.length&&E(Je[0])&&(Je=Je[0]),Je.length<2)throw new ee("streams");const V=new qe,M=V.signal,O=ne?.signal,he=[];function We(){Gt(new b)}let Ee,Re,ct;T(O,"options.signal"),Se=Se||S(2656).addAbortListener,O&&(Ee=Se(O,We));const bt=[];let pe,Dt=0;function _t(it){Gt(it,0==--Dt)}function Gt(it,ut){var Et;if(it&&(!Re||"ERR_STREAM_PREMATURE_CLOSE"===Re.code)&&(Re=it),Re||ut){for(;bt.length;)bt.shift()(Re);null===(Et=Ee)||void 0===Et||Et[P](),V.abort(),ut&&(Re||he.forEach(tn=>tn()),_.nextTick(ue,Re,ct))}}for(let it=0;it<Je.length;it++){const ut=Je[it],Et=it<Je.length-1,tn=it>0,Pn=Et||!1!==ne?.end,kn=it===Je.length-1;if(ae(ut)){let vn=function(An){An&&"AbortError"!==An.name&&"ERR_STREAM_PREMATURE_CLOSE"!==An.code&&_t(An)};if(Pn){const{destroy:An,cleanup:Yi}=Be(ut,Et,tn);bt.push(An),j(ut)&&kn&&he.push(Yi)}ut.on("error",vn),j(ut)&&kn&&he.push(()=>{ut.removeListener("error",vn)})}if(0===it)if("function"==typeof ut){if(pe=ut({signal:M}),!le(pe))throw new J("Iterable, AsyncIterable or Stream","source",pe)}else pe=le(ut)||Ie(ut)||xe(ut)?ut:k.from(ut);else if("function"==typeof ut){var H;if(pe=xe(pe)?Ae(null===(H=pe)||void 0===H?void 0:H.readable):Ae(pe),pe=ut(pe,{signal:M}),Et){if(!le(pe,!0))throw new J("AsyncIterable",`transform[${it-1}]`,pe)}else{var te;Ce||(Ce=S(6973));const vn=new Ce({objectMode:!0}),An=null===(te=pe)||void 0===te?void 0:te.then;if("function"==typeof An)Dt++,An.call(pe,Tr=>{ct=Tr,null!=Tr&&vn.write(Tr),Pn&&vn.end(),_.nextTick(_t)},Tr=>{vn.destroy(Tr),_.nextTick(_t,Tr)});else if(le(pe,!0))Dt++,Ke(pe,vn,_t,{end:Pn});else{if(!He(pe)&&!xe(pe))throw new J("AsyncIterable or Promise","destination",pe);Dt++,Ke(pe.readable||pe,vn,_t,{end:Pn})}pe=vn;const{destroy:Yi,cleanup:io}=Be(pe,!1,!0);bt.push(Yi),kn&&he.push(io)}}else if(ae(ut)){if(Ie(pe)){Dt+=2;const vn=Ve(pe,ut,_t,{end:Pn});j(ut)&&kn&&he.push(vn)}else if(xe(pe)||He(pe))Dt++,Ke(pe.readable||pe,ut,_t,{end:Pn});else{if(!le(pe))throw new Y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Dt++,Ke(pe,ut,_t,{end:Pn})}pe=ut}else if(Pe(ut)){if(Ie(pe))Dt++,R(Ae(pe),ut,_t,{end:Pn});else if(He(pe)||le(pe))Dt++,R(pe,ut,_t,{end:Pn});else{if(!xe(pe))throw new Y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Dt++,R(pe.readable,ut,_t,{end:Pn})}pe=ut}else pe=k.from(ut)}return(null!=M&&M.aborted||null!=O&&O.aborted)&&_.nextTick(We),pe}function Ve(Je,ue,ne,{end:V}){let M=!1;if(ue.on("close",()=>{M||ne(new B)}),Je.pipe(ue,{end:!1}),V){let he=function(){M=!0,ue.end()};Qe(Je)?_.nextTick(he):Je.once("end",he)}else ne();return F(Je,{readable:!0,writable:!1},he=>{const We=Je._readableState;he&&"ERR_STREAM_PREMATURE_CLOSE"===he.code&&We&&We.ended&&!We.errored&&!We.errorEmitted?Je.once("end",ne).once("error",ne):ne(he)}),F(ue,{readable:!1,writable:!0},ne)}Ue.exports={pipelineImpl:Z,pipeline:function ie(...Je){return Z(Je,oe(function de(Je){return I(Je[Je.length-1],"streams[stream.length - 1]"),Je.pop()}(Je)))}}},8383:(Ue,_e,S)=>{var Q=S(6737).default,C=S(8186).default;const $=S(42),{ArrayPrototypeIndexOf:z,NumberIsInteger:X,NumberIsNaN:_,NumberParseInt:E,ObjectDefineProperties:L,ObjectKeys:G,ObjectSetPrototypeOf:P,Promise:F,SafeSet:oe,SymbolAsyncDispose:x,SymbolAsyncIterator:k,Symbol:se}=S(6305);Ue.exports=_t,_t.ReadableState=Dt;const{EventEmitter:Y}=S(2016),{Stream:J,prependListener:ee}=S(900),{Buffer:W}=S(1657),{addAbortSignal:B}=S(9987),b=S(4618);let I=S(2656).debuglog("stream",$e=>{I=$e});const T=S(2960),le=S(5601),{getHighWaterMark:j,getDefaultHighWaterMark:Ie}=S(8782),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:xe,ERR_METHOD_NOT_IMPLEMENTED:Pe,ERR_OUT_OF_RANGE:He,ERR_STREAM_PUSH_AFTER_EOF:Qe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:qe},AbortError:Ce}=S(4370),{validateObject:je}=S(2120),Se=se("kPaused"),{StringDecoder:Be}=S(2024),de=S(55);P(_t.prototype,J.prototype),P(_t,J);const Ae=()=>{},{errorOrDestroy:nt}=le,mt=1,A=16,ie=32,Z=64,V=2048,M=4096,Ee=65536;function bt($e){return{enumerable:!1,get(){return 0!=(this.state&$e)},set(Ze){Ze?this.state|=$e:this.state&=~$e}}}function Dt($e,Ze,St){"boolean"!=typeof St&&(St=Ze instanceof S(5931)),this.state=V|M|A|ie,$e&&$e.objectMode&&(this.state|=mt),St&&$e&&$e.readableObjectMode&&(this.state|=mt),this.highWaterMark=$e?j(this,$e,"readableHighWaterMark",St):Ie(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[Se]=null,$e&&!1===$e.emitClose&&(this.state&=~V),$e&&!1===$e.autoDestroy&&(this.state&=~M),this.errored=null,this.defaultEncoding=$e&&$e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,$e&&$e.encoding&&(this.decoder=new Be($e.encoding),this.encoding=$e.encoding)}function _t($e){if(!(this instanceof _t))return new _t($e);const Ze=this instanceof S(5931);this._readableState=new Dt($e,this,Ze),$e&&("function"==typeof $e.read&&(this._read=$e.read),"function"==typeof $e.destroy&&(this._destroy=$e.destroy),"function"==typeof $e.construct&&(this._construct=$e.construct),$e.signal&&!Ze&&B($e.signal,this)),J.call(this,$e),le.construct(this,()=>{this._readableState.needReadable&&tn(this,this._readableState)})}function Gt($e,Ze,St,zt){I("readableAddChunk",Ze);const nn=$e._readableState;let ur;if(nn.state&mt||("string"==typeof Ze?nn.encoding!==(St=St||nn.defaultEncoding)&&(zt&&nn.encoding?Ze=W.from(Ze,St).toString(nn.encoding):(Ze=W.from(Ze,St),St="")):Ze instanceof W?St="":J._isUint8Array(Ze)?(Ze=J._uint8ArrayToBuffer(Ze),St=""):null!=Ze&&(ur=new xe("chunk",["string","Buffer","Uint8Array"],Ze))),ur)nt($e,ur);else if(null===Ze)nn.state&=-9,function it($e,Ze){if(I("onEofChunk"),!Ze.ended){if(Ze.decoder){const St=Ze.decoder.end();St&&St.length&&(Ze.buffer.push(St),Ze.length+=Ze.objectMode?1:St.length)}Ze.ended=!0,Ze.sync?ut($e):(Ze.needReadable=!1,Ze.emittedReadable=!0,Et($e))}}($e,nn);else if(nn.state&mt||Ze&&Ze.length>0)if(zt)if(4&nn.state)nt($e,new qe);else{if(nn.destroyed||nn.errored)return!1;pe($e,nn,Ze,!0)}else if(nn.ended)nt($e,new Qe);else{if(nn.destroyed||nn.errored)return!1;nn.state&=-9,nn.decoder&&!St?(Ze=nn.decoder.write(Ze),nn.objectMode||0!==Ze.length?pe($e,nn,Ze,!1):tn($e,nn)):pe($e,nn,Ze,!1)}else zt||(nn.state&=-9,tn($e,nn));return!nn.ended&&(nn.length<nn.highWaterMark||0===nn.length)}function pe($e,Ze,St,zt){Ze.flowing&&0===Ze.length&&!Ze.sync&&$e.listenerCount("data")>0?(Ze.state&Ee?Ze.awaitDrainWriters.clear():Ze.awaitDrainWriters=null,Ze.dataEmitted=!0,$e.emit("data",St)):(Ze.length+=Ze.objectMode?1:St.length,zt?Ze.buffer.unshift(St):Ze.buffer.push(St),Ze.state&Z&&ut($e)),tn($e,Ze)}function Le($e,Ze){return $e<=0||0===Ze.length&&Ze.ended?0:Ze.state&mt?1:_($e)?Ze.flowing&&Ze.length?Ze.buffer.first().length:Ze.length:$e<=Ze.length?$e:Ze.ended?Ze.length:0}function ut($e){const Ze=$e._readableState;I("emitReadable",Ze.needReadable,Ze.emittedReadable),Ze.needReadable=!1,Ze.emittedReadable||(I("emitReadable",Ze.flowing),Ze.emittedReadable=!0,$.nextTick(Et,$e))}function Et($e){const Ze=$e._readableState;I("emitReadable_",Ze.destroyed,Ze.length,Ze.ended),!Ze.destroyed&&!Ze.errored&&(Ze.length||Ze.ended)&&($e.emit("readable"),Ze.emittedReadable=!1),Ze.needReadable=!Ze.flowing&&!Ze.ended&&Ze.length<=Ze.highWaterMark,Tr($e)}function tn($e,Ze){!Ze.readingMore&&Ze.constructed&&(Ze.readingMore=!0,$.nextTick(Pn,$e,Ze))}function Pn($e,Ze){for(;!Ze.reading&&!Ze.ended&&(Ze.length<Ze.highWaterMark||Ze.flowing&&0===Ze.length);){const St=Ze.length;if(I("maybeReadMore read 0"),$e.read(0),St===Ze.length)break}Ze.readingMore=!1}function vn($e){const Ze=$e._readableState;Ze.readableListening=$e.listenerCount("readable")>0,Ze.resumeScheduled&&!1===Ze[Se]?Ze.flowing=!0:$e.listenerCount("data")>0?$e.resume():Ze.readableListening||(Ze.flowing=null)}function An($e){I("readable nexttick read 0"),$e.read(0)}function io($e,Ze){I("resume",Ze.reading),Ze.reading||$e.read(0),Ze.resumeScheduled=!1,$e.emit("resume"),Tr($e),Ze.flowing&&!Ze.reading&&$e.read(0)}function Tr($e){const Ze=$e._readableState;for(I("flow",Ze.flowing);Ze.flowing&&null!==$e.read(););}function rs($e,Ze){"function"!=typeof $e.read&&($e=_t.wrap($e,{objectMode:!0}));const St=function Wo($e,Ze){return Ei.apply(this,arguments)}($e,Ze);return St.stream=$e,St}function Ei(){return(Ei=C(function*($e,Ze){let nn,St=Ae;function zt(ss){this===$e?(St(),St=Ae):St=ss}$e.on("readable",zt);const ur=b($e,{writable:!1},ss=>{nn=ss?ae(nn,ss):null,St(),St=Ae});try{for(;;){const ss=$e.destroyed?null:$e.read();if(null!==ss)yield ss;else{if(nn)throw nn;if(null===nn)return;yield Q(new F(zt))}}}catch(ss){throw nn=ae(nn,ss),nn}finally{!nn&&!1===Ze?.destroyOnReturn||void 0!==nn&&!$e._readableState.autoDestroy?($e.off("readable",zt),ur()):le.destroyer($e,null)}})).apply(this,arguments)}function zr($e,Ze){if(0===Ze.length)return null;let St;return Ze.objectMode?St=Ze.buffer.shift():!$e||$e>=Ze.length?(St=Ze.decoder?Ze.buffer.join(""):1===Ze.buffer.length?Ze.buffer.first():Ze.buffer.concat(Ze.length),Ze.buffer.clear()):St=Ze.buffer.consume($e,Ze.decoder),St}function ya($e){const Ze=$e._readableState;I("endReadable",Ze.endEmitted),Ze.endEmitted||(Ze.ended=!0,$.nextTick(za,Ze,$e))}function za($e,Ze){if(I("endReadableNT",$e.endEmitted,$e.length),!$e.errored&&!$e.closeEmitted&&!$e.endEmitted&&0===$e.length)if($e.endEmitted=!0,Ze.emit("end"),Ze.writable&&!1===Ze.allowHalfOpen)$.nextTick(il,Ze);else if($e.autoDestroy){const St=Ze._writableState;(!St||St.autoDestroy&&(St.finished||!1===St.writable))&&Ze.destroy()}}function il($e){$e.writable&&!$e.writableEnded&&!$e.destroyed&&$e.end()}let va;function Hs(){return void 0===va&&(va={}),va}L(Dt.prototype,{objectMode:bt(mt),ended:bt(2),endEmitted:bt(4),reading:bt(8),constructed:bt(A),sync:bt(ie),needReadable:bt(Z),emittedReadable:bt(128),readableListening:bt(256),resumeScheduled:bt(512),errorEmitted:bt(1024),emitClose:bt(V),autoDestroy:bt(M),destroyed:bt(8192),closed:bt(16384),closeEmitted:bt(32768),multiAwaitDrain:bt(Ee),readingMore:bt(1<<17),dataEmitted:bt(1<<18)}),_t.prototype.destroy=le.destroy,_t.prototype._undestroy=le.undestroy,_t.prototype._destroy=function($e,Ze){Ze($e)},_t.prototype[Y.captureRejectionSymbol]=function($e){this.destroy($e)},_t.prototype[x]=function(){let $e;return this.destroyed||($e=this.readableEnded?null:new Ce,this.destroy($e)),new F((Ze,St)=>b(this,zt=>zt&&zt!==$e?St(zt):Ze(null)))},_t.prototype.push=function($e,Ze){return Gt(this,$e,Ze,!1)},_t.prototype.unshift=function($e,Ze){return Gt(this,$e,Ze,!0)},_t.prototype.isPaused=function(){const $e=this._readableState;return!0===$e[Se]||!1===$e.flowing},_t.prototype.setEncoding=function($e){const Ze=new Be($e);this._readableState.decoder=Ze,this._readableState.encoding=this._readableState.decoder.encoding;const St=this._readableState.buffer;let zt="";for(const nn of St)zt+=Ze.write(nn);return St.clear(),""!==zt&&St.push(zt),this._readableState.length=zt.length,this},_t.prototype.read=function($e){I("read",$e),void 0===$e?$e=NaN:X($e)||($e=E($e,10));const Ze=this._readableState,St=$e;if($e>Ze.highWaterMark&&(Ze.highWaterMark=function te($e){if($e>1073741824)throw new He("size","<= 1GiB",$e);return $e--,$e|=$e>>>1,$e|=$e>>>2,$e|=$e>>>4,$e|=$e>>>8,$e|=$e>>>16,++$e}($e)),0!==$e&&(Ze.state&=-129),0===$e&&Ze.needReadable&&((0!==Ze.highWaterMark?Ze.length>=Ze.highWaterMark:Ze.length>0)||Ze.ended))return I("read: emitReadable",Ze.length,Ze.ended),0===Ze.length&&Ze.ended?ya(this):ut(this),null;if(0===($e=Le($e,Ze))&&Ze.ended)return 0===Ze.length&&ya(this),null;let nn,zt=0!=(Ze.state&Z);if(I("need readable",zt),(0===Ze.length||Ze.length-$e<Ze.highWaterMark)&&(zt=!0,I("length less than watermark",zt)),Ze.ended||Ze.reading||Ze.destroyed||Ze.errored||!Ze.constructed)zt=!1,I("reading, ended or constructing",zt);else if(zt){I("do read"),Ze.state|=8|ie,0===Ze.length&&(Ze.state|=Z);try{this._read(Ze.highWaterMark)}catch(ur){nt(this,ur)}Ze.state&=~ie,Ze.reading||($e=Le(St,Ze))}return nn=$e>0?zr($e,Ze):null,null===nn?(Ze.needReadable=Ze.length<=Ze.highWaterMark,$e=0):(Ze.length-=$e,Ze.multiAwaitDrain?Ze.awaitDrainWriters.clear():Ze.awaitDrainWriters=null),0===Ze.length&&(Ze.ended||(Ze.needReadable=!0),St!==$e&&Ze.ended&&ya(this)),null!==nn&&!Ze.errorEmitted&&!Ze.closeEmitted&&(Ze.dataEmitted=!0,this.emit("data",nn)),nn},_t.prototype._read=function($e){throw new Pe("_read()")},_t.prototype.pipe=function($e,Ze){const St=this,zt=this._readableState;1===zt.pipes.length&&(zt.multiAwaitDrain||(zt.multiAwaitDrain=!0,zt.awaitDrainWriters=new oe(zt.awaitDrainWriters?[zt.awaitDrainWriters]:[]))),zt.pipes.push($e),I("pipe count=%d opts=%j",zt.pipes.length,Ze);const ur=Ze&&!1===Ze.end||$e===$.stdout||$e===$.stderr?Gr:Zt;function Zt(){I("onend"),$e.end()}zt.endEmitted?$.nextTick(ur):St.once("end",ur),$e.on("unpipe",function ss(ri,Vi){I("onunpipe"),ri===St&&Vi&&!1===Vi.hasUnpiped&&(Vi.hasUnpiped=!0,function yc(){I("cleanup"),$e.removeListener("close",$t),$e.removeListener("finish",Vn),ro&&$e.removeListener("drain",ro),$e.removeListener("error",$o),$e.removeListener("unpipe",ss),St.removeListener("end",Zt),St.removeListener("end",Gr),St.removeListener("data",hn),Ui=!0,ro&&zt.awaitDrainWriters&&(!$e._writableState||$e._writableState.needDrain)&&ro()}())});let ro,Ui=!1;function di(){Ui||(1===zt.pipes.length&&zt.pipes[0]===$e?(I("false write response, pause",0),zt.awaitDrainWriters=$e,zt.multiAwaitDrain=!1):zt.pipes.length>1&&zt.pipes.includes($e)&&(I("false write response, pause",zt.awaitDrainWriters.size),zt.awaitDrainWriters.add($e)),St.pause()),ro||(ro=function kn($e,Ze){return function(){const zt=$e._readableState;zt.awaitDrainWriters===Ze?(I("pipeOnDrain",1),zt.awaitDrainWriters=null):zt.multiAwaitDrain&&(I("pipeOnDrain",zt.awaitDrainWriters.size),zt.awaitDrainWriters.delete(Ze)),(!zt.awaitDrainWriters||0===zt.awaitDrainWriters.size)&&$e.listenerCount("data")&&$e.resume()}}(St,$e),$e.on("drain",ro))}function hn(ri){I("ondata");const Vi=$e.write(ri);I("dest.write",Vi),!1===Vi&&di()}function $o(ri){if(I("onerror",ri),Gr(),$e.removeListener("error",$o),0===$e.listenerCount("error")){const Vi=$e._writableState||$e._readableState;Vi&&!Vi.errorEmitted?nt($e,ri):$e.emit("error",ri)}}function $t(){$e.removeListener("finish",Vn),Gr()}function Vn(){I("onfinish"),$e.removeListener("close",$t),Gr()}function Gr(){I("unpipe"),St.unpipe($e)}return St.on("data",hn),ee($e,"error",$o),$e.once("close",$t),$e.once("finish",Vn),$e.emit("pipe",St),!0===$e.writableNeedDrain?di():zt.flowing||(I("pipe resume"),St.resume()),$e},_t.prototype.unpipe=function($e){const Ze=this._readableState;if(0===Ze.pipes.length)return this;if(!$e){const nn=Ze.pipes;Ze.pipes=[],this.pause();for(let ur=0;ur<nn.length;ur++)nn[ur].emit("unpipe",this,{hasUnpiped:!1});return this}const zt=z(Ze.pipes,$e);return-1===zt||(Ze.pipes.splice(zt,1),0===Ze.pipes.length&&this.pause(),$e.emit("unpipe",this,{hasUnpiped:!1})),this},_t.prototype.addListener=_t.prototype.on=function($e,Ze){const St=J.prototype.on.call(this,$e,Ze),zt=this._readableState;return"data"===$e?(zt.readableListening=this.listenerCount("readable")>0,!1!==zt.flowing&&this.resume()):"readable"===$e&&!zt.endEmitted&&!zt.readableListening&&(zt.readableListening=zt.needReadable=!0,zt.flowing=!1,zt.emittedReadable=!1,I("on readable",zt.length,zt.reading),zt.length?ut(this):zt.reading||$.nextTick(An,this)),St},_t.prototype.off=_t.prototype.removeListener=function($e,Ze){const St=J.prototype.removeListener.call(this,$e,Ze);return"readable"===$e&&$.nextTick(vn,this),St},_t.prototype.removeAllListeners=function($e){const Ze=J.prototype.removeAllListeners.apply(this,arguments);return("readable"===$e||void 0===$e)&&$.nextTick(vn,this),Ze},_t.prototype.resume=function(){const $e=this._readableState;return $e.flowing||(I("resume"),$e.flowing=!$e.readableListening,function Yi($e,Ze){Ze.resumeScheduled||(Ze.resumeScheduled=!0,$.nextTick(io,$e,Ze))}(this,$e)),$e[Se]=!1,this},_t.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Se]=!0,this},_t.prototype.wrap=function($e){let Ze=!1;$e.on("data",zt=>{!this.push(zt)&&$e.pause&&(Ze=!0,$e.pause())}),$e.on("end",()=>{this.push(null)}),$e.on("error",zt=>{nt(this,zt)}),$e.on("close",()=>{this.destroy()}),$e.on("destroy",()=>{this.destroy()}),this._read=()=>{Ze&&$e.resume&&(Ze=!1,$e.resume())};const St=G($e);for(let zt=1;zt<St.length;zt++){const nn=St[zt];void 0===this[nn]&&"function"==typeof $e[nn]&&(this[nn]=$e[nn].bind($e))}return this},_t.prototype[k]=function(){return rs(this)},_t.prototype.iterator=function($e){return void 0!==$e&&je($e,"options"),rs(this,$e)},L(_t.prototype,{readable:{__proto__:null,get(){const $e=this._readableState;return!(!$e||!1===$e.readable||$e.destroyed||$e.errorEmitted||$e.endEmitted)},set($e){this._readableState&&(this._readableState.readable=!!$e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function($e){this._readableState&&(this._readableState.flowing=$e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set($e){this._readableState&&(this._readableState.destroyed=$e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),L(Dt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Se]},set($e){this[Se]=!!$e}}}),_t._fromList=zr,_t.from=function($e,Ze){return de(_t,$e,Ze)},_t.fromWeb=function($e,Ze){return Hs().newStreamReadableFromReadableStream($e,Ze)},_t.toWeb=function($e,Ze){return Hs().newReadableStreamFromStreamReadable($e,Ze)},_t.wrap=function($e,Ze){var St,zt;return new _t({objectMode:null===(St=null!==(zt=$e.readableObjectMode)&&void 0!==zt?zt:$e.objectMode)||void 0===St||St,...Ze,destroy(nn,ur){le.destroyer($e,nn),ur(nn)}}).wrap($e)}},8782:(Ue,_e,S)=>{"use strict";const{MathFloor:Q,NumberIsInteger:C}=S(6305),{validateInteger:$}=S(2120),{ERR_INVALID_ARG_VALUE:z}=S(4370).codes;let X=16384,_=16;function L(F){return F?_:X}Ue.exports={getHighWaterMark:function P(F,oe,x,k){const se=function E(F,oe,x){return null!=F.highWaterMark?F.highWaterMark:oe?F[x]:null}(oe,k,x);if(null!=se){if(!C(se)||se<0)throw new z(k?`options.${x}`:"options.highWaterMark",se);return Q(se)}return L(F.objectMode)},getDefaultHighWaterMark:L,setDefaultHighWaterMark:function G(F,oe){$(oe,"value",0),F?_=oe:X=oe}}},123:(Ue,_e,S)=>{"use strict";const{ObjectSetPrototypeOf:Q,Symbol:C}=S(6305);Ue.exports=E;const{ERR_METHOD_NOT_IMPLEMENTED:$}=S(4370).codes,z=S(5931),{getHighWaterMark:X}=S(8782);Q(E.prototype,z.prototype),Q(E,z);const _=C("kCallback");function E(P){if(!(this instanceof E))return new E(P);const F=P?X(this,P,"readableHighWaterMark",!0):null;0===F&&(P={...P,highWaterMark:null,readableHighWaterMark:F,writableHighWaterMark:P.writableHighWaterMark||0}),z.call(this,P),this._readableState.sync=!1,this[_]=null,P&&("function"==typeof P.transform&&(this._transform=P.transform),"function"==typeof P.flush&&(this._flush=P.flush)),this.on("prefinish",G)}function L(P){"function"!=typeof this._flush||this.destroyed?(this.push(null),P&&P()):this._flush((F,oe)=>{F?P?P(F):this.destroy(F):(null!=oe&&this.push(oe),this.push(null),P&&P())})}function G(){this._final!==L&&L.call(this)}E.prototype._final=L,E.prototype._transform=function(P,F,oe){throw new $("_transform()")},E.prototype._write=function(P,F,oe){const x=this._readableState,k=this._writableState,se=x.length;this._transform(P,F,(Y,J)=>{Y?oe(Y):(null!=J&&this.push(J),k.ended||se===x.length||x.length<x.highWaterMark?oe():this[_]=oe)})},E.prototype._read=function(){if(this[_]){const P=this[_];this[_]=null,P()}}},5428:(Ue,_e,S)=>{"use strict";const{SymbolAsyncIterator:Q,SymbolIterator:C,SymbolFor:$}=S(6305),z=$("nodejs.stream.destroyed"),X=$("nodejs.stream.errored"),_=$("nodejs.stream.readable"),E=$("nodejs.stream.writable"),L=$("nodejs.stream.disturbed"),G=$("nodejs.webstream.isClosedPromise"),P=$("nodejs.webstream.controllerErrorFunction");function F(de,Ae=!1){var nt;return!(!de||"function"!=typeof de.pipe||"function"!=typeof de.on||Ae&&("function"!=typeof de.pause||"function"!=typeof de.resume)||de._writableState&&!1===(null===(nt=de._readableState)||void 0===nt?void 0:nt.readable)||de._writableState&&!de._readableState)}function oe(de){var Ae;return!(!de||"function"!=typeof de.write||"function"!=typeof de.on||de._readableState&&!1===(null===(Ae=de._writableState)||void 0===Ae?void 0:Ae.writable))}function k(de){return de&&(de._readableState||de._writableState||"function"==typeof de.write&&"function"==typeof de.on||"function"==typeof de.pipe&&"function"==typeof de.on)}function se(de){return!(!de||k(de)||"function"!=typeof de.pipeThrough||"function"!=typeof de.getReader||"function"!=typeof de.cancel)}function Y(de){return!(!de||k(de)||"function"!=typeof de.getWriter||"function"!=typeof de.abort)}function J(de){return!(!de||k(de)||"object"!=typeof de.readable||"object"!=typeof de.writable)}function B(de){if(!k(de))return null;const mt=de._writableState||de._readableState;return!!(de.destroyed||de[z]||null!=mt&&mt.destroyed)}function b(de){if(!oe(de))return null;if(!0===de.writableEnded)return!0;const Ae=de._writableState;return(null==Ae||!Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)}function le(de,Ae){if(!F(de))return null;const nt=de._readableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.endEmitted?null:!!(nt.endEmitted||!1===Ae&&!0===nt.ended&&0===nt.length))}function j(de){return de&&null!=de[_]?de[_]:"boolean"!=typeof de?.readable?null:!B(de)&&F(de)&&de.readable&&!le(de)}function Ie(de){return de&&null!=de[E]?de[E]:"boolean"!=typeof de?.writable?null:!B(de)&&oe(de)&&de.writable&&!b(de)}function Qe(de){return"boolean"==typeof de._closed&&"boolean"==typeof de._defaultKeepAlive&&"boolean"==typeof de._removedConnection&&"boolean"==typeof de._removedContLen}function qe(de){return"boolean"==typeof de._sent100&&Qe(de)}Ue.exports={isDestroyed:B,kIsDestroyed:z,isDisturbed:function Se(de){var Ae;return!(!de||!(null!==(Ae=de[L])&&void 0!==Ae?Ae:de.readableDidRead||de.readableAborted))},kIsDisturbed:L,isErrored:function Be(de){var Ae,nt,mt,Ke,fe,R,A,ie,Z,Ve;return!(!de||!(null!==(Ae=null!==(nt=null!==(mt=null!==(Ke=null!==(fe=null!==(R=de[X])&&void 0!==R?R:de.readableErrored)&&void 0!==fe?fe:de.writableErrored)&&void 0!==Ke?Ke:null===(A=de._readableState)||void 0===A?void 0:A.errorEmitted)&&void 0!==mt?mt:null===(ie=de._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==nt?nt:null===(Z=de._readableState)||void 0===Z?void 0:Z.errored)&&void 0!==Ae?Ae:null!==(Ve=de._writableState)&&void 0!==Ve&&Ve.errored))},kIsErrored:X,isReadable:j,kIsReadable:_,kIsClosedPromise:G,kControllerErrorFunction:P,kIsWritable:E,isClosed:function He(de){if(!k(de))return null;if("boolean"==typeof de.closed)return de.closed;const Ae=de._writableState,nt=de._readableState;return"boolean"==typeof Ae?.closed||"boolean"==typeof nt?.closed?Ae?.closed||nt?.closed:"boolean"==typeof de._closed&&Qe(de)?de._closed:null},isDuplexNodeStream:function x(de){return!(!de||"function"!=typeof de.pipe||!de._readableState||"function"!=typeof de.on||"function"!=typeof de.write)},isFinished:function ae(de,Ae){return k(de)?!!B(de)||!(!1!==Ae?.readable&&j(de)||!1!==Ae?.writable&&Ie(de)):null},isIterable:function W(de,Ae){return null!=de&&(!0===Ae?"function"==typeof de[Q]:!1===Ae?"function"==typeof de[C]:"function"==typeof de[Q]||"function"==typeof de[C])},isReadableNodeStream:F,isReadableStream:se,isReadableEnded:function T(de){if(!F(de))return null;if(!0===de.readableEnded)return!0;const Ae=de._readableState;return!(!Ae||Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)},isReadableFinished:le,isReadableErrored:function Pe(de){var Ae,nt;return k(de)?de.readableErrored?de.readableErrored:null!==(Ae=null===(nt=de._readableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ae?Ae:null:null},isNodeStream:k,isWebStream:function ee(de){return se(de)||Y(de)||J(de)},isWritable:Ie,isWritableNodeStream:oe,isWritableStream:Y,isWritableEnded:b,isWritableFinished:function I(de,Ae){if(!oe(de))return null;if(!0===de.writableFinished)return!0;const nt=de._writableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.finished?null:!!(nt.finished||!1===Ae&&!0===nt.ended&&0===nt.length))},isWritableErrored:function xe(de){var Ae,nt;return k(de)?de.writableErrored?de.writableErrored:null!==(Ae=null===(nt=de._writableState)||void 0===nt?void 0:nt.errored)&&void 0!==Ae?Ae:null:null},isServerRequest:function Ce(de){var Ae;return"boolean"==typeof de._consuming&&"boolean"==typeof de._dumped&&void 0===(null===(Ae=de.req)||void 0===Ae?void 0:Ae.upgradeOrConnect)},isServerResponse:qe,willEmitClose:function je(de){if(!k(de))return null;const mt=de._writableState||de._readableState;return!mt&&qe(de)||!!(mt&&mt.autoDestroy&&mt.emitClose&&!1===mt.closed)},isTransformStream:J}},9764:(Ue,_e,S)=>{const Q=S(42),{ArrayPrototypeSlice:C,Error:$,FunctionPrototypeSymbolHasInstance:z,ObjectDefineProperty:X,ObjectDefineProperties:_,ObjectSetPrototypeOf:E,StringPrototypeToLowerCase:L,Symbol:G,SymbolHasInstance:P}=S(6305);Ue.exports=qe,qe.WritableState=He;const{EventEmitter:F}=S(2016),oe=S(900).Stream,{Buffer:x}=S(1657),k=S(5601),{addAbortSignal:se}=S(9987),{getHighWaterMark:Y,getDefaultHighWaterMark:J}=S(8782),{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_MULTIPLE_CALLBACK:B,ERR_STREAM_CANNOT_PIPE:b,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:le,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:Ie}=S(4370).codes,{errorOrDestroy:ae}=k;function xe(){}E(qe.prototype,oe.prototype),E(qe,oe);const Pe=G("kOnFinished");function He(ne,V,M){"boolean"!=typeof M&&(M=V instanceof S(5931)),this.objectMode=!(!ne||!ne.objectMode),M&&(this.objectMode=this.objectMode||!(!ne||!ne.writableObjectMode)),this.highWaterMark=ne?Y(this,ne,"writableHighWaterMark",M):J(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(ne&&!1===ne.decodeStrings),this.defaultEncoding=ne&&ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=de.bind(void 0,V),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Qe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ne||!1!==ne.emitClose,this.autoDestroy=!ne||!1!==ne.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Pe]=[]}function Qe(ne){ne.buffered=[],ne.bufferedIndex=0,ne.allBuffers=!0,ne.allNoop=!0}function qe(ne){const V=this instanceof S(5931);if(!V&&!z(qe,this))return new qe(ne);this._writableState=new He(ne,this,V),ne&&("function"==typeof ne.write&&(this._write=ne.write),"function"==typeof ne.writev&&(this._writev=ne.writev),"function"==typeof ne.destroy&&(this._destroy=ne.destroy),"function"==typeof ne.final&&(this._final=ne.final),"function"==typeof ne.construct&&(this._construct=ne.construct),ne.signal&&se(ne.signal,this)),oe.call(this,ne),k.construct(this,()=>{const M=this._writableState;M.writing||Ke(this,M),ie(this,M)})}function Ce(ne,V,M,O){const he=ne._writableState;if("function"==typeof M)O=M,M=he.defaultEncoding;else{if(M){if("buffer"!==M&&!x.isEncoding(M))throw new Ie(M)}else M=he.defaultEncoding;"function"!=typeof O&&(O=xe)}if(null===V)throw new le;if(!he.objectMode)if("string"==typeof V)!1!==he.decodeStrings&&(V=x.from(V,M),M="buffer");else if(V instanceof x)M="buffer";else{if(!oe._isUint8Array(V))throw new ee("chunk",["string","Buffer","Uint8Array"],V);V=oe._uint8ArrayToBuffer(V),M="buffer"}let We;return he.ending?We=new j:he.destroyed&&(We=new I("write")),We?(Q.nextTick(O,We),ae(ne,We,!0),We):(he.pendingcb++,function je(ne,V,M,O,he){const We=V.objectMode?1:M.length;V.length+=We;const Ee=V.length<V.highWaterMark;return Ee||(V.needDrain=!0),V.writing||V.corked||V.errored||!V.constructed?(V.buffered.push({chunk:M,encoding:O,callback:he}),V.allBuffers&&"buffer"!==O&&(V.allBuffers=!1),V.allNoop&&he!==xe&&(V.allNoop=!1)):(V.writelen=We,V.writecb=he,V.writing=!0,V.sync=!0,ne._write(M,O,V.onwrite),V.sync=!1),Ee&&!V.errored&&!V.destroyed}(ne,he,V,M,O))}function Se(ne,V,M,O,he,We,Ee){V.writelen=O,V.writecb=Ee,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new I("write")):M?ne._writev(he,V.onwrite):ne._write(he,We,V.onwrite),V.sync=!1}function Be(ne,V,M,O){--V.pendingcb,O(M),mt(V),ae(ne,M)}function de(ne,V){const M=ne._writableState,O=M.sync,he=M.writecb;"function"==typeof he?(M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0,V?(M.errored||(M.errored=V),ne._readableState&&!ne._readableState.errored&&(ne._readableState.errored=V),O?Q.nextTick(Be,ne,M,V,he):Be(ne,M,V,he)):(M.buffered.length>M.bufferedIndex&&Ke(ne,M),O?null!==M.afterWriteTickInfo&&M.afterWriteTickInfo.cb===he?M.afterWriteTickInfo.count++:(M.afterWriteTickInfo={count:1,cb:he,stream:ne,state:M},Q.nextTick(Ae,M.afterWriteTickInfo)):nt(ne,M,1,he))):ae(ne,new B)}function Ae({stream:ne,state:V,count:M,cb:O}){return V.afterWriteTickInfo=null,nt(ne,V,M,O)}function nt(ne,V,M,O){for(!V.ending&&!ne.destroyed&&0===V.length&&V.needDrain&&(V.needDrain=!1,ne.emit("drain"));M-- >0;)V.pendingcb--,O();V.destroyed&&mt(V),ie(ne,V)}function mt(ne){if(ne.writing)return;for(let he=ne.bufferedIndex;he<ne.buffered.length;++he){var V;const{chunk:We,callback:Ee}=ne.buffered[he];ne.length-=ne.objectMode?1:We.length,Ee(null!==(V=ne.errored)&&void 0!==V?V:new I("write"))}const M=ne[Pe].splice(0);for(let he=0;he<M.length;he++){var O;M[he](null!==(O=ne.errored)&&void 0!==O?O:new I("end"))}Qe(ne)}function Ke(ne,V){if(V.corked||V.bufferProcessing||V.destroyed||!V.constructed)return;const{buffered:M,bufferedIndex:O,objectMode:he}=V,We=M.length-O;if(!We)return;let Ee=O;if(V.bufferProcessing=!0,We>1&&ne._writev){V.pendingcb-=We-1;const Re=V.allNoop?xe:bt=>{for(let Dt=Ee;Dt<M.length;++Dt)M[Dt].callback(bt)},ct=V.allNoop&&0===Ee?M:C(M,Ee);ct.allBuffers=V.allBuffers,Se(ne,V,!0,V.length,ct,"",Re),Qe(V)}else{do{const{chunk:Re,encoding:ct,callback:bt}=M[Ee];M[Ee++]=null,Se(ne,V,!1,he?1:Re.length,Re,ct,bt)}while(Ee<M.length&&!V.writing);Ee===M.length?Qe(V):Ee>256?(M.splice(0,Ee),V.bufferedIndex=0):V.bufferedIndex=Ee}V.bufferProcessing=!1}function fe(ne){return ne.ending&&!ne.destroyed&&ne.constructed&&0===ne.length&&!ne.errored&&0===ne.buffered.length&&!ne.finished&&!ne.writing&&!ne.errorEmitted&&!ne.closeEmitted}function ie(ne,V,M){fe(V)&&(function A(ne,V){!V.prefinished&&!V.finalCalled&&("function"!=typeof ne._final||V.destroyed?(V.prefinished=!0,ne.emit("prefinish")):(V.finalCalled=!0,function R(ne,V){let M=!1;function O(he){if(M)ae(ne,he??B());else if(M=!0,V.pendingcb--,he){const We=V[Pe].splice(0);for(let Ee=0;Ee<We.length;Ee++)We[Ee](he);ae(ne,he,V.sync)}else fe(V)&&(V.prefinished=!0,ne.emit("prefinish"),V.pendingcb++,Q.nextTick(Z,ne,V))}V.sync=!0,V.pendingcb++;try{ne._final(O)}catch(he){O(he)}V.sync=!1}(ne,V)))}(ne,V),0===V.pendingcb&&(M?(V.pendingcb++,Q.nextTick((O,he)=>{fe(he)?Z(O,he):he.pendingcb--},ne,V)):fe(V)&&(V.pendingcb++,Z(ne,V))))}function Z(ne,V){V.pendingcb--,V.finished=!0;const M=V[Pe].splice(0);for(let O=0;O<M.length;O++)M[O]();if(ne.emit("finish"),V.autoDestroy){const O=ne._readableState;(!O||O.autoDestroy&&(O.endEmitted||!1===O.readable))&&ne.destroy()}}He.prototype.getBuffer=function(){return C(this.buffered,this.bufferedIndex)},X(He.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),X(qe,P,{__proto__:null,value:function(ne){return!!z(this,ne)||this===qe&&ne&&ne._writableState instanceof He}}),qe.prototype.pipe=function(){ae(this,new b)},qe.prototype.write=function(ne,V,M){return!0===Ce(this,ne,V,M)},qe.prototype.cork=function(){this._writableState.corked++},qe.prototype.uncork=function(){const ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||Ke(this,ne))},qe.prototype.setDefaultEncoding=function(V){if("string"==typeof V&&(V=L(V)),!x.isEncoding(V))throw new Ie(V);return this._writableState.defaultEncoding=V,this},qe.prototype._write=function(ne,V,M){if(!this._writev)throw new W("_write()");this._writev([{chunk:ne,encoding:V}],M)},qe.prototype._writev=null,qe.prototype.end=function(ne,V,M){const O=this._writableState;let he;if("function"==typeof ne?(M=ne,ne=null,V=null):"function"==typeof V&&(M=V,V=null),null!=ne){const We=Ce(this,ne,V);We instanceof $&&(he=We)}return O.corked&&(O.corked=1,this.uncork()),he||(O.errored||O.ending?O.finished?he=new T("end"):O.destroyed&&(he=new I("end")):(O.ending=!0,ie(this,O,!0),O.ended=!0)),"function"==typeof M&&(he||O.finished?Q.nextTick(M,he):O[Pe].push(M)),this},_(qe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(ne){this._writableState&&(this._writableState.destroyed=ne)}},writable:{__proto__:null,get(){const ne=this._writableState;return!(!ne||!1===ne.writable||ne.destroyed||ne.errored||ne.ending||ne.ended)},set(ne){this._writableState&&(this._writableState.writable=!!ne)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const ne=this._writableState;return!!ne&&!ne.destroyed&&!ne.ending&&ne.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Ve=k.destroy;let Je;function ue(){return void 0===Je&&(Je={}),Je}qe.prototype.destroy=function(ne,V){const M=this._writableState;return!M.destroyed&&(M.bufferedIndex<M.buffered.length||M[Pe].length)&&Q.nextTick(mt,M),Ve.call(this,ne,V),this},qe.prototype._undestroy=k.undestroy,qe.prototype._destroy=function(ne,V){V(ne)},qe.prototype[F.captureRejectionSymbol]=function(ne){this.destroy(ne)},qe.fromWeb=function(ne,V){return ue().newStreamWritableFromWritableStream(ne,V)},qe.toWeb=function(ne){return ue().newWritableStreamFromStreamWritable(ne)}},2120:(Ue,_e,S)=>{"use strict";const{ArrayIsArray:Q,ArrayPrototypeIncludes:C,ArrayPrototypeJoin:$,ArrayPrototypeMap:z,NumberIsInteger:X,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:E,NumberMIN_SAFE_INTEGER:L,NumberParseInt:G,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:F,String:oe,StringPrototypeToUpperCase:x,StringPrototypeTrim:k}=S(6305),{hideStackFrames:se,codes:{ERR_SOCKET_BAD_PORT:Y,ERR_INVALID_ARG_TYPE:J,ERR_INVALID_ARG_VALUE:ee,ERR_OUT_OF_RANGE:W,ERR_UNKNOWN_SIGNAL:B}}=S(4370),{normalizeEncoding:b}=S(2656),{isAsyncFunction:I,isArrayBufferView:T}=S(2656).types,le={},ae=/^[0-7]+$/,He=se((Ee,Re,ct=L,bt=E)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!X(Ee))throw new W(Re,"an integer",Ee);if(Ee<ct||Ee>bt)throw new W(Re,`>= ${ct} && <= ${bt}`,Ee)}),Qe=se((Ee,Re,ct=-2147483648,bt=2147483647)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!X(Ee))throw new W(Re,"an integer",Ee);if(Ee<ct||Ee>bt)throw new W(Re,`>= ${ct} && <= ${bt}`,Ee)}),qe=se((Ee,Re,ct=!1)=>{if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(!X(Ee))throw new W(Re,"an integer",Ee);const bt=ct?1:0,Dt=4294967295;if(Ee<bt||Ee>Dt)throw new W(Re,`>= ${bt} && <= ${Dt}`,Ee)});function Ce(Ee,Re){if("string"!=typeof Ee)throw new J(Re,"string",Ee)}const Se=se((Ee,Re,ct)=>{if(!C(ct,Ee)){const Dt="must be one of: "+$(z(ct,_t=>"string"==typeof _t?`'${_t}'`:oe(_t)),", ");throw new ee(Re,Ee,Dt)}});function Be(Ee,Re){if("boolean"!=typeof Ee)throw new J(Re,"boolean",Ee)}function de(Ee,Re,ct){return null!=Ee&&P(Ee,Re)?Ee[Re]:ct}const Ae=se((Ee,Re,ct=null)=>{const bt=de(ct,"allowArray",!1),Dt=de(ct,"allowFunction",!1);if(!de(ct,"nullable",!1)&&null===Ee||!bt&&Q(Ee)||"object"!=typeof Ee&&(!Dt||"function"!=typeof Ee))throw new J(Re,"Object",Ee)}),nt=se((Ee,Re)=>{if(null!=Ee&&"object"!=typeof Ee&&"function"!=typeof Ee)throw new J(Re,"a dictionary",Ee)}),mt=se((Ee,Re,ct=0)=>{if(!Q(Ee))throw new J(Re,"Array",Ee);if(Ee.length<ct)throw new ee(Re,Ee,`must be longer than ${ct}`)}),ie=se((Ee,Re="buffer")=>{if(!T(Ee))throw new J(Re,["Buffer","TypedArray","DataView"],Ee)}),Je=se((Ee,Re)=>{if(void 0!==Ee&&(null===Ee||"object"!=typeof Ee||!("aborted"in Ee)))throw new J(Re,"AbortSignal",Ee)}),ue=se((Ee,Re)=>{if("function"!=typeof Ee)throw new J(Re,"Function",Ee)}),ne=se((Ee,Re)=>{if("function"!=typeof Ee||I(Ee))throw new J(Re,"Function",Ee)}),V=se((Ee,Re)=>{if(void 0!==Ee)throw new J(Re,"undefined",Ee)}),O=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(Ee,Re){if(typeof Ee>"u"||!F(O,Ee))throw new ee(Re,Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ue.exports={isInt32:function j(Ee){return Ee===(0|Ee)},isUint32:function Ie(Ee){return Ee===Ee>>>0},parseFileMode:function Pe(Ee,Re,ct){if(typeof Ee>"u"&&(Ee=ct),"string"==typeof Ee){if(null===F(ae,Ee))throw new ee(Re,Ee,"must be a 32-bit unsigned integer or an octal string");Ee=G(Ee,8)}return qe(Ee,Re),Ee},validateArray:mt,validateStringArray:function Ke(Ee,Re){mt(Ee,Re);for(let ct=0;ct<Ee.length;ct++)Ce(Ee[ct],`${Re}[${ct}]`)},validateBooleanArray:function fe(Ee,Re){mt(Ee,Re);for(let ct=0;ct<Ee.length;ct++)Be(Ee[ct],`${Re}[${ct}]`)},validateAbortSignalArray:function R(Ee,Re){mt(Ee,Re);for(let ct=0;ct<Ee.length;ct++){const bt=Ee[ct],Dt=`${Re}[${ct}]`;if(null==bt)throw new J(Dt,"AbortSignal",bt);Je(bt,Dt)}},validateBoolean:Be,validateBuffer:ie,validateDictionary:nt,validateEncoding:function Z(Ee,Re){const ct=b(Re),bt=Ee.length;if("hex"===ct&&bt%2!=0)throw new ee("encoding",Re,`is invalid for data of length ${bt}`)},validateFunction:ue,validateInt32:Qe,validateInteger:He,validateNumber:function je(Ee,Re,ct=void 0,bt){if("number"!=typeof Ee)throw new J(Re,"number",Ee);if(null!=ct&&Ee<ct||null!=bt&&Ee>bt||(null!=ct||null!=bt)&&_(Ee))throw new W(Re,`${null!=ct?`>= ${ct}`:""}${null!=ct&&null!=bt?" && ":""}${null!=bt?`<= ${bt}`:""}`,Ee)},validateObject:Ae,validateOneOf:Se,validatePlainFunction:ne,validatePort:function Ve(Ee,Re="Port",ct=!0){if("number"!=typeof Ee&&"string"!=typeof Ee||"string"==typeof Ee&&0===k(Ee).length||+Ee!=+Ee>>>0||Ee>65535||0===Ee&&!ct)throw new Y(Re,Ee,ct);return 0|Ee},validateSignalName:function A(Ee,Re="signal"){if(Ce(Ee,Re),void 0===le[Ee])throw void 0!==le[x(Ee)]?new B(Ee+" (signals must use all capital letters)"):new B(Ee)},validateString:Ce,validateUint32:qe,validateUndefined:V,validateUnion:function M(Ee,Re,ct){if(!C(ct,Ee))throw new J(Re,`('${$(ct,"|")}')`,Ee)},validateAbortSignal:Je,validateLinkHeaderValue:function We(Ee){if("string"==typeof Ee)return he(Ee,"hints"),Ee;if(Q(Ee)){const Re=Ee.length;let ct="";if(0===Re)return ct;for(let bt=0;bt<Re;bt++){const Dt=Ee[bt];he(Dt,"hints"),ct+=Dt,bt!==Re-1&&(ct+=", ")}return ct}throw new ee("hints",Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(Ue,_e,S)=>{"use strict";const Q=S(8110),C=S(16),$=Q.Readable.destroy;Ue.exports=Q.Readable,Ue.exports._uint8ArrayToBuffer=Q._uint8ArrayToBuffer,Ue.exports._isUint8Array=Q._isUint8Array,Ue.exports.isDisturbed=Q.isDisturbed,Ue.exports.isErrored=Q.isErrored,Ue.exports.isReadable=Q.isReadable,Ue.exports.Readable=Q.Readable,Ue.exports.Writable=Q.Writable,Ue.exports.Duplex=Q.Duplex,Ue.exports.Transform=Q.Transform,Ue.exports.PassThrough=Q.PassThrough,Ue.exports.addAbortSignal=Q.addAbortSignal,Ue.exports.finished=Q.finished,Ue.exports.destroy=Q.destroy,Ue.exports.destroy=$,Ue.exports.pipeline=Q.pipeline,Ue.exports.compose=Q.compose,Object.defineProperty(Q,"promises",{configurable:!0,enumerable:!0,get:()=>C}),Ue.exports.Stream=Q.Stream,Ue.exports.default=Ue.exports},4370:(Ue,_e,S)=>{"use strict";const{format:Q,inspect:C,AggregateError:$}=S(2656),z=globalThis.AggregateError||$,X=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],E=/^([A-Z][a-z0-9]*)+$/,G={};function P(J,ee){if(!J)throw new G.ERR_INTERNAL_ASSERTION(ee)}function F(J){let ee="",W=J.length;const B="-"===J[0]?1:0;for(;W>=B+4;W-=3)ee=`_${J.slice(W-3,W)}${ee}`;return`${J.slice(0,W)}${ee}`}function x(J,ee,W){W||(W=Error);class B extends W{constructor(...I){super(function oe(J,ee,W){if("function"==typeof ee)return P(ee.length<=W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${ee.length}).`),ee(...W);const B=(ee.match(/%[dfijoOs]/g)||[]).length;return P(B===W.length,`Code: ${J}; The provided arguments length (${W.length}) does not match the required ones (${B}).`),0===W.length?ee:Q(ee,...W)}(J,ee,I))}toString(){return`${this.name} [${J}]: ${this.message}`}}Object.defineProperties(B.prototype,{name:{value:W.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${J}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),B.prototype.code=J,B.prototype[X]=!0,G[J]=B}function k(J){return Object.defineProperty(J,"name",{value:"__node_internal_"+J.name}),J}class Y extends Error{constructor(ee="The operation was aborted",W=void 0){if(void 0!==W&&"object"!=typeof W)throw new G.ERR_INVALID_ARG_TYPE("options","Object",W);super(ee,W),this.code="ABORT_ERR",this.name="AbortError"}}x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(J,ee,W)=>{P("string"==typeof J,"'name' must be a string"),Array.isArray(ee)||(ee=[ee]);let B="The ";J.endsWith(" argument")?B+=`${J} `:B+=`"${J}" ${J.includes(".")?"property":"argument"} `,B+="must be ";const b=[],I=[],T=[];for(const j of ee)P("string"==typeof j,"All expected entries have to be of type string"),_.includes(j)?b.push(j.toLowerCase()):E.test(j)?I.push(j):(P("object"!==j,'The value "object" should be written as "Object"'),T.push(j));if(I.length>0){const j=b.indexOf("object");-1!==j&&(b.splice(b,j,1),I.push("Object"))}if(b.length>0){switch(b.length){case 1:B+=`of type ${b[0]}`;break;case 2:B+=`one of type ${b[0]} or ${b[1]}`;break;default:{const j=b.pop();B+=`one of type ${b.join(", ")}, or ${j}`}}(I.length>0||T.length>0)&&(B+=" or ")}if(I.length>0){switch(I.length){case 1:B+=`an instance of ${I[0]}`;break;case 2:B+=`an instance of ${I[0]} or ${I[1]}`;break;default:{const j=I.pop();B+=`an instance of ${I.join(", ")}, or ${j}`}}T.length>0&&(B+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(B+="an "),B+=`${T[0]}`;break;case 2:B+=`one of ${T[0]} or ${T[1]}`;break;default:{const j=T.pop();B+=`one of ${T.join(", ")}, or ${j}`}}if(null==W)B+=`. Received ${W}`;else if("function"==typeof W&&W.name)B+=`. Received function ${W.name}`;else if("object"==typeof W){var le;null!==(le=W.constructor)&&void 0!==le&&le.name?B+=`. Received an instance of ${W.constructor.name}`:B+=`. Received ${C(W,{depth:-1})}`}else{let j=C(W,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),B+=`. Received type ${typeof W} (${j})`}return B},TypeError),x("ERR_INVALID_ARG_VALUE",(J,ee,W="is invalid")=>{let B=C(ee);return B.length>128&&(B=B.slice(0,128)+"..."),`The ${J.includes(".")?"property":"argument"} '${J}' ${W}. Received ${B}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(J,ee,W)=>{var B;return`Expected ${J} to be returned from the "${ee}" function but got ${null!=W&&null!==(B=W.constructor)&&void 0!==B&&B.name?`instance of ${W.constructor.name}`:"type "+typeof W}.`},TypeError),x("ERR_MISSING_ARGS",(...J)=>{let ee;P(J.length>0,"At least one arg needs to be specified");const W=J.length;switch(J=(Array.isArray(J)?J:[J]).map(B=>`"${B}"`).join(" or "),W){case 1:ee+=`The ${J[0]} argument`;break;case 2:ee+=`The ${J[0]} and ${J[1]} arguments`;break;default:{const B=J.pop();ee+=`The ${J.join(", ")}, and ${B} arguments`}}return`${ee} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(J,ee,W)=>{let B;return P(ee,'Missing "range" argument'),Number.isInteger(W)&&Math.abs(W)>2**32?B=F(String(W)):"bigint"==typeof W?(B=String(W),(W>2n**32n||W<-(2n**32n))&&(B=F(B)),B+="n"):B=C(W),`The value of "${J}" is out of range. It must be ${ee}. Received ${B}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ue.exports={AbortError:Y,aggregateTwoErrors:k(function se(J,ee){if(J&&ee&&J!==ee){if(Array.isArray(ee.errors))return ee.errors.push(J),ee;const W=new z([ee,J],ee.message);return W.code=ee.code,W}return J||ee}),hideStackFrames:k,codes:G}},6305:Ue=>{"use strict";Ue.exports={ArrayIsArray:_e=>Array.isArray(_e),ArrayPrototypeIncludes:(_e,S)=>_e.includes(S),ArrayPrototypeIndexOf:(_e,S)=>_e.indexOf(S),ArrayPrototypeJoin:(_e,S)=>_e.join(S),ArrayPrototypeMap:(_e,S)=>_e.map(S),ArrayPrototypePop:(_e,S)=>_e.pop(S),ArrayPrototypePush:(_e,S)=>_e.push(S),ArrayPrototypeSlice:(_e,S,Q)=>_e.slice(S,Q),Error,FunctionPrototypeCall:(_e,S,...Q)=>_e.call(S,...Q),FunctionPrototypeSymbolHasInstance:(_e,S)=>Function.prototype[Symbol.hasInstance].call(_e,S),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(_e,S)=>Object.defineProperties(_e,S),ObjectDefineProperty:(_e,S,Q)=>Object.defineProperty(_e,S,Q),ObjectGetOwnPropertyDescriptor:(_e,S)=>Object.getOwnPropertyDescriptor(_e,S),ObjectKeys:_e=>Object.keys(_e),ObjectSetPrototypeOf:(_e,S)=>Object.setPrototypeOf(_e,S),Promise,PromisePrototypeCatch:(_e,S)=>_e.catch(S),PromisePrototypeThen:(_e,S,Q)=>_e.then(S,Q),PromiseReject:_e=>Promise.reject(_e),PromiseResolve:_e=>Promise.resolve(_e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(_e,S)=>_e.test(S),SafeSet:Set,String,StringPrototypeSlice:(_e,S,Q)=>_e.slice(S,Q),StringPrototypeToLowerCase:_e=>_e.toLowerCase(),StringPrototypeToUpperCase:_e=>_e.toUpperCase(),StringPrototypeTrim:_e=>_e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(_e,S,Q)=>_e.set(S,Q),Boolean,Uint8Array}},2656:(Ue,_e,S)=>{"use strict";var Q=S(7156).default;const C=S(1657),{kResistStopPropagation:$,SymbolDispose:z}=S(6305),X=globalThis.AbortSignal||S(3982).AbortSignal,_=globalThis.AbortController||S(3982).AbortController,E=Object.getPrototypeOf(Q(function*(){})).constructor,L=globalThis.Blob||C.Blob,G=typeof L<"u"?function(k){return k instanceof L}:function(k){return!1},P=(x,k)=>{if(void 0!==x&&(null===x||"object"!=typeof x||!("aborted"in x)))throw new ERR_INVALID_ARG_TYPE(k,"AbortSignal",x)};class oe extends Error{constructor(k){if(!Array.isArray(k))throw new TypeError("Expected input to be an Array, got "+typeof k);let se="";for(let Y=0;Y<k.length;Y++)se+=`    ${k[Y].stack}\n`;super(se),this.name="AggregateError",this.errors=k}}Ue.exports={AggregateError:oe,kEmptyObject:Object.freeze({}),once(x){let k=!1;return function(...se){k||(k=!0,x.apply(this,se))}},createDeferredPromise:function(){let x,k;return{promise:new Promise((Y,J)=>{x=Y,k=J}),resolve:x,reject:k}},promisify:x=>new Promise((k,se)=>{x((Y,...J)=>Y?se(Y):k(...J))}),debuglog:()=>function(){},format:(x,...k)=>x.replace(/%([sdifj])/g,function(...[se,Y]){const J=k.shift();return"f"===Y?J.toFixed(6):"j"===Y?JSON.stringify(J):"s"===Y&&"object"==typeof J?`${J.constructor!==Object?J.constructor.name:""} {}`.trim():J.toString()}),inspect(x){switch(typeof x){case"string":if(x.includes("'")){if(!x.includes('"'))return`"${x}"`;if(!x.includes("`")&&!x.includes("${"))return`\`${x}\``}return`'${x}'`;case"number":return isNaN(x)?"NaN":Object.is(x,-0)?String(x):x;case"bigint":return`${String(x)}n`;case"boolean":case"undefined":return String(x);case"object":return"{}"}},types:{isAsyncFunction:x=>x instanceof E,isArrayBufferView:x=>ArrayBuffer.isView(x)},isBlob:G,deprecate:(x,k)=>x,addAbortListener:S(2016).addAbortListener||function(k,se){if(void 0===k)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",k);let Y;return P(k,"signal"),((x,k)=>{if("function"!=typeof x)throw new ERR_INVALID_ARG_TYPE("listener","Function",x)})(se),k.aborted?queueMicrotask(()=>se()):(k.addEventListener("abort",se,{__proto__:null,once:!0,[$]:!0}),Y=()=>{k.removeEventListener("abort",se)}),{__proto__:null,[z](){var J;null===(J=Y)||void 0===J||J()}}},AbortSignalAny:X.any||function(k){if(1===k.length)return k[0];const se=new _,Y=()=>se.abort();return k.forEach(J=>{P(J,"signals"),J.addEventListener("abort",Y,{once:!0})}),se.signal.addEventListener("abort",()=>{k.forEach(J=>J.removeEventListener("abort",Y))},{once:!0}),se.signal}},Ue.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(Ue,_e,S)=>{const{Buffer:Q}=S(1657),{ObjectDefineProperty:C,ObjectKeys:$,ReflectApply:z}=S(6305),{promisify:{custom:X}}=S(2656),{streamReturningOperators:_,promiseReturningOperators:E}=S(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:L}}=S(4370),G=S(7721),{setDefaultHighWaterMark:P,getDefaultHighWaterMark:F}=S(8782),{pipeline:oe}=S(4514),{destroyer:x}=S(5601),k=S(4618),Y=S(16),J=S(5428),ee=Ue.exports=S(900).Stream;ee.isDestroyed=J.isDestroyed,ee.isDisturbed=J.isDisturbed,ee.isErrored=J.isErrored,ee.isReadable=J.isReadable,ee.isWritable=J.isWritable,ee.Readable=S(8383);for(const b of $(_)){let T=function(...le){if(new.target)throw L();return ee.Readable.from(z(I,this,le))};const I=_[b];C(T,"name",{__proto__:null,value:I.name}),C(T,"length",{__proto__:null,value:I.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const b of $(E)){let T=function(...j){if(new.target)throw L();return z(I,this,j)};const I=E[b];C(T,"name",{__proto__:null,value:I.name}),C(T,"length",{__proto__:null,value:I.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}ee.Writable=S(9764),ee.Duplex=S(5931),ee.Transform=S(123),ee.PassThrough=S(6973),ee.pipeline=oe;const{addAbortSignal:W}=S(9987);ee.addAbortSignal=W,ee.finished=k,ee.destroy=x,ee.compose=G,ee.setDefaultHighWaterMark=P,ee.getDefaultHighWaterMark=F,C(ee,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>Y}),C(oe,X,{__proto__:null,enumerable:!0,get:()=>Y.pipeline}),C(k,X,{__proto__:null,enumerable:!0,get:()=>Y.finished}),ee.Stream=ee,ee._isUint8Array=function(I){return I instanceof Uint8Array},ee._uint8ArrayToBuffer=function(I){return Q.from(I.buffer,I.byteOffset,I.byteLength)}},16:(Ue,_e,S)=>{"use strict";const{ArrayPrototypePop:Q,Promise:C}=S(6305),{isIterable:$,isNodeStream:z,isWebStream:X}=S(5428),{pipelineImpl:_}=S(4514),{finished:E}=S(4618);S(8110),Ue.exports={finished:E,pipeline:function L(...G){return new C((P,F)=>{let oe,x;const k=G[G.length-1];if(k&&"object"==typeof k&&!z(k)&&!$(k)&&!X(k)){const se=Q(G);oe=se.signal,x=se.end}_(G,(se,Y)=>{se?F(se):P(Y)},{signal:oe,end:x})})}}},1657:(Ue,_e,S)=>{"use strict";const Q=S(9919),C=S(2601),$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_e.Buffer=E,_e.SlowBuffer=function ee(pe){return+pe!=pe&&(pe=0),E.alloc(+pe)},_e.INSPECT_MAX_BYTES=50;const z=2147483647;function _(pe){if(pe>z)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const H=new Uint8Array(pe);return Object.setPrototypeOf(H,E.prototype),H}function E(pe,H,te){if("number"==typeof pe){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return F(pe)}return L(pe,H,te)}function L(pe,H,te){if("string"==typeof pe)return function oe(pe,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!E.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const te=0|W(pe,H);let Le=_(te);const it=Le.write(pe,H);return it!==te&&(Le=Le.slice(0,it)),Le}(pe,H);if(ArrayBuffer.isView(pe))return function k(pe){if(ct(pe,Uint8Array)){const H=new Uint8Array(pe);return se(H.buffer,H.byteOffset,H.byteLength)}return x(pe)}(pe);if(null==pe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(ct(pe,ArrayBuffer)||pe&&ct(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ct(pe,SharedArrayBuffer)||pe&&ct(pe.buffer,SharedArrayBuffer)))return se(pe,H,te);if("number"==typeof pe)throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=pe.valueOf&&pe.valueOf();if(null!=Le&&Le!==pe)return E.from(Le,H,te);const it=function Y(pe){if(E.isBuffer(pe)){const H=0|J(pe.length),te=_(H);return 0===te.length||pe.copy(te,0,0,H),te}return void 0!==pe.length?"number"!=typeof pe.length||bt(pe.length)?_(0):x(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?x(pe.data):void 0}(pe);if(it)return it;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof pe[Symbol.toPrimitive])return E.from(pe[Symbol.toPrimitive]("string"),H,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}function G(pe){if("number"!=typeof pe)throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function F(pe){return G(pe),_(pe<0?0:0|J(pe))}function x(pe){const H=pe.length<0?0:0|J(pe.length),te=_(H);for(let Le=0;Le<H;Le+=1)te[Le]=255&pe[Le];return te}function se(pe,H,te){if(H<0||pe.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<H+(te||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return Le=void 0===H&&void 0===te?new Uint8Array(pe):void 0===te?new Uint8Array(pe,H):new Uint8Array(pe,H,te),Object.setPrototypeOf(Le,E.prototype),Le}function J(pe){if(pe>=z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+z.toString(16)+" bytes");return 0|pe}function W(pe,H){if(E.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||ct(pe,ArrayBuffer))return pe.byteLength;if("string"!=typeof pe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const te=pe.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===te)return 0;let it=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return O(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return Ee(pe).length;default:if(it)return Le?-1:O(pe).length;H=(""+H).toLowerCase(),it=!0}}function B(pe,H,te){let Le=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(H>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return Se(this,H,te);case"utf8":case"utf-8":return He(this,H,te);case"ascii":return Ce(this,H,te);case"latin1":case"binary":return je(this,H,te);case"base64":return Pe(this,H,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,H,te);default:if(Le)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),Le=!0}}function b(pe,H,te){const Le=pe[H];pe[H]=pe[te],pe[te]=Le}function I(pe,H,te,Le,it){if(0===pe.length)return-1;if("string"==typeof te?(Le=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),bt(te=+te)&&(te=it?0:pe.length-1),te<0&&(te=pe.length+te),te>=pe.length){if(it)return-1;te=pe.length-1}else if(te<0){if(!it)return-1;te=0}if("string"==typeof H&&(H=E.from(H,Le)),E.isBuffer(H))return 0===H.length?-1:T(pe,H,te,Le,it);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?it?Uint8Array.prototype.indexOf.call(pe,H,te):Uint8Array.prototype.lastIndexOf.call(pe,H,te):T(pe,[H],te,Le,it);throw new TypeError("val must be string, number or Buffer")}function T(pe,H,te,Le,it){let kn,ut=1,Et=pe.length,tn=H.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(pe.length<2||H.length<2)return-1;ut=2,Et/=2,tn/=2,te/=2}function Pn(vn,An){return 1===ut?vn[An]:vn.readUInt16BE(An*ut)}if(it){let vn=-1;for(kn=te;kn<Et;kn++)if(Pn(pe,kn)===Pn(H,-1===vn?0:kn-vn)){if(-1===vn&&(vn=kn),kn-vn+1===tn)return vn*ut}else-1!==vn&&(kn-=kn-vn),vn=-1}else for(te+tn>Et&&(te=Et-tn),kn=te;kn>=0;kn--){let vn=!0;for(let An=0;An<tn;An++)if(Pn(pe,kn+An)!==Pn(H,An)){vn=!1;break}if(vn)return kn}return-1}function le(pe,H,te,Le){te=Number(te)||0;const it=pe.length-te;Le?(Le=Number(Le))>it&&(Le=it):Le=it;const ut=H.length;let Et;for(Le>ut/2&&(Le=ut/2),Et=0;Et<Le;++Et){const tn=parseInt(H.substr(2*Et,2),16);if(bt(tn))return Et;pe[te+Et]=tn}return Et}function j(pe,H,te,Le){return Re(O(H,pe.length-te),pe,te,Le)}function Ie(pe,H,te,Le){return Re(function he(pe){const H=[];for(let te=0;te<pe.length;++te)H.push(255&pe.charCodeAt(te));return H}(H),pe,te,Le)}function ae(pe,H,te,Le){return Re(Ee(H),pe,te,Le)}function xe(pe,H,te,Le){return Re(function We(pe,H){let te,Le,it;const ut=[];for(let Et=0;Et<pe.length&&!((H-=2)<0);++Et)te=pe.charCodeAt(Et),Le=te>>8,it=te%256,ut.push(it),ut.push(Le);return ut}(H,pe.length-te),pe,te,Le)}function Pe(pe,H,te){return Q.fromByteArray(0===H&&te===pe.length?pe:pe.slice(H,te))}function He(pe,H,te){te=Math.min(pe.length,te);const Le=[];let it=H;for(;it<te;){const ut=pe[it];let Et=null,tn=ut>239?4:ut>223?3:ut>191?2:1;if(it+tn<=te){let Pn,kn,vn,An;switch(tn){case 1:ut<128&&(Et=ut);break;case 2:Pn=pe[it+1],128==(192&Pn)&&(An=(31&ut)<<6|63&Pn,An>127&&(Et=An));break;case 3:Pn=pe[it+1],kn=pe[it+2],128==(192&Pn)&&128==(192&kn)&&(An=(15&ut)<<12|(63&Pn)<<6|63&kn,An>2047&&(An<55296||An>57343)&&(Et=An));break;case 4:Pn=pe[it+1],kn=pe[it+2],vn=pe[it+3],128==(192&Pn)&&128==(192&kn)&&128==(192&vn)&&(An=(15&ut)<<18|(63&Pn)<<12|(63&kn)<<6|63&vn,An>65535&&An<1114112&&(Et=An))}}null===Et?(Et=65533,tn=1):Et>65535&&(Et-=65536,Le.push(Et>>>10&1023|55296),Et=56320|1023&Et),Le.push(Et),it+=tn}return function qe(pe){const H=pe.length;if(H<=Qe)return String.fromCharCode.apply(String,pe);let te="",Le=0;for(;Le<H;)te+=String.fromCharCode.apply(String,pe.slice(Le,Le+=Qe));return te}(Le)}_e.kMaxLength=z,!(E.TYPED_ARRAY_SUPPORT=function X(){try{const pe=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(pe,H),42===pe.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}}),E.poolSize=8192,E.from=function(pe,H,te){return L(pe,H,te)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array),E.alloc=function(pe,H,te){return function P(pe,H,te){return G(pe),pe<=0?_(pe):void 0!==H?"string"==typeof te?_(pe).fill(H,te):_(pe).fill(H):_(pe)}(pe,H,te)},E.allocUnsafe=function(pe){return F(pe)},E.allocUnsafeSlow=function(pe){return F(pe)},E.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==E.prototype},E.compare=function(H,te){if(ct(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),ct(te,Uint8Array)&&(te=E.from(te,te.offset,te.byteLength)),!E.isBuffer(H)||!E.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===te)return 0;let Le=H.length,it=te.length;for(let ut=0,Et=Math.min(Le,it);ut<Et;++ut)if(H[ut]!==te[ut]){Le=H[ut],it=te[ut];break}return Le<it?-1:it<Le?1:0},E.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(H,te){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return E.alloc(0);let Le;if(void 0===te)for(te=0,Le=0;Le<H.length;++Le)te+=H[Le].length;const it=E.allocUnsafe(te);let ut=0;for(Le=0;Le<H.length;++Le){let Et=H[Le];if(ct(Et,Uint8Array))ut+Et.length>it.length?(E.isBuffer(Et)||(Et=E.from(Et)),Et.copy(it,ut)):Uint8Array.prototype.set.call(it,Et,ut);else{if(!E.isBuffer(Et))throw new TypeError('"list" argument must be an Array of Buffers');Et.copy(it,ut)}ut+=Et.length}return it},E.byteLength=W,E.prototype._isBuffer=!0,E.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let te=0;te<H;te+=2)b(this,te,te+1);return this},E.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let te=0;te<H;te+=4)b(this,te,te+3),b(this,te+1,te+2);return this},E.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let te=0;te<H;te+=8)b(this,te,te+7),b(this,te+1,te+6),b(this,te+2,te+5),b(this,te+3,te+4);return this},E.prototype.toLocaleString=E.prototype.toString=function(){const H=this.length;return 0===H?"":0===arguments.length?He(this,0,H):B.apply(this,arguments)},E.prototype.equals=function(H){if(!E.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===E.compare(this,H)},E.prototype.inspect=function(){let H="";const te=_e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(H+=" ... "),"<Buffer "+H+">"},$&&(E.prototype[$]=E.prototype.inspect),E.prototype.compare=function(H,te,Le,it,ut){if(ct(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),!E.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===te&&(te=0),void 0===Le&&(Le=H?H.length:0),void 0===it&&(it=0),void 0===ut&&(ut=this.length),te<0||Le>H.length||it<0||ut>this.length)throw new RangeError("out of range index");if(it>=ut&&te>=Le)return 0;if(it>=ut)return-1;if(te>=Le)return 1;if(this===H)return 0;let Et=(ut>>>=0)-(it>>>=0),tn=(Le>>>=0)-(te>>>=0);const Pn=Math.min(Et,tn),kn=this.slice(it,ut),vn=H.slice(te,Le);for(let An=0;An<Pn;++An)if(kn[An]!==vn[An]){Et=kn[An],tn=vn[An];break}return Et<tn?-1:tn<Et?1:0},E.prototype.includes=function(H,te,Le){return-1!==this.indexOf(H,te,Le)},E.prototype.indexOf=function(H,te,Le){return I(this,H,te,Le,!0)},E.prototype.lastIndexOf=function(H,te,Le){return I(this,H,te,Le,!1)},E.prototype.write=function(H,te,Le,it){if(void 0===te)it="utf8",Le=this.length,te=0;else if(void 0===Le&&"string"==typeof te)it=te,Le=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(Le)?(Le>>>=0,void 0===it&&(it="utf8")):(it=Le,Le=void 0)}const ut=this.length-te;if((void 0===Le||Le>ut)&&(Le=ut),H.length>0&&(Le<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");it||(it="utf8");let Et=!1;for(;;)switch(it){case"hex":return le(this,H,te,Le);case"utf8":case"utf-8":return j(this,H,te,Le);case"ascii":case"latin1":case"binary":return Ie(this,H,te,Le);case"base64":return ae(this,H,te,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,H,te,Le);default:if(Et)throw new TypeError("Unknown encoding: "+it);it=(""+it).toLowerCase(),Et=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function Ce(pe,H,te){let Le="";te=Math.min(pe.length,te);for(let it=H;it<te;++it)Le+=String.fromCharCode(127&pe[it]);return Le}function je(pe,H,te){let Le="";te=Math.min(pe.length,te);for(let it=H;it<te;++it)Le+=String.fromCharCode(pe[it]);return Le}function Se(pe,H,te){const Le=pe.length;(!H||H<0)&&(H=0),(!te||te<0||te>Le)&&(te=Le);let it="";for(let ut=H;ut<te;++ut)it+=Dt[pe[ut]];return it}function Be(pe,H,te){const Le=pe.slice(H,te);let it="";for(let ut=0;ut<Le.length-1;ut+=2)it+=String.fromCharCode(Le[ut]+256*Le[ut+1]);return it}function de(pe,H,te){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+H>te)throw new RangeError("Trying to access beyond buffer length")}function Ae(pe,H,te,Le,it,ut){if(!E.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>it||H<ut)throw new RangeError('"value" argument is out of bounds');if(te+Le>pe.length)throw new RangeError("Index out of range")}function nt(pe,H,te,Le,it){Je(H,Le,it,pe,te,7);let ut=Number(H&BigInt(4294967295));pe[te++]=ut,ut>>=8,pe[te++]=ut,ut>>=8,pe[te++]=ut,ut>>=8,pe[te++]=ut;let Et=Number(H>>BigInt(32)&BigInt(4294967295));return pe[te++]=Et,Et>>=8,pe[te++]=Et,Et>>=8,pe[te++]=Et,Et>>=8,pe[te++]=Et,te}function mt(pe,H,te,Le,it){Je(H,Le,it,pe,te,7);let ut=Number(H&BigInt(4294967295));pe[te+7]=ut,ut>>=8,pe[te+6]=ut,ut>>=8,pe[te+5]=ut,ut>>=8,pe[te+4]=ut;let Et=Number(H>>BigInt(32)&BigInt(4294967295));return pe[te+3]=Et,Et>>=8,pe[te+2]=Et,Et>>=8,pe[te+1]=Et,Et>>=8,pe[te]=Et,te+8}function Ke(pe,H,te,Le,it,ut){if(te+Le>pe.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function fe(pe,H,te,Le,it){return H=+H,te>>>=0,it||Ke(pe,0,te,4),C.write(pe,H,te,Le,23,4),te+4}function R(pe,H,te,Le,it){return H=+H,te>>>=0,it||Ke(pe,0,te,8),C.write(pe,H,te,Le,52,8),te+8}E.prototype.slice=function(H,te){const Le=this.length;(H=~~H)<0?(H+=Le)<0&&(H=0):H>Le&&(H=Le),(te=void 0===te?Le:~~te)<0?(te+=Le)<0&&(te=0):te>Le&&(te=Le),te<H&&(te=H);const it=this.subarray(H,te);return Object.setPrototypeOf(it,E.prototype),it},E.prototype.readUintLE=E.prototype.readUIntLE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H],ut=1,Et=0;for(;++Et<te&&(ut*=256);)it+=this[H+Et]*ut;return it},E.prototype.readUintBE=E.prototype.readUIntBE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H+--te],ut=1;for(;te>0&&(ut*=256);)it+=this[H+--te]*ut;return it},E.prototype.readUint8=E.prototype.readUInt8=function(H,te){return H>>>=0,te||de(H,1,this.length),this[H]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(H,te){return H>>>=0,te||de(H,2,this.length),this[H]|this[H+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(H,te){return H>>>=0,te||de(H,2,this.length),this[H]<<8|this[H+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(H,te){return H>>>=0,te||de(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(H,te){return H>>>=0,te||de(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},E.prototype.readBigUInt64LE=_t(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=te+256*this[++H]+65536*this[++H]+this[++H]*2**24,ut=this[++H]+256*this[++H]+65536*this[++H]+Le*2**24;return BigInt(it)+(BigInt(ut)<<BigInt(32))}),E.prototype.readBigUInt64BE=_t(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=te*2**24+65536*this[++H]+256*this[++H]+this[++H],ut=this[++H]*2**24+65536*this[++H]+256*this[++H]+Le;return(BigInt(it)<<BigInt(32))+BigInt(ut)}),E.prototype.readIntLE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=this[H],ut=1,Et=0;for(;++Et<te&&(ut*=256);)it+=this[H+Et]*ut;return ut*=128,it>=ut&&(it-=Math.pow(2,8*te)),it},E.prototype.readIntBE=function(H,te,Le){H>>>=0,te>>>=0,Le||de(H,te,this.length);let it=te,ut=1,Et=this[H+--it];for(;it>0&&(ut*=256);)Et+=this[H+--it]*ut;return ut*=128,Et>=ut&&(Et-=Math.pow(2,8*te)),Et},E.prototype.readInt8=function(H,te){return H>>>=0,te||de(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},E.prototype.readInt16LE=function(H,te){H>>>=0,te||de(H,2,this.length);const Le=this[H]|this[H+1]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt16BE=function(H,te){H>>>=0,te||de(H,2,this.length);const Le=this[H+1]|this[H]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt32LE=function(H,te){return H>>>=0,te||de(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},E.prototype.readInt32BE=function(H,te){return H>>>=0,te||de(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},E.prototype.readBigInt64LE=_t(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];return(void 0===te||void 0===Le)&&ne(H,this.length-8),(BigInt(this[H+4]+256*this[H+5]+65536*this[H+6]+(Le<<24))<<BigInt(32))+BigInt(te+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),E.prototype.readBigInt64BE=_t(function(H){ue(H>>>=0,"offset");const te=this[H],Le=this[H+7];(void 0===te||void 0===Le)&&ne(H,this.length-8);const it=(te<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(it)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+Le)}),E.prototype.readFloatLE=function(H,te){return H>>>=0,te||de(H,4,this.length),C.read(this,H,!0,23,4)},E.prototype.readFloatBE=function(H,te){return H>>>=0,te||de(H,4,this.length),C.read(this,H,!1,23,4)},E.prototype.readDoubleLE=function(H,te){return H>>>=0,te||de(H,8,this.length),C.read(this,H,!0,52,8)},E.prototype.readDoubleBE=function(H,te){return H>>>=0,te||de(H,8,this.length),C.read(this,H,!1,52,8)},E.prototype.writeUintLE=E.prototype.writeUIntLE=function(H,te,Le,it){H=+H,te>>>=0,Le>>>=0,it||Ae(this,H,te,Le,Math.pow(2,8*Le)-1,0);let ut=1,Et=0;for(this[te]=255&H;++Et<Le&&(ut*=256);)this[te+Et]=H/ut&255;return te+Le},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(H,te,Le,it){H=+H,te>>>=0,Le>>>=0,it||Ae(this,H,te,Le,Math.pow(2,8*Le)-1,0);let ut=Le-1,Et=1;for(this[te+ut]=255&H;--ut>=0&&(Et*=256);)this[te+ut]=H/Et&255;return te+Le},E.prototype.writeUint8=E.prototype.writeUInt8=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,1,255,0),this[te]=255&H,te+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,65535,0),this[te]=255&H,this[te+1]=H>>>8,te+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,65535,0),this[te]=H>>>8,this[te+1]=255&H,te+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,4294967295,0),this[te+3]=H>>>24,this[te+2]=H>>>16,this[te+1]=H>>>8,this[te]=255&H,te+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,4294967295,0),this[te]=H>>>24,this[te+1]=H>>>16,this[te+2]=H>>>8,this[te+3]=255&H,te+4},E.prototype.writeBigUInt64LE=_t(function(H,te=0){return nt(this,H,te,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=_t(function(H,te=0){return mt(this,H,te,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(H,te,Le,it){if(H=+H,te>>>=0,!it){const Pn=Math.pow(2,8*Le-1);Ae(this,H,te,Le,Pn-1,-Pn)}let ut=0,Et=1,tn=0;for(this[te]=255&H;++ut<Le&&(Et*=256);)H<0&&0===tn&&0!==this[te+ut-1]&&(tn=1),this[te+ut]=(H/Et>>0)-tn&255;return te+Le},E.prototype.writeIntBE=function(H,te,Le,it){if(H=+H,te>>>=0,!it){const Pn=Math.pow(2,8*Le-1);Ae(this,H,te,Le,Pn-1,-Pn)}let ut=Le-1,Et=1,tn=0;for(this[te+ut]=255&H;--ut>=0&&(Et*=256);)H<0&&0===tn&&0!==this[te+ut+1]&&(tn=1),this[te+ut]=(H/Et>>0)-tn&255;return te+Le},E.prototype.writeInt8=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,1,127,-128),H<0&&(H=255+H+1),this[te]=255&H,te+1},E.prototype.writeInt16LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,32767,-32768),this[te]=255&H,this[te+1]=H>>>8,te+2},E.prototype.writeInt16BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,2,32767,-32768),this[te]=H>>>8,this[te+1]=255&H,te+2},E.prototype.writeInt32LE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,2147483647,-2147483648),this[te]=255&H,this[te+1]=H>>>8,this[te+2]=H>>>16,this[te+3]=H>>>24,te+4},E.prototype.writeInt32BE=function(H,te,Le){return H=+H,te>>>=0,Le||Ae(this,H,te,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[te]=H>>>24,this[te+1]=H>>>16,this[te+2]=H>>>8,this[te+3]=255&H,te+4},E.prototype.writeBigInt64LE=_t(function(H,te=0){return nt(this,H,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=_t(function(H,te=0){return mt(this,H,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeFloatLE=function(H,te,Le){return fe(this,H,te,!0,Le)},E.prototype.writeFloatBE=function(H,te,Le){return fe(this,H,te,!1,Le)},E.prototype.writeDoubleLE=function(H,te,Le){return R(this,H,te,!0,Le)},E.prototype.writeDoubleBE=function(H,te,Le){return R(this,H,te,!1,Le)},E.prototype.copy=function(H,te,Le,it){if(!E.isBuffer(H))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!it&&0!==it&&(it=this.length),te>=H.length&&(te=H.length),te||(te=0),it>0&&it<Le&&(it=Le),it===Le||0===H.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(it<0)throw new RangeError("sourceEnd out of bounds");it>this.length&&(it=this.length),H.length-te<it-Le&&(it=H.length-te+Le);const ut=it-Le;return this===H&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(te,Le,it):Uint8Array.prototype.set.call(H,this.subarray(Le,it),te),ut},E.prototype.fill=function(H,te,Le,it){if("string"==typeof H){if("string"==typeof te?(it=te,te=0,Le=this.length):"string"==typeof Le&&(it=Le,Le=this.length),void 0!==it&&"string"!=typeof it)throw new TypeError("encoding must be a string");if("string"==typeof it&&!E.isEncoding(it))throw new TypeError("Unknown encoding: "+it);if(1===H.length){const Et=H.charCodeAt(0);("utf8"===it&&Et<128||"latin1"===it)&&(H=Et)}}else"number"==typeof H?H&=255:"boolean"==typeof H&&(H=Number(H));if(te<0||this.length<te||this.length<Le)throw new RangeError("Out of range index");if(Le<=te)return this;let ut;if(te>>>=0,Le=void 0===Le?this.length:Le>>>0,H||(H=0),"number"==typeof H)for(ut=te;ut<Le;++ut)this[ut]=H;else{const Et=E.isBuffer(H)?H:E.from(H,it),tn=Et.length;if(0===tn)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(ut=0;ut<Le-te;++ut)this[ut+te]=Et[ut%tn]}return this};const A={};function ie(pe,H,te){A[pe]=class extends te{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,delete this.name}get code(){return pe}set code(it){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:it,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}function Z(pe){let H="",te=pe.length;const Le="-"===pe[0]?1:0;for(;te>=Le+4;te-=3)H=`_${pe.slice(te-3,te)}${H}`;return`${pe.slice(0,te)}${H}`}function Je(pe,H,te,Le,it,ut){if(pe>te||pe<H){const Et="bigint"==typeof H?"n":"";let tn;throw tn=ut>3?0===H||H===BigInt(0)?`>= 0${Et} and < 2${Et} ** ${8*(ut+1)}${Et}`:`>= -(2${Et} ** ${8*(ut+1)-1}${Et}) and < 2 ** ${8*(ut+1)-1}${Et}`:`>= ${H}${Et} and <= ${te}${Et}`,new A.ERR_OUT_OF_RANGE("value",tn,pe)}!function Ve(pe,H,te){ue(H,"offset"),(void 0===pe[H]||void 0===pe[H+te])&&ne(H,pe.length-(te+1))}(Le,it,ut)}function ue(pe,H){if("number"!=typeof pe)throw new A.ERR_INVALID_ARG_TYPE(H,"number",pe)}function ne(pe,H,te){throw Math.floor(pe)!==pe?(ue(pe,te),new A.ERR_OUT_OF_RANGE(te||"offset","an integer",pe)):H<0?new A.ERR_BUFFER_OUT_OF_BOUNDS:new A.ERR_OUT_OF_RANGE(te||"offset",`>= ${te?1:0} and <= ${H}`,pe)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(pe,H){return`The "${pe}" argument must be of type number. Received type ${typeof H}`},TypeError),ie("ERR_OUT_OF_RANGE",function(pe,H,te){let Le=`The value of "${pe}" is out of range.`,it=te;return Number.isInteger(te)&&Math.abs(te)>2**32?it=Z(String(te)):"bigint"==typeof te&&(it=String(te),(te>BigInt(2)**BigInt(32)||te<-(BigInt(2)**BigInt(32)))&&(it=Z(it)),it+="n"),Le+=` It must be ${H}. Received ${it}`,Le},RangeError);const V=/[^+/0-9A-Za-z-_]/g;function O(pe,H){let te;H=H||1/0;const Le=pe.length;let it=null;const ut=[];for(let Et=0;Et<Le;++Et){if(te=pe.charCodeAt(Et),te>55295&&te<57344){if(!it){if(te>56319){(H-=3)>-1&&ut.push(239,191,189);continue}if(Et+1===Le){(H-=3)>-1&&ut.push(239,191,189);continue}it=te;continue}if(te<56320){(H-=3)>-1&&ut.push(239,191,189),it=te;continue}te=65536+(it-55296<<10|te-56320)}else it&&(H-=3)>-1&&ut.push(239,191,189);if(it=null,te<128){if((H-=1)<0)break;ut.push(te)}else if(te<2048){if((H-=2)<0)break;ut.push(te>>6|192,63&te|128)}else if(te<65536){if((H-=3)<0)break;ut.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;ut.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return ut}function Ee(pe){return Q.toByteArray(function M(pe){if((pe=(pe=pe.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;pe.length%4!=0;)pe+="=";return pe}(pe))}function Re(pe,H,te,Le){let it;for(it=0;it<Le&&!(it+te>=H.length||it>=pe.length);++it)H[it+te]=pe[it];return it}function ct(pe,H){return pe instanceof H||null!=pe&&null!=pe.constructor&&null!=pe.constructor.name&&pe.constructor.name===H.name}function bt(pe){return pe!=pe}const Dt=function(){const pe="0123456789abcdef",H=new Array(256);for(let te=0;te<16;++te){const Le=16*te;for(let it=0;it<16;++it)H[Le+it]=pe[te]+pe[it]}return H}();function _t(pe){return typeof BigInt>"u"?Gt:pe}function Gt(){throw new Error("BigInt not supported")}},7054:function(Ue,_e,S){"use strict";var Q=this&&this.__createBinding||(Object.create?function($,z,X,_){void 0===_&&(_=X),Object.defineProperty($,_,{enumerable:!0,get:function(){return z[X]}})}:function($,z,X,_){void 0===_&&(_=X),$[_]=z[X]}),C=this&&this.__exportStar||function($,z){for(var X in $)"default"!==X&&!Object.prototype.hasOwnProperty.call(z,X)&&Q(z,$,X)};Object.defineProperty(_e,"__esModule",{value:!0}),C(S(361),_e)},361:(Ue,_e)=>{"use strict";function Q(z){const X=[];let _=0;for(;_<z.length;)switch(z[_]){case"/":if("."===z[_+1])if("."===z[_+2]){if(!$(z[_+3])){X.push([]),_++;break}X.pop(),z[_+3]||X.push([]),_+=3}else{if(!$(z[_+2])){X.push([]),_++;break}z[_+2]||X.push([]),_+=2}else X.push([]),_++;break;case"#":case"?":X.length||X.push([]),X[X.length-1].push(z.substr(_)),_=z.length;break;default:X.length||X.push([]),X[X.length-1].push(z[_]),_++}return"/"+X.map(E=>E.join("")).join("/")}function C(z,X){let _=X+1;X>=0?"/"===z[X+1]&&"/"===z[X+2]&&(_=X+3):"/"===z[0]&&"/"===z[1]&&(_=2);const E=z.indexOf("/",_);return E<0?z:z.substr(0,E)+Q(z.substr(E))}function $(z){return!z||"#"===z||"?"===z||"/"===z}Object.defineProperty(_e,"__esModule",{value:!0}),_e.removeDotSegmentsOfPath=_e.removeDotSegments=_e.resolve=void 0,_e.resolve=function S(z,X){const _=(X=X||"").indexOf("#");if(_>0&&(X=X.substr(0,_)),!z.length){if(X.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${X}' for value '${z}'`);return X}if(z.startsWith("?")){const x=X.indexOf("?");return x>0&&(X=X.substr(0,x)),X+z}if(z.startsWith("#"))return X+z;if(!X.length){const x=z.indexOf(":");if(x<0)throw new Error(`Found invalid relative IRI '${z}' for a missing baseIRI`);return C(z,x)}const E=z.indexOf(":");if(E>=0)return C(z,E);const L=X.indexOf(":");if(L<0)throw new Error(`Found invalid baseIRI '${X}' for value '${z}'`);const G=X.substr(0,L+1);if(0===z.indexOf("//"))return G+C(z,E);let P;if(X.indexOf("//",L)===L+1){if(P=X.indexOf("/",L+3),P<0)return X.length>L+3?X+"/"+C(z,E):G+C(z,E)}else if(P=X.indexOf("/",L+1),P<0)return G+C(z,E);if(0===z.indexOf("/"))return X.substr(0,P)+Q(z);let F=X.substr(P);const oe=F.lastIndexOf("/");return oe>=0&&oe<F.length-1&&(F=F.substr(0,oe+1),"."===z[0]&&"."!==z[1]&&"/"!==z[1]&&z[2]&&(z=z.substr(1))),z=Q(z=F+z),X.substr(0,P)+z},_e.removeDotSegments=Q,_e.removeDotSegmentsOfPath=C},9528:(Ue,_e,S)=>{!function(Q){Q.parser=function(R,A){return new $(R,A)},Q.SAXParser=$,Q.SAXStream=P,Q.createStream=function G(R,A){return new P(R,A)},Q.MAX_BUFFER_LENGTH=65536;var E,C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function $(R,A){if(!(this instanceof $))return new $(R,A);var ie=this;(function X(R){for(var A=0,ie=C.length;A<ie;A++)R[C[A]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=Q.MAX_BUFFER_LENGTH,ie.opt=A||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!R,ie.noscript=!(!R&&!ie.opt.noscript),ie.state=j.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?Q.XML_ENTITIES:Q.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(se)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),ae(ie,"onready")}Q.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(R){function A(){}return A.prototype=R,new A}),Object.keys||(Object.keys=function(R){var A=[];for(var ie in R)R.hasOwnProperty(ie)&&A.push(ie);return A}),$.prototype={end:function(){qe(this)},write:function fe(R){var A=this;if(this.error)throw this.error;if(A.closed)return Qe(A,"Cannot write after close. Assign an onready handler.");if(null===R)return qe(A);"object"==typeof R&&(R=R.toString());for(var ie=0,Z="";Z=Ke(R,ie++),A.c=Z,Z;)switch(A.trackPosition&&(A.position++,"\n"===Z?(A.line++,A.column=0):A.column++),A.state){case j.BEGIN:if(A.state=j.BEGIN_WHITESPACE,"\ufeff"===Z)continue;mt(A,Z);continue;case j.BEGIN_WHITESPACE:mt(A,Z);continue;case j.TEXT:if(A.sawRoot&&!A.closedRoot){for(var Ve=ie-1;Z&&"<"!==Z&&"&"!==Z;)(Z=Ke(R,ie++))&&A.trackPosition&&(A.position++,"\n"===Z?(A.line++,A.column=0):A.column++);A.textNode+=R.substring(Ve,ie-1)}"<"!==Z||A.sawRoot&&A.closedRoot&&!A.strict?(!B(Z)&&(!A.sawRoot||A.closedRoot)&&Ce(A,"Text data outside of root node."),"&"===Z?A.state=j.TEXT_ENTITY:A.textNode+=Z):(A.state=j.OPEN_WAKA,A.startTagPosition=A.position);continue;case j.SCRIPT:"<"===Z?A.state=j.SCRIPT_ENDING:A.script+=Z;continue;case j.SCRIPT_ENDING:"/"===Z?A.state=j.CLOSE_TAG:(A.script+="<"+Z,A.state=j.SCRIPT);continue;case j.OPEN_WAKA:"!"===Z?(A.state=j.SGML_DECL,A.sgmlDecl=""):B(Z)||(T(Y,Z)?(A.state=j.OPEN_TAG,A.tagName=Z):"/"===Z?(A.state=j.CLOSE_TAG,A.tagName=""):"?"===Z?(A.state=j.PROC_INST,A.procInstName=A.procInstBody=""):(Ce(A,"Unencoded <"),A.startTagPosition+1<A.position&&(Z=new Array(A.position-A.startTagPosition).join(" ")+Z),A.textNode+="<"+Z,A.state=j.TEXT));continue;case j.SGML_DECL:(A.sgmlDecl+Z).toUpperCase()===F?(xe(A,"onopencdata"),A.state=j.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+Z==="--"?(A.state=j.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+Z).toUpperCase()===oe?(A.state=j.DOCTYPE,(A.doctype||A.sawRoot)&&Ce(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):">"===Z?(xe(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=j.TEXT):(b(Z)&&(A.state=j.SGML_DECL_QUOTED),A.sgmlDecl+=Z);continue;case j.SGML_DECL_QUOTED:Z===A.q&&(A.state=j.SGML_DECL,A.q=""),A.sgmlDecl+=Z;continue;case j.DOCTYPE:">"===Z?(A.state=j.TEXT,xe(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=Z,"["===Z?A.state=j.DOCTYPE_DTD:b(Z)&&(A.state=j.DOCTYPE_QUOTED,A.q=Z));continue;case j.DOCTYPE_QUOTED:A.doctype+=Z,Z===A.q&&(A.q="",A.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:A.doctype+=Z,"]"===Z?A.state=j.DOCTYPE:b(Z)&&(A.state=j.DOCTYPE_DTD_QUOTED,A.q=Z);continue;case j.DOCTYPE_DTD_QUOTED:A.doctype+=Z,Z===A.q&&(A.state=j.DOCTYPE_DTD,A.q="");continue;case j.COMMENT:"-"===Z?A.state=j.COMMENT_ENDING:A.comment+=Z;continue;case j.COMMENT_ENDING:"-"===Z?(A.state=j.COMMENT_ENDED,A.comment=He(A.opt,A.comment),A.comment&&xe(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+Z,A.state=j.COMMENT);continue;case j.COMMENT_ENDED:">"!==Z?(Ce(A,"Malformed comment"),A.comment+="--"+Z,A.state=j.COMMENT):A.state=j.TEXT;continue;case j.CDATA:"]"===Z?A.state=j.CDATA_ENDING:A.cdata+=Z;continue;case j.CDATA_ENDING:"]"===Z?A.state=j.CDATA_ENDING_2:(A.cdata+="]"+Z,A.state=j.CDATA);continue;case j.CDATA_ENDING_2:">"===Z?(A.cdata&&xe(A,"oncdata",A.cdata),xe(A,"onclosecdata"),A.cdata="",A.state=j.TEXT):"]"===Z?A.cdata+="]":(A.cdata+="]]"+Z,A.state=j.CDATA);continue;case j.PROC_INST:"?"===Z?A.state=j.PROC_INST_ENDING:B(Z)?A.state=j.PROC_INST_BODY:A.procInstName+=Z;continue;case j.PROC_INST_BODY:if(!A.procInstBody&&B(Z))continue;"?"===Z?A.state=j.PROC_INST_ENDING:A.procInstBody+=Z;continue;case j.PROC_INST_ENDING:">"===Z?(xe(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=j.TEXT):(A.procInstBody+="?"+Z,A.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:T(J,Z)?A.tagName+=Z:(je(A),">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:(B(Z)||Ce(A,"Invalid character in tag name"),A.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:">"===Z?(de(A,!0),Ae(A)):(Ce(A,"Forward-slash in opening tag not followed by >"),A.state=j.ATTRIB);continue;case j.ATTRIB:if(B(Z))continue;">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:T(Y,Z)?(A.attribName=Z,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME:"="===Z?A.state=j.ATTRIB_VALUE:">"===Z?(Ce(A,"Attribute without value"),A.attribValue=A.attribName,Be(A),de(A)):B(Z)?A.state=j.ATTRIB_NAME_SAW_WHITE:T(J,Z)?A.attribName+=Z:Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if("="===Z)A.state=j.ATTRIB_VALUE;else{if(B(Z))continue;Ce(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",xe(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",">"===Z?de(A):T(Y,Z)?(A.attribName=Z,A.state=j.ATTRIB_NAME):(Ce(A,"Invalid attribute name"),A.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(B(Z))continue;b(Z)?(A.q=Z,A.state=j.ATTRIB_VALUE_QUOTED):(Ce(A,"Unquoted attribute value"),A.state=j.ATTRIB_VALUE_UNQUOTED,A.attribValue=Z);continue;case j.ATTRIB_VALUE_QUOTED:if(Z!==A.q){"&"===Z?A.state=j.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=Z;continue}Be(A),A.q="",A.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:B(Z)?A.state=j.ATTRIB:">"===Z?de(A):"/"===Z?A.state=j.OPEN_TAG_SLASH:T(Y,Z)?(Ce(A,"No whitespace between attributes"),A.attribName=Z,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!I(Z)){"&"===Z?A.state=j.ATTRIB_VALUE_ENTITY_U:A.attribValue+=Z;continue}Be(A),">"===Z?de(A):A.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(A.tagName)">"===Z?Ae(A):T(J,Z)?A.tagName+=Z:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=j.SCRIPT):(B(Z)||Ce(A,"Invalid tagname in closing tag"),A.state=j.CLOSE_TAG_SAW_WHITE);else{if(B(Z))continue;le(Y,Z)?A.script?(A.script+="</"+Z,A.state=j.SCRIPT):Ce(A,"Invalid tagname in closing tag."):A.tagName=Z}continue;case j.CLOSE_TAG_SAW_WHITE:if(B(Z))continue;">"===Z?Ae(A):Ce(A,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var ue,ne;switch(A.state){case j.TEXT_ENTITY:ue=j.TEXT,ne="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:ue=j.ATTRIB_VALUE_QUOTED,ne="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:ue=j.ATTRIB_VALUE_UNQUOTED,ne="attribValue"}if(";"===Z)if(A.opt.unparsedEntities){var V=nt(A);A.entity="",A.state=ue,A.write(V)}else A[ne]+=nt(A),A.entity="",A.state=ue;else T(A.entity.length?W:ee,Z)?A.entity+=Z:(Ce(A,"Invalid character in entity name"),A[ne]+="&"+A.entity+Z,A.entity="",A.state=ue);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&function z(R){for(var A=Math.max(Q.MAX_BUFFER_LENGTH,10),ie=0,Z=0,Ve=C.length;Z<Ve;Z++){var Je=R[C[Z]].length;if(Je>A)switch(C[Z]){case"textNode":Pe(R);break;case"cdata":xe(R,"oncdata",R.cdata),R.cdata="";break;case"script":xe(R,"onscript",R.script),R.script="";break;default:Qe(R,"Max buffer length exceeded: "+C[Z])}ie=Math.max(ie,Je)}R.bufferCheckPosition=Q.MAX_BUFFER_LENGTH-ie+R.position}(A),A},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(R){Pe(R),""!==R.cdata&&(xe(R,"oncdata",R.cdata),R.cdata=""),""!==R.script&&(xe(R,"onscript",R.script),R.script="")}(this)}};try{E=S(1793).Stream}catch{E=function(){}}E||(E=function(){});var L=Q.EVENTS.filter(function(R){return"error"!==R&&"end"!==R});function P(R,A){if(!(this instanceof P))return new P(R,A);E.apply(this),this._parser=new $(R,A),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(Z){ie.emit("error",Z),ie._parser.error=null},this._decoder=null,L.forEach(function(Z){Object.defineProperty(ie,"on"+Z,{get:function(){return ie._parser["on"+Z]},set:function(Ve){if(!Ve)return ie.removeAllListeners(Z),ie._parser["on"+Z]=Ve,Ve;ie.on(Z,Ve)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(E.prototype,{constructor:{value:P}})).write=function(R){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(R)){if(!this._decoder){var A=S(2024).StringDecoder;this._decoder=new A("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},P.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},P.prototype.on=function(R,A){var ie=this;return!ie._parser["on"+R]&&-1!==L.indexOf(R)&&(ie._parser["on"+R]=function(){var Z=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Z.splice(0,0,R),ie.emit.apply(ie,Z)}),E.prototype.on.call(ie,R,A)};var F="[CDATA[",oe="DOCTYPE",x="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",se={xml:x,xmlns:k},Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function B(R){return" "===R||"\n"===R||"\r"===R||"\t"===R}function b(R){return'"'===R||"'"===R}function I(R){return">"===R||B(R)}function T(R,A){return R.test(A)}function le(R,A){return!T(R,A)}var R,A,ie,j=0;for(var Ie in Q.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},Q.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Q.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Q.ENTITIES).forEach(function(R){var A=Q.ENTITIES[R],ie="number"==typeof A?String.fromCharCode(A):A;Q.ENTITIES[R]=ie}),Q.STATE)Q.STATE[Q.STATE[Ie]]=Ie;function ae(R,A,ie){R[A]&&R[A](ie)}function xe(R,A,ie){R.textNode&&Pe(R),ae(R,A,ie)}function Pe(R){R.textNode=He(R.opt,R.textNode),R.textNode&&ae(R,"ontext",R.textNode),R.textNode=""}function He(R,A){return R.trim&&(A=A.trim()),R.normalize&&(A=A.replace(/\s+/g," ")),A}function Qe(R,A){return Pe(R),R.trackPosition&&(A+="\nLine: "+R.line+"\nColumn: "+R.column+"\nChar: "+R.c),A=new Error(A),R.error=A,ae(R,"onerror",A),R}function qe(R){return R.sawRoot&&!R.closedRoot&&Ce(R,"Unclosed root tag"),R.state!==j.BEGIN&&R.state!==j.BEGIN_WHITESPACE&&R.state!==j.TEXT&&Qe(R,"Unexpected end"),Pe(R),R.c="",R.closed=!0,ae(R,"onend"),$.call(R,R.strict,R.opt),R}function Ce(R,A){if("object"!=typeof R||!(R instanceof $))throw new Error("bad call to strictFail");R.strict&&Qe(R,A)}function je(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var A=R.tags[R.tags.length-1]||R,ie=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(ie.ns=A.ns),R.attribList.length=0,xe(R,"onopentagstart",ie)}function Se(R,A){var Z=R.indexOf(":")<0?["",R]:R.split(":"),Ve=Z[0],Je=Z[1];return A&&"xmlns"===R&&(Ve="xmlns",Je=""),{prefix:Ve,local:Je}}function Be(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),-1!==R.attribList.indexOf(R.attribName)||R.tag.attributes.hasOwnProperty(R.attribName))R.attribName=R.attribValue="";else{if(R.opt.xmlns){var A=Se(R.attribName,!0),Z=A.local;if("xmlns"===A.prefix)if("xml"===Z&&R.attribValue!==x)Ce(R,"xml: prefix must be bound to "+x+"\nActual: "+R.attribValue);else if("xmlns"===Z&&R.attribValue!==k)Ce(R,"xmlns: prefix must be bound to "+k+"\nActual: "+R.attribValue);else{var Ve=R.tag,Je=R.tags[R.tags.length-1]||R;Ve.ns===Je.ns&&(Ve.ns=Object.create(Je.ns)),Ve.ns[Z]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,xe(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}}function de(R,A){if(R.opt.xmlns){var ie=R.tag,Z=Se(R.tagName);ie.prefix=Z.prefix,ie.local=Z.local,ie.uri=ie.ns[Z.prefix]||"",ie.prefix&&!ie.uri&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),ie.uri=Z.prefix),ie.ns&&(R.tags[R.tags.length-1]||R).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(ct){xe(R,"onopennamespace",{prefix:ct,uri:ie.ns[ct]})});for(var Je=0,ue=R.attribList.length;Je<ue;Je++){var ne=R.attribList[Je],V=ne[0],M=ne[1],O=Se(V,!0),he=O.prefix,Ee=""===he?"":ie.ns[he]||"",Re={name:V,value:M,prefix:he,local:O.local,uri:Ee};he&&"xmlns"!==he&&!Ee&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(he)),Re.uri=he),R.tag.attributes[V]=Re,xe(R,"onattribute",Re)}R.attribList.length=0}R.tag.isSelfClosing=!!A,R.sawRoot=!0,R.tags.push(R.tag),xe(R,"onopentag",R.tag),A||(R.state=R.noscript||"script"!==R.tagName.toLowerCase()?j.TEXT:j.SCRIPT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function Ae(R){if(!R.tagName)return Ce(R,"Weird empty close tag."),R.textNode+="</>",void(R.state=j.TEXT);if(R.script){if("script"!==R.tagName)return R.script+="</"+R.tagName+">",R.tagName="",void(R.state=j.SCRIPT);xe(R,"onscript",R.script),R.script=""}var A=R.tags.length,ie=R.tagName;R.strict||(ie=ie[R.looseCase]());for(var Z=ie;A--&&R.tags[A].name!==Z;)Ce(R,"Unexpected close tag");if(A<0)return Ce(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",void(R.state=j.TEXT);R.tagName=ie;for(var Je=R.tags.length;Je-- >A;){var ue=R.tag=R.tags.pop();R.tagName=R.tag.name,xe(R,"onclosetag",R.tagName);var ne={};for(var V in ue.ns)ne[V]=ue.ns[V];R.opt.xmlns&&ue.ns!==(R.tags[R.tags.length-1]||R).ns&&Object.keys(ue.ns).forEach(function(O){xe(R,"onclosenamespace",{prefix:O,uri:ue.ns[O]})})}0===A&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=j.TEXT}function nt(R){var Z,A=R.entity,ie=A.toLowerCase(),Ve="";return R.ENTITIES[A]?R.ENTITIES[A]:R.ENTITIES[ie]?R.ENTITIES[ie]:("#"===(A=ie).charAt(0)&&("x"===A.charAt(1)?(A=A.slice(2),Ve=(Z=parseInt(A,16)).toString(16)):(A=A.slice(1),Ve=(Z=parseInt(A,10)).toString(10))),A=A.replace(/^0+/,""),isNaN(Z)||Ve.toLowerCase()!==A?(Ce(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(Z))}function mt(R,A){"<"===A?(R.state=j.OPEN_WAKA,R.startTagPosition=R.position):B(A)||(Ce(R,"Non-whitespace before first tag."),R.textNode=A,R.state=j.TEXT)}function Ke(R,A){var ie="";return A<R.length&&(ie=R.charAt(A)),ie}j=Q.STATE,String.fromCodePoint||(R=String.fromCharCode,A=Math.floor,ie=function(){var Ve=[],ne=-1,V=arguments.length;if(!V)return"";for(var M="";++ne<V;){var O=Number(arguments[ne]);if(!isFinite(O)||O<0||O>1114111||A(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?Ve.push(O):Ve.push(55296+((O-=65536)>>10),O%1024+56320),(ne+1===V||Ve.length>16384)&&(M+=R.apply(null,Ve),Ve.length=0)}return M},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(_e)},8280:function(){!function(Ue,_e){"use strict";if(!Ue.setImmediate){var z,S=1,Q={},C=!1,$=Ue.document,se=Object.getPrototypeOf&&Object.getPrototypeOf(Ue);se=se&&se.setTimeout?se:Ue,"[object process]"==={}.toString.call(Ue.process)?function G(){z=function(Y){process.nextTick(function(){L(Y)})}}():function P(){if(Ue.postMessage&&!Ue.importScripts){var Y=!0,J=Ue.onmessage;return Ue.onmessage=function(){Y=!1},Ue.postMessage("","*"),Ue.onmessage=J,Y}}()?function F(){var Y="setImmediate$"+Math.random()+"$",J=function(ee){ee.source===Ue&&"string"==typeof ee.data&&0===ee.data.indexOf(Y)&&L(+ee.data.slice(Y.length))};Ue.addEventListener?Ue.addEventListener("message",J,!1):Ue.attachEvent("onmessage",J),z=function(ee){Ue.postMessage(Y+ee,"*")}}():Ue.MessageChannel?function oe(){var Y=new MessageChannel;Y.port1.onmessage=function(J){L(J.data)},z=function(J){Y.port2.postMessage(J)}}():$&&"onreadystatechange"in $.createElement("script")?function x(){var Y=$.documentElement;z=function(J){var ee=$.createElement("script");ee.onreadystatechange=function(){L(J),ee.onreadystatechange=null,Y.removeChild(ee),ee=null},Y.appendChild(ee)}}():function k(){z=function(Y){setTimeout(L,0,Y)}}(),se.setImmediate=function X(Y){"function"!=typeof Y&&(Y=new Function(""+Y));for(var J=new Array(arguments.length-1),ee=0;ee<J.length;ee++)J[ee]=arguments[ee+1];return Q[S]={callback:Y,args:J},z(S),S++},se.clearImmediate=_}function _(Y){delete Q[Y]}function L(Y){if(C)setTimeout(L,0,Y);else{var J=Q[Y];if(J){C=!0;try{!function E(Y){var J=Y.callback,ee=Y.args;switch(ee.length){case 0:J();break;case 1:J(ee[0]);break;case 2:J(ee[0],ee[1]);break;case 3:J(ee[0],ee[1],ee[2]);break;default:J.apply(undefined,ee)}}(J)}finally{_(Y),C=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(Ue,_e,S)=>{Ue.exports=$;var Q=S(2016).EventEmitter;function $(){Q.call(this)}S(6698)($,Q),$.Readable=S(842),$.Writable=S(7597),$.Duplex=S(2232),$.Transform=S(555),$.PassThrough=S(8226),$.finished=S(1227),$.pipeline=S(2345),$.Stream=$,$.prototype.pipe=function(z,X){var _=this;function E(k){z.writable&&!1===z.write(k)&&_.pause&&_.pause()}function L(){_.readable&&_.resume&&_.resume()}_.on("data",E),z.on("drain",L),!z._isStdio&&(!X||!1!==X.end)&&(_.on("end",P),_.on("close",F));var G=!1;function P(){G||(G=!0,z.end())}function F(){G||(G=!0,"function"==typeof z.destroy&&z.destroy())}function oe(k){if(x(),0===Q.listenerCount(this,"error"))throw k}function x(){_.removeListener("data",E),z.removeListener("drain",L),_.removeListener("end",P),_.removeListener("close",F),_.removeListener("error",oe),z.removeListener("error",oe),_.removeListener("end",x),_.removeListener("close",x),z.removeListener("close",x)}return _.on("error",oe),z.on("error",oe),_.on("end",x),_.on("close",x),z.on("close",x),z.emit("pipe",_),z}},9555:Ue=>{"use strict";var S={};function Q(_,E,L){L||(L=Error);var P=function(F){function oe(x,k,se){return F.call(this,function G(F,oe,x){return"string"==typeof E?E:E(F,oe,x)}(x,k,se))||this}return function _e(_,E){_.prototype=Object.create(E.prototype),_.prototype.constructor=_,_.__proto__=E}(oe,F),oe}(L);P.prototype.name=L.name,P.prototype.code=_,S[_]=P}function C(_,E){if(Array.isArray(_)){var L=_.length;return _=_.map(function(G){return String(G)}),L>2?"one of ".concat(E," ").concat(_.slice(0,L-1).join(", "),", or ")+_[L-1]:2===L?"one of ".concat(E," ").concat(_[0]," or ").concat(_[1]):"of ".concat(E," ").concat(_[0])}return"of ".concat(E," ").concat(String(_))}Q("ERR_INVALID_OPT_VALUE",function(_,E){return'The value "'+E+'" is invalid for option "'+_+'"'},TypeError),Q("ERR_INVALID_ARG_TYPE",function(_,E,L){var G,P;if("string"==typeof E&&function $(_,E,L){return _.substr(!L||L<0?0:+L,E.length)===E}(E,"not ")?(G="must not be",E=E.replace(/^not /,"")):G="must be",function z(_,E,L){return(void 0===L||L>_.length)&&(L=_.length),_.substring(L-E.length,L)===E}(_," argument"))P="The ".concat(_," ").concat(G," ").concat(C(E,"type"));else{var F=function X(_,E,L){return"number"!=typeof L&&(L=0),!(L+E.length>_.length)&&-1!==_.indexOf(E,L)}(_,".")?"property":"argument";P='The "'.concat(_,'" ').concat(F," ").concat(G," ").concat(C(E,"type"))}return P+". Received type ".concat(typeof L)},TypeError),Q("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Q("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),Q("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Q("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),Q("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Q("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Q("ERR_STREAM_WRITE_AFTER_END","write after end"),Q("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Q("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),Q("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ue.exports.q=S},2232:(Ue,_e,S)=>{"use strict";var Q=Object.keys||function(P){var F=[];for(var oe in P)F.push(oe);return F};Ue.exports=E;var C=S(842),$=S(7597);S(6698)(E,C);for(var z=Q($.prototype),X=0;X<z.length;X++){var _=z[X];E.prototype[_]||(E.prototype[_]=$.prototype[_])}function E(P){if(!(this instanceof E))return new E(P);C.call(this,P),$.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",L)))}function L(){this._writableState.ended||process.nextTick(G,this)}function G(P){P.end()}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(F){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=F,this._writableState.destroyed=F)}})},8226:(Ue,_e,S)=>{"use strict";Ue.exports=C;var Q=S(555);function C($){if(!(this instanceof C))return new C($);Q.call(this,$)}S(6698)(C,Q),C.prototype._transform=function($,z,X){X(null,$)}},842:(Ue,_e,S)=>{"use strict";var Q;Ue.exports=ae,ae.ReadableState=Ie,S(2016);var P,$=function(ne,V){return ne.listeners(V).length},z=S(3951),X=S(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},G=S(964);P=G&&G.debuglog?G.debuglog("stream"):function(){};var B,b,I,F=S(2998),oe=S(3992),k=S(4962).getHighWaterMark,se=S(9555).q,Y=se.ERR_INVALID_ARG_TYPE,J=se.ERR_STREAM_PUSH_AFTER_EOF,ee=se.ERR_METHOD_NOT_IMPLEMENTED,W=se.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(6698)(ae,z);var T=oe.errorOrDestroy,le=["error","close","destroy","pause","resume"];function Ie(ue,ne,V){Q=Q||S(2232),"boolean"!=typeof V&&(V=ne instanceof Q),this.objectMode=!!(ue=ue||{}).objectMode,V&&(this.objectMode=this.objectMode||!!ue.readableObjectMode),this.highWaterMark=k(this,ue,"readableHighWaterMark",V),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ue.emitClose,this.autoDestroy=!!ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ue.encoding&&(B||(B=S(2024).StringDecoder),this.decoder=new B(ue.encoding),this.encoding=ue.encoding)}function ae(ue){if(Q=Q||S(2232),!(this instanceof ae))return new ae(ue);this._readableState=new Ie(ue,this,this instanceof Q),this.readable=!0,ue&&("function"==typeof ue.read&&(this._read=ue.read),"function"==typeof ue.destroy&&(this._destroy=ue.destroy)),z.call(this)}function xe(ue,ne,V,M,O){P("readableAddChunk",ne);var We,he=ue._readableState;if(null===ne)he.reading=!1,function je(ue,ne){if(P("onEofChunk"),!ne.ended){if(ne.decoder){var V=ne.decoder.end();V&&V.length&&(ne.buffer.push(V),ne.length+=ne.objectMode?1:V.length)}ne.ended=!0,ne.sync?Se(ue):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,Be(ue)))}}(ue,he);else if(O||(We=function He(ue,ne){var V;return!function L(ue){return X.isBuffer(ue)||ue instanceof _}(ne)&&"string"!=typeof ne&&void 0!==ne&&!ue.objectMode&&(V=new Y("chunk",["string","Buffer","Uint8Array"],ne)),V}(he,ne)),We)T(ue,We);else if(he.objectMode||ne&&ne.length>0)if("string"!=typeof ne&&!he.objectMode&&Object.getPrototypeOf(ne)!==X.prototype&&(ne=function E(ue){return X.from(ue)}(ne)),M)he.endEmitted?T(ue,new W):Pe(ue,he,ne,!0);else if(he.ended)T(ue,new J);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!V?(ne=he.decoder.write(ne),he.objectMode||0!==ne.length?Pe(ue,he,ne,!1):de(ue,he)):Pe(ue,he,ne,!1)}else M||(he.reading=!1,de(ue,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function Pe(ue,ne,V,M){ne.flowing&&0===ne.length&&!ne.sync?(ne.awaitDrain=0,ue.emit("data",V)):(ne.length+=ne.objectMode?1:V.length,M?ne.buffer.unshift(V):ne.buffer.push(V),ne.needReadable&&Se(ue)),de(ue,ne)}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ne){this._readableState&&(this._readableState.destroyed=ne)}}),ae.prototype.destroy=oe.destroy,ae.prototype._undestroy=oe.undestroy,ae.prototype._destroy=function(ue,ne){ne(ue)},ae.prototype.push=function(ue,ne){var M,V=this._readableState;return V.objectMode?M=!0:"string"==typeof ue&&((ne=ne||V.defaultEncoding)!==V.encoding&&(ue=X.from(ue,ne),ne=""),M=!0),xe(this,ue,ne,!1,M)},ae.prototype.unshift=function(ue){return xe(this,ue,null,!0,!1)},ae.prototype.isPaused=function(){return!1===this._readableState.flowing},ae.prototype.setEncoding=function(ue){B||(B=S(2024).StringDecoder);var ne=new B(ue);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,M="";null!==V;)M+=ne.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==M&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var Qe=1073741824;function Ce(ue,ne){return ue<=0||0===ne.length&&ne.ended?0:ne.objectMode?1:ue!=ue?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(ue>ne.highWaterMark&&(ne.highWaterMark=function qe(ue){return ue>=Qe?ue=Qe:(ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++),ue}(ue)),ue<=ne.length?ue:ne.ended?ne.length:(ne.needReadable=!0,0))}function Se(ue){var ne=ue._readableState;P("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(P("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(Be,ue))}function Be(ue){var ne=ue._readableState;P("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&(ne.length||ne.ended)&&(ue.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,A(ue)}function de(ue,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(Ae,ue,ne))}function Ae(ue,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&0===ne.length);){var V=ne.length;if(P("maybeReadMore read 0"),ue.read(0),V===ne.length)break}ne.readingMore=!1}function mt(ue){var ne=ue._readableState;ne.readableListening=ue.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:ue.listenerCount("data")>0&&ue.resume()}function Ke(ue){P("readable nexttick read 0"),ue.read(0)}function R(ue,ne){P("resume",ne.reading),ne.reading||ue.read(0),ne.resumeScheduled=!1,ue.emit("resume"),A(ue),ne.flowing&&!ne.reading&&ue.read(0)}function A(ue){var ne=ue._readableState;for(P("flow",ne.flowing);ne.flowing&&null!==ue.read(););}function ie(ue,ne){return 0===ne.length?null:(ne.objectMode?V=ne.buffer.shift():!ue||ue>=ne.length?(V=ne.decoder?ne.buffer.join(""):1===ne.buffer.length?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):V=ne.buffer.consume(ue,ne.decoder),V);var V}function Z(ue){var ne=ue._readableState;P("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(Ve,ne,ue))}function Ve(ue,ne){if(P("endReadableNT",ue.endEmitted,ue.length),!ue.endEmitted&&0===ue.length&&(ue.endEmitted=!0,ne.readable=!1,ne.emit("end"),ue.autoDestroy)){var V=ne._writableState;(!V||V.autoDestroy&&V.finished)&&ne.destroy()}}function Je(ue,ne){for(var V=0,M=ue.length;V<M;V++)if(ue[V]===ne)return V;return-1}ae.prototype.read=function(ue){P("read",ue),ue=parseInt(ue,10);var ne=this._readableState,V=ue;if(0!==ue&&(ne.emittedReadable=!1),0===ue&&ne.needReadable&&((0!==ne.highWaterMark?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return P("read: emitReadable",ne.length,ne.ended),0===ne.length&&ne.ended?Z(this):Se(this),null;if(0===(ue=Ce(ue,ne))&&ne.ended)return 0===ne.length&&Z(this),null;var O,M=ne.needReadable;return P("need readable",M),(0===ne.length||ne.length-ue<ne.highWaterMark)&&P("length less than watermark",M=!0),ne.ended||ne.reading?P("reading or ended",M=!1):M&&(P("do read"),ne.reading=!0,ne.sync=!0,0===ne.length&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(ue=Ce(V,ne))),null===(O=ue>0?ie(ue,ne):null)?(ne.needReadable=ne.length<=ne.highWaterMark,ue=0):(ne.length-=ue,ne.awaitDrain=0),0===ne.length&&(ne.ended||(ne.needReadable=!0),V!==ue&&ne.ended&&Z(this)),null!==O&&this.emit("data",O),O},ae.prototype._read=function(ue){T(this,new ee("_read()"))},ae.prototype.pipe=function(ue,ne){var V=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=ue;break;case 1:M.pipes=[M.pipes,ue];break;default:M.pipes.push(ue)}M.pipesCount+=1,P("pipe count=%d opts=%j",M.pipesCount,ne);var he=ne&&!1===ne.end||ue===process.stdout||ue===process.stderr?H:Ee;function Ee(){P("onend"),ue.end()}M.endEmitted?process.nextTick(he):V.once("end",he),ue.on("unpipe",function We(te,Le){P("onunpipe"),te===V&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,function bt(){P("cleanup"),ue.removeListener("close",Gt),ue.removeListener("finish",pe),ue.removeListener("drain",Re),ue.removeListener("error",_t),ue.removeListener("unpipe",We),V.removeListener("end",Ee),V.removeListener("end",H),V.removeListener("data",Dt),ct=!0,M.awaitDrain&&(!ue._writableState||ue._writableState.needDrain)&&Re()}())});var Re=function nt(ue){return function(){var V=ue._readableState;P("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,0===V.awaitDrain&&$(ue,"data")&&(V.flowing=!0,A(ue))}}(V);ue.on("drain",Re);var ct=!1;function Dt(te){P("ondata");var Le=ue.write(te);P("dest.write",Le),!1===Le&&((1===M.pipesCount&&M.pipes===ue||M.pipesCount>1&&-1!==Je(M.pipes,ue))&&!ct&&(P("false write response, pause",M.awaitDrain),M.awaitDrain++),V.pause())}function _t(te){P("onerror",te),H(),ue.removeListener("error",_t),0===$(ue,"error")&&T(ue,te)}function Gt(){ue.removeListener("finish",pe),H()}function pe(){P("onfinish"),ue.removeListener("close",Gt),H()}function H(){P("unpipe"),V.unpipe(ue)}return V.on("data",Dt),function j(ue,ne,V){if("function"==typeof ue.prependListener)return ue.prependListener(ne,V);ue._events&&ue._events[ne]?Array.isArray(ue._events[ne])?ue._events[ne].unshift(V):ue._events[ne]=[V,ue._events[ne]]:ue.on(ne,V)}(ue,"error",_t),ue.once("close",Gt),ue.once("finish",pe),ue.emit("pipe",V),M.flowing||(P("pipe resume"),V.resume()),ue},ae.prototype.unpipe=function(ue){var ne=this._readableState,V={hasUnpiped:!1};if(0===ne.pipesCount)return this;if(1===ne.pipesCount)return ue&&ue!==ne.pipes||(ue||(ue=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,ue&&ue.emit("unpipe",this,V)),this;if(!ue){var M=ne.pipes,O=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var he=0;he<O;he++)M[he].emit("unpipe",this,{hasUnpiped:!1});return this}var We=Je(ne.pipes,ue);return-1===We||(ne.pipes.splice(We,1),ne.pipesCount-=1,1===ne.pipesCount&&(ne.pipes=ne.pipes[0]),ue.emit("unpipe",this,V)),this},ae.prototype.addListener=ae.prototype.on=function(ue,ne){var V=z.prototype.on.call(this,ue,ne),M=this._readableState;return"data"===ue?(M.readableListening=this.listenerCount("readable")>0,!1!==M.flowing&&this.resume()):"readable"===ue&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,P("on readable",M.length,M.reading),M.length?Se(this):M.reading||process.nextTick(Ke,this)),V},ae.prototype.removeListener=function(ue,ne){var V=z.prototype.removeListener.call(this,ue,ne);return"readable"===ue&&process.nextTick(mt,this),V},ae.prototype.removeAllListeners=function(ue){var ne=z.prototype.removeAllListeners.apply(this,arguments);return("readable"===ue||void 0===ue)&&process.nextTick(mt,this),ne},ae.prototype.resume=function(){var ue=this._readableState;return ue.flowing||(P("resume"),ue.flowing=!ue.readableListening,function fe(ue,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,process.nextTick(R,ue,ne))}(this,ue)),ue.paused=!1,this},ae.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ae.prototype.wrap=function(ue){var ne=this,V=this._readableState,M=!1;for(var O in ue.on("end",function(){if(P("wrapped end"),V.decoder&&!V.ended){var We=V.decoder.end();We&&We.length&&ne.push(We)}ne.push(null)}),ue.on("data",function(We){P("wrapped data"),V.decoder&&(We=V.decoder.write(We)),V.objectMode&&null==We||!(V.objectMode||We&&We.length)||ne.push(We)||(M=!0,ue.pause())}),ue)void 0===this[O]&&"function"==typeof ue[O]&&(this[O]=function(Ee){return function(){return ue[Ee].apply(ue,arguments)}}(O));for(var he=0;he<le.length;he++)ue.on(le[he],this.emit.bind(this,le[he]));return this._read=function(We){P("wrapped _read",We),M&&(M=!1,ue.resume())},this},"function"==typeof Symbol&&(ae.prototype[Symbol.asyncIterator]=function(){return void 0===b&&(b=S(2590)),b(this)}),Object.defineProperty(ae.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ae.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ae.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ne){this._readableState&&(this._readableState.flowing=ne)}}),ae._fromList=ie,Object.defineProperty(ae.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ae.from=function(ue,ne){return void 0===I&&(I=S(5374)),I(ae,ue,ne)})},555:(Ue,_e,S)=>{"use strict";Ue.exports=L;var Q=S(9555).q,C=Q.ERR_METHOD_NOT_IMPLEMENTED,$=Q.ERR_MULTIPLE_CALLBACK,z=Q.ERR_TRANSFORM_ALREADY_TRANSFORMING,X=Q.ERR_TRANSFORM_WITH_LENGTH_0,_=S(2232);function E(F,oe){var x=this._transformState;x.transforming=!1;var k=x.writecb;if(null===k)return this.emit("error",new $);x.writechunk=null,x.writecb=null,null!=oe&&this.push(oe),k(F);var se=this._readableState;se.reading=!1,(se.needReadable||se.length<se.highWaterMark)&&this._read(se.highWaterMark)}function L(F){if(!(this instanceof L))return new L(F);_.call(this,F),this._transformState={afterTransform:E.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,F&&("function"==typeof F.transform&&(this._transform=F.transform),"function"==typeof F.flush&&(this._flush=F.flush)),this.on("prefinish",G)}function G(){var F=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(oe,x){P(F,oe,x)})}function P(F,oe,x){if(oe)return F.emit("error",oe);if(null!=x&&F.push(x),F._writableState.length)throw new X;if(F._transformState.transforming)throw new z;return F.push(null)}S(6698)(L,_),L.prototype.push=function(F,oe){return this._transformState.needTransform=!1,_.prototype.push.call(this,F,oe)},L.prototype._transform=function(F,oe,x){x(new C("_transform()"))},L.prototype._write=function(F,oe,x){var k=this._transformState;if(k.writecb=x,k.writechunk=F,k.writeencoding=oe,!k.transforming){var se=this._readableState;(k.needTransform||se.needReadable||se.length<se.highWaterMark)&&this._read(se.highWaterMark)}},L.prototype._read=function(F){var oe=this._transformState;null===oe.writechunk||oe.transforming?oe.needTransform=!0:(oe.transforming=!0,this._transform(oe.writechunk,oe.writeencoding,oe.afterTransform))},L.prototype._destroy=function(F,oe){_.prototype._destroy.call(this,F,function(x){oe(x)})}},7597:(Ue,_e,S)=>{"use strict";function C(A){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function R(A,ie,Z){var Ve=A.entry;for(A.entry=null;Ve;){var Je=Ve.callback;ie.pendingcb--,Je(Z),Ve=Ve.next}ie.corkedRequestsFree.next=A}(ie,A)}}var $;Ue.exports=Ie,Ie.WritableState=le;var j,z={deprecate:S(496)},X=S(3951),_=S(9007).Buffer,E=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=S(3992),oe=S(4962).getHighWaterMark,x=S(9555).q,k=x.ERR_INVALID_ARG_TYPE,se=x.ERR_METHOD_NOT_IMPLEMENTED,Y=x.ERR_MULTIPLE_CALLBACK,J=x.ERR_STREAM_CANNOT_PIPE,ee=x.ERR_STREAM_DESTROYED,W=x.ERR_STREAM_NULL_VALUES,B=x.ERR_STREAM_WRITE_AFTER_END,b=x.ERR_UNKNOWN_ENCODING,I=P.errorOrDestroy;function T(){}function le(A,ie,Z){$=$||S(2232),"boolean"!=typeof Z&&(Z=ie instanceof $),this.objectMode=!!(A=A||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=oe(this,A,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===A.decodeStrings),this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Je){!function je(A,ie){var Z=A._writableState,Ve=Z.sync,Je=Z.writecb;if("function"!=typeof Je)throw new Y;if(function Ce(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}(Z),ie)!function qe(A,ie,Z,Ve,Je){--ie.pendingcb,Z?(process.nextTick(Je,Ve),process.nextTick(Ke,A,ie),A._writableState.errorEmitted=!0,I(A,Ve)):(Je(Ve),A._writableState.errorEmitted=!0,I(A,Ve),Ke(A,ie))}(A,Z,Ve,ie,Je);else{var ue=Ae(Z)||A.destroyed;!ue&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&de(A,Z),Ve?process.nextTick(Se,A,Z,ue,Je):Se(A,Z,ue,Je)}}(ie,Je)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new C(this)}function Ie(A){var ie=this instanceof($=$||S(2232));if(!ie&&!j.call(Ie,this))return new Ie(A);this._writableState=new le(A,this,ie),this.writable=!0,A&&("function"==typeof A.write&&(this._write=A.write),"function"==typeof A.writev&&(this._writev=A.writev),"function"==typeof A.destroy&&(this._destroy=A.destroy),"function"==typeof A.final&&(this._final=A.final)),X.call(this)}function Qe(A,ie,Z,Ve,Je,ue,ne){ie.writelen=Ve,ie.writecb=ne,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ee("write")):Z?A._writev(Je,ie.onwrite):A._write(Je,ue,ie.onwrite),ie.sync=!1}function Se(A,ie,Z,Ve){Z||function Be(A,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,A.emit("drain"))}(A,ie),ie.pendingcb--,Ve(),Ke(A,ie)}function de(A,ie){ie.bufferProcessing=!0;var Z=ie.bufferedRequest;if(A._writev&&Z&&Z.next){var Je=new Array(ie.bufferedRequestCount),ue=ie.corkedRequestsFree;ue.entry=Z;for(var ne=0,V=!0;Z;)Je[ne]=Z,Z.isBuf||(V=!1),Z=Z.next,ne+=1;Je.allBuffers=V,Qe(A,ie,!0,ie.length,Je,"",ue.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ue.next?(ie.corkedRequestsFree=ue.next,ue.next=null):ie.corkedRequestsFree=new C(ie),ie.bufferedRequestCount=0}else{for(;Z;){var M=Z.chunk;if(Qe(A,ie,!1,ie.objectMode?1:M.length,M,Z.encoding,Z.callback),Z=Z.next,ie.bufferedRequestCount--,ie.writing)break}null===Z&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=Z,ie.bufferProcessing=!1}function Ae(A){return A.ending&&0===A.length&&null===A.bufferedRequest&&!A.finished&&!A.writing}function nt(A,ie){A._final(function(Z){ie.pendingcb--,Z&&I(A,Z),ie.prefinished=!0,A.emit("prefinish"),Ke(A,ie)})}function Ke(A,ie){var Z=Ae(ie);if(Z&&(function mt(A,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof A._final||ie.destroyed?(ie.prefinished=!0,A.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(nt,A,ie)))}(A,ie),0===ie.pendingcb&&(ie.finished=!0,A.emit("finish"),ie.autoDestroy))){var Ve=A._readableState;(!Ve||Ve.autoDestroy&&Ve.endEmitted)&&A.destroy()}return Z}S(6698)(Ie,X),le.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,Z=[];ie;)Z.push(ie),ie=ie.next;return Z},function(){try{Object.defineProperty(le.prototype,"buffer",{get:z.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ie,Symbol.hasInstance,{value:function(ie){return!!j.call(this,ie)||this===Ie&&ie&&ie._writableState instanceof le}})):j=function(ie){return ie instanceof this},Ie.prototype.pipe=function(){I(this,new J)},Ie.prototype.write=function(A,ie,Z){var Ve=this._writableState,Je=!1,ue=!Ve.objectMode&&function G(A){return _.isBuffer(A)||A instanceof E}(A);return ue&&!_.isBuffer(A)&&(A=function L(A){return _.from(A)}(A)),"function"==typeof ie&&(Z=ie,ie=null),ue?ie="buffer":ie||(ie=Ve.defaultEncoding),"function"!=typeof Z&&(Z=T),Ve.ending?function ae(A,ie){var Z=new B;I(A,Z),process.nextTick(ie,Z)}(this,Z):(ue||function xe(A,ie,Z,Ve){var Je;return null===Z?Je=new W:"string"!=typeof Z&&!ie.objectMode&&(Je=new k("chunk",["string","Buffer"],Z)),!Je||(I(A,Je),process.nextTick(Ve,Je),!1)}(this,Ve,A,Z))&&(Ve.pendingcb++,Je=function He(A,ie,Z,Ve,Je,ue){if(!Z){var ne=function Pe(A,ie,Z){return!A.objectMode&&!1!==A.decodeStrings&&"string"==typeof ie&&(ie=_.from(ie,Z)),ie}(ie,Ve,Je);Ve!==ne&&(Z=!0,Je="buffer",Ve=ne)}var V=ie.objectMode?1:Ve.length;ie.length+=V;var M=ie.length<ie.highWaterMark;if(M||(ie.needDrain=!0),ie.writing||ie.corked){var O=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Ve,encoding:Je,isBuf:Z,callback:ue,next:null},O?O.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else Qe(A,ie,!1,V,Ve,Je,ue);return M}(this,Ve,ue,A,ie,Z)),Je},Ie.prototype.cork=function(){this._writableState.corked++},Ie.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&de(this,A))},Ie.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new b(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Ie.prototype._write=function(A,ie,Z){Z(new se("_write()"))},Ie.prototype._writev=null,Ie.prototype.end=function(A,ie,Z){var Ve=this._writableState;return"function"==typeof A?(Z=A,A=null,ie=null):"function"==typeof ie&&(Z=ie,ie=null),null!=A&&this.write(A,ie),Ve.corked&&(Ve.corked=1,this.uncork()),Ve.ending||function fe(A,ie,Z){ie.ending=!0,Ke(A,ie),Z&&(ie.finished?process.nextTick(Z):A.once("finish",Z)),ie.ended=!0,A.writable=!1}(this,Ve,Z),this},Object.defineProperty(Ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ie.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Ie.prototype.destroy=P.destroy,Ie.prototype._undestroy=P.undestroy,Ie.prototype._destroy=function(A,ie){ie(A)}},2590:(Ue,_e,S)=>{"use strict";var Q;function C(B,b,I){return b=function $(B){var b=function z(B,b){if("object"!=typeof B||null===B)return B;var I=B[Symbol.toPrimitive];if(void 0!==I){var T=I.call(B,b||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(B)}(B,"string");return"symbol"==typeof b?b:String(b)}(b),b in B?Object.defineProperty(B,b,{value:I,enumerable:!0,configurable:!0,writable:!0}):B[b]=I,B}var X=S(1227),_=Symbol("lastResolve"),E=Symbol("lastReject"),L=Symbol("error"),G=Symbol("ended"),P=Symbol("lastPromise"),F=Symbol("handlePromise"),oe=Symbol("stream");function x(B,b){return{value:B,done:b}}function k(B){var b=B[_];if(null!==b){var I=B[oe].read();null!==I&&(B[P]=null,B[_]=null,B[E]=null,b(x(I,!1)))}}function se(B){process.nextTick(k,B)}var J=Object.getPrototypeOf(function(){}),ee=Object.setPrototypeOf((C(Q={get stream(){return this[oe]},next:function(){var b=this,I=this[L];if(null!==I)return Promise.reject(I);if(this[G])return Promise.resolve(x(void 0,!0));if(this[oe].destroyed)return new Promise(function(Ie,ae){process.nextTick(function(){b[L]?ae(b[L]):Ie(x(void 0,!0))})});var le,T=this[P];if(T)le=new Promise(function Y(B,b){return function(I,T){B.then(function(){b[G]?I(x(void 0,!0)):b[F](I,T)},T)}}(T,this));else{var j=this[oe].read();if(null!==j)return Promise.resolve(x(j,!1));le=new Promise(this[F])}return this[P]=le,le}},Symbol.asyncIterator,function(){return this}),C(Q,"return",function(){var b=this;return new Promise(function(I,T){b[oe].destroy(null,function(le){le?T(le):I(x(void 0,!0))})})}),Q),J);Ue.exports=function(b){var I,T=Object.create(ee,(C(I={},oe,{value:b,writable:!0}),C(I,_,{value:null,writable:!0}),C(I,E,{value:null,writable:!0}),C(I,L,{value:null,writable:!0}),C(I,G,{value:b._readableState.endEmitted,writable:!0}),C(I,F,{value:function(j,Ie){var ae=T[oe].read();ae?(T[P]=null,T[_]=null,T[E]=null,j(x(ae,!1))):(T[_]=j,T[E]=Ie)},writable:!0}),I));return T[P]=null,X(b,function(le){if(le&&"ERR_STREAM_PREMATURE_CLOSE"!==le.code){var j=T[E];return null!==j&&(T[P]=null,T[_]=null,T[E]=null,j(le)),void(T[L]=le)}var Ie=T[_];null!==Ie&&(T[P]=null,T[_]=null,T[E]=null,Ie(x(void 0,!0))),T[G]=!0}),b.on("readable",se.bind(null,T)),T}},2998:(Ue,_e,S)=>{"use strict";function Q(se,Y){var J=Object.keys(se);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(se);Y&&(ee=ee.filter(function(W){return Object.getOwnPropertyDescriptor(se,W).enumerable})),J.push.apply(J,ee)}return J}function C(se){for(var Y=1;Y<arguments.length;Y++){var J=null!=arguments[Y]?arguments[Y]:{};Y%2?Q(Object(J),!0).forEach(function(ee){$(se,ee,J[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(J)):Q(Object(J)).forEach(function(ee){Object.defineProperty(se,ee,Object.getOwnPropertyDescriptor(J,ee))})}return se}function $(se,Y,J){return(Y=E(Y))in se?Object.defineProperty(se,Y,{value:J,enumerable:!0,configurable:!0,writable:!0}):se[Y]=J,se}function X(se,Y){for(var J=0;J<Y.length;J++){var ee=Y[J];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(se,E(ee.key),ee)}}function E(se){var Y=function L(se,Y){if("object"!=typeof se||null===se)return se;var J=se[Symbol.toPrimitive];if(void 0!==J){var ee=J.call(se,Y||"default");if("object"!=typeof ee)return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(se)}(se,"string");return"symbol"==typeof Y?Y:String(Y)}var P=S(9007).Buffer,oe=S(9862).inspect,x=oe&&oe.custom||"inspect";function k(se,Y,J){P.prototype.copy.call(se,Y,J)}Ue.exports=function(){function se(){(function z(se,Y){if(!(se instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,se),this.head=null,this.tail=null,this.length=0}return function _(se,Y,J){Y&&X(se.prototype,Y),J&&X(se,J),Object.defineProperty(se,"prototype",{writable:!1})}(se,[{key:"push",value:function(J){var ee={data:J,next:null};this.length>0?this.tail.next=ee:this.head=ee,this.tail=ee,++this.length}},{key:"unshift",value:function(J){var ee={data:J,next:this.head};0===this.length&&(this.tail=ee),this.head=ee,++this.length}},{key:"shift",value:function(){if(0!==this.length){var J=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,J}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(J){if(0===this.length)return"";for(var ee=this.head,W=""+ee.data;ee=ee.next;)W+=J+ee.data;return W}},{key:"concat",value:function(J){if(0===this.length)return P.alloc(0);for(var ee=P.allocUnsafe(J>>>0),W=this.head,B=0;W;)k(W.data,ee,B),B+=W.data.length,W=W.next;return ee}},{key:"consume",value:function(J,ee){var W;return J<this.head.data.length?(W=this.head.data.slice(0,J),this.head.data=this.head.data.slice(J)):W=J===this.head.data.length?this.shift():ee?this._getString(J):this._getBuffer(J),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(J){var ee=this.head,W=1,B=ee.data;for(J-=B.length;ee=ee.next;){var b=ee.data,I=J>b.length?b.length:J;if(B+=I===b.length?b:b.slice(0,J),0==(J-=I)){I===b.length?(++W,this.head=ee.next?ee.next:this.tail=null):(this.head=ee,ee.data=b.slice(I));break}++W}return this.length-=W,B}},{key:"_getBuffer",value:function(J){var ee=P.allocUnsafe(J),W=this.head,B=1;for(W.data.copy(ee),J-=W.data.length;W=W.next;){var b=W.data,I=J>b.length?b.length:J;if(b.copy(ee,ee.length-J,0,I),0==(J-=I)){I===b.length?(++B,this.head=W.next?W.next:this.tail=null):(this.head=W,W.data=b.slice(I));break}++B}return this.length-=B,ee}},{key:x,value:function(J,ee){return oe(this,C(C({},ee),{},{depth:0,customInspect:!1}))}}]),se}()},3992:Ue=>{"use strict";function S(X,_){$(X,_),Q(X)}function Q(X){X._writableState&&!X._writableState.emitClose||X._readableState&&!X._readableState.emitClose||X.emit("close")}function $(X,_){X.emit("error",_)}Ue.exports={destroy:function _e(X,_){var E=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(X):X&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick($,this,X)):process.nextTick($,this,X)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(X||null,function(P){!_&&P?E._writableState?E._writableState.errorEmitted?process.nextTick(Q,E):(E._writableState.errorEmitted=!0,process.nextTick(S,E,P)):process.nextTick(S,E,P):_?(process.nextTick(Q,E),_(P)):process.nextTick(Q,E)}),this)},undestroy:function C(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function z(X,_){var E=X._readableState,L=X._writableState;E&&E.autoDestroy||L&&L.autoDestroy?X.destroy(_):X.emit("error",_)}}},1227:(Ue,_e,S)=>{"use strict";var Q=S(9555).q.ERR_STREAM_PREMATURE_CLOSE;function $(){}Ue.exports=function X(_,E,L){if("function"==typeof E)return X(_,null,E);E||(E={}),L=function C(_){var E=!1;return function(){if(!E){E=!0;for(var L=arguments.length,G=new Array(L),P=0;P<L;P++)G[P]=arguments[P];_.apply(this,G)}}}(L||$);var G=E.readable||!1!==E.readable&&_.readable,P=E.writable||!1!==E.writable&&_.writable,F=function(){_.writable||x()},oe=_._writableState&&_._writableState.finished,x=function(){P=!1,oe=!0,G||L.call(_)},k=_._readableState&&_._readableState.endEmitted,se=function(){G=!1,k=!0,P||L.call(_)},Y=function(B){L.call(_,B)},J=function(){var B;return G&&!k?((!_._readableState||!_._readableState.ended)&&(B=new Q),L.call(_,B)):P&&!oe?((!_._writableState||!_._writableState.ended)&&(B=new Q),L.call(_,B)):void 0},ee=function(){_.req.on("finish",x)};return function z(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",x),_.on("abort",J),_.req?ee():_.on("request",ee)):P&&!_._writableState&&(_.on("end",F),_.on("close",F)),_.on("end",se),_.on("finish",x),!1!==E.error&&_.on("error",Y),_.on("close",J),function(){_.removeListener("complete",x),_.removeListener("abort",J),_.removeListener("request",ee),_.req&&_.req.removeListener("finish",x),_.removeListener("end",F),_.removeListener("close",F),_.removeListener("finish",x),_.removeListener("end",se),_.removeListener("error",Y),_.removeListener("close",J)}}},5374:Ue=>{Ue.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(Ue,_e,S)=>{"use strict";var Q,$=S(9555).q,z=$.ERR_MISSING_ARGS,X=$.ERR_STREAM_DESTROYED;function _(x){if(x)throw x}function G(x){x()}function P(x,k){return x.pipe(k)}Ue.exports=function oe(){for(var x=arguments.length,k=new Array(x),se=0;se<x;se++)k[se]=arguments[se];var Y=function F(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():_}(k);if(Array.isArray(k[0])&&(k=k[0]),k.length<2)throw new z("streams");var J,ee=k.map(function(W,B){var b=B<k.length-1;return function L(x,k,se,Y){Y=function C(x){var k=!1;return function(){k||(k=!0,x.apply(void 0,arguments))}}(Y);var J=!1;x.on("close",function(){J=!0}),void 0===Q&&(Q=S(1227)),Q(x,{readable:k,writable:se},function(W){if(W)return Y(W);J=!0,Y()});var ee=!1;return function(W){if(!J&&!ee){if(ee=!0,function E(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();Y(W||new X("pipe"))}}}(W,b,B>0,function(T){J||(J=T),T&&ee.forEach(G),!b&&(ee.forEach(G),Y(J))})});return k.reduce(P)}},4962:(Ue,_e,S)=>{"use strict";var Q=S(9555).q.ERR_INVALID_OPT_VALUE;Ue.exports={getHighWaterMark:function $(z,X,_,E){var L=function C(z,X,_){return null!=z.highWaterMark?z.highWaterMark:X?z[_]:null}(X,E,_);if(null!=L){if(!isFinite(L)||Math.floor(L)!==L||L<0)throw new Q(E?_:"highWaterMark",L);return Math.floor(L)}return z.objectMode?16:16384}}},3951:(Ue,_e,S)=>{Ue.exports=S(2016).EventEmitter},2024:(Ue,_e,S)=>{"use strict";var Q=S(4282).Buffer,C=Q.isEncoding||function(ee){switch((ee=""+ee)&&ee.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function X(ee){var W;switch(this.encoding=function z(ee){var W=function $(ee){if(!ee)return"utf8";for(var W;;)switch(ee){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ee;default:if(W)return;ee=(""+ee).toLowerCase(),W=!0}}(ee);if("string"!=typeof W&&(Q.isEncoding===C||!C(ee)))throw new Error("Unknown encoding: "+ee);return W||ee}(ee),this.encoding){case"utf16le":this.text=oe,this.end=x,W=4;break;case"utf8":this.fillLast=G,W=4;break;case"base64":this.text=k,this.end=se,W=3;break;default:return this.write=Y,void(this.end=J)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(W)}function _(ee){return ee<=127?0:ee>>5==6?2:ee>>4==14?3:ee>>3==30?4:ee>>6==2?-1:-2}function G(ee){var W=this.lastTotal-this.lastNeed,B=function L(ee,W,B){if(128!=(192&W[0]))return ee.lastNeed=0,"\ufffd";if(ee.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return ee.lastNeed=1,"\ufffd";if(ee.lastNeed>2&&W.length>2&&128!=(192&W[2]))return ee.lastNeed=2,"\ufffd"}}(this,ee);return void 0!==B?B:this.lastNeed<=ee.length?(ee.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ee.copy(this.lastChar,W,0,ee.length),void(this.lastNeed-=ee.length))}function oe(ee,W){if((ee.length-W)%2==0){var B=ee.toString("utf16le",W);if(B){var b=B.charCodeAt(B.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ee[ee.length-1],ee.toString("utf16le",W,ee.length-1)}function x(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function k(ee,W){var B=(ee.length-W)%3;return 0===B?ee.toString("base64",W):(this.lastNeed=3-B,this.lastTotal=3,1===B?this.lastChar[0]=ee[ee.length-1]:(this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1]),ee.toString("base64",W,ee.length-B))}function se(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function Y(ee){return ee.toString(this.encoding)}function J(ee){return ee&&ee.length?this.write(ee):""}_e.StringDecoder=X,X.prototype.write=function(ee){if(0===ee.length)return"";var W,B;if(this.lastNeed){if(void 0===(W=this.fillLast(ee)))return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<ee.length?W?W+this.text(ee,B):this.text(ee,B):W||""},X.prototype.end=function F(ee){var W=ee&&ee.length?this.write(ee):"";return this.lastNeed?W+"\ufffd":W},X.prototype.text=function P(ee,W){var B=function E(ee,W,B){var b=W.length-1;if(b<B)return 0;var I=_(W[b]);return I>=0?(I>0&&(ee.lastNeed=I-1),I):--b<B||-2===I?0:(I=_(W[b]))>=0?(I>0&&(ee.lastNeed=I-2),I):--b<B||-2===I?0:(I=_(W[b]))>=0?(I>0&&(2===I?I=0:ee.lastNeed=I-3),I):0}(this,ee,W);if(!this.lastNeed)return ee.toString("utf8",W);this.lastTotal=B;var b=ee.length-(B-this.lastNeed);return ee.copy(this.lastChar,0,b),ee.toString("utf8",W,b)},X.prototype.fillLast=function(ee){if(this.lastNeed<=ee.length)return ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ee.length),this.lastNeed-=ee.length}},4282:(Ue,_e,S)=>{var Q=S(9007),C=Q.Buffer;function $(X,_){for(var E in X)_[E]=X[E]}function z(X,_,E){return C(X,_,E)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?Ue.exports=Q:($(Q,_e),_e.Buffer=z),z.prototype=Object.create(C.prototype),$(C,z),z.from=function(X,_,E){if("number"==typeof X)throw new TypeError("Argument must not be a number");return C(X,_,E)},z.alloc=function(X,_,E){if("number"!=typeof X)throw new TypeError("Argument must be a number");var L=C(X);return void 0!==_?"string"==typeof E?L.fill(_,E):L.fill(_):L.fill(0),L},z.allocUnsafe=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return C(X)},z.allocUnsafeSlow=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return Q.SlowBuffer(X)}},496:Ue=>{function S(Q){try{if(!global.localStorage)return!1}catch{return!1}var C=global.localStorage[Q];return null!=C&&"true"===String(C).toLowerCase()}Ue.exports=function _e(Q,C){if(S("noDeprecation"))return Q;var $=!1;return function z(){if(!$){if(S("throwDeprecation"))throw new Error(C);S("traceDeprecation")?console.trace(C):console.warn(C),$=!0}return Q.apply(this,arguments)}}},1171:Ue=>{"use strict";Ue.exports=function(_e){_e.prototype[Symbol.iterator]=function*(){for(let S=this.head;S;S=S.next)yield S.value}}},4439:(Ue,_e,S)=>{"use strict";function Q(_){var E=this;if(E instanceof Q||(E=new Q),E.tail=null,E.head=null,E.length=0,_&&"function"==typeof _.forEach)_.forEach(function(P){E.push(P)});else if(arguments.length>0)for(var L=0,G=arguments.length;L<G;L++)E.push(arguments[L]);return E}function C(_,E,L){var G=E===_.head?new X(L,null,E,_):new X(L,E,E.next,_);return null===G.next&&(_.tail=G),null===G.prev&&(_.head=G),_.length++,G}function $(_,E){_.tail=new X(E,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function z(_,E){_.head=new X(E,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function X(_,E,L,G){if(!(this instanceof X))return new X(_,E,L,G);this.list=G,this.value=_,E?(E.next=this,this.prev=E):this.prev=null,L?(L.prev=this,this.next=L):this.next=null}Ue.exports=Q,Q.Node=X,Q.create=Q,Q.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var E=_.next,L=_.prev;return E&&(E.prev=L),L&&(L.next=E),_===this.head&&(this.head=E),_===this.tail&&(this.tail=L),_.list.length--,_.next=null,_.prev=null,_.list=null,E},Q.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var E=this.head;_.list=this,_.next=E,E&&(E.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},Q.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var E=this.tail;_.list=this,_.prev=E,E&&(E.next=_),this.tail=_,this.head||(this.head=_),this.length++}},Q.prototype.push=function(){for(var _=0,E=arguments.length;_<E;_++)$(this,arguments[_]);return this.length},Q.prototype.unshift=function(){for(var _=0,E=arguments.length;_<E;_++)z(this,arguments[_]);return this.length},Q.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},Q.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},Q.prototype.forEach=function(_,E){E=E||this;for(var L=this.head,G=0;null!==L;G++)_.call(E,L.value,G,this),L=L.next},Q.prototype.forEachReverse=function(_,E){E=E||this;for(var L=this.tail,G=this.length-1;null!==L;G--)_.call(E,L.value,G,this),L=L.prev},Q.prototype.get=function(_){for(var E=0,L=this.head;null!==L&&E<_;E++)L=L.next;if(E===_&&null!==L)return L.value},Q.prototype.getReverse=function(_){for(var E=0,L=this.tail;null!==L&&E<_;E++)L=L.prev;if(E===_&&null!==L)return L.value},Q.prototype.map=function(_,E){E=E||this;for(var L=new Q,G=this.head;null!==G;)L.push(_.call(E,G.value,this)),G=G.next;return L},Q.prototype.mapReverse=function(_,E){E=E||this;for(var L=new Q,G=this.tail;null!==G;)L.push(_.call(E,G.value,this)),G=G.prev;return L},Q.prototype.reduce=function(_,E){var L,G=this.head;if(arguments.length>1)L=E;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");G=this.head.next,L=this.head.value}for(var P=0;null!==G;P++)L=_(L,G.value,P),G=G.next;return L},Q.prototype.reduceReverse=function(_,E){var L,G=this.tail;if(arguments.length>1)L=E;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");G=this.tail.prev,L=this.tail.value}for(var P=this.length-1;null!==G;P--)L=_(L,G.value,P),G=G.prev;return L},Q.prototype.toArray=function(){for(var _=new Array(this.length),E=0,L=this.head;null!==L;E++)_[E]=L.value,L=L.next;return _},Q.prototype.toArrayReverse=function(){for(var _=new Array(this.length),E=0,L=this.tail;null!==L;E++)_[E]=L.value,L=L.prev;return _},Q.prototype.slice=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var L=new Q;if(E<_||E<0)return L;_<0&&(_=0),E>this.length&&(E=this.length);for(var G=0,P=this.head;null!==P&&G<_;G++)P=P.next;for(;null!==P&&G<E;G++,P=P.next)L.push(P.value);return L},Q.prototype.sliceReverse=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var L=new Q;if(E<_||E<0)return L;_<0&&(_=0),E>this.length&&(E=this.length);for(var G=this.length,P=this.tail;null!==P&&G>E;G--)P=P.prev;for(;null!==P&&G>_;G--,P=P.prev)L.push(P.value);return L},Q.prototype.splice=function(_,E,...L){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var G=0,P=this.head;null!==P&&G<_;G++)P=P.next;var F=[];for(G=0;P&&G<E;G++)F.push(P.value),P=this.removeNode(P);for(null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev),G=0;G<L.length;G++)P=C(this,P,L[G]);return F},Q.prototype.reverse=function(){for(var _=this.head,E=this.tail,L=_;null!==L;L=L.prev){var G=L.prev;L.prev=L.next,L.next=G}return this.head=E,this.tail=_,this};try{S(1171)(Q)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(Ue,_e,S)=>{var Q=S(3801);function C($){var z,X;function _(L,G){try{var P=$[L](G),F=P.value,oe=F instanceof Q;Promise.resolve(oe?F.v:F).then(function(x){if(oe){var k="return"===L?"return":"next";if(!F.k||x.done)return _(k,x);x=$[k](x).value}E(P.done?"return":"normal",x)},function(x){_("throw",x)})}catch(x){E("throw",x)}}function E(L,G){switch(L){case"return":z.resolve({value:G,done:!0});break;case"throw":z.reject(G);break;default:z.resolve({value:G,done:!1})}(z=z.next)?_(z.key,z.arg):X=null}this._invoke=function(L,G){return new Promise(function(P,F){var oe={key:L,arg:G,resolve:P,reject:F,next:null};X?X=X.next=oe:(z=X=oe,_(L,G))})},"function"!=typeof $.return&&(this.return=void 0)}C.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},C.prototype.next=function($){return this._invoke("next",$)},C.prototype.throw=function($){return this._invoke("throw",$)},C.prototype.return=function($){return this._invoke("return",$)},Ue.exports=C,Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},3801:Ue=>{Ue.exports=function _e(S,Q){this.v=S,this.k=Q},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8131:(Ue,_e,S)=>{var Q=S(3801);Ue.exports=function C($){var z={},X=!1;function _(E,L){return X=!0,L=new Promise(function(G){G($[E](L))}),{done:!1,value:new Q(L,1)}}return z[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},z.next=function(E){return X?(X=!1,E):_("next",E)},"function"==typeof $.throw&&(z.throw=function(E){if(X)throw X=!1,E;return _("throw",E)}),"function"==typeof $.return&&(z.return=function(E){return X?(X=!1,E):_("return",E)}),z},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8237:Ue=>{function S(Q){function C($){if(Object($)!==$)return Promise.reject(new TypeError($+" is not an object."));var z=$.done;return Promise.resolve($.value).then(function(X){return{value:X,done:z}})}return(S=function(z){this.s=z,this.n=z.next}).prototype={s:null,n:null,next:function(){return C(this.n.apply(this.s,arguments))},return:function(z){var X=this.s.return;return void 0===X?Promise.resolve({value:z,done:!0}):C(X.apply(this.s,arguments))},throw:function(z){var X=this.s.return;return void 0===X?Promise.reject(z):C(X.apply(this.s,arguments))}},new S(Q)}Ue.exports=function _e(Q){var C,$,z,X=2;for(typeof Symbol<"u"&&($=Symbol.asyncIterator,z=Symbol.iterator);X--;){if($&&null!=(C=Q[$]))return C.call(Q);if(z&&null!=(C=Q[z]))return new S(C.call(Q));$="@@asyncIterator",z="@@iterator"}throw new TypeError("Object is not async iterable")},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},7156:Ue=>{function _e(Q,C,$,z,X,_,E){try{var L=Q[_](E),G=L.value}catch(P){return void $(P)}L.done?C(G):Promise.resolve(G).then(z,X)}Ue.exports=function S(Q){return function(){var C=this,$=arguments;return new Promise(function(z,X){var _=Q.apply(C,$);function E(G){_e(_,z,X,E,L,"next",G)}function L(G){_e(_,z,X,E,L,"throw",G)}E(void 0)})}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},6737:(Ue,_e,S)=>{var Q=S(3801);Ue.exports=function C($){return new Q($,0)},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8186:(Ue,_e,S)=>{var Q=S(4642);Ue.exports=function C($){return function(){return new Q($.apply(this,arguments))}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports}},Ue=>{Ue(Ue.s=2641)}]);