(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[792],{7772:je=>{"use strict";je.exports=S,je.exports.default=S;var me=1e20;function S(X,_,E,F,W,P){this.fontSize=X||24,this.buffer=void 0===_?3:_,this.cutoff=F||.25,this.fontFamily=W||"sans-serif",this.fontWeight=P||"normal",this.radius=E||8;var D=this.size=this.fontSize+2*this.buffer,se=D+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=D,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(se*se),this.gridInner=new Float64Array(se*se),this.f=new Float64Array(se),this.z=new Float64Array(se+1),this.v=new Uint16Array(se),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(D/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(X,_,E,F,W,P){for(var D=0;D<_;D++)G(X,D,_,E,F,W,P);for(var se=0;se<E;se++)G(X,se*_,1,_,F,W,P)}function G(X,_,E,F,W,P,D){var se,x,k,oe;for(P[0]=0,D[0]=-me,D[1]=me,se=0;se<F;se++)W[se]=X[_+se*E];for(se=1,x=0,k=0;se<F;se++){do{k=(W[se]-W[oe=P[x]]+se*se-oe*oe)/(se-oe)/2}while(k<=D[x]&&--x>-1);P[++x]=se,D[x]=k,D[x+1]=me}for(se=0,x=0;se<F;se++){for(;D[x+1]<se;)x++;X[_+se*E]=W[oe=P[x]]+(se-oe)*(se-oe)}}S.prototype._draw=function(X,_){var P,D,se,x,k,oe,$,z,ee,E=this.ctx.measureText(X),F=E.width,W=2*this.buffer;_&&this.useMetrics?(k=Math.floor(E.actualBoundingBoxAscent),z=this.buffer+Math.ceil(E.actualBoundingBoxAscent),oe=this.buffer,$=this.buffer,P=(D=Math.min(this.size,Math.ceil(E.actualBoundingBoxRight-E.actualBoundingBoxLeft)))+W,se=(x=Math.min(this.size-oe,Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent)))+W,this.ctx.textBaseline="alphabetic"):(P=D=this.size,se=x=this.size,k=19*this.fontSize/24,oe=$=0,z=this.middle,this.ctx.textBaseline="middle"),D&&x&&(this.ctx.clearRect($,oe,D,x),this.ctx.fillText(X,this.buffer,z),ee=this.ctx.getImageData($,oe,D,x));var Y=new Uint8ClampedArray(P*se);return function Z(X,_,E,F,W,P,D){P.fill(me,0,_*E),D.fill(0,0,_*E);for(var se=(_-F)/2,x=0;x<W;x++)for(var k=0;k<F;k++){var oe=(x+se)*_+k+se,$=X.data[4*(x*F+k)+3]/255;if(1===$)P[oe]=0,D[oe]=me;else if(0===$)P[oe]=me,D[oe]=0;else{var z=Math.max(0,.5-$),ee=Math.max(0,$-.5);P[oe]=z*z,D[oe]=ee*ee}}}(ee,P,se,D,x,this.gridOuter,this.gridInner),q(this.gridOuter,P,se,this.f,this.v,this.z),q(this.gridInner,P,se,this.f,this.v,this.z),function C(X,_,E,F,W,P,D){for(var se=0;se<_*E;se++){var x=Math.sqrt(F[se])-Math.sqrt(W[se]);X[se]=Math.round(255-255*(x/P+D))}}(Y,P,se,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Y,metrics:{width:D,height:x,sdfWidth:P,sdfHeight:se,top:k,left:0,advance:F}}},S.prototype.draw=function(X){return this._draw(X,!1).data},S.prototype.drawWithMetrics=function(X){return this._draw(X,!0)}},3527:(je,me,S)=>{"use strict";var Z={};S.r(Z),S.d(Z,{decode:()=>sbe,name:()=>rbe});var C={};S.r(C),S.d(C,{name:()=>dbe,preprocess:()=>hbe});var q={};S.r(q),S.d(q,{name:()=>fbe,preprocess:()=>pbe});var G={};S.r(G),S.d(G,{decode:()=>Qbe,encode:()=>Zbe,name:()=>Kbe,preprocess:()=>Jbe});var X={};S.r(X),S.d(X,{decode:()=>rwe,encode:()=>swe,name:()=>iwe});var _={};S.r(_),S.d(_,{decode:()=>awe,encode:()=>cwe,name:()=>owe});var E={};S.r(E),S.d(E,{decode:()=>uwe,encode:()=>dwe,name:()=>lwe});var F={};S.r(F),S.d(F,{delMany:()=>pPe,get:()=>hPe,setMany:()=>fPe});var W={};function P(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(c){P(s,i,r,o,a,"next",c)}function a(c){P(s,i,r,o,a,"throw",c)}o(void 0)})}}S.r(W),S.d(W,{inDefaultGraph:()=>NPe,isBlankNode:()=>DPe,isDefaultGraph:()=>wb,isLiteral:()=>RPe,isNamedNode:()=>IPe,isVariable:()=>OPe,prefix:()=>PPe,prefixes:()=>GL});let x=null,k=!1,oe=1;const $=Symbol("SIGNAL");function z(t){const e=x;return x=t,e}const b={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function le(t){if((!Be(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==oe)){if(!t.producerMustRecompute(t)&&!Ve(t))return t.dirty=!1,void(t.lastCleanEpoch=oe);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=oe}}function ae(t){t.dirty=!0,function j(t){if(void 0===t.liveConsumerNode)return;const e=k;k=!0;try{for(const n of t.liveConsumerNode)n.dirty||ae(n)}finally{k=e}}(t),t.consumerMarkedDirty?.(t)}function xe(t){return t&&(t.nextProducerIndex=0),z(t)}function Oe(t,e){if(z(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Be(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ce(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ve(t){Ae(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(le(n),i!==n.version))return!0}return!1}function Qe(t){if(Ae(t),Be(t))for(let e=0;e<t.producerNode.length;e++)Ce(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ce(t,e){if(function ke(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ae(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)Ce(t.producerNode[i],t.producerIndexOfThis[i]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ae(r),r.producerIndexOfThis[i]=e}}function Be(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ae(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let R=null;const We=()=>{},Ee={...b,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:We};function Ze(t){return"function"==typeof t}function vt(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Nt=vt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function wt(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Ze(i))try{i()}catch(s){e=s instanceof Nt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ne(s)}catch(o){e=e??[],o instanceof Nt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Nt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ne(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&wt(n,e)}remove(e){const{_finalizers:n}=this;n&&wt(n,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const t=new kt;return t.closed=!0,t})();const pe=kt.EMPTY;function H(t){return t instanceof kt||t&&"closed"in t&&Ze(t.remove)&&Ze(t.add)&&Ze(t.unsubscribe)}function ne(t){Ze(t)?t():t.unsubscribe()}const Le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},tt={setTimeout(t,e,...n){const{delegate:i}=tt;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=tt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lt(t){tt.setTimeout(()=>{const{onUnhandledError:e}=Le;if(!e)throw t;e(t)})}function xt(){}const an=Cn("C",void 0,void 0);function Cn(t,e,n){return{kind:t,value:e,error:n}}let xn=null;function Pi(t){if(Le.useDeprecatedSynchronousErrorHandling){const e=!xn;if(e&&(xn={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=xn;if(xn=null,n)throw i}}else t()}class hr extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,H(e)&&e.add(this)):this.destination=Rc}static create(e,n,i){return new Hr(e,n,i)}next(e){this.isStopped?ic(function zn(t){return Cn("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ic(function kn(t){return Cn("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ic(an,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zs=Function.prototype.bind;function go(t,e){return zs.call(t,e)}class Xi{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){mo(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){mo(i)}else mo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mo(n)}}}class Hr extends hr{constructor(e,n,i){let r;if(super(),Ze(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Le.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&go(e.next,s),error:e.error&&go(e.error,s),complete:e.complete&&go(e.complete,s)}):r=e}this.destination=new Xi(r)}}function mo(t){Le.useDeprecatedSynchronousErrorHandling?function aa(t){Le.useDeprecatedSynchronousErrorHandling&&xn&&(xn.errorThrown=!0,xn.error=t)}(t):lt(t)}function ic(t,e){const{onStoppedNotification:n}=Le;n&&tt.setTimeout(()=>n(t,e))}const Rc={closed:!0,next:xt,error:function dl(t){throw t},complete:xt},rc="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(t){return t}let At=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function gs(t){return t&&t instanceof hr||function fr(t){return t&&Ze(t.next)&&Ze(t.error)&&Ze(t.complete)}(t)&&H(t)}(n)?n:new Hr(n,i,r);return Pi(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=cn(i))((r,s)=>{const o=new Hr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[rc](){return this}pipe(...n){return function Gt(t){return 0===t.length?Ge:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=cn(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function cn(t){var e;return null!==(e=t??Le.Promise)&&void 0!==e?e:Promise}const sc=vt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qt=(()=>{class t extends At{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Ra(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new sc}next(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?pe:(this.currentObservers=null,s.push(n),new kt(()=>{this.currentObservers=null,wt(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new At;return n.source=this,n}}return t.create=(e,n)=>new Ra(e,n),t})();class Ra extends Qt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:pe}}class nr extends Qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Oa(t){return Ze(t?.lift)}function gn(t){return e=>{if(Oa(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ti(t,e,n,i,r){return new Gs(t,e,n,i,r)}class Gs extends hr{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Xt(t,e){return gn((n,i)=>{let r=0;n.subscribe(ti(i,s=>{i.next(t.call(e,s,r++))}))})}const ms="https://g.co/ng/security#xss";class St extends Error{constructor(e,n){super(function _e(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Pe(t){return{toString:t}.toString()}const ct="__parameters__";function nn(t,e,n){return Pe(()=>{const i=function zt(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(ct)?c[ct]:Object.defineProperty(c,ct,{value:[]})[ct];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const Pn=globalThis;function di(t){for(let e in t)if(t[e]===di)return e;throw Error("Could not find renamed property on target object.")}function Na(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ii(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ii).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Os(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ou=di({__forward_ref__:di});function $n(t){return t.__forward_ref__=$n,t.toString=function(){return ii(this())},t}function yn(t){return au(t)?t():t}function au(t){return"function"==typeof t&&t.hasOwnProperty(ou)&&t.__forward_ref__===$n}function It(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ir(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cp(t){return Wi(t,Mp)||Wi(t,Fb)}function Wi(t,e){return t.hasOwnProperty(e)?t[e]:null}function Tp(t){return t&&(t.hasOwnProperty(w_)||t.hasOwnProperty(sC))?t[w_]:null}const Mp=di({\u0275prov:di}),w_=di({\u0275inj:di}),Fb=di({ngInjectableDef:di}),sC=di({ngInjectorDef:di});class Et{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=It({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ip(t){return t&&!!t.\u0275providers}const ld=di({\u0275cmp:di}),Dp=di({\u0275dir:di}),to=di({\u0275pipe:di}),Bb=di({\u0275mod:di}),Wr=di({\u0275fac:di}),Mh=di({__NG_ELEMENT_ID__:di}),A_=di({__NG_ENV_ID__:di});function Tn(t){return"string"==typeof t?t:null==t?"":String(t)}function Ih(t,e){throw new St(-201,!1)}var hi=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(hi||{});let S_;function Vb(){return S_}function no(t){const e=S_;return S_=t,e}function Dh(t,e,n){const i=Cp(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&hi.Optional?null:void 0!==e?e:void Ih()}const ud={},Rp="__NG_DI_FLAG__",dd="ngTempTokenPath",Hb=/\n/gm,Op="__source";let fl;function Oc(t){const e=fl;return fl=t,e}function $o(t,e=hi.Default){if(void 0===fl)throw new St(-203,!1);return null===fl?Dh(t,void 0,e):fl.get(t,e&hi.Optional?null:void 0,e)}function ot(t,e=hi.Default){return(Vb()||$o)(yn(t),e)}function Ot(t,e=hi.Default){return ot(t,Oh(e))}function Oh(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function T_(t){const e=[];for(let n=0;n<t.length;n++){const i=yn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new St(900,!1);let r,s=hi.Default;for(let o=0;o<i.length;o++){const a=i[o],c=hC(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(ot(r,s))}else e.push(ot(i))}return e}function Nh(t,e){return t[Rp]=e,t.prototype[Rp]=e,t}function hC(t){return t[Rp]}const pd=Nh(nn("Optional"),8),gd=Nh(nn("SkipSelf"),4);function vo(t,e){return t.hasOwnProperty(Wr)?t[Wr]:null}function md(t,e){t.forEach(n=>Array.isArray(n)?md(n,e):e(n))}function Gb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yo(t,e,n){let i=Pc(t,e);return i>=0?t[1|i]=n:(i=~i,function Wb(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function M_(t,e){const n=Pc(t,e);if(n>=0)return t[1|n]}function Pc(t,e){return function Dt(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const bt={},Ht=[],On=new Et(""),yi=new Et("",-1),Br=new Et("");class Ii{get(e,n=ud){if(n===ud){const i=new Error(`NullInjectorError: No provider for ${ii(e)}!`);throw i.name="NullInjectorError",i}return n}}var _d=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_d||{}),La=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(La||{}),$t=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($t||{});function Lp(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function I_(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Ph(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function lu(t){return 3===t||4===t||6===t}function Ph(t){return 64===t.charCodeAt(0)}function pl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Di(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Di(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const $b="ng-template";function Yb(t,e,n,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==Lp(e[r+1].toLowerCase(),n,0))return!0}else if(yd(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===n)return!0}return!1}function yd(t){return 4===t.type&&t.value!==$b}function mC(t,e,n){return e===(4!==t.type||n?t.value:$b)}function _C(t,e,n){let i=4;const r=t.attrs,s=null!==r?function qb(t){for(let e=0;e<t.length;e++)if(lu(t[e]))return e;return t.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!mC(t,c,n)||""===c&&1===e.length){if(Fa(i))return!1;o=!0}}else if(8&i){if(null===r||!Yb(t,r,c,n)){if(Fa(i))return!1;o=!0}}else{const l=e[++a],u=Fp(c,r,yd(t),n);if(-1===u){if(Fa(i))return!1;o=!0;continue}if(""!==l){let h;if(h=u>s?"":r[u+1].toLowerCase(),2&i&&l!==h){if(Fa(i))return!1;o=!0}}}}else{if(!o&&!Fa(i)&&!Fa(c))return!1;if(o&&Fa(c))continue;o=!1,i=c|1&i}}return Fa(i)||o}function Fa(t){return!(1&t)}function Fp(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Bp(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Lc(t,e,n=!1){for(let i=0;i<e.length;i++)if(_C(t,e[i],n))return!0;return!1}function Xb(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function D_(t,e){return t?":not("+e.trim()+")":e}function jp(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Fa(o)&&(e+=D_(s,r),r=""),i=o,s=s||!Fa(i);n++}return""!==r&&(e+=D_(s,r)),e}function Zn(t){return Pe(()=>{const e=$r(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_d.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||La.Emulated,styles:t.styles||Ht,_:null,schemas:t.schemas||null,tView:null,id:""};Ps(n);const i=t.dependencies;return n.directiveDefs=Vp(i,!1),n.pipeDefs=Vp(i,!0),n.id=function Qb(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function Up(t){return Wn(t)||ts(t)}function yC(t){return null!==t}function gr(t){return Pe(()=>({type:t.type,bootstrap:t.bootstrap||Ht,declarations:t.declarations||Ht,imports:t.imports||Ht,exports:t.exports||Ht,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jb(t,e){if(null==t)return bt;const n={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];let s,o,a=$t.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==$t.None?[i,a]:i,e[s]=o):n[s]=i}return n}function Yt(t){return Pe(()=>{const e=$r(t);return Ps(e),e})}function es(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Wn(t){return t[ld]||null}function ts(t){return t[Dp]||null}function _s(t){return t[to]||null}function $r(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ht,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jb(t.inputs,e),outputs:Jb(t.outputs),debugInfo:null}}function Ps(t){t.features?.forEach(e=>e(t))}function Vp(t,e){if(!t)return null;const n=e?_s:Up;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(yC)}function R_(...t){return{\u0275providers:uu(0,t),\u0275fromNgModule:!0}}function uu(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return md(e,o=>{const a=o;Fc(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Hp(r,s),n}function Hp(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];du(r,s=>{e(s,i)})}}function Fc(t,e,n,i){if(!(t=yn(t)))return!1;let r=null,s=Tp(t);const o=!s&&Wn(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const c=t.ngModule;if(s=Tp(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Fc(l,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{md(s.imports,u=>{Fc(u,e,n,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Hp(l,e)}if(!a){const l=vo(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ht},r),e({provide:Br,useValue:r,multi:!0},r),e({provide:On,useValue:()=>ot(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=t;du(c,u=>{e(u,l)})}}}return r!==t&&void 0!==t.providers}function du(t,e){for(let n of t)Ip(n)&&(n=n.\u0275providers),Array.isArray(n)?du(n,e):e(n)}const Gp=di({provide:String,useValue:di});function ml(t){return null!==t&&"object"==typeof t&&Gp in t}function hu(t){return"function"==typeof t}const O_=new Et(""),fu={},kh={};let Wp;function Re(){return void 0===Wp&&(Wp=new Ii),Wp}class ys{}class kc extends ys{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,N_(e,o=>this.processProvider(o)),this.records.set(yi,vd(void 0,this)),r.has("environment")&&this.records.set(ys,vd(void 0,this));const s=this.records.get(O_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Br,Ht,hi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=z(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Oc(this),i=no(void 0);try{return e()}finally{Oc(n),no(i)}}get(e,n=ud,i=hi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(A_))return e[A_](this);i=Oh(i);const s=Oc(this),o=no(void 0);try{if(!(i&hi.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function EC(t){return"function"==typeof t||"object"==typeof t&&t instanceof Et}(e)&&Cp(e);c=l&&this.injectableDefInScope(l)?vd(xo(e),fu):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&hi.Self?Re():this.parent).get(e,n=i&hi.Optional&&n===ud?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[dd]=a[dd]||[]).unshift(ii(e)),s)throw a;return function fC(t,e,n,i){const r=t[dd];throw e[Op]&&r.unshift(e[Op]),t.message=function pC(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ii(e);if(Array.isArray(e))r=e.map(ii).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ii(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Hb,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[dd]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{no(o),Oc(s)}}resolveInjectorInitializers(){const e=z(null),n=Oc(this),i=no(void 0);try{const s=this.get(On,Ht,hi.Self);for(const o of s)o()}finally{Oc(n),no(i),z(e)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(ii(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new St(205,!1)}processProvider(e){let n=hu(e=yn(e))?e:yn(e&&e.provide);const i=function wC(t){return ml(t)?vd(void 0,t.useValue):vd(tw(t),fu)}(e);if(!hu(e)&&!0===e.multi){let r=this.records.get(n);r||(r=vd(void 0,fu,!0),r.factory=()=>T_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){const i=z(null);try{return n.value===fu&&(n.value=kh,n.value=n.factory()),"object"==typeof n.value&&n.value&&function xC(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=yn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function xo(t){const e=Cp(t),n=null!==e?e.factory:vo(t);if(null!==n)return n;if(t instanceof Et)throw new St(204,!1);if(t instanceof Function)return function fi(t){if(t.length>0)throw new St(204,!1);const n=function rC(t){return t&&(t[Mp]||t[Fb])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new St(204,!1)}function tw(t,e,n){let i;if(hu(t)){const r=yn(t);return vo(r)||xo(r)}if(ml(t))i=()=>yn(t.useValue);else if(function ew(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...T_(t.deps||[]));else if(function Zb(t){return!(!t||!t.useExisting)}(t))i=()=>ot(yn(t.useExisting));else{const r=yn(t&&(t.useClass||t.provide));if(!function pu(t){return!!t.deps}(t))return vo(r)||xo(r);i=()=>new r(...T_(t.deps))}return i}function vd(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function N_(t,e){for(const n of t)Array.isArray(n)?N_(n,e):n&&Ip(n)?N_(n.\u0275providers,e):e(n)}function nw(){return void 0!==Vb()||null!=function dC(){return fl}()}const mr=0,Wt=1,wn=2,jr=3,ka=4,Ls=5,Ao=6,wd=7,Ki=8,is=9,io=10,In=11,jh=12,L_=13,xd=14,Ai=15,mu=16,ua=17,Yr=18,Uh=19,F_=20,Uc=21,_l=22,So=23,Bn=25,k_=1,oc=7,Or=9,Sr=10;var $p=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}($p||{});function sr(t){return Array.isArray(t)&&"object"==typeof t[k_]}function vs(t){return Array.isArray(t)&&!0===t[k_]}function Ed(t){return!!(4&t.flags)}function qo(t){return t.componentOffset>-1}function Hh(t){return!(1&~t.flags)}function or(t){return!!t.template}function zh(t){return!!(512&t[wn])}class Gh{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function aw(t,e,n,i){null!==e?e.applyValueToInputSignal(e,i):t[n]=i}function Cr(){return j_}function j_(t){return t.type.prototype.ngOnChanges&&(t.setInput=cw),UC}function UC(){const t=Kp(this),e=t?.current;if(e){const n=t.previous;if(n===bt)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function cw(t,e,n,i,r){const s=this.declaredInputs[i],o=Kp(t)||function uw(t,e){return t[lw]=e}(t,{previous:bt,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Gh(l&&l.currentValue,n,c===bt),aw(t,e,r,n)}Cr.ngInherit=!0;const lw="__ngSimpleChanges__";function Kp(t){return t[lw]||null}const da=function(t,e,n){},Yn="svg";let hw=!1;function ji(t){for(;Array.isArray(t);)t=t[mr];return t}function Ys(t,e){return ji(e[t])}function ro(t,e){return ji(e[t.index])}function yu(t,e){return t.data[e]}function vu(t,e){return t[e]}function Co(t,e){const n=e[t];return sr(n)?n:n[mr]}function ac(t){return!(128&~t[wn])}function Ba(t,e){return null==e?null:t[e]}function Yh(t){t[ua]=0}function fw(t){1024&t[wn]||(t[wn]|=1024,ac(t)&&bu(t))}function Zp(t){return!!(9216&t[wn]||t[So]?.dirty)}function qh(t){t[io].changeDetectionScheduler?.notify(1),Zp(t)?bu(t):64&t[wn]&&(function $h(){return hw}()?(t[wn]|=1024,bu(t)):t[io].changeDetectionScheduler?.notify())}function bu(t){t[io].changeDetectionScheduler?.notify();let e=To(t);for(;null!==e&&!(8192&e[wn])&&(e[wn]|=8192,ac(e));)e=To(e)}function ja(t,e){if(!(256&~t[wn]))throw new St(911,!1);null===t[Uc]&&(t[Uc]=[]),t[Uc].push(e)}function To(t){const e=t[jr];return vs(e)?e[jr]:e}const Ln={lFrame:vw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function G_(){return Ln.bindingsEnabled}function wu(){return null!==Ln.skipHydrationRootTNode}function Mt(){return Ln.lFrame.lView}function ri(){return Ln.lFrame.tView}function $i(t){return Ln.lFrame.contextLView=t,t[Ki]}function Li(t){return Ln.lFrame.contextLView=null,t}function Ri(){let t=W_();for(;null!==t&&64===t.type;)t=t.parent;return t}function W_(){return Ln.lFrame.currentTNode}function Ua(t,e){const n=Ln.lFrame;n.currentTNode=t,n.isParent=e}function vl(){return Ln.lFrame.isParent}function xu(){Ln.lFrame.isParent=!1}function bs(){const t=Ln.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ko(){return Ln.lFrame.bindingIndex++}function ha(t){const e=Ln.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eg(t,e){const n=Ln.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jh(e)}function Jh(t){Ln.lFrame.currentDirectiveIndex=t}function tg(){return Ln.lFrame.currentQueryIndex}function fa(t){Ln.lFrame.currentQueryIndex=t}function yw(t){const e=t[Wt];return 2===e.type?e.declTNode:1===e.type?t[Ls]:null}function X_(t,e,n){if(n&hi.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&hi.Host||(r=yw(s),null===r||(s=s[xd],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Ln.lFrame=J_();return i.currentTNode=e,i.lView=t,!0}function K_(t){const e=J_(),n=t[Wt];Ln.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function J_(){const t=Ln.lFrame,e=null===t?null:t.child;return null===e?vw(t):e}function vw(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function bw(){const t=Ln.lFrame;return Ln.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const uc=bw;function Qh(){const t=bw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ws(){return Ln.lFrame.selectedIndex}function dc(t){Ln.lFrame.selectedIndex=t}function Si(){const t=Ln.lFrame;return yu(t.tView,t.selectedIndex)}function En(){Ln.lFrame.currentNamespace=Yn}let ig=!0;function Ad(){return ig}function ar(t){ig=t}function rg(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function Zh(t,e,n){xw(t,e,3,n)}function sg(t,e,n,i){(3&t[wn])===n&&xw(t,e,n,i)}function og(t,e){let n=t[wn];(3&n)===e&&(n&=16383,n+=1,t[wn]=n)}function xw(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&t[ua]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[ua]+=65536),(a<s||-1==s)&&(JC(t,n,e,c),t[ua]=(4294901760&t[ua])+c+2),c++}function Ew(t,e){da(4,t,e);const n=z(null);try{e.call(t)}finally{z(n),da(5,t,e)}}function JC(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[wn]>>14<t[ua]>>16&&(3&t[wn])===e&&(t[wn]+=16384,Ew(a,s)):Ew(a,s)}const Io=-1;class rs{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function cg(t){return t!==Io}function ef(t){return 32767&t}function tf(t,e){let n=function tT(t){return t>>16}(t),i=e;for(;n>0;)i=i[xd],n--;return i}let iy=!0;function nf(t){const e=iy;return iy=t,e}const Aw=255,lg=5;let Sw=0;const Do={};function rf(t,e){const n=sf(t,e);if(-1!==n)return n;const i=e[Wt];i.firstCreatePass&&(t.injectorIndex=e.length,ug(i.data,t),ug(e,null),ug(i.blueprint,null));const r=af(t,e),s=t.injectorIndex;if(cg(r)){const o=ef(r),a=tf(r,e),c=a[Wt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function ug(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sf(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function af(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Ow(r),null===i)return Io;if(n++,r=r[xd],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Io}function pa(t,e,n){!function ry(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Mh)&&(i=n[Mh]),null==i&&(i=n[Mh]=Sw++);const r=i&Aw;e.data[t+(r>>lg)]|=1<<r}(t,e,n)}function Cw(t,e,n){if(n&hi.Optional||void 0!==t)return t;Ih()}function sy(t,e,n,i){if(n&hi.Optional&&void 0===i&&(i=null),!(n&(hi.Self|hi.Host))){const r=t[is],s=no(void 0);try{return r?r.get(e,i,n&hi.Optional):Dh(e,i,n&hi.Optional)}finally{no(s)}}return Cw(i,0,n)}function Tw(t,e,n,i=hi.Default,r){if(null!==t){if(2048&e[wn]&&!(i&hi.Self)){const o=function sT(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[wn]&&!(512&o[wn]);){const a=Mw(s,o,n,i|hi.Self,Do);if(a!==Do)return a;let c=s.parent;if(!c){const l=o[F_];if(l){const u=l.get(n,Do,i);if(u!==Do)return u}c=Ow(o),o=o[xd]}s=c}return r}(t,e,n,i,Do);if(o!==Do)return o}const s=Mw(t,e,n,i,Do);if(s!==Do)return s}return sy(e,n,i,r)}function Mw(t,e,n,i,r){const s=function rT(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Mh)?t[Mh]:void 0;return"number"==typeof e?e>=0?e&Aw:Rw:e}(n);if("function"==typeof s){if(!X_(e,t,i))return i&hi.Host?Cw(r,0,i):sy(e,n,i,r);try{let o;if(o=s(i),null!=o||i&hi.Optional)return o;Ih()}finally{uc()}}else if("number"==typeof s){let o=null,a=sf(t,e),c=Io,l=i&hi.Host?e[Ai][Ls]:null;for((-1===a||i&hi.SkipSelf)&&(c=-1===a?af(t,e):e[a+8],c!==Io&&Dw(i,!1)?(o=e[Wt],a=ef(c),e=tf(c,e)):a=-1);-1!==a;){const u=e[Wt];if(Iw(s,a,u.data)){const h=iT(a,e,n,o,i,l);if(h!==Do)return h}c=e[a+8],c!==Io&&Dw(i,e[Wt].data[a+8]===l)&&Iw(s,a,e)?(o=u,a=ef(c),e=tf(c,e)):a=-1}}return r}function iT(t,e,n,i,r,s){const o=e[Wt],a=o.data[t+8],u=dg(a,o,n,null==i?qo(a)&&iy:i!=o&&!!(3&a.type),r&hi.Host&&s===a);return null!==u?Su(e,o,u,a):Do}function dg(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,u=s>>20,f=r?a+u:t.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<c&&n===m||g>=c&&m.type===n)return g}if(r){const g=o[c];if(g&&or(g)&&g.type===n)return c}return null}function Su(t,e,n,i){let r=t[n];const s=e.data;if(function ey(t){return t instanceof rs}(r)){const o=r;o.resolving&&function hl(t,e){throw e&&e.join(" > "),new St(-200,t)}(function _i(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Tn(t)}(s[n]));const a=nf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?no(o.injectImpl):null;X_(t,i,hi.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function KC(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=j_(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&no(l),nf(a),o.resolving=!1,uc()}}return r}function Iw(t,e,n){return!!(n[e+(t>>lg)]&1<<t)}function Dw(t,e){return!(t&hi.Self||t&hi.Host&&e)}class ss{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Tw(this._tNode,this._lView,e,Oh(i),n)}}function Rw(){return new ss(Ri(),Mt())}function Fi(t){return Pe(()=>{const e=t.prototype.constructor,n=e[Wr]||hg(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Wr]||hg(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function hg(t){return au(t)?()=>{const e=hg(yn(t));return e&&e()}:vo(t)}function Ow(t){const e=t[Wt],n=e.type;return 2===n?e.declTNode:1===n?t[Ls]:null}function bl(t){return function Au(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(lu(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Ri(),t)}function jw(t,e=null,n=null,i){const r=Uw(t,e,n,i);return r.resolveInjectorInitializers(),r}function Uw(t,e=null,n=null,i,r=new Set){const s=[n||Ht,R_(t)];return i=i||("object"==typeof t?void 0:ii(t)),new kc(s,e||Re(),i||null,r)}let Ui=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ud;static#t=this.NULL=new Ii;static create(n,i){if(Array.isArray(n))return jw({name:""},i,n,"");{const r=n.name??"";return jw({name:r},n.parent,n.providers,r)}}static#n=this.\u0275prov=It({token:t,providedIn:"any",factory:()=>ot(yi)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function ay(t){return t.ngOriginalError}class Ro{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ay(e);for(;n&&ay(n);)n=ay(n);return n||null}}const Hw=new Et("",{providedIn:"root",factory:()=>Ot(Ro).handleError.bind(void 0)});let Td=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=dT;static#t=this.__NG_ENV_ID__=n=>n}return t})();class uT extends Td{constructor(e){super(),this._lView=e}onDestroy(e){return ja(this._lView,e),()=>function H_(t,e){if(null===t[Uc])return;const n=t[Uc].indexOf(e);-1!==n&&t[Uc].splice(n,1)}(this._lView,e)}}function dT(){return new uT(Mt())}function hT(){return Md(Ri(),Mt())}function Md(t,e){return new ni(ro(t,e))}let ni=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=hT}return t})();function Gw(t){return t instanceof ni?t.nativeElement:t}function cf(t){return e=>{setTimeout(t,void 0,e)}}const hn=class fT extends Qt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,nw()&&(this.destroyRef=Ot(Td,{optional:!0})??void 0)}emit(e){const n=z(null);try{super.next(e)}finally{z(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=cf(s),r&&(r=cf(r)),o&&(o=cf(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof kt&&e.add(a),a}};function pT(){return this._results[Symbol.iterator]()}class lf{static#e=Symbol.iterator;get changes(){return this._changes??=new hn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=lf.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=pT)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const i=function bo(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Np(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function pg(t){return!(128&~t.flags)}const mg=new Map;let mT=0;const ly="__ngContext__";function qs(t,e){sr(e)?(t[ly]=e[Uh],function _T(t){mg.set(t[Uh],t)}(e)):t[ly]=e}function hf(t){return tx(t[jh])}function ex(t){return tx(t[ka])}function tx(t){for(;null!==t&&!vs(t);)t=t[ka];return t}let vg;const bg=new Et("",{providedIn:"root",factory:()=>wg}),wg="ng",pf=new Et(""),Va=new Et("",{providedIn:"platform",factory:()=>"unknown"}),Ha=new Et(""),gf=new Et("",{providedIn:"root",factory:()=>function wl(){if(void 0!==vg)return vg;if(typeof document<"u")return document;throw new St(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hc=()=>null;function vy(t,e,n=!1){return Hc(t,e,n)}const ux=new Et("",{providedIn:"root",factory:()=>!1});let Cu;function za(t){return function so(){if(void 0===Cu&&(Cu=null,Pn.trustedTypes))try{Cu=Pn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Cu}()?.createHTML(t)||t}class El{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ms})`}}class ma extends El{getTypeName(){return"HTML"}}class dx extends El{getTypeName(){return"Style"}}class zT extends El{getTypeName(){return"Script"}}class Oi extends El{getTypeName(){return"URL"}}class GT extends El{getTypeName(){return"ResourceURL"}}function Po(t){return t instanceof El?t.changingThisBreaksApplicationSecurity:t}function Jo(t,e){const n=function WT(t){return t instanceof El&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ms})`)}return n===e}class QT{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(za(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class ZT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=za(e),n}}const tM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mg(t){return(t=String(t)).match(tM)?t:"unsafe:"+t}function zc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Tu(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const fx=zc("area,br,col,hr,img,wbr"),Ig=zc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),px=zc("rp,rt"),Ks=Tu(fx,Tu(Ig,zc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tu(px,zc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tu(px,Ig)),Cy=zc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ty=Tu(Cy,zc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nM=zc("script,style,template");class iM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)r.push(n),n=sM(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=gx(n);if(s){n=s;break}n=r.pop()}return this.buf.join("")}startElement(e){const n=mx(e).toLowerCase();if(!Ks.hasOwnProperty(n))return this.sanitizedSomething=!0,!nM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!Ty.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Cy[a]&&(c=Mg(c)),this.buf.push(" ",o,'="',bx(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=mx(e).toLowerCase();Ks.hasOwnProperty(n)&&!fx.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(bx(e))}}function gx(t){const e=t.nextSibling;if(e&&t!==e.previousSibling)throw _x(e);return e}function sM(t){const e=t.firstChild;if(e&&function rM(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,e))throw _x(e);return e}function mx(t){const e=t.nodeName;return"string"==typeof e?e:"FORM"}function _x(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const yx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vx=/([^\#-~ |!])/g;function bx(t){return t.replace(/&/g,"&amp;").replace(yx,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(vx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dg;function wx(t,e){let n=null;try{Dg=Dg||function hx(t){const e=new ZT(t);return function eM(){try{return!!(new window.DOMParser).parseFromString(za(""),"text/html")}catch{return!1}}()?new QT(e):e}(t);let i=e?String(e):"";n=Dg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Dg.getInertBodyElement(i)}while(i!==s);return za((new iM).sanitizeChildren(My(n)||n))}finally{if(n){const i=My(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function My(t){return"content"in t&&function Od(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ks=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ks||{});function Iy(t){const e=function vf(){const t=Mt();return t&&t[io].sanitizer}();return e?e.sanitize(ks.URL,t)||"":Jo(t,"URL")?Po(t):Mg(Tn(t))}const uM=/^>|^->|<!--|-->|--!>|<!-$/g,dM=/(<|>)/g,hM="\u200b$1\u200b";var Al=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Al||{});let Ly;function Fy(t,e){return Ly(t,e)}function Pd(t,e,n,i,r){if(null!=i){let s,o=!1;vs(i)?s=i:sr(i)&&(o=!0,i=i[mr]);const a=ji(i);0===t&&null!==n?null==r?Bx(e,n,a):Mu(e,n,a,r||null,!0):1===t&&null!==n?Mu(e,n,a,r||null,!0):2===t?function Rt(t,e,n){const i=Ng(t,e);i&&function MM(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function qn(t,e,n,i,r){const s=n[oc];s!==ji(n)&&Pd(e,t,i,s,r);for(let a=Sr;a<n.length;a++){const c=n[a];qt(c[Wt],c,t,e,i,s)}}(e,t,s,n,r)}}function xf(t,e){return t.createComment(function Cx(t){return t.replace(uM,e=>e.replace(dM,hM))}(e))}function Ld(t,e,n){return t.createElement(e,n)}function Lx(t,e){e[io].changeDetectionScheduler?.notify(1),qt(t,e,e[In],2,null,null)}function Fx(t,e){const n=t[Or],i=n.indexOf(e);n.splice(i,1)}function Ef(t,e){if(t.length<=Sr)return;const n=Sr+e,i=t[n];if(i){const r=i[mu];null!==r&&r!==t&&Fx(r,i),e>0&&(t[n-1][ka]=i[ka]);const s=Nc(t,Sr+e);!function wM(t,e){Lx(t,e),e[mr]=null,e[Ls]=null}(i[Wt],i);const o=s[Yr];null!==o&&o.detachView(s[Wt]),i[jr]=null,i[ka]=null,i[wn]&=-129}return i}function Og(t,e){if(!(256&e[wn])){const n=e[In];n.destroyNode&&qt(t,e,n,3,null,null),function EM(t){let e=t[jh];if(!e)return By(t[Wt],t);for(;e;){let n=null;if(sr(e))n=e[jh];else{const i=e[Sr];i&&(n=i)}if(!n){for(;e&&!e[ka]&&e!==t;)sr(e)&&By(e[Wt],e),e=e[jr];null===e&&(e=t),sr(e)&&By(e[Wt],e),n=e&&e[ka]}e=n}}(e)}}function By(t,e){if(256&e[wn])return;const n=z(null);try{e[wn]&=-129,e[wn]|=256,e[So]&&Qe(e[So]),function TM(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof rs)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];da(4,a,c);try{c.call(a)}finally{da(5,a,c)}}else{da(4,r,s);try{s.call(r)}finally{da(5,r,s)}}}}}(t,e),function CM(t,e){const n=t.cleanup,i=e[wd];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[wd]=null);const r=e[Uc];if(null!==r){e[Uc]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[Wt].type&&e[In].destroy();const i=e[mu];if(null!==i&&vs(e[jr])){i!==e[jr]&&Fx(i,e);const r=e[Yr];null!==r&&r.detachView(t)}!function yT(t){mg.delete(t[Uh])}(e)}finally{z(n)}}function jy(t,e,n){return function kx(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[mr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===La.None||s===La.Emulated)return null}return ro(i,n)}}(t,e.parent,n)}function Mu(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Bx(t,e,n){t.appendChild(e,n)}function jx(t,e,n,i,r){null!==i?Mu(t,e,n,i,r):Bx(t,e,n)}function Ng(t,e){return t.parentNode(e)}function d(t,e,n){return v(t,e,n)}let K,v=function p(t,e,n){return 40&t.type?ro(t,n):null};function Fe(t,e,n,i){const r=jy(t,i,e),s=e[In],a=d(i.parent||e[Ls],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)jx(s,r,n[c],a,!1);else jx(s,r,n,a,!1);void 0!==K&&K(s,i,e,n,r)}function et(t,e){if(null!==e){const n=e.type;if(3&n)return ro(e,t);if(4&n)return pt(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return et(t,i);{const r=t[e.index];return vs(r)?pt(-1,r):ji(r)}}if(32&n)return Fy(e,t)()||ji(t[e.index]);{const i=at(t,e);return null!==i?Array.isArray(i)?i[0]:et(To(t[Ai]),i):et(t,e.next)}}return null}function at(t,e){return null!==e?t[Ai][Ls].projection[e.projection]:null}function pt(t,e){const n=Sr+t+1;if(n<e.length){const i=e[n],r=i[Wt].firstChild;if(null!==r)return et(i,r)}return e[oc]}function Ut(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;if(o&&0===e&&(a&&qs(ji(a),i),n.flags|=2),32&~n.flags)if(8&c)Ut(t,e,n.child,i,r,s,!1),Pd(e,t,r,a,s);else if(32&c){const l=Fy(n,i);let u;for(;u=l();)Pd(e,t,r,u,s);Pd(e,t,r,a,s)}else 16&c?Dn(t,e,i,n,r,s):Pd(e,t,r,a,s);n=o?n.projectionNext:n.next}}function qt(t,e,n,i,r,s){Ut(n,i,t.firstChild,e,r,s,!1)}function Dn(t,e,n,i,r,s){const o=n[Ai],c=o[Ls].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Pd(e,t,r,c[l],s);else{let l=c;const u=o[jr];pg(i)&&(l.flags|=128),Ut(t,e,l,u,r,s,!0)}}function pi(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lo(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&I_(t,e,i),null!==r&&pi(t,e,r),null!==s&&function si(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const mn={};function Kt(t=1){Pr(ri(),Mt(),ws()+t,!1)}function Pr(t,e,n,i){if(!i)if(3&~e[wn]){const s=t.preOrderHooks;null!==s&&sg(e,s,0,n)}else{const s=t.preOrderCheckHooks;null!==s&&Zh(e,s,n)}dc(n)}function nt(t,e=hi.Default){const n=Mt();return null===n?ot(t,e):Tw(Ri(),n,yn(t),e)}function Uy(t,e,n,i,r,s){const o=z(null);try{let a=null;r&$t.SignalBased&&(a=e[i][$]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&$t.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),null!==t.setInput?t.setInput(e,a,s,n,i):aw(e,a,i,s)}finally{z(o)}}function Ux(t,e,n,i,r,s,o,a,c,l,u){const h=e.blueprint.slice();return h[mr]=r,h[wn]=204|i,(null!==l||t&&2048&t[wn])&&(h[wn]|=2048),Yh(h),h[jr]=h[xd]=t,h[Ki]=n,h[io]=o||t&&t[io],h[In]=a||t&&t[In],h[is]=c||t&&t[is]||null,h[Ls]=s,h[Uh]=function _g(){return mT++}(),h[Ao]=u,h[F_]=l,h[Ai]=2==e.type?t[Ai]:h,h}function Pg(t,e,n,i,r){let s=t.data[e];if(null===s)s=function DM(t,e,n,i,r){const s=W_(),o=vl(),c=t.data[e]=function gK(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return wu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,i,r),function XC(){return Ln.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function Xh(){const t=Ln.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ua(s,!0),s}function Vy(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Ik(t,e,n,i,r){const s=ws(),o=2&i;try{dc(-1),o&&e.length>Bn&&Pr(t,e,Bn,!1),da(o?2:0,r),n(i,r)}finally{dc(s),da(o?3:1,r)}}function RM(t,e,n){if(Ed(e)){const i=z(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{z(i)}}}function OM(t,e,n){G_()&&(function xK(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;qo(n)&&function IK(t,e,n){const i=ro(e,t),r=Dk(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Vx(t,Ux(t,r,null,o,i,e,null,t[io].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rf(n,e),qs(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const c=t.data[a],l=Su(e,t,a,n);qs(l,e),null!==o&&DK(0,a-r,l,c,0,o),or(c)&&(Co(n.index,e)[Ki]=Su(e,t,a,n))}}(t,e,n,ro(n,e)),!(64&~n.flags)&&Lk(t,e,n))}function NM(t,e,n=ro){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function Dk(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=PM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function PM(t,e,n,i,r,s,o,a,c,l,u){const h=Bn+i,f=h+r,g=function lK(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:mn);return n}(h,f),m="function"==typeof l?l():l;return g[Wt]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}let Rk=()=>null;function Ok(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,c=$t.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(null!==r){if(!r.hasOwnProperty(s))continue;l=r[s]}0===t?Nk(i,n,l,a,c):Nk(i,n,l,a)}return i}function Nk(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],void 0!==r&&s.push(r)}function _a(t,e,n,i,r,s,o,a){const c=ro(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(jM(t,n,u,i,r),qo(e)&&function yK(t,e){const n=Co(e,t);16&n[wn]||(n[wn]|=64)}(n,e.index)):3&e.type&&(i=function _K(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function LM(t,e,n,i){if(G_()){const r=null===i?null:{"":-1},s=function AK(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Lc(e,o.selectors,!1))if(i||(i=[]),or(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),FM(t,e,a.length)}else i.unshift(o),FM(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Pk(t,e,n,o,r,a),r&&function SK(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new St(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=pl(n.mergedAttrs,n.attrs)}function Pk(t,e,n,i,r,s){for(let l=0;l<i.length;l++)pa(rf(n,e),t,i[l].type);!function TK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Vy(t,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];n.mergedAttrs=pl(n.mergedAttrs,u.hostAttrs),MK(t,n,e,c,u),CK(c,u,r),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function mK(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],f=n?n.get(h):null,m=f?f.outputs:null;c=Ok(0,h.inputs,u,c,f?f.inputs:null),l=Ok(1,h.outputs,u,l,m);const y=null===c||null===o||yd(e)?null:RK(c,u,o);a.push(y)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,s)}function Lk(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function _w(){return Ln.lFrame.currentDirectiveIndex}();try{dc(s);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];Jh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&EK(c,l)}}finally{dc(-1),Jh(o)}}function EK(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function FM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function CK(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;or(e)&&(n[""]=t)}}function MK(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=vo(r.type)),o=new rs(s,or(r),nt);t.blueprint[i]=o,n[i]=o,function bK(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function wK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,Vy(t,n,r.hostVars,mn),r)}function Sl(t,e,n,i,r,s){const o=ro(t,e);!function kM(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?Tn(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[In],o,s,t.value,n,i,r)}function DK(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Uy(i,n,o[a++],o[a++],o[a++],o[a++])}function RK(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Fk(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function kk(t,e){const n=t.contentQueries;if(null!==n){const i=z(null);try{for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const a=t.data[o];fa(n[r]),a.contentQueries(2,e[o],o)}}}finally{z(i)}}}function Vx(t,e){return t[jh]?t[L_][ka]=e:t[jh]=e,t[L_]=e,e}function BM(t,e,n){fa(0);const i=z(null);try{e(t,n)}finally{z(i)}}function Bk(t){return t[wd]||(t[wd]=[])}function jk(t){return t.cleanup||(t.cleanup=[])}function Hx(t,e){const n=t[is],i=n?n.get(Ro,null):null;i&&i.handleError(e)}function jM(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=n[s++];Uy(t.data[o],e[o],i,a,c,r)}}function OK(t,e){const n=Co(e,t),i=n[Wt];!function NK(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[mr];null!==r&&null===n[Ao]&&(n[Ao]=vy(r,n[is])),UM(i,n,n[Ki])}function UM(t,e,n){K_(e);try{const i=t.viewQuery;null!==i&&BM(1,i,n);const r=t.template;null!==r&&Ik(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Yr]?.finishViewCreation(t),t.staticContentQueries&&kk(t,e),t.staticViewQueries&&BM(2,t.viewQuery,n);const s=t.components;null!==s&&function PK(t,e){for(let n=0;n<e.length;n++)OK(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[wn]&=-5,Qh()}}function Hy(t,e,n,i){const r=z(null);try{const s=e.tView,c=Ux(t,s,n,4096&t[wn]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[mu]=t[e.index];const u=t[Yr];return null!==u&&(c[Yr]=u.createEmbeddedView(s)),UM(s,c,n),c}finally{z(r)}}function Lg(t,e){return!e||null===e.firstChild||pg(t)}function zy(t,e,n,i=!0){const r=e[Wt];if(function AM(t,e,n,i){const r=Sr+i,s=n.length;i>0&&(n[r-1][ka]=e),i<s-Sr?(e[ka]=n[r],Gb(n,Sr+i,e)):(n.push(e),e[ka]=null),e[jr]=n;const o=e[mu];null!==o&&n!==o&&function SM(t,e){const n=t[Or];e[Ai]!==e[jr][jr][Ai]&&(t[wn]|=$p.HasTransplantedViews),null===n?t[Or]=[e]:n.push(e)}(o,e);const a=e[Yr];null!==a&&a.insertView(t),qh(e),e[wn]|=128}(r,e,t,n),i){const o=pt(n,t),a=e[In],c=Ng(a,t[oc]);null!==c&&function xM(t,e,n,i,r,s){i[mr]=r,i[Ls]=e,qt(t,i,n,1,r,s)}(r,t[Ls],a,e,c,o)}const s=e[Ao];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Gy(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];null!==s&&i.push(ji(s)),vs(s)&&Hk(s,i);const o=n.type;if(8&o)Gy(t,e,n.child,i);else if(32&o){const a=Fy(n,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=at(e,n);if(Array.isArray(a))i.push(...a);else{const c=To(e[Ai]);Gy(c[Wt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Hk(t,e){for(let n=Sr;n<t.length;n++){const i=t[n],r=i[Wt].firstChild;null!==r&&Gy(i[Wt],i,r,e)}t[oc]!==t[mr]&&e.push(t[oc])}let zk=[];const BK={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{bu(t.lView)},consumerOnSignalRead(){this.lView[So]=this}},Gk=100;function zx(t,e=!0,n=0){const i=t[io],r=i.rendererFactory;r.begin?.();try{!function jK(t,e){HM(t,e);let n=0;for(;Zp(t);){if(n===Gk)throw new St(103,!1);n++,HM(t,1)}}(t,n)}catch(o){throw e&&Hx(t,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function UK(t,e,n,i){const r=e[wn];if(!(256&~r))return;e[io].inlineEffectRunner?.flush(),K_(e);let o=null,a=null;(function VK(t){return 2!==t.type})(t)&&(a=function LK(t){return t[So]??function FK(t){const e=zk.pop()??Object.create(BK);return e.lView=t,e}(t)}(e),o=xe(a));try{Yh(e),function Kh(t){return Ln.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Ik(t,e,n,2,i);const c=!(3&~r);if(c){const h=t.preOrderCheckHooks;null!==h&&Zh(e,h,null)}else{const h=t.preOrderHooks;null!==h&&sg(e,h,0,null),og(e,0)}if(function HK(t){for(let e=hf(t);null!==e;e=ex(e)){if(!(e[wn]&$p.HasTransplantedViews))continue;const n=e[Or];for(let i=0;i<n.length;i++){fw(n[i])}}}(e),Wk(e,0),null!==t.contentQueries&&kk(t,e),c){const h=t.contentCheckHooks;null!==h&&Zh(e,h)}else{const h=t.contentHooks;null!==h&&sg(e,h,1),og(e,1)}!function cK(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)dc(~r);else{const s=r,o=n[++i],a=n[++i];eg(o,s),a(2,e[s])}}}finally{dc(-1)}}(t,e);const l=t.components;null!==l&&Yk(e,l,0);const u=t.viewQuery;if(null!==u&&BM(2,u,i),c){const h=t.viewCheckHooks;null!==h&&Zh(e,h)}else{const h=t.viewHooks;null!==h&&sg(e,h,2),og(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[_l]){for(const h of e[_l])h();e[_l]=null}e[wn]&=-73}catch(c){throw bu(e),c}finally{null!==a&&(Oe(a,o),function kK(t){t.lView[So]!==t&&(t.lView=null,zk.push(t))}(a)),Qh()}}function Wk(t,e){for(let n=hf(t);null!==n;n=ex(n))for(let i=Sr;i<n.length;i++)$k(n[i],e)}function zK(t,e,n){$k(Co(e,t),n)}function $k(t,e){ac(t)&&HM(t,e)}function HM(t,e){const i=t[Wt],r=t[wn],s=t[So];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!Ve(s)),s&&(s.dirty=!1),t[wn]&=-9217,o)UK(i,t,i.template,t[Ki]);else if(8192&r){Wk(t,1);const a=i.components;null!==a&&Yk(t,a,1)}}function Yk(t,e,n){for(let i=0;i<e.length;i++)zK(t,e[i],n)}function Wy(t){for(t[io].changeDetectionScheduler?.notify();t;){t[wn]|=64;const e=To(t);if(zh(t)&&!e)return t;t=e}return null}class $y{get rootNodes(){const e=this._lView,n=e[Wt];return Gy(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ki]}set context(e){this._lView[Ki]=e}get destroyed(){return!(256&~this._lView[wn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[jr];if(vs(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(Ef(e,i),Nc(n,i))}this._attachedToViewContainer=!1}Og(this._lView[Wt],this._lView)}onDestroy(e){ja(this._lView,e)}markForCheck(){Wy(this._cdRefInjectingView||this._lView)}detach(){this._lView[wn]&=-129}reattach(){qh(this._lView),this._lView[wn]|=128}detectChanges(){this._lView[wn]|=1024,zx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new St(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Lx(this._lView[Wt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new St(902,!1);this._appRef=e,qh(this._lView)}}let mc=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=$K}return t})();const GK=mc,WK=class extends GK{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=Hy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new $y(r)}};function $K(){return Gx(Ri(),Mt())}function Gx(t,e){return 4&t.type?new WK(e,t,Md(t,e)):null}let Zk=()=>null;function Fg(t,e){return Zk(t,e)}class qM{}class mJ{}class eB{}class yJ{resolveComponentFactory(e){throw function _J(t){const e=Error(`No component factory found for ${ii(t)}.`);return e.ngComponent=t,e}(e)}}let Fd=(()=>{class t{static#e=this.NULL=new yJ}return t})();class nB{}let Du=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function vJ(){const t=Mt(),n=Co(Ri().index,t);return(sr(n)?n:t)[In]}()}return t})(),bJ=(()=>{class t{static#e=this.\u0275prov=It({token:t,providedIn:"root",factory:()=>null})}return t})();const XM={},iB=new Set;function Cl(t){iB.has(t)||(iB.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rB(...t){}class _n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hn(!1),this.onMicrotaskEmpty=new hn(!1),this.onStable=new hn(!1),this.onError=new hn(!1),typeof Zone>"u")throw new St(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wJ(){const t="function"==typeof Pn.requestAnimationFrame;let e=Pn[t?"requestAnimationFrame":"setTimeout"],n=Pn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function AJ(t){const e=()=>{!function EJ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Pn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,JM(t),t.isCheckStableRunning=!0,KM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),JM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(function SJ(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(r,s,o,a);try{return sB(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),oB(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return sB(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),oB(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,JM(t),KM(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_n.isInAngularZone())throw new St(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new St(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,xJ,rB,rB);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const xJ={};function KM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function JM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sB(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oB(t){t._nesting--,KM(t)}class aB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn,this.onMicrotaskEmpty=new hn,this.onStable=new hn,this.onError=new hn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}let Jy=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of n)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=It({token:t,providedIn:"root",factory:()=>new t})}return t})();function Kx(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Os(r,a):2==s&&(i=Os(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}class fB extends Fd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Wn(e);return new e0(n,this.ngModule)}}function pB(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];void 0!==i&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}class gB{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Oh(i);const r=this.injector.get(e,XM,i);return r!==XM||n===XM?r:this.parentInjector.get(e,n,i)}}class e0 extends eB{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=pB(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return pB(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Kb(t){return t.map(jp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){const s=z(null);try{let o=(r=r||this.ngModule)instanceof ys?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new gB(e,o):e,c=a.get(nB,null);if(null===c)throw new St(407,!1);const l=a.get(bJ,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(Jy,null),changeDetectionScheduler:a.get(qM,null)},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=i?function uK(t,e,n,i){const s=i.get(ux,!1)||n===La.ShadowDom,o=t.selectRootElement(e,s);return function dK(t){Rk(t)}(o),o}(g,i,this.componentDef.encapsulation,a):Ld(g,m,function RJ(t){const e=t.toLowerCase();return"svg"===e?Yn:"math"===e?"math":null}(m));let w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let O=null;null!==y&&(O=vy(y,a,!0));const V=PM(0,null,null,1,0,null,null,null,null,null,null),ce=Ux(null,V,null,w,null,null,f,g,a,null,O);let re,Ie;K_(ce);try{const Ne=this.componentDef;let it,ut=null;Ne.findHostDirectiveDefs?(it=[],ut=new Map,Ne.findHostDirectiveDefs(Ne,it,ut),it.push(Ne)):it=[Ne];const Ye=function NJ(t,e){const n=t[Wt],i=Bn;return t[i]=e,Pg(n,i,2,"#host",null)}(ce,y),dt=function PJ(t,e,n,i,r,s,o){const a=r[Wt];!function LJ(t,e,n,i){for(const r of t)e.mergedAttrs=pl(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Kx(e,e.mergedAttrs,!0),null!==n&&Lo(i,n,e))}(i,t,e,o);let c=null;null!==e&&(c=vy(e,r[is]));const l=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const h=Ux(r,Dk(n),null,u,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&FM(a,t,i.length-1),Vx(r,h),r[t.index]=h}(Ye,y,Ne,it,ce,f,g);Ie=yu(V,Bn),y&&function kJ(t,e,n,i){if(i)I_(t,n,["ng-version","17.3.2"]);else{const{attrs:r,classes:s}=function Lh(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!Fa(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&I_(t,n,r),s&&s.length>0&&pi(t,n,s.join(" "))}}(g,Ne,y,i),void 0!==n&&function BJ(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(Ie,this.ngContentSelectors,n),re=function FJ(t,e,n,i,r,s){const o=Ri(),a=r[Wt],c=ro(o,r);Pk(a,r,o,n,null,i);for(let u=0;u<n.length;u++)qs(Su(r,a,o.directiveStart+u,o),r);Lk(a,r,o),c&&qs(c,r);const l=Su(r,a,o.directiveStart+o.componentOffset,o);if(t[Ki]=r[Ki]=l,null!==s)for(const u of s)u(l,e);return RM(a,o,r),l}(dt,Ne,it,ut,ce,[jJ]),UM(V,ce,null)}finally{Qh()}return new OJ(this.componentType,re,Md(Ie,ce),ce,Ie)}finally{z(s)}}}class OJ extends mJ{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $y(r,void 0,!1),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;jM(s[Wt],s,r,e,n),this.previousInputValues.set(e,n),Wy(Co(this._tNode.index,s))}}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function jJ(){const t=Ri();rg(Mt()[Wt],t)}let Fo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=UJ}return t})();function UJ(){return yB(Ri(),Mt())}const VJ=Fo,mB=class extends VJ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Md(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){const e=af(this._hostTNode,this._hostLView);if(cg(e)){const n=tf(e,this._hostLView),i=ef(e);return new ss(n[Wt].data[i+8],n)}return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=_B(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Fg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Lg(this._hostTNode,o)),a}createComponent(e,n,i,r,s){const o=e&&!function Bh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const c=o?e:new e0(Wn(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const y=(o?l:this.parentInjector).get(ys,null);y&&(s=y)}const u=Wn(c.componentType??{}),h=Fg(this._lContainer,u?.id??null),g=c.create(l,r,h?.firstChild??null,s);return this.insertImpl(g.hostView,a,Lg(this._hostTNode,h)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){const r=e._lView;if(function V_(t){return vs(t[jr])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[jr],l=new mB(c,c[Ls],c[jr]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;return zy(o,r,s,i),e.attachToViewContainerRef(),Gb(tI(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=_B(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=Ef(this._lContainer,n);i&&(Nc(tI(this._lContainer),n),Og(i[Wt],i))}detach(e){const n=this._adjustIndex(e,-1),i=Ef(this._lContainer,n);return i&&null!=Nc(tI(this._lContainer),n)?new $y(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function _B(t){return t[8]}function tI(t){return t[8]||(t[8]=[])}function yB(t,e){let n;const i=e[t.index];return vs(i)?n=i:(n=Fk(i,e,null,t),e[t.index]=n,Vx(e,n)),vB(n,e,t,i),new mB(n,t,e)}let vB=function wB(t,e,n,i){if(t[oc])return;let r;r=8&n.type?ji(i):function HJ(t,e){const n=t[In],i=n.createComment(""),r=ro(e,t);return Mu(n,Ng(n,r),i,function IM(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[oc]=r},nI=()=>!1;class iI{constructor(e){this.queryList=e,this.matches=null}clone(){return new iI(this.queryList)}setDirty(){this.queryList.setDirty()}}class rI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new rI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==lI(e,n).matches&&this.queries[n].setDirty()}}class xB{constructor(e,n,i=null){this.flags=n,this.read=i,this.predicate="string"==typeof e?function KJ(t){return t.split(",").map(e=>e.trim())}(e):e}}class sI{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new sI(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class oI{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new oI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,$J(n,s)),this.matchTNodeWithReadOption(e,n,dg(n,e,s,!1,!1))}else i===mc?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,dg(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ni||r===Fo||r===mc&&4&n.type)this.addMatch(n.index,-2);else{const s=dg(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function $J(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function qJ(t,e,n,i){return-1===n?function YJ(t,e){return 11&t.type?Md(t,e):4&t.type?Gx(t,e):null}(e,t):-2===n?function XJ(t,e,n){return n===ni?Md(e,t):n===mc?Gx(e,t):n===Fo?yB(e,t):void 0}(t,e,i):Su(t,t[Wt],n,e)}function EB(t,e,n,i){const r=e[Yr].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:qJ(e,s[l],o[c+1],n.metadata.read))}r.matches=a}return r.matches}function aI(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=EB(t,e,r,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let h=Sr;h<u.length;h++){const f=u[h];f[mu]===f[jr]&&aI(f[Wt],f,l,i)}if(null!==u[Or]){const h=u[Or];for(let f=0;f<h.length;f++){const g=h[f];aI(g[Wt],g,l,i)}}}}}return i}function AB(t,e,n){const i=new lf(!(4&~n));return function pK(t,e,n,i){const r=Bk(e);r.push(n),t.firstCreatePass&&jk(t).push(i,r.length-1)}(t,e,i,i.destroy),(e[Yr]??=new rI).queries.push(new iI(i))-1}function TB(t,e,n){null===t.queries&&(t.queries=new sI),t.queries.track(new oI(e,n))}function lI(t,e){return t.queries.getByIndex(e)}function MB(t,e){const n=t[Wt],i=lI(n,e);return i.crossesNgTemplate?aI(n,t,e,[]):EB(n,t,i,e)}function Jx(t){return"function"==typeof t&&void 0!==t[$]}function gi(t){let e=function VB(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(or(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new St(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=Zx(t.inputs),o.inputTransforms=Zx(t.inputTransforms),o.declaredInputs=Zx(t.declaredInputs),o.outputs=Zx(t.outputs);const a=r.hostBindings;a&&hQ(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&uQ(t,c),l&&dQ(t,l),cQ(t,r),Na(t.outputs,r.outputs),or(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===gi&&(n=!1)}}e=Object.getPrototypeOf(e)}!function lQ(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=pl(r.hostAttrs,n=pl(n,r.hostAttrs))}}(i)}function cQ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const i=e.inputs[n];if(void 0!==i&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function Zx(t){return t===bt?{}:t===Ht?[]:t}function uQ(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function dQ(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function hQ(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function Gc(t){const e=t.inputConfig,n={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}class Sf{}class WB{}class dI extends Sf{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fB(this);const r=function $s(t,e){const n=t[Bb]||null;if(!n&&!0===e)throw new Error(`Type ${ii(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Ji(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=Uw(e,n,[{provide:Sf,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver},...i],ii(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class hI extends WB{constructor(e){super(),this.moduleType=e}create(e){return new dI(this.moduleType,e,[])}}class $B extends Sf{constructor(e){super(),this.componentFactoryResolver=new fB(this),this.instance=null;const n=new kc([...e.providers,{provide:Sf,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],e.parent||Re(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let jd=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tE(t){return!!function pI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Tl(t,e,n){return t[e]=n}function os(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vi(t,e,n,i,r,s,o,a){const c=Mt(),l=ri(),u=t+Bn,h=l.firstCreatePass?function SQ(t,e,n,i,r,s,o,a,c){const l=e.consts,u=Pg(e,t,4,o||null,Ba(l,a));LM(e,n,u,Ba(l,c)),rg(e,u);const h=u.tView=PM(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,i,r,s,o):l.data[u];Ua(h,!1);const f=YB(l,c,h,t);Ad()&&Fe(l,c,f,h),qs(f,c);const g=Fk(f,c,f,h);return c[u]=g,Vx(c,g),function bB(t,e,n){return nI(t,e,n)}(g,h,c),Hh(h)&&OM(l,c,h),null!=o&&NM(c,h,a),vi}let YB=function qB(t,e,n,i){return ar(!0),e[In].createComment("")};function _r(t,e,n,i){const r=Mt();return os(r,Ko(),e)&&(ri(),Sl(Si(),r,t,e,n,i)),_r}function Wg(t,e,n,i){return os(t,Ko(),n)?e+Tn(n)+i:mn}function cE(t,e){return t<<17|e<<2}function Vd(t){return t>>17&32767}function AI(t){return 2|t}function Mf(t){return(131068&t)>>2}function SI(t,e){return-131069&t|e<<2}function CI(t){return 1|t}function C3(t,e,n,i){const r=t[n+1],s=null===e;let o=i?Vd(r):Mf(r),a=!1;for(;0!==o&&(!1===a||s);){const l=t[o+1];uZ(t[o],e)&&(a=!0,t[o+1]=i?CI(l):AI(l)),o=i?Vd(l):Mf(l)}a&&(t[n+1]=i?AI(r):CI(r))}function uZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Pc(t,e)>=0}const Bs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T3(t){return t.substring(Bs.key,Bs.keyEnd)}function dZ(t){return t.substring(Bs.value,Bs.valueEnd)}function M3(t,e){const n=Bs.textEnd;return n===e?-1:(e=Bs.keyEnd=function pZ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Bs.key=e,n),Zg(t,e,n))}function I3(t,e){const n=Bs.textEnd;let i=Bs.key=Zg(t,e,n);return n===i?-1:(i=Bs.keyEnd=function gZ(t,e,n){let i;for(;e<n&&(45===(i=t.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(t,i,n),i=R3(t,i,n),i=Bs.value=Zg(t,i,n),i=Bs.valueEnd=function mZ(t,e,n){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<n;){const c=t.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=O3(t,c,o,n):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=O3(t,41,o,n):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(t,i,n),R3(t,i,n))}function D3(t){Bs.key=0,Bs.keyEnd=0,Bs.value=0,Bs.valueEnd=0,Bs.textEnd=t.length}function Zg(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function R3(t,e,n,i){return(e=Zg(t,e,n))<n&&e++,e}function O3(t,e,n,i){let r=-1,s=n;for(;s<i;){const o=t.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Un(t,e,n){const i=Mt();return os(i,Ko(),e)&&_a(ri(),Si(),i,t,e,i[In],n,!1),Un}function TI(t,e,n,i,r){const o=r?"class":"style";jM(t,n,e.inputs[o],o,i)}function c0(t,e,n){return $c(t,e,n,!1),c0}function Vi(t,e){return $c(t,e,null,!0),Vi}function _Z(t,e){for(let n=function fZ(t){return D3(t),I3(t,Zg(t,0,Bs.textEnd))}(e);n>=0;n=I3(e,n))L3(t,T3(e),dZ(e))}function Ru(t){Yc(EZ,Ml,t,!0)}function Ml(t,e){for(let n=function hZ(t){return D3(t),M3(t,Zg(t,0,Bs.textEnd))}(e);n>=0;n=M3(e,n))Yo(t,T3(e),!0)}function $c(t,e,n,i){const r=Mt(),s=ri(),o=ha(2);s.firstUpdatePass&&P3(s,t,o,i),e!==mn&&os(r,o,e)&&F3(s,s.data[ws()],r,r[In],t,r[o+1]=function SZ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ii(Po(t)))),t}(e,n),i,o)}function Yc(t,e,n,i){const r=ri(),s=ha(2);r.firstUpdatePass&&P3(r,null,s,i);const o=Mt();if(n!==mn&&os(o,s,n)){const a=r.data[ws()];if(B3(a,i)&&!N3(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Os(c,n||"")),TI(r,a,o,n,i)}else!function AZ(t,e,n,i,r,s,o,a){r===mn&&(r=Ht);let c=0,l=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let y,m=null;u===h?(c+=2,l+=2,f!==g&&(m=h,y=g)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,y=g),null!==m&&F3(t,e,n,i,m,y,o,a),u=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[In],o[s+1],o[s+1]=function xZ(t,e,n){if(null==n||""===n)return Ht;const i=[],r=Po(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function N3(t,e){return e>=t.expandoStartIndex}function P3(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[ws()],o=N3(t,n);B3(s,i)&&null===e&&!o&&(e=!1),e=function yZ(t,e,n,i){const r=function q_(t){const e=Ln.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=l0(n=MI(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=MI(r,t,e,n,i),null===s){let c=function vZ(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Mf(i))return t[Vd(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=MI(null,t,e,c[1],i),c=l0(c,e.attrs,i),function bZ(t,e,n,i){t[Vd(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else s=function wZ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=l0(i,t[s].hostAttrs,n);return l0(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function cZ(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Vd(o),c=Mf(o);t[i]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||Pc(n,u)>0)&&(l=!0)):u=n,r)if(0!==c){const f=Vd(t[a+1]);t[i+1]=cE(f,a),0!==f&&(t[f+1]=SI(t[f+1],i)),t[a+1]=function oZ(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=cE(a,0),0!==a&&(t[a+1]=SI(t[a+1],i)),a=i;else t[i+1]=cE(c,0),0===a?a=i:t[c+1]=SI(t[c+1],i),c=i;l&&(t[i+1]=AI(t[i+1])),C3(t,u,i,!0),C3(t,u,i,!1),function lZ(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Pc(s,e)>=0&&(n[i+1]=CI(n[i+1]))}(e,u,t,i,s),o=cE(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function MI(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=l0(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function l0(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Yo(t,o,!!n||e[++s]))}return void 0===t?null:t}function L3(t,e,n){Yo(t,e,Po(n))}function EZ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&Yo(t,i,n)}function F3(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],u=function aZ(t){return!(1&~t)}(l)?k3(c,e,n,r,Mf(l),o):void 0;lE(u)||(lE(s)||function sZ(t){return!(2&~t)}(l)&&(s=k3(c,null,n,r,a,o)),function Nn(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:Al.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Al.Important),t.setStyle(n,i,r,s))}}(i,o,Ys(ws(),n),r,s))}function k3(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=n[r+1];f===mn&&(f=h?Ht:void 0);let g=h?M_(f,i):u===i?f:void 0;if(l&&!lE(g)&&(g=M_(c,i)),lE(g)&&(a=g,o))return a;const m=t[r+1];r=o?Vd(m):Mf(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=M_(c,i))}return a}function lE(t){return void 0!==t}function B3(t,e){return!!(t.flags&(e?8:16))}function xs(t,e,n){Cl("NgControlFlow");const i=Mt(),r=Ko(),s=function RI(t,e){return t[e]}(i,Bn+t);if(os(i,r,e)){const a=z(null);try{if(function VM(t,e){const n=Ef(t,e);return void 0!==n&&Og(n[Wt],n),n}(s,0),-1!==e){const c=function OI(t,e){return yu(t,e)}(i[Wt],Bn+e),l=Fg(s,c.tView.ssrId);zy(s,Hy(i,c,n,{dehydratedView:l}),0,Lg(c,l))}}finally{z(a)}}else{const a=function Vk(t,e){const n=Sr+e;if(n<t.length)return t[n]}(s,0);void 0!==a&&(a[Ki]=n)}}function en(t,e,n,i){const r=Mt(),s=ri(),o=Bn+t,a=r[In],c=s.firstCreatePass?function YZ(t,e,n,i,r,s){const o=e.consts,c=Pg(e,t,2,i,Ba(o,r));return LM(e,n,c,Ba(o,s)),null!==c.attrs&&Kx(c,c.attrs,!1),null!==c.mergedAttrs&&Kx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,n,i):s.data[o],l=H3(s,r,c,a,e,t);r[o]=l;const u=Hh(c);return Ua(c,!0),Lo(a,l,c),!function r0(t){return!(32&~t.flags)}(c)&&Ad()&&Fe(s,r,l,c),0===function zC(){return Ln.lFrame.elementDepthCount}()&&qs(l,r),function GC(){Ln.lFrame.elementDepthCount++}(),u&&(OM(s,r,c),RM(s,c,r)),null!==i&&NM(r,c),en}function sn(){let t=Ri();vl()?xu():(t=t.parent,Ua(t,!1));const e=t;(function $C(t){return Ln.skipHydrationRootTNode===t})(e)&&function cc(){Ln.skipHydrationRootTNode=null}(),function WC(){Ln.lFrame.elementDepthCount--}();const n=ri();return n.firstCreatePass&&(rg(n,t),Ed(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function QC(t){return!!(8&t.flags)}(e)&&TI(n,e,Mt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ZC(t){return!!(16&t.flags)}(e)&&TI(n,e,Mt(),e.stylesWithoutHost,!1),sn}function Qi(t,e,n,i){return en(t,e,n,i),sn(),Qi}let H3=(t,e,n,i,r,s)=>(ar(!0),Ld(i,r,function ww(){return Ln.lFrame.currentNamespace}()));function u0(t,e,n){const i=Mt(),r=ri(),s=t+Bn,o=r.firstCreatePass?function KZ(t,e,n,i,r){const s=e.consts,o=Ba(s,i),a=Pg(e,t,8,"ng-container",o);return null!==o&&Kx(a,o,!0),LM(e,n,a,Ba(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];Ua(o,!0);const a=G3(r,i,o,t);return i[s]=a,Ad()&&Fe(r,i,a,o),qs(a,i),Hh(o)&&(OM(r,i,o),RM(r,o,i)),null!=n&&NM(i,o),u0}function d0(){let t=Ri();const e=ri();return vl()?xu():(t=t.parent,Ua(t,!1)),e.firstCreatePass&&(rg(e,t),Ed(t)&&e.queries.elementEnd(t)),d0}let G3=(t,e,n,i)=>(ar(!0),xf(e[In],""));function Wa(){return Mt()}function Hd(t,e,n){const i=Mt();return os(i,Ko(),e)&&_a(ri(),Si(),i,t,e,i[In],n,!0),Hd}const tm="en-US";let q3=tm;function oi(t,e,n,i){const r=Mt(),s=ri(),o=Ri();return function LI(t,e,n,i,r,s,o){const a=Hh(i),l=t.firstCreatePass&&jk(t),u=e[Ki],h=Bk(e);let f=!0;if(3&i.type||o){const y=ro(i,e),w=o?o(y):y,O=h.length,V=o?re=>o(ji(re[i.index])):i.index;let ce=null;if(!o&&a&&(ce=function Jee(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[wd],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==ce)(ce.__ngLastListenerFn__||ce).__ngNextListenerFn__=s,ce.__ngLastListenerFn__=s,f=!1;else{s=xj(i,e,u,s,!1);const re=n.listen(w,r,s);h.push(s,re),l&&l.push(r,V,O,O+1)}}else s=xj(i,e,u,s,!1);const g=i.outputs;let m;if(f&&null!==g&&(m=g[r])){const y=m.length;if(y)for(let w=0;w<y;w+=2){const Ie=e[m[w]][m[w+1]].subscribe(s),Ne=h.length;h.push(s,Ie),l&&l.push(r,i.index,Ne,-(Ne+1))}}}(s,r,r[In],o,t,e,i),oi}function wj(t,e,n,i){const r=z(null);try{return da(6,e,n),!1!==n(i)}catch(s){return Hx(t,s),!1}finally{da(7,e,n),z(r)}}function xj(t,e,n,i,r){return function s(o){if(o===Function)return i;Wy(t.componentOffset>-1?Co(t.index,e):e);let c=wj(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=wj(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function Lr(t=1){return function Q_(t){return(Ln.lFrame.contextLView=function Qp(t,e){for(;t>0;)e=e[xd],t--;return e}(t,Ln.lFrame.contextLView))[Ki]}(t)}function Qee(t,e){let n=null;const i=function kp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Lc(t,s,!0):Xb(i,s))return r}else n=r}return n}function Zo(t){const e=Mt()[Ai][Ls];if(!e.projection){const i=e.projection=function wo(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?Qee(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ci(t,e=0,n){const i=Mt(),r=ri(),s=Pg(r,Bn+t,16,null,n||null);null===s.projection&&(s.projection=e),xu(),(!i[Ao]||wu())&&32&~s.flags&&function fn(t,e,n){Dn(e[In],0,e,n,jy(t,n,e),d(n.parent||e[Ls],n,e))}(r,i,s)}function FI(t,e,n){return kI(t,"",e,"",n),FI}function kI(t,e,n,i,r){const s=Mt(),o=Wg(s,e,n,i);return o!==mn&&_a(ri(),Si(),s,t,o,s[In],r,!1),kI}function yc(t,e,n,i){!function CB(t,e,n,i){const r=ri();if(r.firstCreatePass){const s=Ri();TB(r,new xB(e,n,i),s.index),function JJ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),!(2&~n)&&(r.staticContentQueries=!0)}return AB(r,Mt(),n)}(t,e,n,i)}function js(t,e,n){!function SB(t,e,n){const i=ri();return i.firstCreatePass&&(TB(i,new xB(t,e,n),-1),!(2&~e)&&(i.staticViewQueries=!0)),AB(i,Mt(),e)}(t,e,n)}function Hi(t){const e=Mt(),n=ri(),i=tg();fa(i+1);const r=lI(n,i);if(t.dirty&&function Xo(t){return!(4&~t[wn])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)t.reset([]);else{const s=MB(e,i);t.reset(s,Gw),t.notifyOnChanges()}return!0}return!1}function zi(){return function cI(t,e){return t[Yr].queries[e].queryList}(Mt(),tg())}function Df(t){return vu(function YC(){return Ln.lFrame.contextLView}(),Bn+t)}function Es(t,e=""){const n=Mt(),i=ri(),r=t+Bn,s=i.firstCreatePass?Pg(i,r,1,e,null):i.data[r],o=Uj(i,n,s,e,t);n[r]=o,Ad()&&Fe(i,n,o,s),Ua(s,!1)}let Uj=(t,e,n,i,r)=>(ar(!0),function ky(t,e){return t.createText(e)}(e[In],i));function qc(t){return Il("",t,""),qc}function Il(t,e,n){const i=Mt(),r=Wg(i,t,e,n);return r!==mn&&function Iu(t,e,n){const i=Ys(e,t);!function Px(t,e,n){t.setValue(e,n)}(t[In],i,n)}(i,ws(),r),Il}function BI(t,e,n,i,r){if(t=yn(t),Array.isArray(t))for(let s=0;s<t.length;s++)BI(t[s],e,n,i,r);else{const s=ri(),o=Mt(),a=Ri();let c=hu(t)?t:yn(t.provide);const l=tw(t),u=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(hu(t)||!t.multi){const g=new rs(l,r,nt),m=UI(c,e,r?u:u+f,h);-1===m?(pa(rf(a,o),s,c),jI(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[m]=g,o[m]=g)}else{const g=UI(c,e,u+f,h),m=UI(c,e,u,u+f),w=m>=0&&n[m];if(r&&!w||!r&&!(g>=0&&n[g])){pa(rf(a,o),s,c);const O=function yte(t,e,n,i,r){const s=new rs(t,n,nt);return s.multi=[],s.index=e,s.componentProviders=0,Jj(s,r,i&&!n),s}(r?_te:mte,n.length,r,i,l);!r&&w&&(n[m].providerFactory=O),jI(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else jI(s,t,g>-1?g:m,Jj(n[r?m:g],l,!r&&i));!r&&i&&w&&n[m].componentProviders++}}}function jI(t,e,n,i){const r=hu(e),s=function bC(t){return!!t.useClass}(e);if(r||s){const c=(s?yn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(n);-1===u?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function Jj(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function UI(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function mte(t,e,n,i){return VI(this.multi,[])}function _te(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Su(n,n[Wt],this.providerFactory.index,i);s=a.slice(0,o),VI(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],VI(r,s);return s}function VI(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function wi(t,e=[]){return n=>{n.providersResolver=(i,r)=>function gte(t,e,n){const i=ri();if(i.firstCreatePass){const r=or(t);BI(n,i.data,i.blueprint,r,!0),BI(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}let vte=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const i=uu(0,n.type),r=i.length>0?function fI(t,e,n=null){return new $B({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=It({token:t,providedIn:"environment",factory:()=>new t(ot(ys))})}return t})();function ls(t){Cl("NgStandalone"),t.getStandaloneInjector=e=>e.get(vte).getOrCreateStandaloneInjector(t)}function nm(t,e,n){const i=bs()+t,r=Mt();return r[i]===mn?Tl(r,i,n?e.call(n):e()):function n0(t,e){return t[e]}(r,i)}function Zj(t,e,n,i,r,s){const o=e+n;return os(t,o,r)?Tl(t,o+1,s?i.call(s,r):i(r)):function y0(t,e){const n=t[e];return n===mn?void 0:n}(t,o+1)}function qr(t,e){const n=ri();let i;const r=t+Bn;n.firstCreatePass?(i=function Rte(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=vo(i.type)),a=no(nt);try{const c=nf(!1),l=s();return nf(c),function nte(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Mt(),r,l),l}finally{no(a)}}function Xr(t,e,n){const i=t+Bn,r=Mt(),s=vu(r,i);return function v0(t,e){return t[Wt].data[e].pure}(r,i)?Zj(r,bs(),e,s.transform,n,s):s.transform(n)}function rU(t,e){return Gx(t,e)}const SU=new Et(""),_E=new Et("");let XI,YI=(()=>{class t{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,XI||(function Mne(t){XI=t}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n()},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(ot(_n),ot(qI),ot(_E))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})(),qI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return XI?.findTestabilityInTree(this,n,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function sm(t){return!!t&&"function"==typeof t.then}function CU(t){return!!t&&"function"==typeof t.subscribe}const KI=new Et("");let JI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=Ot(KI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const r of this.appInits){const s=r();if(sm(s))n.push(s);else if(CU(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yE=new Et("");function IU(t,e){return Array.isArray(e)?e.reduce(IU,t):{...t,...e}}let Ou=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ot(Hw),this.afterRenderEffectManager=Ot(Jy),this.externalTestViews=new Set,this.beforeRender=new Qt,this.afterTick=new Qt,this.componentTypes=[],this.components=[],this.isStable=Ot(jd).hasPendingTasks.pipe(Xt(n=>!n)),this._injector=Ot(ys)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof eB;if(!this._injector.get(JI).done)throw!r&&function gl(t){const e=Wn(t)||ts(t)||_s(t);return null!==e&&e.standalone}(n),new St(405,!1);let o;o=r?n:this._injector.get(Fd).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Ine(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Sf),l=o.create(Ui.NULL,[],i||o.selector,a),u=l.location.nativeElement,h=l.injector.get(SU,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),vE(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new St(101,!1);const i=z(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,z(i)}}detectChangesInAttachedViews(n){let i=0;const r=this.afterRenderEffectManager;for(;;){if(i===Gk)throw new St(103,!1);if(n){const s=0===i;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)Rne(o,s,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>QI(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>QI(s))))break}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;vE(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(yE,[]);[...this._bootstrapListeners,...i].forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>vE(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new St(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Rne(t,e,n){!e&&!QI(t)||function One(t,e,n){let i;n?(i=0,t[wn]|=1024):i=64&t[wn]?0:1,zx(t,e,i)}(t,n,e)}function QI(t){return Zp(t)}let kne=(()=>{class t{constructor(){this.zone=Ot(_n),this.applicationRef=Ot(Ou)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bne(){const t=Ot(_n),e=Ot(Ro);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Une=(()=>{class t{constructor(){this.subscription=new kt,this.initialized=!1,this.zone=Ot(_n),this.pendingTasks=Ot(jd)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_n.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Dl=new Et("",{providedIn:"root",factory:()=>Ot(Dl,hi.Optional|hi.SkipSelf)||function Vne(){return typeof $localize<"u"&&$localize.locale||tm}()}),ZI=new Et("");let NU=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function CJ(t="zone.js",e){return"noop"===t?new aB:"zone.js"===t?new _n(e):t}(i?.ngZone,function OU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function vQ(t,e,n){return new dI(t,e,n)}(n.moduleType,this.injector,function RU(t){return[{provide:_n,useFactory:t},{provide:On,multi:!0,useFactory:()=>{const e=Ot(kne,{optional:!0});return()=>e.initialize()}},{provide:On,multi:!0,useFactory:()=>{const e=Ot(Une);return()=>{e.initialize()}}},{provide:Hw,useFactory:Bne}]}(()=>r)),o=s.injector.get(Ro,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{vE(this._modules,s),a.unsubscribe()})}),function MU(t,e,n){try{const i=n();return sm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(JI);return a.runInitializers(),a.donePromise.then(()=>(function X3(t){"string"==typeof t&&(q3=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Dl,tm)||tm),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,i=[]){const r=IU({},i);return function Fne(t,e,n){const i=new hI(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Ou);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new St(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new St(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(ZI,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ui))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Gd=null;const PU=new Et("");function LU(t,e,n=[]){const i=`Platform: ${e}`,r=new Et(i);return(s=[])=>{let o=eD();if(!o||o.injector.get(PU,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function Gne(t){if(Gd&&!Gd.get(PU,!1))throw new St(400,!1);(function TU(){!function ie(t){R=t}(()=>{throw new St(600,!1)})})(),Gd=t;const e=t.get(NU);(function kU(t){t.get(pf,null)?.forEach(n=>n())})(t)}(function FU(t=[],e){return Ui.create({name:e,providers:[{provide:O_,useValue:"platform"},{provide:ZI,useValue:new Set([()=>Gd=null])},...t]})}(a,i))}return function Wne(t){const e=eD();if(!e)throw new St(401,!1);return e}()}}function eD(){return Gd?.get(NU)??null}let oo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Yne}return t})();function Yne(t){return function qne(t,e,n){if(qo(t)&&!n){const i=Co(t.index,e);return new $y(i,i)}return 47&t.type?new $y(e[Ai],e):null}(Ri(),Mt(),!(16&~t))}class HU{constructor(){}supports(e){return tE(e)}create(e){return new Zne(e)}}const Qne=(t,e)=>e;class Zne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Qne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<GU(i,r,s)?n:i,a=GU(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<l&&(s[f]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!tE(e))throw new St(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function EQ(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new eie(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new zU),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class eie{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tie{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class zU{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new tie,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GU(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function $U(){return new sD([new HU])}let sD=(()=>{class t{static#e=this.\u0275prov=It({token:t,providedIn:"root",factory:$U});constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||$U()),deps:[[t,new gd,new pd]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new St(901,!1)}}return t})();const oie=LU(null,"core",[]);let aie=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ou))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({})}return t})();function vr(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function A0(t,e=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function gV(t){const e=z(null);try{return t()}finally{z(e)}}const kie=new Et("",{providedIn:"root",factory:()=>Ot(Bie)});let Bie=(()=>{class t{static#e=this.\u0275prov=It({token:t,providedIn:"root",factory:()=>new jie})}return t})();class jie{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Ot(jd),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){const n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);const i=this.queues.get(n);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,n]of this.queues)null===e?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(const n of e)e.delete(n),this.queuedEffectCount--,n.run()}}class Uie{constructor(e,n,i,r,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=i,this.injector=s,this.watcher=function he(t,e,n){const i=Object.create(Ee);n&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;const r=c=>{i.cleanupFn=c};return i.ref={notify:()=>ae(i),run:()=>{if(null===i.fn)return;if(function Y(){return k}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!Ve(i))return;i.hasRun=!0;const c=xe(i);try{i.cleanupFn(),i.cleanupFn=We,i.fn(r)}finally{Oe(i,c)}},cleanup:()=>i.cleanupFn(),destroy:()=>function o(c){(function s(c){return null===c.fn&&null===c.schedule})(c)||(Qe(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=We)}(i),[$]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Ro,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function mV(t,e){Cl("NgSignals"),!e?.injector&&function la(t){if(!nw())throw new St(-203,!1)}();const n=e?.injector??Ot(Ui),i=!0!==e?.manualCleanup?n.get(Td):null,r=new Uie(n.get(kie),t,typeof Zone>"u"?null:Zone.current,i,n,e?.allowSignalWrites??!1),s=n.get(oo,null,{optional:!0});return s&&8&s._lView[wn]?(s._lView[_l]??=[]).push(r.watcher.notify):r.watcher.notify(),r}let _V=null;function Wd(){return _V}class Hie{}const ai=new Et("");let yV=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:()=>Ot(zie),providedIn:"platform"})}return t})(),zie=(()=>{class t extends yV{constructor(){super(),this._doc=Ot(ai),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wd().getBaseHref(this._doc)}onPopState(n){const i=Wd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=Wd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function vV(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function bV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Of(t){return t&&"?"!==t[0]?"?"+t:t}let IE=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:()=>Ot(Wie),providedIn:"root"})}return t})();const Gie=new Et("");let Wie=(()=>{class t extends IE{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ot(ai).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vV(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Of(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+Of(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+Of(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(yV),ot(Gie,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nf=(()=>{class t{constructor(n){this._subject=new hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function qie(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(bV(wV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Of(i))}normalize(n){return t.stripTrailingSlash(function Yie(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,wV(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Of(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Of(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}static#e=this.normalizeQueryParams=Of;static#t=this.joinWithSlash=vV;static#n=this.stripTrailingSlash=bV;static#i=this.\u0275fac=function(i){return new(i||t)(ot(IE))};static#r=this.\u0275prov=It({token:t,factory:()=>function $ie(){return new Nf(ot(IE))}(),providedIn:"root"})}return t})();function wV(t){return t.replace(/\/index.html$/,"")}function DV(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const _D=/\s+/,RV=[];let OV=(()=>{class t{constructor(n,i){this._ngEl=n,this._renderer=i,this.initialClasses=RV,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(_D):RV}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(_D):n}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const i of n)this._updateState(i,!0);else if(null!=n)for(const i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){const r=this.stateMap.get(n);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){(n=n.trim()).length>0&&n.split(_D).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(Du))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[$t.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class Nre{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cm=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Nre(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),PV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{PV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Fo),nt(mc),nt(sD))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function PV(t,e){t.context.$implicit=e.item}let yD=(()=>{class t{constructor(n,i){this._viewContainer=n,this._context=new Pre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){LV("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){LV("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Fo),nt(mc))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class Pre{constructor(){this.$implicit=null,this.ngIf=null}}function LV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ii(e)}'.`)}let kV=(()=>{class t{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,r),get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Fo))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Cr]})}return t})();class Ure{createSubscription(e,n){return gV(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){gV(()=>e.unsubscribe())}}class Vre{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const Hre=new Vre,zre=new Ure;let C0=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(sm(n))return Hre;if(CU(n))return zre;throw function Kc(t,e){return new St(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(nt(oo,16))};static#t=this.\u0275pipe=es({name:"async",type:t,pure:!1,standalone:!0})}return t})(),lm=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({})}return t})();const jV="browser";function $d(t){return t===jV}function ED(t){return"server"===t}class UV{}class Bse extends Hie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class SD extends Bse{static makeCurrent(){!function Vie(t){_V??=t}(new SD)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function jse(){return I0=I0||document.querySelector("base"),I0?I0.getAttribute("href"):null}();return null==n?null:function Use(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){I0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return DV(document.cookie,e)}}let I0=null,Hse=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const CD=new Et("");let XV=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(s=>s.supports(n)),!i)throw new St(5101,!1);return this._eventNameToPlugin.set(n,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(ot(CD),ot(_n))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();class KV{constructor(e){this._doc=e}}const TD="ng-app-id";let JV=(()=>{class t{constructor(n,i,r,s={}){this.doc=n,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ED(s),this.resetHostNodes()}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.elements?.forEach(r=>r.remove()),i.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${TD}="${this.appId}"]`);if(n?.length){const i=new Map;return n.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(n,i){const r=this.styleRef;if(r.has(n)){const s=r.get(n);return s.usage+=i,s.usage}return r.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===n)return r.delete(i),s.removeAttribute(TD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(TD,this.appId),n.appendChild(o),o}}addStyleToHost(n,i){const r=this.getStyleElement(n,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai),ot(bg),ot(gf,8),ot(Va))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const MD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ID=/%COMP%/g,$se=new Et("",{providedIn:"root",factory:()=>!0});function ZV(t,e){return e.map(n=>n.replace(ID,t))}let e4=(()=>{class t{constructor(n,i,r,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ED(a),this.defaultRenderer=new DD(n,o,c,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===La.ShadowDom&&(i={...i,encapsulation:La.Emulated});const r=this.getOrCreateRenderer(n,i);return r instanceof n4?r.applyToHost(n):r instanceof RD&&r.applyStyles(),r}getOrCreateRenderer(n,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case La.Emulated:s=new n4(c,l,i,this.appId,u,o,a,h);break;case La.ShadowDom:return new Kse(c,l,n,i,o,a,this.nonce,h);default:s=new RD(c,l,i,u,o,a,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(ot(XV),ot(JV),ot(bg),ot($se),ot(ai),ot(Va),ot(_n),ot(gf))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();class DD{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(MD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(t4(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(t4(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new St(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=MD[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=MD[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Al.DashCase|Al.Important)?e.style.setProperty(n,i,r&Al.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Al.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){null!=e&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Wd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function t4(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Kse extends DD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ZV(r.id,r.styles);for(const u of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class RD extends DD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?ZV(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class n4 extends RD{constructor(e,n,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=function Yse(t){return"_ngcontent-%COMP%".replace(ID,t)}(l),this.hostAttr=function qse(t){return"_nghost-%COMP%".replace(ID,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Jse=(()=>{class t extends KV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const i4=["alt","control","meta","shift"],Qse={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zse={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let eoe=(()=>{class t extends KV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),o=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wd().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),i4.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(n,i){let r=Qse[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),i4.forEach(o=>{o!==r&&(0,Zse[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const s4=[{provide:Va,useValue:jV},{provide:pf,useValue:function toe(){SD.makeCurrent()},multi:!0},{provide:ai,useFactory:function ioe(){return function RT(t){vg=t}(document),document},deps:[]}],roe=LU(oie,"browser",s4),soe=new Et(""),o4=[{provide:_E,useClass:class Vse{addToWindow(e){Pn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new St(5103,!1);return s},Pn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Pn.getAllAngularRootElements=()=>e.getAllRootElements(),Pn.frameworkStabilizers||(Pn.frameworkStabilizers=[]),Pn.frameworkStabilizers.push(i=>{const r=Pn.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&i()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Wd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:SU,useClass:YI,deps:[_n,qI,_E]},{provide:YI,useClass:YI,deps:[_n,qI,_E]}],a4=[{provide:O_,useValue:"root"},{provide:Ro,useFactory:function noe(){return new Ro},deps:[]},{provide:CD,useClass:Jse,multi:!0,deps:[ai,_n,Va]},{provide:CD,useClass:eoe,multi:!0,deps:[ai]},e4,JV,XV,{provide:nB,useExisting:e4},{provide:UV,useClass:Hse,deps:[]},[]];let ooe=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:bg,useValue:n.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(ot(soe,12))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({providers:[...a4,...o4],imports:[lm,aie]})}return t})(),D0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:function(i){let r=null;return r=i?new(i||t):ot(doe),r},providedIn:"root"})}return t})(),doe=(()=>{class t extends D0{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case ks.NONE:return i;case ks.HTML:return Jo(i,"HTML")?Po(i):wx(this._doc,String(i)).toString();case ks.STYLE:return Jo(i,"Style")?Po(i):i;case ks.SCRIPT:if(Jo(i,"Script"))return Po(i);throw new St(5200,!1);case ks.URL:return Jo(i,"URL")?Po(i):Mg(String(i));case ks.RESOURCE_URL:if(Jo(i,"ResourceURL"))return Po(i);throw new St(5201,!1);default:throw new St(5202,!1)}}bypassSecurityTrustHtml(n){return function $T(t){return new ma(t)}(n)}bypassSecurityTrustStyle(n){return function qT(t){return new dx(t)}(n)}bypassSecurityTrustScript(n){return function XT(t){return new zT(t)}(n)}bypassSecurityTrustUrl(n){return function KT(t){return new Oi(t)}(n)}bypassSecurityTrustResourceUrl(n){return function JT(t){return new GT(t)}(n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const OD={now:()=>(OD.delegate||Date).now(),delegate:void 0};class Pf extends Qt{constructor(e=1/0,n=1/0,i=OD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function Hn(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function LD(t,e){return function(n,i){e(n,i,t)}}function jt(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Yd(t){return this instanceof Yd?(this.v=t,this):new Yd(t)}function p4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function kD(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const BD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function g4(t){return Ze(t?.then)}function m4(t){return Ze(t[rc])}function _4(t){return Symbol.asyncIterator&&Ze(t?.[Symbol.asyncIterator])}function y4(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const v4=function Doe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function b4(t){return Ze(t?.[v4])}function w4(t){return function f4(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(g){return new Promise(function(m,y){s.push([f,g,m,y])>1||a(f,g)})})}function a(f,g){try{!function c(f){f.value instanceof Yd?Promise.resolve(f.value.v).then(l,u):h(s[0][2],f)}(i[f](g))}catch(m){h(s[0][3],m)}}function l(f){a("next",f)}function u(f){a("throw",f)}function h(f,g){f(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Yd(n.read());if(r)return yield Yd(void 0);yield yield Yd(i)}}finally{n.releaseLock()}})}function x4(t){return Ze(t?.getReader)}function Cs(t){if(t instanceof At)return t;if(null!=t){if(m4(t))return function Roe(t){return new At(e=>{const n=t[rc]();if(Ze(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(BD(t))return function Ooe(t){return new At(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(g4(t))return function Noe(t){return new At(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lt)})}(t);if(_4(t))return E4(t);if(b4(t))return function Poe(t){return new At(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(x4(t))return function Loe(t){return E4(w4(t))}(t)}throw y4(t)}function E4(t){return new At(e=>{(function Foe(t,e){var n,i,r,s;return function d4(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=p4(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Fu(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Ts(t,e,n=1/0){return Ze(e)?Ts((i,r)=>Xt((s,o)=>e(i,s,r,o))(Cs(t(i,r))),n):("number"==typeof e&&(n=e),gn((i,r)=>function koe(t,e,n,i,r,s,o,a){const c=[];let l=0,u=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},g=y=>l<i?m(y):c.push(y),m=y=>{s&&e.next(y),l++;let w=!1;Cs(n(y,u++)).subscribe(ti(e,O=>{r?.(O),s?g(O):e.next(O)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const O=c.shift();o?Fu(e,o,()=>m(O)):m(O)}f()}catch(O){e.error(O)}}))};return t.subscribe(ti(e,g,()=>{h=!0,f()})),()=>{a?.()}}(i,r,t,n)))}function GE(t=1/0){return Ts(Ge,t)}const ko=new At(t=>t.complete());function A4(t){return t&&Ze(t.schedule)}function jD(t){return t[t.length-1]}function S4(t){return Ze(jD(t))?t.pop():void 0}function O0(t){return A4(jD(t))?t.pop():void 0}function C4(t,e=0){return gn((n,i)=>{n.subscribe(ti(i,r=>Fu(i,t,()=>i.next(r),e),()=>Fu(i,t,()=>i.complete(),e),r=>Fu(i,t,()=>i.error(r),e)))})}function T4(t,e=0){return gn((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function M4(t,e){if(!t)throw new Error("Iterable cannot be null");return new At(n=>{Fu(n,e,()=>{const i=t[Symbol.asyncIterator]();Fu(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function us(t,e){return e?function $oe(t,e){if(null!=t){if(m4(t))return function Voe(t,e){return Cs(t).pipe(T4(e),C4(e))}(t,e);if(BD(t))return function zoe(t,e){return new At(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(g4(t))return function Hoe(t,e){return Cs(t).pipe(T4(e),C4(e))}(t,e);if(_4(t))return M4(t,e);if(b4(t))return function Goe(t,e){return new At(n=>{let i;return Fu(n,e,()=>{i=t[v4](),Fu(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>Ze(i?.return)&&i.return()})}(t,e);if(x4(t))return function Woe(t,e){return M4(w4(t),e)}(t,e)}throw y4(t)}(t,e):Cs(t)}function Jc(...t){const e=O0(t),n=function Uoe(t,e){return"number"==typeof jD(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Cs(i[0]):GE(n)(us(i,e)):ko}function Tr(t,e){return gn((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(ti(i,c=>{r?.unsubscribe();let l=0;const u=s++;Cs(t(c,u)).subscribe(r=ti(i,h=>i.next(e?e(c,h,u,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const WE={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return WE.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return WE.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let UD;function tae(t,e,n){let i=n;return function qoe(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function Koe(t,e){if(!UD){const n=Element.prototype;UD=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&UD.call(t,e)}(t,r)||(i=s,0))),i}class iae{constructor(e,n){this.componentFactory=n.get(Fd).resolveComponentFactory(e)}create(e){return new rae(this.componentFactory,e)}}class rae{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Pf(1),this.events=this.eventEmitters.pipe(Tr(i=>Jc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(_n),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=WE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function Joe(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=Ui.create({providers:[],parent:this.injector}),i=function eae(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],c=tae(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(oo),this.implementsOnChanges=function Xoe(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Ou).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Xt(o=>({name:r,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=WE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Gh(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class sae extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let aae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[lm]})}return t})();function N0(t){return(N0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function be(t,e,n){return(e=function lae(t){var e=function cae(t,e){if("object"!=N0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=N0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N0(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I4(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Rl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||I4()}const D4=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Rl();class dae{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";be(this,"storage",void 0),be(this,"id",void 0),be(this,"config",void 0),this.storage=function uae(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function VD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let $E;var t;function R4(t){return"string"==typeof t?$E[t.toUpperCase()]||$E.WHITE:t}function YE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=$E||($E={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const qd={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},qE=qd.window||qd.self||qd.global,P0=qd.process||{};function um(){let t;var e,n;if(Rl&&"performance"in qE)t=null==qE||null===(e=qE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in P0){var i;const r=null==P0||null===(i=P0.hrtime)||void 0===i?void 0:i.call(P0);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const dm={debug:Rl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},yae={enabled:!0,level:0};function wc(){}const O4={},N4={once:!0};class L0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};be(this,"id",void 0),be(this,"VERSION",D4),be(this,"_startTs",um()),be(this,"_deltaTs",um()),be(this,"_storage",void 0),be(this,"userData",{}),be(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new dae("__probe-".concat(this.id,"__"),yae),this.timeStamp("".concat(this.id," started")),function _ae(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(s=>r===s)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((um()-this._startTs).toPrecision(10))}getDelta(){return Number((um()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){YE(e,n)}warn(e){return this._getLogFunction(0,e,dm.warn,arguments,N4)}error(e){return this._getLogFunction(0,e,dm.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,dm.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,dm.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,n,dm.debug||dm.info,arguments,N4)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||wc,i&&[i],{tag:xae(n)}):wc}image(e){let{logLevel:n,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(n||i)?Rl?function wae(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=VD(s,n,i);console.log(...o)},s.src=e,wc}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...VD(e,n,i)),wc;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...VD(s,n,i)),s.src=e.toDataURL(),wc}return wc}({image:r,message:s,scale:o}):function bae(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),wc}({image:r,message:s,scale:o}):wc}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||wc)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=L4({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||wc)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=P4(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=L4({logLevel:e,message:n,args:r,opts:s}),YE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=um();const o=s.tag||s.message;if(s.once){if(O4[o])return wc;O4[o]=um()}return n=function vae(t,e,n){if("string"==typeof e){const i=n.time?function fae(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function hae(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function mae(t,e,n){return!Rl&&"string"==typeof t&&(e&&(e=R4(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=R4(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),i.bind(console,n,...s.args)}return wc}}function P4(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return YE(Number.isFinite(e)&&e>=0),e}function L4(t){const{logLevel:e,message:n}=t;t.logLevel=P4(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return YE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function xae(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}be(L0,"VERSION",D4);const mi=new L0({id:"deck"}),F0=new class Eae{constructor(e={}){be(this,"_pool",[]),be(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,u=n*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let h=1/0;c&&(h=c*i+s);const f=this._allocate(l,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(o=>o.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}},Aae=1/Math.PI*180,Sae=1/180*Math.PI,ds={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Cae(t,{precision:e=ds.precision}={}){return t=function Rae(t){return Math.round(t/ds.EPSILON)*ds.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function ku(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function F4(t){return function Mae(t,e){return Bu(t,n=>n*Sae,e)}(t)}function Tae(t){return function Iae(t,e){return Bu(t,n=>n*Aae,e)}(t)}function Vr(t,e,n){return Bu(t,i=>Math.max(e,Math.min(n,i)))}function XE(t,e,n){return ku(t)?t.map((i,r)=>XE(i,e[r],n)):n*e+(1-n)*t}function hm(t,e,n){const i=ds.EPSILON;n&&(ds.EPSILON=n);try{if(t===e)return!0;if(ku(t)&&ku(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!hm(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=ds.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{ds.EPSILON=i}}function Bu(t,e,n){if(ku(t)){const i=t;n=n||function Oae(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class KE extends(function Nae(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ku(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(ds)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+Cae(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!hm(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(ds.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function ci(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function JE(t,e,n=""){if(ds.debug&&!function Pae(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function B4(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class j4 extends KE{get x(){return this[0]}set x(e){this[0]=ci(e)}get y(){return this[1]}set y(e){this[1]=ci(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return ci(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return ci(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return B4(e>=0&&e<this.ELEMENTS,"index is out of range"),ci(this[e])}setComponent(e,n){return B4(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Ol=1e-6,va=typeof Float32Array<"u"?Float32Array:Array;function U4(){var t=new va(3);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function V4(t,e,n){var i=new va(3);return i[0]=t,i[1]=e,i[2]=n,i}function H4(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function QE(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function HD(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function z4(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,y=i*h-r*u,w=2*n[3];return h*=w,f*=w,m*=2,y*=2,t[0]=a+(u*=w)+(g*=2),t[1]=c+h+m,t[2]=l+f+y,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function G4(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}U4();const zD=[0,0,0];let ZE;class Bo extends j4{static get ZERO(){return ZE||(ZE=new Bo(0,0,0),Object.freeze(ZE)),ZE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&ku(e)?this.copy(e):(ds.debug&&(ci(e),ci(n),ci(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return ds.debug&&(ci(e.x),ci(e.y),ci(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ci(e)}angle(e){return function Gae(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&H4(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return QE(this,this,e),this.check()}rotateX({radians:e,origin:n=zD}){return function Vae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=zD}){return function Hae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=zD}){return function zae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return HD(this,this,e),this.check()}transformAsVector(e){return G4(this,this,e),this.check()}transformByMatrix3(e){return function Uae(t,e,n){var i=e[0],r=e[1],s=e[2];t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8]}(this,this,e),this.check()}transformByMatrix2(e){return function qae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return z4(this,this,e),this.check()}}const W4=new Bo;function fm(t,e,n,i){W4.set(t,e,n);const r=W4.len();return{distance:i/r,normal:new Bo(-t/r,-e/r,-n/r)}}function ece(t){return t-Math.fround(t)}let B0;function GD(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-i)/n;B0=F0.allocate(B0,s,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<r;){for(let c=0;c<n;c++){const l=t[o++];B0[a+c]=l,B0[a+c+n]=ece(l)}a+=2*n}return B0.subarray(0,s*n*2)}class tce extends KE{toString(){let e="[";if(ds.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=ci(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function WD(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],y=e[13],w=e[14],O=e[15],V=n*a-i*o,ce=n*c-r*o,re=n*l-s*o,Ie=i*c-r*a,Ne=i*l-s*a,it=r*l-s*c,ut=u*y-h*m,Ye=u*w-f*m,dt=u*O-g*m,yt=h*w-f*y,Ct=h*O-g*y,ft=f*O-g*w,gt=V*ft-ce*Ct+re*yt+Ie*dt-Ne*Ye+it*ut;return gt?(t[0]=(a*ft-c*Ct+l*yt)*(gt=1/gt),t[1]=(r*Ct-i*ft-s*yt)*gt,t[2]=(y*it-w*Ne+O*Ie)*gt,t[3]=(f*Ne-h*it-g*Ie)*gt,t[4]=(c*dt-o*ft-l*Ye)*gt,t[5]=(n*ft-r*dt+s*Ye)*gt,t[6]=(w*re-m*it-O*ce)*gt,t[7]=(u*it-f*re+g*ce)*gt,t[8]=(o*Ct-a*dt+l*ut)*gt,t[9]=(i*dt-n*Ct-s*ut)*gt,t[10]=(m*Ne-y*re+O*V)*gt,t[11]=(h*re-u*Ne-g*V)*gt,t[12]=(a*Ye-o*yt-c*ut)*gt,t[13]=(n*yt-i*Ye+r*ut)*gt,t[14]=(y*ce-m*Ie-w*V)*gt,t[15]=(u*Ie-h*ce+f*V)*gt,t):null}function Lf(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],y=e[12],w=e[13],O=e[14],V=e[15],ce=n[0],re=n[1],Ie=n[2],Ne=n[3];return t[0]=ce*i+re*a+Ie*h+Ne*y,t[1]=ce*r+re*c+Ie*f+Ne*w,t[2]=ce*s+re*l+Ie*g+Ne*O,t[3]=ce*o+re*u+Ie*m+Ne*V,t[4]=(ce=n[4])*i+(re=n[5])*a+(Ie=n[6])*h+(Ne=n[7])*y,t[5]=ce*r+re*c+Ie*f+Ne*w,t[6]=ce*s+re*l+Ie*g+Ne*O,t[7]=ce*o+re*u+Ie*m+Ne*V,t[8]=(ce=n[8])*i+(re=n[9])*a+(Ie=n[10])*h+(Ne=n[11])*y,t[9]=ce*r+re*c+Ie*f+Ne*w,t[10]=ce*s+re*l+Ie*g+Ne*O,t[11]=ce*o+re*u+Ie*m+Ne*V,t[12]=(ce=n[12])*i+(re=n[13])*a+(Ie=n[14])*h+(Ne=n[15])*y,t[13]=ce*r+re*c+Ie*f+Ne*w,t[14]=ce*s+re*l+Ie*g+Ne*O,t[15]=ce*o+re*u+Ie*m+Ne*V,t}function e1(t,e,n){var o,a,c,l,u,h,f,g,m,y,w,O,i=n[0],r=n[1],s=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],y=e[9],w=e[10],O=e[11],t[0]=o=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=m,t[9]=y,t[10]=w,t[11]=O,t[12]=o*i+u*r+m*s+e[12],t[13]=a*i+h*r+y*s+e[13],t[14]=c*i+f*r+w*s+e[14],t[15]=l*i+g*r+O*s+e[15]),t}function $D(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $4(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+l*i,t[5]=o*r+u*i,t[6]=a*r+h*i,t[7]=c*r+f*i,t[8]=l*r-s*i,t[9]=u*r-o*i,t[10]=h*r-a*i,t[11]=f*r-c*i,t}function Y4(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+l*i,t[1]=o*r+u*i,t[2]=a*r+h*i,t[3]=c*r+f*i,t[4]=l*r-s*i,t[5]=u*r-o*i,t[6]=h*r-a*i,t[7]=f*r-c*i,t}function t1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function q4(t,e){return t[0]=-e[0],t[1]=-e[1],t}function X4(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function K4(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function j0(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}!function mce(){var t=new va(2);va!=Float32Array&&(t[0]=0,t[1]=0)}(),function yce(){var t=new va(4);va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var J4=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(J4||{});const Oce=45*Math.PI/180,Nce=1,YD=.1,qD=500,Pce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Vn extends tce{static get IDENTITY(){return function Fce(){return r1||(r1=new Vn,Object.freeze(r1)),r1}()}static get ZERO(){return function Lce(){return n1||(n1=new Vn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(n1)),n1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return J4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,o,a,c,l,u,h,f,g,m,y,w){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=y,this[15]=w,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l,u,h,f,g,m,y,w){return this[0]=e,this[1]=s,this[2]=l,this[3]=g,this[4]=n,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=y,this[12]=r,this[13]=c,this[14]=f,this[15]=w,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Pce)}fromObject(e){return this.check()}fromQuaternion(e){return function lce(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,y=s*o,w=s*a,O=s*c;t[0]=1-h-m,t[1]=u+O,t[2]=f-w,t[3]=0,t[4]=u-O,t[5]=1-l-m,t[6]=g+y,t[7]=0,t[8]=f+w,t[9]=g-y,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:o=YD,far:a=qD}=e;return a===1/0?function kce(t,e,n,i,r,s){const a=2*s/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),f=-2*s;t[0]=2*s/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,n,i,r,s,o):function uce(t,e,n,i,r,s,o){var a=1/(n-e),c=1/(r-i),l=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0}(this,n,i,r,s,o,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function gce(t,e,n,i){var r,s,o,a,c,l,u,h,f,g,m=e[0],y=e[1],w=e[2],O=i[0],V=i[1],ce=i[2],re=n[0],Ie=n[1],Ne=n[2];Math.abs(m-re)<Ol&&Math.abs(y-Ie)<Ol&&Math.abs(w-Ne)<Ol?function nce(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=m-re,h=y-Ie,f=w-Ne,r=V*(f*=g=1/Math.hypot(u,h,f))-ce*(h*=g),s=ce*(u*=g)-O*f,o=O*h-V*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,c=f*r-u*o,l=u*s-h*r,(g=Math.hypot(a,c,l))?(a*=g=1/g,c*=g,l*=g):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*m+s*y+o*w),t[13]=-(a*m+c*y+l*w),t[14]=-(u*m+h*y+f*w),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:o=YD,far:a=qD}=e;return function fce(t,e,n,i,r,s,o){var a=1/(e-n),c=1/(i-r),l=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(o+s)*l,t[15]=1}(this,n,i,r,s,o,a),this.check()}orthographic(e){const{fovy:n=Oce,aspect:i=Nce,focalDistance:r=1,near:s=YD,far:o=qD}=e;Q4(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return Q4(n),function dce(t,e,n,i,r){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,s),this.check()}determinant(){return function rce(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],f=t[11],g=t[12],m=t[13],y=t[14],w=t[15];return(e*o-n*s)*(h*w-f*y)-(e*a-i*s)*(u*w-f*m)+(e*c-r*s)*(u*y-h*m)+(n*a-i*o)*(l*w-f*g)-(n*c-r*o)*(l*y-h*g)+(i*c-r*a)*(l*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function ice(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return WD(this,this),this.check()}multiplyLeft(e){return Lf(this,e,this),this.check()}multiplyRight(e){return Lf(this,this,e),this.check()}rotateX(e){return $4(this,this,e),this.check()}rotateY(e){return function oce(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-l*i,t[1]=o*r-u*i,t[2]=a*r-h*i,t[3]=c*r-f*i,t[8]=s*i+l*r,t[9]=o*i+u*r,t[10]=a*i+h*r,t[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return Y4(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function sce(t,e,n,i){var c,l,u,h,f,g,m,y,w,O,V,ce,re,Ie,Ne,it,ut,Ye,dt,yt,Ct,ft,gt,Lt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Ol||(r*=a=1/a,s*=a,o*=a,c=Math.sin(n),l=Math.cos(n),f=e[1],g=e[2],m=e[3],w=e[5],O=e[6],V=e[7],re=e[9],Ie=e[10],Ne=e[11],dt=r*s*(u=1-l)-o*c,yt=s*s*u+l,Ct=o*s*u+r*c,ft=r*o*u+s*c,gt=s*o*u-r*c,Lt=o*o*u+l,t[0]=(h=e[0])*(it=r*r*u+l)+(y=e[4])*(ut=s*r*u+o*c)+(ce=e[8])*(Ye=o*r*u-s*c),t[1]=f*it+w*ut+re*Ye,t[2]=g*it+O*ut+Ie*Ye,t[3]=m*it+V*ut+Ne*Ye,t[4]=h*dt+y*yt+ce*Ct,t[5]=f*dt+w*yt+re*Ct,t[6]=g*dt+O*yt+Ie*Ct,t[7]=m*dt+V*yt+Ne*Ct,t[8]=h*ft+y*gt+ce*Lt,t[9]=f*ft+w*gt+re*Lt,t[10]=g*ft+O*gt+Ie*Lt,t[11]=m*ft+V*gt+Ne*Lt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return $D(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return e1(this,this,e),this.check()}transform(e,n){return 4===e.length?(JE(n=j0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function _ce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=HD(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return JE(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Yae(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}(n||[-0,-0],e,this);break;case 3:i=G4(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return JE(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let n1,r1;function Q4(t){if(t>2*Math.PI)throw Error("expected radians")}function pm(t,e){const n=j0([],e,t);return K4(n,n,1/n[3]),n}function Z4(t,e){const n=t%e;return n<0?e+n:n}function XD(t,e,n){return t<e?e:t>n?n:t}const KD=Math.log2||function jce(t){return Math.log(t)*Math.LOG2E};function ju(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Qc=Math.PI,eH=Qc/4,xc=Qc/180,JD=180/Qc,gm=512,s1=4003e4,o1=85.051129,Uce=1.5;function a1(t){const[e,n]=t;return ju(Number.isFinite(e)),ju(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[gm*(e*xc+Qc)/(2*Qc),gm*(Qc+Math.log(Math.tan(eH+n*xc*.5)))/(2*Qc)]}function mm(t){const[e,n]=t,i=e/gm*(2*Qc)-Qc,r=2*(Math.atan(Math.exp(n/gm*(2*Qc)-Qc))-eH);return[i*JD,r*JD]}function QD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;ju(Number.isFinite(e)&&Number.isFinite(n));const r=gm,s=Math.cos(e*xc),o=r/360,a=o/s,c=r/s1/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const u=xc*Math.tan(e*xc)/s,f=r/s1*u,g=f/a*c;l.unitsPerDegree2=[0,o*u/2,f],l.unitsPerMeter2=[g,0,g]}return l}function tH(t,e){const[n,i,r]=t,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=QD({longitude:n,latitude:i,highPrecision:!0}),u=a1(t);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const h=mm(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function c1(t){return 2*Math.atan(.5/t)*JD}function ZD(t){return.5/Math.tan(.5*t*xc)}function iH(t,e){const[n,i,r=0]=t;return ju(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),pm(e,[n,i,r,1])}function U0(t,e,n=0){const[i,r,s]=t;if(ju(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return pm(e,[i,r,s,1]);const o=pm(e,[i,r,0,1]),a=pm(e,[i,r,1,1]),c=o[2],l=a[2];return X4([],o,a,c===l?0:((n||0)-c)/(l-c))}function rH(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,c],[l,u]]=i,h=function Gce(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(ju(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),f=a1([a,XD(u,-o1,o1)]),g=a1([l,XD(c,-o1,o1)]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],y=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];ju(y[0]>0&&y[1]>0);const w=y[0]/m[0],O=y[1]/m[1],Ie=mm([(g[0]+f[0])/2+(h.right-h.left)/2/w,(g[1]+f[1])/2+(h.top-h.bottom)/2/O]),Ne=Math.min(s,KD(Math.abs(Math.min(w,O))));return ju(Number.isFinite(Ne)),{longitude:Ie[0],latitude:Ie[1],zoom:Ne}}const sH=Math.PI/180;function oH(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=pm(i,[e,0,1,1]),s=pm(i,[e,t.height,1,1]),l=mm(X4([],r,s,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(n),l}const xi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(xi,"IDENTITY",{get:()=>(mi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Nl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},l1={common:0,meters:1,pixels:2},dH={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},qce=Math.PI/180,Xce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],hH=[0,0,0],Kce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Xd{constructor(e={}){be(this,"id",void 0),be(this,"x",void 0),be(this,"y",void 0),be(this,"width",void 0),be(this,"height",void 0),be(this,"padding",void 0),be(this,"isGeospatial",void 0),be(this,"zoom",void 0),be(this,"focalDistance",void 0),be(this,"position",void 0),be(this,"modelMatrix",void 0),be(this,"distanceScales",void 0),be(this,"scale",void 0),be(this,"center",void 0),be(this,"cameraPosition",void 0),be(this,"projectionMatrix",void 0),be(this,"viewMatrix",void 0),be(this,"viewMatrixUncentered",void 0),be(this,"viewMatrixInverse",void 0),be(this,"viewProjectionMatrix",void 0),be(this,"pixelProjectionMatrix",void 0),be(this,"pixelUnprojectionMatrix",void 0),be(this,"resolution",void 0),be(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Kce,this.focalDistance=e.focalDistance||1,this.position=e.position||hH,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Nl.WEB_MERCATOR:Nl.WEB_MERCATOR_AUTO_OFFSET:Nl.IDENTITY}equals(e){return e instanceof Xd&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&hm(e.projectionMatrix,this.projectionMatrix)&&hm(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=iH(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=n?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,o]=e,l=U0([r,n?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[u,h,f]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=a1(e);return n[1]=Vr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?mm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?QD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Zae(t){return{left:fm(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:fm(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:fm(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:fm(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:fm(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:fm(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Hce(t){const{latitude:e}=t;ju(Number.isFinite(e));const n=Math.cos(e*xc);return function Vce(t){return KD(t)}(s1*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||QD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=hH;if(s&&(a=o?new Vn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new Bo(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Xce,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Vn).multiplyRight(n).translate(new Bo(this.center).negate()),this.projectionMatrix=i||function Jce({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=t/e,l=n?(new Vn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new Vn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=Vr((u+t-h)/2,0,t)-t/2,y=Vr((f+e-g)/2,0,e)-e/2;l[8]-=2*m/t,l[9]+=2*y/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*qce,focalDistance:u,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Lf(h,h,this.projectionMatrix),Lf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=WD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Qae(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];$D(f,f,[this.width/2,-this.height/2,1]),e1(f,f,[1,-1,0]),Lf(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=WD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||mi.warn("Pixel project matrix not invertible")()}}be(Xd,"displayName","Viewport");const Qce=/([0-9]+\.?[0-9]*)(%|px)/;function Kd(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Qce.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Jd(t,e){return t.relative?Math.round(t.position*e):t.position}function _m(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const i=t[n],r=e[n];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&_m(i,r)))return!1}return!0}function ao(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class tR{constructor(e){be(this,"id",void 0),be(this,"viewportInstance",void 0),be(this,"_x",void 0),be(this,"_y",void 0),be(this,"_width",void 0),be(this,"_height",void 0),be(this,"_padding",void 0),be(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};ao(!c||c instanceof Xd),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Kd(i),this._y=Kd(r),this._width=Kd(s),this._height=Kd(o),this._padding=a&&{left:Kd(a.left||0),right:Kd(a.right||0),top:Kd(a.top||0),bottom:Kd(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&_m(this.props,e.props))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:Jd(this._x,e),y:Jd(this._y,n),width:Jd(this._width,e),height:Jd(this._height,n)};return this._padding&&(i.padding={left:Jd(this._padding.left,e),top:Jd(this._padding.top,n),right:Jd(this._padding.right,e),bottom:Jd(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Zce=(new Vn).lookAt({eye:[0,0,1]});function ele({width:t,height:e,near:n,far:i,padding:r}){let s=-t/2,o=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:u=0,top:h=0,bottom:f=0}=r,g=Vr((l+t-u)/2,0,t)-t/2,m=Vr((h+e-f)/2,0,e)-e/2;s-=g,o-=g,a+=m,c+=m}return(new Vn).ortho({left:s,right:o,bottom:a,top:c,near:n,far:i})}class tle extends Xd{constructor(e){const{width:n,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(u,h),g=Math.pow(2,f);let m;if(u!==h){const y=Math.pow(2,u),w=Math.pow(2,h);m={unitsPerMeter:[y/g,w/g,1],metersPerUnit:[g/y,g/w,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Zce.clone().scale([g,g*(l?-1:1),g]),projectionMatrix:ele({width:n||1,height:i||1,padding:c,near:r,far:s}),zoom:f,distanceScales:m})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=U0(n,this.pixelUnprojectionMatrix),s=t1([],this.projectFlat(e),q4([],i)),o=t1([],this.center,s);return{target:this.unprojectFlat(o)}}}class H0{constructor(e){be(this,"_inProgress",void 0),be(this,"_handle",void 0),be(this,"_timeline",void 0),be(this,"time",void 0),be(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const fH=()=>{},nle=t=>t;class rle{constructor(e){be(this,"getControllerState",void 0),be(this,"props",void 0),be(this,"propsInTransition",void 0),be(this,"transition",void 0),be(this,"onViewStateChange",void 0),be(this,"onStateChange",void 0),be(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=n,l=c(i/a),u=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new H0(e.timeline),this.onViewStateChange=e.onViewStateChange||fH,this.onStateChange=e.onStateChange||fH}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:n.transitionEasing||nle,interpolator:s,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class sle{constructor(e){be(this,"_propsToCompare",void 0),be(this,"_propsToExtract",void 0),be(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!hm(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];ao(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const ole=["longitude","latitude","zoom","bearing","pitch"],ale=["longitude","latitude","zoom"];class u1 extends sle{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:ole,required:ale},super(i.transitionProps),be(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(n),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=XE(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,XE(e.around,n.around,i)))}return r}}const Qd={transitionDuration:0},d1=t=>1-(1-t)*(1-t),ym_WHEEL=["wheel"],ym_PAN=["panstart","panmove","panend"],ym_PINCH=["pinchstart","pinchmove","pinchend"],ym_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],ym_DOUBLE_TAP=["doubletap"],ym_KEYBOARD=["keydown"],Ff={};class iR{constructor(e){be(this,"props",void 0),be(this,"state",{}),be(this,"transitionManager",void 0),be(this,"eventManager",void 0),be(this,"onViewStateChange",void 0),be(this,"onStateChange",void 0),be(this,"makeViewport",void 0),be(this,"_controllerState",void 0),be(this,"_events",{}),be(this,"_interactionState",{isDragging:!1}),be(this,"_customEvents",[]),be(this,"_eventStartBlocked",null),be(this,"_panMove",!1),be(this,"invertPan",!1),be(this,"dragMode","rotate"),be(this,"inertia",0),be(this,"scrollZoom",!0),be(this,"dragPan",!0),be(this,"dragRotate",!0),be(this,"doubleClickZoom",!0),be(this,"touchZoom",!0),be(this,"touchRotate",!1),be(this,"keyboard",!0),this.transitionManager=new rle({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(ym_WHEEL,u&&i),this.toggleEvents(ym_PAN,u&&(r||s)),this.toggleEvents(ym_PINCH,u&&(a||c)),this.toggleEvents(ym_TRIPLE_PAN,u&&c),this.toggleEvents(ym_DOUBLE_TAP,u&&o),this.toggleEvents(ym_KEYBOARD,u&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Qd,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Qd,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Qd,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Qd,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Qd,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:d1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ff._startPinchRotation=e.rotation,Ff._lastPinchEvent=e,this.updateViewport(i,Qd,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Ff._startPinchRotation-i})}return this.updateViewport(n,Qd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ff._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Ff;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*n/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:d1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ff._startPinchRotation=null,Ff._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new u1({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Qd}}class pH{constructor(e,n){be(this,"_viewportProps",void 0),be(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class gH extends pH{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:y,startZoomPosition:w,startZoom:O}=e;super({width:n,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:h},{startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:y,startZoomPosition:w,startZoom:O}),be(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+i,rotationOrbit:o+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),Vr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Vr(r[0],i,n),Vr(r[1],i,n)]:Vr(r,i,n),e.rotationX=Vr(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Jae(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class lle extends iR{constructor(...e){super(...e),be(this,"ControllerState",gH),be(this,"transition",{transitionDuration:300,transitionInterpolator:new u1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class ule extends gH{constructor(e){super(e),be(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Vr(o+s,r,i);break;case"Y":a=Vr(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return Vr(n+s,r,i)}}class dle extends iR{constructor(...e){super(...e),be(this,"ControllerState",ule),be(this,"transition",{transitionDuration:300,transitionInterpolator:new u1(["target","zoom"])}),be(this,"dragMode","pan")}_onPanRotate(){return!1}}class rR extends tR{get ViewportType(){return tle}get ControllerType(){return dle}}be(rR,"displayName","OrthographicView");const sR=Math.PI/180;function hle({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new Vn).lookAt({eye:a,up:o});c.rotateX(i*sR),"Z"===n?c.rotateZ(r*sR):c.rotateY(r*sR);const l=Math.pow(2,s)/t;return c.scale(l),c}class fle extends Xd{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=i?i[5]/2:ZD(r);super({...e,longitude:void 0,viewMatrix:hle({height:n||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:u,position:o,zoom:l}),be(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=n?r:this.height-r,[a,c,l]=U0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class mH extends tR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return fle}get ControllerType(){return lle}}be(mH,"displayName","OrbitView");const z0="vs";function Ya(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const aR={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function gle(t){let e=_H(t);return"object"===e?t?"type"in t?Object.assign({},t,aR[t.type]):"value"in t?(e=_H(t.value),Object.assign({type:e},t,aR[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},aR[e])}function _H(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class cR{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:h,fragmentShader:f}=e;Ya("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function yle(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(u),o&&(this.uniforms=function ple(t){const e={};for(const n in t){const r=gle(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ya(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ya(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function vle(t){return function yH(t){const e={},n={};return lR({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(vH(t))}function lR(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&lR({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function vH(t,e){return t.map(n=>(n instanceof cR||(Ya("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ya(n.name,"shader module has no name"),(n=new cR(n)).dependencies=vH(n.dependencies)),n))}const wle=7936,xle=7937,Ele=7938,Ale=35724,uR={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},kf={};function Tle(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(uR).forEach(t=>{kf[t]=t});const dR={};function bH(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=uR[e];if(Ya(i,e),!function ble(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in dR)return dR[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),dR[e]=c,c}function h1(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function Mle(t,e){const n=uR[e];Ya(n,e);const i=function Sle(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ya(!1===r||!0===r),r}(t,n))}const Nle={[z0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},f1="__LUMA_INJECT_DECLARATIONS__",wH=/void\s+main\s*\([^)]*\)\s*\{\n?/,xH=/}\n?[^{}]*$/,hR=[];function EH(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===z0;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),hR.length=o.length;for(let c=0,l=o.length;c<l;++c)hR[c]=o[c].injection;const a="".concat(hR.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(f1,a));break;case"vs:#main-start":r&&(t=t.replace(wH,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(xH,c=>a+c));break;case"fs:#decl":r||(t=t.replace(f1,a));break;case"fs:#main-start":r||(t=t.replace(wH,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(xH,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(f1,""),i&&(t=t.replace(/\}\s*$/,s=>s+Nle[e])),t}function fR(t){const e={};return Ya(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}function vm(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const AH=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Ple=[...AH,[vm("attribute"),"in $1"],[vm("varying"),"out $1"]],Lle=[...AH,[vm("varying"),"in $1"]],SH=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Fle=[...SH,[vm("in"),"attribute $1"],[vm("out"),"varying $1"]],kle=[...SH,[vm("in"),"varying $1"]],pR="gl_FragColor",gR=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Ble=/void\s+main\s*\([^)]*\)\s*\{\n?/;function p1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Hle="\n\n".concat(f1,"\n\n"),CH={[z0]:"vertex",fs:"fragment"};function TH(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:h}=e;Ya("string"==typeof i,"shader source must be a string");const f=r===z0,g=i.split("\n");let m=100,y="",w=i;0===g[0].indexOf("#version ")?(m=300,y=g[0],w=g.slice(1).join("\n")):y="#version ".concat(m);const O={};s.forEach(it=>{Object.assign(O,it.getDefines())}),Object.assign(O,o);let V=u?"".concat(y,"\n").concat(function Yle(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(CH[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function $le(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(CH[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Ile(t){switch(function Cle(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||wle),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||xle);return{gpuVendor:Tle(n,i),vendor:n,renderer:i,version:t.getParameter(Ele),shadingLanguageVersion:t.getParameter(Ale)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function Dle(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return h1(t,kf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),h1(t,kf.GLSL_DERIVATIVES)&&bH(t,kf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),h1(t,kf.GLSL_FRAG_DATA)&&bH(t,kf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),h1(t,kf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function qle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(O),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(y,"\n");const ce=function Kle(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),re={},Ie={},Ne={};for(const it in c){const ut="string"==typeof c[it]?{injection:c[it],order:0}:c[it],Ye=it.match(/^(v|f)s:(#)?([\w-]+)$/);Ye?Ye[2]?"decl"===Ye[3]?Ie[it]=[ut]:Ne[it]=[ut]:re[it]=[ut]:Ne[it]=[ut]}for(const it of s){h&&it.checkDeprecations(w,h),V+=it.getModuleSource(r,m);const Ye=it.injections[r];for(const dt in Ye){const yt=dt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const ft="decl"===yt[2]?Ie:Ne;ft[dt]=ft[dt]||[],ft[dt].push(Ye[dt])}else re[dt]=re[dt]||[],re[dt].push(Ye[dt])}}return V+=Hle,V=EH(V,r,Ie),V+=function Xle(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ce[r],re),V+=w,V=EH(V,r,Ne),V=function jle(t,e,n){switch(e){case 300:return n?p1(t,Ple):function Ule(t){const e=(t=p1(t,Lle)).match(gR);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(pR,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Ble,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(pR,"\\b"),"g"),n)}return t}(t);case 100:return n?p1(t,Fle):function Vle(t){const e=(t=p1(t,kle)).match(gR);if(e){const n=e[1];t=t.replace(gR,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),pR)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(V,l?100:m,f),V}function Wle(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const un=new L0({id:"luma.gl"});function na(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Qle="Requires WebGL2";function g1(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function li(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function m1(t){return na(g1(t),"Invalid WebGLRenderingContext"),t}function jo(t){return na(li(t),Qle),t}const G0={};const W0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(W0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Bf=function(e){const n=this;this.gl=e,function iue(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(G0[i]=!0)}while(0!==i);for(i in G0)if(G0[i])return delete G0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function tue(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Bf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Bf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new W0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Bf.prototype.createVertexArrayOES=function(){const e=new W0(this);return this.vertexArrayObjects.push(e),e},Bf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Bf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof W0&&e.hasBeenBound&&e.ext===this)},Bf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function nue(t,e){G0[t]=!0,void 0!==e&&function eue(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=r?r.attribs[c]:null;if((!r||l.enabled!==u.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==u.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==u.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const MH="OES_element_index",IH="WEBGL_draw_buffers",DH="WEBGL_debug_renderer_info",xr=t=>li(t)?void 0:0,pue={3074:t=>li(t)?void 0:36064,35723:t=>li(t)?void 0:4352,35977:xr,32937:xr,36795:(t,e)=>{const n=li(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(DH);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(DH);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:xr,35071:xr,37447:xr,36063:(t,e)=>{if(!li(t)){const n=t.getExtension(IH);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:xr,35374:xr,35377:xr,34852:t=>{if(!li(t)){const e=t.getExtension(IH);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(MH)?2147483647:65535,33001:t=>t.getExtension(MH)?16777216:65535,33e3:t=>16777216,37157:xr,35373:xr,35657:xr,36183:xr,37137:xr,34045:xr,35978:xr,35979:xr,35968:xr,35376:xr,35375:xr,35659:xr,37154:xr,35371:xr,35658:xr,35076:xr,35077:xr,35380:xr},RH="ANGLE_instanced_arrays",OH={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{na(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[RH]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){na(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{na(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{na(!1)},deleteQuery:()=>{na(!1)},beginQuery:()=>{na(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},mR={readBuffer:(t,e,n)=>{li(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function wue(t,e){return{webgl2:li(t),ext:t.getExtension(e)}}(t,RH);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!li(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>li(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function gue(t,e,n){const i=pue[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function Cue(t,e){let{extension:n,target:i,target2:r}=e;const s=OH[n];na(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const u="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[u]?h=function(){return c[u](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function xue(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function rue(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Bf(this)),this.__OESVertexArrayObject))}}(t),function Eue(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function Sue(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Cue(t,{extension:n,target:t.luma,target2:t})}(t,OH),function Aue(t,e){let{target:n,target2:i}=e;Object.keys(mR).forEach(r=>{if("function"==typeof mR[r]){const s=t[r]?t[r].bind(t):()=>{},o=mR[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const _R={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Zd=(t,e,n)=>e?t.enable(n):t.disable(n),NH=(t,e,n)=>t.hint(n,e),qa=(t,e,n)=>t.pixelStorei(n,e);function $0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Iue={3042:Zd,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Zd,2885:(t,e)=>t.cullFace(e),2929:Zd,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Zd,35723:NH,36006:(t,e)=>{const n=li(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:NH,2849:(t,e)=>t.lineWidth(e),32823:Zd,32824:"polygonOffset",10752:"polygonOffset",35977:Zd,32938:"sampleCoverage",32939:"sampleCoverage",3089:Zd,3088:(t,e)=>t.scissor(...e),2960:Zd,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:qa,3317:qa,37440:qa,37441:qa,37443:qa,3330:qa,3332:qa,3331:qa,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:qa,32878:qa,3316:qa,3315:qa,32877:qa,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=$0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=$0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=$0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=$0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=$0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Kr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const Due={blendEquation:(t,e,n)=>t.blendEquationSeparate(Kr(32777,e,n),Kr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Kr(32969,e,n),Kr(32968,e,n),Kr(32971,e,n),Kr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Kr(32824,e,n),Kr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Kr(32938,e,n),Kr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Kr(2962,e,n),Kr(2967,e,n),Kr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Kr(34816,e,n),Kr(36003,e,n),Kr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Kr(2964,e,n),Kr(2965,e,n),Kr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Kr(34817,e,n),Kr(34818,e,n),Kr(34819,e,n))},PH={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Pl=(t,e)=>t.isEnabled(e),LH={3042:Pl,2884:Pl,2929:Pl,3024:Pl,32823:Pl,32926:Pl,32928:Pl,3089:Pl,2960:Pl,35977:Pl};function FH(t){for(const e in t)return!1;return!0}function Rue(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function kH(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Oue(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Pue{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function Fue(t,e){if("number"==typeof(e=e||_R)){const r=e,s=LH[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=LH[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},_R),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){na(this.stateStack.length>0),Uu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){na(void 0!==s);const o=e[s],a=this.cache[s];Rue(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function BH(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(na(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new Pue(t,{copyState:i}),function Nue(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in PH)Oue(t,s,PH[s]);kH(t,"getParameter"),kH(t,"isEnabled")}return t.state.enable=n,t}function jH(t){na(t.state),t.state.pop()}function Uu(t,e){if(na(g1(t),"setParameters requires a WebGL context"),FH(e))return;const n={};for(const r in e){const s=Number(r),o=Iue[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,Due[r])(t,e,i)}function Ec(t,e,n){if(FH(e))return n(t);const{nocatch:i=!0}=e;let r;if(function Lue(t){t.state||BH(t,{copyState:!1}),t.state.push()}(t),Uu(t,e),i)r=n(t),jH(t);else try{r=n(t)}finally{jH(t)}return r}function bm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function yR(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function jue(t,e,n,i,r){const s=UH(t[0],e,n);let o=VH(t[1],e,i,r),a=UH(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=VH(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,bm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function UH(t,e,n){return Math.min(Math.round(t*e),n-1)}function VH(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const vR=Rl(),Uue=vR&&typeof document<"u",HH={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function zH(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};na(vR,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},HH,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:s}=t,o=function Gue(t){let s,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Uue&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:n,onError:i});return r=function zue(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,t),r?(r=bR(r,t),function Wue(t){const e=li(t)?"WebGL2":"WebGL1",n=function Vue(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";un.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function bR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function $ue(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},HH,e);const{manageState:n,debug:i}=e;return n&&BH(t,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return un.log(1,...s)()}}),vR&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),un.level=Math.max(un.level,1)):un.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function GH(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class WH{constructor(e,n){be(this,"name",void 0),be(this,"type",void 0),be(this,"sampleSize",1),be(this,"time",void 0),be(this,"count",void 0),be(this,"samples",void 0),be(this,"lastTiming",void 0),be(this,"lastSampleTime",void 0),be(this,"lastSampleCount",void 0),be(this,"_count",0),be(this,"_time",0),be(this,"_samples",0),be(this,"_startTime",0),be(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=GH(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(GH()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class wR{constructor(e){be(this,"id",void 0),be(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof WH?e:new WH(n,i)),this.stats[n]}}const Y0="8.5.21",jf=new class Xue{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new wR({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Y0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Y0));function Jt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function xR(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Jt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function eh(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(Rl()&&un.log(1,"luma.gl ".concat(Y0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Y0,version:Y0,log:un,stats:jf,globals:{modules:{},nodeIO:{}}}),globalThis;const ER={};function ba(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";ER[t]=ER[t]||1;const e=ER[t]++;return"".concat(t,"-").concat(e)}function $H(t){return Jt("number"==typeof t,"Input must be a number"),t&&!(t&t-1)}function wm(t){let e=!0;for(const n in t){e=!1;break}return e}function YH(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw un.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const xm="Resource subclass must define virtual methods";class Vu{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m1(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||ba(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jt(e=xR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=li(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=li(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?eh(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=eh(this.gl,o[h]))}}return o}setParameter(e,n){Jt(e=xR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=li(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=xR(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return YH(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(xm)}_deleteHandle(){throw new Error(xm)}_bindHandle(e){throw new Error(xm)}_getOptsFromHandle(){throw new Error(xm)}_getParameter(e,n){throw new Error(xm)}_setParameter(e,n){throw new Error(xm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=jf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];jf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=jf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=jf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Kue="Failed to deduce GL constant from typed array";function AR(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Kue)}}function q0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Que(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function SR(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";un.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];un.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];un.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Zue={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},ede={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class wa{static getBytesPerElement(e){return q0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Jt(e.size),q0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new wa(Zue,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return wa.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return wa.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=SR("Accessor",e,ede),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const XH={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},tde={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:XH},nde={removedProps:XH};class Zi extends Vu{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/wa.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/wa.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=SR("Buffer",e,tde),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=SR("Buffer",e,nde))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new wa(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;Jt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(jo(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return jo(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jo(this.gl);const s=q0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const u=Math.min(o,c);return r=r||u,Jt(r<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Jt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Jt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=AR(e);return Jt(s),this.setAccessor(new wa(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Jt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/q0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new wa(this.accessor,{type:AR(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return un.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return un.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return un.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return un.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new wa(this.accessor,e),this}}const CR={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},KH={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},JH={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},sde=[9729,9728],QH=globalThis.WebGLBuffer||function(){};class Uf extends Vu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function ide(t,e){const n=CR[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=li(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function rde(t,e){const n=CR[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=ba("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(V=>this.initialize(Object.assign({},e,{pixels:V,data:V}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;n||(n=r);let{width:h,height:f,dataFormat:g,type:m,compressed:y=!1,mipmaps:w=!0}=e;const{depth:O=0}=e;return({width:h,height:f,compressed:y,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:y,data:n,width:h,height:f})),this.width=h,this.height=f,this.depth=O,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),w&&this._isNPOT()&&(un.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(c)),this.mipmaps=w,this.setImageData({data:n,width:h,height:f,depth:O,format:s,type:m,dataFormat:g,border:o,mipmaps:w,parameters:l,compressed:y}),w&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(un.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ec(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;l||(l=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:l,width:h,height:f}));const{gl:y}=this;y.bindTexture(this.target,this.handle);let w=null;({data:l,dataType:w}=this._getDataType({data:l,compressed:m}));let O,V=0;return Ec(this.gl,c,()=>{switch(w){case"null":y.texImage2D(n,r,s,h,f,o,g,u,l);break;case"typed-array":y.texImage2D(n,r,s,h,f,o,g,u,l,a);break;case"buffer":O=jo(y),O.bindBuffer(35052,l.handle||l),O.texImage2D(n,r,s,h,f,o,g,u,a),O.bindBuffer(35052,null);break;case"browser-object":li(y)?y.texImage2D(n,r,s,h,f,o,g,u,l):y.texImage2D(n,r,s,g,u,l);break;case"compressed":for(const[ce,re]of l.entries())y.compressedTexImage2D(n,ce,re.format,re.width,re.height,o,re.data),V+=re.levelSize;break;default:Jt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===w?V:l&&l.byteLength?l.byteLength:this.width*this.height*(KH[this.dataFormat]||4)*(JH[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:y=this.border,parameters:w={}}=e;if(({type:h,dataFormat:f,compressed:g,width:a,height:c}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:r,width:a,height:c})),Jt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const O=r;r=O.data,a=O.shape[0],c=O.shape[1]}r instanceof Zi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Ec(this.gl,w,()=>{if(g)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,u,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,f,h,r,m);else if(r instanceof QH){const O=jo(this.gl);O.bindBuffer(35052,r),O.texSubImage2D(n,l,s,o,a,c,f,h,m),O.bindBuffer(35052,null)}else li(this.gl)?jo(this.gl).texSubImage2D(n,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(n,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return un.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Zi?{data:n.handle,dataType:"buffer"}:n instanceof QH?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=CR[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Jt(r,"Could not deduced texture size"),Jt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Jt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Jt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(li(this.gl)||!this.width||!this.height||$H(this.width)&&$H(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===sde.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function ode(t,e){return Jt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class co extends Uf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Uf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m1(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:ode(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Vf="EXT_color_buffer_float",ZH={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Vf,bpp:2},33327:{gl2:Vf,bpp:4},34842:{gl2:Vf,bpp:8},33326:{gl2:Vf,bpp:4},33328:{gl2:Vf,bpp:8},34836:{gl2:Vf,bpp:16},35898:{gl2:Vf,bpp:4}};class Em extends Vu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function ade(t,e,n){const i=n[e];if(!i)return!1;const r=li(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,ZH)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return Jt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&li(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*ZH[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const e8=6144,r8="clear: bad arguments";function MR(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),Jt(0!==o,r8),Ec(t,s,()=>{t.clear(o)})}const IR=[34069,34070,34071,34072,34073,34074];let fde=(()=>{class t extends Uf{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m1(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return D(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=n;const{gl:h}=i,f=o||a,g=yield Promise.all(IR.map(m=>{const y=f[m];return Promise.all(Array.isArray(y)?y:[y])}));i.bind(),IR.forEach((m,y)=>{g[y].length>1&&!1!==i.opts.mipmaps&&un.warn("".concat(i.id," has mipmap and multiple LODs."))(),g[y].forEach((w,O)=>{r&&s?h.texImage2D(m,O,l,r,s,c,l,u,w):h.texImage2D(m,O,l,l,u,w)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=n,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},n,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,u,f):h.texImage2D(i,0,l,l,u,f),this}}return t.FACES=IR,t})();class pde extends Uf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return li(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jo(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:u=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ec(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,h),h instanceof Zi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,u))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(KH[this.dataFormat]||4)*(JH[this.type]||1),"Texture"),this.loaded=!0,this}}function mde(t,e){const{gl:n,width:i,height:r,id:s}=t;return new Ms(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function _1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=X0(t);Jt(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,c=c||u.height,36064===s&&null===g&&(s=1028),Jt(m[s]),l=l||m[s].type,o=function yde(t,e,n,i,r){if(t)return t;const s=q0(e=e||5121,{clamped:!1}),o=function hde(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Jt(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||AR(o);const y=f.bindFramebuffer(36160,g);return f.readPixels(n,i,a,c,r,l,o),f.bindFramebuffer(36160,y||null),h&&u.delete(),o}function DR(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=_1(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=Que({data:i,width:r,height:s}));!function Jue(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function X0(t){return t instanceof Ms?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:mde(t),deleteFramebuffer:!0}}const s8={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function vde(t){const e=new co(t,{format:6408,type:5126,dataFormat:6408}),n=new Ms(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},bde=2;function RR(t,e){return o8(t,e)}function o8(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>a8(t,n))}function a8(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function xde(t,e){const n=s8[e];let i;Jt(n,e);const r=li(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Jt(!1);return i}(t,e)),t.luma.caps[e]||un.log(bde,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const c8="Multiple render targets not supported";class Ms extends Vu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Ms(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=jo(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=jo(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:u}=e;if(Jt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Jt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&un.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Jt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof Em)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,h=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function Ade(t){return(Ms.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&MR(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function dde(t){let{framebuffer:e=null,buffer:n=e8,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jo(t),Ec(t,{framebuffer:e},()=>{switch(n){case e8:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:Jt(!1,r8)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return un.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return un.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return un.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return un.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return un.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return un.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=jo(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=eh(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?eh(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?eh(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(DR(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>un.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=DR(this,{targetMaxHeight:100});return un.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new co(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new Em(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new Em(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&Jt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof Em?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:jo(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function Ede(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:Jt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Zle(t){return li(t)?t:null}(this.gl);n?n.readBuffer(e):Jt(36064===e||1029===e,c8),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=jo(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Jt(1===e.length&&(36064===e[0]||1029===e[0]),c8)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function wde(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in s8)void 0===t.luma.caps[e]&&(t.luma.caps[e]=a8(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Ms.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Cde={5126:Mr.bind(null,"uniform1fv",Xa,1,Uo),35664:Mr.bind(null,"uniform2fv",Xa,2,Uo),35665:Mr.bind(null,"uniform3fv",Xa,3,Uo),35666:Mr.bind(null,"uniform4fv",Xa,4,Uo),5124:Mr.bind(null,"uniform1iv",th,1,Uo),35667:Mr.bind(null,"uniform2iv",th,2,Uo),35668:Mr.bind(null,"uniform3iv",th,3,Uo),35669:Mr.bind(null,"uniform4iv",th,4,Uo),35670:Mr.bind(null,"uniform1iv",th,1,Uo),35671:Mr.bind(null,"uniform2iv",th,2,Uo),35672:Mr.bind(null,"uniform3iv",th,3,Uo),35673:Mr.bind(null,"uniform4iv",th,4,Uo),35674:Mr.bind(null,"uniformMatrix2fv",Xa,4,Hu),35675:Mr.bind(null,"uniformMatrix3fv",Xa,9,Hu),35676:Mr.bind(null,"uniformMatrix4fv",Xa,16,Hu),35678:lo,35680:lo,5125:Mr.bind(null,"uniform1uiv",y1,1,Uo),36294:Mr.bind(null,"uniform2uiv",y1,2,Uo),36295:Mr.bind(null,"uniform3uiv",y1,3,Uo),36296:Mr.bind(null,"uniform4uiv",y1,4,Uo),35685:Mr.bind(null,"uniformMatrix2x3fv",Xa,6,Hu),35686:Mr.bind(null,"uniformMatrix2x4fv",Xa,8,Hu),35687:Mr.bind(null,"uniformMatrix3x2fv",Xa,6,Hu),35688:Mr.bind(null,"uniformMatrix3x4fv",Xa,12,Hu),35689:Mr.bind(null,"uniformMatrix4x2fv",Xa,8,Hu),35690:Mr.bind(null,"uniformMatrix4x3fv",Xa,12,Hu),35678:lo,35680:lo,35679:lo,35682:lo,36289:lo,36292:lo,36293:lo,36298:lo,36299:lo,36300:lo,36303:lo,36306:lo,36307:lo,36308:lo,36311:lo},Tde={},Mde={},Ide={},l8=[0];function OR(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(l8[0]=t,t=l8);const r=t.length;if(r%e&&un.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Xa(t,e){return OR(t,e,Float32Array,Tde)}function th(t,e){return OR(t,e,Int32Array,Mde)}function y1(t,e){return OR(t,e,Uint32Array,Ide)}function u8(t,e,n){const i=Cde[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function Dde(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Ode(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function Pde(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Uf||t instanceof Em)||t instanceof Ms&&!!t.texture}function Nde(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function lo(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function Mr(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),u=l.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{Jt(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function Uo(t,e,n,i){t[e](n,i)}function Hu(t,e,n,i){t[e](n,!1,i)}function v1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function h8(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=f8("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function f8(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class K0 extends Vu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Jt(!1),"unknown"}}constructor(e,n){m1(e),Jt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:v1(n.source,null)||n.id||ba("unnamed ".concat(K0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=v1(n,null);i&&(this.id=ba(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(K0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return v1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function d8(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||v1(e)||"(unnamed)",c="".concat(function kde(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==g?s[m]=h:o[m]=h}const l=function Bde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return f8(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:h8(s,l),warnings:h8(o,l)}}(i,this.source,this.shaderType,this.id);throw un.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),un.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class NR extends K0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class PR extends K0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ude=5120,Vde=5121,Hde=5122,zde=5123,Vs=5126,J0=5124,Q0=5125,LR={[Vs]:[Vs,1,"float"],35664:[Vs,2,"vec2"],35665:[Vs,3,"vec3"],35666:[Vs,4,"vec4"],[J0]:[J0,1,"int"],35667:[J0,2,"ivec2"],35668:[J0,3,"ivec3"],35669:[J0,4,"ivec4"],[Q0]:[Q0,1,"uint"],36294:[Q0,2,"uvec2"],36295:[Q0,3,"uvec3"],36296:[Q0,4,"uvec4"],35670:[Vs,1,"bool"],35671:[Vs,2,"bvec2"],35672:[Vs,3,"bvec3"],35673:[Vs,4,"bvec4"],35674:[Vs,8,"mat2"],35685:[Vs,8,"mat2x3"],35686:[Vs,8,"mat2x4"],35675:[Vs,12,"mat3"],35687:[Vs,12,"mat3x2"],35688:[Vs,12,"mat3x4"],35676:[Vs,16,"mat4"],35689:[Vs,16,"mat4x2"],35690:[Vs,16,"mat4x3"]};function v8(t){const e=LR[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function b8(t,e){switch(t){case Ude:case Vde:case Hde:case zde:t=Vs}for(const n in LR){const[i,r,s]=LR[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class fhe{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!li(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=v8(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new wa(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=v8(i),c={location:e,name:n,accessor:new wa({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const phe=35981,ghe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class x8 extends Vu{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",ghe),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=phe}=e;return this.hash=n||"",this.vs="string"==typeof i?new NR(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new PR(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Jt(this.vs instanceof NR),Jt(this.fs instanceof PR),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(jo(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new fhe(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:y={},uniforms:w,samplers:O}=e;if((w||O)&&(un.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(w||{})),un.priority>=n){const V=m?m.id:"default",ce="mode=".concat(eh(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(eh(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(V);un.log(n,ce)()}return Jt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===u||(f.bindForDraw(r,u,()=>{if(void 0!==m&&(y=Object.assign({},y,{framebuffer:m})),g){const V=function y8(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Jt(!1),0}}(i);g.begin(V)}this._bindTextures(),Ec(this.gl,y,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,u):c&&li(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),g&&g.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};un.priority>=2&&function Rde(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!Ode(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof Ms&&(s=s.texture),s instanceof Uf)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&Nde(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new NR({handle:r});break;case 35632:i.fs=new PR({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ba(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),un.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),un.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||un.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=Dde(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=u8(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=u8(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class Z0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Z0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(n),h=this._getHash(i),f=l.map(ce=>this._getHash(ce.name)).sort(),g=o.map(ce=>this._getHash(ce)),m=Object.keys(r).sort(),y=Object.keys(s).sort(),w=[],O=[];for(const ce of m)w.push(this._getHash(ce)),w.push(this._getHash(r[ce]));for(const ce of y)O.push(this._getHash(ce)),O.push(this._getHash(s[ce]));const V="".concat(u,"/").concat(h,"D").concat(w.join("/"),"M").concat(f.join("/"),"I").concat(O.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[V]){const ce=function Gle(t,e){const{vs:n,fs:i}=e,r=vle(e.modules||[]);return{gl:t,vs:TH(t,Object.assign({},e,{source:n,type:z0,modules:r})),fs:TH(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Wle(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[V]=new x8(this.gl,{hash:V,vs:ce.vs,fs:ce.fs,varyings:o,bufferMode:a}),this._getUniforms[V]=ce.getUniforms||(re=>{}),this._useCounts[V]=0}return this._useCounts[V]++,this._programCache[V]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}const mhe=[255,255,255],_he=1;let yhe=0;class E8{constructor(e={}){be(this,"id",void 0),be(this,"color",void 0),be(this,"intensity",void 0),be(this,"type","ambient");const{color:n=mhe}=e,{intensity:i=_he}=e;this.id=e.id||"ambient-".concat(yhe++),this.color=n,this.intensity=i}}const vhe=[255,255,255],bhe=1,whe=[0,0,-1];let xhe=0;class A8{constructor(e={}){be(this,"id",void 0),be(this,"color",void 0),be(this,"intensity",void 0),be(this,"type","directional"),be(this,"direction",void 0),be(this,"shadow",void 0);const{color:n=vhe}=e,{intensity:i=bhe}=e,{direction:r=whe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(xhe++),this.color=n,this.intensity=i,this.type="directional",this.direction=new Bo(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class Ehe{constructor(e,n={id:"pass"}){be(this,"id",void 0),be(this,"gl",void 0),be(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class w1 extends Ehe{constructor(...e){super(...e),be(this,"_lastRenderIndex",-1)}render(e){return Uu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function She(t){Uu(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const u=[];for(const h of r){const f=s&&s[h.id];o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const y of m){const w=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:y,view:f,pass:e.pass,layers:e.layers},g);u.push(w)}}return u}_getDrawLayerParams(e,{layers:n,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=S8(this._lastRenderIndex+1),u={layer:n[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<n.length;f++){const g=n[f],m=this._shouldDrawLayer(g,u,r,h),y={shouldDrawLayer:m};m&&(y.layerRenderIndex=l(g,m),y.moduleParameters=this._getModuleParameters(g,o,i,a),y.layerParameters=this.getLayerParameters(g,f,e)),c[f]=y}return c}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function Ahe(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||bm(t);return[i.x*s,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Ec(e,{scissorTest:!0,scissor:l},()=>MR(e,h))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Uu(e,{viewport:l});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:y,layerParameters:w}=c[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),y.viewport=o;try{f._drawLayer({moduleParameters:y,uniforms:{layerIndex:m},parameters:w})}catch(O){f.raiseError(O,"drawing ".concat(f," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:bm(this.gl)});if(n)for(const c of n){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,n),r)}}function S8(t=0,e={}){const n={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const u=n[c]=n[c]||S8(e[c],e);l=u(r,s),n[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),n[a]=null):l=t;return s&&l>=t&&(t=l+1),e[a]=l,l};return i}class Che extends w1{constructor(e,n){super(e,n),be(this,"shadowMap",void 0),be(this,"depthBuffer",void 0),be(this,"fbo",void 0),this.shadowMap=new co(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Em(e,{format:33189,width:1,height:1}),this.fbo=new Ms(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Ec(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=bm(this.gl),s=i.width*r,o=i.height*r;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const C8="#define SMOOTH_EDGE_RADIUS 0.5",Dhe={name:"geometry",vs:"\n".concat(C8,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(C8,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Rhe=Object.keys(xi).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(xi[t],";")).join(""),Ohe=Object.keys(Nl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Nl[t],";")).join(""),Nhe=Object.keys(l1).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(l1[t],";")).join(""),Phe="".concat(Rhe,"\n").concat(Ohe,"\n").concat(Nhe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function Lhe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function x1(t){let n,e={};return i=>{for(const r in i)if(!Lhe(i[r],e[r])){n=t(i),e=i;break}return n}}const T8=[0,0,0,0],Fhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],M8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],khe=[0,0,0],I8=[0,0,0],Bhe=x1(function Vhe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function jhe(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=T8,c=T8,l=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=D8(t,e,n);return f&&(c=t.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=j0([],c,o),s=i||s,o=Lf([],r,s),o=Lf([],o,Fhe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,n,i),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=j0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:khe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:M8,project_uCameraPosition:a};if(l){const m=t.getDistanceScales(l);switch(n){case xi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case xi.LNGLAT:case xi.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case xi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function D8(t,e,n=I8){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===xi.LNGLAT_OFFSETS||e===xi.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Nl.WEB_MERCATOR:(e===xi.LNGLAT||e===xi.CARTESIAN)&&(r=[0,0,0],s=!1);break;case Nl.WEB_MERCATOR_AUTO_OFFSET:e===xi.LNGLAT?i=r:e===xi.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Nl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Nl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const Hhe={},FR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Dhe],vs:Phe,getUniforms:function zhe(t=Hhe){return"viewport"in t?function Uhe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=xi.DEFAULT,coordinateOrigin:r=I8,autoWrapLongitude:s=!1}){i===xi.DEFAULT&&(i=t.isGeospatial?xi.LNGLAT:xi.CARTESIAN);const o=Bhe({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||M8,o}(t):{}}},$he=x1(function Jhe({viewport:t,center:e}){return new Vn(t.viewProjectionMatrix).invert().transform(e)}),Yhe=x1(function Qhe({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>function Khe(t,e){const[n,i,r]=t,s=U0([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Bo(t.center).negate()),c=s.map(u=>a.transform(u)),l=(new Vn).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});n.push(l.multiplyRight(o))}return n}),qhe=[0,0,0,1],Xhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],kR={name:"shadow",dependencies:[FR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Zhe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||qhe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=$he({viewport:t.viewport,center:e.project_uCenter}),s=[],o=Yhe({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new Bo(t.viewport.center).negate());e.project_uCoordinateSystem===xi.LNGLAT&&e.project_uProjectionMode===Nl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(Xhe),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},efe={color:[255,255,255],intensity:1},R8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],tfe=[0,0,0,200/255];class BR{constructor(e={}){be(this,"id","lighting-effect"),be(this,"props",null),be(this,"shadowColor",tfe),be(this,"shadow",void 0),be(this,"ambientLight",null),be(this,"directionalLights",[]),be(this,"pointLights",[]),be(this,"shadowPasses",[]),be(this,"shadowMaps",[]),be(this,"dummyShadowMap",null),be(this,"programManager",void 0),be(this,"shadowMatrices",void 0);for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=Z0.getDefaultProgramManager(e),kR&&this.programManager.addDefaultModule(kR)),this.dummyShadowMap||(this.dummyShadowMap=new co(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(kR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Vn).lookAt({eye:new Bo(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new Che(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new E8(efe),this.directionalLights.push(new A8(R8[0]),new A8(R8[1])))}}let nfe=1,ife=1;class O8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=nfe++,a={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=ife++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const E1=Symbol.for("component"),Tm=Symbol.for("asyncPropDefaults"),Hf=Symbol.for("asyncPropOriginal"),nh=Symbol.for("asyncPropResolved");let jR={};function Vo(t,e,n,i){mi.level>0&&jR[t]&&jR[t].call(null,e,n,i)}function UR(t,e=(()=>!0)){return Array.isArray(t)?N8(t,e,[]):e(t)?[t]:[]}function N8(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?N8(r,e,n):e(r)&&n.push(r)}return n}function sfe({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=n;o<r;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const Zc=t=>"function"==typeof t,ih=t=>null!==t&&"object"==typeof t,L8=t=>ih(t)&&t.constructor==={}.constructor,ofe=t=>t&&"function"==typeof t[Symbol.iterator],afe=t=>t&&"function"==typeof t[Symbol.asyncIterator],Mm=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Im=t=>typeof Blob<"u"&&t instanceof Blob,cfe=t=>t&&"object"==typeof t&&t.isBuffer,F8=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||ih(t)&&Zc(t.tee)&&Zc(t.cancel)&&Zc(t.getReader))(t)||(t=>ih(t)&&Zc(t.read)&&Zc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function k8(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function VR(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function HR(t){var e,n;let i;return k8(t,"null loader"),k8(VR(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let zR="";const GR={},pfe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,gfe=/^([-\w.]+\/[-\w.+]+)/;function mfe(t){const e=gfe.exec(t);return e?e[1]:t}function B8(t){const e=pfe.exec(t);return e?e[1]:""}const _fe=/\?.*/;function A1(t){if(Mm(t)){const e=WR(t.url||"");return{url:e,type:mfe(t.headers.get("content-type")||"")||B8(e)}}return Im(t)?{url:WR(t.name||""),type:t.type||""}:"string"==typeof t?{url:WR(t),type:B8(t)}:{url:"",type:""}}function WR(t){return t.replace(_fe,"")}function j8(t){return $R.apply(this,arguments)}function $R(){return $R=D(function*(t){if(Mm(t))return t;const e={},n=function yfe(t){return Mm(t)?t.headers["content-length"]||-1:Im(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:i,type:r}=A1(t);r&&(e["content-type"]=r);const s=yield function wfe(t){return XR.apply(this,arguments)}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),$R.apply(this,arguments)}function YR(){return YR=D(function*(t){if(!t.ok){const e=yield function bfe(t){return qR.apply(this,arguments)}(t);throw new Error(e)}}),YR.apply(this,arguments)}function qR(){return qR=D(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),qR.apply(this,arguments)}function XR(){return XR=D(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function xfe(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),XR.apply(this,arguments)}function U8(t,e){return KR.apply(this,arguments)}function KR(){return KR=D(function*(t,e){if("string"==typeof t){t=function ffe(t){for(const e in GR)t.startsWith(e)&&(t=t.replace(e,GR[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(zR).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield j8(t)}),KR.apply(this,arguments)}const V8=new L0({id:"loaders.gl"});class Efe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const H8=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),z8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),G8=(z8&&parseFloat(z8[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Afe{constructor(){be(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:H8,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Sfe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function JR(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const QR=()=>{const t=JR();return t.globalOptions=t.globalOptions||{...G8},t.globalOptions};function Cfe(t,e,n,i){return n=n||[],function Tfe(t,e){$8(t,null,G8,Sfe,e);for(const n of e)$8(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function Y8(t,e,n){const r={...t.options||{}};return function Ife(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Efe),q8(r,QR()),q8(r,e),r}(e,t,i)}function W8(t,e){const n=QR(),i=t||n;return"function"==typeof i.fetch?i.fetch:ih(i.fetch)?r=>U8(r,i):null!=e&&e.fetch?e?.fetch:U8}function $8(t,e,n,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const c=!e&&ih(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)V8.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Mfe(a,r);V8.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function Mfe(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function q8(t,e){for(const n in e)n in e&&(t[n]=L8(e[n])&&L8(t[n])?{...t[n],...e[n]}:e[n])}function Fl(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Dfe="3.2.13",kl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Ofe=kl.global||kl.self||kl.window||{},rh="object"!=typeof process||"[object process]"!==String(process)||process.browser,ZR="function"==typeof importScripts,Nfe=typeof window<"u"&&typeof window.orientation<"u",X8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);X8&&parseFloat(X8[1]);class eO{}const tO=new Map;function K8(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function J8(t,e=!0,n){const i=n||new Set;if(t)if(Q8(t))i.add(t);else if(Q8(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)J8(t[r],e,i);return void 0===n?Array.from(i):[]}function Q8(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const nO=()=>{};class iO{static isSupported(){return typeof Worker<"u"&&rh||typeof eO<"u"&&!rh}constructor(e){be(this,"name",void 0),be(this,"source",void 0),be(this,"url",void 0),be(this,"terminated",!1),be(this,"worker",void 0),be(this,"onMessage",void 0),be(this,"onError",void 0),be(this,"_loadableURL","");const{name:n,source:i,url:r}=e;Fl(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=nO,this.onError=s=>console.log(s),this.worker=rh?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=nO,this.onError=nO,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||J8(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function Pfe(t){Fl(t.source&&!t.url||!t.source&&t.url);let e=tO.get(t.source||t.url);return e||(t.url&&(e=function Lfe(t){if(!t.startsWith("http"))return t;const e=function Ffe(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return K8(e)}(t.url),tO.set(t.url,e)),t.source&&(e=K8(t.source),tO.set(t.source,e))),Fl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new eO(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new eO(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Bfe{constructor(e,n){be(this,"name",void 0),be(this,"workerThread",void 0),be(this,"isRunning",!0),be(this,"result",void 0),be(this,"_resolve",()=>{}),be(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Fl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Fl(this.isRunning),this.isRunning=!1,this._reject(e)}}class jfe{static isSupported(){return iO.isSupported()}constructor(e){be(this,"name","unnamed"),be(this,"source",void 0),be(this,"url",void 0),be(this,"maxConcurrency",1),be(this,"maxMobileConcurrency",1),be(this,"onDebug",()=>{}),be(this,"reuseWorkers",!0),be(this,"props",{}),be(this,"jobQueue",[]),be(this,"idleQueue",[]),be(this,"count",0),be(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,n=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return D(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return D(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Bfe(i.name,n);n.onMessage=s=>i.onMessage(r,s.type,s.payload),n.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new iO({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Nfe?this.maxMobileConcurrency:this.maxConcurrency}}const Ufe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class zu{static isSupported(){return iO.isSupported()}static getWorkerFarm(e={}){return zu._workerFarm=zu._workerFarm||new zu({}),zu._workerFarm.setProps(e),zu._workerFarm}constructor(e){be(this,"props",void 0),be(this,"workerPools",new Map),this.props={...Ufe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new jfe({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}be(zu,"_workerFarm",void 0);const Vfe="latest";function rO(){return rO=D(function*(t,e,n,i,r){const s=t.id,o=function Hfe(t,e={}){const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let s=t.version;"latest"===s&&(s=Vfe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(i)}return Fl(r),r}(t,n),c=zu.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Wfe.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),rO.apply(this,arguments)}function Wfe(t,e,n,i){return sO.apply(this,arguments)}function sO(){return sO=D(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield t(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),sO.apply(this,arguments)}function oO(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new S1(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function S1(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(S1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new S1(t)}function ez(t){return t&&"object"==typeof t&&t.isBuffer}function tz(t){if(ez(t))return function $fe(t){return ez(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function cO(){return cO=D(function*(t){const e=[];var r,n=!1,i=!1;try{for(var o,s=oO(t);n=!(o=yield s.next()).done;n=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function qfe(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),cO.apply(this,arguments)}S(1492);const Kfe=262144,Qfe=262144;function nz(t,e){this.v=t,this.k=e}function C1(t){return new nz(t,0)}function ev(t){var e,n;function i(s,o){try{var a=t[s](o),c=a.value,l=c instanceof nz;Promise.resolve(l?c.v:c).then(function(u){if(l){var h="return"===s?"return":"next";if(!c.k||u.done)return i(h,u);u=t[h](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(s,o))})},"function"!=typeof t.return&&(this.return=void 0)}function uO(t){return function(){return new ev(t.apply(this,arguments))}}ev.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ev.prototype.next=function(t){return this._invoke("next",t)},ev.prototype.throw=function(t){return this._invoke("throw",t)},ev.prototype.return=function(t){return this._invoke("return",t)};const epe=1048576;function dO(){return dO=uO(function*(t,e){const n=e?.chunkSize||epe;let i=0;for(;i<t.size;){const r=i+n,s=yield C1(t.slice(i,r).arrayBuffer());i=r,yield s}}),dO.apply(this,arguments)}function iz(t,e){return H8?function npe(t,e){return hO.apply(this,arguments)}(t,e):function ipe(t,e){return fO.apply(this,arguments)}(t,e)}function hO(){return hO=uO(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:s,value:o}=yield C1(r);if(s)return;yield tz(o)}}catch{n.releaseLock()}}),hO.apply(this,arguments)}function fO(){return fO=uO(function*(t,e){var r,n=!1,i=!1;try{for(var o,s=oO(t);n=!(o=yield C1(s.next())).done;n=!1){const a=o.value;yield tz(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield C1(s.return()))}finally{if(i)throw r}}}),fO.apply(this,arguments)}const pO="Cannot convert supplied data type";function gO(){return gO=D(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function spe(t,e,n){if(e.text&&"string"==typeof t)return t;if(cfe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(pO)}(t,e);if(Im(t)&&(t=yield j8(t)),Mm(t)){const r=t;return yield function vfe(t){return YR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(F8(t)&&(t=function rpe(t,e){if("string"==typeof t)return function*Jfe(t,e){const n=e?.chunkSize||Kfe;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),o=t.slice(i,i+s);i+=s,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*Zfe(t,e={}){const{chunkSize:n=Qfe}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),o=new Uint8Array(t,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(t,e);if(Im(t))return function tpe(t,e){return dO.apply(this,arguments)}(t,e);if(F8(t))return iz(t,e);if(Mm(t))return iz(t.body,e);throw new Error("makeIterator")}(t,n)),ofe(t)||afe(t))return function Xfe(t){return cO.apply(this,arguments)}(t);throw new Error(pO)}),gO.apply(this,arguments)}const dpe=new L0({id:"loaders.gl"}),rz=()=>{const t=JR();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function sz(t){const e=rz();t=Array.isArray(t)?t:[t];for(const n of t){const i=HR(n);e.find(r=>i===r)||e.unshift(i)}}const fpe=/\.([^.]+)$/;function yO(){return yO=D(function*(t,e=[],n,i){if(!az(t))return null;let r=oz(t,e,{...n,nothrow:!0},i);if(r)return r;if(Im(t)&&(r=oz(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(cz(t));return r}),yO.apply(this,arguments)}function oz(t,e=[],n,i){if(!az(t))return null;if(e&&!Array.isArray(e))return HR(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function hpe(){return rz()}()),function mpe(t){for(const e of t)HR(e)}(r);const s=function gpe(t,e,n,i){const{url:r,type:s}=A1(t),o=r||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=vO(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function _pe(t,e){const n=e&&fpe.exec(e),i=n&&n[1];return i?function ype(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||vO(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function vpe(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(bpe(e,n))return n}else if(ArrayBuffer.isView(e)){if(lz(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&lz(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(uz(t)):""),a=a||vO(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&dpe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(s||null!=n&&n.nothrow))throw new Error(cz(t));return s}function az(t){return!(t instanceof Response&&204===t.status)}function cz(t){const{url:e,type:n}=A1(t);let i="No valid loader found (";i+=e?"".concat(function upe(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?uz(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function vO(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function bpe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function lz(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function wpe(t,e,n,i){if(i instanceof ArrayBuffer)return function Yfe(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===bO(t,e,i.length);default:return!1}}(t,e,n,r))}function uz(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?bO(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?bO(t,0,e):""}function bO(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function T1(t,e,n,i){return wO.apply(this,arguments)}function wO(){return wO=D(function*(t,e,n,i){Fl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!VR(e)&&(i=void 0,n=e,e=void 0),t=yield t,n=n||{};const{url:r}=A1(t),o=function lpe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function ppe(t){return yO.apply(this,arguments)}(t,o,n);return a?(i=function cpe(t,e,n=null){if(n)return n;const i={fetch:W8(e,t),...t};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:T1,loaders:o},n=Cfe(n,a,o,r),i),yield function xpe(t,e,n,i){return xO.apply(this,arguments)}(a,t,n,i)):null}),wO.apply(this,arguments)}function xO(){return xO=D(function*(t,e,n,i){if(function Rfe(t,e=Dfe){Fl(t,"no worker provided")}(t),Mm(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:u}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:u}}if(e=yield function ope(t,e,n){return gO.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function zfe(t,e){return!(!zu.isSupported()||!(rh||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function Gfe(t,e,n,i,r){return rO.apply(this,arguments)}(t,e,n,i,T1);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw Fl(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),xO.apply(this,arguments)}function tv(t,e,n,i){return EO.apply(this,arguments)}function EO(){return EO=D(function*(t,e,n,i){!Array.isArray(e)&&!VR(e)&&(n=e,e=void 0);const r=W8(n);let s=t;return"string"==typeof t&&(s=yield r(t)),Im(t)&&(s=yield r(t)),yield T1(s,e,n)}),EO.apply(this,arguments)}class Epe{constructor(e,n,i){be(this,"id",void 0),be(this,"context",void 0),be(this,"isLoaded",void 0),be(this,"persistent",void 0),be(this,"_loadCount",0),be(this,"_subscribers",new Set),be(this,"_data",void 0),be(this,"_loader",void 0),be(this,"_error",void 0),be(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=tv(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Ape{constructor({gl:e,protocol:n}){be(this,"protocol",void 0),be(this,"_context",void 0),be(this,"_resources",void 0),be(this,"_consumers",void 0),be(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new Epe(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const Spe=[FR],Cpe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Tpe(t){const e=Z0.getDefaultProgramManager(t);for(const n of Spe)e.addDefaultModule(n);for(const n of Cpe)e.addShaderHook(n);return e}class Dpe{constructor(e,{deck:n,stats:i,viewport:r,timeline:s}={}){be(this,"layers",void 0),be(this,"context",void 0),be(this,"resourceManager",void 0),be(this,"_lastRenderedLayers",[]),be(this,"_needsRedraw",!1),be(this,"_needsUpdate",!1),be(this,"_nextLayers",null),be(this,"_debug",!1),be(this,"activateViewport",o=>{Vo("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new Ape({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Tpe(e),stats:i||new wR({id:"deck.gl"}),viewport:r||new Xd({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new O8,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Vo("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=UR(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const o of e)i[o.id]?mi.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];null===s&&mi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class Rpe{constructor(e){be(this,"width",void 0),be(this,"height",void 0),be(this,"views",void 0),be(this,"viewState",void 0),be(this,"controllers",void 0),be(this,"timeline",void 0),be(this,"_viewports",void 0),be(this,"_viewportMap",void 0),be(this,"_isUpdating",void 0),be(this,"_needsRedraw",void 0),be(this,"_needsUpdate",void 0),be(this,"_eventManager",void 0),be(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=UR(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!_m(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):mi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=n[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}const Ppe=Math.PI/180;function dz(t){return 512/4003e4/Math.cos(t*Ppe)}class sh extends Xd{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:g=!1}=e;let{width:m,height:y,altitude:w=1.5}=e;const O=Math.pow(2,r);m=m||1,y=y||1;let V,ce=null;u?(w=u[5]/2,V=c1(w)):(e.fovy?(V=e.fovy,w=ZD(V)):V=c1(w),ce=function nH(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:u=c1(Uce)}=t;void 0!==i&&(u=c1(i));const h=u*xc,f=r*xc,g=ZD(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/n);const y=h*(.5+(s?s[1]:0)/n),w=Math.sin(y)*m/Math.sin(XD(Math.PI/2-f-y,.01,Math.PI-.01)),O=Math.sin(f)*w+m;return{fov:h,aspect:e/n,focalDistance:g,near:c,far:Math.min(O*l,10*m)}}({width:m,height:y,pitch:s,fovy:V,nearZMultiplier:a,farZMultiplier:c}));let re=function zce(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e1(a,a,[0,0,-r]),$4(a,a,-n*xc),Y4(a,a,i*xc);const c=s/e;return $D(a,a,[c,c,c]),o&&e1(a,a,function Bae(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:y,pitch:s,bearing:o,scale:O,altitude:w});f&&(re=(new Vn).translate([512*f,0,0]).multiplyLeft(re)),super({...e,width:m,height:y,viewMatrix:re,longitude:i,latitude:n,zoom:r,...ce,fovy:V,focalDistance:w}),be(this,"longitude",void 0),be(this,"latitude",void 0),be(this,"pitch",void 0),be(this,"bearing",void 0),be(this,"altitude",void 0),be(this,"fovy",void 0),be(this,"orthographic",void 0),be(this,"_subViewports",void 0),be(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=w,this.fovy=V,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new sh({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*dz(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/dz(i)]}addMetersToLngLat(e,n){return tH(e,n)}panByPosition(e,n){const i=U0(n,this.pixelUnprojectionMatrix),s=t1([],this.projectFlat(e),q4([],i)),o=t1([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Wce(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},o=r([0,i],s),a=r([n,i],s);let c,l;return(t.fovy?.5*t.fovy*sH:Math.atan(.5/t.altitude))>(90-t.pitch)*sH-.01?(c=oH(t,0,e),l=oH(t,n,e)):(c=r([0,0],s),l=r([n,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=rH({width:i,height:r,bounds:e,...n});return new sh({width:i,height:r,longitude:s,latitude:o,zoom:a})}}be(sh,"displayName","WebMercatorViewport");class Fpe extends pH{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:y,startZoomLngLat:w,startRotatePos:O,startBearing:V,startPitch:ce,startZoom:re,normalize:Ie=!0}=e;ao(Number.isFinite(s)),ao(Number.isFinite(r)),ao(Number.isFinite(o)),super({width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:Ie,position:u},{startPanLngLat:y,startZoomLngLat:w,startRotatePos:O,startBearing:V,startPitch:ce,startZoom:re}),be(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+n,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Vr(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=Vr(r,i,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Vr(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function $ce(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=t;(r<-180||r>180)&&(r=Z4(r+180,360)-180),(a<-180||a>180)&&(a=Z4(a+180,360)-180);const c=KD(n/512);if(o<=c)o=c,s=0;else{const l=n/2/Math.pow(2,o),u=mm([0,l])[1];if(s<u)s=u;else{const h=mm([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],c=n[1],{width:l,height:u}=this.getViewportProps(),h=s/l;let f=0;o>0?Math.abs(u-c)>5&&(f=o/(c-u)*1.2):o<0&&c>5&&(f=1-a/c),f=Vr(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps();let w=i;return f>0?w=i+f*(m-i):f<0&&(w=i-f*(g-i)),{pitch:w,bearing:r+180*h}}}class kpe extends iR{constructor(...e){super(...e),be(this,"ControllerState",Fpe),be(this,"transition",{transitionDuration:300,transitionInterpolator:new u1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),be(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class fz extends tR{get ViewportType(){return sh}get ControllerType(){return kpe}}be(fz,"displayName","MapView");class Bpe extends w1{constructor(e,n){super(e,n),be(this,"maskMap",void 0),be(this,"fbo",void 0);const{mapSize:i=2048}=n;this.maskMap=new co(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new Ms(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,Ec(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Hpe{constructor(){be(this,"id","mask-effect"),be(this,"props",null),be(this,"useInPicking",!0),be(this,"dummyMaskMap",void 0),be(this,"channels",[]),be(this,"masks",null),be(this,"maskPass",void 0),be(this,"maskMap",void 0),be(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new co(e,{width:1,height:1}));const a=n.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Bpe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function jpe({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!n)return i;const r=function Vpe(t){const e_x=t[2]-t[0],e_y=t[3]-t[1],n_x=t[0]+.5*e_x,n_y=t[1]+.5*e_y;return[n_x-e_x,n_y-e_y,n_x+e_x,n_y+e_y]}(i);return n[2]-n[0]<r[2]-r[0]||n[3]-n[1]<r[3]-r[1]||(n[0]=Math.max(n[0],r[0]),n[1]=Math.max(n[1],r[1]),n[2]=Math.min(n[2],r[2]),n[3]=Math.min(n[3],r[3])),n}({layers:e.layers,viewport:s}),c||!hm(e.bounds,a.bounds))){const{maskPass:l,maskMap:u}=this,h=function Upe({bounds:t,viewport:e,width:n,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,i-=2,e instanceof sh){const{longitude:a,latitude:c,zoom:l}=rH({width:n,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new sh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:n,height:i})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),i/(t[3]-t[1]));return new rR({x:1,y:1}).makeViewport({width:n,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let i=0;for(const r of e){const{id:s}=r.root;let o=n[s];if(!o){if(++i>4){mi.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},n[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in n))&&(this.channels[r]=null)}for(const r in n){const s=n[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const zpe=new BR;class Gpe{constructor(){be(this,"effects",void 0),be(this,"_internalEffects",void 0),be(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!_m(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Hpe),e.some(n=>n instanceof BR)||this._internalEffects.push(zpe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Wpe extends w1{shouldDrawLayer(e){return"draw"===e.props.operation}}const pz={blendFunc:[1,0,32771,0],blendEquation:32774};class gz extends w1{constructor(...e){super(...e),be(this,"pickZ",void 0),be(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m}){const y=this.gl;this.pickZ=m;const w=m?null:{byLayer:new Map,byAlpha:[]};this._colors=w;const O=Ec(y,{scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...pz,blend:!m},()=>super.render({target:o,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(ce=>ce.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:w&&Ype.bind(null,w),stats:O}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,pz),r.blend=!0,r.blendColor=function $pe(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,o=i.get(e);return o?(o.viewports.push(n),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},i.set(e,o),r[s]=o):(mi.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function Ype(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Xpe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Wpe(e),this.pickLayersPass=new gz(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||Ms.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=n.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,Vo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let i=null;for(const r of e)r.preRender(this.gl,n),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Ms(this.gl),new Ms(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=n.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Kpe={pickedColor:null,pickedObjectIndex:-1};function Jpe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let u=r*r,h=-1,f=0;for(let g=0;g<l;g++){const m=g+a-i,y=m*m;if(y>u)f+=4*c;else for(let w=0;w<c;w++){if(t[f+3]-1>=0){const V=w+o-n,ce=V*V+y;ce<=u&&(u=ce,h=f)}f+=4}}if(h>=0){const g=t.slice(h,h+4),m=e(g);if(m){const y=Math.floor(h/4/c),w=h/4-y*c;return{...m,pickedColor:g,pickedX:o+w,pickedY:a+y}}mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Kpe}function mz({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function ege(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Zpe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const f=n.layerId,g=o?o.props.id:null;if(g!==f||a!==n.index){if(g!==f){const m=r.find(y=>y.props.id===f);m&&c.unshift(m)}n.layerId=g,n.index=a,n.info=null}}const l=mz(t),u=new Map;return u.set(null,l),c.forEach(h=>{let f={...l};h===o&&(f.color=s,f.index=a,f.picked=!0),f=_z({layer:h,info:f,mode:i});const g=f.layer;h===o&&"hover"===i&&(n.info=f),u.set(g.id,f),"hover"===i&&g.updateAutoHighlight(f)}),u}function _z({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class tge{constructor(e){be(this,"gl",void 0),be(this,"pickingFBO",void 0),be(this,"depthFBO",void 0),be(this,"pickLayersPass",void 0),be(this,"layerFilter",void 0),be(this,"lastPickedInfo",void 0),be(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new gz(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(f=>f.id===o):null,l=a&&r.find(f=>f.id===a)||r[0],u=l&&l.unproject([e-l.x,n-l.y]);return{...s,x:e,y:n,viewport:l,coordinate:u,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new Ms(i),Ms.isSupported(i,{colorBufferFloat:!0}))){const r=new Ms(i);r.attach({36064:new co(i,{format:li(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>i.isPickable()&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=bm(this.gl);if(!f)return{result:[],emptyInfo:mz({viewports:i,x:r,y:s,pixelRatio:g})};this._resizeBuffer();const m=yR(this.gl,[r,s],!0),y=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],w=Math.round(o*g),{width:O,height:V}=this.pickingFBO,ce=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:w,deviceWidth:O,deviceHeight:V}),re={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Ie;const Ne=[],it=new Set;for(let ut=0;ut<a;ut++){let Ye,dt;Ye=ce?Jpe({...this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:ce,cullRect:re,effects:h,pass:"picking:".concat(c)}),deviceX:y[0],deviceY:y[1],deviceRadius:w,deviceRect:ce}):{pickedColor:null,pickedObjectIndex:-1},Ye.pickedLayer&&l&&this.depthFBO&&(dt=this._drawAndSample({layers:[Ye.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:Ye.pickedX,y:Ye.pickedY,width:1,height:1},cullRect:re,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),Ye.pickedLayer&&ut+1<a&&(it.add(Ye.pickedLayer),Ye.pickedLayer.disablePickingIndex(Ye.pickedObjectIndex)),Ie=Zpe({pickInfo:Ye,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:s,z:dt,pixelRatio:g});for(const yt of Ie.values())yt.layer&&Ne.push(yt);if(!Ye.pickedColor)break}for(const ut of it)ut.restorePickingColors();return{result:Ne,emptyInfo:Ie.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=bm(this.gl),m=yR(this.gl,[r,s],!0),y=m.x,w=m.y+m.height,O=yR(this.gl,[r+o,s+a],!0),ce=O.y,Ne=function Qpe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:{x:y,y:ce,width:O.x+O.width-y,height:w-ce},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),it=new Map,ut=Number.isFinite(l);for(let Ye=0;Ye<Ne.length&&!(ut&&l&&it.size>=l);Ye++){const dt=Ne[Ye];let yt={color:dt.pickedColor,layer:null,index:dt.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:g};yt=_z({layer:dt.pickedLayer,info:yt,mode:c}),it.has(yt.object)||it.set(yt.object,yt)}return Array.from(it.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:f,y:g,width:m,height:y}=s,w=new(l?Float32Array:Uint8Array)(m*y*4);return _1(u,{sourceX:f,sourceY:g,sourceWidth:m,sourceHeight:y,target:w}),{pickedColors:w,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,n+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const nge={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ige{constructor(e){be(this,"el",null),be(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,nge),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function yz(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const sge=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),vz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:oge}=(vz&&parseFloat(vz[1]),globalThis),AO=typeof Image<"u",SO=typeof ImageBitmap<"u",CO=!!sge||!!oge;function bz(t){const e=function xz(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const lge=/^data:image\/svg\+xml/,uge=/\.svg((\?|#).*)?$/;function TO(t){return t&&(lge.test(t)||uge.test(t))}function Ez(t,e){if(TO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function Az(t,e,n){return MO.apply(this,arguments)}function MO(){return MO=D(function*(t,e,n){const i=function dge(t,e){if(TO(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return Ez(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function hge(t,e){return IO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),MO.apply(this,arguments)}function IO(){return IO=D(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),IO.apply(this,arguments)}const fge={};let Sz=!0;function DO(){return DO=D(function*(t,e,n){let i;i=TO(n)?yield Az(t,e,n):Ez(t,n);const r=e&&e.imagebitmap;return yield function gge(t){return RO.apply(this,arguments)}(i,r)}),DO.apply(this,arguments)}function RO(){return RO=D(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function mge(t){for(const e in t||fge)return!1;return!0}(e)||!Sz)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),Sz=!1}return yield createImageBitmap(t)}),RO.apply(this,arguments)}const jl=!1,nv=!0;function Cz(t){const e=iv(t);return function Ege(t){const e=iv(t);return e.byteLength>=24&&2303741511===e.getUint32(0,jl)?{mimeType:"image/png",width:e.getUint32(16,jl),height:e.getUint32(20,jl)}:null}(e)||function Cge(t){const e=iv(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,jl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Tge(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,jl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,jl),width:e.getUint16(s+7,jl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,jl)}return null}(e)||function Age(t){const e=iv(t);return e.byteLength>=10&&1195984440===e.getUint32(0,jl)?{mimeType:"image/gif",width:e.getUint16(6,nv),height:e.getUint16(8,nv)}:null}(e)||function Sge(t){const e=iv(t);return e.byteLength>=14&&16973===e.getUint16(0,jl)&&e.getUint32(2,nv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,nv),height:e.getUint32(22,nv)}:null}(e)||function xge(t){const n=function _ge(t){return function wge(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function bge(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function yge(t){switch(function vge(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function iv(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function OO(){return OO=D(function*(t,e){const{mimeType:n}=Cz(t)||{},i=globalThis._parseImageNode;return yz(i),yield i(t,n)}),OO.apply(this,arguments)}function NO(){return NO=D(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Dge(t){switch(t){case"auto":case"data":return function cge(){if(SO)return"imagebitmap";if(AO)return"image";if(CO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function age(t){switch(t){case"auto":return SO||AO||CO;case"imagebitmap":return SO;case"image":return AO;case"data":return CO;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function pge(t,e,n){return DO.apply(this,arguments)}(t,e,s);break;case"image":a=yield Az(t,e,s);break;case"data":a=yield function Mge(t,e){return OO.apply(this,arguments)}(t,e);break;default:yz(!1)}return"data"===r&&(a=function wz(t){switch(bz(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),NO.apply(this,arguments)}const Tz={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Ige(t,e,n){return NO.apply(this,arguments)},tests:[t=>!!Cz(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Oge={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Rge(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},rv="8.8.27",M1=globalThis.deck&&globalThis.deck.VERSION;if(M1&&M1!==rv)throw new Error("deck.gl - multiple versions detected: ".concat(M1," vs ").concat(rv));M1||(mi.log(1,"deck.gl ".concat(rv))(),globalThis.deck={...globalThis.deck,VERSION:rv,version:rv,log:mi,_registerLoggers:function rfe(t){jR=t}},sz([Oge,[Tz,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Nge=globalThis.deck,I1=globalThis;function Mz(t){if(!t&&!Rl())return"Node";if(I4(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":I1.chrome?"Chrome":I1.safari?"Safari":I1.mozInnerScreenX?"Firefox":"Unknown"}class D1 extends Vu{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=li(e),r=o8(e,"TIMER_QUERY");let s=i||r;for(const o of n)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:Jt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return D1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const Iz=Rl()&&typeof document<"u";let zge=0;class Gge{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(w=>zH(w)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=jf.get("animation-loop-".concat(zge++))}=e;let{useDevicePixels:y=!0}=e;"useDevicePixelRatio"in e&&(un.deprecated("useDevicePixelRatio","useDevicePixels")(),y=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:y}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Jt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=D1.isSupported(this.gl,["timers"])?new D1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return D(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return un.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Iz?new Promise((e,n)=>{Iz&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Hge(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function Vge(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?bR(this.props.gl,e):this.onCreateContext(e),!g1(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function kue(t){Uu(t,_R)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Hue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Bue(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function Yue(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(un.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(un.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*o),t.canvas.height=Math.floor(r*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Ms(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var R1=S(4511);const Wge={mousedown:1,mousemove:2,mouseup:4};(function Yge(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function $ge(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(R1.PointerEventInput),function qge(t){t.prototype.handler=function(n){let i=Wge[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(R1.MouseInput);const Xge=R1.Manager,Ul=R1;class O1{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const Kge=Ul?[[Ul.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ul.Rotate,{enable:!1}],[Ul.Pinch,{enable:!1}],[Ul.Swipe,{enable:!1}],[Ul.Pan,{threshold:0,enable:!1}],[Ul.Press,{enable:!1}],[Ul.Tap,{event:"doubletap",taps:2,enable:!1}],[Ul.Tap,{event:"anytap",enable:!1}],[Ul.Tap,{enable:!1}]]:null,Oz={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Jge={doubletap:["tap"]},Qge={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},LO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Zge={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Nz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},eme=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Dm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let FO=!1;try{Dm.addEventListener("test",null,{get passive(){return FO=!0,!0}}),Dm.removeEventListener("test",null)}catch{FO=!1}const tme=-1!==eme.indexOf("firefox"),{WHEEL_EVENTS:nme}=LO,Lz=4.000244140625;class sme extends O1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;Dm.WheelEvent&&(tme&&r.deltaMode===Dm.WheelEvent.DOM_DELTA_PIXEL&&(s/=Dm.devicePixelRatio),r.deltaMode===Dm.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%Lz==0&&(s=Math.floor(s/Lz)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(nme),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!FO&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:ome}=LO,Fz="pointermove",kz="pointerover",Bz="pointerout",jz="pointerenter",Uz="pointerleave";class ame extends O1{constructor(e,n,i){super(e,n,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(ome),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Fz&&(this.enableMoveEvent=n),e===kz&&(this.enableOverEvent=n),e===Bz&&(this.enableOutEvent=n),e===jz&&(this.enableEnterEvent=n),e===Uz&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(kz,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(Bz,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(jz,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(Uz,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(Fz,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:cme}=LO,Vz="keydown";class lme extends O1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:Vz,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(cme),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Vz&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const zz="contextmenu";class ume extends O1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:zz,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===zz&&(this.options.enable=n)}}const dme={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function wme(t){const e=dme[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&n),o=!!(4&n),a=!!(2&n)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function xme(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const jO={srcElement:"root",priority:0};class Eme{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=jO;"string"==typeof i||i&&i.addEventListener?c={...jO,srcElement:i}:i&&(c={...jO,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const u={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=u.priority);)h--;l.splice(h+1,0,u)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===n){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:u,once:h}=i[c];if(u({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...wme(e),...xme(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Ame={events:null,recognizers:null,recognizerOptions:{},Manager:Xge,touchAction:"none",tabIndex:0};class Sme{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:s}=r,o=Qge[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Ame,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||Kge}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Oz).forEach(r=>{const s=this.manager.get(r);s&&Oz[r].forEach(o=>{s.recognizeWith(o)})});for(const r in n.recognizerOptions){const s=this.manager.get(r);if(s){const o=n.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new sme(e,this._onOtherEvent,{enable:!1}),this.moveInput=new ame(e,this._onOtherEvent,{enable:!1}),this.keyInput=new lme(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new ume(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const s=Jge[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);n?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if("string"!=typeof e){i=n;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,c=Nz[e]||e;let l=a.get(c);l||(l=new Eme(this),a.set(c,l),l.recognizerName=Zge[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,n,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(Nz[e]||e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function zf(){}const Gz={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:zf,onResize:zf,onViewStateChange:zf,onInteractionStateChange:zf,onBeforeRender:zf,onAfterRender:zf,onLoad:zf,onError:t=>mi.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class UO{constructor(e){be(this,"props",void 0),be(this,"width",0),be(this,"height",0),be(this,"userData",{}),be(this,"canvas",null),be(this,"viewManager",null),be(this,"layerManager",null),be(this,"effectManager",null),be(this,"deckRenderer",null),be(this,"deckPicker",null),be(this,"eventManager",null),be(this,"tooltip",null),be(this,"metrics",void 0),be(this,"animationLoop",void 0),be(this,"stats",void 0),be(this,"viewState",void 0),be(this,"cursorState",void 0),be(this,"_needsRedraw",void 0),be(this,"_pickRequest",void 0),be(this,"_lastPointerDownInfo",null),be(this,"_metricsCounter",void 0),be(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),be(this,"_onEvent",n=>{const i=dH[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let u=!1;c&&(u=c.call(a,o,n)),!u&&l&&l(o,n)}),be(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...Gz,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&mi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Mz()&&mi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new wR({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&F0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&mi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&mi.removed("onLayerClick","onClick")(),e.initialViewState&&!_m(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return ao(this.viewManager),this.viewManager.views}getViewports(e){return ao(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,i){ao(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),ao(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;n===this.width&&i===this.height||(this.width=n,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:n,height:i}),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new Gge({width:n,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:h=>zH({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new fz({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var n;s=a,o=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,bR(e,{enable:!0,copyState:!0})),this.tooltip=new ige(this.canvas),Uu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new O8;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Sme(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in dH)this.eventManager.on(r,this._onEvent);this.viewManager=new Rpe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Dpe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new Gpe,this.deckRenderer=new Xpe(e),this.deckPicker=new tge(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;Uu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),mi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=jf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}be(UO,"defaultProps",Gz),be(UO,"VERSION",Nge.VERSION);var Gf=S(6887);function Gu(t={}){const{connector:e=(()=>new Qt),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=c=void 0,u=h=!1},m=()=>{const y=o;g(),y?.unsubscribe()};return gn((y,w)=>{l++,!h&&!u&&f();const O=c=c??e();w.add(()=>{l--,0===l&&!h&&!u&&(a=VO(m,r))}),O.subscribe(w),!o&&l>0&&(o=new Hr({next:V=>O.next(V),error:V=>{h=!0,f(),a=VO(g,n,V),O.error(V)},complete:()=>{u=!0,f(),a=VO(g,i),O.complete()}}),Cs(y).subscribe(o))})(s)}}function VO(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Hr({next:()=>{i.unsubscribe(),t()}});return Cs(e(...n)).subscribe(i)}class HO{constructor(e,n){be(this,"opts",void 0),be(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=n.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function P1(t){return t.stride||t.size*t.bytesPerElement}function Wz(t,e){e.offset&&mi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=P1(t),s=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}class Mme{constructor(e,n,i){be(this,"gl",void 0),be(this,"id",void 0),be(this,"size",void 0),be(this,"settings",void 0),be(this,"value",void 0),be(this,"doublePrecision",void 0),be(this,"_buffer",void 0),be(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=5130===r;let a,{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&n.isIndexed?e&&RR(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function Cme(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Zi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*P1(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),F0.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function Tme(t,e){const n=Wz(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new HO(this,s.high),i["".concat(e,"64Low")]=r?new HO(this,s.low):new Float32Array(this.size),i}if(n){const i=Wz(this.getAccessor(),n);return{[e]:new HO(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const u=n[c++];u<o[l]&&(o[l]=u),u>a[l]&&(a[l]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Zi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),n.constant&&this._areValuesEqual(s,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=P1(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=P1(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=GD(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?GD(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=F0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&r&&o.subData({data:r instanceof Float64Array?GD(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&mi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e)return n[i]=r[0],n;switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)n[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}const $z=[],Yz=[];function L1(t,e=0,n=1/0){let i=$z;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(Yz.length=t.length,i=Yz):i=$z,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function qz(t){return t&&t[Symbol.asyncIterator]}const Dme=[],F1=[[0,1/0]];function zO(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!s)return;let l=a;for(;l<c;){const u=s(l,e);for(let h=0;h<r;h++)n[i+l]=u[h]||0,l++}}const Nme={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Xz(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Nme[n],...e,...t,type:n}}function Kz(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Jz(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Qz(t){t.push(t.shift())}function GO(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,o=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function Zz({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,c=n.byteOffset,l=n.startIndices,u=r&&l,h=GO(n,e),f=n.isConstant;if(!u&&i>=h)return;const g=f?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!f){const O=s;s=(V,ce)=>n.normalizeConstant(O(V,ce))}const m=f?(O,V)=>s(g,V):(O,V)=>s(g.subarray(O,O+a),V),y=t.getData({length:i}),w=new Float32Array(h);(function Ome({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return zO({source:t,target:e,size:n,getData:i}),e;let o=0,a=0;const c=i&&((u,h)=>i(u+a,h)),l=Math.min(r.length,s.length);for(let u=1;u<l;u++){const h=r[u]*n,f=s[u]*n;zO({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:c}),o=h,a=f}a<e.length&&zO({source:[],target:e,start:a,size:n,getData:c})})({source:y,target:w,sourceStartIndices:r,targetStartIndices:l,size:a,getData:m}),t.byteLength<w.byteLength+c&&t.reallocate(w.byteLength+c),t.subData({data:w,offset:c})}class WO extends Mme{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:F1}),be(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return Xz(Array.isArray(n)?e[n.find(s=>e[s])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function Rme(t,e){if(t===F1||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const o=t[s];o[1]<e[0]?(n.push(o),r=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=F1}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Dme}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==F1),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(r,this,{data:n,startRow:l,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,u]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return ao(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Ime(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,u=Math.floor((t.length-l)/c);return(h,{index:f,target:g})=>{if(!s){const O=f*c+l;for(let V=0;V<n;V++)g[V]=t[O+V];return g}const m=s[f],y=s[f+1]||u;let w;if(o){w=new Array(y-m);for(let O=m;O<y;O++){const V=O*c+l;g=new Array(n);for(let ce=0;ce<n;ce++)g[ce]=t[V+ce];w[O-m]=g}}else if(c===n)w=t.subarray(m*n+l,y*n+l);else{w=new t.constructor((y-m)*n);let O=0;for(let V=m;V<y;V++){const ce=V*c+l;for(let re=0;re<n;re++)w[O++]=t[ce+re]}}return w}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=c.binaryAccessor||("function"==typeof f?f:s[f]);ao("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let y=e.getVertexOffset(i);const{iterable:w,objectInfo:O}=L1(n,i,r);for(const V of w){O.index++;let ce=m(V,O);if(g&&(ce=g.call(this,ce)),h){const re=(O.index<h.length-1?h[O.index+1]:o)-h[O.index];if(ce&&Array.isArray(ce[0])){let Ie=y;for(const Ne of ce)e._normalizeValue(Ne,l,Ie),Ie+=u}else ce&&ce.length>u?l.set(ce,y):(e._normalizeValue(ce,O.target,0),sfe({target:l,source:O.target,start:y,count:re}));y+=re*u}else e._normalizeValue(ce,l,y),y+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const eG="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Lme="#version 300 es\n".concat(eG);function tG(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,s]=n;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function nG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?Lme:e>300?"#version ".concat(e,"\n").concat(eG):"void main() {gl_FragColor = vec4(0);}";const s=function Bme(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ya(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class iG extends Vu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return li(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jo(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,wm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,un.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Zi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class jme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Zi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Jt(li(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=n[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new iG(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];n[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],Jt(i[s]instanceof Zi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Zi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function rG(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const Ume={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},k1="transform_uSize_",sG="transform_position";const qme={10241:9728,10240:9728,10242:33071,10243:33071};class Kme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function zme(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let s,o;n&&(({width:s,height:o}=i),r["".concat(k1).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(k1).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=_1(n);if(!e)return i;const r=i.constructor,s=function kme(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ya(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof co)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Zi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new Ms(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(qme)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function gde(t,e){Jt(t instanceof co||t instanceof fde||t instanceof pde);const n=t.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=t;return new n(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function Hme(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,o=Object.keys(n).length,a=null;const c={};let l=e,u={};if(o>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((g,m,y)=>{if(o>0){const w=function Yme(t,e){const n={},i=function Gme(t){return tG(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Wme(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(k1).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),u=function Fme(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ya(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,";\n");return n[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(g,n);if(w){const{updatedLine:O,inject:V}=w;f[m]=O,u=fR([u,V]),Object.assign(c,w.samplerTextureMap),o--}}i&&!a&&(a=function $me(t,e){const n=tG(t,["varying","out"]);return n&&n.name===e?n.type:null}(g,i))}),i){Jt(r);const g="".concat(k1).concat(i),m="uniform vec2 ".concat(g,";\n"),y="     vec2 ".concat(sG," = transform_getPos(").concat(g,");\n     gl_Position = vec4(").concat(sG,", 0, 1.);\n");u=fR([u,{"vs:#decl":m,"vs:#main-start":y}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=fR([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||nG({version:rG(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Ume].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}let B1=null;class Ka extends Vu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||li(e)||"Chrome"===Mz()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ka(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ka.MAX_ATTRIBUTES=Ka.MAX_ATTRIBUTES||e.getParameter(34921),Ka.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ka._setConstantFloatArray(e,n,i);break;case Int32Array:Ka._setConstantIntArray(e,n,i);break;case Uint32Array:Ka._setConstantUintArray(e,n,i);break;default:Jt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ka.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Jt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Jt(li(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Ka.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Zi(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function Qme(t,e){const n=function Jme(t){return(!B1||B1.byteLength<t)&&(B1=new ArrayBuffer(t)),B1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function Zme(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Jt(!1)}}static _setConstantIntArray(e,n,i){switch(Jt(li(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Jt(!1)}}static _setConstantUintArray(e,n,i){switch(Jt(li(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Jt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Jt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const n_e=/^(.+)__LOCATION_([0-9]+)$/,i_e=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class r_e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ka(e),YH(this,"VertexArray","v6.0",i_e),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Zi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Zi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Zi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,un.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=wa.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return Jt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=n_e.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Zi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Zi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Zi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Ka.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ka.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Zi){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return un.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function sv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function s_e(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=sv(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function oG(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,u,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Zi){const f=e,{data:g,changed:m}=f.getDebugData();let y;return u=m?"*":"",h=g,c=f.byteLength,a=c/g.BYTES_PER_ELEMENT/o,n?y="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(eh(r,s),")"):(l=!0,y="".concat(c," bytes")),{[i]:"".concat(u).concat(sv(h,{size:o,isInteger:l})),"Format ":y}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(sv(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function a_e(t,e){const{type:n,size:i}=e,r=b8(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function aG(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Jt(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let u=0;for(const g of l)!g.match(".*_.*")&&!g.match(o)&&$O({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)g.match(o)&&$O({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)c[g]||$O({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;let h=0;const f={};if(!r)for(const g in i){const m=i[g];c[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:sv(m)})}return{table:c,count:u,unusedTable:f,unusedCount:h}}function $O(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function c_e(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?sv(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function cG(t){const{type:e,size:n}=t.accessor,i=b8(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const u_e={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function h_e(t,e){const{attributeMap:n=u_e}=e||{};return n&&n[t]||t}function f_e(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Jt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const lG=()=>{},m_e={};class Om{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=ba("model")}=n;Jt(g1(e)),this.id=i,this.gl=e,this.id=n.id||ba("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Z0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Jt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Jt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Jt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function d_e(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=h_e(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Zi(t,c),l],f_e(s,l)}}if(r){const s=r.value||r;Jt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Zi(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(wm(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return MR(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),un.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&un.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:w}=this,{onBeforeRender:O=lG,onAfterRender:V=lG}=this.props;O(),this.program.setUniforms(this.uniforms);const ce=this.program.draw(Object.assign(m_e,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:y,instanceCount:w,offset:h?g:0}));return V(),un.priority>=2&&this._logDrawCallEnd(l,c,i),ce}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return un.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Jt(n instanceof x8,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new r_e(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Zi&&n.delete()}}_setAnimationProps(e){this.animated&&Jt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(wm(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new iG(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),un.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:un.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function o_e(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=oG(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(a_e(o.name,c))),i[a]=oG(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=aG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:u}=aG({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&un.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&un.log("UNUSED UNIFORMS",Object.keys(a))();const h=function l_e(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=cG(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=cG(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);un.table(e,s)(),un.table(e,o)(),un.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),un.groupEnd(2)()}}class YO{static isSupported(e){return li(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Jt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Om(n,Object.assign({},e,{fs:e.fs||nG({version:rG(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function __e(t){return!(wm(t.feedbackBuffers)&&wm(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new jme(e,n)),function y_e(t){return!(wm(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Kme(e,n)),Jt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}const C_e={interpolation:class v_e{constructor({gl:e,attribute:n,timeline:i}){be(this,"gl",void 0),be(this,"type","interpolation"),be(this,"attributeInTransition",void 0),be(this,"settings",void 0),be(this,"attribute",void 0),be(this,"transition",void 0),be(this,"currentStartIndices",void 0),be(this,"currentLength",void 0),be(this,"transform",void 0),be(this,"buffers",void 0),this.gl=e,this.transition=new H0(i),this.attribute=n,this.attributeInTransition=new WO(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function w_e(t,e){const n=Jz(e.size);return new YO(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Zi(e,r),new Zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;Qz(r);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)Zz({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=GO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:Kz(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let s=r/n;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class x_e{constructor({gl:e,attribute:n,timeline:i}){be(this,"gl",void 0),be(this,"type","spring"),be(this,"attributeInTransition",void 0),be(this,"settings",void 0),be(this,"attribute",void 0),be(this,"transition",void 0),be(this,"currentStartIndices",void 0),be(this,"currentLength",void 0),be(this,"texture",void 0),be(this,"framebuffer",void 0),be(this,"transform",void 0),be(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new H0(i),this.attribute=n,this.attributeInTransition=new WO(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function A_e(t){return new co(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function S_e(t,e){return new Ms(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function E_e(t,e,n){const i=Jz(e.size);return new YO(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Zi(e,r),new Zi(e,r),new Zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)Zz({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=GO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:Kz(0,s)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Qz(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),_1(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class T_e{constructor(e,{id:n,timeline:i}){be(this,"id",void 0),be(this,"isSupported",void 0),be(this,"gl",void 0),be(this,"timeline",void 0),be(this,"transitions",void 0),be(this,"needsRedraw",void 0),be(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=YO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(n);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void mi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=C_e[i.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(mi.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const uG="attributeManager.invalidate";class N_e{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){be(this,"id",void 0),be(this,"gl",void 0),be(this,"attributes",void 0),be(this,"updateTriggers",void 0),be(this,"needsRedraw",void 0),be(this,"userData",void 0),be(this,"stats",void 0),be(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new T_e(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);Vo(uG,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Vo(uG,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;Vo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],h=u.settings.accessor;u.startIndices=i,u.numInstances=n,s[l]&&mi.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&Vo("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new WO(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;Vo("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&Vo("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,Vo("attribute.updateEnd",n,i)))}}function hG(t,e,n,i,r){const s=e-t;return(n-e)*r+-s*i+s+e}function fG(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const k_e={interpolation:class P_e extends H0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=XE(n,i,o)}},spring:class F_e extends H0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function L_e(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=hG(t[o],e[o],n[o],i,r);return s}return hG(t,e,n,i,r)}(s,o,n,i,r);const c=fG(a,n),l=fG(a,o);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}};class B_e{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=Xz(r)))return;const o=k_e[r.type];if(!o)return void mi.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:n,toValue:i}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function V_e(t,e){if(!t.transitions)return!1;const n={},i=XO(t);let r=!1;for(const s in t.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&qO(t[s],e[s],o)&&(n[s]=!0,r=!0)}return!!r&&n}function pG({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=qO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=qO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function qO(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function G_e(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function gG(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},pG({oldProps:r,newProps:i,triggerName:n})}function XO(t){const e=t[E1],n=e&&e.constructor;return n?n._propTypes:{}}function K_e(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function KO(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof sh){const[r,s,o=0]=t,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function mG(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=t;switch(n&&([o,a,c]=j0([],[o,a,c,1],n)),i){case xi.LNGLAT:return KO([o,a,c],e,s);case xi.LNGLAT_OFFSETS:return KO([o+r[0],a+r[1],c+(r[2]||0)],e,s);case xi.METER_OFFSETS:return KO(tH(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}const Z_e={10241:9987,10240:9729,10242:33071,10243:33071},JO={},nye={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||av(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>QO(t,e)},accessor:{validate(t,e){const n=j1(t);return"function"===n||n===j1(e.value)},equal:(t,e,n)=>"function"==typeof e||QO(t,e)},array:{validate:(t,e)=>e.optional&&!t||av(t),equal:(t,e,n)=>n.compare?QO(t,e):t===e},object:{equal:(t,e,n)=>n.compare?_m(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>function eye(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof co)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new co(n,{...e,parameters:{...Z_e,...i,...t.props.textureParameters}});return JO[r.id]=!0,r}(n,t),release:t=>{!function tye(t){!t||!(t instanceof co)||JO[t.id]&&(t.delete(),delete JO[t.id])}(t)}}};function QO(t,e){if(t===e)return!0;if(!av(t)||!av(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function rye(t,e){switch(j1(e)){case"object":return ov(t,e);case"array":return ov(t,{type:"array",value:e,compare:!1});case"boolean":return ov(t,{type:"boolean",value:e});case"number":return ov(t,{type:"number",value:e});case"function":return ov(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function ov(t,e){return"type"in e?{name:t,...nye[e.type],...e}:"value"in e?{name:t,type:j1(e.value),...e}:{name:t,type:"object",value:e}}function av(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function j1(t){return av(t)?"array":null===t?"null":typeof t}function _G(t){return U1(t,"_mergedDefaultProps")||(function oye(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),i=_G(n),s=function iye(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=rye(r,s);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(U1(t,"defaultProps")||{}),o=function aye(t,e,n){const i=Object.create(null);Object.assign(i,e,t);const r=function dye(t){const e=U1(t,"layerName")||U1(t,"componentName");return e||mi.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,t),a={...n._propTypes,...s.propTypes};!function lye(t,e){const n={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(n[o]=a,i[o]=uye(o))}t[Tm]=n,t[Hf]={},Object.defineProperties(t,i)}(o,a);const c={...n._deprecatedProps,...s.deprecatedProps};(function cye(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const s of e[n])yG(this,s)||(this[s]=i);mi.deprecated(r,e[n].join("/"))()}})})(o,c),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=c}(t),t._mergedDefaultProps)}function uye(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||qz(e)?this[Hf][t]=e:this[nh][t]=e},get(){if(this[nh]){if(t in this[nh])return this[nh][t]||this[Tm][t];if(t in this[Hf]){const e=this[E1]&&this[E1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Tm][t]}}return this[Tm][t]}}}function yG(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U1(t,e){return yG(t,e)&&t[e]}let hye=0;class ZO{constructor(...e){be(this,"id",void 0),be(this,"props",void 0),be(this,"count",void 0),this.props=function sye(t,e){const n=_G(t.constructor),i=Object.create(n);i[E1]=t,i[Hf]={},i[nh]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=hye++}clone(e){const{props:n}=this,i={};for(const r in n[Tm])r in n[nh]?i[r]=n[nh][r]:r in n[Hf]&&(i[r]=n[Hf][r]);return new this.constructor({...n,...i,...e})}}be(ZO,"componentName","Component"),be(ZO,"defaultProps",{});const fye=Object.freeze({});class pye{constructor(e){be(this,"component",void 0),be(this,"onAsyncPropUpdated",void 0),be(this,"asyncProps",void 0),be(this,"oldProps",void 0),be(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||fye}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[nh]||{},i=e[Hf]||e,r=e[Tm]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(qz(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,n){var i=this;return D(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,c=!1,l=!1;try{for(var f,h=oO(n);c=!(f=yield h.next()).done;c=!1){const g=f.value;{const{dataTransform:m}=i.component.props;o=m?m(g,o):o.concat(g),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(g){l=!0,u=g}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,n){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class gye extends pye{constructor({attributeManager:e,layer:n}){super(n),be(this,"attributeManager",void 0),be(this,"needsRedraw",void 0),be(this,"needsUpdate",void 0),be(this,"subLayers",void 0),be(this,"usesPickingColorCache",void 0),be(this,"changeFlags",void 0),be(this,"viewport",void 0),be(this,"uniformTransitions",void 0),be(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const i=this.component.props.fetch;return i?i(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const i=this.component.props.onDataLoad;"data"===e&&i&&i(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const wye=Object.freeze([]),xye=x1(({oldViewport:t,viewport:e})=>t.equals(e));let Vl=new Uint8ClampedArray(0);const Eye={data:{type:"data",value:wye,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(t);return!c&&!r&&(o.add({resourceId:t,data:tv(t,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:t,onChange:l=>{var u;return null===(u=n.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):tv(t,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:xi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Wf extends ZO{constructor(...e){super(...e),be(this,"internalState",null),be(this,"lifecycle","Awaiting state"),be(this,"context",void 0),be(this,"state",void 0),be(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){ao(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=mG(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=iH(i,n.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return ao(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return ao(this.internalState),function Q_e(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function J_e(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===xi.DEFAULT&&(r=e.isGeospatial?xi.LNGLAT:xi.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=D8(n,i,r),h=mG(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function kae(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===xi.DEFAULT||e===xi.LNGLAT||e===xi.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){ao(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Y_e(t){if(!function X_e(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function q_e(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:i,instancePositions:r}=n.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=K_e(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const c of i)n.invalidateAll(c);else n.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&n){const{pickingColors:c,instancePickingColors:l}=n.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,o;n&&(e.message="".concat(n,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!xye({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Vl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&mi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Vl=F0.allocate(Vl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Vl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Vl[3*o+0]=s[0],Vl[3*o+1]=s[1],Vl[3*o+2]=s[2]}e.value=Vl.subarray(0,3*n)}_setModelAttributes(e,n){const s=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Vl.buffer&&(i.value=Vl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){ao(!this.internalState),ao(Number.isFinite(this.props.coordinateSystem)),Vo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new gye({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(mi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new B_e(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Vo("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Vo("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Vo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];Uu(s.gl,{polygonOffset:c}),Ec(s.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=n[r];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}n[r]||(n[r]=e[r],s=!0),s&&Vo("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function U_e(t,e){const n=pG({newProps:t,oldProps:e,propTypes:XO(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function H_e(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function z_e(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&gG(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&gG(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:G_e(t,e),transitionsChanged:V_e(t,e)}}(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,n[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function j_e(t){const e=XO(t);for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new N_e(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return n=n||r,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}be(Wf,"defaultProps",Eye),be(Wf,"layerName","Layer");class e2 extends Wf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:w,fetch:O,operation:V,_subLayerProps:ce}=this.props,re={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:w,fetch:O,operation:V},Ie=ce&&e.id&&ce[e.id],Ne=Ie&&Ie.updateTriggers,it=e.id||"sublayer";if(Ie){const ut=this.constructor._propTypes,Ye=e.type?e.type._propTypes:{};for(const dt in Ie){const yt=Ye[dt]||ut[dt];yt&&"accessor"===yt.type&&(Ie[dt]=this.getSubLayerAccessor(Ie[dt]))}}Object.assign(re,e,Ie),re.id="".concat(this.props.id,"-").concat(it),re.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Ne};for(const ut of w){const Ye=ut.getSubLayerProps.call(this,ut);Ye&&Object.assign(re,Ye,{updateTriggers:Object.assign(re.updateTriggers,Ye.updateTriggers)})}return re}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=UR(this.renderLayers(),Boolean),this.internalState.subLayers=i),Vo("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}be(e2,"layerName","CompositeLayer");const V1={name:"project32",dependencies:[FR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Sye={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},H1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Cye(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sye;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},bG={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class oh{static get DRAW_MODE(){return bG}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("geometry"),drawMode:i=bG.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Jt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Jt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return Jt(Number.isFinite(i)),i}}const wG=()=>{},xG={10241:9987,10240:9729,10242:33071,10243:33071};function Rye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Oye(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function cv(t){return t&&(t.id||t.url)}function EG(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];t[cv(r)]={...r,x:s,y:n}}}class Fye{constructor(e,{onUpdate:n=wG,onError:i=wG}){be(this,"gl",void 0),be(this,"onUpdate",void 0),be(this,"onError",void 0),be(this,"_loadOptions",null),be(this,"_texture",null),be(this,"_externalTexture",null),be(this,"_mapping",{}),be(this,"_textureParameters",null),be(this,"_pendingCount",0),be(this,"_autoPacking",!1),be(this,"_xOffset",0),be(this,"_yOffset",0),be(this,"_rowHeight",0),be(this,"_buffer",4),be(this,"_canvasWidth",1024),be(this,"_canvasHeight",0),be(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?cv(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Lye(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=L1(t);for(const o of r){s.index++;const a=e(o,s),c=cv(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Pye({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[cv(l)]){const{height:h,width:f}=l;i+f+e>o&&(EG(n,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&EG(n,a,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Rye(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new co(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||xG})),this._texture.height!==this._canvasHeight&&(this._texture=function Nye(t,e,n,i){const r=t.width,s=t.height,o=new co(t.gl,{width:e,height:n,parameters:i});return function _de(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:u,height:h}=n;const{framebuffer:f,deleteFramebuffer:g}=X0(t);Jt(f);const{gl:m,handle:y}=f,w=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const O=m.bindFramebuffer(36160,y);Jt(e);let V=null;if(e instanceof Uf&&(V=e,u=Number.isFinite(u)?u:V.width,h=Number.isFinite(h)?h:V.height,V.bind(0),e=V.target),w)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,c,i,r,u,h);break;case 35866:case 32879:jo(m).copyTexSubImage3D(e,s,a,c,l,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);V&&V.unbind(),m.bindFramebuffer(36160,O||null),g&&f.delete()}(t,o,{targetY:0,width:r,height:s}),t.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||xG)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,tv(i.url,Tz,this._loadOptions).then(r=>{const s=cv(i),{x:o,y:a,width:c,height:l}=this._mapping[s],u=Oye(n,r,c,l);this._texture.setSubImageData({data:u,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const AG=[0,0,0,255],kye={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:AG},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class t2 extends Wf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[V1,H1]})}initializeState(){this.state={iconManager:new Fye(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:AG},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:u}=n,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:u}),f?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:l1[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new Om(e,{...this.getShaders(),id:this.props.id,geometry:new oh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):mi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}be(t2,"defaultProps",kye),be(t2,"layerName","IconLayer");const CG=[];class n2 extends t2{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&mi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!n,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):CG}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):CG}}be(n2,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),be(n2,"layerName","MultiIconLayer");var Uye=S(7772),Vye=S.n(Uye);const Hye=32,zye=[];function Gye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function TG(t,e,n,i){let r=0;for(let o=e;o<n;o++){var s;r+=(null===(s=i[t[o]])||void 0===s?void 0:s.width)||0}return r}function MG(t,e,n,i,r,s){let o=e,a=0;for(let c=e;c<n;c++){const l=TG(t,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function Yye(t,e,n,i,r=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?MG(t,r,s,n,i,o):function $ye(t,e,n,i,r,s){let o=e,a=e,c=e,l=0;for(let u=e;u<n;u++)if((" "===t[u]||" "===t[u+1]||u+1===n)&&(c=u+1),c>a){let h=TG(t,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=MG(t,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(t,r,s,n,i,o),o}function qye(t,e,n,i,r,s){let o=0,a=0;for(let c=e;c<n;c++){const l=t[c],u=i[l];u?(a||(a=u.height),r[c]=o+u.width/2,o+=u.width):(mi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=Hye)}s[0]=o,s[1]=a}function IG(t,e,n,i,r){const s=Array.from(t),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let g=0,m=0,y=0;for(let w=0;w<=o;w++){const O=s[w];if(("\n"===O||w===o)&&(y=w),y>m){const V=u?Yye(s,n,i,r,m,y):zye;for(let ce=0;ce<=V.length;ce++){const re=0===ce?m:V[ce-1],Ie=ce<V.length?V[ce]:y;qye(s,re,Ie,r,a,f);for(let Ne=re;Ne<Ie;Ne++)c[Ne]=g+f[1]/2,l[Ne]=f[0];g+=f[1]*e,h[0]=Math.max(h[0],f[0])}m=y}"\n"===O&&(a[m]=0,c[m]=0,l[m]=0,m++)}return h[1]=g,{x:a,y:c,rowWidth:l,size:h}}class DG{constructor(e=5){be(this,"limit",void 0),be(this,"_cache",{}),be(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const lv={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Kye(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let z1=new DG(3);function Zye(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function PG(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class t0e{constructor(){be(this,"props",{...lv}),be(this,"_key",void 0),be(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const i=function Qye(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=z1.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),r=z1.get(this._key);if(r&&0===i.size)return void(this._key!==n&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,z1.set(this._key,s)}_generateFontAtlas(e,n,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");PG(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:y,yOffset:w}=function Wye({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of t)if(!s[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(n+2*i)+i,width:f,height:n},l+=f+2*i}const u=n+2*i;return{mapping:s,xOffset:l,yOffset:a+c*u,canvasHeight:Gye(a+(c+1)*u)}}({getFontWidth:O=>f.measureText(O).width,fontHeight:1.2*o,buffer:a,characterSet:n,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==m){const O=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(O,0,0)}if(PG(f,r,o,s),c){const O=new(Vye())(o,a,l,u,r,s),V=f.getImageData(0,0,O.size,O.size);for(const ce of n)Zye(O.draw(ce),V),f.putImageData(V,g[ce].x-a,g[ce].y+a)}else for(const O of n)f.fillText(O,g[O].x,g[O].y+.9*o);return{xOffset:y,yOffset:w,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const r0e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class r2 extends Wf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[V1,H1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:l1[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new Om(e,{...this.getShaders(),id:this.props.id,geometry:new oh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}be(r2,"defaultProps",r0e),be(r2,"layerName","TextBackgroundLayer");const LG={start:1,middle:0,end:-1},FG={top:1,center:0,bottom:-1},s2=[0,0,0,255],s0e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:s2},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:lv.characterSet},fontFamily:lv.fontFamily,fontWeight:lv.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:s2},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:s2},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class o2 extends e2{constructor(...e){super(...e),be(this,"state",void 0),be(this,"getBoundingRect",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{size:[f,g]}=IG(h,c,o,a,r);return[(LG["function"==typeof l?l(n,i):l]-1)*f/2,(FG["function"==typeof u?u(n,i):u]-1)*g/2,f,g]}),be(this,"getIconOffsets",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{x:f,y:g,rowWidth:m,size:[y,w]}=IG(h,c,o,a,r),O=LG["function"==typeof l?l(n,i):l],V=FG["function"==typeof u?u(n,i):u],ce=f.length,re=new Array(2*ce);let Ie=0;for(let Ne=0;Ne<ce;Ne++)re[Ie++]=(O-1)*y/2+(1-O)*(y-m[Ne])/2+f[Ne],re[Ie++]=(V-1)*w/2+g[Ne];return re})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new t0e}}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=n.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:u}=function Xye({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,c=i?i/o:0,l=r[e]||Math.ceil((t.length-c)/a),u=s&&new Set,h=new Array(e);let f=t;if(a>1||c>0){f=new(0,t.constructor)(l);for(let m=0;m<l;m++)f[m]=t[m*a+c]}for(let g=0;g<e;g++){const w=f.subarray(r[g],r[g+1]||l);h[g]=String.fromCodePoint.apply(null,w),u&&w.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:o,characterSet:c});a=u,s=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:u}=L1(n);o=[0],a=0;for(const h of l){u.index++;const f=Array.from(s(h,u)||"");c&&f.forEach(c.add,c),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,getBackgroundColor:y,getBorderColor:w,getBorderWidth:O,backgroundPadding:V,background:ce,billboard:re,fontSettings:Ie,outlineWidth:Ne,outlineColor:it,sizeScale:ut,sizeUnits:Ye,sizeMinPixels:dt,sizeMaxPixels:yt,transitions:Ct,updateTriggers:ft}=this.props,gt=this.getSubLayerClass("characters",n2),Lt=this.getSubLayerClass("background",r2);return[ce&&new Lt({getFillColor:y,getLineColor:w,getLineWidth:O,padding:V,getPosition:u,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:ut/this.state.fontAtlasManager.props.fontSize,sizeUnits:Ye,sizeMinPixels:dt,sizeMaxPixels:yt,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ft.getPosition,getAngle:ft.getAngle,getSize:ft.getSize,getFillColor:ft.getBackgroundColor,getLineColor:ft.getBorderColor,getLineWidth:ft.getBorderWidth,getPixelOffset:ft.getPixelOffset,getBoundingRect:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new gt({sdf:Ie.sdf,smoothing:Number.isFinite(Ie.smoothing)?Ie.smoothing:lv.smoothing,outlineWidth:Ne,outlineColor:it,iconAtlas:s,iconMapping:o,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,billboard:re,sizeScale:ut*r,sizeUnits:Ye,sizeMinPixels:dt*r,sizeMaxPixels:yt*r,transitions:Ct&&{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ft.getText,getPosition:ft.getPosition,getAngle:ft.getAngle,getColor:ft.getColor,getSize:ft.getSize,getPixelOffset:ft.getPixelOffset,getIconOffsets:{getText:ft.getText,getTextAnchor:ft.getTextAnchor,getAlignmentBaseline:ft.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function e0e(t){mi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),z1=new DG(t)}(e)}}be(o2,"defaultProps",s0e),be(o2,"layerName","TextLayer");const kG="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",o0e={lightSources:{}};function a2(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const c2={name:"lights",vs:kG,fs:kG,getUniforms:function BG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o0e;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function a0e(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?a2(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=a2(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=a2(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return BG({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},c0e={};const u0e={name:"phong-lighting",dependencies:[c2],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function UG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c0e;if(!("material"in t))return{};const{material:e}=t;return e?function l0e(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},l2=Math.PI/180,G1=new Float32Array(16),VG=new Float32Array(12);function HG(t,e,n){const i=e[0]*l2,r=e[1]*l2,s=e[2]*l2,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=n[0],g=n[1],m=n[2];t[0]=f*h*u,t[1]=f*c*u,t[2]=f*-a,t[3]=g*(-c*l+h*a*o),t[4]=g*(h*l+c*a*o),t[5]=g*u*o,t[6]=m*(c*o+h*a*l),t[7]=m*(-h*o+c*a*l),t[8]=m*u*l}function zG(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const GG={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=l||!c&&!!a(i[0]);t.constant=g?l:h&&u&&f;const m=t.value;if(t.constant){let y;g?(G1.set(a),y=zG(G1)):(y=VG,HG(y,r,s),y.set(o,9)),t.value=new Float32Array(y)}else{let y=e*t.size;const{iterable:w,objectInfo:O}=L1(i,e,n);for(const V of w){let ce;O.index++,g?(G1.set(l?a:a(V,O)),ce=zG(G1)):(ce=VG,HG(ce,h?r:r(V,O),u?s:s(V,O)),ce.set(f?o:o(V,O),9)),m[y++]=ce[0],m[y++]=ce[1],m[y++]=ce[2],m[y++]=ce[3],m[y++]=ce[4],m[y++]=ce[5],m[y++]=ce[6],m[y++]=ce[7],m[y++]=ce[8],m[y++]=ce[9],m[y++]=ce[10],m[y++]=ce[11]}}}};function WG(t,e){return e===xi.CARTESIAN||e===xi.METER_OFFSETS||e===xi.DEFAULT&&!t.isGeospatial}function $G(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),mi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function f0e(t,e){if(t.attributes)return $G(t.attributes,e),t instanceof oh?t:new oh(t);if(t.positions||t.POSITION)return $G(t,e),new oh({attributes:t});throw Error("Invalid mesh")}class u2 extends Wf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){const e=!li(this.context.gl),n={};return RR(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[V1,u0e,H1],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:GG}),this.setState({emptyTexture:new co(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||WG(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new Om(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:f0e(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}be(u2,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),be(u2,"layerName","SimpleMeshLayer");const YG={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[c2]};class Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||ba(this.constructor.name),this.display=!0,this.position=new Bo,this.rotation=new Bo,this.scale=new Bo(1,1,1),this.matrix=new Vn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Jt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Jt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Jt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:s=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Jt(e),n=n||this.matrix;const i=new Vn(e).multiplyRight(n),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class uv extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;un.assert(n.every(i=>i instanceof Nm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const s=n.getBounds();if(!s)return;const[o,a]=s,c=new Bo(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new Bo(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let u=0;u<8;u++){const h=new Bo(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Vn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Vn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof uv?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let W1;class d2 extends j4{static get ZERO(){return W1||(W1=new d2(0,0,0,0),Object.freeze(W1)),W1}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),ku(e)&&1===arguments.length?this.copy(e):(ds.debug&&(ci(e),ci(n),ci(i),ci(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return ds.debug&&(ci(e.x),ci(e.y),ci(e.z),ci(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=ci(e)}get w(){return this[3]}set w(e){this[3]=ci(e)}transform(e){return HD(this,this,e),this.check()}transformByMatrix3(e){return function Kae(t,e,n){const i=e[0],r=e[1],s=e[2];t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Xae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return z4(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function qG(){var t=new va(4);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function XG(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function KG(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=i*u+o*a+r*l-s*c,t[1]=r*u+o*c+s*a-i*l,t[2]=s*u+o*l+i*c-r*a,t[3]=o*u-i*a-r*c-s*l,t}var QG=K4,I0e=function(){var t=U4(),e=V4(1,0,0),n=V4(0,1,0);return function(i,r,s){var o=H4(r,s);return o<-.999999?(QE(t,e,r),function Fae(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&QE(t,n,r),function jae(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),XG(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(QE(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function Cce(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();qG(),qG(),function g0e(){var t=new va(9);va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const D0e=[0,0,0,1];class h2 extends KE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function JG(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return XG(this,e,n),this.check()}identity(){return function m0e(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=ci(e)}get y(){return this[1]}set y(e){this[1]=ci(e)}get z(){return this[2]}set z(e){this[2]=ci(e)}get w(){return this[3]}set w(e){this[3]=ci(e)}len(){return function Ace(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function Sce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function Tce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return I0e(this,e,n),this.check()}add(e){return function Ece(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function b0e(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function A0e(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function E0e(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function Mce(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return KG(this,this,e),this.check()}multiplyLeft(e){return KG(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function _0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function y0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function v0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return QG(this,this,e),this.check()}slerp(e,n,i){let r,s,o;switch(arguments.length){case 1:({start:r=D0e,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=n;break;default:r=e,s=n,o=i}return function $1(t,e,n,i){var f,g,m,y,w,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],u=n[2],h=n[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>Ol?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(y=1-i,w=i),t[0]=y*r+w*c,t[1]=y*s+w*l,t[2]=y*o+w*u,t[3]=y*a+w*h,t}(this,r,s,o),this.check()}transformVector4(e,n=new d2){return function Ice(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;t[0]=u*l+g*-o+h*-c-f*-a,t[1]=h*l+g*-a+f*-o-u*-c,t[2]=f*l+g*-c+u*-a-h*-o,t[3]=e[3]}(n,e,this),JE(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const R0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function t6(t){if(!t._animation){const e=O0e[t.componentType],n=R0e[t.type],i=n*t.count,{buffer:r,byteOffset:s}=t.bufferView.data,o=new e(r,s+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=n)a.push(Array.from(o.slice(c,c+n)));t._animation=a}}return t._animation}const N0e=new Vn,f2=new h2;class j0e{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function B0e(t,e,n,i){let{input:r,interpolation:s,output:o}=e;const c=t%r[r.length-1],l=r.findIndex(g=>g>=c),u=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:un.warn("Bad animation path ".concat(i))()}Jt(n[i].length===o[u].length);const h=r[u],f=r[l];switch(s){case"STEP":!function k0e(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,o[u]);break;case"LINEAR":f>h&&function L0e(t,e,n,i,r){if("rotation"===e){f2.slerp({start:n,target:i,ratio:r});for(let s=0;s<f2.length;s++)t[e][s]=f2[s]}else for(let s=0;s<n.length;s++)t[e][s]=r*i[s]+(1-r)*n[s]}(n,i,o[u],o[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function F0e(t,e,n){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const u=r[l]*a,h=s[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:un.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function P0e(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=N0e.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(o,o._node)})}}class U0e{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),s=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:t6(e.accessors[c]),interpolation:l,output:t6(e.accessors[u])}}),o=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new j0e({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class V0e extends Nm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof Om?(this.model=e,this._setModelNodeProps(n)):this.model=new Om(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class H0e{constructor(e,n){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},RR(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new co(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(un.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function n6(t,e){return li(t)?"#version 300 es\n".concat(e):e}const $0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Y0e={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class q0e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},Y0e,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new U0e(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new uv({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new uv({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Vn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new uv({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){un.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function W0e(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new H0e(t,e);un.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new V0e(t,{id:n,drawMode:i,vertexCount:r,modules:[YG],parameters:a.parameters,vs:n6(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:n6(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...o,defines:{...a.defines,...o.defines}});return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),un.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Zi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new wa({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:$0e[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var dv=S(2435);const Q0e="3.2.13",p2={};function $f(t){return g2.apply(this,arguments)}function g2(){return g2=D(function*(t,e=null,n={}){return e&&(t=function Z0e(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:rh?n.CDN?(Fl(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Q0e,"/dist/libs/").concat(t)):ZR?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),p2[t]=p2[t]||function eve(t){return m2.apply(this,arguments)}(t),yield p2[t]}),g2.apply(this,arguments)}function m2(){return m2=D(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!rh)try{return dv&&dv.requireFromFile&&(yield dv.requireFromFile(t))}catch{return null}return ZR?importScripts(t):function tve(t,e){if(!rh)return dv.requireFromString&&dv.requireFromString(t,e);if(ZR)return eval.call(Ofe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),m2.apply(this,arguments)}const nve="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),ive="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let _2,b2;function r6(t){return y2.apply(this,arguments)}function y2(){return y2=D(function*(t){const e=t.modules||{};return e.basis?e.basis:(_2=_2||function rve(t){return v2.apply(this,arguments)}(t),yield _2)}),y2.apply(this,arguments)}function v2(){return v2=D(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield $f("basis_transcoder.js","textures",t),yield $f("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function sve(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,n)}),v2.apply(this,arguments)}function s6(t){return w2.apply(this,arguments)}function w2(){return w2=D(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(b2=b2||function ove(t){return x2.apply(this,arguments)}(t),yield b2)}),w2.apply(this,arguments)}function x2(){return x2=D(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield $f(ive,"textures",t),yield $f(nve,"textures",t)]),e=e||globalThis.BASIS,yield function ave(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,n)}),x2.apply(this,arguments)}const cve=["","WEBKIT_","MOZ_"],o6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let Y1=null;var E2,q1,A2,X1,c6,S2,l6,u6;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(E2||(E2={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(q1||(q1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(A2||(A2={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(X1||(X1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(c6||(c6={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(S2||(S2={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(l6||(l6={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(u6||(u6={}));const Ja=[171,75,84,88,32,50,48,187,13,10,26,10],pve={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function T2(){return T2=D(function*(t,e){if("auto"===e.basis.containerFormat){if(function fve(t){const e=new Uint8Array(t);return!(e.byteLength<Ja.length||e[0]!==Ja[0]||e[1]!==Ja[1]||e[2]!==Ja[2]||e[3]!==Ja[3]||e[4]!==Ja[4]||e[5]!==Ja[5]||e[6]!==Ja[6]||e[7]!==Ja[7]||e[8]!==Ja[8]||e[9]!==Ja[9]||e[10]!==Ja[10]||e[11]!==Ja[11])}(t))return f6((yield s6(e)).KTX2File,t,e);const{BasisFile:n}=yield r6(e);return M2(n,t,e)}if("encoder"===e.basis.module){const n=yield s6(e);return"ktx2"===e.basis.containerFormat?f6(n.KTX2File,t,e):M2(n.BasisFile,t,e)}{const{BasisFile:i}=yield r6(e);return M2(i,t,e)}}),T2.apply(this,arguments)}function M2(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(mve(i,o,l,n));s.push(c)}return s}finally{i.close(),i.delete()}}function mve(t,e,n,i){const r=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=p6(i,o),u=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(u);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function f6(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(_ve(i,o,n));break}return[s]}finally{i.close(),i.delete()}}function _ve(t,e,n){const{alphaFlag:i,height:r,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=p6(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!t.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function p6(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=g6()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),pve[n]}function g6(){const t=function lve(t){if(!Y1){t=t||function uve(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,Y1=new Set;for(const e of cve)for(const n in o6)t&&t.getExtension("".concat(e).concat(n))&&Y1.add(o6[n])}return Y1}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const yve={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function gve(t,e){return T2.apply(this,arguments)}};function Yf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const J1=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),m6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:bve}=(m6&&parseFloat(m6[1]),globalThis),I2=typeof Image<"u",D2=typeof ImageBitmap<"u",R2=!!J1||!!bve;function _6(t){const e=function v6(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Eve=/^data:image\/svg\+xml/,Ave=/\.svg((\?|#).*)?$/;function O2(t){return t&&(Eve.test(t)||Ave.test(t))}function b6(t,e){if(O2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function w6(t,e,n){return N2.apply(this,arguments)}function N2(){return N2=D(function*(t,e,n){const i=function Sve(t,e){if(O2(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return b6(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function Cve(t,e){return P2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),N2.apply(this,arguments)}function P2(){return P2=D(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),P2.apply(this,arguments)}const Tve={};let x6=!0;function L2(){return L2=D(function*(t,e,n){let i;i=O2(n)?yield w6(t,e,n):b6(t,n);const r=e&&e.imagebitmap;return yield function Ive(t){return F2.apply(this,arguments)}(i,r)}),L2.apply(this,arguments)}function F2(){return F2=D(function*(t,e=null){if((function Dve(t){for(const e in t||Tve)return!1;return!0}(e)||!x6)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),x6=!1}return yield createImageBitmap(t)}),F2.apply(this,arguments)}const zl=!1,fv=!0;function k2(t){const e=pv(t);return function Rve(t){const e=pv(t);return e.byteLength>=24&&2303741511===e.getUint32(0,zl)?{mimeType:"image/png",width:e.getUint32(16,zl),height:e.getUint32(20,zl)}:null}(e)||function Pve(t){const e=pv(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,zl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Lve(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,zl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,zl),width:e.getUint16(s+7,zl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,zl)}return null}(e)||function Ove(t){const e=pv(t);return e.byteLength>=10&&1195984440===e.getUint32(0,zl)?{mimeType:"image/gif",width:e.getUint16(6,fv),height:e.getUint16(8,fv)}:null}(e)||function Nve(t){const e=pv(t);return e.byteLength>=14&&16973===e.getUint16(0,zl)&&e.getUint32(2,fv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,fv),height:e.getUint32(22,fv)}:null}(e)}function pv(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function B2(){return B2=D(function*(t,e){const{mimeType:n}=k2(t)||{},i=globalThis._parseImageNode;return Yf(i),yield i(t,n)}),B2.apply(this,arguments)}function j2(){return j2=D(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Bve(t){switch(t){case"auto":case"data":return function xve(){if(D2)return"imagebitmap";if(I2)return"image";if(R2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function wve(t){switch(t){case"auto":return D2||I2||R2;case"imagebitmap":return D2;case"image":return I2;case"data":return R2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function Mve(t,e,n){return L2.apply(this,arguments)}(t,e,s);break;case"image":a=yield w6(t,e,s);break;case"data":a=yield function Fve(t,e){return B2.apply(this,arguments)}(t,e);break;default:Yf(!1)}return"data"===r&&(a=function y6(t){switch(_6(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),j2.apply(this,arguments)}const jve={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function kve(t,e,n){return j2.apply(this,arguments)},tests:[t=>!!k2(new DataView(t))],options:{image:{type:"auto",decode:!0}}};function E6(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function A6(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function Qa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function S6(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function gv(t,e){return Yf(t>=0),Yf(e>0),t+(e-1)&~(e-1)}function Hve(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+gv(i.byteLength,4)}const T6=["SCALAR","VEC2","VEC3","VEC4"],zve=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Gve=new Map(zve),Wve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$ve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Yve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function M6(t){return T6[t-1]||T6[0]}function I6(t){const e=Gve.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function D6(t,e){const n=Yve[t.componentType],i=Wve[t.type],s=t.count*i,o=t.count*i*$ve[t.componentType];return Qa(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const qve={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Ac{constructor(e){be(this,"gltf",void 0),be(this,"sourceBuffers",void 0),be(this,"byteLength",void 0),this.gltf=e||{json:{...qve},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Qa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=D6(e,n);return new s(r,n.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e,n={}){return Qa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return Qa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=k2(e),r=n||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Qa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=gv(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:M6(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:I6(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Hve(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const n={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const s of r)i.min.push(s),i.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Kve="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Jve="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Qve=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Zve=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),R6={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ebe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function z2(){return z2=D(function*(t,e,n,i,r,s="NONE"){const o=yield function Q1(){return W2.apply(this,arguments)}();!function Z1(t,e,n,i,r,s,o){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),u=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,u);const f=e(l,i,r,u,s.length);if(0===f&&o&&o(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[ebe[r]],t,e,n,i,o.exports[R6[s||"NONE"]])}),z2.apply(this,arguments)}let G2;function W2(){return W2=D(function*(){return G2||(G2=function nbe(){return $2.apply(this,arguments)}()),G2}),W2.apply(this,arguments)}function $2(){return $2=D(function*(){let t=Kve;WebAssembly.validate(Qve)&&(t=Jve,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function ibe(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Zve[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),$2.apply(this,arguments)}const Y2="EXT_meshopt_compression",rbe=Y2;function sbe(t,e){return q2.apply(this,arguments)}function q2(){return q2=D(function*(t,e){var n;const i=new Ac(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const s of t.json.bufferViews||[])r.push(obe(i,s));yield Promise.all(r),i.removeExtension(Y2)}),q2.apply(this,arguments)}function obe(t,e){return X2.apply(this,arguments)}function X2(){return X2=D(function*(t,e){const n=t.getObjectExtension(e,Y2);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=n,u=t.gltf.buffers[l],h=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function tbe(t,e,n,i,r){return z2.apply(this,arguments)}(f,o,s,h,a,c),f}return null}),X2.apply(this,arguments)}const abe=["image/png","image/jpeg","image/gif"],K2={};const Lm="EXT_texture_webp",dbe=Lm;function hbe(t,e){const n=new Ac(t);if(!function cbe(t){return void 0===K2[t]&&(K2[t]=function lbe(t){switch(t){case"image/webp":return function ube(){if(!J1)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return J1;default:if(!J1){const{_parseImageNode:e}=globalThis;return!!e&&abe.includes(t)}return!0}}(t)),K2[t]}("image/webp")){if(n.getRequiredExtensions().includes(Lm))throw new Error("gltf: Required extension ".concat(Lm," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,Lm);s&&(r.source=s.source),n.removeObjectExtension(r,Lm)}n.removeExtension(Lm)}const eA="KHR_texture_basisu",fbe=eA;function pbe(t,e){const n=new Ac(t),{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,eA);s&&(r.source=s.source),n.removeObjectExtension(r,eA)}n.removeExtension(eA)}const N6={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class tA{constructor(e,n,i=!1,r=new Map){be(this,"name",void 0),be(this,"type",void 0),be(this,"nullable",void 0),be(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new tA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Ti,P6,L6,F6,k6,B6,j6,U6,V6;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(Ti||(Ti={}));class Sc{static isNull(e){return e&&e.typeId===Ti.Null}static isInt(e){return e&&e.typeId===Ti.Int}static isFloat(e){return e&&e.typeId===Ti.Float}static isBinary(e){return e&&e.typeId===Ti.Binary}static isUtf8(e){return e&&e.typeId===Ti.Utf8}static isBool(e){return e&&e.typeId===Ti.Bool}static isDecimal(e){return e&&e.typeId===Ti.Decimal}static isDate(e){return e&&e.typeId===Ti.Date}static isTime(e){return e&&e.typeId===Ti.Time}static isTimestamp(e){return e&&e.typeId===Ti.Timestamp}static isInterval(e){return e&&e.typeId===Ti.Interval}static isList(e){return e&&e.typeId===Ti.List}static isStruct(e){return e&&e.typeId===Ti.Struct}static isUnion(e){return e&&e.typeId===Ti.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ti.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ti.FixedSizeList}static isMap(e){return e&&e.typeId===Ti.Map}static isDictionary(e){return e&&e.typeId===Ti.Dictionary}get typeId(){return Ti.NONE}compareTo(e){return this===e}}Symbol,Symbol,P6=Symbol.toStringTag;class ah extends Sc{constructor(e,n){super(),be(this,"isSigned",void 0),be(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Ti.Int}get[P6](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class mbe extends ah{constructor(){super(!0,8)}}class _be extends ah{constructor(){super(!0,16)}}class ybe extends ah{constructor(){super(!0,32)}}class vbe extends ah{constructor(){super(!1,8)}}class bbe extends ah{constructor(){super(!1,16)}}class wbe extends ah{constructor(){super(!1,32)}}L6=Symbol.toStringTag;class Q2 extends Sc{constructor(e){super(),be(this,"precision",void 0),this.precision=e}get typeId(){return Ti.Float}get[L6](){return"Float"}toString(){return"Float".concat(this.precision)}}class xbe extends Q2{constructor(){super(32)}}class Ebe extends Q2{constructor(){super(64)}}Symbol,Symbol,F6=Symbol.toStringTag,k6=Symbol.toStringTag,B6=Symbol.toStringTag,j6=Symbol.toStringTag,U6=Symbol.toStringTag;class Abe extends Sc{constructor(e,n){super(),be(this,"listSize",void 0),be(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Ti.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[U6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}V6=Symbol.toStringTag;class Fm{constructor(e,n){be(this,"fields",void 0),be(this,"metadata",void 0),function Mbe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function Ibe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const r of e)n[r]=!0;const i=this.fields.filter(r=>n[r.name]);return new Fm(i,this.metadata)}selectAt(...e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new Fm(n,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof Fm){const o=e;n=o.fields,i=$6($6(new Map,this.metadata),o.metadata)}else n=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of n)r[o.name]=o;const s=Object.values(r);return new Fm(s,i)}}function $6(t,e){return new Map([...t||new Map,...e||new Map])}function Y6(t,e,n){return function W6(t,e,n){const i=function Sbe(t){switch(t.constructor){case Int8Array:return new mbe;case Uint8Array:return new vbe;case Int16Array:return new _be;case Uint16Array:return new bbe;case Int32Array:return new ybe;case Uint32Array:return new wbe;case Float32Array:return new xbe;case Float64Array:return new Ebe;default:throw new Error("array type not supported")}}(e.value),r=n||function Tbe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new tA(t,new Abe(e.size,new tA("value",i)),!1,r)}(t,e,n?q6(n.metadata):void 0)}function q6(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const X6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Obe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Pbe{constructor(e){be(this,"draco",void 0),be(this,"decoder",void 0),be(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,n),c=this._getMeshData(s,a,n),l=function gbe(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],h=a[l+1],f=a[l+2];e=u<e?u:e,n=h<n?h:n,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,n,i],[r,s,o]]}(c.attributes),u=function Dbe(t,e,n){const i=q6(e.metadata),r=[],s=function Rbe(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in t){const c=Y6(o,t[o],s[o]);r.push(c)}if(n){const o=Y6("indices",n);r.push(o)}return new Fm(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,n);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(n,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function kbe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=Obe[n.data_type],r=n.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function Lbe(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,u),l=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in X6)if(this.draco[o]===r)return X6[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function Fbe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const iA="1.4.1",Bbe="https://www.gstatic.com/draco/versioned/decoders/".concat(iA,"/draco_decoder.js"),jbe="https://www.gstatic.com/draco/versioned/decoders/".concat(iA,"/draco_wasm_wrapper.js"),Ube="https://www.gstatic.com/draco/versioned/decoders/".concat(iA,"/draco_decoder.wasm");let mv;function tN(){return tN=D(function*(t){const e=t.modules||{};return mv=e.draco3d?mv||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):mv||function zbe(t){return iN.apply(this,arguments)}(t),yield mv}),tN.apply(this,arguments)}function iN(){return iN=D(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield $f(Bbe,"draco",t):[e,n]=yield Promise.all([yield $f(jbe,"draco",t),yield $f(Ube,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function Gbe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),iN.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(iA,"/javascript/draco_encoder.js");const sN={...N6,parse:function $be(t,e){return oN.apply(this,arguments)}};function oN(){return oN=D(function*(t,e){const{draco:n}=yield function Hbe(t){return tN.apply(this,arguments)}(e),i=new Pbe(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),oN.apply(this,arguments)}function K6(t){const{buffer:e,size:n,count:i}=function qbe(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Xbe(t,e,n=!1){return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:M6(n),componentType:I6(e)}}const qf="KHR_draco_mesh_compression",Kbe=qf;function Jbe(t,e,n){const i=new Ac(t);for(const r of J6(i))i.getObjectExtension(r,qf)}function Qbe(t,e,n){return aN.apply(this,arguments)}function aN(){return aN=D(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Ac(t),s=[];for(const o of J6(r))r.getObjectExtension(o,qf)&&s.push(ewe(r,o,e,n));yield Promise.all(s),r.removeExtension(qf)}),aN.apply(this,arguments)}function Zbe(t,e={}){const n=new Ac(t);for(const i of n.json.meshes||[])twe(i),n.addRequiredExtension(qf)}function ewe(t,e,n,i){return cN.apply(this,arguments)}function cN(){return cN=D(function*(t,e,n,i){const r=t.getObjectExtension(e,qf);if(!r)return;const s=t.getTypedArrayForBufferView(r.bufferView),o=A6(s.buffer,s.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(o,sN,c,i),u=function Ybe(t){const e={};for(const n in t)if("indices"!==n){const r=K6(t[n]);e[n]=r}return e}(l.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=t.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,l.indices&&(e.indices=K6(l.indices)),function nwe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),cN.apply(this,arguments)}function twe(t,e,n=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:t}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[qf]:{bufferView:l,attributes:c}}}]}}function*J6(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const Xf="KHR_lights_punctual",iwe=Xf;function rwe(t){return lN.apply(this,arguments)}function lN(){return lN=D(function*(t){const e=new Ac(t),{json:n}=e,i=e.getExtension(Xf);i&&(e.json.lights=i.lights,e.removeExtension(Xf));for(const r of n.nodes||[]){const s=e.getObjectExtension(r,Xf);s&&(r.light=s.light),e.removeObjectExtension(r,Xf)}}),lN.apply(this,arguments)}function swe(t){return uN.apply(this,arguments)}function uN(){return uN=D(function*(t){const e=new Ac(t),{json:n}=e;if(n.lights){const i=e.addExtension(Xf);Qa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Xf,i);delete e.json.lights}}),uN.apply(this,arguments)}const yv="KHR_materials_unlit",owe=yv;function awe(t){return dN.apply(this,arguments)}function dN(){return dN=D(function*(t){const e=new Ac(t),{json:n}=e;e.removeExtension(yv);for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,yv)}),dN.apply(this,arguments)}function cwe(t){const e=new Ac(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,yv,{}),e.addExtension(yv))}const vv="KHR_techniques_webgl",lwe=vv;function uwe(t){return hN.apply(this,arguments)}function hN(){return hN=D(function*(t){const e=new Ac(t),{json:n}=e,i=e.getExtension(vv);if(i){const r=function hwe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),n.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=n[o.program]}),r}(i,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,vv);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=fwe(s.technique,e)),e.removeObjectExtension(s,vv)}e.removeExtension(vv)}}),hN.apply(this,arguments)}function dwe(t,e){return fN.apply(this,arguments)}function fN(){return(fN=D(function*(t,e){})).apply(this,arguments)}function fwe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const Q6=[Z,C,q,G,X,_,E];function pN(){return pN=D(function*(t,e={},n){const i=Q6.filter(s=>Z6(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,t,e,n)}}),pN.apply(this,arguments)}function Z6(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const gN="KHR_binary_glTF",e5={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},_we={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class ywe{constructor(){be(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),be(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function mwe(t){const e=new Ac(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,gN);r&&Object.assign(i,r),e.removeObjectExtension(i,gN)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(gN)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in e5)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in e5)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:s}=n;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,n){const i=_we[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const s of e.materials){var n,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(n=s.values)||void 0===n?void 0:n.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const bwe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wwe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},xwe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},Ewe={10240:9729,10241:9986,10242:10497,10243:10497};class Cwe{constructor(){be(this,"baseUri",""),be(this,"json",{}),be(this,"buffers",[]),be(this,"images",[])}postProcess(e,n={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Qa(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Awe(t){return wwe[t]}(e.componentType),e.components=function Swe(t){return bwe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=D6(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=n+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):Ewe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return xwe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const t5=1735152710,mN=12,rA=8,Mwe=1313821514,Iwe=5130562,Dwe=0,Rwe=1,Owe=0,km=!0;function _N(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),gv(i,4)}function yN(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),gv(i,4)}function vN(){return vN=D(function*(t,e,n=0,i,r){var s,o,a,c;(function Uwe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function Pwe(t,e=0,n={}){const i=new DataView(t),{magic:r=t5}=n,s=i.getUint32(e,!1);return s===r||s===t5}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function Vve(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Uve(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?E6(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?E6(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};n=function Lwe(t,e,n=0,i={}){const r=new DataView(e),s=function Nwe(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),o=r.getUint32(n+4,km),a=r.getUint32(n+8,km);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=mN,t.version){case 1:return function Fwe(t,e,n){Yf(t.header.byteLength>mN+rA);const i=e.getUint32(n+0,km),r=e.getUint32(n+4,km);return n+=rA,Yf(r===Owe),_N(t,e,n,i),(n+=i)+yN(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function kwe(t,e,n,i){return Yf(t.header.byteLength>mN+rA),function Bwe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,km),s=e.getUint32(n+4,km);switch(n+=rA,s){case Mwe:_N(t,e,n,r);break;case Iwe:yN(t,e,n,r);break;case Dwe:i.strict||_N(t,e,n,r);break;case Rwe:i.strict||yN(t,e,n,r)}n+=gv(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(o,e,n,i.glb),Qa("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else Qa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,n,i),function vwe(t,e={}){(new ywe).normalize(t,e)}(t,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function pwe(t,e={},n){const i=Q6.filter(s=>Z6(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,t,e,n)}}(t,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&t.json.buffers&&(yield function Vwe(t,e,n){return bN.apply(this,arguments)}(t,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function Hwe(t,e,n){return wN.apply(this,arguments)}(t,i,r);l.push(h)}const u=function gwe(t){return pN.apply(this,arguments)}(t,i,r);return l.push(u),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function Twe(t,e){return(new Cwe).postProcess(t,e)}(t,i):t}),vN.apply(this,arguments)}function bN(){return bN=D(function*(t,e,n){const i=t.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=n;Qa(c);const l=S6(a.uri,e),u=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);t.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),bN.apply(this,arguments)}function wN(){return wN=D(function*(t,e,n){const i=function zwe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],s=[];for(const o of i)s.push(Gwe(t,r[o],o,e,n));return yield Promise.all(s)}),wN.apply(this,arguments)}function Gwe(t,e,n,i,r){return xN.apply(this,arguments)}function xN(){return xN=D(function*(t,e,n,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=S6(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function C6(t,e,n){const i=t.bufferViews[n];Qa(i);const s=e[i.buffer];return Qa(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=A6(l.buffer,l.byteOffset,l.byteLength)}Qa(a,"glTF image has no data");let c=yield o(a,[jve,yve],{mimeType:e.mimeType,basis:i.basis||{format:g6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),xN.apply(this,arguments)}const Bm={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function Wwe(t){return EN.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function EN(){return EN=D(function*(t,e={},n){(e={...Bm.options,...e}).gltf={...Bm.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function jwe(t,e){return vN.apply(this,arguments)}({},t,i,e,n)}),EN.apply(this,arguments)}function AN(){return AN=D(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Ywe(t){return SN.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),AN.apply(this,arguments)}function SN(){return SN=D(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),SN.apply(this,arguments)}const n5=[255,255,255,255],Kwe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:n5},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Bm]};class CN extends Wf{constructor(...e){super(...e),be(this,"state",void 0)}getShaders(){const e=[V1,H1];return"pbr"===this.props._lighting&&e.push(YG),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:n5,transition:!0},instanceModelMatrix:GG})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof Nm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function X0e(t,e,n){const i=new q0e(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function $we(t){return AN.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(mi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof Nm?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&mi.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):mi.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):mi.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Nm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!li(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(u),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:WG(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}be(CN,"defaultProps",Kwe),be(CN,"layerName","ScenegraphLayer");class Jwe extends oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("sphere-geometry")}=e,{indices:i,attributes:r}=function Qwe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const o=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(n+1);if("number"==typeof i){const O=i;i=(V,ce,re,Ie,Ne)=>O}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),y=new(u>65535?Uint32Array:Uint16Array)(e*n*6);for(let O=0;O<=e;O++)for(let V=0;V<=n;V++){const ce=V/n,re=O/e,Ie=V+O*(n+1),Ne=2*Ie,it=3*Ie,ut=l*ce,Ye=o*re,dt=Math.sin(ut),yt=Math.cos(ut),Ct=Math.sin(Ye),gt=yt*Ct,Lt=Math.cos(Ye),Ft=dt*Ct,pn=i(gt,Lt,Ft,ce,re);h[it+0]=pn*gt,h[it+1]=pn*Lt,h[it+2]=pn*Ft,f[it+0]=gt,f[it+1]=Lt,f[it+2]=Ft,g[Ne+0]=ce,g[Ne+1]=1-re}const w=n+1;for(let O=0;O<n;O++)for(let V=0;V<e;V++){const ce=6*(O*e+V);y[ce+0]=V*w+O,y[ce+1]=V*w+O+1,y[ce+2]=(V+1)*w+O,y[ce+3]=(V+1)*w+O,y[ce+4]=V*w+O+1,y[ce+5]=(V+1)*w+O+1}return{indices:{size:1,value:y},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Zwe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class r5 extends oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("truncated-code-geometry")}=e,{indices:i,attributes:r}=function exe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),u=(r+1)*(s+1+l),h=Math.atan2(e-n,i),f=Math.sin,g=Math.cos,m=Math.PI,y=g(h),w=f(h),O=a?-2:0,V=s+(c?2:0),ce=r+1,re=new Uint16Array(r*(s+l)*6),Ie=Zwe[o],Ne=new Float32Array(3*u),it=new Float32Array(3*u),ut=new Float32Array(2*u);let Ye=0,dt=0;for(let yt=O;yt<=V;yt++){let gt,Ct=yt/s,ft=i*Ct;yt<0?(ft=0,Ct=1,gt=e):yt>s?(ft=i,Ct=1,gt=n):gt=e+yt/s*(n-e),(-2===yt||yt===s+2)&&(gt=0,Ct=0),ft-=i/2;for(let Lt=0;Lt<ce;Lt++){const Ft=f(Lt*m*2/r),pn=g(Lt*m*2/r);Ne[Ye+Ie[0]]=Ft*gt,Ne[Ye+Ie[1]]=ft,Ne[Ye+Ie[2]]=pn*gt,it[Ye+Ie[0]]=yt<0||yt>s?0:Ft*y,it[Ye+Ie[1]]=yt<0?-1:yt>s?1:w,it[Ye+Ie[2]]=yt<0||yt>s?0:pn*y,ut[dt+0]=Lt/r,ut[dt+1]=Ct,dt+=2,Ye+=3}}for(let yt=0;yt<s+l;yt++)for(let Ct=0;Ct<r;Ct++){const ft=6*(yt*r+Ct);re[ft+0]=ce*(yt+0)+0+Ct,re[ft+1]=ce*(yt+0)+1+Ct,re[ft+2]=ce*(yt+1)+1+Ct,re[ft+3]=ce*(yt+0)+0+Ct,re[ft+4]=ce*(yt+1)+1+Ct,re[ft+5]=ce*(yt+1)+0+Ct}return{indices:re,attributes:{POSITION:{size:3,value:Ne},NORMAL:{size:3,value:it},TEXCOORD_0:{size:2,value:ut}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class txe extends r5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class nxe extends r5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const ixe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),rxe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),sxe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),oxe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),axe={POSITION:{size:3,value:new Float32Array(rxe)},NORMAL:{size:3,value:new Float32Array(sxe)},TEXCOORD_0:{size:2,value:new Float32Array(oxe)}};class cxe extends oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=ba("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(ixe)},attributes:{...axe,...e.attributes}})}}function sA(t,e,n){e||(e=new Vn(Vn.IDENTITY));const i=new Vn(Vn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const s=new Vn(Vn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}const r=new Vn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const s of t.nodes||t.children||[])if(!1===sA(s,r,n))return!1;return!0}function s5(){sz([N6,Bm])}function o5(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||sA(r,new Vn(Vn.IDENTITY),(s,o)=>s!==n||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function a5(t,e){return TN.apply(this,arguments)}function TN(){return TN=D(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(s=>s.blob())):fetch(n);const r=yield T1(i,Bm,{DracoLoader:sN,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),o5(t.scenegraphNode,r)}),TN.apply(this,arguments)}function lxe(t,e){return MN.apply(this,arguments)}function MN(){return MN=D(function*(t,e){return o5(t,yield e)}),MN.apply(this,arguments)}class el{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new ye);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new ye);const i=this.elements,r=e.x,s=e.y,o=e.z;return n.x=i[0]*r+i[1]*s+i[2]*o,n.y=i[3]*r+i[4]*s+i[5]*o,n.z=i[6]*r+i[7]*s+i[8]*o,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new el);const i=this.elements,r=e.elements,s=n.elements,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],y=r[0],w=r[1],O=r[2],V=r[3],ce=r[4],re=r[5],Ie=r[6],Ne=r[7],it=r[8];return s[0]=o*y+a*V+c*Ie,s[1]=o*w+a*ce+c*Ne,s[2]=o*O+a*re+c*it,s[3]=l*y+u*V+h*Ie,s[4]=l*w+u*ce+h*Ne,s[5]=l*O+u*re+h*it,s[6]=f*y+g*V+m*Ie,s[7]=f*w+g*ce+m*Ne,s[8]=f*O+g*re+m*it,n}scale(e,n){void 0===n&&(n=new el);const i=this.elements,r=n.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return n}solve(e,n){void 0===n&&(n=new ye);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--c);if(n.z=s[11]/s[10],n.y=(s[7]-s[6]*n.z)/s[5],n.x=(s[3]-s[2]*n.z-s[1]*n.y)/s[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new el);const r=uxe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,s=e.w,o=n+n,a=i+i,c=r+r,l=n*o,u=n*a,h=n*c,f=i*a,g=i*c,m=r*c,y=s*o,w=s*a,O=s*c,V=this.elements;return V[0]=1-(f+m),V[1]=u-O,V[2]=h+w,V[3]=u+O,V[4]=1-(l+m),V[5]=g-y,V[6]=h-w,V[7]=g+y,V[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new el);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const uxe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ye{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return n.x=a*s-c*r,n.y=c*i-o*s,n.z=o*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new ye(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new ye(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new el([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ye);const n=this.x,i=this.y,r=this.z;let s=Math.sqrt(n*n+i*i+r*r);return s>0?(s=1/s,e.x=n*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new ye);const r=this.y,s=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*s,n}vmul(e,n){return void 0===n&&(n=new ye),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new ye),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ye),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=dxe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=hxe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*n,i.y=s+(e.y-s)*n,i.z=o+(e.z-o)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(c5),c5.almostEquals(e,n)}clone(){return new ye(this.x,this.y,this.z)}}ye.ZERO=new ye(0,0,0),ye.UNIT_X=new ye(1,0,0),ye.UNIT_Y=new ye(0,1,0),ye.UNIT_Z=new ye(0,0,1);const dxe=new ye,hxe=new ye,c5=new ye;class ur{constructor(e){void 0===e&&(e={}),this.lowerBound=new ye,this.upperBound=new ye,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,l5),l=l5),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return n&&(n.vadd(s,s),n.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new ur).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||n.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||n.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||n.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return n.x<=r.x&&i.x>=s.x&&n.y<=r.y&&i.y>=s.y&&n.z<=r.z&&i.z>=s.z}getCorners(e,n,i,r,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),n.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,n){const i=u5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=u5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,s=1/n.y,o=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(h,f));return!(m<0||g>m)}}const l5=new ye,u5=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class h5{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Jr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new ye),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=fxe;e.tangents(i,pxe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Jr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return n.x=i*u+o*a+r*l-s*c,n.y=r*u+o*c+s*a-i*l,n.z=s*u+o*l+i*c-r*a,n.w=o*u-i*a-r*c-s*l,n}inverse(e){void 0===e&&(e=new Jr);const n=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(n*n+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Jr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;return n.x=u*l+g*-o+h*-c-f*-a,n.y=h*l+g*-a+f*-o-u*-c,n.z=f*l+g*-c+u*-a-h*-o,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,s;void 0===n&&(n="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const u=o*a+c*l;if(u>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*g)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===r&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new Jr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Jr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,y,w,c=e.x,l=e.y,u=e.z,h=e.w;return g=r*c+s*l+o*u+a*h,g<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-n)*f)/m,w=Math.sin(n*f)/m):(y=1-n,w=n),i.x=y*r+w*c,i.y=y*s+w*l,i.z=y*o+w*u,i.w=y*a+w*h,i}integrate(e,n,i,r){void 0===r&&(r=new Jr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,u=this.z,h=this.w,f=.5*n;return r.x+=f*(s*h+o*u-a*l),r.y+=f*(o*h+a*c-s*u),r.z+=f*(a*h+s*l-o*c),r.w+=f*(-s*c-o*l-a*u),r}}const fxe=new ye,pxe=new ye,gxe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let ln=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=gxe,t})();class Mi{constructor(e){void 0===e&&(e={}),this.position=new ye,this.quaternion=new Jr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Mi.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Mi.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),i.vsub(e,r),n.conjugate(f5),f5.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new ye),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new ye),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const f5=new Jr;class lh extends ln{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:ln.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ye;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){n[o[c]].vsub(n[o[(c+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new ye;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];lh.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const s=new ye,o=new ye;n.vsub(e,o),i.vsub(n,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,s,o,a,c,l){const u=new ye;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const y=u.dot(o);y>f&&(f=y,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const y=i.vertices[i.faces[h][m]],w=new ye;w.copy(y),s.vmult(w,w),r.vadd(w,w),g.push(w)}h>=0&&this.clipFaceAgainstHull(o,e,n,g,a,c,l)}findSeparatingAxis(e,n,i,r,s,o,a,c){const l=new ye,u=new ye,h=new ye,f=new ye,g=new ye,m=new ye;let y=Number.MAX_VALUE;const w=this;if(w.uniqueAxes)for(let O=0;O!==w.uniqueAxes.length;O++){i.vmult(w.uniqueAxes[O],l);const V=w.testSepAxis(l,e,n,i,r,s);if(!1===V)return!1;V<y&&(y=V,o.copy(l))}else{const O=a?a.length:w.faces.length;for(let V=0;V<O;V++){l.copy(w.faceNormals[a?a[V]:V]),i.vmult(l,l);const re=w.testSepAxis(l,e,n,i,r,s);if(!1===re)return!1;re<y&&(y=re,o.copy(l))}}if(e.uniqueAxes)for(let O=0;O!==e.uniqueAxes.length;O++){s.vmult(e.uniqueAxes[O],u);const V=w.testSepAxis(u,e,n,i,r,s);if(!1===V)return!1;V<y&&(y=V,o.copy(u))}else{const O=c?c.length:e.faces.length;for(let V=0;V<O;V++){u.copy(e.faceNormals[c?c[V]:V]),s.vmult(u,u);const re=w.testSepAxis(u,e,n,i,r,s);if(!1===re)return!1;re<y&&(y=re,o.copy(u))}}for(let O=0;O!==w.uniqueEdges.length;O++){i.vmult(w.uniqueEdges[O],f);for(let V=0;V!==e.uniqueEdges.length;V++)if(s.vmult(e.uniqueEdges[V],g),f.cross(g,m),!m.almostZero()){m.normalize();const ce=w.testSepAxis(m,e,n,i,r,s);if(!1===ce)return!1;ce<y&&(y=ce,o.copy(m))}}return r.vsub(n,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,n,i,r,s,o){lh.project(this,e,i,r,IN),lh.project(n,e,s,o,DN);const c=IN[0],l=IN[1],u=DN[0],h=DN[1];if(c<h||u<l)return!1;const f=c-h,g=u-l;return f<g?f:g}calculateLocalInertia(e,n){const i=new ye,r=new ye;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*o*2*o+2*a*2*a),n.y=1/12*e*(2*s*2*s+2*a*2*a),n.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,s,o,a){const c=new ye,l=new ye,u=new ye,h=new ye,f=new ye,g=new ye,m=new ye,y=new ye,w=this,V=r,ce=[];let re=-1,Ie=Number.MAX_VALUE;for(let dt=0;dt<w.faces.length;dt++){c.copy(w.faceNormals[dt]),i.vmult(c,c);const yt=c.dot(e);yt<Ie&&(Ie=yt,re=dt)}if(re<0)return;const Ne=w.faces[re];Ne.connectedFaces=[];for(let dt=0;dt<w.faces.length;dt++)for(let yt=0;yt<w.faces[dt].length;yt++)-1!==Ne.indexOf(w.faces[dt][yt])&&dt!==re&&-1===Ne.connectedFaces.indexOf(dt)&&Ne.connectedFaces.push(dt);const it=Ne.length;for(let dt=0;dt<it;dt++){const yt=w.vertices[Ne[dt]];yt.vsub(w.vertices[Ne[(dt+1)%it]],l),u.copy(l),i.vmult(u,u),n.vadd(u,u),h.copy(this.faceNormals[re]),i.vmult(h,h),n.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(yt),i.vmult(g,g),n.vadd(g,g);const ft=Ne.connectedFaces[dt];m.copy(this.faceNormals[ft]);const gt=this.getPlaneConstantOfFace(ft);y.copy(m),i.vmult(y,y);const Lt=gt-y.dot(n);for(this.clipFaceAgainstPlane(V,ce,y,Lt);V.length;)V.shift();for(;ce.length;)V.push(ce.shift())}m.copy(this.faceNormals[re]);const ut=this.getPlaneConstantOfFace(re);y.copy(m),i.vmult(y,y);const Ye=ut-y.dot(n);for(let dt=0;dt<V.length;dt++){let yt=y.dot(V[dt])+Ye;yt<=s&&(console.log(`clamped: depth=${yt} to minDist=${s}`),yt=s),yt<=o&&yt<=1e-6&&a.push({point:V[dt],normal:y,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let s,o;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],o=i.dot(l)+r,s<0)if(o<0){const h=new ye;h.copy(l),n.push(h)}else{const h=new ye;c.lerp(l,s/(s-o),h),n.push(h)}else if(o<0){const h=new ye;c.lerp(l,s/(s-o),h),n.push(h),n.push(l)}c=l,s=o}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ye);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)n.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>n.x&&(n.x=s.x),s.y<e.y?e.y=s.y:s.y>n.y&&(n.y=s.y),s.z<e.z?e.z=s.z:s.z>n.z&&(n.z=s.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new ye);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==n;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const s=this.vertices;let o,a,c,l,u,h,f=new ye;for(let g=0;g<s.length;g++)f.copy(s[g]),n.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===u||f.y>u)&&(u=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,c),r.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ye);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let s=0;s<i;s++){const o=r[s];n.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];n.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,o=new ye;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],u=new ye;e.vsub(l,u);const h=c.dot(u),f=new ye;o.vsub(l,f);const g=c.dot(f);if(h<0&&g>0||h>0&&g<0)return!1}return-1}static project(e,n,i,r,s){const o=e.vertices.length,a=_xe;let c=0,l=0;const u=yxe,h=e.vertices;u.setZero(),Mi.vectorToLocalFrame(i,r,n,a),Mi.pointToLocalFrame(i,r,u,u);const f=u.dot(a);l=c=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>c&&(c=m),m<l&&(l=m)}if(l-=f,c-=f,l>c){const g=l;l=c,c=g}s[0]=c,s[1]=l}}const IN=[],DN=[],_xe=(new ye,new ye),yxe=new ye;class oA extends ln{constructor(e){super({type:ln.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=ye,s=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new lh({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new ye),oA.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let s=0;s!==i.length;s++)n.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)uh.set(s[o][0],s[o][1],s[o][2]),n.vmult(uh,uh),e.vadd(uh,uh),i(uh.x,uh.y,uh.z)}calculateWorldAABB(e,n,i,r){const s=this.halfExtents;Gl[0].set(s.x,s.y,s.z),Gl[1].set(-s.x,s.y,s.z),Gl[2].set(-s.x,-s.y,s.z),Gl[3].set(-s.x,-s.y,-s.z),Gl[4].set(s.x,-s.y,-s.z),Gl[5].set(s.x,s.y,-s.z),Gl[6].set(-s.x,s.y,-s.z),Gl[7].set(s.x,-s.y,s.z);const o=Gl[0];n.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Gl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,h=c.z;l>r.x&&(r.x=l),u>r.y&&(r.y=u),h>r.z&&(r.z=h),l<i.x&&(i.x=l),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const uh=new ye,Gl=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class dn extends h5{constructor(e){void 0===e&&(e={}),super(),this.id=dn.idCounter++,this.index=-1,this.world=null,this.vlambda=new ye,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ye,this.previousPosition=new ye,this.interpolatedPosition=new ye,this.initPosition=new ye,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ye,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ye,this.force=new ye;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?dn.STATIC:dn.DYNAMIC,typeof e.type==typeof dn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=dn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ye,this.quaternion=new Jr,this.initQuaternion=new Jr,this.previousQuaternion=new Jr,this.interpolatedQuaternion=new Jr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ye,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ye,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ye,this.invInertia=new ye,this.invInertiaWorld=new el,this.invMassSolve=0,this.invInertiaSolve=new ye,this.invInertiaWorldSolve=new el,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ye(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ye(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new ur,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ye,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=dn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===dn.SLEEPING&&this.dispatchEvent(dn.wakeupEvent)}sleep(){this.sleepState=dn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===dn.AWAKE&&i<r?(this.sleepState=dn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(dn.sleepyEvent)):n===dn.SLEEPY&&i>r?this.wakeUp():n===dn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(dn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===dn.SLEEPING||this.type===dn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new ye),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new ye,s=new Jr;return n&&r.copy(n),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=n[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=vxe,o=bxe,a=this.quaternion,c=this.aabb,l=wxe;for(let u=0;u!==r;u++){const h=e[u];a.vmult(n[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=xxe,r=Exe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new ye),this.type!==dn.DYNAMIC)return;this.sleepState===dn.SLEEPING&&this.wakeUp();const i=Sxe;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new ye),this.type!==dn.DYNAMIC)return;const i=Cxe,r=Txe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===dn.DYNAMIC&&(this.sleepState===dn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==dn.DYNAMIC)return;this.sleepState===dn.SLEEPING&&this.wakeUp();const i=n,r=Mxe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=Ixe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==dn.DYNAMIC)return;const i=Dxe,r=Rxe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Oxe;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),oA.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new ye;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==dn.DYNAMIC&&this.type!==dn.KINEMATIC||this.sleepState===dn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,y=this.angularFactor,w=c.x*y.x,O=c.y*y.y,V=c.z*y.z;s.x+=e*(m[0]*w+m[1]*O+m[2]*V),s.y+=e*(m[3]*w+m[4]*O+m[5]*V),s.z+=e*(m[6]*w+m[7]*O+m[8]*V),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}dn.idCounter=0,dn.COLLIDE_EVENT_NAME="collide",dn.DYNAMIC=1,dn.STATIC=2,dn.KINEMATIC=4,dn.AWAKE=0,dn.SLEEPY=1,dn.SLEEPING=2,dn.wakeupEvent={type:"wakeup"},dn.sleepyEvent={type:"sleepy"},dn.sleepEvent={type:"sleep"};const vxe=new ye,bxe=new Jr,wxe=new ur,xxe=new el,Exe=new el,Sxe=(new el,new ye),Cxe=new ye,Txe=new ye,Mxe=new ye,Ixe=new ye,Dxe=new ye,Rxe=new ye,Oxe=new ye;new ye,new ye,new Jr,new ye,new ye,new ye,new ye;class bv{constructor(){this.rayFromWorld=new ye,this.rayToWorld=new ye,this.hitNormalWorld=new ye,this.hitPointWorld=new ye,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let p5,g5,m5,_5,y5,v5,b5;p5=ln.types.SPHERE,g5=ln.types.PLANE,m5=ln.types.BOX,_5=ln.types.CYLINDER,y5=ln.types.CONVEXPOLYHEDRON,v5=ln.types.HEIGHTFIELD,b5=ln.types.TRIMESH;class Is{get[p5](){return this._intersectSphere}get[g5](){return this._intersectPlane}get[m5](){return this._intersectBox}get[_5](){return this._intersectConvex}get[y5](){return this._intersectConvex}get[v5](){return this._intersectHeightfield}get[b5](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new ye),void 0===n&&(n=new ye),this.from=e.clone(),this.to=n.clone(),this.direction=new ye,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Is.ANY,this.result=new bv,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||Is.ANY,this.result=n.result||new bv,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(w5),LN.length=0,e.broadphase.aabbQuery(e,w5,LN),this.intersectBodies(LN),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=jxe,s=Uxe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function nEe(t,e,n){n.vsub(t,Kf);const i=Kf.dot(e);return e.scale(i,cA),cA.vadd(t,cA),n.distanceTo(cA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,s)}_intersectPlane(e,n,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new ye(0,0,1);n.vmult(l,l);const u=new ye;o.vsub(i,u);const h=u.dot(l);if(a.vsub(i,u),h*u.dot(l)>0||o.distanceTo(a)<h)return;const g=l.dot(c);if(Math.abs(g)<this.precision)return;const m=new ye,y=new ye,w=new ye;o.vsub(i,m);const O=-l.dot(m)/g;c.scale(O,y),o.vadd(y,w),this.reportIntersection(l,w,s,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,s=this.from;n.x=Math.min(r.x,s.x),n.y=Math.min(r.y,s.y),n.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,n,i,r,s){const o=Vxe;o.from.copy(this.from),o.to.copy(this.to),Mi.pointToLocalFrame(i,n,o.from,o.from),Mi.pointToLocalFrame(i,n,o.to,o.to),o.updateDirection();const a=Hxe;let c,l,u,h;c=l=0,u=h=e.data.length-1;const f=new ur;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=c;g<u;g++)for(let m=l;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),Mi.pointToWorldFrame(i,n,e.pillarOffset,aA),this._intersectConvex(e.pillarConvex,n,aA,r,s,x5),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),Mi.pointToWorldFrame(i,n,e.pillarOffset,aA),this._intersectConvex(e.pillarConvex,n,aA,r,s,x5)}}}_intersectSphere(e,n,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=u**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),g=zxe,m=Gxe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const y=(-u-Math.sqrt(f))/(2*l),w=(-u+Math.sqrt(f))/(2*l);if(y>=0&&y<=1&&(o.lerp(a,y,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(o.lerp(a,w,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,n,i,r,s,o){const a=Wxe,c=E5,l=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,w=m.distanceTo(this.to),O=l?l.length:u.length,V=this.result;for(let ce=0;!V.shouldStop&&ce<O;ce++){const re=l?l[ce]:ce,Ie=u[re],Ne=f[re],it=n,ut=i;c.copy(h[Ie[0]]),it.vmult(c,c),c.vadd(ut,c),c.vsub(m,c),it.vmult(Ne,a);const Ye=g.dot(a);if(Math.abs(Ye)<this.precision)continue;const dt=a.dot(c)/Ye;if(!(dt<0)){g.scale(dt,xa),xa.vadd(m,xa),tl.copy(h[Ie[0]]),it.vmult(tl,tl),ut.vadd(tl,tl);for(let yt=1;!V.shouldStop&&yt<Ie.length-1;yt++){Wl.copy(h[Ie[yt]]),$l.copy(h[Ie[yt+1]]),it.vmult(Wl,Wl),it.vmult($l,$l),ut.vadd(Wl,Wl),ut.vadd($l,$l);const Ct=xa.distanceTo(m);!Is.pointInTriangle(xa,tl,Wl,$l)&&!Is.pointInTriangle(xa,Wl,tl,$l)||Ct>w||this.reportIntersection(a,xa,s,r,re)}}}}_intersectTrimesh(e,n,i,r,s,o){const a=qxe,c=eEe,l=tEe,u=E5,h=Xxe,f=Kxe,g=Jxe,m=Zxe,y=Qxe,w=e.indices,O=this.from,V=this.to,ce=this.direction;l.position.copy(i),l.quaternion.copy(n),Mi.vectorToLocalFrame(i,n,ce,h),Mi.pointToLocalFrame(i,n,O,f),Mi.pointToLocalFrame(i,n,V,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const re=f.distanceSquared(g);e.tree.rayQuery(this,l,c);for(let Ie=0,Ne=c.length;!this.result.shouldStop&&Ie!==Ne;Ie++){const it=c[Ie];e.getNormal(it,a),e.getVertex(w[3*it],tl),tl.vsub(f,u);const ut=h.dot(a),Ye=a.dot(u)/ut;if(Ye<0)continue;h.scale(Ye,xa),xa.vadd(f,xa),e.getVertex(w[3*it+1],Wl),e.getVertex(w[3*it+2],$l);const dt=xa.distanceSquared(f);!Is.pointInTriangle(xa,Wl,tl,$l)&&!Is.pointInTriangle(xa,tl,Wl,$l)||dt>re||(Mi.vectorToWorldFrame(n,a,y),Mi.pointToWorldFrame(i,n,xa,m),this.reportIntersection(y,m,s,r,it))}c.length=0}reportIntersection(e,n,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case Is.ALL:this.hasHit=!0,l.set(o,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case Is.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c));break;case Is.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,Kf),i.vsub(n,wv),e.vsub(n,FN);const s=Kf.dot(Kf),o=Kf.dot(wv),a=Kf.dot(FN),c=wv.dot(wv),l=wv.dot(FN);let u,h;return(u=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&u+h<s*c-o*o}}Is.CLOSEST=1,Is.ANY=2,Is.ALL=4;const w5=new ur,LN=[],wv=new ye,FN=new ye,jxe=new ye,Uxe=new Jr,xa=new ye,tl=new ye,Wl=new ye,$l=new ye;new ye,new bv;const x5={faceList:[0]},aA=new ye,Vxe=new Is,Hxe=[],zxe=new ye,Gxe=new ye,Wxe=new ye,E5=(new ye,new ye,new ye),qxe=new ye,Xxe=new ye,Kxe=new ye,Jxe=new ye,Qxe=new ye,Zxe=new ye;new ur;const eEe=[],tEe=new Mi,Kf=new ye,cA=new ye;new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Is,new ye,new ye,new ye,new ye(1,0,0),new ye(0,1,0),new ye(0,0,1),new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ur,new ye,new ur,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ur,new ye,new Mi,new ur,new ye,new ye,new ye,new ye,new ye,new Jr,new Jr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ur,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Jr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ur,new Is;const Hs=globalThis.performance||{};if(!Hs.now){let t=Date.now();Hs.timing&&Hs.timing.navigationStart&&(t=Hs.timing.navigationStart),Hs.now=()=>Date.now()-t}function VN(){return VN=D(function*(t){console.log("Starting Collisioning");const e=t.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Vn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new ur({lowerBound:new ye(...c.map((u,h)=>Math.min(u,l[h]))),upperBound:new ye(...l.map((u,h)=>Math.max(u,c[h])))})}}),n=[];for(const o of t.filter(a=>!!a.scenegraph)){const a=yield tv(o.scenegraph,Bm,{DracoLoader:sN,decompress:!0,postProcess:!0});for(const c of a.scenes)sA(c,new Vn(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new ur({lowerBound:new ye(...f.map((m,y)=>Math.min(m,g[y]))),upperBound:new ye(...g.map((m,y)=>Math.max(m,f[y])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of n)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),VN.apply(this,arguments)}function HN(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new Jwe;break;case"cone":i=new txe;break;case"cylinder":i=new nxe;break;default:i=new cxe}return new u2({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:xi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function X5(t,e,n){if(e&&0!==e.length)return new o2({id:t,pickable:!0,data:e.map(i=>({...i,position:new Vn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}new ye;let aSe=(()=>{class t extends e2{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:n}=this.props;this.setState({data:n??[],zoomOpacity:.8,doCollisions:!1}),s5()}renderLayers(){const n=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of n.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=a5({scenegraph:o.scenegraph},t.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const c of a)s.push(new CN({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?n.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:xi.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?lxe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===o?(s.push(X5("text",a.filter(c=>c.unpickable),{pickable:!1})),s.push(X5("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===o?s.push(HN(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(HN(o,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(HN(`${o}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return n.doCollisions&&function oSe(t){VN.apply(this,arguments)}(n.data),s.filter(o=>!!o)}getPickingInfo(n){return n.info}}return t})();function K5(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),K5(n,e);return e}function zN(){return zN=D(function*(t,e,n,i){s5();const r=yield a5({scenegraph:t,scenegraphNode:n},i),s={},o=[];e=new Vn(e??Vn.IDENTITY);for(const a of r.scenes)sA(a,e,(c,l)=>{const u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Vn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:u["@id"],transformMatrix:new Vn(e||Vn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),g=l.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new ur({lowerBound:new ye(...f.map((m,y)=>Math.min(m,g[y]))),upperBound:new ye(...g.map((m,y)=>Math.max(m,f[y])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of K5(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ye(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Vn(Vn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),zN.apply(this,arguments)}class ep{constructor(e){this.deckProps=e,this.bodyUILayer=new aSe({}),this.nodeClickSubject=new Qt,this.nodeHoverStartSubject=new Qt,this.nodeHoverStopSubject=new Qt,this.sceneRotationSubject=new nr([0,0]),this.nodeDragStartSubject=new Qt,this.nodeDragSubject=new Qt,this.nodeDragEndSubject=new Qt,this.nodeClick$=this.nodeClickSubject.pipe(Gu()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Gu()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Gu()),this.sceneRotation$=this.sceneRotationSubject.pipe(Gu()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Gu()),this.nodeDrag$=this.nodeDragSubject.pipe(Gu()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Gu());const n={...e,views:["orthographic"===e.camera?new rR({flipY:!1,near:-1e3}):new mH({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(n.effects=[new BR({ambientLight:new E8({color:[255,255,255],intensity:10})})]),this.deck=new UO(n),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return D(function*(){for(;!e.bodyUILayer.state;)yield new Promise(n=>{setTimeout(n,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let n=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);n=i?.05:n,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,n):this.bodyUILayer.setState({data:e,zoomOpacity:n})}}debugSceneNodeProcessing(e,n){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new Vn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function cSe(t,e,n,i){return zN.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:n})})}zoomTo(e){const n=new Vn(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:n.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:n}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object?.["@id"]?n!==e.object&&(n&&this.nodeHoverStopSubject.next(n),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):n&&(this.nodeHoverStopSubject.next(n),this.lastHovered=void 0)}_onClick(e,n){e.picked&&e.object?.["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:n?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(e){if(e.interactionState?.isZooming){const n=this.bodyUILayer.state,i=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);n.zoomOpacity!==i&&this.bodyUILayer.setState({data:n.data,zoomOpacity:i})}this.deck.setProps({viewState:{...e.viewState}}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,n){this._dragEvent(e,n,this.nodeDragStartSubject)}_onDrag(e,n){this._dragEvent(e,n,this.nodeDragSubject)}_onDragEnd(e,n){this._dragEvent(e,n,this.nodeDragEndSubject)}_dragEvent(e,n,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:n})}}Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],ep.prototype,"_onHover",null),Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,Object]),jt("design:returntype",void 0)],ep.prototype,"_onClick",null),Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],ep.prototype,"_onViewStateChange",null),Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],ep.prototype,"_onDragStart",null),Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],ep.prototype,"_onDrag",null),Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],ep.prototype,"_onDragEnd",null);const lSe=["bodyCanvas"];let uSe=(()=>{class t{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new hn,this.nodeDrag=new hn,this.nodeClick=new hn,this.nodeHoverStart=new hn,this.nodeHoverStop=new hn,this.initialized=new hn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(n){this._scene=n,this.bodyUI?.setScene(n)}get rotation(){return this._rotation}set rotation(n){this._rotation=n,this.bodyUI?.setRotation(n)}get rotationX(){return this._rotationX}set rotationX(n){this._rotationX=n,this.bodyUI?.setRotationX(n)}get zoom(){return this._zoom}set zoom(n){this._zoom=n,this.bodyUI?.setZoom(n)}get target(){return this._target}set target(n){this._target=n,this.bodyUI?.setTarget(n)}get bounds(){return this._bounds}set bounds(n){this._bounds=n,this.zoomToBounds(n)}get camera(){return this._camera}set camera(n){this._camera=n}get interactive(){return this._interactive}set interactive(n){this._interactive=n,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(n,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/n.x),Math.log2((s-i.y)/o/n.y));this.zoom=a}}setupBodyUI(){var n=this;return D(function*(){const i=n.bodyCanvas.nativeElement,r=new ep({id:"body-ui",canvas:i,zoom:n.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:n.interactive,camera:n.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),n.bodyUI=r,window.bodyUI=r,n.scene?.length>0&&n.bodyUI.setScene(n.scene),n.bounds&&n.zoomToBounds(n.bounds),n.target&&n.bodyUI.setTarget(n.target),n.subscriptions=[n.bodyUI.sceneRotation$.subscribe(s=>n.rotationChange.next(s)),n.bodyUI.nodeDrag$.subscribe(s=>n.nodeDrag.emit(s)),n.bodyUI.nodeClick$.subscribe(s=>n.nodeClick.emit(s)),n.bodyUI.nodeHoverStart$.subscribe(s=>n.nodeHoverStart.emit(s)),n.bodyUI.nodeHoverStop$.subscribe(s=>n.nodeHoverStop.emit(s))],n.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(n=>n.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&js(lSe,5,ni),2&i){let s;Hi(s=zi())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Ru(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[["bodyCanvas",""],[1,"body-ui"]],template:function(i,r){1&i&&Qi(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return t})(),J5=(()=>{class t{constructor(){this.bootstrap$=new Pf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function dSe(t,e){return t===e}function GN(t,e=dSe){let n=null,i=null;function r(){return function hSe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let fSe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const Q5=new Et("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>fSe.pop()}),Z5=new Et("\u0275NGXS_STATE_FACTORY"),e9=new Et("\u0275NGXS_STATE_CONTEXT_FACTORY");function Zt(...t){return us(t,O0(t))}const{isArray:pSe}=Array,{getPrototypeOf:gSe,prototype:mSe,keys:_Se}=Object;function t9(t){if(1===t.length){const e=t[0];if(pSe(e))return{args:e,keys:null};if(function ySe(t){return t&&"object"==typeof t&&gSe(t)===mSe}(e)){const n=_Se(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:vSe}=Array;function _A(t){return Xt(e=>function bSe(t,e){return vSe(e)?t(...e):t(e)}(t,e))}function n9(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Mv(...t){const e=S4(t),{args:n,keys:i}=t9(t),r=new At(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let h=!1;Cs(n[u]).subscribe(ti(s,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?n9(i,a):a),s.complete())}))}});return e?r.pipe(_A(e)):r}function dh(t,e){const n=Ze(t)?t:()=>t,i=r=>r.error(n());return new At(e?r=>e.schedule(i,0,r):i)}function hh(t){return!!t&&(t instanceof At||Ze(t.lift)&&Ze(t.subscribe))}function Ei(t,e){return gn((n,i)=>{let r=0;n.subscribe(ti(i,s=>t.call(e,s,r++)&&i.next(s)))})}function ia(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,Gu({connector:()=>new Pf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Fr(t){return t<=0?()=>ko:gn((e,n)=>{let i=0;e.subscribe(ti(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function i9(t,e){return e?n=>n.pipe(i9((i,r)=>Cs(t(i,r)).pipe(Xt((s,o)=>e(i,s,r,o))))):gn((n,i)=>{let r=0,s=null,o=!1;n.subscribe(ti(i,a=>{s||(s=ti(i,void 0,()=>{s=null,o&&i.complete()}),Cs(t(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function Hm(t){return gn((e,n)=>{let i=!1;e.subscribe(ti(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function nl(t){return gn((e,n)=>{let s,i=null,r=!1;i=e.subscribe(ti(n,void 0,void 0,o=>{s=Cs(t(o,nl(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function Ea(t){return gn((e,n)=>{Cs(t).subscribe(ti(n,()=>n.complete(),xt)),!n.closed&&e.subscribe(n)})}function tp(t,e=Ge){return t=t??wSe,gn((n,i)=>{let r,s=!0;n.subscribe(ti(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function wSe(t,e){return t===e}function Yi(t,e,n){const i=Ze(t)||e||n?{next:t,error:e,complete:n}:t;return i?gn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ti(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ge}function Iv(...t){return function xSe(){return GE(1)}()(us(t,O0(t)))}function ql(...t){const e=O0(t);return gn((n,i)=>{(e?Iv(t,n,e):Iv(t,n)).subscribe(i)})}function np(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const c9=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?n:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),t),t},$N=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),YN=t=>t&&"object"==typeof t&&!Array.isArray(t),qN=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(YN(t)&&YN(n))for(const i in n)YN(n[i])?(t[i]||Object.assign(t,{[i]:{}}),qN(t[i],n[i])):Object.assign(t,{[i]:n[i]});return qN(t,...e)};let l9=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return ED(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return _n.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return _n.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(ot(_n),ot(Va))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const u9=new Et("ROOT_OPTIONS"),d9=new Et("ROOT_STATE_TOKEN"),h9=new Et("FEATURE_STATE_TOKEN"),f9=new Et("NGXS_PLUGINS"),Ku="NGXS_META",p9="NGXS_OPTIONS_META",XN="NGXS_SELECTOR_META";let vA=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=l9}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=It({token:t,factory:function(n){let i=null;return n?i=new n:(r=ot(u9),i=qN(new t,r)),i;var r},providedIn:"root"}),t})();class OSe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let NSe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const g9=new Et("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),PSe=new Et("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Ot(yi),e=t.get(g9);return t.get(e||(typeof Pn.Zone<"u"?l9:NSe))}});function KN(t){if(!t.hasOwnProperty(Ku)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Ku,{value:e})}return ip(t)}function ip(t){return t[Ku]}function bA(t){return t[XN]}function m9(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function LSe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function FSe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}function HSe(...t){return function zm(t,e,n=WSe){const i=function $Se(t){return t.reduce((e,n)=>(e[np(n)]=!0,e),{})}(t),r=e&&function YSe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(s){return s.pipe(function zSe(t,e){return Ei(n=>{const i=np(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function WSe(){return Xt(t=>t.action)}function wA(t){return e=>new At(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let _9=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(ot(PSe))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function y9(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const s=e.pop();s&&t(...s)}n=!1}}}class qSe extends Qt{constructor(){super(...arguments),this._orderedNext=y9(e=>super.next(e))}next(e){this._orderedNext(e)}}class XSe extends nr{constructor(e){super(e),this._orderedNext=y9(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let v9=(()=>{class t extends qSe{ngOnDestroy(){this.complete()}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Fi(t)))(i||t)}})(),t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const b9=t=>(...e)=>t.shift()(...e,(...i)=>b9(t)(...i));let w9=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(Ro));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(ot(Ui))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),QN=(()=>{class t extends XSe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ZN=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(ot(t,12),ot(f9,8))},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})(),x9=(()=>{class t extends Qt{}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Fi(t)))(i||t)}})(),t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),JSe=(()=>{class t{constructor(n,i,r,s,o,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function KSe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new At(r=>(i=!0,n.pipe(wA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?Zt(this._stateStream.getValue()):Mv(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return b9([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(ia())}getActionResultStream(n){return this._actionResults.pipe(Ei(i=>i.action===n&&"DISPATCHED"!==i.status),Fr(1),ia())}createDispatchObservable(n){return n.pipe(i9(i=>{switch(i.status){case"SUCCESSFUL":return Zt(this._stateStream.getValue());case"ERRORED":return dh(i.error);default:return ko}})).pipe(ia())}}return t.\u0275fac=function(n){return new(n||t)(ot(v9),ot(x9),ot(ZN),ot(QN),ot(_9),ot(w9))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dv=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(ot(QN),ot(JSe),ot(vA))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eP=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>C9(i.getState(),n.path),patchState(r){const s=i.getState(),o=function QSe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(r);return S9(i,s,o,n.path)},setState(r){const s=i.getState();return function yA(t){return"function"==typeof t}(r)?S9(i,s,r,n.path):A9(i,s,r,n.path)},dispatch:r=>i.dispatch(r)}}}return t.\u0275fac=function(n){return new(n||t)(ot(Dv))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function A9(t,e,n,i){const r=c9(e,i,n);return t.setState(r),r}function S9(t,e,n,i){return A9(t,e,n(C9(e,i)),i)}function C9(t,e){return $N(t,e)}new RegExp("^[a-zA-Z0-9_]+$");let T9=(()=>{class t{}return t.type="@@INIT",t})(),M9=(()=>{class t{constructor(n){this.addedStates=n}}return t.type="@@UPDATE_STATE",t})();new Et("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Gm=(()=>{class t{constructor(n,i,r,s,o,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=GN(()=>{const l=this;function u(f){const g=l.statePaths[f];return g?m9(g.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(n){let i=n;return Array.isArray(n)?i=n.slice():function VSe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?i=Object.assign({},n):void 0===n&&(i={}),i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function kSe(t){const e=n=>t.find(r=>r===n)[Ku].name;return t.reduce((n,i)=>{const{name:r,children:s}=i[Ku];return n[r]=(s||[]).map(e),n},{})}(i),s=function USe(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(o=>{n[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),o=function jSe(t,e={}){const n=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=n(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function BSe(t){return t.reduce((e,n)=>(e[n[Ku].name]=n,e),{})}(i),c=[];for(const l of s){const u=a[l],h=o[l],f=u[Ku];this.addRuntimeInfoToMeta(f,h);const g={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:t._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((o,a)=>c9(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Qt;this._actionsSubscription=this._actions.pipe(Ei(i=>"DISPATCHED"===i.status),Ts(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(Xt(()=>({action:r,status:"SUCCESSFUL"})),Hm({action:r,status:"CANCELED"}),nl(s=>Zt({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=np(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const u=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](u,i);h instanceof Promise&&(h=us(h)),hh(h)?(h=h.pipe(Ts(f=>f instanceof Promise?us(f):hh(f)?f:Zt(f)),Hm({})),l.options.cancelUncompleted&&(h=h.pipe(Ea(n.pipe(HSe(i)))))):h=Zt({}).pipe(ia()),s.push(h)}catch(h){s.push(dh(h))}o=!0}}return s.length||s.push(Zt({})),Mv(s)}addToStatesMap(n){const i=[],r=this.statesByName;for(const s of n){const o=ip(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==$N(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(ot(Ui),ot(vA),ot(t,12),ot(v9),ot(x9),ot(eP),ot(Q5,8))},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})();function I9(t){const e=bA(t)||ip(t);return e&&e.makeRootSelector||(()=>t)}let Ju=(()=>{class t{constructor(n,i,r,s,o,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(wA(this._internalExecutionStrategy),ia({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(Xt(i),nl(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?Zt(void 0):dh(r)}),tp(),wA(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(Fr(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(wA(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return I9(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(o)}}}return t.\u0275fac=function(n){return new(n||t)(ot(QN),ot(Dv),ot(vA),ot(_9),ot(Gm),ot(Q5,8))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EA=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(ot(Ju),ot(vA))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),D9=(()=>{class t{constructor(n,i,r,s,o){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new Qt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(Ei(()=>!!i),Yi(()=>this._invokeInitOnStates(i.states)),Ts(()=>this._bootstrapper.appBootstrapped$),Ei(r=>!!r),nl(r=>(this._internalErrorReporter.reportErrorSafely(r),ko)),Ea(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>$N(s,i.path)).pipe(ql(void 0),gn((t,e)=>{let n,i=!1;t.subscribe(ti(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))}),Ea(this._destroy$)).subscribe(([s,o])=>{const a=new OSe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(ot(Ju),ot(w9),ot(Dv),ot(eP),ot(J5))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dCe=(()=>{class t{constructor(n,i,r,s,o=[],a){const c=n.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new T9,c)}}return t.\u0275fac=function(n){return new(n||t)(ot(Gm),ot(Dv),ot(Ju),ot(EA),ot(d9,8),ot(D9))},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})(),hCe=(()=>{class t{constructor(n,i,r,s=[],o){const a=t.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new M9(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(ot(Ju),ot(Dv),ot(Gm),ot(h9,8),ot(D9))},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})(),fCe=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:dCe,providers:[Gm,ZN,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:hCe,providers:[Gm,ZN,...n,{provide:h9,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:g9,useValue:i.executionStrategy},{provide:d9,useValue:n},{provide:u9,useValue:i},{provide:yE,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[J5]},{provide:e9,useExisting:eP},{provide:Z5,useExisting:Gm}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})();function tP(t,e){return(n,i)=>{const r=KN(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function nP(t){return e=>{const n=e,i=KN(n),r=Object.getPrototypeOf(n),s=function pCe(t,e){return Object.assign(Object.assign({},t[p9]||{}),e)}(r,t);(function gCe(t){const{meta:e,inheritedStateClass:n,optionsWithInheritance:i}=t,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;if(n.hasOwnProperty(Ku)){const c=n[Ku]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),n[p9]=s}}const mCe=36;function AA(t,...e){return function(n,i){const r=i.toString(),s=`__${r}__selector`,o=function yCe(t,e,n=[]){return e=e||function vCe(t){const e=t.length-1;return t.charCodeAt(e)===mCe?t.slice(0,e):t}(t),"string"==typeof e?m9(n.length?[e,...n]:e.split("."),EA.config):e}(r,t,e);Object.defineProperties(n,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function _Ce(t){return EA.store||function RSe(){throw new Error("You have forgotten to import the NGXS module!")}(),EA.store.select(t)}(o))}}})}}const R9="NGXS_SELECTOR_OPTIONS_META",SA={getOptions:t=>t&&t[R9]||{},defineOptions:(t,e)=>{t&&(t[R9]=e)}};function bCe(t,e){const n=function JN(t){return t.hasOwnProperty(XN)||Object.defineProperty(t,XN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),bA(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function wCe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},SA.getOptions(t.containerClass)||{}),SA.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function Rv(t,e,n){const i=function cCe(t,e){const n=e&&e.containerClass,r=GN(function(...o){const a=t.apply(n,o);return a instanceof Function?GN.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=bCe(e,n);return r.makeRootSelector=function aCe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function lCe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),o=function uCe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&ip(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>I9(a)(t));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,t,i),i}function Wm(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,s=Rv(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let O9=(()=>{class t{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Du),nt(ni))};static#t=this.\u0275dir=Yt({type:t})}return t})(),rp=(()=>{class t extends O9{static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Fi(t)))(r||t)}})();static#t=this.\u0275dir=Yt({type:t,features:[gi]})}return t})();const Tc=new Et(""),SCe={provide:Tc,useExisting:$n(()=>TA),multi:!0},TCe=new Et("");let TA=(()=>{class t extends O9{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CCe(){const t=Wd()?Wd().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Du),nt(ni),nt(TCe,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&oi("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[wi([SCe]),gi]})}return t})();function fh(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function P9(t){return null!=t&&"number"==typeof t.length}const Js=new Et(""),ph=new Et(""),MCe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ICe{static min(e){return function L9(t){return e=>{if(fh(e.value)||fh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function F9(t){return e=>{if(fh(e.value)||fh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function k9(t){return fh(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function B9(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function j9(t){return fh(t.value)||MCe.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function U9(t){return e=>fh(e.value)||!P9(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function V9(t){return e=>P9(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function H9(t){if(!t)return MA;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(fh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return q9(e)}static composeAsync(e){return X9(e)}}function MA(t){return null}function z9(t){return null!=t}function G9(t){return sm(t)?us(t):t}function W9(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function $9(t,e){return e.map(n=>n(t))}function Y9(t){return t.map(e=>function DCe(t){return!t.validate}(e)?e:n=>e.validate(n))}function q9(t){if(!t)return null;const e=t.filter(z9);return 0==e.length?null:function(n){return W9($9(n,e))}}function iP(t){return null!=t?q9(Y9(t)):null}function X9(t){if(!t)return null;const e=t.filter(z9);return 0==e.length?null:function(n){return Mv($9(n,e).map(G9)).pipe(Xt(W9))}}function rP(t){return null!=t?X9(Y9(t)):null}function K9(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function J9(t){return t._rawValidators}function Q9(t){return t._rawAsyncValidators}function sP(t){return t?Array.isArray(t)?t:[t]:[]}function IA(t,e){return Array.isArray(t)?t.includes(e):t===e}function Z9(t,e){const n=sP(e);return sP(t).forEach(r=>{IA(n,r)||n.push(r)}),n}function eW(t,e){return sP(e).filter(n=>!IA(t,n))}class tW{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ra extends tW{get formDirective(){return null}get path(){return null}}class Qu extends tW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nW{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let iW=(()=>{class t extends nW{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Qu,2))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Vi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[gi]})}return t})(),rW=(()=>{class t extends nW{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ra,10))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Vi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[gi]})}return t})();const Ov="VALID",RA="INVALID",$m="PENDING",Nv="DISABLED";function cP(t){return(OA(t)?t.validators:t)||null}function lP(t,e){return(OA(e)?e.asyncValidators:t)||null}function OA(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class uP{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ov}get invalid(){return this.status===RA}get pending(){return this.status==$m}get disabled(){return this.status===Nv}get enabled(){return this.status!==Nv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Z9(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Z9(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eW(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eW(e,this._rawAsyncValidators))}hasValidator(e){return IA(this._rawValidators,e)}hasAsyncValidator(e){return IA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$m,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Nv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ov,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ov||this.status===$m)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nv:Ov}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$m,this._hasOwnPendingAsyncValidator=!0;const n=G9(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new hn,this.statusChanges=new hn}_calculateStatus(){return this._allControlsDisabled()?Nv:this.errors?RA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($m)?$m:this._anyControlsHaveStatus(RA)?RA:Ov}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){OA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PCe(t){return Array.isArray(t)?iP(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function LCe(t){return Array.isArray(t)?rP(t):t||null}(this._rawAsyncValidators)}}class dP extends uP{constructor(e,n,i){super(cP(n),lP(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function aW(t,e,n){t._forEachChild((i,r)=>{if(void 0===n[r])throw new St(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function oW(t,e,n){const i=t.controls;if(!(e?Object.keys(i):i).length)throw new St(1e3,"");if(!i[n])throw new St(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Pv=new Et("CallSetDisabledState",{providedIn:"root",factory:()=>hP}),hP="always";function Lv(t,e,n=hP){fP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function BCe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&cW(t,e)})}(t,e),function UCe(t,e){const n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function jCe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&cW(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function kCe(t,e){if(e.valueAccessor.setDisabledState){const n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function PA(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),FA(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function LA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function fP(t,e){const n=J9(t);null!==e.validator?t.setValidators(K9(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=Q9(t);null!==e.asyncValidator?t.setAsyncValidators(K9(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();LA(e._rawValidators,r),LA(e._rawAsyncValidators,r)}function FA(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=J9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const r=Q9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}const i=()=>{};return LA(e._rawValidators,i),LA(e._rawAsyncValidators,i),n}function cW(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function lW(t,e){fP(t,e)}function uW(t,e){t._syncPendingControls(),e.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const WCe={provide:ra,useExisting:$n(()=>kv)},Fv=Promise.resolve();let kv=(()=>{class t extends ra{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new hn,this.form=new dP({},iP(n),rP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Fv.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),Lv(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Fv.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Fv.then(()=>{const i=this._findContainer(n.path),r=new dP({});lW(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Fv.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Fv.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,uW(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Js,10),nt(ph,10),nt(Pv,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&oi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[$t.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wi([WCe]),gi]})}return t})();function dW(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function hW(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _P=class extends uP{constructor(e=null,n,i){super(cP(n),lP(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),OA(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=hW(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dW(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dW(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hW(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$Ce=_P;Promise.resolve();let _W=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const wW=new Et(""),eTe={provide:Qu,useExisting:$n(()=>yP)};let yP=(()=>{class t extends Qu{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new hn,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=function mP(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===TA?n=s:function zCe(t){return Object.getPrototypeOf(t.constructor)===rp}(s)?i=s:r=s}),r||i||n||null}(0,r)}ngOnChanges(n){if(this._isControlChanged(n)){const i=n.form.previousValue;i&&PA(i,this,!1),Lv(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function gP(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&PA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||t)(nt(Js,10),nt(ph,10),nt(Tc,10),nt(wW,8),nt(Pv,8))};static#n=this.\u0275dir=Yt({type:t,selectors:[["","formControl",""]],inputs:{form:[$t.None,"formControl","form"],isDisabled:[$t.None,"disabled","isDisabled"],model:[$t.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[wi([eTe]),gi,Cr]})}return t})();const tTe={provide:ra,useExisting:$n(()=>kA)};let kA=(()=>{class t extends ra{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new hn,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(FA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return Lv(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){PA(n.control||null,n,!1),function GCe(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,uW(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&(PA(i||null,n),(t=>t instanceof _P)(r)&&(Lv(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);lW(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function VCe(t,e){return FA(t,e)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fP(this.form,this),this._oldForm&&FA(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Js,10),nt(ph,10),nt(Pv,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&oi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[$t.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wi([tTe]),gi,Cr]})}return t})();const Bv=vt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let SP;try{SP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{SP=!1}let Ym,Ho=(()=>{class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?$d(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!SP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Va))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const PW=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function LW(){if(Ym)return Ym;if("object"!=typeof document||!document)return Ym=new Set(PW),Ym;let t=document.createElement("input");return Ym=new Set(PW.filter(e=>(t.setAttribute("type",e),t.type===e))),Ym}let jv,op,CP;function Uv(t){return function wTe(){if(null==jv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jv=!0}))}finally{jv=jv||!1}return jv}()?t:!!t.capture}function xTe(){if(null==op){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return op=!1,op;if("scrollBehavior"in document.documentElement.style)op=!0;else{const t=Element.prototype.scrollTo;op=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return op}function TP(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Zu(t){return t.composedPath?t.composedPath()[0]:t.target}function MP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function gh(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class UTe extends kt{constructor(e,n){super()}schedule(e,n=0){return this}}const UA={setInterval(t,e,...n){const{delegate:i}=UA;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=UA;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class RP extends UTe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return UA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&UA.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,wt(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class Hv{constructor(e,n=Hv.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}Hv.now=OD.now;class OP extends Hv{constructor(e,n=Hv.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const VA=new OP(RP),VTe=VA;function jW(t,e=VA){return gn((n,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+t,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}n.subscribe(ti(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function NP(t){return Ei((e,n)=>t<=n)}function HA(t){return null!=t&&"false"!=`${t}`}function UW(t,e=0){return function HTe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function zA(t){return Array.isArray(t)?t:[t]}function Ds(t){return null==t?"":"string"==typeof t?t:`${t}px`}function mh(t){return t instanceof ni?t.nativeElement:t}function zv(...t){const e=O0(t),n=S4(t),{args:i,keys:r}=t9(t);if(0===i.length)return us([],e);const s=new At(function GTe(t,e,n=Ge){return i=>{VW(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)VW(e,()=>{const l=us(t[c],e);let u=!1;l.subscribe(ti(i,h=>{s[c]=h,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>n9(r,o):Ge));return n?s.pipe(_A(n)):s}function VW(t,e,n){t?Fu(n,t,e):e()}const HW=new Set;let ap,WTe=(()=>{class t{constructor(n,i){this._platform=n,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):YTe}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&function $Te(t,e){if(!HW.has(t))try{ap||(ap=document.createElement("style"),e&&(ap.nonce=e),ap.setAttribute("type","text/css"),document.head.appendChild(ap)),ap.sheet&&(ap.sheet.insertRule(`@media ${t} {body{ }}`,0),HW.add(t))}catch(n){console.error(n)}}(n,this._nonce),this._matchMedia(n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho),ot(gf,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YTe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let qTe=(()=>{class t{constructor(n,i){this._mediaMatcher=n,this._zone=i,this._queries=new Map,this._destroySubject=new Qt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return zW(zA(n)).some(r=>this._registerQuery(r).mql.matches)}observe(n){let s=zv(zW(zA(n)).map(o=>this._registerQuery(o).observable));return s=Iv(s.pipe(Fr(1)),s.pipe(NP(1),jW(0))),s.pipe(Xt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);const i=this._mediaMatcher.matchMedia(n),s={observable:new At(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(ql(i),Xt(({matches:o})=>({query:n,matches:o})),Ea(this._destroySubject)),mql:i};return this._queries.set(n,s),s}static#e=this.\u0275fac=function(i){return new(i||t)(ot(WTe),ot(_n))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zW(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function WW(t,e,n){const i=$W(t,e);n=n.trim(),!i.some(r=>r.trim()===n)&&(i.push(n),t.setAttribute(e,i.join(" ")))}function PP(t,e,n){const i=$W(t,e);n=n.trim();const r=i.filter(s=>s!==n);r.length?t.setAttribute(e,r.join(" ")):t.removeAttribute(e)}function $W(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}class YW{constructor(e,n){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Qt,this._typeaheadSubscription=kt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this._pressedLetters=[],this.tabOut=new Qt,this.change=new Qt,e instanceof lf?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Jx(e)&&(this._effectRef=mV(()=>this._itemsChanged(e()),{injector:n}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Yi(n=>this._pressedLetters.push(n)),jW(e),Ei(()=>this._pressedLetters.length>0),Xt(()=>this._pressedLetters.join(""))).subscribe(n=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(n)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){const n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){const n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||gh(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const n=this._getItemsArray(),i="number"==typeof e?e:n.indexOf(e);this._activeItem=n[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const n=this._getItemsArray();for(let i=1;i<=n.length;i++){const r=(this._activeItemIndex+e*i+n.length)%n.length;if(!this._skipPredicateFn(n[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=n])return;this.setActiveItem(e)}}_getItemsArray(){return Jx(this._items)?this._items():this._items instanceof lf?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const n=e.indexOf(this._activeItem);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n)}}}class JTe extends YW{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let LP=(()=>{class t{constructor(n){this._platform=n}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return function ZTe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(n)&&"visible"===getComputedStyle(n).visibility}isTabbable(n){if(!this._platform.isBrowser)return!1;const i=function QTe(t){try{return t.frameElement}catch{return null}}(function aMe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(n));if(i&&(-1===XW(i)||!this.isVisible(i)))return!1;let r=n.nodeName.toLowerCase(),s=XW(n);return n.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function sMe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(n))&&("audio"===r?!!n.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||n.hasAttribute("controls")):n.tabIndex>=0)}isFocusable(n,i){return function oMe(t){return!function tMe(t){return function iMe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function eMe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function nMe(t){return function rMe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||qW(t))}(n)&&!this.isDisabled(n)&&(i?.ignoreVisibility||this.isVisible(n))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qW(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function XW(t){if(!qW(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class KW{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Fr(1)).subscribe(e)}}let JW=(()=>{class t{constructor(n,i,r){this._checker=n,this._ngZone=i,this._document=r}create(n,i=!1){return new KW(n,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(LP),ot(_n),ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QW(t){return 0===t.buttons||0===t.detail}function ZW(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const cMe=new Et("cdk-input-modality-detector-options"),lMe={ignoreKeys:[18,17,224,91,16]},qm=Uv({passive:!0,capture:!0});let uMe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(n,i,r,s){this._platform=n,this._mostRecentTarget=null,this._modality=new nr(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Zu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(QW(o)?"keyboard":"mouse"),this._mostRecentTarget=Zu(o))},this._onTouchstart=o=>{ZW(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Zu(o))},this._options={...lMe,...s},this.modalityDetected=this._modality.pipe(NP(1)),this.modalityChanged=this.modalityDetected.pipe(tp()),n.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,qm),r.addEventListener("mousedown",this._onMousedown,qm),r.addEventListener("touchstart",this._onTouchstart,qm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,qm),document.removeEventListener("mousedown",this._onMousedown,qm),document.removeEventListener("touchstart",this._onTouchstart,qm))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho),ot(_n),ot(ai),ot(cMe,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var GA=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(GA||{});const hMe=new Et("cdk-focus-monitor-default-options"),WA=Uv({passive:!0,capture:!0});let $A=(()=>{class t{constructor(n,i,r,s,o){this._ngZone=n,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Qt,this._rootNodeFocusAndBlurListener=a=>{for(let l=Zu(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||GA.IMMEDIATE}monitor(n,i=!1){const r=mh(n);if(!this._platform.isBrowser||1!==r.nodeType)return Zt();const s=function ATe(t){if(function ETe(){if(null==CP){const t=typeof document<"u"?document.head:null;CP=!(!t||!t.createShadowRoot&&!t.attachShadow)}return CP}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Qt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){const i=mh(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){const s=mh(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===GA.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused","touch"===i),n.classList.toggle("cdk-keyboard-focused","keyboard"===i),n.classList.toggle("cdk-mouse-focused","mouse"===i),n.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,this._detectionMode===GA.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const r=this._elementInfo.get(i),s=Zu(n);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(n,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,WA),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,WA)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ea(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,WA),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,WA),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((r,s)=>{(s===n||r.checkChildren&&s.contains(n))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(n){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName||n.disabled)return!1;const s=n.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(ot(_n),ot(Ho),ot(uMe),ot(ai,8),ot(hMe,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cp=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(cp||{});const t7="cdk-high-contrast-black-on-white",n7="cdk-high-contrast-white-on-black",FP="cdk-high-contrast-active";let fMe=(()=>{class t{constructor(n,i){this._platform=n,this._document=i,this._breakpointSubscription=Ot(qTe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return cp.NONE;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(n):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(n.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return cp.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return cp.BLACK_ON_WHITE}return cp.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(FP,t7,n7),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===cp.BLACK_ON_WHITE?n.add(FP,t7):i===cp.WHITE_ON_BLACK&&n.add(FP,n7)}}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho),ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pMe=new Et("cdk-dir-doc",{providedIn:"root",factory:function gMe(){return Ot(ai)}}),mMe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Gv=(()=>{class t{constructor(n){this.value="ltr",this.change=new hn,n&&(this.value=function _Me(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?mMe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(ot(pMe,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),i7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({})}return t})();const yMe=["text"],vMe=[[["mat-icon"]],"*"],bMe=["mat-icon","*"];function wMe(t,e){if(1&t&&Qi(0,"mat-pseudo-checkbox",1),2&t){const n=Lr();Un("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function xMe(t,e){1&t&&Qi(0,"mat-pseudo-checkbox",3),2&t&&Un("disabled",Lr().disabled)}function EMe(t,e){if(1&t&&(en(0,"span",4),Es(1),sn()),2&t){const n=Lr();Kt(),Il("(",n.group.label,")")}}const AMe=["mat-internal-form-field",""],SMe=["*"],TMe=new Et("mat-sanity-checks",{providedIn:"root",factory:function CMe(){return!0}});let o7=(()=>{class t{constructor(n,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!MP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}static#e=this.\u0275fac=function(i){return new(i||t)(ot(fMe),ot(TMe,8),ot(ai))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[i7,i7]})}return t})();class a7{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){const e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,n)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}}let NMe=(()=>{class t{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mc=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Mc||{});class PMe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Mc.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const c7=Uv({passive:!0,capture:!0});class LMe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Zu(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){const s=this._events.get(n);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,c7)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(i),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,c7)))}}const l7={enterDuration:225,exitDuration:150},u7=Uv({passive:!0,capture:!0}),d7=["mousedown","touchstart"],h7=["mouseup","mouseleave","touchend","touchcancel"];class YA{static#e=this._eventManager=new LMe;constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=mh(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...l7,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=i.radius||function kMe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),g=h.transitionDuration,m="none"===h.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,y=new PMe(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",y.state=Mc.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let w=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const O=()=>this._finishRippleTransition(y),V=()=>this._destroyRipple(y);u.addEventListener("transitionend",O),u.addEventListener("transitioncancel",V),w={onTransitionEnd:O,onTransitionCancel:V}}),this._activeRipples.set(y,w),(m||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===Mc.FADING_OUT||e.state===Mc.HIDDEN)return;const n=e.element,i={...l7,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Mc.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=mh(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,d7.forEach(i=>{YA._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{h7.forEach(n=>{this._triggerElement.addEventListener(n,this,u7)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Mc.FADING_IN?this._startFadeOutTransition(e):e.state===Mc.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Mc.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Mc.HIDDEN,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=QW(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ZW(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Mc.VISIBLE||e.config.terminateOnPointerUp&&e.state===Mc.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(d7.forEach(n=>YA._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&h7.forEach(n=>e.removeEventListener(n,this,u7)))}}const BMe=new Et("mat-ripple-global-options");let f7=(()=>{class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,i,r,s,o){this._elementRef=n,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new YA(this,i,n,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,r){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...n})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(_n),nt(Ho),nt(BMe,8),nt(Ha,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Vi("mat-ripple-unbounded",r.unbounded)},inputs:{color:[$t.None,"matRippleColor","color"],unbounded:[$t.None,"matRippleUnbounded","unbounded"],centered:[$t.None,"matRippleCentered","centered"],radius:[$t.None,"matRippleRadius","radius"],animation:[$t.None,"matRippleAnimation","animation"],disabled:[$t.None,"matRippleDisabled","disabled"],trigger:[$t.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return t})(),jMe=(()=>{class t{constructor(n){this._animationMode=n,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Ha,8))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&Vi("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[ls],decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})();const p7=new Et("MAT_OPTION_PARENT_COMPONENT"),g7=new Et("MatOptgroup");let UMe=0;class m7{constructor(e,n=!1){this.source=e,this.isUserInput=n}}let _7=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(n){this._disabled=n}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(n,i,r,s){this._element=n,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+UMe++,this.onSelectionChange=new hn,this._stateChanges=new Qt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(13===n.keyCode||32===n.keyCode)&&!gh(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new m7(this,n))}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(oo),nt(p7,8),nt(g7,8))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(1&i&&js(yMe,7),2&i){let s;Hi(s=zi())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&oi("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(Hd("id",r.id),_r("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Vi("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[$t.HasDecoratorInputTransform,"disabled","disabled",vr]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Gc,ls],ngContentSelectors:bMe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){1&i&&(Zo(vMe),vi(0,wMe,1,2,"mat-pseudo-checkbox",1),Ci(1),en(2,"span",2,0),Ci(4,1),sn(),vi(5,xMe,1,1,"mat-pseudo-checkbox",3)(6,EMe,2,1,"span",4),Qi(7,"div",5)),2&i&&(xs(0,r.multiple?0:-1),Kt(5),xs(5,r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),Kt(),xs(6,r.group&&r.group._inert?6:-1),Kt(),Un("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[jMe,f7],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),zMe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){2&i&&Vi("mdc-form-field--align-end","before"===r.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[ls],attrs:AMe,ngContentSelectors:SMe,decls:1,vars:0,template:function(i,r){1&i&&(Zo(),Ci(0))},styles:[".mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-form-field{font-family:var(--mdc-form-field-label-text-font);line-height:var(--mdc-form-field-label-text-line-height);font-size:var(--mdc-form-field-label-text-size);font-weight:var(--mdc-form-field-label-text-weight);letter-spacing:var(--mdc-form-field-label-text-tracking);color:var(--mdc-form-field-label-text-color)}.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}"],encapsulation:2,changeDetection:0})}return t})();const GMe=["addListener","removeListener"],WMe=["addEventListener","removeEventListener"],$Me=["on","off"];function lp(t,e,n,i){if(Ze(n)&&(i=n,n=void 0),i)return lp(t,e,n).pipe(_A(i));const[r,s]=function XMe(t){return Ze(t.addEventListener)&&Ze(t.removeEventListener)}(t)?WMe.map(o=>a=>t[o](e,a,n)):function YMe(t){return Ze(t.addListener)&&Ze(t.removeListener)}(t)?GMe.map(y7(t,e)):function qMe(t){return Ze(t.on)&&Ze(t.off)}(t)?$Me.map(y7(t,e)):[];if(!r&&BD(t))return Ts(o=>lp(o,e,n))(Cs(t));if(!r)throw new TypeError("Invalid event target");return new At(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function y7(t,e){return n=>i=>t[n](e,i)}const $v={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=$v;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(s=>{n=void 0,t(s)});return new kt(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=$v;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=$v;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class JMe extends OP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class KMe extends RP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=$v.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&($v.cancelAnimationFrame(n),e._scheduled=void 0)}});let kP,ZMe=1;const qA={};function v7(t){return t in qA&&(delete qA[t],!0)}const eIe={setImmediate(t){const e=ZMe++;return qA[e]=!0,kP||(kP=Promise.resolve()),kP.then(()=>v7(e)&&t()),e},clearImmediate(t){v7(t)}},{setImmediate:tIe,clearImmediate:nIe}=eIe,XA={setImmediate(...t){const{delegate:e}=XA;return(e?.setImmediate||tIe)(...t)},clearImmediate(t){const{delegate:e}=XA;return(e?.clearImmediate||nIe)(t)},delegate:void 0};new class rIe extends OP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class iIe extends RP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=XA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(XA.clearImmediate(n),e._scheduled=void 0)}});function BP(t=0,e,n=VTe){let i=-1;return null!=e&&(A4(e)?n=e:i=e),new At(r=>{let s=function aIe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function b7(t,e=VA){return function oIe(t){return gn((e,n)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(ti(n,l=>{i=!0,r=l,s||Cs(t(l)).subscribe(s=ti(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}(()=>BP(t,e))}let lIe=(()=>{class t{constructor(n,i,r){this._ngZone=n,this._platform=i,this._scrolled=new Qt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new At(i=>{this._globalSubscription||this._addGlobalListener();const r=n>0?this._scrolled.pipe(b7(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Zt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){const r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(Ei(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(n){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,n)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,i){let r=mh(i),s=n.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>lp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(_n),ot(Ho),ot(ai,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jP=(()=>{class t{constructor(n,i,r){this._platform=n,this._change=new Qt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,i=this._getWindow(),r=n.documentElement,s=r.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(b7(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho),ot(_n),ot(ai,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class UP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class VP extends UP{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class KA extends UP{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class dIe extends UP{constructor(e){super(),this.element=e instanceof ni?e.nativeElement:e}}class HP{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof VP?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof KA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof dIe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class hIe extends HP{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ui.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let JA=(()=>{class t extends HP{constructor(n,i,r){super(),this._componentFactoryResolver=n,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new hn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);const i=null!=n.viewContainerRef?n.viewContainerRef:this._viewContainerRef,s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),o=i.createComponent(s,i.length,n.injector||i.injector,n.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(nt(Fd),nt(Fo),nt(ai))};static#t=this.\u0275dir=Yt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[$t.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[gi]})}return t})();const w7=xTe();class fIe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ds(-this._previousScrollPosition.left),e.style.top=Ds(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),w7&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),w7&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class pIe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ei(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class x7{enable(){}disable(){}attach(){}}function zP(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function E7(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class gIe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();zP(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mIe=(()=>{class t{constructor(n,i,r,s){this._scrollDispatcher=n,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new x7,this.close=o=>new pIe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new fIe(this._viewportRuler,this._document),this.reposition=o=>new gIe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||t)(ot(lIe),ot(jP),ot(_n),ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class GP{constructor(e){if(this.scrollStrategy=new x7,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class _Ie{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let A7=(()=>{class t{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yIe=(()=>{class t extends A7{constructor(n,i){super(n),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai),ot(_n,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vIe=(()=>{class t extends A7{constructor(n,i,r){super(n),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Zu(s)},this._clickListener=s=>{const o=Zu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(n){if(super.add(n),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai),ot(Ho),ot(_n,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QA=(()=>{class t{constructor(n,i){this._platform=i,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||MP()){const r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(n),MP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai),ot(Ho))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class ZA{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Qt,this._attachments=new Qt,this._detachments=new Qt,this._locationChanges=kt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Qt,this._outsidePointerEvents=new Qt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ds(this._config.width),e.height=Ds(this._config.height),e.minWidth=Ds(this._config.minWidth),e.minHeight=Ds(this._config.minHeight),e.maxWidth=Ds(this._config.maxWidth),e.maxHeight=Ds(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=zA(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ea(Jc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const S7="cdk-overlay-connected-position-bounding-box",bIe=/([A-Za-z%]+)$/;class wIe{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qt,this._resizeSubscription=kt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(S7),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&up(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(S7),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return n.left<0&&(r-=n.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r,s;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){const s=T7(n);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,f,g),w=m*y;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,s=i.right-n.x,o=C7(this._overlayRef.getConfig().minHeight),a=C7(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=T7(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function xIe(t,e){return t===e||t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,i)){const r=new _Ie(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===n.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)f=i.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ds(i.height),r.top=Ds(i.top),r.bottom=Ds(i.bottom),r.width=Ds(i.width),r.left=Ds(i.left),r.right=Ds(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ds(s)),o&&(r.maxWidth=Ds(o))}this._lastBoundingBoxSize=i,up(this._boundingBox.style,r)}_resetBoundingBoxStyles(){up(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){up(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();up(i,this._getExactOverlayY(n,e,u)),up(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Ds(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ds(o.maxWidth):s&&(i.maxWidth="")),up(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ds(s.y),r}_getExactOverlayX(e,n,i){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ds(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:E7(e,i),isOriginOutsideView:zP(e,i),isOverlayClipped:E7(n,i),isOverlayOutsideView:zP(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&zA(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ni)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function up(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function C7(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(bIe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function T7(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const M7="cdk-global-overlay-wrapper";class EIe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(M7),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let g="",m="",y="";c?y="flex-start":"center"===u?(y="center",f?m=h:g=h):f?"left"===u||"end"===u?(y="flex-end",g=h):("right"===u||"start"===u)&&(y="flex-start",m=h):"left"===u||"start"===u?(y="flex-start",g=h):("right"===u||"end"===u)&&(y="flex-end",m=h),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,n.justifyContent=y,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(M7),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let AIe=(()=>{class t{constructor(n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new EIe}flexibleConnectedTo(n){return new wIe(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(jP),ot(ai),ot(Ho),ot(QA))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SIe=0,il=(()=>{class t{constructor(n,i,r,s,o,a,c,l,u,h,f,g){this.scrollStrategies=n,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(n){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new GP(n);return o.direction=o.direction||this._directionality.value,new ZA(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(n){const i=this._document.createElement("div");return i.id="cdk-overlay-"+SIe++,i.classList.add("cdk-overlay-pane"),n.appendChild(i),i}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(Ou)),new hIe(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(mIe),ot(QA),ot(Fd),ot(AIe),ot(yIe),ot(Ui),ot(_n),ot(ai),ot(Gv),ot(Nf),ot(vIe),ot(Ha,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Aa=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Aa||{});function Yv(t,e){return{type:Aa.Trigger,name:t,definitions:e,options:{}}}function _h(t,e=null){return{type:Aa.Animate,styles:e,timings:t}}function WP(t,e=null){return{type:Aa.Group,steps:t,options:e}}function Sa(t){return{type:Aa.Style,styles:t,offset:null}}function yh(t,e,n){return{type:Aa.State,name:t,styles:e,options:n}}function dp(t,e,n=null){return{type:Aa.Transition,expr:t,animation:e,options:n}}function qv(t){return new At(e=>{Cs(t()).subscribe(e)})}class OIe{constructor(e){this._box=e,this._destroyed=new Qt,this._resizeSubject=new Qt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new At(n=>{const i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Ei(n=>n.some(i=>i.target===e)),ia({bufferSize:1,refCount:!0}),Ea(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let NIe=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=Ot(_n)}ngOnDestroy(){for(const[,n]of this._observers)n.destroy();this._observers.clear()}observe(n,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new OIe(r)),this._observers.get(r).observe(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const PIe=["notch"],LIe=["matFormFieldNotchedOutline",""],FIe=["*"],kIe=["textField"],BIe=["iconPrefixContainer"],jIe=["textPrefixContainer"],UIe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VIe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function HIe(t,e){1&t&&Qi(0,"span",17)}function zIe(t,e){if(1&t&&(en(0,"label",16),Ci(1,1),vi(2,HIe,1,0,"span",17),sn()),2&t){const n=Lr(2);Un("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),_r("for",n._control.id),Kt(2),xs(2,!n.hideRequiredMarker&&n._control.required?2:-1)}}function GIe(t,e){1&t&&vi(0,zIe,3,5,"label",16),2&t&&xs(0,Lr()._hasFloatingLabel()?0:-1)}function WIe(t,e){1&t&&Qi(0,"div",5)}function $Ie(t,e){}function YIe(t,e){1&t&&vi(0,$Ie,0,0,"ng-template",11),2&t&&(Lr(2),Un("ngTemplateOutlet",Df(1)))}function qIe(t,e){if(1&t&&(en(0,"div",7),vi(1,YIe,1,1,null,11),sn()),2&t){const n=Lr();Un("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),Kt(),xs(1,n._forceDisplayInfixLabel()?-1:1)}}function XIe(t,e){1&t&&(en(0,"div",8,2),Ci(2,2),sn())}function KIe(t,e){1&t&&(en(0,"div",9,3),Ci(2,3),sn())}function JIe(t,e){}function QIe(t,e){1&t&&vi(0,JIe,0,0,"ng-template",11),2&t&&(Lr(),Un("ngTemplateOutlet",Df(1)))}function ZIe(t,e){1&t&&(en(0,"div",12),Ci(1,4),sn())}function eDe(t,e){1&t&&(en(0,"div",13),Ci(1,5),sn())}function tDe(t,e){1&t&&Qi(0,"div",14)}function nDe(t,e){1&t&&(en(0,"div",18),Ci(1,6),sn()),2&t&&Un("@transitionMessages",Lr()._subscriptAnimationState)}function iDe(t,e){if(1&t&&(en(0,"mat-hint",20),Es(1),sn()),2&t){const n=Lr(2);Un("id",n._hintLabelId),Kt(),qc(n.hintLabel)}}function rDe(t,e){if(1&t&&(en(0,"div",19),vi(1,iDe,2,2,"mat-hint",20),Ci(2,7),Qi(3,"div",21),Ci(4,8),sn()),2&t){const n=Lr();Un("@transitionMessages",n._subscriptAnimationState),Kt(),xs(1,n.hintLabel?1:-1)}}let R7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["mat-label"]],standalone:!0})}return t})();const sDe=new Et("MatError");let oDe=0,O7=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+oDe++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(Hd("id",r.id),_r("align",null),Vi("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"},standalone:!0})}return t})();const N7=new Et("MatPrefix");let aDe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[$t.None,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[wi([{provide:N7,useExisting:t}])]})}return t})();const P7=new Et("MatSuffix");let cDe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[$t.None,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[wi([{provide:P7,useExisting:t}])]})}return t})();const L7=new Et("FloatingLabelParent");let F7=(()=>{class t{get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(n){this._elementRef=n,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Ot(NIe),this._ngZone=Ot(_n),this._parent=Ot(L7),this._resizeSubscription=new kt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function lDe(t){if(null!==t.offsetParent)return t.scrollWidth;const n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);const i=n.scrollWidth;return n.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni))};static#t=this.\u0275dir=Yt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Vi("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return t})();const k7="mdc-line-ripple--active",eS="mdc-line-ripple--deactivating";let B7=(()=>{class t{constructor(n,i){this._elementRef=n,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(eS);"opacity"===r.propertyName&&o&&s.remove(k7,eS)},i.runOutsideAngular(()=>{n.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const n=this._elementRef.nativeElement.classList;n.remove(eS),n.add(k7)}deactivate(){this._elementRef.nativeElement.classList.add(eS)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(_n))};static#t=this.\u0275dir=Yt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return t})(),j7=(()=>{class t{constructor(n,i){this._elementRef=n,this._ngZone=i,this.open=!1}ngAfterViewInit(){const n=this._elementRef.nativeElement.querySelector(".mdc-floating-label");n?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){this._notch.nativeElement.style.width=this.open&&n?`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(_n))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&js(PIe,5),2&i){let s;Hi(s=zi())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Vi("mdc-notched-outline--notched",r.open)},inputs:{open:[$t.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[ls],attrs:LIe,ngContentSelectors:FIe,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(Zo(),Qi(0,"div",1),en(1,"div",2,0),Ci(3),sn(),Qi(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const uDe={transitionMessages:Yv("transitionMessages",[yh("enter",Sa({opacity:1,transform:"translateY(0%)"})),dp("void => enter",[Sa({opacity:0,transform:"translateY(-5px)"}),_h("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let U7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t})}return t})();const $P=new Et("MatFormField"),dDe=new Et("MAT_FORM_FIELD_DEFAULT_OPTIONS");let V7=0,pDe=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=HA(n)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}constructor(n,i,r,s,o,a,c,l){this._elementRef=n,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+V7++,this._hintLabelId="mat-mdc-hint-"+V7++,this._subscriptAnimationState="",this._destroyed=new Qt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${n.controlType}`),n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe(Ea(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Jc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ea(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Ea(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),r&&n.push(r.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const n=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(n.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;n.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(oo),nt(_n),nt(Gv),nt(Ho),nt(dDe,8),nt(Ha,8),nt(ai))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(yc(s,R7,5),yc(s,R7,7),yc(s,U7,5),yc(s,N7,5),yc(s,P7,5),yc(s,sDe,5),yc(s,O7,5)),2&i){let o;Hi(o=zi())&&(r._labelChildNonStatic=o.first),Hi(o=zi())&&(r._labelChildStatic=o.first),Hi(o=zi())&&(r._formFieldControl=o.first),Hi(o=zi())&&(r._prefixChildren=o),Hi(o=zi())&&(r._suffixChildren=o),Hi(o=zi())&&(r._errorChildren=o),Hi(o=zi())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(js(kIe,5),js(BIe,5),js(jIe,5),js(F7,5),js(j7,5),js(B7,5)),2&i){let s;Hi(s=zi())&&(r._textField=s.first),Hi(s=zi())&&(r._iconPrefixContainer=s.first),Hi(s=zi())&&(r._textPrefixContainer=s.first),Hi(s=zi())&&(r._floatingLabel=s.first),Hi(s=zi())&&(r._notchedOutline=s.first),Hi(s=zi())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Vi("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[wi([{provide:$P,useExisting:t},{provide:L7,useExisting:t}]),ls],ngContentSelectors:VIe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(1&i){const s=Wa();Zo(UIe),vi(0,GIe,1,1,"ng-template",null,0,rU),en(2,"div",4,1),oi("click",function(a){return $i(s),Li(r._control.onContainerClick(a))}),vi(4,WIe,1,0,"div",5),en(5,"div",6),vi(6,qIe,2,2,"div",7)(7,XIe,3,0,"div",8)(8,KIe,3,0,"div",9),en(9,"div",10),vi(10,QIe,1,1,null,11),Ci(11),sn(),vi(12,ZIe,2,0,"div",12)(13,eDe,2,0,"div",13),sn(),vi(14,tDe,1,0,"div",14),sn(),en(15,"div",15),vi(16,nDe,2,1)(17,rDe,5,2),sn()}if(2&i){let s;Kt(2),Vi("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),Kt(2),xs(4,r._hasOutline()||r._control.disabled?-1:4),Kt(2),xs(6,r._hasOutline()?6:-1),Kt(),xs(7,r._hasIconPrefix?7:-1),Kt(),xs(8,r._hasTextPrefix?8:-1),Kt(2),xs(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),Kt(2),xs(12,r._hasTextSuffix?12:-1),Kt(),xs(13,r._hasIconSuffix?13:-1),Kt(),xs(14,r._hasOutline()?-1:14),Kt(),Vi("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),Kt(),xs(16,"error"===(s=r._getDisplayedMessages())?16:"hint"===s?17:-1)}},dependencies:[F7,j7,kV,B7,O7],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[uDe.transitionMessages]},changeDetection:0})}return t})();function YP(t){return Xt(()=>t)}function G7(t,e){return e?n=>Iv(e.pipe(Fr(1),function gDe(){return gn((t,e)=>{t.subscribe(ti(e,xt))})}()),n.pipe(G7(t))):Ts((n,i)=>Cs(t(n,i)).pipe(Fr(1),YP(n)))}function W7(t,e=VA){const n=BP(t,e);return G7(()=>n)}const mDe=["panel"],_De=["*"];function yDe(t,e){if(1&t){const n=Wa();en(0,"div",1,0),oi("@panelAnimation.done",function(r){return $i(n),Li(Lr()._animationDone.next(r))}),Ci(2),sn()}if(2&t){const n=e.id,i=Lr();Un("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),_r("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(n))}}const vDe=Yv("panelAnimation",[yh("void, hidden",Sa({opacity:0,transform:"scaleY(0.8)"})),dp(":enter, hidden => visible",[WP([_h("0.03s linear",Sa({opacity:1})),_h("0.12s cubic-bezier(0, 0, 0.2, 1)",Sa({transform:"scaleY(1)"}))])]),dp(":leave, visible => hidden",[_h("0.075s linear",Sa({opacity:0}))])]);let bDe=0;class wDe{constructor(e,n){this.source=e,this.option=n}}const $7=new Et("mat-autocomplete-default-options",{providedIn:"root",factory:function xDe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let EDe=(()=>{class t{get isOpen(){return this._isOpen&&this.showPanel}_setColor(n){this._color=n,this._setThemeClasses(this._classList)}set classList(n){this._classList=n&&n.length?function zTe(t,e=/\s+/){const n=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(e);for(const r of i){const s=`${r}`.trim();s&&n.push(s)}}return n}(n).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(n){this._hideSingleSelectionIndicator=n,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const n of this.options)n._changeDetectorRef.markForCheck()}constructor(n,i,r,s){this._changeDetectorRef=n,this._elementRef=i,this._defaults=r,this._activeOptionChanges=kt.EMPTY,this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new hn,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new hn,this.opened=new hn,this.closed=new hn,this.optionActivated=new hn,this._classList={},this.id="mat-autocomplete-"+bDe++,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!r.autoActiveFirstOption,this.autoSelectActiveOption=!!r.autoSelectActiveOption,this.requireSelection=!!r.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new JTe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(n=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[n]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(n){this.panel&&(this.panel.nativeElement.scrollTop=n)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(n){const i=new wDe(this,n);this.optionSelected.emit(i)}_getPanelAriaLabelledby(n){return this.ariaLabel?null:this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_setVisibilityClasses(n){n[this._visibleClass]=this.showPanel,n[this._hiddenClass]=!this.showPanel}_setThemeClasses(n){n["mat-primary"]="primary"===this._color,n["mat-warn"]="warn"===this._color,n["mat-accent"]="accent"===this._color}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||t)(nt(oo),nt(ni),nt($7),nt(Ho))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(yc(s,_7,5),yc(s,g7,5)),2&i){let o;Hi(o=zi())&&(r.options=o),Hi(o=zi())&&(r.optionGroups=o)}},viewQuery:function(i,r){if(1&i&&(js(mc,7),js(mDe,5)),2&i){let s;Hi(s=zi())&&(r.template=s.first),Hi(s=zi())&&(r.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[$t.None,"aria-label","ariaLabel"],ariaLabelledby:[$t.None,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[$t.HasDecoratorInputTransform,"autoActiveFirstOption","autoActiveFirstOption",vr],autoSelectActiveOption:[$t.HasDecoratorInputTransform,"autoSelectActiveOption","autoSelectActiveOption",vr],requireSelection:[$t.HasDecoratorInputTransform,"requireSelection","requireSelection",vr],panelWidth:"panelWidth",disableRipple:[$t.HasDecoratorInputTransform,"disableRipple","disableRipple",vr],classList:[$t.None,"class","classList"],hideSingleSelectionIndicator:[$t.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",vr]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[wi([{provide:p7,useExisting:t}]),Gc,ls],ngContentSelectors:_De,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"]],template:function(i,r){1&i&&(Zo(),vi(0,yDe,3,5,"ng-template"))},dependencies:[OV],styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[vDe]},changeDetection:0})}return t})();const ADe={provide:Tc,useExisting:$n(()=>q7),multi:!0},Y7=new Et("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const t=Ot(il);return()=>t.scrollStrategies.reposition()}});let q7=(()=>{class t{constructor(n,i,r,s,o,a,c,l,u,h,f){this._element=n,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=o,this._dir=c,this._formField=l,this._document=u,this._viewportRuler=h,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=kt.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Qt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=qv(()=>{const g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(ql(g),Tr(()=>Jc(...g.map(m=>m.onSelectionChange)))):this._zone.onStable.pipe(Fr(1),Tr(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(27===g.keyCode&&!gh(g)||38===g.keyCode&&gh(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){const n=this._getWindow();typeof n<"u"&&this._zone.runOutsideAngular(()=>n.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(n){n.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const n=this._getWindow();typeof n<"u"&&n.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&PP(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Jc(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Ei(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Ei(()=>this._overlayAttached)):Zt()).pipe(Xt(n=>n instanceof m7?n:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Jc(lp(this._document,"click"),lp(this._document,"auxclick"),lp(this._document,"touchend")).pipe(Ei(n=>{const i=Zu(n),r=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(n){Promise.resolve(null).then(()=>this._assignOptionValue(n))}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._element.nativeElement.disabled=n}_handleKeydown(n){const i=n.keyCode,r=gh(n);if(27===i&&!r&&n.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),n.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(n):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(n){let i=n.target,r=i.value;if("number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r){if(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&r!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===n.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(n=!1){this._formField&&"auto"===this._formField.floatLabel&&(n?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return Jc(this._zone.onStable.pipe(Fr(1)),this.autocomplete.options.changes.pipe(Yi(()=>this._positionStrategy.reapplyLastPosition()),W7(0))).pipe(Tr(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),Fr(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(n){const i=this.autocomplete;return i&&i.displayWith?i.displayWith(n):n}_assignOptionValue(n){const i=this._getDisplayValue(n);null==n&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(n){this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}_setValueAndClose(n){const i=this.autocomplete,r=n?n.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Fr(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(n,i){this.autocomplete?.options?.forEach(r=>{r!==n&&r.selected&&r.deselect(i)})}_openPanelInternal(n=this._element.nativeElement.value){this._attachOverlay(n),this._floatLabel(),this._trackedModal&&WW(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(n){let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new KA(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=n,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const r=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&r!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const n=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=n.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=n.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new GP({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const n=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(n),this._positionStrategy=n,n}_setStrategyPositions(n){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let o;o="above"===this.position?s:"below"===this.position?i:[...i,...s],n.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const n=this.autocomplete;if(n.autoActiveFirstOption){let i=-1;for(let r=0;r<n.options.length;r++)if(!n.options.get(r).disabled){i=r;break}n._keyManager.setActiveItem(i)}else n._keyManager.setActiveItem(-1)}_canOpen(){const n=this._element.nativeElement;return!n.readOnly&&!n.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(n){const i=this.autocomplete,r=function VMe(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),s=0;for(let o=0;o<t+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(n,i.options,i.optionGroups);if(0===n&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[n];if(s){const o=s._getHostElement(),a=function HMe(t,e,n,i){return t<n?t:t+e>n+i?Math.max(0,t-i+e):n}(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const n=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!n)return;const i=this.autocomplete.id;this._trackedModal&&PP(this._trackedModal,"aria-owns",i),WW(n,"aria-owns",i),this._trackedModal=n}_clearFromModal(){this._trackedModal&&(PP(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(il),nt(Fo),nt(_n),nt(oo),nt(Y7),nt(Gv,8),nt($P,9),nt(ai,8),nt(jP),nt($7,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&oi("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&i&&_r("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[$t.None,"matAutocomplete","autocomplete"],position:[$t.None,"matAutocompletePosition","position"],connectedTo:[$t.None,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[$t.None,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[$t.HasDecoratorInputTransform,"matAutocompleteDisabled","autocompleteDisabled",vr]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[wi([ADe]),Gc,Cr]})}return t})();const X7=Uv({passive:!0});let CDe=(()=>{class t{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return ko;const i=mh(n),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Qt,o="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===c.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,X7),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,X7)}}),s}stopMonitoring(n){const i=mh(n),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ho),ot(_n))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const TDe=new Et("MAT_INPUT_VALUE_ACCESSOR"),MDe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let IDe=0,DDe=(()=>{class t{get disabled(){return this._disabled}set disabled(n){this._disabled=HA(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ICe.required)??!1}set required(n){this._required=HA(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&LW().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=HA(n)}get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}constructor(n,i,r,s,o,a,c,l,u,h){this._elementRef=n,this._platform=i,this.ngControl=r,this._autofillMonitor=l,this._formField=h,this._uid="mat-input-"+IDe++,this.focused=!1,this.stateChanges=new Qt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>LW().has(m)),this._iOSKeyupListener=m=>{const y=m.target;!y.value&&0===y.selectionStart&&0===y.selectionEnd&&(y.setSelectionRange(1,1),y.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=c||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new a7(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){const n=this._getPlaceholder();if(n!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=n,n?i.setAttribute("placeholder",n):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){MDe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(Ho),nt(Qu,10),nt(kv,8),nt(kA,8),nt(NMe),nt(TDe,10),nt(CDe),nt(_n),nt($P,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&oi("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(Hd("id",r.id)("disabled",r.disabled)("required",r.required),_r("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Vi("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[$t.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[wi([{provide:U7,useExisting:t}]),Cr]})}return t})();function K7(t,e){return t>=0&&t<e?t:t>=e?e:t+e<0?0:t+e}function ODe(t,e){if(1&t&&(en(0,"span"),Es(1),sn()),2&t){const n=e.$implicit;(function Wc(t){Yc(L3,_Z,t,!1)})(n.styles),Ru(n.classes),Kt(),Il(" ",n.text,"\n")}}let NDe=(()=>{class t{constructor(){this.clsName="ccf-decorated-text",this.segments=[]}ngOnChanges(n){("text"in n||"decorations"in n)&&(this.segments=this.createSegments())}createSegments(){const{text:n}=this;if(!n)return[this.makeUndecoratedSegment(n)];const i=this.getNormalizedDecorations();if(0===i.length)return[this.makeUndecoratedSegment(n)];const r=this.createStackOps(i),s=[];let o=[],a=0;0===r[0].index&&(o=this.updateStack(o,r.shift()));for(const c of r)s.push(this.makeDecoratedSegment(n.slice(a,c.index),o)),a=c.index,o=this.updateStack(o,c);return a!==n.length&&s.push(this.makeDecoratedSegment(n.slice(a),o)),s}createStackOps(n){const i={},r=s=>i[s]??={index:s,added:[],removed:[]};for(const s of n)r(s.start).added.push(s),r(s.end).removed.push(s);return Object.entries(i).sort((s,o)=>+s[0]-+o[0]).map(s=>s[1])}updateStack(n,i){return n.filter(r=>!i.removed.includes(r)).concat(i.added)}getNormalizedDecorations(){const{decorations:n=[],text:{length:i}}=this;return n.map(r=>function RDe(t,e){return{start:K7(t.start??0,e),end:K7(t.end??e,e),classes:t.classes??[],styles:t.styles??{}}}(r,i)).filter(r=>r.start<i&&r.start<r.end)}makeUndecoratedSegment(n){return{text:n,classes:[],styles:{}}}makeDecoratedSegment(n,i){return{text:n,classes:i.reduce((o,a)=>o.concat(a.classes),[]),styles:i.reduce((o,a)=>({...o,...a.styles}),{})}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-decorated-text"]],hostVars:2,hostBindings:function(i,r){2&i&&Ru(r.clsName)},inputs:{text:"text",decorations:"decorations"},features:[Cr],decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&vi(0,ODe,2,5,"span",0),2&i&&Un("ngForOf",r.segments)},dependencies:[cm],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})}return t})();const PDe=[[["","matPrefix",""]],[["","matSuffix",""]]],LDe=["[matPrefix]","[matSuffix]"];function FDe(t,e){if(1&t&&(en(0,"mat-option"),Qi(1,"ccf-decorated-text",8),sn()),2&t){const n=e.$implicit;Kt(),Un("text",n.label)("decorations",n.decorations)}}const kDe=new Et("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});class tS{get value(){return this.controller.value}set value(e){this.controller.setValue(e,{emitEvent:!1})}constructor(e){this.defaultMaxOptions=e,this.clsName="ccf-text-search",this.placeholder="Search...",this.optionSelected=new hn,this.controller=new $Ce,this.options=this.controller.valueChanges.pipe(ql(""),tp(),Tr(this.getOptions)),this.valueChange=this.controller.valueChanges}getOptions(e){var n=this;return D(function*(){const{autoCompleter:i,maxOptions:r=n.defaultMaxOptions}=n;return!i||r<1?[]:function bTe(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;t.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):n?i(e.defaultValue):r(new Bv)}})})}(us(i(e,r)).pipe(Fr(1),Xt(o=>o.length<=r?o:o.slice(0,r))))})()}optionDisplay(e){return e?.label??""}optionId(e,n){return n.id}static#e=this.\u0275fac=function(n){return new(n||tS)(nt(kDe))};static#t=this.\u0275cmp=Zn({type:tS,selectors:[["ccf-text-search"]],hostVars:2,hostBindings:function(n,i){2&n&&Ru(i.clsName)},inputs:{placeholder:"placeholder",value:"value",maxOptions:"maxOptions",autoCompleter:"autoCompleter"},outputs:{valueChange:"valueChange",optionSelected:"optionSelected"},ngContentSelectors:LDe,decls:11,vars:8,consts:[["auto","matAutocomplete"],[1,"form"],["appearance","outline",1,"form-field"],["matPrefix",""],["matInput","","type","search",1,"input",3,"placeholder","formControl","matAutocomplete"],[1,"autocomplete",3,"optionSelected","displayWith"],[4,"ngFor","ngForOf","ngForTrackBy"],["matSuffix",""],[3,"text","decorations"]],template:function(n,i){if(1&n){const r=Wa();Zo(PDe),en(0,"form",1)(1,"mat-form-field",2),u0(2,3),Ci(3),d0(),Qi(4,"input",4),en(5,"mat-autocomplete",5,0),oi("optionSelected",function(o){return $i(r),Li(i.optionSelected.emit(o.option.value))}),vi(7,FDe,2,2,"mat-option",6),qr(8,"async"),sn(),u0(9,7),Ci(10,1),d0(),sn()()}if(2&n){const r=Df(6);Kt(4),Un("placeholder",i.placeholder)("formControl",i.controller)("matAutocomplete",r),Kt(),Un("displayWith",i.optionDisplay),Kt(2),Un("ngForOf",Xr(8,6,i.options))("ngForTrackBy",i.optionId)}},dependencies:[cm,_W,TA,iW,rW,kv,yP,EDe,_7,q7,pDe,aDe,cDe,DDe,NDe,C0],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex{align-items:center}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{height:3rem;border:none}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{top:0;border:none}"],changeDetection:0})}Hn([Gf.oI,jt("design:type",Function),jt("design:paramtypes",[String]),jt("design:returntype",Promise)],tS.prototype,"getOptions",null),S(1123);const J7=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name));function Xm(t){return!0===t}function Ca(t){return null===t||typeof t>"u"}function zo(t){return!Ca(t)}function qP(t){return!!t}function n$(t){return Ca(t)?t:JSON.parse(JSON.stringify(t))}function i$(t){return zo(t)&&"object"==typeof t&&function XP(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}J7.filter(t=>!0!==t.disabled);const cRe="NGXS_COMPUTED_OPTION",o$="NGXS_DATA_META",KP="NGXS_META",a$="NGXS_ARGUMENT_REGISTRY_META";function c$(t=uRe){return gn((e,n)=>{let i=!1;e.subscribe(ti(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function uRe(){return new Bv}let l$=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new nr(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(ot(Ju,8))},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})();function Kv(t){return t[o$]}let Ic=(()=>{class t{constructor(n,i,r){t.store=n.get(Ju),t.ngZone=n.get(_n),t.factory=i,t.context=r,t.computed=n.get(l$),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(ot(Ui),ot(Z5),ot(e9))},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})();class hs{constructor(){hs.statesCachedMeta.clear()}static createStateContext(e){return Ic.context.createStateContext(e)}static ensureMappedState(e){if(Ca(Ic.factory)||Ca(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(zo(e.name)?hs.statesCachedMeta.get(e.name):null)||hs.ensureMeta(e)}static getRepositoryByInstance(e){const i=Kv(hs.getStateClassByInstance(e))??null;if(Ca(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=hs.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=n?.getPayloadTypeByIndex(s);zo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=hs.createPayload(n,i),s=function fRe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new s(r)}static ensureMeta(e){const n=zo(e.name)?Ic.factory.states?.find(i=>i.name===e.name):null;return zo(n)&&zo(e.name)&&hs.statesCachedMeta.set(e.name,n),n}}hs.statesCachedMeta=new Map,hs.\u0275fac=function(e){return new(e||hs)},hs.\u0275prov=It({token:hs,factory:hs.\u0275fac}),new class pRe{constructor(){this.subject=new Pf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function ed(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Ei((r,s)=>t(r,s,i)):Ge,Fr(1),n?Hm(e):c$(()=>new Bv))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Pf(1)}};class mRe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${zo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function u$(t){return t.NGXS_OPTIONS_META??{name:""}}function d$(t){const e=u$(t),n=e.children??[],r=n$(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(i$(r))return function _Re(t,e){return e.reduce((n,i)=>{const r=u$(i);if(function Xv(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=d$(i),n},t??{})}(r,n);throw new mRe(r)}return r}function h$(){return`__${cRe}__`}function f$(t){return t[h$()]??null}function p$(){return Ic?.computed?.sequenceValue??0}function bRe(t){let e=!1;return hh(t)&&(e=!0),e}function JP(t){return t[a$]}class wRe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class xRe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(qP(this.argumentMap.has(e))||qP(this.payloadMap.has(e)))throw new wRe(e,n)}}function MRe(t){return{enumerable:!0,configurable:!0,get(){const e=Kv(t),n=hs.ensureMappedState(e.stateMeta);return hs.createStateContext(n)}}}const PRe={dataActionSubscribeRequired:!0},LRe=new Et("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>PRe});let FRe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[hs,Ic,l$,...n]}}}return t.\u0275fac=function(n){return new(n||t)(ot(hs,2),ot(Ic,2))},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})();function g$(){return(t,e,n)=>{!function hRe(t,e){if(!function tRe(t,e){let n=t,i=!1;if(i$(n))for(;null!==n;){if(Xm(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const s=function vRe(t){return Ca(f$(t))&&Object.defineProperties(t,{[h$()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),f$(t)}(this),o=s?.get(i);if(Xm(o?.isObservable))return o?.value;if(Ca(o)||o.sequenceId!==p$()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:p$(),isObservable:bRe(c)}),c}return o?.value},n}}const kRe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function oS(t={}){const e=function BRe(t){const e=Ic?.injector?.get(LRe,void 0,hi.Optional),n={...kRe};return zo(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function dRe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const u=hs.getRepositoryByInstance(c),h=u.operations;let f=h[o];const g=u.stateMeta,m=JP(s);if(Ca(f)){const ce=function NRe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),re=function gRe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)zo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):zo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:g.path,methodName:o,argumentsNames:ce,argumentRegistry:m});f=h[o]={type:re,options:{cancelUncompleted:e.cancelUncompleted??!1}},zo(f)&&(g.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}hs.ensureMappedState(g).instance[f.type]=()=>(Xm(e.insideZone)?Ic.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),hh(l)&&Xm(e.subscribeRequired)?Zt(null).pipe(Xt(()=>l)):l);const O=hs.createAction(f,a,m),V=Ic.store.dispatch(O);return hh(l)?function yRe(t,e){return Mv([t,e]).pipe(Xt(n=>n.pop()))}(V,l):l},r}}function m$(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function ERe(t,e){const n=t[e];return Ca(JP(n))&&Object.defineProperties(n,{[a$]:{enumerable:!0,configurable:!0,value:new xRe}}),JP(n)})(e,n).createPayloadType(r,n,i)}}function _$(){return t=>{const e=function ORe(t){if(function GDe(t){return!qP(t)}(t.hasOwnProperty(KP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,KP,{value:e})}return function RRe(t){return t?.[KP]}(t)}(t);if(Ca(e.name))throw new Error("@StateRepository should be add before decorator @State");!function CRe(t,e){(function SRe(t){const e=Kv(t)??null;return(Ca(e)||e?.stateClass!==t)&&function ARe(t){Object.defineProperty(t,o$,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Kv(t)}(t)).stateMeta=e}(t,e),function URe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>n$(n)},context:MRe(t)})}(t,e,d$(t)),function IRe(t){const n=Kv(t)?.stateMeta?.name??null;if(zo(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(zo(this[i]))return this[i];if(Ca(Ic.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=Ic.store.select(t).pipe(Xt(r=>r),ia({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let VRe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Qt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})(),y$=(()=>{class t extends VRe{get snapshot(){return this.getState()}get ctx(){return function DRe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Fi(t)))(i||t)}})(),t.\u0275prov=It({token:t,factory:t.\u0275fac}),Hn([g$(),jt("design:type",Object),jt("design:paramtypes",[])],t.prototype,"snapshot",null),Hn([oS(),LD(0,m$("patchValue")),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],t.prototype,"patchState",null),Hn([oS(),LD(0,m$("stateValue")),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],t.prototype,"setState",null),Hn([oS(),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",void 0)],t.prototype,"reset",null),t})();function v$(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return Xt(n=>{let i=n;for(let r=0;r<e;r++){const s=i?.[t[r]];if(!(typeof s<"u"))return;i=s}return i})}let td=class Nb extends y${constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function HRe(){return Ei(t=>null!=t)}(),ia(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(v$(...e),tp(),ia(1))}getOption(...e){const n=this.getPathKey(e);if(this.optionCache.has(n))return this.optionCache.get(n)??Zt();const i=this.config$.pipe(v$(...e),tp(),ia(1));return this.optionCache.set(n,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Fi(Nb)))(i||Nb)}})();static#t=this.\u0275prov=It({token:Nb,factory:Nb.\u0275fac})};Hn([g$(),jt("design:type",At),jt("design:paramtypes",[])],td.prototype,"config$",null),td=Hn([_$(),nP({name:"globalConfig",defaults:null})],td);const b$="ALLOW_TELEMETRY",GRe=w$();function w$(){const t=localStorage.getItem(b$);return null===t?void 0:"true"===t.toLowerCase()}let QP=class Pb extends y${setAllowTelemetry(e){const n=w$();localStorage.setItem(b$,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==n||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Fi(Pb)))(i||Pb)}})();static#t=this.\u0275prov=It({token:Pb,factory:Pb.\u0275fac})};function aS(){return gn((t,e)=>{let n=null;t._refCount++;const i=ti(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}Hn([oS(),jt("design:type",Function),jt("design:paramtypes",[Boolean]),jt("design:returntype",void 0)],QP.prototype,"setAllowTelemetry",null),QP=Hn([_$(),nP({name:"tracking",defaults:{allowTelemetry:GRe}})],QP);class ZP extends At{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Oa(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const n=this.getSubject();e.add(this.source.subscribe(ti(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return aS()(this)}}function hp(t){return gn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}Error;let wY=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Yt({type:t,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),t})();const fb=new Et("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),ML=new Et("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Ot(ai);if(!t)throw new Error("Window is not available");return t}}),oNe=new Et("ngx-data-layer",{providedIn:"root",factory:()=>function sNe(t){return t?t.dataLayer=t.dataLayer||[]:null}(Ot(ML))}),xY=new Et("ngx-gtag-fn",{providedIn:"root",factory:()=>function aNe(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Ot(ML),Ot(oNe))});let o_=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([u,h])=>c.set(u,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,s){try{const o=new Map([["page_path",n]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(n,i,r,s,o){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(ot(fb),ot(ai),ot(xY))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cNe=(()=>{class t{constructor(n,i,r,s){this.gaCategoryDirective=n,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(n){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=n,this.bindSubscription=lp(this.el.nativeElement,n).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(n){this.throw(n)}}throw(n){this.settings.enableTracing&&console&&console.warn&&console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)(nt(wY,8),nt(o_),nt(fb),nt(ni))},t.\u0275dir=Yt({type:t,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),t})();const uNe={provide:KI,multi:!0,useFactory:function dNe(t,e,n){return D(function*(){if(!t.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");n||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),t.uri=t.uri||`https://www.googletagmanager.com/gtag/js?id=${t.trackingCode}`,t.initCommands=t?.initCommands??[],t.initCommands.find(s=>"config"===s.command)||t.initCommands.unshift({command:"config",values:[t.trackingCode]}),t.initCommands.find(s=>"js"===s.command)||t.initCommands.unshift({command:"js",values:[new Date]});for(const s of t.initCommands)e(s.command,...s.values);const i=n.createElement("script");i.async=!0,i.src=t.uri,t.nonce&&i.setAttribute("nonce",t.nonce),n.getElementsByTagName("head")[0].appendChild(i)})},deps:[fb,xY,ai]};new Et("ngx-google-analytics-routing-settings",{factory:()=>({})});let IL=(()=>{class t{static forRoot(n,i=[],r,s,o){return{ngModule:t,providers:[{provide:fb,useValue:{trackingCode:n,initCommands:i,uri:r,enableTracing:s,nonce:o}},uNe]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})(),DL=(()=>{class t{constructor(){this.consent="not-set",this.consentChange=new Pf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(n){this.consent!==n&&(this.consent=n,this.consentChange.next(n))}unsetConsent(){this.setConsent("not-set")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})(),pNe=(()=>{class t{constructor(n,i,{trackingCode:r}){this.window=i,this.subscriptions=new kt,this.token=r,this.subscriptions.add(n.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(n){this.window&&(this.window[`ga-disable-${this.token}`]=n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(DL),ot(ML),ot(fb))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const gNe=new Et("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),AY=[DL,pNe,(()=>{class t{constructor(n,i){this.key=i,this.subscriptions=new kt;try{this.storage=localStorage}catch{}n.setConsent(this.loadConsent()),this.subscriptions.add(n.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const n=this.storage?.getItem?.(this.key);if(null==n)return"not-set";const i=n.trim().toLowerCase();switch(i){case"given":case"rescinded":return i;default:return"not-set"}}saveConsent(n){this.storage?.setItem?.(this.key,n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(DL),ot(gNe))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})()];function mNe(t){return Object.entries(t).reduce((e,[n,i])=>(null!=i&&(e[n]=`${i}`),e),{})}let yNe=(()=>{class t{static forRoot(n){const{providers:i=[]}=IL.forRoot(n.gaToken,function _Ne(t){const{appName:e,projectName:n,developmentMode:i}=t;return[{command:"set",values:[mNe({appName:e,projectName:n,developmentMode:i})]}]}(n));return{ngModule:t,providers:i}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({providers:[...AY,{provide:KI,multi:!0,useFactory:()=>()=>{},deps:AY}],imports:[IL]})}return t})(),SY=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const bNe={connector:()=>new Qt};function ENe(t,e,n,i){n&&!Ze(n)&&(i=n);const r=Ze(n)?n:void 0;return s=>function xNe(t,e){const n=Ze(t)?t:()=>t;return Ze(e)?function wNe(t,e=bNe){const{connector:n}=e;return gn((i,r)=>{const s=n();Cs(t(function vNe(t){return new At(e=>t.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:n}):i=>new ZP(i,n)}(new Pf(t,e,i),r)(s)}class ANe{}const CNe=(t,e)=>JSON.stringify(t)===JSON.stringify(e),TNe=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),sl={storageStrategy:class SNe extends ANe{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},MNe=new Qt;function ec(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,s=i.value;if(i&&i.value){let o=t.storageStrategy?new t.storageStrategy:new sl.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),Jc(MNe.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function Boe(t){return t?function joe(t){return new At(e=>t.schedule(()=>e.complete()))}(t):ko}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||sl.cacheResolver||CNe,t.cacheHasher=t.cacheHasher||sl.cacheHasher||TNe,i.value=function(...u){const h=o.getAll(r,this);let f=t.cacheHasher(u),g=h.find(y=>t.cacheResolver(y.parameters,f));const m=a.find(y=>t.cacheResolver(y.parameters,f));if((t.maxAge||sl.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(t.maxAge||sl.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(t.slidingExpiration||sl.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const y=Zt(g.response);return t.async?y.pipe(W7(0)):y}if(m)return m.response;{const y=s.call(this,...u).pipe(hp(()=>{const w=a.find(O=>t.cacheResolver(O.parameters,f));a.splice(a.indexOf(w),1)}),Yi(w=>{(!t.shouldCacheDecider||t.shouldCacheDecider(w))&&((!(t.maxCacheCount||sl.maxCacheCount)||1===(t.maxCacheCount||sl.maxCacheCount)||(t.maxCacheCount||sl.maxCacheCount)&&(t.maxCacheCount||sl.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:w,created:t.maxAge||sl.maxAge?new Date:null},r,this))}),ENe(1),aS());return a.push({parameters:f,response:y,created:new Date}),y}}}return i}}class wS{}class xS{}class tc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof tc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new tc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof tc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class INe{encodeKey(e){return CY(e)}encodeValue(e){return CY(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const RNe=/%(\d[a-f0-9])/gi,ONe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function CY(t){return encodeURIComponent(t).replace(RNe,(e,n)=>ONe[n]??e)}function ES(t){return`${t}`}class dr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new INe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DNe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(ES):[ES(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new dr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(ES(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(ES(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class fs{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function TY(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function MY(t){return typeof Blob<"u"&&t instanceof Blob}function IY(t){return typeof FormData<"u"&&t instanceof FormData}class pb{constructor(e,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function NNe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new tc,this.context??=new fs,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new dr,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||TY(this.body)||MY(this.body)||IY(this.body)||function PNe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof dr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IY(this.body)?null:MY(this.body)?this.body.type||null:TY(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new pb(n,i,o,{params:u,headers:l,context:h,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}}var wh=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(wh||{});class RL{constructor(e,n=gb.Ok,i="OK"){this.headers=e.headers||new tc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class AS extends RL{constructor(e={}){super(e),this.type=wh.ResponseHeader}clone(e={}){return new AS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pp extends RL{constructor(e={}){super(e),this.type=wh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new pp({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class a_ extends RL{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}var gb=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(gb||{});function OL(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let nd=(()=>{class t{constructor(n){this.handler=n}request(n,i,r={}){let s;if(n instanceof pb)s=n;else{let c,l;c=r.headers instanceof tc?r.headers:new tc(r.headers),r.params&&(l=r.params instanceof dr?r.params:new dr({fromObject:r.params})),s=new pb(n,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=Zt(s).pipe(function Jv(t,e){return Ze(e)?Ts(t,e,1):Ts(t,1)}(c=>this.handler.handle(c)));if(n instanceof pb||"events"===r.observe)return o;const a=o.pipe(Ei(c=>c instanceof pp));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Xt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Xt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Xt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Xt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new dr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,OL(r,i))}post(n,i,r={}){return this.request("POST",n,OL(r,i))}put(n,i,r={}){return this.request("PUT",n,OL(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(wS))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();function RY(t,e){return e(t)}function jNe(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}const VNe=new Et(""),mb=new Et(""),OY=new Et(""),NY=new Et("");function HNe(){let t=null;return(e,n)=>{null===t&&(t=(Ot(VNe,{optional:!0})??[]).reduceRight(jNe,RY));const i=Ot(jd),r=i.add();return t(e,n).pipe(hp(()=>i.remove(r)))}}let PY=(()=>{class t extends wS{constructor(n,i){super(),this.backend=n,this.injector=i,this.chain=null,this.pendingTasks=Ot(jd);const r=Ot(NY,{optional:!0});this.backend=r??n}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(mb),...this.injector.get(OY,[])]));this.chain=r.reduceRight((s,o)=>function UNe(t,e,n){return(i,r)=>function Bc(t,e){t instanceof kc&&t.assertNotDestroyed();const i=Oc(t),r=no(void 0);try{return e()}finally{Oc(i),no(r)}}(n,()=>e(i,s=>t(s,r)))}(s,o,this.injector),RY)}const i=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe(hp(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(xS),ot(ys))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const YNe=/^\)\]\}',?\n/;let FY=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new St(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?us(i.\u0275loadImpl()):Zt(null)).pipe(Tr(()=>new At(s=>{const o=i.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((y,w)=>o.setRequestHeader(y,w.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const y=n.detectContentTypeHeader();null!==y&&o.setRequestHeader("Content-Type",y)}if(n.responseType){const y=n.responseType.toLowerCase();o.responseType="json"!==y?y:"text"}const a=n.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const y=o.statusText||"OK",w=new tc(o.getAllResponseHeaders()),O=function qNe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return c=new AS({headers:w,status:o.status,statusText:y,url:O}),c},u=()=>{let{headers:y,status:w,statusText:O,url:V}=l(),ce=null;w!==gb.NoContent&&(ce=typeof o.response>"u"?o.responseText:o.response),0===w&&(w=ce?gb.Ok:0);let re=w>=200&&w<300;if("json"===n.responseType&&"string"==typeof ce){const Ie=ce;ce=ce.replace(YNe,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Ne){ce=Ie,re&&(re=!1,ce={error:Ne,text:ce})}}re?(s.next(new pp({body:ce,headers:y,status:w,statusText:O,url:V||void 0})),s.complete()):s.error(new a_({error:ce,headers:y,status:w,statusText:O,url:V||void 0}))},h=y=>{const{url:w}=l(),O=new a_({error:y,status:o.status||0,statusText:o.statusText||"Unknown Error",url:w||void 0});s.error(O)};let f=!1;const g=y=>{f||(s.next(l()),f=!0);let w={type:wh.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),"text"===n.responseType&&o.responseText&&(w.partialText=o.responseText),s.next(w)},m=y=>{let w={type:wh.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),s.next(w)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),n.reportProgress&&(o.addEventListener("progress",g),null!==a&&o.upload&&o.upload.addEventListener("progress",m)),o.send(a),s.next({type:wh.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),n.reportProgress&&(o.removeEventListener("progress",g),null!==a&&o.upload&&o.upload.removeEventListener("progress",m)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(UV))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();const LL=new Et(""),kY=new Et("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),BY=new Et("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class jY{}let JNe=(()=>{class t{constructor(n,i,r){this.doc=n,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=DV(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||t)(ot(ai),ot(Va),ot(kY))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();function QNe(t,e){const n=t.url.toLowerCase();if(!Ot(LL)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const i=Ot(jY).getToken(),r=Ot(BY);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var xh=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(xh||{});function ZNe(...t){const e=[nd,FY,PY,{provide:wS,useExisting:PY},{provide:xS,useExisting:FY},{provide:mb,useValue:QNe,multi:!0},{provide:LL,useValue:!0},{provide:jY,useClass:JNe}];for(const n of t)e.push(...n.\u0275providers);return function Fh(t){return{\u0275providers:t}}(e)}const UY=new Et("");function ePe(){return function gp(t,e){return{\u0275kind:t,\u0275providers:e}}(xh.LegacyInterceptors,[{provide:UY,useFactory:HNe},{provide:mb,useExisting:UY,multi:!0}])}let tPe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({providers:[ZNe(ePe())]})}return t})();class aPe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const cPe=new Et("basePath");class CS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let qY=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new tc,this.configuration=new CS,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new aPe}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>n=this.addToHttpParamsRecursive(n,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>n=this.addToHttpParamsRecursive(n,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}biomarkerTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,s){const o=n.token;let a=new dr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new fs);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,s){const o=n.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new fs);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,s){const o=n.cache;let a=new dr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new fs);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,s){const o=n.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,c=n.ageRange,l=n.bmi,u=n.bmiRange,h=n.cache,f=n.ontologyTerms,g=n.cellTypeTerms,m=n.biomarkerTerms,y=n.consortiums,w=n.providers,O=n.sex,V=n.spatial,ce=n.technologies,re=n.token;let Ie=new dr({encoder:this.encoder});null!=a&&(Ie=this.addToHttpParams(Ie,a,"age")),null!=c&&(Ie=this.addToHttpParams(Ie,c,"age-range")),null!=l&&(Ie=this.addToHttpParams(Ie,l,"bmi")),null!=u&&(Ie=this.addToHttpParams(Ie,u,"bmi-range")),null!=h&&(Ie=this.addToHttpParams(Ie,h,"cache")),f&&f.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"ontology-terms")}),g&&g.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"cell-type-terms")}),m&&m.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"biomarker-terms")}),null!=o&&(Ie=this.addToHttpParams(Ie,o,"organ-iri")),y&&y.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"consortiums")}),w&&w.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"providers")}),null!=O&&(Ie=this.addToHttpParams(Ie,O,"sex")),V&&V.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"spatial")}),ce&&ce.forEach(dt=>{Ie=this.addToHttpParams(Ie,dt,"technologies")}),null!=re&&(Ie=this.addToHttpParams(Ie,re,"token"));let Ne=this.defaultHeaders,it=s&&s.httpHeaderAccept;void 0===it&&(it=this.configuration.selectHeaderAccept(["application/json"])),void 0!==it&&(Ne=Ne.set("Accept",it));let ut=s&&s.context;void 0===ut&&(ut=new fs);let Ye="json";return it&&(Ye=it.startsWith("text")?"text":this.configuration.isJsonMime(it)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:ut,params:Ie,responseType:Ye,withCredentials:this.configuration.withCredentials,headers:Ne,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}sennetRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,s){const o=n.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,c=n.format;let l=new dr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new fs);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,s){const o=n.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,c=n.format;let l=new dr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new fs);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let y="json";return h&&(y=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:l,responseType:y,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new fs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,w=n.sex,O=n.spatial,V=n.technologies,ce=n.token;let re=new dr({encoder:this.encoder});null!=o&&(re=this.addToHttpParams(re,o,"age")),null!=a&&(re=this.addToHttpParams(re,a,"age-range")),null!=c&&(re=this.addToHttpParams(re,c,"bmi")),null!=l&&(re=this.addToHttpParams(re,l,"bmi-range")),null!=u&&(re=this.addToHttpParams(re,u,"cache")),h&&h.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"ontology-terms")}),f&&f.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"cell-type-terms")}),g&&g.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"biomarker-terms")}),m&&m.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"consortiums")}),y&&y.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"providers")}),null!=w&&(re=this.addToHttpParams(re,w,"sex")),O&&O.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"spatial")}),V&&V.forEach(Ye=>{re=this.addToHttpParams(re,Ye,"technologies")}),null!=ce&&(re=this.addToHttpParams(re,ce,"token"));let Ie=this.defaultHeaders,Ne=s&&s.httpHeaderAccept;void 0===Ne&&(Ne=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ne&&(Ie=Ie.set("Accept",Ne));let it=s&&s.context;void 0===it&&(it=new fs);let ut="json";return Ne&&(ut=Ne.startsWith("text")?"text":this.configuration.isJsonMime(Ne)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:it,params:re,responseType:ut,withCredentials:this.configuration.withCredentials,headers:Ie,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(ot(nd),ot(cPe,8),ot(CS,8))},t.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lPe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:CS,useFactory:n}]}}constructor(n,i){if(n)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return t.\u0275fac=function(n){return new(n||t)(ot(t,12),ot(nd,8))},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})();const FL=new Qt,c_={cacheBusterObserver:FL},mp={cacheBusterObserver:FL,maxCacheCount:4};function XY(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function uPe(t){return{age:XY(t?.ageRange,1,110),bmi:XY(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,biomarkerTerms:t?.biomarkerTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function KY(t){return t.map(e=>({...e,transformMatrix:new Vn(e.transformMatrix??[])}))}class Qs{constructor(e,n){this.api=e,this.globalConfig=n,n.getOption("hubmapToken").subscribe(FL)}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},t=>t)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},t=>t)}getTissueBlockResults(e){return this.doRequest(n=>this.api.tissueBlocks(n),e,{},t=>t)}getAggregateResults(e){return this.doRequest(n=>this.api.aggregateResults(n),e)}getOntologyTermOccurences(e){return this.doRequest(n=>this.api.ontologyTermOccurences(n),e)}getCellTypeTermOccurences(e){return this.doRequest(n=>this.api.cellTypeTermOccurences(n),e)}getBiomarkerTermOccurences(e){return this.doRequest(n=>this.api.biomarkerTermOccurences(n),e)}getScene(e){return this.doRequest(n=>this.api.scene(n),e,{},KY)}getReferenceOrganScene(e,n){return this.doRequest(i=>this.api.referenceOrganScene(i),n,{organIri:e},KY)}doRequest(e,n,i,r){const{api:s,globalConfig:o}=this,a={...uPe(n),...i};return zv([o.getOption("remoteApiEndpoint"),o.getOption("hubmapToken")]).pipe(Fr(1),Yi(([c,l])=>{s.configuration.basePath=c,l&&(a.token=l)}),Tr(()=>e(a)),Xt(c=>r?r(c):c))}static#e=this.\u0275fac=function(n){return new(n||Qs)(ot(qY),ot(td))};static#t=this.\u0275prov=It({token:Qs,factory:Qs.\u0275fac,providedIn:"root"})}function Ta(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let kL;function ol(){return kL||(kL=function dPe(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=Ta(n);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),kL}function hPe(t,e=ol()){return e("readonly",n=>Ta(n.get(t)))}function fPe(t,e=ol()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),Ta(n.transaction)))}function pPe(t,e=ol()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),Ta(n.transaction)))}Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getProviderNames",null),Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getDatasetTechnologyNames",null),Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getOntologyTreeModel",null),Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getCellTypeTreeModel",null),Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getBiomarkerTreeModel",null),Hn([ec(c_),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],Qs.prototype,"getReferenceOrgans",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getTissueBlockResults",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getAggregateResults",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getOntologyTermOccurences",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getCellTypeTermOccurences",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getBiomarkerTermOccurences",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qs.prototype,"getScene",null),Hn([ec(mp),jt("design:type",Function),jt("design:paramtypes",[String,Object]),jt("design:returntype",At)],Qs.prototype,"getReferenceOrganScene",null);var gPe=S(7783),mPe=S(4515),_Pe=S.n(mPe);const yb="http://www.w3.org/1999/02/22-rdf-syntax-ns#",vb="http://www.w3.org/2001/XMLSchema#",jL="http://www.w3.org/2000/10/swap/",Go={xsd:{decimal:`${vb}decimal`,boolean:`${vb}boolean`,double:`${vb}double`,integer:`${vb}integer`,string:`${vb}string`},rdf:{type:`${yb}type`,nil:`${yb}nil`,first:`${yb}first`,rest:`${yb}rest`,langString:`${yb}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${jL}reify#forSome`,forAll:`${jL}reify#forAll`},log:{implies:`${jL}log#implies`}},{xsd:TS}=Go,yPe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,JY={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},vPe=/[\x00-\x20<>\\"\{\}\|\^\`]/,bPe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},wPe=/$0^/;class QY{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in bPe)&&this[n]instanceof RegExp&&(this[n]=wPe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,u=i[0];let h="",f="",g="",m=null,y=0,w=!1;switch(u){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(y=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){w=!0;break}case"<":if(m=this._unescapedIri.exec(i))h="IRI",f=m[1];else if(m=this._iri.exec(i)){if(f=this._unescape(m[1]),null===f||vPe.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",y=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",y=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",y=2);break;case"_":((m=this._blank.exec(i))||n&&(m=this._blank.exec(`${i} `)))&&(h="blank",g="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(i))f=m[1];else if(({value:f,matchLength:y}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(i))f=m[1];else if(({value:f,matchLength:y}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(i))&&(h="var",f=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(i))?(h="langcode",f=m[1]):(m=this._keyword.exec(i))&&(h=m[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(i)||n&&(m=this._number.exec(`${i} `)))&&(h="literal",f=m[0],g="string"==typeof m[1]?TS.double:"string"==typeof m[2]?TS.decimal:TS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(i))?h=m[0].toUpperCase():w=!0;break;case"f":case"t":(m=this._boolean.exec(i))?(h="literal",f=m[0],g=TS.boolean):w=!0;break;case"a":(m=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):w=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,h=u);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",y=2):(h=u,y=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",y=2);break;default:w=!0}if(w&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(i))?((m=this._prefixed.exec(i))||n&&(m=this._prefixed.exec(`${i} `)))&&(h="prefixed",g=m[1]||"",f=this._unescape(m[2])):(h="prefix",f=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const O=y||m[0].length,V=s(h,f,g,l,O);this.previousToken=V,this._previousMarker=h,i=i.substr(O,i.length)}function s(a,c,l,u,h){const f=i?r-i.length:r,m={type:a,value:c,prefix:l,line:u,start:f,end:f+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(yPe,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in JY?JY[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}_Pe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:xPe,xsd:_p}=Go;let bb,EPe=0;const UL={namedNode:function APe(t){return new VL(t)},blankNode:function SPe(t){return new eq(t||"n3-"+EPe++)},variable:function TPe(t){return new tq(t)},literal:function CPe(t,e){if("string"==typeof e)return new yp(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=_p.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?_p.integer:_p.double:(n=_p.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new yp(""===n||n===_p.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function MPe(){return bb},quad:iq,triple:iq},Ar=UL;class al{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof al?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class VL extends al{get termType(){return"NamedNode"}}class yp extends al{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new VL(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?_p.string:xPe.langString}equals(e){return e instanceof yp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class eq extends al{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class tq extends al{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function l_(t,e,n){if(e=e||UL,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===UL)return new yp(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const i=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,i-1),"@"===t[i+1]?t.substr(i+2):e.namedNode(t.substr(i+3)));case"[":t=JSON.parse(t);break;default:if(!n||!Array.isArray(t))return e.namedNode(t)}return e.quad(l_(t[0],e,!0),l_(t[1],e,!0),l_(t[2],e,!0),t[3]&&l_(t[3],e,!0))}function Ma(t,e){if("string"==typeof t)return t;if(t instanceof al&&"Quad"!==t.termType)return t.id;if(!t)return bb.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==_p.string?`^^${t.datatype.value}`:""}`;case"Quad":const n=[Ma(t.subject,!0),Ma(t.predicate,!0),Ma(t.object,!0)];return t.graph&&"DefaultGraph"!==t.graph.termType&&n.push(Ma(t.graph,!0)),e?n:JSON.stringify(n);default:throw new Error(`Unexpected termType: ${t.termType}`)}}bb=new class nq extends al{constructor(){return super(""),bb||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class HL extends al{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||bb}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function iq(t,e,n,i){return new HL(t,e,n,i)}let rq=0;class MS{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&sq(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new QY({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){rq=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=zL}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<n;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<n&&"/"!==e[s];)r=s;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${rq++}_`,this._prefixCallback=i||zL,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=n,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=zL):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function zL(){}function sq(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(Go.rdf.first),t.RDF_REST=n(Go.rdf.rest),t.RDF_NIL=n(Go.rdf.nil),t.N3_FORALL=n(Go.r.forAll),t.N3_FORSOME=n(Go.r.forSome),t.ABBREVIATIONS={a:n(Go.rdf.type),"=":n(Go.owl.sameAs),">":n(Go.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}function IPe(t){return!!t&&"NamedNode"===t.termType}function DPe(t){return!!t&&"BlankNode"===t.termType}function RPe(t){return!!t&&"Literal"===t.termType}function OPe(t){return!!t&&"Variable"===t.termType}function wb(t){return!!t&&"DefaultGraph"===t.termType}function NPe(t){return wb(t.graph)}function PPe(t,e){return GL({"":t.value||t},e)("")}function GL(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);n[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||Ar,i}sq(MS.prototype,Ar),Ar.defaultGraph();var Ab=S(6947);class IS{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||Ar,e&&this.addQuads(e)}_termFromId(e,n){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return l_(e,n)}_termToNumericId(e){if("Quad"===e.termType){const n=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let s;return n&&i&&r&&(wb(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${n}.${i}.${r}.${s}`:`.${n}.${i}.${r}`]}return this._ids[Ma(e)]}_termToNewNumericId(e){const n=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${wb(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Ma(e);return this._ids[n]||(this._ids[this._entities[++this._id]=n]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const s in n)for(const o in i=n[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const s=e[n]||(e[n]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,n,i,r){const s=e[n],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[n]}*_findInIndex(e,n,i,r,s,o,a,c){let l,u,h;const f=this._entities,g=this._termFromId(c,this._factory),m={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const y in e)if(u=e[y]){m[s]=this._termFromId(f[y],this._factory),i&&((l=u,u={})[i]=l[i]);for(const w in u)if(h=u[w]){m[o]=this._termFromId(f[w],this._factory);const O=r?r in h?[r]:[]:Object.keys(h);for(let V=0;V<O.length;V++)m[a]=this._termFromId(f[O[V]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,g)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,s;if(r=e[n])for(s in r)i(s)}_loopByKey1(e,n,i){let r,s;for(r in e)s=e[r],s[n]&&i(r)}_loopBy2Keys(e,n,i,r){let s,o,a;if((s=e[n])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,n,i,r){let o,a,c,s=0;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const u in a)(c=a[u])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!function kPe(t){return"string"==typeof t||t instanceof String}(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Ma(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),n=this._termToNewNumericId(n),i=this._termToNewNumericId(i);const o=this._addToIndex(s.subjects,e,n,i);return this._addToIndex(s.predicates,n,i,e),this._addToIndex(s.objects,i,e,n),this._size=null,o}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Ma(r);const s=this._graphs;let o,a,c;if(!((e=e&&this._termToNumericId(e))&&(n=n&&this._termToNumericId(n))&&(i=i&&this._termToNumericId(i))&&(o=s[r])&&(a=o.subjects[e])&&(c=a[n])&&i in c))return!1;for(e in this._removeFromIndex(o.subjects,e,n,i),this._removeFromIndex(o.predicates,n,i,e),this._removeFromIndex(o.objects,i,e,n),null!==this._size&&this._size--,o.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const s=new Ab.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){r=r&&Ma(r);const s=this._getGraphs(r);let o,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||n&&!(c=this._termToNumericId(n))||i&&!(l=this._termToNumericId(i))))for(const u in s)(o=s[u])&&(a?l?yield*this._findInIndex(o.objects,l,a,c,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,a,c,null,"subject","predicate","object",u):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",u):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",u))}match(e,n,i,r){return new WL(this,e,n,i,r)}countQuads(e,n,i,r){r=r&&Ma(r);const s=this._getGraphs(r);let a,c,l,u,o=0;if(e&&!(c=this._termToNumericId(e))||n&&!(l=this._termToNumericId(n))||i&&!(u=this._termToNumericId(i)))return 0;for(const h in s)(a=s[h])&&(o+=e?i?this._countInIndex(a.objects,u,c,l):this._countInIndex(a.subjects,c,l,u):n?this._countInIndex(a.predicates,l,u,c):this._countInIndex(a.objects,u,c,l));return o}forEach(e,n,i,r,s){this.some(o=>(e(o),!1),n,i,r,s)}every(e,n,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),n,i,r,s);return o&&a}some(e,n,i,r,s){for(const o of this.readQuads(n,i,r,s))if(e(o))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,n,i),r}forSubjects(e,n,i,r){r=r&&Ma(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.predicates,a,c,e):this._loopByKey1(o.subjects,a,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,n,i),r}forPredicates(e,n,i,r){r=r&&Ma(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.objects,c,a,e):this._loopByKey0(o.subjects,a,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(s=>{r.push(s)},e,n,i),r}forObjects(e,n,i,r){r=r&&Ma(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.subjects,a,c,e):this._loopByKey1(o.objects,a,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,n,i),r}forGraphs(e,n,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,i,r,s)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,Go.rdf.rest,Go.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let u,h,l=!1;const f=a.graph;let g=a.subject;for(;g&&!l;){const m=this.getQuads(null,null,g,null),y=this.getQuads(g,null,null,null);let w,O=null,V=null,ce=null;for(let re=0;re<y.length&&!l;re++)w=y[re],w.graph.equals(f)?u?l=r(g,"has non-list arcs out"):w.predicate.value===Go.rdf.first?O?l=r(g,"has multiple rdf:first arcs"):o.push(O=w):w.predicate.value===Go.rdf.rest?V?l=r(g,"has multiple rdf:rest arcs"):o.push(V=w):m.length?l=r(g,"can't be subject and object"):(u=w,h="subject"):l=r(g,"not confined to single graph");for(let re=0;re<m.length&&!l;++re)w=m[re],u?l=r(g,"can't have coreferences"):w.predicate.value===Go.rdf.rest?ce?l=r(g,"has incoming rdf:rest arcs"):ce=w:(u=w,h="object");O?c.unshift(O.object):l=r(g,"has no list head"),g=ce&&ce.subject}l?e=!1:u&&(i[u[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}class WL extends Ab.Readable{constructor(e,n,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:s}=this,o=this._filtered=new IS({factory:e._factory});for(const a of e.readQuads(s,r,i,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new WL(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var UPe=S(2130),VPe=S(2756);function kr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function dq(t){const e=t.length;let n=0;return new Ab.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function $L(t,e){return YL.apply(this,arguments)}function YL(){return YL=D(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield(0,UPe.toRDF)(n);e.import(dq(i))}return e}),YL.apply(this,arguments)}function qL(){return qL=D(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new VPe.RdfXmlParser({dataFactory:Ar,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(n),i.end(),r}return e}),qL.apply(this,arguments)}function XL(){return XL=D(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new MS({format:"n3"}).parse(n);e.import(dq(i))}return e}),XL.apply(this,arguments)}function KL(t,e){const n=JSON.parse(t),i=new IS;return Object.assign(i,n,{_factory:e??Ar}),i}const DS="Unknown Euler angle order",d_=.99999;var Zs=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Zs||{});class ps extends KE{static get ZYX(){return Zs.ZYX}static get YXZ(){return Zs.YXZ}static get XZY(){return Zs.XZY}static get ZXY(){return Zs.ZXY}static get YZX(){return Zs.YZX}static get XYZ(){return Zs.XYZ}static get RollPitchYaw(){return Zs.ZYX}static get DefaultOrder(){return Zs.ZYX}static get RotationOrders(){return Zs}static rotationOrder(e){return Zs[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=ps.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(n*i+s*r);let l=-2*(n*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+s*n),-2*(n*n+o)+1),g=Math.asin(l),m=Math.atan2(c,a);return this.set(f,g,m,ps.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function WPe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=ci(e)}get y(){return this[1]}set y(e){this[1]=ci(e)}get z(){return this[2]}set z(e){this[2]=ci(e)}get alpha(){return this[0]}set alpha(e){this[0]=ci(e)}get beta(){return this[1]}set beta(e){this[1]=ci(e)}get gamma(){return this[2]}set gamma(e){this[2]=ci(e)}get phi(){return this[0]}set phi(e){this[0]=ci(e)}get theta(){return this[1]}set theta(e){this[1]=ci(e)}get psi(){return this[2]}set psi(e){this[2]=ci(e)}get roll(){return this[0]}set roll(e){this[0]=ci(e)}get pitch(){return this[1]}set pitch(e){this[1]=ci(e)}get yaw(){return this[2]}set yaw(e){this[2]=ci(e)}get order(){return this[3]}set order(e){this[3]=function $Pe(t){if(t<0&&t>=6)throw new Error(DS);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Zs.ZYX)}fromRotationMatrix(e,n=ps.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new h2;switch(this[4]){case Zs.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Zs.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Zs.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Zs.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Zs.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Zs.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(DS)}}_fromRotationMatrix(e,n=ps.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],u=e[6],h=e[10];switch(n=n||this[3]){case ps.XYZ:this[1]=Math.asin(Vr(s,-1,1)),Math.abs(s)<d_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,a),this[2]=0);break;case ps.YXZ:this[0]=Math.asin(-Vr(c,-1,1)),Math.abs(c)<d_?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case ps.ZXY:this[0]=Math.asin(Vr(u,-1,1)),Math.abs(u)<d_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case ps.ZYX:this[1]=Math.asin(-Vr(l,-1,1)),Math.abs(l)<d_?(this[0]=Math.atan2(u,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case ps.YZX:this[2]=Math.asin(Vr(o,-1,1)),Math.abs(o)<d_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case ps.XZY:this[2]=Math.asin(-Vr(r,-1,1)),Math.abs(r)<d_?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(DS)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case ps.XYZ:{const f=o*c,g=o*h,m=l*c,y=l*h;n[0]=a*c,n[4]=-a*h,n[8]=u,n[1]=g+m*u,n[5]=f-y*u,n[9]=-l*a,n[2]=y-f*u,n[6]=m+g*u,n[10]=o*a;break}case ps.YXZ:{const f=a*c,g=a*h,m=u*c,y=u*h;n[0]=f+y*l,n[4]=m*l-g,n[8]=o*u,n[1]=o*h,n[5]=o*c,n[9]=-l,n[2]=g*l-m,n[6]=y+f*l,n[10]=o*a;break}case ps.ZXY:{const f=a*c,g=a*h,m=u*c,y=u*h;n[0]=f-y*l,n[4]=-o*h,n[8]=m+g*l,n[1]=g+m*l,n[5]=o*c,n[9]=y-f*l,n[2]=-o*u,n[6]=l,n[10]=o*a;break}case ps.ZYX:{const f=o*c,g=o*h,m=l*c,y=l*h;n[0]=a*c,n[4]=m*u-g,n[8]=f*u+y,n[1]=a*h,n[5]=y*u+f,n[9]=g*u-m,n[2]=-u,n[6]=l*a,n[10]=o*a;break}case ps.YZX:{const f=o*a,g=o*u,m=l*a,y=l*u;n[0]=a*c,n[4]=y-f*h,n[8]=m*h+g,n[1]=h,n[5]=o*c,n[9]=-l*c,n[2]=-u*c,n[6]=g*h+m,n[10]=f-y*h;break}case ps.XZY:{const f=o*a,g=o*u,m=l*a,y=l*u;n[0]=a*c,n[4]=-h,n[8]=u*c,n[1]=f*h+y,n[5]=o*c,n[9]=g*h-m,n[2]=m*h-g,n[6]=l*c,n[10]=y*h+f;break}default:throw new Error(DS)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new h2(e*r*s-n*i*o,e*i*o+n*r*s,n*i*s-e*r*o,e*i*s+n*r*o)}}var hq=S(2475),YPe=S.n(hq),qPe=S(689),XPe=S.n(qPe),tr=S(7376);const fq={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let RS;const KPe=new Uint8Array(16);function JPe(){if(!RS&&(RS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!RS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return RS(KPe)}const ho=[];for(let t=0;t<256;++t)ho.push((t+256).toString(16).slice(1));const ZPe=function QPe(t,e,n){if(fq.randomUUID&&!e&&!t)return fq.randomUUID();const i=(t=t||{}).random||(t.rng||JPe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function pq(t,e=0){return ho[t[e+0]]+ho[t[e+1]]+ho[t[e+2]]+ho[t[e+3]]+"-"+ho[t[e+4]]+ho[t[e+5]]+"-"+ho[t[e+6]]+ho[t[e+7]]+"-"+ho[t[e+8]]+ho[t[e+9]]+"-"+ho[t[e+10]]+ho[t[e+11]]+ho[t[e+12]]+ho[t[e+13]]+ho[t[e+14]]+ho[t[e+15]]}(i)};var OS=S(1994);function*NS(t,e,n){for(const[i,r]of Object.entries(n))for(const s of kr(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,OS.fromRdf)(s.object):s.object.id;yield[r,o]}}function vp(t,e,n,i){const r={"@id":e,"@type":n};for(const[s,o]of Object.entries(i))for(const a of kr(t,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,OS.fromRdf)(a.object):a.object.id;r[o]=c}return r}const qi=GL({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Ar),gq={x:qi("rdf"),type:qi("rdf")("type")},eLe_label=(qi("rdfs"),qi("rdfs")("label")),tn=(qi("rdfs")("comment"),qi("rdfs")("isDefinedBy"),qi("rdfs")("seeAlso"),qi("ccf")),Xn={id:qi("ccf")("has_registration_location"),label:qi("rdfs")("label"),description:qi("rdfs")("comment"),link:tn("url"),sex:tn("sex"),age:tn("age"),bmi:tn("bmi"),Male:Ar.literal("Male"),Female:Ar.literal("Female"),consortiumName:tn("consortium_name"),providerName:tn("tissue_provider_name"),providerUUID:tn("tissue_provider_uuid"),donor:tn("comes_from"),sections:tn("subdivided_into_sections"),datasets:tn("generates_dataset"),sampleType:tn("sample_type"),TissueBlock:Ar.literal("Tissue Block"),TissueSection:Ar.literal("Tissue Section"),NonStandard:Ar.literal("Non-standard"),sectionCount:tn("section_count"),sectionSize:tn("section_size"),sectionUnits:tn("section_size_unit"),sectionNumber:tn("section_number"),spatialEntity:tn("has_registration_location"),ontologyTerms:tn("has_ontology_term"),cellTypeTerms:tn("has_cell_type_term"),biomarkerTerms:tn("has_biomarker_term"),technology:tn("technology"),thumbnail:tn("thumbnail")},ui={x:tn,base:qi("base"),ontologyNode:{label:tn("ccf_pref_label"),parent:tn("ccf_part_of"),children:tn("ccf_part_of"),rui_rank:tn("rui_rank"),synonymLabels:Ar.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:tn("ccf_part_of"),ct_is_a:tn("ccf_ct_isa"),located_in:tn("ccf_located_in"),characterizes:tn("ccf_characterizes"),bm_located_in:tn("ccf_bm_located_in")},spatial:{Female:qi("base")("VHFemale"),Male:qi("base")("VHMale"),BothSexes:qi("base")("VHBothSexes"),FemaleOrgans:qi("base")("VHFemaleOrgans"),MaleOrgans:qi("base")("VHMaleOrgans")},SpatialObjectReference:tn("spatial_object_reference"),SpatialEntity:tn("spatial_entity"),SpatialPlacement:tn("spatial_placement"),spatialObjectReference:{file:tn("file_url"),file_format:tn("file_format"),file_subpath:tn("file_subpath")},extractionSet:{label:qi("rdfs")("label"),rui_rank:tn("rui_rank")},spatialEntity:{label:qi("rdfs")("label"),description:qi("rdfs")("comment"),creator:qi("dcterms")("creator"),creator_first_name:tn("creator_first_name"),creator_last_name:tn("creator_last_name"),creator_middle_name:tn("creator_middle_name"),creator_orcid:tn("creator_orcid"),creation_date:qi("dcterms")("created"),updated_date:tn("updated_date"),ccf_annotations:tn("collides_with"),representation_of:tn("representation_of"),reference_organ:tn("has_reference_organ"),extraction_set_for:tn("extraction_set_for"),extraction_set:tn("has_extraction_set"),sex:tn("organ_owner_sex"),side:tn("organ_side"),rui_rank:tn("rui_rank"),slice_thickness:tn("slice_thickness"),slice_count:tn("slice_count"),x_dimension:tn("x_dimension"),y_dimension:tn("y_dimension"),z_dimension:tn("z_dimension"),dimension_units:tn("dimension_unit"),object:tn("has_object_reference")},spatialPlacement:{source:tn("placement_for"),target:tn("placement_relative_to"),placement_date:qi("dcterms")("created"),x_scaling:tn("x_scaling"),y_scaling:tn("y_scaling"),z_scaling:tn("z_scaling"),scaling_units:tn("scaling_unit"),x_rotation:tn("x_rotation"),y_rotation:tn("y_rotation"),z_rotation:tn("z_rotation"),w_rotation:tn("theta_rotation"),rotation_order:tn("rotation_order"),rotation_units:tn("rotation_unit"),x_translation:tn("x_translation"),y_translation:tn("y_translation"),z_translation:tn("z_translation"),translation_units:tn("translation_unit")}},Kn={x:qi("uberon"),body:qi("uberon")("0013702")},tLe={x:qi("cl"),cell:qi("cl")("0000000")},Sb={x:qi("fma")},cl=(qi("lmha"),{body:Kn.body,cell:tLe.cell,respiratory_system:Kn.x("0001004"),colon:Kn.x("0001155"),left_lung:Kn.x("0002168"),right_lung:Kn.x("0002167"),left_bronchus:Kn.x("0002178"),right_bronchus:Kn.x("0002177"),kidney:Kn.x("0002113"),ureter:Kn.x("0000056"),eye:Kn.x("0000970"),fallopian_tube:Kn.x("0003889"),knee:Kn.x("0001465"),ovary:Kn.x("0000992"),trachea:Kn.x("0003126"),aorta:Kn.x("0000947"),blood:Kn.x("0000178"),bone_marrow:Kn.x("0002371"),male_reproductive_system:Kn.x("0000079"),lymph_node:Kn.x("0000029"),blood_vasculature:Kn.x("0004537"),brain:Kn.x("0000955"),eye_left:Kn.x("0004548"),eye_right:Sb.x("54449"),fallopian_tube_left:Kn.x("0001303"),fallopian_tube_right:Kn.x("0001302"),heart:Kn.x("0000948"),kidney_left:Kn.x("0004538"),kidney_right:Kn.x("0004539"),knee_left:Sb.x("24978"),knee_right:Sb.x("24977"),large_intestine:Kn.x("0000059"),liver:Kn.x("0002107"),lungs:Kn.x("0002048"),mesenteric_lymph_node:Kn.x("0002509"),ovary_left:Sb.x("7214"),ovary_right:Sb.x("7213"),pancreas:Kn.x("0001264"),pelvis:Kn.x("0001270"),prostate_gland:Kn.x("0002367"),skin:Kn.x("0002097"),small_intestine:Kn.x("0002108"),spleen:Kn.x("0002106"),thymus:Kn.x("0002370"),ureter_left:Kn.x("0001223"),ureter_right:Kn.x("0001222"),urinary_bladder:Kn.x("0001255"),uterus:Kn.x("0000995")});function JL(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const PS={spatialObjectReference:JL(ui.spatialObjectReference),spatialEntity:JL(ui.spatialEntity),spatialPlacement:JL(ui.spatialPlacement)};function mq(t,e){const n=vp(t,e,"ExtractionSet",PS.spatialEntity);return n.extractionSites=(0,tr.sortBy)(t.getSubjects(ui.spatialEntity.extraction_set,e,null).map(i=>bp(t,i.id)),["rui_rank"]),n}function bp(t,e){const n=vp(t,e,"SpatialEntity",PS.spatialEntity);return n.object&&(n.object=function nLe(t,e){return vp(t,e,"SpatialObjectReference",PS.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,ui.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,Xn.spatialEntity,e,null),n}function oLe(t,e){const n=vp(t,e,"SpatialPlacement",PS.spatialPlacement);return n.source&&(n.source=bp(t,n.source)),n.target&&(n.target=bp(t,n.target)),n}const cLe=(YPe()||hq).DirectedGraph;function _q(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),s=[n.x_rotation,n.y_rotation,n.z_rotation].map(F4),o=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(s).scale(o)}class yq{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new cLe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},gq.type,ui.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},gq.type,ui.SpatialEntity,null);const n={};for(const i of kr(e,null,ui.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of kr(e,null,ui.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Vn(Vn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Vn(Vn.IDENTITY),s=XPe()(this.graph,e,n);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&_q(r,oLe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,tr.get)(e,"placement[0]",(0,tr.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,n),s&&(s=_q(s,r))):i&&(s=this.getTransformationMatrix(i,n)),s){const o=(new ps).fromRotationMatrix(s,ps.XYZ),a=s.getTranslation().map(u=>1e3*u),c=o.toVector3().map(Tae),l=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${ZPe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class vq{constructor(e){this.db=e}getSpatialEntity(e){return bp(this.db.store,e)}getExtractionSets(e){return function iLe(t,e){return(0,tr.sortBy)(t.getSubjects(ui.spatialEntity.extraction_set_for,e,null).map(n=>mq(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return mq(this.db.store,e)}getAnatomicalStructures(e){return function rLe(t,e){return(0,tr.sortBy)(t.getSubjects(ui.spatialEntity.reference_organ,e,null).map(n=>bp(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function sLe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(bp(t,n.subject.id))},null,ui.spatialEntity.reference_organ,null,null),(0,tr.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=ui.spatial.Male.id;break;case"Female":n=ui.spatial.Female.id;break;default:n=ui.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,n,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ui.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ui.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ui.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ui.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ui.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===n?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(o){if(r)o=new Vn(Vn.IDENTITY).rotateX(F4(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function Cb(t,e,n){const i=new Set;for(const r of e)for(const s of kr(t,r,n,null,null))i.add(s.object.id);return i}const h_=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Dr=(Math,Math,{});function gLe(t,{precision:e=Dr.precision||4}={}){return t=function pLe(t){return Math.round(t/Dr.EPSILON)*Dr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Eh(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tb(t,e,n){const i=Dr.EPSILON;n&&(Dr.EPSILON=n);try{if(t===e)return!0;if(Eh(t)&&Eh(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Tb(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=Dr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Dr.EPSILON=i}}function ll(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}Dr.EPSILON=1e-12,Dr.debug=!1,Dr.precision=4,Dr.printTypes=!1,Dr.printDegrees=!1,Dr.printRowMajor=!0;class QL extends(function wLe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return ll(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}to(e){return e===this?this:Eh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Dr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+gLe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Tb(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){void 0===i&&(i=n,n=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Dr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}}function fo(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function bq(t,e,n=""){if(Dr.debug&&!function xLe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const wq={};function ZL(t,e){wq[t]||(wq[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class ELe extends QL{get ELEMENTS(){return ll(!1),0}copy(e){return ll(!1),this}get x(){return this[0]}set x(e){this[0]=fo(e)}get y(){return this[1]}set y(e){this[1]=fo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return fo(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return fo(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ll(e>=0&&e<this.ELEMENTS,"index is out of range"),fo(this[e])}setComponent(e,n){return ll(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Ia=typeof Float32Array<"u"?Float32Array:Array;function xq(){var t=new Ia(3);return Ia!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Eq(t,e,n){var i=new Ia(3);return i[0]=t,i[1]=e,i[2]=n,i}function Aq(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function LS(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function Sq(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});xq();const eF=[0,0,0],Cq={};class Mn extends ELe{static get ZERO(){return Cq.ZERO=Cq.ZERO||Object.freeze(new Mn(0,0,0,0))}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&Eh(e)?this.copy(e):(Dr.debug&&(fo(e),fo(n),fo(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Dr.debug&&(fo(e.x),fo(e.y),fo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=fo(e)}angle(e){return function OLe(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&Aq(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return LS(this,this,e),this.check()}rotateX({radians:e,origin:n=eF}){return function ILe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=eF}){return function DLe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=eF}){return function RLe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function TLe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o}(this,this,e),this.check()}transformAsVector(e){return function PLe(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return Sq(this,this,e),this.check()}transformByMatrix2(e){return function LLe(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function MLe(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,y=i*h-r*u,w=2*n[3];h*=w,f*=w,m*=2,y*=2,t[0]=a+(u*=w)+(g*=2),t[1]=c+h+m,t[2]=l+f+y}(this,this,e),this.check()}}new Mn,new Mn;const Mb=new Mn,Dq=new Mn;class tF{constructor(e=[0,0,0],n=0){this.radius=-0,this.center=new Mn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=Mb.from(n),this.center=(new Mn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new tF(this.center,this.radius)}union(e){const n=this.center,i=this.radius,s=e.radius,o=Mb.copy(e.center).subtract(n),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return Dq.copy(o).scale((-i+c)/a).add(n),this.center.copy(Dq),this.radius=c,this}expand(e){const n=(e=Mb.from(e)).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);const n=function Iq(t,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(c,l,u),t}(Mb,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const n=(e=Mb.from(e)).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?h_.OUTSIDE:s<i?h_.INTERSECTING:h_.INSIDE}}class ULe extends QL{get ELEMENTS(){return ll(!1),0}get RANK(){return ll(!1),0}toString(){let e="[";if(Dr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=fo(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function Rq(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=n[0],g=n[1],m=n[2],y=n[3],w=n[4],O=n[5],V=n[6],ce=n[7],re=n[8];return t[0]=f*i+g*o+m*l,t[1]=f*r+g*a+m*u,t[2]=f*s+g*c+m*h,t[3]=y*i+w*o+O*l,t[4]=y*r+w*a+O*u,t[5]=y*s+w*c+O*h,t[6]=V*i+ce*o+re*l,t[7]=V*r+ce*a+re*u,t[8]=V*s+ce*c+re*h,t}function Oq(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}!function qLe(){var t=new Ia(2);Ia!=Float32Array&&(t[0]=0,t[1]=0)}();const Nq=Object.freeze([1,0,0,0,1,0,0,0,1]),KLe=Object.freeze([0,0,0,0,0,0,0,0,0]),JLe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),p_={};class sa extends ULe{static get IDENTITY(){return p_.IDENTITY=p_.IDENTITY||Object.freeze(new sa(Nq)),p_.IDENTITY}static get ZERO(){return p_.ZERO=p_.ZERO||Object.freeze(new sa(KLe)),p_.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return JLe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function GLe(t){var r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*s-o*c)+t[1]*(-l*r+o*a)+t[2]*(c*r-s*a)}(this)}identity(){return this.copy(Nq)}fromQuaternion(e){return function YLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,y=s*o,w=s*a,O=s*c;t[0]=1-h-m,t[3]=u-O,t[6]=f+w,t[1]=u+O,t[4]=1-l-m,t[7]=g-y,t[2]=f-w,t[5]=g+y,t[8]=1-l-h}(this,e),this.check()}transpose(){return function HLe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function zLe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=-u*s+a*c,g=l*s-o*c,m=n*h+i*f+r*g;m&&(t[0]=h*(m=1/m),t[1]=(-u*i+r*l)*m,t[2]=(a*i-r*o)*m,t[3]=f*m,t[4]=(u*n-r*c)*m,t[5]=(-a*n+r*s)*m,t[6]=g*m,t[7]=(-l*n+i*c)*m,t[8]=(o*n-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return Rq(this,e,this),this.check()}multiplyRight(e){return Rq(this,this,e),this.check()}rotate(e){return function $Le(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);t[0]=g*i+f*o,t[1]=g*r+f*a,t[2]=g*s+f*c,t[3]=g*o-f*i,t[4]=g*a-f*r,t[5]=g*c-f*s,t[6]=l,t[7]=u,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?Oq(this,this,e):Oq(this,this,[e,e,e]),this.check()}translate(e){return function WLe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=n[0],g=n[1];t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=f*i+g*o+l,t[7]=f*r+g*a+u,t[8]=f*s+g*c+h}(this,this,e),this.check()}transform(e,n){switch(e.length){case 2:n=function XLe(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:n=Sq(n||[-0,-0,-0],e,this);break;case 4:n=function FLe(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return bq(n,e.length),n}transformVector(e,n){return ZL("Matrix3.transformVector"),this.transform(e,n)}transformVector2(e,n){return ZL("Matrix3.transformVector"),this.transform(e,n)}transformVector3(e,n){return ZL("Matrix3.transformVector"),this.transform(e,n)}}function Pq(){var t=new Ia(4);return Ia!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Lq(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Fq(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=i*u+o*a+r*l-s*c,t[1]=r*u+o*c+s*a-i*l,t[2]=s*u+o*l+i*c-r*a,t[3]=o*u-i*a-r*c-s*l,t}!function QLe(){var t=new Ia(4);Ia!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var CFe=function(){var t=xq(),e=Eq(1,0,0),n=Eq(0,1,0);return function(i,r,s){var o=Aq(r,s);return o<-.999999?(LS(t,e,r),function SLe(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&LS(t,n,r),function CLe(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),Lq(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(LS(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function aFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();Pq(),Pq(),function VLe(){var t=new Ia(9);Ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const TFe=[0,0,0,1];class Vq extends QL{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function kq(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}identity(){return function fFe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(e,n){return Lq(this,e,n),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=fo(e)}get y(){return this[1]}set y(e){this[1]=fo(e)}get z(){return this[2]}set z(e){this[2]=fo(e)}get w(){return this[3]}set w(e){this[3]=fo(e)}len(){return function sFe(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function oFe(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e,n){if(void 0!==n)throw new Error("Quaternion.dot only takes one argument");return function cFe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return CFe(this,e,n),this.check()}add(e,n){if(void 0!==n)throw new Error("Quaternion.add only takes one argument");return function iFe(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function _Fe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function wFe(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function bFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return function lFe(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check()}multiplyRight(e,n){return ll(!n),Fq(this,this,e),this.check()}multiplyLeft(e,n){return ll(!n),Fq(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function pFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function gFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function mFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return function rFe(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(this,this,e),this.check()}slerp(e,n,i){switch(arguments.length){case 1:({start:e=TFe,target:n,ratio:i}=arguments[0]);break;case 2:[n,i]=arguments,e=this}return function FS(t,e,n,i){var f,g,m,y,w,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],u=n[2],h=n[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-i)*f)/m,w=Math.sin(i*f)/m):(y=1-i,w=i),t[0]=y*r+w*c,t[1]=y*s+w*l,t[2]=y*o+w*u,t[3]=y*a+w*h,t}(this,e,n,i),this.check()}transformVector4(e,n=e){return function uFe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;t[0]=u*l+g*-o+h*-c-f*-a,t[1]=h*l+g*-a+f*-o-u*-c,t[2]=f*l+g*-c+u*-a-h*-o,t[3]=e[3]}(n,e,this),bq(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e,n){return this.multiplyLeft(e,n)}multiply(e,n){return this.multiplyRight(e,n)}}const MFe=new Mn,IFe=new Mn,kS=new Mn,BS=new Mn,jS=new Mn,DFe=new Mn,RFe=new Mn;class nF{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){this.center=(new Mn).from(e),this.halfAxes=new sa(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Mn(e).len(),new Mn(n).len(),new Mn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Mn(e).normalize(),s=new Mn(n).normalize(),o=new Mn(i).normalize();return(new Vq).fromMatrix3(new sa([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new Vq(i),s=(new sa).fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=(new Mn).from(e),this.halfAxes=s,this}clone(){return new nF(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new tF){const n=this.halfAxes,i=n.getColumn(0,kS),r=n.getColumn(1,BS),s=n.getColumn(2,jS),o=MFe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?h_.OUTSIDE:l>=c?h_.INSIDE:h_.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=IFe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,kS),s=i.getColumn(1,BS),o=i.getColumn(2,jS),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(n.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(n.dot(s))-c,h>0&&(u+=h*h),h=Math.abs(n.dot(o))-l,h>0&&(u+=h*h),u}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,kS),l=a.getColumn(1,BS),u=a.getColumn(2,jS),h=DFe.copy(c).add(l).add(u).add(o),f=RFe.copy(h).subtract(e);let g=n.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).add(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,kS);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,BS);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,jS);return r.transformAsPoint(e),this.halfAxes=new sa([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const Hq=new Mn,zq=new Mn;class iF{constructor(e=[0,0,1],n=0){this.normal=new Mn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return ll(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=Hq.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),ll(Tb(this.normal.len(),1)),this.distance=r,this}clone(e){return new iF(this.normal,this.distance)}equals(e){return Tb(this.distance,e.distance)&&Tb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=zq.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=Hq.from(e);const i=this.getPointDistance(e),r=zq.copy(this.normal).scale(i);return e.subtract(r).to(n)}}new Mn([1,0,0]),new Mn([0,1,0]),new Mn([0,0,1]),new Mn,new Mn,new iF(new Mn(1,0,0),0),new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,new Mn,Math,new sa,new sa,new sa,new sa,new sa,new Mn,new Mn,new Mn,new Mn,new Mn,new sa,new sa,new sa;const ake={[ui.spatialEntity.x_dimension.id]:"x",[ui.spatialEntity.y_dimension.id]:"y",[ui.spatialEntity.z_dimension.id]:"z"};function lke(t,e,n,i){const r=e.getTransformationMatrix(n,i);let s;if(r){const o=r.getTranslation(),a=function cke(t,e){const n=vp(t,e,"Dimensions",ake);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new ps).fromRotationMatrix(r,ps.XYZ).toQuaternion().normalize().calculateW();s=(new nF).fromCenterHalfSizeQuaternion(o,a,c)}return s}function uke(t,e,n,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,u=a/1e3*(a/1e3);for(const h of n){const f=lke(t,e,h,c);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&l.add(h)}return l}function Db(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of kr(t,a,Xn.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function VS(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of kr(t,a,Xn.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function m_(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function lF(t,e,n){const i=new Set;for(const r of n){const s=Ar.namedNode(r);t.forSubjects(m_(e,i),ui.spatialEntity.ccf_annotations,s,null)}return i}function uF(t,e){const n=function Ake(t,e){const n=new Map;for(const i of t)for(const r of kr(e,i,Xn.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id)?.add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const s=n.get(r);for(const o of kr(e,r,ui.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s?.forEach(c=>a?.add(c))}else i.set(o.object.id,new Set(s))}return i}function Mke(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ui.ontologyNode.label.id]:"label",[n]:"parent",[ui.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of NS(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function Yq(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of kr(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=Mke(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,qq(r),r}function qq(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)qq(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const Xq=(0,tr.memoize)(function Ike(t){const e=Yq(t,cl.body.id,"body",ui.asctb.part_of.id);return e.nodes[cl.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function dF(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const HS={[Xn.label.id]:"label",[Xn.description.id]:"description",[Xn.link.id]:"link"},Oke={...HS,[Xn.providerName.id]:"providerName"},Nke={...HS,[Xn.technology.id]:"technology",[Xn.thumbnail.id]:"thumbnail"},Pke={...HS,[Xn.sampleType.id]:"sampleType",[Xn.sectionNumber.id]:"sectionNumber",[Xn.datasets.id]:"datasets"},Lke={...HS,[Xn.sampleType.id]:"sampleType",[Xn.sectionCount.id]:"sectionCount",[Xn.sectionSize.id]:"sectionSize",[Xn.sectionUnits.id]:"sectionUnits",[Xn.donor.id]:"donor",[Xn.spatialEntity.id]:"spatialEntityId",[Xn.sections.id]:"sections",[Xn.datasets.id]:"datasets"};function Fke(t,e){return vp(t,e,"Donor",Oke)}function Kq(t,e){return vp(t,e,"Dataset",Nke)}function kke(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of NS(t,e,Pke))if("datasets"===i){const s=Kq(t,r);n[i].push(s)}else n[i]=r;return n}class jke{constructor(e){this.database=e,this.status="Loading",this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;return D(function*(){e.status="Loading",e.message="Loading database";const n=Date.now();return e.database.connect().then(function(){var i=D(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{e.status="Error",e.message=i?.message??"Unknown error while loading database",e.timestamp=(new Date).toISOString()}).finally(()=>{e.loadTime=Date.now()-n})})()}}function hF(){return hF=D(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),hF.apply(this,arguments)}const fF="http://purl.org/ccf/",Gke={"@context":{"@base":fF,"@vocab":fF,ccf:fF,rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function zS(t,e=Gke){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const Jq={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},Wke={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},Qq=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),$ke={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},__={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},pF="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class Xke{constructor(e,n){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=Wke;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=Jq}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const o=this.getRuiLocation(e,this.donor);o?this.rui_location=o:this.bad=!0,__[e.group_uuid]||(__[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=__[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const u={},h=[];this.sections=h;const f=[];this.datasets=f;for(const O of r.filter(V=>"Sample"===V.entity_type)){const V=this.getSection(O,e);u[O.submission_id]=V,h.push(V),V.section_number=V.section_number??h.length}for(const O of r)if("Dataset"===O.entity_type){const V=this.getDataset(O,n),ce=(0,tr.get)(O,["ingest_metadata","metadata","tissue_id"]);u[ce]?u[ce].datasets?.push(V):f.push(V)}const g=o??{},m=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const y=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=y;const w=g.dimension_units||"millimeter";this.section_units=w,this.description=`${m}, ${y} ${w}, ${this.section_count} Sections`,h.forEach((O,V)=>{O.description=`${g.x_dimension} x ${g.y_dimension} x ${y} ${w}, ${y} ${w}, ${O.description}`,O.section_number=V+1})}getSection(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${__[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=__[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,o=e.dataset_type??"",a=o.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":o.split(/ \[/)[0],l=this.getDatasetThumbnail(e,n)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${s}, ${r}`,description:`Dataset Type: ${o}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,n){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(n?`?token=${n}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,tr.get)(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>Qq.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(n?`?token=${n}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(Qq.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=$ke[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const n=(e.description||"").toLowerCase();let i;n.includes("female")?i="Female":n.includes("male")&&(i="Male");const r=n.match(/age ([0-9]+)/)??n.match(/ ([0-9]+) years/);let s,o,a;r&&(s=(0,tr.toNumber)(r[1]));const c=(0,tr.get)(e,"mapped_metadata",(0,tr.get)(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!s&&c.age_value?.length>0&&(s=c.age_value[0]),!o&&c.body_mass_index_value?.length>0&&(o=c.body_mass_index_value[0]);for(const g of(0,tr.get)(e,"metadata.organ_donor_data",(0,tr.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===g.preferred_term||"Female"===g.preferred_term?i="Female":"Masculine gender"===g.preferred_term||"Male"===g.preferred_term?i="Male":"Current chronological age"===g.preferred_term||"Age"===g.preferred_term?s=(0,tr.toNumber)(g.data_value):"Body mass index"===g.preferred_term?o=(0,tr.toNumber)(g.data_value):"Race"===g.grouping_concept_preferred_term&&(a=g.preferred_term);let l="";i&&s?(l+=`${i}, Age ${s}`,o&&(l+=`, BMI ${o.toFixed(1)}`)):i&&(l=i);const u=new Date(e.last_modified_timestamp).toLocaleDateString(),h=__[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${u}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:s,sex:i,bmi:o,race:a,consortium_name:this.portal===Jq?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=(0,tr.get)(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,tr.set)(i,["placement","target"],s.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&(0,tr.set)(i,["placement","target"],"Male"===n.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,tr.omit)({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const Kke=1e4,Jke=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],Qke={exists:{field:"rui_location"}};function Zq(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??Qke,_source:{includes:Jke}})}function gF(t,e){return mF.apply(this,arguments)}function mF(){return mF=D(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),mF.apply(this,arguments)}function _F(){return _F=D(function*(t,e,n){const i=Kke,r=function Zke(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),s=Zq(0,i,n),o=yield gF(t,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push(gF(t,{method:"POST",headers:r,body:Zq(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const u=l.map(h=>h?.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...u)}}}),_F.apply(this,arguments)}function yF(){return yF=D(function*(t,e,n,i,r="",s=""){let o;if("static"===e?o=yield gF(t):"search-api"===e&&(o=yield function eBe(t,e,n){return _F.apply(this,arguments)}(t,i,n)),o)return function Yke(t,e,n=!1){const r={},s=(0,tr.get)(t,"hits.hits",[]).map(a=>(0,tr.get)(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new Xke(a,e).toJsonLd());for(const a of s){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const o=Object.values(r);return n&&(function qke(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,n++)}i.samples=r.filter(s=>!0!==s.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(o),console.log(o.map(a=>({"@context":pF,...a})))),zS(JSON.stringify({"@context":pF,"@graph":o}),pF)}(o,i);console.warn(`Unable to load ${t}`)}),yF.apply(this,arguments)}const{delMany:nBe,get:eX,setMany:iBe}=F,rBe={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class sBe{constructor(e=rBe){this.options=e,this.store=new IS(void 0,{factory:Ar}),this.graph=new yq(this),this.scene=new vq(this)}connect(e,n=!1){var i=this;return D(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return D(function*(){const n=(new Date).getTime(),i=gPe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield eX(r).catch(()=>{});let a;o&&n-new Date(+o).getTime()>36e5?yield nBe([s,r]).catch(()=>{}):a=yield eX(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),iBe([[s,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return D(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=KL(r,Ar);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=KL(s,Ar))}else r?.length>0&&i.push(r);i.push(yield function Hke(){return hF.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function tBe(t,e,n,i){return yF.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(s=>{if(s)return e.addDataSources([s])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return D(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var s=D(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=zS(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield $L(o,r)}else o.endsWith("n3")?yield function zPe(t,e){return XL.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function HPe(t,e){return qL.apply(this,arguments)}(o,r):(o=zS(o),yield $L(o,r));else o=zS(JSON.stringify(o)),yield $L(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return D(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function zke(t){const e=Xq(t),n=new Map;for(const{subject:i,object:r}of kr(t,null,ui.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;n.set(i.id,[...s].map(a=>Ar.namedNode(a)))}for(const{object:i}of kr(t,null,Xn.spatialEntity,null,null))for(const{subject:r}of kr(t,null,ui.spatialPlacement.source,i,null))for(const{object:s}of kr(t,r,ui.spatialPlacement.target,null,null))for(const o of n.get(s.id)??[])t.addQuad(Ar.namedNode(i.id),ui.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function GPe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return D(function*(){n.store=KL(e,Ar),n.graph=new yq(n),n.scene=new vq(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function hke(t,e,n){let i=function fke(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),Xn.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function xke(t,e,n=!0){const i=new Set;if(t.forSubjects(m_(e,i),Xn.spatialEntity,null,null),!n){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=Db(t,i,s=>function pke(t,e,n){const i=new Set;return t.forSubjects(m_(e,i),Xn.sex,Xn[n],null),i}(t,s,r))}if(i.size>0&&n.consortiums?.length>0&&(i=Db(t,i,r=>function gke(t,e,n){const i=new Set;for(const r of n){const s=Ar.literal(r);t.forSubjects(m_(e,i),Xn.consortiumName,s,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=Db(t,i,r=>function mke(t,e,n){const i=new Set;for(const r of n){const s=Ar.literal(r);t.forSubjects(m_(e,i),Xn.providerName,s,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function dke(t,e,n){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of kr(t,c,Xn.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of kr(t,c,Xn.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=n(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function _ke(t,e,n){const i=new Set;for(const r of n){const s=Ar.literal(r);t.forSubjects(m_(e,i),Xn.technology,s,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=VS(t,i,r=>function Eke(t,e,n,i){const r=new Set;for(const s of i)uke(t,e,n,s).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(cl.body.id)&&(i=VS(t,i,s=>lF(t,s,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(cl.cell.id)&&(i=VS(t,i,s=>function yke(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,ui.asctb.located_in,null),r===cl.cell.id&&i.add(cl.body.id);return lF(t,e,[...i])}(t,s,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=VS(t,i,s=>function vke(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,ui.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(cl.body.id);return lF(t,e,[...i])}(t,s,r)))}if(i.size>0&&2===n.ageRange?.length&&(0,tr.isFinite)(n.ageRange[0])&&(0,tr.isFinite)(n.ageRange[1])){const r=Math.max(...n.ageRange),s=Math.min(...n.ageRange);1===s&&110===r||(i=Db(t,i,o=>function bke(t,e,n,i){const r=new Set;for(const s of e)for(const o of kr(t,s,Xn.age,null,null)){const a=(0,OS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}if(i.size>0&&2===n.bmiRange?.length&&(0,tr.isFinite)(n.bmiRange[0])&&(0,tr.isFinite)(n.bmiRange[1])){const r=Math.max(...n.bmiRange),s=Math.min(...n.bmiRange);13===s&&83===r||(i=Db(t,i,o=>function wke(t,e,n,i){const r=new Set;for(const s of e)for(const o of kr(t,s,Xn.bmi,null,null)){const a=(0,OS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Ar.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function aLe(t,e){const n=t.getObjects(Ar.namedNode(e),Xn.spatialEntity,null);if(n.length>0)return bp(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return D(function*(){return e.status||(e.status=new jke(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return D(function*(){return function uLe(t){const e=new Set;for(const n of kr(t,null,Xn.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return D(function*(){return function dLe(t){const e=new Set;for(const n of kr(t,null,Xn.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return D(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function Bke(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of NS(t,e,Lke))if("sections"===i){const s=kke(t,r);n[i].push(s)}else if("datasets"===i){const s=Kq(t,r);n[i].push(s)}else n[i]="donor"===i?Fke(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return D(function*(){return function lLe(t,e){const n=Cb(e,t,Xn.donor.id),i=Cb(e,n,Xn.providerUUID.id),r=new Set;for(const c of t)for(const l of kr(e,c,Xn.spatialEntity,null,null))r.add(l.subject.id);const s=Cb(e,r,Xn.sections.id),o=new Set([...Cb(e,r,Xn.datasets.id),...Cb(e,s,Xn.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return D(function*(){return function Ske(t,e){const n={};return uF(t,e).forEach((r,s)=>{n[s]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return D(function*(){return function Tke(t,e){const n=uF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of kr(e,null,ui.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[cl.cell.id]=n.get(cl.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return D(function*(){return function Cke(t,e){const n=uF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of kr(e,null,ui.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=n.get(cl.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return D(function*(){return Xq(e.store)})()}getCellTypeTreeModel(){var e=this;return D(function*(){return function Dke(t){return Yq(t,cl.cell.id,"cell",ui.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return D(function*(){return function Rke(t){const e=ui.x("ccf_biomarker_type"),n={biomarkers:dF("biomarkers","Biomarkers","",[])};for(const i of kr(t,null,e,null,null)){const r=i.object.value,s=i.subject.id;n[r]||(n[r]=dF(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(s);const o=dF(s,"",r,[]),a={[ui.ontologyNode.label.id]:"label",[eLe_label.id]:"synonymLabels"};for(const[c,l]of NS(t,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,u)=>n[l]?.label.localeCompare(n[u]?.label));n[s]=o}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return D(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return D(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return D(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return D(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class aBe{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,n){return this.forwardCall("getReferenceOrganScene",e,n)}}class tX extends aBe{forwardCall(e,...n){return this.impl$.pipe(Tr(i=>i[e](...n)))}}let cBe=(()=>{class t extends tX{constructor(n){super(),this.impl$=this.database$=n.config$.pipe(i=>i,Ei(i=>Object.keys(i).length>0),Tr(i=>function oBe(t,e){return new At(n=>{const i=t(),r=e(i);return(r?Cs(r):ko).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),Xt(i=>i.database),ia(1))}connectDatabase(n,i){return D(function*(){return yield n.database.connect(i,!0),n})()}static#e=this.\u0275fac=function(i){return new(i||t)(ot(td))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})(),lBe=(()=>{class t extends cBe{createDatabase(n){return{database:new sBe(n),unsubscribe:()=>{}}}static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Fi(t)))(r||t)}})();static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uBe=(()=>{class t extends tX{constructor(n,i){super(),this.impl$=n.config$.pipe(r=>r,Xt(r=>this.selectToken(r)),tp(),Xt(r=>i.get(r)),ia(1))}static#e=this.\u0275fac=function(i){return new(i||t)(ot(td),ot(Ui))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})();class nX extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class mBe{constructor(){this.cancelUncompleted$=new Qt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const vF="\u0275fac",iX=Symbol("InjectorInstance"),rX=Symbol("FactoryHasBeenDecorated");function sX(t,e){const n=t[iX];return n?n.get(e):null}const vBe={cancelUncompleted:!1};function oX(t=vBe){return(e,n,i)=>{let r;const s=function _Be(t){return t?new mBe:null}(t.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=sX(this,Ju)||function pBe(){throw new nX}(),c=sX(this,_n)||function gBe(){throw new nX}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function fBe(t,e,n){return sm(e)?function hBe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):hh(e)?function dBe(t,e,n){return null!==n&&(e=e.pipe(Ea(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,n,{set:a=>r=a,get:()=>o}),function yBe(t){if(rX in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[vF]&&function bF(t){const e=t[vF];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[iX]=nt(yi),r};n&&(n.factory=i),Object.defineProperty(t,vF,{get:()=>i})}(e),t.constructor.prototype[rX]=!0}(e)}}let aX=(()=>{class t{static#e=this.type="[CallToAction] Learn More"}return t})(),cX=(()=>{class t{static#e=this.type="[CallToAction] Open Dialog"}return t})(),lX=(()=>{class t{static#e=this.type="[CallToAction] Close Dialog"}return t})();function bBe(t,e){}class GS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let uX=(()=>{class t extends HP{constructor(n,i,r,s,o,a,c,l){super(),this._elementRef=n,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._platform=Ot(Ho),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Ot(oo),this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){const i=this._ariaLabelledByQueue.indexOf(n);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),i}attachTemplatePortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,i){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{n.removeEventListener("blur",r),n.removeEventListener("mousedown",r),n.removeAttribute("tabindex")};n.addEventListener("blur",r),n.addEventListener("mousedown",r)})),n.focus(i)}_focusByCssSelector(n,i){let r=this._elementRef.nativeElement.querySelector(n);r&&this._forceFocus(r,i)}_trapFocus(){const n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const n=this._config.restoreFocus;let i=null;if("string"==typeof n?i=this._document.querySelector(n):"boolean"==typeof n?i=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(i=n),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=TP(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const n=this._elementRef.nativeElement,i=TP();return n===i||n.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=TP()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(JW),nt(ai,8),nt(GS),nt(LP),nt(_n),nt(ZA),nt($A))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&js(JA,7),2&i){let s;Hi(s=zi())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&_r("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[gi,ls],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&vi(0,bBe,0,0,"ng-template",0)},dependencies:[JA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class wF{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Qt,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!gh(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const dX=new Et("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=Ot(il);return()=>t.scrollStrategies.block()}}),wBe=new Et("DialogData"),xBe=new Et("DefaultDialogConfig");let ABe=0,SBe=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(n,i,r,s,o,a){this._overlay=n,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Qt,this._afterOpenedAtThisLevel=new Qt,this._ariaHiddenElements=new Map,this.afterAllClosed=qv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ql(void 0))),this._scrollStrategy=a}open(n,i){(i={...this._defaultOptions||new GS,...i}).id=i.id||"cdk-dialog-"+ABe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new wF(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(n,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){xF(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){xF(this._openDialogsAtThisLevel,n=>{!1===n.config.closeOnDestroy&&this._removeOpenDialog(n,!1)}),xF(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){const i=new GP({positionStrategy:n.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation});return n.backdropClass&&(i.backdropClass=n.backdropClass),i}_attachContainer(n,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:GS,useValue:r},{provide:wF,useValue:i},{provide:ZA,useValue:n}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=uX;const c=new VP(a,r.viewContainerRef,Ui.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return n.attach(c).instance}_attachDialogContent(n,i,r,s){if(n instanceof mc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new KA(n,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new VP(n,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(n,i,r,s){const o=n.injector||n.viewContainerRef?.injector,a=[{provide:wBe,useValue:n.data},{provide:wF,useValue:i}];return n.providers&&("function"==typeof n.providers?a.push(...n.providers(i,n,r)):a.push(...n.providers)),n.direction&&(!o||!o.get(Gv,null,{optional:!0}))&&a.push({provide:Gv,useValue:{value:n.direction,change:Zt()}}),Ui.create({parent:o||s,providers:a})}_removeOpenDialog(n,i){const r=this.openDialogs.indexOf(n);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const n=this._overlayContainer.getContainerElement();if(n.parentElement){const i=n.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==n&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(ot(il),ot(Ui),ot(xBe,8),ot(t,12),ot(QA),ot(dX))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xF(t,e){let n=t.length;for(;n--;)e(t[n])}function CBe(t,e){}class EF{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const AF="mdc-dialog--open",hX="mdc-dialog--opening",fX="mdc-dialog--closing";let pX=(()=>{class t extends uX{constructor(n,i,r,s,o,a,c,l,u){super(n,i,r,s,o,a,c,u),this._animationMode=l,this._animationStateChanged=new hn,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?mX(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?mX(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(gX,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(hX,AF)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(AF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(AF),this._animationsEnabled?(this._hostElement.style.setProperty(gX,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(fX)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(n){this._actionSectionCount+=n,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(hX,fX)}_waitForAnimationToComplete(n,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,n)}_requestAnimationFrame(n){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(n):n()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(n){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(n){const i=super.attachComponentPortal(n);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(JW),nt(ai,8),nt(EF),nt(LP),nt(_n),nt(ZA),nt(Ha,8),nt($A))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){2&i&&(Hd("id",r._config.id),_r("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Vi("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[gi,ls],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(en(0,"div",0)(1,"div",1),vi(2,CBe,0,0,"ng-template",2),sn()())},dependencies:[JA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return t})();const gX="--mat-dialog-transition-duration";function mX(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?UW(t.substring(0,t.length-2)):t.endsWith("s")?1e3*UW(t.substring(0,t.length-1)):"0"===t?0:null}var WS=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(WS||{});class $S{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Qt,this._beforeClosed=new Qt,this._state=WS.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ei(r=>"opened"===r.state),Fr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ei(r=>"closed"===r.state),Fr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Jc(this.backdropClick(),this.keydownEvents().pipe(Ei(r=>27===r.keyCode&&!this.disableClose&&!gh(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function _X(t,e,n){return t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ei(n=>"closing"===n.state),Fr(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=WS.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=WS.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const yX=new Et("MatMdcDialogData"),IBe=new Et("mat-mdc-dialog-default-options"),vX=new Et("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=Ot(il);return()=>t.scrollStrategies.block()}});let RBe=0,YS=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(n,i,r,s,o,a,c,l){this._overlay=n,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Qt,this._afterOpenedAtThisLevel=new Qt,this.dialogConfigClass=EF,this.afterAllClosed=qv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ql(void 0))),this._dialog=i.get(SBe),this._dialogRefConstructor=$S,this._dialogContainerType=pX,this._dialogDataToken=yX}open(n,i){let r;(i={...this._defaultOptions||new EF,...i}).id=i.id||"mat-mdc-dialog-"+RBe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(n,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:GS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(n){let i=n.length;for(;i--;)n[i].close()}static#e=this.\u0275fac=function(i){return new(i||t)(ot(il),ot(Ui),ot(Nf,8),ot(IBe,8),ot(vX),ot(t,12),ot(QA),ot(Ha,8))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),OBe=0,bX=(()=>{class t{constructor(n,i,r){this._dialogRef=n,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=function wX(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||t)(nt($S,8),nt(ni),nt(YS))};static#t=this.\u0275dir=Yt({type:t,standalone:!0})}return t})(),SF=(()=>{class t extends bX{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+OBe++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Fi(t)))(r||t)}})();static#t=this.\u0275dir=Yt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Hd("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[gi]})}return t})(),CF=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return t})();let EX=(()=>{class t{constructor(n){this.http=n,this.panelContent=new nr({content:[],infoTitle:"",videoID:""})}updateData(n,i,r){this.http.get(n,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(n){const i=[],r=n.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||t)(ot(nd))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const LBe=["*"];let qS;function Ob(t){return function FBe(){if(void 0===qS&&(qS=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(qS=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return qS}()?.createHTML(t)||t}function AX(t){return Error(`Unable to find icon with the name "${t}"`)}function SX(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function CX(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class wp{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let XS=(()=>{class t{constructor(n,i,r,s){this._httpClient=n,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(n,i,r){return this.addSvgIconInNamespace("",n,i,r)}addSvgIconLiteral(n,i,r){return this.addSvgIconLiteralInNamespace("",n,i,r)}addSvgIconInNamespace(n,i,r,s){return this._addSvgIconConfig(n,i,new wp(r,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,r,s){const o=this._sanitizer.sanitize(ks.HTML,r);if(!o)throw CX(r);const a=Ob(o);return this._addSvgIconConfig(n,i,new wp("",a,s))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,r){return this._addSvgIconSetConfig(n,new wp(i,null,r))}addSvgIconSetLiteralInNamespace(n,i,r){const s=this._sanitizer.sanitize(ks.HTML,i);if(!s)throw CX(i);const o=Ob(s);return this._addSvgIconSetConfig(n,new wp("",o,r))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){const i=this._sanitizer.sanitize(ks.RESOURCE_URL,n);if(!i)throw SX(n);const r=this._cachedIconsByUrl.get(i);return r?Zt(KS(r)):this._loadSvgIconFromConfig(new wp(n,null)).pipe(Yi(s=>this._cachedIconsByUrl.set(i,s)),Xt(s=>KS(s)))}getNamedSvgIcon(n,i=""){const r=TX(i,n);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,n),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(n,o):dh(AX(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?Zt(KS(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(Xt(i=>KS(i)))}_getSvgFromIconSetConfigs(n,i){const r=this._extractIconWithNameFromAnySet(n,i);return r?Zt(r):Mv(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(nl(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(ks.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),Zt(null)})))).pipe(Xt(()=>{const o=this._extractIconWithNameFromAnySet(n,i);if(!o)throw AX(n);return o}))}_extractIconWithNameFromAnySet(n,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,n,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(Yi(i=>n.svgText=i),Xt(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?Zt(null):this._fetchIcon(n).pipe(Yi(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,r){const s=n.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Ob("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(n){const i=this._document.createElement("DIV");i.innerHTML=n;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(n){const i=this._svgElementFromString(Ob("<svg></svg>")),r=n.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){const{url:i,options:r}=n,s=r?.withCredentials??!1;if(!this._httpClient)throw function kBe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(ks.RESOURCE_URL,i);if(!o)throw SX(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Xt(l=>Ob(l)),hp(()=>this._inProgressUrlFetches.delete(o)),Gu());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(n,i,r){return this._svgIconConfigs.set(TX(n,i),r),this}_addSvgIconSetConfig(n,i){const r=this._iconSetConfigs.get(n);return r?r.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){const i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,n);if(s)return jBe(s)?new wp(s.url,null,s.options):new wp(s,null)}}static#e=this.\u0275fac=function(i){return new(i||t)(ot(nd,8),ot(D0),ot(ai,8),ot(Ro))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KS(t){return t.cloneNode(!0)}function TX(t,e){return t+":"+e}function jBe(t){return!(!t.url||!t.options)}const UBe=new Et("MAT_ICON_DEFAULT_OPTIONS"),VBe=new Et("mat-icon-location",{providedIn:"root",factory:function HBe(){const t=Ot(ai),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),MX=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],zBe=MX.map(t=>`[${t}]`).join(", "),GBe=/^url\(['"]?#(.*?)['"]?\)$/;let IX=(()=>{class t{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){const i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){const i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(n,i,r,s,o,a){this._elementRef=n,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=kt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];const i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const n=this._elementsWithExternalReferences;if(n&&n.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){const n=this._elementRef.nativeElement;let i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=n.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return"string"==typeof n?n.trim().split(" ")[0]:n}_prependPathToReferences(n){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${n}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(n){const i=n.querySelectorAll(zBe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)MX.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(GBe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){const[i,r]=this._splitIconName(n);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Fr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(XS),bl("aria-hidden"),nt(VBe),nt(Ro),nt(UBe,8))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){2&i&&(_r("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ru(r.color?"mat-"+r.color:""),Vi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[$t.HasDecoratorInputTransform,"inline","inline",vr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Gc,ls],ngContentSelectors:LBe,decls:1,vars:0,template:function(i,r){1&i&&(Zo(),Ci(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),DX=(()=>{class t{constructor(){this._listeners=[]}notify(n,i){for(let r of this._listeners)r(n,i)}listen(n){return this._listeners.push(n),()=>{this._listeners=this._listeners.filter(i=>n!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const RX=new Et("CdkAccordion");let $Be=0,YBe=(()=>{class t{get expanded(){return this._expanded}set expanded(n){this._expanded!==n&&(this._expanded=n,this.expandedChange.emit(n),n?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(n,i,r){this.accordion=n,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=kt.EMPTY,this.closed=new hn,this.opened=new hn,this.destroyed=new hn,this.expandedChange=new hn,this.id="cdk-accordion-child-"+$Be++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(n=>{this.disabled||(this.expanded=n)})}static#e=this.\u0275fac=function(i){return new(i||t)(nt(RX,12),nt(oo),nt(DX))};static#t=this.\u0275dir=Yt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[$t.HasDecoratorInputTransform,"expanded","expanded",vr],disabled:[$t.HasDecoratorInputTransform,"disabled","disabled",vr]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[wi([{provide:RX,useValue:void 0}]),Gc]})}return t})();const qBe=["body"],XBe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],KBe=["mat-expansion-panel-header","*","mat-action-row"];function JBe(t,e){}const QBe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ZBe=["mat-panel-title","mat-panel-description","*"];function e3e(t,e){1&t&&(en(0,"span",1),En(),en(1,"svg",2),Qi(2,"path",3),sn()()),2&t&&Un("@indicatorRotate",Lr()._getExpandedState())}const OX=new Et("MAT_ACCORDION"),NX="225ms cubic-bezier(0.4,0.0,0.2,1)",PX={indicatorRotate:Yv("indicatorRotate",[yh("collapsed, void",Sa({transform:"rotate(0deg)"})),yh("expanded",Sa({transform:"rotate(180deg)"})),dp("expanded <=> collapsed, void => collapsed",_h(NX))]),bodyExpansion:Yv("bodyExpansion",[yh("collapsed, void",Sa({height:"0px",visibility:"hidden"})),yh("expanded",Sa({height:"*",visibility:""})),dp("expanded <=> collapsed, void => collapsed",_h(NX))])},LX=new Et("MAT_EXPANSION_PANEL");let t3e=(()=>{class t{constructor(n,i){this._template=n,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||t)(nt(mc),nt(LX,8))};static#t=this.\u0275dir=Yt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}return t})(),n3e=0;const FX=new Et("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let kX=(()=>{class t extends YBe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(n){this._hideToggle=n}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(n){this._togglePosition=n}constructor(n,i,r,s,o,a,c){super(n,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new hn,this.afterCollapse=new hn,this._inputChanges=new Qt,this._headerId="mat-expansion-panel-header-"+n3e++,this.accordion=n,this._document=o,this._animationsDisabled="NoopAnimations"===a,c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(ql(null),Ei(()=>this.expanded&&!this._portal),Fr(1)).subscribe(()=>{this._portal=new KA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(n){this._inputChanges.next(n)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){const n=this._document.activeElement,i=this._body.nativeElement;return n===i||i.contains(n)}return!1}_animationStarted(n){!BX(n)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(n){BX(n)||("expanded"===n.toState?this.afterExpand.emit():"collapsed"===n.toState&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static#e=this.\u0275fac=function(i){return new(i||t)(nt(OX,12),nt(oo),nt(DX),nt(Fo),nt(ai),nt(Ha,8),nt(FX,8))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&yc(s,t3e,5),2&i){let o;Hi(o=zi())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&js(qBe,5),2&i){let s;Hi(s=zi())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Vi("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[$t.HasDecoratorInputTransform,"hideToggle","hideToggle",vr],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[wi([{provide:OX,useValue:void 0},{provide:LX,useExisting:t}]),Gc,gi,Cr,ls],ngContentSelectors:KBe,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(1&i){const s=Wa();Zo(XBe),Ci(0),en(1,"div",1,0),oi("@bodyExpansion.start",function(a){return $i(s),Li(r._animationStarted(a))})("@bodyExpansion.done",function(a){return $i(s),Li(r._animationDone(a))}),en(3,"div",2),Ci(4,1),vi(5,JBe,0,0,"ng-template",3),sn(),Ci(6,2),sn()}2&i&&(Kt(),Un("@bodyExpansion",r._getExpandedState())("id",r.id),_r("aria-labelledby",r._headerId),Kt(4),Un("cdkPortalOutlet",r._portal))},dependencies:[JA],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[PX.bodyExpansion]},changeDetection:0})}return t})();function BX(t){return"void"===t.fromState}let i3e=(()=>{class t{constructor(n,i,r,s,o,a,c){this.panel=n,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=kt.EMPTY,this.tabIndex=0;const l=n.accordion?n.accordion._stateChanges.pipe(Ei(u=>!(!u.hideToggle&&!u.togglePosition))):ko;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=Jc(n.opened,n.closed,l,n._inputChanges.pipe(Ei(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),n.closed.pipe(Ei(()=>n._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const n=this._isExpanded();return n&&this.expandedHeight?this.expandedHeight:!n&&this.collapsedHeight?this.collapsedHeight:null}_keydown(n){switch(n.keyCode){case 32:case 13:gh(n)||(n.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(n))}}focus(n,i){n?this._focusMonitor.focusVia(this._element,n,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(n=>{n&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(kX,1),nt(ni),nt($A),nt(oo),nt(FX,8),nt(Ha,8),bl("tabindex"))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&oi("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(_r("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),c0("height",r._getHeaderHeight()),Vi("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[$t.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>null==n?0:A0(n)]},standalone:!0,features:[Gc,ls],ngContentSelectors:ZBe,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){1&i&&(Zo(QBe),en(0,"span",0),Ci(1),Ci(2,1),Ci(3,2),sn(),vi(4,e3e,3,1,"span",1)),2&i&&(Vi("mat-content-hide-toggle",!r._showToggle()),Kt(4),xs(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[PX.indicatorRotate]},changeDetection:0})}return t})();function jX(t,e,n){return n?jX(t,e).pipe(_A(n)):new At(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=t(r);return Ze(e)?()=>e(r,s):void 0})}const r3e=["youtubeContainer"];function s3e(t,e){if(1&t){const n=Wa();en(0,"youtube-player-placeholder",2),oi("click",function(){return $i(n),Li(Lr()._load(!0))}),sn()}if(2&t){const n=Lr();Un("videoId",n.videoId)("width",n.width)("height",n.height)("isLoading",n._isLoading)("buttonLabel",n.placeholderButtonLabel)("quality",n.placeholderImageQuality)}}let o3e=(()=>{class t{_getBackgroundImage(){let n;return n="low"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:"high"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${n})`}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(i,r){2&i&&(c0("background-image",r._getBackgroundImage())("width",r.width,"px")("height",r.height,"px"),Vi("youtube-player-placeholder-loading",r.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},standalone:!0,features:[ls],decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(i,r){1&i&&(en(0,"button",0),En(),en(1,"svg",1),Qi(2,"path",2)(3,"path",3),sn()()),2&i&&_r("aria-label",r.buttonLabel)},styles:[".youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}"],encapsulation:2,changeDetection:0})}return t})();const a3e=new Et("YOUTUBE_PLAYER_CONFIG");function HX(t){return null==t?t:A0(t,0)}let c3e=(()=>{class t{get height(){return this._height}set height(n){this._height=null==n||isNaN(n)?390:n}get width(){return this._width}set width(n){this._width=null==n||isNaN(n)?640:n}constructor(n,i){this._ngZone=n,this._destroyed=new Qt,this._playerChanges=new nr(void 0),this._nonce=Ot(gf,{optional:!0}),this._changeDetectorRef=Ot(oo),this._isLoading=!1,this._hasPlaceholder=!0,this._height=390,this._width=640,this.disableCookies=!1,this.disablePlaceholder=!1,this.showBeforeIframeApiLoads=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");const r=Ot(a3e,{optional:!0});this.loadApi=r?.loadApi??!0,this.disablePlaceholder=!!r?.disablePlaceholder,this.placeholderButtonLabel=r?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=r?.placeholderImageQuality||"standard",this._isBrowser=$d(i)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(n){this._shouldRecreatePlayer(n)?this._conditionallyLoad():this._player&&((n.width||n.height)&&this._setSize(),n.suggestedQuality&&this._setQuality(),(n.startSeconds||n.endSeconds||n.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(n,i){this._player?this._player.seekTo(n,i):this._getPendingState().seek={seconds:n,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(n){this._player?this._player.setVolume(n):this._getPendingState().volume=n}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(n){if(this._player)return this._player.setPlaybackRate(n);this._getPendingState().playbackRate=n}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_load(n){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer(n):(this.loadApi&&(this._isLoading=!0,function l3e(t){if(TF)return;const n=document.createElement("script"),i=r=>{n.removeEventListener("load",i),n.removeEventListener("error",i),"error"===r.type&&(TF=!1)};n.addEventListener("load",i),n.addEventListener("error",i),n.src="https://www.youtube.com/iframe_api",n.async=!0,t&&(n.nonce=t),TF=!0,document.body.appendChild(n)}(this._nonce)),this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(n))}))}_conditionallyLoad(){this._shouldShowPlaceholder()?1===this.playerVars?.autoplay&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return!this.disablePlaceholder&&(!this._isBrowser||this._hasPlaceholder&&!!this.videoId&&!this._player)}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(n){const i=n.videoId||n.playerVars||n.disableCookies||n.disablePlaceholder;return!!i&&!i.isFirstChange()}_createPlayer(n){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const i=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:n?{...this.playerVars||{},autoplay:1}:this.playerVars})),r=()=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=i,this._pendingPlayer=void 0,i.removeEventListener("onReady",r),this._playerChanges.next(i),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(i,this._pendingPlayerState),this._pendingPlayerState=void 0);const s=i.getPlayerState();(s===YT.PlayerState.UNSTARTED||s===YT.PlayerState.CUED||null==s)&&this._cuePlayer(),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=i,i.addEventListener("onReady",r)}_applyPendingPlayerState(n,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:n.playVideo();break;case YT.PlayerState.PAUSED:n.pauseVideo();break;case YT.PlayerState.CUED:n.stopVideo()}null!=s&&n.setPlaybackRate(s),null!=o&&n.setVolume(o),null!=a&&(a?n.mute():n.unMute()),null!=c&&n.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(n){return this._playerChanges.pipe(Tr(i=>i?jX(r=>{i.addEventListener(n,r)},r=>{try{i?.removeEventListener?.(n,r)}catch{}}):Zt()),i=>new At(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),Ea(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||t)(nt(_n),nt(Va))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&js(r3e,7),2&i){let s;Hi(s=zi())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:[$t.HasDecoratorInputTransform,"height","height",A0],width:[$t.HasDecoratorInputTransform,"width","width",A0],startSeconds:[$t.HasDecoratorInputTransform,"startSeconds","startSeconds",HX],endSeconds:[$t.HasDecoratorInputTransform,"endSeconds","endSeconds",HX],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[$t.HasDecoratorInputTransform,"disableCookies","disableCookies",vr],loadApi:[$t.HasDecoratorInputTransform,"loadApi","loadApi",vr],disablePlaceholder:[$t.HasDecoratorInputTransform,"disablePlaceholder","disablePlaceholder",vr],showBeforeIframeApiLoads:[$t.HasDecoratorInputTransform,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",vr],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},standalone:!0,features:[Gc,Cr,ls],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(i,r){1&i&&(vi(0,s3e,1,6,"youtube-player-placeholder",1),en(1,"div"),Qi(2,"div",null,0),sn()),2&i&&(xs(0,r._shouldShowPlaceholder()?0:-1),Kt(),c0("display",r._shouldShowPlaceholder()?"none":""))},dependencies:[o3e],encapsulation:2,changeDetection:0})}return t})(),TF=!1;let xp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function zX(t){xp=t}const GX=/[&<>"']/,u3e=new RegExp(GX.source,"g"),WX=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,d3e=new RegExp(WX.source,"g"),h3e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$X=t=>h3e[t];function nc(t,e){if(e){if(GX.test(t))return t.replace(u3e,$X)}else if(WX.test(t))return t.replace(d3e,$X);return t}const f3e=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function p3e(t){return t.replace(f3e,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const g3e=/(^|[^\[])\^/g;function Gi(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(g3e,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}function YX(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const JS={exec:()=>null};function qX(t,e){const i=t.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function QS(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.slice(0,i-r)}function XX(t,e,n,i){const r=e.href,s=e.title?nc(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:nc(o)}}class ZS{options;rules;lexer;constructor(e){this.options=e||xp}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:QS(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function _3e(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=QS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=QS(n[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let u=!1;if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let h=n[2].split("\n",1)[0].replace(/^\t+/,O=>" ".repeat(3*O.length)),f=e.split("\n",1)[0],g=0;this.options.pedantic?(g=2,c=h.trimStart()):(g=n[2].search(/[^ ]/),g=g>4?1:g,c=h.slice(g),g+=n[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),u=!0),!u){const O=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ce=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const Ie=e.split("\n",1)[0];if(f=Ie,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ce.test(f)||re.test(f)||O.test(f)||V.test(e))break;if(f.search(/[^ ]/)>=g||!f.trim())c+="\n"+f.slice(g);else{if(m||h.search(/[^ ]/)>=4||ce.test(h)||re.test(h)||V.test(h))break;c+="\n"+f}!m&&!f.trim()&&(m=!0),a+=Ie+"\n",e=e.substring(Ie.length+1),h=f.slice(g)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let w,y=null;this.options.gfm&&(y=/^\[[ xX]\] /.exec(c),y&&(w="[ ] "!==y[0],c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!y,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(g=>"space"===g.type),f=h.length>0&&h.some(g=>/\n.*\n/.test(g.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:"pre"===n[1]||"script"===n[1]||"style"===n[1],text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){if(!/[:|]/.test(n[2]))return;const i={type:"table",raw:n[0],header:qX(n[1]).map(r=>({text:r,tokens:[]})),align:n[2].replace(/^\||\| *$/g,"").split("|"),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let s,o,a,c,r=i.align.length;for(s=0;s<r;s++){const l=i.align[s];l&&(i.align[s]=/^ *-+: *$/.test(l)?"right":/^ *:-+: *$/.test(l)?"center":/^ *:-+ *$/.test(l)?"left":null)}for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=qX(i.rows[s],i.header.length).map(l=>({text:l,tokens:[]}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:nc(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=QS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function m3e(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}(n[2],"()");if(o>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),XX(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return XX(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,c,l=o,u=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=nc(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,r;return"@"===n[2]?(i=nc(n[1]),r="mailto:"+i):(i=nc(n[1]),r=i),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let i,r;if("@"===n[2])i=nc(n[0]),r="mailto:"+i;else{let s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(s!==n[0]);i=nc(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return i=this.lexer.state.inRawBlock?n[0]:nc(n[0]),{type:"text",raw:n[0],text:i}}}}const Sn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:JS,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Sn.def=Gi(Sn.def).replace("label",Sn._label).replace("title",Sn._title).getRegex(),Sn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Sn.listItemStart=Gi(/^( *)(bull) */).replace("bull",Sn.bullet).getRegex(),Sn.list=Gi(Sn.list).replace(/bull/g,Sn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Sn.def.source+")").getRegex(),Sn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Sn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Sn.html=Gi(Sn.html,"i").replace("comment",Sn._comment).replace("tag",Sn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Sn.lheading=Gi(Sn.lheading).replace(/bull/g,Sn.bullet).getRegex(),Sn.paragraph=Gi(Sn._paragraph).replace("hr",Sn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sn._tag).getRegex(),Sn.blockquote=Gi(Sn.blockquote).replace("paragraph",Sn.paragraph).getRegex(),Sn.normal={...Sn},Sn.gfm={...Sn.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Sn.gfm.table=Gi(Sn.gfm.table).replace("hr",Sn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sn._tag).getRegex(),Sn.gfm.paragraph=Gi(Sn._paragraph).replace("hr",Sn.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Sn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Sn._tag).getRegex(),Sn.pedantic={...Sn.normal,html:Gi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Sn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:JS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Gi(Sn.normal._paragraph).replace("hr",Sn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Sn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const on={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:JS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:JS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};on.punctuation=Gi(on.punctuation,"u").replace(/punctuation/g,on._punctuation).getRegex(),on.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,on.anyPunctuation=/\\[punct]/g,on._escapes=/\\([punct])/g,on._comment=Gi(Sn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),on.emStrong.lDelim=Gi(on.emStrong.lDelim,"u").replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimAst=Gi(on.emStrong.rDelimAst,"gu").replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimUnd=Gi(on.emStrong.rDelimUnd,"gu").replace(/punct/g,on._punctuation).getRegex(),on.anyPunctuation=Gi(on.anyPunctuation,"gu").replace(/punct/g,on._punctuation).getRegex(),on._escapes=Gi(on._escapes,"gu").replace(/punct/g,on._punctuation).getRegex(),on._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,on._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,on.autolink=Gi(on.autolink).replace("scheme",on._scheme).replace("email",on._email).getRegex(),on._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,on.tag=Gi(on.tag).replace("comment",on._comment).replace("attribute",on._attribute).getRegex(),on._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,on._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,on._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,on.link=Gi(on.link).replace("label",on._label).replace("href",on._href).replace("title",on._title).getRegex(),on.reflink=Gi(on.reflink).replace("label",on._label).replace("ref",Sn._label).getRegex(),on.nolink=Gi(on.nolink).replace("ref",Sn._label).getRegex(),on.reflinkSearch=Gi(on.reflinkSearch,"g").replace("reflink",on.reflink).replace("nolink",on.nolink).getRegex(),on.normal={...on},on.pedantic={...on.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Gi(/^!?\[(label)\]\((.*?)\)/).replace("label",on._label).getRegex(),reflink:Gi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",on._label).getRegex()},on.gfm={...on.normal,escape:Gi(on.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},on.gfm.url=Gi(on.gfm.url,"i").replace("email",on.gfm._extended_email).getRegex(),on.breaks={...on.gfm,br:Gi(on.br).replace("{2,}","*").getRegex(),text:Gi(on.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class tu{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xp,this.options.tokenizer=this.options.tokenizer||new ZS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Sn.normal,inline:on.normal};this.options.pedantic?(n.block=Sn.pedantic,n.inline=on.pedantic):this.options.gfm&&(n.block=Sn.gfm,n.inline=this.options.breaks?on.breaks:on.gfm),this.tokenizer.rules=n}static get rules(){return{block:Sn,inline:on}}static lex(e,n){return new tu(n).lex(e)}static lexInline(e,n){return new tu(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),"number"==typeof f&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return n}}class Ep{options;constructor(e){this.options=e||xp}code(e,n,i){const r=(n||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+nc(r)+'">'+(i?e:nc(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:nc(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,n){return e}heading(e,n,i){return`<h${n}>${e}</h${n}>\n`}hr(){return"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,n,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){const r=YX(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return n&&(s+=' title="'+n+'"'),s+=">"+i+"</a>",s}image(e,n,i){const r=YX(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class IF{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class nu{options;renderer;textRenderer;constructor(e){this.options=e||xp,this.options.renderer=this.options.renderer||new Ep,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new IF}static parse(e,n){return new nu(n).parse(e)}static parseInline(e,n){return new nu(n).parseInline(e)}parse(e,n=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,p3e(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",c="";for(let u=0;u<o.header.length;u++)c+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(c);let l="";for(let u=0;u<o.rows.length;u++){const h=o.rows[u];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,c=o.start,l=o.loose;let u="";for(let h=0;h<o.items.length;h++){const f=o.items[h],g=f.checked,m=f.task;let y="";if(f.task){const w=this.renderer.checkbox(!!g);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=w+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=w+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:w+" "}):y+=w+" "}y+=this.parse(f.tokens,l),u+=this.renderer.listitem(y,m,!!g)}i+=this.renderer.list(u,a,c);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=n.text(s.text);break;case"html":i+=n.html(s.text);break;case"link":i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break;case"image":i+=n.image(s.href,s.title,s.text);break;case"strong":i+=n.strong(this.parseInline(s.tokens,n));break;case"em":i+=n.em(this.parseInline(s.tokens,n));break;case"codespan":i+=n.codespan(s.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(s.tokens,n));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class eC{options;constructor(e){this.options=e||xp}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const Ap=new class y3e{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(tu.lex,nu.parse);parseInline=this.#e(tu.lexInline,nu.parseInline);Parser=nu;Renderer=Ep;TextRenderer=IF;Lexer=tu;Tokenizer=ZS;Hooks=eC;constructor(...e){this.use(...e)}walkTokens(e,n){let i=[];for(const r of e)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,n));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,n));break}case"list":i=i.concat(this.walkTokens(r.items,n));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{i=i.concat(this.walkTokens(s[o],n))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];n.renderers[s.name]=o?function(...a){let c=s.renderer.apply(this,a);return!1===c&&(c=o.apply(this,a)),c}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&("block"===s.level?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:"inline"===s.level&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),i.renderer){const s=this.defaults.renderer||new Ep(this.defaults);for(const o in i.renderer){const a=i.renderer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new ZS(this.defaults);for(const o in i.tokenizer){const a=i.tokenizer[o],l=s[o];s[o]=(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new eC;for(const o in i.hooks){const a=i.hooks[o],l=s[o];s[o]=eC.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(f=>l.call(s,f));const h=a.call(s,u);return l.call(s,h)}:(...u)=>{let h=a.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return tu.lex(e,n??this.defaults)}parser(e,n){return nu.parse(e,n??this.defaults)}#e(e,n){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>n(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));const c=e(i,o);o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=n(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+nc(i.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(i);throw i}}};function Ni(t,e){return Ap.parse(t,e)}Ni.options=Ni.setOptions=function(t){return Ap.setOptions(t),zX(Ni.defaults=Ap.defaults),Ni},Ni.getDefaults=function MF(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ni.defaults=xp,Ni.use=function(...t){return Ap.use(...t),zX(Ni.defaults=Ap.defaults),Ni},Ni.walkTokens=function(t,e){return Ap.walkTokens(t,e)},Ni.parseInline=Ap.parseInline,Ni.Parser=nu,Ni.parser=nu.parse,Ni.Renderer=Ep,Ni.TextRenderer=IF,Ni.Lexer=tu,Ni.lexer=tu.lex,Ni.Tokenizer=ZS,Ni.Hooks=eC,Ni.parse=Ni;const v3e=["*"];let KX=(()=>{class t{constructor(){this._buttonClick$=new Qt,this.copied$=this._buttonClick$.pipe(Tr(()=>Jc(Zt(!0),BP(3e3).pipe(YP(!1)))),tp(),ia(1)),this.copiedText$=this.copied$.pipe(ql(!1),Xt(n=>n?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["markdown-clipboard"]],standalone:!0,features:[ls],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(en(0,"button",0),qr(1,"async"),oi("click",function(){return r.onCopyToClipboardClick()}),Es(2),qr(3,"async"),sn()),2&i&&(Vi("copied",Xr(1,3,r.copied$)),Kt(2),qc(Xr(3,5,r.copiedText$)))},dependencies:[C0],encapsulation:2,changeDetection:0})}return t})();const x3e=new Et("CLIPBOARD_OPTIONS");var DF=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(DF||{});const JX=new Et("MARKED_EXTENSIONS"),A3e=new Et("MARKED_OPTIONS"),QX=new Et("SECURITY_CONTEXT");let RF=(()=>{class t{get options(){return this._options}set options(n){this._options={...this.DEFAULT_MARKED_OPTIONS,...n}}get renderer(){return this.options.renderer}set renderer(n){this.options.renderer=n}constructor(n,i,r,s,o,a,c){this.clipboardOptions=n,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Ep},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Qt,this.reload$=this._reload$.asObservable(),this.options=r}parse(n,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},u=l.renderer||this.renderer||new Ep;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const h=this.trimIndentation(n),f=r?this.decodeHtml(h):h,g=o?this.parseEmoji(f):f,m=this.parseMarked(g,l,s);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(n,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:c,mermaid:l,mermaidOptions:u}=i;s&&this.renderClipboard(n,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),a&&this.renderKatex(n,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(n,{...this.DEFAULT_MERMAID_OPTIONS,...u}),this.highlight(n)}reload(){this._reload$.next()}getSource(n){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(n,{responseType:"text"}).pipe(Xt(i=>this.handleExtension(n,i)))}highlight(n){if(!$d(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;n||(n=document);const i=n.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(n)}decodeHtml(n){if(!$d(this.platform))return n;const i=document.createElement("textarea");return i.innerHTML=n,i.value}extendsRendererForExtensions(n){const i=n;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Ni.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),n}extendsRendererForMermaid(n){const i=n;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return n;const r=n.code;return n.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,n}handleExtension(n,i){const r=n.lastIndexOf("://"),s=r>-1?n.substring(r+4):n,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(n,i,r=!1){if(i.renderer){const s={...i.renderer};delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Ni.use({renderer:s})}return r?Ni.parseInline(n,i):Ni.parse(n,i)}parseEmoji(n){if(!$d(this.platform))return n;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(n)}renderKatex(n,i){if($d(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(n,i)}}renderClipboard(n,i,r){if(!$d(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=n.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),u=document.createElement("div");u.style.position="relative",l.parentNode.insertBefore(u,l),u.appendChild(l);const h=document.createElement("div");let f,g;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",u.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=s?i.createComponent(s).hostView:o?i.createEmbeddedView(o):i.createComponent(KX).hostView,f.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),g=new ClipboardJS(m,{text:()=>l.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(n,i=this.DEFAULT_MERMAID_OPTIONS){if(!$d(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=n.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(n){if(!n)return"";let i;return n.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||t)(ot(x3e,8),ot(JX,8),ot(A3e,8),ot(Va),ot(QX),ot(nd,8),ot(D0))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac})}return t})(),ZX=(()=>{class t{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(n){this._disableSanitizer=this.coerceBooleanProperty(n)}get inline(){return this._inline}set inline(n){this._inline=this.coerceBooleanProperty(n)}get clipboard(){return this._clipboard}set clipboard(n){this._clipboard=this.coerceBooleanProperty(n)}get emoji(){return this._emoji}set emoji(n){this._emoji=this.coerceBooleanProperty(n)}get katex(){return this._katex}set katex(n){this._katex=this.coerceBooleanProperty(n)}get mermaid(){return this._mermaid}set mermaid(n){this._mermaid=this.coerceBooleanProperty(n)}get lineHighlight(){return this._lineHighlight}set lineHighlight(n){this._lineHighlight=this.coerceBooleanProperty(n)}get lineNumbers(){return this._lineNumbers}set lineNumbers(n){this._lineNumbers=this.coerceBooleanProperty(n)}get commandLine(){return this._commandLine}set commandLine(n){this._commandLine=this.coerceBooleanProperty(n)}constructor(n,i,r){this.element=n,this.markdownService=i,this.viewContainerRef=r,this.error=new hn,this.load=new hn,this.ready=new hn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Qt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Ea(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(n,i=!1){var r=this;return D(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(n,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(n){return null!=n&&"false"!=`${String(n)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:n=>{this.render(n).then(()=>{this.load.emit(n)})},error:n=>this.error.emit(n)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,DF.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,DF.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const c=this.toLispCase(o);r.item(s).setAttribute(c,a.toString())}})}toLispCase(n){const i=n.match(/([A-Z])/g);if(!i)return n;let r=n.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt(RF),nt(Fo))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Cr,ls],ngContentSelectors:v3e,decls:1,vars:0,template:function(i,r){1&i&&(Zo(),Ci(0))},encapsulation:2})}return t})();var eK;function O3e(t,e){if(1&t&&(en(0,"div",16),Qi(1,"youtube-player",17),sn()),2&t){const n=Lr(3);Kt(),FI("videoId",n.videoID)}}function N3e(t,e){if(1&t&&(en(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Es(3),sn()(),en(4,"div",13),Qi(5,"markdown",14),vi(6,O3e,2,1,"div",15),sn()()),2&t){const n=Lr(),i=n.$implicit,r=n.index;Un("expanded",0===r),Kt(3),qc(i.title),Kt(2),Vi("first",0===r),Un("data",i.content),Kt(),Un("ngIf",0===r)}}function P3e(t,e){if(1&t&&(en(0,"div",9),vi(1,N3e,7,6,"mat-expansion-panel",10),sn()),2&t){const n=e.$implicit;Kt(),Un("ngIf",n)}}!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(eK||(eK={}));let L3e=(()=>{class t{constructor(n,i){this.dialogRef=n,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.body.appendChild(n)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||t)(nt($S),nt(yX))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(en(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Es(5),sn(),en(6,"div",5)(7,"mat-icon",6),oi("click",function(){return r.close()}),Es(8,"clear"),sn()()(),en(9,"mat-dialog-content",7),vi(10,P3e,2,1,"div",8),sn()()()()),2&i&&(Kt(5),qc(r.infoTitle),Kt(5),Un("ngForOf",r.documentationContents))},dependencies:[cm,yD,SF,CF,IX,kX,i3e,c3e,ZX],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return t})();class Dc{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&e&&0!==e.length?e:void 0}})();get length(){return Dc.storage?.length??0}key(e){return Dc.storage?.key(e)??null}getItem(e,n){return Dc.storage?.getItem(e)??n??null}setItem(e,n){try{return Dc.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Dc.storage?.removeItem(e)}clear(){Dc.storage?.clear()}static#t=this.\u0275fac=function(n){return new(n||Dc)};static#n=this.\u0275prov=It({token:Dc,factory:Dc.\u0275fac,providedIn:"root"})}var OF;const tK="callToActionPopupShown";let ul=class nC{static#e=OF=this;static ctaDatePassed(e,n=Date.now){return+n()>+new Date(e)}constructor(e,n,i,r,s){this.dialog=e,this.ga=n,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:n,popupShown:i}=e.getState(),r=this.storage.getItem(tK,`${i}`),s=OF.ctaDatePassed(n);"true"!==r&&!s&&e.dispatch(new cX)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Xt(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(L3e,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Yi(n=>this.launchLearnMore(n)))}open(e){this.dialog.open(ru,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(tK,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(n){return new(n||nC)(ot(YS),ot(o_),ot(Dc),ot(EX),ot(nd))};static#n=this.\u0275prov=It({token:nC,factory:nC.\u0275fac})};Hn([tP(aX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],ul.prototype,"learnMore",null),Hn([tP(cX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],ul.prototype,"open",null),Hn([tP(lX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],ul.prototype,"close",null),ul=OF=Hn([nP({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),jt("design:paramtypes",[YS,o_,Dc,EX,nd])],ul);class iu{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],iu,"title",null),Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],iu,"message",null),Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],iu,"callToAction",null),Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],iu,"imageUrl",null),Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],iu,"expirationDate",null),Hn([Wm([ul]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",Boolean)],iu,"popupShown",null);let nK=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Yt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"],standalone:!0})}return t})(),Q3e=(()=>{class t{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new hn,this.closeClicked=new hn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Ru(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"click","text"]],template:function(i,r){1&i&&(en(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Es(5),sn(),en(6,"mat-icon",5),oi("click",function(){return r.close()}),Es(7,"clear"),sn()(),Qi(8,"img",6),en(9,"mat-dialog-content",7)(10,"div",8),Es(11),sn(),en(12,"a",9),oi("click",function(){return r.onDialogButtonClick()}),sn()()()()()),2&i&&(Kt(5),qc(r.infoTitle),Kt(3),Un("src",r.imageUrl,Iy),Kt(3),qc(r.message),Kt(),Un("text",r.callToAction))},dependencies:[IX,SF,CF,nK],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return t})();class ru{constructor(){this.close=()=>new lX,this.learnMore=()=>new aX}static#e=this.\u0275fac=function(n){return new(n||ru)};static#t=this.\u0275cmp=Zn({type:ru,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"callToActionClicked","closeClicked","infoTitle","message","callToAction","imageUrl"]],template:function(n,i){if(1&n&&(en(0,"ccf-call-to-action",0),qr(1,"async"),qr(2,"async"),qr(3,"async"),qr(4,"async"),oi("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),sn()),2&n){let r,s,o,a;Un("infoTitle",null!==(r=Xr(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=Xr(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=Xr(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=Xr(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[Q3e,C0],changeDetection:0})}Hn([AA(iu.title),jt("design:type",At)],ru.prototype,"title$",void 0),Hn([AA(iu.message),jt("design:type",At)],ru.prototype,"message$",void 0),Hn([AA(iu.callToAction),jt("design:type",At)],ru.prototype,"callToAction$",void 0),Hn([AA(iu.imageUrl),jt("design:type",At)],ru.prototype,"imageUrl$",void 0),Hn([oX(),jt("design:type",Object)],ru.prototype,"close",void 0),Hn([oX(),jt("design:type",Object)],ru.prototype,"learnMore",void 0);const Z3e={initialConfig:{},parse:{},rename:{}};class eje{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...Z3e,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,n,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=n.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[o]=a}}let tje=(()=>{class t{constructor(n,i,r={}){this.configState=n,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new eje(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(n){this.configManager.addChanges(n),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function gc(){throw new Error("invalid")}()};static#t=this.\u0275dir=Yt({type:t,features:[Cr]})}return t})();const NF={boolean:t=>"false"!=`${t}`,json:t=>"string"==typeof t?JSON.parse(t):t,stringArray:t=>"string"==typeof t?Array.from(t).filter(e=>!"[], ".includes(e)):t,function:t=>{if("function"!=typeof t)throw new Error("Expected a javascript function");return t}},Sp_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};let nje=(()=>{class t{constructor(n){this.source=n,this.organs=J7}getOrganInfo(n,i,r="Female"){let s=this.organs.find(a=>a.id===n);if(!s)return Zt(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),s?.side&&i&&s.side!==i&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===i)),Zt(s)}getOrgan(n,i="Both"){return this.source.getReferenceOrgans().pipe(Xt(r=>r.find(s=>s.representation_of===n.id&&("Both"===i||s.sex===i))))}getOrganScene(n,i="Female"){return n.id?this.source.getReferenceOrganScene(n.id,{ontologyTerms:[n.id],sex:i}):Zt([])}getOrganStats(n,i="Female"){return n.id?this.source.getAggregateResults({ontologyTerms:[n.id],sex:i}):Zt([])}getBlocks(n,i="Female"){return n.id?this.source.getTissueBlockResults({ontologyTerms:[n.id],sex:i}):Zt([])}static#e=this.\u0275fac=function(i){return new(i||t)(ot(SY))};static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ije(t,e){if(1&t){const n=Wa();en(0,"div",6)(1,"div",7)(2,"div",8),Es(3),sn(),en(4,"div",9),oi("click",function(){const r=$i(n).$implicit;return Li(Lr().goToURL(r.buttonUrl))}),Es(5),sn()()()}if(2&t){const n=e.$implicit;Kt(3),qc(n.body),Kt(),Un("gaLabel",n.buttonUrl),Kt(),Il(" ",n.buttonTitle," ")}}function rje(t,e){if(1&t){const n=Wa();en(0,"div",10),oi("click",function(){const r=$i(n).$implicit;return Li(Lr().goToURL(r.buttonUrl))}),Es(1),sn()}if(2&t){const n=e.$implicit;Un("gaLabel",n.buttonUrl),Kt(),Il(" ",n.buttonTitle," ")}}let sje=(()=>{class t{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}ngOnInit(){const n=[this.ruiUrl,this.euiUrl,this.asctbUrl],i=[this.hraPortalUrl,this.onlineCourseUrl,this.paperUrl];this.linkCards=this.linkCards.map((r,s)=>({...r,buttonUrl:n[s]??r.buttonUrl})),this.deepDives=this.deepDives.map((r,s)=>({...r,buttonUrl:i[s]??r.buttonUrl}))}goToURL(n){window.open(n,"_blank")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-link-cards"]],inputs:{ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"click","gaLabel"],["gaEvent","visit-link",1,"btn-outline","btn",3,"click","gaLabel"]],template:function(i,r){1&i&&(en(0,"div",0),vi(1,ije,6,3,"div",1),sn(),en(2,"div",2)(3,"div",3),Es(4,"Human Reference Atlas (HRA) Deep Dive"),sn(),en(5,"div",4),vi(6,rje,2,2,"div",5),sn()()),2&i&&(Kt(),Un("ngForOf",r.linkCards),Kt(5),Un("ngForOf",r.deepDives))},dependencies:[cm,cNe,wY],styles:['.link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444a65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444a65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,Helvetica,Arial,sans-serif}'],changeDetection:0})}return t})();function oje(t,e){if(1&t&&(en(0,"div",3)(1,"div",4),Es(2),sn(),en(3,"div",5),Es(4),sn()()),2&t){const n=e.$implicit;Kt(2),qc(n.count),Kt(2),qc(n.label)}}let aje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(en(0,"div",0)(1,"div",1),Es(2),sn(),vi(3,oje,5,2,"div",2),sn()),2&i&&(Kt(2),Il(" ",r.statsLabel," "),Kt(),Un("ngForOf",r.stats))},dependencies:[cm],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0})}return t})();const cje=["switch"],lje=["*"];function uje(t,e){1&t&&(en(0,"div",10),En(),en(1,"svg",12),Qi(2,"path",13),sn(),en(3,"svg",14),Qi(4,"path",15),sn()())}const dje=new Et("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),hje={provide:Tc,useExisting:$n(()=>PF),multi:!0};class iK{constructor(e,n){this.source=e,this.checked=n}}let fje=0,PF=(()=>{class t{_createChangeEvent(n){return new iK(this,n)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(n){this._checked=n,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(n,i,r,s,o,a){this._elementRef=n,this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new hn,this.toggleChange=new hn,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++fje,this.hideIcon=o.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{"keyboard"===n||"program"===n?(this._focused=!0,this._changeDetectorRef.markForCheck()):n||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(n){n.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(n){this.checked=!!n}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}validate(n){return this.required&&!0!==n.value?{required:!0}:null}registerOnValidatorChange(n){this._validatorOnChange=n}setDisabledState(n){this.disabled=n,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new iK(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||t)(nt(ni),nt($A),nt(oo),bl("tabindex"),nt(dje),nt(Ha,8))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&js(cje,5),2&i){let s;Hi(s=zi())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){2&i&&(Hd("id",r.id),_r("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Ru(r.color?"mat-"+r.color:""),Vi("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[$t.None,"aria-label","ariaLabel"],ariaLabelledby:[$t.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[$t.None,"aria-describedby","ariaDescribedby"],required:[$t.HasDecoratorInputTransform,"required","required",vr],color:"color",disabled:[$t.HasDecoratorInputTransform,"disabled","disabled",vr],disableRipple:[$t.HasDecoratorInputTransform,"disableRipple","disableRipple",vr],tabIndex:[$t.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>null==n?0:A0(n)],checked:[$t.HasDecoratorInputTransform,"checked","checked",vr],hideIcon:[$t.HasDecoratorInputTransform,"hideIcon","hideIcon",vr]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[wi([hje,{provide:Js,useExisting:t,multi:!0}]),Gc,Cr,ls],ngContentSelectors:lje,decls:13,vars:24,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i){const s=Wa();Zo(),en(0,"div",1)(1,"button",2,0),oi("click",function(){return $i(s),Li(r._handleClick())}),Qi(3,"div",3),en(4,"div",4)(5,"div",5)(6,"div",6),Qi(7,"div",7),sn(),en(8,"div",8),Qi(9,"div",9),sn(),vi(10,uje,5,0,"div",10),sn()()(),en(11,"label",11),oi("click",function(a){return $i(s),Li(a.stopPropagation())}),Ci(12),sn()()}if(2&i){const s=Df(2);Un("labelPosition",r.labelPosition),Kt(),Vi("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),Un("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled),_r("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Kt(8),Un("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Kt(),xs(10,r.hideIcon?-1:10),Kt(),Un("for",r.buttonId),_r("id",r._labelId)}},dependencies:[f7,zMe],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}.mdc-switch{width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mdc-switch__handle{transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--selected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--unselected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch__track::after,.mdc-switch__track::before{border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color)}.mdc-switch--selected .mdc-switch__track::after,.mdc-switch--selected .mdc-switch__track::before{border-width:var(--mat-switch-selected-track-outline-width)}.mdc-switch--disabled .mdc-switch__track::after,.mdc-switch--disabled .mdc-switch__track::before{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}'],encapsulation:2,changeDetection:0})}return t})(),mje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[PF,o7,o7]})}return t})(),_je=(()=>{class t{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new hn}get left(){const{value:n,labels:i}=this;return n!==i[1]}updateToggle(n){this.value=n?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&Ru(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[["toggle",""],[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"change","disabled","checked"]],template:function(i,r){if(1&i){const s=Wa();en(0,"span",1),oi("click",function(){$i(s);const a=Df(3);return r.left||a.toggle(),Li(r.updateToggle(!0))}),Es(1),sn(),en(2,"mat-slide-toggle",2,0),oi("change",function(a){return $i(s),Li(r.updateToggle(!a.checked))}),sn(),en(4,"span",1),oi("click",function(){$i(s);const a=Df(3);return r.left&&a.toggle(),Li(r.updateToggle(!1))}),Es(5),sn()}2&i&&(Vi("disabled",r.disabled)("highlighted",r.left),Kt(),Il(" ",r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1),"\n"),Kt(),Un("disabled",r.disabled)("checked",!r.left),Kt(2),Vi("disabled",r.disabled)("highlighted",!r.left),Kt(),Il(" ",r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1),"\n"))},dependencies:[PF],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0})}return t})();const yje=["bodyUI"],vje=()=>["Male","Female"],bje=()=>["Left","Right"];let wje=(()=>{class t{constructor(n){this.ga=n,this.sexChange=new hn,this.sideChange=new hn,this.nodeClick=new hn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const n=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(i=>n.has(i.donor.providerName)).map(i=>i["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(i=>({...i,color:i.entityId&&this.highlightedNodeId===i["@id"]?[30,136,229,255]:this.filteredBlocks.includes(i.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(n){this.bodyUI&&"organ"in n&&this.zoomToFitOrgan()}updateSex(n){this.sex=n,this.sexChange.emit(this.sex)}updateSide(n){this.side=n,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:n,organ:i}=this;if(i){const{x_dimension:r,y_dimension:s,z_dimension:o}=i;n.rotation=n.rotationX=0,n.bounds={x:1.25*r/1e3,y:1.25*s/1e3,z:1.25*o/1e3},n.target=[r/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(n){this.ga.event("node_click","organ",n.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===n.node["@id"]?"":n.node["@id"],this.nodeClick.emit(n)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(o_))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&js(yje,7),2&i){let s;Hi(s=zi())&&(r.bodyUI=s.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClick:"nodeClick"},features:[Cr],decls:5,vars:10,consts:[["bodyUI",""],["camera","perspective",1,"body-ui",3,"nodeClick","initialized","scene","interactive"],[1,"stage-options"],[1,"view-slider",3,"valueChange","labels","value","hidden"]],template:function(i,r){if(1&i){const s=Wa();en(0,"ccf-body-ui",1,0),oi("nodeClick",function(a){return $i(s),Li(r.nodeClicked(a))})("initialized",function(){return $i(s),Li(r.zoomToFitOrgan())}),sn(),en(2,"div",2)(3,"ccf-slide-toggle",3),oi("valueChange",function(a){return $i(s),Li(r.updateSex(a))}),sn(),en(4,"ccf-slide-toggle",3),oi("valueChange",function(a){return $i(s),Li(r.updateSide(a))}),sn()()}2&i&&(Un("scene",r.scene)("interactive",!0),Kt(3),Un("labels",nm(8,vje))("value",r.sex)("hidden",!r.sex),Kt(),Un("labels",nm(9,bje))("value",r.side)("hidden",!r.side))},dependencies:[uSe,_je],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0})}return t})();const xje=["left"],Eje=["right"],LF=()=>[],Aje=[{color:[0,0,0,0],opacity:.001}];let Sje=(()=>{class t{constructor(n,i,r){this.ga=i,this.configState=r,this.sexChange=new hn,this.sideChange=new hn,this.nodeClicked=new hn,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(Xt(s=>({tmc:s??[]}))),this.donorLabel$=this.configState.getOption("donorLabel"),this.ruiUrl$=this.configState.getOption("ruiUrl"),this.euiUrl$=this.configState.getOption("euiUrl"),this.asctbUrl$=this.configState.getOption("asctbUrl"),this.hraPortalUrl$=this.configState.getOption("hraPortalUrl"),this.onlineCourseUrl$=this.configState.getOption("onlineCourseUrl"),this.paperUrl$=this.configState.getOption("paperUrl"),this.stats=[],this.latestConfig={},this.organInfo$=r.config$.pipe(Yi(s=>this.latestConfig=s),Tr(s=>n.getOrganInfo(s.organIri??"",s.side?.toLowerCase?.(),s.sex)),Yi(s=>this.logOrganLookup(s)),Yi(s=>this.latestOrganInfo=s),ia(1)),this.organ$=this.organInfo$.pipe(Tr(s=>s?n.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):Zt(void 0)),Yi(s=>{if(s&&this.latestOrganInfo){const o=this.latestOrganInfo?.hasSex?s.sex:void 0;o!==this.latestConfig.sex&&this.updateInput("sex",o),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),ia(1)),this.scene$=this.organ$.pipe(Tr(s=>s&&this.latestOrganInfo?n.getOrganScene(this.latestOrganInfo,s.sex):Zt(Aje))),this.stats$=zv([this.organ$,this.donorLabel$]).pipe(Tr(([s,o])=>s&&this.latestOrganInfo?n.getOrganStats(this.latestOrganInfo,s.sex).pipe(Xt(a=>a.map(c=>o&&"Donors"===c.label?{...c,label:o}:c))):Zt([]))),this.statsLabel$=this.organ$.pipe(Xt(s=>this.makeStatsLabel(this.latestOrganInfo,s?.sex)),ql("Loading...")),this.blocks$=this.organ$.pipe(Tr(s=>s&&this.latestOrganInfo?n.getBlocks(this.latestOrganInfo,s.sex):Zt([])))}ngAfterViewInit(){const{left:n,right:i}=this;n.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(n,i){this.configState.patchConfig({[n]:i})}makeStatsLabel(n,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(n){const s=n.side?n.side.charAt(0).toUpperCase()+n.side.slice(1):void 0;r=[i,n.organ,s]}return r.filter(s=>!!s).join(", ")}logOrganLookup(n){this.ga.event(n?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}static#e=this.\u0275fac=function(i){return new(i||t)(nt(nje),nt(o_),nt(td))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(js(xje,7,ni),js(Eje,7,ni)),2&i){let s;Hi(s=zi())&&(r.left=s.first),Hi(s=zi())&&(r.right=s.first)}},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},decls:22,vars:45,consts:[["left",""],["right",""],[1,"container"],[1,"left"],[3,"sexChange","nodeClick","sideChange","blocks","filter","sex","side","organ","scene"],[1,"right"],[3,"statsLabel","stats"],[3,"ruiUrl","euiUrl","asctbUrl","hraPortalUrl","onlineCourseUrl","paperUrl"]],template:function(i,r){if(1&i){const s=Wa();en(0,"div",2)(1,"div",3,0)(3,"ccf-organ",4),qr(4,"async"),qr(5,"async"),qr(6,"async"),qr(7,"async"),qr(8,"async"),qr(9,"async"),oi("sexChange",function(a){return $i(s),r.updateInput("sex",a),Li(r.sexChange.emit(a))})("nodeClick",function(a){return $i(s),Li(r.nodeClicked.emit(a))})("sideChange",function(a){return $i(s),r.updateInput("side",a),Li(r.sideChange.emit(a))}),sn()(),en(10,"div",5,1),Qi(12,"ccf-stats-list",6),qr(13,"async"),qr(14,"async"),Qi(15,"ccf-link-cards",7),qr(16,"async"),qr(17,"async"),qr(18,"async"),qr(19,"async"),qr(20,"async"),qr(21,"async"),sn()()}if(2&i){let s,o,a,c,l,u,h,f,g,m,y;Kt(3),Un("blocks",null!==(s=Xr(4,14,r.blocks$))&&void 0!==s?s:nm(42,LF))("filter",Xr(5,16,r.filter$))("sex",Xr(6,18,r.sex$))("side",Xr(7,20,r.side$))("organ",null!==(o=Xr(8,22,r.organ$))&&void 0!==o?o:void 0)("scene",null!==(a=Xr(9,24,r.scene$))&&void 0!==a?a:nm(43,LF)),Kt(9),Un("statsLabel",null!==(c=Xr(13,26,r.statsLabel$))&&void 0!==c?c:"")("stats",null!==(l=Xr(14,28,r.stats$))&&void 0!==l?l:nm(44,LF)),Kt(3),Un("ruiUrl",null!==(u=Xr(16,30,r.ruiUrl$))&&void 0!==u?u:"")("euiUrl",null!==(h=Xr(17,32,r.euiUrl$))&&void 0!==h?h:"")("asctbUrl",null!==(f=Xr(18,34,r.asctbUrl$))&&void 0!==f?f:"")("hraPortalUrl",null!==(g=Xr(19,36,r.hraPortalUrl$))&&void 0!==g?g:"")("onlineCourseUrl",null!==(m=Xr(20,38,r.onlineCourseUrl$))&&void 0!==m?m:"")("paperUrl",null!==(y=Xr(21,40,r.paperUrl$))&&void 0!==y?y:"")}},dependencies:[sje,aje,wje,C0],styles:['.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,sans-serif;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}'],changeDetection:0})}return t})();function Cje(t,e){if(1&t){const n=Wa();en(0,"ccf-root",1),oi("sexChange",function(r){return $i(n),Li(Lr().sexChange.emit(r))})("nodeClick",function(r){return $i(n),Li(Lr().nodeClicked.emit(r))})("sideChange",function(r){return $i(n),Li(Lr().sideChange.emit(r))}),sn()}}function Tje(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){const i=NF.json(t);if(n(i))return i}else if(n(t))return t;throw new Error("Invalid data sources")}function Mje(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){if(!t?.startsWith("["))return[t];{const i=NF.json(t);if(n(i))return i}}else if(n(t))return t;throw new Error("Invalid data sources")}let Ije=(()=>{class t extends tje{constructor(n,i){super(n,i,{initialDelay:10,initialConfig:{...Sp_dbOptions,...globalThis.dbOptions},parse:{dataSources:Tje,highlightProviders:Mje,useRemoteApi:NF.boolean}}),this.sex="Female",this.side="Left",this.sexChange=new hn,this.sideChange=new hn,this.nodeClicked=new hn}static#e=this.\u0275fac=function(i){return new(i||t)(nt(td),nt(oo))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint",donorLabel:"donorLabel",ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},features:[gi],decls:1,vars:1,consts:[[3,"sexChange","nodeClick","sideChange",4,"ngIf"],[3,"sexChange","nodeClick","sideChange"]],template:function(i,r){1&i&&vi(0,Cje,1,0,"ccf-root",0),2&i&&Un("ngIf",r.initialized)},dependencies:[yD,Sje],encapsulation:2,changeDetection:0})}return t})(),Dje=(()=>{class t extends uBe{selectToken(n){return n.useRemoteApi&&n.remoteApiEndpoint?Qs:lBe}static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Fi(t)))(r||t)}})();static#t=this.\u0275prov=It({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const tC=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class Nje{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=np(this.action),i=function Oje(t){return tC(t.getHours(),2)+":"+tC(t.getMinutes(),2)+":"+tC(t.getSeconds(),2)+"."+tC(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class Pje{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const rK=new Et("NGXS_LOGGER_PLUGIN_OPTIONS");let Lje=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new Pje(this._options),this._store=this._store||this._injector.get(Ju);const s=new Nje(i,this._store,this._logWriter);return s.dispatched(n),r(n,i).pipe(Yi(o=>{s.completed(o)}),nl(o=>{throw s.errored(o),o}))}}return t.\u0275fac=function(n){return new(n||t)(ot(rK),ot(Ui))},t.\u0275prov=It({token:t,factory:t.\u0275fac}),t})();const sK=new Et("LOGGER_USER_OPTIONS");function Fje(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let kje=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:f9,useClass:Lje,multi:!0},{provide:sK,useValue:n},{provide:rK,useFactory:Fje,deps:[sK]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gr({type:t}),t.\u0275inj=ir({}),t})();const Bje=[td];let jje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[FRe.forRoot(),fCe.forRoot(Bje,{developmentMode:!1}),kje.forRoot({disabled:true})]})}return t})(),Uje=(()=>{class t{constructor(n){if(n)throw new Error("The core module should only be imported once in the root module")}static#e=this.\u0275fac=function(i){return new(i||t)(ot(t,12))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({providers:[{provide:SY,useExisting:Dje}],imports:[tPe,yNe.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),lPe.forRoot(()=>new CS({basePath:Sp_dbOptions.remoteApiEndpoint})),jje]})}return t})(),Vje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[lm,mje]})}return t})(),Hje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[lm,aae,Vje]})}return t})(),zje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[lm,IL]})}return t})(),Gje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[lm]})}return t})(),Wje=(()=>{class t{constructor(n){this.injector=n}ngDoBootstrap(){const n=function oae(t,e){const n=function Zoe(t,e){return e.get(Fd).resolveComponentFactory(t).inputs}(t,e.injector),i=e.strategyFactory||new iae(t,e.injector),r=function Qoe(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function Yoe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(n);class s extends sae{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);n.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return n.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,a)},configurable:!0,enumerable:!0})}),s}(Ije,{injector:this.injector});customElements.define("ccf-organ-info",n)}static#e=this.\u0275fac=function(i){return new(i||t)(ot(Ui))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ir({imports:[ooe,Uje,zje,Gje,Hje]})}return t})();roe().bootstrapModule(Wje).catch(t=>console.error(t))},5064:je=>{je.exports=function(S,Z){var C=Z.length;if(0!==C){var q=S.length;S.length+=C;for(var G=0;G<C;G++)S[q+G]=Z[G]}}},9465:je=>{"use strict";const{AbortController:me,AbortSignal:S}=typeof self<"u"?self:typeof window<"u"?window:void 0;je.exports=me,je.exports.AbortSignal=S,je.exports.default=me},3981:(je,me)=>{"use strict";me.byteLength=function E(x){var k=_(x),$=k[1];return 3*(k[0]+$)/4-$},me.toByteArray=function W(x){var k,b,oe=_(x),$=oe[0],z=oe[1],ee=new C(function F(x,k,oe){return 3*(k+oe)/4-oe}(0,$,z)),Y=0,B=z>0?$-4:$;for(b=0;b<B;b+=4)k=Z[x.charCodeAt(b)]<<18|Z[x.charCodeAt(b+1)]<<12|Z[x.charCodeAt(b+2)]<<6|Z[x.charCodeAt(b+3)],ee[Y++]=k>>16&255,ee[Y++]=k>>8&255,ee[Y++]=255&k;return 2===z&&(k=Z[x.charCodeAt(b)]<<2|Z[x.charCodeAt(b+1)]>>4,ee[Y++]=255&k),1===z&&(k=Z[x.charCodeAt(b)]<<10|Z[x.charCodeAt(b+1)]<<4|Z[x.charCodeAt(b+2)]>>2,ee[Y++]=k>>8&255,ee[Y++]=255&k),ee},me.fromByteArray=function se(x){for(var k,oe=x.length,$=oe%3,z=[],Y=0,B=oe-$;Y<B;Y+=16383)z.push(D(x,Y,Y+16383>B?B:Y+16383));return 1===$?z.push(S[(k=x[oe-1])>>2]+S[k<<4&63]+"=="):2===$&&z.push(S[(k=(x[oe-2]<<8)+x[oe-1])>>10]+S[k>>4&63]+S[k<<2&63]+"="),z.join("")};for(var S=[],Z=[],C=typeof Uint8Array<"u"?Uint8Array:Array,q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0;G<64;++G)S[G]=q[G],Z[q.charCodeAt(G)]=G;function _(x){var k=x.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=x.indexOf("=");return-1===oe&&(oe=k),[oe,oe===k?0:4-oe%4]}function P(x){return S[x>>18&63]+S[x>>12&63]+S[x>>6&63]+S[63&x]}function D(x,k,oe){for(var z=[],ee=k;ee<oe;ee+=3)z.push(P((x[ee]<<16&16711680)+(x[ee+1]<<8&65280)+(255&x[ee+2])));return z.join("")}Z[45]=62,Z[95]=63},6887:(je,me)=>{"use strict";var Z=function(q){return q.typeOfFunction="function",q.boolTrue=!0,q}(Z||{});me.oI=function C(q,G,X){if(!X||typeof X.value!==Z.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+G+"> is not a method!");return{configurable:Z.boolTrue,get:function(){var _=X.value.bind(this);return Object.defineProperty(this,G,{value:_,configurable:Z.boolTrue,writable:Z.boolTrue}),_}}}},3838:(je,me,S)=>{"use strict";var Z=S(3981),C=S(2020);me.Buffer=_,me.SlowBuffer=function $(U){return+U!=U&&(U=0),_.alloc(+U)},me.INSPECT_MAX_BYTES=50;var q=2147483647;function X(U){if(U>q)throw new RangeError('The value "'+U+'" is invalid for option "size"');var I=new Uint8Array(U);return I.__proto__=_.prototype,I}function _(U,I,N){if("number"==typeof U){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return P(U)}return E(U,I,N)}function E(U,I,N){if("string"==typeof U)return function D(U,I){if(("string"!=typeof I||""===I)&&(I="utf8"),!_.isEncoding(I))throw new TypeError("Unknown encoding: "+I);var N=0|z(U,I),he=X(N),We=he.write(U,I);return We!==N&&(he=he.slice(0,We)),he}(U,I);if(ArrayBuffer.isView(U))return se(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(ue(U,ArrayBuffer)||U&&ue(U.buffer,ArrayBuffer))return function x(U,I,N){if(I<0||U.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<I+(N||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===I&&void 0===N?new Uint8Array(U):void 0===N?new Uint8Array(U,I):new Uint8Array(U,I,N)).__proto__=_.prototype,he}(U,I,N);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=U.valueOf&&U.valueOf();if(null!=he&&he!==U)return _.from(he,I,N);var We=function k(U){if(_.isBuffer(U)){var I=0|oe(U.length),N=X(I);return 0===N.length||U.copy(N,0,0,I),N}return void 0!==U.length?"number"!=typeof U.length||te(U.length)?X(0):se(U):"Buffer"===U.type&&Array.isArray(U.data)?se(U.data):void 0}(U);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),I,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function F(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function P(U){return F(U),X(U<0?0:0|oe(U))}function se(U){for(var I=U.length<0?0:0|oe(U.length),N=X(I),he=0;he<I;he+=1)N[he]=255&U[he];return N}function oe(U){if(U>=q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+q.toString(16)+" bytes");return 0|U}function z(U,I){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||ue(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var N=U.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===N)return 0;for(var We=!1;;)switch(I){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return A(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*N;case"hex":return N>>>1;case"base64":return He(U).length;default:if(We)return he?-1:A(U).length;I=(""+I).toLowerCase(),We=!0}}function ee(U,I,N){var he=!1;if((void 0===I||I<0)&&(I=0),I>this.length||((void 0===N||N>this.length)&&(N=this.length),N<=0)||(N>>>=0)<=(I>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return Be(this,I,N);case"utf8":case"utf-8":return Oe(this,I,N);case"ascii":return Je(this,I,N);case"latin1":case"binary":return Ce(this,I,N);case"base64":return xe(this,I,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,I,N);default:if(he)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),he=!0}}function Y(U,I,N){var he=U[I];U[I]=U[N],U[N]=he}function B(U,I,N,he,We){if(0===U.length)return-1;if("string"==typeof N?(he=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),te(N=+N)&&(N=We?0:U.length-1),N<0&&(N=U.length+N),N>=U.length){if(We)return-1;N=U.length-1}else if(N<0){if(!We)return-1;N=0}if("string"==typeof I&&(I=_.from(I,he)),_.isBuffer(I))return 0===I.length?-1:b(U,I,N,he,We);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(U,I,N):Uint8Array.prototype.lastIndexOf.call(U,I,N):b(U,[I],N,he,We);throw new TypeError("val must be string, number or Buffer")}function b(U,I,N,he,We){var Nt,Ee=1,Ue=U.length,Ze=I.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(U.length<2||I.length<2)return-1;Ee=2,Ue/=2,Ze/=2,N/=2}function vt(H,ne){return 1===Ee?H[ne]:H.readUInt16BE(ne*Ee)}if(We){var wt=-1;for(Nt=N;Nt<Ue;Nt++)if(vt(U,Nt)===vt(I,-1===wt?0:Nt-wt)){if(-1===wt&&(wt=Nt),Nt-wt+1===Ze)return wt*Ee}else-1!==wt&&(Nt-=Nt-wt),wt=-1}else for(N+Ze>Ue&&(N=Ue-Ze),Nt=N;Nt>=0;Nt--){for(var kt=!0,pe=0;pe<Ze;pe++)if(vt(U,Nt+pe)!==vt(I,pe)){kt=!1;break}if(kt)return Nt}return-1}function M(U,I,N,he){N=Number(N)||0;var We=U.length-N;he?(he=Number(he))>We&&(he=We):he=We;var Ee=I.length;he>Ee/2&&(he=Ee/2);for(var Ue=0;Ue<he;++Ue){var Ze=parseInt(I.substr(2*Ue,2),16);if(te(Ze))return Ue;U[N+Ue]=Ze}return Ue}function T(U,I,N,he){return Xe(A(I,U.length-N),U,N,he)}function le(U,I,N,he){return Xe(function ie(U){for(var I=[],N=0;N<U.length;++N)I.push(255&U.charCodeAt(N));return I}(I),U,N,he)}function j(U,I,N,he){return le(U,I,N,he)}function Me(U,I,N,he){return Xe(He(I),U,N,he)}function ae(U,I,N,he){return Xe(function J(U,I){for(var N,he,Ee=[],Ue=0;Ue<U.length&&!((I-=2)<0);++Ue)he=(N=U.charCodeAt(Ue))>>8,Ee.push(N%256),Ee.push(he);return Ee}(I,U.length-N),U,N,he)}function xe(U,I,N){return Z.fromByteArray(0===I&&N===U.length?U:U.slice(I,N))}function Oe(U,I,N){N=Math.min(U.length,N);for(var he=[],We=I;We<N;){var vt,Nt,wt,kt,Ee=U[We],Ue=null,Ze=Ee>239?4:Ee>223?3:Ee>191?2:1;if(We+Ze<=N)switch(Ze){case 1:Ee<128&&(Ue=Ee);break;case 2:128==(192&(vt=U[We+1]))&&(kt=(31&Ee)<<6|63&vt)>127&&(Ue=kt);break;case 3:Nt=U[We+2],128==(192&(vt=U[We+1]))&&128==(192&Nt)&&(kt=(15&Ee)<<12|(63&vt)<<6|63&Nt)>2047&&(kt<55296||kt>57343)&&(Ue=kt);break;case 4:Nt=U[We+2],wt=U[We+3],128==(192&(vt=U[We+1]))&&128==(192&Nt)&&128==(192&wt)&&(kt=(15&Ee)<<18|(63&vt)<<12|(63&Nt)<<6|63&wt)>65535&&kt<1114112&&(Ue=kt)}null===Ue?(Ue=65533,Ze=1):Ue>65535&&(he.push((Ue-=65536)>>>10&1023|55296),Ue=56320|1023&Ue),he.push(Ue),We+=Ze}return function Qe(U){var I=U.length;if(I<=Ve)return String.fromCharCode.apply(String,U);for(var N="",he=0;he<I;)N+=String.fromCharCode.apply(String,U.slice(he,he+=Ve));return N}(he)}me.kMaxLength=q,!(_.TYPED_ARRAY_SUPPORT=function G(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(U,I,N){return E(U,I,N)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(U,I,N){return function W(U,I,N){return F(U),U<=0?X(U):void 0!==I?"string"==typeof N?X(U).fill(I,N):X(U).fill(I):X(U)}(U,I,N)},_.allocUnsafe=function(U){return P(U)},_.allocUnsafeSlow=function(U){return P(U)},_.isBuffer=function(I){return null!=I&&!0===I._isBuffer&&I!==_.prototype},_.compare=function(I,N){if(ue(I,Uint8Array)&&(I=_.from(I,I.offset,I.byteLength)),ue(N,Uint8Array)&&(N=_.from(N,N.offset,N.byteLength)),!_.isBuffer(I)||!_.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===N)return 0;for(var he=I.length,We=N.length,Ee=0,Ue=Math.min(he,We);Ee<Ue;++Ee)if(I[Ee]!==N[Ee]){he=I[Ee],We=N[Ee];break}return he<We?-1:We<he?1:0},_.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(I,N){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(0===I.length)return _.alloc(0);var he;if(void 0===N)for(N=0,he=0;he<I.length;++he)N+=I[he].length;var We=_.allocUnsafe(N),Ee=0;for(he=0;he<I.length;++he){var Ue=I[he];if(ue(Ue,Uint8Array)&&(Ue=_.from(Ue)),!_.isBuffer(Ue))throw new TypeError('"list" argument must be an Array of Buffers');Ue.copy(We,Ee),Ee+=Ue.length}return We},_.byteLength=z,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<I;N+=2)Y(this,N,N+1);return this},_.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<I;N+=4)Y(this,N,N+3),Y(this,N+1,N+2);return this},_.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<I;N+=8)Y(this,N,N+7),Y(this,N+1,N+6),Y(this,N+2,N+5),Y(this,N+3,N+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var I=this.length;return 0===I?"":0===arguments.length?Oe(this,0,I):ee.apply(this,arguments)},_.prototype.equals=function(I){if(!_.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||0===_.compare(this,I)},_.prototype.inspect=function(){var I="",N=me.INSPECT_MAX_BYTES;return I=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(I+=" ... "),"<Buffer "+I+">"},_.prototype.compare=function(I,N,he,We,Ee){if(ue(I,Uint8Array)&&(I=_.from(I,I.offset,I.byteLength)),!_.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(void 0===N&&(N=0),void 0===he&&(he=I?I.length:0),void 0===We&&(We=0),void 0===Ee&&(Ee=this.length),N<0||he>I.length||We<0||Ee>this.length)throw new RangeError("out of range index");if(We>=Ee&&N>=he)return 0;if(We>=Ee)return-1;if(N>=he)return 1;if(this===I)return 0;for(var Ue=(Ee>>>=0)-(We>>>=0),Ze=(he>>>=0)-(N>>>=0),vt=Math.min(Ue,Ze),Nt=this.slice(We,Ee),wt=I.slice(N,he),kt=0;kt<vt;++kt)if(Nt[kt]!==wt[kt]){Ue=Nt[kt],Ze=wt[kt];break}return Ue<Ze?-1:Ze<Ue?1:0},_.prototype.includes=function(I,N,he){return-1!==this.indexOf(I,N,he)},_.prototype.indexOf=function(I,N,he){return B(this,I,N,he,!0)},_.prototype.lastIndexOf=function(I,N,he){return B(this,I,N,he,!1)},_.prototype.write=function(I,N,he,We){if(void 0===N)We="utf8",he=this.length,N=0;else if(void 0===he&&"string"==typeof N)We=N,he=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(he)?(he>>>=0,void 0===We&&(We="utf8")):(We=he,he=void 0)}var Ee=this.length-N;if((void 0===he||he>Ee)&&(he=Ee),I.length>0&&(he<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var Ue=!1;;)switch(We){case"hex":return M(this,I,N,he);case"utf8":case"utf-8":return T(this,I,N,he);case"ascii":return le(this,I,N,he);case"latin1":case"binary":return j(this,I,N,he);case"base64":return Me(this,I,N,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,I,N,he);default:if(Ue)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ue=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ve=4096;function Je(U,I,N){var he="";N=Math.min(U.length,N);for(var We=I;We<N;++We)he+=String.fromCharCode(127&U[We]);return he}function Ce(U,I,N){var he="";N=Math.min(U.length,N);for(var We=I;We<N;++We)he+=String.fromCharCode(U[We]);return he}function Be(U,I,N){var he=U.length;(!I||I<0)&&(I=0),(!N||N<0||N>he)&&(N=he);for(var We="",Ee=I;Ee<N;++Ee)We+=R(U[Ee]);return We}function Ae(U,I,N){for(var he=U.slice(I,N),We="",Ee=0;Ee<he.length;Ee+=2)We+=String.fromCharCode(he[Ee]+256*he[Ee+1]);return We}function ke(U,I,N){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+I>N)throw new RangeError("Trying to access beyond buffer length")}function de(U,I,N,he,We,Ee){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>We||I<Ee)throw new RangeError('"value" argument is out of bounds');if(N+he>U.length)throw new RangeError("Index out of range")}function Se(U,I,N,he,We,Ee){if(N+he>U.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function rt(U,I,N,he,We){return I=+I,N>>>=0,We||Se(U,0,N,4),C.write(U,I,N,he,23,4),N+4}function mt(U,I,N,he,We){return I=+I,N>>>=0,We||Se(U,0,N,8),C.write(U,I,N,he,52,8),N+8}_.prototype.slice=function(I,N){var he=this.length;(I=~~I)<0?(I+=he)<0&&(I=0):I>he&&(I=he),(N=void 0===N?he:~~N)<0?(N+=he)<0&&(N=0):N>he&&(N=he),N<I&&(N=I);var We=this.subarray(I,N);return We.__proto__=_.prototype,We},_.prototype.readUIntLE=function(I,N,he){I>>>=0,N>>>=0,he||ke(I,N,this.length);for(var We=this[I],Ee=1,Ue=0;++Ue<N&&(Ee*=256);)We+=this[I+Ue]*Ee;return We},_.prototype.readUIntBE=function(I,N,he){I>>>=0,N>>>=0,he||ke(I,N,this.length);for(var We=this[I+--N],Ee=1;N>0&&(Ee*=256);)We+=this[I+--N]*Ee;return We},_.prototype.readUInt8=function(I,N){return I>>>=0,N||ke(I,1,this.length),this[I]},_.prototype.readUInt16LE=function(I,N){return I>>>=0,N||ke(I,2,this.length),this[I]|this[I+1]<<8},_.prototype.readUInt16BE=function(I,N){return I>>>=0,N||ke(I,2,this.length),this[I]<<8|this[I+1]},_.prototype.readUInt32LE=function(I,N){return I>>>=0,N||ke(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},_.prototype.readUInt32BE=function(I,N){return I>>>=0,N||ke(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},_.prototype.readIntLE=function(I,N,he){I>>>=0,N>>>=0,he||ke(I,N,this.length);for(var We=this[I],Ee=1,Ue=0;++Ue<N&&(Ee*=256);)We+=this[I+Ue]*Ee;return We>=(Ee*=128)&&(We-=Math.pow(2,8*N)),We},_.prototype.readIntBE=function(I,N,he){I>>>=0,N>>>=0,he||ke(I,N,this.length);for(var We=N,Ee=1,Ue=this[I+--We];We>0&&(Ee*=256);)Ue+=this[I+--We]*Ee;return Ue>=(Ee*=128)&&(Ue-=Math.pow(2,8*N)),Ue},_.prototype.readInt8=function(I,N){return I>>>=0,N||ke(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},_.prototype.readInt16LE=function(I,N){I>>>=0,N||ke(I,2,this.length);var he=this[I]|this[I+1]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt16BE=function(I,N){I>>>=0,N||ke(I,2,this.length);var he=this[I+1]|this[I]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt32LE=function(I,N){return I>>>=0,N||ke(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},_.prototype.readInt32BE=function(I,N){return I>>>=0,N||ke(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},_.prototype.readFloatLE=function(I,N){return I>>>=0,N||ke(I,4,this.length),C.read(this,I,!0,23,4)},_.prototype.readFloatBE=function(I,N){return I>>>=0,N||ke(I,4,this.length),C.read(this,I,!1,23,4)},_.prototype.readDoubleLE=function(I,N){return I>>>=0,N||ke(I,8,this.length),C.read(this,I,!0,52,8)},_.prototype.readDoubleBE=function(I,N){return I>>>=0,N||ke(I,8,this.length),C.read(this,I,!1,52,8)},_.prototype.writeUIntLE=function(I,N,he,We){I=+I,N>>>=0,he>>>=0,We||de(this,I,N,he,Math.pow(2,8*he)-1,0);var Ue=1,Ze=0;for(this[N]=255&I;++Ze<he&&(Ue*=256);)this[N+Ze]=I/Ue&255;return N+he},_.prototype.writeUIntBE=function(I,N,he,We){I=+I,N>>>=0,he>>>=0,We||de(this,I,N,he,Math.pow(2,8*he)-1,0);var Ue=he-1,Ze=1;for(this[N+Ue]=255&I;--Ue>=0&&(Ze*=256);)this[N+Ue]=I/Ze&255;return N+he},_.prototype.writeUInt8=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,1,255,0),this[N]=255&I,N+1},_.prototype.writeUInt16LE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,2,65535,0),this[N]=255&I,this[N+1]=I>>>8,N+2},_.prototype.writeUInt16BE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,2,65535,0),this[N]=I>>>8,this[N+1]=255&I,N+2},_.prototype.writeUInt32LE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,4,4294967295,0),this[N+3]=I>>>24,this[N+2]=I>>>16,this[N+1]=I>>>8,this[N]=255&I,N+4},_.prototype.writeUInt32BE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,4,4294967295,0),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=255&I,N+4},_.prototype.writeIntLE=function(I,N,he,We){if(I=+I,N>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,I,N,he,Ee-1,-Ee)}var Ue=0,Ze=1,vt=0;for(this[N]=255&I;++Ue<he&&(Ze*=256);)I<0&&0===vt&&0!==this[N+Ue-1]&&(vt=1),this[N+Ue]=(I/Ze|0)-vt&255;return N+he},_.prototype.writeIntBE=function(I,N,he,We){if(I=+I,N>>>=0,!We){var Ee=Math.pow(2,8*he-1);de(this,I,N,he,Ee-1,-Ee)}var Ue=he-1,Ze=1,vt=0;for(this[N+Ue]=255&I;--Ue>=0&&(Ze*=256);)I<0&&0===vt&&0!==this[N+Ue+1]&&(vt=1),this[N+Ue]=(I/Ze|0)-vt&255;return N+he},_.prototype.writeInt8=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,1,127,-128),I<0&&(I=255+I+1),this[N]=255&I,N+1},_.prototype.writeInt16LE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,2,32767,-32768),this[N]=255&I,this[N+1]=I>>>8,N+2},_.prototype.writeInt16BE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,2,32767,-32768),this[N]=I>>>8,this[N+1]=255&I,N+2},_.prototype.writeInt32LE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,4,2147483647,-2147483648),this[N]=255&I,this[N+1]=I>>>8,this[N+2]=I>>>16,this[N+3]=I>>>24,N+4},_.prototype.writeInt32BE=function(I,N,he){return I=+I,N>>>=0,he||de(this,I,N,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[N]=I>>>24,this[N+1]=I>>>16,this[N+2]=I>>>8,this[N+3]=255&I,N+4},_.prototype.writeFloatLE=function(I,N,he){return rt(this,I,N,!0,he)},_.prototype.writeFloatBE=function(I,N,he){return rt(this,I,N,!1,he)},_.prototype.writeDoubleLE=function(I,N,he){return mt(this,I,N,!0,he)},_.prototype.writeDoubleBE=function(I,N,he){return mt(this,I,N,!1,he)},_.prototype.copy=function(I,N,he,We){if(!_.isBuffer(I))throw new TypeError("argument should be a Buffer");if(he||(he=0),!We&&0!==We&&(We=this.length),N>=I.length&&(N=I.length),N||(N=0),We>0&&We<he&&(We=he),We===he||0===I.length||0===this.length)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),I.length-N<We-he&&(We=I.length-N+he);var Ee=We-he;if(this===I&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(N,he,We);else if(this===I&&he<N&&N<We)for(var Ue=Ee-1;Ue>=0;--Ue)I[Ue+N]=this[Ue+he];else Uint8Array.prototype.set.call(I,this.subarray(he,We),N);return Ee},_.prototype.fill=function(I,N,he,We){if("string"==typeof I){if("string"==typeof N?(We=N,N=0,he=this.length):"string"==typeof he&&(We=he,he=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!_.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===I.length){var Ee=I.charCodeAt(0);("utf8"===We&&Ee<128||"latin1"===We)&&(I=Ee)}}else"number"==typeof I&&(I&=255);if(N<0||this.length<N||this.length<he)throw new RangeError("Out of range index");if(he<=N)return this;var Ue;if(N>>>=0,he=void 0===he?this.length:he>>>0,I||(I=0),"number"==typeof I)for(Ue=N;Ue<he;++Ue)this[Ue]=I;else{var Ze=_.isBuffer(I)?I:_.from(I,We),vt=Ze.length;if(0===vt)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(Ue=0;Ue<he-N;++Ue)this[Ue+N]=Ze[Ue%vt]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function R(U){return U<16?"0"+U.toString(16):U.toString(16)}function A(U,I){I=I||1/0;for(var N,he=U.length,We=null,Ee=[],Ue=0;Ue<he;++Ue){if((N=U.charCodeAt(Ue))>55295&&N<57344){if(!We){if(N>56319){(I-=3)>-1&&Ee.push(239,191,189);continue}if(Ue+1===he){(I-=3)>-1&&Ee.push(239,191,189);continue}We=N;continue}if(N<56320){(I-=3)>-1&&Ee.push(239,191,189),We=N;continue}N=65536+(We-55296<<10|N-56320)}else We&&(I-=3)>-1&&Ee.push(239,191,189);if(We=null,N<128){if((I-=1)<0)break;Ee.push(N)}else if(N<2048){if((I-=2)<0)break;Ee.push(N>>6|192,63&N|128)}else if(N<65536){if((I-=3)<0)break;Ee.push(N>>12|224,N>>6&63|128,63&N|128)}else{if(!(N<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;Ee.push(N>>18|240,N>>12&63|128,N>>6&63|128,63&N|128)}}return Ee}function He(U){return Z.toByteArray(function fe(U){if((U=(U=U.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Xe(U,I,N,he){for(var We=0;We<he&&!(We+N>=I.length||We>=U.length);++We)I[We+N]=U[We];return We}function ue(U,I){return U instanceof I||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===I.name}function te(U){return U!=U}},1123:(je,me,S)=>{je.exports={ResizeSensor:S(4718),ElementQueries:S(7240)}},7240:function(je,me,S){"use strict";var Z,C,q;typeof window<"u"&&window,C=[S(4718)],void 0!==(q="function"==typeof(Z=function(G){var X=function(){var E,F={},W=[];function P(j){j||(j=document.documentElement);var Me=window.getComputedStyle(j,null).fontSize;return parseFloat(Me)||16}function se(j,Me){var ae=Me.split(/\d/),xe=ae[ae.length-1];switch(Me=parseFloat(Me),xe){case"px":default:return Me;case"em":return Me*P(j);case"rem":return Me*P();case"vw":return Me*document.documentElement.clientWidth/100;case"vh":return Me*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,Ve=document.documentElement.clientHeight/100;return Me*(0,Math["vmin"===xe?"min":"max"])(Oe,Ve)}}function x(j,Me){this.element=j;var ae,xe,Oe,Ve,Qe,Je,Ce,Be,Ae=["min-width","min-height","max-width","max-height"];this.call=function(){for(ae in Oe=function D(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var Me=j.getBoundingClientRect();return{width:Math.round(Me.width),height:Math.round(Me.height)}}(this.element),Je={},F[Me])F[Me].hasOwnProperty(ae)&&(Ve=se(this.element,(xe=F[Me][ae]).value),Qe="width"===xe.property?Oe.width:Oe.height,Ce="","min"===xe.mode&&Qe>=Ve&&(Ce+=xe.value),"max"===xe.mode&&Qe<=Ve&&(Ce+=xe.value),Je[Be=xe.mode+"-"+xe.property]||(Je[Be]=""),Ce&&-1===(" "+Je[Be]+" ").indexOf(" "+Ce+" ")&&(Je[Be]+=" "+Ce));for(var ke in Ae)Ae.hasOwnProperty(ke)&&(Je[Ae[ke]]?this.element.setAttribute(Ae[ke],Je[Ae[ke]].substr(1)):this.element.removeAttribute(Ae[ke]))}}function k(j,Me){j.elementQueriesSetupInformation||(j.elementQueriesSetupInformation=new x(j,Me)),j.elementQueriesSensor||(j.elementQueriesSensor=new G(j,function(){j.elementQueriesSetupInformation.call()}))}function oe(j,Me,ae,xe){if(typeof F[j]>"u"){F[j]=[];var Oe=W.length;E.innerHTML+="\n"+j+" {animation: 0.1s element-queries;}",E.innerHTML+="\n"+j+" > .resize-sensor {min-width: "+Oe+"px;}",W.push(j)}F[j].push({mode:Me,property:ae,value:xe})}function $(j){var Me;if(document.querySelectorAll&&(Me=j?j.querySelectorAll.bind(j):document.querySelectorAll.bind(document)),!Me&&typeof $$<"u"&&(Me=$$),!Me&&typeof jQuery<"u"&&(Me=jQuery),!Me)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Me}function ee(j){var Me=[],ae=[],xe=[],Oe=0,Ve=-1,Qe=[];for(var Je in j.children)if(j.children.hasOwnProperty(Je)&&j.children[Je].tagName&&"img"===j.children[Je].tagName.toLowerCase()){Me.push(j.children[Je]);var Ce=j.children[Je].getAttribute("min-width")||j.children[Je].getAttribute("data-min-width"),Be=j.children[Je].getAttribute("data-src")||j.children[Je].getAttribute("url");xe.push(Be),ae.push({minWidth:Ce}),Ce?j.children[Je].style.display="none":(Oe=Me.length-1,j.children[Je].style.display="block")}function ke(){var Se,de=!1;for(Se in Me)Me.hasOwnProperty(Se)&&ae[Se].minWidth&&j.offsetWidth>ae[Se].minWidth&&(de=Se);if(de||(de=Oe),Ve!==de)if(Qe[de])Me[Ve].style.display="none",Me[de].style.display="block",Ve=de;else{var rt=new Image;rt.onload=function(){Me[de].src=xe[de],Me[Ve].style.display="none",Me[de].style.display="block",Qe[de]=!0,Ve=de},rt.src=xe[de]}else Me[de].src=xe[de]}Ve=Oe,j.resizeSensorInstance=new G(j,ke),ke()}var B=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,b=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function M(j){var Me,ae,xe,Oe;for(j=j.replace(/'/g,'"');null!==(Me=B.exec(j));)for(ae=Me[1]+Me[3],xe=Me[2];null!==(Oe=b.exec(xe));)oe(ae,Oe[1],Oe[2],Oe[3])}function T(j){var Me="";if(j)if("string"==typeof j)(-1!==(j=j.toLowerCase()).indexOf("min-width")||-1!==j.indexOf("max-width"))&&M(j);else for(var ae=0,xe=j.length;ae<xe;ae++)1===j[ae].type?(-1!==(Me=j[ae].selectorText||j[ae].cssText).indexOf("min-height")||-1!==Me.indexOf("max-height")||-1!==Me.indexOf("min-width")||-1!==Me.indexOf("max-width"))&&M(Me):4===j[ae].type?T(j[ae].cssRules||j[ae].rules):3===j[ae].type&&j[ae].styleSheet.hasOwnProperty("cssRules")&&T(j[ae].styleSheet.cssRules)}var le=!1;this.init=function(){var j="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?j="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?j="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(j="oanimationstart"),document.body.addEventListener(j,function(xe){var Oe=xe.target,Ve=Oe&&window.getComputedStyle(Oe,null),Qe=Ve&&Ve.getPropertyValue("animation-name");if(Qe&&-1!==Qe.indexOf("element-queries")){Oe.elementQueriesSensor=new G(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var Be=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");Be=parseInt(Be.replace("px","")),k(xe.target,W[Be])}}),le||((E=document.createElement("style")).type="text/css",E.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",E.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(E),le=!0);for(var Me=0,ae=document.styleSheets.length;Me<ae;Me++)try{document.styleSheets[Me].href&&0===document.styleSheets[Me].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Me].href),T(document.styleSheets[Me].cssRules||document.styleSheets[Me].rules||document.styleSheets[Me].cssText)}catch{}!function Y(){for(var Me=$()("[data-responsive-image],[responsive-image]"),ae=0,xe=Me.length;ae<xe;ae++)ee(Me[ae])}()},this.findElementQueriesElements=function(j){!function z(j){var Me=$(j);for(var ae in F)if(F.hasOwnProperty(ae))for(var xe=Me(ae,j),Oe=0,Ve=xe.length;Oe<Ve;Oe++)k(xe[Oe],ae)}(j)},this.update=function(){this.init()}};X.update=function(){X.instance.update()},X.detach=function(E){E.elementQueriesSetupInformation?(E.elementQueriesSensor.detach(),delete E.elementQueriesSetupInformation,delete E.elementQueriesSensor):E.resizeSensorInstance&&(E.resizeSensorInstance.detach(),delete E.resizeSensorInstance)},X.init=function(){X.instance||(X.instance=new X),X.instance.init()};return X.findElementQueriesElements=function(E){X.instance.findElementQueriesElements(E)},X.listen=function(){!function(E){if(document.addEventListener)document.addEventListener("DOMContentLoaded",E,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var F=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(E(),clearInterval(F))},10);else window.onload=E}(X.init)},X})?Z.apply(me,C):Z)&&(je.exports=q)},4718:function(je,me,S){"use strict";var Z,C;typeof window<"u"&&window,void 0!==(C="function"==typeof(Z=function(){if(typeof window>"u")return null;var q=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),G=q.requestAnimationFrame||q.mozRequestAnimationFrame||q.webkitRequestAnimationFrame||function(D){return q.setTimeout(D,20)},X=q.cancelAnimationFrame||q.mozCancelAnimationFrame||q.webkitCancelAnimationFrame||function(D){q.clearTimeout(D)};function _(D,se){var x=Object.prototype.toString.call(D),k="[object Array]"===x||"[object NodeList]"===x||"[object HTMLCollection]"===x||"[object Object]"===x||typeof jQuery<"u"&&D instanceof jQuery||typeof Elements<"u"&&D instanceof Elements,oe=0,$=D.length;if(k)for(;oe<$;oe++)se(D[oe]);else se(D)}function E(D){if(!D.getBoundingClientRect)return{width:D.offsetWidth,height:D.offsetHeight};var se=D.getBoundingClientRect();return{width:Math.round(se.width),height:Math.round(se.height)}}function F(D,se){Object.keys(se).forEach(function(x){D.style[x]=se[x]})}var W=function(D,se){var x=0;function k(){var z,ee,$=[];this.add=function(Y){$.push(Y)},this.call=function(Y){for(z=0,ee=$.length;z<ee;z++)$[z].call(this,Y)},this.remove=function(Y){var B=[];for(z=0,ee=$.length;z<ee;z++)$[z]!==Y&&B.push($[z]);$=B},this.length=function(){return $.length}}function oe($,z){if($){if($.resizedAttached)return void $.resizedAttached.add(z);$.resizedAttached=new k,$.resizedAttached.add(z),$.resizeSensor=document.createElement("div"),$.resizeSensor.dir="ltr",$.resizeSensor.className="resize-sensor";var ee={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},Y={position:"absolute",left:"0px",top:"0px",transition:"0s"};F($.resizeSensor,ee);var B=document.createElement("div");B.className="resize-sensor-expand",F(B,ee);var b=document.createElement("div");F(b,Y),B.appendChild(b);var M=document.createElement("div");M.className="resize-sensor-shrink",F(M,ee);var T=document.createElement("div");F(T,Y),F(T,{width:"200%",height:"200%"}),M.appendChild(T),$.resizeSensor.appendChild(B),$.resizeSensor.appendChild(M),$.appendChild($.resizeSensor);var le=window.getComputedStyle($),j=le?le.getPropertyValue("position"):null;"absolute"!==j&&"relative"!==j&&"fixed"!==j&&"sticky"!==j&&($.style.position="relative");var Me=!1,ae=0,xe=E($),Oe=0,Ve=0,Qe=!0;x=0;var Ce=function(){if(Qe){if(0===$.offsetWidth&&0===$.offsetHeight)return void(x||(x=G(function(){x=0,Ce()})));Qe=!1}var de,Se;Se=$.offsetHeight,b.style.width=(de=$.offsetWidth)+10+"px",b.style.height=Se+10+"px",B.scrollLeft=de+10,B.scrollTop=Se+10,M.scrollLeft=de+10,M.scrollTop=Se+10};$.resizeSensor.resetSensor=Ce;var Be=function(){ae=0,Me&&(Oe=xe.width,Ve=xe.height,$.resizedAttached&&$.resizedAttached.call(xe))},Ae=function(){xe=E($),(Me=xe.width!==Oe||xe.height!==Ve)&&!ae&&(ae=G(Be)),Ce()},ke=function(de,Se,rt){de.attachEvent?de.attachEvent("on"+Se,rt):de.addEventListener(Se,rt)};ke(B,"scroll",Ae),ke(M,"scroll",Ae),x=G(function(){x=0,Ce()})}}_(D,function($){oe($,se)}),this.detach=function($){x||(X(x),x=0),W.detach(D,$)},this.reset=function(){D.resizeSensor.resetSensor()}};if(W.reset=function(D){_(D,function(se){se.resizeSensor.resetSensor()})},W.detach=function(D,se){_(D,function(x){x&&(x.resizedAttached&&"function"==typeof se&&(x.resizedAttached.remove(se),x.resizedAttached.length())||x.resizeSensor&&(x.contains(x.resizeSensor)&&x.removeChild(x.resizeSensor),delete x.resizeSensor,delete x.resizedAttached))})},typeof MutationObserver<"u"){var P=new MutationObserver(function(D){for(var se in D)if(D.hasOwnProperty(se))for(var x=D[se].addedNodes,k=0;k<x.length;k++)x[k].resizeSensor&&W.reset(x[k])});document.addEventListener("DOMContentLoaded",function(D){P.observe(document.body,{childList:!0,subtree:!0})})}return W})?Z.call(me,S,me,je):Z)&&(je.exports=C)},4356:je=>{"use strict";var Z,me="object"==typeof Reflect?Reflect:null,S=me&&"function"==typeof me.apply?me.apply:function(B,b,M){return Function.prototype.apply.call(B,b,M)};Z=me&&"function"==typeof me.ownKeys?me.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var q=Number.isNaN||function(B){return B!=B};function G(){G.init.call(this)}je.exports=G,je.exports.once=function $(Y,B){return new Promise(function(b,M){function T(j){Y.removeListener(B,le),M(j)}function le(){"function"==typeof Y.removeListener&&Y.removeListener("error",T),b([].slice.call(arguments))}ee(Y,B,le,{once:!0}),"error"!==B&&function z(Y,B,b){"function"==typeof Y.on&&ee(Y,"error",B,b)}(Y,T,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var X=10;function _(Y){if("function"!=typeof Y)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function E(Y){return void 0===Y._maxListeners?G.defaultMaxListeners:Y._maxListeners}function F(Y,B,b,M){var T,le,j;if(_(b),void 0===(le=Y._events)?(le=Y._events=Object.create(null),Y._eventsCount=0):(void 0!==le.newListener&&(Y.emit("newListener",B,b.listener?b.listener:b),le=Y._events),j=le[B]),void 0===j)j=le[B]=b,++Y._eventsCount;else if("function"==typeof j?j=le[B]=M?[b,j]:[j,b]:M?j.unshift(b):j.push(b),(T=E(Y))>0&&j.length>T&&!j.warned){j.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=Y,Me.type=B,Me.count=j.length,function C(Y){console&&console.warn&&console.warn(Y)}(Me)}return Y}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(Y,B,b){var M={fired:!1,wrapFn:void 0,target:Y,type:B,listener:b},T=W.bind(M);return T.listener=b,M.wrapFn=T,T}function D(Y,B,b){var M=Y._events;if(void 0===M)return[];var T=M[B];return void 0===T?[]:"function"==typeof T?b?[T.listener||T]:[T]:b?function oe(Y){for(var B=new Array(Y.length),b=0;b<B.length;++b)B[b]=Y[b].listener||Y[b];return B}(T):x(T,T.length)}function se(Y){var B=this._events;if(void 0!==B){var b=B[Y];if("function"==typeof b)return 1;if(void 0!==b)return b.length}return 0}function x(Y,B){for(var b=new Array(B),M=0;M<B;++M)b[M]=Y[M];return b}function ee(Y,B,b,M){if("function"==typeof Y.on)M.once?Y.once(B,b):Y.on(B,b);else{if("function"!=typeof Y.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener(B,function T(le){M.once&&Y.removeEventListener(B,T),b(le)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(Y){if("number"!=typeof Y||Y<0||q(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");X=Y}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||q(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},G.prototype.getMaxListeners=function(){return E(this)},G.prototype.emit=function(B){for(var b=[],M=1;M<arguments.length;M++)b.push(arguments[M]);var T="error"===B,le=this._events;if(void 0!==le)T=T&&void 0===le.error;else if(!T)return!1;if(T){var j;if(b.length>0&&(j=b[0]),j instanceof Error)throw j;var Me=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw Me.context=j,Me}var ae=le[B];if(void 0===ae)return!1;if("function"==typeof ae)S(ae,this,b);else{var xe=ae.length,Oe=x(ae,xe);for(M=0;M<xe;++M)S(Oe[M],this,b)}return!0},G.prototype.on=G.prototype.addListener=function(B,b){return F(this,B,b,!1)},G.prototype.prependListener=function(B,b){return F(this,B,b,!0)},G.prototype.once=function(B,b){return _(b),this.on(B,P(this,B,b)),this},G.prototype.prependOnceListener=function(B,b){return _(b),this.prependListener(B,P(this,B,b)),this},G.prototype.off=G.prototype.removeListener=function(B,b){var M,T,le,j,Me;if(_(b),void 0===(T=this._events))return this;if(void 0===(M=T[B]))return this;if(M===b||M.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete T[B],T.removeListener&&this.emit("removeListener",B,M.listener||b));else if("function"!=typeof M){for(le=-1,j=M.length-1;j>=0;j--)if(M[j]===b||M[j].listener===b){Me=M[j].listener,le=j;break}if(le<0)return this;0===le?M.shift():function k(Y,B){for(;B+1<Y.length;B++)Y[B]=Y[B+1];Y.pop()}(M,le),1===M.length&&(T[B]=M[0]),void 0!==T.removeListener&&this.emit("removeListener",B,Me||b)}return this},G.prototype.removeAllListeners=function(B){var b,M,T;if(void 0===(M=this._events))return this;if(void 0===M.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==M[B]&&(0==--this._eventsCount?this._events=Object.create(null):delete M[B]),this;if(0===arguments.length){var j,le=Object.keys(M);for(T=0;T<le.length;++T)"removeListener"!==(j=le[T])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=M[B]))this.removeListener(B,b);else if(void 0!==b)for(T=b.length-1;T>=0;T--)this.removeListener(B,b[T]);return this},G.prototype.listeners=function(B){return D(this,B,!0)},G.prototype.rawListeners=function(B){return D(this,B,!1)},G.listenerCount=function(Y,B){return"function"==typeof Y.listenerCount?Y.listenerCount(B):se.call(Y,B)},G.prototype.listenerCount=se,G.prototype.eventNames=function(){return this._eventsCount>0?Z(this._events):[]}},689:(je,me,S)=>{var Z=S(9791),C=S(2963),q=S(5064);function G(D,se,x){if(!Z(D))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!D.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');if(!D.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" target node does not exist in the given graph.');if((se=""+se)==(x=""+x))return[se];var k=D.inboundNeighbors.bind(D),oe=D.outboundNeighbors.bind(D),$={},z={};$[se]=null,z[x]=null;var B,b,M,T,le,j,Me,ae,ee=[se],Y=[x],xe=!1;e:for(;ee.length&&Y.length;)if(ee.length<=Y.length){for(B=ee,ee=[],le=0,Me=B.length;le<Me;le++)for(j=0,ae=(M=oe(b=B[le])).length;j<ae;j++)if((T=M[j])in $||(ee.push(T),$[T]=b),T in z){xe=!0;break e}}else for(B=Y,Y=[],le=0,Me=B.length;le<Me;le++)for(b=B[le],M=k(b),j=0,ae=M.length;j<ae;j++)if(T=M[j],T in z||(Y.push(T),z[T]=b),T in $){xe=!0;break e}if(!xe)return null;for(var Oe=[];T;)Oe.unshift(T),T=$[T];for(T=z[Oe[Oe.length-1]];T;)Oe.push(T),T=z[T];return Oe.length?Oe:null}function X(D,se){if(!Z(D))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!D.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');var oe,$,z,ee,Y,B,x={},k={};for(x[se=""+se]=!0,k[se]=[se];Object.keys(x).length;)for(z in oe=x,x={},oe)for(Y=0,B=($=D.outboundNeighbors(z)).length;Y<B;Y++)k[ee=$[Y]]||(k[ee]=k[z].concat(ee),x[ee]=!0);return k}function _(D,se,x){if(!Z(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!se.hasNode(x))throw new Error('graphology-shortest-path: the "'+x+'" source node does not exist in the given graph.');x=""+x;var k=new Set,oe={},$=0;oe[x]=0;for(var ee,Y,B,z=[x];0!==z.length;){var b=[];for(ee=0,Y=z.length;ee<Y;ee++)!k.has(B=z[ee])&&(k.add(B),q(b,se[D](B)),oe[B]=$);$++,z=b}return oe}var E=_.bind(null,"outboundNeighbors"),F=_.bind(null,"neighbors");function W(D,se,x){return arguments.length<3?X(D,se):G(D,se,x)}W.bidirectional=G,W.singleSource=X,W.singleSourceLength=E,W.undirectedSingleSourceLength=F,W.brandes=function P(D,se){se=""+se;var z,ee,Y,B,b,M,T,le,j,x=[],k={},oe={},$=D.nodes();for(M=0,le=$.length;M<le;M++)k[B=$[M]]=[],oe[B]=0;var Me={};oe[se]=1,Me[se]=0;for(var ae=C.of(se);ae.size;)for(B=ae.dequeue(),x.push(B),z=Me[B],ee=oe[B],T=0,j=(Y=D.outboundNeighbors(B)).length;T<j;T++)(b=Y[T])in Me||(ae.enqueue(b),Me[b]=z+1),Me[b]===z+1&&(oe[b]+=ee,k[b].push(B));return[x,k,oe]},je.exports=W},9791:je=>{je.exports=function(S){return null!==S&&"object"==typeof S&&"function"==typeof S.addUndirectedEdgeWithKey&&"function"==typeof S.dropNode&&"boolean"==typeof S.multi}},2475:function(je){je.exports=function(){"use strict";function me(_e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(_e)}function S(_e,Te){_e.prototype=Object.create(Te.prototype),_e.prototype.constructor=_e,C(_e,Te)}function Z(_e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(_e)}function C(_e,Te){return(C=Object.setPrototypeOf||function(ve,L){return ve.__proto__=L,ve})(_e,Te)}function G(_e,Te,ve){return(G=function q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(L,Q,ge){var Pe=[null];Pe.push.apply(Pe,Q);var $e=new(Function.bind.apply(L,Pe));return ge&&C($e,ge.prototype),$e}).apply(null,arguments)}function X(_e){var Te="function"==typeof Map?new Map:void 0;return(X=function(ve){if(null===ve||-1===Function.toString.call(ve).indexOf("[native code]"))return ve;if("function"!=typeof ve)throw new TypeError("Super expression must either be null or a function");if(void 0!==Te){if(Te.has(ve))return Te.get(ve);Te.set(ve,Q)}function Q(){return G(ve,arguments,Z(this).constructor)}return Q.prototype=Object.create(ve.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),C(Q,ve)})(_e)}function _(_e){if(void 0===_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}var E=function(){for(var _e=arguments[0],Te=1,ve=arguments.length;Te<ve;Te++)if(arguments[Te])for(var L in arguments[Te])_e[L]=arguments[Te][L];return _e};function F(_e,Te,ve,L){var Q=_e._nodes.get(Te),ge=null;return Q?ge="mixed"===L?Q.out&&Q.out[ve]||Q.undirected&&Q.undirected[ve]:"directed"===L?Q.out&&Q.out[ve]:Q.undirected&&Q.undirected[ve]:ge}function P(_e){return"object"===me(_e)&&null!==_e&&_e.constructor===Object}function D(_e){var Te;for(Te in _e)return!1;return!0}function se(_e,Te,ve){Object.defineProperty(_e,Te,{enumerable:!1,configurable:!1,writable:!0,value:ve})}function x(_e,Te,ve){var L={enumerable:!0,configurable:!0};"function"==typeof ve?L.get=ve:(L.value=ve,L.writable=!1),Object.defineProperty(_e,Te,L)}function k(_e){return!(!P(_e)||_e.attributes&&!Array.isArray(_e.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var oe,$={exports:{}},z="object"==typeof Reflect?Reflect:null,ee=z&&"function"==typeof z.apply?z.apply:function(_e,Te,ve){return Function.prototype.apply.call(_e,Te,ve)};oe=z&&"function"==typeof z.ownKeys?z.ownKeys:Object.getOwnPropertySymbols?function(_e){return Object.getOwnPropertyNames(_e).concat(Object.getOwnPropertySymbols(_e))}:function(_e){return Object.getOwnPropertyNames(_e)};var Y=Number.isNaN||function(_e){return _e!=_e};function B(){B.init.call(this)}$.exports=B,$.exports.once=function(_e,Te){return new Promise(function(ve,L){function Q(Pe){_e.removeListener(Te,ge),L(Pe)}function ge(){"function"==typeof _e.removeListener&&_e.removeListener("error",Q),ve([].slice.call(arguments))}var Pe;Ve(_e,Te,ge,{once:!0}),"error"!==Te&&("function"==typeof(Pe=_e).on&&Ve(Pe,"error",Q,{once:!0}))})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var b=10;function M(_e){if("function"!=typeof _e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _e)}function T(_e){return void 0===_e._maxListeners?B.defaultMaxListeners:_e._maxListeners}function le(_e,Te,ve,L){var Q,ge,Pe;if(M(ve),void 0===(ge=_e._events)?(ge=_e._events=Object.create(null),_e._eventsCount=0):(void 0!==ge.newListener&&(_e.emit("newListener",Te,ve.listener?ve.listener:ve),ge=_e._events),Pe=ge[Te]),void 0===Pe)Pe=ge[Te]=ve,++_e._eventsCount;else if("function"==typeof Pe?Pe=ge[Te]=L?[ve,Pe]:[Pe,ve]:L?Pe.unshift(ve):Pe.push(ve),(Q=T(_e))>0&&Pe.length>Q&&!Pe.warned){Pe.warned=!0;var ct=new Error("Possible EventEmitter memory leak detected. "+Pe.length+" "+String(Te)+" listeners added. Use emitter.setMaxListeners() to increase limit");ct.name="MaxListenersExceededWarning",ct.emitter=_e,ct.type=Te,ct.count=Pe.length,console&&console.warn&&console.warn(ct)}return _e}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Me(_e,Te,ve){var L={fired:!1,wrapFn:void 0,target:_e,type:Te,listener:ve},Q=j.bind(L);return Q.listener=ve,L.wrapFn=Q,Q}function ae(_e,Te,ve){var L=_e._events;if(void 0===L)return[];var Q=L[Te];return void 0===Q?[]:"function"==typeof Q?ve?[Q.listener||Q]:[Q]:ve?function(ge){for(var Pe=new Array(ge.length),$e=0;$e<Pe.length;++$e)Pe[$e]=ge[$e].listener||ge[$e];return Pe}(Q):Oe(Q,Q.length)}function xe(_e){var Te=this._events;if(void 0!==Te){var ve=Te[_e];if("function"==typeof ve)return 1;if(void 0!==ve)return ve.length}return 0}function Oe(_e,Te){for(var ve=new Array(Te),L=0;L<Te;++L)ve[L]=_e[L];return ve}function Ve(_e,Te,ve,L){if("function"==typeof _e.on)L.once?_e.once(Te,ve):_e.on(Te,ve);else{if("function"!=typeof _e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _e);_e.addEventListener(Te,function Q(ge){L.once&&_e.removeEventListener(Te,Q),ve(ge)})}}function Qe(_e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:_e}),this.done=!1}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(_e){if("number"!=typeof _e||_e<0||Y(_e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_e+".");b=_e}}),B.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(_e){if("number"!=typeof _e||_e<0||Y(_e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_e+".");return this._maxListeners=_e,this},B.prototype.getMaxListeners=function(){return T(this)},B.prototype.emit=function(_e){for(var Te=[],ve=1;ve<arguments.length;ve++)Te.push(arguments[ve]);var L="error"===_e,Q=this._events;if(void 0!==Q)L=L&&void 0===Q.error;else if(!L)return!1;if(L){var ge;if(Te.length>0&&(ge=Te[0]),ge instanceof Error)throw ge;var Pe=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw Pe.context=ge,Pe}var $e=Q[_e];if(void 0===$e)return!1;if("function"==typeof $e)ee($e,this,Te);else{var ct=$e.length,Tt=Oe($e,ct);for(ve=0;ve<ct;++ve)ee(Tt[ve],this,Te)}return!0},B.prototype.addListener=function(_e,Te){return le(this,_e,Te,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(_e,Te){return le(this,_e,Te,!0)},B.prototype.once=function(_e,Te){return M(Te),this.on(_e,Me(this,_e,Te)),this},B.prototype.prependOnceListener=function(_e,Te){return M(Te),this.prependListener(_e,Me(this,_e,Te)),this},B.prototype.removeListener=function(_e,Te){var ve,L,Q,ge,Pe;if(M(Te),void 0===(L=this._events))return this;if(void 0===(ve=L[_e]))return this;if(ve===Te||ve.listener===Te)0==--this._eventsCount?this._events=Object.create(null):(delete L[_e],L.removeListener&&this.emit("removeListener",_e,ve.listener||Te));else if("function"!=typeof ve){for(Q=-1,ge=ve.length-1;ge>=0;ge--)if(ve[ge]===Te||ve[ge].listener===Te){Pe=ve[ge].listener,Q=ge;break}if(Q<0)return this;0===Q?ve.shift():function($e,ct){for(;ct+1<$e.length;ct++)$e[ct]=$e[ct+1];$e.pop()}(ve,Q),1===ve.length&&(L[_e]=ve[0]),void 0!==L.removeListener&&this.emit("removeListener",_e,Pe||Te)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(_e){var Te,ve,L;if(void 0===(ve=this._events))return this;if(void 0===ve.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ve[_e]&&(0==--this._eventsCount?this._events=Object.create(null):delete ve[_e]),this;if(0===arguments.length){var Q,ge=Object.keys(ve);for(L=0;L<ge.length;++L)"removeListener"!==(Q=ge[L])&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Te=ve[_e]))this.removeListener(_e,Te);else if(void 0!==Te)for(L=Te.length-1;L>=0;L--)this.removeListener(_e,Te[L]);return this},B.prototype.listeners=function(_e){return ae(this,_e,!0)},B.prototype.rawListeners=function(_e){return ae(this,_e,!1)},B.listenerCount=function(_e,Te){return"function"==typeof _e.listenerCount?_e.listenerCount(Te):xe.call(_e,Te)},B.prototype.listenerCount=xe,B.prototype.eventNames=function(){return this._eventsCount>0?oe(this._events):[]},Qe.prototype.next=function(){if(this.done)return{done:!0};var _e=this._next();return _e.done&&(this.done=!0),_e},typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this}),Qe.of=function(){var _e=arguments,Te=_e.length,ve=0;return new Qe(function(){return ve>=Te?{done:!0}:{done:!1,value:_e[ve++]}})},Qe.empty=function(){var _e=new Qe(null);return _e.done=!0,_e},Qe.is=function(_e){return _e instanceof Qe||"object"==typeof _e&&null!==_e&&"function"==typeof _e.next};var Je=Qe,Ce=function(_e,Te){for(var ve,L=arguments.length>1?Te:1/0,Q=L!==1/0?new Array(L):[],ge=0;;){if(ge===L)return Q;if((ve=_e.next()).done)return ge!==Te?Q.slice(0,ge):Q;Q[ge++]=ve.value}},Be=function(_e){function Te(ve,L){var Q;return(Q=_e.call(this)||this).name="GraphError",Q.message=ve||"",Q.data=L||{},Q}return S(Te,_e),Te}(X(Error)),Ae=function(_e){function Te(ve,L){var Q;return(Q=_e.call(this,ve,L)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Q),Te.prototype.constructor),Q}return S(Te,_e),Te}(Be),ke=function(_e){function Te(ve,L){var Q;return(Q=_e.call(this,ve,L)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Q),Te.prototype.constructor),Q}return S(Te,_e),Te}(Be),de=function(_e){function Te(ve,L){var Q;return(Q=_e.call(this,ve,L)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Q),Te.prototype.constructor),Q}return S(Te,_e),Te}(Be);function Se(_e,Te){this.key=_e,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function rt(_e,Te){this.key=_e,this.attributes=Te,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function mt(_e,Te){this.key=_e,this.attributes=Te,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function qe(_e,Te,ve,L,Q,ge){this.key=Te,this.attributes=ge,this.undirected=_e,this.source=L,this.target=Q,this.generatedKey=ve}function fe(_e,Te,ve,L,Q,ge,Pe){var $e,ct,Tt="out",Bt="in";if(Te&&(Tt=Bt="undirected"),_e.multi){if(void 0===(ct=($e=ge[Tt])[Q])&&($e[Q]=ct=new Set),ct.add(ve),L===Q&&Te)return;void 0===($e=Pe[Bt])[L]&&($e[L]=ct)}else{if(ge[Tt][Q]=ve,L===Q&&Te)return;Pe[Bt][L]=ve}}rt.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},mt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var A=[{name:function(_e){return"get".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Q;if(Q=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes[Q]}}},{name:function(_e){return"get".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L){var Q;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ge=""+L,Pe=""+arguments[1];if(!(Q=F(this,ge,Pe,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(ge,'" - "').concat(Pe,'").'))}else if(!(Q=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&Q.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Q.attributes}}},{name:function(_e){return"has".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Q;if(Q=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes.hasOwnProperty(Q)}}},{name:function(_e){return"set".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q,ge){var Pe;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+L,ct=""+Q;if(Q=arguments[2],ge=arguments[3],!(Pe=F(this,$e,ct,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(ct,'").'))}else if(!(Pe=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&Pe.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Pe.attributes[Q]=ge,this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:Q}),this}}},{name:function(_e){return"update".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q,ge){var Pe;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+L,ct=""+Q;if(Q=arguments[2],ge=arguments[3],!(Pe=F(this,$e,ct,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat($e,'" - "').concat(ct,'").'))}else if(!(Pe=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("function"!=typeof ge)throw new Ae("Graph.".concat(Te,": updater should be a function."));if("mixed"!==ve&&Pe.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return Pe.attributes[Q]=ge(Pe.attributes[Q]),this.emit("edgeAttributesUpdated",{key:Pe.key,type:"set",attributes:Pe.attributes,name:Q}),this}}},{name:function(_e){return"remove".concat(_e,"Attribute")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Q;if(Q=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return delete ge.attributes[Q],this.emit("edgeAttributesUpdated",{key:ge.key,type:"remove",attributes:ge.attributes,name:Q}),this}}},{name:function(_e){return"replace".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Q;if(Q=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if(!P(Q))throw new Ae("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return ge.attributes=Q,this.emit("edgeAttributesUpdated",{key:ge.key,type:"replace",attributes:ge.attributes}),this}}},{name:function(_e){return"merge".concat(_e,"Attributes")},attacher:function(_e,Te,ve){_e.prototype[Te]=function(L,Q){var ge;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new de("Graph.".concat(Te,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new de("Graph.".concat(Te,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Pe=""+L,$e=""+Q;if(Q=arguments[2],!(ge=F(this,Pe,$e,ve)))throw new ke("Graph.".concat(Te,': could not find an edge for the given path ("').concat(Pe,'" - "').concat($e,'").'))}else if(!(ge=this._edges.get(L=""+L)))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" edge in the graph.'));if(!P(Q))throw new Ae("Graph.".concat(Te,": provided attributes are not a plain object."));if("mixed"!==ve&&ge.undirected!==("undirected"===ve))throw new ke("Graph.".concat(Te,': could not find the "').concat(L,'" ').concat(ve," edge in the graph."));return E(ge.attributes,Q),this.emit("edgeAttributesUpdated",{key:ge.key,type:"merge",attributes:ge.attributes,data:Q}),this}}}],ie=Je,J=function(){var _e,Te=arguments,ve=-1;return new ie(function L(){if(!_e){if(++ve>=Te.length)return{done:!0};_e=Te[ve]}var Q=_e.next();return Q.done?(_e=null,L()):Q})},He=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Xe(_e,Te){for(var ve in Te)_e.push(Te[ve].key)}function ue(_e,Te){for(var ve in Te)Te[ve].forEach(function(L){return _e.push(L.key)})}function te(_e,Te,ve){for(var L in _e)if(L!==ve){var Q=_e[L];Te(Q.key,Q.attributes,Q.source.key,Q.target.key,Q.source.attributes,Q.target.attributes,Q.undirected,Q.generatedKey)}}function U(_e,Te,ve){for(var L in _e)L!==ve&&_e[L].forEach(function(Q){return Te(Q.key,Q.attributes,Q.source.key,Q.target.key,Q.source.attributes,Q.target.attributes,Q.undirected,Q.generatedKey)})}function I(_e,Te,ve){for(var L in _e)if(L!==ve){var Q=_e[L];if(Te(Q.key,Q.attributes,Q.source.key,Q.target.key,Q.source.attributes,Q.target.attributes,Q.undirected,Q.generatedKey))return!0}return!1}function N(_e,Te,ve){var L,Q,ge,Pe,$e;for(var ct in _e)if(ct!==ve)for(L=_e[ct].values();!0!==(Q=L.next()).done;)if(Pe=(ge=Q.value).source,Te(ge.key,ge.attributes,Pe.key,($e=ge.target).key,Pe.attributes,$e.attributes,ge.undirected,ge.generatedKey))return!0;return!1}function he(_e,Te){var ve=Object.keys(_e),L=ve.length,Q=null,ge=0;return new Je(function Pe(){var $e;if(Q){var ct=Q.next();if(ct.done)return Q=null,ge++,Pe();$e=ct.value}else{if(ge>=L)return{done:!0};var Tt=ve[ge];if(Tt===Te)return ge++,Pe();if(($e=_e[Tt])instanceof Set)return Q=$e.values(),Pe();ge++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function We(_e,Te,ve){var L=Te[ve];L&&_e.push(L.key)}function Ee(_e,Te,ve){var L=Te[ve];L&&L.forEach(function(Q){return _e.push(Q.key)})}function Ue(_e,Te,ve){var L=_e[Te];if(L){var Q=L.source,ge=L.target;ve(L.key,L.attributes,Q.key,ge.key,Q.attributes,ge.attributes,L.undirected,L.generatedKey)}}function Ze(_e,Te,ve){var L=_e[Te];L&&L.forEach(function(Q){return ve(Q.key,Q.attributes,Q.source.key,Q.target.key,Q.source.attributes,Q.target.attributes,Q.undirected,Q.generatedKey)})}function vt(_e,Te,ve){var L=_e[Te];if(L){var Q=L.source,ge=L.target;return ve(L.key,L.attributes,Q.key,ge.key,Q.attributes,ge.attributes,L.undirected,L.generatedKey)}}function Nt(_e,Te,ve){var L=_e[Te];if(L){for(var Q,ge,Pe=L.values();!0!==(Q=Pe.next()).done;)if(ve((ge=Q.value).key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes,ge.undirected,ge.generatedKey))return!0;return!1}}function wt(_e,Te){var ve=_e[Te];if(ve instanceof Set){var L=ve.values();return new Je(function(){var Q=L.next();if(Q.done)return Q;var ge=Q.value;return{done:!1,value:[ge.key,ge.attributes,ge.source.key,ge.target.key,ge.source.attributes,ge.target.attributes]}})}return Je.of([ve.key,ve.attributes,ve.source.key,ve.target.key,ve.source.attributes,ve.target.attributes])}var xn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Pi(_e,Te){if(void 0!==Te)for(var ve in Te)_e.add(ve)}function hr(_e,Te,ve){for(var L in Te){var Q=Te[L];Q instanceof Set&&(Q=Q.values().next().value);var ge=Q.source,$e=ge===_e?Q.target:ge;ve($e.key,$e.attributes)}}function zs(_e,Te,ve,L){for(var Q in ve){var ge=ve[Q];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,ct=Pe===Te?ge.target:Pe;_e.has(ct.key)||(_e.add(ct.key),L(ct.key,ct.attributes))}}function go(_e,Te,ve){for(var L in Te){var Q=Te[L];Q instanceof Set&&(Q=Q.values().next().value);var ge=Q.source,$e=ge===_e?Q.target:ge;if(ve($e.key,$e.attributes))return!0}return!1}function Xi(_e,Te,ve,L){for(var Q in ve){var ge=ve[Q];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,ct=Pe===Te?ge.target:Pe;if(!_e.has(ct.key)&&(_e.add(ct.key),L(ct.key,ct.attributes)))return!0}return!1}function Hr(_e,Te){var ve=Object.keys(Te),L=ve.length,Q=0;return new Je(function(){if(Q>=L)return{done:!0};var ge=Te[ve[Q++]];ge instanceof Set&&(ge=ge.values().next().value);var Pe=ge.source,ct=Pe===_e?ge.target:Pe;return{done:!1,value:[ct.key,ct.attributes]}})}function mo(_e,Te,ve){var L=Object.keys(ve),Q=L.length,ge=0;return new Je(function Pe(){if(ge>=Q)return{done:!0};var $e=ve[L[ge++]];$e instanceof Set&&($e=$e.values().next().value);var ct=$e.source,Bt=ct===Te?$e.target:ct;return _e.has(Bt.key)?Pe():(_e.add(Bt.key),{done:!1,value:[Bt.key,Bt.attributes]})})}function Ge(_e,Te,ve){for(var L,Q,ge,Pe,$e,ct,Tt,Bt=Te._nodes.values(),zt=Te.type;!0!==(L=Bt.next()).done;){if(Q=L.value,"undirected"!==zt)for(ge in Pe=Q.out)if(ct=($e=Pe[ge]).target,Tt=ve(Q.key,ct.key,Q.attributes,ct.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&Tt)return;if("directed"!==zt)for(ge in Pe=Q.undirected)if((ct=($e=Pe[ge]).target).key!==ge&&(ct=$e.source),Tt=ve(Q.key,ct.key,Q.attributes,ct.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),_e&&Tt)return}}function Ke(_e,Te,ve){for(var L,Q,ge,Pe,$e,ct,Tt,Bt,zt,nn=Te._nodes.values(),An=Te.type;!0!==(L=nn.next()).done;){if(Q=L.value,"undirected"!==An)for(ge in ct=Q.out)for(Pe=ct[ge].values();!0!==($e=Pe.next()).done;)if(Bt=(Tt=$e.value).target,zt=ve(Q.key,Bt.key,Q.attributes,Bt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),_e&&zt)return;if("directed"!==An)for(ge in ct=Q.undirected)for(Pe=ct[ge].values();!0!==($e=Pe.next()).done;)if((Bt=(Tt=$e.value).target).key!==ge&&(Bt=Tt.source),zt=ve(Q.key,Bt.key,Q.attributes,Bt.attributes,Tt.key,Tt.attributes,Tt.undirected,Tt.generatedKey),_e&&zt)return}}function Gt(_e,Te){var ve={key:_e};return D(Te.attributes)||(ve.attributes=E({},Te.attributes)),ve}function At(_e,Te){var ve={source:Te.source.key,target:Te.target.key};return Te.generatedKey||(ve.key=_e),D(Te.attributes)||(ve.attributes=E({},Te.attributes)),Te.undirected&&(ve.undirected=!0),ve}var gs=new Set(["directed","undirected","mixed"]),sc=new Set(["domain","_events","_eventsCount","_maxListeners"]),Qt={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ra(_e,Te,ve){var L=new _e.NodeDataClass(Te,ve);return _e._nodes.set(Te,L),_e.emit("nodeAdded",{key:Te,attributes:ve}),L}function nr(_e,Te,ve,L,Q,ge,Pe,$e){if(!L&&"undirected"===_e.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(L&&"directed"===_e.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!P($e))throw new Ae("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(ge=""+ge,Pe=""+Pe,$e=$e||{},!_e.allowSelfLoops&&ge===Pe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ct=_e._nodes.get(ge),Tt=_e._nodes.get(Pe);if(!ct)throw new ke("Graph.".concat(Te,': source node "').concat(ge,'" not found.'));if(!Tt)throw new ke("Graph.".concat(Te,': target node "').concat(Pe,'" not found.'));var Bt={key:null,undirected:L,source:ge,target:Pe,attributes:$e};if(ve&&(Q=_e._edgeKeyGenerator(Bt)),_e._edges.has(Q=""+Q))throw new de("Graph.".concat(Te,': the "').concat(Q,'" edge already exists in the graph.'));if(!_e.multi&&(L?void 0!==ct.undirected[Pe]:void 0!==ct.out[Pe]))throw new de("Graph.".concat(Te,': an edge linking "').concat(ge,'" to "').concat(Pe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var zt=new qe(L,Q,ve,ct,Tt,$e);return _e._edges.set(Q,zt),ge===Pe?L?(ct.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(ct.directedSelfLoops++,_e._directedSelfLoopCount++):L?(ct.undirectedDegree++,Tt.undirectedDegree++):(ct.outDegree++,Tt.inDegree++),fe(_e,L,zt,ge,Pe,ct,Tt),L?_e._undirectedSize++:_e._directedSize++,Bt.key=Q,_e.emit("edgeAdded",Bt),Q}function Oa(_e,Te,ve,L,Q,ge,Pe,$e,ct){if(!L&&"undirected"===_e.type)throw new de("Graph.".concat(Te,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(L&&"directed"===_e.type)throw new de("Graph.".concat(Te,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(ct){if("function"!=typeof $e)throw new Ae("Graph.".concat(Te,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!P($e))throw new Ae("Graph.".concat(Te,': invalid attributes. Expecting an object but got "').concat($e,'"'));var Tt;if(ge=""+ge,Pe=""+Pe,ct&&(Tt=$e,$e=void 0),!_e.allowSelfLoops&&ge===Pe)throw new de("Graph.".concat(Te,': source & target are the same ("').concat(ge,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Bt,zt,nn=_e._nodes.get(ge),An=_e._nodes.get(Pe);if(!ve&&(Bt=_e._edges.get(Q))){if(Bt.source.key!==ge||Bt.target.key!==Pe||L&&(Bt.source.key!==Pe||Bt.target.key!==ge))throw new de("Graph.".concat(Te,': inconsistency detected when attempting to merge the "').concat(Q,'" edge with "').concat(ge,'" source & "').concat(Pe,'" target vs. ("').concat(Bt.source.key,'", "').concat(Bt.target.key,'").'));zt=Bt}if(zt||_e.multi||!nn||(zt=L?nn.undirected[Pe]:nn.out[Pe]),zt)return(ct?Tt:$e)?(ct?(zt.attributes=Tt(zt.attributes),_e.emit("edgeAttributesUpdated",{type:"replace",key:zt.key,attributes:zt.attributes})):(E(zt.attributes,$e),_e.emit("edgeAttributesUpdated",{type:"merge",key:zt.key,attributes:zt.attributes,data:$e})),zt.key):zt.key;$e=$e||{},ct&&Tt&&($e=Tt($e));var Qr={key:null,undirected:L,source:ge,target:Pe,attributes:$e};if(ve&&(Q=_e._edgeKeyGenerator(Qr)),_e._edges.has(Q=""+Q))throw new de("Graph.".concat(Te,': the "').concat(Q,'" edge already exists in the graph.'));return nn||(nn=Ra(_e,ge,{}),ge===Pe&&(An=nn)),An||(An=Ra(_e,Pe,{})),Bt=new qe(L,Q,ve,nn,An,$e),_e._edges.set(Q,Bt),ge===Pe?L?(nn.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(nn.directedSelfLoops++,_e._directedSelfLoopCount++):L?(nn.undirectedDegree++,An.undirectedDegree++):(nn.outDegree++,An.inDegree++),fe(_e,L,Bt,ge,Pe,nn,An),L?_e._undirectedSize++:_e._directedSize++,Qr.key=Q,_e.emit("edgeAdded",Qr),Q}var _e,gn=function(_e){function Te(L){var Q;if(Q=_e.call(this)||this,(L=E({},Qt,L)).edgeKeyGenerator&&"function"!=typeof L.edgeKeyGenerator)throw new Ae("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(L.edgeKeyGenerator,'".'));if("boolean"!=typeof L.multi)throw new Ae("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(L.multi,'".'));if(!gs.has(L.type))throw new Ae('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(L.type,'".'));if("boolean"!=typeof L.allowSelfLoops)throw new Ae("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(L.allowSelfLoops,'".'));var ge,Pe="mixed"===L.type?Se:"directed"===L.type?rt:mt;return se(_(Q),"NodeDataClass",Pe),se(_(Q),"_attributes",{}),se(_(Q),"_nodes",new Map),se(_(Q),"_edges",new Map),se(_(Q),"_directedSize",0),se(_(Q),"_undirectedSize",0),se(_(Q),"_directedSelfLoopCount",0),se(_(Q),"_undirectedSelfLoopCount",0),se(_(Q),"_edgeKeyGenerator",L.edgeKeyGenerator||(ge=0,function(){return ge++})),se(_(Q),"_options",L),sc.forEach(function($e){return se(_(Q),$e,Q[$e])}),x(_(Q),"order",function(){return Q._nodes.size}),x(_(Q),"size",function(){return Q._edges.size}),x(_(Q),"directedSize",function(){return Q._directedSize}),x(_(Q),"undirectedSize",function(){return Q._undirectedSize}),x(_(Q),"selfLoopCount",function(){return Q._directedSelfLoopCount+Q._undirectedSelfLoopCount}),x(_(Q),"directedSelfLoopCount",function(){return Q._directedSelfLoopCount}),x(_(Q),"undirectedSelfLoopCount",function(){return Q._undirectedSelfLoopCount}),x(_(Q),"multi",Q._options.multi),x(_(Q),"type",Q._options.type),x(_(Q),"allowSelfLoops",Q._options.allowSelfLoops),x(_(Q),"implementation",function(){return"graphology"}),Q}S(Te,_e);var ve=Te.prototype;return ve.hasNode=function(L){return this._nodes.has(""+L)},ve.hasDirectedEdge=function(L,Q){if("undirected"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+L);return!!Pe&&!Pe.undirected}if(2===arguments.length){Q=""+Q;var $e=this._nodes.get(L=""+L);if(!$e)return!1;var ct=$e.out[Q];return!(!ct||this.multi&&!ct.size)}throw new Ae("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasUndirectedEdge=function(L,Q){if("directed"===this.type)return!1;if(1===arguments.length){var Pe=this._edges.get(""+L);return!!Pe&&Pe.undirected}if(2===arguments.length){Q=""+Q;var $e=this._nodes.get(L=""+L);if(!$e)return!1;var ct=$e.undirected[Q];return!(!ct||this.multi&&!ct.size)}throw new Ae("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasEdge=function(L,Q){if(1===arguments.length)return this._edges.has(""+L);if(2===arguments.length){Q=""+Q;var Pe=this._nodes.get(L=""+L);if(!Pe)return!1;var $e=void 0!==Pe.out&&Pe.out[Q];return $e||($e=void 0!==Pe.undirected&&Pe.undirected[Q]),!(!$e||this.multi&&!$e.size)}throw new Ae("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.directedEdge=function(L,Q){if("undirected"!==this.type){if(L=""+L,Q=""+Q,this.multi)throw new de("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ge=this._nodes.get(L);if(!ge)throw new ke('Graph.directedEdge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Q))throw new ke('Graph.directedEdge: could not find the "'.concat(Q,'" target node in the graph.'));var Pe=ge.out&&ge.out[Q]||void 0;return Pe?Pe.key:void 0}},ve.undirectedEdge=function(L,Q){if("directed"!==this.type){if(L=""+L,Q=""+Q,this.multi)throw new de("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ge=this._nodes.get(L);if(!ge)throw new ke('Graph.undirectedEdge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Q))throw new ke('Graph.undirectedEdge: could not find the "'.concat(Q,'" target node in the graph.'));var Pe=ge.undirected&&ge.undirected[Q]||void 0;return Pe?Pe.key:void 0}},ve.edge=function(L,Q){if(this.multi)throw new de("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Q=""+Q;var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.edge: could not find the "'.concat(L,'" source node in the graph.'));if(!this._nodes.has(Q))throw new ke('Graph.edge: could not find the "'.concat(Q,'" target node in the graph.'));var Pe=ge.out&&ge.out[Q]||ge.undirected&&ge.undirected[Q]||void 0;if(Pe)return Pe.key},ve.inDegree=function(L){var Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Q)throw new Ae('Graph.inDegree: Expecting a boolean but got "'.concat(Q,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.inDegree: could not find the "'.concat(L,'" node in the graph.'));return"undirected"===this.type?0:ge.inDegree+(Q?ge.directedSelfLoops:0)},ve.outDegree=function(L){var Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Q)throw new Ae('Graph.outDegree: Expecting a boolean but got "'.concat(Q,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.outDegree: could not find the "'.concat(L,'" node in the graph.'));return"undirected"===this.type?0:ge.outDegree+(Q?ge.directedSelfLoops:0)},ve.directedDegree=function(L){var Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Q)throw new Ae('Graph.directedDegree: Expecting a boolean but got "'.concat(Q,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.directedDegree: could not find the "'.concat(L,'" node in the graph.'));if("undirected"===this.type)return 0;var Pe=Q?ge.directedSelfLoops:0;return ge.inDegree+Pe+(ge.outDegree+Pe)},ve.undirectedDegree=function(L){var Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Q)throw new Ae('Graph.undirectedDegree: Expecting a boolean but got "'.concat(Q,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.undirectedDegree: could not find the "'.concat(L,'" node in the graph.'));return"directed"===this.type?0:ge.undirectedDegree+2*(Q?ge.undirectedSelfLoops:0)},ve.degree=function(L){var Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Q)throw new Ae('Graph.degree: Expecting a boolean but got "'.concat(Q,'" for the second parameter (allowing self-loops to be counted).'));var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.degree: could not find the "'.concat(L,'" node in the graph.'));var Pe=0,$e=0;return"directed"!==this.type&&(Q&&($e=ge.undirectedSelfLoops),Pe+=ge.undirectedDegree+2*$e),"undirected"!==this.type&&(Q&&($e=ge.directedSelfLoops),Pe+=ge.inDegree+ge.outDegree+2*$e),Pe},ve.source=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.source: could not find the "'.concat(L,'" edge in the graph.'));return Q.source.key},ve.target=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.target: could not find the "'.concat(L,'" edge in the graph.'));return Q.target.key},ve.extremities=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.extremities: could not find the "'.concat(L,'" edge in the graph.'));return[Q.source.key,Q.target.key]},ve.opposite=function(L,Q){L=""+L;var ge=this._edges.get(Q=""+Q);if(!ge)throw new ke('Graph.opposite: could not find the "'.concat(Q,'" edge in the graph.'));var Pe=ge.source.key,$e=ge.target.key;if(L!==Pe&&L!==$e)throw new ke('Graph.opposite: the "'.concat(L,'" node is not attached to the "').concat(Q,'" edge (').concat(Pe,", ").concat($e,")."));return L===Pe?$e:Pe},ve.hasExtremity=function(L,Q){Q=""+Q;var ge=this._edges.get(L=""+L);if(!ge)throw new ke('Graph.hasExtremity: could not find the "'.concat(L,'" edge in the graph.'));return ge.source.key===Q||ge.target.key===Q},ve.isUndirected=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.isUndirected: could not find the "'.concat(L,'" edge in the graph.'));return Q.undirected},ve.isDirected=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.isDirected: could not find the "'.concat(L,'" edge in the graph.'));return!Q.undirected},ve.isSelfLoop=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.isSelfLoop: could not find the "'.concat(L,'" edge in the graph.'));return Q.source===Q.target},ve.hasGeneratedKey=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.hasGeneratedKey: could not find the "'.concat(L,'" edge in the graph.'));return Q.generatedKey},ve.addNode=function(L,Q){return function(ge,Pe,$e){if($e&&!P($e))throw new Ae('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},ge._nodes.has(Pe=""+Pe))throw new de('Graph.addNode: the "'.concat(Pe,'" node already exist in the graph.'));var ct=new ge.NodeDataClass(Pe,$e);return ge._nodes.set(Pe,ct),ge.emit("nodeAdded",{key:Pe,attributes:$e}),ct}(this,L,Q).key},ve.mergeNode=function(L,Q){if(Q&&!P(Q))throw new Ae('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Q,'"'));Q=Q||{};var ge=this._nodes.get(L=""+L);return ge?(Q&&(E(ge.attributes,Q),this.emit("nodeAttributesUpdated",{type:"merge",key:L,attributes:ge.attributes,data:Q})),L):(ge=new this.NodeDataClass(L,Q),this._nodes.set(L,ge),this.emit("nodeAdded",{key:L,attributes:Q}),L)},ve.updateNode=function(L,Q){if(Q&&"function"!=typeof Q)throw new Ae('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Q,'"'));var ge=this._nodes.get(L=""+L);if(ge)return Q&&(ge.attributes=Q(ge.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:L,attributes:ge.attributes})),L;var $e=Q?Q({}):{};return ge=new this.NodeDataClass(L,$e),this._nodes.set(L,ge),this.emit("nodeAdded",{key:L,attributes:$e}),L},ve.dropNode=function(L){var Q=this,ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.dropNode: could not find the "'.concat(L,'" node in the graph.'));this.forEachEdge(L,function(Pe){Q.dropEdge(Pe)}),this._nodes.delete(L),this.emit("nodeDropped",{key:L,attributes:ge.attributes})},ve.dropEdge=function(L){var Q;if(arguments.length>1){var ge=""+arguments[0],Pe=""+arguments[1];if(!(Q=F(this,ge,Pe,this.type)))throw new ke('Graph.dropEdge: could not find the "'.concat(ge,'" -> "').concat(Pe,'" edge in the graph.'))}else if(!(Q=this._edges.get(L=""+L)))throw new ke('Graph.dropEdge: could not find the "'.concat(L,'" edge in the graph.'));this._edges.delete(Q.key);var ct=Q.source,Tt=Q.target,Bt=Q.attributes,zt=Q.undirected;return ct===Tt?zt?(ct.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(ct.directedSelfLoops--,this._directedSelfLoopCount--):zt?(ct.undirectedDegree--,Tt.undirectedDegree--):(ct.outDegree--,Tt.inDegree--),function R(_e,Te,ve){var L=_e.multi,Q=ve.source,ge=ve.target,Pe=Q.key,$e=ge.key,ct=Q[Te?"undirected":"out"],Tt=Te?"undirected":"in";if($e in ct)if(L){var Bt=ct[$e];1===Bt.size?(delete ct[$e],delete ge[Tt][Pe]):Bt.delete(ve)}else delete ct[$e];L||delete ge[Tt][Pe]}(this,zt,Q),zt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:L,attributes:Bt,source:ct.key,target:Tt.key,undirected:zt}),this},ve.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ve.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ve.getAttribute=function(L){return this._attributes[L]},ve.getAttributes=function(){return this._attributes},ve.hasAttribute=function(L){return this._attributes.hasOwnProperty(L)},ve.setAttribute=function(L,Q){return this._attributes[L]=Q,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:L}),this},ve.updateAttribute=function(L,Q){if("function"!=typeof Q)throw new Ae("Graph.updateAttribute: updater should be a function.");return this._attributes[L]=Q(this._attributes[L]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:L}),this},ve.removeAttribute=function(L){return delete this._attributes[L],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:L}),this},ve.replaceAttributes=function(L){if(!P(L))throw new Ae("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=L,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ve.mergeAttributes=function(L){if(!P(L))throw new Ae("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,L),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:L}),this},ve.getNodeAttribute=function(L,Q){var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.getNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return ge.attributes[Q]},ve.getNodeAttributes=function(L){var Q=this._nodes.get(L=""+L);if(!Q)throw new ke('Graph.getNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));return Q.attributes},ve.hasNodeAttribute=function(L,Q){var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.hasNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return ge.attributes.hasOwnProperty(Q)},ve.setNodeAttribute=function(L,Q,ge){var Pe=this._nodes.get(L=""+L);if(!Pe)throw new ke('Graph.setNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));if(arguments.length<3)throw new Ae("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Pe.attributes[Q]=ge,this.emit("nodeAttributesUpdated",{key:L,type:"set",attributes:Pe.attributes,name:Q}),this},ve.updateNodeAttribute=function(L,Q,ge){var Pe=this._nodes.get(L=""+L);if(!Pe)throw new ke('Graph.updateNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));if(arguments.length<3)throw new Ae("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ge)throw new Ae("Graph.updateAttribute: updater should be a function.");var $e=Pe.attributes,ct=ge($e[Q]);return $e[Q]=ct,this.emit("nodeAttributesUpdated",{key:L,type:"set",attributes:Pe.attributes,name:Q}),this},ve.removeNodeAttribute=function(L,Q){var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.hasNodeAttribute: could not find the "'.concat(L,'" node in the graph.'));return delete ge.attributes[Q],this.emit("nodeAttributesUpdated",{key:L,type:"remove",attributes:ge.attributes,name:Q}),this},ve.replaceNodeAttributes=function(L,Q){var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.replaceNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));if(!P(Q))throw new Ae("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ge.attributes=Q,this.emit("nodeAttributesUpdated",{key:L,type:"replace",attributes:ge.attributes}),this},ve.mergeNodeAttributes=function(L,Q){var ge=this._nodes.get(L=""+L);if(!ge)throw new ke('Graph.mergeNodeAttributes: could not find the "'.concat(L,'" node in the graph.'));if(!P(Q))throw new Ae("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return E(ge.attributes,Q),this.emit("nodeAttributesUpdated",{key:L,type:"merge",attributes:ge.attributes,data:Q}),this},ve.updateEachNodeAttributes=function(L,Q){if("function"!=typeof L)throw new Ae("Graph.updateEachNodeAttributes: expecting an updater function.");if(Q&&!k(Q))throw new Ae("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Pe,$e=this._nodes.values();!0!==(ge=$e.next()).done;)(Pe=ge.value).attributes=L(Pe.key,Pe.attributes);this.emit("eachNodeAttributesUpdated",{hints:Q||null})},ve.updateEachEdgeAttributes=function(L,Q){if("function"!=typeof L)throw new Ae("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Q&&!k(Q))throw new Ae("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ge,Pe,$e=this._edges.values();!0!==(ge=$e.next()).done;)(Pe=ge.value).attributes=L(Pe.key,Pe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:Q||null})},ve.forEach=function(L){if("function"!=typeof L)throw new Ae("Graph.forEach: expecting a callback.");this.multi?Ke(!1,this,L):Ge(!1,this,L)},ve.forEachUntil=function(L){if("function"!=typeof L)throw new Ae("Graph.forEach: expecting a callback.");this.multi?Ke(!0,this,L):Ge(!0,this,L)},ve.adjacency=function(){return this.multi?(ct=(L=this)._nodes.values(),Tt=L.type,Bt="outer",zt=null,new Je(function nn(){var An;if("outer"===Bt)return!0===(An=ct.next()).done?An:(Q=An.value,Bt="directed",nn());if("directed"===Bt)return"undirected"===Tt?(Bt="undirected",nn()):(Pe=Q.out,ge=Object.keys(Q.out),$e=0,Bt="inner-directed",nn());if("undirected"===Bt){if("directed"===Tt)return Bt="outer",nn();Pe=Q.undirected,ge=Object.keys(Q.undirected),$e=0,Bt="inner-undirected"}if(!zt&&$e>=ge.length)return Bt="inner-undirected"===Bt?"outer":"undirected",nn();if(!zt){var Pn=ge[$e++];return zt=Pe[Pn].values(),nn()}if((An=zt.next()).done)return zt=null,nn();var Qr=An.value,_o=Qr.target;return"inner-undirected"===Bt&&_o.key===Q.key&&(_o=Qr.source),{done:!1,value:[Q.key,_o.key,Q.attributes,_o.attributes,Qr.key,Qr.attributes]}})):(di=(nn=this)._nodes.values(),Na=nn.type,ii="outer",new Je(function Os(){var su;if("outer"===ii)return!0===(su=di.next()).done?su:(An=su.value,ii="directed",Os());if("directed"===ii)return"undirected"===Na?(ii="undirected",Os()):(Qr=An.out,Pn=Object.keys(An.out),_o=0,ii="inner-directed",Os());if("undirected"===ii){if("directed"===Na)return ii="outer",Os();Qr=An.undirected,Pn=Object.keys(An.undirected),_o=0,ii="inner-undirected"}if(_o>=Pn.length)return ii="inner-undirected"===ii?"outer":"undirected",Os();var ou=Pn[_o++],$n=Qr[ou],yn=$n.target;return"inner-undirected"===ii&&yn.key===An.key&&(yn=$n.source),{done:!1,value:[An.key,yn.key,An.attributes,yn.attributes,$n.key,$n.attributes]}}));var nn,An,Pn,Qr,_o,di,Na,ii,L,Q,ge,Pe,$e,ct,Tt,Bt,zt},ve.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ce(this._nodes.keys(),this._nodes.size)},ve.forEachNode=function(L){if("function"!=typeof L)throw new Ae("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(Q,ge){L(ge,Q.attributes)})},ve.forEachNodeUntil=function(L){if("function"!=typeof L)throw new Ae("Graph.forEachNode: expecting a callback.");for(var Q,ge,Pe=this._nodes.values();!0!==(Q=Pe.next())&&!L((ge=Q.value).key,ge.attributes););},ve.nodeEntries=function(){var L=this._nodes.values();return new Je(function(){var Q=L.next();if(Q.done)return Q;var ge=Q.value;return{value:[ge.key,ge.attributes],done:!1}})},ve.exportNode=function(L){var Q=this._nodes.get(L=""+L);if(!Q)throw new ke('Graph.exportNode: could not find the "'.concat(L,'" node in the graph.'));return Gt(L,Q)},ve.exportEdge=function(L){var Q=this._edges.get(L=""+L);if(!Q)throw new ke('Graph.exportEdge: could not find the "'.concat(L,'" edge in the graph.'));return At(L,Q)},ve.export=function(){var L=new Array(this._nodes.size),Q=0;this._nodes.forEach(function(Pe,$e){L[Q++]=Gt($e,Pe)});var ge=new Array(this._edges.size);return Q=0,this._edges.forEach(function(Pe,$e){ge[Q++]=At($e,Pe)}),{attributes:this.getAttributes(),nodes:L,edges:ge,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ve.importNode=function(L){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function cn(_e){return P(_e)?"key"in _e?!("attributes"in _e)||P(_e.attributes)&&null!==_e.attributes?null:"invalid-attributes":"no-key":"not-object"}(L);if(ge){if("not-object"===ge)throw new Ae('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ge)throw new Ae("Graph.importNode: no key provided.");if("invalid-attributes"===ge)throw new Ae("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Pe=L.key,$e=L.attributes,ct=void 0===$e?{}:$e;return Q?this.mergeNode(Pe,ct):this.addNode(Pe,ct),this},ve.importEdge=function(L){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ge=function fr(_e){return P(_e)?"source"in _e?"target"in _e?!("attributes"in _e)||P(_e.attributes)&&null!==_e.attributes?"undirected"in _e&&"boolean"!=typeof _e.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(L);if(ge){if("not-object"===ge)throw new Ae('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ge)throw new Ae("Graph.importEdge: missing souce.");if("no-target"===ge)throw new Ae("Graph.importEdge: missing target.");if("invalid-attributes"===ge)throw new Ae("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ge)throw new Ae("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Pe=L.source,$e=L.target,ct=L.attributes,Tt=void 0===ct?{}:ct,Bt=L.undirected,zt=void 0!==Bt&&Bt;return"key"in L?(Q?zt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:zt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,L.key,Pe,$e,Tt):(Q?zt?this.mergeUndirectedEdge:this.mergeDirectedEdge:zt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Pe,$e,Tt),this},ve.import=function(L){var Q,ge,Pe,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function W(_e){return null!==_e&&"object"===me(_e)&&"function"==typeof _e.addUndirectedEdgeWithKey&&"function"==typeof _e.dropNode}(L))return this.import(L.export(),$e),this;if(!P(L))throw new Ae("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(L.attributes){if(!P(L.attributes))throw new Ae("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(L.attributes):this.replaceAttributes(L.attributes)}if(L.nodes){if(Pe=L.nodes,!Array.isArray(Pe))throw new Ae("Graph.import: invalid nodes. Expecting an array.");for(Q=0,ge=Pe.length;Q<ge;Q++)this.importNode(Pe[Q],$e)}if(L.edges){if(Pe=L.edges,!Array.isArray(Pe))throw new Ae("Graph.import: invalid edges. Expecting an array.");for(Q=0,ge=Pe.length;Q<ge;Q++)this.importEdge(Pe[Q],$e)}return this},ve.nullCopy=function(L){return new Te(E({},this._options,L))},ve.emptyCopy=function(L){var Q=this.nullCopy(L);return this._nodes.forEach(function(ge,Pe){var $e=E({},ge.attributes);ge=new Q.NodeDataClass(Pe,$e),Q._nodes.set(Pe,ge)}),Q},ve.copy=function(){var L=new Te(this._options);return L.import(this),L},ve.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(L){return L.upgradeToMixed()}),this._options.type="mixed",x(this,"type",this._options.type),se(this,"NodeDataClass",Se)),this},ve.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,x(this,"multi",!0),(L=this)._nodes.forEach(function(Q,ge){if(Q.out)for(var Pe in Q.out){var $e=new Set;$e.add(Q.out[Pe]),Q.out[Pe]=$e,L._nodes.get(Pe).in[ge]=$e}if(Q.undirected)for(var ct in Q.undirected)if(!(ct>ge)){var Tt=new Set;Tt.add(Q.undirected[ct]),Q.undirected[ct]=Tt,L._nodes.get(ct).undirected[ge]=Tt}})),this;var L},ve.clearIndex=function(){return this._nodes.forEach(function(L){void 0!==L.in&&(L.in={},L.out={}),void 0!==L.undirected&&(L.undirected={})}),this},ve.toJSON=function(){return this.export()},ve.toString=function(){return"[object Graph]"},ve.inspect=function(){var L=this,Q={};this._nodes.forEach(function(Tt,Bt){Q[Bt]=Tt.attributes});var ge={},Pe={};this._edges.forEach(function(Tt,Bt){var zt=Tt.undirected?"--":"->",nn="",An="(".concat(Tt.source.key,")").concat(zt,"(").concat(Tt.target.key,")");Tt.generatedKey?L.multi&&(void 0===Pe[An]?Pe[An]=0:Pe[An]++,nn+="".concat(Pe[An],". ")):nn+="[".concat(Bt,"]: "),ge[nn+=An]=Tt.attributes});var $e={};for(var ct in this)this.hasOwnProperty(ct)&&!sc.has(ct)&&"function"!=typeof this[ct]&&($e[ct]=this[ct]);return $e.attributes=this._attributes,$e.nodes=Q,$e.edges=ge,se($e,"constructor",this.constructor),$e},Te}($.exports.EventEmitter);typeof Symbol<"u"&&(gn.prototype[Symbol.for("nodejs.util.inspect.custom")]=gn.prototype.inspect),[{name:function(_e){return"".concat(_e,"Edge")},generateKey:!0},{name:function(_e){return"".concat(_e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(_e){return"".concat(_e,"EdgeWithKey")}},{name:function(_e){return"".concat(_e,"DirectedEdgeWithKey")},type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(_e){["add","merge","update"].forEach(function(Te){var ve=_e.name(Te),L="add"===Te?nr:Oa;gn.prototype[ve]=_e.generateKey?function(Q,ge,Pe){return L(this,ve,!0,"undirected"===(_e.type||this.type),null,Q,ge,Pe,"update"===Te)}:function(Q,ge,Pe,$e){return L(this,ve,!1,"undirected"===(_e.type||this.type),Q,ge,Pe,$e,"update"===Te)}})}),typeof Symbol<"u"&&(gn.prototype[Symbol.iterator]=gn.prototype.adjacency),_e=gn,A.forEach(function(Te){var ve=Te.name,L=Te.attacher;L(_e,ve("Edge"),"mixed"),L(_e,ve("DirectedEdge"),"directed"),L(_e,ve("UndirectedEdge"),"undirected")}),function(_e){He.forEach(function(Te){var L,Q,ge,Pe;ge=(L=Te).type,Pe=L.direction,_e.prototype[Q=L.name]=function($e,ct){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(!arguments.length)return function kt(_e,Te){if(0===_e.size)return[];if("mixed"===Te||Te===_e.type)return"function"==typeof Array.from?Array.from(_e._edges.keys()):Ce(_e._edges.keys(),_e._edges.size);for(var ve,L,ge=new Array("undirected"===Te?_e.undirectedSize:_e.directedSize),Pe="undirected"===Te,$e=_e._edges.values(),ct=0;!0!==(ve=$e.next()).done;)(L=ve.value).undirected===Pe&&(ge[ct++]=L.key);return ge}(this,ge);if(1===arguments.length){var Tt=this._nodes.get($e=""+$e);if(void 0===Tt)throw new ke("Graph.".concat(Q,': could not find the "').concat($e,'" node in the graph.'));return function Le(_e,Te,ve,L){var Q=[],ge=_e?ue:Xe;return"undirected"!==Te&&("out"!==ve&&ge(Q,L.in),"in"!==ve&&ge(Q,L.out),!ve&&L.directedSelfLoops>0&&Q.splice(Q.lastIndexOf(L.key),1)),"directed"!==Te&&ge(Q,L.undirected),Q}(this.multi,"mixed"===ge?this.type:ge,Pe,Tt)}if(2===arguments.length){ct=""+ct;var Bt=this._nodes.get($e=""+$e);if(!Bt)throw new ke("Graph.".concat(Q,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(ct))throw new ke("Graph.".concat(Q,':  could not find the "').concat(ct,'" target node in the graph.'));return function an(_e,Te,ve,L,Q){var ge=Te?Ee:We,Pe=[];return"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&ge(Pe,L.in,Q),void 0!==L.out&&"in"!==ve&&ge(Pe,L.out,Q),!ve&&L.directedSelfLoops>0&&Pe.splice(Pe.lastIndexOf(L.key),1)),"directed"!==_e&&void 0!==L.undirected&&ge(Pe,L.undirected,Q),Pe}(ge,this.multi,Pe,Bt,ct)}throw new Ae("Graph.".concat(Q,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ve,L){var Q=L.name,ge=L.type,Pe=L.direction,$e="forEach"+Q[0].toUpperCase()+Q.slice(1,-1);ve.prototype[$e]=function(ct,Tt,Bt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function pe(_e,Te,ve){if(0!==_e.size)for(var L,Q,ge="mixed"!==Te&&Te!==_e.type,Pe="undirected"===Te,$e=_e._edges.values();!0!==(L=$e.next()).done;)if(Q=L.value,!ge||Q.undirected===Pe){var zt=Q.source,nn=Q.target;ve(Q.key,Q.attributes,zt.key,nn.key,zt.attributes,nn.attributes,Q.undirected,Q.generatedKey)}}(this,ge,Bt=ct);if(2===arguments.length){Bt=Tt;var zt=this._nodes.get(ct=""+ct);if(void 0===zt)throw new ke("Graph.".concat($e,': could not find the "').concat(ct,'" node in the graph.'));return function tt(_e,Te,ve,L,Q){var ge=_e?U:te;"undirected"!==Te&&("out"!==ve&&ge(L.in,Q),"in"!==ve&&ge(L.out,Q,ve?null:L.key)),"directed"!==Te&&ge(L.undirected,Q)}(this.multi,"mixed"===ge?this.type:ge,Pe,zt,Bt)}if(3===arguments.length){Tt=""+Tt;var nn=this._nodes.get(ct=""+ct);if(!nn)throw new ke("Graph.".concat($e,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function kn(_e,Te,ve,L,Q,ge){var Pe=Te?Ze:Ue;"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&Pe(L.in,Q,ge),L.key!==Q&&void 0!==L.out&&"in"!==ve&&Pe(L.out,Q,ge)),"directed"!==_e&&void 0!==L.undirected&&Pe(L.undirected,Q,ge)}(ge,this.multi,Pe,nn,Tt,Bt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Te),function(ve,L){var Q=L.name,ge=L.type,Pe=L.direction,$e="forEach"+Q[0].toUpperCase()+Q.slice(1,-1)+"Until";ve.prototype[$e]=function(ct,Tt,Bt){if("mixed"===ge||"mixed"===this.type||ge===this.type){if(1===arguments.length)return function H(_e,Te,ve){if(0!==_e.size)for(var L,Q,ge="mixed"!==Te&&Te!==_e.type,Pe="undirected"===Te,$e=_e._edges.values();!0!==(L=$e.next()).done;)if(Q=L.value,!ge||Q.undirected===Pe){var zt=Q.source,nn=Q.target;if(ve(Q.key,Q.attributes,zt.key,nn.key,zt.attributes,nn.attributes,Q.undirected,Q.generatedKey))break}}(this,ge,Bt=ct);if(2===arguments.length){Bt=Tt;var zt=this._nodes.get(ct=""+ct);if(void 0===zt)throw new ke("Graph.".concat($e,': could not find the "').concat(ct,'" node in the graph.'));return function lt(_e,Te,ve,L,Q){var ge=_e?N:I;"undirected"!==Te&&("out"!==ve&&ge(L.in,Q)||"in"!==ve&&ge(L.out,Q,ve?null:L.key))||"directed"===Te||ge(L.undirected,Q)}(this.multi,"mixed"===ge?this.type:ge,Pe,zt,Bt)}if(3===arguments.length){Tt=""+Tt;var nn=this._nodes.get(ct=""+ct);if(!nn)throw new ke("Graph.".concat($e,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function zn(_e,Te,ve,L,Q,ge){var Pe=Te?Nt:vt;"undirected"!==_e&&(void 0!==L.in&&"out"!==ve&&Pe(L.in,Q,ge)||L.key!==Q&&void 0!==L.out&&"in"!==ve&&Pe(L.out,Q,ge,ve?null:L.key))||"directed"===_e||void 0===L.undirected||Pe(L.undirected,Q,ge)}(ge,this.multi,Pe,nn,Tt,Bt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Te),function(ve,L){var ge=L.type,Pe=L.direction,$e=L.name.slice(0,-1)+"Entries";ve.prototype[$e]=function(ct,Tt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return Je.empty();if(!arguments.length)return function ne(_e,Te){if(0===_e.size)return Je.empty();var ve="mixed"!==Te&&Te!==_e.type,L="undirected"===Te,Q=_e._edges.values();return new Je(function(){for(var ge,Pe;;){if((ge=Q.next()).done)return ge;if(Pe=ge.value,!ve||Pe.undirected===L)break}return{value:[Pe.key,Pe.attributes,Pe.source.key,Pe.target.key,Pe.source.attributes,Pe.target.attributes],done:!1}})}(this,ge);if(1===arguments.length){var Bt=this._nodes.get(ct=""+ct);if(!Bt)throw new ke("Graph.".concat($e,': could not find the "').concat(ct,'" node in the graph.'));return function xt(_e,Te,ve){var L=Je.empty();return"undirected"!==_e&&("out"!==Te&&void 0!==ve.in&&(L=J(L,he(ve.in))),"in"!==Te&&void 0!==ve.out&&(L=J(L,he(ve.out,Te?null:ve.key)))),"directed"!==_e&&void 0!==ve.undirected&&(L=J(L,he(ve.undirected))),L}(ge,Pe,Bt)}if(2===arguments.length){Tt=""+Tt;var zt=this._nodes.get(ct=""+ct);if(!zt)throw new ke("Graph.".concat($e,':  could not find the "').concat(ct,'" source node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat($e,':  could not find the "').concat(Tt,'" target node in the graph.'));return function Cn(_e,Te,ve,L){var Q=Je.empty();return"undirected"!==_e&&(void 0!==ve.in&&"out"!==Te&&L in ve.in&&(Q=J(Q,wt(ve.in,L))),void 0!==ve.out&&"in"!==Te&&L in ve.out&&(Q=J(Q,wt(ve.out,L)))),"directed"!==_e&&void 0!==ve.undirected&&L in ve.undirected&&(Q=J(Q,wt(ve.undirected,L))),Q}(ge,Pe,zt,Tt)}throw new Ae("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(_e,Te)})}(gn),function(_e){xn.forEach(function(Te){var L,Q,ge,Pe;ge=(L=Te).type,Pe=L.direction,_e.prototype[Q=L.name]=function($e){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];if(2===arguments.length){var ct=""+arguments[0],Tt=""+arguments[1];if(!this._nodes.has(ct))throw new ke("Graph.".concat(Q,': could not find the "').concat(ct,'" node in the graph.'));if(!this._nodes.has(Tt))throw new ke("Graph.".concat(Q,': could not find the "').concat(Tt,'" node in the graph.'));return function dl(_e,Te,ve,L,Q){var ge=_e._nodes.get(L);if("undirected"!==Te){if("out"!==ve&&void 0!==ge.in)for(var Pe in ge.in)if(Pe===Q)return!0;if("in"!==ve&&void 0!==ge.out)for(var $e in ge.out)if($e===Q)return!0}if("directed"!==Te&&void 0!==ge.undirected)for(var ct in ge.undirected)if(ct===Q)return!0;return!1}(this,ge,Pe,ct,Tt)}if(1===arguments.length){var Bt=this._nodes.get($e=""+$e);if(void 0===Bt)throw new ke("Graph.".concat(Q,': could not find the "').concat($e,'" node in the graph.'));return function aa(_e,Te,ve){if("mixed"!==_e){if("undirected"===_e)return Object.keys(ve.undirected);if("string"==typeof Te)return Object.keys(ve[Te])}var L=new Set;return"undirected"!==_e&&("out"!==Te&&Pi(L,ve.in),"in"!==Te&&Pi(L,ve.out)),"directed"!==_e&&Pi(L,ve.undirected),Ce(L.values(),L.size)}("mixed"===ge?this.type:ge,Pe,Bt)}throw new Ae("Graph.".concat(Q,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function ic(_e,Te){var ve=Te.name,L=Te.type,Q=Te.direction,ge="forEach"+ve[0].toUpperCase()+ve.slice(1,-1);_e.prototype[ge]=function(Pe,$e){if("mixed"===L||"mixed"===this.type||L===this.type){var ct=this._nodes.get(Pe=""+Pe);if(void 0===ct)throw new ke("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Bt,zt,nn){if("mixed"!==Tt){if("undirected"===Tt)return hr(zt,zt.undirected,nn);if("string"==typeof Bt)return hr(zt,zt[Bt],nn)}var An=new Set;"undirected"!==Tt&&("out"!==Bt&&zs(An,zt,zt.in,nn),"in"!==Bt&&zs(An,zt,zt.out,nn)),"directed"!==Tt&&zs(An,zt,zt.undirected,nn)}("mixed"===L?this.type:L,Q,ct,$e)}}}(_e,Te),function Rc(_e,Te){var ve=Te.name,L=Te.type,Q=Te.direction,ge="forEach"+ve[0].toUpperCase()+ve.slice(1,-1)+"Until";_e.prototype[ge]=function(Pe,$e){if("mixed"===L||"mixed"===this.type||L===this.type){var ct=this._nodes.get(Pe=""+Pe);if(void 0===ct)throw new ke("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));!function(Tt,Bt,zt,nn){if("mixed"!==Tt){if("undirected"===Tt)return go(zt,zt.undirected,nn);if("string"==typeof Bt)return go(zt,zt[Bt],nn)}var An=new Set;"undirected"!==Tt&&("out"!==Bt&&Xi(An,zt,zt.in,nn)||"in"!==Bt&&Xi(An,zt,zt.out,nn))||"directed"===Tt||Xi(An,zt,zt.undirected,nn)}("mixed"===L?this.type:L,Q,ct,$e)}}}(_e,Te),function rc(_e,Te){var L=Te.type,Q=Te.direction,ge=Te.name.slice(0,-1)+"Entries";_e.prototype[ge]=function(Pe){if("mixed"!==L&&"mixed"!==this.type&&L!==this.type)return Je.empty();var $e=this._nodes.get(Pe=""+Pe);if(void 0===$e)throw new ke("Graph.".concat(ge,': could not find the "').concat(Pe,'" node in the graph.'));return function(ct,Tt,Bt){if("mixed"!==ct){if("undirected"===ct)return Hr(Bt,Bt.undirected);if("string"==typeof Tt)return Hr(Bt,Bt[Tt])}var zt=Je.empty(),nn=new Set;return"undirected"!==ct&&("out"!==Tt&&(zt=J(zt,mo(nn,Bt,Bt.in))),"in"!==Tt&&(zt=J(zt,mo(nn,Bt,Bt.out)))),"directed"!==ct&&(zt=J(zt,mo(nn,Bt,Bt.undirected))),zt}("mixed"===L?this.type:L,Q,$e)}}(_e,Te)})}(gn);var ti=function(_e){function Te(ve){var L=E({type:"directed"},ve);if("multi"in L&&!1!==L.multi)throw new Ae("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==L.type)throw new Ae('DirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(gn),Gs=function(_e){function Te(ve){var L=E({type:"undirected"},ve);if("multi"in L&&!1!==L.multi)throw new Ae("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==L.type)throw new Ae('UndirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(gn),Xt=function(_e){function Te(ve){var L=E({multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return _e.call(this,L)||this}return S(Te,_e),Te}(gn),eo=function(_e){function Te(ve){var L=E({type:"directed",multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==L.type)throw new Ae('MultiDirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(gn),ms=function(_e){function Te(ve){var L=E({type:"undirected",multi:!0},ve);if("multi"in L&&!0!==L.multi)throw new Ae("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==L.type)throw new Ae('MultiUndirectedGraph.from: inconsistent "'+L.type+'" type in given options!');return _e.call(this,L)||this}return S(Te,_e),Te}(gn);function St(_e){_e.from=function(Te,ve){var L=E({},Te.options,ve),Q=new _e(L);return Q.import(Te),Q}}return St(gn),St(ti),St(Gs),St(Xt),St(eo),St(ms),gn.Graph=gn,gn.DirectedGraph=ti,gn.UndirectedGraph=Gs,gn.MultiGraph=Xt,gn.MultiDirectedGraph=eo,gn.MultiUndirectedGraph=ms,gn.InvalidArgumentsGraphError=Ae,gn.NotFoundGraphError=ke,gn.UsageGraphError=de,gn}()},4511:(je,me,S)=>{var Z;!function(C,q,G,X){"use strict";var $,_=["","webkit","Moz","MS","ms","o"],E=q.createElement("div"),F="function",W=Math.round,P=Math.abs,D=Date.now;function se(De,ze,st){return setTimeout(B(De,st),ze)}function x(De,ze,st){return!!Array.isArray(De)&&(k(De,st[ze],st),!0)}function k(De,ze,st){var _t;if(De)if(De.forEach)De.forEach(ze,st);else if(De.length!==X)for(_t=0;_t<De.length;)ze.call(st,De[_t],_t,De),_t++;else for(_t in De)De.hasOwnProperty(_t)&&ze.call(st,De[_t],_t,De)}function oe(De,ze,st){var _t="DEPRECATED METHOD: "+ze+"\n"+st+" AT \n";return function(){var Vt=new Error("get-stack-trace"),rn=Vt&&Vt.stack?Vt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Qn=C.console&&(C.console.warn||C.console.log);return Qn&&Qn.call(C.console,_t,rn),De.apply(this,arguments)}}$="function"!=typeof Object.assign?function(ze){if(ze===X||null===ze)throw new TypeError("Cannot convert undefined or null to object");for(var st=Object(ze),_t=1;_t<arguments.length;_t++){var Vt=arguments[_t];if(Vt!==X&&null!==Vt)for(var rn in Vt)Vt.hasOwnProperty(rn)&&(st[rn]=Vt[rn])}return st}:Object.assign;var z=oe(function(ze,st,_t){for(var Vt=Object.keys(st),rn=0;rn<Vt.length;)(!_t||_t&&ze[Vt[rn]]===X)&&(ze[Vt[rn]]=st[Vt[rn]]),rn++;return ze},"extend","Use `assign`."),ee=oe(function(ze,st){return z(ze,st,!0)},"merge","Use `assign`.");function Y(De,ze,st){var Vt,_t=ze.prototype;(Vt=De.prototype=Object.create(_t)).constructor=De,Vt._super=_t,st&&$(Vt,st)}function B(De,ze){return function(){return De.apply(ze,arguments)}}function b(De,ze){return typeof De==F?De.apply(ze&&ze[0]||X,ze):De}function M(De,ze){return De===X?ze:De}function T(De,ze,st){k(ae(ze),function(_t){De.addEventListener(_t,st,!1)})}function le(De,ze,st){k(ae(ze),function(_t){De.removeEventListener(_t,st,!1)})}function j(De,ze){for(;De;){if(De==ze)return!0;De=De.parentNode}return!1}function Me(De,ze){return De.indexOf(ze)>-1}function ae(De){return De.trim().split(/\s+/g)}function xe(De,ze,st){if(De.indexOf&&!st)return De.indexOf(ze);for(var _t=0;_t<De.length;){if(st&&De[_t][st]==ze||!st&&De[_t]===ze)return _t;_t++}return-1}function Oe(De){return Array.prototype.slice.call(De,0)}function Ve(De,ze,st){for(var _t=[],Vt=[],rn=0;rn<De.length;){var Qn=ze?De[rn][ze]:De[rn];xe(Vt,Qn)<0&&_t.push(De[rn]),Vt[rn]=Qn,rn++}return st&&(_t=ze?_t.sort(function(Gr,Ws){return Gr[ze]>Ws[ze]}):_t.sort()),_t}function Qe(De,ze){for(var st,_t,Vt=ze[0].toUpperCase()+ze.slice(1),rn=0;rn<_.length;){if((_t=(st=_[rn])?st+Vt:ze)in De)return _t;rn++}return X}var Je=1;function Be(De){var ze=De.ownerDocument||De;return ze.defaultView||ze.parentWindow||C}var ke="ontouchstart"in C,de=Qe(C,"PointerEvent")!==X,Se=ke&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rt="touch",qe="mouse",R=25,A=1,J=4,He=8,Xe=1,ue=2,te=4,U=8,I=16,N=ue|te,he=U|I,We=N|he,Ee=["x","y"],Ue=["clientX","clientY"];function Ze(De,ze){var st=this;this.manager=De,this.callback=ze,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(_t){b(De.options.enable,[De])&&st.handler(_t)},this.init()}function Nt(De,ze,st){var _t=st.pointers.length,Vt=st.changedPointers.length,rn=ze&A&&_t-Vt==0,Qn=ze&(J|He)&&_t-Vt==0;st.isFirst=!!rn,st.isFinal=!!Qn,rn&&(De.session={}),st.eventType=ze,function wt(De,ze){var st=De.session,_t=ze.pointers,Vt=_t.length;st.firstInput||(st.firstInput=H(ze)),Vt>1&&!st.firstMultiple?st.firstMultiple=H(ze):1===Vt&&(st.firstMultiple=!1);var rn=st.firstInput,Qn=st.firstMultiple,zr=Qn?Qn.center:rn.center,Gr=ze.center=ne(_t);ze.timeStamp=D(),ze.deltaTime=ze.timeStamp-rn.timeStamp,ze.angle=xt(zr,Gr),ze.distance=lt(zr,Gr),function kt(De,ze){var st=ze.center,_t=De.offsetDelta||{},Vt=De.prevDelta||{},rn=De.prevInput||{};(ze.eventType===A||rn.eventType===J)&&(Vt=De.prevDelta={x:rn.deltaX||0,y:rn.deltaY||0},_t=De.offsetDelta={x:st.x,y:st.y}),ze.deltaX=Vt.x+(st.x-_t.x),ze.deltaY=Vt.y+(st.y-_t.y)}(st,ze),ze.offsetDirection=tt(ze.deltaX,ze.deltaY);var Ws=Le(ze.deltaTime,ze.deltaX,ze.deltaY);ze.overallVelocityX=Ws.x,ze.overallVelocityY=Ws.y,ze.overallVelocity=P(Ws.x)>P(Ws.y)?Ws.x:Ws.y,ze.scale=Qn?function kn(De,ze){return lt(ze[0],ze[1],Ue)/lt(De[0],De[1],Ue)}(Qn.pointers,_t):1,ze.rotation=Qn?function an(De,ze){return xt(ze[1],ze[0],Ue)+xt(De[1],De[0],Ue)}(Qn.pointers,_t):0,ze.maxPointers=st.prevInput?ze.pointers.length>st.prevInput.maxPointers?ze.pointers.length:st.prevInput.maxPointers:ze.pointers.length,function pe(De,ze){var Vt,rn,Qn,zr,st=De.lastInterval||ze,_t=ze.timeStamp-st.timeStamp;if(ze.eventType!=He&&(_t>R||st.velocity===X)){var Gr=ze.deltaX-st.deltaX,Ws=ze.deltaY-st.deltaY,ca=Le(_t,Gr,Ws);rn=ca.x,Qn=ca.y,Vt=P(ca.x)>P(ca.y)?ca.x:ca.y,zr=tt(Gr,Ws),De.lastInterval=ze}else Vt=st.velocity,rn=st.velocityX,Qn=st.velocityY,zr=st.direction;ze.velocity=Vt,ze.velocityX=rn,ze.velocityY=Qn,ze.direction=zr}(st,ze);var ca=De.element;j(ze.srcEvent.target,ca)&&(ca=ze.srcEvent.target),ze.target=ca}(De,st),De.emit("hammer.input",st),De.recognize(st),De.session.prevInput=st}function H(De){for(var ze=[],st=0;st<De.pointers.length;)ze[st]={clientX:W(De.pointers[st].clientX),clientY:W(De.pointers[st].clientY)},st++;return{timeStamp:D(),pointers:ze,center:ne(ze),deltaX:De.deltaX,deltaY:De.deltaY}}function ne(De){var ze=De.length;if(1===ze)return{x:W(De[0].clientX),y:W(De[0].clientY)};for(var st=0,_t=0,Vt=0;Vt<ze;)st+=De[Vt].clientX,_t+=De[Vt].clientY,Vt++;return{x:W(st/ze),y:W(_t/ze)}}function Le(De,ze,st){return{x:ze/De||0,y:st/De||0}}function tt(De,ze){return De===ze?Xe:P(De)>=P(ze)?De<0?ue:te:ze<0?U:I}function lt(De,ze,st){st||(st=Ee);var _t=ze[st[0]]-De[st[0]],Vt=ze[st[1]]-De[st[1]];return Math.sqrt(_t*_t+Vt*Vt)}function xt(De,ze,st){return st||(st=Ee),180*Math.atan2(ze[st[1]]-De[st[1]],ze[st[0]]-De[st[0]])/Math.PI}Ze.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(Be(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(Be(this.element),this.evWin,this.domHandler)}};var zn={mousedown:A,mousemove:2,mouseup:J},Cn="mousedown",xn="mousemove mouseup";function Pi(){this.evEl=Cn,this.evWin=xn,this.pressed=!1,Ze.apply(this,arguments)}Y(Pi,Ze,{handler:function(ze){var st=zn[ze.type];st&A&&0===ze.button&&(this.pressed=!0),2&st&&1!==ze.which&&(st=J),this.pressed&&(st&J&&(this.pressed=!1),this.callback(this.manager,st,{pointers:[ze],changedPointers:[ze],pointerType:qe,srcEvent:ze}))}});var aa={pointerdown:A,pointermove:2,pointerup:J,pointercancel:He,pointerout:He},hr={2:rt,3:"pen",4:qe,5:"kinect"},zs="pointerdown",go="pointermove pointerup pointercancel";function Xi(){this.evEl=zs,this.evWin=go,Ze.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C.MSPointerEvent&&!C.PointerEvent&&(zs="MSPointerDown",go="MSPointerMove MSPointerUp MSPointerCancel"),Y(Xi,Ze,{handler:function(ze){var st=this.store,_t=!1,Vt=ze.type.toLowerCase().replace("ms",""),rn=aa[Vt],Qn=hr[ze.pointerType]||ze.pointerType,zr=Qn==rt,Gr=xe(st,ze.pointerId,"pointerId");rn&A&&(0===ze.button||zr)?Gr<0&&(st.push(ze),Gr=st.length-1):rn&(J|He)&&(_t=!0),!(Gr<0)&&(st[Gr]=ze,this.callback(this.manager,rn,{pointers:st,changedPointers:[ze],pointerType:Qn,srcEvent:ze}),_t&&st.splice(Gr,1))}});var Hr={touchstart:A,touchmove:2,touchend:J,touchcancel:He};function ic(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Ze.apply(this,arguments)}function Rc(De,ze){var st=Oe(De.touches),_t=Oe(De.changedTouches);return ze&(J|He)&&(st=Ve(st.concat(_t),"identifier",!0)),[st,_t]}Y(ic,Ze,{handler:function(ze){var st=Hr[ze.type];if(st===A&&(this.started=!0),this.started){var _t=Rc.call(this,ze,st);st&(J|He)&&_t[0].length-_t[1].length==0&&(this.started=!1),this.callback(this.manager,st,{pointers:_t[0],changedPointers:_t[1],pointerType:rt,srcEvent:ze})}}});var rc={touchstart:A,touchmove:2,touchend:J,touchcancel:He},Ge="touchstart touchmove touchend touchcancel";function Ke(){this.evTarget=Ge,this.targetIds={},Ze.apply(this,arguments)}function Gt(De,ze){var st=Oe(De.touches),_t=this.targetIds;if(ze&(2|A)&&1===st.length)return _t[st[0].identifier]=!0,[st,st];var Vt,rn,Qn=Oe(De.changedTouches),zr=[],Gr=this.target;if(rn=st.filter(function(Ws){return j(Ws.target,Gr)}),ze===A)for(Vt=0;Vt<rn.length;)_t[rn[Vt].identifier]=!0,Vt++;for(Vt=0;Vt<Qn.length;)_t[Qn[Vt].identifier]&&zr.push(Qn[Vt]),ze&(J|He)&&delete _t[Qn[Vt].identifier],Vt++;return zr.length?[Ve(rn.concat(zr),"identifier",!0),zr]:void 0}Y(Ke,Ze,{handler:function(ze){var st=rc[ze.type],_t=Gt.call(this,ze,st);_t&&this.callback(this.manager,st,{pointers:_t[0],changedPointers:_t[1],pointerType:rt,srcEvent:ze})}});var At=2500;function fr(){Ze.apply(this,arguments);var De=B(this.handler,this);this.touch=new Ke(this.manager,De),this.mouse=new Pi(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function gs(De,ze){De&A?(this.primaryTouch=ze.changedPointers[0].identifier,sc.call(this,ze)):De&(J|He)&&sc.call(this,ze)}function sc(De){var ze=De.changedPointers[0];if(ze.identifier===this.primaryTouch){var st={x:ze.clientX,y:ze.clientY};this.lastTouches.push(st);var _t=this.lastTouches;setTimeout(function(){var rn=_t.indexOf(st);rn>-1&&_t.splice(rn,1)},At)}}function Qt(De){for(var ze=De.srcEvent.clientX,st=De.srcEvent.clientY,_t=0;_t<this.lastTouches.length;_t++){var Vt=this.lastTouches[_t],rn=Math.abs(ze-Vt.x),Qn=Math.abs(st-Vt.y);if(rn<=25&&Qn<=25)return!0}return!1}Y(fr,Ze,{handler:function(ze,st,_t){var rn=_t.pointerType==qe;if(!(rn&&_t.sourceCapabilities&&_t.sourceCapabilities.firesTouchEvents)){if(_t.pointerType==rt)gs.call(this,st,_t);else if(rn&&Qt.call(this,_t))return;this.callback(ze,st,_t)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ra=Qe(E.style,"touchAction"),nr=Ra!==X,Oa="compute",ti="manipulation",Gs="none",Xt="pan-x",eo="pan-y",ms=function Te(){if(!nr)return!1;var De={},ze=C.CSS&&C.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(st){De[st]=!ze||C.CSS.supports("touch-action",st)}),De}();function St(De,ze){this.manager=De,this.set(ze)}St.prototype={set:function(De){De==Oa&&(De=this.compute()),nr&&this.manager.element.style&&ms[De]&&(this.manager.element.style[Ra]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return k(this.manager.recognizers,function(ze){b(ze.options.enable,[ze])&&(De=De.concat(ze.getTouchAction()))}),function _e(De){if(Me(De,Gs))return Gs;var ze=Me(De,Xt),st=Me(De,eo);return ze&&st?Gs:ze||st?ze?Xt:eo:Me(De,ti)?ti:"auto"}(De.join(" "))},preventDefaults:function(De){var ze=De.srcEvent,st=De.offsetDirection;if(!this.manager.session.prevented){var _t=this.actions,Vt=Me(_t,Gs)&&!ms[Gs],rn=Me(_t,eo)&&!ms[eo],Qn=Me(_t,Xt)&&!ms[Xt];if(Vt&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return Qn&&rn||!(Vt||rn&&st&N||Qn&&st&he)?void 0:this.preventSrc(ze)}ze.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}};var ve=1;function Tt(De){this.options=$({},this.defaults,De||{}),this.id=function Ce(){return Je++}(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=ve,this.simultaneous={},this.requireFail=[]}function Bt(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function zt(De){return De==I?"down":De==U?"up":De==ue?"left":De==te?"right":""}function nn(De,ze){var st=ze.manager;return st?st.get(De):De}function An(){Tt.apply(this,arguments)}function Pn(){An.apply(this,arguments),this.pX=null,this.pY=null}function Qr(){An.apply(this,arguments)}function _o(){Tt.apply(this,arguments),this._timer=null,this._input=null}function di(){An.apply(this,arguments)}function Na(){An.apply(this,arguments)}function ii(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Os(De,ze){return(ze=ze||{}).recognizers=M(ze.recognizers,Os.defaults.preset),new $n(De,ze)}function $n(De,ze){this.options=$({},Os.defaults,ze||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function vt(De){return new(De.options.inputClass||(de?Xi:Se?Ke:ke?fr:Pi))(De,Nt)}(this),this.touchAction=new St(this,this.options.touchAction),yn(this,!0),k(this.options.recognizers,function(st){var _t=this.add(new st[0](st[1]));st[2]&&_t.recognizeWith(st[2]),st[3]&&_t.requireFailure(st[3])},this)}function yn(De,ze){var _t,st=De.element;st.style&&(k(De.options.cssProps,function(Vt,rn){_t=Qe(st.style,rn),ze?(De.oldCssProps[_t]=st.style[_t],st.style[_t]=Vt):st.style[_t]=De.oldCssProps[_t]||""}),ze||(De.oldCssProps={}))}Tt.prototype={defaults:{},set:function(De){return $(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(x(De,"recognizeWith",this))return this;var ze=this.simultaneous;return ze[(De=nn(De,this)).id]||(ze[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return x(De,"dropRecognizeWith",this)||(De=nn(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(x(De,"requireFailure",this))return this;var ze=this.requireFail;return-1===xe(ze,De=nn(De,this))&&(ze.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(x(De,"dropRequireFailure",this))return this;De=nn(De,this);var ze=xe(this.requireFail,De);return ze>-1&&this.requireFail.splice(ze,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var ze=this,st=this.state;function _t(Vt){ze.manager.emit(Vt,De)}st<8&&_t(ze.options.event+Bt(st)),_t(ze.options.event),De.additionalEvent&&_t(De.additionalEvent),st>=8&&_t(ze.options.event+Bt(st))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(this.requireFail[De].state&(32|ve)))return!1;De++}return!0},recognize:function(De){var ze=$({},De);if(!b(this.options.enable,[this,ze]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ve),this.state=this.process(ze),30&this.state&&this.tryEmit(ze)},process:function(De){},getTouchAction:function(){},reset:function(){}},Y(An,Tt,{defaults:{pointers:1},attrTest:function(De){var ze=this.options.pointers;return 0===ze||De.pointers.length===ze},process:function(De){var ze=this.state,st=De.eventType,_t=6&ze,Vt=this.attrTest(De);return _t&&(st&He||!Vt)?16|ze:_t||Vt?st&J?8|ze:2&ze?4|ze:2:32}}),Y(Pn,An,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var De=this.options.direction,ze=[];return De&N&&ze.push(eo),De&he&&ze.push(Xt),ze},directionTest:function(De){var ze=this.options,st=!0,_t=De.distance,Vt=De.direction,rn=De.deltaX,Qn=De.deltaY;return Vt&ze.direction||(ze.direction&N?(Vt=0===rn?Xe:rn<0?ue:te,st=rn!=this.pX,_t=Math.abs(De.deltaX)):(Vt=0===Qn?Xe:Qn<0?U:I,st=Qn!=this.pY,_t=Math.abs(De.deltaY))),De.direction=Vt,st&&_t>ze.threshold&&Vt&ze.direction},attrTest:function(De){return An.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var ze=zt(De.direction);ze&&(De.additionalEvent=this.options.event+ze),this._super.emit.call(this,De)}}),Y(Qr,An,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),Y(_o,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var ze=this.options,st=De.pointers.length===ze.pointers,_t=De.distance<ze.threshold,Vt=De.deltaTime>ze.time;if(this._input=De,!_t||!st||De.eventType&(J|He)&&!Vt)this.reset();else if(De.eventType&A)this.reset(),this._timer=se(function(){this.state=8,this.tryEmit()},ze.time,this);else if(De.eventType&J)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&De.eventType&J?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=D(),this.manager.emit(this.options.event,this._input)))}}),Y(di,An,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),Y(Na,An,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:N|he,pointers:1},getTouchAction:function(){return Pn.prototype.getTouchAction.call(this)},attrTest:function(De){var st,ze=this.options.direction;return ze&(N|he)?st=De.overallVelocity:ze&N?st=De.overallVelocityX:ze&he&&(st=De.overallVelocityY),this._super.attrTest.call(this,De)&&ze&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&P(st)>this.options.velocity&&De.eventType&J},emit:function(De){var ze=zt(De.offsetDirection);ze&&this.manager.emit(this.options.event+ze,De),this.manager.emit(this.options.event,De)}}),Y(ii,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ti]},process:function(De){var ze=this.options,st=De.pointers.length===ze.pointers,_t=De.distance<ze.threshold,Vt=De.deltaTime<ze.time;if(this.reset(),De.eventType&A&&0===this.count)return this.failTimeout();if(_t&&Vt&&st){if(De.eventType!=J)return this.failTimeout();var rn=!this.pTime||De.timeStamp-this.pTime<ze.interval,Qn=!this.pCenter||lt(this.pCenter,De.center)<ze.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,Qn&&rn?this.count+=1:this.count=1,this._input=De,0==this.count%ze.taps)return this.hasRequireFailures()?(this._timer=se(function(){this.state=8,this.tryEmit()},ze.interval,this),2):8}return 32},failTimeout:function(){return this._timer=se(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Os.VERSION="2.0.7",Os.defaults={domEvents:!1,touchAction:Oa,enable:!0,inputTarget:null,inputClass:null,preset:[[di,{enable:!1}],[Qr,{enable:!1},["rotate"]],[Na,{direction:N}],[Pn,{direction:N},["swipe"]],[ii],[ii,{event:"doubletap",taps:2},["tap"]],[_o]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},$n.prototype={set:function(De){return $(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var ze=this.session;if(!ze.stopped){this.touchAction.preventDefaults(De);var st,_t=this.recognizers,Vt=ze.curRecognizer;(!Vt||Vt&&8&Vt.state)&&(Vt=ze.curRecognizer=null);for(var rn=0;rn<_t.length;)st=_t[rn],2===ze.stopped||Vt&&st!=Vt&&!st.canRecognizeWith(Vt)?st.reset():st.recognize(De),!Vt&&14&st.state&&(Vt=ze.curRecognizer=st),rn++}},get:function(De){if(De instanceof Tt)return De;for(var ze=this.recognizers,st=0;st<ze.length;st++)if(ze[st].options.event==De)return ze[st];return null},add:function(De){if(x(De,"add",this))return this;var ze=this.get(De.options.event);return ze&&this.remove(ze),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(x(De,"remove",this))return this;if(De=this.get(De)){var ze=this.recognizers,st=xe(ze,De);-1!==st&&(ze.splice(st,1),this.touchAction.update())}return this},on:function(De,ze){if(De!==X&&ze!==X){var st=this.handlers;return k(ae(De),function(_t){st[_t]=st[_t]||[],st[_t].push(ze)}),this}},off:function(De,ze){if(De!==X){var st=this.handlers;return k(ae(De),function(_t){ze?st[_t]&&st[_t].splice(xe(st[_t],ze),1):delete st[_t]}),this}},emit:function(De,ze){this.options.domEvents&&function au(De,ze){var st=q.createEvent("Event");st.initEvent(De,!0,!0),st.gesture=ze,ze.target.dispatchEvent(st)}(De,ze);var st=this.handlers[De]&&this.handlers[De].slice();if(st&&st.length){ze.type=De,ze.preventDefault=function(){ze.srcEvent.preventDefault()};for(var _t=0;_t<st.length;)st[_t](ze),_t++}},destroy:function(){this.element&&yn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},$(Os,{INPUT_START:A,INPUT_MOVE:2,INPUT_END:J,INPUT_CANCEL:He,STATE_POSSIBLE:ve,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Xe,DIRECTION_LEFT:ue,DIRECTION_RIGHT:te,DIRECTION_UP:U,DIRECTION_DOWN:I,DIRECTION_HORIZONTAL:N,DIRECTION_VERTICAL:he,DIRECTION_ALL:We,Manager:$n,Input:Ze,TouchAction:St,TouchInput:Ke,MouseInput:Pi,PointerEventInput:Xi,TouchMouseInput:fr,SingleTouchInput:ic,Recognizer:Tt,AttrRecognizer:An,Tap:ii,Pan:Pn,Swipe:Na,Pinch:Qr,Rotate:di,Press:_o,on:T,off:le,each:k,merge:ee,extend:z,assign:$,inherit:Y,bindFn:B,prefixed:Qe}),(typeof C<"u"?C:typeof self<"u"?self:{}).Hammer=Os,(Z=function(){return Os}.call(me,S,me,je))!==X&&(je.exports=Z)}(window,document)},2020:(je,me)=>{me.read=function(S,Z,C,q,G){var X,_,E=8*G-q-1,F=(1<<E)-1,W=F>>1,P=-7,D=C?G-1:0,se=C?-1:1,x=S[Z+D];for(D+=se,X=x&(1<<-P)-1,x>>=-P,P+=E;P>0;X=256*X+S[Z+D],D+=se,P-=8);for(_=X&(1<<-P)-1,X>>=-P,P+=q;P>0;_=256*_+S[Z+D],D+=se,P-=8);if(0===X)X=1-W;else{if(X===F)return _?NaN:1/0*(x?-1:1);_+=Math.pow(2,q),X-=W}return(x?-1:1)*_*Math.pow(2,X-q)},me.write=function(S,Z,C,q,G,X){var _,E,F,W=8*X-G-1,P=(1<<W)-1,D=P>>1,se=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,x=q?0:X-1,k=q?1:-1,oe=Z<0||0===Z&&1/Z<0?1:0;for(Z=Math.abs(Z),isNaN(Z)||Z===1/0?(E=isNaN(Z)?1:0,_=P):(_=Math.floor(Math.log(Z)/Math.LN2),Z*(F=Math.pow(2,-_))<1&&(_--,F*=2),(Z+=_+D>=1?se/F:se*Math.pow(2,1-D))*F>=2&&(_++,F/=2),_+D>=P?(E=0,_=P):_+D>=1?(E=(Z*F-1)*Math.pow(2,G),_+=D):(E=Z*Math.pow(2,D-1)*Math.pow(2,G),_=0));G>=8;S[C+x]=255&E,x+=k,E/=256,G-=8);for(_=_<<G|E,W+=G;W>0;S[C+x]=255&_,x+=k,_/=256,W-=8);S[C+x-k]|=128*oe}},1993:je=>{je.exports="function"==typeof Object.create?function(S,Z){Z&&(S.super_=Z,S.prototype=Object.create(Z.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,Z){if(Z){S.super_=Z;var C=function(){};C.prototype=Z.prototype,S.prototype=new C,S.prototype.constructor=S}}},7839:(je,me,S)=>{"use strict";var Z=S(9293).default;const{isArray:C,isObject:q,isString:G}=S(2831),{asArray:X}=S(9420),{prependBase:_}=S(2051),E=S(262),F=S(6181);function P(se){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:se})}function D({context:se,base:x}){if(!se)return;const k=se["@context"];if(G(k))se["@context"]=_(x,k);else if(C(k))for(let oe=0;oe<k.length;++oe){const $=k[oe];G($)?k[oe]=_(x,$):q($)&&D({context:{"@context":$},base:x})}else if(q(k))for(const oe in k)D({context:k[oe],base:x})}je.exports=class{constructor({sharedCache:x}){this.perOpCache=new Map,this.sharedCache=x}resolve({activeCtx:x,context:k,documentLoader:oe,base:$,cycles:z=new Set}){var ee=this;return Z(function*(){k&&q(k)&&k["@context"]&&(k=k["@context"]),k=X(k);const Y=[];for(const B of k){if(G(B)){let T=ee._get(B);T||(T=yield ee._resolveRemoteContext({activeCtx:x,url:B,documentLoader:oe,base:$,cycles:z})),C(T)?Y.push(...T):Y.push(T);continue}if(null===B){Y.push(new F({document:null}));continue}q(B)||P(k);const b=JSON.stringify(B);let M=ee._get(b);M||(M=new F({document:B}),ee._cacheResolvedContext({key:b,resolved:M,tag:"static"})),Y.push(M)}return Y})()}_get(x){let k=this.perOpCache.get(x);if(!k){const oe=this.sharedCache.get(x);oe&&(k=oe.get("static"),k&&this.perOpCache.set(x,k))}return k}_cacheResolvedContext({key:x,resolved:k,tag:oe}){if(this.perOpCache.set(x,k),void 0!==oe){let $=this.sharedCache.get(x);$||($=new Map,this.sharedCache.set(x,$)),$.set(oe,k)}return k}_resolveRemoteContext({activeCtx:x,url:k,documentLoader:oe,base:$,cycles:z}){var ee=this;return Z(function*(){k=_($,k);const{context:Y,remoteDoc:B}=yield ee._fetchContext({activeCtx:x,url:k,documentLoader:oe,cycles:z});D({context:Y,base:$=B.documentUrl||k});const b=yield ee.resolve({activeCtx:x,context:Y,documentLoader:oe,base:$,cycles:z});return ee._cacheResolvedContext({key:k,resolved:b,tag:B.tag}),b})()}_fetchContext({activeCtx:x,url:k,documentLoader:oe,cycles:$}){return Z(function*(){if($.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"loading remote context failed":"context overflow",max:10});if($.has(k))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===x.processingMode?"recursive context inclusion":"context overflow",url:k});let z,ee;$.add(k);try{ee=yield oe(k),z=ee.document||null,G(z)&&(z=JSON.parse(z))}catch(Y){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:k,cause:Y})}if(!q(z))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:k});return z="@context"in z?{"@context":z["@context"]}:{"@context":{}},ee.contextUrl&&(C(z["@context"])||(z["@context"]=[z["@context"]]),z["@context"].push(ee.contextUrl)),{context:z,remoteDoc:ee}})()}}},262:je=>{"use strict";je.exports=class extends Error{constructor(S="An unspecified JSON-LD error occurred.",Z="jsonld.Error",C={}){super(S),this.name=Z,this.message=S,this.details=C}}},1328:je=>{"use strict";je.exports=me=>{class S{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(S,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(S.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:S}),S.compact=function(Z,C){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):me.compact(Z,C)},S.expand=function(Z){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):me.expand(Z)},S.flatten=function(Z){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):me.flatten(Z)},S}},5426:(je,me,S)=>{"use strict";je.exports=S(1224).NQuads},4808:(je,me,S)=>{"use strict";var Z=S(9293).default;je.exports=class{constructor(){this._requests={}}wrapLoader(q){const G=this;return G._loader=q,function(){return G.add.apply(G,arguments)}}add(q){var G=this;return Z(function*(){let X=G._requests[q];if(X)return Promise.resolve(X);X=G._requests[q]=G._loader(q);try{return yield X}finally{delete G._requests[q]}})()}}},6181:(je,me,S)=>{"use strict";const Z=S(3052);je.exports=class{constructor({document:G}){this.document=G,this.cache=new Z({max:10})}getProcessed(G){return this.cache.get(G)}setProcessed(G,X){this.cache.set(G,X)}}},3763:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(262),{isArray:q,isObject:G,isString:X,isUndefined:_}=S(2831),{isList:E,isValue:F,isGraph:W,isSimpleGraph:P,isSubjectReference:D}=S(4209),{expandIri:se,getContextValue:x,isKeyword:k,process:oe,processingMode:$}=S(429),{removeBase:z,prependBase:ee}=S(2051),{REGEX_KEYWORD:Y,addValue:B,asArray:b,compareShortestLeast:M}=S(9420),T={};function j(Me,ae,xe){if("@nest"!==se(Me,ae,{vocab:!0},xe))throw new C("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}je.exports=T,T.compact=function(){var Me=Z(function*({activeCtx:ae,activeProperty:xe=null,element:Oe,options:Ve={}}){if(q(Oe)){let Je=[];for(let Ce=0;Ce<Oe.length;++Ce){const Be=yield T.compact({activeCtx:ae,activeProperty:xe,element:Oe[Ce],options:Ve});null!==Be&&Je.push(Be)}return Ve.compactArrays&&1===Je.length&&0===(x(ae,xe,"@container")||[]).length&&(Je=Je[0]),Je}const Qe=x(ae,xe,"@context");if(_(Qe)||(ae=yield oe({activeCtx:ae,localCtx:Qe,propagate:!0,overrideProtected:!0,options:Ve})),G(Oe)){if(Ve.link&&"@id"in Oe&&Ve.link.hasOwnProperty(Oe["@id"])){const rt=Ve.link[Oe["@id"]];for(let mt=0;mt<rt.length;++mt)if(rt[mt].expanded===Oe)return rt[mt].compacted}if(F(Oe)||D(Oe)){const rt=T.compactValue({activeCtx:ae,activeProperty:xe,value:Oe,options:Ve});return Ve.link&&D(Oe)&&(Ve.link.hasOwnProperty(Oe["@id"])||(Ve.link[Oe["@id"]]=[]),Ve.link[Oe["@id"]].push({expanded:Oe,compacted:rt})),rt}if(E(Oe)&&(x(ae,xe,"@container")||[]).includes("@list"))return T.compact({activeCtx:ae,activeProperty:xe,element:Oe["@list"],options:Ve});const Je="@reverse"===xe,Ce={},Be=ae;!F(Oe)&&!D(Oe)&&(ae=ae.revertToPreviousContext());const Ae=x(Be,xe,"@context");_(Ae)||(ae=yield oe({activeCtx:ae,localCtx:Ae,propagate:!0,overrideProtected:!0,options:Ve})),Ve.link&&"@id"in Oe&&(Ve.link.hasOwnProperty(Oe["@id"])||(Ve.link[Oe["@id"]]=[]),Ve.link[Oe["@id"]].push({expanded:Oe,compacted:Ce}));let ke=Oe["@type"]||[];ke.length>1&&(ke=Array.from(ke).sort());const de=ae;for(const rt of ke){const mt=T.compactIri({activeCtx:de,iri:rt,relativeTo:{vocab:!0}}),qe=x(Be,mt,"@context");_(qe)||(ae=yield oe({activeCtx:ae,localCtx:qe,options:Ve,propagate:!1}))}const Se=Object.keys(Oe).sort();for(const rt of Se){const mt=Oe[rt];if("@id"!==rt)if("@type"!==rt)if("@reverse"!==rt)if("@preserve"!==rt)if("@index"!==rt)if("@graph"!==rt&&"@list"!==rt&&"@included"!==rt&&k(rt)){const qe=T.compactIri({activeCtx:ae,iri:rt,relativeTo:{vocab:!0}});B(Ce,qe,mt)}else{if(!q(mt))throw new C("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===mt.length){const qe=T.compactIri({activeCtx:ae,iri:rt,value:mt,relativeTo:{vocab:!0},reverse:Je}),fe=ae.mappings.has(qe)?ae.mappings.get(qe)["@nest"]:null;let R=Ce;fe&&(j(ae,fe,Ve),G(Ce[fe])||(Ce[fe]={}),R=Ce[fe]),B(R,qe,mt,{propertyIsArray:!0})}for(const qe of mt){const fe=T.compactIri({activeCtx:ae,iri:rt,value:qe,relativeTo:{vocab:!0},reverse:Je}),R=ae.mappings.has(fe)?ae.mappings.get(fe)["@nest"]:null;let A=Ce;R&&(j(ae,R,Ve),G(Ce[R])||(Ce[R]={}),A=Ce[R]);const ie=x(ae,fe,"@container")||[],J=W(qe),He=E(qe);let Xe;He?Xe=qe["@list"]:J&&(Xe=qe["@graph"]);let ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:He||J?Xe:qe,options:Ve});if(He){if(q(ue)||(ue=[ue]),ie.includes("@list")){B(A,fe,ue,{valueIsArray:!0,allowDuplicate:!0});continue}ue={[T.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ue},"@index"in qe&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=qe["@index"])}if(J)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&P(qe))){let te;A.hasOwnProperty(fe)?te=A[fe]:A[fe]=te={};const U=(ie.includes("@id")?qe["@id"]:qe["@index"])||T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});B(te,U,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&P(qe)?(q(ue)&&ue.length>1&&(ue={"@included":ue}),B(A,fe,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")})):(q(ue)&&1===ue.length&&Ve.compactArrays&&(ue=ue[0]),ue={[T.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ue},"@id"in qe&&(ue[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=qe["@id"]),"@index"in qe&&(ue[T.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=qe["@index"]),B(A,fe,ue,{propertyIsArray:!Ve.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let te,U;if(A.hasOwnProperty(fe)?te=A[fe]:A[fe]=te={},ie.includes("@language"))F(ue)&&(ue=ue["@value"]),U=qe["@language"];else if(ie.includes("@index")){const I=x(ae,fe,"@index")||"@index",N=T.compactIri({activeCtx:ae,iri:I,relativeTo:{vocab:!0}});if("@index"===I)U=qe["@index"],delete ue[N];else{let he;if([U,...he]=b(ue[I]||[]),X(U))switch(he.length){case 0:delete ue[I];break;case 1:ue[I]=he[0];break;default:ue[I]=he}else U=null}}else if(ie.includes("@id")){const I=T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});U=ue[I],delete ue[I]}else if(ie.includes("@type")){const I=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let N;switch([U,...N]=b(ue[I]||[]),N.length){case 0:delete ue[I];break;case 1:ue[I]=N[0];break;default:ue[I]=N}1===Object.keys(ue).length&&"@id"in qe&&(ue=yield T.compact({activeCtx:ae,activeProperty:fe,element:{"@id":qe["@id"]},options:Ve}))}U||(U=T.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),B(te,U,ue,{propertyIsArray:ie.includes("@set")})}else{const te=!Ve.compactArrays||ie.includes("@set")||ie.includes("@list")||q(ue)&&0===ue.length||"@list"===rt||"@graph"===rt;B(A,fe,ue,{propertyIsArray:te})}}}else{if((x(ae,xe,"@container")||[]).includes("@index"))continue;const fe=T.compactIri({activeCtx:ae,iri:rt,relativeTo:{vocab:!0}});B(Ce,fe,mt)}else{const qe=yield T.compact({activeCtx:ae,activeProperty:xe,element:mt,options:Ve});q(qe)&&0===qe.length||B(Ce,rt,qe)}else{const qe=yield T.compact({activeCtx:ae,activeProperty:"@reverse",element:mt,options:Ve});for(const fe in qe)if(ae.mappings.has(fe)&&ae.mappings.get(fe).reverse){const R=qe[fe],ie=(x(ae,fe,"@container")||[]).includes("@set")||!Ve.compactArrays;B(Ce,fe,R,{propertyIsArray:ie}),delete qe[fe]}if(Object.keys(qe).length>0){const fe=T.compactIri({activeCtx:ae,iri:rt,relativeTo:{vocab:!0}});B(Ce,fe,qe)}}else{let qe=b(mt).map(J=>T.compactIri({activeCtx:Be,iri:J,relativeTo:{vocab:!0}}));1===qe.length&&(qe=qe[0]);const fe=T.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),ie=(x(ae,fe,"@container")||[]).includes("@set")&&$(ae,1.1)||q(qe)&&0===mt.length;B(Ce,fe,qe,{propertyIsArray:ie})}else{let qe=b(mt).map(R=>T.compactIri({activeCtx:ae,iri:R,relativeTo:{vocab:!1},base:Ve.base}));1===qe.length&&(qe=qe[0]),Ce[T.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=qe}}return Ce}return Oe});return function(ae){return Me.apply(this,arguments)}}(),T.compactIri=({activeCtx:Me,iri:ae,value:xe=null,relativeTo:Oe={vocab:!1},reverse:Ve=!1,base:Qe=null})=>{if(null===ae)return ae;Me.isPropertyTermScoped&&Me.previousContext&&(Me=Me.previousContext);const Je=Me.getInverse();if(k(ae)&&ae in Je&&"@none"in Je[ae]&&"@type"in Je[ae]["@none"]&&"@none"in Je[ae]["@none"]["@type"])return Je[ae]["@none"]["@type"]["@none"];if(Oe.vocab&&ae in Je){const de=Me["@language"]||"@none",Se=[];G(xe)&&"@index"in xe&&!("@graph"in xe)&&Se.push("@index","@index@set"),G(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),W(xe)?("@index"in xe&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in xe||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Se.push("@graph@id","@graph@id@set")):G(xe)&&!F(xe)&&Se.push("@id","@id@set","@type","@set@type");let rt="@language",mt="@null";if(Ve)rt="@type",mt="@reverse",Se.push("@set");else if(E(xe)){"@index"in xe||Se.push("@list");const fe=xe["@list"];if(0===fe.length)rt="@any",mt="@none";else{let R=0===fe.length?de:null,A=null;for(let ie=0;ie<fe.length;++ie){const J=fe[ie];let He="@none",Xe="@none";if(F(J)?"@direction"in J?He=`${(J["@language"]||"").toLowerCase()}_${J["@direction"]}`:"@language"in J?He=J["@language"].toLowerCase():"@type"in J?Xe=J["@type"]:He="@null":Xe="@id",null===R?R=He:He!==R&&F(J)&&(R="@none"),null===A?A=Xe:Xe!==A&&(A="@none"),"@none"===R&&"@none"===A)break}R=R||"@none",A=A||"@none","@none"!==A?(rt="@type",mt=A):mt=R}}else{if(F(xe))if("@language"in xe&&!("@index"in xe)){Se.push("@language","@language@set"),mt=xe["@language"];const fe=xe["@direction"];fe&&(mt=`${mt}_${fe}`)}else"@direction"in xe&&!("@index"in xe)?mt=`_${xe["@direction"]}`:"@type"in xe&&(rt="@type",mt=xe["@type"]);else rt="@type",mt="@id";Se.push("@set")}Se.push("@none"),G(xe)&&!("@index"in xe)&&Se.push("@index","@index@set"),F(xe)&&1===Object.keys(xe).length&&Se.push("@language","@language@set");const qe=function le(Me,ae,xe,Oe,Ve,Qe){null===Qe&&(Qe="@null");const Je=[];if(("@id"===Qe||"@reverse"===Qe)&&G(xe)&&"@id"in xe){"@reverse"===Qe&&Je.push("@reverse");const Be=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:!0}});Me.mappings.has(Be)&&Me.mappings.get(Be)&&Me.mappings.get(Be)["@id"]===xe["@id"]?Je.push.apply(Je,["@vocab","@id"]):Je.push.apply(Je,["@id","@vocab"])}else{Je.push(Qe);const Be=Je.find(Ae=>Ae.includes("_"));Be&&Je.push(Be.replace(/^[^_]+_/,"_"))}Je.push("@none");const Ce=Me.inverse[ae];for(const Be of Oe){if(!(Be in Ce))continue;const Ae=Ce[Be][Ve];for(const ke of Je)if(ke in Ae)return Ae[ke]}return null}(Me,ae,xe,Se,rt,mt);if(null!==qe)return qe}if(Oe.vocab&&"@vocab"in Me){const de=Me["@vocab"];if(0===ae.indexOf(de)&&ae!==de){const Se=ae.substr(de.length);if(!Me.mappings.has(Se))return Se}}let Ce=null;const Be=[];let Ae=Me.fastCurieMap;const ke=ae.length-1;for(let de=0;de<ke&&ae[de]in Ae;++de)Ae=Ae[ae[de]],""in Ae&&Be.push(Ae[""][0]);for(let de=Be.length-1;de>=0;--de){const Se=Be[de],rt=Se.terms;for(const mt of rt){const qe=mt+":"+ae.substr(Se.iri.length);Me.mappings.get(mt)._prefix&&(!Me.mappings.has(qe)||null===xe&&Me.mappings.get(qe)["@id"]===ae)&&(null===Ce||M(qe,Ce)<0)&&(Ce=qe)}}if(null!==Ce)return Ce;for(const[de,Se]of Me.mappings)if(Se&&Se._prefix&&ae.startsWith(de+":"))throw new C(`Absolute IRI "${ae}" confused with prefix "${de}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Me});if(!Oe.vocab){if("@base"in Me){if(Me["@base"]){const de=z(ee(Qe,Me["@base"]),ae);return Y.test(de)?`./${de}`:de}return ae}return z(Qe,ae)}return ae},T.compactValue=({activeCtx:Me,activeProperty:ae,value:xe,options:Oe})=>{if(F(xe)){const Ce=x(Me,ae,"@type"),Be=x(Me,ae,"@language"),Ae=x(Me,ae,"@direction"),ke=x(Me,ae,"@container")||[],de="@index"in xe&&!ke.includes("@index");if(!de&&"@none"!==Ce&&(xe["@type"]===Ce||"@language"in xe&&xe["@language"]===Be&&"@direction"in xe&&xe["@direction"]===Ae||"@language"in xe&&xe["@language"]===Be||"@direction"in xe&&xe["@direction"]===Ae))return xe["@value"];const Se=Object.keys(xe).length,rt=1===Se||2===Se&&"@index"in xe&&!de,mt="@language"in Me,qe=X(xe["@value"]),fe=Me.mappings.has(ae)&&null===Me.mappings.get(ae)["@language"];if(rt&&"@none"!==Ce&&(!mt||!qe||fe))return xe["@value"];const R={};return de&&(R[T.compactIri({activeCtx:Me,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?R[T.compactIri({activeCtx:Me,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Me,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(R[T.compactIri({activeCtx:Me,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),R[T.compactIri({activeCtx:Me,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],R}const Ve=se(Me,ae,{vocab:!0},Oe),Qe=x(Me,ae,"@type"),Je=T.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:"@vocab"===Qe},base:Oe.base});return"@id"===Qe||"@vocab"===Qe||"@graph"===Ve?Je:{[T.compactIri({activeCtx:Me,iri:"@id",relativeTo:{vocab:!0}})]:Je}}},5315:je=>{"use strict";const me="http://www.w3.org/1999/02/22-rdf-syntax-ns#",S="http://www.w3.org/2001/XMLSchema#";je.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:me,RDF_LIST:me+"List",RDF_FIRST:me+"first",RDF_REST:me+"rest",RDF_NIL:me+"nil",RDF_TYPE:me+"type",RDF_PLAIN_LITERAL:me+"PlainLiteral",RDF_XML_LITERAL:me+"XMLLiteral",RDF_JSON_LITERAL:me+"JSON",RDF_OBJECT:me+"object",RDF_LANGSTRING:me+"langString",XSD:S,XSD_BOOLEAN:S+"boolean",XSD_DOUBLE:S+"double",XSD_INTEGER:S+"integer",XSD_STRING:S+"string"}},429:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(9420),q=S(262),{isArray:G,isObject:X,isString:_,isUndefined:E}=S(2831),{isAbsolute:F,isRelative:W,prependBase:P}=S(2051),{handleEvent:D}=S(2585),{REGEX_BCP47:se,REGEX_KEYWORD:x,asArray:k,compareShortestLeast:oe}=S(9420),$=new Map,ee={};function Y(b,M,T,le,j,Me){if(null===M||!_(M)||ee.isKeyword(M))return M;if(M.match(x))return null;if(le&&le.hasOwnProperty(M)&&!0!==j.get(M)&&ee.createTermDefinition({activeCtx:b,localCtx:le,term:M,defined:j,options:Me}),(T=T||{}).vocab){const xe=b.mappings.get(M);if(null===xe)return null;if(X(xe)&&"@id"in xe)return xe["@id"]}const ae=M.indexOf(":");if(ae>0){const xe=M.substr(0,ae),Oe=M.substr(ae+1);if("_"===xe||0===Oe.indexOf("//"))return M;le&&le.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:b,localCtx:le,term:xe,defined:j,options:Me});const Ve=b.mappings.get(xe);if(Ve&&Ve._prefix)return Ve["@id"]+Oe;if(F(M))return M}if(T.vocab&&"@vocab"in b)M=b["@vocab"]+M;else if(T.base){let xe,Oe;"@base"in b?b["@base"]?(Oe=P(Me.base,b["@base"]),xe=P(Oe,M)):(Oe=b["@base"],xe=M):(Oe=Me.base,xe=P(Me.base,M)),M=xe}return M}function B(b,M){if(!b||"object"!=typeof b||!M||"object"!=typeof M)return b===M;const T=Array.isArray(b);if(T!==Array.isArray(M))return!1;if(T){if(b.length!==M.length)return!1;for(let Me=0;Me<b.length;++Me)if(!B(b[Me],M[Me]))return!1;return!0}const le=Object.keys(b),j=Object.keys(M);if(le.length!==j.length)return!1;for(const Me in b){let ae=b[Me],xe=M[Me];if("@container"===Me&&Array.isArray(ae)&&Array.isArray(xe)&&(ae=ae.slice().sort(),xe=xe.slice().sort()),!B(ae,xe))return!1}return!0}je.exports=ee,ee.process=function(){var b=Z(function*({activeCtx:M,localCtx:T,options:le,propagate:j=!0,overrideProtected:Me=!1,cycles:ae=new Set}){if(X(T)&&"@context"in T&&G(T["@context"])&&(T=T["@context"]),0===k(T).length)return M;const Oe=[],Ve=[({event:Be,next:Ae})=>{Oe.push(Be),Ae()}];le.eventHandler&&Ve.push(le.eventHandler);const Qe=le;le={...le,eventHandler:Ve};const Je=yield le.contextResolver.resolve({activeCtx:M,context:T,documentLoader:le.documentLoader,base:le.base});X(Je[0].document)&&"boolean"==typeof Je[0].document["@propagate"]&&(j=Je[0].document["@propagate"]);let Ce=M;!j&&!Ce.previousContext&&(Ce=Ce.clone(),Ce.previousContext=M);for(const Be of Je){let{document:Ae}=Be;if(M=Ce,null===Ae){if(!Me&&0!==Object.keys(M.protected).length)throw new q("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ce=M=ee.getInitialContext(le).clone();continue}const ke=Be.getProcessed(M);if(ke){if(Qe.eventHandler)for(const Se of ke.events)D({event:Se,options:Qe});Ce=M=ke.context;continue}if(X(Ae)&&"@context"in Ae&&(Ae=Ae["@context"]),!X(Ae))throw new q("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ae});Ce=Ce.clone();const de=new Map;if("@version"in Ae){if(1.1!==Ae["@version"])throw new q("Unsupported JSON-LD version: "+Ae["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ae});if(M.processingMode&&"json-ld-1.0"===M.processingMode)throw new q("@version: "+Ae["@version"]+" not compatible with "+M.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ae});Ce.processingMode="json-ld-1.1",Ce["@version"]=Ae["@version"],de.set("@version",!0)}if(Ce.processingMode=Ce.processingMode||M.processingMode,"@base"in Ae){let Se=Ae["@base"];if(null!==Se&&!F(Se)){if(!W(Se))throw new q('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ae});Se=P(Ce["@base"],Se)}Ce["@base"]=Se,de.set("@base",!0)}if("@vocab"in Ae){const Se=Ae["@vocab"];if(null===Se)delete Ce["@vocab"];else{if(!_(Se))throw new q('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ae});if(!F(Se)&&ee.processingMode(Ce,1))throw new q('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ae});{const rt=Y(Ce,Se,{vocab:!0,base:!0},void 0,void 0,le);F(rt)||le.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:rt}},options:le}),Ce["@vocab"]=rt}}de.set("@vocab",!0)}if("@language"in Ae){const Se=Ae["@language"];if(null===Se)delete Ce["@language"];else{if(!_(Se))throw new q('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ae});Se.match(se)||le.eventHandler&&D({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Se}},options:le}),Ce["@language"]=Se.toLowerCase()}de.set("@language",!0)}if("@direction"in Ae){const Se=Ae["@direction"];if("json-ld-1.0"===M.processingMode)throw new q("Invalid JSON-LD syntax; @direction not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ae});if(null===Se)delete Ce["@direction"];else{if("ltr"!==Se&&"rtl"!==Se)throw new q('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ae});Ce["@direction"]=Se}de.set("@direction",!0)}if("@propagate"in Ae){const Se=Ae["@propagate"];if("json-ld-1.0"===M.processingMode)throw new q("Invalid JSON-LD syntax; @propagate not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ae});if("boolean"!=typeof Se)throw new q("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});de.set("@propagate",!0)}if("@import"in Ae){const Se=Ae["@import"];if("json-ld-1.0"===M.processingMode)throw new q("Invalid JSON-LD syntax; @import not compatible with "+M.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ae});if(!_(Se))throw new q("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const rt=yield le.contextResolver.resolve({activeCtx:M,context:Se,documentLoader:le.documentLoader,base:le.base});if(1!==rt.length)throw new q("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const mt=rt[0].getProcessed(M);if(mt)Ae=mt;else{const qe=rt[0].document;if("@import"in qe)throw new q("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const fe in qe)Ae.hasOwnProperty(fe)||(Ae[fe]=qe[fe]);rt[0].setProcessed(M,Ae)}de.set("@import",!0)}de.set("@protected",Ae["@protected"]||!1);for(const Se in Ae)if(ee.createTermDefinition({activeCtx:Ce,localCtx:Ae,term:Se,defined:de,options:le,overrideProtected:Me}),X(Ae[Se])&&"@context"in Ae[Se]){const rt=Ae[Se]["@context"];let mt=!0;if(_(rt)){const qe=P(le.base,rt);ae.has(qe)?mt=!1:ae.add(qe)}if(mt)try{yield ee.process({activeCtx:Ce.clone(),localCtx:Ae[Se]["@context"],overrideProtected:!0,options:le,cycles:ae})}catch{throw new q("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ae[Se]["@context"],term:Se})}}Be.setProcessed(M,{context:Ce,events:Oe})}return Ce});return function(M){return b.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:b,localCtx:M,term:T,defined:le,options:j,overrideProtected:Me=!1})=>{if(le.has(T)){if(le.get(T))return;throw new q("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:M,term:T})}let ae;if(le.set(T,!1),M.hasOwnProperty(T)&&(ae=M[T]),"@type"===T&&X(ae)&&"@set"===(ae["@container"]||"@set")&&ee.processingMode(b,1.1)){const Be=["@container","@id","@protected"],Ae=Object.keys(ae);if(0===Ae.length||Ae.some(ke=>!Be.includes(ke)))throw new q("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:M,term:T})}else{if(ee.isKeyword(T))throw new q("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:M,term:T});if(T.match(x))return void(j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:j}));if(""===T)throw new q("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:M})}const xe=b.mappings.get(T);b.mappings.has(T)&&b.mappings.delete(T);let Oe=!1;if((_(ae)||null===ae)&&(Oe=!0,ae={"@id":ae}),!X(ae))throw new q("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:M});const Ve={};b.mappings.set(T,Ve),Ve.reverse=!1;const Qe=["@container","@id","@language","@reverse","@type"];ee.processingMode(b,1.1)&&Qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Be in ae)if(!Qe.includes(Be))throw new q("Invalid JSON-LD syntax; a term definition must not contain "+Be,"jsonld.SyntaxError",{code:"invalid term definition",context:M});const Je=T.indexOf(":");if(Ve._termHasColon=Je>0,"@reverse"in ae){if("@id"in ae)throw new q("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});if("@nest"in ae)throw new q("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});const Be=ae["@reverse"];if(!_(Be))throw new q("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(Be.match(x))return j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Be}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));const Ae=Y(b,Be,{vocab:!0,base:!1},M,le,j);if(!F(Ae))throw new q("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});Ve["@id"]=Ae,Ve.reverse=!0}else if("@id"in ae){let Be=ae["@id"];if(Be&&!_(Be))throw new q("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(null===Be)Ve["@id"]=null;else{if(!ee.isKeyword(Be)&&Be.match(x))return j.eventHandler&&D({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Be}},options:j}),void(xe?b.mappings.set(T,xe):b.mappings.delete(T));if(Be!==T){if(Be=Y(b,Be,{vocab:!0,base:!1},M,le,j),!F(Be)&&!ee.isKeyword(Be))throw new q("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});if(T.match(/(?::[^:])|\//)&&Y(b,T,{vocab:!0,base:!1},M,new Map(le).set(T,!0),j)!==Be)throw new q("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M});Ve["@id"]=Be,Ve._prefix=Oe&&!Ve._termHasColon&&null!==Be.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Ve))if(Ve._termHasColon){const Be=T.substr(0,Je);if(M.hasOwnProperty(Be)&&ee.createTermDefinition({activeCtx:b,localCtx:M,term:Be,defined:le,options:j}),b.mappings.has(Be)){const Ae=T.substr(Je+1);Ve["@id"]=b.mappings.get(Be)["@id"]+Ae}else Ve["@id"]=T}else if("@type"===T)Ve["@id"]=T;else{if(!("@vocab"in b))throw new q("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:M,term:T});Ve["@id"]=b["@vocab"]+T}if((!0===ae["@protected"]||!0===le.get("@protected")&&!1!==ae["@protected"])&&(b.protected[T]=!0,Ve.protected=!0),le.set(T,!0),"@type"in ae){let Be=ae["@type"];if(!_(Be))throw new q("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:M});if("@json"===Be||"@none"===Be){if(ee.processingMode(b,1))throw new q(`Invalid JSON-LD syntax; an @context @type value must not be "${Be}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:M})}else if("@id"!==Be&&"@vocab"!==Be){if(Be=Y(b,Be,{vocab:!0,base:!1},M,le,j),!F(Be))throw new q("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:M});if(0===Be.indexOf("_:"))throw new q("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:M})}Ve["@type"]=Be}if("@container"in ae){const Be=_(ae["@container"])?[ae["@container"]]:ae["@container"]||[],Ae=["@list","@set","@index","@language"];let ke=!0;const de=Be.includes("@set");if(ee.processingMode(b,1.1)){if(Ae.push("@graph","@id","@type"),Be.includes("@list")){if(1!==Be.length)throw new q("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:M})}else if(Be.includes("@graph")){if(Be.some(Se=>"@graph"!==Se&&"@id"!==Se&&"@index"!==Se&&"@set"!==Se))throw new q("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:M})}else ke&=Be.length<=(de?2:1);if(Be.includes("@type")&&(Ve["@type"]=Ve["@type"]||"@id",!["@id","@vocab"].includes(Ve["@type"])))throw new q("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:M})}else ke&=!G(ae["@container"]),ke&=Be.length<=1;if(ke&=Be.every(Se=>Ae.includes(Se)),ke&=!(de&&Be.includes("@list")),!ke)throw new q("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ae.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:M});if(Ve.reverse&&!Be.every(Se=>["@index","@set"].includes(Se)))throw new q("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:M});Ve["@container"]=Be}if("@index"in ae){if(!("@container"in ae)||!Ve["@container"].includes("@index"))throw new q(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:M});if(!_(ae["@index"])||0===ae["@index"].indexOf("@"))throw new q(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:M});Ve["@index"]=ae["@index"]}if("@context"in ae&&(Ve["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let Be=ae["@language"];if(null!==Be&&!_(Be))throw new q("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:M});null!==Be&&(Be=Be.toLowerCase()),Ve["@language"]=Be}if("@prefix"in ae){if(T.match(/:|\//))throw new q("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:M});if(ee.isKeyword(Ve["@id"]))throw new q("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:M});if("boolean"!=typeof ae["@prefix"])throw new q("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:M});Ve._prefix=!0===ae["@prefix"]}if("@direction"in ae){const Be=ae["@direction"];if(null!==Be&&"ltr"!==Be&&"rtl"!==Be)throw new q('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:M});Ve["@direction"]=Be}if("@nest"in ae){const Be=ae["@nest"];if(!_(Be)||"@nest"!==Be&&0===Be.indexOf("@"))throw new q("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:M});Ve["@nest"]=Be}const Ce=Ve["@id"];if("@context"===Ce||"@preserve"===Ce)throw new q("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:M});if(xe&&xe.protected&&!Me&&(b.protected[T]=!0,Ve.protected=!0,!B(xe,Ve)))throw new q("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:M,term:T})},ee.expandIri=(b,M,T,le)=>Y(b,M,T,void 0,void 0,le),ee.getInitialContext=b=>{const M=JSON.stringify({processingMode:b.processingMode}),T=$.get(M);if(T)return T;const le={processingMode:b.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const Ve=this;if(Ve.inverse)return Ve.inverse;const Qe=Ve.inverse={},Je=Ve.fastCurieMap={},Ce={},Be=(Ve["@language"]||"@none").toLowerCase(),Ae=Ve["@direction"],ke=Ve.mappings,de=[...ke.keys()].sort(oe);for(const Se of de){const rt=ke.get(Se);if(null===rt)continue;let mt=rt["@container"]||"@none";if(mt=[].concat(mt).sort().join(""),null===rt["@id"])continue;const qe=k(rt["@id"]);for(const fe of qe){let R=Qe[fe];const A=ee.isKeyword(fe);if(R)!A&&!rt._termHasColon&&Ce[fe].push(Se);else if(Qe[fe]=R={},!A&&!rt._termHasColon){Ce[fe]=[Se];const ie={iri:fe,terms:Ce[fe]};fe[0]in Je?Je[fe[0]].push(ie):Je[fe[0]]=[ie]}if(R[mt]||(R[mt]={"@language":{},"@type":{},"@any":{}}),R=R[mt],ae(Se,R["@any"],"@none"),rt.reverse)ae(Se,R["@type"],"@reverse");else if("@none"===rt["@type"])ae(Se,R["@any"],"@none"),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none");else if("@type"in rt)ae(Se,R["@type"],rt["@type"]);else if("@language"in rt&&"@direction"in rt){const ie=rt["@language"],J=rt["@direction"];ae(Se,R["@language"],ie&&J?`${ie}_${J}`.toLowerCase():ie?ie.toLowerCase():J?`_${J}`:"@null")}else"@language"in rt?ae(Se,R["@language"],(rt["@language"]||"@null").toLowerCase()):"@direction"in rt?ae(Se,R["@language"],rt["@direction"]?`_${rt["@direction"]}`:"@none"):Ae?(ae(Se,R["@language"],`_${Ae}`),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none")):(ae(Se,R["@language"],Be),ae(Se,R["@language"],"@none"),ae(Se,R["@type"],"@none"))}}for(const Se in Je)Me(Je,Se,1);return Qe},clone:function xe(){const Ve={};return Ve.mappings=C.clone(this.mappings),Ve.clone=this.clone,Ve.inverse=null,Ve.getInverse=this.getInverse,Ve.protected=C.clone(this.protected),this.previousContext&&(Ve.previousContext=this.previousContext.clone()),Ve.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ve["@base"]=this["@base"]),"@language"in this&&(Ve["@language"]=this["@language"]),"@vocab"in this&&(Ve["@vocab"]=this["@vocab"]),Ve},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===$.size&&$.clear(),$.set(M,le),le;function Me(Ve,Qe,Je){const Ce=Ve[Qe],Be=Ve[Qe]={};let Ae,ke;for(const de of Ce)Ae=de.iri,ke=Je>=Ae.length?"":Ae[Je],ke in Be?Be[ke].push(de):Be[ke]=[de];for(const de in Be)""!==de&&Me(Be,de,Je+1)}function ae(Ve,Qe,Je){Qe.hasOwnProperty(Je)||(Qe[Je]=Ve)}},ee.getContextValue=(b,M,T)=>{if(null===M)return"@context"===T?void 0:null;if(b.mappings.has(M)){const le=b.mappings.get(M);if(E(T))return le;if(le.hasOwnProperty(T))return le[T]}return"@language"===T&&T in b||"@direction"===T&&T in b?b[T]:"@context"!==T?null:void 0},ee.processingMode=(b,M)=>M.toString()>="1.1"?!b.processingMode||b.processingMode>="json-ld-"+M.toString():"json-ld-1.0"===b.processingMode,ee.isKeyword=b=>{if(!_(b)||"@"!==b[0])return!1;switch(b){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},3120:(je,me,S)=>{"use strict";var Z=S(9293).default;const{parseLinkHeader:C,buildHeaders:q}=S(9420),{LINK_HEADER_CONTEXT:G}=S(5315),X=S(262),_=S(4808),{prependBase:E}=S(2051),F=/(^|(\r\n))link:/i;je.exports=({secure:P,headers:D={},xhr:se}={headers:{}})=>{return D=q(D),(new _).wrapLoader(k);function k($){return oe.apply(this,arguments)}function oe(){return oe=Z(function*($){if(0!==$.indexOf("http:")&&0!==$.indexOf("https:"))throw new X('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:$});if(P&&0!==$.indexOf("https"))throw new X('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:$});let z;try{z=yield function W(P,D,se){const x=new(P=P||XMLHttpRequest);return new Promise((k,oe)=>{x.onload=()=>k(x),x.onerror=$=>oe($),x.open("GET",D,!0);for(const $ in se)x.setRequestHeader($,se[$]);x.send()})}(se,$,D)}catch(M){throw new X("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:$,cause:M})}if(z.status>=400)throw new X("URL could not be dereferenced: "+z.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:$,httpStatusCode:z.status});let ee={contextUrl:null,documentUrl:$,document:z.response},Y=null;const B=z.getResponseHeader("Content-Type");let b;if(F.test(z.getAllResponseHeaders())&&(b=z.getResponseHeader("Link")),b&&"application/ld+json"!==B){const M=C(b),T=M[G];if(Array.isArray(T))throw new X("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:$});T&&(ee.contextUrl=T.target),Y=M.alternate,Y&&"application/ld+json"==Y.type&&!(B||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield k(E($,Y.target)))}return ee}),oe.apply(this,arguments)}}},2585:(je,me,S)=>{"use strict";const Z=S(262),{isArray:C}=S(2831),{asArray:q}=S(9420),G={};function X({event:E,handlers:F}){let W=!0;for(let P=0;W&&P<F.length;++P){W=!1;const D=F[P];if(C(D))W=X({event:E,handlers:D});else if("function"==typeof D)D({event:E,next:()=>{W=!0}});else{if("object"!=typeof D)throw new Z("Invalid event handler.","jsonld.InvalidEventHandler",{event:E});E.code in D?D[E.code]({event:E,next:()=>{W=!0}}):W=!0}}return W}je.exports=G,G.defaultEventHandler=null,G.setupEventHandler=({options:E={}})=>{const F=[].concat(E.safe?G.safeEventHandler:[],E.eventHandler?q(E.eventHandler):[],G.defaultEventHandler?G.defaultEventHandler:[]);return 0===F.length?null:F},G.handleEvent=({event:E,options:F})=>{X({event:E,handlers:F.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);G.safeEventHandler=function({event:F,next:W}){if("warning"===F.level&&_.has(F.code))throw new Z("Safe mode validation error.","jsonld.ValidationError",{event:F});W()},G.logEventHandler=function({event:F,next:W}){console.log(`EVENT: ${F.message}`,{event:F}),W()},G.logWarningEventHandler=function({event:F,next:W}){"warning"===F.level&&console.warn(`WARNING: ${F.message}`,{event:F}),W()},G.unhandledEventHandler=function({event:F}){throw new Z("No handler for event.","jsonld.UnhandledEvent",{event:F})},G.setDefaultEventHandler=function({eventHandler:E}={}){G.defaultEventHandler=E?q(E):null}},7336:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(262),{isArray:q,isObject:G,isEmptyObject:X,isString:_,isUndefined:E}=S(2831),{isList:F,isValue:W,isGraph:P,isSubject:D}=S(4209),{expandIri:se,getContextValue:x,isKeyword:k,process:oe,processingMode:$}=S(429),{isAbsolute:z}=S(2051),{REGEX_BCP47:ee,REGEX_KEYWORD:Y,addValue:B,asArray:b,getValues:M,validateTypeValue:T}=S(9420),{handleEvent:le}=S(2585),j={};function Me({value:Ce,count:Be,options:Ae}){if(0===Be||"@value"in Ce||"@list"in Ce||1===Be&&"@id"in Ce){if(Ae.eventHandler){let ke,de;0===Be?(ke="empty object",de="Dropping empty object."):"@value"in Ce?(ke="object with only @value",de="Dropping object with only @value."):"@list"in Ce?(ke="object with only @list",de="Dropping object with only @list."):1===Be&&"@id"in Ce&&(ke="object with only @id",de="Dropping object with only @id."),le({event:{type:["JsonLdEvent"],code:ke,level:"warning",message:de,details:{value:Ce}},options:Ae})}return null}return Ce}function ae(Ce){return xe.apply(this,arguments)}function xe(){return(xe=Z(function*({activeCtx:Ce,activeProperty:Be,expandedActiveProperty:Ae,element:ke,expandedParent:de,options:Se={},insideList:rt,typeKey:mt,typeScopedContext:qe}){const fe=Object.keys(ke).sort(),R=[];let A;const ie=ke[mt]&&"@json"===se(Ce,q(ke[mt])?ke[mt][0]:ke[mt],{vocab:!0},{...Se,typeExpansion:!0});for(const J of fe){let Xe,He=ke[J];if("@context"===J)continue;const ue=se(Ce,J,{vocab:!0},Se);if(null===ue||!z(ue)&&!k(ue)){Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:J,expandedProperty:ue}},options:Se});continue}if(k(ue)){if("@reverse"===Ae)throw new C("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:He});if(ue in de&&"@included"!==ue&&"@type"!==ue)throw new C("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ue})}if("@id"===ue){if(!_(He)){if(!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(G(He)){if(!X(He))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}else{if(!q(He))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He});if(!He.every(N=>_(N)))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:He})}}B(de,"@id",b(He).map(N=>{if(_(N)){const he=se(Ce,N,{base:!0},Se);return Se.eventHandler&&(null===he?le(null===N?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:N}},options:Se}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:N}},options:Se}):z(he)||le({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:N,expandedId:he}},options:Se})),he}return N}),{propertyIsArray:Se.isFrame});continue}if("@type"===ue){G(He)&&(He=Object.fromEntries(Object.entries(He).map(([N,he])=>[se(qe,N,{vocab:!0}),b(he).map(We=>se(qe,We,{base:!0,vocab:!0},{...Se,typeExpansion:!0}))]))),T(He,Se.isFrame),B(de,"@type",b(He).map(N=>{if(_(N)){const he=se(qe,N,{base:!0,vocab:!0},{...Se,typeExpansion:!0});return"@json"!==he&&!z(he)&&Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:N}},options:Se}),he}return N}),{propertyIsArray:!!Se.isFrame});continue}if("@included"===ue&&$(Ce,1.1)){const N=b(yield j.expand({activeCtx:Ce,activeProperty:Be,element:He,options:Se}));if(!N.every(he=>D(he)))throw new C("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:He});B(de,"@included",N,{propertyIsArray:!0});continue}if("@graph"===ue&&!G(He)&&!q(He))throw new C('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:He});if("@value"===ue){A=He,ie&&$(Ce,1.1)?de["@value"]=He:B(de,"@value",He,{propertyIsArray:Se.isFrame});continue}if("@language"===ue){if(null===He)continue;if(!_(He)&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:He});He=b(He).map(N=>_(N)?N.toLowerCase():N);for(const N of He)_(N)&&!N.match(ee)&&Se.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:N}},options:Se});B(de,"@language",He,{propertyIsArray:Se.isFrame});continue}if("@direction"===ue){if(!_(He)&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:He});He=b(He);for(const N of He)if(_(N)&&"ltr"!==N&&"rtl"!==N)throw new C('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:He});B(de,"@direction",He,{propertyIsArray:Se.isFrame});continue}if("@index"===ue){if(!_(He))throw new C('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:He});B(de,"@index",He);continue}if("@reverse"===ue){if(!G(He))throw new C('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:He});if(Xe=yield j.expand({activeCtx:Ce,activeProperty:"@reverse",element:He,options:Se}),"@reverse"in Xe)for(const he in Xe["@reverse"])B(de,he,Xe["@reverse"][he],{propertyIsArray:!0});let N=de["@reverse"]||null;for(const he in Xe){if("@reverse"===he)continue;null===N&&(N=de["@reverse"]={}),B(N,he,[],{propertyIsArray:!0});const We=Xe[he];for(let Ee=0;Ee<We.length;++Ee){const Ue=We[Ee];if(W(Ue)||F(Ue))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Xe});B(N,he,Ue,{propertyIsArray:!0})}}continue}if("@nest"===ue){R.push(J);continue}let te=Ce;const U=x(Ce,J,"@context");E(U)||(te=yield oe({activeCtx:Ce,localCtx:U,propagate:!0,overrideProtected:!0,options:Se}));const I=x(Ce,J,"@container")||[];if(I.includes("@language")&&G(He))Xe=Ve(te,He,x(te,J,"@direction"),Se);else if(I.includes("@index")&&G(He)){const N=I.includes("@graph"),he=x(te,J,"@index")||"@index",We="@index"!==he&&se(Ce,he,{vocab:!0},Se);Xe=yield Qe({activeCtx:te,options:Se,activeProperty:J,value:He,asGraph:N,indexKey:he,propertyIndex:We})}else if(I.includes("@id")&&G(He)){const N=I.includes("@graph");Xe=yield Qe({activeCtx:te,options:Se,activeProperty:J,value:He,asGraph:N,indexKey:"@id"})}else if(I.includes("@type")&&G(He))Xe=yield Qe({activeCtx:te.revertToPreviousContext(),options:Se,activeProperty:J,value:He,asGraph:!1,indexKey:"@type"});else{const N="@list"===ue;if(N||"@set"===ue){let he=Be;N&&"@graph"===Ae&&(he=null),Xe=yield j.expand({activeCtx:te,activeProperty:he,element:He,options:Se,insideList:N})}else Xe="@json"===x(Ce,J,"@type")?{"@type":"@json","@value":He}:yield j.expand({activeCtx:te,activeProperty:J,element:He,options:Se,insideList:!1})}if(null!==Xe||"@value"===ue){if("@list"!==ue&&!F(Xe)&&I.includes("@list")&&(Xe={"@list":b(Xe)}),I.includes("@graph")&&!I.some(N=>"@id"===N||"@index"===N)){if(Xe=b(Xe),Se.isFrame||(Xe=Xe.filter(N=>null!==Me({value:N,count:Object.keys(N).length,options:Se}))),0===Xe.length)continue;Xe=Xe.map(N=>({"@graph":b(N)}))}if(te.mappings.has(J)&&te.mappings.get(J).reverse){const N=de["@reverse"]=de["@reverse"]||{};Xe=b(Xe);for(let he=0;he<Xe.length;++he){const We=Xe[he];if(W(We)||F(We))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Xe});B(N,ue,We,{propertyIsArray:!0})}continue}B(de,ue,Xe,{propertyIsArray:!0})}}if("@value"in de&&("@json"!==de["@type"]||!$(Ce,1.1))&&(G(A)||q(A))&&!Se.isFrame)throw new C('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:A});for(const J of R){const He=q(ke[J])?ke[J]:[ke[J]];for(const Xe of He){if(!G(Xe)||Object.keys(Xe).some(ue=>"@value"===se(Ce,ue,{vocab:!0},Se)))throw new C("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Xe});yield ae({activeCtx:Ce,activeProperty:Be,expandedActiveProperty:Ae,element:Xe,expandedParent:de,options:Se,insideList:rt,typeScopedContext:qe,typeKey:mt})}}})).apply(this,arguments)}function Oe({activeCtx:Ce,activeProperty:Be,value:Ae,options:ke}){if(null==Ae)return null;const de=se(Ce,Be,{vocab:!0},ke);if("@id"===de)return se(Ce,Ae,{base:!0},ke);if("@type"===de)return se(Ce,Ae,{vocab:!0,base:!0},{...ke,typeExpansion:!0});const Se=x(Ce,Be,"@type");if(("@id"===Se||"@graph"===de)&&_(Ae)){const mt=se(Ce,Ae,{base:!0},ke);return null===mt&&Ae.match(Y)&&ke.eventHandler&&le({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Be}},options:ke}),{"@id":mt}}if("@vocab"===Se&&_(Ae))return{"@id":se(Ce,Ae,{vocab:!0,base:!0},ke)};if(k(de))return Ae;const rt={};if(Se&&!["@id","@vocab","@none"].includes(Se))rt["@type"]=Se;else if(_(Ae)){const mt=x(Ce,Be,"@language");null!==mt&&(rt["@language"]=mt);const qe=x(Ce,Be,"@direction");null!==qe&&(rt["@direction"]=qe)}return["boolean","number","string"].includes(typeof Ae)||(Ae=Ae.toString()),rt["@value"]=Ae,rt}function Ve(Ce,Be,Ae,ke){const de=[],Se=Object.keys(Be).sort();for(const rt of Se){const mt=se(Ce,rt,{vocab:!0},ke);let qe=Be[rt];q(qe)||(qe=[qe]);for(const fe of qe){if(null===fe)continue;if(!_(fe))throw new C("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Be});const R={"@value":fe};"@none"!==mt&&(rt.match(ee)||ke.eventHandler&&le({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:rt}},options:ke}),R["@language"]=rt.toLowerCase()),Ae&&(R["@direction"]=Ae),de.push(R)}}return de}function Qe(Ce){return Je.apply(this,arguments)}function Je(){return(Je=Z(function*({activeCtx:Ce,options:Be,activeProperty:Ae,value:ke,asGraph:de,indexKey:Se,propertyIndex:rt}){const mt=[],qe=Object.keys(ke).sort(),fe="@type"===Se;for(let R of qe){if(fe){const J=x(Ce,R,"@context");E(J)||(Ce=yield oe({activeCtx:Ce,localCtx:J,propagate:!1,options:Be}))}let ie,A=ke[R];q(A)||(A=[A]),A=yield j.expand({activeCtx:Ce,activeProperty:Ae,element:A,options:Be,insideList:!1,insideIndex:!0}),ie=rt?"@none"===R?"@none":Oe({activeCtx:Ce,activeProperty:Se,value:R,options:Be}):se(Ce,R,{vocab:!0},Be),"@id"===Se?R=se(Ce,R,{base:!0},Be):fe&&(R=ie);for(let J of A){if(de&&!P(J)&&(J={"@graph":[J]}),"@type"===Se)"@none"===ie||(J["@type"]=J["@type"]?[R].concat(J["@type"]):[R]);else{if(W(J)&&!["@language","@type","@index"].includes(Se))throw new C(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Se}".`,"jsonld.SyntaxError",{code:"invalid value object",value:J});rt?"@none"!==ie&&B(J,rt,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Se in J)&&(J[Se]=R)}mt.push(J)}}return mt})).apply(this,arguments)}je.exports=j,j.expand=function(){var Ce=Z(function*({activeCtx:Be,activeProperty:Ae=null,element:ke,options:de={},insideList:Se=!1,insideIndex:rt=!1,typeScopedContext:mt=null}){if(null==ke)return null;if("@default"===Ae&&(de=Object.assign({},de,{isFrame:!1})),!q(ke)&&!G(ke))return Se||null!==Ae&&"@graph"!==se(Be,Ae,{vocab:!0},de)?Oe({activeCtx:Be,activeProperty:Ae,value:ke,options:de}):(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:ke}},options:de}),null);if(q(ke)){let Xe=[];const ue=x(Be,Ae,"@container")||[];Se=Se||ue.includes("@list");for(let te=0;te<ke.length;++te){let U=yield j.expand({activeCtx:Be,activeProperty:Ae,element:ke[te],options:de,insideIndex:rt,typeScopedContext:mt});Se&&q(U)&&(U={"@list":U}),null!==U&&(q(U)?Xe=Xe.concat(U):Xe.push(U))}return Xe}const qe=se(Be,Ae,{vocab:!0},de),fe=x(Be,Ae,"@context");mt=mt||(Be.previousContext?Be:null);let R=Object.keys(ke).sort(),A=!rt;if(A&&mt&&R.length<=2&&!R.includes("@context"))for(const Xe of R){const ue=se(mt,Xe,{vocab:!0},de);if("@value"===ue){A=!1,Be=mt;break}if("@id"===ue&&1===R.length){A=!1;break}}A&&(Be=Be.revertToPreviousContext()),E(fe)||(Be=yield oe({activeCtx:Be,localCtx:fe,propagate:!0,overrideProtected:!0,options:de})),"@context"in ke&&(Be=yield oe({activeCtx:Be,localCtx:ke["@context"],options:de})),mt=Be;let ie=null;for(const Xe of R)if("@type"===se(Be,Xe,{vocab:!0},de)){ie=ie||Xe;const te=ke[Xe],U=Array.isArray(te)?te.length>1?te.slice().sort():te:[te];for(const I of U){const N=x(mt,I,"@context");E(N)||(Be=yield oe({activeCtx:Be,localCtx:N,options:de,propagate:!1}))}}let J={};yield ae({activeCtx:Be,activeProperty:Ae,expandedActiveProperty:qe,element:ke,expandedParent:J,options:de,insideList:Se,typeKey:ie,typeScopedContext:mt}),R=Object.keys(J);let He=R.length;if("@value"in J){if("@type"in J&&("@language"in J||"@direction"in J))throw new C('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});let Xe=He-1;if("@type"in J&&(Xe-=1),"@index"in J&&(Xe-=1),"@language"in J&&(Xe-=1),"@direction"in J&&(Xe-=1),0!==Xe)throw new C('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});const ue=null===J["@value"]?[]:b(J["@value"]),te=M(J,"@type");if(!$(Be,1.1)||!te.includes("@json")||1!==te.length)if(0===ue.length)de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:J}},options:de}),J=null;else{if(!ue.every(U=>_(U)||X(U))&&"@language"in J)throw new C("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:J});if(!te.every(U=>z(U)&&!(_(U)&&0===U.indexOf("_:"))||X(U)))throw new C('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:J})}}else if("@type"in J&&!q(J["@type"]))J["@type"]=[J["@type"]];else if("@set"in J||"@list"in J){if(He>1&&(2!==He||!("@index"in J)))throw new C('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:J});"@set"in J&&(J=J["@set"],R=Object.keys(J),He=R.length)}else 1===He&&"@language"in J&&(de.eventHandler&&le({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:J}},options:de}),J=null);return G(J)&&!de.keepFreeFloatingNodes&&!Se&&(null===Ae||"@graph"===qe||(x(Be,Ae,"@container")||[]).includes("@graph"))&&(J=Me({value:J,count:He,options:de})),J});return function(Be){return Ce.apply(this,arguments)}}()},9392:(je,me,S)=>{"use strict";const{isSubjectReference:Z}=S(4209),{createMergedNodeMap:C}=S(5096),q={};je.exports=q,q.flatten=G=>{const X=C(G),_=[],E=Object.keys(X).sort();for(let F=0;F<E.length;++F){const W=X[E[F]];Z(W)||_.push(W)}return _}},7031:(je,me,S)=>{"use strict";const{isKeyword:Z}=S(429),C=S(4209),q=S(2831),G=S(9420),X=S(2051),_=S(262),{createNodeMap:E,mergeNodeMapGraphs:F}=S(5096),W={};function P(b){const M={};for(const T in b)void 0!==b[T]&&(M["@"+T]=[b[T]]);return[M]}function D(b,M,T){for(let le=T.length-1;le>=0;--le){const j=T[le];if(j.graph===M&&j.subject["@id"]===b["@id"])return!0}return!1}function se(b,M,T){const le="@"+T;let j=le in b?b[le][0]:M[T];if("embed"===T)if(!0===j)j="@once";else if(!1===j)j="@never";else if("@always"!==j&&"@never"!==j&&"@link"!==j&&"@first"!==j&&"@last"!==j&&"@once"!==j)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:b});return j}function x(b){if(!q.isArray(b)||1!==b.length||!q.isObject(b[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:b});if("@id"in b[0])for(const M of G.asArray(b[0]["@id"]))if(!q.isObject(M)&&!X.isAbsolute(M)||q.isString(M)&&0===M.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b});if("@type"in b[0])for(const M of G.asArray(b[0]["@type"]))if(!q.isObject(M)&&!X.isAbsolute(M)&&"@json"!==M||q.isString(M)&&0===M.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b})}function oe(b,M,T,le){let j=!0,Me=!1;for(const ae in T){let xe=!1;const Oe=G.getValues(M,ae),Ve=0===G.getValues(T,ae).length;if("@id"===ae){if(q.isEmptyObject(T["@id"][0]||{})?xe=!0:T["@id"].length>=0&&(xe=T["@id"].includes(Oe[0])),!le.requireAll)return xe}else if("@type"===ae){if(j=!1,Ve){if(Oe.length>0)return!1;xe=!0}else if(1===T["@type"].length&&q.isEmptyObject(T["@type"][0]))xe=Oe.length>0;else for(const Qe of T["@type"])xe=!(!q.isObject(Qe)||!("@default"in Qe))||xe||Oe.some(Je=>Je===Qe);if(!le.requireAll)return xe}else{if(Z(ae))continue;{const Qe=G.getValues(T,ae)[0];let Je=!1;if(Qe&&(x([Qe]),Je="@default"in Qe),j=!1,0===Oe.length&&Je)continue;if(Oe.length>0&&Ve)return!1;if(void 0===Qe){if(Oe.length>0)return!1;xe=!0}else if(C.isList(Qe)){const Ce=Qe["@list"][0];if(C.isList(Oe[0])){const Be=Oe[0]["@list"];C.isValue(Ce)?xe=Be.some(Ae=>B(Ce,Ae)):(C.isSubject(Ce)||C.isSubjectReference(Ce))&&(xe=Be.some(Ae=>Y(b,Ce,Ae,le)))}}else xe=C.isValue(Qe)?Oe.some(Ce=>B(Qe,Ce)):C.isSubjectReference(Qe)?Oe.some(Ce=>Y(b,Qe,Ce,le)):!!q.isObject(Qe)&&Oe.length>0}}if(!xe&&le.requireAll)return!1;Me=Me||xe}return j||Me}function $(b,M){const T=b.uniqueEmbeds[b.graph],le=T[M],j=le.parent,Me=le.property,ae={"@id":M};if(q.isArray(j)){for(let Oe=0;Oe<j.length;++Oe)if(G.compareValues(j[Oe],ae)){j[Oe]=ae;break}}else{const Oe=q.isArray(j[Me]);G.removeValue(j,Me,ae,{propertyIsArray:Oe}),G.addValue(j,Me,ae,{propertyIsArray:Oe})}const xe=Oe=>{const Ve=Object.keys(T);for(const Qe of Ve)Qe in T&&q.isObject(T[Qe].parent)&&T[Qe].parent["@id"]===Oe&&(delete T[Qe],xe(Qe))};xe(M)}function z(b,M){if(q.isArray(b))return b.map(T=>z(T,M));if(q.isObject(b)){if("@preserve"in b)return b["@preserve"][0];if(C.isValue(b))return b;if(C.isList(b))return b["@list"]=z(b["@list"],M),b;if("@id"in b){const T=b["@id"];if(M.link.hasOwnProperty(T)){const le=M.link[T].indexOf(b);if(-1!==le)return M.link[T][le];M.link[T].push(b)}else M.link[T]=[b]}for(const T in b)"@id"===T&&M.bnodesToClear.includes(b[T])?delete b["@id"]:b[T]=z(b[T],M)}return b}function ee(b,M,T){q.isObject(b)?G.addValue(b,M,T,{propertyIsArray:!0}):b.push(T)}function Y(b,M,T,le){if(!("@id"in T))return!1;const j=b.subjects[T["@id"]];return j&&oe(b,j,M,le)}function B(b,M){const T=M["@value"],le=M["@type"],j=M["@language"],Me=b["@value"]?q.isArray(b["@value"])?b["@value"]:[b["@value"]]:[],ae=b["@type"]?q.isArray(b["@type"])?b["@type"]:[b["@type"]]:[],xe=b["@language"]?q.isArray(b["@language"])?b["@language"]:[b["@language"]]:[];return 0===Me.length&&0===ae.length&&0===xe.length||!(!Me.includes(T)&&!q.isEmptyObject(Me[0])||!(!le&&0===ae.length||ae.includes(le)||le&&q.isEmptyObject(ae[0]))||!(!j&&0===xe.length||xe.includes(j)||j&&q.isEmptyObject(xe[0])))}je.exports=W,W.frameMergedOrDefault=(b,M,T)=>{const le={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},j=new G.IdentifierIssuer("_:b");E(b,le.graphMap,"@default",j),T.merged&&(le.graphMap["@merged"]=F(le.graphMap),le.graph="@merged"),le.subjects=le.graphMap[le.graph];const Me=[];return W.frame(le,Object.keys(le.subjects).sort(),M,Me),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(le.bnodeMap).filter(ae=>1===le.bnodeMap[ae].length)),T.link={},z(Me,T)},W.frame=(b,M,T,le,j=null)=>{x(T);const Me=b.options,ae={embed:se(T=T[0],Me,"embed"),explicit:se(T,Me,"explicit"),requireAll:se(T,Me,"requireAll")};b.link.hasOwnProperty(b.graph)||(b.link[b.graph]={});const xe=b.link[b.graph],Oe=function k(b,M,T,le){const j={};for(const Me of M){const ae=b.graphMap[b.graph][Me];oe(b,ae,T,le)&&(j[Me]=ae)}return j}(b,M,T,ae),Ve=Object.keys(Oe).sort();for(const Qe of Ve){const Je=Oe[Qe];if(null===j?b.uniqueEmbeds={[b.graph]:{}}:b.uniqueEmbeds[b.graph]=b.uniqueEmbeds[b.graph]||{},"@link"===ae.embed&&Qe in xe){ee(le,j,xe[Qe]);continue}const Ce={"@id":Qe};if(0===Qe.indexOf("_:")&&G.addValue(b.bnodeMap,Qe,Ce,{propertyIsArray:!0}),xe[Qe]=Ce,("@first"===ae.embed||"@last"===ae.embed)&&b.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(b.embedded||!b.uniqueEmbeds[b.graph].hasOwnProperty(Qe)){if(b.embedded&&("@never"===ae.embed||D(Je,b.graph,b.subjectStack))){ee(le,j,Ce);continue}if(b.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&b.uniqueEmbeds[b.graph].hasOwnProperty(Qe)){ee(le,j,Ce);continue}if("@last"===ae.embed&&Qe in b.uniqueEmbeds[b.graph]&&$(b,Qe),b.uniqueEmbeds[b.graph][Qe]={parent:le,property:j},b.subjectStack.push({subject:Je,graph:b.graph}),Qe in b.graphMap){let Be=!1,Ae=null;"@graph"in T?(Ae=T["@graph"][0],Be=!("@merged"===Qe||"@default"===Qe),q.isObject(Ae)||(Ae={})):(Be="@merged"!==b.graph,Ae={}),Be&&W.frame({...b,graph:Qe,embedded:!1},Object.keys(b.graphMap[Qe]).sort(),[Ae],Ce,"@graph")}"@included"in T&&W.frame({...b,embedded:!1},M,T["@included"],Ce,"@included");for(const Be of Object.keys(Je).sort())if(Z(Be)){if(Ce[Be]=G.clone(Je[Be]),"@type"===Be)for(const Ae of Je["@type"])0===Ae.indexOf("_:")&&G.addValue(b.bnodeMap,Ae,Ce,{propertyIsArray:!0})}else if(!ae.explicit||Be in T)for(const Ae of Je[Be]){const ke=Be in T?T[Be]:P(ae);if(C.isList(Ae)){const de=T[Be]&&T[Be][0]&&T[Be][0]["@list"]?T[Be][0]["@list"]:P(ae),Se={"@list":[]};ee(Ce,Be,Se);const rt=Ae["@list"];for(const mt of rt)C.isSubjectReference(mt)?W.frame({...b,embedded:!0},[mt["@id"]],de,Se,"@list"):ee(Se,"@list",G.clone(mt))}else C.isSubjectReference(Ae)?W.frame({...b,embedded:!0},[Ae["@id"]],ke,Ce,Be):B(ke[0],Ae)&&ee(Ce,Be,G.clone(Ae))}for(const Be of Object.keys(T).sort()){if("@type"===Be){if(!q.isObject(T[Be][0])||!("@default"in T[Be][0]))continue}else if(Z(Be))continue;const Ae=T[Be][0]||{};if(!se(Ae,Me,"omitDefault")&&!(Be in Ce)){let de="@null";"@default"in Ae&&(de=G.clone(Ae["@default"])),q.isArray(de)||(de=[de]),Ce[Be]=[{"@preserve":de}]}}for(const Be of Object.keys(T["@reverse"]||{}).sort()){const Ae=T["@reverse"][Be];for(const ke of Object.keys(b.subjects))G.getValues(b.subjects[ke],Be).some(Se=>Se["@id"]===Qe)&&(Ce["@reverse"]=Ce["@reverse"]||{},G.addValue(Ce["@reverse"],Be,[],{propertyIsArray:!0}),W.frame({...b,embedded:!0},[ke],Ae,Ce["@reverse"][Be],j))}ee(le,j,Ce),b.subjectStack.pop()}}},W.cleanupNull=(b,M)=>{if(q.isArray(b))return b.map(le=>W.cleanupNull(le,M)).filter(le=>le);if("@null"===b)return null;if(q.isObject(b)){if("@id"in b){const T=b["@id"];if(M.link.hasOwnProperty(T)){const le=M.link[T].indexOf(b);if(-1!==le)return M.link[T][le];M.link[T].push(b)}else M.link[T]=[b]}for(const T in b)b[T]=W.cleanupNull(b[T],M)}return b}},4814:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(262),q=S(4209),G=S(2831),{REGEX_BCP47:X,addValue:_}=S(9420),{handleEvent:E}=S(2585),{RDF_LIST:F,RDF_FIRST:W,RDF_REST:P,RDF_NIL:D,RDF_TYPE:se,RDF_JSON_LITERAL:x,XSD_BOOLEAN:k,XSD_DOUBLE:oe,XSD_INTEGER:$,XSD_STRING:z}=S(5315),ee={};function Y(B,b,M,T){if(B.termType.endsWith("Node"))return{"@id":B.value};const le={"@value":B.value};if(B.language)B.language.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:B.language}},options:T}),le["@language"]=B.language;else{let j=B.datatype.value;if(j||(j=z),j===x){j="@json";try{le["@value"]=JSON.parse(le["@value"])}catch(Me){throw new C("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:le["@value"],cause:Me})}}if(b){if(j===k)"true"===le["@value"]?le["@value"]=!0:"false"===le["@value"]&&(le["@value"]=!1);else if(G.isNumeric(le["@value"]))if(j===$){const Me=parseInt(le["@value"],10);Me.toFixed(0)===le["@value"]&&(le["@value"]=Me)}else j===oe&&(le["@value"]=parseFloat(le["@value"]));[k,$,oe,z].includes(j)||(le["@type"]=j)}else if("i18n-datatype"===M&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,Me,ae]=j.split(/[#_]/);Me.length>0&&(le["@language"]=Me,Me.match(X)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Me}},options:T})),le["@direction"]=ae}else j!==z&&(le["@type"]=j)}return le}je.exports=ee,ee.fromRDF=function(){var B=Z(function*(b,M){const{useRdfType:T=!1,useNativeTypes:le=!1,rdfDirection:j=null}=M,Me={},ae={"@default":Me},xe={};if(j){if("compound-literal"===j)throw new C("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:j});if("i18n-datatype"!==j)throw new C("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:j})}for(const Qe of b){const Je="DefaultGraph"===Qe.graph.termType?"@default":Qe.graph.value;Je in ae||(ae[Je]={}),"@default"!==Je&&!(Je in Me)&&(Me[Je]={"@id":Je});const Ce=ae[Je],Be=Qe.subject.value,Ae=Qe.predicate.value,ke=Qe.object;Be in Ce||(Ce[Be]={"@id":Be});const de=Ce[Be],Se=ke.termType.endsWith("Node");if(Se&&!(ke.value in Ce)&&(Ce[ke.value]={"@id":ke.value}),Ae===se&&!T&&Se){_(de,"@type",ke.value,{propertyIsArray:!0});continue}const rt=Y(ke,le,j,M);if(_(de,Ae,rt,{propertyIsArray:!0}),Se)if(ke.value===D){const mt=Ce[ke.value];"usages"in mt||(mt.usages=[]),mt.usages.push({node:de,property:Ae,value:rt})}else xe[ke.value]=!(ke.value in xe)&&{node:de,property:Ae,value:rt}}for(const Qe in ae){const Je=ae[Qe];if(!(D in Je))continue;const Ce=Je[D];if(Ce.usages){for(let Be of Ce.usages){let Ae=Be.node,ke=Be.property,de=Be.value;const Se=[],rt=[];let mt=Object.keys(Ae).length;for(;ke===P&&G.isObject(xe[Ae["@id"]])&&G.isArray(Ae[W])&&1===Ae[W].length&&G.isArray(Ae[P])&&1===Ae[P].length&&(3===mt||4===mt&&G.isArray(Ae["@type"])&&1===Ae["@type"].length&&Ae["@type"][0]===F)&&(Se.push(Ae[W][0]),rt.push(Ae["@id"]),Be=xe[Ae["@id"]],Ae=Be.node,ke=Be.property,de=Be.value,mt=Object.keys(Ae).length,q.isBlankNode(Ae)););delete de["@id"],de["@list"]=Se.reverse();for(const qe of rt)delete Je[qe]}delete Ce.usages}}const Oe=[],Ve=Object.keys(Me).sort();for(const Qe of Ve){const Je=Me[Qe];if(Qe in ae){const Ce=Je["@graph"]=[],Be=ae[Qe],Ae=Object.keys(Be).sort();for(const ke of Ae){const de=Be[ke];q.isSubjectReference(de)||Ce.push(de)}}q.isSubjectReference(Je)||Oe.push(Je)}return Oe});return function(b,M){return B.apply(this,arguments)}}()},4209:(je,me,S)=>{"use strict";const Z=S(2831),C={};je.exports=C,C.isSubject=q=>!(!Z.isObject(q)||"@value"in q||"@set"in q||"@list"in q)&&(Object.keys(q).length>1||!("@id"in q)),C.isSubjectReference=q=>Z.isObject(q)&&1===Object.keys(q).length&&"@id"in q,C.isValue=q=>Z.isObject(q)&&"@value"in q,C.isList=q=>Z.isObject(q)&&"@list"in q,C.isGraph=q=>Z.isObject(q)&&"@graph"in q&&1===Object.keys(q).filter(G=>"@id"!==G&&"@index"!==G).length,C.isSimpleGraph=q=>C.isGraph(q)&&!("@id"in q),C.isBlankNode=q=>{if(Z.isObject(q)){if("@id"in q){const G=q["@id"];return!Z.isString(G)||0===G.indexOf("_:")}return 0===Object.keys(q).length||!("@value"in q||"@set"in q||"@list"in q)}return!1}},2130:(je,me,S)=>{var Z=S(9293).default;const C=S(1224),q=S(8666),G=S(9420),X=S(7839),_=G.IdentifierIssuer,E=S(262),F=S(3052),W=S(5426),{expand:P}=S(7336),{flatten:D}=S(9392),{fromRDF:se}=S(4814),{toRDF:x}=S(6397),{frameMergedOrDefault:k,cleanupNull:oe}=S(7031),{isArray:$,isObject:z,isString:ee}=S(2831),{isSubjectReference:Y}=S(4209),{expandIri:B,getInitialContext:b,process:M,processingMode:T}=S(429),{compact:le,compactIri:j}=S(3763),{createNodeMap:Me,createMergedNodeMap:ae,mergeNodeMaps:xe}=S(5096),{logEventHandler:Oe,logWarningEventHandler:Ve,safeEventHandler:Qe,setDefaultEventHandler:Je,setupEventHandler:Ce,strictEventHandler:Be,unhandledEventHandler:Ae}=S(2585),ke=function(Se){const rt={},qe=new F({max:100});function fe(R,{documentLoader:A=Se.documentLoader,...ie}){if(R&&"compactionMap"in R)throw new E('"compactionMap" not supported.',"jsonld.OptionsError");if(R&&"expansionMap"in R)throw new E('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:A},ie,R,{eventHandler:Ce({options:R})})}return Se.compact=function(){var R=Z(function*(A,ie,J){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===A)return null;let He;(J=fe(J,{base:ee(A)?A:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new X({sharedCache:qe})})).link&&(J.skipExpansion=!0),J.compactToRelative||delete J.base,He=J.skipExpansion?A:yield Se.expand(A,J);const Xe=yield Se.processContext(b(J),ie,J);let ue=yield le({activeCtx:Xe,element:He,options:J});J.compactArrays&&!J.graph&&$(ue)?1===ue.length?ue=ue[0]:0===ue.length&&(ue={}):J.graph&&z(ue)&&(ue=[ue]),z(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=G.clone(ie),$(ie)||(ie=[ie]);const te=ie;ie=[];for(let I=0;I<te.length;++I)(!z(te[I])||Object.keys(te[I]).length>0)&&ie.push(te[I]);const U=ie.length>0;if(1===ie.length&&(ie=ie[0]),$(ue)){const I=j({activeCtx:Xe,iri:"@graph",relativeTo:{vocab:!0}}),N=ue;ue={},U&&(ue["@context"]=ie),ue[I]=N}else if(z(ue)&&U){const I=ue;ue={"@context":ie};for(const N in I)ue[N]=I[N]}return ue});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.expand=function(){var R=Z(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const J={},He=[];if("expandContext"in(ie=fe(ie,{keepFreeFloatingNodes:!1,contextResolver:new X({sharedCache:qe})}))){const U=G.clone(ie.expandContext);J.expandContext=z(U)&&"@context"in U?U:{"@context":U},He.push(J.expandContext)}let Xe;if(ee(A)){const U=yield Se.get(A,ie);Xe=U.documentUrl,J.input=U.document,U.contextUrl&&(J.remoteContext={"@context":U.contextUrl},He.push(J.remoteContext))}else J.input=G.clone(A);"base"in ie||(ie.base=Xe||"");let ue=b(ie);for(const U of He)ue=yield M({activeCtx:ue,localCtx:U,options:ie});let te=yield P({activeCtx:ue,element:J.input,options:ie});return z(te)&&"@graph"in te&&1===Object.keys(te).length?te=te["@graph"]:null===te&&(te=[]),$(te)||(te=[te]),te});return function(A,ie){return R.apply(this,arguments)}}(),Se.flatten=function(){var R=Z(function*(A,ie,J){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,J=fe(J,{base:ee(A)?A:"",contextResolver:new X({sharedCache:qe})});const He=yield Se.expand(A,J),Xe=D(He);return null===ie?Xe:(J.graph=!0,J.skipExpansion=!0,yield Se.compact(Xe,ie,J))});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.frame=function(){var R=Z(function*(A,ie,J){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(J=fe(J,{base:ee(A)?A:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new X({sharedCache:qe})}),ee(ie)){const We=yield Se.get(ie,J);if(ie=We.document,We.contextUrl){let Ee=ie["@context"];Ee?$(Ee)?Ee.push(We.contextUrl):Ee=[Ee,We.contextUrl]:Ee=We.contextUrl,ie["@context"]=Ee}}const He=ie&&ie["@context"]||{},Xe=yield Se.processContext(b(J),He,J);J.hasOwnProperty("omitGraph")||(J.omitGraph=T(Xe,1.1)),J.hasOwnProperty("pruneBlankNodeIdentifiers")||(J.pruneBlankNodeIdentifiers=T(Xe,1.1));const ue=yield Se.expand(A,J),te={...J};te.isFrame=!0,te.keepFreeFloatingNodes=!0;const U=yield Se.expand(ie,te),I=Object.keys(ie).map(We=>B(Xe,We,{vocab:!0}));te.merged=!I.includes("@graph"),te.is11=T(Xe,1.1);const N=k(ue,U,te);te.graph=!J.omitGraph,te.skipExpansion=!0,te.link={},te.framing=!0;let he=yield Se.compact(N,He,te);return te.link={},he=oe(he,te),he});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.link=function(){var R=Z(function*(A,ie,J){const He={};return ie&&(He["@context"]=ie),He["@embed"]="@link",Se.frame(A,He,J)});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.normalize=Se.canonize=function(){var R=Z(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=fe(ie,{base:ee(A)?A:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new X({sharedCache:qe})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Xe=W.parse(A);return C.canonize(Xe,ie)}const J={...ie};delete J.format,J.produceGeneralizedRdf=!1;const He=yield Se.toRDF(A,J);return C.canonize(He,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.fromRDF=function(){var R=Z(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=fe(ie,{format:ee(A)?"application/n-quads":void 0});const{format:J}=ie;let{rdfParser:He}=ie;if(J){if(He=He||rt[J],!He)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:J})}else He=()=>A;const Xe=yield He(A);return se(Xe,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.toRDF=function(){var R=Z(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let J;J=(ie=fe(ie,{base:ee(A)?A:"",skipExpansion:!1,contextResolver:new X({sharedCache:qe})})).skipExpansion?A:yield Se.expand(A,ie);const He=x(J,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return W.serialize(He);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return He});return function(A,ie){return R.apply(this,arguments)}}(),Se.createNodeMap=function(){var R=Z(function*(A,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=fe(ie,{base:ee(A)?A:"",contextResolver:new X({sharedCache:qe})});const J=yield Se.expand(A,ie);return ae(J,ie)});return function(A,ie){return R.apply(this,arguments)}}(),Se.merge=function(){var R=Z(function*(A,ie,J){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!$(A))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,J=fe(J,{contextResolver:new X({sharedCache:qe})});const He=yield Promise.all(A.map(We=>{const Ee={...J};return Se.expand(We,Ee)}));let Xe=!0;"mergeNodes"in J&&(Xe=J.mergeNodes);const ue=J.issuer||new _("_:b"),te={"@default":{}};for(let We=0;We<He.length;++We){const Ee=G.relabelBlankNodes(He[We],{issuer:new _("_:b"+We+"-")}),Ue=Xe||0===We?te:{"@default":{}};if(Me(Ee,Ue,"@default",ue),Ue!==te)for(const Ze in Ue){const vt=Ue[Ze];if(!(Ze in te)){te[Ze]=vt;continue}const Nt=te[Ze];for(const wt in vt)wt in Nt||(Nt[wt]=vt[wt])}}const U=xe(te),I=[],N=Object.keys(U).sort();for(let We=0;We<N.length;++We){const Ee=U[N[We]];Y(Ee)||I.push(Ee)}return null===ie?I:(J.graph=!0,J.skipExpansion=!0,yield Se.compact(I,ie,J))});return function(A,ie,J){return R.apply(this,arguments)}}(),Object.defineProperty(Se,"documentLoader",{get:()=>Se._documentLoader,set:R=>Se._documentLoader=R}),Se.documentLoader=function(){var R=Z(function*(A){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:A})});return function(A){return R.apply(this,arguments)}}(),Se.get=function(){var R=Z(function*(A,ie){let J;J="function"==typeof ie.documentLoader?ie.documentLoader:Se.documentLoader;const He=yield J(A);try{if(!He.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(He.document)&&(He.document=JSON.parse(He.document))}catch(Xe){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Xe,remoteDoc:He})}return He});return function(A,ie){return R.apply(this,arguments)}}(),Se.processContext=function(){var R=Z(function*(A,ie,J){return J=fe(J,{base:"",contextResolver:new X({sharedCache:qe})}),null===ie?b(J):(ie=G.clone(ie),z(ie)&&"@context"in ie||(ie={"@context":ie}),M({activeCtx:A,localCtx:ie,options:J}))});return function(A,ie,J){return R.apply(this,arguments)}}(),Se.getContextValue=S(429).getContextValue,Se.documentLoaders={},Se.useDocumentLoader=function(R){if(!(R in Se.documentLoaders))throw new E('Unknown document loader type: "'+R+'"',"jsonld.UnknownDocumentLoader",{type:R});Se.documentLoader=Se.documentLoaders[R].apply(Se,Array.prototype.slice.call(arguments,1))},Se.registerRDFParser=function(R,A){rt[R]=A},Se.unregisterRDFParser=function(R){delete rt[R]},Se.registerRDFParser("application/n-quads",W.parse),Se.registerRDFParser("application/nquads",W.parse),Se.url=S(2051),Se.logEventHandler=Oe,Se.logWarningEventHandler=Ve,Se.safeEventHandler=Qe,Se.setDefaultEventHandler=Je,Se.strictEventHandler=Be,Se.unhandledEventHandler=Ae,Se.util=G,Object.assign(Se,G),Se.promises=Se,Se.RequestQueue=S(4808),Se.JsonLdProcessor=S(1328)(Se),q.setupGlobals(Se),q.setupDocumentLoaders(Se),Se},de=function(){return ke(function(){return de()})};ke(de),je.exports=de},5096:(je,me,S)=>{"use strict";const{isKeyword:Z}=S(429),C=S(4209),q=S(2831),G=S(9420),X=S(262),_={};je.exports=_,_.createMergedNodeMap=(E,F)=>{const W=(F=F||{}).issuer||new G.IdentifierIssuer("_:b"),P={"@default":{}};return _.createNodeMap(E,P,"@default",W),_.mergeNodeMaps(P)},_.createNodeMap=(E,F,W,P,D,se)=>{if(q.isArray(E)){for(const $ of E)_.createNodeMap($,F,W,P,void 0,se);return}if(!q.isObject(E))return void(se&&se.push(E));if(C.isValue(E)){if("@type"in E){let $=E["@type"];0===$.indexOf("_:")&&(E["@type"]=$=P.getId($))}return void(se&&se.push(E))}if(se&&C.isList(E)){const $=[];return _.createNodeMap(E["@list"],F,W,P,D,$),void se.push({"@list":$})}if("@type"in E){const $=E["@type"];for(const z of $)0===z.indexOf("_:")&&P.getId(z)}q.isUndefined(D)&&(D=C.isBlankNode(E)?P.getId(E["@id"]):E["@id"]),se&&se.push({"@id":D});const x=F[W],k=x[D]=x[D]||{};k["@id"]=D;const oe=Object.keys(E).sort();for(let $ of oe){if("@id"===$)continue;if("@reverse"===$){const ee={"@id":D},Y=E["@reverse"];for(const B in Y){const b=Y[B];for(const M of b){let T=M["@id"];C.isBlankNode(M)&&(T=P.getId(T)),_.createNodeMap(M,F,W,P,T),G.addValue(x[T],B,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===$){D in F||(F[D]={}),_.createNodeMap(E[$],F,D,P);continue}if("@included"===$){_.createNodeMap(E[$],F,W,P);continue}if("@type"!==$&&Z($)){if("@index"===$&&$ in k&&(E[$]!==k[$]||E[$]["@id"]!==k[$]["@id"]))throw new X("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:k});k[$]=E[$];continue}const z=E[$];if(0===$.indexOf("_:")&&($=P.getId($)),0!==z.length)for(let ee of z)if("@type"===$&&(ee=0===ee.indexOf("_:")?P.getId(ee):ee),C.isSubject(ee)||C.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const Y=C.isBlankNode(ee)?P.getId(ee["@id"]):ee["@id"];G.addValue(k,$,{"@id":Y},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ee,F,W,P,Y)}else if(C.isValue(ee))G.addValue(k,$,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(C.isList(ee)){const Y=[];_.createNodeMap(ee["@list"],F,W,P,D,Y),ee={"@list":Y},G.addValue(k,$,ee,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ee,F,W,P,D),G.addValue(k,$,ee,{propertyIsArray:!0,allowDuplicate:!1});else G.addValue(k,$,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=E=>{const F={};for(const W of Object.keys(E).sort())for(const P of Object.keys(E[W]).sort()){const D=E[W][P];P in F||(F[P]={"@id":P});const se=F[P];for(const x of Object.keys(D).sort())if(Z(x)&&"@type"!==x)se[x]=G.clone(D[x]);else for(const k of D[x])G.addValue(se,x,G.clone(k),{propertyIsArray:!0,allowDuplicate:!1})}return F},_.mergeNodeMaps=E=>{const F=E["@default"],W=Object.keys(E).sort();for(const P of W){if("@default"===P)continue;const D=E[P];let se=F[P];se?"@graph"in se||(se["@graph"]=[]):F[P]=se={"@id":P,"@graph":[]};const x=se["@graph"];for(const k of Object.keys(D).sort()){const oe=D[k];C.isSubjectReference(oe)||x.push(oe)}}return F}},8666:(je,me,S)=>{"use strict";const Z=S(3120),C={};je.exports=C,C.setupDocumentLoaders=function(q){typeof XMLHttpRequest<"u"&&(q.documentLoaders.xhr=Z,q.useDocumentLoader("xhr"))},C.setupGlobals=function(q){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:q.JsonLdProcessor})}},6397:(je,me,S)=>{"use strict";const{createNodeMap:Z}=S(5096),{isKeyword:C}=S(429),q=S(4209),G=S(3988),X=S(262),_=S(2831),E=S(9420),{handleEvent:F}=S(2585),{RDF_FIRST:W,RDF_REST:P,RDF_NIL:D,RDF_TYPE:se,RDF_JSON_LITERAL:x,RDF_LANGSTRING:k,XSD_BOOLEAN:oe,XSD_DOUBLE:$,XSD_INTEGER:z,XSD_STRING:ee}=S(5315),{isAbsolute:Y}=S(2051),B={};function b(le,j,Me,ae,xe){const Oe=Object.keys(j).sort();for(const Ve of Oe){const Qe=j[Ve],Je=Object.keys(Qe).sort();for(let Ce of Je){const Be=Qe[Ce];if("@type"===Ce)Ce=se;else if(C(Ce))continue;for(const Ae of Be){const ke={termType:Ve.startsWith("_:")?"BlankNode":"NamedNode",value:Ve};if(!Y(Ve)){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ve}},options:xe});continue}const de={termType:Ce.startsWith("_:")?"BlankNode":"NamedNode",value:Ce};if(!Y(Ce)){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ce}},options:xe});continue}if("BlankNode"===de.termType&&!xe.produceGeneralizedRdf){xe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ae.getOldIds().find(rt=>ae.getId(rt)===Ce)}},options:xe});continue}const Se=T(Ae,ae,le,Me,xe.rdfDirection,xe);Se&&le.push({subject:ke,predicate:de,object:Se,graph:Me})}}}}function T(le,j,Me,ae,xe,Oe){const Ve={};if(q.isValue(le)){Ve.termType="Literal",Ve.value=void 0,Ve.datatype={termType:"NamedNode"};let Qe=le["@value"];const Je=le["@type"]||null;if("@json"===Je)Ve.value=G(Qe),Ve.datatype.value=x;else if(_.isBoolean(Qe))Ve.value=Qe.toString(),Ve.datatype.value=Je||oe;else if(_.isDouble(Qe)||Je===$)_.isDouble(Qe)||(Qe=parseFloat(Qe)),Ve.value=Qe.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ve.datatype.value=Je||$;else if(_.isNumber(Qe))Ve.value=Qe.toFixed(0),Ve.datatype.value=Je||z;else if("@direction"in le&&"i18n-datatype"===xe){const Ce=(le["@language"]||"").toLowerCase();Ve.datatype.value=`https://www.w3.org/ns/i18n#${Ce}_${le["@direction"]}`,Ve.value=Qe}else{if("@direction"in le&&"compound-literal"===xe)throw new X("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});if("@direction"in le&&xe)throw new X("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});"@language"in le?("@direction"in le&&!xe&&Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ve.value}},options:Oe}),Ve.value=Qe,Ve.datatype.value=Je||k,Ve.language=le["@language"]):("@direction"in le&&!xe&&Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Ve.value}},options:Oe}),Ve.value=Qe,Ve.datatype.value=Je||ee)}}else if(q.isList(le)){const Qe=function M(le,j,Me,ae,xe,Oe){const Ve={termType:"NamedNode",value:W},Qe={termType:"NamedNode",value:P},Je={termType:"NamedNode",value:D},Ce=le.pop(),Be=Ce?{termType:"BlankNode",value:j.getId()}:Je;let Ae=Be;for(const ke of le){const de=T(ke,j,Me,ae,xe,Oe),Se={termType:"BlankNode",value:j.getId()};Me.push({subject:Ae,predicate:Ve,object:de,graph:ae}),Me.push({subject:Ae,predicate:Qe,object:Se,graph:ae}),Ae=Se}if(Ce){const ke=T(Ce,j,Me,ae,xe,Oe);Me.push({subject:Ae,predicate:Ve,object:ke,graph:ae}),Me.push({subject:Ae,predicate:Qe,object:Je,graph:ae})}return Be}(le["@list"],j,Me,ae,xe,Oe);Ve.termType=Qe.termType,Ve.value=Qe.value}else{const Qe=_.isObject(le)?le["@id"]:le;Ve.termType=Qe.startsWith("_:")?"BlankNode":"NamedNode",Ve.value=Qe}return"NamedNode"!==Ve.termType||Y(Ve.value)?Ve:(Oe.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ve.value}},options:Oe}),null)}je.exports=B,B.toRDF=(le,j)=>{const Me=new E.IdentifierIssuer("_:b"),ae={"@default":{}};Z(le,ae,"@default",Me);const xe=[],Oe=Object.keys(ae).sort();for(const Ve of Oe){let Qe;if("@default"===Ve)Qe={termType:"DefaultGraph",value:""};else{if(!Y(Ve)){j.eventHandler&&F({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ve}},options:j});continue}Qe=Ve.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Qe.value=Ve}b(xe,ae[Ve],Qe,Me,j)}return xe}},2831:je=>{"use strict";const me={};je.exports=me,me.isArray=Array.isArray,me.isBoolean=S=>"boolean"==typeof S||"[object Boolean]"===Object.prototype.toString.call(S),me.isDouble=S=>me.isNumber(S)&&(-1!==String(S).indexOf(".")||Math.abs(S)>=1e21),me.isEmptyObject=S=>me.isObject(S)&&0===Object.keys(S).length,me.isNumber=S=>"number"==typeof S||"[object Number]"===Object.prototype.toString.call(S),me.isNumeric=S=>!isNaN(parseFloat(S))&&isFinite(S),me.isObject=S=>"[object Object]"===Object.prototype.toString.call(S),me.isString=S=>"string"==typeof S||"[object String]"===Object.prototype.toString.call(S),me.isUndefined=S=>typeof S>"u"},2051:(je,me,S)=>{"use strict";const Z=S(2831),C={};je.exports=C,C.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},C.parse=(G,X)=>{const _={},E=C.parsers[X||"full"],F=E.regex.exec(G);let W=E.keys.length;for(;W--;)_[E.keys[W]]=void 0===F[W]?null:F[W];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=C.removeDotSegments(_.path),_},C.prependBase=(G,X)=>{if(null===G||C.isAbsolute(X))return X;(!G||Z.isString(G))&&(G=C.parse(G||""));const _=C.parse(X),E={protocol:G.protocol||""};if(null!==_.authority)E.authority=_.authority,E.path=_.path,E.query=_.query;else if(E.authority=G.authority,""===_.path)E.path=G.path,E.query=null!==_.query?_.query:G.query;else{if(0===_.path.indexOf("/"))E.path=_.path;else{let W=G.path;W=W.substr(0,W.lastIndexOf("/")+1),(W.length>0||G.authority)&&"/"!==W.substr(-1)&&(W+="/"),W+=_.path,E.path=W}E.query=_.query}""!==_.path&&(E.path=C.removeDotSegments(E.path));let F=E.protocol;return null!==E.authority&&(F+="//"+E.authority),F+=E.path,null!==E.query&&(F+="?"+E.query),null!==_.fragment&&(F+="#"+_.fragment),""===F&&(F="./"),F},C.removeBase=(G,X)=>{if(null===G)return X;(!G||Z.isString(G))&&(G=C.parse(G||""));let _="";if(""!==G.href?_+=(G.protocol||"")+"//"+(G.authority||""):X.indexOf("//")&&(_+="//"),0!==X.indexOf(_))return X;const E=C.parse(X.substr(_.length)),F=G.normalizedPath.split("/"),W=E.normalizedPath.split("/"),P=E.fragment||E.query?0:1;for(;F.length>0&&W.length>P&&F[0]===W[0];)F.shift(),W.shift();let D="";if(F.length>0){F.pop();for(let se=0;se<F.length;++se)D+="../"}return D+=W.join("/"),null!==E.query&&(D+="?"+E.query),null!==E.fragment&&(D+="#"+E.fragment),""===D&&(D="./"),D},C.removeDotSegments=G=>{if(0===G.length)return"";const X=G.split("/"),_=[];for(;X.length>0;){const E=X.shift(),F=0===X.length;"."!==E?".."!==E?_.push(E):(_.pop(),F&&_.push("")):F&&_.push("")}return"/"===G[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const q=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;C.isAbsolute=G=>Z.isString(G)&&q.test(G),C.isRelative=G=>Z.isString(G)},9420:(je,me,S)=>{"use strict";const Z=S(4209),C=S(2831),q=S(1224).IdentifierIssuer,G=S(262),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,F=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers_accept="application/ld+json, application/json",D={};function se(x,k){if(C.isArray(k))for(let oe=0;oe<k.length;++oe)k[oe]=se(x,k[oe]);else if(Z.isList(k))k["@list"]=se(x,k["@list"]);else if(C.isObject(k)){Z.isBlankNode(k)&&(k["@id"]=x.getId(k["@id"]));const oe=Object.keys(k).sort();for(let $=0;$<oe.length;++$){const z=oe[$];"@id"!==z&&(k[z]=se(x,k[z]))}}return k}je.exports=D,D.IdentifierIssuer=q,D.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,D.REGEX_KEYWORD=/^@[a-zA-Z]+$/,D.clone=function(x){if(x&&"object"==typeof x){let k;if(C.isArray(x)){k=[];for(let oe=0;oe<x.length;++oe)k[oe]=D.clone(x[oe])}else if(x instanceof Map){k=new Map;for(const[oe,$]of x)k.set(oe,D.clone($))}else if(x instanceof Set){k=new Set;for(const oe of x)k.add(D.clone(oe))}else if(C.isObject(x)){k={};for(const oe in x)k[oe]=D.clone(x[oe])}else k=x.toString();return k}return x},D.asArray=function(x){return Array.isArray(x)?x:[x]},D.buildHeaders=(x={})=>{if(Object.keys(x).some(oe=>"accept"===oe.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers_accept+'" is supported.');return Object.assign({Accept:P_headers_accept},x)},D.parseLinkHeader=x=>{const k={},oe=x.match(_);for(let $=0;$<oe.length;++$){let z=oe[$].match(E);if(!z)continue;const ee={target:z[1]},Y=z[2];for(;z=F.exec(Y);)ee[z[1]]=void 0===z[2]?z[3]:z[2];const B=ee.rel||"";Array.isArray(k[B])?k[B].push(ee):k[B]=k.hasOwnProperty(B)?[k[B],ee]:ee}return k},D.validateTypeValue=(x,k)=>{if(!(C.isString(x)||C.isArray(x)&&x.every(oe=>C.isString(oe)))){if(k&&C.isObject(x))switch(Object.keys(x).length){case 0:return;case 1:if("@default"in x&&D.asArray(x["@default"]).every(oe=>C.isString(oe)))return}throw new G('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:x})}},D.hasProperty=(x,k)=>{if(x.hasOwnProperty(k)){const oe=x[k];return!C.isArray(oe)||oe.length>0}return!1},D.hasValue=(x,k,oe)=>{if(D.hasProperty(x,k)){let $=x[k];const z=Z.isList($);if(C.isArray($)||z){z&&($=$["@list"]);for(let ee=0;ee<$.length;++ee)if(D.compareValues(oe,$[ee]))return!0}else if(!C.isArray(oe))return D.compareValues(oe,$)}return!1},D.addValue=(x,k,oe,$)=>{if("propertyIsArray"in($=$||{})||($.propertyIsArray=!1),"valueIsArray"in $||($.valueIsArray=!1),"allowDuplicate"in $||($.allowDuplicate=!0),"prependValue"in $||($.prependValue=!1),$.valueIsArray)x[k]=oe;else if(C.isArray(oe)){0===oe.length&&$.propertyIsArray&&!x.hasOwnProperty(k)&&(x[k]=[]),$.prependValue&&(oe=oe.concat(x[k]),x[k]=[]);for(let z=0;z<oe.length;++z)D.addValue(x,k,oe[z],$)}else if(x.hasOwnProperty(k)){const z=!$.allowDuplicate&&D.hasValue(x,k,oe);!C.isArray(x[k])&&(!z||$.propertyIsArray)&&(x[k]=[x[k]]),z||($.prependValue?x[k].unshift(oe):x[k].push(oe))}else x[k]=$.propertyIsArray?[oe]:oe},D.getValues=(x,k)=>[].concat(x[k]||[]),D.removeProperty=(x,k)=>{delete x[k]},D.removeValue=(x,k,oe,$)=>{"propertyIsArray"in($=$||{})||($.propertyIsArray=!1);const z=D.getValues(x,k).filter(ee=>!D.compareValues(ee,oe));0===z.length?D.removeProperty(x,k):x[k]=1!==z.length||$.propertyIsArray?z:z[0]},D.relabelBlankNodes=(x,k)=>se((k=k||{}).issuer||new q("_:b"),x),D.compareValues=(x,k)=>!!(x===k||Z.isValue(x)&&Z.isValue(k)&&x["@value"]===k["@value"]&&x["@type"]===k["@type"]&&x["@language"]===k["@language"]&&x["@index"]===k["@index"])||!!(C.isObject(x)&&"@id"in x&&C.isObject(k)&&"@id"in k)&&x["@id"]===k["@id"],D.compareShortestLeast=(x,k)=>x.length<k.length?-1:k.length<x.length?1:x===k?0:x<k?-1:1},3988:je=>{"use strict";je.exports=function me(S){return null===S||"object"!=typeof S||null!=S.toJSON?JSON.stringify(S):Array.isArray(S)?"["+S.reduce((Z,C,q)=>Z+(0===q?"":",")+me(void 0===C||"symbol"==typeof C?null:C),"")+"]":"{"+Object.keys(S).sort().reduce((Z,C,q)=>void 0===S[C]||"symbol"==typeof S[C]?Z:Z+(0===Z.length?"":",")+me(C)+":"+me(S[C]),"")+"}"}},3052:(je,me,S)=>{"use strict";const Z=S(3748),C=Symbol("max"),q=Symbol("length"),G=Symbol("lengthCalculator"),X=Symbol("allowStale"),_=Symbol("maxAge"),E=Symbol("dispose"),F=Symbol("noDisposeOnSet"),W=Symbol("lruList"),P=Symbol("cache"),D=Symbol("updateAgeOnGet"),se=()=>1,k=(B,b,M)=>{const T=B[P].get(b);if(T){const le=T.value;if(oe(B,le)){if(z(B,T),!B[X])return}else M&&(B[D]&&(T.value.now=Date.now()),B[W].unshiftNode(T));return le.value}},oe=(B,b)=>{if(!b||!b.maxAge&&!B[_])return!1;const M=Date.now()-b.now;return b.maxAge?M>b.maxAge:B[_]&&M>B[_]},$=B=>{if(B[q]>B[C])for(let b=B[W].tail;B[q]>B[C]&&null!==b;){const M=b.prev;z(B,b),b=M}},z=(B,b)=>{if(b){const M=b.value;B[E]&&B[E](M.key,M.value),B[q]-=M.length,B[P].delete(M.key),B[W].removeNode(b)}};class ee{constructor(b,M,T,le,j){this.key=b,this.value=M,this.length=T,this.now=le,this.maxAge=j||0}}const Y=(B,b,M,T)=>{let le=M.value;oe(B,le)&&(z(B,M),B[X]||(le=void 0)),le&&b.call(T,le.value,le.key,B)};je.exports=class x{constructor(b){if("number"==typeof b&&(b={max:b}),b||(b={}),b.max&&("number"!=typeof b.max||b.max<0))throw new TypeError("max must be a non-negative number");this[C]=b.max||1/0;const T=b.length||se;if(this[G]="function"!=typeof T?se:T,this[X]=b.stale||!1,b.maxAge&&"number"!=typeof b.maxAge)throw new TypeError("maxAge must be a number");this[_]=b.maxAge||0,this[E]=b.dispose,this[F]=b.noDisposeOnSet||!1,this[D]=b.updateAgeOnGet||!1,this.reset()}set max(b){if("number"!=typeof b||b<0)throw new TypeError("max must be a non-negative number");this[C]=b||1/0,$(this)}get max(){return this[C]}set allowStale(b){this[X]=!!b}get allowStale(){return this[X]}set maxAge(b){if("number"!=typeof b)throw new TypeError("maxAge must be a non-negative number");this[_]=b,$(this)}get maxAge(){return this[_]}set lengthCalculator(b){"function"!=typeof b&&(b=se),b!==this[G]&&(this[G]=b,this[q]=0,this[W].forEach(M=>{M.length=this[G](M.value,M.key),this[q]+=M.length})),$(this)}get lengthCalculator(){return this[G]}get length(){return this[q]}get itemCount(){return this[W].length}rforEach(b,M){M=M||this;for(let T=this[W].tail;null!==T;){const le=T.prev;Y(this,b,T,M),T=le}}forEach(b,M){M=M||this;for(let T=this[W].head;null!==T;){const le=T.next;Y(this,b,T,M),T=le}}keys(){return this[W].toArray().map(b=>b.key)}values(){return this[W].toArray().map(b=>b.value)}reset(){this[E]&&this[W]&&this[W].length&&this[W].forEach(b=>this[E](b.key,b.value)),this[P]=new Map,this[W]=new Z,this[q]=0}dump(){return this[W].map(b=>!oe(this,b)&&{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[W]}set(b,M,T){if((T=T||this[_])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const le=T?Date.now():0,j=this[G](M,b);if(this[P].has(b)){if(j>this[C])return z(this,this[P].get(b)),!1;const xe=this[P].get(b).value;return this[E]&&(this[F]||this[E](b,xe.value)),xe.now=le,xe.maxAge=T,xe.value=M,this[q]+=j-xe.length,xe.length=j,this.get(b),$(this),!0}const Me=new ee(b,M,j,le,T);return Me.length>this[C]?(this[E]&&this[E](b,M),!1):(this[q]+=Me.length,this[W].unshift(Me),this[P].set(b,this[W].head),$(this),!0)}has(b){if(!this[P].has(b))return!1;const M=this[P].get(b).value;return!oe(this,M)}get(b){return k(this,b,!0)}peek(b){return k(this,b,!1)}pop(){const b=this[W].tail;return b?(z(this,b),b.value):null}del(b){z(this,this[P].get(b))}load(b){this.reset();const M=Date.now();for(let T=b.length-1;T>=0;T--){const le=b[T],j=le.e||0;if(0===j)this.set(le.k,le.v);else{const Me=j-M;Me>0&&this.set(le.k,le.v,Me)}}}prune(){this[P].forEach((b,M)=>k(this,M,!1))}}},7376:function(je,me,S){var Z;je=S.nmd(je),function(){var C,_="Expected a function",F="__lodash_hash_undefined__",P="__lodash_placeholder__",b=32,T=128,Ce=1/0,Be=9007199254740991,de=4294967295,mt=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",b],["partialRight",64],["rearg",256]],qe="[object Arguments]",fe="[object Array]",A="[object Boolean]",ie="[object Date]",He="[object Error]",Xe="[object Function]",ue="[object GeneratorFunction]",te="[object Map]",U="[object Number]",N="[object Object]",he="[object Promise]",Ee="[object RegExp]",Ue="[object Set]",Ze="[object String]",vt="[object Symbol]",wt="[object WeakMap]",pe="[object ArrayBuffer]",H="[object DataView]",ne="[object Float32Array]",Le="[object Float64Array]",tt="[object Int8Array]",lt="[object Int16Array]",xt="[object Int32Array]",an="[object Uint8Array]",kn="[object Uint8ClampedArray]",zn="[object Uint16Array]",Cn="[object Uint32Array]",xn=/\b__p \+= '';/g,Pi=/\b(__p \+=) '' \+/g,aa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hr=/&(?:amp|lt|gt|quot|#39);/g,zs=/[&<>"']/g,go=RegExp(hr.source),Xi=RegExp(zs.source),Hr=/<%-([\s\S]+?)%>/g,mo=/<%([\s\S]+?)%>/g,dl=/<%=([\s\S]+?)%>/g,ic=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rc=/^\w*$/,rc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/[\\^$.*+?()[\]{}|]/g,Ke=RegExp(Ge.source),Gt=/^\s+/,At=/\s/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fr=/\{\n\/\* \[wrapped with (.+)\] \*/,gs=/,? & /,sc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qt=/[()=,{}\[\]\/\s]/,Ra=/\\(\\)?/g,nr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oa=/\w*$/,gn=/^[-+]0x[0-9a-f]+$/i,ti=/^0b[01]+$/i,Gs=/^\[object .+?Constructor\]$/,Xt=/^0o[0-7]+$/i,eo=/^(?:0|[1-9]\d*)$/,ms=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,St=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",ge="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",nn="A-Z\\xc0-\\xd6\\xd8-\\xde",An="\\ufe0e\\ufe0f",Pn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_o="["+Te+"]",di="["+Pn+"]",Na="["+ge+"]",ii="\\d+",Os="["+Pe+"]",su="["+$e+"]",ou="[^"+Te+Pn+ii+Pe+$e+nn+"]",$n="\\ud83c[\\udffb-\\udfff]",au="[^"+Te+"]",Ns="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+nn+"]",_t="(?:"+su+"|"+ou+")",Vt="(?:"+ze+"|"+ou+")",rn="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",zr="(?:"+Na+"|"+$n+")?",Gr="["+An+"]?",yo=Gr+zr+"(?:\\u200d(?:"+[au,Ns,De].join("|")+")"+Gr+zr+")*",Rn="(?:"+[Os,Ns,De].join("|")+")"+yo,kF="(?:"+[au+Na+"?",Na,Ns,De,_o].join("|")+")",BF=RegExp("['\u2019]","g"),jF=RegExp(Na,"g"),Lb=RegExp($n+"(?="+$n+")|"+kF+yo,"g"),UF=RegExp([ze+"?"+su+"+"+rn+"(?="+[di,ze,"$"].join("|")+")",Vt+"+"+Qn+"(?="+[di,ze+_t,"$"].join("|")+")",ze+"?"+_t+"+"+rn,ze+"+"+Qn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ii,Rn].join("|"),"g"),It=RegExp("[\\u200d"+Te+ge+An+"]"),VF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ir=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cp=-1,rr={};rr[ne]=rr[Le]=rr[tt]=rr[lt]=rr[xt]=rr[an]=rr[kn]=rr[zn]=rr[Cn]=!0,rr[qe]=rr[fe]=rr[pe]=rr[A]=rr[H]=rr[ie]=rr[He]=rr[Xe]=rr[te]=rr[U]=rr[N]=rr[Ee]=rr[Ue]=rr[Ze]=rr[wt]=!1;var Wi={};Wi[qe]=Wi[fe]=Wi[pe]=Wi[H]=Wi[A]=Wi[ie]=Wi[ne]=Wi[Le]=Wi[tt]=Wi[lt]=Wi[xt]=Wi[te]=Wi[U]=Wi[N]=Wi[Ee]=Wi[Ue]=Wi[Ze]=Wi[vt]=Wi[an]=Wi[kn]=Wi[zn]=Wi[Cn]=!0,Wi[He]=Wi[Xe]=Wi[wt]=!1;var w_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fb=parseFloat,sC=parseInt,Et="object"==typeof global&&global&&global.Object===Object&&global,x_="object"==typeof self&&self&&self.Object===Object&&self,Zr=Et||x_||Function("return this")(),E_=me&&!me.nodeType&&me,cu=E_&&je&&!je.nodeType&&je,kb=cu&&cu.exports===E_,Th=kb&&Et.process,Pa=function(){try{return cu&&cu.require&&cu.require("util").types||Th&&Th.binding&&Th.binding("util")}catch{}}(),oC=Pa&&Pa.isArrayBuffer,aC=Pa&&Pa.isDate,cC=Pa&&Pa.isMap,Ip=Pa&&Pa.isRegExp,ld=Pa&&Pa.isSet,Dp=Pa&&Pa.isTypedArray;function to(ht,Dt,bt){switch(bt.length){case 0:return ht.call(Dt);case 1:return ht.call(Dt,bt[0]);case 2:return ht.call(Dt,bt[0],bt[1]);case 3:return ht.call(Dt,bt[0],bt[1],bt[2])}return ht.apply(Dt,bt)}function Bb(ht,Dt,bt,Ht){for(var On=-1,yi=null==ht?0:ht.length;++On<yi;){var Br=ht[On];Dt(Ht,Br,bt(Br),ht)}return Ht}function Wr(ht,Dt){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht&&!1!==Dt(ht[bt],bt,ht););return ht}function Mh(ht,Dt){for(var bt=null==ht?0:ht.length;bt--&&!1!==Dt(ht[bt],bt,ht););return ht}function A_(ht,Dt){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht;)if(!Dt(ht[bt],bt,ht))return!1;return!0}function Tn(ht,Dt){for(var bt=-1,Ht=null==ht?0:ht.length,On=0,yi=[];++bt<Ht;){var Br=ht[bt];Dt(Br,bt,ht)&&(yi[On++]=Br)}return yi}function _i(ht,Dt){return!(null==ht||!ht.length)&&Rh(ht,Dt,0)>-1}function jb(ht,Dt,bt){for(var Ht=-1,On=null==ht?0:ht.length;++Ht<On;)if(bt(Dt,ht[Ht]))return!0;return!1}function pr(ht,Dt){for(var bt=-1,Ht=null==ht?0:ht.length,On=Array(Ht);++bt<Ht;)On[bt]=Dt(ht[bt],bt,ht);return On}function hl(ht,Dt){for(var bt=-1,Ht=Dt.length,On=ht.length;++bt<Ht;)ht[On+bt]=Dt[bt];return ht}function Ub(ht,Dt,bt,Ht){var On=-1,yi=null==ht?0:ht.length;for(Ht&&yi&&(bt=ht[++On]);++On<yi;)bt=Dt(bt,ht[On],On,ht);return bt}function lC(ht,Dt,bt,Ht){var On=null==ht?0:ht.length;for(Ht&&On&&(bt=ht[--On]);On--;)bt=Dt(bt,ht[On],On,ht);return bt}function Ih(ht,Dt){for(var bt=-1,Ht=null==ht?0:ht.length;++bt<Ht;)if(Dt(ht[bt],bt,ht))return!0;return!1}var hi=dd("length");function no(ht,Dt,bt){var Ht;return bt(ht,function(On,yi,Br){if(Dt(On,yi,Br))return Ht=yi,!1}),Ht}function Dh(ht,Dt,bt,Ht){for(var On=ht.length,yi=bt+(Ht?1:-1);Ht?yi--:++yi<On;)if(Dt(ht[yi],yi,ht))return yi;return-1}function Rh(ht,Dt,bt){return Dt==Dt?function md(ht,Dt,bt){for(var Ht=bt-1,On=ht.length;++Ht<On;)if(ht[Ht]===Dt)return Ht;return-1}(ht,Dt,bt):Dh(ht,ud,bt)}function HF(ht,Dt,bt,Ht){for(var On=bt-1,yi=ht.length;++On<yi;)if(Ht(ht[On],Dt))return On;return-1}function ud(ht){return ht!=ht}function Rp(ht,Dt){var bt=null==ht?0:ht.length;return bt?Op(ht,Dt)/bt:NaN}function dd(ht){return function(Dt){return null==Dt?C:Dt[ht]}}function C_(ht){return function(Dt){return null==ht?C:ht[Dt]}}function Hb(ht,Dt,bt,Ht,On){return On(ht,function(yi,Br,Ii){bt=Ht?(Ht=!1,yi):Dt(bt,yi,Br,Ii)}),bt}function Op(ht,Dt){for(var bt,Ht=-1,On=ht.length;++Ht<On;){var yi=Dt(ht[Ht]);yi!==C&&(bt=bt===C?yi:bt+yi)}return bt}function fl(ht,Dt){for(var bt=-1,Ht=Array(ht);++bt<ht;)Ht[bt]=Dt(bt);return Ht}function Oc(ht){return ht&&ht.slice(0,Pp(ht)+1).replace(Gt,"")}function $o(ht){return function(Dt){return ht(Dt)}}function ot(ht,Dt){return pr(Dt,function(bt){return ht[bt]})}function hd(ht,Dt){return ht.has(Dt)}function Ot(ht,Dt){for(var bt=-1,Ht=ht.length;++bt<Ht&&Rh(Dt,ht[bt],0)>-1;);return bt}function Oh(ht,Dt){for(var bt=ht.length;bt--&&Rh(Dt,ht[bt],0)>-1;);return bt}var Nh=C_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),hC=C_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function fC(ht){return"\\"+w_[ht]}function fd(ht){return It.test(ht)}function gd(ht){var Dt=-1,bt=Array(ht.size);return ht.forEach(function(Ht,On){bt[++Dt]=[On,Ht]}),bt}function zb(ht,Dt){return function(bt){return ht(Dt(bt))}}function vo(ht,Dt){for(var bt=-1,Ht=ht.length,On=0,yi=[];++bt<Ht;){var Br=ht[bt];(Br===Dt||Br===P)&&(ht[bt]=P,yi[On++]=bt)}return yi}function Np(ht){var Dt=-1,bt=Array(ht.size);return ht.forEach(function(Ht){bt[++Dt]=Ht}),bt}function Nc(ht){return fd(ht)?function Wb(ht){for(var Dt=Lb.lastIndex=0;Lb.test(ht);)++Dt;return Dt}(ht):hi(ht)}function wo(ht){return fd(ht)?function GF(ht){return ht.match(Lb)||[]}(ht):function S_(ht){return ht.split("")}(ht)}function Pp(ht){for(var Dt=ht.length;Dt--&&At.test(ht.charAt(Dt)););return Dt}var zF=C_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Pc=function ht(Dt){var d,bt=(Dt=null==Dt?Zr:Pc.defaults(Zr.Object(),Dt,Pc.pick(Zr,ir))).Array,Ht=Dt.Date,On=Dt.Error,yi=Dt.Function,Br=Dt.Math,Ii=Dt.Object,_d=Dt.RegExp,La=Dt.String,$t=Dt.TypeError,Lp=bt.prototype,lu=Ii.prototype,Ph=Dt["__core-js_shared__"],pl=yi.prototype.toString,Di=lu.hasOwnProperty,$b=0,Yb=(d=/[^.]+$/.exec(Ph&&Ph.keys&&Ph.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",yd=lu.toString,mC=pl.call(Ii),_C=Zr._,Fa=_d("^"+pl.call(Di).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fp=kb?Dt.Buffer:C,Lc=Dt.Symbol,kp=Dt.Uint8Array,qb=Fp?Fp.allocUnsafe:C,Bp=zb(Ii.getPrototypeOf,Ii),Xb=Ii.create,D_=lu.propertyIsEnumerable,jp=Lp.splice,Kb=Lc?Lc.isConcatSpreadable:C,Lh=Lc?Lc.iterator:C,Zn=Lc?Lc.toStringTag:C,Up=function(){try{var d=Eu(Ii,"defineProperty");return d({},"",{}),d}catch{}}(),yC=Dt.clearTimeout!==Zr.clearTimeout&&Dt.clearTimeout,gr=Ht&&Ht.now!==Zr.Date.now&&Ht.now,Jb=Dt.setTimeout!==Zr.setTimeout&&Dt.setTimeout,Yt=Br.ceil,es=Br.floor,Wn=Ii.getOwnPropertySymbols,ts=Fp?Fp.isBuffer:C,_s=Dt.isFinite,gl=Lp.join,$s=zb(Ii.keys,Ii),$r=Br.max,Ps=Br.min,Vp=Ht.now,vC=Dt.parseInt,Qb=Br.random,Fh=Lp.reverse,R_=Eu(Dt,"DataView"),uu=Eu(Dt,"Map"),Hp=Eu(Dt,"Promise"),Fc=Eu(Dt,"Set"),zp=Eu(Dt,"WeakMap"),du=Eu(Ii,"create"),Gp=zp&&new zp,ml={},Zb=Au(R_),ew=Au(uu),hu=Au(Hp),bC=Au(Fc),O_=Au(zp),fu=Lc?Lc.prototype:C,kh=fu?fu.valueOf:C,Wp=fu?fu.toString:C;function Re(d){if(Ur(d)&&!jn(d)&&!(d instanceof fi)){if(d instanceof xo)return d;if(Di.call(d,"__wrapped__"))return sy(d)}return new xo(d)}var ys=function(){function d(){}return function(p){if(!Nr(p))return{};if(Xb)return Xb(p);d.prototype=p;var v=new d;return d.prototype=C,v}}();function kc(){}function xo(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=C}function fi(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function pu(d){var p=-1,v=null==d?0:d.length;for(this.clear();++p<v;){var K=d[p];this.set(K[0],K[1])}}function la(d){var p=-1,v=null==d?0:d.length;for(this.clear();++p<v;){var K=d[p];this.set(K[0],K[1])}}function jc(d){var p=-1,v=null==d?0:d.length;for(this.clear();++p<v;){var K=d[p];this.set(K[0],K[1])}}function gu(d){var p=-1,v=null==d?0:d.length;for(this.__data__=new jc;++p<v;)this.add(d[p])}function Eo(d){var p=this.__data__=new la(d);this.size=p.size}function Ls(d,p){var v=jn(d),K=!v&&Vc(d),we=!v&&!K&&Hc(d),Fe=!v&&!K&&!we&&za(d),et=v||K||we||Fe,at=et?fl(d.length,La):[],pt=at.length;for(var Rt in d)(p||Di.call(d,Rt))&&(!et||!("length"==Rt||we&&("offset"==Rt||"parent"==Rt)||Fe&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||Io(Rt,pt)))&&at.push(Rt);return at}function Ao(d){var p=d.length;return p?d[Wh(0,p-1)]:C}function wd(d,p){return sf(Mo(d),ua(p,0,d.length))}function Ki(d){return sf(Mo(d))}function is(d,p,v){(v!==C&&!No(d[p],v)||v===C&&!(p in d))&&Ai(d,p,v)}function io(d,p,v){var K=d[p];(!Di.call(d,p)||!No(K,v)||v===C&&!(p in d))&&Ai(d,p,v)}function In(d,p){for(var v=d.length;v--;)if(No(d[v][0],p))return v;return-1}function jh(d,p,v,K){return So(d,function(we,Fe,et){p(K,we,v(we),et)}),K}function L_(d,p){return d&&cc(p,Fs(p),d)}function Ai(d,p,v){"__proto__"==p&&Up?Up(d,p,{configurable:!0,enumerable:!0,value:v,writable:!0}):d[p]=v}function mu(d,p){for(var v=-1,K=p.length,we=bt(K),Fe=null==d;++v<K;)we[v]=Fe?C:Tu(d,p[v]);return we}function ua(d,p,v){return d==d&&(v!==C&&(d=d<=v?d:v),p!==C&&(d=d>=p?d:p)),d}function Yr(d,p,v,K,we,Fe){var et,at=1&p,pt=2&p,Rt=4&p;if(v&&(et=we?v(d,K,we,Fe):v(d)),et!==C)return et;if(!Nr(d))return d;var Pt=jn(d);if(Pt){if(et=function sg(d){var p=d.length,v=new d.constructor(p);return p&&"string"==typeof d[0]&&Di.call(d,"index")&&(v.index=d.index,v.input=d.input),v}(d),!at)return Mo(d,et)}else{var Ut=ar(d),qt=Ut==Xe||Ut==ue;if(Hc(d))return z_(d,at);if(Ut==N||Ut==qe||qt&&!we){if(et=pt||qt?{}:og(d),!at)return pt?function ri(d,p){return cc(d,Ad(d),p)}(d,function xd(d,p){return d&&cc(p,Ks(p),d)}(et,d)):function Mt(d,p){return cc(d,ig(d),p)}(d,L_(et,d))}else{if(!Wi[Ut])return we?d:{};et=function xw(d,p,v){var K=d.constructor;switch(p){case pe:return pw(d);case A:case ie:return new K(+d);case H:return function zC(d,p){var v=p?pw(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.byteLength)}(d,v);case ne:case Le:case tt:case lt:case xt:case an:case kn:case zn:case Cn:return G_(d,v);case te:return new K;case U:case Ze:return new K(d);case Ee:return function GC(d){var p=new d.constructor(d.source,Oa.exec(d));return p.lastIndex=d.lastIndex,p}(d);case Ue:return new K;case vt:return function WC(d){return kh?Ii(kh.call(d)):{}}(d)}}(d,Ut,at)}}Fe||(Fe=new Eo);var fn=Fe.get(d);if(fn)return fn;Fe.set(d,et),Ey(d)?d.forEach(function(Nn){et.add(Yr(Nn,p,v,Nn,d,Fe))}):Rd(d)&&d.forEach(function(Nn,si){et.set(si,Yr(Nn,p,v,si,d,Fe))});var qn=Pt?C:(Rt?pt?Q_:Qh:pt?Ks:Fs)(d);return Wr(qn||d,function(Nn,si){qn&&(Nn=d[si=Nn]),io(et,si,Yr(Nn,p,v,si,d,Fe))}),et}function F_(d,p,v){var K=v.length;if(null==d)return!K;for(d=Ii(d);K--;){var we=v[K],et=d[we];if(et===C&&!(we in d)||!(0,p[we])(et))return!1}return!0}function Uc(d,p,v){if("function"!=typeof d)throw new $t(_);return Do(function(){d.apply(C,v)},p)}function _l(d,p,v,K){var we=-1,Fe=_i,et=!0,at=d.length,pt=[],Rt=p.length;if(!at)return pt;v&&(p=pr(p,$o(v))),K?(Fe=jb,et=!1):p.length>=200&&(Fe=hd,et=!1,p=new gu(p));e:for(;++we<at;){var Pt=d[we],Ut=null==v?Pt:v(Pt);if(Pt=K||0!==Pt?Pt:0,et&&Ut==Ut){for(var qt=Rt;qt--;)if(p[qt]===Ut)continue e;pt.push(Pt)}else Fe(p,Ut,K)||pt.push(Pt)}return pt}Re.templateSettings={escape:Hr,evaluate:mo,interpolate:dl,variable:"",imports:{_:Re}},(Re.prototype=kc.prototype).constructor=Re,(xo.prototype=ys(kc.prototype)).constructor=xo,(fi.prototype=ys(kc.prototype)).constructor=fi,pu.prototype.clear=function xC(){this.__data__=du?du(null):{},this.size=0},pu.prototype.delete=function EC(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},pu.prototype.get=function N_(d){var p=this.__data__;if(du){var v=p[d];return v===F?C:v}return Di.call(p,d)?p[d]:C},pu.prototype.has=function Bc(d){var p=this.__data__;return du?p[d]!==C:Di.call(p,d)},pu.prototype.set=function nw(d,p){var v=this.__data__;return this.size+=this.has(d)?0:1,v[d]=du&&p===C?F:p,this},la.prototype.clear=function bd(){this.__data__=[],this.size=0},la.prototype.delete=function AC(d){var p=this.__data__,v=In(p,d);return!(v<0||(v==p.length-1?p.pop():jp.call(p,v,1),--this.size,0))},la.prototype.get=function SC(d){var p=this.__data__,v=In(p,d);return v<0?C:p[v][1]},la.prototype.has=function ns(d){return In(this.__data__,d)>-1},la.prototype.set=function iw(d,p){var v=this.__data__,K=In(v,d);return K<0?(++this.size,v.push([d,p])):v[K][1]=p,this},jc.prototype.clear=function Bh(){this.size=0,this.__data__={hash:new pu,map:new(uu||la),string:new pu}},jc.prototype.delete=function CC(d){var p=ng(this,d).delete(d);return this.size-=p?1:0,p},jc.prototype.get=function TC(d){return ng(this,d).get(d)},jc.prototype.has=function MC(d){return ng(this,d).has(d)},jc.prototype.set=function IC(d,p){var v=ng(this,d),K=v.size;return v.set(d,p),this.size+=v.size==K?0:1,this},gu.prototype.add=gu.prototype.push=function DC(d){return this.__data__.set(d,F),this},gu.prototype.has=function P_(d){return this.__data__.has(d)},Eo.prototype.clear=function mr(){this.__data__=new la,this.size=0},Eo.prototype.delete=function Wt(d){var p=this.__data__,v=p.delete(d);return this.size=p.size,v},Eo.prototype.get=function wn(d){return this.__data__.get(d)},Eo.prototype.has=function jr(d){return this.__data__.has(d)},Eo.prototype.set=function ka(d,p){var v=this.__data__;if(v instanceof la){var K=v.__data__;if(!uu||K.length<199)return K.push([d,p]),this.size=++v.size,this;v=this.__data__=new jc(K)}return v.set(d,p),this.size=v.size,this};var So=Ri(sr),Bn=Ri(vs,!0);function k_(d,p){var v=!0;return So(d,function(K,we,Fe){return v=!!p(K,we,Fe)}),v}function yl(d,p,v){for(var K=-1,we=d.length;++K<we;){var Fe=d[K],et=p(Fe);if(null!=et&&(at===C?et==et&&!so(et):v(et,at)))var at=et,pt=Fe}return pt}function Vh(d,p){var v=[];return So(d,function(K,we,Fe){p(K,we,Fe)&&v.push(K)}),v}function Or(d,p,v,K,we){var Fe=-1,et=d.length;for(v||(v=JC),we||(we=[]);++Fe<et;){var at=d[Fe];p>0&&v(at)?p>1?Or(at,p-1,v,K,we):hl(we,at):K||(we[we.length]=at)}return we}var Sr=W_(),$p=W_(!0);function sr(d,p){return d&&Sr(d,p,Fs)}function vs(d,p){return d&&$p(d,p,Fs)}function Ed(d,p){return Tn(p,function(v){return hc(d[v])})}function qo(d,p){for(var v=0,K=(p=ja(p,d)).length;null!=d&&v<K;)d=d[pa(p[v++])];return v&&v==K?d:C}function Hh(d,p,v){var K=p(d);return jn(d)?K:hl(K,v(d))}function or(d){return null==d?d===C?"[object Undefined]":"[object Null]":Zn&&Zn in Ii(d)?function ww(d){var p=Di.call(d,Zn),v=d[Zn];try{d[Zn]=C;var K=!0}catch{}var we=yd.call(d);return K&&(p?d[Zn]=v:delete d[Zn]),we}(d):function iy(d){return yd.call(d)}(d)}function zh(d,p){return d>p}function RC(d,p){return null!=d&&Di.call(d,p)}function OC(d,p){return null!=d&&p in Ii(d)}function Yp(d,p,v){for(var K=v?jb:_i,we=d[0].length,Fe=d.length,et=Fe,at=bt(Fe),pt=1/0,Rt=[];et--;){var Pt=d[et];et&&p&&(Pt=pr(Pt,$o(p))),pt=Ps(Pt.length,pt),at[et]=!v&&(p||we>=120&&Pt.length>=120)?new gu(et&&Pt):C}Pt=d[0];var Ut=-1,qt=at[0];e:for(;++Ut<we&&Rt.length<pt;){var fn=Pt[Ut],Dn=p?p(fn):fn;if(fn=v||0!==fn?fn:0,!(qt?hd(qt,Dn):K(Rt,Dn,v))){for(et=Fe;--et;){var qn=at[et];if(!(qn?hd(qn,Dn):K(d[et],Dn,v)))continue e}qt&&qt.push(Dn),Rt.push(fn)}}return Rt}function _u(d,p,v){var K=null==(d=nT(d,p=ja(p,d)))?d:d[pa(ga(p))];return null==K?C:to(K,d,v)}function PC(d){return Ur(d)&&or(d)==qe}function qp(d,p,v,K,we){return d===p||(null==d||null==p||!Ur(d)&&!Ur(p)?d!=d&&p!=p:function YF(d,p,v,K,we,Fe){var et=jn(d),at=jn(p),pt=et?fe:ar(d),Rt=at?fe:ar(p),Pt=(pt=pt==qe?N:pt)==N,Ut=(Rt=Rt==qe?N:Rt)==N,qt=pt==Rt;if(qt&&Hc(d)){if(!Hc(p))return!1;et=!0,Pt=!1}if(qt&&!Pt)return Fe||(Fe=new Eo),et||za(d)?J_(d,p,v,K,we,Fe):function vw(d,p,v,K,we,Fe,et){switch(v){case H:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case pe:return!(d.byteLength!=p.byteLength||!Fe(new kp(d),new kp(p)));case A:case ie:case U:return No(+d,+p);case He:return d.name==p.name&&d.message==p.message;case Ee:case Ze:return d==p+"";case te:var at=gd;case Ue:if(at||(at=Np),d.size!=p.size&&!(1&K))return!1;var Rt=et.get(d);if(Rt)return Rt==p;K|=2,et.set(d,p);var Pt=J_(at(d),at(p),K,we,Fe,et);return et.delete(d),Pt;case vt:if(kh)return kh.call(d)==kh.call(p)}return!1}(d,p,pt,v,K,we,Fe);if(!(1&v)){var fn=Pt&&Di.call(d,"__wrapped__"),Dn=Ut&&Di.call(p,"__wrapped__");if(fn||Dn){var qn=fn?d.value():d,Nn=Dn?p.value():p;return Fe||(Fe=new Eo),we(qn,Nn,v,K,Fe)}}return!!qt&&(Fe||(Fe=new Eo),function bw(d,p,v,K,we,Fe){var et=1&v,at=Qh(d),pt=at.length;if(pt!=Qh(p).length&&!et)return!1;for(var Ut=pt;Ut--;){var qt=at[Ut];if(!(et?qt in p:Di.call(p,qt)))return!1}var fn=Fe.get(d),Dn=Fe.get(p);if(fn&&Dn)return fn==p&&Dn==d;var qn=!0;Fe.set(d,p),Fe.set(p,d);for(var Nn=et;++Ut<pt;){var si=d[qt=at[Ut]],pi=p[qt];if(K)var Lo=et?K(pi,si,qt,p,d,Fe):K(si,pi,qt,d,p,Fe);if(!(Lo===C?si===pi||we(si,pi,v,K,Fe):Lo)){qn=!1;break}Nn||(Nn="constructor"==qt)}if(qn&&!Nn){var mn=d.constructor,Kt=p.constructor;mn!=Kt&&"constructor"in d&&"constructor"in p&&!("function"==typeof mn&&mn instanceof mn&&"function"==typeof Kt&&Kt instanceof Kt)&&(qn=!1)}return Fe.delete(d),Fe.delete(p),qn}(d,p,v,K,we,Fe))}(d,p,v,K,qp,we))}function rw(d,p,v,K){var we=v.length,Fe=we,et=!K;if(null==d)return!Fe;for(d=Ii(d);we--;){var at=v[we];if(et&&at[2]?at[1]!==d[at[0]]:!(at[0]in d))return!1}for(;++we<Fe;){var pt=(at=v[we])[0],Rt=d[pt],Pt=at[1];if(et&&at[2]){if(Rt===C&&!(pt in d))return!1}else{var Ut=new Eo;if(K)var qt=K(Rt,Pt,pt,d,p,Ut);if(!(qt===C?qp(Pt,Rt,3,K,Ut):qt))return!1}}return!0}function LC(d){return!(!Nr(d)||function QC(d){return!!Yb&&Yb in d}(d))&&(hc(d)?Fa:Gs).test(Au(d))}function FC(d){return"function"==typeof d?d:null==d?Ji:"object"==typeof d?jn(d)?jC(d[0],d[1]):BC(d):Nx(d)}function Xp(d){if(!ag(d))return $s(d);var p=[];for(var v in Ii(d))Di.call(d,v)&&"constructor"!=v&&p.push(v);return p}function ow(d,p){return d<p}function kC(d,p){var v=-1,K=Xs(d)?bt(d.length):[];return So(d,function(we,Fe,et){K[++v]=p(we,Fe,et)}),K}function BC(d){var p=Z_(d);return 1==p.length&&p[0][2]?cg(p[0][0],p[0][1]):function(v){return v===d||rw(v,d,p)}}function jC(d,p){return ey(d)&&eT(p)?cg(pa(d),p):function(v){var K=Tu(v,d);return K===C&&K===p?Ig(v,d):qp(p,K,3)}}function Gh(d,p,v,K,we){d!==p&&Sr(p,function(Fe,et){if(we||(we=new Eo),Nr(Fe))!function aw(d,p,v,K,we,Fe,et){var at=lg(d,v),pt=lg(p,v),Rt=et.get(pt);if(Rt)is(d,v,Rt);else{var Pt=Fe?Fe(at,pt,v+"",d,p,et):C,Ut=Pt===C;if(Ut){var qt=jn(pt),fn=!qt&&Hc(pt),Dn=!qt&&!fn&&za(pt);Pt=pt,qt||fn||Dn?jn(at)?Pt=at:cr(at)?Pt=Mo(at):fn?(Ut=!1,Pt=z_(pt,!0)):Dn?(Ut=!1,Pt=G_(pt,!0)):Pt=[]:xl(pt)||Vc(pt)?(Pt=at,Vc(at)?Pt=dx(at):(!Nr(at)||hc(at))&&(Pt=og(pt))):Ut=!1}Ut&&(et.set(pt,Pt),we(Pt,pt,K,Fe,et),et.delete(pt)),is(d,v,Pt)}}(d,p,et,v,Gh,K,we);else{var at=K?K(lg(d,et),Fe,et+"",d,p,we):C;at===C&&(at=Fe),is(d,et,at)}},Ks)}function Cr(d,p){var v=d.length;if(v)return Io(p+=p<0?v:0,v)?d[p]:C}function j_(d,p,v){p=p.length?pr(p,function(Fe){return jn(Fe)?function(et){return qo(et,1===Fe.length?Fe[0]:Fe)}:Fe}):[Ji];var K=-1;return p=pr(p,$o(En())),function uC(ht,Dt){var bt=ht.length;for(ht.sort(Dt);bt--;)ht[bt]=ht[bt].value;return ht}(kC(d,function(Fe,et,at){return{criteria:pr(p,function(Rt){return Rt(Fe)}),index:++K,value:Fe}}),function(Fe,et){return function $C(d,p,v){for(var K=-1,we=d.criteria,Fe=p.criteria,et=we.length,at=v.length;++K<et;){var pt=wu(we[K],Fe[K]);if(pt)return K>=at?pt:pt*("desc"==v[K]?-1:1)}return d.index-p.index}(Fe,et,v)})}function cw(d,p,v){for(var K=-1,we=p.length,Fe={};++K<we;){var et=p[K],at=qo(d,et);v(at,et)&&$h(Fe,ja(et,d),at)}return Fe}function Kp(d,p,v,K){var we=K?HF:Rh,Fe=-1,et=p.length,at=d;for(d===p&&(p=Mo(p)),v&&(at=pr(d,$o(v)));++Fe<et;)for(var pt=0,Rt=p[Fe],Pt=v?v(Rt):Rt;(pt=we(at,Pt,pt,K))>-1;)at!==d&&jp.call(at,pt,1),jp.call(d,pt,1);return d}function uw(d,p){for(var v=d?p.length:0,K=v-1;v--;){var we=p[v];if(v==K||we!==Fe){var Fe=we;Io(we)?jp.call(d,we,1):V_(d,we)}}return d}function Wh(d,p){return d+es(Qb()*(p-d+1))}function da(d,p){var v="";if(!d||p<1||p>Be)return v;do{p%2&&(v+=d),(p=es(p/2))&&(d+=d)}while(p);return v}function Yn(d,p){return ry(nf(d,p,Ji),d+"")}function dw(d){return Ao(Od(d))}function hw(d,p){var v=Od(d);return sf(v,ua(p,0,v.length))}function $h(d,p,v,K){if(!Nr(d))return d;for(var we=-1,Fe=(p=ja(p,d)).length,et=Fe-1,at=d;null!=at&&++we<Fe;){var pt=pa(p[we]),Rt=v;if("__proto__"===pt||"constructor"===pt||"prototype"===pt)return d;if(we!=et){var Pt=at[pt];(Rt=K?K(Pt,pt,at):C)===C&&(Rt=Nr(Pt)?Pt:Io(p[we+1])?[]:{})}io(at,pt,Rt),at=at[pt]}return d}var HC=Gp?function(d,p){return Gp.set(d,p),d}:Ji,ji=Up?function(d,p){return Up(d,"toString",{configurable:!0,enumerable:!1,value:Py(p),writable:!0})}:Ji;function U_(d){return sf(Od(d))}function Ys(d,p,v){var K=-1,we=d.length;p<0&&(p=-p>we?0:we+p),(v=v>we?we:v)<0&&(v+=we),we=p>v?0:v-p>>>0,p>>>=0;for(var Fe=bt(we);++K<we;)Fe[K]=d[K+p];return Fe}function ro(d,p){var v;return So(d,function(K,we,Fe){return!(v=p(K,we,Fe))}),!!v}function Jp(d,p,v){var K=0,we=null==d?K:d.length;if("number"==typeof p&&p==p&&we<=2147483647){for(;K<we;){var Fe=K+we>>>1,et=d[Fe];null!==et&&!so(et)&&(v?et<=p:et<p)?K=Fe+1:we=Fe}return we}return yu(d,p,Ji,v)}function yu(d,p,v,K){var we=0,Fe=null==d?0:d.length;if(0===Fe)return 0;for(var et=(p=v(p))!=p,at=null===p,pt=so(p),Rt=p===C;we<Fe;){var Pt=es((we+Fe)/2),Ut=v(d[Pt]),qt=Ut!==C,fn=null===Ut,Dn=Ut==Ut,qn=so(Ut);if(et)var Nn=K||Dn;else Nn=Rt?Dn&&(K||qt):at?Dn&&qt&&(K||!fn):pt?Dn&&qt&&!fn&&(K||!qn):!fn&&!qn&&(K?Ut<=p:Ut<p);Nn?we=Pt+1:Fe=Pt}return Ps(Fe,4294967294)}function vu(d,p){for(var v=-1,K=d.length,we=0,Fe=[];++v<K;){var et=d[v],at=p?p(et):et;if(!v||!No(at,pt)){var pt=at;Fe[we++]=0===et?0:et}}return Fe}function Co(d){return"number"==typeof d?d:so(d)?NaN:+d}function Xo(d){if("string"==typeof d)return d;if(jn(d))return pr(d,Xo)+"";if(so(d))return Wp?Wp.call(d):"";var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function ac(d,p,v){var K=-1,we=_i,Fe=d.length,et=!0,at=[],pt=at;if(v)et=!1,we=jb;else if(Fe>=200){var Rt=p?null:q_(d);if(Rt)return Np(Rt);et=!1,we=hd,pt=new gu}else pt=p?[]:at;e:for(;++K<Fe;){var Pt=d[K],Ut=p?p(Pt):Pt;if(Pt=v||0!==Pt?Pt:0,et&&Ut==Ut){for(var qt=pt.length;qt--;)if(pt[qt]===Ut)continue e;p&&pt.push(Ut),at.push(Pt)}else we(pt,Ut,v)||(pt!==at&&pt.push(Ut),at.push(Pt))}return at}function V_(d,p){return null==(d=nT(d,p=ja(p,d)))||delete d[pa(ga(p))]}function Ba(d,p,v,K){return $h(d,p,v(qo(d,p)),K)}function Yh(d,p,v,K){for(var we=d.length,Fe=K?we:-1;(K?Fe--:++Fe<we)&&p(d[Fe],Fe,d););return v?Ys(d,K?0:Fe,K?Fe+1:we):Ys(d,K?Fe+1:0,K?we:Fe)}function fw(d,p){var v=d;return v instanceof fi&&(v=v.value()),Ub(p,function(K,we){return we.func.apply(we.thisArg,hl([K],we.args))},v)}function Qp(d,p,v){var K=d.length;if(K<2)return K?ac(d[0]):[];for(var we=-1,Fe=bt(K);++we<K;)for(var et=d[we],at=-1;++at<K;)at!=we&&(Fe[we]=_l(Fe[we]||et,d[at],p,v));return ac(Or(Fe,1),p,v)}function Zp(d,p,v){for(var K=-1,we=d.length,Fe=p.length,et={};++K<we;)v(et,d[K],K<Fe?p[K]:C);return et}function qh(d){return cr(d)?d:[]}function bu(d){return"function"==typeof d?d:Ji}function ja(d,p){return jn(d)?d:ey(d,p)?[d]:af(Oi(d))}var H_=Yn;function To(d,p,v){var K=d.length;return v=v===C?K:v,!p&&v>=K?d:Ys(d,p,v)}var Ln=yC||function(d){return Zr.clearTimeout(d)};function z_(d,p){if(p)return d.slice();var v=d.length,K=qb?qb(v):new d.constructor(v);return d.copy(K),K}function pw(d){var p=new d.constructor(d.byteLength);return new kp(p).set(new kp(d)),p}function G_(d,p){var v=p?pw(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.length)}function wu(d,p){if(d!==p){var v=d!==C,K=null===d,we=d==d,Fe=so(d),et=p!==C,at=null===p,pt=p==p,Rt=so(p);if(!at&&!Rt&&!Fe&&d>p||Fe&&et&&pt&&!at&&!Rt||K&&et&&pt||!v&&pt||!we)return 1;if(!K&&!Fe&&!Rt&&d<p||Rt&&v&&we&&!K&&!Fe||at&&v&&we||!et&&we||!pt)return-1}return 0}function gw(d,p,v,K){for(var we=-1,Fe=d.length,et=v.length,at=-1,pt=p.length,Rt=$r(Fe-et,0),Pt=bt(pt+Rt),Ut=!K;++at<pt;)Pt[at]=p[at];for(;++we<et;)(Ut||we<Fe)&&(Pt[v[we]]=d[we]);for(;Rt--;)Pt[at++]=d[we++];return Pt}function mw(d,p,v,K){for(var we=-1,Fe=d.length,et=-1,at=v.length,pt=-1,Rt=p.length,Pt=$r(Fe-at,0),Ut=bt(Pt+Rt),qt=!K;++we<Pt;)Ut[we]=d[we];for(var fn=we;++pt<Rt;)Ut[fn+pt]=p[pt];for(;++et<at;)(qt||we<Fe)&&(Ut[fn+v[et]]=d[we++]);return Ut}function Mo(d,p){var v=-1,K=d.length;for(p||(p=bt(K));++v<K;)p[v]=d[v];return p}function cc(d,p,v,K){var we=!v;v||(v={});for(var Fe=-1,et=p.length;++Fe<et;){var at=p[Fe],pt=K?K(v[at],d[at],at,v,d):C;pt===C&&(pt=d[at]),we?Ai(v,at,pt):io(v,at,pt)}return v}function $i(d,p){return function(v,K){var we=jn(v)?Bb:jh,Fe=p?p():{};return we(v,d,En(K,2),Fe)}}function Li(d){return Yn(function(p,v){var K=-1,we=v.length,Fe=we>1?v[we-1]:C,et=we>2?v[2]:C;for(Fe=d.length>3&&"function"==typeof Fe?(we--,Fe):C,et&&rs(v[0],v[1],et)&&(Fe=we<3?C:Fe,we=1),p=Ii(p);++K<we;){var at=v[K];at&&d(p,at,K,Fe)}return p})}function Ri(d,p){return function(v,K){if(null==v)return v;if(!Xs(v))return d(v,K);for(var we=v.length,Fe=p?we:-1,et=Ii(v);(p?Fe--:++Fe<we)&&!1!==K(et[Fe],Fe,et););return v}}function W_(d){return function(p,v,K){for(var we=-1,Fe=Ii(p),et=K(p),at=et.length;at--;){var pt=et[d?at:++we];if(!1===v(Fe[pt],pt,Fe))break}return p}}function Ua(d){return function(p){var v=fd(p=Oi(p))?wo(p):C,K=v?v[0]:p.charAt(0),we=v?To(v,1).join(""):p.slice(1);return K[d]()+we}}function vl(d){return function(p){return Ub(bf(Ax(p).replace(BF,"")),d,"")}}function xu(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var v=ys(d.prototype),K=d.apply(v,p);return Nr(K)?K:v}}function qC(d){return function(p,v,K){var we=Ii(p);if(!Xs(p)){var Fe=En(v,3);p=Fs(p),v=function(at){return Fe(we[at],at,we)}}var et=d(p,v,K);return et>-1?we[Fe?p[et]:et]:C}}function $_(d){return uc(function(p){var v=p.length,K=v,we=xo.prototype.thru;for(d&&p.reverse();K--;){var Fe=p[K];if("function"!=typeof Fe)throw new $t(_);if(we&&!et&&"wrapper"==dc(Fe))var et=new xo([],!0)}for(K=et?K:v;++K<v;){var at=dc(Fe=p[K]),pt="wrapper"==at?ws(Fe):C;et=pt&&ny(pt[0])&&424==pt[1]&&!pt[4].length&&1==pt[9]?et[dc(pt[0])].apply(et,pt[3]):1==Fe.length&&ny(Fe)?et[at]():et.thru(Fe)}return function(){var Rt=arguments,Pt=Rt[0];if(et&&1==Rt.length&&jn(Pt))return et.plant(Pt).value();for(var Ut=0,qt=v?p[Ut].apply(this,Rt):Pt;++Ut<v;)qt=p[Ut].call(this,qt);return qt}})}function bs(d,p,v,K,we,Fe,et,at,pt,Rt){var Pt=p&T,Ut=1&p,qt=2&p,fn=24&p,Dn=512&p,qn=qt?C:xu(d);return function Nn(){for(var si=arguments.length,pi=bt(si),Lo=si;Lo--;)pi[Lo]=arguments[Lo];if(fn)var mn=Si(Nn),Kt=function T_(ht,Dt){for(var bt=ht.length,Ht=0;bt--;)ht[bt]===Dt&&++Ht;return Ht}(pi,mn);if(K&&(pi=gw(pi,K,we,fn)),Fe&&(pi=mw(pi,Fe,et,fn)),si-=Kt,fn&&si<Rt){var Pr=vo(pi,mn);return _w(d,p,bs,Nn.placeholder,v,pi,Pr,at,pt,Rt-si)}var nt=Ut?v:this,gc=qt?nt[d]:d;return si=pi.length,at?pi=function Aw(d,p){for(var v=d.length,K=Ps(p.length,v),we=Mo(d);K--;){var Fe=p[K];d[K]=Io(Fe,v)?we[Fe]:C}return d}(pi,at):Dn&&si>1&&pi.reverse(),Pt&&pt<si&&(pi.length=pt),this&&this!==Zr&&this instanceof Nn&&(gc=qn||xu(gc)),gc.apply(nt,pi)}}function lc(d,p){return function(v,K){return function NC(d,p,v,K){return sr(d,function(we,Fe,et){p(K,v(we),Fe,et)}),K}(v,d,p(K),{})}}function Kh(d,p){return function(v,K){var we;if(v===C&&K===C)return p;if(v!==C&&(we=v),K!==C){if(we===C)return K;"string"==typeof v||"string"==typeof K?(v=Xo(v),K=Xo(K)):(v=Co(v),K=Co(K)),we=d(v,K)}return we}}function Ko(d){return uc(function(p){return p=pr(p,$o(En())),Yn(function(v){var K=this;return d(p,function(we){return to(we,K,v)})})})}function ha(d,p){var v=(p=p===C?" ":Xo(p)).length;if(v<2)return v?da(p,d):p;var K=da(p,Yt(d/Nc(p)));return fd(p)?To(wo(K),0,d).join(""):K.slice(0,d)}function Y_(d){return function(p,v,K){return K&&"number"!=typeof K&&rs(p,v,K)&&(v=K=C),p=fc(p),v===C?(v=p,p=0):v=fc(v),function VC(d,p,v,K){for(var we=-1,Fe=$r(Yt((p-d)/(v||1)),0),et=bt(Fe);Fe--;)et[K?Fe:++we]=d,d+=v;return et}(p,v,K=K===C?p<v?1:-1:fc(K),d)}}function eg(d){return function(p,v){return"string"==typeof p&&"string"==typeof v||(p=ma(p),v=ma(v)),d(p,v)}}function _w(d,p,v,K,we,Fe,et,at,pt,Rt){var Pt=8&p;p|=Pt?b:64,4&(p&=~(Pt?64:b))||(p&=-4);var qn=[d,p,we,Pt?Fe:C,Pt?et:C,Pt?C:Fe,Pt?C:et,at,pt,Rt],Nn=v.apply(C,qn);return ny(d)&&Sw(Nn,qn),Nn.placeholder=K,rf(Nn,d,p)}function Jh(d){var p=Br[d];return function(v,K){if(v=ma(v),(K=null==K?0:Ps(Gn(K),292))&&_s(v)){var we=(Oi(v)+"e").split("e");return+((we=(Oi(p(we[0]+"e"+(+we[1]+K)))+"e").split("e"))[0]+"e"+(+we[1]-K))}return p(v)}}var q_=Fc&&1/Np(new Fc([,-0]))[1]==Ce?function(d){return new Fc(d)}:Rg;function tg(d){return function(p){var v=ar(p);return v==te?gd(p):v==Ue?function bo(ht){var Dt=-1,bt=Array(ht.size);return ht.forEach(function(Ht){bt[++Dt]=[Ht,Ht]}),bt}(p):function dC(ht,Dt){return pr(Dt,function(bt){return[bt,ht[bt]]})}(p,d(p))}}function fa(d,p,v,K,we,Fe,et,at){var pt=2&p;if(!pt&&"function"!=typeof d)throw new $t(_);var Rt=K?K.length:0;if(Rt||(p&=-97,K=we=C),et=et===C?et:$r(Gn(et),0),at=at===C?at:Gn(at),Rt-=we?we.length:0,64&p){var Pt=K,Ut=we;K=we=C}var qt=pt?C:ws(d),fn=[d,p,v,K,we,Pt,Ut,Fe,et,at];if(qt&&function tT(d,p){var v=d[1],K=p[1],we=v|K;if(!(we<131)&&!(K==T&&8==v||K==T&&256==v&&d[7].length<=p[8]||384==K&&p[7].length<=p[8]&&8==v))return d;1&K&&(d[2]=p[2],we|=1&v?0:4);var at=p[3];if(at){var pt=d[3];d[3]=pt?gw(pt,at,p[4]):at,d[4]=pt?vo(d[3],P):p[4]}(at=p[5])&&(d[5]=(pt=d[5])?mw(pt,at,p[6]):at,d[6]=pt?vo(d[5],P):p[6]),(at=p[7])&&(d[7]=at),K&T&&(d[8]=null==d[8]?p[8]:Ps(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=we}(fn,qt),d=fn[0],p=fn[1],v=fn[2],K=fn[3],we=fn[4],!(at=fn[9]=fn[9]===C?pt?0:d.length:$r(fn[9]-Rt,0))&&24&p&&(p&=-25),p&&1!=p)Dn=8==p||16==p?function YC(d,p,v){var K=xu(d);return function we(){for(var Fe=arguments.length,et=bt(Fe),at=Fe,pt=Si(we);at--;)et[at]=arguments[at];var Rt=Fe<3&&et[0]!==pt&&et[Fe-1]!==pt?[]:vo(et,pt);return(Fe-=Rt.length)<v?_w(d,p,bs,we.placeholder,C,et,Rt,C,C,v-Fe):to(this&&this!==Zr&&this instanceof we?K:d,this,et)}}(d,p,at):p!=b&&33!=p||we.length?bs.apply(C,fn):function XC(d,p,v,K){var we=1&p,Fe=xu(d);return function et(){for(var at=-1,pt=arguments.length,Rt=-1,Pt=K.length,Ut=bt(Pt+pt),qt=this&&this!==Zr&&this instanceof et?Fe:d;++Rt<Pt;)Ut[Rt]=K[Rt];for(;pt--;)Ut[Rt++]=arguments[++at];return to(qt,we?v:this,Ut)}}(d,p,v,K);else var Dn=function Xh(d,p,v){var K=1&p,we=xu(d);return function Fe(){return(this&&this!==Zr&&this instanceof Fe?we:d).apply(K?v:this,arguments)}}(d,p,v);return rf((qt?HC:Sw)(Dn,fn),d,p)}function yw(d,p,v,K){return d===C||No(d,lu[v])&&!Di.call(K,v)?p:d}function X_(d,p,v,K,we,Fe){return Nr(d)&&Nr(p)&&(Fe.set(p,d),Gh(d,p,C,X_,Fe),Fe.delete(p)),d}function K_(d){return xl(d)?C:d}function J_(d,p,v,K,we,Fe){var et=1&v,at=d.length,pt=p.length;if(at!=pt&&!(et&&pt>at))return!1;var Rt=Fe.get(d),Pt=Fe.get(p);if(Rt&&Pt)return Rt==p&&Pt==d;var Ut=-1,qt=!0,fn=2&v?new gu:C;for(Fe.set(d,p),Fe.set(p,d);++Ut<at;){var Dn=d[Ut],qn=p[Ut];if(K)var Nn=et?K(qn,Dn,Ut,p,d,Fe):K(Dn,qn,Ut,d,p,Fe);if(Nn!==C){if(Nn)continue;qt=!1;break}if(fn){if(!Ih(p,function(si,pi){if(!hd(fn,pi)&&(Dn===si||we(Dn,si,v,K,Fe)))return fn.push(pi)})){qt=!1;break}}else if(Dn!==qn&&!we(Dn,qn,v,K,Fe)){qt=!1;break}}return Fe.delete(d),Fe.delete(p),qt}function uc(d){return ry(nf(d,C,hg),d+"")}function Qh(d){return Hh(d,Fs,ig)}function Q_(d){return Hh(d,Ks,Ad)}var ws=Gp?function(d){return Gp.get(d)}:Rg;function dc(d){for(var p=d.name+"",v=ml[p],K=Di.call(ml,p)?v.length:0;K--;){var we=v[K],Fe=we.func;if(null==Fe||Fe==d)return we.name}return p}function Si(d){return(Di.call(Re,"placeholder")?Re:d).placeholder}function En(){var d=Re.iteratee||pc;return d=d===pc?FC:d,arguments.length?d(arguments[0],arguments[1]):d}function ng(d,p){var v=d.__data__;return function ty(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?v["string"==typeof p?"string":"hash"]:v.map}function Z_(d){for(var p=Fs(d),v=p.length;v--;){var K=p[v],we=d[K];p[v]=[K,we,eT(we)]}return p}function Eu(d,p){var v=function pC(ht,Dt){return null==ht?C:ht[Dt]}(d,p);return LC(v)?v:C}var ig=Wn?function(d){return null==d?[]:(d=Ii(d),Tn(Wn(d),function(p){return D_.call(d,p)}))}:xf,Ad=Wn?function(d){for(var p=[];d;)hl(p,ig(d)),d=Bp(d);return p}:xf,ar=or;function Zh(d,p,v){for(var K=-1,we=(p=ja(p,d)).length,Fe=!1;++K<we;){var et=pa(p[K]);if(!(Fe=null!=d&&v(d,et)))break;d=d[et]}return Fe||++K!=we?Fe:!!(we=null==d?0:d.length)&&Ag(we)&&Io(et,we)&&(jn(d)||Vc(d))}function og(d){return"function"!=typeof d.constructor||ag(d)?{}:ys(Bp(d))}function JC(d){return jn(d)||Vc(d)||!!(Kb&&d&&d[Kb])}function Io(d,p){var v=typeof d;return!!(p=p??Be)&&("number"==v||"symbol"!=v&&eo.test(d))&&d>-1&&d%1==0&&d<p}function rs(d,p,v){if(!Nr(v))return!1;var K=typeof p;return!!("number"==K?Xs(v)&&Io(p,v.length):"string"==K&&p in v)&&No(v[p],d)}function ey(d,p){if(jn(d))return!1;var v=typeof d;return!("number"!=v&&"symbol"!=v&&"boolean"!=v&&null!=d&&!so(d))||Rc.test(d)||!ic.test(d)||null!=p&&d in Ii(p)}function ny(d){var p=dc(d),v=Re[p];if("function"!=typeof v||!(p in fi.prototype))return!1;if(d===v)return!0;var K=ws(v);return!!K&&d===K[0]}(R_&&ar(new R_(new ArrayBuffer(1)))!=H||uu&&ar(new uu)!=te||Hp&&ar(Hp.resolve())!=he||Fc&&ar(new Fc)!=Ue||zp&&ar(new zp)!=wt)&&(ar=function(d){var p=or(d),v=p==N?d.constructor:C,K=v?Au(v):"";if(K)switch(K){case Zb:return H;case ew:return te;case hu:return he;case bC:return Ue;case O_:return wt}return p});var ZC=Ph?hc:Ld;function ag(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||lu)}function eT(d){return d==d&&!Nr(d)}function cg(d,p){return function(v){return null!=v&&v[d]===p&&(p!==C||d in Ii(v))}}function nf(d,p,v){return p=$r(p===C?d.length-1:p,0),function(){for(var K=arguments,we=-1,Fe=$r(K.length-p,0),et=bt(Fe);++we<Fe;)et[we]=K[p+we];we=-1;for(var at=bt(p+1);++we<p;)at[we]=K[we];return at[p]=v(et),to(d,this,at)}}function nT(d,p){return p.length<2?d:qo(d,Ys(p,0,-1))}function lg(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var Sw=ug(HC),Do=Jb||function(d,p){return Zr.setTimeout(d,p)},ry=ug(ji);function rf(d,p,v){var K=p+"";return ry(d,function Ew(d,p){var v=p.length;if(!v)return d;var K=v-1;return p[K]=(v>1?"& ":"")+p[K],p=p.join(v>2?", ":" "),d.replace(cn,"{\n/* [wrapped with "+p+"] */\n")}(K,function Cw(d,p){return Wr(mt,function(v){var K="_."+v[0];p&v[1]&&!_i(d,K)&&d.push(K)}),d.sort()}(function rg(d){var p=d.match(fr);return p?p[1].split(gs):[]}(K),v)))}function ug(d){var p=0,v=0;return function(){var K=Vp(),we=16-(K-v);if(v=K,we>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(C,arguments)}}function sf(d,p){var v=-1,K=d.length,we=K-1;for(p=p===C?K:p;++v<p;){var Fe=Wh(v,we),et=d[Fe];d[Fe]=d[v],d[v]=et}return d.length=p,d}var af=function ef(d){var p=wg(d,function(K){return 500===v.size&&v.clear(),K}),v=p.cache;return p}(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(rc,function(v,K,we,Fe){p.push(we?Fe.replace(Ra,"$1"):K||v)}),p});function pa(d){if("string"==typeof d||so(d))return d;var p=d+"";return"0"==p&&1/d==-Ce?"-0":p}function Au(d){if(null!=d){try{return pl.call(d)}catch{}try{return d+""}catch{}}return""}function sy(d){if(d instanceof fi)return d.clone();var p=new xo(d.__wrapped__,d.__chain__);return p.__actions__=Mo(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var dg=Yn(function(d,p){return cr(d)?_l(d,Or(p,1,cr,!0)):[]}),Su=Yn(function(d,p){var v=ga(p);return cr(v)&&(v=C),cr(d)?_l(d,Or(p,1,cr,!0),En(v,2)):[]}),rT=Yn(function(d,p){var v=ga(p);return cr(v)&&(v=C),cr(d)?_l(d,Or(p,1,cr,!0),C,v):[]});function Rw(d,p,v){var K=null==d?0:d.length;if(!K)return-1;var we=null==v?0:Gn(v);return we<0&&(we=$r(K+we,0)),Dh(d,En(p,3),we)}function Fi(d,p,v){var K=null==d?0:d.length;if(!K)return-1;var we=K-1;return v!==C&&(we=Gn(v),we=v<0?$r(K+we,0):Ps(we,K-1)),Dh(d,En(p,3),we,!0)}function hg(d){return null!=d&&d.length?Or(d,1):[]}function Nw(d){return d&&d.length?d[0]:C}var fg=Yn(function(d){var p=pr(d,qh);return p.length&&p[0]===d[0]?Yp(p):[]}),Lw=Yn(function(d){var p=ga(d),v=pr(d,qh);return p===ga(v)?p=C:v.pop(),v.length&&v[0]===d[0]?Yp(v,En(p,2)):[]}),oT=Yn(function(d){var p=ga(d),v=pr(d,qh);return(p="function"==typeof p?p:C)&&v.pop(),v.length&&v[0]===d[0]?Yp(v,C,p):[]});function ga(d){var p=null==d?0:d.length;return p?d[p-1]:C}var kw=Yn(Bw);function Bw(d,p){return d&&d.length&&p&&p.length?Kp(d,p):d}var jw=uc(function(d,p){var v=null==d?0:d.length,K=mu(d,p);return uw(d,pr(p,function(we){return Io(we,v)?+we:we}).sort(wu)),K});function Ui(d){return null==d?d:Fh.call(d)}var sk=Yn(function(d){return ac(Or(d,1,cr,!0))}),hT=Yn(function(d){var p=ga(d);return cr(p)&&(p=C),ac(Or(d,1,cr,!0),En(p,2))}),Md=Yn(function(d){var p=ga(d);return p="function"==typeof p?p:C,ac(Or(d,1,cr,!0),C,p)});function cf(d){if(!d||!d.length)return[];var p=0;return d=Tn(d,function(v){if(cr(v))return p=$r(v.length,p),!0}),fl(p,function(v){return pr(d,dd(v))})}function hn(d,p){if(!d||!d.length)return[];var v=cf(d);return null==p?v:pr(v,function(K){return to(p,C,K)})}var pT=Yn(function(d,p){return cr(d)?_l(d,p):[]}),lf=Yn(function(d){return Qp(Tn(d,cr))}),uf=Yn(function(d){var p=ga(d);return cr(p)&&(p=C),Qp(Tn(d,cr),En(p,2))}),gT=Yn(function(d){var p=ga(d);return p="function"==typeof p?p:C,Qp(Tn(d,cr),C,p)}),Ww=Yn(cf),gg=Yn(function(d){var p=d.length,v=p>1?d[p-1]:C;return v="function"==typeof v?(d.pop(),v):C,hn(d,v)});function mg(d){var p=Re(d);return p.__chain__=!0,p}function _g(d,p){return p(d)}var _T=uc(function(d){var p=d.length,v=p?d[0]:0,K=this.__wrapped__,we=function(Fe){return mu(Fe,d)};return!(p>1||this.__actions__.length)&&K instanceof fi&&Io(v)?((K=K.slice(v,+v+(p?1:0))).__actions__.push({func:_g,args:[we],thisArg:C}),new xo(K,this.__chain__).thru(function(Fe){return p&&!Fe.length&&Fe.push(C),Fe})):this.thru(we)}),qs=$i(function(d,p,v){Di.call(d,v)?++d[v]:Ai(d,v,1)}),Kw=qC(Rw),bT=qC(Fi);function Zw(d,p){return(jn(d)?Wr:So)(d,En(p,3))}function uy(d,p){return(jn(d)?Mh:Bn)(d,En(p,3))}var xT=$i(function(d,p,v){Di.call(d,v)?d[v].push(p):Ai(d,v,[p])}),AT=Yn(function(d,p,v){var K=-1,we="function"==typeof p,Fe=Xs(d)?bt(d.length):[];return So(d,function(et){Fe[++K]=we?to(p,et,v):_u(et,p,v)}),Fe}),ST=$i(function(d,p,v){Ai(d,v,p)});function hf(d,p){return(jn(d)?pr:kC)(d,En(p,3))}var tx=$i(function(d,p,v){d[v?0:1].push(p)},function(){return[[],[]]}),IT=Yn(function(d,p){if(null==d)return[];var v=p.length;return v>1&&rs(d,p[0],p[1])?p=[]:v>2&&rs(p[0],p[1],p[2])&&(p=[p[0]]),j_(d,Or(p,1),[])}),ff=gr||function(){return Zr.Date.now()};function dy(d,p,v){return p=v?C:p,fa(d,T,C,C,C,C,p=d&&null==p?d.length:p)}function ox(d,p){var v;if("function"!=typeof p)throw new $t(_);return d=Gn(d),function(){return--d>0&&(v=p.apply(this,arguments)),d<=1&&(p=C),v}}var hy=Yn(function(d,p,v){var K=1;if(v.length){var we=vo(v,Si(hy));K|=b}return fa(d,K,p,v,we)}),DT=Yn(function(d,p,v){var K=3;if(v.length){var we=vo(v,Si(DT));K|=b}return fa(p,K,d,v,we)});function vg(d,p,v){var K,we,Fe,et,at,pt,Rt=0,Pt=!1,Ut=!1,qt=!0;if("function"!=typeof d)throw new $t(_);function fn(Pr){var nt=K,gc=we;return K=we=C,Rt=Pr,et=d.apply(gc,nt)}function Nn(Pr){var nt=Pr-pt;return pt===C||nt>=p||nt<0||Ut&&Pr-Rt>=Fe}function si(){var Pr=ff();if(Nn(Pr))return pi(Pr);at=Do(si,function qn(Pr){var Uy=p-(Pr-pt);return Ut?Ps(Uy,Fe-(Pr-Rt)):Uy}(Pr))}function pi(Pr){return at=C,qt&&K?fn(Pr):(K=we=C,et)}function Kt(){var Pr=ff(),nt=Nn(Pr);if(K=arguments,we=this,pt=Pr,nt){if(at===C)return function Dn(Pr){return Rt=Pr,at=Do(si,p),Pt?fn(Pr):et}(pt);if(Ut)return Ln(at),at=Do(si,p),fn(pt)}return at===C&&(at=Do(si,p)),et}return p=ma(p)||0,Nr(v)&&(Pt=!!v.leading,Fe=(Ut="maxWait"in v)?$r(ma(v.maxWait)||0,p):Fe,qt="trailing"in v?!!v.trailing:qt),Kt.cancel=function Lo(){at!==C&&Ln(at),Rt=0,K=pt=we=at=C},Kt.flush=function mn(){return at===C?et:pi(ff())},Kt}var RT=Yn(function(d,p){return Uc(d,1,p)}),wl=Yn(function(d,p,v){return Uc(d,ma(p)||0,v)});function wg(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new $t(_);var v=function(){var K=arguments,we=p?p.apply(this,K):K[0],Fe=v.cache;if(Fe.has(we))return Fe.get(we);var et=d.apply(this,K);return v.cache=Fe.set(we,et)||Fe,et};return v.cache=new(wg.Cache||jc),v}function pf(d){if("function"!=typeof d)throw new $t(_);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}wg.Cache=jc;var ak=H_(function(d,p){var v=(p=1==p.length&&jn(p[0])?pr(p[0],$o(En())):pr(Or(p,1),$o(En()))).length;return Yn(function(K){for(var we=-1,Fe=Ps(K.length,v);++we<Fe;)K[we]=p[we].call(this,K[we]);return to(d,this,K)})}),Ha=Yn(function(d,p){var v=vo(p,Si(Ha));return fa(d,b,C,p,v)}),gf=Yn(function(d,p){var v=vo(p,Si(gf));return fa(d,64,C,p,v)}),OT=uc(function(d,p){return fa(d,256,C,C,C,p)});function No(d,p){return d===p||d!=d&&p!=p}var Dd=eg(zh),yy=eg(function(d,p){return d>=p}),Vc=PC(function(){return arguments}())?PC:function(d){return Ur(d)&&Di.call(d,"callee")&&!D_.call(d,"callee")},jn=bt.isArray,uk=oC?$o(oC):function WF(d){return Ur(d)&&or(d)==pe};function Xs(d){return null!=d&&Ag(d.length)&&!hc(d)}function cr(d){return Ur(d)&&Xs(d)}var Hc=ts||Ld,FT=aC?$o(aC):function $F(d){return Ur(d)&&or(d)==ie};function by(d){if(!Ur(d))return!1;var p=or(d);return p==He||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!xl(d)}function hc(d){if(!Nr(d))return!1;var p=or(d);return p==Xe||p==ue||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Eg(d){return"number"==typeof d&&d==Gn(d)}function Ag(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Be}function Nr(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Ur(d){return null!=d&&"object"==typeof d}var Rd=cC?$o(cC):function qF(d){return Ur(d)&&ar(d)==te};function yf(d){return"number"==typeof d||Ur(d)&&or(d)==U}function xl(d){if(!Ur(d)||or(d)!=N)return!1;var p=Bp(d);if(null===p)return!0;var v=Di.call(p,"constructor")&&p.constructor;return"function"==typeof v&&v instanceof v&&pl.call(v)==mC}var Cg=Ip?$o(Ip):function XF(d){return Ur(d)&&or(d)==Ee},Ey=ld?$o(ld):function KF(d){return Ur(d)&&ar(d)==Ue};function Cu(d){return"string"==typeof d||!jn(d)&&Ur(d)&&or(d)==Ze}function so(d){return"symbol"==typeof d||Ur(d)&&or(d)==vt}var za=Dp?$o(Dp):function JF(d){return Ur(d)&&Ag(d.length)&&!!rr[or(d)]},Tg=eg(ow),Ay=eg(function(d,p){return d<=p});function Sy(d){if(!d)return[];if(Xs(d))return Cu(d)?wo(d):Mo(d);if(Lh&&d[Lh])return function gC(ht){for(var Dt,bt=[];!(Dt=ht.next()).done;)bt.push(Dt.value);return bt}(d[Lh]());var p=ar(d);return(p==te?gd:p==Ue?Np:Od)(d)}function fc(d){return d?(d=ma(d))===Ce||d===-Ce?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Gn(d){var p=fc(d),v=p%1;return p==p?v?p-v:p:0}function El(d){return d?ua(Gn(d),0,de):0}function ma(d){if("number"==typeof d)return d;if(so(d))return NaN;if(Nr(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Nr(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=Oc(d);var v=ti.test(d);return v||Xt.test(d)?sC(d.slice(2),v?2:8):gn.test(d)?NaN:+d}function dx(d){return cc(d,Ks(d))}function Oi(d){return null==d?"":Xo(d)}var GT=Li(function(d,p){if(ag(p)||Xs(p))cc(p,Fs(p),d);else for(var v in p)Di.call(p,v)&&io(d,v,p[v])}),Po=Li(function(d,p){cc(p,Ks(p),d)}),Jo=Li(function(d,p,v,K){cc(p,Ks(p),d,K)}),WT=Li(function(d,p,v,K){cc(p,Fs(p),d,K)}),$T=uc(mu),XT=Yn(function(d,p){d=Ii(d);var v=-1,K=p.length,we=K>2?p[2]:C;for(we&&rs(p[0],p[1],we)&&(K=1);++v<K;)for(var Fe=p[v],et=Ks(Fe),at=-1,pt=et.length;++at<pt;){var Rt=et[at],Pt=d[Rt];(Pt===C||No(Pt,lu[Rt])&&!Di.call(d,Rt))&&(d[Rt]=Fe[Rt])}return d}),KT=Yn(function(d){return d.push(C,X_),to(Ty,C,d)});function Tu(d,p,v){var K=null==d?C:qo(d,p);return K===C?v:K}function Ig(d,p){return null!=d&&Zh(d,p,OC)}var px=lc(function(d,p,v){null!=p&&"function"!=typeof p.toString&&(p=yd.call(p)),d[p]=v},Py(Ji)),hk=lc(function(d,p,v){null!=p&&"function"!=typeof p.toString&&(p=yd.call(p)),Di.call(d,p)?d[p].push(v):d[p]=[v]},En),fk=Yn(_u);function Fs(d){return Xs(d)?Ls(d):Xp(d)}function Ks(d){return Xs(d)?Ls(d,!0):function sw(d){if(!Nr(d))return function tf(d){var p=[];if(null!=d)for(var v in Ii(d))p.push(v);return p}(d);var p=ag(d),v=[];for(var K in d)"constructor"==K&&(p||!Di.call(d,K))||v.push(K);return v}(d)}var gk=Li(function(d,p,v){Gh(d,p,v)}),Ty=Li(function(d,p,v,K){Gh(d,p,v,K)}),nM=uc(function(d,p){var v={};if(null==d)return v;var K=!1;p=pr(p,function(Fe){return Fe=ja(Fe,d),K||(K=Fe.length>1),Fe}),cc(d,Q_(d),v),K&&(v=Yr(v,7,K_));for(var we=p.length;we--;)V_(v,p[we]);return v}),rM=uc(function(d,p){return null==d?{}:function UC(d,p){return cw(d,p,function(v,K){return Ig(d,K)})}(d,p)});function gx(d,p){if(null==d)return{};var v=pr(Q_(d),function(K){return[K]});return p=En(p),cw(d,v,function(K,we){return p(K,we[0])})}var yx=tg(Fs),vx=tg(Ks);function Od(d){return null==d?[]:ot(d,Fs(d))}var xx=vl(function(d,p,v){return p=p.toLowerCase(),d+(v?Ex(p):p)});function Ex(d){return Oy(Oi(d).toLowerCase())}function Ax(d){return(d=Oi(d))&&d.replace(ms,Nh).replace(jF,"")}var mk=vl(function(d,p,v){return d+(v?"-":"")+p.toLowerCase()}),_k=vl(function(d,p,v){return d+(v?" ":"")+p.toLowerCase()}),vf=Ua("toLowerCase"),gM=vl(function(d,p,v){return d+(v?"_":"")+p.toLowerCase()}),_M=vl(function(d,p,v){return d+(v?" ":"")+Oy(p)}),Ak=vl(function(d,p,v){return d+(v?" ":"")+p.toUpperCase()}),Oy=Ua("toUpperCase");function bf(d,p,v){return d=Oi(d),(p=v?C:p)===C?function pd(ht){return VF.test(ht)}(d)?function Yo(ht){return ht.match(UF)||[]}(d):function Vb(ht){return ht.match(sc)||[]}(d):d.match(p)||[]}var wf=Yn(function(d,p){try{return to(d,C,p)}catch(v){return by(v)?v:new On(v)}}),Ny=uc(function(d,p){return Wr(p,function(v){v=pa(v),Ai(d,v,hy(d[v],d))}),d});function Py(d){return function(){return d}}var Ix=$_(),Nd=$_(!0);function Ji(d){return d}function pc(d){return FC("function"==typeof d?d:Yr(d,1))}var bM=Yn(function(d,p){return function(v){return _u(v,d,p)}}),Ck=Yn(function(d,p){return function(v){return _u(d,v,p)}});function Rx(d,p,v){var K=Fs(p),we=Ed(p,K);null==v&&(!Nr(p)||!we.length&&K.length)&&(v=p,p=d,d=this,we=Ed(p,Fs(p)));var Fe=!(Nr(v)&&"chain"in v&&!v.chain),et=hc(d);return Wr(we,function(at){var pt=p[at];d[at]=pt,et&&(d.prototype[at]=function(){var Rt=this.__chain__;if(Fe||Rt){var Pt=d(this.__wrapped__);return(Pt.__actions__=Mo(this.__actions__)).push({func:pt,args:arguments,thisArg:d}),Pt.__chain__=Rt,Pt}return pt.apply(d,hl([this.value()],arguments))})}),d}function Rg(){}var Al=Ko(pr),Ly=Ko(A_),Fy=Ko(Ih);function Nx(d){return ey(d)?dd(pa(d)):function lw(d){return function(p){return qo(p,d)}}(d)}var ky=Y_(),Px=Y_(!0);function xf(){return[]}function Ld(){return!1}var Fx=Kh(function(d,p){return d+p},0),Ef=Jh("ceil"),Og=Kh(function(d,p){return d/p},1),By=Jh("floor"),jx=Kh(function(d,p){return d*p},1),MM=Jh("round"),Mk=Kh(function(d,p){return d-p},0);return Re.after=function ok(d,p){if("function"!=typeof p)throw new $t(_);return d=Gn(d),function(){if(--d<1)return p.apply(this,arguments)}},Re.ary=dy,Re.assign=GT,Re.assignIn=Po,Re.assignInWith=Jo,Re.assignWith=WT,Re.at=$T,Re.before=ox,Re.bind=hy,Re.bindAll=Ny,Re.bindKey=DT,Re.castArray=function py(){if(!arguments.length)return[];var d=arguments[0];return jn(d)?d:[d]},Re.chain=mg,Re.chunk=function Tw(d,p,v){p=(v?rs(d,p,v):p===C)?1:$r(Gn(p),0);var K=null==d?0:d.length;if(!K||p<1)return[];for(var we=0,Fe=0,et=bt(Yt(K/p));we<K;)et[Fe++]=Ys(d,we,we+=p);return et},Re.compact=function Mw(d){for(var p=-1,v=null==d?0:d.length,K=0,we=[];++p<v;){var Fe=d[p];Fe&&(we[K++]=Fe)}return we},Re.concat=function iT(){var d=arguments.length;if(!d)return[];for(var p=bt(d-1),v=arguments[0],K=d;K--;)p[K-1]=arguments[K];return hl(jn(v)?Mo(v):[v],Or(p,1))},Re.cond=function Tx(d){var p=null==d?0:d.length,v=En();return d=p?pr(d,function(K){if("function"!=typeof K[1])throw new $t(_);return[v(K[0]),K[1]]}):[],Yn(function(K){for(var we=-1;++we<p;){var Fe=d[we];if(to(Fe[0],this,K))return to(Fe[1],this,K)}})},Re.conforms=function Mx(d){return function Uh(d){var p=Fs(d);return function(v){return F_(v,d,p)}}(Yr(d,1))},Re.constant=Py,Re.countBy=qs,Re.create=function qT(d,p){var v=ys(d);return null==p?v:L_(v,p)},Re.curry=function ax(d,p,v){var K=fa(d,8,C,C,C,C,C,p=v?C:p);return K.placeholder=ax.placeholder,K},Re.curryRight=function fy(d,p,v){var K=fa(d,16,C,C,C,C,C,p=v?C:p);return K.placeholder=fy.placeholder,K},Re.debounce=vg,Re.defaults=XT,Re.defaultsDeep=KT,Re.defer=RT,Re.delay=wl,Re.difference=dg,Re.differenceBy=Su,Re.differenceWith=rT,Re.drop=function Iw(d,p,v){var K=null==d?0:d.length;return K?Ys(d,(p=v||p===C?1:Gn(p))<0?0:p,K):[]},Re.dropRight=function Dw(d,p,v){var K=null==d?0:d.length;return K?Ys(d,0,(p=K-(p=v||p===C?1:Gn(p)))<0?0:p):[]},Re.dropRightWhile=function Sd(d,p){return d&&d.length?Yh(d,En(p,3),!0,!0):[]},Re.dropWhile=function Cd(d,p){return d&&d.length?Yh(d,En(p,3),!0):[]},Re.fill=function ss(d,p,v,K){var we=null==d?0:d.length;return we?(v&&"number"!=typeof v&&rs(d,p,v)&&(v=0,K=we),function oc(d,p,v,K){var we=d.length;for((v=Gn(v))<0&&(v=-v>we?0:we+v),(K=K===C||K>we?we:Gn(K))<0&&(K+=we),K=v>K?0:El(K);v<K;)d[v++]=p;return d}(d,p,v,K)):[]},Re.filter=function Xw(d,p){return(jn(d)?Tn:Vh)(d,En(p,3))},Re.flatMap=function Jw(d,p){return Or(hf(d,p),1)},Re.flatMapDeep=function wT(d,p){return Or(hf(d,p),Ce)},Re.flatMapDepth=function Qw(d,p,v){return v=v===C?1:Gn(v),Or(hf(d,p),v)},Re.flatten=hg,Re.flattenDeep=function sT(d){return null!=d&&d.length?Or(d,Ce):[]},Re.flattenDepth=function Ow(d,p){return null!=d&&d.length?Or(d,p=p===C?1:Gn(p)):[]},Re.flip=function bg(d){return fa(d,512)},Re.flow=Ix,Re.flowRight=Nd,Re.fromPairs=function bl(d){for(var p=-1,v=null==d?0:d.length,K={};++p<v;){var we=d[p];K[we[0]]=we[1]}return K},Re.functions=function Mg(d){return null==d?[]:Ed(d,Fs(d))},Re.functionsIn=function zc(d){return null==d?[]:Ed(d,Ks(d))},Re.groupBy=xT,Re.initial=function oy(d){return null!=d&&d.length?Ys(d,0,-1):[]},Re.intersection=fg,Re.intersectionBy=Lw,Re.intersectionWith=oT,Re.invert=px,Re.invertBy=hk,Re.invokeMap=AT,Re.iteratee=pc,Re.keyBy=ST,Re.keys=Fs,Re.keysIn=Ks,Re.map=hf,Re.mapKeys=function Cy(d,p){var v={};return p=En(p,3),sr(d,function(K,we,Fe){Ai(v,p(K,we,Fe),K)}),v},Re.mapValues=function pk(d,p){var v={};return p=En(p,3),sr(d,function(K,we,Fe){Ai(v,we,p(K,we,Fe))}),v},Re.matches=function Dx(d){return BC(Yr(d,1))},Re.matchesProperty=function Sk(d,p){return jC(d,Yr(p,1))},Re.memoize=wg,Re.merge=gk,Re.mergeWith=Ty,Re.method=bM,Re.methodOf=Ck,Re.mixin=Rx,Re.negate=pf,Re.nthArg=function Tk(d){return d=Gn(d),Yn(function(p){return Cr(p,d)})},Re.omit=nM,Re.omitBy=function iM(d,p){return gx(d,pf(En(p)))},Re.once=function Va(d){return ox(2,d)},Re.orderBy=function ex(d,p,v,K){return null==d?[]:(jn(p)||(p=null==p?[]:[p]),jn(v=K?C:v)||(v=null==v?[]:[v]),j_(d,p,v))},Re.over=Al,Re.overArgs=ak,Re.overEvery=Ly,Re.overSome=Fy,Re.partial=Ha,Re.partialRight=gf,Re.partition=tx,Re.pick=rM,Re.pickBy=gx,Re.property=Nx,Re.propertyOf=function Pd(d){return function(p){return null==d?C:qo(d,p)}},Re.pull=kw,Re.pullAll=Bw,Re.pullAllBy=function lT(d,p,v){return d&&d.length&&p&&p.length?Kp(d,p,En(v,2)):d},Re.pullAllWith=function QF(d,p,v){return d&&d.length&&p&&p.length?Kp(d,p,C,v):d},Re.pullAt=jw,Re.range=ky,Re.rangeRight=Px,Re.rearg=OT,Re.reject=function ix(d,p){return(jn(d)?Tn:Vh)(d,pf(En(p,3)))},Re.remove=function Uw(d,p){var v=[];if(!d||!d.length)return v;var K=-1,we=[],Fe=d.length;for(p=En(p,3);++K<Fe;){var et=d[K];p(et,K,d)&&(v.push(et),we.push(K))}return uw(d,we),v},Re.rest=function NT(d,p){if("function"!=typeof d)throw new $t(_);return Yn(d,p=p===C?p:Gn(p))},Re.reverse=Ui,Re.sampleSize=function sx(d,p,v){return p=(v?rs(d,p,v):p===C)?1:Gn(p),(jn(d)?wd:hw)(d,p)},Re.set=function mx(d,p,v){return null==d?d:$h(d,p,v)},Re.setWith=function _x(d,p,v,K){return K="function"==typeof K?K:C,null==d?d:$h(d,p,v,K)},Re.shuffle=function CT(d){return(jn(d)?Ki:U_)(d)},Re.slice=function ZF(d,p,v){var K=null==d?0:d.length;return K?(v&&"number"!=typeof v&&rs(d,p,v)?(p=0,v=K):(p=null==p?0:Gn(p),v=v===C?K:Gn(v)),Ys(d,p,v)):[]},Re.sortBy=IT,Re.sortedUniq=function uT(d){return d&&d.length?vu(d):[]},Re.sortedUniqBy=function dT(d,p){return d&&d.length?vu(d,En(p,2)):[]},Re.split=function mM(d,p,v){return v&&"number"!=typeof v&&rs(d,p,v)&&(p=v=C),(v=v===C?de:v>>>0)?(d=Oi(d))&&("string"==typeof p||null!=p&&!Cg(p))&&!(p=Xo(p))&&fd(d)?To(wo(d),0,v):d.split(p,v):[]},Re.spread=function ck(d,p){if("function"!=typeof d)throw new $t(_);return p=null==p?0:$r(Gn(p),0),Yn(function(v){var K=v[p],we=To(v,0,p);return K&&hl(we,K),to(d,this,we)})},Re.tail=function zw(d){var p=null==d?0:d.length;return p?Ys(d,1,p):[]},Re.take=function tk(d,p,v){return d&&d.length?Ys(d,0,(p=v||p===C?1:Gn(p))<0?0:p):[]},Re.takeRight=function nk(d,p,v){var K=null==d?0:d.length;return K?Ys(d,(p=K-(p=v||p===C?1:Gn(p)))<0?0:p,K):[]},Re.takeRightWhile=function ik(d,p){return d&&d.length?Yh(d,En(p,3),!1,!0):[]},Re.takeWhile=function rk(d,p){return d&&d.length?Yh(d,En(p,3)):[]},Re.tap=function mT(d,p){return p(d),d},Re.throttle=function lk(d,p,v){var K=!0,we=!0;if("function"!=typeof d)throw new $t(_);return Nr(v)&&(K="leading"in v?!!v.leading:K,we="trailing"in v?!!v.trailing:we),vg(d,p,{leading:K,maxWait:p,trailing:we})},Re.thru=_g,Re.toArray=Sy,Re.toPairs=yx,Re.toPairsIn=vx,Re.toPath=function AM(d){return jn(d)?pr(d,pa):so(d)?[d]:Mo(af(Oi(d)))},Re.toPlainObject=dx,Re.transform=function bx(d,p,v){var K=jn(d),we=K||Hc(d)||za(d);if(p=En(p,4),null==v){var Fe=d&&d.constructor;v=we?K?new Fe:[]:Nr(d)&&hc(Fe)?ys(Bp(d)):{}}return(we?Wr:sr)(d,function(et,at,pt){return p(v,et,at,pt)}),v},Re.unary=function xg(d){return dy(d,1)},Re.union=sk,Re.unionBy=hT,Re.unionWith=Md,Re.uniq=function ni(d){return d&&d.length?ac(d):[]},Re.uniqBy=function Gw(d,p){return d&&d.length?ac(d,En(p,2)):[]},Re.uniqWith=function fT(d,p){return p="function"==typeof p?p:C,d&&d.length?ac(d,C,p):[]},Re.unset=function Dg(d,p){return null==d||V_(d,p)},Re.unzip=cf,Re.unzipWith=hn,Re.update=function wx(d,p,v){return null==d?d:Ba(d,p,bu(v))},Re.updateWith=function My(d,p,v,K){return K="function"==typeof K?K:C,null==d?d:Ba(d,p,bu(v),K)},Re.values=Od,Re.valuesIn=function ks(d){return null==d?[]:ot(d,Ks(d))},Re.without=pT,Re.words=bf,Re.wrap=function PT(d,p){return Ha(bu(p),d)},Re.xor=lf,Re.xorBy=uf,Re.xorWith=gT,Re.zip=Ww,Re.zipObject=function $w(d,p){return Zp(d||[],p||[],io)},Re.zipObjectDeep=function pg(d,p){return Zp(d||[],p||[],$h)},Re.zipWith=gg,Re.entries=yx,Re.entriesIn=vx,Re.extend=Po,Re.extendWith=Jo,Rx(Re,Re),Re.add=Fx,Re.attempt=wf,Re.camelCase=xx,Re.capitalize=Ex,Re.ceil=Ef,Re.clamp=function oM(d,p,v){return v===C&&(v=p,p=C),v!==C&&(v=(v=ma(v))==v?v:0),p!==C&&(p=(p=ma(p))==p?p:0),ua(ma(d),p,v)},Re.clone=function gy(d){return Yr(d,4)},Re.cloneDeep=function my(d){return Yr(d,5)},Re.cloneDeepWith=function _y(d,p){return Yr(d,5,p="function"==typeof p?p:C)},Re.cloneWith=function Id(d,p){return Yr(d,4,p="function"==typeof p?p:C)},Re.conformsTo=function mf(d,p){return null==p||F_(d,p,Fs(p))},Re.deburr=Ax,Re.defaultTo=function vM(d,p){return null==d||d!=d?p:d},Re.divide=Og,Re.endsWith=function cM(d,p,v){d=Oi(d),p=Xo(p);var K=d.length,we=v=v===C?K:ua(Gn(v),0,K);return(v-=p.length)>=0&&d.slice(v,we)==p},Re.eq=No,Re.escape=function lM(d){return(d=Oi(d))&&Xi.test(d)?d.replace(zs,hC):d},Re.escapeRegExp=function Sx(d){return(d=Oi(d))&&Ke.test(d)?d.replace(Ge,"\\$&"):d},Re.every=function df(d,p,v){var K=jn(d)?A_:k_;return v&&rs(d,p,v)&&(p=C),K(d,En(p,3))},Re.find=Kw,Re.findIndex=Rw,Re.findKey=function JT(d,p){return no(d,En(p,3),sr)},Re.findLast=bT,Re.findLastIndex=Fi,Re.findLastKey=function hx(d,p){return no(d,En(p,3),vs)},Re.floor=By,Re.forEach=Zw,Re.forEachRight=uy,Re.forIn=function QT(d,p){return null==d?d:Sr(d,En(p,3),Ks)},Re.forInRight=function ZT(d,p){return null==d?d:$p(d,En(p,3),Ks)},Re.forOwn=function eM(d,p){return d&&sr(d,En(p,3))},Re.forOwnRight=function tM(d,p){return d&&vs(d,En(p,3))},Re.get=Tu,Re.gt=Dd,Re.gte=yy,Re.has=function fx(d,p){return null!=d&&Zh(d,p,RC)},Re.hasIn=Ig,Re.head=Nw,Re.identity=Ji,Re.includes=function ET(d,p,v,K){d=Xs(d)?d:Od(d),v=v&&!K?Gn(v):0;var we=d.length;return v<0&&(v=$r(we+v,0)),Cu(d)?v<=we&&d.indexOf(p,v)>-1:!!we&&Rh(d,p,v)>-1},Re.indexOf=function Pw(d,p,v){var K=null==d?0:d.length;if(!K)return-1;var we=null==v?0:Gn(v);return we<0&&(we=$r(K+we,0)),Rh(d,p,we)},Re.inRange=function aM(d,p,v){return p=fc(p),v===C?(v=p,p=0):v=fc(v),function B_(d,p,v){return d>=Ps(p,v)&&d<$r(p,v)}(d=ma(d),p,v)},Re.invoke=fk,Re.isArguments=Vc,Re.isArray=jn,Re.isArrayBuffer=uk,Re.isArrayLike=Xs,Re.isArrayLikeObject=cr,Re.isBoolean=function LT(d){return!0===d||!1===d||Ur(d)&&or(d)==A},Re.isBuffer=Hc,Re.isDate=FT,Re.isElement=function kT(d){return Ur(d)&&1===d.nodeType&&!xl(d)},Re.isEmpty=function vy(d){if(null==d)return!0;if(Xs(d)&&(jn(d)||"string"==typeof d||"function"==typeof d.splice||Hc(d)||za(d)||Vc(d)))return!d.length;var p=ar(d);if(p==te||p==Ue)return!d.size;if(ag(d))return!Xp(d).length;for(var v in d)if(Di.call(d,v))return!1;return!0},Re.isEqual=function cx(d,p){return qp(d,p)},Re.isEqualWith=function BT(d,p,v){var K=(v="function"==typeof v?v:C)?v(d,p):C;return K===C?qp(d,p,C,v):!!K},Re.isError=by,Re.isFinite=function _f(d){return"number"==typeof d&&_s(d)},Re.isFunction=hc,Re.isInteger=Eg,Re.isLength=Ag,Re.isMap=Rd,Re.isMatch=function jT(d,p){return d===p||rw(d,p,Z_(p))},Re.isMatchWith=function Sg(d,p,v){return v="function"==typeof v?v:C,rw(d,p,Z_(p),v)},Re.isNaN=function wy(d){return yf(d)&&d!=+d},Re.isNative=function UT(d){if(ZC(d))throw new On("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return LC(d)},Re.isNil=function xy(d){return null==d},Re.isNull=function lx(d){return null===d},Re.isNumber=yf,Re.isObject=Nr,Re.isObjectLike=Ur,Re.isPlainObject=xl,Re.isRegExp=Cg,Re.isSafeInteger=function ux(d){return Eg(d)&&d>=-Be&&d<=Be},Re.isSet=Ey,Re.isString=Cu,Re.isSymbol=so,Re.isTypedArray=za,Re.isUndefined=function VT(d){return d===C},Re.isWeakMap=function HT(d){return Ur(d)&&ar(d)==wt},Re.isWeakSet=function dk(d){return Ur(d)&&"[object WeakSet]"==or(d)},Re.join=function aT(d,p){return null==d?"":gl.call(d,p)},Re.kebabCase=mk,Re.last=ga,Re.lastIndexOf=function Fw(d,p,v){var K=null==d?0:d.length;if(!K)return-1;var we=K;return v!==C&&(we=(we=Gn(v))<0?$r(K+we,0):Ps(we,K-1)),p==p?function Gb(ht,Dt,bt){for(var Ht=bt+1;Ht--;)if(ht[Ht]===Dt)return Ht;return Ht}(d,p,we):Dh(d,ud,we,!0)},Re.lowerCase=_k,Re.lowerFirst=vf,Re.lt=Tg,Re.lte=Ay,Re.max=function CM(d){return d&&d.length?yl(d,Ji,zh):C},Re.maxBy=function TM(d,p){return d&&d.length?yl(d,En(p,2),zh):C},Re.mean=function jy(d){return Rp(d,Ji)},Re.meanBy=function kx(d,p){return Rp(d,En(p,2))},Re.min=function Mu(d){return d&&d.length?yl(d,Ji,ow):C},Re.minBy=function Bx(d,p){return d&&d.length?yl(d,En(p,2),ow):C},Re.stubArray=xf,Re.stubFalse=Ld,Re.stubObject=function wM(){return{}},Re.stubString=function xM(){return""},Re.stubTrue=function Lx(){return!0},Re.multiply=jx,Re.nth=function cT(d,p){return d&&d.length?Cr(d,Gn(p)):C},Re.noConflict=function Ox(){return Zr._===this&&(Zr._=_C),this},Re.noop=Rg,Re.now=ff,Re.pad=function uM(d,p,v){d=Oi(d);var K=(p=Gn(p))?Nc(d):0;if(!p||K>=p)return d;var we=(p-K)/2;return ha(es(we),v)+d+ha(Yt(we),v)},Re.padEnd=function dM(d,p,v){d=Oi(d);var K=(p=Gn(p))?Nc(d):0;return p&&K<p?d+ha(p-K,v):d},Re.padStart=function hM(d,p,v){d=Oi(d);var K=(p=Gn(p))?Nc(d):0;return p&&K<p?ha(p-K,v)+d:d},Re.parseInt=function Cx(d,p,v){return v||null==p?p=0:p&&(p=+p),vC(Oi(d).replace(Gt,""),p||0)},Re.random=function Iy(d,p,v){if(v&&"boolean"!=typeof v&&rs(d,p,v)&&(p=v=C),v===C&&("boolean"==typeof p?(v=p,p=C):"boolean"==typeof d&&(v=d,d=C)),d===C&&p===C?(d=0,p=1):(d=fc(d),p===C?(p=d,d=0):p=fc(p)),d>p){var K=d;d=p,p=K}if(v||d%1||p%1){var we=Qb();return Ps(d+we*(p-d+Fb("1e-"+((we+"").length-1))),p)}return Wh(d,p)},Re.reduce=function yg(d,p,v){var K=jn(d)?Ub:Hb,we=arguments.length<3;return K(d,En(p,4),v,we,So)},Re.reduceRight=function nx(d,p,v){var K=jn(d)?lC:Hb,we=arguments.length<3;return K(d,En(p,4),v,we,Bn)},Re.repeat=function fM(d,p,v){return p=(v?rs(d,p,v):p===C)?1:Gn(p),da(Oi(d),p)},Re.replace=function pM(){var d=arguments,p=Oi(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Re.result=function sM(d,p,v){var K=-1,we=(p=ja(p,d)).length;for(we||(we=1,d=C);++K<we;){var Fe=null==d?C:d[pa(p[K])];Fe===C&&(K=we,Fe=v),d=hc(Fe)?Fe.call(d):Fe}return d},Re.round=MM,Re.runInContext=ht,Re.sample=function rx(d){return(jn(d)?Ao:dw)(d)},Re.size=function TT(d){if(null==d)return 0;if(Xs(d))return Cu(d)?Nc(d):d.length;var p=ar(d);return p==te||p==Ue?d.size:Xp(d).length},Re.snakeCase=gM,Re.some=function MT(d,p,v){var K=jn(d)?Ih:ro;return v&&rs(d,p,v)&&(p=C),K(d,En(p,3))},Re.sortedIndex=function Vw(d,p){return Jp(d,p)},Re.sortedIndexBy=function ek(d,p,v){return yu(d,p,En(v,2))},Re.sortedIndexOf=function ay(d,p){var v=null==d?0:d.length;if(v){var K=Jp(d,p);if(K<v&&No(d[K],p))return K}return-1},Re.sortedLastIndex=function Ro(d,p){return Jp(d,p,!0)},Re.sortedLastIndexBy=function Hw(d,p,v){return yu(d,p,En(v,2),!0)},Re.sortedLastIndexOf=function Td(d,p){if(null!=d&&d.length){var K=Jp(d,p,!0)-1;if(No(d[K],p))return K}return-1},Re.startCase=_M,Re.startsWith=function yM(d,p,v){return d=Oi(d),v=null==v?0:ua(Gn(v),0,d.length),p=Xo(p),d.slice(v,v+p.length)==p},Re.subtract=Mk,Re.sum=function Ng(d){return d&&d.length?Op(d,Ji):0},Re.sumBy=function IM(d,p){return d&&d.length?Op(d,En(p,2)):0},Re.template=function Dy(d,p,v){var K=Re.templateSettings;v&&rs(d,p,v)&&(p=C),d=Oi(d),p=Jo({},p,K,yw);var at,pt,we=Jo({},p.imports,K.imports,yw),Fe=Fs(we),et=ot(we,Fe),Rt=0,Pt=p.interpolate||St,Ut="__p += '",qt=_d((p.escape||St).source+"|"+Pt.source+"|"+(Pt===dl?nr:St).source+"|"+(p.evaluate||St).source+"|$","g"),fn="//# sourceURL="+(Di.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Cp+"]")+"\n";d.replace(qt,function(Nn,si,pi,Lo,mn,Kt){return pi||(pi=Lo),Ut+=d.slice(Rt,Kt).replace(_e,fC),si&&(at=!0,Ut+="' +\n__e("+si+") +\n'"),mn&&(pt=!0,Ut+="';\n"+mn+";\n__p += '"),pi&&(Ut+="' +\n((__t = ("+pi+")) == null ? '' : __t) +\n'"),Rt=Kt+Nn.length,Nn}),Ut+="';\n";var Dn=Di.call(p,"variable")&&p.variable;if(Dn){if(Qt.test(Dn))throw new On("Invalid `variable` option passed into `_.template`")}else Ut="with (obj) {\n"+Ut+"\n}\n";Ut=(pt?Ut.replace(xn,""):Ut).replace(Pi,"$1").replace(aa,"$1;"),Ut="function("+(Dn||"obj")+") {\n"+(Dn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(at?", __e = _.escape":"")+(pt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ut+"return __p\n}";var qn=wf(function(){return yi(Fe,fn+"return "+Ut).apply(C,et)});if(qn.source=Ut,by(qn))throw qn;return qn},Re.times=function EM(d,p){if((d=Gn(d))<1||d>Be)return[];var v=de,K=Ps(d,de);p=En(p),d-=de;for(var we=fl(K,p);++v<d;)p(v);return we},Re.toFinite=fc,Re.toInteger=Gn,Re.toLength=El,Re.toLower=function yk(d){return Oi(d).toLowerCase()},Re.toNumber=ma,Re.toSafeInteger=function zT(d){return d?ua(Gn(d),-Be,Be):0===d?d:0},Re.toString=Oi,Re.toUpper=function vk(d){return Oi(d).toUpperCase()},Re.trim=function Ry(d,p,v){if((d=Oi(d))&&(v||p===C))return Oc(d);if(!d||!(p=Xo(p)))return d;var K=wo(d),we=wo(p);return To(K,Ot(K,we),Oh(K,we)+1).join("")},Re.trimEnd=function bk(d,p,v){if((d=Oi(d))&&(v||p===C))return d.slice(0,Pp(d)+1);if(!d||!(p=Xo(p)))return d;var K=wo(d);return To(K,0,Oh(K,wo(p))+1).join("")},Re.trimStart=function wk(d,p,v){if((d=Oi(d))&&(v||p===C))return d.replace(Gt,"");if(!d||!(p=Xo(p)))return d;var K=wo(d);return To(K,Ot(K,wo(p))).join("")},Re.truncate=function xk(d,p){var v=30,K="...";if(Nr(p)){var we="separator"in p?p.separator:we;v="length"in p?Gn(p.length):v,K="omission"in p?Xo(p.omission):K}var Fe=(d=Oi(d)).length;if(fd(d)){var et=wo(d);Fe=et.length}if(v>=Fe)return d;var at=v-Nc(K);if(at<1)return K;var pt=et?To(et,0,at).join(""):d.slice(0,at);if(we===C)return pt+K;if(et&&(at+=pt.length-at),Cg(we)){if(d.slice(at).search(we)){var Rt,Pt=pt;for(we.global||(we=_d(we.source,Oi(Oa.exec(we))+"g")),we.lastIndex=0;Rt=we.exec(Pt);)var Ut=Rt.index;pt=pt.slice(0,Ut===C?at:Ut)}}else if(d.indexOf(Xo(we),at)!=at){var qt=pt.lastIndexOf(we);qt>-1&&(pt=pt.slice(0,qt))}return pt+K},Re.unescape=function Ek(d){return(d=Oi(d))&&go.test(d)?d.replace(hr,zF):d},Re.uniqueId=function SM(d){var p=++$b;return Oi(d)+p},Re.upperCase=Ak,Re.upperFirst=Oy,Re.each=Zw,Re.eachRight=uy,Re.first=Nw,Rx(Re,function(){var d={};return sr(Re,function(p,v){Di.call(Re.prototype,v)||(d[v]=p)}),d}(),{chain:!1}),Re.VERSION="4.17.21",Wr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Re[d].placeholder=Re}),Wr(["drop","take"],function(d,p){fi.prototype[d]=function(v){v=v===C?1:$r(Gn(v),0);var K=this.__filtered__&&!p?new fi(this):this.clone();return K.__filtered__?K.__takeCount__=Ps(v,K.__takeCount__):K.__views__.push({size:Ps(v,de),type:d+(K.__dir__<0?"Right":"")}),K},fi.prototype[d+"Right"]=function(v){return this.reverse()[d](v).reverse()}}),Wr(["filter","map","takeWhile"],function(d,p){var v=p+1,K=1==v||3==v;fi.prototype[d]=function(we){var Fe=this.clone();return Fe.__iteratees__.push({iteratee:En(we,3),type:v}),Fe.__filtered__=Fe.__filtered__||K,Fe}}),Wr(["head","last"],function(d,p){var v="take"+(p?"Right":"");fi.prototype[d]=function(){return this[v](1).value()[0]}}),Wr(["initial","tail"],function(d,p){var v="drop"+(p?"":"Right");fi.prototype[d]=function(){return this.__filtered__?new fi(this):this[v](1)}}),fi.prototype.compact=function(){return this.filter(Ji)},fi.prototype.find=function(d){return this.filter(d).head()},fi.prototype.findLast=function(d){return this.reverse().find(d)},fi.prototype.invokeMap=Yn(function(d,p){return"function"==typeof d?new fi(this):this.map(function(v){return _u(v,d,p)})}),fi.prototype.reject=function(d){return this.filter(pf(En(d)))},fi.prototype.slice=function(d,p){d=Gn(d);var v=this;return v.__filtered__&&(d>0||p<0)?new fi(v):(d<0?v=v.takeRight(-d):d&&(v=v.drop(d)),p!==C&&(v=(p=Gn(p))<0?v.dropRight(-p):v.take(p-d)),v)},fi.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},fi.prototype.toArray=function(){return this.take(de)},sr(fi.prototype,function(d,p){var v=/^(?:filter|find|map|reject)|While$/.test(p),K=/^(?:head|last)$/.test(p),we=Re[K?"take"+("last"==p?"Right":""):p],Fe=K||/^find/.test(p);we&&(Re.prototype[p]=function(){var et=this.__wrapped__,at=K?[1]:arguments,pt=et instanceof fi,Rt=at[0],Pt=pt||jn(et),Ut=function(si){var pi=we.apply(Re,hl([si],at));return K&&qt?pi[0]:pi};Pt&&v&&"function"==typeof Rt&&1!=Rt.length&&(pt=Pt=!1);var qt=this.__chain__,Dn=Fe&&!qt,qn=pt&&!this.__actions__.length;if(!Fe&&Pt){et=qn?et:new fi(this);var Nn=d.apply(et,at);return Nn.__actions__.push({func:_g,args:[Ut],thisArg:C}),new xo(Nn,qt)}return Dn&&qn?d.apply(this,at):(Nn=this.thru(Ut),Dn?K?Nn.value()[0]:Nn.value():Nn)})}),Wr(["pop","push","shift","sort","splice","unshift"],function(d){var p=Lp[d],v=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",K=/^(?:pop|shift)$/.test(d);Re.prototype[d]=function(){var we=arguments;if(K&&!this.__chain__){var Fe=this.value();return p.apply(jn(Fe)?Fe:[],we)}return this[v](function(et){return p.apply(jn(et)?et:[],we)})}}),sr(fi.prototype,function(d,p){var v=Re[p];if(v){var K=v.name+"";Di.call(ml,K)||(ml[K]=[]),ml[K].push({name:p,func:v})}}),ml[bs(C,2).name]=[{name:"wrapper",func:C}],fi.prototype.clone=function wC(){var d=new fi(this.__wrapped__);return d.__actions__=Mo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Mo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Mo(this.__views__),d},fi.prototype.reverse=function tw(){if(this.__filtered__){var d=new fi(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},fi.prototype.value=function vd(){var d=this.__wrapped__.value(),p=this.__dir__,v=jn(d),K=p<0,we=v?d.length:0,Fe=function KC(d,p,v){for(var K=-1,we=v.length;++K<we;){var Fe=v[K],et=Fe.size;switch(Fe.type){case"drop":d+=et;break;case"dropRight":p-=et;break;case"take":p=Ps(p,d+et);break;case"takeRight":d=$r(d,p-et)}}return{start:d,end:p}}(0,we,this.__views__),et=Fe.start,at=Fe.end,pt=at-et,Rt=K?at:et-1,Pt=this.__iteratees__,Ut=Pt.length,qt=0,fn=Ps(pt,this.__takeCount__);if(!v||!K&&we==pt&&fn==pt)return fw(d,this.__actions__);var Dn=[];e:for(;pt--&&qt<fn;){for(var qn=-1,Nn=d[Rt+=p];++qn<Ut;){var si=Pt[qn],Lo=si.type,mn=(0,si.iteratee)(Nn);if(2==Lo)Nn=mn;else if(!mn){if(1==Lo)continue e;break e}}Dn[qt++]=Nn}return Dn},Re.prototype.at=_T,Re.prototype.chain=function Yw(){return mg(this)},Re.prototype.commit=function yT(){return new xo(this.value(),this.__chain__)},Re.prototype.next=function vT(){this.__values__===C&&(this.__values__=Sy(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?C:this.__values__[this.__index__++]}},Re.prototype.plant=function cy(d){for(var p,v=this;v instanceof kc;){var K=sy(v);K.__index__=0,K.__values__=C,p?we.__wrapped__=K:p=K;var we=K;v=v.__wrapped__}return we.__wrapped__=d,p},Re.prototype.reverse=function qw(){var d=this.__wrapped__;if(d instanceof fi){var p=d;return this.__actions__.length&&(p=new fi(this)),(p=p.reverse()).__actions__.push({func:_g,args:[Ui],thisArg:C}),new xo(p,this.__chain__)}return this.thru(Ui)},Re.prototype.toJSON=Re.prototype.valueOf=Re.prototype.value=function ly(){return fw(this.__wrapped__,this.__actions__)},Re.prototype.first=Re.prototype.head,Lh&&(Re.prototype[Lh]=function Oo(){return this}),Re}();Zr._=Pc,(Z=function(){return Pc}.call(me,S,me,je))!==C&&(je.exports=Z)}.call(this)},835:(je,me,S)=>{var Z=S(4298),C=Z.ARRAY_BUFFER_SUPPORT,q=Z.SYMBOL_SUPPORT;je.exports=function(X,_){var E,F,W,P,D;if(!X)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(X)||C&&ArrayBuffer.isView(X)||"string"==typeof X||"[object Arguments]"===X.toString())for(W=0,P=X.length;W<P;W++)_(X[W],W);else if("function"!=typeof X.forEach)if(q&&Symbol.iterator in X&&"function"!=typeof X.next&&(X=X[Symbol.iterator]()),"function"!=typeof X.next)for(F in X)X.hasOwnProperty(F)&&_(X[F],F);else for(E=X,W=0;!0!==(D=E.next()).done;)_(D.value,W),W++;else X.forEach(_)}},2135:je=>{function me(S){if("function"!=typeof S)throw new Error("obliterator/iterator: expecting a function!");this.next=S}typeof Symbol<"u"&&(me.prototype[Symbol.iterator]=function(){return this}),me.of=function(){var S=arguments,Z=S.length,C=0;return new me(function(){return C>=Z?{done:!0}:{done:!1,value:S[C++]}})},me.empty=function(){return new me(function(){return{done:!0}})},me.fromSequence=function(S){var Z=0,C=S.length;return new me(function(){return Z>=C?{done:!0}:{done:!1,value:S[Z++]}})},me.is=function(S){return S instanceof me||"object"==typeof S&&null!==S&&"function"==typeof S.next},je.exports=me},4298:(je,me)=>{me.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",me.SYMBOL_SUPPORT=typeof Symbol<"u"},2963:(je,me,S)=>{var Z=S(2135),C=S(835);function q(){this.clear()}q.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},q.prototype.enqueue=function(G){return this.items.push(G),++this.size},q.prototype.dequeue=function(){if(this.size){var G=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,G}},q.prototype.peek=function(){if(this.size)return this.items[this.offset]},q.prototype.forEach=function(G,X){X=arguments.length>1?X:this;for(var _=this.offset,E=0,F=this.items.length;_<F;_++,E++)G.call(X,this.items[_],E,this)},q.prototype.toArray=function(){return this.items.slice(this.offset)},q.prototype.values=function(){var G=this.items,X=this.offset;return new Z(function(){if(X>=G.length)return{done:!0};var _=G[X];return X++,{value:_,done:!1}})},q.prototype.entries=function(){var G=this.items,X=this.offset,_=0;return new Z(function(){if(X>=G.length)return{done:!0};var E=G[X];return X++,{value:[_++,E],done:!1}})},typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=q.prototype.values),q.prototype.toString=function(){return this.toArray().join(",")},q.prototype.toJSON=function(){return this.toArray()},q.prototype.inspect=function(){var G=this.toArray();return Object.defineProperty(G,"constructor",{value:q,enumerable:!1}),G},typeof Symbol<"u"&&(q.prototype[Symbol.for("nodejs.util.inspect.custom")]=q.prototype.inspect),q.from=function(G){var X=new q;return C(G,function(_){X.enqueue(_)}),X},q.of=function(){return q.from(arguments)},je.exports=q},7783:je=>{je.exports=function me(S,Z,C){function q(_,E){if(!Z[_]){if(!S[_]){if(G)return G(_,!0);throw new Error("Cannot find module '"+_+"'")}E=Z[_]={exports:{}},S[_][0].call(E.exports,function(W){return q(S[_][1][W]||W)},E,E.exports,me,S,Z,C)}return Z[_].exports}for(var G=void 0,X=0;X<C.length;X++)q(C[X]);return q}({1:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){"use strict";var D=me("crypto");function se(Y,B){var b;return void 0===(b="passthrough"!==(B=oe(Y,B)).algorithm?D.createHash(B.algorithm):new ee).write&&(b.write=b.update,b.end=b.update),z(B,b).dispatch(Y),b.update||b.end(""),b.digest?b.digest("buffer"===B.encoding?void 0:B.encoding):(Y=b.read(),"buffer"!==B.encoding?Y.toString(B.encoding):Y)}(Z=S.exports=se).sha1=function(Y){return se(Y)},Z.keys=function(Y){return se(Y,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},Z.MD5=function(Y){return se(Y,{algorithm:"md5",encoding:"hex"})},Z.keysMD5=function(Y){return se(Y,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=D.getHashes?D.getHashes().slice():["sha1","md5"],k=(x.push("passthrough"),["buffer","hex","binary","base64"]);function oe(Y,B){var b={};if(b.algorithm=(B=B||{}).algorithm||"sha1",b.encoding=B.encoding||"hex",b.excludeValues=!!B.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=!0===B.ignoreUnknown,b.respectType=!1!==B.respectType,b.respectFunctionNames=!1!==B.respectFunctionNames,b.respectFunctionProperties=!1!==B.respectFunctionProperties,b.unorderedArrays=!0===B.unorderedArrays,b.unorderedSets=!1!==B.unorderedSets,b.unorderedObjects=!1!==B.unorderedObjects,b.replacer=B.replacer||void 0,b.excludeKeys=B.excludeKeys||void 0,void 0===Y)throw new Error("Object argument required.");for(var M=0;M<x.length;++M)x[M].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=x[M]);if(-1===x.indexOf(b.algorithm))throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+x.join(", "));if(-1===k.indexOf(b.encoding)&&"passthrough"!==b.algorithm)throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+k.join(", "));return b}function $(Y){if("function"==typeof Y)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(Y))}function z(Y,B,b){function M(T){return B.update?B.update(T,"utf8"):B.write(T,"utf8")}return b=b||[],{dispatch:function(T){return this["_"+(null===(T=Y.replacer?Y.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var le,j=Object.prototype.toString.call(T),Me=/\[object (.*)\]/i.exec(j);if(Me=(Me=Me?Me[1]:"unknown:["+j+"]").toLowerCase(),0<=(j=b.indexOf(T)))return this.dispatch("[CIRCULAR:"+j+"]");if(b.push(T),void 0!==G&&G.isBuffer&&G.isBuffer(T))return M("buffer:"),M(T);if("object"===Me||"function"===Me||"asyncfunction"===Me)return j=Object.keys(T),Y.unorderedObjects&&(j=j.sort()),!1===Y.respectType||$(T)||j.splice(0,0,"prototype","__proto__","constructor"),Y.excludeKeys&&(j=j.filter(function(ae){return!Y.excludeKeys(ae)})),M("object:"+j.length+":"),le=this,j.forEach(function(ae){le.dispatch(ae),M(":"),Y.excludeValues||le.dispatch(T[ae]),M(",")});if(!this["_"+Me]){if(Y.ignoreUnknown)return M("["+Me+"]");throw new Error('Unknown object type "'+Me+'"')}this["_"+Me](T)},_array:function(T,ae){ae=void 0!==ae?ae:!1!==Y.unorderedArrays;var j=this;if(M("array:"+T.length+":"),!ae||T.length<=1)return T.forEach(function(xe){return j.dispatch(xe)});var Me=[];return ae=T.map(function(xe){var Oe=new ee,Ve=b.slice();return z(Y,Oe,Ve).dispatch(xe),Me=Me.concat(Ve.slice(b.length)),Oe.read().toString()}),b=b.concat(Me),ae.sort(),this._array(ae,!1)},_date:function(T){return M("date:"+T.toJSON())},_symbol:function(T){return M("symbol:"+T.toString())},_error:function(T){return M("error:"+T.toString())},_boolean:function(T){return M("bool:"+T.toString())},_string:function(T){M("string:"+T.length+":"),M(T.toString())},_function:function(T){M("fn:"),$(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==Y.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),Y.respectFunctionProperties&&this._object(T)},_number:function(T){return M("number:"+T.toString())},_xml:function(T){return M("xml:"+T.toString())},_null:function(){return M("Null")},_undefined:function(){return M("Undefined")},_regexp:function(T){return M("regex:"+T.toString())},_uint8array:function(T){return M("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return M("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return M("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return M("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return M("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return M("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return M("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return M("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return M("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return M("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return M("url:"+T.toString())},_map:function(T){return M("map:"),T=Array.from(T),this._array(T,!1!==Y.unorderedSets)},_set:function(T){return M("set:"),T=Array.from(T),this._array(T,!1!==Y.unorderedSets)},_file:function(T){return M("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(Y.ignoreUnknown)return M("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return M("domwindow")},_bigint:function(T){return M("bigint:"+T.toString())},_process:function(){return M("process")},_timer:function(){return M("timer")},_pipe:function(){return M("pipe")},_tcp:function(){return M("tcp")},_udp:function(){return M("udp")},_tty:function(){return M("tty")},_statwatcher:function(){return M("statwatcher")},_securecontext:function(){return M("securecontext")},_connection:function(){return M("connection")},_zlib:function(){return M("zlib")},_context:function(){return M("context")},_nodescript:function(){return M("nodescript")},_httpparser:function(){return M("httpparser")},_dataview:function(){return M("dataview")},_signal:function(){return M("signal")},_fsevent:function(){return M("fsevent")},_tlswrap:function(){return M("tlswrap")}}}function ee(){return{buf:"",write:function(Y){this.buf+=Y},end:function(Y){this.buf+=Y},read:function(){return this.buf}}}Z.writeToStream=function(Y,B,b){return void 0===b&&(b=B,B={}),z(B=oe(Y,B),b).dispatch(Y)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){!function(D){"use strict";var se=typeof Uint8Array<"u"?Uint8Array:Array;function B(b){return 43===(b=b.charCodeAt(0))||45===b?62:47===b||95===b?63:b<48?-1:b<58?b-48+26+26:b<91?b-65:b<123?b-97+26:void 0}D.toByteArray=function(b){var M,T;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var le="="===b.charAt((le=b.length)-2)?2:"="===b.charAt(le-1)?1:0,j=new se(3*b.length/4-le),Me=0<le?b.length-4:b.length,ae=0;function xe(Oe){j[ae++]=Oe}for(M=0;M<Me;M+=4,0)xe((16711680&(T=B(b.charAt(M))<<18|B(b.charAt(M+1))<<12|B(b.charAt(M+2))<<6|B(b.charAt(M+3))))>>16),xe((65280&T)>>8),xe(255&T);return 2==le?xe(255&(T=B(b.charAt(M))<<2|B(b.charAt(M+1))>>4)):1==le&&(xe((T=B(b.charAt(M))<<10|B(b.charAt(M+1))<<4|B(b.charAt(M+2))>>2)>>8&255),xe(255&T)),j},D.fromByteArray=function(b){var M,T,le,j,Me=b.length%3,ae="";function xe(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(M=0,le=b.length-Me;M<le;M+=3)ae+=xe((j=T=(b[M]<<16)+(b[M+1]<<8)+b[M+2])>>18&63)+xe(j>>12&63)+xe(j>>6&63)+xe(63&j);switch(Me){case 1:ae=(ae+=xe((T=b[b.length-1])>>2))+xe(T<<4&63)+"==";break;case 2:ae=(ae=(ae+=xe((T=(b[b.length-2]<<8)+b[b.length-1])>>10))+xe(T>>4&63))+xe(T<<2&63)+"="}return ae}}(void 0===Z?this.base64js={}:Z)}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(me,S,Z){(function(C,q,x,X,_,E,F,W,P){var D=me("base64-js"),se=me("ieee754");function x(fe,R,A){if(!(this instanceof x))return new x(fe,R,A);var ie,J,He,Xe,ue=typeof fe;if("base64"===R&&"string"==ue)for(fe=(Xe=fe).trim?Xe.trim():Xe.replace(/^\s+|\s+$/g,"");fe.length%4!=0;)fe+="=";if("number"==ue)ie=Qe(fe);else if("string"==ue)ie=x.byteLength(fe,R);else{if("object"!=ue)throw new Error("First argument needs to be a number, array or string.");ie=Qe(fe.length)}if(x._useTypedArrays?J=x._augment(new Uint8Array(ie)):((J=this).length=ie,J._isBuffer=!0),x._useTypedArrays&&"number"==typeof fe.byteLength)J._set(fe);else if(Je(Xe=fe)||x.isBuffer(Xe)||Xe&&"object"==typeof Xe&&"number"==typeof Xe.length)for(He=0;He<ie;He++)J[He]=x.isBuffer(fe)?fe.readUInt8(He):fe[He];else if("string"==ue)J.write(fe,0,R);else if("number"==ue&&!x._useTypedArrays&&!A)for(He=0;He<ie;He++)J[He]=0;return J}function z(fe,R,A,He){var J;if(He||(qe("boolean"==typeof A,"missing or invalid endian"),qe(null!=R,"missing offset"),qe(R+1<fe.length,"Trying to read beyond buffer length")),!((He=fe.length)<=R))return A?(J=fe[R],R+1<He&&(J|=fe[R+1]<<8)):(J=fe[R]<<8,R+1<He&&(J|=fe[R+1])),J}function ee(fe,R,A,He){var J;if(He||(qe("boolean"==typeof A,"missing or invalid endian"),qe(null!=R,"missing offset"),qe(R+3<fe.length,"Trying to read beyond buffer length")),!((He=fe.length)<=R))return A?(R+2<He&&(J=fe[R+2]<<16),R+1<He&&(J|=fe[R+1]<<8),J|=fe[R],R+3<He&&(J+=fe[R+3]<<24>>>0)):(R+1<He&&(J=fe[R+1]<<16),R+2<He&&(J|=fe[R+2]<<8),R+3<He&&(J|=fe[R+3]),J+=fe[R]<<24>>>0),J}function Y(fe,R,A,ie){if(ie||(qe("boolean"==typeof A,"missing or invalid endian"),qe(null!=R,"missing offset"),qe(R+1<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 32768&(ie=z(fe,R,A,!0))?-1*(65535-ie+1):ie}function B(fe,R,A,ie){if(ie||(qe("boolean"==typeof A,"missing or invalid endian"),qe(null!=R,"missing offset"),qe(R+3<fe.length,"Trying to read beyond buffer length")),!(fe.length<=R))return 2147483648&(ie=ee(fe,R,A,!0))?-1*(4294967295-ie+1):ie}function b(fe,R,A,ie){return ie||(qe("boolean"==typeof A,"missing or invalid endian"),qe(R+3<fe.length,"Trying to read beyond buffer length")),se.read(fe,R,A,23,4)}function M(fe,R,A,ie){return ie||(qe("boolean"==typeof A,"missing or invalid endian"),qe(R+7<fe.length,"Trying to read beyond buffer length")),se.read(fe,R,A,52,8)}function T(fe,R,A,ie,J){if(J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+1<fe.length,"trying to write beyond buffer length"),Se(R,65535)),!((J=fe.length)<=A))for(var He=0,Xe=Math.min(J-A,2);He<Xe;He++)fe[A+He]=(R&255<<8*(ie?He:1-He))>>>8*(ie?He:1-He)}function le(fe,R,A,ie,J){if(J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+3<fe.length,"trying to write beyond buffer length"),Se(R,4294967295)),!((J=fe.length)<=A))for(var He=0,Xe=Math.min(J-A,4);He<Xe;He++)fe[A+He]=R>>>8*(ie?He:3-He)&255}function j(fe,R,A,ie,J){J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+1<fe.length,"Trying to write beyond buffer length"),rt(R,32767,-32768)),fe.length<=A||T(fe,0<=R?R:65535+R+1,A,ie,J)}function Me(fe,R,A,ie,J){J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+3<fe.length,"Trying to write beyond buffer length"),rt(R,2147483647,-2147483648)),fe.length<=A||le(fe,0<=R?R:4294967295+R+1,A,ie,J)}function ae(fe,R,A,ie,J){J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+3<fe.length,"Trying to write beyond buffer length"),mt(R,34028234663852886e22,-34028234663852886e22)),fe.length<=A||se.write(fe,R,A,ie,23,4)}function xe(fe,R,A,ie,J){J||(qe(null!=R,"missing value"),qe("boolean"==typeof ie,"missing or invalid endian"),qe(null!=A,"missing offset"),qe(A+7<fe.length,"Trying to write beyond buffer length"),mt(R,17976931348623157e292,-17976931348623157e292)),fe.length<=A||se.write(fe,R,A,ie,52,8)}Z.Buffer=x,Z.SlowBuffer=x,Z.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var fe=new ArrayBuffer(0),R=new Uint8Array(fe);return R.foo=function(){return 42},42===R.foo()&&"function"==typeof R.subarray}catch{return!1}}(),x.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(fe){return!(null==fe||!fe._isBuffer)},x.byteLength=function(fe,R){var A;switch(fe+="",R||"utf8"){case"hex":A=fe.length/2;break;case"utf8":case"utf-8":A=Be(fe).length;break;case"ascii":case"binary":case"raw":A=fe.length;break;case"base64":A=Ae(fe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=2*fe.length;break;default:throw new Error("Unknown encoding")}return A},x.concat=function(fe,R){if(qe(Je(fe),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===fe.length)return new x(0);if(1===fe.length)return fe[0];if("number"!=typeof R)for(J=R=0;J<fe.length;J++)R+=fe[J].length;for(var A=new x(R),ie=0,J=0;J<fe.length;J++){var He=fe[J];He.copy(A,ie),ie+=He.length}return A},x.prototype.write=function(fe,R,A,ie){isFinite(R)?isFinite(A)||(ie=A,A=void 0):(te=ie,ie=R,R=A,A=te),R=Number(R)||0;var J,He,Xe,ue,te=this.length-R;switch((!A||te<(A=Number(A)))&&(A=te),ie=String(ie||"utf8").toLowerCase()){case"hex":J=function(U,I,N,he){N=Number(N)||0;var We=U.length-N;(!he||We<(he=Number(he)))&&(he=We),qe((We=I.length)%2==0,"Invalid hex string"),We/2<he&&(he=We/2);for(var Ee=0;Ee<he;Ee++){var Ue=parseInt(I.substr(2*Ee,2),16);qe(!isNaN(Ue),"Invalid hex string"),U[N+Ee]=Ue}return x._charsWritten=2*Ee,Ee}(this,fe,R,A);break;case"utf8":case"utf-8":He=this,Xe=R,ue=A,J=x._charsWritten=ke(Be(fe),He,Xe,ue);break;case"ascii":case"binary":J=function k(fe,R,A,ie){return x._charsWritten=ke(function(J){for(var He=[],Xe=0;Xe<J.length;Xe++)He.push(255&J.charCodeAt(Xe));return He}(R),fe,A,ie)}(this,fe,R,A);break;case"base64":He=this,Xe=R,ue=A,J=x._charsWritten=ke(Ae(fe),He,Xe,ue);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":J=function oe(fe,R,A,ie){return x._charsWritten=ke(function(J){for(var He,Xe,ue=[],te=0;te<J.length;te++)He=(Xe=J.charCodeAt(te))>>8,ue.push(Xe%=256),ue.push(He);return ue}(R),fe,A,ie)}(this,fe,R,A);break;default:throw new Error("Unknown encoding")}return J},x.prototype.toString=function(fe,R,A){var ie,J,He,Xe,ue=this;if(fe=String(fe||"utf8").toLowerCase(),R=Number(R)||0,(A=void 0!==A?Number(A):ue.length)===R)return"";switch(fe){case"hex":ie=function(te,U,I){var N=te.length;(!U||U<0)&&(U=0),(!I||I<0||N<I)&&(I=N);for(var he="",We=U;We<I;We++)he+=Ce(te[We]);return he}(ue,R,A);break;case"utf8":case"utf-8":ie=function(te,U,I){var N="",he="";I=Math.min(te.length,I);for(var We=U;We<I;We++)te[We]<=127?(N+=de(he)+String.fromCharCode(te[We]),he=""):he+="%"+te[We].toString(16);return N+de(he)}(ue,R,A);break;case"ascii":case"binary":ie=function $(fe,R,A){var ie="";A=Math.min(fe.length,A);for(var J=R;J<A;J++)ie+=String.fromCharCode(fe[J]);return ie}(ue,R,A);break;case"base64":J=ue,Xe=A,ie=0===(He=R)&&Xe===J.length?D.fromByteArray(J):D.fromByteArray(J.slice(He,Xe));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(te,U,I){for(var N=te.slice(U,I),he="",We=0;We<N.length;We+=2)he+=String.fromCharCode(N[We]+256*N[We+1]);return he}(ue,R,A);break;default:throw new Error("Unknown encoding")}return ie},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(fe,R,A,ie){if(R=R||0,(ie=ie||0===ie?ie:this.length)!==(A=A||0)&&0!==fe.length&&0!==this.length){qe(A<=ie,"sourceEnd < sourceStart"),qe(0<=R&&R<fe.length,"targetStart out of bounds"),qe(0<=A&&A<this.length,"sourceStart out of bounds"),qe(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var J=(ie=fe.length-R<ie-A?fe.length-R+A:ie)-A;if(J<100||!x._useTypedArrays)for(var He=0;He<J;He++)fe[He+R]=this[He+A];else fe._set(this.subarray(A,A+J),R)}},x.prototype.slice=function(fe,R){var A=this.length;if(fe=Ve(fe,A,0),R=Ve(R,A,A),x._useTypedArrays)return x._augment(this.subarray(fe,R));for(var ie=R-fe,J=new x(ie,void 0,!0),He=0;He<ie;He++)J[He]=this[He+fe];return J},x.prototype.get=function(fe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(fe)},x.prototype.set=function(fe,R){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(fe,R)},x.prototype.readUInt8=function(fe,R){if(R||(qe(null!=fe,"missing offset"),qe(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return this[fe]},x.prototype.readUInt16LE=function(fe,R){return z(this,fe,!0,R)},x.prototype.readUInt16BE=function(fe,R){return z(this,fe,!1,R)},x.prototype.readUInt32LE=function(fe,R){return ee(this,fe,!0,R)},x.prototype.readUInt32BE=function(fe,R){return ee(this,fe,!1,R)},x.prototype.readInt8=function(fe,R){if(R||(qe(null!=fe,"missing offset"),qe(fe<this.length,"Trying to read beyond buffer length")),!(fe>=this.length))return 128&this[fe]?-1*(255-this[fe]+1):this[fe]},x.prototype.readInt16LE=function(fe,R){return Y(this,fe,!0,R)},x.prototype.readInt16BE=function(fe,R){return Y(this,fe,!1,R)},x.prototype.readInt32LE=function(fe,R){return B(this,fe,!0,R)},x.prototype.readInt32BE=function(fe,R){return B(this,fe,!1,R)},x.prototype.readFloatLE=function(fe,R){return b(this,fe,!0,R)},x.prototype.readFloatBE=function(fe,R){return b(this,fe,!1,R)},x.prototype.readDoubleLE=function(fe,R){return M(this,fe,!0,R)},x.prototype.readDoubleBE=function(fe,R){return M(this,fe,!1,R)},x.prototype.writeUInt8=function(fe,R,A){A||(qe(null!=fe,"missing value"),qe(null!=R,"missing offset"),qe(R<this.length,"trying to write beyond buffer length"),Se(fe,255)),R>=this.length||(this[R]=fe)},x.prototype.writeUInt16LE=function(fe,R,A){T(this,fe,R,!0,A)},x.prototype.writeUInt16BE=function(fe,R,A){T(this,fe,R,!1,A)},x.prototype.writeUInt32LE=function(fe,R,A){le(this,fe,R,!0,A)},x.prototype.writeUInt32BE=function(fe,R,A){le(this,fe,R,!1,A)},x.prototype.writeInt8=function(fe,R,A){A||(qe(null!=fe,"missing value"),qe(null!=R,"missing offset"),qe(R<this.length,"Trying to write beyond buffer length"),rt(fe,127,-128)),R>=this.length||this.writeUInt8(0<=fe?fe:255+fe+1,R,A)},x.prototype.writeInt16LE=function(fe,R,A){j(this,fe,R,!0,A)},x.prototype.writeInt16BE=function(fe,R,A){j(this,fe,R,!1,A)},x.prototype.writeInt32LE=function(fe,R,A){Me(this,fe,R,!0,A)},x.prototype.writeInt32BE=function(fe,R,A){Me(this,fe,R,!1,A)},x.prototype.writeFloatLE=function(fe,R,A){ae(this,fe,R,!0,A)},x.prototype.writeFloatBE=function(fe,R,A){ae(this,fe,R,!1,A)},x.prototype.writeDoubleLE=function(fe,R,A){xe(this,fe,R,!0,A)},x.prototype.writeDoubleBE=function(fe,R,A){xe(this,fe,R,!1,A)},x.prototype.fill=function(fe,R,A){if(R=R||0,A=A||this.length,qe("number"==typeof(fe="string"==typeof(fe=fe||0)?fe.charCodeAt(0):fe)&&!isNaN(fe),"value is not a number"),qe(R<=A,"end < start"),A!==R&&0!==this.length){qe(0<=R&&R<this.length,"start out of bounds"),qe(0<=A&&A<=this.length,"end out of bounds");for(var ie=R;ie<A;ie++)this[ie]=fe}},x.prototype.inspect=function(){for(var fe=[],R=this.length,A=0;A<R;A++)if(fe[A]=Ce(this[A]),A===Z.INSPECT_MAX_BYTES){fe[A+1]="...";break}return"<Buffer "+fe.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var fe=new Uint8Array(this.length),R=0,A=fe.length;R<A;R+=1)fe[R]=this[R];return fe.buffer};var Oe=x.prototype;function Ve(fe,R,A){return"number"!=typeof fe?A:R<=(fe=~~fe)?R:0<=fe||0<=(fe+=R)?fe:0}function Qe(fe){return(fe=~~Math.ceil(+fe))<0?0:fe}function Je(fe){return(Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)})(fe)}function Ce(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function Be(fe){for(var R=[],A=0;A<fe.length;A++){var ie=fe.charCodeAt(A);if(ie<=127)R.push(fe.charCodeAt(A));else for(var J=A,He=(55296<=ie&&ie<=57343&&A++,encodeURIComponent(fe.slice(J,A+1)).substr(1).split("%")),Xe=0;Xe<He.length;Xe++)R.push(parseInt(He[Xe],16))}return R}function Ae(fe){return D.toByteArray(fe)}function ke(fe,R,A,ie){for(var J=0;J<ie&&!(J+A>=R.length||J>=fe.length);J++)R[J+A]=fe[J];return J}function de(fe){try{return decodeURIComponent(fe)}catch{return"\ufffd"}}function Se(fe,R){qe("number"==typeof fe,"cannot write a non-number as a number"),qe(0<=fe,"specified a negative value for writing an unsigned value"),qe(fe<=R,"value is larger than maximum value for type"),qe(Math.floor(fe)===fe,"value has a fractional component")}function rt(fe,R,A){qe("number"==typeof fe,"cannot write a non-number as a number"),qe(fe<=R,"value larger than maximum allowed value"),qe(A<=fe,"value smaller than minimum allowed value"),qe(Math.floor(fe)===fe,"value has a fractional component")}function mt(fe,R,A){qe("number"==typeof fe,"cannot write a non-number as a number"),qe(fe<=R,"value larger than maximum allowed value"),qe(A<=fe,"value smaller than minimum allowed value")}function qe(fe,R){if(!fe)throw new Error(R||"Failed assertion")}x._augment=function(fe){return fe._isBuffer=!0,fe._get=fe.get,fe._set=fe.set,fe.get=Oe.get,fe.set=Oe.set,fe.write=Oe.write,fe.toString=Oe.toString,fe.toLocaleString=Oe.toString,fe.toJSON=Oe.toJSON,fe.copy=Oe.copy,fe.slice=Oe.slice,fe.readUInt8=Oe.readUInt8,fe.readUInt16LE=Oe.readUInt16LE,fe.readUInt16BE=Oe.readUInt16BE,fe.readUInt32LE=Oe.readUInt32LE,fe.readUInt32BE=Oe.readUInt32BE,fe.readInt8=Oe.readInt8,fe.readInt16LE=Oe.readInt16LE,fe.readInt16BE=Oe.readInt16BE,fe.readInt32LE=Oe.readInt32LE,fe.readInt32BE=Oe.readInt32BE,fe.readFloatLE=Oe.readFloatLE,fe.readFloatBE=Oe.readFloatBE,fe.readDoubleLE=Oe.readDoubleLE,fe.readDoubleBE=Oe.readDoubleBE,fe.writeUInt8=Oe.writeUInt8,fe.writeUInt16LE=Oe.writeUInt16LE,fe.writeUInt16BE=Oe.writeUInt16BE,fe.writeUInt32LE=Oe.writeUInt32LE,fe.writeUInt32BE=Oe.writeUInt32BE,fe.writeInt8=Oe.writeInt8,fe.writeInt16LE=Oe.writeInt16LE,fe.writeInt16BE=Oe.writeInt16BE,fe.writeInt32LE=Oe.writeInt32LE,fe.writeInt32BE=Oe.writeInt32BE,fe.writeFloatLE=Oe.writeFloatLE,fe.writeFloatBE=Oe.writeFloatBE,fe.writeDoubleLE=Oe.writeDoubleLE,fe.writeDoubleBE=Oe.writeDoubleBE,fe.fill=Oe.fill,fe.inspect=Oe.inspect,fe.toArrayBuffer=Oe.toArrayBuffer,fe}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(me,S,Z){(function(C,q,D,X,_,E,F,W,P){D=me("buffer").Buffer;var x=new D(4);x.fill(0),S.exports={hash:function(k,oe,$,z){for(var ee=oe(function(T,le){T.length%4!=0&&(T=D.concat([T,x],T.length+(4-T.length%4)));for(var Me=[],ae=le?T.readInt32BE:T.readInt32LE,xe=0;xe<T.length;xe+=4)Me.push(ae.call(T,xe));return Me}(k=D.isBuffer(k)?k:new D(k),z),8*k.length),Y=(oe=z,new D($)),B=oe?Y.writeInt32BE:Y.writeInt32LE,b=0;b<ee.length;b++)B.call(Y,ee[b],4*b,!0);return Y}}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(me,S,Z){(function(C,q,D,X,_,E,F,W,P){D=me("buffer").Buffer;var se=me("./sha"),x=me("./sha256"),k=me("./rng"),oe={sha1:se,sha256:x,md5:me("./md5")},$=64,z=new D($);function ee(T,le){var j=oe[T=T||"sha1"],Me=[];return j||Y("algorithm:",T,"is not yet supported"),{update:function(ae){return D.isBuffer(ae)||(ae=new D(ae)),Me.push(ae),this},digest:function(ae){var xe=D.concat(Me);return xe=le?function(Oe,Ve,Qe){D.isBuffer(Ve)||(Ve=new D(Ve)),D.isBuffer(Qe)||(Qe=new D(Qe)),Ve.length>$?Ve=Oe(Ve):Ve.length<$&&(Ve=D.concat([Ve,z],$));for(var Je=new D($),Ce=new D($),Be=0;Be<$;Be++)Je[Be]=54^Ve[Be],Ce[Be]=92^Ve[Be];return Qe=Oe(D.concat([Je,Qe])),Oe(D.concat([Ce,Qe]))}(j,le,xe):j(xe),Me=null,ae?xe.toString(ae):xe}}}function Y(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}z.fill(0),Z.createHash=function(T){return ee(T)},Z.createHmac=ee,Z.randomBytes=function(T,le){if(!le||!le.call)return new D(k(T));try{le.call(this,void 0,new D(k(T)))}catch(j){le(j)}};var B,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],M=function(T){Z[T]=function(){Y("sorry,",T,"is not implemented yet")}};for(B in b)M(b[B])}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){var D=me("./helpers");function se(Y,B){Y[B>>5]|=128<<B%32,Y[14+(B+64>>>9<<4)]=B;for(var b=1732584193,M=-271733879,T=-1732584194,le=271733878,j=0;j<Y.length;j+=16){var Me=b,ae=M,xe=T,Oe=le;b=k(b,M,T,le,Y[j+0],7,-680876936),le=k(le,b,M,T,Y[j+1],12,-389564586),T=k(T,le,b,M,Y[j+2],17,606105819),M=k(M,T,le,b,Y[j+3],22,-1044525330),b=k(b,M,T,le,Y[j+4],7,-176418897),le=k(le,b,M,T,Y[j+5],12,1200080426),T=k(T,le,b,M,Y[j+6],17,-1473231341),M=k(M,T,le,b,Y[j+7],22,-45705983),b=k(b,M,T,le,Y[j+8],7,1770035416),le=k(le,b,M,T,Y[j+9],12,-1958414417),T=k(T,le,b,M,Y[j+10],17,-42063),M=k(M,T,le,b,Y[j+11],22,-1990404162),b=k(b,M,T,le,Y[j+12],7,1804603682),le=k(le,b,M,T,Y[j+13],12,-40341101),T=k(T,le,b,M,Y[j+14],17,-1502002290),b=oe(b,M=k(M,T,le,b,Y[j+15],22,1236535329),T,le,Y[j+1],5,-165796510),le=oe(le,b,M,T,Y[j+6],9,-1069501632),T=oe(T,le,b,M,Y[j+11],14,643717713),M=oe(M,T,le,b,Y[j+0],20,-373897302),b=oe(b,M,T,le,Y[j+5],5,-701558691),le=oe(le,b,M,T,Y[j+10],9,38016083),T=oe(T,le,b,M,Y[j+15],14,-660478335),M=oe(M,T,le,b,Y[j+4],20,-405537848),b=oe(b,M,T,le,Y[j+9],5,568446438),le=oe(le,b,M,T,Y[j+14],9,-1019803690),T=oe(T,le,b,M,Y[j+3],14,-187363961),M=oe(M,T,le,b,Y[j+8],20,1163531501),b=oe(b,M,T,le,Y[j+13],5,-1444681467),le=oe(le,b,M,T,Y[j+2],9,-51403784),T=oe(T,le,b,M,Y[j+7],14,1735328473),b=$(b,M=oe(M,T,le,b,Y[j+12],20,-1926607734),T,le,Y[j+5],4,-378558),le=$(le,b,M,T,Y[j+8],11,-2022574463),T=$(T,le,b,M,Y[j+11],16,1839030562),M=$(M,T,le,b,Y[j+14],23,-35309556),b=$(b,M,T,le,Y[j+1],4,-1530992060),le=$(le,b,M,T,Y[j+4],11,1272893353),T=$(T,le,b,M,Y[j+7],16,-155497632),M=$(M,T,le,b,Y[j+10],23,-1094730640),b=$(b,M,T,le,Y[j+13],4,681279174),le=$(le,b,M,T,Y[j+0],11,-358537222),T=$(T,le,b,M,Y[j+3],16,-722521979),M=$(M,T,le,b,Y[j+6],23,76029189),b=$(b,M,T,le,Y[j+9],4,-640364487),le=$(le,b,M,T,Y[j+12],11,-421815835),T=$(T,le,b,M,Y[j+15],16,530742520),b=z(b,M=$(M,T,le,b,Y[j+2],23,-995338651),T,le,Y[j+0],6,-198630844),le=z(le,b,M,T,Y[j+7],10,1126891415),T=z(T,le,b,M,Y[j+14],15,-1416354905),M=z(M,T,le,b,Y[j+5],21,-57434055),b=z(b,M,T,le,Y[j+12],6,1700485571),le=z(le,b,M,T,Y[j+3],10,-1894986606),T=z(T,le,b,M,Y[j+10],15,-1051523),M=z(M,T,le,b,Y[j+1],21,-2054922799),b=z(b,M,T,le,Y[j+8],6,1873313359),le=z(le,b,M,T,Y[j+15],10,-30611744),T=z(T,le,b,M,Y[j+6],15,-1560198380),M=z(M,T,le,b,Y[j+13],21,1309151649),b=z(b,M,T,le,Y[j+4],6,-145523070),le=z(le,b,M,T,Y[j+11],10,-1120210379),T=z(T,le,b,M,Y[j+2],15,718787259),M=z(M,T,le,b,Y[j+9],21,-343485551),b=ee(b,Me),M=ee(M,ae),T=ee(T,xe),le=ee(le,Oe)}return Array(b,M,T,le)}function x(Y,B,b,M,T,le){return ee((B=ee(ee(B,Y),ee(M,le)))<<T|B>>>32-T,b)}function k(Y,B,b,M,T,le,j){return x(B&b|~B&M,Y,B,T,le,j)}function oe(Y,B,b,M,T,le,j){return x(B&M|b&~M,Y,B,T,le,j)}function $(Y,B,b,M,T,le,j){return x(B^b^M,Y,B,T,le,j)}function z(Y,B,b,M,T,le,j){return x(b^(B|~M),Y,B,T,le,j)}function ee(Y,B){var b=(65535&Y)+(65535&B);return(Y>>16)+(B>>16)+(b>>16)<<16|65535&b}S.exports=function(Y){return D.hash(Y,se,16)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){S.exports=function(se){for(var x,k=new Array(se),oe=0;oe<se;oe++)!(3&oe)&&(x=4294967296*Math.random()),k[oe]=x>>>((3&oe)<<3)&255;return k}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){var D=me("./helpers");function se(oe,$){oe[$>>5]|=128<<24-$%32,oe[15+($+64>>9<<4)]=$;for(var z,ee,Y,B=Array(80),b=1732584193,M=-271733879,T=-1732584194,le=271733878,j=-1009589776,Me=0;Me<oe.length;Me+=16){for(var ae=b,xe=M,Oe=T,Ve=le,Qe=j,Je=0;Je<80;Je++){B[Je]=Je<16?oe[Me+Je]:k(B[Je-3]^B[Je-8]^B[Je-14]^B[Je-16],1);var Ce=x(x(k(b,5),(Ce=M,ee=T,Y=le,(z=Je)<20?Ce&ee|~Ce&Y:!(z<40)&&z<60?Ce&ee|Ce&Y|ee&Y:Ce^ee^Y)),x(x(j,B[Je]),(z=Je)<20?1518500249:z<40?1859775393:z<60?-1894007588:-899497514));j=le,le=T,T=k(M,30),M=b,b=Ce}b=x(b,ae),M=x(M,xe),T=x(T,Oe),le=x(le,Ve),j=x(j,Qe)}return Array(b,M,T,le,j)}function x(oe,$){var z=(65535&oe)+(65535&$);return(oe>>16)+($>>16)+(z>>16)<<16|65535&z}function k(oe,$){return oe<<$|oe>>>32-$}S.exports=function(oe){return D.hash(oe,se,20,!0)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){function D($,z){var ee=(65535&$)+(65535&z);return($>>16)+(z>>16)+(ee>>16)<<16|65535&ee}function se($,z){var ee,Y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),B=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);$[z>>5]|=128<<24-z%32,$[15+(z+64>>9<<4)]=z;for(var M,T,le=0;le<$.length;le+=16){for(var j=B[0],Me=B[1],ae=B[2],xe=B[3],Oe=B[4],Ve=B[5],Qe=B[6],Je=B[7],Ce=0;Ce<64;Ce++)b[Ce]=Ce<16?$[Ce+le]:D(D(D(k(T=b[Ce-2],17)^k(T,19)^oe(T,10),b[Ce-7]),k(T=b[Ce-15],7)^k(T,18)^oe(T,3)),b[Ce-16]),ee=D(D(D(D(Je,k(T=Oe,6)^k(T,11)^k(T,25)),Oe&Ve^~Oe&Qe),Y[Ce]),b[Ce]),M=D(k(M=j,2)^k(M,13)^k(M,22),j&Me^j&ae^Me&ae),Je=Qe,Qe=Ve,Ve=Oe,Oe=D(xe,ee),xe=ae,ae=Me,Me=j,j=D(ee,M);B[0]=D(j,B[0]),B[1]=D(Me,B[1]),B[2]=D(ae,B[2]),B[3]=D(xe,B[3]),B[4]=D(Oe,B[4]),B[5]=D(Ve,B[5]),B[6]=D(Qe,B[6]),B[7]=D(Je,B[7])}return B}var x=me("./helpers"),k=function($,z){return $>>>z|$<<32-z},oe=function($,z){return $>>>z};S.exports=function($){return x.hash($,se,32,!0)}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){Z.read=function(D,se,x,k,le){var $,z,ee=8*le-k-1,Y=(1<<ee)-1,B=Y>>1,b=-7,M=x?le-1:0,T=x?-1:1;for(le=D[se+M],M+=T,$=le&(1<<-b)-1,le>>=-b,b+=ee;0<b;$=256*$+D[se+M],M+=T,b-=8);for(z=$&(1<<-b)-1,$>>=-b,b+=k;0<b;z=256*z+D[se+M],M+=T,b-=8);if(0===$)$=1-B;else{if($===Y)return z?NaN:1/0*(le?-1:1);z+=Math.pow(2,k),$-=B}return(le?-1:1)*z*Math.pow(2,$-k)},Z.write=function(D,se,x,k,oe,j){var z,ee,Y=8*j-oe-1,B=(1<<Y)-1,b=B>>1,M=23===oe?Math.pow(2,-24)-Math.pow(2,-77):0,T=k?0:j-1,le=k?1:-1;for(j=se<0||0===se&&1/se<0?1:0,se=Math.abs(se),isNaN(se)||se===1/0?(ee=isNaN(se)?1:0,z=B):(z=Math.floor(Math.log(se)/Math.LN2),se*(k=Math.pow(2,-z))<1&&(z--,k*=2),2<=(se+=1<=z+b?M/k:M*Math.pow(2,1-b))*k&&(z++,k/=2),B<=z+b?(ee=0,z=B):1<=z+b?(ee=(se*k-1)*Math.pow(2,oe),z+=b):(ee=se*Math.pow(2,b-1)*Math.pow(2,oe),z=0));8<=oe;D[x+T]=255&ee,T+=le,ee/=256,oe-=8);for(z=z<<oe|ee,Y+=oe;0<Y;D[x+T]=255&z,T+=le,z/=256,Y-=8);D[x+T-le]|=128*j}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(me,S,Z){(function(C,q,G,X,_,E,F,W,P){var D,se,x;function k(){}(C=S.exports={}).nextTick=(se=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,se?function(oe){return window.setImmediate(oe)}:x?(D=[],window.addEventListener("message",function(oe){var $=oe.source;$!==window&&null!==$||"process-tick"!==oe.data||(oe.stopPropagation(),0<D.length&&D.shift()())},!0),function(oe){D.push(oe),window.postMessage("process-tick","*")}):function(oe){setTimeout(oe,0)}),C.title="browser",C.browser=!0,C.env={},C.argv=[],C.on=k,C.addListener=k,C.once=k,C.off=k,C.removeListener=k,C.removeAllListeners=k,C.emit=k,C.binding=function(oe){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(oe){throw new Error("process.chdir is not supported")}}).call(this,me("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},me("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},573:je=>{var S,Z,me=je.exports={};function C(){throw new Error("setTimeout has not been defined")}function q(){throw new Error("clearTimeout has not been defined")}function G(k){if(S===setTimeout)return setTimeout(k,0);if((S===C||!S)&&setTimeout)return S=setTimeout,setTimeout(k,0);try{return S(k,0)}catch{try{return S.call(null,k,0)}catch{return S.call(this,k,0)}}}!function(){try{S="function"==typeof setTimeout?setTimeout:C}catch{S=C}try{Z="function"==typeof clearTimeout?clearTimeout:q}catch{Z=q}}();var F,_=[],E=!1,W=-1;function P(){!E||!F||(E=!1,F.length?_=F.concat(_):W=-1,_.length&&D())}function D(){if(!E){var k=G(P);E=!0;for(var oe=_.length;oe;){for(F=_,_=[];++W<oe;)F&&F[W].run();W=-1,oe=_.length}F=null,E=!1,function X(k){if(Z===clearTimeout)return clearTimeout(k);if((Z===q||!Z)&&clearTimeout)return Z=clearTimeout,clearTimeout(k);try{return Z(k)}catch{try{return Z.call(null,k)}catch{return Z.call(this,k)}}}(k)}}function se(k,oe){this.fun=k,this.array=oe}function x(){}me.nextTick=function(k){var oe=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)oe[$-1]=arguments[$];_.push(new se(k,oe)),1===_.length&&!E&&G(D)},se.prototype.run=function(){this.fun.apply(null,this.array)},me.title="browser",me.browser=!0,me.env={},me.argv=[],me.version="",me.versions={},me.on=x,me.addListener=x,me.once=x,me.off=x,me.removeListener=x,me.removeAllListeners=x,me.emit=x,me.prependListener=x,me.prependOnceListener=x,me.listeners=function(k){return[]},me.binding=function(k){throw new Error("process.binding is not supported")},me.cwd=function(){return"/"},me.chdir=function(k){throw new Error("process.chdir is not supported")},me.umask=function(){return 0}},4515:je=>{let me;je.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):S=>(me||(me=Promise.resolve())).then(S).catch(Z=>setTimeout(()=>{throw Z},0))},1224:(je,me,S)=>{je.exports=S(4548)},250:je=>{"use strict";je.exports=class aK{constructor(S,Z=new Map,C=0){this.prefix=S,this._existing=Z,this.counter=C}clone(){const{prefix:S,_existing:Z,counter:C}=this;return new aK(S,new Map(Z),C)}getId(S){const Z=S&&this._existing.get(S);if(Z)return Z;const C=this.prefix+this.counter;return this.counter++,S&&this._existing.set(S,C),C}hasId(S){return this._existing.has(S)}getOldIds(){return[...this._existing.keys()]}}},1126:(je,me,S)=>{"use strict";var Z=S(9293).default;S(7140);const C=self.crypto||self.msCrypto;je.exports=class{constructor(G){if(!C||!C.subtle)throw new Error("crypto.subtle not found.");if("sha256"===G)this.algorithm={name:"SHA-256"};else{if("sha1"!==G)throw new Error(`Unsupported algorithm "${G}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(G){this._content+=G}digest(){var G=this;return Z(function*(){const X=(new TextEncoder).encode(G._content),_=new Uint8Array(yield C.subtle.digest(G.algorithm,X));let E="";for(let F=0;F<_.length;++F)E+=_[F].toString(16).padStart(2,"0");return E})()}}},8276:je=>{"use strict";const Z="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",C="http://www.w3.org/2001/XMLSchema#string",q="NamedNode",G="BlankNode",X="Literal",_="DefaultGraph",E={};function F(x,k){return x.subject.termType===k.subject.termType&&x.object.termType===k.object.termType&&x.subject.value===k.subject.value&&x.predicate.value===k.predicate.value&&x.object.value===k.object.value&&(x.object.termType!==X||x.object.datatype.termType===k.object.datatype.termType&&x.object.language===k.object.language&&x.object.datatype.value===k.object.datatype.value)}(()=>{const x="(?:<([^:]+:[^>]*)>)",oe="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",$=oe+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+oe+"0-9])(?:(?:["+$+".])*(?:["+$+"]))?)",T="[ \\t]+",le="[ \\t]*",j="(?:"+x+"|"+ee+")"+T,Me=x+T,ae="(?:"+x+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+x+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+le,xe="(?:\\.|(?:(?:"+x+"|"+ee+")"+le+"\\.))";E.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,E.empty=new RegExp("^[ \\t]*$"),E.quad=new RegExp("^"+le+j+Me+ae+xe+le+"$")})(),je.exports=class iC{static parse(k){const oe=[],$={},z=k.split(E.eoln);let ee=0;for(const Y of z){if(ee++,E.empty.test(Y))continue;const B=Y.match(E.quad);if(null===B)throw new Error("N-Quads parse error on line "+ee+".");const b={subject:null,predicate:null,object:null,graph:null};if(b.subject=void 0!==B[1]?{termType:q,value:B[1]}:{termType:G,value:B[2]},b.predicate={termType:q,value:B[3]},void 0!==B[4]?b.object={termType:q,value:B[4]}:void 0!==B[5]?b.object={termType:G,value:B[5]}:(b.object={termType:X,value:void 0,datatype:{termType:q}},void 0!==B[7]?b.object.datatype.value=B[7]:void 0!==B[8]?(b.object.datatype.value=Z,b.object.language=B[8]):b.object.datatype.value=C,b.object.value=B[6].replace(D,function(k,oe,$,z){if(oe)switch(oe){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if($)return String.fromCharCode(parseInt($,16));if(z)throw new Error("Unsupported U escape")})),b.graph=void 0!==B[9]?{termType:q,value:B[9]}:void 0!==B[10]?{termType:G,value:B[10]}:{termType:_,value:""},b.graph.value in $){let M=!0;const T=$[b.graph.value];for(const le of T)if(F(le,b)){M=!1;break}M&&(T.push(b),oe.push(b))}else $[b.graph.value]=[b],oe.push(b)}return oe}static serialize(k){Array.isArray(k)||(k=iC.legacyDatasetToQuads(k));const oe=[];for(const $ of k)oe.push(iC.serializeQuad($));return oe.sort().join("")}static serializeQuadComponents(k,oe,$,z){let ee="";return ee+=k.termType===q?`<${k.value}>`:`${k.value}`,ee+=` <${oe.value}> `,$.termType===q?ee+=`<${$.value}>`:$.termType===G?ee+=$.value:(ee+=`"${function P(x){return x.replace(W,function(k){switch(k){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}($.value)}"`,$.datatype.value===Z?$.language&&(ee+=`@${$.language}`):$.datatype.value!==C&&(ee+=`^^<${$.datatype.value}>`)),z.termType===q?ee+=` <${z.value}>`:z.termType===G&&(ee+=` ${z.value}`),ee+=" .\n",ee}static serializeQuad(k){return iC.serializeQuadComponents(k.subject,k.predicate,k.object,k.graph)}static legacyDatasetToQuads(k){const oe=[],$={"blank node":G,IRI:q,literal:X};for(const z in k)k[z].forEach(Y=>{const B={};for(const b in Y){const M=Y[b],T={termType:$[M.type],value:M.value};T.termType===X&&(T.datatype={termType:q},"datatype"in M&&(T.datatype.value=M.datatype),"language"in M?("datatype"in M||(T.datatype.value=Z),T.language=M.language):"datatype"in M||(T.datatype.value=C)),B[b]=T}B.graph="@default"===z?{termType:_,value:""}:{termType:z.startsWith("_:")?G:q,value:z},oe.push(B)});return oe}};const W=/["\\\n\r]/g,D=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7794:je=>{"use strict";je.exports=class{constructor(S){this.current=S.sort(),this.done=!1,this.dir=new Map;for(let Z=0;Z<S.length;++Z)this.dir.set(S[Z],!0)}hasNext(){return!this.done}next(){const{current:S,dir:Z}=this,C=S.slice();let q=null,G=0;const X=S.length;for(let _=0;_<X;++_){const E=S[_],F=Z.get(E);(null===q||E>q)&&(F&&_>0&&E>S[_-1]||!F&&_<X-1&&E>S[_+1])&&(q=E,G=_)}if(null===q)this.done=!0;else{const _=Z.get(q)?G-1:G+1;S[G]=S[_],S[_]=q;for(const E of S)E>q&&Z.set(E,!Z.get(E))}return C}}},624:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(250),q=S(1126),G=S(7794),X=S(8276);function _(E,F){return E.hash<F.hash?-1:E.hash>F.hash?1:0}je.exports=class{constructor({createMessageDigest:F=(()=>new q("sha256")),canonicalIdMap:W=new Map,maxDeepIterations:P=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n",W),this.createMessageDigest=F,this.maxDeepIterations=P,this.quads=null,this.deepIterations=null}main(F){var W=this;return Z(function*(){W.deepIterations=new Map,W.quads=F;for(const $ of F)W._addBlankNodeQuadInfo({quad:$,component:$.subject}),W._addBlankNodeQuadInfo({quad:$,component:$.object}),W._addBlankNodeQuadInfo({quad:$,component:$.graph});const P=new Map,D=[...W.blankNodeInfo.keys()];let se=0;for(const $ of D)++se%100==0&&(yield W._yield()),yield W._hashAndTrackBlankNode({id:$,hashToBlankNodes:P});const x=[...P.keys()].sort(),k=[];for(const $ of x){const z=P.get($);z.length>1?k.push(z):W.canonicalIssuer.getId(z[0])}for(const $ of k){const z=[];for(const ee of $){if(W.canonicalIssuer.hasId(ee))continue;const Y=new C("_:b");Y.getId(ee);const B=yield W.hashNDegreeQuads(ee,Y);z.push(B)}z.sort(_);for(const ee of z){const Y=ee.issuer.getOldIds();for(const B of Y)W.canonicalIssuer.getId(B)}}const oe=[];for(const $ of W.quads){const z=X.serializeQuadComponents(W._componentWithCanonicalId($.subject),$.predicate,W._componentWithCanonicalId($.object),W._componentWithCanonicalId($.graph));oe.push(z)}return oe.sort(),oe.join("")})()}hashFirstDegreeQuads(F){var W=this;return Z(function*(){const P=[],D=W.blankNodeInfo.get(F),se=D.quads;for(const k of se){const oe={subject:null,predicate:k.predicate,object:null,graph:null};oe.subject=W.modifyFirstDegreeComponent(F,k.subject,"subject"),oe.object=W.modifyFirstDegreeComponent(F,k.object,"object"),oe.graph=W.modifyFirstDegreeComponent(F,k.graph,"graph"),P.push(X.serializeQuad(oe))}P.sort();const x=W.createMessageDigest();for(const k of P)x.update(k);return D.hash=yield x.digest(),D.hash})()}hashRelatedBlankNode(F,W,P,D){var se=this;return Z(function*(){let x;x=se.canonicalIssuer.hasId(F)?se.canonicalIssuer.getId(F):P.hasId(F)?P.getId(F):se.blankNodeInfo.get(F).hash;const k=se.createMessageDigest();return k.update(D),"g"!==D&&k.update(se.getRelatedPredicate(W)),k.update(x),k.digest()})()}hashNDegreeQuads(F,W){var P=this;return Z(function*(){const D=P.deepIterations.get(F)||0;if(D>P.maxDeepIterations)throw new Error(`Maximum deep iterations (${P.maxDeepIterations}) exceeded.`);P.deepIterations.set(F,D+1);const se=P.createMessageDigest(),x=yield P.createHashToRelated(F,W),k=[...x.keys()].sort();for(const oe of k){se.update(oe);let z,$="";const ee=new G(x.get(oe));let Y=0;for(;ee.hasNext();){const B=ee.next();++Y%3==0&&(yield P._yield());let b=W.clone(),M="";const T=[];let le=!1;for(const j of B)if(P.canonicalIssuer.hasId(j)?M+=P.canonicalIssuer.getId(j):(b.hasId(j)||T.push(j),M+=b.getId(j)),0!==$.length&&M>$){le=!0;break}if(!le){for(const j of T){const Me=yield P.hashNDegreeQuads(j,b);if(M+=b.getId(j),M+=`<${Me.hash}>`,b=Me.issuer,0!==$.length&&M>$){le=!0;break}}le||(0===$.length||M<$)&&($=M,z=b)}}se.update($),W=z}return{hash:yield se.digest(),issuer:W}})()}modifyFirstDegreeComponent(F,W){return"BlankNode"!==W.termType?W:{termType:"BlankNode",value:W.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return`<${F.predicate.value}>`}createHashToRelated(F,W){var P=this;return Z(function*(){const D=new Map,se=P.blankNodeInfo.get(F).quads;let x=0;for(const k of se)++x%100==0&&(yield P._yield()),yield Promise.all([P._addRelatedBlankNodeHash({quad:k,component:k.subject,position:"s",id:F,issuer:W,hashToRelated:D}),P._addRelatedBlankNodeHash({quad:k,component:k.object,position:"o",id:F,issuer:W,hashToRelated:D}),P._addRelatedBlankNodeHash({quad:k,component:k.graph,position:"g",id:F,issuer:W,hashToRelated:D})]);return D})()}_hashAndTrackBlankNode({id:F,hashToBlankNodes:W}){var P=this;return Z(function*(){const D=yield P.hashFirstDegreeQuads(F),se=W.get(D);se?se.push(F):W.set(D,[F])})()}_addBlankNodeQuadInfo({quad:F,component:W}){if("BlankNode"!==W.termType)return;const P=W.value,D=this.blankNodeInfo.get(P);D?D.quads.add(F):this.blankNodeInfo.set(P,{quads:new Set([F]),hash:null})}_addRelatedBlankNodeHash({quad:F,component:W,position:P,id:D,issuer:se,hashToRelated:x}){var k=this;return Z(function*(){if("BlankNode"!==W.termType||W.value===D)return;const oe=W.value,$=yield k.hashRelatedBlankNode(oe,F,se,P),z=x.get($);z?z.push(oe):x.set($,[oe])})()}_componentWithCanonicalId(F){return"BlankNode"!==F.termType||F.value.startsWith(this.canonicalIssuer.prefix)?F:{termType:"BlankNode",value:this.canonicalIssuer.getId(F.value)}}_yield(){return Z(function*(){return new Promise(F=>setImmediate(F))})()}}},203:(je,me,S)=>{"use strict";const Z=S(250),C=S(1126),q=S(7794),G=S(8276);function X(_,E){return _.hash<E.hash?-1:_.hash>E.hash?1:0}je.exports=class{constructor({createMessageDigest:E=(()=>new C("sha256")),canonicalIdMap:F=new Map,maxDeepIterations:W=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Z("_:c14n",F),this.createMessageDigest=E,this.maxDeepIterations=W,this.quads=null,this.deepIterations=null}main(E){this.deepIterations=new Map,this.quads=E;for(const x of E)this._addBlankNodeQuadInfo({quad:x,component:x.subject}),this._addBlankNodeQuadInfo({quad:x,component:x.object}),this._addBlankNodeQuadInfo({quad:x,component:x.graph});const F=new Map,W=[...this.blankNodeInfo.keys()];for(const x of W)this._hashAndTrackBlankNode({id:x,hashToBlankNodes:F});const P=[...F.keys()].sort(),D=[];for(const x of P){const k=F.get(x);k.length>1?D.push(k):this.canonicalIssuer.getId(k[0])}for(const x of D){const k=[];for(const oe of x){if(this.canonicalIssuer.hasId(oe))continue;const $=new Z("_:b");$.getId(oe);const z=this.hashNDegreeQuads(oe,$);k.push(z)}k.sort(X);for(const oe of k){const $=oe.issuer.getOldIds();for(const z of $)this.canonicalIssuer.getId(z)}}const se=[];for(const x of this.quads){const k=G.serializeQuadComponents(this._componentWithCanonicalId({component:x.subject}),x.predicate,this._componentWithCanonicalId({component:x.object}),this._componentWithCanonicalId({component:x.graph}));se.push(k)}return se.sort(),se.join("")}hashFirstDegreeQuads(E){const F=[],W=this.blankNodeInfo.get(E),P=W.quads;for(const se of P){const x={subject:null,predicate:se.predicate,object:null,graph:null};x.subject=this.modifyFirstDegreeComponent(E,se.subject,"subject"),x.object=this.modifyFirstDegreeComponent(E,se.object,"object"),x.graph=this.modifyFirstDegreeComponent(E,se.graph,"graph"),F.push(G.serializeQuad(x))}F.sort();const D=this.createMessageDigest();for(const se of F)D.update(se);return W.hash=D.digest(),W.hash}hashRelatedBlankNode(E,F,W,P){let D;D=this.canonicalIssuer.hasId(E)?this.canonicalIssuer.getId(E):W.hasId(E)?W.getId(E):this.blankNodeInfo.get(E).hash;const se=this.createMessageDigest();return se.update(P),"g"!==P&&se.update(this.getRelatedPredicate(F)),se.update(D),se.digest()}hashNDegreeQuads(E,F){const W=this.deepIterations.get(E)||0;if(W>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(E,W+1);const P=this.createMessageDigest(),D=this.createHashToRelated(E,F),se=[...D.keys()].sort();for(const x of se){P.update(x);let oe,k="";const $=new q(D.get(x));for(;$.hasNext();){const z=$.next();let ee=F.clone(),Y="";const B=[];let b=!1;for(const M of z)if(this.canonicalIssuer.hasId(M)?Y+=this.canonicalIssuer.getId(M):(ee.hasId(M)||B.push(M),Y+=ee.getId(M)),0!==k.length&&Y>k){b=!0;break}if(!b){for(const M of B){const T=this.hashNDegreeQuads(M,ee);if(Y+=ee.getId(M),Y+=`<${T.hash}>`,ee=T.issuer,0!==k.length&&Y>k){b=!0;break}}b||(0===k.length||Y<k)&&(k=Y,oe=ee)}}P.update(k),F=oe}return{hash:P.digest(),issuer:F}}modifyFirstDegreeComponent(E,F){return"BlankNode"!==F.termType?F:{termType:"BlankNode",value:F.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return`<${E.predicate.value}>`}createHashToRelated(E,F){const W=new Map,P=this.blankNodeInfo.get(E).quads;for(const D of P)this._addRelatedBlankNodeHash({quad:D,component:D.subject,position:"s",id:E,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:D,component:D.object,position:"o",id:E,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:D,component:D.graph,position:"g",id:E,issuer:F,hashToRelated:W});return W}_hashAndTrackBlankNode({id:E,hashToBlankNodes:F}){const W=this.hashFirstDegreeQuads(E),P=F.get(W);P?P.push(E):F.set(W,[E])}_addBlankNodeQuadInfo({quad:E,component:F}){if("BlankNode"!==F.termType)return;const W=F.value,P=this.blankNodeInfo.get(W);P?P.quads.add(E):this.blankNodeInfo.set(W,{quads:new Set([E]),hash:null})}_addRelatedBlankNodeHash({quad:E,component:F,position:W,id:P,issuer:D,hashToRelated:se}){if("BlankNode"!==F.termType||F.value===P)return;const x=F.value,k=this.hashRelatedBlankNode(x,E,D,W),oe=se.get(k);oe?oe.push(x):se.set(k,[x])}_componentWithCanonicalId({component:E}){return"BlankNode"!==E.termType||E.value.startsWith(this.canonicalIssuer.prefix)?E:{termType:"BlankNode",value:this.canonicalIssuer.getId(E.value)}}}},6268:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(1126),q=S(624);je.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new C("sha1")}modifyFirstDegreeComponent(X,_,E){return"BlankNode"!==_.termType?_:"graph"===E?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===X?"_:a":"_:z"}}getRelatedPredicate(X){return X.predicate.value}createHashToRelated(X,_){var E=this;return Z(function*(){const F=new Map,W=E.blankNodeInfo.get(X).quads;let P=0;for(const D of W){let se,x;if("BlankNode"===D.subject.termType&&D.subject.value!==X)x=D.subject.value,se="p";else{if("BlankNode"!==D.object.termType||D.object.value===X)continue;x=D.object.value,se="r"}++P%100==0&&(yield E._yield());const k=yield E.hashRelatedBlankNode(x,D,_,se),oe=F.get(k);oe?oe.push(x):F.set(k,[x])}return F})()}}},8911:(je,me,S)=>{"use strict";const Z=S(1126),C=S(203);je.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Z("sha1")}modifyFirstDegreeComponent(G,X,_){return"BlankNode"!==X.termType?X:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:X.value===G?"_:a":"_:z"}}getRelatedPredicate(G){return G.predicate.value}createHashToRelated(G,X){const _=new Map,E=this.blankNodeInfo.get(G).quads;for(const F of E){let W,P;if("BlankNode"===F.subject.termType&&F.subject.value!==G)P=F.subject.value,W="p";else{if("BlankNode"!==F.object.termType||F.object.value===G)continue;P=F.object.value,W="r"}const D=this.hashRelatedBlankNode(P,F,X,W),se=_.get(D);se?se.push(P):_.set(D,[P])}return _}}},4548:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(624),q=S(6268),G=S(203),X=S(8911);let _;try{_=S(7789)}catch{}function E(F){return Array.isArray(F)?F:me.NQuads.legacyDatasetToQuads(F)}me.NQuads=S(8276),me.IdentifierIssuer=S(250),me._rdfCanonizeNative=function(F){return F&&(_=F),_},me.canonize=function(){var F=Z(function*(W,P){const D=E(W);if(P.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((se,x)=>_.canonize(D,P,(k,oe)=>k?x(k):se(oe)))}if("URDNA2015"===P.algorithm)return new C(P).main(D);if("URGNA2012"===P.algorithm){if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new q(P).main(D)}throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(W,P){return F.apply(this,arguments)}}(),me._canonizeSync=function(F,W){const P=E(F);if(W.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(P,W)}if("URDNA2015"===W.algorithm)return new G(W).main(P);if("URGNA2012"===W.algorithm){if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new X(W).main(P)}throw"algorithm"in W?new Error("Invalid RDF Dataset Canonicalization algorithm: "+W.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},5376:function(je,me,S){"use strict";var Z=this&&this.__createBinding||(Object.create?function(q,G,X,_){void 0===_&&(_=X),Object.defineProperty(q,_,{enumerable:!0,get:function(){return G[X]}})}:function(q,G,X,_){void 0===_&&(_=X),q[_]=G[X]}),C=this&&this.__exportStar||function(q,G){for(var X in q)"default"!==X&&!Object.prototype.hasOwnProperty.call(G,X)&&Z(G,q,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(1006),me),C(S(4122),me),C(S(2653),me),C(S(8327),me),C(S(7265),me),C(S(9797),me),C(S(8866),me)},1006:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BlankNode=void 0,me.BlankNode=class S{constructor(C){this.termType="BlankNode",this.value=C}equals(C){return!!C&&"BlankNode"===C.termType&&C.value===this.value}}},4122:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DataFactory=void 0;const Z=S(1006),C=S(2653),q=S(8327),G=S(7265),X=S(9797),_=S(8866);let E=0;me.DataFactory=class F{constructor(P){this.blankNodeCounter=0,this.blankNodePrefix=(P=P||{}).blankNodePrefix||`df_${E++}_`}namedNode(P){return new G.NamedNode(P)}blankNode(P){return new Z.BlankNode(P||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(P,D){return new q.Literal(P,D)}variable(P){return new _.Variable(P)}defaultGraph(){return C.DefaultGraph.INSTANCE}quad(P,D,se,x){return new X.Quad(P,D,se,x||this.defaultGraph())}fromTerm(P){switch(P.termType){case"NamedNode":return this.namedNode(P.value);case"BlankNode":return this.blankNode(P.value);case"Literal":return P.language?this.literal(P.value,P.language):P.datatype.equals(q.Literal.XSD_STRING)?this.literal(P.value):this.literal(P.value,this.fromTerm(P.datatype));case"Variable":return this.variable(P.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(P.subject),this.fromTerm(P.predicate),this.fromTerm(P.object),this.fromTerm(P.graph))}}fromQuad(P){return this.fromTerm(P)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},2653:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DefaultGraph=void 0;class S{constructor(){this.termType="DefaultGraph",this.value=""}equals(C){return!!C&&"DefaultGraph"===C.termType}}me.DefaultGraph=S,S.INSTANCE=new S},8327:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Literal=void 0;const Z=S(7265);class C{constructor(G,X){this.termType="Literal",this.value=G,"string"==typeof X?(this.language=X,this.datatype=C.RDF_LANGUAGE_STRING):X?(this.language="",this.datatype=X):(this.language="",this.datatype=C.XSD_STRING)}equals(G){return!!G&&"Literal"===G.termType&&G.value===this.value&&G.language===this.language&&this.datatype.equals(G.datatype)}}me.Literal=C,C.RDF_LANGUAGE_STRING=new Z.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),C.XSD_STRING=new Z.NamedNode("http://www.w3.org/2001/XMLSchema#string")},7265:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.NamedNode=void 0,me.NamedNode=class S{constructor(C){this.termType="NamedNode",this.value=C}equals(C){return!!C&&"NamedNode"===C.termType&&C.value===this.value}}},9797:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Quad=void 0,me.Quad=class S{constructor(C,q,G,X){this.termType="Quad",this.value="",this.subject=C,this.predicate=q,this.object=G,this.graph=X}equals(C){return!!C&&("Quad"===C.termType||!C.termType)&&this.subject.equals(C.subject)&&this.predicate.equals(C.predicate)&&this.object.equals(C.object)&&this.graph.equals(C.graph)}}},8866:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Variable=void 0,me.Variable=class S{constructor(C){this.termType="Variable",this.value=C}equals(C){return!!C&&"Variable"===C.termType&&C.value===this.value}}},1994:function(je,me,S){"use strict";var Z=this&&this.__createBinding||(Object.create?function(x,k,oe,$){void 0===$&&($=oe);var z=Object.getOwnPropertyDescriptor(k,oe);(!z||("get"in z?!k.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return k[oe]}}),Object.defineProperty(x,$,z)}:function(x,k,oe,$){void 0===$&&($=oe),x[$]=k[oe]}),C=this&&this.__exportStar||function(x,k){for(var oe in x)"default"!==oe&&!Object.prototype.hasOwnProperty.call(k,oe)&&Z(k,x,oe)};Object.defineProperty(me,"__esModule",{value:!0}),me.getSupportedJavaScriptPrimitives=me.getSupportedRdfDatatypes=me.getTermRaw=me.toRdf=me.fromRdf=void 0;const q=S(5376),G=S(8193),X=S(7006);C(S(8193),me),C(S(6997),me),C(S(7006),me);const _=new q.DataFactory,E=new X.Translator;function F(x,k){return E.fromRdf(x,k)}E.registerHandler(new G.TypeHandlerString,G.TypeHandlerString.TYPES.map(x=>_.namedNode(x)),["string"]),E.registerHandler(new G.TypeHandlerBoolean,[G.TypeHandlerBoolean.TYPE].map(x=>_.namedNode(x)),["boolean"]),E.registerHandler(new G.TypeHandlerNumberDouble,G.TypeHandlerNumberDouble.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new G.TypeHandlerNumberInteger,G.TypeHandlerNumberInteger.TYPES.map(x=>_.namedNode(x)),["number"]),E.registerHandler(new G.TypeHandlerDate,G.TypeHandlerDate.TYPES.map(x=>_.namedNode(x)),["object"]),me.fromRdf=F,me.toRdf=function W(x,k){return k&&"namedNode"in k&&(k={dataFactory:k}),(k=k||{})&&!k.dataFactory&&(k.dataFactory=_),E.toRdf(x,k)},me.getTermRaw=function P(x,k){return"Literal"===x.termType?F(x,k):x.value},me.getSupportedRdfDatatypes=function D(){return E.getSupportedRdfDatatypes()},me.getSupportedJavaScriptPrimitives=function se(){return E.getSupportedJavaScriptPrimitives()}},6997:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0})},7006:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Translator=void 0,me.Translator=class S{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(C){throw new Error(`Invalid RDF ${C.datatype.value} value: '${C.value}'`)}registerHandler(C,q,G){for(const X of q)this.supportedRdfDatatypes.push(X),this.fromRdfHandlers[X.value]=C;for(const X of G){let _=this.toRdfHandlers[X];_||(this.toRdfHandlers[X]=_=[]),_.push(C)}}fromRdf(C,q){const G=this.fromRdfHandlers[C.datatype.value];return G?G.fromRdf(C,q):C.value}toRdf(C,q){const G=this.toRdfHandlers[typeof C];if(G)for(const X of G){const _=X.toRdf(C,q);if(_)return _}throw new Error(`Invalid JavaScript value: '${C}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},3133:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerBoolean=void 0;const Z=S(7006);me.TypeHandlerBoolean=(()=>{class q{fromRdf(X,_){switch(X.value){case"true":case"1":return!0;case"false":case"0":return!1}return _&&Z.Translator.incorrectRdfDataType(X),!1}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(X?"true":"false",_||E.namedNode(q.TYPE))}}return q.TYPE="http://www.w3.org/2001/XMLSchema#boolean",q})()},3177:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerDate=void 0;const Z=S(7006);me.TypeHandlerDate=(()=>{class q{fromRdf(X,_){switch(_&&!X.value.match(q.VALIDATORS[X.datatype.value.substr(33,X.datatype.value.length)])&&Z.Translator.incorrectRdfDataType(X),X.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(X.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const E=X.value.split("-");return new Date(0,parseInt(E[0],10)-1,parseInt(E[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(X.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(X.value+"-01");default:return new Date(X.value)}}toRdf(X,{datatype:_,dataFactory:E}){if(_=_||E.namedNode(q.TYPES[0]),!(X instanceof Date))return null;const F=X;let W;switch(_.value){case"http://www.w3.org/2001/XMLSchema#gDay":W=String(F.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":W=F.getUTCMonth()+1+"-"+F.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":W=String(F.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":W=F.getUTCFullYear()+"-"+(F.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":W=F.toISOString().replace(/T.*$/,"");break;default:W=F.toISOString()}return E.literal(W,_)}}return q.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],q.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},q})()},6861:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerNumberDouble=void 0;const Z=S(7006);me.TypeHandlerNumberDouble=(()=>{class q{fromRdf(X,_){const E=parseFloat(X.value);return _&&isNaN(E)&&Z.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return _=_||E.namedNode(q.TYPES[0]),isNaN(X)?E.literal("NaN",_):isFinite(X)?X%1==0?null:E.literal(X.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),_):E.literal(X>0?"INF":"-INF",_)}}return q.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],q})()},8796:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerNumberInteger=void 0;const Z=S(7006);me.TypeHandlerNumberInteger=(()=>{class q{fromRdf(X,_){const E=parseInt(X.value,10);return _&&(isNaN(E)||X.value.indexOf(".")>=0)&&Z.Translator.incorrectRdfDataType(X),E}toRdf(X,{datatype:_,dataFactory:E}){return E.literal(String(X),_||E.namedNode(X<=q.MAX_INT&&X>=q.MIN_INT?q.TYPES[0]:q.TYPES[1]))}}return q.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],q.MAX_INT=2147483647,q.MIN_INT=-2147483648,q})()},4440:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TypeHandlerString=void 0,me.TypeHandlerString=(()=>{class Z{fromRdf(q){return q.value}toRdf(q,{datatype:G,dataFactory:X}){return X.literal(q,G)}}return Z.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Z})()},8193:function(je,me,S){"use strict";var Z=this&&this.__createBinding||(Object.create?function(q,G,X,_){void 0===_&&(_=X);var E=Object.getOwnPropertyDescriptor(G,X);(!E||("get"in E?!G.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return G[X]}}),Object.defineProperty(q,_,E)}:function(q,G,X,_){void 0===_&&(_=X),q[_]=G[X]}),C=this&&this.__exportStar||function(q,G){for(var X in q)"default"!==X&&!Object.prototype.hasOwnProperty.call(G,X)&&Z(G,q,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(3133),me),C(S(3177),me),C(S(6861),me),C(S(8796),me),C(S(4440),me)},2756:function(je,me,S){"use strict";var Z=this&&this.__createBinding||(Object.create?function(q,G,X,_){void 0===_&&(_=X),Object.defineProperty(q,_,{enumerable:!0,get:function(){return G[X]}})}:function(q,G,X,_){void 0===_&&(_=X),q[_]=G[X]}),C=this&&this.__exportStar||function(q,G){for(var X in q)"default"!==X&&!Object.prototype.hasOwnProperty.call(G,X)&&Z(G,q,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(392),me)},2725:(je,me)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseError=void 0;class S extends Error{constructor(C,q){const G=C.saxStream._parser;super(C.trackPosition?`Line ${G.line+1} column ${G.column+1}: ${q}`:q)}}me.ParseError=S},392:(je,me,S)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseType=me.RdfXmlParser=void 0;const Z=S(2011),C=S(6620),q=S(7045),G=S(2725),X=S(5376);class _ extends q.Transform{constructor(W){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},W&&(Object.assign(this,W),this.options=W),this.dataFactory||(this.dataFactory=new X.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=C.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(W,P){const D={};let se=!1;for(const k in W.attributes)k.startsWith("xmlns")&&(5===k.length?(se=!0,D[""]=W.attributes[k]):":"===k.charAt(5)&&(se=!0,D[k.substr(6)]=W.attributes[k]));const x=P&&P.ns?P.ns:[_.DEFAULT_NS];return se?x.concat([D]):x}static expandPrefixedTerm(W,P,D){const se=W.indexOf(":");let x,k;se>=0?(x=W.substr(0,se),k=W.substr(se+1)):(x="",k=W);let oe=null,$=null;for(let z=P.length-1;z>=0;z--){const ee=P[z][x];if(ee){oe=ee;break}$||($=P[z][""])}if(!oe){if(x&&"xmlns"!==x)throw new G.ParseError(D,`The prefix '${x}' in term '${W}' was not bound.`);oe=$||""}return{prefix:x,local:k,uri:oe}}static isValidIri(W){return _.IRI_REGEX.test(W)}import(W){const P=new q.PassThrough({readableObjectMode:!0});W.on("error",se=>D.emit("error",se)),W.on("data",se=>P.push(se)),W.on("end",()=>P.push(null));const D=P.pipe(new _(this.options));return D}_transform(W,P,D){try{this.saxStream.write(W,P)}catch(se){return D(se)}D()}newParseError(W){return new G.ParseError(this,W)}valueToUri(W,P){return this.uriToNamedNode(Z.resolve(W,P.baseIRI))}uriToNamedNode(W){if(!_.isValidIri(W))throw this.newParseError(`Invalid URI: ${W}`);return this.dataFactory.namedNode(W)}validateNcname(W){if(!_.NCNAME_MATCHER.test(W))throw this.newParseError(`Not a valid NCName: ${W}`)}attachSaxListeners(){this.saxStream.on("error",W=>this.emit("error",W)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(W){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let D=E.RESOURCE;if(P&&(P.hadChildren=!0,D=P.childrenParseType),P&&P.childrenStringTags){const x=W.name;let k="";for(const ee in W.attributes)k+=` ${ee}="${W.attributes[ee]}"`;P.childrenStringTags.push(`<${x}${k}>`);const z={childrenStringTags:P.childrenStringTags};return z.childrenStringEmitClosingTag=`</${x}>`,void this.activeTagStack.push(z)}const se={};P?(se.language=P.language,se.baseIRI=P.baseIRI):se.baseIRI=this.baseIRI,this.activeTagStack.push(se),se.ns=_.parseNamespace(W,P),D===E.RESOURCE?this.onTagResource(W,se,P,!P):this.onTagProperty(W,se,P)}onTagResource(W,P,D,se){const x=_.expandPrefixedTerm(W.name,P.ns,this);P.childrenParseType=E.PROPERTY;let k=!0;if(x.uri===_.RDF){if(!se&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(x.local)>=0)throw this.newParseError(`Illegal node element name: ${x.local}`);switch(x.local){case"RDF":P.childrenParseType=E.RESOURCE;case"Description":k=!1}}const oe=[],$=[];let z=null,ee=!1,Y=!1,B=null;for(const b in W.attributes){const M=W.attributes[b],T=_.expandPrefixedTerm(b,P.ns,this);if(D&&T.uri===_.RDF)switch(T.local){case"about":if(z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${z} where found.`);z=M;continue;case"ID":if(z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${z} where found.`);this.validateNcname(M),z="#"+M,ee=!0;continue;case"nodeID":if(z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${M} and ${z} where found.`);this.validateNcname(M),z=M,Y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":B=M;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===_.XML){if("lang"===T.local){P.language=""===M?null:M.toLowerCase();continue}if("base"===T.local){P.baseIRI=Z.resolve(M,P.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(oe.push(this.uriToNamedNode(T.uri+T.local)),$.push(M))}if(null!==z&&(P.subject=Y?this.dataFactory.blankNode(z):this.valueToUri(z,P),ee&&this.claimNodeId(P.subject)),P.subject||(P.subject=this.dataFactory.blankNode()),k){const b=this.uriToNamedNode(x.uri+x.local);this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),b,D?D.reifiedStatementId:null)}if(D){if(D.predicate)if(D.childrenCollectionSubject){const b=this.dataFactory.blankNode();this.emitTriple(D.childrenCollectionSubject,D.childrenCollectionPredicate,b,D.reifiedStatementId),this.emitTriple(b,this.dataFactory.namedNode(_.RDF+"first"),P.subject,P.reifiedStatementId),D.childrenCollectionSubject=b,D.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(D.subject,D.predicate,P.subject,D.reifiedStatementId);for(let b=0;b<D.predicateSubPredicates.length;b++)this.emitTriple(P.subject,D.predicateSubPredicates[b],D.predicateSubObjects[b],null);D.predicateSubPredicates=[],D.predicateSubObjects=[],D.predicateEmitted=!0}for(let b=0;b<oe.length;b++){const M=this.dataFactory.literal($[b],P.datatype||P.language);this.emitTriple(P.subject,oe[b],M,D.reifiedStatementId)}B&&this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(B),null)}}onTagProperty(W,P,D){const se=_.expandPrefixedTerm(W.name,P.ns,this);if(P.childrenParseType=E.RESOURCE,P.subject=D.subject,se.uri===_.RDF&&"li"===se.local?(D.listItemCounter||(D.listItemCounter=1),P.predicate=this.uriToNamedNode(se.uri+"_"+D.listItemCounter++)):P.predicate=this.uriToNamedNode(se.uri+se.local),se.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(se.local)>=0)throw this.newParseError(`Illegal property element name: ${se.local}`);P.predicateSubPredicates=[],P.predicateSubObjects=[];let x=!1,k=!1,oe=null,$=!0;const z=[],ee=[];for(const Y in W.attributes){const B=W.attributes[Y],b=_.expandPrefixedTerm(Y,P.ns,this);if(b.uri===_.RDF)switch(b.local){case"resource":if(oe)throw this.newParseError(`Found both rdf:resource (${B}) and rdf:nodeID (${oe}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${B})`);P.hadChildren=!0,oe=B,$=!1;continue;case"datatype":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${B}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${B})`);P.datatype=this.valueToUri(B,P);continue;case"nodeID":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${B}).`);if(P.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${B}).`);if(x)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${B})`);this.validateNcname(B),P.hadChildren=!0,oe=B,$=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(k)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(P.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${P.datatype.value})`);if(oe)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${oe})`);if("Resource"===B){x=!0,P.childrenParseType=E.PROPERTY;const M=this.dataFactory.blankNode();this.emitTriple(P.subject,P.predicate,M,P.reifiedStatementId),P.subject=M,P.predicate=null}else"Collection"===B?(x=!0,P.hadChildren=!0,P.childrenCollectionSubject=P.subject,P.childrenCollectionPredicate=P.predicate,$=!1):"Literal"===B&&(x=!0,P.childrenTagsToString=!0,P.childrenStringTags=[]);continue;case"ID":this.validateNcname(B),P.reifiedStatementId=this.valueToUri("#"+B,P),this.claimNodeId(P.reifiedStatementId);continue}else if(b.uri===_.XML&&"lang"===b.local){P.language=""===B?null:B.toLowerCase();continue}if("xml"!==b.prefix&&"xmlns"!==b.prefix&&b.uri){if(x||P.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${B}`);P.hadChildren=!0,k=!0,z.push(this.uriToNamedNode(b.uri+b.local)),ee.push(this.dataFactory.literal(B,P.datatype||P.language))}}if(null!==oe){const Y=P.subject;P.subject=$?this.dataFactory.blankNode(oe):this.valueToUri(oe,P),this.emitTriple(Y,P.predicate,P.subject,P.reifiedStatementId);for(let B=0;B<z.length;B++)this.emitTriple(P.subject,z[B],ee[B],null);P.predicateEmitted=!0}else $&&(P.predicateSubPredicates=z,P.predicateSubObjects=ee,P.predicateEmitted=!1)}emitTriple(W,P,D,se){this.push(this.dataFactory.quad(W,P,D,this.defaultGraph)),se&&(this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"subject"),W,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"predicate"),P,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"object"),D,this.defaultGraph)))}claimNodeId(W){if(!this.allowDuplicateRdfIds){if(this.nodeIds[W.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${W.value}'.`);this.nodeIds[W.value]=!0}}onText(W){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;P&&(P.childrenStringTags?P.childrenStringTags.push(W):P.predicate&&(P.text=W))}onCloseTag(){const W=this.activeTagStack.pop();if(W.childrenStringEmitClosingTag&&W.childrenStringTags.push(W.childrenStringEmitClosingTag),W.childrenTagsToString&&(W.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),W.text=W.childrenStringTags.join(""),W.hadChildren=!1),W.childrenCollectionSubject)this.emitTriple(W.childrenCollectionSubject,W.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),W.reifiedStatementId);else if(W.predicate)if(W.hadChildren||W.childrenParseType===E.PROPERTY){if(!W.predicateEmitted){const P=this.dataFactory.blankNode();this.emitTriple(W.subject,W.predicate,P,W.reifiedStatementId);for(let D=0;D<W.predicateSubPredicates.length;D++)this.emitTriple(P,W.predicateSubPredicates[D],W.predicateSubObjects[D],null)}}else this.emitTriple(W.subject,W.predicate,this.dataFactory.literal(W.text||"",W.datatype||W.language),W.reifiedStatementId)}onDoctype(W){W.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(P,D,se)=>(this.saxStream._parser.ENTITIES[D]=se,""))}}var E,F;me.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(F=E=me.ParseType||(me.ParseType={}))[F.RESOURCE=0]="RESOURCE",F[F.PROPERTY=1]="PROPERTY"},8992:(je,me,S)=>{"use strict";const{SymbolDispose:Z}=S(1251),{AbortError:C,codes:q}=S(5480),{isNodeStream:G,isWebStream:X,kControllerErrorFunction:_}=S(6110),E=S(3139),{ERR_INVALID_ARG_TYPE:F}=q;let W;je.exports.addAbortSignal=function(se,x){if(((D,se)=>{if("object"!=typeof D||!("aborted"in D))throw new F("signal","AbortSignal",D)})(se),!G(x)&&!X(x))throw new F("stream",["ReadableStream","WritableStream","Stream"],x);return je.exports.addAbortSignalNoValidate(se,x)},je.exports.addAbortSignalNoValidate=function(D,se){if("object"!=typeof D||!("aborted"in D))return se;const x=G(se)?()=>{se.destroy(new C(void 0,{cause:D.reason}))}:()=>{se[_](new C(void 0,{cause:D.reason}))};if(D.aborted)x();else{W=W||S(1663).addAbortListener;const k=W(D,x);E(se,k[Z])}return se}},9588:(je,me,S)=>{"use strict";const{StringPrototypeSlice:Z,SymbolIterator:C,TypedArrayPrototypeSet:q,Uint8Array:G}=S(1251),{Buffer:X}=S(2317),{inspect:_}=S(1663);je.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(F){const W={data:F,next:null};this.length>0?this.tail.next=W:this.head=W,this.tail=W,++this.length}unshift(F){const W={data:F,next:this.head};0===this.length&&(this.tail=W),this.head=W,++this.length}shift(){if(0===this.length)return;const F=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,F}clear(){this.head=this.tail=null,this.length=0}join(F){if(0===this.length)return"";let W=this.head,P=""+W.data;for(;null!==(W=W.next);)P+=F+W.data;return P}concat(F){if(0===this.length)return X.alloc(0);const W=X.allocUnsafe(F>>>0);let P=this.head,D=0;for(;P;)q(W,P.data,D),D+=P.data.length,P=P.next;return W}consume(F,W){const P=this.head.data;if(F<P.length){const D=P.slice(0,F);return this.head.data=P.slice(F),D}return F===P.length?this.shift():W?this._getString(F):this._getBuffer(F)}first(){return this.head.data}*[C](){for(let F=this.head;F;F=F.next)yield F.data}_getString(F){let W="",P=this.head,D=0;do{const se=P.data;if(!(F>se.length)){F===se.length?(W+=se,++D,this.head=P.next?P.next:this.tail=null):(W+=Z(se,0,F),this.head=P,P.data=Z(se,F));break}W+=se,F-=se.length,++D}while(null!==(P=P.next));return this.length-=D,W}_getBuffer(F){const W=X.allocUnsafe(F),P=F;let D=this.head,se=0;do{const x=D.data;if(!(F>x.length)){F===x.length?(q(W,x,P-F),++se,this.head=D.next?D.next:this.tail=null):(q(W,new G(x.buffer,x.byteOffset,F),P-F),this.head=D,D.data=x.slice(F));break}q(W,x,P-F),F-=x.length,++se}while(null!==(D=D.next));return this.length-=se,W}[Symbol.for("nodejs.util.inspect.custom")](F,W){return _(this,{...W,depth:0,customInspect:!1})}}},6683:(je,me,S)=>{"use strict";var Z=S(9293).default;const{pipeline:C}=S(6249),q=S(9613),{destroyer:G}=S(1509),{isNodeStream:X,isReadable:_,isWritable:E,isWebStream:F,isTransformStream:W,isWritableStream:P,isReadableStream:D}=S(6110),{AbortError:se,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:k}}=S(5480),oe=S(3139);je.exports=function(...z){if(0===z.length)throw new k("streams");if(1===z.length)return q.from(z[0]);const ee=[...z];if("function"==typeof z[0]&&(z[0]=q.from(z[0])),"function"==typeof z[z.length-1]){const Oe=z.length-1;z[Oe]=q.from(z[Oe])}for(let Oe=0;Oe<z.length;++Oe)if(X(z[Oe])||F(z[Oe])){if(Oe<z.length-1&&!(_(z[Oe])||D(z[Oe])||W(z[Oe])))throw new x(`streams[${Oe}]`,ee[Oe],"must be readable");if(Oe>0&&!(E(z[Oe])||P(z[Oe])||W(z[Oe])))throw new x(`streams[${Oe}]`,ee[Oe],"must be writable")}let Y,B,b,M,T;const j=z[0],Me=C(z,function le(Oe){const Ve=M;M=null,Ve?Ve(Oe):Oe?T.destroy(Oe):!xe&&!ae&&T.destroy()}),ae=!!(E(j)||P(j)||W(j)),xe=!!(_(Me)||D(Me)||W(Me));if(T=new q({writableObjectMode:!(null==j||!j.writableObjectMode),readableObjectMode:!(null==Me||!Me.readableObjectMode),writable:ae,readable:xe}),ae){if(X(j))T._write=function(Ve,Qe,Je){j.write(Ve,Qe)?Je():Y=Je},T._final=function(Ve){j.end(),B=Ve},j.on("drain",function(){if(Y){const Ve=Y;Y=null,Ve()}});else if(F(j)){const Qe=(W(j)?j.writable:j).getWriter();T._write=function(){var Je=Z(function*(Ce,Be,Ae){try{yield Qe.ready,Qe.write(Ce).catch(()=>{}),Ae()}catch(ke){Ae(ke)}});return function(Ce,Be,Ae){return Je.apply(this,arguments)}}(),T._final=function(){var Je=Z(function*(Ce){try{yield Qe.ready,Qe.close().catch(()=>{}),B=Ce}catch(Be){Ce(Be)}});return function(Ce){return Je.apply(this,arguments)}}()}const Oe=W(Me)?Me.readable:Me;oe(Oe,()=>{if(B){const Ve=B;B=null,Ve()}})}if(xe)if(X(Me))Me.on("readable",function(){if(b){const Oe=b;b=null,Oe()}}),Me.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Oe=Me.read();if(null===Oe)return void(b=T._read);if(!T.push(Oe))return}};else if(F(Me)){const Ve=(W(Me)?Me.readable:Me).getReader();T._read=Z(function*(){for(;;)try{const{value:Qe,done:Je}=yield Ve.read();if(!T.push(Qe))return;if(Je)return void T.push(null)}catch{return}})}return T._destroy=function(Oe,Ve){!Oe&&null!==M&&(Oe=new se),b=null,Y=null,B=null,null===M?Ve(Oe):(M=Ve,X(Me)&&G(Me,Oe))},T}},1509:(je,me,S)=>{"use strict";const Z=S(573),{aggregateTwoErrors:C,codes:{ERR_MULTIPLE_CALLBACK:q},AbortError:G}=S(5480),{Symbol:X}=S(1251),{kIsDestroyed:_,isDestroyed:E,isFinished:F,isServerRequest:W}=S(6110),P=X("kDestroy"),D=X("kConstruct");function se(ae,xe,Oe){ae&&(xe&&!xe.errored&&(xe.errored=ae),Oe&&!Oe.errored&&(Oe.errored=ae))}function k(ae,xe,Oe){let Ve=!1;function Qe(Je){if(Ve)return;Ve=!0;const Ce=ae._readableState,Be=ae._writableState;se(Je,Be,Ce),Be&&(Be.closed=!0),Ce&&(Ce.closed=!0),"function"==typeof Oe&&Oe(Je),Je?Z.nextTick(oe,ae,Je):Z.nextTick($,ae)}try{ae._destroy(xe||null,Qe)}catch(Je){Qe(Je)}}function oe(ae,xe){z(ae,xe),$(ae)}function $(ae){const xe=ae._readableState,Oe=ae._writableState;Oe&&(Oe.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=xe&&xe.emitClose)&&ae.emit("close")}function z(ae,xe){const Oe=ae._readableState,Ve=ae._writableState;null!=Ve&&Ve.errorEmitted||null!=Oe&&Oe.errorEmitted||(Ve&&(Ve.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),ae.emit("error",xe))}function Y(ae,xe,Oe){const Ve=ae._readableState,Qe=ae._writableState;if(null!=Qe&&Qe.destroyed||null!=Ve&&Ve.destroyed)return this;null!=Ve&&Ve.autoDestroy||null!=Qe&&Qe.autoDestroy?ae.destroy(xe):xe&&(Qe&&!Qe.errored&&(Qe.errored=xe),Ve&&!Ve.errored&&(Ve.errored=xe),Oe?Z.nextTick(z,ae,xe):z(ae,xe))}function b(ae){let xe=!1;function Oe(Ve){if(xe)return void Y(ae,Ve??new q);xe=!0;const Qe=ae._readableState,Je=ae._writableState,Ce=Je||Qe;Qe&&(Qe.constructed=!0),Je&&(Je.constructed=!0),Ce.destroyed?ae.emit(P,Ve):Ve?Y(ae,Ve,!0):Z.nextTick(M,ae)}try{ae._construct(Ve=>{Z.nextTick(Oe,Ve)})}catch(Ve){Z.nextTick(Oe,Ve)}}function M(ae){ae.emit(D)}function T(ae){return ae?.setHeader&&"function"==typeof ae.abort}function le(ae){ae.emit("close")}function j(ae,xe){ae.emit("error",xe),Z.nextTick(le,ae)}je.exports={construct:function B(ae,xe){if("function"!=typeof ae._construct)return;const Oe=ae._readableState,Ve=ae._writableState;Oe&&(Oe.constructed=!1),Ve&&(Ve.constructed=!1),ae.once(D,xe),!(ae.listenerCount(D)>1)&&Z.nextTick(b,ae)},destroyer:function Me(ae,xe){!ae||E(ae)||(!xe&&!F(ae)&&(xe=new G),W(ae)?(ae.socket=null,ae.destroy(xe)):T(ae)?ae.abort():T(ae.req)?ae.req.abort():"function"==typeof ae.destroy?ae.destroy(xe):"function"==typeof ae.close?ae.close():xe?Z.nextTick(j,ae,xe):Z.nextTick(le,ae),ae.destroyed||(ae[_]=!0))},destroy:function x(ae,xe){const Oe=this._readableState,Ve=this._writableState,Qe=Ve||Oe;return null!=Ve&&Ve.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof xe&&xe(),this):(se(ae,Ve,Oe),Ve&&(Ve.destroyed=!0),Oe&&(Oe.destroyed=!0),Qe.constructed?k(this,ae,xe):this.once(P,function(Je){k(this,C(Je,ae),xe)}),this)},undestroy:function ee(){const ae=this._readableState,xe=this._writableState;ae&&(ae.constructed=!0,ae.closed=!1,ae.closeEmitted=!1,ae.destroyed=!1,ae.errored=null,ae.errorEmitted=!1,ae.reading=!1,ae.ended=!1===ae.readable,ae.endEmitted=!1===ae.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:Y}},9613:(je,me,S)=>{"use strict";const{ObjectDefineProperties:Z,ObjectGetOwnPropertyDescriptor:C,ObjectKeys:q,ObjectSetPrototypeOf:G}=S(1251);je.exports=E;const X=S(5779),_=S(2983);G(E.prototype,X.prototype),G(E,X);{const D=q(_.prototype);for(let se=0;se<D.length;se++){const x=D[se];E.prototype[x]||(E.prototype[x]=_.prototype[x])}}function E(D){if(!(this instanceof E))return new E(D);X.call(this,D),_.call(this,D),D?(this.allowHalfOpen=!1!==D.allowHalfOpen,!1===D.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===D.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let F,P;function W(){return void 0===F&&(F={}),F}Z(E.prototype,{writable:{__proto__:null,...C(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...C(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...C(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...C(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...C(_.prototype,"writableLength")},writableFinished:{__proto__:null,...C(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...C(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...C(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...C(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(D){this._readableState&&this._writableState&&(this._readableState.destroyed=D,this._writableState.destroyed=D)}}}),E.fromWeb=function(D,se){return W().newStreamDuplexFromReadableWritablePair(D,se)},E.toWeb=function(D){return W().newReadableWritablePairFromDuplex(D)},E.from=function(D){return P||(P=S(4803)),P(D,"body")}},4803:(je,me,S)=>{var Z=S(9293).default,C=S(3344).default,q=S(2958).default;const G=S(573),X=S(2317),{isReadable:_,isWritable:E,isIterable:F,isNodeStream:W,isReadableNodeStream:P,isWritableNodeStream:D,isDuplexNodeStream:se,isReadableStream:x,isWritableStream:k}=S(6110),oe=S(3139),{AbortError:$,codes:{ERR_INVALID_ARG_TYPE:z,ERR_INVALID_RETURN_VALUE:ee}}=S(5480),{destroyer:Y}=S(1509),B=S(9613),b=S(5779),M=S(2983),{createDeferredPromise:T}=S(1663),le=S(3447),j=globalThis.Blob||X.Blob,Me=typeof j<"u"?function(Ce){return Ce instanceof j}:function(Ce){return!1},ae=globalThis.AbortController||S(9465).AbortController,{FunctionPrototypeCall:xe}=S(1251);class Oe extends B{constructor(Ce){super(Ce),!1===Ce?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Ce?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Qe(Je){const Ce=Je.readable&&"function"!=typeof Je.readable.read?b.wrap(Je.readable):Je.readable,Be=Je.writable;let de,Se,rt,mt,qe,Ae=!!_(Ce),ke=!!E(Be);function fe(R){const A=mt;mt=null,A?A(R):R&&qe.destroy(R)}return qe=new Oe({readableObjectMode:!(null==Ce||!Ce.readableObjectMode),writableObjectMode:!(null==Be||!Be.writableObjectMode),readable:Ae,writable:ke}),ke&&(oe(Be,R=>{ke=!1,R&&Y(Ce,R),fe(R)}),qe._write=function(R,A,ie){Be.write(R,A)?ie():de=ie},qe._final=function(R){Be.end(),Se=R},Be.on("drain",function(){if(de){const R=de;de=null,R()}}),Be.on("finish",function(){if(Se){const R=Se;Se=null,R()}})),Ae&&(oe(Ce,R=>{Ae=!1,R&&Y(Ce,R),fe(R)}),Ce.on("readable",function(){if(rt){const R=rt;rt=null,R()}}),Ce.on("end",function(){qe.push(null)}),qe._read=function(){for(;;){const R=Ce.read();if(null===R)return void(rt=qe._read);if(!qe.push(R))return}}),qe._destroy=function(R,A){!R&&null!==mt&&(R=new $),rt=null,de=null,Se=null,null===mt?A(R):(mt=A,Y(Be,R),Y(Ce,R))},qe}je.exports=function Je(Ce,Be){if(se(Ce))return Ce;if(P(Ce))return Qe({readable:Ce});if(D(Ce))return Qe({writable:Ce});if(W(Ce))return Qe({writable:!1,readable:!1});if(x(Ce))return Qe({readable:b.fromWeb(Ce)});if(k(Ce))return Qe({writable:M.fromWeb(Ce)});if("function"==typeof Ce){const{value:ke,write:de,final:Se,destroy:rt}=function Ve(Je){let{promise:Ce,resolve:Be}=T();const Ae=new ae,ke=Ae.signal;return{value:Je(q(function*(){for(;;){const Se=Ce;Ce=null;const{chunk:rt,done:mt,cb:qe}=yield C(Se);if(G.nextTick(qe),mt)return;if(ke.aborted)throw new $(void 0,{cause:ke.reason});({promise:Ce,resolve:Be}=T()),yield rt}})(),{signal:ke}),write(Se,rt,mt){const qe=Be;Be=null,qe({chunk:Se,done:!1,cb:mt})},final(Se){const rt=Be;Be=null,rt({done:!0,cb:Se})},destroy(Se,rt){Ae.abort(),rt(Se)}}}(Ce);if(F(ke))return le(Oe,ke,{objectMode:!0,write:de,final:Se,destroy:rt});const mt=ke?.then;if("function"==typeof mt){let qe;const fe=xe(mt,ke,R=>{if(null!=R)throw new ee("nully","body",R)},R=>{Y(qe,R)});return qe=new Oe({objectMode:!0,readable:!1,write:de,final(R){Se(Z(function*(){try{yield fe,G.nextTick(R,null)}catch(A){G.nextTick(R,A)}}))},destroy:rt})}throw new ee("Iterable, AsyncIterable or AsyncFunction",Be,ke)}if(Me(Ce))return Je(Ce.arrayBuffer());if(F(Ce))return le(Oe,Ce,{objectMode:!0,writable:!1});if(x(Ce?.readable)&&k(Ce?.writable))return Oe.fromWeb(Ce);if("object"==typeof Ce?.writable||"object"==typeof Ce?.readable)return Qe({readable:null!=Ce&&Ce.readable?P(Ce?.readable)?Ce?.readable:Je(Ce.readable):void 0,writable:null!=Ce&&Ce.writable?D(Ce?.writable)?Ce?.writable:Je(Ce.writable):void 0});const Ae=Ce?.then;if("function"==typeof Ae){let ke;return xe(Ae,Ce,de=>{null!=de&&ke.push(de),ke.push(null)},de=>{Y(ke,de)}),ke=new Oe({objectMode:!0,writable:!1,read(){}})}throw new z(Be,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Ce)}},3139:(je,me,S)=>{const Z=S(573),{AbortError:C,codes:q}=S(5480),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_PREMATURE_CLOSE:X}=q,{kEmptyObject:_,once:E}=S(1663),{validateAbortSignal:F,validateFunction:W,validateObject:P,validateBoolean:D}=S(438),{Promise:se,PromisePrototypeThen:x,SymbolDispose:k}=S(1251),{isClosed:oe,isReadable:$,isReadableNodeStream:z,isReadableStream:ee,isReadableFinished:Y,isReadableErrored:B,isWritable:b,isWritableNodeStream:M,isWritableStream:T,isWritableFinished:le,isWritableErrored:j,isNodeStream:Me,willEmitClose:ae,kIsClosedPromise:xe}=S(6110);let Oe;const Qe=()=>{};function Je(Ae,ke,de){var Se,rt;if(2===arguments.length?(de=ke,ke=_):null==ke?ke=_:P(ke,"options"),W(de,"callback"),F(ke.signal,"options.signal"),de=E(de),ee(Ae)||T(Ae))return function Ce(Ae,ke,de){let Se=!1,rt=Qe;if(ke.signal)if(rt=()=>{Se=!0,de.call(Ae,new C(void 0,{cause:ke.signal.reason}))},ke.signal.aborted)Z.nextTick(rt);else{Oe=Oe||S(1663).addAbortListener;const qe=Oe(ke.signal,rt),fe=de;de=E((...R)=>{qe[k](),fe.apply(Ae,R)})}const mt=(...qe)=>{Se||Z.nextTick(()=>de.apply(Ae,qe))};return x(Ae[xe].promise,mt,mt),Qe}(Ae,ke,de);if(!Me(Ae))throw new G("stream",["ReadableStream","WritableStream","Stream"],Ae);const mt=null!==(Se=ke.readable)&&void 0!==Se?Se:z(Ae),qe=null!==(rt=ke.writable)&&void 0!==rt?rt:M(Ae),fe=Ae._writableState,R=Ae._readableState,A=()=>{Ae.writable||He()};let ie=ae(Ae)&&z(Ae)===mt&&M(Ae)===qe,J=le(Ae,!1);const He=()=>{J=!0,Ae.destroyed&&(ie=!1),(!ie||Ae.readable&&!mt)&&(!mt||Xe)&&de.call(Ae)};let Xe=Y(Ae,!1);const ue=()=>{Xe=!0,Ae.destroyed&&(ie=!1),(!ie||Ae.writable&&!qe)&&(!qe||J)&&de.call(Ae)},te=Ee=>{de.call(Ae,Ee)};let U=oe(Ae);const I=()=>{U=!0;const Ee=j(Ae)||B(Ae);return Ee&&"boolean"!=typeof Ee?de.call(Ae,Ee):mt&&!Xe&&z(Ae,!0)&&!Y(Ae,!1)?de.call(Ae,new X):!qe||J||le(Ae,!1)?void de.call(Ae):de.call(Ae,new X)},N=()=>{U=!0;const Ee=j(Ae)||B(Ae);if(Ee&&"boolean"!=typeof Ee)return de.call(Ae,Ee);de.call(Ae)},he=()=>{Ae.req.on("finish",He)};!function Ve(Ae){return Ae.setHeader&&"function"==typeof Ae.abort}(Ae)?qe&&!fe&&(Ae.on("end",A),Ae.on("close",A)):(Ae.on("complete",He),ie||Ae.on("abort",I),Ae.req?he():Ae.on("request",he)),!ie&&"boolean"==typeof Ae.aborted&&Ae.on("aborted",I),Ae.on("end",ue),Ae.on("finish",He),!1!==ke.error&&Ae.on("error",te),Ae.on("close",I),U?Z.nextTick(I):null!=fe&&fe.errorEmitted||null!=R&&R.errorEmitted?ie||Z.nextTick(N):(!mt&&(!ie||$(Ae))&&(J||!1===b(Ae))||!qe&&(!ie||b(Ae))&&(Xe||!1===$(Ae))||R&&Ae.req&&Ae.aborted)&&Z.nextTick(N);const We=()=>{de=Qe,Ae.removeListener("aborted",I),Ae.removeListener("complete",He),Ae.removeListener("abort",I),Ae.removeListener("request",he),Ae.req&&Ae.req.removeListener("finish",He),Ae.removeListener("end",A),Ae.removeListener("close",A),Ae.removeListener("finish",He),Ae.removeListener("end",ue),Ae.removeListener("error",te),Ae.removeListener("close",I)};if(ke.signal&&!U){const Ee=()=>{const Ue=de;We(),Ue.call(Ae,new C(void 0,{cause:ke.signal.reason}))};if(ke.signal.aborted)Z.nextTick(Ee);else{Oe=Oe||S(1663).addAbortListener;const Ue=Oe(ke.signal,Ee),Ze=de;de=E((...vt)=>{Ue[k](),Ze.apply(Ae,vt)})}}return We}je.exports=Je,je.exports.finished=function Be(Ae,ke){var de;let Se=!1;return null===ke&&(ke=_),null!==(de=ke)&&void 0!==de&&de.cleanup&&(D(ke.cleanup,"cleanup"),Se=ke.cleanup),new se((rt,mt)=>{const qe=Je(Ae,ke,fe=>{Se&&qe(),fe?mt(fe):rt()})})}},3447:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(573),{PromisePrototypeThen:q,SymbolAsyncIterator:G,SymbolIterator:X}=S(1251),{Buffer:_}=S(2317),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:F}=S(5480).codes;je.exports=function W(P,D,se){let x,k;if("string"==typeof D||D instanceof _)return new P({objectMode:!0,...se,read(){this.push(D),this.push(null)}});if(D&&D[G])k=!0,x=D[G]();else{if(!D||!D[X])throw new E("iterable",["Iterable"],D);k=!1,x=D[X]()}const oe=new P({objectMode:!0,highWaterMark:1,...se});let $=!1;function ee(){return(ee=Z(function*(b){if(null!=b&&"function"==typeof x.throw){const{value:le,done:j}=yield x.throw(b);if(yield le,j)return}if("function"==typeof x.return){const{value:le}=yield x.return();yield le}})).apply(this,arguments)}function B(){return(B=Z(function*(){for(;;){try{const{value:b,done:M}=k?yield x.next():x.next();if(M)oe.push(null);else{const T=b&&"function"==typeof b.then?yield b:b;if(null===T)throw $=!1,new F;if(oe.push(T))continue;$=!1}}catch(b){oe.destroy(b)}break}})).apply(this,arguments)}return oe._read=function(){$||($=!0,function Y(){B.apply(this,arguments)}())},oe._destroy=function(b,M){q(function z(b){return ee.apply(this,arguments)}(b),()=>C.nextTick(M,b),T=>C.nextTick(M,T||b))},oe}},8708:(je,me,S)=>{"use strict";const{ArrayIsArray:Z,ObjectSetPrototypeOf:C}=S(1251),{EventEmitter:q}=S(4356);function G(_){q.call(this,_)}function X(_,E,F){if("function"==typeof _.prependListener)return _.prependListener(E,F);_._events&&_._events[E]?Z(_._events[E])?_._events[E].unshift(F):_._events[E]=[F,_._events[E]]:_.on(E,F)}C(G.prototype,q.prototype),C(G,q),G.prototype.pipe=function(_,E){const F=this;function W($){_.writable&&!1===_.write($)&&F.pause&&F.pause()}function P(){F.readable&&F.resume&&F.resume()}F.on("data",W),_.on("drain",P),!_._isStdio&&(!E||!1!==E.end)&&(F.on("end",se),F.on("close",x));let D=!1;function se(){D||(D=!0,_.end())}function x(){D||(D=!0,"function"==typeof _.destroy&&_.destroy())}function k($){oe(),0===q.listenerCount(this,"error")&&this.emit("error",$)}function oe(){F.removeListener("data",W),_.removeListener("drain",P),F.removeListener("end",se),F.removeListener("close",x),F.removeListener("error",k),_.removeListener("error",k),F.removeListener("end",oe),F.removeListener("close",oe),_.removeListener("close",oe)}return X(F,"error",k),X(_,"error",k),F.on("end",oe),F.on("close",oe),_.on("close",oe),_.emit("pipe",F),_},je.exports={Stream:G,prependListener:X}},1210:(je,me,S)=>{"use strict";var Z=S(9293).default,C=S(3513).default,q=S(2881).default,G=S(3344).default,X=S(2958).default;const _=globalThis.AbortController||S(9465).AbortController,{codes:{ERR_INVALID_ARG_VALUE:E,ERR_INVALID_ARG_TYPE:F,ERR_MISSING_ARGS:W,ERR_OUT_OF_RANGE:P},AbortError:D}=S(5480),{validateAbortSignal:se,validateInteger:x,validateObject:k}=S(438),oe=S(1251).Symbol("kWeak"),$=S(1251).Symbol("kResistStopPropagation"),{finished:z}=S(3139),ee=S(6683),{addAbortSignalNoValidate:Y}=S(8992),{isWritable:B,isNodeStream:b}=S(6110),{deprecate:M}=S(1663),{ArrayPrototypePush:T,Boolean:le,MathFloor:j,Number:Me,NumberIsNaN:ae,Promise:xe,PromiseReject:Oe,PromiseResolve:Ve,PromisePrototypeThen:Qe,Symbol:Je}=S(1251),Ce=Je("kEmpty"),Be=Je("kEof");function ke(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);null!=Ue&&k(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal");let Ze=1;null!=Ue?.concurrency&&(Ze=j(Ue.concurrency));let vt=Ze-1;return null!=Ue?.highWaterMark&&(vt=j(Ue.highWaterMark)),x(Ze,"options.concurrency",1),x(vt,"options.highWaterMark",0),vt+=Ze,function(){var Nt=X(function*(){const kt=S(1663).AbortSignalAny([Ue?.signal].filter(le)),pe=this,H=[],ne={signal:kt};let Le,tt,lt=!1,xt=0;function an(){lt=!0,kn()}function kn(){xt-=1,zn()}function zn(){tt&&!lt&&xt<Ze&&H.length<vt&&(tt(),tt=null)}function xn(){return(xn=Z(function*(){try{var hr,Pi=!1,aa=!1;try{for(var go,zs=q(pe);Pi=!(go=yield zs.next()).done;Pi=!1){let Xi=go.value;if(lt)return;if(kt.aborted)throw new D;try{if(Xi=Ee(Xi,ne),Xi===Ce)continue;Xi=Ve(Xi)}catch(Hr){Xi=Oe(Hr)}xt+=1,Qe(Xi,kn,an),H.push(Xi),Le&&(Le(),Le=null),!lt&&(H.length>=vt||xt>=Ze)&&(yield new xe(Hr=>{tt=Hr}))}}catch(Xi){aa=!0,hr=Xi}finally{try{Pi&&null!=zs.return&&(yield zs.return())}finally{if(aa)throw hr}}H.push(Be)}catch(Xi){const Hr=Oe(Xi);Qe(Hr,kn,an),H.push(Hr)}finally{lt=!0,Le&&(Le(),Le=null)}})).apply(this,arguments)}!function Cn(){xn.apply(this,arguments)}();try{for(;;){for(;H.length>0;){const Pi=yield G(H[0]);if(Pi===Be)return;if(kt.aborted)throw new D;Pi!==Ce&&(yield Pi),H.shift(),zn()}yield G(new xe(Pi=>{Le=Pi}))}}finally{lt=!0,tt&&(tt(),tt=null)}});return function wt(){return Nt.apply(this,arguments)}}().call(this)}function Se(Ee){return rt.apply(this,arguments)}function rt(){return(rt=Z(function*(Ee,Ue=void 0){var Nt,Ze=!1,vt=!1;try{for(var wt=q(J.call(this,Ee,Ue));Ze=!(yield wt.next()).done;Ze=!1)return!0}catch(pe){vt=!0,Nt=pe}finally{try{Ze&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Nt}}return!1})).apply(this,arguments)}function qe(){return(qe=Z(function*(Ee,Ue=void 0){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);return!(yield Se.call(this,Z(function*(...Ze){return!(yield Ee(...Ze))}),Ue))})).apply(this,arguments)}function R(){return(R=Z(function*(Ee,Ue){var Nt,Ze=!1,vt=!1;try{for(var kt,wt=q(J.call(this,Ee,Ue));Ze=!(kt=yield wt.next()).done;Ze=!1)return kt.value}catch(pe){vt=!0,Nt=pe}finally{try{Ze&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Nt}}})).apply(this,arguments)}function ie(){return ie=Z(function*(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);function vt(){return(vt=Z(function*(ne,Le){return yield Ee(ne,Le),Ce})).apply(this,arguments)}var kt,Nt=!1,wt=!1;try{for(var pe=q(ke.call(this,function Ze(ne,Le){return vt.apply(this,arguments)},Ue));Nt=!(yield pe.next()).done;Nt=!1);}catch(ne){wt=!0,kt=ne}finally{try{Nt&&null!=pe.return&&(yield pe.return())}finally{if(wt)throw kt}}}),ie.apply(this,arguments)}function J(Ee,Ue){if("function"!=typeof Ee)throw new F("fn",["Function","AsyncFunction"],Ee);function vt(){return(vt=Z(function*(Nt,wt){return(yield Ee(Nt,wt))?Nt:Ce})).apply(this,arguments)}return ke.call(this,function Ze(Nt,wt){return vt.apply(this,arguments)},Ue)}class He extends W{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ue(){return ue=Z(function*(Ee,Ue,Ze){var vt;if("function"!=typeof Ee)throw new F("reducer",["Function","AsyncFunction"],Ee);null!=Ze&&k(Ze,"options"),null!=Ze?.signal&&se(Ze.signal,"options.signal");let Nt=arguments.length>1;if(null!=Ze&&null!==(vt=Ze.signal)&&void 0!==vt&&vt.aborted){const an=new D(void 0,{cause:Ze.signal.reason});throw this.once("error",()=>{}),yield z(this.destroy(an)),an}const wt=new _,kt=wt.signal;null!=Ze&&Ze.signal&&Ze.signal.addEventListener("abort",()=>wt.abort(),{once:!0,[oe]:this,[$]:!0});let pe=!1;try{var Le,H=!1,ne=!1;try{for(var lt,tt=q(this);H=!(lt=yield tt.next()).done;H=!1){const an=lt.value;var xt;if(pe=!0,null!=Ze&&null!==(xt=Ze.signal)&&void 0!==xt&&xt.aborted)throw new D;Nt?Ue=yield Ee(Ue,an,{signal:kt}):(Ue=an,Nt=!0)}}catch(an){ne=!0,Le=an}finally{try{H&&null!=tt.return&&(yield tt.return())}finally{if(ne)throw Le}}if(!pe&&!Nt)throw new He}finally{wt.abort()}return Ue}),ue.apply(this,arguments)}function U(){return(U=Z(function*(Ee){null!=Ee&&k(Ee,"options"),null!=Ee?.signal&&se(Ee.signal,"options.signal");const Ue=[];var Nt,Ze=!1,vt=!1;try{for(var kt,wt=q(this);Ze=!(kt=yield wt.next()).done;Ze=!1){const H=kt.value;var pe;if(null!=Ee&&null!==(pe=Ee.signal)&&void 0!==pe&&pe.aborted)throw new D(void 0,{cause:Ee.signal.reason});T(Ue,H)}}catch(H){vt=!0,Nt=H}finally{try{Ze&&null!=wt.return&&(yield wt.return())}finally{if(vt)throw Nt}}return Ue})).apply(this,arguments)}function N(Ee){if(Ee=Me(Ee),ae(Ee))return 0;if(Ee<0)throw new P("number",">= 0",Ee);return Ee}je.exports.streamReturningOperators={asIndexedPairs:M(function de(Ee=void 0){return null!=Ee&&k(Ee,"options"),null!=Ee?.signal&&se(Ee.signal,"options.signal"),function(){var Ue=X(function*(){let vt=0;var kt,Nt=!1,wt=!1;try{for(var H,pe=q(this);Nt=!(H=yield G(pe.next())).done;Nt=!1){const Le=H.value;var ne;if(null!=Ee&&null!==(ne=Ee.signal)&&void 0!==ne&&ne.aborted)throw new D({cause:Ee.signal.reason});yield[vt++,Le]}}catch(Le){wt=!0,kt=Le}finally{try{Nt&&null!=pe.return&&(yield G(pe.return()))}finally{if(wt)throw kt}}});return function Ze(){return Ue.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function he(Ee,Ue=void 0){return null!=Ue&&k(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),Ee=N(Ee),function(){var Ze=X(function*(){var Nt;if(null!=Ue&&null!==(Nt=Ue.signal)&&void 0!==Nt&&Nt.aborted)throw new D;var pe,wt=!1,kt=!1;try{for(var ne,H=q(this);wt=!(ne=yield G(H.next())).done;wt=!1){const tt=ne.value;var Le;if(null!=Ue&&null!==(Le=Ue.signal)&&void 0!==Le&&Le.aborted)throw new D;Ee--<=0&&(yield tt)}}catch(tt){kt=!0,pe=tt}finally{try{wt&&null!=H.return&&(yield G(H.return()))}finally{if(kt)throw pe}}});return function vt(){return Ze.apply(this,arguments)}}().call(this)},filter:J,flatMap:function I(Ee,Ue){const Ze=ke.call(this,Ee,Ue);return function(){var vt=X(function*(){var pe,wt=!1,kt=!1;try{for(var ne,H=q(Ze);wt=!(ne=yield G(H.next())).done;wt=!1){const Le=ne.value;yield*C(q(Le),G)}}catch(Le){kt=!0,pe=Le}finally{try{wt&&null!=H.return&&(yield G(H.return()))}finally{if(kt)throw pe}}});return function Nt(){return vt.apply(this,arguments)}}().call(this)},map:ke,take:function We(Ee,Ue=void 0){return null!=Ue&&k(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),Ee=N(Ee),function(){var Ze=X(function*(){var Nt;if(null!=Ue&&null!==(Nt=Ue.signal)&&void 0!==Nt&&Nt.aborted)throw new D;var pe,wt=!1,kt=!1;try{for(var ne,H=q(this);wt=!(ne=yield G(H.next())).done;wt=!1){const tt=ne.value;var Le;if(null!=Ue&&null!==(Le=Ue.signal)&&void 0!==Le&&Le.aborted)throw new D;if(Ee-- >0&&(yield tt),Ee<=0)return}}catch(tt){kt=!0,pe=tt}finally{try{wt&&null!=H.return&&(yield G(H.return()))}finally{if(kt)throw pe}}});return function vt(){return Ze.apply(this,arguments)}}().call(this)},compose:function Ae(Ee,Ue){if(null!=Ue&&k(Ue,"options"),null!=Ue?.signal&&se(Ue.signal,"options.signal"),b(Ee)&&!B(Ee))throw new E("stream",Ee,"must be writable");const Ze=ee(this,Ee);return null!=Ue&&Ue.signal&&Y(Ue.signal,Ze),Ze}},je.exports.promiseReturningOperators={every:function mt(Ee){return qe.apply(this,arguments)},forEach:function A(Ee,Ue){return ie.apply(this,arguments)},reduce:function Xe(Ee,Ue,Ze){return ue.apply(this,arguments)},toArray:function te(Ee){return U.apply(this,arguments)},some:Se,find:function fe(Ee,Ue){return R.apply(this,arguments)}}},6569:(je,me,S)=>{"use strict";const{ObjectSetPrototypeOf:Z}=S(1251);je.exports=q;const C=S(9059);function q(G){if(!(this instanceof q))return new q(G);C.call(this,G)}Z(q.prototype,C.prototype),Z(q,C),q.prototype._transform=function(G,X,_){_(null,G)}},6249:(je,me,S)=>{var Z=S(9293).default,C=S(2958).default,q=S(3344).default,G=S(3513).default,X=S(2881).default;const _=S(573),{ArrayIsArray:E,Promise:F,SymbolAsyncIterator:W,SymbolDispose:P}=S(1251),D=S(3139),{once:se}=S(1663),x=S(1509),k=S(9613),{aggregateTwoErrors:oe,codes:{ERR_INVALID_ARG_TYPE:$,ERR_INVALID_RETURN_VALUE:z,ERR_MISSING_ARGS:ee,ERR_STREAM_DESTROYED:Y,ERR_STREAM_PREMATURE_CLOSE:B},AbortError:b}=S(5480),{validateFunction:M,validateAbortSignal:T}=S(438),{isIterable:le,isReadable:j,isReadableNodeStream:Me,isNodeStream:ae,isTransformStream:xe,isWebStream:Oe,isReadableStream:Ve,isReadableFinished:Qe}=S(6110),Je=globalThis.AbortController||S(9465).AbortController;let Ce,Be,Ae;function ke(Xe,ue,te){let U=!1;return Xe.on("close",()=>{U=!0}),{destroy:N=>{U||(U=!0,x.destroyer(Xe,N||new Y("pipe")))},cleanup:D(Xe,{readable:ue,writable:te},N=>{U=!N})}}function Se(Xe){if(le(Xe))return Xe;if(Me(Xe))return function rt(Xe){return mt.apply(this,arguments)}(Xe);throw new $("val",["Readable","Iterable","AsyncIterable"],Xe)}function mt(){return(mt=C(function*(Xe){Be||(Be=S(5779)),yield*G(X(Be.prototype[W].call(Xe)),q)})).apply(this,arguments)}function qe(Xe,ue,te,U){return fe.apply(this,arguments)}function fe(){return(fe=Z(function*(Xe,ue,te,{end:U}){let I,N=null;const he=kt=>{if(kt&&(I=kt),N){const pe=N;N=null,pe()}},We=()=>new F((kt,pe)=>{I?pe(I):N=()=>{I?pe(I):kt()}});ue.on("drain",he);const Ee=D(ue,{readable:!1},he);try{ue.writableNeedDrain&&(yield We());var vt,Ue=!1,Ze=!1;try{for(var wt,Nt=X(Xe);Ue=!(wt=yield Nt.next()).done;Ue=!1)ue.write(wt.value)||(yield We())}catch(kt){Ze=!0,vt=kt}finally{try{Ue&&null!=Nt.return&&(yield Nt.return())}finally{if(Ze)throw vt}}U&&(ue.end(),yield We()),te()}catch(kt){te(I!==kt?oe(I,kt):kt)}finally{Ee(),ue.off("drain",he)}})).apply(this,arguments)}function R(Xe,ue,te,U){return A.apply(this,arguments)}function A(){return(A=Z(function*(Xe,ue,te,{end:U}){xe(ue)&&(ue=ue.writable);const I=ue.getWriter();try{var We,N=!1,he=!1;try{for(var Ue,Ee=X(Xe);N=!(Ue=yield Ee.next()).done;N=!1){const Ze=Ue.value;yield I.ready,I.write(Ze).catch(()=>{})}}catch(Ze){he=!0,We=Ze}finally{try{N&&null!=Ee.return&&(yield Ee.return())}finally{if(he)throw We}}yield I.ready,U&&(yield I.close()),te()}catch(Ze){try{yield I.abort(Ze),te(Ze)}catch(vt){te(vt)}}})).apply(this,arguments)}function J(Xe,ue,te){if(1===Xe.length&&E(Xe[0])&&(Xe=Xe[0]),Xe.length<2)throw new ee("streams");const U=new Je,I=U.signal,N=te?.signal,he=[];function We(){kt(new b)}let Ee,Ue,Ze;T(N,"options.signal"),Ae=Ae||S(1663).addAbortListener,N&&(Ee=Ae(N,We));const vt=[];let pe,Nt=0;function wt(tt){kt(tt,0==--Nt)}function kt(tt,lt){var xt;if(tt&&(!Ue||"ERR_STREAM_PREMATURE_CLOSE"===Ue.code)&&(Ue=tt),Ue||lt){for(;vt.length;)vt.shift()(Ue);null===(xt=Ee)||void 0===xt||xt[P](),U.abort(),lt&&(Ue||he.forEach(an=>an()),_.nextTick(ue,Ue,Ze))}}for(let tt=0;tt<Xe.length;tt++){const lt=Xe[tt],xt=tt<Xe.length-1,an=tt>0,kn=xt||!1!==te?.end,zn=tt===Xe.length-1;if(ae(lt)){let Cn=function(xn){xn&&"AbortError"!==xn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==xn.code&&wt(xn)};if(kn){const{destroy:xn,cleanup:Pi}=ke(lt,xt,an);vt.push(xn),j(lt)&&zn&&he.push(Pi)}lt.on("error",Cn),j(lt)&&zn&&he.push(()=>{lt.removeListener("error",Cn)})}if(0===tt)if("function"==typeof lt){if(pe=lt({signal:I}),!le(pe))throw new z("Iterable, AsyncIterable or Stream","source",pe)}else pe=le(lt)||Me(lt)||xe(lt)?lt:k.from(lt);else if("function"==typeof lt){var H;if(pe=xe(pe)?Se(null===(H=pe)||void 0===H?void 0:H.readable):Se(pe),pe=lt(pe,{signal:I}),xt){if(!le(pe,!0))throw new z("AsyncIterable",`transform[${tt-1}]`,pe)}else{var ne;Ce||(Ce=S(6569));const Cn=new Ce({objectMode:!0}),xn=null===(ne=pe)||void 0===ne?void 0:ne.then;if("function"==typeof xn)Nt++,xn.call(pe,hr=>{Ze=hr,null!=hr&&Cn.write(hr),kn&&Cn.end(),_.nextTick(wt)},hr=>{Cn.destroy(hr),_.nextTick(wt,hr)});else if(le(pe,!0))Nt++,qe(pe,Cn,wt,{end:kn});else{if(!Ve(pe)&&!xe(pe))throw new z("AsyncIterable or Promise","destination",pe);Nt++,qe(pe.readable||pe,Cn,wt,{end:kn})}pe=Cn;const{destroy:Pi,cleanup:aa}=ke(pe,!1,!0);vt.push(Pi),zn&&he.push(aa)}}else if(ae(lt)){if(Me(pe)){Nt+=2;const Cn=He(pe,lt,wt,{end:kn});j(lt)&&zn&&he.push(Cn)}else if(xe(pe)||Ve(pe))Nt++,qe(pe.readable||pe,lt,wt,{end:kn});else{if(!le(pe))throw new $("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Nt++,qe(pe,lt,wt,{end:kn})}pe=lt}else if(Oe(lt)){if(Me(pe))Nt++,R(Se(pe),lt,wt,{end:kn});else if(Ve(pe)||le(pe))Nt++,R(pe,lt,wt,{end:kn});else{if(!xe(pe))throw new $("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);Nt++,R(pe.readable,lt,wt,{end:kn})}pe=lt}else pe=k.from(lt)}return(null!=I&&I.aborted||null!=N&&N.aborted)&&_.nextTick(We),pe}function He(Xe,ue,te,{end:U}){let I=!1;if(ue.on("close",()=>{I||te(new B)}),Xe.pipe(ue,{end:!1}),U){let he=function(){I=!0,ue.end()};Qe(Xe)?_.nextTick(he):Xe.once("end",he)}else te();return D(Xe,{readable:!0,writable:!1},he=>{const We=Xe._readableState;he&&"ERR_STREAM_PREMATURE_CLOSE"===he.code&&We&&We.ended&&!We.errored&&!We.errorEmitted?Xe.once("end",te).once("error",te):te(he)}),D(ue,{readable:!1,writable:!0},te)}je.exports={pipelineImpl:J,pipeline:function ie(...Xe){return J(Xe,se(function de(Xe){return M(Xe[Xe.length-1],"streams[stream.length - 1]"),Xe.pop()}(Xe)))}}},5779:(je,me,S)=>{var Z=S(3344).default,C=S(2958).default;const q=S(573),{ArrayPrototypeIndexOf:G,NumberIsInteger:X,NumberIsNaN:_,NumberParseInt:E,ObjectDefineProperties:F,ObjectKeys:W,ObjectSetPrototypeOf:P,Promise:D,SafeSet:se,SymbolAsyncDispose:x,SymbolAsyncIterator:k,Symbol:oe}=S(1251);je.exports=wt,wt.ReadableState=Nt;const{EventEmitter:$}=S(4356),{Stream:z,prependListener:ee}=S(8708),{Buffer:Y}=S(2317),{addAbortSignal:B}=S(8992),b=S(3139);let M=S(1663).debuglog("stream",Ge=>{M=Ge});const T=S(9588),le=S(1509),{getHighWaterMark:j,getDefaultHighWaterMark:Me}=S(2934),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:xe,ERR_METHOD_NOT_IMPLEMENTED:Oe,ERR_OUT_OF_RANGE:Ve,ERR_STREAM_PUSH_AFTER_EOF:Qe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Je},AbortError:Ce}=S(5480),{validateObject:Be}=S(438),Ae=oe("kPaused"),{StringDecoder:ke}=S(8454),de=S(3447);P(wt.prototype,z.prototype),P(wt,z);const Se=()=>{},{errorOrDestroy:rt}=le,mt=1,A=16,ie=32,J=64,U=2048,I=4096,Ee=65536;function vt(Ge){return{enumerable:!1,get(){return!!(this.state&Ge)},set(Ke){Ke?this.state|=Ge:this.state&=~Ge}}}function Nt(Ge,Ke,Gt){"boolean"!=typeof Gt&&(Gt=Ke instanceof S(9613)),this.state=U|I|A|ie,Ge&&Ge.objectMode&&(this.state|=mt),Gt&&Ge&&Ge.readableObjectMode&&(this.state|=mt),this.highWaterMark=Ge?j(this,Ge,"readableHighWaterMark",Gt):Me(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[Ae]=null,Ge&&!1===Ge.emitClose&&(this.state&=~U),Ge&&!1===Ge.autoDestroy&&(this.state&=~I),this.errored=null,this.defaultEncoding=Ge&&Ge.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Ge&&Ge.encoding&&(this.decoder=new ke(Ge.encoding),this.encoding=Ge.encoding)}function wt(Ge){if(!(this instanceof wt))return new wt(Ge);const Ke=this instanceof S(9613);this._readableState=new Nt(Ge,this,Ke),Ge&&("function"==typeof Ge.read&&(this._read=Ge.read),"function"==typeof Ge.destroy&&(this._destroy=Ge.destroy),"function"==typeof Ge.construct&&(this._construct=Ge.construct),Ge.signal&&!Ke&&B(Ge.signal,this)),z.call(this,Ge),le.construct(this,()=>{this._readableState.needReadable&&an(this,this._readableState)})}function kt(Ge,Ke,Gt,At){M("readableAddChunk",Ke);const cn=Ge._readableState;let fr;if(cn.state&mt||("string"==typeof Ke?cn.encoding!==(Gt=Gt||cn.defaultEncoding)&&(At&&cn.encoding?Ke=Y.from(Ke,Gt).toString(cn.encoding):(Ke=Y.from(Ke,Gt),Gt="")):Ke instanceof Y?Gt="":z._isUint8Array(Ke)?(Ke=z._uint8ArrayToBuffer(Ke),Gt=""):null!=Ke&&(fr=new xe("chunk",["string","Buffer","Uint8Array"],Ke))),fr)rt(Ge,fr);else if(null===Ke)cn.state&=-9,function tt(Ge,Ke){if(M("onEofChunk"),!Ke.ended){if(Ke.decoder){const Gt=Ke.decoder.end();Gt&&Gt.length&&(Ke.buffer.push(Gt),Ke.length+=Ke.objectMode?1:Gt.length)}Ke.ended=!0,Ke.sync?lt(Ge):(Ke.needReadable=!1,Ke.emittedReadable=!0,xt(Ge))}}(Ge,cn);else if(cn.state&mt||Ke&&Ke.length>0)if(At)if(4&cn.state)rt(Ge,new Je);else{if(cn.destroyed||cn.errored)return!1;pe(Ge,cn,Ke,!0)}else if(cn.ended)rt(Ge,new Qe);else{if(cn.destroyed||cn.errored)return!1;cn.state&=-9,cn.decoder&&!Gt?(Ke=cn.decoder.write(Ke),cn.objectMode||0!==Ke.length?pe(Ge,cn,Ke,!1):an(Ge,cn)):pe(Ge,cn,Ke,!1)}else At||(cn.state&=-9,an(Ge,cn));return!cn.ended&&(cn.length<cn.highWaterMark||0===cn.length)}function pe(Ge,Ke,Gt,At){Ke.flowing&&0===Ke.length&&!Ke.sync&&Ge.listenerCount("data")>0?(Ke.state&Ee?Ke.awaitDrainWriters.clear():Ke.awaitDrainWriters=null,Ke.dataEmitted=!0,Ge.emit("data",Gt)):(Ke.length+=Ke.objectMode?1:Gt.length,At?Ke.buffer.unshift(Gt):Ke.buffer.push(Gt),Ke.state&J&&lt(Ge)),an(Ge,Ke)}function Le(Ge,Ke){return Ge<=0||0===Ke.length&&Ke.ended?0:Ke.state&mt?1:_(Ge)?Ke.flowing&&Ke.length?Ke.buffer.first().length:Ke.length:Ge<=Ke.length?Ge:Ke.ended?Ke.length:0}function lt(Ge){const Ke=Ge._readableState;M("emitReadable",Ke.needReadable,Ke.emittedReadable),Ke.needReadable=!1,Ke.emittedReadable||(M("emitReadable",Ke.flowing),Ke.emittedReadable=!0,q.nextTick(xt,Ge))}function xt(Ge){const Ke=Ge._readableState;M("emitReadable_",Ke.destroyed,Ke.length,Ke.ended),!Ke.destroyed&&!Ke.errored&&(Ke.length||Ke.ended)&&(Ge.emit("readable"),Ke.emittedReadable=!1),Ke.needReadable=!Ke.flowing&&!Ke.ended&&Ke.length<=Ke.highWaterMark,hr(Ge)}function an(Ge,Ke){!Ke.readingMore&&Ke.constructed&&(Ke.readingMore=!0,q.nextTick(kn,Ge,Ke))}function kn(Ge,Ke){for(;!Ke.reading&&!Ke.ended&&(Ke.length<Ke.highWaterMark||Ke.flowing&&0===Ke.length);){const Gt=Ke.length;if(M("maybeReadMore read 0"),Ge.read(0),Gt===Ke.length)break}Ke.readingMore=!1}function Cn(Ge){const Ke=Ge._readableState;Ke.readableListening=Ge.listenerCount("readable")>0,Ke.resumeScheduled&&!1===Ke[Ae]?Ke.flowing=!0:Ge.listenerCount("data")>0?Ge.resume():Ke.readableListening||(Ke.flowing=null)}function xn(Ge){M("readable nexttick read 0"),Ge.read(0)}function aa(Ge,Ke){M("resume",Ke.reading),Ke.reading||Ge.read(0),Ke.resumeScheduled=!1,Ge.emit("resume"),hr(Ge),Ke.flowing&&!Ke.reading&&Ge.read(0)}function hr(Ge){const Ke=Ge._readableState;for(M("flow",Ke.flowing);Ke.flowing&&null!==Ge.read(););}function zs(Ge,Ke){"function"!=typeof Ge.read&&(Ge=wt.wrap(Ge,{objectMode:!0}));const Gt=function go(Ge,Ke){return Xi.apply(this,arguments)}(Ge,Ke);return Gt.stream=Ge,Gt}function Xi(){return(Xi=C(function*(Ge,Ke){let cn,Gt=Se;function At(gs){this===Ge?(Gt(),Gt=Se):Gt=gs}Ge.on("readable",At);const fr=b(Ge,{writable:!1},gs=>{cn=gs?ae(cn,gs):null,Gt(),Gt=Se});try{for(;;){const gs=Ge.destroyed?null:Ge.read();if(null!==gs)yield gs;else{if(cn)throw cn;if(null===cn)return;yield Z(new D(At))}}}catch(gs){throw cn=ae(cn,gs),cn}finally{!cn&&!1===Ke?.destroyOnReturn||void 0!==cn&&!Ge._readableState.autoDestroy?(Ge.off("readable",At),fr()):le.destroyer(Ge,null)}})).apply(this,arguments)}function Hr(Ge,Ke){if(0===Ke.length)return null;let Gt;return Ke.objectMode?Gt=Ke.buffer.shift():!Ge||Ge>=Ke.length?(Gt=Ke.decoder?Ke.buffer.join(""):1===Ke.buffer.length?Ke.buffer.first():Ke.buffer.concat(Ke.length),Ke.buffer.clear()):Gt=Ke.buffer.consume(Ge,Ke.decoder),Gt}function mo(Ge){const Ke=Ge._readableState;M("endReadable",Ke.endEmitted),Ke.endEmitted||(Ke.ended=!0,q.nextTick(dl,Ke,Ge))}function dl(Ge,Ke){if(M("endReadableNT",Ge.endEmitted,Ge.length),!Ge.errored&&!Ge.closeEmitted&&!Ge.endEmitted&&0===Ge.length)if(Ge.endEmitted=!0,Ke.emit("end"),Ke.writable&&!1===Ke.allowHalfOpen)q.nextTick(ic,Ke);else if(Ge.autoDestroy){const Gt=Ke._writableState;(!Gt||Gt.autoDestroy&&(Gt.finished||!1===Gt.writable))&&Ke.destroy()}}function ic(Ge){Ge.writable&&!Ge.writableEnded&&!Ge.destroyed&&Ge.end()}let Rc;function rc(){return void 0===Rc&&(Rc={}),Rc}F(Nt.prototype,{objectMode:vt(mt),ended:vt(2),endEmitted:vt(4),reading:vt(8),constructed:vt(A),sync:vt(ie),needReadable:vt(J),emittedReadable:vt(128),readableListening:vt(256),resumeScheduled:vt(512),errorEmitted:vt(1024),emitClose:vt(U),autoDestroy:vt(I),destroyed:vt(8192),closed:vt(16384),closeEmitted:vt(32768),multiAwaitDrain:vt(Ee),readingMore:vt(1<<17),dataEmitted:vt(1<<18)}),wt.prototype.destroy=le.destroy,wt.prototype._undestroy=le.undestroy,wt.prototype._destroy=function(Ge,Ke){Ke(Ge)},wt.prototype[$.captureRejectionSymbol]=function(Ge){this.destroy(Ge)},wt.prototype[x]=function(){let Ge;return this.destroyed||(Ge=this.readableEnded?null:new Ce,this.destroy(Ge)),new D((Ke,Gt)=>b(this,At=>At&&At!==Ge?Gt(At):Ke(null)))},wt.prototype.push=function(Ge,Ke){return kt(this,Ge,Ke,!1)},wt.prototype.unshift=function(Ge,Ke){return kt(this,Ge,Ke,!0)},wt.prototype.isPaused=function(){const Ge=this._readableState;return!0===Ge[Ae]||!1===Ge.flowing},wt.prototype.setEncoding=function(Ge){const Ke=new ke(Ge);this._readableState.decoder=Ke,this._readableState.encoding=this._readableState.decoder.encoding;const Gt=this._readableState.buffer;let At="";for(const cn of Gt)At+=Ke.write(cn);return Gt.clear(),""!==At&&Gt.push(At),this._readableState.length=At.length,this},wt.prototype.read=function(Ge){M("read",Ge),void 0===Ge?Ge=NaN:X(Ge)||(Ge=E(Ge,10));const Ke=this._readableState,Gt=Ge;if(Ge>Ke.highWaterMark&&(Ke.highWaterMark=function ne(Ge){if(Ge>1073741824)throw new Ve("size","<= 1GiB",Ge);return Ge--,Ge|=Ge>>>1,Ge|=Ge>>>2,Ge|=Ge>>>4,Ge|=Ge>>>8,Ge|=Ge>>>16,++Ge}(Ge)),0!==Ge&&(Ke.state&=-129),0===Ge&&Ke.needReadable&&((0!==Ke.highWaterMark?Ke.length>=Ke.highWaterMark:Ke.length>0)||Ke.ended))return M("read: emitReadable",Ke.length,Ke.ended),0===Ke.length&&Ke.ended?mo(this):lt(this),null;if(0===(Ge=Le(Ge,Ke))&&Ke.ended)return 0===Ke.length&&mo(this),null;let cn,At=!!(Ke.state&J);if(M("need readable",At),(0===Ke.length||Ke.length-Ge<Ke.highWaterMark)&&(At=!0,M("length less than watermark",At)),Ke.ended||Ke.reading||Ke.destroyed||Ke.errored||!Ke.constructed)At=!1,M("reading, ended or constructing",At);else if(At){M("do read"),Ke.state|=8|ie,0===Ke.length&&(Ke.state|=J);try{this._read(Ke.highWaterMark)}catch(fr){rt(this,fr)}Ke.state&=~ie,Ke.reading||(Ge=Le(Gt,Ke))}return cn=Ge>0?Hr(Ge,Ke):null,null===cn?(Ke.needReadable=Ke.length<=Ke.highWaterMark,Ge=0):(Ke.length-=Ge,Ke.multiAwaitDrain?Ke.awaitDrainWriters.clear():Ke.awaitDrainWriters=null),0===Ke.length&&(Ke.ended||(Ke.needReadable=!0),Gt!==Ge&&Ke.ended&&mo(this)),null!==cn&&!Ke.errorEmitted&&!Ke.closeEmitted&&(Ke.dataEmitted=!0,this.emit("data",cn)),cn},wt.prototype._read=function(Ge){throw new Oe("_read()")},wt.prototype.pipe=function(Ge,Ke){const Gt=this,At=this._readableState;1===At.pipes.length&&(At.multiAwaitDrain||(At.multiAwaitDrain=!0,At.awaitDrainWriters=new se(At.awaitDrainWriters?[At.awaitDrainWriters]:[]))),At.pipes.push(Ge),M("pipe count=%d opts=%j",At.pipes.length,Ke);const fr=Ke&&!1===Ke.end||Ge===q.stdout||Ge===q.stderr?eo:sc;function sc(){M("onend"),Ge.end()}At.endEmitted?q.nextTick(fr):Gt.once("end",fr),Ge.on("unpipe",function gs(ms,St){M("onunpipe"),ms===Gt&&St&&!1===St.hasUnpiped&&(St.hasUnpiped=!0,function nr(){M("cleanup"),Ge.removeListener("close",Gs),Ge.removeListener("finish",Xt),Qt&&Ge.removeListener("drain",Qt),Ge.removeListener("error",ti),Ge.removeListener("unpipe",gs),Gt.removeListener("end",sc),Gt.removeListener("end",eo),Gt.removeListener("data",gn),Ra=!0,Qt&&At.awaitDrainWriters&&(!Ge._writableState||Ge._writableState.needDrain)&&Qt()}())});let Qt,Ra=!1;function Oa(){Ra||(1===At.pipes.length&&At.pipes[0]===Ge?(M("false write response, pause",0),At.awaitDrainWriters=Ge,At.multiAwaitDrain=!1):At.pipes.length>1&&At.pipes.includes(Ge)&&(M("false write response, pause",At.awaitDrainWriters.size),At.awaitDrainWriters.add(Ge)),Gt.pause()),Qt||(Qt=function zn(Ge,Ke){return function(){const At=Ge._readableState;At.awaitDrainWriters===Ke?(M("pipeOnDrain",1),At.awaitDrainWriters=null):At.multiAwaitDrain&&(M("pipeOnDrain",At.awaitDrainWriters.size),At.awaitDrainWriters.delete(Ke)),(!At.awaitDrainWriters||0===At.awaitDrainWriters.size)&&Ge.listenerCount("data")&&Ge.resume()}}(Gt,Ge),Ge.on("drain",Qt))}function gn(ms){M("ondata");const St=Ge.write(ms);M("dest.write",St),!1===St&&Oa()}function ti(ms){if(M("onerror",ms),eo(),Ge.removeListener("error",ti),0===Ge.listenerCount("error")){const St=Ge._writableState||Ge._readableState;St&&!St.errorEmitted?rt(Ge,ms):Ge.emit("error",ms)}}function Gs(){Ge.removeListener("finish",Xt),eo()}function Xt(){M("onfinish"),Ge.removeListener("close",Gs),eo()}function eo(){M("unpipe"),Gt.unpipe(Ge)}return Gt.on("data",gn),ee(Ge,"error",ti),Ge.once("close",Gs),Ge.once("finish",Xt),Ge.emit("pipe",Gt),!0===Ge.writableNeedDrain?Oa():At.flowing||(M("pipe resume"),Gt.resume()),Ge},wt.prototype.unpipe=function(Ge){const Ke=this._readableState;if(0===Ke.pipes.length)return this;if(!Ge){const cn=Ke.pipes;Ke.pipes=[],this.pause();for(let fr=0;fr<cn.length;fr++)cn[fr].emit("unpipe",this,{hasUnpiped:!1});return this}const At=G(Ke.pipes,Ge);return-1===At||(Ke.pipes.splice(At,1),0===Ke.pipes.length&&this.pause(),Ge.emit("unpipe",this,{hasUnpiped:!1})),this},wt.prototype.addListener=wt.prototype.on=function(Ge,Ke){const Gt=z.prototype.on.call(this,Ge,Ke),At=this._readableState;return"data"===Ge?(At.readableListening=this.listenerCount("readable")>0,!1!==At.flowing&&this.resume()):"readable"===Ge&&!At.endEmitted&&!At.readableListening&&(At.readableListening=At.needReadable=!0,At.flowing=!1,At.emittedReadable=!1,M("on readable",At.length,At.reading),At.length?lt(this):At.reading||q.nextTick(xn,this)),Gt},wt.prototype.off=wt.prototype.removeListener=function(Ge,Ke){const Gt=z.prototype.removeListener.call(this,Ge,Ke);return"readable"===Ge&&q.nextTick(Cn,this),Gt},wt.prototype.removeAllListeners=function(Ge){const Ke=z.prototype.removeAllListeners.apply(this,arguments);return("readable"===Ge||void 0===Ge)&&q.nextTick(Cn,this),Ke},wt.prototype.resume=function(){const Ge=this._readableState;return Ge.flowing||(M("resume"),Ge.flowing=!Ge.readableListening,function Pi(Ge,Ke){Ke.resumeScheduled||(Ke.resumeScheduled=!0,q.nextTick(aa,Ge,Ke))}(this,Ge)),Ge[Ae]=!1,this},wt.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ae]=!0,this},wt.prototype.wrap=function(Ge){let Ke=!1;Ge.on("data",At=>{!this.push(At)&&Ge.pause&&(Ke=!0,Ge.pause())}),Ge.on("end",()=>{this.push(null)}),Ge.on("error",At=>{rt(this,At)}),Ge.on("close",()=>{this.destroy()}),Ge.on("destroy",()=>{this.destroy()}),this._read=()=>{Ke&&Ge.resume&&(Ke=!1,Ge.resume())};const Gt=W(Ge);for(let At=1;At<Gt.length;At++){const cn=Gt[At];void 0===this[cn]&&"function"==typeof Ge[cn]&&(this[cn]=Ge[cn].bind(Ge))}return this},wt.prototype[k]=function(){return zs(this)},wt.prototype.iterator=function(Ge){return void 0!==Ge&&Be(Ge,"options"),zs(this,Ge)},F(wt.prototype,{readable:{__proto__:null,get(){const Ge=this._readableState;return!(!Ge||!1===Ge.readable||Ge.destroyed||Ge.errorEmitted||Ge.endEmitted)},set(Ge){this._readableState&&(this._readableState.readable=!!Ge)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ge){this._readableState&&(this._readableState.flowing=Ge)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(Ge){this._readableState&&(this._readableState.destroyed=Ge)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),F(Nt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ae]},set(Ge){this[Ae]=!!Ge}}}),wt._fromList=Hr,wt.from=function(Ge,Ke){return de(wt,Ge,Ke)},wt.fromWeb=function(Ge,Ke){return rc().newStreamReadableFromReadableStream(Ge,Ke)},wt.toWeb=function(Ge,Ke){return rc().newReadableStreamFromStreamReadable(Ge,Ke)},wt.wrap=function(Ge,Ke){var Gt,At;return new wt({objectMode:null===(Gt=null!==(At=Ge.readableObjectMode)&&void 0!==At?At:Ge.objectMode)||void 0===Gt||Gt,...Ke,destroy(cn,fr){le.destroyer(Ge,cn),fr(cn)}}).wrap(Ge)}},2934:(je,me,S)=>{"use strict";const{MathFloor:Z,NumberIsInteger:C}=S(1251),{validateInteger:q}=S(438),{ERR_INVALID_ARG_VALUE:G}=S(5480).codes;let X=16384,_=16;function F(D){return D?_:X}je.exports={getHighWaterMark:function P(D,se,x,k){const oe=function E(D,se,x){return null!=D.highWaterMark?D.highWaterMark:se?D[x]:null}(se,k,x);if(null!=oe){if(!C(oe)||oe<0)throw new G(k?`options.${x}`:"options.highWaterMark",oe);return Z(oe)}return F(D.objectMode)},getDefaultHighWaterMark:F,setDefaultHighWaterMark:function W(D,se){q(se,"value",0),D?_=se:X=se}}},9059:(je,me,S)=>{"use strict";const{ObjectSetPrototypeOf:Z,Symbol:C}=S(1251);je.exports=E;const{ERR_METHOD_NOT_IMPLEMENTED:q}=S(5480).codes,G=S(9613),{getHighWaterMark:X}=S(2934);Z(E.prototype,G.prototype),Z(E,G);const _=C("kCallback");function E(P){if(!(this instanceof E))return new E(P);const D=P?X(this,P,"readableHighWaterMark",!0):null;0===D&&(P={...P,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:P.writableHighWaterMark||0}),G.call(this,P),this._readableState.sync=!1,this[_]=null,P&&("function"==typeof P.transform&&(this._transform=P.transform),"function"==typeof P.flush&&(this._flush=P.flush)),this.on("prefinish",W)}function F(P){"function"!=typeof this._flush||this.destroyed?(this.push(null),P&&P()):this._flush((D,se)=>{D?P?P(D):this.destroy(D):(null!=se&&this.push(se),this.push(null),P&&P())})}function W(){this._final!==F&&F.call(this)}E.prototype._final=F,E.prototype._transform=function(P,D,se){throw new q("_transform()")},E.prototype._write=function(P,D,se){const x=this._readableState,k=this._writableState,oe=x.length;this._transform(P,D,($,z)=>{$?se($):(null!=z&&this.push(z),k.ended||oe===x.length||x.length<x.highWaterMark?se():this[_]=se)})},E.prototype._read=function(){if(this[_]){const P=this[_];this[_]=null,P()}}},6110:(je,me,S)=>{"use strict";const{SymbolAsyncIterator:Z,SymbolIterator:C,SymbolFor:q}=S(1251),G=q("nodejs.stream.destroyed"),X=q("nodejs.stream.errored"),_=q("nodejs.stream.readable"),E=q("nodejs.stream.writable"),F=q("nodejs.stream.disturbed"),W=q("nodejs.webstream.isClosedPromise"),P=q("nodejs.webstream.controllerErrorFunction");function D(de,Se=!1){var rt;return!(!de||"function"!=typeof de.pipe||"function"!=typeof de.on||Se&&("function"!=typeof de.pause||"function"!=typeof de.resume)||de._writableState&&!1===(null===(rt=de._readableState)||void 0===rt?void 0:rt.readable)||de._writableState&&!de._readableState)}function se(de){var Se;return!(!de||"function"!=typeof de.write||"function"!=typeof de.on||de._readableState&&!1===(null===(Se=de._writableState)||void 0===Se?void 0:Se.writable))}function k(de){return de&&(de._readableState||de._writableState||"function"==typeof de.write&&"function"==typeof de.on||"function"==typeof de.pipe&&"function"==typeof de.on)}function oe(de){return!(!de||k(de)||"function"!=typeof de.pipeThrough||"function"!=typeof de.getReader||"function"!=typeof de.cancel)}function $(de){return!(!de||k(de)||"function"!=typeof de.getWriter||"function"!=typeof de.abort)}function z(de){return!(!de||k(de)||"object"!=typeof de.readable||"object"!=typeof de.writable)}function B(de){if(!k(de))return null;const mt=de._writableState||de._readableState;return!!(de.destroyed||de[G]||null!=mt&&mt.destroyed)}function b(de){if(!se(de))return null;if(!0===de.writableEnded)return!0;const Se=de._writableState;return(null==Se||!Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)}function le(de,Se){if(!D(de))return null;const rt=de._readableState;return(null==rt||!rt.errored)&&("boolean"!=typeof rt?.endEmitted?null:!!(rt.endEmitted||!1===Se&&!0===rt.ended&&0===rt.length))}function j(de){return de&&null!=de[_]?de[_]:"boolean"!=typeof de?.readable?null:!B(de)&&D(de)&&de.readable&&!le(de)}function Me(de){return de&&null!=de[E]?de[E]:"boolean"!=typeof de?.writable?null:!B(de)&&se(de)&&de.writable&&!b(de)}function Qe(de){return"boolean"==typeof de._closed&&"boolean"==typeof de._defaultKeepAlive&&"boolean"==typeof de._removedConnection&&"boolean"==typeof de._removedContLen}function Je(de){return"boolean"==typeof de._sent100&&Qe(de)}je.exports={isDestroyed:B,kIsDestroyed:G,isDisturbed:function Ae(de){var Se;return!(!de||!(null!==(Se=de[F])&&void 0!==Se?Se:de.readableDidRead||de.readableAborted))},kIsDisturbed:F,isErrored:function ke(de){var Se,rt,mt,qe,fe,R,A,ie,J,He;return!(!de||!(null!==(Se=null!==(rt=null!==(mt=null!==(qe=null!==(fe=null!==(R=de[X])&&void 0!==R?R:de.readableErrored)&&void 0!==fe?fe:de.writableErrored)&&void 0!==qe?qe:null===(A=de._readableState)||void 0===A?void 0:A.errorEmitted)&&void 0!==mt?mt:null===(ie=de._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==rt?rt:null===(J=de._readableState)||void 0===J?void 0:J.errored)&&void 0!==Se?Se:null!==(He=de._writableState)&&void 0!==He&&He.errored))},kIsErrored:X,isReadable:j,kIsReadable:_,kIsClosedPromise:W,kControllerErrorFunction:P,kIsWritable:E,isClosed:function Ve(de){if(!k(de))return null;if("boolean"==typeof de.closed)return de.closed;const Se=de._writableState,rt=de._readableState;return"boolean"==typeof Se?.closed||"boolean"==typeof rt?.closed?Se?.closed||rt?.closed:"boolean"==typeof de._closed&&Qe(de)?de._closed:null},isDuplexNodeStream:function x(de){return!(!de||"function"!=typeof de.pipe||!de._readableState||"function"!=typeof de.on||"function"!=typeof de.write)},isFinished:function ae(de,Se){return k(de)?!!B(de)||!(!1!==Se?.readable&&j(de)||!1!==Se?.writable&&Me(de)):null},isIterable:function Y(de,Se){return null!=de&&(!0===Se?"function"==typeof de[Z]:!1===Se?"function"==typeof de[C]:"function"==typeof de[Z]||"function"==typeof de[C])},isReadableNodeStream:D,isReadableStream:oe,isReadableEnded:function T(de){if(!D(de))return null;if(!0===de.readableEnded)return!0;const Se=de._readableState;return!(!Se||Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)},isReadableFinished:le,isReadableErrored:function Oe(de){var Se,rt;return k(de)?de.readableErrored?de.readableErrored:null!==(Se=null===(rt=de._readableState)||void 0===rt?void 0:rt.errored)&&void 0!==Se?Se:null:null},isNodeStream:k,isWebStream:function ee(de){return oe(de)||$(de)||z(de)},isWritable:Me,isWritableNodeStream:se,isWritableStream:$,isWritableEnded:b,isWritableFinished:function M(de,Se){if(!se(de))return null;if(!0===de.writableFinished)return!0;const rt=de._writableState;return(null==rt||!rt.errored)&&("boolean"!=typeof rt?.finished?null:!!(rt.finished||!1===Se&&!0===rt.ended&&0===rt.length))},isWritableErrored:function xe(de){var Se,rt;return k(de)?de.writableErrored?de.writableErrored:null!==(Se=null===(rt=de._writableState)||void 0===rt?void 0:rt.errored)&&void 0!==Se?Se:null:null},isServerRequest:function Ce(de){var Se;return"boolean"==typeof de._consuming&&"boolean"==typeof de._dumped&&void 0===(null===(Se=de.req)||void 0===Se?void 0:Se.upgradeOrConnect)},isServerResponse:Je,willEmitClose:function Be(de){if(!k(de))return null;const mt=de._writableState||de._readableState;return!mt&&Je(de)||!!(mt&&mt.autoDestroy&&mt.emitClose&&!1===mt.closed)},isTransformStream:z}},2983:(je,me,S)=>{const Z=S(573),{ArrayPrototypeSlice:C,Error:q,FunctionPrototypeSymbolHasInstance:G,ObjectDefineProperty:X,ObjectDefineProperties:_,ObjectSetPrototypeOf:E,StringPrototypeToLowerCase:F,Symbol:W,SymbolHasInstance:P}=S(1251);je.exports=Je,Je.WritableState=Ve;const{EventEmitter:D}=S(4356),se=S(8708).Stream,{Buffer:x}=S(2317),k=S(1509),{addAbortSignal:oe}=S(8992),{getHighWaterMark:$,getDefaultHighWaterMark:z}=S(2934),{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:Y,ERR_MULTIPLE_CALLBACK:B,ERR_STREAM_CANNOT_PIPE:b,ERR_STREAM_DESTROYED:M,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:le,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:Me}=S(5480).codes,{errorOrDestroy:ae}=k;function xe(){}E(Je.prototype,se.prototype),E(Je,se);const Oe=W("kOnFinished");function Ve(te,U,I){"boolean"!=typeof I&&(I=U instanceof S(9613)),this.objectMode=!(!te||!te.objectMode),I&&(this.objectMode=this.objectMode||!(!te||!te.writableObjectMode)),this.highWaterMark=te?$(this,te,"writableHighWaterMark",I):z(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(te&&!1===te.decodeStrings),this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=de.bind(void 0,U),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Qe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!te||!1!==te.emitClose,this.autoDestroy=!te||!1!==te.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Qe(te){te.buffered=[],te.bufferedIndex=0,te.allBuffers=!0,te.allNoop=!0}function Je(te){const U=this instanceof S(9613);if(!U&&!G(Je,this))return new Je(te);this._writableState=new Ve(te,this,U),te&&("function"==typeof te.write&&(this._write=te.write),"function"==typeof te.writev&&(this._writev=te.writev),"function"==typeof te.destroy&&(this._destroy=te.destroy),"function"==typeof te.final&&(this._final=te.final),"function"==typeof te.construct&&(this._construct=te.construct),te.signal&&oe(te.signal,this)),se.call(this,te),k.construct(this,()=>{const I=this._writableState;I.writing||qe(this,I),ie(this,I)})}function Ce(te,U,I,N){const he=te._writableState;if("function"==typeof I)N=I,I=he.defaultEncoding;else{if(I){if("buffer"!==I&&!x.isEncoding(I))throw new Me(I)}else I=he.defaultEncoding;"function"!=typeof N&&(N=xe)}if(null===U)throw new le;if(!he.objectMode)if("string"==typeof U)!1!==he.decodeStrings&&(U=x.from(U,I),I="buffer");else if(U instanceof x)I="buffer";else{if(!se._isUint8Array(U))throw new ee("chunk",["string","Buffer","Uint8Array"],U);U=se._uint8ArrayToBuffer(U),I="buffer"}let We;return he.ending?We=new j:he.destroyed&&(We=new M("write")),We?(Z.nextTick(N,We),ae(te,We,!0),We):(he.pendingcb++,function Be(te,U,I,N,he){const We=U.objectMode?1:I.length;U.length+=We;const Ee=U.length<U.highWaterMark;return Ee||(U.needDrain=!0),U.writing||U.corked||U.errored||!U.constructed?(U.buffered.push({chunk:I,encoding:N,callback:he}),U.allBuffers&&"buffer"!==N&&(U.allBuffers=!1),U.allNoop&&he!==xe&&(U.allNoop=!1)):(U.writelen=We,U.writecb=he,U.writing=!0,U.sync=!0,te._write(I,N,U.onwrite),U.sync=!1),Ee&&!U.errored&&!U.destroyed}(te,he,U,I,N))}function Ae(te,U,I,N,he,We,Ee){U.writelen=N,U.writecb=Ee,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new M("write")):I?te._writev(he,U.onwrite):te._write(he,We,U.onwrite),U.sync=!1}function ke(te,U,I,N){--U.pendingcb,N(I),mt(U),ae(te,I)}function de(te,U){const I=te._writableState,N=I.sync,he=I.writecb;"function"==typeof he?(I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0,U?(I.errored||(I.errored=U),te._readableState&&!te._readableState.errored&&(te._readableState.errored=U),N?Z.nextTick(ke,te,I,U,he):ke(te,I,U,he)):(I.buffered.length>I.bufferedIndex&&qe(te,I),N?null!==I.afterWriteTickInfo&&I.afterWriteTickInfo.cb===he?I.afterWriteTickInfo.count++:(I.afterWriteTickInfo={count:1,cb:he,stream:te,state:I},Z.nextTick(Se,I.afterWriteTickInfo)):rt(te,I,1,he))):ae(te,new B)}function Se({stream:te,state:U,count:I,cb:N}){return U.afterWriteTickInfo=null,rt(te,U,I,N)}function rt(te,U,I,N){for(!U.ending&&!te.destroyed&&0===U.length&&U.needDrain&&(U.needDrain=!1,te.emit("drain"));I-- >0;)U.pendingcb--,N();U.destroyed&&mt(U),ie(te,U)}function mt(te){if(te.writing)return;for(let he=te.bufferedIndex;he<te.buffered.length;++he){var U;const{chunk:We,callback:Ee}=te.buffered[he];te.length-=te.objectMode?1:We.length,Ee(null!==(U=te.errored)&&void 0!==U?U:new M("write"))}const I=te[Oe].splice(0);for(let he=0;he<I.length;he++){var N;I[he](null!==(N=te.errored)&&void 0!==N?N:new M("end"))}Qe(te)}function qe(te,U){if(U.corked||U.bufferProcessing||U.destroyed||!U.constructed)return;const{buffered:I,bufferedIndex:N,objectMode:he}=U,We=I.length-N;if(!We)return;let Ee=N;if(U.bufferProcessing=!0,We>1&&te._writev){U.pendingcb-=We-1;const Ue=U.allNoop?xe:vt=>{for(let Nt=Ee;Nt<I.length;++Nt)I[Nt].callback(vt)},Ze=U.allNoop&&0===Ee?I:C(I,Ee);Ze.allBuffers=U.allBuffers,Ae(te,U,!0,U.length,Ze,"",Ue),Qe(U)}else{do{const{chunk:Ue,encoding:Ze,callback:vt}=I[Ee];I[Ee++]=null,Ae(te,U,!1,he?1:Ue.length,Ue,Ze,vt)}while(Ee<I.length&&!U.writing);Ee===I.length?Qe(U):Ee>256?(I.splice(0,Ee),U.bufferedIndex=0):U.bufferedIndex=Ee}U.bufferProcessing=!1}function fe(te){return te.ending&&!te.destroyed&&te.constructed&&0===te.length&&!te.errored&&0===te.buffered.length&&!te.finished&&!te.writing&&!te.errorEmitted&&!te.closeEmitted}function ie(te,U,I){fe(U)&&(function A(te,U){!U.prefinished&&!U.finalCalled&&("function"!=typeof te._final||U.destroyed?(U.prefinished=!0,te.emit("prefinish")):(U.finalCalled=!0,function R(te,U){let I=!1;function N(he){if(I)ae(te,he??B());else if(I=!0,U.pendingcb--,he){const We=U[Oe].splice(0);for(let Ee=0;Ee<We.length;Ee++)We[Ee](he);ae(te,he,U.sync)}else fe(U)&&(U.prefinished=!0,te.emit("prefinish"),U.pendingcb++,Z.nextTick(J,te,U))}U.sync=!0,U.pendingcb++;try{te._final(N)}catch(he){N(he)}U.sync=!1}(te,U)))}(te,U),0===U.pendingcb&&(I?(U.pendingcb++,Z.nextTick((N,he)=>{fe(he)?J(N,he):he.pendingcb--},te,U)):fe(U)&&(U.pendingcb++,J(te,U))))}function J(te,U){U.pendingcb--,U.finished=!0;const I=U[Oe].splice(0);for(let N=0;N<I.length;N++)I[N]();if(te.emit("finish"),U.autoDestroy){const N=te._readableState;(!N||N.autoDestroy&&(N.endEmitted||!1===N.readable))&&te.destroy()}}Ve.prototype.getBuffer=function(){return C(this.buffered,this.bufferedIndex)},X(Ve.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),X(Je,P,{__proto__:null,value:function(te){return!!G(this,te)||this===Je&&te&&te._writableState instanceof Ve}}),Je.prototype.pipe=function(){ae(this,new b)},Je.prototype.write=function(te,U,I){return!0===Ce(this,te,U,I)},Je.prototype.cork=function(){this._writableState.corked++},Je.prototype.uncork=function(){const te=this._writableState;te.corked&&(te.corked--,te.writing||qe(this,te))},Je.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=F(U)),!x.isEncoding(U))throw new Me(U);return this._writableState.defaultEncoding=U,this},Je.prototype._write=function(te,U,I){if(!this._writev)throw new Y("_write()");this._writev([{chunk:te,encoding:U}],I)},Je.prototype._writev=null,Je.prototype.end=function(te,U,I){const N=this._writableState;let he;if("function"==typeof te?(I=te,te=null,U=null):"function"==typeof U&&(I=U,U=null),null!=te){const We=Ce(this,te,U);We instanceof q&&(he=We)}return N.corked&&(N.corked=1,this.uncork()),he||(N.errored||N.ending?N.finished?he=new T("end"):N.destroyed&&(he=new M("end")):(N.ending=!0,ie(this,N,!0),N.ended=!0)),"function"==typeof I&&(he||N.finished?Z.nextTick(I,he):N[Oe].push(I)),this},_(Je.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(te){this._writableState&&(this._writableState.destroyed=te)}},writable:{__proto__:null,get(){const te=this._writableState;return!(!te||!1===te.writable||te.destroyed||te.errored||te.ending||te.ended)},set(te){this._writableState&&(this._writableState.writable=!!te)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const te=this._writableState;return!!te&&!te.destroyed&&!te.ending&&te.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const He=k.destroy;let Xe;function ue(){return void 0===Xe&&(Xe={}),Xe}Je.prototype.destroy=function(te,U){const I=this._writableState;return!I.destroyed&&(I.bufferedIndex<I.buffered.length||I[Oe].length)&&Z.nextTick(mt,I),He.call(this,te,U),this},Je.prototype._undestroy=k.undestroy,Je.prototype._destroy=function(te,U){U(te)},Je.prototype[D.captureRejectionSymbol]=function(te){this.destroy(te)},Je.fromWeb=function(te,U){return ue().newStreamWritableFromWritableStream(te,U)},Je.toWeb=function(te){return ue().newWritableStreamFromStreamWritable(te)}},438:(je,me,S)=>{"use strict";const{ArrayIsArray:Z,ArrayPrototypeIncludes:C,ArrayPrototypeJoin:q,ArrayPrototypeMap:G,NumberIsInteger:X,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:E,NumberMIN_SAFE_INTEGER:F,NumberParseInt:W,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:D,String:se,StringPrototypeToUpperCase:x,StringPrototypeTrim:k}=S(1251),{hideStackFrames:oe,codes:{ERR_SOCKET_BAD_PORT:$,ERR_INVALID_ARG_TYPE:z,ERR_INVALID_ARG_VALUE:ee,ERR_OUT_OF_RANGE:Y,ERR_UNKNOWN_SIGNAL:B}}=S(5480),{normalizeEncoding:b}=S(1663),{isAsyncFunction:M,isArrayBufferView:T}=S(1663).types,le={},ae=/^[0-7]+$/,Ve=oe((Ee,Ue,Ze=F,vt=E)=>{if("number"!=typeof Ee)throw new z(Ue,"number",Ee);if(!X(Ee))throw new Y(Ue,"an integer",Ee);if(Ee<Ze||Ee>vt)throw new Y(Ue,`>= ${Ze} && <= ${vt}`,Ee)}),Qe=oe((Ee,Ue,Ze=-2147483648,vt=2147483647)=>{if("number"!=typeof Ee)throw new z(Ue,"number",Ee);if(!X(Ee))throw new Y(Ue,"an integer",Ee);if(Ee<Ze||Ee>vt)throw new Y(Ue,`>= ${Ze} && <= ${vt}`,Ee)}),Je=oe((Ee,Ue,Ze=!1)=>{if("number"!=typeof Ee)throw new z(Ue,"number",Ee);if(!X(Ee))throw new Y(Ue,"an integer",Ee);const vt=Ze?1:0,Nt=4294967295;if(Ee<vt||Ee>Nt)throw new Y(Ue,`>= ${vt} && <= ${Nt}`,Ee)});function Ce(Ee,Ue){if("string"!=typeof Ee)throw new z(Ue,"string",Ee)}const Ae=oe((Ee,Ue,Ze)=>{if(!C(Ze,Ee)){const Nt="must be one of: "+q(G(Ze,wt=>"string"==typeof wt?`'${wt}'`:se(wt)),", ");throw new ee(Ue,Ee,Nt)}});function ke(Ee,Ue){if("boolean"!=typeof Ee)throw new z(Ue,"boolean",Ee)}function de(Ee,Ue,Ze){return null!=Ee&&P(Ee,Ue)?Ee[Ue]:Ze}const Se=oe((Ee,Ue,Ze=null)=>{const vt=de(Ze,"allowArray",!1),Nt=de(Ze,"allowFunction",!1);if(!de(Ze,"nullable",!1)&&null===Ee||!vt&&Z(Ee)||"object"!=typeof Ee&&(!Nt||"function"!=typeof Ee))throw new z(Ue,"Object",Ee)}),rt=oe((Ee,Ue)=>{if(null!=Ee&&"object"!=typeof Ee&&"function"!=typeof Ee)throw new z(Ue,"a dictionary",Ee)}),mt=oe((Ee,Ue,Ze=0)=>{if(!Z(Ee))throw new z(Ue,"Array",Ee);if(Ee.length<Ze)throw new ee(Ue,Ee,`must be longer than ${Ze}`)}),ie=oe((Ee,Ue="buffer")=>{if(!T(Ee))throw new z(Ue,["Buffer","TypedArray","DataView"],Ee)}),Xe=oe((Ee,Ue)=>{if(void 0!==Ee&&(null===Ee||"object"!=typeof Ee||!("aborted"in Ee)))throw new z(Ue,"AbortSignal",Ee)}),ue=oe((Ee,Ue)=>{if("function"!=typeof Ee)throw new z(Ue,"Function",Ee)}),te=oe((Ee,Ue)=>{if("function"!=typeof Ee||M(Ee))throw new z(Ue,"Function",Ee)}),U=oe((Ee,Ue)=>{if(void 0!==Ee)throw new z(Ue,"undefined",Ee)}),N=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(Ee,Ue){if(typeof Ee>"u"||!D(N,Ee))throw new ee(Ue,Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}je.exports={isInt32:function j(Ee){return Ee===(0|Ee)},isUint32:function Me(Ee){return Ee===Ee>>>0},parseFileMode:function Oe(Ee,Ue,Ze){if(typeof Ee>"u"&&(Ee=Ze),"string"==typeof Ee){if(null===D(ae,Ee))throw new ee(Ue,Ee,"must be a 32-bit unsigned integer or an octal string");Ee=W(Ee,8)}return Je(Ee,Ue),Ee},validateArray:mt,validateStringArray:function qe(Ee,Ue){mt(Ee,Ue);for(let Ze=0;Ze<Ee.length;Ze++)Ce(Ee[Ze],`${Ue}[${Ze}]`)},validateBooleanArray:function fe(Ee,Ue){mt(Ee,Ue);for(let Ze=0;Ze<Ee.length;Ze++)ke(Ee[Ze],`${Ue}[${Ze}]`)},validateAbortSignalArray:function R(Ee,Ue){mt(Ee,Ue);for(let Ze=0;Ze<Ee.length;Ze++){const vt=Ee[Ze],Nt=`${Ue}[${Ze}]`;if(null==vt)throw new z(Nt,"AbortSignal",vt);Xe(vt,Nt)}},validateBoolean:ke,validateBuffer:ie,validateDictionary:rt,validateEncoding:function J(Ee,Ue){const Ze=b(Ue),vt=Ee.length;if("hex"===Ze&&vt%2!=0)throw new ee("encoding",Ue,`is invalid for data of length ${vt}`)},validateFunction:ue,validateInt32:Qe,validateInteger:Ve,validateNumber:function Be(Ee,Ue,Ze=void 0,vt){if("number"!=typeof Ee)throw new z(Ue,"number",Ee);if(null!=Ze&&Ee<Ze||null!=vt&&Ee>vt||(null!=Ze||null!=vt)&&_(Ee))throw new Y(Ue,`${null!=Ze?`>= ${Ze}`:""}${null!=Ze&&null!=vt?" && ":""}${null!=vt?`<= ${vt}`:""}`,Ee)},validateObject:Se,validateOneOf:Ae,validatePlainFunction:te,validatePort:function He(Ee,Ue="Port",Ze=!0){if("number"!=typeof Ee&&"string"!=typeof Ee||"string"==typeof Ee&&0===k(Ee).length||+Ee!=+Ee>>>0||Ee>65535||0===Ee&&!Ze)throw new $(Ue,Ee,Ze);return 0|Ee},validateSignalName:function A(Ee,Ue="signal"){if(Ce(Ee,Ue),void 0===le[Ee])throw void 0!==le[x(Ee)]?new B(Ee+" (signals must use all capital letters)"):new B(Ee)},validateString:Ce,validateUint32:Je,validateUndefined:U,validateUnion:function I(Ee,Ue,Ze){if(!C(Ze,Ee))throw new z(Ue,`('${q(Ze,"|")}')`,Ee)},validateAbortSignal:Xe,validateLinkHeaderValue:function We(Ee){if("string"==typeof Ee)return he(Ee,"hints"),Ee;if(Z(Ee)){const Ue=Ee.length;let Ze="";if(0===Ue)return Ze;for(let vt=0;vt<Ue;vt++){const Nt=Ee[vt];he(Nt,"hints"),Ze+=Nt,vt!==Ue-1&&(Ze+=", ")}return Ze}throw new ee("hints",Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},6947:(je,me,S)=>{"use strict";const Z=S(5603),C=S(9204),q=Z.Readable.destroy;je.exports=Z.Readable,je.exports._uint8ArrayToBuffer=Z._uint8ArrayToBuffer,je.exports._isUint8Array=Z._isUint8Array,je.exports.isDisturbed=Z.isDisturbed,je.exports.isErrored=Z.isErrored,je.exports.isReadable=Z.isReadable,je.exports.Readable=Z.Readable,je.exports.Writable=Z.Writable,je.exports.Duplex=Z.Duplex,je.exports.Transform=Z.Transform,je.exports.PassThrough=Z.PassThrough,je.exports.addAbortSignal=Z.addAbortSignal,je.exports.finished=Z.finished,je.exports.destroy=Z.destroy,je.exports.destroy=q,je.exports.pipeline=Z.pipeline,je.exports.compose=Z.compose,Object.defineProperty(Z,"promises",{configurable:!0,enumerable:!0,get:()=>C}),je.exports.Stream=Z.Stream,je.exports.default=je.exports},5480:(je,me,S)=>{"use strict";const{format:Z,inspect:C,AggregateError:q}=S(1663),G=globalThis.AggregateError||q,X=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],E=/^([A-Z][a-z0-9]*)+$/,W={};function P(z,ee){if(!z)throw new W.ERR_INTERNAL_ASSERTION(ee)}function D(z){let ee="",Y=z.length;const B="-"===z[0]?1:0;for(;Y>=B+4;Y-=3)ee=`_${z.slice(Y-3,Y)}${ee}`;return`${z.slice(0,Y)}${ee}`}function x(z,ee,Y){Y||(Y=Error);class B extends Y{constructor(...M){super(function se(z,ee,Y){if("function"==typeof ee)return P(ee.length<=Y.length,`Code: ${z}; The provided arguments length (${Y.length}) does not match the required ones (${ee.length}).`),ee(...Y);const B=(ee.match(/%[dfijoOs]/g)||[]).length;return P(B===Y.length,`Code: ${z}; The provided arguments length (${Y.length}) does not match the required ones (${B}).`),0===Y.length?ee:Z(ee,...Y)}(z,ee,M))}toString(){return`${this.name} [${z}]: ${this.message}`}}Object.defineProperties(B.prototype,{name:{value:Y.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${z}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),B.prototype.code=z,B.prototype[X]=!0,W[z]=B}function k(z){return Object.defineProperty(z,"name",{value:"__node_internal_"+z.name}),z}class $ extends Error{constructor(ee="The operation was aborted",Y=void 0){if(void 0!==Y&&"object"!=typeof Y)throw new W.ERR_INVALID_ARG_TYPE("options","Object",Y);super(ee,Y),this.code="ABORT_ERR",this.name="AbortError"}}x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(z,ee,Y)=>{P("string"==typeof z,"'name' must be a string"),Array.isArray(ee)||(ee=[ee]);let B="The ";z.endsWith(" argument")?B+=`${z} `:B+=`"${z}" ${z.includes(".")?"property":"argument"} `,B+="must be ";const b=[],M=[],T=[];for(const j of ee)P("string"==typeof j,"All expected entries have to be of type string"),_.includes(j)?b.push(j.toLowerCase()):E.test(j)?M.push(j):(P("object"!==j,'The value "object" should be written as "Object"'),T.push(j));if(M.length>0){const j=b.indexOf("object");-1!==j&&(b.splice(b,j,1),M.push("Object"))}if(b.length>0){switch(b.length){case 1:B+=`of type ${b[0]}`;break;case 2:B+=`one of type ${b[0]} or ${b[1]}`;break;default:{const j=b.pop();B+=`one of type ${b.join(", ")}, or ${j}`}}(M.length>0||T.length>0)&&(B+=" or ")}if(M.length>0){switch(M.length){case 1:B+=`an instance of ${M[0]}`;break;case 2:B+=`an instance of ${M[0]} or ${M[1]}`;break;default:{const j=M.pop();B+=`an instance of ${M.join(", ")}, or ${j}`}}T.length>0&&(B+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(B+="an "),B+=`${T[0]}`;break;case 2:B+=`one of ${T[0]} or ${T[1]}`;break;default:{const j=T.pop();B+=`one of ${T.join(", ")}, or ${j}`}}if(null==Y)B+=`. Received ${Y}`;else if("function"==typeof Y&&Y.name)B+=`. Received function ${Y.name}`;else if("object"==typeof Y){var le;null!==(le=Y.constructor)&&void 0!==le&&le.name?B+=`. Received an instance of ${Y.constructor.name}`:B+=`. Received ${C(Y,{depth:-1})}`}else{let j=C(Y,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),B+=`. Received type ${typeof Y} (${j})`}return B},TypeError),x("ERR_INVALID_ARG_VALUE",(z,ee,Y="is invalid")=>{let B=C(ee);return B.length>128&&(B=B.slice(0,128)+"..."),`The ${z.includes(".")?"property":"argument"} '${z}' ${Y}. Received ${B}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(z,ee,Y)=>{var B;return`Expected ${z} to be returned from the "${ee}" function but got ${null!=Y&&null!==(B=Y.constructor)&&void 0!==B&&B.name?`instance of ${Y.constructor.name}`:"type "+typeof Y}.`},TypeError),x("ERR_MISSING_ARGS",(...z)=>{let ee;P(z.length>0,"At least one arg needs to be specified");const Y=z.length;switch(z=(Array.isArray(z)?z:[z]).map(B=>`"${B}"`).join(" or "),Y){case 1:ee+=`The ${z[0]} argument`;break;case 2:ee+=`The ${z[0]} and ${z[1]} arguments`;break;default:{const B=z.pop();ee+=`The ${z.join(", ")}, and ${B} arguments`}}return`${ee} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(z,ee,Y)=>{let B;return P(ee,'Missing "range" argument'),Number.isInteger(Y)&&Math.abs(Y)>2**32?B=D(String(Y)):"bigint"==typeof Y?(B=String(Y),(Y>2n**32n||Y<-(2n**32n))&&(B=D(B)),B+="n"):B=C(Y),`The value of "${z}" is out of range. It must be ${ee}. Received ${B}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),je.exports={AbortError:$,aggregateTwoErrors:k(function oe(z,ee){if(z&&ee&&z!==ee){if(Array.isArray(ee.errors))return ee.errors.push(z),ee;const Y=new G([ee,z],ee.message);return Y.code=ee.code,Y}return z||ee}),hideStackFrames:k,codes:W}},1251:je=>{"use strict";je.exports={ArrayIsArray:me=>Array.isArray(me),ArrayPrototypeIncludes:(me,S)=>me.includes(S),ArrayPrototypeIndexOf:(me,S)=>me.indexOf(S),ArrayPrototypeJoin:(me,S)=>me.join(S),ArrayPrototypeMap:(me,S)=>me.map(S),ArrayPrototypePop:(me,S)=>me.pop(S),ArrayPrototypePush:(me,S)=>me.push(S),ArrayPrototypeSlice:(me,S,Z)=>me.slice(S,Z),Error,FunctionPrototypeCall:(me,S,...Z)=>me.call(S,...Z),FunctionPrototypeSymbolHasInstance:(me,S)=>Function.prototype[Symbol.hasInstance].call(me,S),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(me,S)=>Object.defineProperties(me,S),ObjectDefineProperty:(me,S,Z)=>Object.defineProperty(me,S,Z),ObjectGetOwnPropertyDescriptor:(me,S)=>Object.getOwnPropertyDescriptor(me,S),ObjectKeys:me=>Object.keys(me),ObjectSetPrototypeOf:(me,S)=>Object.setPrototypeOf(me,S),Promise,PromisePrototypeCatch:(me,S)=>me.catch(S),PromisePrototypeThen:(me,S,Z)=>me.then(S,Z),PromiseReject:me=>Promise.reject(me),PromiseResolve:me=>Promise.resolve(me),ReflectApply:Reflect.apply,RegExpPrototypeTest:(me,S)=>me.test(S),SafeSet:Set,String,StringPrototypeSlice:(me,S,Z)=>me.slice(S,Z),StringPrototypeToLowerCase:me=>me.toLowerCase(),StringPrototypeToUpperCase:me=>me.toUpperCase(),StringPrototypeTrim:me=>me.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(me,S,Z)=>me.set(S,Z),Boolean,Uint8Array}},1663:(je,me,S)=>{"use strict";var Z=S(9293).default;const C=S(2317),{kResistStopPropagation:q,SymbolDispose:G}=S(1251),X=globalThis.AbortSignal||S(9465).AbortSignal,_=globalThis.AbortController||S(9465).AbortController,E=Object.getPrototypeOf(Z(function*(){})).constructor,F=globalThis.Blob||C.Blob,W=typeof F<"u"?function(k){return k instanceof F}:function(k){return!1},P=(x,k)=>{if(void 0!==x&&(null===x||"object"!=typeof x||!("aborted"in x)))throw new ERR_INVALID_ARG_TYPE(k,"AbortSignal",x)};class se extends Error{constructor(k){if(!Array.isArray(k))throw new TypeError("Expected input to be an Array, got "+typeof k);let oe="";for(let $=0;$<k.length;$++)oe+=`    ${k[$].stack}\n`;super(oe),this.name="AggregateError",this.errors=k}}je.exports={AggregateError:se,kEmptyObject:Object.freeze({}),once(x){let k=!1;return function(...oe){k||(k=!0,x.apply(this,oe))}},createDeferredPromise:function(){let x,k;return{promise:new Promise(($,z)=>{x=$,k=z}),resolve:x,reject:k}},promisify:x=>new Promise((k,oe)=>{x(($,...z)=>$?oe($):k(...z))}),debuglog:()=>function(){},format:(x,...k)=>x.replace(/%([sdifj])/g,function(...[oe,$]){const z=k.shift();return"f"===$?z.toFixed(6):"j"===$?JSON.stringify(z):"s"===$&&"object"==typeof z?`${z.constructor!==Object?z.constructor.name:""} {}`.trim():z.toString()}),inspect(x){switch(typeof x){case"string":if(x.includes("'")){if(!x.includes('"'))return`"${x}"`;if(!x.includes("`")&&!x.includes("${"))return`\`${x}\``}return`'${x}'`;case"number":return isNaN(x)?"NaN":Object.is(x,-0)?String(x):x;case"bigint":return`${String(x)}n`;case"boolean":case"undefined":return String(x);case"object":return"{}"}},types:{isAsyncFunction:x=>x instanceof E,isArrayBufferView:x=>ArrayBuffer.isView(x)},isBlob:W,deprecate:(x,k)=>x,addAbortListener:S(4356).addAbortListener||function(k,oe){if(void 0===k)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",k);let $;return P(k,"signal"),((x,k)=>{if("function"!=typeof x)throw new ERR_INVALID_ARG_TYPE("listener","Function",x)})(oe),k.aborted?queueMicrotask(()=>oe()):(k.addEventListener("abort",oe,{__proto__:null,once:!0,[q]:!0}),$=()=>{k.removeEventListener("abort",oe)}),{__proto__:null,[G](){var z;null===(z=$)||void 0===z||z()}}},AbortSignalAny:X.any||function(k){if(1===k.length)return k[0];const oe=new _,$=()=>oe.abort();return k.forEach(z=>{P(z,"signals"),z.addEventListener("abort",$,{once:!0})}),oe.signal.addEventListener("abort",()=>{k.forEach(z=>z.removeEventListener("abort",$))},{once:!0}),oe.signal}},je.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},5603:(je,me,S)=>{const{Buffer:Z}=S(2317),{ObjectDefineProperty:C,ObjectKeys:q,ReflectApply:G}=S(1251),{promisify:{custom:X}}=S(1663),{streamReturningOperators:_,promiseReturningOperators:E}=S(1210),{codes:{ERR_ILLEGAL_CONSTRUCTOR:F}}=S(5480),W=S(6683),{setDefaultHighWaterMark:P,getDefaultHighWaterMark:D}=S(2934),{pipeline:se}=S(6249),{destroyer:x}=S(1509),k=S(3139),$=S(9204),z=S(6110),ee=je.exports=S(8708).Stream;ee.isDestroyed=z.isDestroyed,ee.isDisturbed=z.isDisturbed,ee.isErrored=z.isErrored,ee.isReadable=z.isReadable,ee.isWritable=z.isWritable,ee.Readable=S(5779);for(const b of q(_)){let T=function(...le){if(new.target)throw F();return ee.Readable.from(G(M,this,le))};const M=_[b];C(T,"name",{__proto__:null,value:M.name}),C(T,"length",{__proto__:null,value:M.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const b of q(E)){let T=function(...j){if(new.target)throw F();return G(M,this,j)};const M=E[b];C(T,"name",{__proto__:null,value:M.name}),C(T,"length",{__proto__:null,value:M.length}),C(ee.Readable.prototype,b,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}ee.Writable=S(2983),ee.Duplex=S(9613),ee.Transform=S(9059),ee.PassThrough=S(6569),ee.pipeline=se;const{addAbortSignal:Y}=S(8992);ee.addAbortSignal=Y,ee.finished=k,ee.destroy=x,ee.compose=W,ee.setDefaultHighWaterMark=P,ee.getDefaultHighWaterMark=D,C(ee,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>$}),C(se,X,{__proto__:null,enumerable:!0,get:()=>$.pipeline}),C(k,X,{__proto__:null,enumerable:!0,get:()=>$.finished}),ee.Stream=ee,ee._isUint8Array=function(M){return M instanceof Uint8Array},ee._uint8ArrayToBuffer=function(M){return Z.from(M.buffer,M.byteOffset,M.byteLength)}},9204:(je,me,S)=>{"use strict";const{ArrayPrototypePop:Z,Promise:C}=S(1251),{isIterable:q,isNodeStream:G,isWebStream:X}=S(6110),{pipelineImpl:_}=S(6249),{finished:E}=S(3139);S(5603),je.exports={finished:E,pipeline:function F(...W){return new C((P,D)=>{let se,x;const k=W[W.length-1];if(k&&"object"==typeof k&&!G(k)&&!q(k)&&!X(k)){const oe=Z(W);se=oe.signal,x=oe.end}_(W,(oe,$)=>{oe?D(oe):P($)},{signal:se,end:x})})}}},2317:(je,me,S)=>{"use strict";const Z=S(3981),C=S(2020),q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;me.Buffer=E,me.SlowBuffer=function ee(pe){return+pe!=pe&&(pe=0),E.alloc(+pe)},me.INSPECT_MAX_BYTES=50;const G=2147483647;function _(pe){if(pe>G)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const H=new Uint8Array(pe);return Object.setPrototypeOf(H,E.prototype),H}function E(pe,H,ne){if("number"==typeof pe){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return D(pe)}return F(pe,H,ne)}function F(pe,H,ne){if("string"==typeof pe)return function se(pe,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!E.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const ne=0|Y(pe,H);let Le=_(ne);const tt=Le.write(pe,H);return tt!==ne&&(Le=Le.slice(0,tt)),Le}(pe,H);if(ArrayBuffer.isView(pe))return function k(pe){if(Ze(pe,Uint8Array)){const H=new Uint8Array(pe);return oe(H.buffer,H.byteOffset,H.byteLength)}return x(pe)}(pe);if(null==pe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(Ze(pe,ArrayBuffer)||pe&&Ze(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(pe,SharedArrayBuffer)||pe&&Ze(pe.buffer,SharedArrayBuffer)))return oe(pe,H,ne);if("number"==typeof pe)throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=pe.valueOf&&pe.valueOf();if(null!=Le&&Le!==pe)return E.from(Le,H,ne);const tt=function $(pe){if(E.isBuffer(pe)){const H=0|z(pe.length),ne=_(H);return 0===ne.length||pe.copy(ne,0,0,H),ne}return void 0!==pe.length?"number"!=typeof pe.length||vt(pe.length)?_(0):x(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?x(pe.data):void 0}(pe);if(tt)return tt;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof pe[Symbol.toPrimitive])return E.from(pe[Symbol.toPrimitive]("string"),H,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}function W(pe){if("number"!=typeof pe)throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function D(pe){return W(pe),_(pe<0?0:0|z(pe))}function x(pe){const H=pe.length<0?0:0|z(pe.length),ne=_(H);for(let Le=0;Le<H;Le+=1)ne[Le]=255&pe[Le];return ne}function oe(pe,H,ne){if(H<0||pe.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<H+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return Le=void 0===H&&void 0===ne?new Uint8Array(pe):void 0===ne?new Uint8Array(pe,H):new Uint8Array(pe,H,ne),Object.setPrototypeOf(Le,E.prototype),Le}function z(pe){if(pe>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|pe}function Y(pe,H){if(E.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||Ze(pe,ArrayBuffer))return pe.byteLength;if("string"!=typeof pe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const ne=pe.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===ne)return 0;let tt=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return N(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return Ee(pe).length;default:if(tt)return Le?-1:N(pe).length;H=(""+H).toLowerCase(),tt=!0}}function B(pe,H,ne){let Le=!1;if((void 0===H||H<0)&&(H=0),H>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(H>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return Ae(this,H,ne);case"utf8":case"utf-8":return Ve(this,H,ne);case"ascii":return Ce(this,H,ne);case"latin1":case"binary":return Be(this,H,ne);case"base64":return Oe(this,H,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,H,ne);default:if(Le)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),Le=!0}}function b(pe,H,ne){const Le=pe[H];pe[H]=pe[ne],pe[ne]=Le}function M(pe,H,ne,Le,tt){if(0===pe.length)return-1;if("string"==typeof ne?(Le=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),vt(ne=+ne)&&(ne=tt?0:pe.length-1),ne<0&&(ne=pe.length+ne),ne>=pe.length){if(tt)return-1;ne=pe.length-1}else if(ne<0){if(!tt)return-1;ne=0}if("string"==typeof H&&(H=E.from(H,Le)),E.isBuffer(H))return 0===H.length?-1:T(pe,H,ne,Le,tt);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?tt?Uint8Array.prototype.indexOf.call(pe,H,ne):Uint8Array.prototype.lastIndexOf.call(pe,H,ne):T(pe,[H],ne,Le,tt);throw new TypeError("val must be string, number or Buffer")}function T(pe,H,ne,Le,tt){let zn,lt=1,xt=pe.length,an=H.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(pe.length<2||H.length<2)return-1;lt=2,xt/=2,an/=2,ne/=2}function kn(Cn,xn){return 1===lt?Cn[xn]:Cn.readUInt16BE(xn*lt)}if(tt){let Cn=-1;for(zn=ne;zn<xt;zn++)if(kn(pe,zn)===kn(H,-1===Cn?0:zn-Cn)){if(-1===Cn&&(Cn=zn),zn-Cn+1===an)return Cn*lt}else-1!==Cn&&(zn-=zn-Cn),Cn=-1}else for(ne+an>xt&&(ne=xt-an),zn=ne;zn>=0;zn--){let Cn=!0;for(let xn=0;xn<an;xn++)if(kn(pe,zn+xn)!==kn(H,xn)){Cn=!1;break}if(Cn)return zn}return-1}function le(pe,H,ne,Le){ne=Number(ne)||0;const tt=pe.length-ne;Le?(Le=Number(Le))>tt&&(Le=tt):Le=tt;const lt=H.length;let xt;for(Le>lt/2&&(Le=lt/2),xt=0;xt<Le;++xt){const an=parseInt(H.substr(2*xt,2),16);if(vt(an))return xt;pe[ne+xt]=an}return xt}function j(pe,H,ne,Le){return Ue(N(H,pe.length-ne),pe,ne,Le)}function Me(pe,H,ne,Le){return Ue(function he(pe){const H=[];for(let ne=0;ne<pe.length;++ne)H.push(255&pe.charCodeAt(ne));return H}(H),pe,ne,Le)}function ae(pe,H,ne,Le){return Ue(Ee(H),pe,ne,Le)}function xe(pe,H,ne,Le){return Ue(function We(pe,H){let ne,Le,tt;const lt=[];for(let xt=0;xt<pe.length&&!((H-=2)<0);++xt)ne=pe.charCodeAt(xt),Le=ne>>8,tt=ne%256,lt.push(tt),lt.push(Le);return lt}(H,pe.length-ne),pe,ne,Le)}function Oe(pe,H,ne){return Z.fromByteArray(0===H&&ne===pe.length?pe:pe.slice(H,ne))}function Ve(pe,H,ne){ne=Math.min(pe.length,ne);const Le=[];let tt=H;for(;tt<ne;){const lt=pe[tt];let xt=null,an=lt>239?4:lt>223?3:lt>191?2:1;if(tt+an<=ne){let kn,zn,Cn,xn;switch(an){case 1:lt<128&&(xt=lt);break;case 2:kn=pe[tt+1],128==(192&kn)&&(xn=(31&lt)<<6|63&kn,xn>127&&(xt=xn));break;case 3:kn=pe[tt+1],zn=pe[tt+2],128==(192&kn)&&128==(192&zn)&&(xn=(15&lt)<<12|(63&kn)<<6|63&zn,xn>2047&&(xn<55296||xn>57343)&&(xt=xn));break;case 4:kn=pe[tt+1],zn=pe[tt+2],Cn=pe[tt+3],128==(192&kn)&&128==(192&zn)&&128==(192&Cn)&&(xn=(15&lt)<<18|(63&kn)<<12|(63&zn)<<6|63&Cn,xn>65535&&xn<1114112&&(xt=xn))}}null===xt?(xt=65533,an=1):xt>65535&&(xt-=65536,Le.push(xt>>>10&1023|55296),xt=56320|1023&xt),Le.push(xt),tt+=an}return function Je(pe){const H=pe.length;if(H<=Qe)return String.fromCharCode.apply(String,pe);let ne="",Le=0;for(;Le<H;)ne+=String.fromCharCode.apply(String,pe.slice(Le,Le+=Qe));return ne}(Le)}me.kMaxLength=G,!(E.TYPED_ARRAY_SUPPORT=function X(){try{const pe=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(pe,H),42===pe.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}}),E.poolSize=8192,E.from=function(pe,H,ne){return F(pe,H,ne)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array),E.alloc=function(pe,H,ne){return function P(pe,H,ne){return W(pe),pe<=0?_(pe):void 0!==H?"string"==typeof ne?_(pe).fill(H,ne):_(pe).fill(H):_(pe)}(pe,H,ne)},E.allocUnsafe=function(pe){return D(pe)},E.allocUnsafeSlow=function(pe){return D(pe)},E.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==E.prototype},E.compare=function(H,ne){if(Ze(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),Ze(ne,Uint8Array)&&(ne=E.from(ne,ne.offset,ne.byteLength)),!E.isBuffer(H)||!E.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===ne)return 0;let Le=H.length,tt=ne.length;for(let lt=0,xt=Math.min(Le,tt);lt<xt;++lt)if(H[lt]!==ne[lt]){Le=H[lt],tt=ne[lt];break}return Le<tt?-1:tt<Le?1:0},E.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(H,ne){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return E.alloc(0);let Le;if(void 0===ne)for(ne=0,Le=0;Le<H.length;++Le)ne+=H[Le].length;const tt=E.allocUnsafe(ne);let lt=0;for(Le=0;Le<H.length;++Le){let xt=H[Le];if(Ze(xt,Uint8Array))lt+xt.length>tt.length?(E.isBuffer(xt)||(xt=E.from(xt)),xt.copy(tt,lt)):Uint8Array.prototype.set.call(tt,xt,lt);else{if(!E.isBuffer(xt))throw new TypeError('"list" argument must be an Array of Buffers');xt.copy(tt,lt)}lt+=xt.length}return tt},E.byteLength=Y,E.prototype._isBuffer=!0,E.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ne=0;ne<H;ne+=2)b(this,ne,ne+1);return this},E.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ne=0;ne<H;ne+=4)b(this,ne,ne+3),b(this,ne+1,ne+2);return this},E.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ne=0;ne<H;ne+=8)b(this,ne,ne+7),b(this,ne+1,ne+6),b(this,ne+2,ne+5),b(this,ne+3,ne+4);return this},E.prototype.toLocaleString=E.prototype.toString=function(){const H=this.length;return 0===H?"":0===arguments.length?Ve(this,0,H):B.apply(this,arguments)},E.prototype.equals=function(H){if(!E.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===E.compare(this,H)},E.prototype.inspect=function(){let H="";const ne=me.INSPECT_MAX_BYTES;return H=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(H+=" ... "),"<Buffer "+H+">"},q&&(E.prototype[q]=E.prototype.inspect),E.prototype.compare=function(H,ne,Le,tt,lt){if(Ze(H,Uint8Array)&&(H=E.from(H,H.offset,H.byteLength)),!E.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===ne&&(ne=0),void 0===Le&&(Le=H?H.length:0),void 0===tt&&(tt=0),void 0===lt&&(lt=this.length),ne<0||Le>H.length||tt<0||lt>this.length)throw new RangeError("out of range index");if(tt>=lt&&ne>=Le)return 0;if(tt>=lt)return-1;if(ne>=Le)return 1;if(this===H)return 0;let xt=(lt>>>=0)-(tt>>>=0),an=(Le>>>=0)-(ne>>>=0);const kn=Math.min(xt,an),zn=this.slice(tt,lt),Cn=H.slice(ne,Le);for(let xn=0;xn<kn;++xn)if(zn[xn]!==Cn[xn]){xt=zn[xn],an=Cn[xn];break}return xt<an?-1:an<xt?1:0},E.prototype.includes=function(H,ne,Le){return-1!==this.indexOf(H,ne,Le)},E.prototype.indexOf=function(H,ne,Le){return M(this,H,ne,Le,!0)},E.prototype.lastIndexOf=function(H,ne,Le){return M(this,H,ne,Le,!1)},E.prototype.write=function(H,ne,Le,tt){if(void 0===ne)tt="utf8",Le=this.length,ne=0;else if(void 0===Le&&"string"==typeof ne)tt=ne,Le=this.length,ne=0;else{if(!isFinite(ne))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ne>>>=0,isFinite(Le)?(Le>>>=0,void 0===tt&&(tt="utf8")):(tt=Le,Le=void 0)}const lt=this.length-ne;if((void 0===Le||Le>lt)&&(Le=lt),H.length>0&&(Le<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");tt||(tt="utf8");let xt=!1;for(;;)switch(tt){case"hex":return le(this,H,ne,Le);case"utf8":case"utf-8":return j(this,H,ne,Le);case"ascii":case"latin1":case"binary":return Me(this,H,ne,Le);case"base64":return ae(this,H,ne,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,H,ne,Le);default:if(xt)throw new TypeError("Unknown encoding: "+tt);tt=(""+tt).toLowerCase(),xt=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function Ce(pe,H,ne){let Le="";ne=Math.min(pe.length,ne);for(let tt=H;tt<ne;++tt)Le+=String.fromCharCode(127&pe[tt]);return Le}function Be(pe,H,ne){let Le="";ne=Math.min(pe.length,ne);for(let tt=H;tt<ne;++tt)Le+=String.fromCharCode(pe[tt]);return Le}function Ae(pe,H,ne){const Le=pe.length;(!H||H<0)&&(H=0),(!ne||ne<0||ne>Le)&&(ne=Le);let tt="";for(let lt=H;lt<ne;++lt)tt+=Nt[pe[lt]];return tt}function ke(pe,H,ne){const Le=pe.slice(H,ne);let tt="";for(let lt=0;lt<Le.length-1;lt+=2)tt+=String.fromCharCode(Le[lt]+256*Le[lt+1]);return tt}function de(pe,H,ne){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+H>ne)throw new RangeError("Trying to access beyond buffer length")}function Se(pe,H,ne,Le,tt,lt){if(!E.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>tt||H<lt)throw new RangeError('"value" argument is out of bounds');if(ne+Le>pe.length)throw new RangeError("Index out of range")}function rt(pe,H,ne,Le,tt){Xe(H,Le,tt,pe,ne,7);let lt=Number(H&BigInt(4294967295));pe[ne++]=lt,lt>>=8,pe[ne++]=lt,lt>>=8,pe[ne++]=lt,lt>>=8,pe[ne++]=lt;let xt=Number(H>>BigInt(32)&BigInt(4294967295));return pe[ne++]=xt,xt>>=8,pe[ne++]=xt,xt>>=8,pe[ne++]=xt,xt>>=8,pe[ne++]=xt,ne}function mt(pe,H,ne,Le,tt){Xe(H,Le,tt,pe,ne,7);let lt=Number(H&BigInt(4294967295));pe[ne+7]=lt,lt>>=8,pe[ne+6]=lt,lt>>=8,pe[ne+5]=lt,lt>>=8,pe[ne+4]=lt;let xt=Number(H>>BigInt(32)&BigInt(4294967295));return pe[ne+3]=xt,xt>>=8,pe[ne+2]=xt,xt>>=8,pe[ne+1]=xt,xt>>=8,pe[ne]=xt,ne+8}function qe(pe,H,ne,Le,tt,lt){if(ne+Le>pe.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function fe(pe,H,ne,Le,tt){return H=+H,ne>>>=0,tt||qe(pe,0,ne,4),C.write(pe,H,ne,Le,23,4),ne+4}function R(pe,H,ne,Le,tt){return H=+H,ne>>>=0,tt||qe(pe,0,ne,8),C.write(pe,H,ne,Le,52,8),ne+8}E.prototype.slice=function(H,ne){const Le=this.length;(H=~~H)<0?(H+=Le)<0&&(H=0):H>Le&&(H=Le),(ne=void 0===ne?Le:~~ne)<0?(ne+=Le)<0&&(ne=0):ne>Le&&(ne=Le),ne<H&&(ne=H);const tt=this.subarray(H,ne);return Object.setPrototypeOf(tt,E.prototype),tt},E.prototype.readUintLE=E.prototype.readUIntLE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H],lt=1,xt=0;for(;++xt<ne&&(lt*=256);)tt+=this[H+xt]*lt;return tt},E.prototype.readUintBE=E.prototype.readUIntBE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H+--ne],lt=1;for(;ne>0&&(lt*=256);)tt+=this[H+--ne]*lt;return tt},E.prototype.readUint8=E.prototype.readUInt8=function(H,ne){return H>>>=0,ne||de(H,1,this.length),this[H]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(H,ne){return H>>>=0,ne||de(H,2,this.length),this[H]|this[H+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(H,ne){return H>>>=0,ne||de(H,2,this.length),this[H]<<8|this[H+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},E.prototype.readBigUInt64LE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=ne+256*this[++H]+65536*this[++H]+this[++H]*2**24,lt=this[++H]+256*this[++H]+65536*this[++H]+Le*2**24;return BigInt(tt)+(BigInt(lt)<<BigInt(32))}),E.prototype.readBigUInt64BE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=ne*2**24+65536*this[++H]+256*this[++H]+this[++H],lt=this[++H]*2**24+65536*this[++H]+256*this[++H]+Le;return(BigInt(tt)<<BigInt(32))+BigInt(lt)}),E.prototype.readIntLE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=this[H],lt=1,xt=0;for(;++xt<ne&&(lt*=256);)tt+=this[H+xt]*lt;return lt*=128,tt>=lt&&(tt-=Math.pow(2,8*ne)),tt},E.prototype.readIntBE=function(H,ne,Le){H>>>=0,ne>>>=0,Le||de(H,ne,this.length);let tt=ne,lt=1,xt=this[H+--tt];for(;tt>0&&(lt*=256);)xt+=this[H+--tt]*lt;return lt*=128,xt>=lt&&(xt-=Math.pow(2,8*ne)),xt},E.prototype.readInt8=function(H,ne){return H>>>=0,ne||de(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},E.prototype.readInt16LE=function(H,ne){H>>>=0,ne||de(H,2,this.length);const Le=this[H]|this[H+1]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt16BE=function(H,ne){H>>>=0,ne||de(H,2,this.length);const Le=this[H+1]|this[H]<<8;return 32768&Le?4294901760|Le:Le},E.prototype.readInt32LE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},E.prototype.readInt32BE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},E.prototype.readBigInt64LE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];return(void 0===ne||void 0===Le)&&te(H,this.length-8),(BigInt(this[H+4]+256*this[H+5]+65536*this[H+6]+(Le<<24))<<BigInt(32))+BigInt(ne+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),E.prototype.readBigInt64BE=wt(function(H){ue(H>>>=0,"offset");const ne=this[H],Le=this[H+7];(void 0===ne||void 0===Le)&&te(H,this.length-8);const tt=(ne<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(tt)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+Le)}),E.prototype.readFloatLE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),C.read(this,H,!0,23,4)},E.prototype.readFloatBE=function(H,ne){return H>>>=0,ne||de(H,4,this.length),C.read(this,H,!1,23,4)},E.prototype.readDoubleLE=function(H,ne){return H>>>=0,ne||de(H,8,this.length),C.read(this,H,!0,52,8)},E.prototype.readDoubleBE=function(H,ne){return H>>>=0,ne||de(H,8,this.length),C.read(this,H,!1,52,8)},E.prototype.writeUintLE=E.prototype.writeUIntLE=function(H,ne,Le,tt){H=+H,ne>>>=0,Le>>>=0,tt||Se(this,H,ne,Le,Math.pow(2,8*Le)-1,0);let lt=1,xt=0;for(this[ne]=255&H;++xt<Le&&(lt*=256);)this[ne+xt]=H/lt&255;return ne+Le},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(H,ne,Le,tt){H=+H,ne>>>=0,Le>>>=0,tt||Se(this,H,ne,Le,Math.pow(2,8*Le)-1,0);let lt=Le-1,xt=1;for(this[ne+lt]=255&H;--lt>=0&&(xt*=256);)this[ne+lt]=H/xt&255;return ne+Le},E.prototype.writeUint8=E.prototype.writeUInt8=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,1,255,0),this[ne]=255&H,ne+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,65535,0),this[ne]=255&H,this[ne+1]=H>>>8,ne+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,65535,0),this[ne]=H>>>8,this[ne+1]=255&H,ne+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,4294967295,0),this[ne+3]=H>>>24,this[ne+2]=H>>>16,this[ne+1]=H>>>8,this[ne]=255&H,ne+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,4294967295,0),this[ne]=H>>>24,this[ne+1]=H>>>16,this[ne+2]=H>>>8,this[ne+3]=255&H,ne+4},E.prototype.writeBigUInt64LE=wt(function(H,ne=0){return rt(this,H,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=wt(function(H,ne=0){return mt(this,H,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(H,ne,Le,tt){if(H=+H,ne>>>=0,!tt){const kn=Math.pow(2,8*Le-1);Se(this,H,ne,Le,kn-1,-kn)}let lt=0,xt=1,an=0;for(this[ne]=255&H;++lt<Le&&(xt*=256);)H<0&&0===an&&0!==this[ne+lt-1]&&(an=1),this[ne+lt]=(H/xt|0)-an&255;return ne+Le},E.prototype.writeIntBE=function(H,ne,Le,tt){if(H=+H,ne>>>=0,!tt){const kn=Math.pow(2,8*Le-1);Se(this,H,ne,Le,kn-1,-kn)}let lt=Le-1,xt=1,an=0;for(this[ne+lt]=255&H;--lt>=0&&(xt*=256);)H<0&&0===an&&0!==this[ne+lt+1]&&(an=1),this[ne+lt]=(H/xt|0)-an&255;return ne+Le},E.prototype.writeInt8=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,1,127,-128),H<0&&(H=255+H+1),this[ne]=255&H,ne+1},E.prototype.writeInt16LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,32767,-32768),this[ne]=255&H,this[ne+1]=H>>>8,ne+2},E.prototype.writeInt16BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,2,32767,-32768),this[ne]=H>>>8,this[ne+1]=255&H,ne+2},E.prototype.writeInt32LE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,2147483647,-2147483648),this[ne]=255&H,this[ne+1]=H>>>8,this[ne+2]=H>>>16,this[ne+3]=H>>>24,ne+4},E.prototype.writeInt32BE=function(H,ne,Le){return H=+H,ne>>>=0,Le||Se(this,H,ne,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[ne]=H>>>24,this[ne+1]=H>>>16,this[ne+2]=H>>>8,this[ne+3]=255&H,ne+4},E.prototype.writeBigInt64LE=wt(function(H,ne=0){return rt(this,H,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=wt(function(H,ne=0){return mt(this,H,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeFloatLE=function(H,ne,Le){return fe(this,H,ne,!0,Le)},E.prototype.writeFloatBE=function(H,ne,Le){return fe(this,H,ne,!1,Le)},E.prototype.writeDoubleLE=function(H,ne,Le){return R(this,H,ne,!0,Le)},E.prototype.writeDoubleBE=function(H,ne,Le){return R(this,H,ne,!1,Le)},E.prototype.copy=function(H,ne,Le,tt){if(!E.isBuffer(H))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!tt&&0!==tt&&(tt=this.length),ne>=H.length&&(ne=H.length),ne||(ne=0),tt>0&&tt<Le&&(tt=Le),tt===Le||0===H.length||0===this.length)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(tt<0)throw new RangeError("sourceEnd out of bounds");tt>this.length&&(tt=this.length),H.length-ne<tt-Le&&(tt=H.length-ne+Le);const lt=tt-Le;return this===H&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ne,Le,tt):Uint8Array.prototype.set.call(H,this.subarray(Le,tt),ne),lt},E.prototype.fill=function(H,ne,Le,tt){if("string"==typeof H){if("string"==typeof ne?(tt=ne,ne=0,Le=this.length):"string"==typeof Le&&(tt=Le,Le=this.length),void 0!==tt&&"string"!=typeof tt)throw new TypeError("encoding must be a string");if("string"==typeof tt&&!E.isEncoding(tt))throw new TypeError("Unknown encoding: "+tt);if(1===H.length){const xt=H.charCodeAt(0);("utf8"===tt&&xt<128||"latin1"===tt)&&(H=xt)}}else"number"==typeof H?H&=255:"boolean"==typeof H&&(H=Number(H));if(ne<0||this.length<ne||this.length<Le)throw new RangeError("Out of range index");if(Le<=ne)return this;let lt;if(ne>>>=0,Le=void 0===Le?this.length:Le>>>0,H||(H=0),"number"==typeof H)for(lt=ne;lt<Le;++lt)this[lt]=H;else{const xt=E.isBuffer(H)?H:E.from(H,tt),an=xt.length;if(0===an)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(lt=0;lt<Le-ne;++lt)this[lt+ne]=xt[lt%an]}return this};const A={};function ie(pe,H,ne){A[pe]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,delete this.name}get code(){return pe}set code(tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:tt,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}function J(pe){let H="",ne=pe.length;const Le="-"===pe[0]?1:0;for(;ne>=Le+4;ne-=3)H=`_${pe.slice(ne-3,ne)}${H}`;return`${pe.slice(0,ne)}${H}`}function Xe(pe,H,ne,Le,tt,lt){if(pe>ne||pe<H){const xt="bigint"==typeof H?"n":"";let an;throw an=lt>3?0===H||H===BigInt(0)?`>= 0${xt} and < 2${xt} ** ${8*(lt+1)}${xt}`:`>= -(2${xt} ** ${8*(lt+1)-1}${xt}) and < 2 ** ${8*(lt+1)-1}${xt}`:`>= ${H}${xt} and <= ${ne}${xt}`,new A.ERR_OUT_OF_RANGE("value",an,pe)}!function He(pe,H,ne){ue(H,"offset"),(void 0===pe[H]||void 0===pe[H+ne])&&te(H,pe.length-(ne+1))}(Le,tt,lt)}function ue(pe,H){if("number"!=typeof pe)throw new A.ERR_INVALID_ARG_TYPE(H,"number",pe)}function te(pe,H,ne){throw Math.floor(pe)!==pe?(ue(pe,ne),new A.ERR_OUT_OF_RANGE(ne||"offset","an integer",pe)):H<0?new A.ERR_BUFFER_OUT_OF_BOUNDS:new A.ERR_OUT_OF_RANGE(ne||"offset",`>= ${ne?1:0} and <= ${H}`,pe)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(pe,H){return`The "${pe}" argument must be of type number. Received type ${typeof H}`},TypeError),ie("ERR_OUT_OF_RANGE",function(pe,H,ne){let Le=`The value of "${pe}" is out of range.`,tt=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?tt=J(String(ne)):"bigint"==typeof ne&&(tt=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(tt=J(tt)),tt+="n"),Le+=` It must be ${H}. Received ${tt}`,Le},RangeError);const U=/[^+/0-9A-Za-z-_]/g;function N(pe,H){let ne;H=H||1/0;const Le=pe.length;let tt=null;const lt=[];for(let xt=0;xt<Le;++xt){if(ne=pe.charCodeAt(xt),ne>55295&&ne<57344){if(!tt){if(ne>56319){(H-=3)>-1&&lt.push(239,191,189);continue}if(xt+1===Le){(H-=3)>-1&&lt.push(239,191,189);continue}tt=ne;continue}if(ne<56320){(H-=3)>-1&&lt.push(239,191,189),tt=ne;continue}ne=65536+(tt-55296<<10|ne-56320)}else tt&&(H-=3)>-1&&lt.push(239,191,189);if(tt=null,ne<128){if((H-=1)<0)break;lt.push(ne)}else if(ne<2048){if((H-=2)<0)break;lt.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((H-=3)<0)break;lt.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;lt.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return lt}function Ee(pe){return Z.toByteArray(function I(pe){if((pe=(pe=pe.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;pe.length%4!=0;)pe+="=";return pe}(pe))}function Ue(pe,H,ne,Le){let tt;for(tt=0;tt<Le&&!(tt+ne>=H.length||tt>=pe.length);++tt)H[tt+ne]=pe[tt];return tt}function Ze(pe,H){return pe instanceof H||null!=pe&&null!=pe.constructor&&null!=pe.constructor.name&&pe.constructor.name===H.name}function vt(pe){return pe!=pe}const Nt=function(){const pe="0123456789abcdef",H=new Array(256);for(let ne=0;ne<16;++ne){const Le=16*ne;for(let tt=0;tt<16;++tt)H[Le+tt]=pe[ne]+pe[tt]}return H}();function wt(pe){return typeof BigInt>"u"?kt:pe}function kt(){throw new Error("BigInt not supported")}},2011:function(je,me,S){"use strict";var Z=this&&this.__createBinding||(Object.create?function(q,G,X,_){void 0===_&&(_=X),Object.defineProperty(q,_,{enumerable:!0,get:function(){return G[X]}})}:function(q,G,X,_){void 0===_&&(_=X),q[_]=G[X]}),C=this&&this.__exportStar||function(q,G){for(var X in q)"default"!==X&&!Object.prototype.hasOwnProperty.call(G,X)&&Z(G,q,X)};Object.defineProperty(me,"__esModule",{value:!0}),C(S(9787),me)},9787:(je,me)=>{"use strict";function Z(G){const X=[];let _=0;for(;_<G.length;)switch(G[_]){case"/":if("."===G[_+1])if("."===G[_+2]){if(!q(G[_+3])){X.push([]),_++;break}X.pop(),G[_+3]||X.push([]),_+=3}else{if(!q(G[_+2])){X.push([]),_++;break}G[_+2]||X.push([]),_+=2}else X.push([]),_++;break;case"#":case"?":X.length||X.push([]),X[X.length-1].push(G.substr(_)),_=G.length;break;default:X.length||X.push([]),X[X.length-1].push(G[_]),_++}return"/"+X.map(E=>E.join("")).join("/")}function C(G,X){let _=X+1;X>=0?"/"===G[X+1]&&"/"===G[X+2]&&(_=X+3):"/"===G[0]&&"/"===G[1]&&(_=2);const E=G.indexOf("/",_);return E<0?G:G.substr(0,E)+Z(G.substr(E))}function q(G){return!G||"#"===G||"?"===G||"/"===G}Object.defineProperty(me,"__esModule",{value:!0}),me.removeDotSegmentsOfPath=me.removeDotSegments=me.resolve=void 0,me.resolve=function S(G,X){const _=(X=X||"").indexOf("#");if(_>0&&(X=X.substr(0,_)),!G.length){if(X.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${X}' for value '${G}'`);return X}if(G.startsWith("?")){const x=X.indexOf("?");return x>0&&(X=X.substr(0,x)),X+G}if(G.startsWith("#"))return X+G;if(!X.length){const x=G.indexOf(":");if(x<0)throw new Error(`Found invalid relative IRI '${G}' for a missing baseIRI`);return C(G,x)}const E=G.indexOf(":");if(E>=0)return C(G,E);const F=X.indexOf(":");if(F<0)throw new Error(`Found invalid baseIRI '${X}' for value '${G}'`);const W=X.substr(0,F+1);if(0===G.indexOf("//"))return W+C(G,E);let P;if(X.indexOf("//",F)===F+1){if(P=X.indexOf("/",F+3),P<0)return X.length>F+3?X+"/"+C(G,E):W+C(G,E)}else if(P=X.indexOf("/",F+1),P<0)return W+C(G,E);if(0===G.indexOf("/"))return X.substr(0,P)+Z(G);let D=X.substr(P);const se=D.lastIndexOf("/");return se>=0&&se<D.length-1&&(D=D.substr(0,se+1),"."===G[0]&&"."!==G[1]&&"/"!==G[1]&&G[2]&&(G=G.substr(1))),G=Z(G=D+G),X.substr(0,P)+G},me.removeDotSegments=Z,me.removeDotSegmentsOfPath=C},6620:(je,me,S)=>{!function(Z){Z.parser=function(R,A){return new q(R,A)},Z.SAXParser=q,Z.SAXStream=P,Z.createStream=function W(R,A){return new P(R,A)},Z.MAX_BUFFER_LENGTH=65536;var E,C=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function q(R,A){if(!(this instanceof q))return new q(R,A);var ie=this;(function X(R){for(var A=0,ie=C.length;A<ie;A++)R[C[A]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=Z.MAX_BUFFER_LENGTH,ie.opt=A||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!R,ie.noscript=!(!R&&!ie.opt.noscript),ie.state=j.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?Z.XML_ENTITIES:Z.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(oe)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),ae(ie,"onready")}Z.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(R){function A(){}return A.prototype=R,new A}),Object.keys||(Object.keys=function(R){var A=[];for(var ie in R)R.hasOwnProperty(ie)&&A.push(ie);return A}),q.prototype={end:function(){Je(this)},write:function fe(R){var A=this;if(this.error)throw this.error;if(A.closed)return Qe(A,"Cannot write after close. Assign an onready handler.");if(null===R)return Je(A);"object"==typeof R&&(R=R.toString());for(var ie=0,J="";J=qe(R,ie++),A.c=J,J;)switch(A.trackPosition&&(A.position++,"\n"===J?(A.line++,A.column=0):A.column++),A.state){case j.BEGIN:if(A.state=j.BEGIN_WHITESPACE,"\ufeff"===J)continue;mt(A,J);continue;case j.BEGIN_WHITESPACE:mt(A,J);continue;case j.TEXT:if(A.sawRoot&&!A.closedRoot){for(var He=ie-1;J&&"<"!==J&&"&"!==J;)(J=qe(R,ie++))&&A.trackPosition&&(A.position++,"\n"===J?(A.line++,A.column=0):A.column++);A.textNode+=R.substring(He,ie-1)}"<"!==J||A.sawRoot&&A.closedRoot&&!A.strict?(!B(J)&&(!A.sawRoot||A.closedRoot)&&Ce(A,"Text data outside of root node."),"&"===J?A.state=j.TEXT_ENTITY:A.textNode+=J):(A.state=j.OPEN_WAKA,A.startTagPosition=A.position);continue;case j.SCRIPT:"<"===J?A.state=j.SCRIPT_ENDING:A.script+=J;continue;case j.SCRIPT_ENDING:"/"===J?A.state=j.CLOSE_TAG:(A.script+="<"+J,A.state=j.SCRIPT);continue;case j.OPEN_WAKA:"!"===J?(A.state=j.SGML_DECL,A.sgmlDecl=""):B(J)||(T($,J)?(A.state=j.OPEN_TAG,A.tagName=J):"/"===J?(A.state=j.CLOSE_TAG,A.tagName=""):"?"===J?(A.state=j.PROC_INST,A.procInstName=A.procInstBody=""):(Ce(A,"Unencoded <"),A.startTagPosition+1<A.position&&(J=new Array(A.position-A.startTagPosition).join(" ")+J),A.textNode+="<"+J,A.state=j.TEXT));continue;case j.SGML_DECL:(A.sgmlDecl+J).toUpperCase()===D?(xe(A,"onopencdata"),A.state=j.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+J==="--"?(A.state=j.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+J).toUpperCase()===se?(A.state=j.DOCTYPE,(A.doctype||A.sawRoot)&&Ce(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):">"===J?(xe(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=j.TEXT):(b(J)&&(A.state=j.SGML_DECL_QUOTED),A.sgmlDecl+=J);continue;case j.SGML_DECL_QUOTED:J===A.q&&(A.state=j.SGML_DECL,A.q=""),A.sgmlDecl+=J;continue;case j.DOCTYPE:">"===J?(A.state=j.TEXT,xe(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=J,"["===J?A.state=j.DOCTYPE_DTD:b(J)&&(A.state=j.DOCTYPE_QUOTED,A.q=J));continue;case j.DOCTYPE_QUOTED:A.doctype+=J,J===A.q&&(A.q="",A.state=j.DOCTYPE);continue;case j.DOCTYPE_DTD:A.doctype+=J,"]"===J?A.state=j.DOCTYPE:b(J)&&(A.state=j.DOCTYPE_DTD_QUOTED,A.q=J);continue;case j.DOCTYPE_DTD_QUOTED:A.doctype+=J,J===A.q&&(A.state=j.DOCTYPE_DTD,A.q="");continue;case j.COMMENT:"-"===J?A.state=j.COMMENT_ENDING:A.comment+=J;continue;case j.COMMENT_ENDING:"-"===J?(A.state=j.COMMENT_ENDED,A.comment=Ve(A.opt,A.comment),A.comment&&xe(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+J,A.state=j.COMMENT);continue;case j.COMMENT_ENDED:">"!==J?(Ce(A,"Malformed comment"),A.comment+="--"+J,A.state=j.COMMENT):A.state=j.TEXT;continue;case j.CDATA:"]"===J?A.state=j.CDATA_ENDING:A.cdata+=J;continue;case j.CDATA_ENDING:"]"===J?A.state=j.CDATA_ENDING_2:(A.cdata+="]"+J,A.state=j.CDATA);continue;case j.CDATA_ENDING_2:">"===J?(A.cdata&&xe(A,"oncdata",A.cdata),xe(A,"onclosecdata"),A.cdata="",A.state=j.TEXT):"]"===J?A.cdata+="]":(A.cdata+="]]"+J,A.state=j.CDATA);continue;case j.PROC_INST:"?"===J?A.state=j.PROC_INST_ENDING:B(J)?A.state=j.PROC_INST_BODY:A.procInstName+=J;continue;case j.PROC_INST_BODY:if(!A.procInstBody&&B(J))continue;"?"===J?A.state=j.PROC_INST_ENDING:A.procInstBody+=J;continue;case j.PROC_INST_ENDING:">"===J?(xe(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=j.TEXT):(A.procInstBody+="?"+J,A.state=j.PROC_INST_BODY);continue;case j.OPEN_TAG:T(z,J)?A.tagName+=J:(Be(A),">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:(B(J)||Ce(A,"Invalid character in tag name"),A.state=j.ATTRIB));continue;case j.OPEN_TAG_SLASH:">"===J?(de(A,!0),Se(A)):(Ce(A,"Forward-slash in opening tag not followed by >"),A.state=j.ATTRIB);continue;case j.ATTRIB:if(B(J))continue;">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:T($,J)?(A.attribName=J,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME:"="===J?A.state=j.ATTRIB_VALUE:">"===J?(Ce(A,"Attribute without value"),A.attribValue=A.attribName,ke(A),de(A)):B(J)?A.state=j.ATTRIB_NAME_SAW_WHITE:T(z,J)?A.attribName+=J:Ce(A,"Invalid attribute name");continue;case j.ATTRIB_NAME_SAW_WHITE:if("="===J)A.state=j.ATTRIB_VALUE;else{if(B(J))continue;Ce(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",xe(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",">"===J?de(A):T($,J)?(A.attribName=J,A.state=j.ATTRIB_NAME):(Ce(A,"Invalid attribute name"),A.state=j.ATTRIB)}continue;case j.ATTRIB_VALUE:if(B(J))continue;b(J)?(A.q=J,A.state=j.ATTRIB_VALUE_QUOTED):(Ce(A,"Unquoted attribute value"),A.state=j.ATTRIB_VALUE_UNQUOTED,A.attribValue=J);continue;case j.ATTRIB_VALUE_QUOTED:if(J!==A.q){"&"===J?A.state=j.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=J;continue}ke(A),A.q="",A.state=j.ATTRIB_VALUE_CLOSED;continue;case j.ATTRIB_VALUE_CLOSED:B(J)?A.state=j.ATTRIB:">"===J?de(A):"/"===J?A.state=j.OPEN_TAG_SLASH:T($,J)?(Ce(A,"No whitespace between attributes"),A.attribName=J,A.attribValue="",A.state=j.ATTRIB_NAME):Ce(A,"Invalid attribute name");continue;case j.ATTRIB_VALUE_UNQUOTED:if(!M(J)){"&"===J?A.state=j.ATTRIB_VALUE_ENTITY_U:A.attribValue+=J;continue}ke(A),">"===J?de(A):A.state=j.ATTRIB;continue;case j.CLOSE_TAG:if(A.tagName)">"===J?Se(A):T(z,J)?A.tagName+=J:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=j.SCRIPT):(B(J)||Ce(A,"Invalid tagname in closing tag"),A.state=j.CLOSE_TAG_SAW_WHITE);else{if(B(J))continue;le($,J)?A.script?(A.script+="</"+J,A.state=j.SCRIPT):Ce(A,"Invalid tagname in closing tag."):A.tagName=J}continue;case j.CLOSE_TAG_SAW_WHITE:if(B(J))continue;">"===J?Se(A):Ce(A,"Invalid characters in closing tag");continue;case j.TEXT_ENTITY:case j.ATTRIB_VALUE_ENTITY_Q:case j.ATTRIB_VALUE_ENTITY_U:var ue,te;switch(A.state){case j.TEXT_ENTITY:ue=j.TEXT,te="textNode";break;case j.ATTRIB_VALUE_ENTITY_Q:ue=j.ATTRIB_VALUE_QUOTED,te="attribValue";break;case j.ATTRIB_VALUE_ENTITY_U:ue=j.ATTRIB_VALUE_UNQUOTED,te="attribValue"}if(";"===J)if(A.opt.unparsedEntities){var U=rt(A);A.entity="",A.state=ue,A.write(U)}else A[te]+=rt(A),A.entity="",A.state=ue;else T(A.entity.length?Y:ee,J)?A.entity+=J:(Ce(A,"Invalid character in entity name"),A[te]+="&"+A.entity+J,A.entity="",A.state=ue);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&function G(R){for(var A=Math.max(Z.MAX_BUFFER_LENGTH,10),ie=0,J=0,He=C.length;J<He;J++){var Xe=R[C[J]].length;if(Xe>A)switch(C[J]){case"textNode":Oe(R);break;case"cdata":xe(R,"oncdata",R.cdata),R.cdata="";break;case"script":xe(R,"onscript",R.script),R.script="";break;default:Qe(R,"Max buffer length exceeded: "+C[J])}ie=Math.max(ie,Xe)}R.bufferCheckPosition=Z.MAX_BUFFER_LENGTH-ie+R.position}(A),A},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(R){Oe(R),""!==R.cdata&&(xe(R,"oncdata",R.cdata),R.cdata=""),""!==R.script&&(xe(R,"onscript",R.script),R.script="")}(this)}};try{E=S(7045).Stream}catch{E=function(){}}E||(E=function(){});var F=Z.EVENTS.filter(function(R){return"error"!==R&&"end"!==R});function P(R,A){if(!(this instanceof P))return new P(R,A);E.apply(this),this._parser=new q(R,A),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(J){ie.emit("error",J),ie._parser.error=null},this._decoder=null,F.forEach(function(J){Object.defineProperty(ie,"on"+J,{get:function(){return ie._parser["on"+J]},set:function(He){if(!He)return ie.removeAllListeners(J),ie._parser["on"+J]=He,He;ie.on(J,He)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(E.prototype,{constructor:{value:P}})).write=function(R){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(R)){if(!this._decoder){var A=S(8454).StringDecoder;this._decoder=new A("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},P.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},P.prototype.on=function(R,A){var ie=this;return!ie._parser["on"+R]&&-1!==F.indexOf(R)&&(ie._parser["on"+R]=function(){var J=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);J.splice(0,0,R),ie.emit.apply(ie,J)}),E.prototype.on.call(ie,R,A)};var D="[CDATA[",se="DOCTYPE",x="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",oe={xml:x,xmlns:k},$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function B(R){return" "===R||"\n"===R||"\r"===R||"\t"===R}function b(R){return'"'===R||"'"===R}function M(R){return">"===R||B(R)}function T(R,A){return R.test(A)}function le(R,A){return!T(R,A)}var R,A,ie,j=0;for(var Me in Z.STATE={BEGIN:j++,BEGIN_WHITESPACE:j++,TEXT:j++,TEXT_ENTITY:j++,OPEN_WAKA:j++,SGML_DECL:j++,SGML_DECL_QUOTED:j++,DOCTYPE:j++,DOCTYPE_QUOTED:j++,DOCTYPE_DTD:j++,DOCTYPE_DTD_QUOTED:j++,COMMENT_STARTING:j++,COMMENT:j++,COMMENT_ENDING:j++,COMMENT_ENDED:j++,CDATA:j++,CDATA_ENDING:j++,CDATA_ENDING_2:j++,PROC_INST:j++,PROC_INST_BODY:j++,PROC_INST_ENDING:j++,OPEN_TAG:j++,OPEN_TAG_SLASH:j++,ATTRIB:j++,ATTRIB_NAME:j++,ATTRIB_NAME_SAW_WHITE:j++,ATTRIB_VALUE:j++,ATTRIB_VALUE_QUOTED:j++,ATTRIB_VALUE_CLOSED:j++,ATTRIB_VALUE_UNQUOTED:j++,ATTRIB_VALUE_ENTITY_Q:j++,ATTRIB_VALUE_ENTITY_U:j++,CLOSE_TAG:j++,CLOSE_TAG_SAW_WHITE:j++,SCRIPT:j++,SCRIPT_ENDING:j++},Z.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Z.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Z.ENTITIES).forEach(function(R){var A=Z.ENTITIES[R],ie="number"==typeof A?String.fromCharCode(A):A;Z.ENTITIES[R]=ie}),Z.STATE)Z.STATE[Z.STATE[Me]]=Me;function ae(R,A,ie){R[A]&&R[A](ie)}function xe(R,A,ie){R.textNode&&Oe(R),ae(R,A,ie)}function Oe(R){R.textNode=Ve(R.opt,R.textNode),R.textNode&&ae(R,"ontext",R.textNode),R.textNode=""}function Ve(R,A){return R.trim&&(A=A.trim()),R.normalize&&(A=A.replace(/\s+/g," ")),A}function Qe(R,A){return Oe(R),R.trackPosition&&(A+="\nLine: "+R.line+"\nColumn: "+R.column+"\nChar: "+R.c),A=new Error(A),R.error=A,ae(R,"onerror",A),R}function Je(R){return R.sawRoot&&!R.closedRoot&&Ce(R,"Unclosed root tag"),R.state!==j.BEGIN&&R.state!==j.BEGIN_WHITESPACE&&R.state!==j.TEXT&&Qe(R,"Unexpected end"),Oe(R),R.c="",R.closed=!0,ae(R,"onend"),q.call(R,R.strict,R.opt),R}function Ce(R,A){if("object"!=typeof R||!(R instanceof q))throw new Error("bad call to strictFail");R.strict&&Qe(R,A)}function Be(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var A=R.tags[R.tags.length-1]||R,ie=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(ie.ns=A.ns),R.attribList.length=0,xe(R,"onopentagstart",ie)}function Ae(R,A){var J=R.indexOf(":")<0?["",R]:R.split(":"),He=J[0],Xe=J[1];return A&&"xmlns"===R&&(He="xmlns",Xe=""),{prefix:He,local:Xe}}function ke(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),-1!==R.attribList.indexOf(R.attribName)||R.tag.attributes.hasOwnProperty(R.attribName))R.attribName=R.attribValue="";else{if(R.opt.xmlns){var A=Ae(R.attribName,!0),J=A.local;if("xmlns"===A.prefix)if("xml"===J&&R.attribValue!==x)Ce(R,"xml: prefix must be bound to "+x+"\nActual: "+R.attribValue);else if("xmlns"===J&&R.attribValue!==k)Ce(R,"xmlns: prefix must be bound to "+k+"\nActual: "+R.attribValue);else{var He=R.tag,Xe=R.tags[R.tags.length-1]||R;He.ns===Xe.ns&&(He.ns=Object.create(Xe.ns)),He.ns[J]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,xe(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}}function de(R,A){if(R.opt.xmlns){var ie=R.tag,J=Ae(R.tagName);ie.prefix=J.prefix,ie.local=J.local,ie.uri=ie.ns[J.prefix]||"",ie.prefix&&!ie.uri&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),ie.uri=J.prefix),ie.ns&&(R.tags[R.tags.length-1]||R).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(Ze){xe(R,"onopennamespace",{prefix:Ze,uri:ie.ns[Ze]})});for(var Xe=0,ue=R.attribList.length;Xe<ue;Xe++){var te=R.attribList[Xe],U=te[0],I=te[1],N=Ae(U,!0),he=N.prefix,Ee=""===he?"":ie.ns[he]||"",Ue={name:U,value:I,prefix:he,local:N.local,uri:Ee};he&&"xmlns"!==he&&!Ee&&(Ce(R,"Unbound namespace prefix: "+JSON.stringify(he)),Ue.uri=he),R.tag.attributes[U]=Ue,xe(R,"onattribute",Ue)}R.attribList.length=0}R.tag.isSelfClosing=!!A,R.sawRoot=!0,R.tags.push(R.tag),xe(R,"onopentag",R.tag),A||(R.state=R.noscript||"script"!==R.tagName.toLowerCase()?j.TEXT:j.SCRIPT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function Se(R){if(!R.tagName)return Ce(R,"Weird empty close tag."),R.textNode+="</>",void(R.state=j.TEXT);if(R.script){if("script"!==R.tagName)return R.script+="</"+R.tagName+">",R.tagName="",void(R.state=j.SCRIPT);xe(R,"onscript",R.script),R.script=""}var A=R.tags.length,ie=R.tagName;R.strict||(ie=ie[R.looseCase]());for(var J=ie;A--&&R.tags[A].name!==J;)Ce(R,"Unexpected close tag");if(A<0)return Ce(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",void(R.state=j.TEXT);R.tagName=ie;for(var Xe=R.tags.length;Xe-- >A;){var ue=R.tag=R.tags.pop();R.tagName=R.tag.name,xe(R,"onclosetag",R.tagName);var te={};for(var U in ue.ns)te[U]=ue.ns[U];R.opt.xmlns&&ue.ns!==(R.tags[R.tags.length-1]||R).ns&&Object.keys(ue.ns).forEach(function(N){xe(R,"onclosenamespace",{prefix:N,uri:ue.ns[N]})})}0===A&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=j.TEXT}function rt(R){var J,A=R.entity,ie=A.toLowerCase(),He="";return R.ENTITIES[A]?R.ENTITIES[A]:R.ENTITIES[ie]?R.ENTITIES[ie]:("#"===(A=ie).charAt(0)&&("x"===A.charAt(1)?(A=A.slice(2),He=(J=parseInt(A,16)).toString(16)):(A=A.slice(1),He=(J=parseInt(A,10)).toString(10))),A=A.replace(/^0+/,""),isNaN(J)||He.toLowerCase()!==A?(Ce(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(J))}function mt(R,A){"<"===A?(R.state=j.OPEN_WAKA,R.startTagPosition=R.position):B(A)||(Ce(R,"Non-whitespace before first tag."),R.textNode=A,R.state=j.TEXT)}function qe(R,A){var ie="";return A<R.length&&(ie=R.charAt(A)),ie}j=Z.STATE,String.fromCodePoint||(R=String.fromCharCode,A=Math.floor,ie=function(){var He=[],te=-1,U=arguments.length;if(!U)return"";for(var I="";++te<U;){var N=Number(arguments[te]);if(!isFinite(N)||N<0||N>1114111||A(N)!==N)throw RangeError("Invalid code point: "+N);N<=65535?He.push(N):He.push(55296+((N-=65536)>>10),N%1024+56320),(te+1===U||He.length>16384)&&(I+=R.apply(null,He),He.length=0)}return I},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(me)},7140:function(){!function(je,me){"use strict";if(!je.setImmediate){var G,S=1,Z={},C=!1,q=je.document,oe=Object.getPrototypeOf&&Object.getPrototypeOf(je);oe=oe&&oe.setTimeout?oe:je,"[object process]"==={}.toString.call(je.process)?function W(){G=function($){process.nextTick(function(){F($)})}}():function P(){if(je.postMessage&&!je.importScripts){var $=!0,z=je.onmessage;return je.onmessage=function(){$=!1},je.postMessage("","*"),je.onmessage=z,$}}()?function D(){var $="setImmediate$"+Math.random()+"$",z=function(ee){ee.source===je&&"string"==typeof ee.data&&0===ee.data.indexOf($)&&F(+ee.data.slice($.length))};je.addEventListener?je.addEventListener("message",z,!1):je.attachEvent("onmessage",z),G=function(ee){je.postMessage($+ee,"*")}}():je.MessageChannel?function se(){var $=new MessageChannel;$.port1.onmessage=function(z){F(z.data)},G=function(z){$.port2.postMessage(z)}}():q&&"onreadystatechange"in q.createElement("script")?function x(){var $=q.documentElement;G=function(z){var ee=q.createElement("script");ee.onreadystatechange=function(){F(z),ee.onreadystatechange=null,$.removeChild(ee),ee=null},$.appendChild(ee)}}():function k(){G=function($){setTimeout(F,0,$)}}(),oe.setImmediate=function X($){"function"!=typeof $&&($=new Function(""+$));for(var z=new Array(arguments.length-1),ee=0;ee<z.length;ee++)z[ee]=arguments[ee+1];return Z[S]={callback:$,args:z},G(S),S++},oe.clearImmediate=_}function _($){delete Z[$]}function F($){if(C)setTimeout(F,0,$);else{var z=Z[$];if(z){C=!0;try{!function E($){var z=$.callback,ee=$.args;switch(ee.length){case 0:z();break;case 1:z(ee[0]);break;case 2:z(ee[0],ee[1]);break;case 3:z(ee[0],ee[1],ee[2]);break;default:z.apply(undefined,ee)}}(z)}finally{_($),C=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},7045:(je,me,S)=>{je.exports=q;var Z=S(4356).EventEmitter;function q(){Z.call(this)}S(1993)(q,Z),q.Readable=S(1092),q.Writable=S(5492),q.Duplex=S(1030),q.Transform=S(3410),q.PassThrough=S(3824),q.finished=S(7854),q.pipeline=S(6846),q.Stream=q,q.prototype.pipe=function(G,X){var _=this;function E(k){G.writable&&!1===G.write(k)&&_.pause&&_.pause()}function F(){_.readable&&_.resume&&_.resume()}_.on("data",E),G.on("drain",F),!G._isStdio&&(!X||!1!==X.end)&&(_.on("end",P),_.on("close",D));var W=!1;function P(){W||(W=!0,G.end())}function D(){W||(W=!0,"function"==typeof G.destroy&&G.destroy())}function se(k){if(x(),0===Z.listenerCount(this,"error"))throw k}function x(){_.removeListener("data",E),G.removeListener("drain",F),_.removeListener("end",P),_.removeListener("close",D),_.removeListener("error",se),G.removeListener("error",se),_.removeListener("end",x),_.removeListener("close",x),G.removeListener("close",x)}return _.on("error",se),G.on("error",se),_.on("end",x),_.on("close",x),G.on("close",x),G.emit("pipe",_),G}},464:je=>{"use strict";var S={};function Z(_,E,F){F||(F=Error);var P=function(D){function se(x,k,oe){return D.call(this,function W(D,se,x){return"string"==typeof E?E:E(D,se,x)}(x,k,oe))||this}return function me(_,E){_.prototype=Object.create(E.prototype),_.prototype.constructor=_,_.__proto__=E}(se,D),se}(F);P.prototype.name=F.name,P.prototype.code=_,S[_]=P}function C(_,E){if(Array.isArray(_)){var F=_.length;return _=_.map(function(W){return String(W)}),F>2?"one of ".concat(E," ").concat(_.slice(0,F-1).join(", "),", or ")+_[F-1]:2===F?"one of ".concat(E," ").concat(_[0]," or ").concat(_[1]):"of ".concat(E," ").concat(_[0])}return"of ".concat(E," ").concat(String(_))}Z("ERR_INVALID_OPT_VALUE",function(_,E){return'The value "'+E+'" is invalid for option "'+_+'"'},TypeError),Z("ERR_INVALID_ARG_TYPE",function(_,E,F){var W,P;if("string"==typeof E&&function q(_,E,F){return _.substr(!F||F<0?0:+F,E.length)===E}(E,"not ")?(W="must not be",E=E.replace(/^not /,"")):W="must be",function G(_,E,F){return(void 0===F||F>_.length)&&(F=_.length),_.substring(F-E.length,F)===E}(_," argument"))P="The ".concat(_," ").concat(W," ").concat(C(E,"type"));else{var D=function X(_,E,F){return"number"!=typeof F&&(F=0),!(F+E.length>_.length)&&-1!==_.indexOf(E,F)}(_,".")?"property":"argument";P='The "'.concat(_,'" ').concat(D," ").concat(W," ").concat(C(E,"type"))}return P+". Received type ".concat(typeof F)},TypeError),Z("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Z("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),Z("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Z("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),Z("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Z("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Z("ERR_STREAM_WRITE_AFTER_END","write after end"),Z("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Z("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),Z("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),je.exports.F=S},1030:(je,me,S)=>{"use strict";var Z=Object.keys||function(P){var D=[];for(var se in P)D.push(se);return D};je.exports=E;var C=S(1092),q=S(5492);S(1993)(E,C);for(var G=Z(q.prototype),X=0;X<G.length;X++){var _=G[X];E.prototype[_]||(E.prototype[_]=q.prototype[_])}function E(P){if(!(this instanceof E))return new E(P);C.call(this,P),q.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(W,this)}function W(P){P.end()}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(D){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=D,this._writableState.destroyed=D)}})},3824:(je,me,S)=>{"use strict";je.exports=C;var Z=S(3410);function C(q){if(!(this instanceof C))return new C(q);Z.call(this,q)}S(1993)(C,Z),C.prototype._transform=function(q,G,X){X(null,q)}},1092:(je,me,S)=>{"use strict";var Z;je.exports=ae,ae.ReadableState=Me,S(4356);var P,q=function(te,U){return te.listeners(U).length},G=S(2601),X=S(3838).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},W=S(7199);P=W&&W.debuglog?W.debuglog("stream"):function(){};var B,b,M,D=S(5225),se=S(8152),k=S(2827).getHighWaterMark,oe=S(464).F,$=oe.ERR_INVALID_ARG_TYPE,z=oe.ERR_STREAM_PUSH_AFTER_EOF,ee=oe.ERR_METHOD_NOT_IMPLEMENTED,Y=oe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(1993)(ae,G);var T=se.errorOrDestroy,le=["error","close","destroy","pause","resume"];function Me(ue,te,U){Z=Z||S(1030),"boolean"!=typeof U&&(U=te instanceof Z),this.objectMode=!!(ue=ue||{}).objectMode,U&&(this.objectMode=this.objectMode||!!ue.readableObjectMode),this.highWaterMark=k(this,ue,"readableHighWaterMark",U),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ue.emitClose,this.autoDestroy=!!ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ue.encoding&&(B||(B=S(8454).StringDecoder),this.decoder=new B(ue.encoding),this.encoding=ue.encoding)}function ae(ue){if(Z=Z||S(1030),!(this instanceof ae))return new ae(ue);this._readableState=new Me(ue,this,this instanceof Z),this.readable=!0,ue&&("function"==typeof ue.read&&(this._read=ue.read),"function"==typeof ue.destroy&&(this._destroy=ue.destroy)),G.call(this)}function xe(ue,te,U,I,N){P("readableAddChunk",te);var We,he=ue._readableState;if(null===te)he.reading=!1,function Be(ue,te){if(P("onEofChunk"),!te.ended){if(te.decoder){var U=te.decoder.end();U&&U.length&&(te.buffer.push(U),te.length+=te.objectMode?1:U.length)}te.ended=!0,te.sync?Ae(ue):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,ke(ue)))}}(ue,he);else if(N||(We=function Ve(ue,te){var U;return!function F(ue){return X.isBuffer(ue)||ue instanceof _}(te)&&"string"!=typeof te&&void 0!==te&&!ue.objectMode&&(U=new $("chunk",["string","Buffer","Uint8Array"],te)),U}(he,te)),We)T(ue,We);else if(he.objectMode||te&&te.length>0)if("string"!=typeof te&&!he.objectMode&&Object.getPrototypeOf(te)!==X.prototype&&(te=function E(ue){return X.from(ue)}(te)),I)he.endEmitted?T(ue,new Y):Oe(ue,he,te,!0);else if(he.ended)T(ue,new z);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!U?(te=he.decoder.write(te),he.objectMode||0!==te.length?Oe(ue,he,te,!1):de(ue,he)):Oe(ue,he,te,!1)}else I||(he.reading=!1,de(ue,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function Oe(ue,te,U,I){te.flowing&&0===te.length&&!te.sync?(te.awaitDrain=0,ue.emit("data",U)):(te.length+=te.objectMode?1:U.length,I?te.buffer.unshift(U):te.buffer.push(U),te.needReadable&&Ae(ue)),de(ue,te)}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),ae.prototype.destroy=se.destroy,ae.prototype._undestroy=se.undestroy,ae.prototype._destroy=function(ue,te){te(ue)},ae.prototype.push=function(ue,te){var I,U=this._readableState;return U.objectMode?I=!0:"string"==typeof ue&&((te=te||U.defaultEncoding)!==U.encoding&&(ue=X.from(ue,te),te=""),I=!0),xe(this,ue,te,!1,I)},ae.prototype.unshift=function(ue){return xe(this,ue,null,!0,!1)},ae.prototype.isPaused=function(){return!1===this._readableState.flowing},ae.prototype.setEncoding=function(ue){B||(B=S(8454).StringDecoder);var te=new B(ue);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,I="";null!==U;)I+=te.write(U.data),U=U.next;return this._readableState.buffer.clear(),""!==I&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var Qe=1073741824;function Ce(ue,te){return ue<=0||0===te.length&&te.ended?0:te.objectMode?1:ue!=ue?te.flowing&&te.length?te.buffer.head.data.length:te.length:(ue>te.highWaterMark&&(te.highWaterMark=function Je(ue){return ue>=Qe?ue=Qe:(ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++),ue}(ue)),ue<=te.length?ue:te.ended?te.length:(te.needReadable=!0,0))}function Ae(ue){var te=ue._readableState;P("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(P("emitReadable",te.flowing),te.emittedReadable=!0,process.nextTick(ke,ue))}function ke(ue){var te=ue._readableState;P("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(ue.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,A(ue)}function de(ue,te){te.readingMore||(te.readingMore=!0,process.nextTick(Se,ue,te))}function Se(ue,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&0===te.length);){var U=te.length;if(P("maybeReadMore read 0"),ue.read(0),U===te.length)break}te.readingMore=!1}function mt(ue){var te=ue._readableState;te.readableListening=ue.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:ue.listenerCount("data")>0&&ue.resume()}function qe(ue){P("readable nexttick read 0"),ue.read(0)}function R(ue,te){P("resume",te.reading),te.reading||ue.read(0),te.resumeScheduled=!1,ue.emit("resume"),A(ue),te.flowing&&!te.reading&&ue.read(0)}function A(ue){var te=ue._readableState;for(P("flow",te.flowing);te.flowing&&null!==ue.read(););}function ie(ue,te){return 0===te.length?null:(te.objectMode?U=te.buffer.shift():!ue||ue>=te.length?(U=te.decoder?te.buffer.join(""):1===te.buffer.length?te.buffer.first():te.buffer.concat(te.length),te.buffer.clear()):U=te.buffer.consume(ue,te.decoder),U);var U}function J(ue){var te=ue._readableState;P("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process.nextTick(He,te,ue))}function He(ue,te){if(P("endReadableNT",ue.endEmitted,ue.length),!ue.endEmitted&&0===ue.length&&(ue.endEmitted=!0,te.readable=!1,te.emit("end"),ue.autoDestroy)){var U=te._writableState;(!U||U.autoDestroy&&U.finished)&&te.destroy()}}function Xe(ue,te){for(var U=0,I=ue.length;U<I;U++)if(ue[U]===te)return U;return-1}ae.prototype.read=function(ue){P("read",ue),ue=parseInt(ue,10);var te=this._readableState,U=ue;if(0!==ue&&(te.emittedReadable=!1),0===ue&&te.needReadable&&((0!==te.highWaterMark?te.length>=te.highWaterMark:te.length>0)||te.ended))return P("read: emitReadable",te.length,te.ended),0===te.length&&te.ended?J(this):Ae(this),null;if(0===(ue=Ce(ue,te))&&te.ended)return 0===te.length&&J(this),null;var N,I=te.needReadable;return P("need readable",I),(0===te.length||te.length-ue<te.highWaterMark)&&P("length less than watermark",I=!0),te.ended||te.reading?P("reading or ended",I=!1):I&&(P("do read"),te.reading=!0,te.sync=!0,0===te.length&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(ue=Ce(U,te))),null===(N=ue>0?ie(ue,te):null)?(te.needReadable=te.length<=te.highWaterMark,ue=0):(te.length-=ue,te.awaitDrain=0),0===te.length&&(te.ended||(te.needReadable=!0),U!==ue&&te.ended&&J(this)),null!==N&&this.emit("data",N),N},ae.prototype._read=function(ue){T(this,new ee("_read()"))},ae.prototype.pipe=function(ue,te){var U=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=ue;break;case 1:I.pipes=[I.pipes,ue];break;default:I.pipes.push(ue)}I.pipesCount+=1,P("pipe count=%d opts=%j",I.pipesCount,te);var he=te&&!1===te.end||ue===process.stdout||ue===process.stderr?H:Ee;function Ee(){P("onend"),ue.end()}I.endEmitted?process.nextTick(he):U.once("end",he),ue.on("unpipe",function We(ne,Le){P("onunpipe"),ne===U&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,function vt(){P("cleanup"),ue.removeListener("close",kt),ue.removeListener("finish",pe),ue.removeListener("drain",Ue),ue.removeListener("error",wt),ue.removeListener("unpipe",We),U.removeListener("end",Ee),U.removeListener("end",H),U.removeListener("data",Nt),Ze=!0,I.awaitDrain&&(!ue._writableState||ue._writableState.needDrain)&&Ue()}())});var Ue=function rt(ue){return function(){var U=ue._readableState;P("pipeOnDrain",U.awaitDrain),U.awaitDrain&&U.awaitDrain--,0===U.awaitDrain&&q(ue,"data")&&(U.flowing=!0,A(ue))}}(U);ue.on("drain",Ue);var Ze=!1;function Nt(ne){P("ondata");var Le=ue.write(ne);P("dest.write",Le),!1===Le&&((1===I.pipesCount&&I.pipes===ue||I.pipesCount>1&&-1!==Xe(I.pipes,ue))&&!Ze&&(P("false write response, pause",I.awaitDrain),I.awaitDrain++),U.pause())}function wt(ne){P("onerror",ne),H(),ue.removeListener("error",wt),0===q(ue,"error")&&T(ue,ne)}function kt(){ue.removeListener("finish",pe),H()}function pe(){P("onfinish"),ue.removeListener("close",kt),H()}function H(){P("unpipe"),U.unpipe(ue)}return U.on("data",Nt),function j(ue,te,U){if("function"==typeof ue.prependListener)return ue.prependListener(te,U);ue._events&&ue._events[te]?Array.isArray(ue._events[te])?ue._events[te].unshift(U):ue._events[te]=[U,ue._events[te]]:ue.on(te,U)}(ue,"error",wt),ue.once("close",kt),ue.once("finish",pe),ue.emit("pipe",U),I.flowing||(P("pipe resume"),U.resume()),ue},ae.prototype.unpipe=function(ue){var te=this._readableState,U={hasUnpiped:!1};if(0===te.pipesCount)return this;if(1===te.pipesCount)return ue&&ue!==te.pipes||(ue||(ue=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,ue&&ue.emit("unpipe",this,U)),this;if(!ue){var I=te.pipes,N=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var he=0;he<N;he++)I[he].emit("unpipe",this,{hasUnpiped:!1});return this}var We=Xe(te.pipes,ue);return-1===We||(te.pipes.splice(We,1),te.pipesCount-=1,1===te.pipesCount&&(te.pipes=te.pipes[0]),ue.emit("unpipe",this,U)),this},ae.prototype.addListener=ae.prototype.on=function(ue,te){var U=G.prototype.on.call(this,ue,te),I=this._readableState;return"data"===ue?(I.readableListening=this.listenerCount("readable")>0,!1!==I.flowing&&this.resume()):"readable"===ue&&!I.endEmitted&&!I.readableListening&&(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,P("on readable",I.length,I.reading),I.length?Ae(this):I.reading||process.nextTick(qe,this)),U},ae.prototype.removeListener=function(ue,te){var U=G.prototype.removeListener.call(this,ue,te);return"readable"===ue&&process.nextTick(mt,this),U},ae.prototype.removeAllListeners=function(ue){var te=G.prototype.removeAllListeners.apply(this,arguments);return("readable"===ue||void 0===ue)&&process.nextTick(mt,this),te},ae.prototype.resume=function(){var ue=this._readableState;return ue.flowing||(P("resume"),ue.flowing=!ue.readableListening,function fe(ue,te){te.resumeScheduled||(te.resumeScheduled=!0,process.nextTick(R,ue,te))}(this,ue)),ue.paused=!1,this},ae.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ae.prototype.wrap=function(ue){var te=this,U=this._readableState,I=!1;for(var N in ue.on("end",function(){if(P("wrapped end"),U.decoder&&!U.ended){var We=U.decoder.end();We&&We.length&&te.push(We)}te.push(null)}),ue.on("data",function(We){P("wrapped data"),U.decoder&&(We=U.decoder.write(We)),U.objectMode&&null==We||!(U.objectMode||We&&We.length)||te.push(We)||(I=!0,ue.pause())}),ue)void 0===this[N]&&"function"==typeof ue[N]&&(this[N]=function(Ee){return function(){return ue[Ee].apply(ue,arguments)}}(N));for(var he=0;he<le.length;he++)ue.on(le[he],this.emit.bind(this,le[he]));return this._read=function(We){P("wrapped _read",We),I&&(I=!1,ue.resume())},this},"function"==typeof Symbol&&(ae.prototype[Symbol.asyncIterator]=function(){return void 0===b&&(b=S(2683)),b(this)}),Object.defineProperty(ae.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ae.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ae.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),ae._fromList=ie,Object.defineProperty(ae.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ae.from=function(ue,te){return void 0===M&&(M=S(7765)),M(ae,ue,te)})},3410:(je,me,S)=>{"use strict";je.exports=F;var Z=S(464).F,C=Z.ERR_METHOD_NOT_IMPLEMENTED,q=Z.ERR_MULTIPLE_CALLBACK,G=Z.ERR_TRANSFORM_ALREADY_TRANSFORMING,X=Z.ERR_TRANSFORM_WITH_LENGTH_0,_=S(1030);function E(D,se){var x=this._transformState;x.transforming=!1;var k=x.writecb;if(null===k)return this.emit("error",new q);x.writechunk=null,x.writecb=null,null!=se&&this.push(se),k(D);var oe=this._readableState;oe.reading=!1,(oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}function F(D){if(!(this instanceof F))return new F(D);_.call(this,D),this._transformState={afterTransform:E.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,D&&("function"==typeof D.transform&&(this._transform=D.transform),"function"==typeof D.flush&&(this._flush=D.flush)),this.on("prefinish",W)}function W(){var D=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(se,x){P(D,se,x)})}function P(D,se,x){if(se)return D.emit("error",se);if(null!=x&&D.push(x),D._writableState.length)throw new X;if(D._transformState.transforming)throw new G;return D.push(null)}S(1993)(F,_),F.prototype.push=function(D,se){return this._transformState.needTransform=!1,_.prototype.push.call(this,D,se)},F.prototype._transform=function(D,se,x){x(new C("_transform()"))},F.prototype._write=function(D,se,x){var k=this._transformState;if(k.writecb=x,k.writechunk=D,k.writeencoding=se,!k.transforming){var oe=this._readableState;(k.needTransform||oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}},F.prototype._read=function(D){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},F.prototype._destroy=function(D,se){_.prototype._destroy.call(this,D,function(x){se(x)})}},5492:(je,me,S)=>{"use strict";function C(A){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function R(A,ie,J){var He=A.entry;for(A.entry=null;He;){var Xe=He.callback;ie.pendingcb--,Xe(J),He=He.next}ie.corkedRequestsFree.next=A}(ie,A)}}var q;je.exports=Me,Me.WritableState=le;var j,G={deprecate:S(3398)},X=S(2601),_=S(3838).Buffer,E=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=S(8152),se=S(2827).getHighWaterMark,x=S(464).F,k=x.ERR_INVALID_ARG_TYPE,oe=x.ERR_METHOD_NOT_IMPLEMENTED,$=x.ERR_MULTIPLE_CALLBACK,z=x.ERR_STREAM_CANNOT_PIPE,ee=x.ERR_STREAM_DESTROYED,Y=x.ERR_STREAM_NULL_VALUES,B=x.ERR_STREAM_WRITE_AFTER_END,b=x.ERR_UNKNOWN_ENCODING,M=P.errorOrDestroy;function T(){}function le(A,ie,J){q=q||S(1030),"boolean"!=typeof J&&(J=ie instanceof q),this.objectMode=!!(A=A||{}).objectMode,J&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=se(this,A,"writableHighWaterMark",J),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===A.decodeStrings),this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Xe){!function Be(A,ie){var J=A._writableState,He=J.sync,Xe=J.writecb;if("function"!=typeof Xe)throw new $;if(function Ce(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}(J),ie)!function Je(A,ie,J,He,Xe){--ie.pendingcb,J?(process.nextTick(Xe,He),process.nextTick(qe,A,ie),A._writableState.errorEmitted=!0,M(A,He)):(Xe(He),A._writableState.errorEmitted=!0,M(A,He),qe(A,ie))}(A,J,He,ie,Xe);else{var ue=Se(J)||A.destroyed;!ue&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&de(A,J),He?process.nextTick(Ae,A,J,ue,Xe):Ae(A,J,ue,Xe)}}(ie,Xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new C(this)}function Me(A){var ie=this instanceof(q=q||S(1030));if(!ie&&!j.call(Me,this))return new Me(A);this._writableState=new le(A,this,ie),this.writable=!0,A&&("function"==typeof A.write&&(this._write=A.write),"function"==typeof A.writev&&(this._writev=A.writev),"function"==typeof A.destroy&&(this._destroy=A.destroy),"function"==typeof A.final&&(this._final=A.final)),X.call(this)}function Qe(A,ie,J,He,Xe,ue,te){ie.writelen=He,ie.writecb=te,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ee("write")):J?A._writev(Xe,ie.onwrite):A._write(Xe,ue,ie.onwrite),ie.sync=!1}function Ae(A,ie,J,He){J||function ke(A,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,A.emit("drain"))}(A,ie),ie.pendingcb--,He(),qe(A,ie)}function de(A,ie){ie.bufferProcessing=!0;var J=ie.bufferedRequest;if(A._writev&&J&&J.next){var Xe=new Array(ie.bufferedRequestCount),ue=ie.corkedRequestsFree;ue.entry=J;for(var te=0,U=!0;J;)Xe[te]=J,J.isBuf||(U=!1),J=J.next,te+=1;Xe.allBuffers=U,Qe(A,ie,!0,ie.length,Xe,"",ue.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ue.next?(ie.corkedRequestsFree=ue.next,ue.next=null):ie.corkedRequestsFree=new C(ie),ie.bufferedRequestCount=0}else{for(;J;){var I=J.chunk;if(Qe(A,ie,!1,ie.objectMode?1:I.length,I,J.encoding,J.callback),J=J.next,ie.bufferedRequestCount--,ie.writing)break}null===J&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=J,ie.bufferProcessing=!1}function Se(A){return A.ending&&0===A.length&&null===A.bufferedRequest&&!A.finished&&!A.writing}function rt(A,ie){A._final(function(J){ie.pendingcb--,J&&M(A,J),ie.prefinished=!0,A.emit("prefinish"),qe(A,ie)})}function qe(A,ie){var J=Se(ie);if(J&&(function mt(A,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof A._final||ie.destroyed?(ie.prefinished=!0,A.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(rt,A,ie)))}(A,ie),0===ie.pendingcb&&(ie.finished=!0,A.emit("finish"),ie.autoDestroy))){var He=A._readableState;(!He||He.autoDestroy&&He.endEmitted)&&A.destroy()}return J}S(1993)(Me,X),le.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,J=[];ie;)J.push(ie),ie=ie.next;return J},function(){try{Object.defineProperty(le.prototype,"buffer",{get:G.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(Me,Symbol.hasInstance,{value:function(ie){return!!j.call(this,ie)||this===Me&&ie&&ie._writableState instanceof le}})):j=function(ie){return ie instanceof this},Me.prototype.pipe=function(){M(this,new z)},Me.prototype.write=function(A,ie,J){var He=this._writableState,Xe=!1,ue=!He.objectMode&&function W(A){return _.isBuffer(A)||A instanceof E}(A);return ue&&!_.isBuffer(A)&&(A=function F(A){return _.from(A)}(A)),"function"==typeof ie&&(J=ie,ie=null),ue?ie="buffer":ie||(ie=He.defaultEncoding),"function"!=typeof J&&(J=T),He.ending?function ae(A,ie){var J=new B;M(A,J),process.nextTick(ie,J)}(this,J):(ue||function xe(A,ie,J,He){var Xe;return null===J?Xe=new Y:"string"!=typeof J&&!ie.objectMode&&(Xe=new k("chunk",["string","Buffer"],J)),!Xe||(M(A,Xe),process.nextTick(He,Xe),!1)}(this,He,A,J))&&(He.pendingcb++,Xe=function Ve(A,ie,J,He,Xe,ue){if(!J){var te=function Oe(A,ie,J){return!A.objectMode&&!1!==A.decodeStrings&&"string"==typeof ie&&(ie=_.from(ie,J)),ie}(ie,He,Xe);He!==te&&(J=!0,Xe="buffer",He=te)}var U=ie.objectMode?1:He.length;ie.length+=U;var I=ie.length<ie.highWaterMark;if(I||(ie.needDrain=!0),ie.writing||ie.corked){var N=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:He,encoding:Xe,isBuf:J,callback:ue,next:null},N?N.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else Qe(A,ie,!1,U,He,Xe,ue);return I}(this,He,ue,A,ie,J)),Xe},Me.prototype.cork=function(){this._writableState.corked++},Me.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&de(this,A))},Me.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new b(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Me.prototype._write=function(A,ie,J){J(new oe("_write()"))},Me.prototype._writev=null,Me.prototype.end=function(A,ie,J){var He=this._writableState;return"function"==typeof A?(J=A,A=null,ie=null):"function"==typeof ie&&(J=ie,ie=null),null!=A&&this.write(A,ie),He.corked&&(He.corked=1,this.uncork()),He.ending||function fe(A,ie,J){ie.ending=!0,qe(A,ie),J&&(ie.finished?process.nextTick(J):A.once("finish",J)),ie.ended=!0,A.writable=!1}(this,He,J),this},Object.defineProperty(Me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Me.prototype.destroy=P.destroy,Me.prototype._undestroy=P.undestroy,Me.prototype._destroy=function(A,ie){ie(A)}},2683:(je,me,S)=>{"use strict";var Z;function C(B,b,M){return b=function q(B){var b=function G(B,b){if("object"!=typeof B||null===B)return B;var M=B[Symbol.toPrimitive];if(void 0!==M){var T=M.call(B,b||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(B)}(B,"string");return"symbol"==typeof b?b:String(b)}(b),b in B?Object.defineProperty(B,b,{value:M,enumerable:!0,configurable:!0,writable:!0}):B[b]=M,B}var X=S(7854),_=Symbol("lastResolve"),E=Symbol("lastReject"),F=Symbol("error"),W=Symbol("ended"),P=Symbol("lastPromise"),D=Symbol("handlePromise"),se=Symbol("stream");function x(B,b){return{value:B,done:b}}function k(B){var b=B[_];if(null!==b){var M=B[se].read();null!==M&&(B[P]=null,B[_]=null,B[E]=null,b(x(M,!1)))}}function oe(B){process.nextTick(k,B)}var z=Object.getPrototypeOf(function(){}),ee=Object.setPrototypeOf((C(Z={get stream(){return this[se]},next:function(){var b=this,M=this[F];if(null!==M)return Promise.reject(M);if(this[W])return Promise.resolve(x(void 0,!0));if(this[se].destroyed)return new Promise(function(Me,ae){process.nextTick(function(){b[F]?ae(b[F]):Me(x(void 0,!0))})});var le,T=this[P];if(T)le=new Promise(function $(B,b){return function(M,T){B.then(function(){b[W]?M(x(void 0,!0)):b[D](M,T)},T)}}(T,this));else{var j=this[se].read();if(null!==j)return Promise.resolve(x(j,!1));le=new Promise(this[D])}return this[P]=le,le}},Symbol.asyncIterator,function(){return this}),C(Z,"return",function(){var b=this;return new Promise(function(M,T){b[se].destroy(null,function(le){le?T(le):M(x(void 0,!0))})})}),Z),z);je.exports=function(b){var M,T=Object.create(ee,(C(M={},se,{value:b,writable:!0}),C(M,_,{value:null,writable:!0}),C(M,E,{value:null,writable:!0}),C(M,F,{value:null,writable:!0}),C(M,W,{value:b._readableState.endEmitted,writable:!0}),C(M,D,{value:function(j,Me){var ae=T[se].read();ae?(T[P]=null,T[_]=null,T[E]=null,j(x(ae,!1))):(T[_]=j,T[E]=Me)},writable:!0}),M));return T[P]=null,X(b,function(le){if(le&&"ERR_STREAM_PREMATURE_CLOSE"!==le.code){var j=T[E];return null!==j&&(T[P]=null,T[_]=null,T[E]=null,j(le)),void(T[F]=le)}var Me=T[_];null!==Me&&(T[P]=null,T[_]=null,T[E]=null,Me(x(void 0,!0))),T[W]=!0}),b.on("readable",oe.bind(null,T)),T}},5225:(je,me,S)=>{"use strict";function Z(oe,$){var z=Object.keys(oe);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(oe);$&&(ee=ee.filter(function(Y){return Object.getOwnPropertyDescriptor(oe,Y).enumerable})),z.push.apply(z,ee)}return z}function C(oe){for(var $=1;$<arguments.length;$++){var z=null!=arguments[$]?arguments[$]:{};$%2?Z(Object(z),!0).forEach(function(ee){q(oe,ee,z[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(z)):Z(Object(z)).forEach(function(ee){Object.defineProperty(oe,ee,Object.getOwnPropertyDescriptor(z,ee))})}return oe}function q(oe,$,z){return($=E($))in oe?Object.defineProperty(oe,$,{value:z,enumerable:!0,configurable:!0,writable:!0}):oe[$]=z,oe}function X(oe,$){for(var z=0;z<$.length;z++){var ee=$[z];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(oe,E(ee.key),ee)}}function E(oe){var $=function F(oe,$){if("object"!=typeof oe||null===oe)return oe;var z=oe[Symbol.toPrimitive];if(void 0!==z){var ee=z.call(oe,$||"default");if("object"!=typeof ee)return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===$?String:Number)(oe)}(oe,"string");return"symbol"==typeof $?$:String($)}var P=S(3838).Buffer,se=S(3779).inspect,x=se&&se.custom||"inspect";function k(oe,$,z){P.prototype.copy.call(oe,$,z)}je.exports=function(){function oe(){(function G(oe,$){if(!(oe instanceof $))throw new TypeError("Cannot call a class as a function")})(this,oe),this.head=null,this.tail=null,this.length=0}return function _(oe,$,z){$&&X(oe.prototype,$),z&&X(oe,z),Object.defineProperty(oe,"prototype",{writable:!1})}(oe,[{key:"push",value:function(z){var ee={data:z,next:null};this.length>0?this.tail.next=ee:this.head=ee,this.tail=ee,++this.length}},{key:"unshift",value:function(z){var ee={data:z,next:this.head};0===this.length&&(this.tail=ee),this.head=ee,++this.length}},{key:"shift",value:function(){if(0!==this.length){var z=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,z}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(z){if(0===this.length)return"";for(var ee=this.head,Y=""+ee.data;ee=ee.next;)Y+=z+ee.data;return Y}},{key:"concat",value:function(z){if(0===this.length)return P.alloc(0);for(var ee=P.allocUnsafe(z>>>0),Y=this.head,B=0;Y;)k(Y.data,ee,B),B+=Y.data.length,Y=Y.next;return ee}},{key:"consume",value:function(z,ee){var Y;return z<this.head.data.length?(Y=this.head.data.slice(0,z),this.head.data=this.head.data.slice(z)):Y=z===this.head.data.length?this.shift():ee?this._getString(z):this._getBuffer(z),Y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(z){var ee=this.head,Y=1,B=ee.data;for(z-=B.length;ee=ee.next;){var b=ee.data,M=z>b.length?b.length:z;if(B+=M===b.length?b:b.slice(0,z),0==(z-=M)){M===b.length?(++Y,this.head=ee.next?ee.next:this.tail=null):(this.head=ee,ee.data=b.slice(M));break}++Y}return this.length-=Y,B}},{key:"_getBuffer",value:function(z){var ee=P.allocUnsafe(z),Y=this.head,B=1;for(Y.data.copy(ee),z-=Y.data.length;Y=Y.next;){var b=Y.data,M=z>b.length?b.length:z;if(b.copy(ee,ee.length-z,0,M),0==(z-=M)){M===b.length?(++B,this.head=Y.next?Y.next:this.tail=null):(this.head=Y,Y.data=b.slice(M));break}++B}return this.length-=B,ee}},{key:x,value:function(z,ee){return se(this,C(C({},ee),{},{depth:0,customInspect:!1}))}}]),oe}()},8152:je=>{"use strict";function S(X,_){q(X,_),Z(X)}function Z(X){X._writableState&&!X._writableState.emitClose||X._readableState&&!X._readableState.emitClose||X.emit("close")}function q(X,_){X.emit("error",_)}je.exports={destroy:function me(X,_){var E=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(X):X&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(q,this,X)):process.nextTick(q,this,X)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(X||null,function(P){!_&&P?E._writableState?E._writableState.errorEmitted?process.nextTick(Z,E):(E._writableState.errorEmitted=!0,process.nextTick(S,E,P)):process.nextTick(S,E,P):_?(process.nextTick(Z,E),_(P)):process.nextTick(Z,E)}),this)},undestroy:function C(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function G(X,_){var E=X._readableState,F=X._writableState;E&&E.autoDestroy||F&&F.autoDestroy?X.destroy(_):X.emit("error",_)}}},7854:(je,me,S)=>{"use strict";var Z=S(464).F.ERR_STREAM_PREMATURE_CLOSE;function q(){}je.exports=function X(_,E,F){if("function"==typeof E)return X(_,null,E);E||(E={}),F=function C(_){var E=!1;return function(){if(!E){E=!0;for(var F=arguments.length,W=new Array(F),P=0;P<F;P++)W[P]=arguments[P];_.apply(this,W)}}}(F||q);var W=E.readable||!1!==E.readable&&_.readable,P=E.writable||!1!==E.writable&&_.writable,D=function(){_.writable||x()},se=_._writableState&&_._writableState.finished,x=function(){P=!1,se=!0,W||F.call(_)},k=_._readableState&&_._readableState.endEmitted,oe=function(){W=!1,k=!0,P||F.call(_)},$=function(B){F.call(_,B)},z=function(){var B;return W&&!k?((!_._readableState||!_._readableState.ended)&&(B=new Z),F.call(_,B)):P&&!se?((!_._writableState||!_._writableState.ended)&&(B=new Z),F.call(_,B)):void 0},ee=function(){_.req.on("finish",x)};return function G(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",x),_.on("abort",z),_.req?ee():_.on("request",ee)):P&&!_._writableState&&(_.on("end",D),_.on("close",D)),_.on("end",oe),_.on("finish",x),!1!==E.error&&_.on("error",$),_.on("close",z),function(){_.removeListener("complete",x),_.removeListener("abort",z),_.removeListener("request",ee),_.req&&_.req.removeListener("finish",x),_.removeListener("end",D),_.removeListener("close",D),_.removeListener("finish",x),_.removeListener("end",oe),_.removeListener("error",$),_.removeListener("close",z)}}},7765:je=>{je.exports=function(){throw new Error("Readable.from is not available in the browser")}},6846:(je,me,S)=>{"use strict";var Z,q=S(464).F,G=q.ERR_MISSING_ARGS,X=q.ERR_STREAM_DESTROYED;function _(x){if(x)throw x}function W(x){x()}function P(x,k){return x.pipe(k)}je.exports=function se(){for(var x=arguments.length,k=new Array(x),oe=0;oe<x;oe++)k[oe]=arguments[oe];var $=function D(x){return x.length&&"function"==typeof x[x.length-1]?x.pop():_}(k);if(Array.isArray(k[0])&&(k=k[0]),k.length<2)throw new G("streams");var z,ee=k.map(function(Y,B){var b=B<k.length-1;return function F(x,k,oe,$){$=function C(x){var k=!1;return function(){k||(k=!0,x.apply(void 0,arguments))}}($);var z=!1;x.on("close",function(){z=!0}),void 0===Z&&(Z=S(7854)),Z(x,{readable:k,writable:oe},function(Y){if(Y)return $(Y);z=!0,$()});var ee=!1;return function(Y){if(!z&&!ee){if(ee=!0,function E(x){return x.setHeader&&"function"==typeof x.abort}(x))return x.abort();if("function"==typeof x.destroy)return x.destroy();$(Y||new X("pipe"))}}}(Y,b,B>0,function(T){z||(z=T),T&&ee.forEach(W),!b&&(ee.forEach(W),$(z))})});return k.reduce(P)}},2827:(je,me,S)=>{"use strict";var Z=S(464).F.ERR_INVALID_OPT_VALUE;je.exports={getHighWaterMark:function q(G,X,_,E){var F=function C(G,X,_){return null!=G.highWaterMark?G.highWaterMark:X?G[_]:null}(X,E,_);if(null!=F){if(!isFinite(F)||Math.floor(F)!==F||F<0)throw new Z(E?_:"highWaterMark",F);return Math.floor(F)}return G.objectMode?16:16384}}},2601:(je,me,S)=>{je.exports=S(4356).EventEmitter},8454:(je,me,S)=>{"use strict";var Z=S(4272).Buffer,C=Z.isEncoding||function(ee){switch((ee=""+ee)&&ee.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function X(ee){var Y;switch(this.encoding=function G(ee){var Y=function q(ee){if(!ee)return"utf8";for(var Y;;)switch(ee){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ee;default:if(Y)return;ee=(""+ee).toLowerCase(),Y=!0}}(ee);if("string"!=typeof Y&&(Z.isEncoding===C||!C(ee)))throw new Error("Unknown encoding: "+ee);return Y||ee}(ee),this.encoding){case"utf16le":this.text=se,this.end=x,Y=4;break;case"utf8":this.fillLast=W,Y=4;break;case"base64":this.text=k,this.end=oe,Y=3;break;default:return this.write=$,void(this.end=z)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Z.allocUnsafe(Y)}function _(ee){return ee<=127?0:ee>>5==6?2:ee>>4==14?3:ee>>3==30?4:ee>>6==2?-1:-2}function W(ee){var Y=this.lastTotal-this.lastNeed,B=function F(ee,Y,B){if(128!=(192&Y[0]))return ee.lastNeed=0,"\ufffd";if(ee.lastNeed>1&&Y.length>1){if(128!=(192&Y[1]))return ee.lastNeed=1,"\ufffd";if(ee.lastNeed>2&&Y.length>2&&128!=(192&Y[2]))return ee.lastNeed=2,"\ufffd"}}(this,ee);return void 0!==B?B:this.lastNeed<=ee.length?(ee.copy(this.lastChar,Y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ee.copy(this.lastChar,Y,0,ee.length),void(this.lastNeed-=ee.length))}function se(ee,Y){if((ee.length-Y)%2==0){var B=ee.toString("utf16le",Y);if(B){var b=B.charCodeAt(B.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ee[ee.length-1],ee.toString("utf16le",Y,ee.length-1)}function x(ee){var Y=ee&&ee.length?this.write(ee):"";return this.lastNeed?Y+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):Y}function k(ee,Y){var B=(ee.length-Y)%3;return 0===B?ee.toString("base64",Y):(this.lastNeed=3-B,this.lastTotal=3,1===B?this.lastChar[0]=ee[ee.length-1]:(this.lastChar[0]=ee[ee.length-2],this.lastChar[1]=ee[ee.length-1]),ee.toString("base64",Y,ee.length-B))}function oe(ee){var Y=ee&&ee.length?this.write(ee):"";return this.lastNeed?Y+this.lastChar.toString("base64",0,3-this.lastNeed):Y}function $(ee){return ee.toString(this.encoding)}function z(ee){return ee&&ee.length?this.write(ee):""}me.StringDecoder=X,X.prototype.write=function(ee){if(0===ee.length)return"";var Y,B;if(this.lastNeed){if(void 0===(Y=this.fillLast(ee)))return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<ee.length?Y?Y+this.text(ee,B):this.text(ee,B):Y||""},X.prototype.end=function D(ee){var Y=ee&&ee.length?this.write(ee):"";return this.lastNeed?Y+"\ufffd":Y},X.prototype.text=function P(ee,Y){var B=function E(ee,Y,B){var b=Y.length-1;if(b<B)return 0;var M=_(Y[b]);return M>=0?(M>0&&(ee.lastNeed=M-1),M):--b<B||-2===M?0:(M=_(Y[b]))>=0?(M>0&&(ee.lastNeed=M-2),M):--b<B||-2===M?0:(M=_(Y[b]))>=0?(M>0&&(2===M?M=0:ee.lastNeed=M-3),M):0}(this,ee,Y);if(!this.lastNeed)return ee.toString("utf8",Y);this.lastTotal=B;var b=ee.length-(B-this.lastNeed);return ee.copy(this.lastChar,0,b),ee.toString("utf8",Y,b)},X.prototype.fillLast=function(ee){if(this.lastNeed<=ee.length)return ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ee.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ee.length),this.lastNeed-=ee.length}},4272:(je,me,S)=>{var Z=S(3838),C=Z.Buffer;function q(X,_){for(var E in X)_[E]=X[E]}function G(X,_,E){return C(X,_,E)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?je.exports=Z:(q(Z,me),me.Buffer=G),G.prototype=Object.create(C.prototype),q(C,G),G.from=function(X,_,E){if("number"==typeof X)throw new TypeError("Argument must not be a number");return C(X,_,E)},G.alloc=function(X,_,E){if("number"!=typeof X)throw new TypeError("Argument must be a number");var F=C(X);return void 0!==_?"string"==typeof E?F.fill(_,E):F.fill(_):F.fill(0),F},G.allocUnsafe=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return C(X)},G.allocUnsafeSlow=function(X){if("number"!=typeof X)throw new TypeError("Argument must be a number");return Z.SlowBuffer(X)}},3398:je=>{function S(Z){try{if(!global.localStorage)return!1}catch{return!1}var C=global.localStorage[Z];return null!=C&&"true"===String(C).toLowerCase()}je.exports=function me(Z,C){if(S("noDeprecation"))return Z;var q=!1;return function G(){if(!q){if(S("throwDeprecation"))throw new Error(C);S("traceDeprecation")?console.trace(C):console.warn(C),q=!0}return Z.apply(this,arguments)}}},8822:je=>{"use strict";je.exports=function(me){me.prototype[Symbol.iterator]=function*(){for(let S=this.head;S;S=S.next)yield S.value}}},3748:(je,me,S)=>{"use strict";function Z(_){var E=this;if(E instanceof Z||(E=new Z),E.tail=null,E.head=null,E.length=0,_&&"function"==typeof _.forEach)_.forEach(function(P){E.push(P)});else if(arguments.length>0)for(var F=0,W=arguments.length;F<W;F++)E.push(arguments[F]);return E}function C(_,E,F){var W=E===_.head?new X(F,null,E,_):new X(F,E,E.next,_);return null===W.next&&(_.tail=W),null===W.prev&&(_.head=W),_.length++,W}function q(_,E){_.tail=new X(E,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function G(_,E){_.head=new X(E,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function X(_,E,F,W){if(!(this instanceof X))return new X(_,E,F,W);this.list=W,this.value=_,E?(E.next=this,this.prev=E):this.prev=null,F?(F.prev=this,this.next=F):this.next=null}je.exports=Z,Z.Node=X,Z.create=Z,Z.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var E=_.next,F=_.prev;return E&&(E.prev=F),F&&(F.next=E),_===this.head&&(this.head=E),_===this.tail&&(this.tail=F),_.list.length--,_.next=null,_.prev=null,_.list=null,E},Z.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var E=this.head;_.list=this,_.next=E,E&&(E.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},Z.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var E=this.tail;_.list=this,_.prev=E,E&&(E.next=_),this.tail=_,this.head||(this.head=_),this.length++}},Z.prototype.push=function(){for(var _=0,E=arguments.length;_<E;_++)q(this,arguments[_]);return this.length},Z.prototype.unshift=function(){for(var _=0,E=arguments.length;_<E;_++)G(this,arguments[_]);return this.length},Z.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},Z.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},Z.prototype.forEach=function(_,E){E=E||this;for(var F=this.head,W=0;null!==F;W++)_.call(E,F.value,W,this),F=F.next},Z.prototype.forEachReverse=function(_,E){E=E||this;for(var F=this.tail,W=this.length-1;null!==F;W--)_.call(E,F.value,W,this),F=F.prev},Z.prototype.get=function(_){for(var E=0,F=this.head;null!==F&&E<_;E++)F=F.next;if(E===_&&null!==F)return F.value},Z.prototype.getReverse=function(_){for(var E=0,F=this.tail;null!==F&&E<_;E++)F=F.prev;if(E===_&&null!==F)return F.value},Z.prototype.map=function(_,E){E=E||this;for(var F=new Z,W=this.head;null!==W;)F.push(_.call(E,W.value,this)),W=W.next;return F},Z.prototype.mapReverse=function(_,E){E=E||this;for(var F=new Z,W=this.tail;null!==W;)F.push(_.call(E,W.value,this)),W=W.prev;return F},Z.prototype.reduce=function(_,E){var F,W=this.head;if(arguments.length>1)F=E;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");W=this.head.next,F=this.head.value}for(var P=0;null!==W;P++)F=_(F,W.value,P),W=W.next;return F},Z.prototype.reduceReverse=function(_,E){var F,W=this.tail;if(arguments.length>1)F=E;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");W=this.tail.prev,F=this.tail.value}for(var P=this.length-1;null!==W;P--)F=_(F,W.value,P),W=W.prev;return F},Z.prototype.toArray=function(){for(var _=new Array(this.length),E=0,F=this.head;null!==F;E++)_[E]=F.value,F=F.next;return _},Z.prototype.toArrayReverse=function(){for(var _=new Array(this.length),E=0,F=this.tail;null!==F;E++)_[E]=F.value,F=F.prev;return _},Z.prototype.slice=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var F=new Z;if(E<_||E<0)return F;_<0&&(_=0),E>this.length&&(E=this.length);for(var W=0,P=this.head;null!==P&&W<_;W++)P=P.next;for(;null!==P&&W<E;W++,P=P.next)F.push(P.value);return F},Z.prototype.sliceReverse=function(_,E){(E=E||this.length)<0&&(E+=this.length),(_=_||0)<0&&(_+=this.length);var F=new Z;if(E<_||E<0)return F;_<0&&(_=0),E>this.length&&(E=this.length);for(var W=this.length,P=this.tail;null!==P&&W>E;W--)P=P.prev;for(;null!==P&&W>_;W--,P=P.prev)F.push(P.value);return F},Z.prototype.splice=function(_,E,...F){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var W=0,P=this.head;null!==P&&W<_;W++)P=P.next;var D=[];for(W=0;P&&W<E;W++)D.push(P.value),P=this.removeNode(P);for(null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev),W=0;W<F.length;W++)P=C(this,P,F[W]);return D},Z.prototype.reverse=function(){for(var _=this.head,E=this.tail,F=_;null!==F;F=F.prev){var W=F.prev;F.prev=F.next,F.next=W}return this.head=E,this.tail=_,this};try{S(8822)(Z)}catch{}},1492:()=>{},2435:()=>{},7789:()=>{},3779:()=>{},7199:()=>{},7490:(je,me,S)=>{var Z=S(5172);function C(q){var G,X;function _(F,W){try{var P=q[F](W),D=P.value,se=D instanceof Z;Promise.resolve(se?D.v:D).then(function(x){if(se){var k="return"===F?"return":"next";if(!D.k||x.done)return _(k,x);x=q[k](x).value}E(P.done?"return":"normal",x)},function(x){_("throw",x)})}catch(x){E("throw",x)}}function E(F,W){switch(F){case"return":G.resolve({value:W,done:!0});break;case"throw":G.reject(W);break;default:G.resolve({value:W,done:!1})}(G=G.next)?_(G.key,G.arg):X=null}this._invoke=function(F,W){return new Promise(function(P,D){var se={key:F,arg:W,resolve:P,reject:D,next:null};X?X=X.next=se:(G=X=se,_(F,W))})},"function"!=typeof q.return&&(this.return=void 0)}C.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},C.prototype.next=function(q){return this._invoke("next",q)},C.prototype.throw=function(q){return this._invoke("throw",q)},C.prototype.return=function(q){return this._invoke("return",q)},je.exports=C,je.exports.__esModule=!0,je.exports.default=je.exports},5172:je=>{je.exports=function me(S,Z){this.v=S,this.k=Z},je.exports.__esModule=!0,je.exports.default=je.exports},3513:(je,me,S)=>{var Z=S(5172);je.exports=function C(q){var G={},X=!1;function _(E,F){return X=!0,F=new Promise(function(W){W(q[E](F))}),{done:!1,value:new Z(F,1)}}return G[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},G.next=function(E){return X?(X=!1,E):_("next",E)},"function"==typeof q.throw&&(G.throw=function(E){if(X)throw X=!1,E;return _("throw",E)}),"function"==typeof q.return&&(G.return=function(E){return X?(X=!1,E):_("return",E)}),G},je.exports.__esModule=!0,je.exports.default=je.exports},2881:je=>{function S(Z){function C(q){if(Object(q)!==q)return Promise.reject(new TypeError(q+" is not an object."));var G=q.done;return Promise.resolve(q.value).then(function(X){return{value:X,done:G}})}return(S=function(G){this.s=G,this.n=G.next}).prototype={s:null,n:null,next:function(){return C(this.n.apply(this.s,arguments))},return:function(G){var X=this.s.return;return void 0===X?Promise.resolve({value:G,done:!0}):C(X.apply(this.s,arguments))},throw:function(G){var X=this.s.return;return void 0===X?Promise.reject(G):C(X.apply(this.s,arguments))}},new S(Z)}je.exports=function me(Z){var C,q,G,X=2;for(typeof Symbol<"u"&&(q=Symbol.asyncIterator,G=Symbol.iterator);X--;){if(q&&null!=(C=Z[q]))return C.call(Z);if(G&&null!=(C=Z[G]))return new S(C.call(Z));q="@@asyncIterator",G="@@iterator"}throw new TypeError("Object is not async iterable")},je.exports.__esModule=!0,je.exports.default=je.exports},9293:je=>{function me(Z,C,q,G,X,_,E){try{var F=Z[_](E),W=F.value}catch(P){return void q(P)}F.done?C(W):Promise.resolve(W).then(G,X)}je.exports=function S(Z){return function(){var C=this,q=arguments;return new Promise(function(G,X){var _=Z.apply(C,q);function E(W){me(_,G,X,E,F,"next",W)}function F(W){me(_,G,X,E,F,"throw",W)}E(void 0)})}},je.exports.__esModule=!0,je.exports.default=je.exports},3344:(je,me,S)=>{var Z=S(5172);je.exports=function C(q){return new Z(q,0)},je.exports.__esModule=!0,je.exports.default=je.exports},2958:(je,me,S)=>{var Z=S(7490);je.exports=function C(q){return function(){return new Z(q.apply(this,arguments))}},je.exports.__esModule=!0,je.exports.default=je.exports}},je=>{je(je.s=3527)}]);