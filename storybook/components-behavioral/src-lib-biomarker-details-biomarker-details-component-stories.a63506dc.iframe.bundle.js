(self.webpackChunkhra_ui=self.webpackChunkhra_ui||[]).push([[971],{"./libs/components/atoms/src/lib/label-box/label-box.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>LabelBoxComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var label_box_componentngResource=__webpack_require__("./libs/components/atoms/src/lib/label-box/label-box.component.scss?ngResource"),label_box_componentngResource_default=__webpack_require__.n(label_box_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2020/common.mjs");let LabelBoxComponent=class LabelBoxComponent{};LabelBoxComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-label-box",standalone:!0,imports:[common.CommonModule],template:'<ng-content></ng-content>\n\n<div class="filler"></div>\n\n<ng-content select=".end"></ng-content>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[label_box_componentngResource_default()]})],LabelBoxComponent)},"./libs/services/src/lib/tissue-ftu/tissue-ftu.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>TissueFtuService});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),zod__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zod/lib/index.mjs");zod__WEBPACK_IMPORTED_MODULE_0__.z.object({representation_of:zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),object:zod__WEBPACK_IMPORTED_MODULE_0__.z.object({file:zod__WEBPACK_IMPORTED_MODULE_0__.z.string()})});let TissueFtuService=class TissueFtuService{};TissueFtuService=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injectable)()],TissueFtuService)},"./libs/state/src/lib/cell-summary/cell-summary.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Do:()=>ComputeAggregate,P$:()=>SetData,q5:()=>Load});const Action=(0,__webpack_require__("./libs/cdk/state/src/actions/actions.ts").W)("ResourceRegistry");class SetData extends(Action("SetData")){constructor(data){super(),this.data=data}}class Load extends(Action("Load")){constructor(id){super(),this.id=id}}class ComputeAggregate extends(Action("ComputeAggregate")){constructor(summaries){super(),this.summaries=summaries}}},"./libs/state/src/lib/resource-types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$u:()=>Size,C3:()=>Metrics,ph:()=>Gradient});var _hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./libs/cdk/state/src/resource-registry/resource-registry.model.ts");const Metrics=(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.h_)("metrics",(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.xm)()),Gradient=(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.h_)("gradient",(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.xm)()),Size=(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.h_)("size",(0,_hra_ui_cdk_state__WEBPACK_IMPORTED_MODULE_0__.xm)())},"./libs/components/atoms/src/lib/gradient-legend/gradient-legend.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}\n:host .gradient-bar {\n  height: 1.5rem;\n  width: 100%;\n}\n:host .legend {\n  display: flex;\n}\n:host .legend .filler {\n  flex-grow: 1;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/atoms/src/lib/label-box/label-box.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  align-items: center;\n  padding: 0.75rem 2rem;\n  background: #f8f9fa;\n}\n:host .filler {\n  flex-grow: 1;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/atoms/src/lib/size-legend/size-legend.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  flex-direction: row;\n  column-gap: 2rem;\n}\n:host .item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  line-height: 0.5rem;\n}\n:host .item .circle {\n  height: var(--size);\n  width: var(--size);\n  border-radius: 50%;\n  border: 0.125rem solid #75838f;\n}\n:host .item .label {\n  margin-top: 0.5rem;\n}\n:host .item .filler {\n  flex-grow: 1;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/behavioral/src/lib/biomarker-details/biomarker-details.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,':host {\n  display: grid;\n  grid-template-columns: 21.5rem 21.5rem auto;\n  grid-template-rows: 3.5rem auto 3rem 5rem 3.5rem auto;\n  grid-template-areas: "table-header table-header table-header" "table table table" "gradient-legend-header size-legend-header ." "gradient-legend size-legend ." "source-list-header source-list-header source-list-header" "source-list source-list source-list";\n}\n:host .table-header {\n  grid-area: table-header;\n  border-bottom: 0.063rem solid #d3d3d3;\n}\n:host .table {\n  grid-area: table;\n  max-width: 100%;\n  overflow: auto;\n}\n:host .table ::ng-deep .table-tab-header {\n  padding-left: 1rem;\n  padding-right: 1rem;\n  border-left: 0.063rem solid #d3d3d3;\n}\n:host .table ::ng-deep .table-tab-header:last-child {\n  border-right: 0.063rem solid #d3d3d3;\n}\n:host .table ::ng-deep .table-tab-header.mdc-tab-indicator--active {\n  background-color: #f8f9fa;\n}\n:host .legend-header {\n  color: var(--dark-primary-text);\n  border-top: 0.063rem solid #d3d3d3;\n  border-bottom: 0.063rem solid #d3d3d3;\n  border-right: 0.063rem solid #d3d3d3;\n}\n:host .legend-header.gradient {\n  grid-area: gradient-legend-header;\n}\n:host .legend-header.size {\n  grid-area: size-legend-header;\n}\n:host .legend-header .icon {\n  margin-left: 0.6rem;\n}\n:host .legend {\n  padding: 1rem 2rem;\n  border-right: 0.063rem solid #d3d3d3;\n}\n:host .legend.gradient {\n  grid-area: gradient-legend;\n}\n:host .legend.gradient .content {\n  width: 10rem;\n}\n:host .legend.size {\n  grid-area: size-legend;\n}\n:host .source-list-header {\n  grid-area: source-list-header;\n  color: var(--dark-primary-text);\n  border-top: 0.063rem solid #d3d3d3;\n  border-bottom: 0.063rem solid #d3d3d3;\n}\n:host .source-list {\n  grid-area: source-list;\n  padding: 1rem 1.125rem;\n}\n:host .source-list .content {\n  width: min-content;\n}\n\n::ng-deep .biomarker-details.info-tooltip {\n  display: flex;\n  padding: 1rem 1.5rem;\n  border-radius: 0.5rem;\n  box-shadow: 0.063rem 0.125rem;\n  background-color: var(--palette-primary-contrast-500-rgb);\n  max-width: 21rem;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/molecules/src/lib/biomarker-table-data-card/biomarker-table-data-card.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  padding: 1rem 1.5rem;\n  border-radius: 0.5rem;\n  box-shadow: 0.063rem 0.125rem 1rem 0.125rem rgba(0, 0, 0, 0.16);\n  background-color: var(--palette-primary-contrast-500-rgb);\n}\n:host .mat-mdc-cell {\n  padding: 0.25rem 0rem;\n}\n:host .mat-mdc-row {\n  height: -moz-fit-content;\n  height: fit-content;\n}\n:host .no-border {\n  border: none;\n}\n:host .label {\n  color: #243142;\n  padding-right: 3rem;\n}\n:host .value {\n  color: #4c5a69;\n}\n:host .sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/molecules/src/lib/biomarker-table-data-icon/biomarker-table-data-icon.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  border-radius: 50%;\n  --radius: 0.625rem;\n  width: var(--radius);\n  height: var(--radius);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/molecules/src/lib/source-list/source-list.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}\n:host .mat-mdc-cell {\n  vertical-align: top;\n  border: none;\n  padding: 0.25rem 0.875rem;\n  font-size: 1rem;\n}\n:host .sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/organisms/src/lib/biomarker-table/biomarker-table.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}\n:host .sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0;\n}\n:host .table th {\n  background-color: #fff7f8;\n  color: #59264d;\n  text-align: right;\n  border-top: 0.063rem solid #d3d3d3;\n  border-bottom: 0.063rem solid #d3d3d3;\n  border-left: 0.063rem solid #d3d3d3;\n}\n:host .table td {\n  border-bottom: 0.063rem solid #d3d3d3;\n  border-left: 0.063rem solid #d3d3d3;\n}\n:host .table tr:first-child td {\n  border-top: 0.063rem solid #d3d3d3;\n}\n:host tr > td:first-child {\n  text-align: left;\n  padding: 0 2rem;\n}\n:host tr > th:first-child {\n  text-align: left;\n  padding: 0 2rem;\n}\n:host tr > td:last-of-type {\n  border-right: 0.063rem solid #d3d3d3;\n}\n:host tr > th:last-of-type {\n  border-right: 0.063rem solid #d3d3d3;\n}\n:host .type {\n  height: 3rem;\n  max-width: 26rem;\n  min-width: 17rem;\n  border-radius: 0rem;\n  white-space: nowrap;\n}\n:host .count {\n  text-align: right;\n  height: 3rem;\n  min-width: 6.5rem;\n}\n:host .icon-header {\n  max-width: 5rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n:host .icon-cell {\n  max-width: 5rem;\n  min-height: 3rem;\n}\n:host .icon-cell .icon {\n  margin: auto;\n}\n\n::ng-deep .biomarker-table-hover.full-column-name {\n  display: flex;\n  padding: 1rem 1.5rem;\n  border-radius: 0.5rem;\n  box-shadow: 0.063rem 0.125rem 1rem 0.125rem rgba(0, 0, 0, 0.16);\n  background-color: var(--palette-primary-contrast-500-rgb);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/components/behavioral/src/lib/biomarker-details/biomarker-details.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,createDataItem:()=>createDataItem,default:()=>biomarker_details_component_stories});var icon=__webpack_require__("./node_modules/@angular/material/fesm2020/icon.mjs"),resource_registry_state=__webpack_require__("./libs/cdk/state/src/resource-registry/resource-registry.state.ts"),resource_registry_actions=__webpack_require__("./libs/cdk/state/src/resource-registry/resource-registry.actions.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),ngxs_store=__webpack_require__("./node_modules/@ngxs/store/fesm2015/ngxs-store.js"),immer_esm=__webpack_require__("./node_modules/immer/dist/immer.esm.mjs");class Add{constructor(sourceList){this.sourceList=sourceList}}Add.type="[SourceList] Add";class Set{constructor(sourceList){this.sourceList=sourceList}}Set.type="[SourceList] Set";let SourceListState=class SourceListState{add({setState},{sourceList}){setState((0,immer_esm.Uy)((draft=>{draft.push(...sourceList)})))}set({setState},{sourceList}){setState(sourceList)}};(0,tslib_es6.gn)([(0,ngxs_store.aU)(Add),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object,Add]),(0,tslib_es6.w6)("design:returntype",void 0)],SourceListState.prototype,"add",null),(0,tslib_es6.gn)([(0,ngxs_store.aU)(Set),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object,Set]),(0,tslib_es6.w6)("design:returntype",void 0)],SourceListState.prototype,"set",null),SourceListState=(0,tslib_es6.gn)([(0,ngxs_store.ZM)({name:"sourceList",defaults:[]}),(0,core.Injectable)()],SourceListState);var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs");var _class,biomarker_details_componentngResource=__webpack_require__("./libs/components/behavioral/src/lib/biomarker-details/biomarker-details.component.scss?ngResource"),biomarker_details_componentngResource_default=__webpack_require__.n(biomarker_details_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2020/common.mjs"),tabs=__webpack_require__("./node_modules/@angular/material/fesm2020/tabs.mjs"),overlay=__webpack_require__("./node_modules/@angular/cdk/fesm2020/overlay.mjs"),portal=__webpack_require__("./node_modules/@angular/cdk/fesm2020/portal.mjs");let HoverDirective=((_class=class HoverDirective{constructor(){this.el=(0,core.inject)(core.ElementRef).nativeElement,this.overlayRef=(0,core.inject)(overlay.aV).create({positionStrategy:(0,core.inject)(overlay.aV).position().flexibleConnectedTo(this.el).withPositions([new overlay.tR({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),new overlay.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new overlay.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new overlay.tR({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"})]).withPush(!0)}),this.viewContainerRef=(0,core.inject)(core.ViewContainerRef)}set content(content){this.portal=new portal.UE(content,this.viewContainerRef,this._data),this.updateContent()}set data(data){this._data={$implicit:data},this.portal&&(this.portal.context=this._data,this.updateContent())}startHover(){const{overlayRef,portal}=this;!overlayRef.hasAttached()&&portal&&overlayRef.attach(portal)}endHover(){const{overlayRef}=this;overlayRef.hasAttached()&&overlayRef.detach()}updateContent(){const{overlayRef,portal}=this;overlayRef.hasAttached()&&portal&&(overlayRef.detach(),overlayRef.attach(portal))}}).propDecorators={content:[{type:core.Input,args:["hraHover"]}],data:[{type:core.Input,args:["hraHoverData"]}],startHover:[{type:core.HostListener,args:["mouseover"]}],endHover:[{type:core.HostListener,args:["mouseout"]}]},_class);HoverDirective=(0,tslib_es6.gn)([(0,core.Directive)({selector:"[hraHover]",standalone:!0})],HoverDirective);var select_snapshot=__webpack_require__("./libs/cdk/injectors/src/lib/select/select-snapshot.ts"),resource_registry_selectors=__webpack_require__("./libs/cdk/state/src/resource-registry/resource-registry.selectors.ts");var gradient_legend_component_class,gradient_legend_componentngResource=__webpack_require__("./libs/components/atoms/src/lib/gradient-legend/gradient-legend.component.scss?ngResource"),gradient_legend_componentngResource_default=__webpack_require__.n(gradient_legend_componentngResource);let GradientLegendComponent=((gradient_legend_component_class=class GradientLegendComponent{constructor(){this.gradient=[]}get gradientCss(){return`linear-gradient(270deg, ${this.gradient.map((({color,percentage})=>`${color} ${percentage}%`)).join(",")})`}}).propDecorators={gradient:[{type:core.Input}]},gradient_legend_component_class);GradientLegendComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-gradient-legend",standalone:!0,imports:[common.CommonModule],template:'<div class="gradient-bar" [style.background]="gradientCss"></div>\n<div class="legend">\n  <div class="start">0.0</div>\n  <div class="filler"></div>\n  <div class="end">1.0</div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[gradient_legend_componentngResource_default()]})],GradientLegendComponent);var label_box_component=__webpack_require__("./libs/components/atoms/src/lib/label-box/label-box.component.ts");var size_legend_component_class,size_legend_componentngResource=__webpack_require__("./libs/components/atoms/src/lib/size-legend/size-legend.component.scss?ngResource"),size_legend_componentngResource_default=__webpack_require__.n(size_legend_componentngResource);let SizeLegendComponent=((size_legend_component_class=class SizeLegendComponent{constructor(){this.sizes=[]}}).propDecorators={sizes:[{type:core.Input}]},size_legend_component_class);SizeLegendComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-size-legend",standalone:!0,imports:[common.CommonModule],template:'<div *ngFor="let text of sizes" class="item">\n  <div class="filler"></div>\n  <div class="circle" style="--size: {{ text.radius }}rem"></div>\n  <div class="filler"></div>\n  <div class="label">{{ text.label }}</div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[size_legend_componentngResource_default()]})],SizeLegendComponent);var biomarker_table_data_card_component_class,biomarker_table_data_card_componentngResource=__webpack_require__("./libs/components/molecules/src/lib/biomarker-table-data-card/biomarker-table-data-card.component.scss?ngResource"),biomarker_table_data_card_componentngResource_default=__webpack_require__.n(biomarker_table_data_card_componentngResource),table=__webpack_require__("./node_modules/@angular/material/fesm2020/table.mjs");let BiomarkerTableDataCardComponent=((biomarker_table_data_card_component_class=class BiomarkerTableDataCardComponent{constructor(){this.data=[],this.sectionItems=[]}ngOnChanges(changes){"data"in changes&&this.updateSectionItems()}updateSectionItems(){const newSectionItems=[];this.data.forEach(((section,sectionIndex)=>{section.forEach(((item,itemIndex)=>{newSectionItems.push({data:item,section:sectionIndex,isLastItem:itemIndex===section.length-1})}))})),this.sectionItems=newSectionItems}}).propDecorators={data:[{type:core.Input}]},biomarker_table_data_card_component_class);BiomarkerTableDataCardComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-biomarker-table-data-card",standalone:!0,imports:[common.CommonModule,table.p0],template:'<div class="no-data" *ngIf="sectionItems.length === 0">No data</div>\n<table mat-table *ngIf="sectionItems.length > 0" [dataSource]="sectionItems">\n  <caption class="sr-only">\n    Biomarker Table Data Card\n  </caption>\n\n  \x3c!-- Label Column --\x3e\n  <ng-container matColumnDef="label">\n    <th class="sr-only" mat-header-cell *matHeaderCellDef>Item Label</th>\n    <td class="label" mat-cell *matCellDef="let element" [class.no-border]="!element.isLastItem">\n      {{ element.data.label }}\n    </td>\n  </ng-container>\n\n  \x3c!-- Value Column --\x3e\n  <ng-container matColumnDef="value">\n    <th class="sr-only" mat-header-cell *matHeaderCellDef>Item Value</th>\n    <td class="value" mat-cell *matCellDef="let element" [class.no-border]="!element.isLastItem">\n      {{ element.data.value }}\n    </td>\n  </ng-container>\n\n  <tr mat-row *matRowDef="let row; columns: [\'label\', \'value\']"></tr>\n</table>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[biomarker_table_data_card_componentngResource_default()]})],BiomarkerTableDataCardComponent);var source_list_component_class,source_list_componentngResource=__webpack_require__("./libs/components/molecules/src/lib/source-list/source-list.component.scss?ngResource"),source_list_componentngResource_default=__webpack_require__.n(source_list_componentngResource);let SourceListComponent=((source_list_component_class=class SourceListComponent{constructor(){this.sources=[]}}).propDecorators={sources:[{type:core.Input}]},source_list_component_class);SourceListComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-source-list",standalone:!0,imports:[common.CommonModule,table.p0],template:'<table mat-table [dataSource]="sources">\n  <caption class="sr-only">\n    Source List Table with Title and Links\n  </caption>\n\n  \x3c!-- Position Column --\x3e\n  <ng-container matColumnDef="link">\n    <th class="sr-only" mat-header-cell *matHeaderCellDef>Item Number</th>\n    <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}.</td>\n  </ng-container>\n\n  \x3c!-- Data Column --\x3e\n  <ng-container matColumnDef="title">\n    <th class="sr-only" mat-header-cell *matHeaderCellDef>Title and Link</th>\n    <td mat-cell *matCellDef="let element">\n      {{ element.title }}\n      <br />\n      <a [href]="element.link" target="_blank">{{ element.link }}</a>\n    </td>\n  </ng-container>\n\n  <tr mat-row *matRowDef="let row; columns: [\'link\', \'title\']"></tr>\n</table>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[source_list_componentngResource_default()]})],SourceListComponent);var biomarker_table_data_icon_component_class,biomarker_table_componentngResource=__webpack_require__("./libs/components/organisms/src/lib/biomarker-table/biomarker-table.component.scss?ngResource"),biomarker_table_componentngResource_default=__webpack_require__.n(biomarker_table_componentngResource),biomarker_table_data_icon_componentngResource=__webpack_require__("./libs/components/molecules/src/lib/biomarker-table-data-icon/biomarker-table-data-icon.component.scss?ngResource"),biomarker_table_data_icon_componentngResource_default=__webpack_require__.n(biomarker_table_data_icon_componentngResource);let BiomarkerTableDataIconComponent=((biomarker_table_data_icon_component_class=class BiomarkerTableDataIconComponent{constructor(){this.color="",this.size=0}}).propDecorators={color:[{type:core.HostBinding,args:["style.background-color"]},{type:core.Input}],size:[{type:core.HostBinding,args:["style.--radius.rem"]},{type:core.Input}]},biomarker_table_data_icon_component_class);var biomarker_table_component_class;BiomarkerTableDataIconComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-biomarker-table-data-icon",standalone:!0,imports:[common.CommonModule],template:"",changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[biomarker_table_data_icon_componentngResource_default()]})],BiomarkerTableDataIconComponent);let BiomarkerTableComponent=((biomarker_table_component_class=class BiomarkerTableComponent{constructor(){this.columns=[],this.data=[],this.dataSource=new table.by([])}get columnsWithTypeAndCount(){return["type","count",...this.columns]}ngOnChanges(changes){"data"in changes&&(this.dataSource.data=this.data)}}).propDecorators={columns:[{type:core.Input}],data:[{type:core.Input}]},biomarker_table_component_class);BiomarkerTableComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"hra-biomarker-table",standalone:!0,imports:[common.CommonModule,table.p0,BiomarkerTableDataIconComponent,HoverDirective,BiomarkerTableDataCardComponent],template:'<table class="table" mat-table [dataSource]="dataSource">\n  <caption class="sr-only">\n    Cell type table by Biomarker\n  </caption>\n\n  <ng-container matColumnDef="type">\n    <th mat-header-cell *matHeaderCellDef>Cell Type</th>\n\n    <td class="type" mat-cell *matCellDef="let element">\n      {{ element[0] }}\n    </td>\n  </ng-container>\n\n  <ng-container matColumnDef="count">\n    <th class="count" mat-header-cell *matHeaderCellDef>Cell Count</th>\n\n    <td class="count" mat-cell *matCellDef="let element">\n      {{ element[1] !== undefined ? (element[1] | number) : \'no data\' }}\n    </td>\n  </ng-container>\n\n  <ng-container *ngFor="let column of columns; let index = index" [matColumnDef]="column">\n    <th class="icon-header" mat-header-cell *matHeaderCellDef [hraHover]="columnHover" [hraHoverData]="column">\n      {{ column }}\n    </th>\n\n    <td class="icon-cell" mat-cell *matCellDef="let element">\n      <hra-biomarker-table-data-icon\n        class="icon"\n        *ngIf="element[index + 2] !== undefined"\n        [color]="element[index + 2].color"\n        [size]="element[index + 2].size"\n        [hraHover]="dataHover"\n        [hraHoverData]="element[index + 2].data"\n      >\n      </hra-biomarker-table-data-icon>\n    </td>\n  </ng-container>\n\n  <tr mat-header-row *matHeaderRowDef="columnsWithTypeAndCount"></tr>\n  <tr mat-row *matRowDef="let row; columns: columnsWithTypeAndCount"></tr>\n</table>\n\n<ng-template #columnHover let-columnName>\n  <div class="biomarker-table-hover full-column-name">\n    {{ columnName }}\n  </div>\n</ng-template>\n\n<ng-template #dataHover let-data>\n  <hra-biomarker-table-data-card [data]="data"> </hra-biomarker-table-data-card>\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[biomarker_table_componentngResource_default()]})],BiomarkerTableComponent);var tissue_ftu_service=__webpack_require__("./libs/services/src/lib/tissue-ftu/tissue-ftu.service.ts"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),resource_ids=__webpack_require__("./libs/state/src/lib/resource-ids.ts"),resource_types=__webpack_require__("./libs/state/src/lib/resource-types.ts"),cell_summary_actions=__webpack_require__("./libs/state/src/lib/cell-summary/cell-summary.actions.ts");const DEFAULT_GRADIENTS=[{color:"#000000",percentage:0},{color:"#000000",percentage:1}],DEFAULT_SIZES=[{label:"",radius:1},{label:"",radius:5}];let CellSummaryState=class CellSummaryState{constructor(){this.gradients=(0,select_snapshot.w)(resource_registry_selectors.S.field,resource_ids.Aq,resource_types.ph,"points",DEFAULT_GRADIENTS),this.sizes=(0,select_snapshot.w)(resource_registry_selectors.S.field,resource_ids.MO,resource_types.$u,"sizes",DEFAULT_SIZES),this.dataService=(0,core.inject)(tissue_ftu_service.b)}set({patchState,dispatch},{data}){return patchState({summaries:data}),dispatch(new cell_summary_actions.Do(data))}load({dispatch},{id}){return this.dataService.getCellSummaries(id).pipe((0,switchMap.w)((data=>dispatch(new cell_summary_actions.P$(data)))))}computeAggregate(ctx,action){const summaries=action.summaries,aggregateData={};for(const key in summaries){const label=summaries[key].label,entries=summaries[key].entries,counts=this.getCellCountMap(entries),[rows,columns]=this.getRowsAndColumns(entries,counts);aggregateData[key]={label,columns,rows}}ctx.patchState({aggregate:aggregateData})}getCellCountMap(entries){return entries.reduce(((res,{cell:{id},count})=>(res[id]=res[id]?res[id]+count:count,res)),{})}getRowsAndColumns(entries,counts){const columns=[],columnIndices={},rows={};for(const entry of entries){const{cell:{id:rowId,label:rowLabel},biomarker:{id:columnId,label:columnLabel}}=entry;columnId in columnIndices||(columnIndices[columnId]=columns.length+2,columns.push(columnLabel));const columnIndex=columnIndices[columnId];rowId in rows||(rows[rowId]=[rowLabel,counts[rowId]]);const row=rows[rowId];if(row.length<columnIndex){const start=row.length;row.length=columnIndex+1,row.fill(void 0,start)}row[columnIndex]={color:this.interpolateColor(this.gradients(),entry.percentage),size:this.interpolateSize(this.sizes(),entry.count/counts[rowId]),data:entry.metadata}}return[Object.values(rows),columns]}hexToRgb(hex){const hexValue=hex.toUpperCase().replace("#","");return[parseInt(hexValue.substring(0,2),16),parseInt(hexValue.substring(2,4),16),parseInt(hexValue.substring(4,6),16)]}rgbToHex(rgb){return`#${Math.round(rgb[0]).toString(16).padStart(2,"0")}${Math.round(rgb[1]).toString(16).padStart(2,"0")}${Math.round(rgb[2]).toString(16).padStart(2,"0")}`.toUpperCase()}interpolateColor(points,percentage){const index=points.findIndex((point=>point.percentage>=percentage)),lowPoint=points[index-1],highPoint=points[index],diff=highPoint.percentage-lowPoint.percentage,finalPercentage=(percentage-lowPoint.percentage)/diff,rgb1=this.hexToRgb(lowPoint.color),rgb2=this.hexToRgb(highPoint.color),r=Math.round(rgb1[0]+(rgb2[0]-rgb1[0])*finalPercentage),g=Math.round(rgb1[1]+(rgb2[1]-rgb1[1])*finalPercentage),b=Math.round(rgb1[2]+(rgb2[2]-rgb1[2])*finalPercentage);return this.rgbToHex([r,g,b])}interpolateSize(points,percentage){const{radius:min}=points[0],{radius:max}=points[points.length-1];return min+(max-min)*percentage}};(0,tslib_es6.gn)([(0,ngxs_store.aU)(cell_summary_actions.P$),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object,cell_summary_actions.P$]),(0,tslib_es6.w6)("design:returntype",Observable.y)],CellSummaryState.prototype,"set",null),(0,tslib_es6.gn)([(0,ngxs_store.aU)(cell_summary_actions.q5),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object,cell_summary_actions.q5]),(0,tslib_es6.w6)("design:returntype",Observable.y)],CellSummaryState.prototype,"load",null),(0,tslib_es6.gn)([(0,ngxs_store.aU)(cell_summary_actions.Do),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object,cell_summary_actions.Do]),(0,tslib_es6.w6)("design:returntype",void 0)],CellSummaryState.prototype,"computeAggregate",null),CellSummaryState=(0,tslib_es6.gn)([(0,ngxs_store.ZM)({name:"cellsummary",defaults:{summaries:{},aggregate:{}}}),(0,core.Injectable)()],CellSummaryState);class CellSummarySelectors{static aggregates(state){return Object.values(state.aggregate)}static summaries(state){return state.summaries}}(0,tslib_es6.gn)([(0,ngxs_store.Qf)([CellSummaryState]),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object]),(0,tslib_es6.w6)("design:returntype",Array)],CellSummarySelectors,"aggregates",null),(0,tslib_es6.gn)([(0,ngxs_store.Qf)([CellSummaryState]),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Object]),(0,tslib_es6.w6)("design:returntype",Object)],CellSummarySelectors,"summaries",null);class SourceListSelectors{static getSourceList(state){return state}}(0,tslib_es6.gn)([(0,ngxs_store.Qf)([SourceListState]),(0,tslib_es6.w6)("design:type",Function),(0,tslib_es6.w6)("design:paramtypes",[Array]),(0,tslib_es6.w6)("design:returntype",Array)],SourceListSelectors,"getSourceList",null);let BiomarkerDetailsComponent=class BiomarkerDetailsComponent{constructor(){this.tabs=(0,select_snapshot.g)(CellSummarySelectors.aggregates),this.gradientHoverInfo=(0,select_snapshot.w)(resource_registry_selectors.S.anyText,resource_ids.IO),this.sizeHoverInfo=(0,select_snapshot.w)(resource_registry_selectors.S.anyText,resource_ids.Z9),this.isTableFullScreen=!1,this.gradients=(0,select_snapshot.w)(resource_registry_selectors.S.field,resource_ids.Aq,resource_types.ph,"points",[]),this.sizes=(0,select_snapshot.w)(resource_registry_selectors.S.field,resource_ids.MO,resource_types.$u,"sizes",[]),this.source=(0,select_snapshot.g)(SourceListSelectors.getSourceList)}};function createDataItem(label,value){return{label,value}}BiomarkerDetailsComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"ftu-biomarker-details",standalone:!0,imports:[common.CommonModule,icon.Ps,tabs.Nh,BiomarkerTableComponent,BiomarkerTableDataCardComponent,GradientLegendComponent,HoverDirective,label_box_component.d,SizeLegendComponent,SourceListComponent],template:'<hra-label-box class="table-header">\n  Cell Types by Gene Biomarkers\n  <mat-icon (click)="this.isTableFullScreen = !this.isTableFullScreen" class="end">\n    {{ isTableFullScreen ? \'close_fullscreen\' : \'open_in_full\' }}\n  </mat-icon>\n</hra-label-box>\n\n<mat-tab-group class="table" mat-stretch-tabs="false" color="accent">\n  <mat-tab *ngFor="let tab of tabs()" labelClass="table-tab-header" [label]="tab.label">\n    <hra-biomarker-table [data]="tab.rows" [columns]="tab.columns"></hra-biomarker-table>\n  </mat-tab>\n</mat-tab-group>\n\n<hra-label-box class="legend-header gradient">\n  Biomarker Expression Mean in FTU\n  <mat-icon class="icon" [hraHover]="infoTooltip" [hraHoverData]="gradientHoverInfo()">info_outlined</mat-icon>\n</hra-label-box>\n<div class="legend gradient">\n  <hra-gradient-legend [gradient]="gradients()" class="content"></hra-gradient-legend>\n</div>\n\n<hra-label-box class="legend-header size">\n  Percentage of Cells in FTU\n  <mat-icon class="icon" [hraHover]="infoTooltip" [hraHoverData]="sizeHoverInfo()">info_outlined</mat-icon>\n</hra-label-box>\n<div class="legend size">\n  <hra-size-legend [sizes]="sizes()" class="content"></hra-size-legend>\n</div>\n\n<hra-label-box class="source-list-header">\n  Source Data\n  <mat-icon class="end">expand_more</mat-icon>\n</hra-label-box>\n<div class="source-list">\n  <hra-source-list [sources]="source()" class="content"></hra-source-list>\n</div>\n\n<ng-template #infoTooltip let-tooltip>\n  <div class="biomarker-details info-tooltip">\n    {{ tooltip }}\n  </div>\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[biomarker_details_componentngResource_default()]})],BiomarkerDetailsComponent);const biomarker_details_component_stories={title:"BiomarkerDetailsComponent",component:BiomarkerDetailsComponent,parameters:{state:{states:[resource_registry_state.E,SourceListState],actions:[new resource_registry_actions.AU("assets/resources/gradient.yml"),new resource_registry_actions.AU("assets/resources/size.yml"),new Add([{title:"foobar",link:"abc"}])]}},decorators:[(0,dist.moduleMetadata)({imports:[icon.Ps]})]},Primary=(args=>({props:args})).bind({});Primary.args={},createDataItem.parameters={...createDataItem.parameters,docs:{...createDataItem.parameters?.docs,source:{originalSource:"function createDataItem(label, value) {\n  return {\n    label,\n    value\n  };\n}",...createDataItem.parameters?.docs?.source}}},Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"args => ({\n  props: args\n})",...Primary.parameters?.docs?.source}}}}}]);